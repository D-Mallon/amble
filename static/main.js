function tR(e,t){for(var o=0;o<t.length;o++){const l=t[o];if(typeof l!="string"&&!Array.isArray(l)){for(const h in l)if(h!=="default"&&!(h in e)){const p=Object.getOwnPropertyDescriptor(l,h);p&&Object.defineProperty(e,h,p.get?p:{enumerable:!0,get:()=>l[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CP={exports:{}},ir={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=Symbol.for("react.element"),nR=Symbol.for("react.portal"),rR=Symbol.for("react.fragment"),iR=Symbol.for("react.strict_mode"),oR=Symbol.for("react.profiler"),sR=Symbol.for("react.provider"),aR=Symbol.for("react.context"),lR=Symbol.for("react.forward_ref"),cR=Symbol.for("react.suspense"),uR=Symbol.for("react.memo"),dR=Symbol.for("react.lazy"),yC=Symbol.iterator;function hR(e){return e===null||typeof e!="object"?null:(e=yC&&e[yC]||e["@@iterator"],typeof e=="function"?e:null)}var EP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kP=Object.assign,PP={};function Th(e,t,o){this.props=e,this.context=t,this.refs=PP,this.updater=o||EP}Th.prototype.isReactComponent={};Th.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Th.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function MP(){}MP.prototype=Th.prototype;function Zb(e,t,o){this.props=e,this.context=t,this.refs=PP,this.updater=o||EP}var Xb=Zb.prototype=new MP;Xb.constructor=Zb;kP(Xb,Th.prototype);Xb.isPureReactComponent=!0;var _C=Array.isArray,IP=Object.prototype.hasOwnProperty,Yb={current:null},AP={key:!0,ref:!0,__self:!0,__source:!0};function DP(e,t,o){var l,h={},p=null,_=null;if(t!=null)for(l in t.ref!==void 0&&(_=t.ref),t.key!==void 0&&(p=""+t.key),t)IP.call(t,l)&&!AP.hasOwnProperty(l)&&(h[l]=t[l]);var a=arguments.length-2;if(a===1)h.children=o;else if(1<a){for(var w=Array(a),C=0;C<a;C++)w[C]=arguments[C+2];h.children=w}if(e&&e.defaultProps)for(l in a=e.defaultProps,a)h[l]===void 0&&(h[l]=a[l]);return{$$typeof:Mm,type:e,key:p,ref:_,props:h,_owner:Yb.current}}function pR(e,t){return{$$typeof:Mm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kb(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mm}function fR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return t[o]})}var vC=/\/+/g;function jx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fR(""+e.key):t.toString(36)}function Uy(e,t,o,l,h){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var _=!1;if(e===null)_=!0;else switch(p){case"string":case"number":_=!0;break;case"object":switch(e.$$typeof){case Mm:case nR:_=!0}}if(_)return _=e,h=h(_),e=l===""?"."+jx(_,0):l,_C(h)?(o="",e!=null&&(o=e.replace(vC,"$&/")+"/"),Uy(h,t,o,"",function(C){return C})):h!=null&&(Kb(h)&&(h=pR(h,o+(!h.key||_&&_.key===h.key?"":(""+h.key).replace(vC,"$&/")+"/")+e)),t.push(h)),1;if(_=0,l=l===""?".":l+":",_C(e))for(var a=0;a<e.length;a++){p=e[a];var w=l+jx(p,a);_+=Uy(p,t,o,w,h)}else if(w=hR(e),typeof w=="function")for(e=w.call(e),a=0;!(p=e.next()).done;)p=p.value,w=l+jx(p,a++),_+=Uy(p,t,o,w,h);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return _}function fy(e,t,o){if(e==null)return e;var l=[],h=0;return Uy(e,l,"","",function(p){return t.call(o,p,h++)}),l}function mR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var so={current:null},Vy={transition:null},gR={ReactCurrentDispatcher:so,ReactCurrentBatchConfig:Vy,ReactCurrentOwner:Yb};ir.Children={map:fy,forEach:function(e,t,o){fy(e,function(){t.apply(this,arguments)},o)},count:function(e){var t=0;return fy(e,function(){t++}),t},toArray:function(e){return fy(e,function(t){return t})||[]},only:function(e){if(!Kb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ir.Component=Th;ir.Fragment=rR;ir.Profiler=oR;ir.PureComponent=Zb;ir.StrictMode=iR;ir.Suspense=cR;ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gR;ir.cloneElement=function(e,t,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=kP({},e.props),h=e.key,p=e.ref,_=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,_=Yb.current),t.key!==void 0&&(h=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(w in t)IP.call(t,w)&&!AP.hasOwnProperty(w)&&(l[w]=t[w]===void 0&&a!==void 0?a[w]:t[w])}var w=arguments.length-2;if(w===1)l.children=o;else if(1<w){a=Array(w);for(var C=0;C<w;C++)a[C]=arguments[C+2];l.children=a}return{$$typeof:Mm,type:e.type,key:h,ref:p,props:l,_owner:_}};ir.createContext=function(e){return e={$$typeof:aR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sR,_context:e},e.Consumer=e};ir.createElement=DP;ir.createFactory=function(e){var t=DP.bind(null,e);return t.type=e,t};ir.createRef=function(){return{current:null}};ir.forwardRef=function(e){return{$$typeof:lR,render:e}};ir.isValidElement=Kb;ir.lazy=function(e){return{$$typeof:dR,_payload:{_status:-1,_result:e},_init:mR}};ir.memo=function(e,t){return{$$typeof:uR,type:e,compare:t===void 0?null:t}};ir.startTransition=function(e){var t=Vy.transition;Vy.transition={};try{e()}finally{Vy.transition=t}};ir.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ir.useCallback=function(e,t){return so.current.useCallback(e,t)};ir.useContext=function(e){return so.current.useContext(e)};ir.useDebugValue=function(){};ir.useDeferredValue=function(e){return so.current.useDeferredValue(e)};ir.useEffect=function(e,t){return so.current.useEffect(e,t)};ir.useId=function(){return so.current.useId()};ir.useImperativeHandle=function(e,t,o){return so.current.useImperativeHandle(e,t,o)};ir.useInsertionEffect=function(e,t){return so.current.useInsertionEffect(e,t)};ir.useLayoutEffect=function(e,t){return so.current.useLayoutEffect(e,t)};ir.useMemo=function(e,t){return so.current.useMemo(e,t)};ir.useReducer=function(e,t,o){return so.current.useReducer(e,t,o)};ir.useRef=function(e){return so.current.useRef(e)};ir.useState=function(e){return so.current.useState(e)};ir.useSyncExternalStore=function(e,t,o){return so.current.useSyncExternalStore(e,t,o)};ir.useTransition=function(){return so.current.useTransition()};ir.version="18.2.0";CP.exports=ir;var W=CP.exports;const Ft=tl(W),Qf=tR({__proto__:null,default:Ft},[W]);var D1={},zP={exports:{}},Go={},RP={exports:{}},LP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Se,ke){var Ne=Se.length;Se.push(ke);e:for(;0<Ne;){var nt=Ne-1>>>1,vt=Se[nt];if(0<h(vt,ke))Se[nt]=ke,Se[Ne]=vt,Ne=nt;else break e}}function o(Se){return Se.length===0?null:Se[0]}function l(Se){if(Se.length===0)return null;var ke=Se[0],Ne=Se.pop();if(Ne!==ke){Se[0]=Ne;e:for(var nt=0,vt=Se.length,gt=vt>>>1;nt<gt;){var rt=2*(nt+1)-1,xt=Se[rt],ht=rt+1,mt=Se[ht];if(0>h(xt,Ne))ht<vt&&0>h(mt,xt)?(Se[nt]=mt,Se[ht]=Ne,nt=ht):(Se[nt]=xt,Se[rt]=Ne,nt=rt);else if(ht<vt&&0>h(mt,Ne))Se[nt]=mt,Se[ht]=Ne,nt=ht;else break e}}return ke}function h(Se,ke){var Ne=Se.sortIndex-ke.sortIndex;return Ne!==0?Ne:Se.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var _=Date,a=_.now();e.unstable_now=function(){return _.now()-a}}var w=[],C=[],M=1,D=null,R=3,$=!1,j=!1,B=!1,K=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Se){for(var ke=o(C);ke!==null;){if(ke.callback===null)l(C);else if(ke.startTime<=Se)l(C),ke.sortIndex=ke.expirationTime,t(w,ke);else break;ke=o(C)}}function Y(Se){if(B=!1,G(Se),!j)if(o(w)!==null)j=!0,Be(Q);else{var ke=o(C);ke!==null&&Ae(Y,ke.startTime-Se)}}function Q(Se,ke){j=!1,B&&(B=!1,N(de),de=-1),$=!0;var Ne=R;try{for(G(ke),D=o(w);D!==null&&(!(D.expirationTime>ke)||Se&&!Ce());){var nt=D.callback;if(typeof nt=="function"){D.callback=null,R=D.priorityLevel;var vt=nt(D.expirationTime<=ke);ke=e.unstable_now(),typeof vt=="function"?D.callback=vt:D===o(w)&&l(w),G(ke)}else l(w);D=o(w)}if(D!==null)var gt=!0;else{var rt=o(C);rt!==null&&Ae(Y,rt.startTime-ke),gt=!1}return gt}finally{D=null,R=Ne,$=!1}}var re=!1,oe=null,de=-1,ae=5,ye=-1;function Ce(){return!(e.unstable_now()-ye<ae)}function Fe(){if(oe!==null){var Se=e.unstable_now();ye=Se;var ke=!0;try{ke=oe(!0,Se)}finally{ke?be():(re=!1,oe=null)}}else re=!1}var be;if(typeof U=="function")be=function(){U(Fe)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,ue=we.port2;we.port1.onmessage=Fe,be=function(){ue.postMessage(null)}}else be=function(){K(Fe,0)};function Be(Se){oe=Se,re||(re=!0,be())}function Ae(Se,ke){de=K(function(){Se(e.unstable_now())},ke)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Se){Se.callback=null},e.unstable_continueExecution=function(){j||$||(j=!0,Be(Q))},e.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<Se?Math.floor(1e3/Se):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return o(w)},e.unstable_next=function(Se){switch(R){case 1:case 2:case 3:var ke=3;break;default:ke=R}var Ne=R;R=ke;try{return Se()}finally{R=Ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Se,ke){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var Ne=R;R=Se;try{return ke()}finally{R=Ne}},e.unstable_scheduleCallback=function(Se,ke,Ne){var nt=e.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?nt+Ne:nt):Ne=nt,Se){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=Ne+vt,Se={id:M++,callback:ke,priorityLevel:Se,startTime:Ne,expirationTime:vt,sortIndex:-1},Ne>nt?(Se.sortIndex=Ne,t(C,Se),o(w)===null&&Se===o(C)&&(B?(N(de),de=-1):B=!0,Ae(Y,Ne-nt))):(Se.sortIndex=vt,t(w,Se),j||$||(j=!0,Be(Q))),Se},e.unstable_shouldYield=Ce,e.unstable_wrapCallback=function(Se){var ke=R;return function(){var Ne=R;R=ke;try{return Se.apply(this,arguments)}finally{R=Ne}}}})(LP);RP.exports=LP;var yR=RP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OP=W,jo=yR;function Wt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BP=new Set,em={};function xu(e,t){lh(e,t),lh(e+"Capture",t)}function lh(e,t){for(em[e]=t,e=0;e<t.length;e++)BP.add(t[e])}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),z1=Object.prototype.hasOwnProperty,_R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xC={},bC={};function vR(e){return z1.call(bC,e)?!0:z1.call(xC,e)?!1:_R.test(e)?bC[e]=!0:(xC[e]=!0,!1)}function xR(e,t,o,l){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bR(e,t,o,l){if(t===null||typeof t>"u"||xR(e,t,o,l))return!0;if(l)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ao(e,t,o,l,h,p,_){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=_}var Ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ni[e]=new ao(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ni[t]=new ao(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ni[e]=new ao(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ni[e]=new ao(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ni[e]=new ao(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ni[e]=new ao(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ni[e]=new ao(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ni[e]=new ao(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ni[e]=new ao(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jb=/[\-:]([a-z])/g;function Qb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jb,Qb);Ni[t]=new ao(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jb,Qb);Ni[t]=new ao(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jb,Qb);Ni[t]=new ao(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ni[e]=new ao(e,1,!1,e.toLowerCase(),null,!1,!1)});Ni.xlinkHref=new ao("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ni[e]=new ao(e,1,!1,e.toLowerCase(),null,!0,!0)});function ew(e,t,o,l){var h=Ni.hasOwnProperty(t)?Ni[t]:null;(h!==null?h.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bR(t,o,h,l)&&(o=null),l||h===null?vR(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):h.mustUseProperty?e[h.propertyName]=o===null?h.type===3?!1:"":o:(t=h.attributeName,l=h.attributeNamespace,o===null?e.removeAttribute(t):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,l?e.setAttributeNS(l,t,o):e.setAttribute(t,o))))}var nl=OP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,my=Symbol.for("react.element"),Od=Symbol.for("react.portal"),Bd=Symbol.for("react.fragment"),tw=Symbol.for("react.strict_mode"),R1=Symbol.for("react.profiler"),FP=Symbol.for("react.provider"),$P=Symbol.for("react.context"),nw=Symbol.for("react.forward_ref"),L1=Symbol.for("react.suspense"),O1=Symbol.for("react.suspense_list"),rw=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),NP=Symbol.for("react.offscreen"),wC=Symbol.iterator;function cf(e){return e===null||typeof e!="object"?null:(e=wC&&e[wC]||e["@@iterator"],typeof e=="function"?e:null)}var ai=Object.assign,Wx;function Pf(e){if(Wx===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);Wx=t&&t[1]||""}return`
`+Wx+e}var Gx=!1;function Hx(e,t){if(!e||Gx)return"";Gx=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var l=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){l=C}e.call(t.prototype)}else{try{throw Error()}catch(C){l=C}e()}}catch(C){if(C&&l&&typeof C.stack=="string"){for(var h=C.stack.split(`
`),p=l.stack.split(`
`),_=h.length-1,a=p.length-1;1<=_&&0<=a&&h[_]!==p[a];)a--;for(;1<=_&&0<=a;_--,a--)if(h[_]!==p[a]){if(_!==1||a!==1)do if(_--,a--,0>a||h[_]!==p[a]){var w=`
`+h[_].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=_&&0<=a);break}}}finally{Gx=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?Pf(e):""}function wR(e){switch(e.tag){case 5:return Pf(e.type);case 16:return Pf("Lazy");case 13:return Pf("Suspense");case 19:return Pf("SuspenseList");case 0:case 2:case 15:return e=Hx(e.type,!1),e;case 11:return e=Hx(e.type.render,!1),e;case 1:return e=Hx(e.type,!0),e;default:return""}}function B1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bd:return"Fragment";case Od:return"Portal";case R1:return"Profiler";case tw:return"StrictMode";case L1:return"Suspense";case O1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $P:return(e.displayName||"Context")+".Consumer";case FP:return(e._context.displayName||"Context")+".Provider";case nw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rw:return t=e.displayName||null,t!==null?t:B1(e.type)||"Memo";case Bl:t=e._payload,e=e._init;try{return B1(e(t))}catch{}}return null}function SR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B1(t);case 8:return t===tw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ec(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function UP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TR(e){var t=UP(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,p.call(this,_)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gy(e){e._valueTracker||(e._valueTracker=TR(e))}function VP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),l="";return e&&(l=UP(e)?e.checked?"true":"false":e.value),e=l,e!==o?(t.setValue(e),!0):!1}function c0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function F1(e,t){var o=t.checked;return ai({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function SC(e,t){var o=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;o=ec(t.value!=null?t.value:o),e._wrapperState={initialChecked:l,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jP(e,t){t=t.checked,t!=null&&ew(e,"checked",t,!1)}function $1(e,t){jP(e,t);var o=ec(t.value),l=t.type;if(o!=null)l==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?N1(e,t.type,o):t.hasOwnProperty("defaultValue")&&N1(e,t.type,ec(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function TC(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function N1(e,t,o){(t!=="number"||c0(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var Mf=Array.isArray;function Xd(e,t,o,l){if(e=e.options,t){t={};for(var h=0;h<o.length;h++)t["$"+o[h]]=!0;for(o=0;o<e.length;o++)h=t.hasOwnProperty("$"+e[o].value),e[o].selected!==h&&(e[o].selected=h),h&&l&&(e[o].defaultSelected=!0)}else{for(o=""+ec(o),t=null,h=0;h<e.length;h++){if(e[h].value===o){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function U1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Wt(91));return ai({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function CC(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(Wt(92));if(Mf(o)){if(1<o.length)throw Error(Wt(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:ec(o)}}function WP(e,t){var o=ec(t.value),l=ec(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),l!=null&&(e.defaultValue=""+l)}function EC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function GP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function V1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?GP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yy,HP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,l,h){MSApp.execUnsafeLocalFunction(function(){return e(t,o,l,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yy=yy||document.createElement("div"),yy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tm(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CR=["Webkit","ms","Moz","O"];Object.keys(Of).forEach(function(e){CR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Of[t]=Of[e]})});function qP(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Of.hasOwnProperty(e)&&Of[e]?(""+t).trim():t+"px"}function ZP(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var l=o.indexOf("--")===0,h=qP(o,t[o],l);o==="float"&&(o="cssFloat"),l?e.setProperty(o,h):e[o]=h}}var ER=ai({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function j1(e,t){if(t){if(ER[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Wt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Wt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Wt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Wt(62))}}function W1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G1=null;function iw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var H1=null,Yd=null,Kd=null;function kC(e){if(e=Dm(e)){if(typeof H1!="function")throw Error(Wt(280));var t=e.stateNode;t&&(t=X0(t),H1(e.stateNode,e.type,t))}}function XP(e){Yd?Kd?Kd.push(e):Kd=[e]:Yd=e}function YP(){if(Yd){var e=Yd,t=Kd;if(Kd=Yd=null,kC(e),t)for(e=0;e<t.length;e++)kC(t[e])}}function KP(e,t){return e(t)}function JP(){}var qx=!1;function QP(e,t,o){if(qx)return e(t,o);qx=!0;try{return KP(e,t,o)}finally{qx=!1,(Yd!==null||Kd!==null)&&(JP(),YP())}}function nm(e,t){var o=e.stateNode;if(o===null)return null;var l=X0(o);if(l===null)return null;o=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(Wt(231,t,typeof o));return o}var q1=!1;if(qa)try{var uf={};Object.defineProperty(uf,"passive",{get:function(){q1=!0}}),window.addEventListener("test",uf,uf),window.removeEventListener("test",uf,uf)}catch{q1=!1}function kR(e,t,o,l,h,p,_,a,w){var C=Array.prototype.slice.call(arguments,3);try{t.apply(o,C)}catch(M){this.onError(M)}}var Bf=!1,u0=null,d0=!1,Z1=null,PR={onError:function(e){Bf=!0,u0=e}};function MR(e,t,o,l,h,p,_,a,w){Bf=!1,u0=null,kR.apply(PR,arguments)}function IR(e,t,o,l,h,p,_,a,w){if(MR.apply(this,arguments),Bf){if(Bf){var C=u0;Bf=!1,u0=null}else throw Error(Wt(198));d0||(d0=!0,Z1=C)}}function bu(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function eM(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function PC(e){if(bu(e)!==e)throw Error(Wt(188))}function AR(e){var t=e.alternate;if(!t){if(t=bu(e),t===null)throw Error(Wt(188));return t!==e?null:e}for(var o=e,l=t;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){o=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return PC(h),e;if(p===l)return PC(h),t;p=p.sibling}throw Error(Wt(188))}if(o.return!==l.return)o=h,l=p;else{for(var _=!1,a=h.child;a;){if(a===o){_=!0,o=h,l=p;break}if(a===l){_=!0,l=h,o=p;break}a=a.sibling}if(!_){for(a=p.child;a;){if(a===o){_=!0,o=p,l=h;break}if(a===l){_=!0,l=p,o=h;break}a=a.sibling}if(!_)throw Error(Wt(189))}}if(o.alternate!==l)throw Error(Wt(190))}if(o.tag!==3)throw Error(Wt(188));return o.stateNode.current===o?e:t}function tM(e){return e=AR(e),e!==null?nM(e):null}function nM(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nM(e);if(t!==null)return t;e=e.sibling}return null}var rM=jo.unstable_scheduleCallback,MC=jo.unstable_cancelCallback,DR=jo.unstable_shouldYield,zR=jo.unstable_requestPaint,pi=jo.unstable_now,RR=jo.unstable_getCurrentPriorityLevel,ow=jo.unstable_ImmediatePriority,iM=jo.unstable_UserBlockingPriority,h0=jo.unstable_NormalPriority,LR=jo.unstable_LowPriority,oM=jo.unstable_IdlePriority,G0=null,ga=null;function OR(e){if(ga&&typeof ga.onCommitFiberRoot=="function")try{ga.onCommitFiberRoot(G0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:$R,BR=Math.log,FR=Math.LN2;function $R(e){return e>>>=0,e===0?32:31-(BR(e)/FR|0)|0}var _y=64,vy=4194304;function If(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function p0(e,t){var o=e.pendingLanes;if(o===0)return 0;var l=0,h=e.suspendedLanes,p=e.pingedLanes,_=o&268435455;if(_!==0){var a=_&~h;a!==0?l=If(a):(p&=_,p!==0&&(l=If(p)))}else _=o&~h,_!==0?l=If(_):p!==0&&(l=If(p));if(l===0)return 0;if(t!==0&&t!==l&&!(t&h)&&(h=l&-l,p=t&-t,h>=p||h===16&&(p&4194240)!==0))return t;if(l&4&&(l|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)o=31-Ws(t),h=1<<o,l|=e[o],t&=~h;return l}function NR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UR(e,t){for(var o=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,p=e.pendingLanes;0<p;){var _=31-Ws(p),a=1<<_,w=h[_];w===-1?(!(a&o)||a&l)&&(h[_]=NR(a,t)):w<=t&&(e.expiredLanes|=a),p&=~a}}function X1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sM(){var e=_y;return _y<<=1,!(_y&4194240)&&(_y=64),e}function Zx(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function Im(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ws(t),e[t]=o}function VR(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<o;){var h=31-Ws(o),p=1<<h;t[h]=0,l[h]=-1,e[h]=-1,o&=~p}}function sw(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var l=31-Ws(o),h=1<<l;h&t|e[l]&t&&(e[l]|=t),o&=~h}}var Mr=0;function aM(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lM,aw,cM,uM,dM,Y1=!1,xy=[],Gl=null,Hl=null,ql=null,rm=new Map,im=new Map,$l=[],jR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IC(e,t){switch(e){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":ql=null;break;case"pointerover":case"pointerout":rm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":im.delete(t.pointerId)}}function df(e,t,o,l,h,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:o,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},t!==null&&(t=Dm(t),t!==null&&aw(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function WR(e,t,o,l,h){switch(t){case"focusin":return Gl=df(Gl,e,t,o,l,h),!0;case"dragenter":return Hl=df(Hl,e,t,o,l,h),!0;case"mouseover":return ql=df(ql,e,t,o,l,h),!0;case"pointerover":var p=h.pointerId;return rm.set(p,df(rm.get(p)||null,e,t,o,l,h)),!0;case"gotpointercapture":return p=h.pointerId,im.set(p,df(im.get(p)||null,e,t,o,l,h)),!0}return!1}function hM(e){var t=nu(e.target);if(t!==null){var o=bu(t);if(o!==null){if(t=o.tag,t===13){if(t=eM(o),t!==null){e.blockedOn=t,dM(e.priority,function(){cM(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=K1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var l=new o.constructor(o.type,o);G1=l,o.target.dispatchEvent(l),G1=null}else return t=Dm(o),t!==null&&aw(t),e.blockedOn=o,!1;t.shift()}return!0}function AC(e,t,o){jy(e)&&o.delete(t)}function GR(){Y1=!1,Gl!==null&&jy(Gl)&&(Gl=null),Hl!==null&&jy(Hl)&&(Hl=null),ql!==null&&jy(ql)&&(ql=null),rm.forEach(AC),im.forEach(AC)}function hf(e,t){e.blockedOn===t&&(e.blockedOn=null,Y1||(Y1=!0,jo.unstable_scheduleCallback(jo.unstable_NormalPriority,GR)))}function om(e){function t(h){return hf(h,e)}if(0<xy.length){hf(xy[0],e);for(var o=1;o<xy.length;o++){var l=xy[o];l.blockedOn===e&&(l.blockedOn=null)}}for(Gl!==null&&hf(Gl,e),Hl!==null&&hf(Hl,e),ql!==null&&hf(ql,e),rm.forEach(t),im.forEach(t),o=0;o<$l.length;o++)l=$l[o],l.blockedOn===e&&(l.blockedOn=null);for(;0<$l.length&&(o=$l[0],o.blockedOn===null);)hM(o),o.blockedOn===null&&$l.shift()}var Jd=nl.ReactCurrentBatchConfig,f0=!0;function HR(e,t,o,l){var h=Mr,p=Jd.transition;Jd.transition=null;try{Mr=1,lw(e,t,o,l)}finally{Mr=h,Jd.transition=p}}function qR(e,t,o,l){var h=Mr,p=Jd.transition;Jd.transition=null;try{Mr=4,lw(e,t,o,l)}finally{Mr=h,Jd.transition=p}}function lw(e,t,o,l){if(f0){var h=K1(e,t,o,l);if(h===null)i1(e,t,l,m0,o),IC(e,l);else if(WR(h,e,t,o,l))l.stopPropagation();else if(IC(e,l),t&4&&-1<jR.indexOf(e)){for(;h!==null;){var p=Dm(h);if(p!==null&&lM(p),p=K1(e,t,o,l),p===null&&i1(e,t,l,m0,o),p===h)break;h=p}h!==null&&l.stopPropagation()}else i1(e,t,l,null,o)}}var m0=null;function K1(e,t,o,l){if(m0=null,e=iw(l),e=nu(e),e!==null)if(t=bu(e),t===null)e=null;else if(o=t.tag,o===13){if(e=eM(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return m0=e,null}function pM(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RR()){case ow:return 1;case iM:return 4;case h0:case LR:return 16;case oM:return 536870912;default:return 16}default:return 16}}var Vl=null,cw=null,Wy=null;function fM(){if(Wy)return Wy;var e,t=cw,o=t.length,l,h="value"in Vl?Vl.value:Vl.textContent,p=h.length;for(e=0;e<o&&t[e]===h[e];e++);var _=o-e;for(l=1;l<=_&&t[o-l]===h[p-l];l++);return Wy=h.slice(e,1<l?1-l:void 0)}function Gy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function by(){return!0}function DC(){return!1}function Ho(e){function t(o,l,h,p,_){this._reactName=o,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(o=e[a],this[a]=o?o(p):p[a]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?by:DC,this.isPropagationStopped=DC,this}return ai(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=by)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=by)},persist:function(){},isPersistent:by}),t}var Ch={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uw=Ho(Ch),Am=ai({},Ch,{view:0,detail:0}),ZR=Ho(Am),Xx,Yx,pf,H0=ai({},Am,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pf&&(pf&&e.type==="mousemove"?(Xx=e.screenX-pf.screenX,Yx=e.screenY-pf.screenY):Yx=Xx=0,pf=e),Xx)},movementY:function(e){return"movementY"in e?e.movementY:Yx}}),zC=Ho(H0),XR=ai({},H0,{dataTransfer:0}),YR=Ho(XR),KR=ai({},Am,{relatedTarget:0}),Kx=Ho(KR),JR=ai({},Ch,{animationName:0,elapsedTime:0,pseudoElement:0}),QR=Ho(JR),e5=ai({},Ch,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),t5=Ho(e5),n5=ai({},Ch,{data:0}),RC=Ho(n5),r5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=o5[e])?!!t[e]:!1}function dw(){return s5}var a5=ai({},Am,{key:function(e){if(e.key){var t=r5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dw,charCode:function(e){return e.type==="keypress"?Gy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),l5=Ho(a5),c5=ai({},H0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LC=Ho(c5),u5=ai({},Am,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dw}),d5=Ho(u5),h5=ai({},Ch,{propertyName:0,elapsedTime:0,pseudoElement:0}),p5=Ho(h5),f5=ai({},H0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),m5=Ho(f5),g5=[9,13,27,32],hw=qa&&"CompositionEvent"in window,Ff=null;qa&&"documentMode"in document&&(Ff=document.documentMode);var y5=qa&&"TextEvent"in window&&!Ff,mM=qa&&(!hw||Ff&&8<Ff&&11>=Ff),OC=String.fromCharCode(32),BC=!1;function gM(e,t){switch(e){case"keyup":return g5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fd=!1;function _5(e,t){switch(e){case"compositionend":return yM(t);case"keypress":return t.which!==32?null:(BC=!0,OC);case"textInput":return e=t.data,e===OC&&BC?null:e;default:return null}}function v5(e,t){if(Fd)return e==="compositionend"||!hw&&gM(e,t)?(e=fM(),Wy=cw=Vl=null,Fd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mM&&t.locale!=="ko"?null:t.data;default:return null}}var x5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!x5[e.type]:t==="textarea"}function _M(e,t,o,l){XP(l),t=g0(t,"onChange"),0<t.length&&(o=new uw("onChange","change",null,o,l),e.push({event:o,listeners:t}))}var $f=null,sm=null;function b5(e){MM(e,0)}function q0(e){var t=Ud(e);if(VP(t))return e}function w5(e,t){if(e==="change")return t}var vM=!1;if(qa){var Jx;if(qa){var Qx="oninput"in document;if(!Qx){var $C=document.createElement("div");$C.setAttribute("oninput","return;"),Qx=typeof $C.oninput=="function"}Jx=Qx}else Jx=!1;vM=Jx&&(!document.documentMode||9<document.documentMode)}function NC(){$f&&($f.detachEvent("onpropertychange",xM),sm=$f=null)}function xM(e){if(e.propertyName==="value"&&q0(sm)){var t=[];_M(t,sm,e,iw(e)),QP(b5,t)}}function S5(e,t,o){e==="focusin"?(NC(),$f=t,sm=o,$f.attachEvent("onpropertychange",xM)):e==="focusout"&&NC()}function T5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return q0(sm)}function C5(e,t){if(e==="click")return q0(t)}function E5(e,t){if(e==="input"||e==="change")return q0(t)}function k5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hs=typeof Object.is=="function"?Object.is:k5;function am(e,t){if(Hs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var h=o[l];if(!z1.call(t,h)||!Hs(e[h],t[h]))return!1}return!0}function UC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function VC(e,t){var o=UC(e);e=0;for(var l;o;){if(o.nodeType===3){if(l=e+o.textContent.length,e<=t&&l>=t)return{node:o,offset:t-e};e=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=UC(o)}}function bM(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bM(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wM(){for(var e=window,t=c0();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=c0(e.document)}return t}function pw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function P5(e){var t=wM(),o=e.focusedElem,l=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&bM(o.ownerDocument.documentElement,o)){if(l!==null&&pw(o)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=o.textContent.length,p=Math.min(l.start,h);l=l.end===void 0?p:Math.min(l.end,h),!e.extend&&p>l&&(h=l,l=p,p=h),h=VC(o,p);var _=VC(o,l);h&&_&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==_.node||e.focusOffset!==_.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),p>l?(e.addRange(t),e.extend(_.node,_.offset)):(t.setEnd(_.node,_.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var M5=qa&&"documentMode"in document&&11>=document.documentMode,$d=null,J1=null,Nf=null,Q1=!1;function jC(e,t,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Q1||$d==null||$d!==c0(l)||(l=$d,"selectionStart"in l&&pw(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Nf&&am(Nf,l)||(Nf=l,l=g0(J1,"onSelect"),0<l.length&&(t=new uw("onSelect","select",null,t,o),e.push({event:t,listeners:l}),t.target=$d)))}function wy(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var Nd={animationend:wy("Animation","AnimationEnd"),animationiteration:wy("Animation","AnimationIteration"),animationstart:wy("Animation","AnimationStart"),transitionend:wy("Transition","TransitionEnd")},e1={},SM={};qa&&(SM=document.createElement("div").style,"AnimationEvent"in window||(delete Nd.animationend.animation,delete Nd.animationiteration.animation,delete Nd.animationstart.animation),"TransitionEvent"in window||delete Nd.transitionend.transition);function Z0(e){if(e1[e])return e1[e];if(!Nd[e])return e;var t=Nd[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in SM)return e1[e]=t[o];return e}var TM=Z0("animationend"),CM=Z0("animationiteration"),EM=Z0("animationstart"),kM=Z0("transitionend"),PM=new Map,WC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rc(e,t){PM.set(e,t),xu(t,[e])}for(var t1=0;t1<WC.length;t1++){var n1=WC[t1],I5=n1.toLowerCase(),A5=n1[0].toUpperCase()+n1.slice(1);rc(I5,"on"+A5)}rc(TM,"onAnimationEnd");rc(CM,"onAnimationIteration");rc(EM,"onAnimationStart");rc("dblclick","onDoubleClick");rc("focusin","onFocus");rc("focusout","onBlur");rc(kM,"onTransitionEnd");lh("onMouseEnter",["mouseout","mouseover"]);lh("onMouseLeave",["mouseout","mouseover"]);lh("onPointerEnter",["pointerout","pointerover"]);lh("onPointerLeave",["pointerout","pointerover"]);xu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xu("onBeforeInput",["compositionend","keypress","textInput","paste"]);xu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Af="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Af));function GC(e,t,o){var l=e.type||"unknown-event";e.currentTarget=o,IR(l,t,void 0,e),e.currentTarget=null}function MM(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var l=e[o],h=l.event;l=l.listeners;e:{var p=void 0;if(t)for(var _=l.length-1;0<=_;_--){var a=l[_],w=a.instance,C=a.currentTarget;if(a=a.listener,w!==p&&h.isPropagationStopped())break e;GC(h,a,C),p=w}else for(_=0;_<l.length;_++){if(a=l[_],w=a.instance,C=a.currentTarget,a=a.listener,w!==p&&h.isPropagationStopped())break e;GC(h,a,C),p=w}}}if(d0)throw e=Z1,d0=!1,Z1=null,e}function Wr(e,t){var o=t[ib];o===void 0&&(o=t[ib]=new Set);var l=e+"__bubble";o.has(l)||(IM(t,e,2,!1),o.add(l))}function r1(e,t,o){var l=0;t&&(l|=4),IM(o,e,l,t)}var Sy="_reactListening"+Math.random().toString(36).slice(2);function lm(e){if(!e[Sy]){e[Sy]=!0,BP.forEach(function(o){o!=="selectionchange"&&(D5.has(o)||r1(o,!1,e),r1(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sy]||(t[Sy]=!0,r1("selectionchange",!1,t))}}function IM(e,t,o,l){switch(pM(t)){case 1:var h=HR;break;case 4:h=qR;break;default:h=lw}o=h.bind(null,t,o,e),h=void 0,!q1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(t,o,{capture:!0,passive:h}):e.addEventListener(t,o,!0):h!==void 0?e.addEventListener(t,o,{passive:h}):e.addEventListener(t,o,!1)}function i1(e,t,o,l,h){var p=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var a=l.stateNode.containerInfo;if(a===h||a.nodeType===8&&a.parentNode===h)break;if(_===4)for(_=l.return;_!==null;){var w=_.tag;if((w===3||w===4)&&(w=_.stateNode.containerInfo,w===h||w.nodeType===8&&w.parentNode===h))return;_=_.return}for(;a!==null;){if(_=nu(a),_===null)return;if(w=_.tag,w===5||w===6){l=p=_;continue e}a=a.parentNode}}l=l.return}QP(function(){var C=p,M=iw(o),D=[];e:{var R=PM.get(e);if(R!==void 0){var $=uw,j=e;switch(e){case"keypress":if(Gy(o)===0)break e;case"keydown":case"keyup":$=l5;break;case"focusin":j="focus",$=Kx;break;case"focusout":j="blur",$=Kx;break;case"beforeblur":case"afterblur":$=Kx;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=zC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=YR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=d5;break;case TM:case CM:case EM:$=QR;break;case kM:$=p5;break;case"scroll":$=ZR;break;case"wheel":$=m5;break;case"copy":case"cut":case"paste":$=t5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=LC}var B=(t&4)!==0,K=!B&&e==="scroll",N=B?R!==null?R+"Capture":null:R;B=[];for(var U=C,G;U!==null;){G=U;var Y=G.stateNode;if(G.tag===5&&Y!==null&&(G=Y,N!==null&&(Y=nm(U,N),Y!=null&&B.push(cm(U,Y,G)))),K)break;U=U.return}0<B.length&&(R=new $(R,j,null,o,M),D.push({event:R,listeners:B}))}}if(!(t&7)){e:{if(R=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",R&&o!==G1&&(j=o.relatedTarget||o.fromElement)&&(nu(j)||j[Za]))break e;if(($||R)&&(R=M.window===M?M:(R=M.ownerDocument)?R.defaultView||R.parentWindow:window,$?(j=o.relatedTarget||o.toElement,$=C,j=j?nu(j):null,j!==null&&(K=bu(j),j!==K||j.tag!==5&&j.tag!==6)&&(j=null)):($=null,j=C),$!==j)){if(B=zC,Y="onMouseLeave",N="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(B=LC,Y="onPointerLeave",N="onPointerEnter",U="pointer"),K=$==null?R:Ud($),G=j==null?R:Ud(j),R=new B(Y,U+"leave",$,o,M),R.target=K,R.relatedTarget=G,Y=null,nu(M)===C&&(B=new B(N,U+"enter",j,o,M),B.target=G,B.relatedTarget=K,Y=B),K=Y,$&&j)t:{for(B=$,N=j,U=0,G=B;G;G=Td(G))U++;for(G=0,Y=N;Y;Y=Td(Y))G++;for(;0<U-G;)B=Td(B),U--;for(;0<G-U;)N=Td(N),G--;for(;U--;){if(B===N||N!==null&&B===N.alternate)break t;B=Td(B),N=Td(N)}B=null}else B=null;$!==null&&HC(D,R,$,B,!1),j!==null&&K!==null&&HC(D,K,j,B,!0)}}e:{if(R=C?Ud(C):window,$=R.nodeName&&R.nodeName.toLowerCase(),$==="select"||$==="input"&&R.type==="file")var Q=w5;else if(FC(R))if(vM)Q=E5;else{Q=T5;var re=S5}else($=R.nodeName)&&$.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(Q=C5);if(Q&&(Q=Q(e,C))){_M(D,Q,o,M);break e}re&&re(e,R,C),e==="focusout"&&(re=R._wrapperState)&&re.controlled&&R.type==="number"&&N1(R,"number",R.value)}switch(re=C?Ud(C):window,e){case"focusin":(FC(re)||re.contentEditable==="true")&&($d=re,J1=C,Nf=null);break;case"focusout":Nf=J1=$d=null;break;case"mousedown":Q1=!0;break;case"contextmenu":case"mouseup":case"dragend":Q1=!1,jC(D,o,M);break;case"selectionchange":if(M5)break;case"keydown":case"keyup":jC(D,o,M)}var oe;if(hw)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Fd?gM(e,o)&&(de="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(de="onCompositionStart");de&&(mM&&o.locale!=="ko"&&(Fd||de!=="onCompositionStart"?de==="onCompositionEnd"&&Fd&&(oe=fM()):(Vl=M,cw="value"in Vl?Vl.value:Vl.textContent,Fd=!0)),re=g0(C,de),0<re.length&&(de=new RC(de,e,null,o,M),D.push({event:de,listeners:re}),oe?de.data=oe:(oe=yM(o),oe!==null&&(de.data=oe)))),(oe=y5?_5(e,o):v5(e,o))&&(C=g0(C,"onBeforeInput"),0<C.length&&(M=new RC("onBeforeInput","beforeinput",null,o,M),D.push({event:M,listeners:C}),M.data=oe))}MM(D,t)})}function cm(e,t,o){return{instance:e,listener:t,currentTarget:o}}function g0(e,t){for(var o=t+"Capture",l=[];e!==null;){var h=e,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=nm(e,o),p!=null&&l.unshift(cm(e,p,h)),p=nm(e,t),p!=null&&l.push(cm(e,p,h))),e=e.return}return l}function Td(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function HC(e,t,o,l,h){for(var p=t._reactName,_=[];o!==null&&o!==l;){var a=o,w=a.alternate,C=a.stateNode;if(w!==null&&w===l)break;a.tag===5&&C!==null&&(a=C,h?(w=nm(o,p),w!=null&&_.unshift(cm(o,w,a))):h||(w=nm(o,p),w!=null&&_.push(cm(o,w,a)))),o=o.return}_.length!==0&&e.push({event:t,listeners:_})}var z5=/\r\n?/g,R5=/\u0000|\uFFFD/g;function qC(e){return(typeof e=="string"?e:""+e).replace(z5,`
`).replace(R5,"")}function Ty(e,t,o){if(t=qC(t),qC(e)!==t&&o)throw Error(Wt(425))}function y0(){}var eb=null,tb=null;function nb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rb=typeof setTimeout=="function"?setTimeout:void 0,L5=typeof clearTimeout=="function"?clearTimeout:void 0,ZC=typeof Promise=="function"?Promise:void 0,O5=typeof queueMicrotask=="function"?queueMicrotask:typeof ZC<"u"?function(e){return ZC.resolve(null).then(e).catch(B5)}:rb;function B5(e){setTimeout(function(){throw e})}function o1(e,t){var o=t,l=0;do{var h=o.nextSibling;if(e.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(l===0){e.removeChild(h),om(t);return}l--}else o!=="$"&&o!=="$?"&&o!=="$!"||l++;o=h}while(o);om(t)}function Zl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function XC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var Eh=Math.random().toString(36).slice(2),ha="__reactFiber$"+Eh,um="__reactProps$"+Eh,Za="__reactContainer$"+Eh,ib="__reactEvents$"+Eh,F5="__reactListeners$"+Eh,$5="__reactHandles$"+Eh;function nu(e){var t=e[ha];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Za]||o[ha]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=XC(e);e!==null;){if(o=e[ha])return o;e=XC(e)}return t}e=o,o=e.parentNode}return null}function Dm(e){return e=e[ha]||e[Za],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ud(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Wt(33))}function X0(e){return e[um]||null}var ob=[],Vd=-1;function ic(e){return{current:e}}function Gr(e){0>Vd||(e.current=ob[Vd],ob[Vd]=null,Vd--)}function Fr(e,t){Vd++,ob[Vd]=e.current,e.current=t}var tc={},Qi=ic(tc),xo=ic(!1),du=tc;function ch(e,t){var o=e.type.contextTypes;if(!o)return tc;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=t[p];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function bo(e){return e=e.childContextTypes,e!=null}function _0(){Gr(xo),Gr(Qi)}function YC(e,t,o){if(Qi.current!==tc)throw Error(Wt(168));Fr(Qi,t),Fr(xo,o)}function AM(e,t,o){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return o;l=l.getChildContext();for(var h in l)if(!(h in t))throw Error(Wt(108,SR(e)||"Unknown",h));return ai({},o,l)}function v0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tc,du=Qi.current,Fr(Qi,e),Fr(xo,xo.current),!0}function KC(e,t,o){var l=e.stateNode;if(!l)throw Error(Wt(169));o?(e=AM(e,t,du),l.__reactInternalMemoizedMergedChildContext=e,Gr(xo),Gr(Qi),Fr(Qi,e)):Gr(xo),Fr(xo,o)}var Va=null,Y0=!1,s1=!1;function DM(e){Va===null?Va=[e]:Va.push(e)}function N5(e){Y0=!0,DM(e)}function oc(){if(!s1&&Va!==null){s1=!0;var e=0,t=Mr;try{var o=Va;for(Mr=1;e<o.length;e++){var l=o[e];do l=l(!0);while(l!==null)}Va=null,Y0=!1}catch(h){throw Va!==null&&(Va=Va.slice(e+1)),rM(ow,oc),h}finally{Mr=t,s1=!1}}return null}var jd=[],Wd=0,x0=null,b0=0,ss=[],as=0,hu=null,ja=1,Wa="";function Kc(e,t){jd[Wd++]=b0,jd[Wd++]=x0,x0=e,b0=t}function zM(e,t,o){ss[as++]=ja,ss[as++]=Wa,ss[as++]=hu,hu=e;var l=ja;e=Wa;var h=32-Ws(l)-1;l&=~(1<<h),o+=1;var p=32-Ws(t)+h;if(30<p){var _=h-h%5;p=(l&(1<<_)-1).toString(32),l>>=_,h-=_,ja=1<<32-Ws(t)+h|o<<h|l,Wa=p+e}else ja=1<<p|o<<h|l,Wa=e}function fw(e){e.return!==null&&(Kc(e,1),zM(e,1,0))}function mw(e){for(;e===x0;)x0=jd[--Wd],jd[Wd]=null,b0=jd[--Wd],jd[Wd]=null;for(;e===hu;)hu=ss[--as],ss[as]=null,Wa=ss[--as],ss[as]=null,ja=ss[--as],ss[as]=null}var No=null,$o=null,Yr=!1,js=null;function RM(e,t){var o=ls(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function JC(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,No=e,$o=Zl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,No=e,$o=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=hu!==null?{id:ja,overflow:Wa}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=ls(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,No=e,$o=null,!0):!1;default:return!1}}function sb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ab(e){if(Yr){var t=$o;if(t){var o=t;if(!JC(e,t)){if(sb(e))throw Error(Wt(418));t=Zl(o.nextSibling);var l=No;t&&JC(e,t)?RM(l,o):(e.flags=e.flags&-4097|2,Yr=!1,No=e)}}else{if(sb(e))throw Error(Wt(418));e.flags=e.flags&-4097|2,Yr=!1,No=e}}}function QC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;No=e}function Cy(e){if(e!==No)return!1;if(!Yr)return QC(e),Yr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nb(e.type,e.memoizedProps)),t&&(t=$o)){if(sb(e))throw LM(),Error(Wt(418));for(;t;)RM(e,t),t=Zl(t.nextSibling)}if(QC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Wt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){$o=Zl(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}$o=null}}else $o=No?Zl(e.stateNode.nextSibling):null;return!0}function LM(){for(var e=$o;e;)e=Zl(e.nextSibling)}function uh(){$o=No=null,Yr=!1}function gw(e){js===null?js=[e]:js.push(e)}var U5=nl.ReactCurrentBatchConfig;function Us(e,t){if(e&&e.defaultProps){t=ai({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}var w0=ic(null),S0=null,Gd=null,yw=null;function _w(){yw=Gd=S0=null}function vw(e){var t=w0.current;Gr(w0),e._currentValue=t}function lb(e,t,o){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===o)break;e=e.return}}function Qd(e,t){S0=e,yw=Gd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vo=!0),e.firstContext=null)}function hs(e){var t=e._currentValue;if(yw!==e)if(e={context:e,memoizedValue:t,next:null},Gd===null){if(S0===null)throw Error(Wt(308));Gd=e,S0.dependencies={lanes:0,firstContext:e}}else Gd=Gd.next=e;return t}var ru=null;function xw(e){ru===null?ru=[e]:ru.push(e)}function OM(e,t,o,l){var h=t.interleaved;return h===null?(o.next=o,xw(t)):(o.next=h.next,h.next=o),t.interleaved=o,Xa(e,l)}function Xa(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var Fl=!1;function bw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ga(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xl(e,t,o){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,lr&2){var h=l.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),l.pending=t,Xa(e,o)}return h=l.interleaved,h===null?(t.next=t,xw(l)):(t.next=h.next,h.next=t),l.interleaved=t,Xa(e,o)}function Hy(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,sw(e,o)}}function eE(e,t){var o=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=t:p=p.next=t}else h=p=t;o={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,effects:l.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function T0(e,t,o,l){var h=e.updateQueue;Fl=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,a=h.shared.pending;if(a!==null){h.shared.pending=null;var w=a,C=w.next;w.next=null,_===null?p=C:_.next=C,_=w;var M=e.alternate;M!==null&&(M=M.updateQueue,a=M.lastBaseUpdate,a!==_&&(a===null?M.firstBaseUpdate=C:a.next=C,M.lastBaseUpdate=w))}if(p!==null){var D=h.baseState;_=0,M=C=w=null,a=p;do{var R=a.lane,$=a.eventTime;if((l&R)===R){M!==null&&(M=M.next={eventTime:$,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var j=e,B=a;switch(R=t,$=o,B.tag){case 1:if(j=B.payload,typeof j=="function"){D=j.call($,D,R);break e}D=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=B.payload,R=typeof j=="function"?j.call($,D,R):j,R==null)break e;D=ai({},D,R);break e;case 2:Fl=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,R=h.effects,R===null?h.effects=[a]:R.push(a))}else $={eventTime:$,lane:R,tag:a.tag,payload:a.payload,callback:a.callback,next:null},M===null?(C=M=$,w=D):M=M.next=$,_|=R;if(a=a.next,a===null){if(a=h.shared.pending,a===null)break;R=a,a=R.next,R.next=null,h.lastBaseUpdate=R,h.shared.pending=null}}while(1);if(M===null&&(w=D),h.baseState=w,h.firstBaseUpdate=C,h.lastBaseUpdate=M,t=h.shared.interleaved,t!==null){h=t;do _|=h.lane,h=h.next;while(h!==t)}else p===null&&(h.shared.lanes=0);fu|=_,e.lanes=_,e.memoizedState=D}}function tE(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],h=l.callback;if(h!==null){if(l.callback=null,l=o,typeof h!="function")throw Error(Wt(191,h));h.call(l)}}}var FM=new OP.Component().refs;function cb(e,t,o,l){t=e.memoizedState,o=o(l,t),o=o==null?t:ai({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var K0={isMounted:function(e){return(e=e._reactInternals)?bu(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var l=oo(),h=Kl(e),p=Ga(l,h);p.payload=t,o!=null&&(p.callback=o),t=Xl(e,p,h),t!==null&&(Gs(t,e,h,l),Hy(t,e,h))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var l=oo(),h=Kl(e),p=Ga(l,h);p.tag=1,p.payload=t,o!=null&&(p.callback=o),t=Xl(e,p,h),t!==null&&(Gs(t,e,h,l),Hy(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=oo(),l=Kl(e),h=Ga(o,l);h.tag=2,t!=null&&(h.callback=t),t=Xl(e,h,l),t!==null&&(Gs(t,e,l,o),Hy(t,e,l))}};function nE(e,t,o,l,h,p,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,_):t.prototype&&t.prototype.isPureReactComponent?!am(o,l)||!am(h,p):!0}function $M(e,t,o){var l=!1,h=tc,p=t.contextType;return typeof p=="object"&&p!==null?p=hs(p):(h=bo(t)?du:Qi.current,l=t.contextTypes,p=(l=l!=null)?ch(e,h):tc),t=new t(o,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=K0,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=p),t}function rE(e,t,o,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,l),t.state!==e&&K0.enqueueReplaceState(t,t.state,null)}function ub(e,t,o,l){var h=e.stateNode;h.props=o,h.state=e.memoizedState,h.refs=FM,bw(e);var p=t.contextType;typeof p=="object"&&p!==null?h.context=hs(p):(p=bo(t)?du:Qi.current,h.context=ch(e,p)),h.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(cb(e,t,p,o),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&K0.enqueueReplaceState(h,h.state,null),T0(e,o,h,l),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function ff(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Wt(309));var l=o.stateNode}if(!l)throw Error(Wt(147,e));var h=l,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(_){var a=h.refs;a===FM&&(a=h.refs={}),_===null?delete a[p]:a[p]=_},t._stringRef=p,t)}if(typeof e!="string")throw Error(Wt(284));if(!o._owner)throw Error(Wt(290,e))}return e}function Ey(e,t){throw e=Object.prototype.toString.call(t),Error(Wt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function iE(e){var t=e._init;return t(e._payload)}function NM(e){function t(N,U){if(e){var G=N.deletions;G===null?(N.deletions=[U],N.flags|=16):G.push(U)}}function o(N,U){if(!e)return null;for(;U!==null;)t(N,U),U=U.sibling;return null}function l(N,U){for(N=new Map;U!==null;)U.key!==null?N.set(U.key,U):N.set(U.index,U),U=U.sibling;return N}function h(N,U){return N=Jl(N,U),N.index=0,N.sibling=null,N}function p(N,U,G){return N.index=G,e?(G=N.alternate,G!==null?(G=G.index,G<U?(N.flags|=2,U):G):(N.flags|=2,U)):(N.flags|=1048576,U)}function _(N){return e&&N.alternate===null&&(N.flags|=2),N}function a(N,U,G,Y){return U===null||U.tag!==6?(U=p1(G,N.mode,Y),U.return=N,U):(U=h(U,G),U.return=N,U)}function w(N,U,G,Y){var Q=G.type;return Q===Bd?M(N,U,G.props.children,Y,G.key):U!==null&&(U.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Bl&&iE(Q)===U.type)?(Y=h(U,G.props),Y.ref=ff(N,U,G),Y.return=N,Y):(Y=Jy(G.type,G.key,G.props,null,N.mode,Y),Y.ref=ff(N,U,G),Y.return=N,Y)}function C(N,U,G,Y){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=f1(G,N.mode,Y),U.return=N,U):(U=h(U,G.children||[]),U.return=N,U)}function M(N,U,G,Y,Q){return U===null||U.tag!==7?(U=au(G,N.mode,Y,Q),U.return=N,U):(U=h(U,G),U.return=N,U)}function D(N,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=p1(""+U,N.mode,G),U.return=N,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case my:return G=Jy(U.type,U.key,U.props,null,N.mode,G),G.ref=ff(N,null,U),G.return=N,G;case Od:return U=f1(U,N.mode,G),U.return=N,U;case Bl:var Y=U._init;return D(N,Y(U._payload),G)}if(Mf(U)||cf(U))return U=au(U,N.mode,G,null),U.return=N,U;Ey(N,U)}return null}function R(N,U,G,Y){var Q=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Q!==null?null:a(N,U,""+G,Y);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case my:return G.key===Q?w(N,U,G,Y):null;case Od:return G.key===Q?C(N,U,G,Y):null;case Bl:return Q=G._init,R(N,U,Q(G._payload),Y)}if(Mf(G)||cf(G))return Q!==null?null:M(N,U,G,Y,null);Ey(N,G)}return null}function $(N,U,G,Y,Q){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return N=N.get(G)||null,a(U,N,""+Y,Q);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case my:return N=N.get(Y.key===null?G:Y.key)||null,w(U,N,Y,Q);case Od:return N=N.get(Y.key===null?G:Y.key)||null,C(U,N,Y,Q);case Bl:var re=Y._init;return $(N,U,G,re(Y._payload),Q)}if(Mf(Y)||cf(Y))return N=N.get(G)||null,M(U,N,Y,Q,null);Ey(U,Y)}return null}function j(N,U,G,Y){for(var Q=null,re=null,oe=U,de=U=0,ae=null;oe!==null&&de<G.length;de++){oe.index>de?(ae=oe,oe=null):ae=oe.sibling;var ye=R(N,oe,G[de],Y);if(ye===null){oe===null&&(oe=ae);break}e&&oe&&ye.alternate===null&&t(N,oe),U=p(ye,U,de),re===null?Q=ye:re.sibling=ye,re=ye,oe=ae}if(de===G.length)return o(N,oe),Yr&&Kc(N,de),Q;if(oe===null){for(;de<G.length;de++)oe=D(N,G[de],Y),oe!==null&&(U=p(oe,U,de),re===null?Q=oe:re.sibling=oe,re=oe);return Yr&&Kc(N,de),Q}for(oe=l(N,oe);de<G.length;de++)ae=$(oe,N,de,G[de],Y),ae!==null&&(e&&ae.alternate!==null&&oe.delete(ae.key===null?de:ae.key),U=p(ae,U,de),re===null?Q=ae:re.sibling=ae,re=ae);return e&&oe.forEach(function(Ce){return t(N,Ce)}),Yr&&Kc(N,de),Q}function B(N,U,G,Y){var Q=cf(G);if(typeof Q!="function")throw Error(Wt(150));if(G=Q.call(G),G==null)throw Error(Wt(151));for(var re=Q=null,oe=U,de=U=0,ae=null,ye=G.next();oe!==null&&!ye.done;de++,ye=G.next()){oe.index>de?(ae=oe,oe=null):ae=oe.sibling;var Ce=R(N,oe,ye.value,Y);if(Ce===null){oe===null&&(oe=ae);break}e&&oe&&Ce.alternate===null&&t(N,oe),U=p(Ce,U,de),re===null?Q=Ce:re.sibling=Ce,re=Ce,oe=ae}if(ye.done)return o(N,oe),Yr&&Kc(N,de),Q;if(oe===null){for(;!ye.done;de++,ye=G.next())ye=D(N,ye.value,Y),ye!==null&&(U=p(ye,U,de),re===null?Q=ye:re.sibling=ye,re=ye);return Yr&&Kc(N,de),Q}for(oe=l(N,oe);!ye.done;de++,ye=G.next())ye=$(oe,N,de,ye.value,Y),ye!==null&&(e&&ye.alternate!==null&&oe.delete(ye.key===null?de:ye.key),U=p(ye,U,de),re===null?Q=ye:re.sibling=ye,re=ye);return e&&oe.forEach(function(Fe){return t(N,Fe)}),Yr&&Kc(N,de),Q}function K(N,U,G,Y){if(typeof G=="object"&&G!==null&&G.type===Bd&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case my:e:{for(var Q=G.key,re=U;re!==null;){if(re.key===Q){if(Q=G.type,Q===Bd){if(re.tag===7){o(N,re.sibling),U=h(re,G.props.children),U.return=N,N=U;break e}}else if(re.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Bl&&iE(Q)===re.type){o(N,re.sibling),U=h(re,G.props),U.ref=ff(N,re,G),U.return=N,N=U;break e}o(N,re);break}else t(N,re);re=re.sibling}G.type===Bd?(U=au(G.props.children,N.mode,Y,G.key),U.return=N,N=U):(Y=Jy(G.type,G.key,G.props,null,N.mode,Y),Y.ref=ff(N,U,G),Y.return=N,N=Y)}return _(N);case Od:e:{for(re=G.key;U!==null;){if(U.key===re)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){o(N,U.sibling),U=h(U,G.children||[]),U.return=N,N=U;break e}else{o(N,U);break}else t(N,U);U=U.sibling}U=f1(G,N.mode,Y),U.return=N,N=U}return _(N);case Bl:return re=G._init,K(N,U,re(G._payload),Y)}if(Mf(G))return j(N,U,G,Y);if(cf(G))return B(N,U,G,Y);Ey(N,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(o(N,U.sibling),U=h(U,G),U.return=N,N=U):(o(N,U),U=p1(G,N.mode,Y),U.return=N,N=U),_(N)):o(N,U)}return K}var dh=NM(!0),UM=NM(!1),zm={},ya=ic(zm),dm=ic(zm),hm=ic(zm);function iu(e){if(e===zm)throw Error(Wt(174));return e}function ww(e,t){switch(Fr(hm,t),Fr(dm,e),Fr(ya,zm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:V1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=V1(t,e)}Gr(ya),Fr(ya,t)}function hh(){Gr(ya),Gr(dm),Gr(hm)}function VM(e){iu(hm.current);var t=iu(ya.current),o=V1(t,e.type);t!==o&&(Fr(dm,e),Fr(ya,o))}function Sw(e){dm.current===e&&(Gr(ya),Gr(dm))}var oi=ic(0);function C0(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var a1=[];function Tw(){for(var e=0;e<a1.length;e++)a1[e]._workInProgressVersionPrimary=null;a1.length=0}var qy=nl.ReactCurrentDispatcher,l1=nl.ReactCurrentBatchConfig,pu=0,si=null,Ti=null,zi=null,E0=!1,Uf=!1,pm=0,V5=0;function Xi(){throw Error(Wt(321))}function Cw(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!Hs(e[o],t[o]))return!1;return!0}function Ew(e,t,o,l,h,p){if(pu=p,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qy.current=e===null||e.memoizedState===null?H5:q5,e=o(l,h),Uf){p=0;do{if(Uf=!1,pm=0,25<=p)throw Error(Wt(301));p+=1,zi=Ti=null,t.updateQueue=null,qy.current=Z5,e=o(l,h)}while(Uf)}if(qy.current=k0,t=Ti!==null&&Ti.next!==null,pu=0,zi=Ti=si=null,E0=!1,t)throw Error(Wt(300));return e}function kw(){var e=pm!==0;return pm=0,e}function aa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zi===null?si.memoizedState=zi=e:zi=zi.next=e,zi}function ps(){if(Ti===null){var e=si.alternate;e=e!==null?e.memoizedState:null}else e=Ti.next;var t=zi===null?si.memoizedState:zi.next;if(t!==null)zi=t,Ti=e;else{if(e===null)throw Error(Wt(310));Ti=e,e={memoizedState:Ti.memoizedState,baseState:Ti.baseState,baseQueue:Ti.baseQueue,queue:Ti.queue,next:null},zi===null?si.memoizedState=zi=e:zi=zi.next=e}return zi}function fm(e,t){return typeof t=="function"?t(e):t}function c1(e){var t=ps(),o=t.queue;if(o===null)throw Error(Wt(311));o.lastRenderedReducer=e;var l=Ti,h=l.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}l.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,l=l.baseState;var a=_=null,w=null,C=p;do{var M=C.lane;if((pu&M)===M)w!==null&&(w=w.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),l=C.hasEagerState?C.eagerState:e(l,C.action);else{var D={lane:M,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};w===null?(a=w=D,_=l):w=w.next=D,si.lanes|=M,fu|=M}C=C.next}while(C!==null&&C!==p);w===null?_=l:w.next=a,Hs(l,t.memoizedState)||(vo=!0),t.memoizedState=l,t.baseState=_,t.baseQueue=w,o.lastRenderedState=l}if(e=o.interleaved,e!==null){h=e;do p=h.lane,si.lanes|=p,fu|=p,h=h.next;while(h!==e)}else h===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function u1(e){var t=ps(),o=t.queue;if(o===null)throw Error(Wt(311));o.lastRenderedReducer=e;var l=o.dispatch,h=o.pending,p=t.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=e(p,_.action),_=_.next;while(_!==h);Hs(p,t.memoizedState)||(vo=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),o.lastRenderedState=p}return[p,l]}function jM(){}function WM(e,t){var o=si,l=ps(),h=t(),p=!Hs(l.memoizedState,h);if(p&&(l.memoizedState=h,vo=!0),l=l.queue,Pw(qM.bind(null,o,l,e),[e]),l.getSnapshot!==t||p||zi!==null&&zi.memoizedState.tag&1){if(o.flags|=2048,mm(9,HM.bind(null,o,l,h,t),void 0,null),Ri===null)throw Error(Wt(349));pu&30||GM(o,t,h)}return h}function GM(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=si.updateQueue,t===null?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function HM(e,t,o,l){t.value=o,t.getSnapshot=l,ZM(t)&&XM(e)}function qM(e,t,o){return o(function(){ZM(t)&&XM(e)})}function ZM(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!Hs(e,o)}catch{return!0}}function XM(e){var t=Xa(e,1);t!==null&&Gs(t,e,1,-1)}function oE(e){var t=aa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fm,lastRenderedState:e},t.queue=e,e=e.dispatch=G5.bind(null,si,e),[t.memoizedState,e]}function mm(e,t,o,l){return e={tag:e,create:t,destroy:o,deps:l,next:null},t=si.updateQueue,t===null?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(l=o.next,o.next=e,e.next=l,t.lastEffect=e)),e}function YM(){return ps().memoizedState}function Zy(e,t,o,l){var h=aa();si.flags|=e,h.memoizedState=mm(1|t,o,void 0,l===void 0?null:l)}function J0(e,t,o,l){var h=ps();l=l===void 0?null:l;var p=void 0;if(Ti!==null){var _=Ti.memoizedState;if(p=_.destroy,l!==null&&Cw(l,_.deps)){h.memoizedState=mm(t,o,p,l);return}}si.flags|=e,h.memoizedState=mm(1|t,o,p,l)}function sE(e,t){return Zy(8390656,8,e,t)}function Pw(e,t){return J0(2048,8,e,t)}function KM(e,t){return J0(4,2,e,t)}function JM(e,t){return J0(4,4,e,t)}function QM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eI(e,t,o){return o=o!=null?o.concat([e]):null,J0(4,4,QM.bind(null,t,e),o)}function Mw(){}function tI(e,t){var o=ps();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&Cw(t,l[1])?l[0]:(o.memoizedState=[e,t],e)}function nI(e,t){var o=ps();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&Cw(t,l[1])?l[0]:(e=e(),o.memoizedState=[e,t],e)}function rI(e,t,o){return pu&21?(Hs(o,t)||(o=sM(),si.lanes|=o,fu|=o,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=o)}function j5(e,t){var o=Mr;Mr=o!==0&&4>o?o:4,e(!0);var l=l1.transition;l1.transition={};try{e(!1),t()}finally{Mr=o,l1.transition=l}}function iI(){return ps().memoizedState}function W5(e,t,o){var l=Kl(e);if(o={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null},oI(e))sI(t,o);else if(o=OM(e,t,o,l),o!==null){var h=oo();Gs(o,e,l,h),aI(o,t,l)}}function G5(e,t,o){var l=Kl(e),h={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null};if(oI(e))sI(t,h);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var _=t.lastRenderedState,a=p(_,o);if(h.hasEagerState=!0,h.eagerState=a,Hs(a,_)){var w=t.interleaved;w===null?(h.next=h,xw(t)):(h.next=w.next,w.next=h),t.interleaved=h;return}}catch{}finally{}o=OM(e,t,h,l),o!==null&&(h=oo(),Gs(o,e,l,h),aI(o,t,l))}}function oI(e){var t=e.alternate;return e===si||t!==null&&t===si}function sI(e,t){Uf=E0=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function aI(e,t,o){if(o&4194240){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,sw(e,o)}}var k0={readContext:hs,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useInsertionEffect:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useSyncExternalStore:Xi,useId:Xi,unstable_isNewReconciler:!1},H5={readContext:hs,useCallback:function(e,t){return aa().memoizedState=[e,t===void 0?null:t],e},useContext:hs,useEffect:sE,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,Zy(4194308,4,QM.bind(null,t,e),o)},useLayoutEffect:function(e,t){return Zy(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zy(4,2,e,t)},useMemo:function(e,t){var o=aa();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var l=aa();return t=o!==void 0?o(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=W5.bind(null,si,e),[l.memoizedState,e]},useRef:function(e){var t=aa();return e={current:e},t.memoizedState=e},useState:oE,useDebugValue:Mw,useDeferredValue:function(e){return aa().memoizedState=e},useTransition:function(){var e=oE(!1),t=e[0];return e=j5.bind(null,e[1]),aa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var l=si,h=aa();if(Yr){if(o===void 0)throw Error(Wt(407));o=o()}else{if(o=t(),Ri===null)throw Error(Wt(349));pu&30||GM(l,t,o)}h.memoizedState=o;var p={value:o,getSnapshot:t};return h.queue=p,sE(qM.bind(null,l,p,e),[e]),l.flags|=2048,mm(9,HM.bind(null,l,p,o,t),void 0,null),o},useId:function(){var e=aa(),t=Ri.identifierPrefix;if(Yr){var o=Wa,l=ja;o=(l&~(1<<32-Ws(l)-1)).toString(32)+o,t=":"+t+"R"+o,o=pm++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=V5++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},q5={readContext:hs,useCallback:tI,useContext:hs,useEffect:Pw,useImperativeHandle:eI,useInsertionEffect:KM,useLayoutEffect:JM,useMemo:nI,useReducer:c1,useRef:YM,useState:function(){return c1(fm)},useDebugValue:Mw,useDeferredValue:function(e){var t=ps();return rI(t,Ti.memoizedState,e)},useTransition:function(){var e=c1(fm)[0],t=ps().memoizedState;return[e,t]},useMutableSource:jM,useSyncExternalStore:WM,useId:iI,unstable_isNewReconciler:!1},Z5={readContext:hs,useCallback:tI,useContext:hs,useEffect:Pw,useImperativeHandle:eI,useInsertionEffect:KM,useLayoutEffect:JM,useMemo:nI,useReducer:u1,useRef:YM,useState:function(){return u1(fm)},useDebugValue:Mw,useDeferredValue:function(e){var t=ps();return Ti===null?t.memoizedState=e:rI(t,Ti.memoizedState,e)},useTransition:function(){var e=u1(fm)[0],t=ps().memoizedState;return[e,t]},useMutableSource:jM,useSyncExternalStore:WM,useId:iI,unstable_isNewReconciler:!1};function ph(e,t){try{var o="",l=t;do o+=wR(l),l=l.return;while(l);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:h,digest:null}}function d1(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function db(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var X5=typeof WeakMap=="function"?WeakMap:Map;function lI(e,t,o){o=Ga(-1,o),o.tag=3,o.payload={element:null};var l=t.value;return o.callback=function(){M0||(M0=!0,bb=l),db(e,t)},o}function cI(e,t,o){o=Ga(-1,o),o.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var h=t.value;o.payload=function(){return l(h)},o.callback=function(){db(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){db(e,t),typeof l!="function"&&(Yl===null?Yl=new Set([this]):Yl.add(this));var _=t.stack;this.componentDidCatch(t.value,{componentStack:_!==null?_:""})}),o}function aE(e,t,o){var l=e.pingCache;if(l===null){l=e.pingCache=new X5;var h=new Set;l.set(t,h)}else h=l.get(t),h===void 0&&(h=new Set,l.set(t,h));h.has(o)||(h.add(o),e=cL.bind(null,e,t,o),t.then(e,e))}function lE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cE(e,t,o,l,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=Ga(-1,1),t.tag=2,Xl(o,t,1))),o.lanes|=1),e)}var Y5=nl.ReactCurrentOwner,vo=!1;function io(e,t,o,l){t.child=e===null?UM(t,null,o,l):dh(t,e.child,o,l)}function uE(e,t,o,l,h){o=o.render;var p=t.ref;return Qd(t,h),l=Ew(e,t,o,l,p,h),o=kw(),e!==null&&!vo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Ya(e,t,h)):(Yr&&o&&fw(t),t.flags|=1,io(e,t,l,h),t.child)}function dE(e,t,o,l,h){if(e===null){var p=o.type;return typeof p=="function"&&!Bw(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=p,uI(e,t,p,l,h)):(e=Jy(o.type,null,l,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&h)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:am,o(_,l)&&e.ref===t.ref)return Ya(e,t,h)}return t.flags|=1,e=Jl(p,l),e.ref=t.ref,e.return=t,t.child=e}function uI(e,t,o,l,h){if(e!==null){var p=e.memoizedProps;if(am(p,l)&&e.ref===t.ref)if(vo=!1,t.pendingProps=l=p,(e.lanes&h)!==0)e.flags&131072&&(vo=!0);else return t.lanes=e.lanes,Ya(e,t,h)}return hb(e,t,o,l,h)}function dI(e,t,o){var l=t.pendingProps,h=l.children,p=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fr(qd,Lo),Lo|=o;else{if(!(o&1073741824))return e=p!==null?p.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fr(qd,Lo),Lo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=p!==null?p.baseLanes:o,Fr(qd,Lo),Lo|=l}else p!==null?(l=p.baseLanes|o,t.memoizedState=null):l=o,Fr(qd,Lo),Lo|=l;return io(e,t,h,o),t.child}function hI(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function hb(e,t,o,l,h){var p=bo(o)?du:Qi.current;return p=ch(t,p),Qd(t,h),o=Ew(e,t,o,l,p,h),l=kw(),e!==null&&!vo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,Ya(e,t,h)):(Yr&&l&&fw(t),t.flags|=1,io(e,t,o,h),t.child)}function hE(e,t,o,l,h){if(bo(o)){var p=!0;v0(t)}else p=!1;if(Qd(t,h),t.stateNode===null)Xy(e,t),$M(t,o,l),ub(t,o,l,h),l=!0;else if(e===null){var _=t.stateNode,a=t.memoizedProps;_.props=a;var w=_.context,C=o.contextType;typeof C=="object"&&C!==null?C=hs(C):(C=bo(o)?du:Qi.current,C=ch(t,C));var M=o.getDerivedStateFromProps,D=typeof M=="function"||typeof _.getSnapshotBeforeUpdate=="function";D||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(a!==l||w!==C)&&rE(t,_,l,C),Fl=!1;var R=t.memoizedState;_.state=R,T0(t,l,_,h),w=t.memoizedState,a!==l||R!==w||xo.current||Fl?(typeof M=="function"&&(cb(t,o,M,l),w=t.memoizedState),(a=Fl||nE(t,o,a,l,R,w,C))?(D||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(t.flags|=4194308)):(typeof _.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=w),_.props=l,_.state=w,_.context=C,l=a):(typeof _.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{_=t.stateNode,BM(e,t),a=t.memoizedProps,C=t.type===t.elementType?a:Us(t.type,a),_.props=C,D=t.pendingProps,R=_.context,w=o.contextType,typeof w=="object"&&w!==null?w=hs(w):(w=bo(o)?du:Qi.current,w=ch(t,w));var $=o.getDerivedStateFromProps;(M=typeof $=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(a!==D||R!==w)&&rE(t,_,l,w),Fl=!1,R=t.memoizedState,_.state=R,T0(t,l,_,h);var j=t.memoizedState;a!==D||R!==j||xo.current||Fl?(typeof $=="function"&&(cb(t,o,$,l),j=t.memoizedState),(C=Fl||nE(t,o,C,l,R,j,w)||!1)?(M||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(l,j,w),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(l,j,w)),typeof _.componentDidUpdate=="function"&&(t.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof _.componentDidUpdate!="function"||a===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=j),_.props=l,_.state=j,_.context=w,l=C):(typeof _.componentDidUpdate!="function"||a===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),l=!1)}return pb(e,t,o,l,p,h)}function pb(e,t,o,l,h,p){hI(e,t);var _=(t.flags&128)!==0;if(!l&&!_)return h&&KC(t,o,!1),Ya(e,t,p);l=t.stateNode,Y5.current=t;var a=_&&typeof o.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&_?(t.child=dh(t,e.child,null,p),t.child=dh(t,null,a,p)):io(e,t,a,p),t.memoizedState=l.state,h&&KC(t,o,!0),t.child}function pI(e){var t=e.stateNode;t.pendingContext?YC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&YC(e,t.context,!1),ww(e,t.containerInfo)}function pE(e,t,o,l,h){return uh(),gw(h),t.flags|=256,io(e,t,o,l),t.child}var fb={dehydrated:null,treeContext:null,retryLane:0};function mb(e){return{baseLanes:e,cachePool:null,transitions:null}}function fI(e,t,o){var l=t.pendingProps,h=oi.current,p=!1,_=(t.flags&128)!==0,a;if((a=_)||(a=e!==null&&e.memoizedState===null?!1:(h&2)!==0),a?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Fr(oi,h&1),e===null)return ab(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(_=l.children,e=l.fallback,p?(l=t.mode,p=t.child,_={mode:"hidden",children:_},!(l&1)&&p!==null?(p.childLanes=0,p.pendingProps=_):p=t_(_,l,0,null),e=au(e,l,o,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=mb(o),t.memoizedState=fb,e):Iw(t,_));if(h=e.memoizedState,h!==null&&(a=h.dehydrated,a!==null))return K5(e,t,_,l,a,h,o);if(p){p=l.fallback,_=t.mode,h=e.child,a=h.sibling;var w={mode:"hidden",children:l.children};return!(_&1)&&t.child!==h?(l=t.child,l.childLanes=0,l.pendingProps=w,t.deletions=null):(l=Jl(h,w),l.subtreeFlags=h.subtreeFlags&14680064),a!==null?p=Jl(a,p):(p=au(p,_,o,null),p.flags|=2),p.return=t,l.return=t,l.sibling=p,t.child=l,l=p,p=t.child,_=e.child.memoizedState,_=_===null?mb(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=e.childLanes&~o,t.memoizedState=fb,l}return p=e.child,e=p.sibling,l=Jl(p,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=o),l.return=t,l.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=l,t.memoizedState=null,l}function Iw(e,t){return t=t_({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ky(e,t,o,l){return l!==null&&gw(l),dh(t,e.child,null,o),e=Iw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function K5(e,t,o,l,h,p,_){if(o)return t.flags&256?(t.flags&=-257,l=d1(Error(Wt(422))),ky(e,t,_,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=l.fallback,h=t.mode,l=t_({mode:"visible",children:l.children},h,0,null),p=au(p,h,_,null),p.flags|=2,l.return=t,p.return=t,l.sibling=p,t.child=l,t.mode&1&&dh(t,e.child,null,_),t.child.memoizedState=mb(_),t.memoizedState=fb,p);if(!(t.mode&1))return ky(e,t,_,null);if(h.data==="$!"){if(l=h.nextSibling&&h.nextSibling.dataset,l)var a=l.dgst;return l=a,p=Error(Wt(419)),l=d1(p,l,void 0),ky(e,t,_,l)}if(a=(_&e.childLanes)!==0,vo||a){if(l=Ri,l!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(l.suspendedLanes|_)?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,Xa(e,h),Gs(l,e,h,-1))}return Ow(),l=d1(Error(Wt(421))),ky(e,t,_,l)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=uL.bind(null,e),h._reactRetry=t,null):(e=p.treeContext,$o=Zl(h.nextSibling),No=t,Yr=!0,js=null,e!==null&&(ss[as++]=ja,ss[as++]=Wa,ss[as++]=hu,ja=e.id,Wa=e.overflow,hu=t),t=Iw(t,l.children),t.flags|=4096,t)}function fE(e,t,o){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),lb(e.return,t,o)}function h1(e,t,o,l,h){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:h}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=o,p.tailMode=h)}function mI(e,t,o){var l=t.pendingProps,h=l.revealOrder,p=l.tail;if(io(e,t,l.children,o),l=oi.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fE(e,o,t);else if(e.tag===19)fE(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Fr(oi,l),!(t.mode&1))t.memoizedState=null;else switch(h){case"forwards":for(o=t.child,h=null;o!==null;)e=o.alternate,e!==null&&C0(e)===null&&(h=o),o=o.sibling;o=h,o===null?(h=t.child,t.child=null):(h=o.sibling,o.sibling=null),h1(t,!1,h,o,p);break;case"backwards":for(o=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&C0(e)===null){t.child=h;break}e=h.sibling,h.sibling=o,o=h,h=e}h1(t,!0,o,null,p);break;case"together":h1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),fu|=t.lanes,!(o&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Wt(153));if(t.child!==null){for(e=t.child,o=Jl(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Jl(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function J5(e,t,o){switch(t.tag){case 3:pI(t),uh();break;case 5:VM(t);break;case 1:bo(t.type)&&v0(t);break;case 4:ww(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,h=t.memoizedProps.value;Fr(w0,l._currentValue),l._currentValue=h;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Fr(oi,oi.current&1),t.flags|=128,null):o&t.child.childLanes?fI(e,t,o):(Fr(oi,oi.current&1),e=Ya(e,t,o),e!==null?e.sibling:null);Fr(oi,oi.current&1);break;case 19:if(l=(o&t.childLanes)!==0,e.flags&128){if(l)return mI(e,t,o);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Fr(oi,oi.current),l)break;return null;case 22:case 23:return t.lanes=0,dI(e,t,o)}return Ya(e,t,o)}var gI,gb,yI,_I;gI=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};gb=function(){};yI=function(e,t,o,l){var h=e.memoizedProps;if(h!==l){e=t.stateNode,iu(ya.current);var p=null;switch(o){case"input":h=F1(e,h),l=F1(e,l),p=[];break;case"select":h=ai({},h,{value:void 0}),l=ai({},l,{value:void 0}),p=[];break;case"textarea":h=U1(e,h),l=U1(e,l),p=[];break;default:typeof h.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=y0)}j1(o,l);var _;o=null;for(C in h)if(!l.hasOwnProperty(C)&&h.hasOwnProperty(C)&&h[C]!=null)if(C==="style"){var a=h[C];for(_ in a)a.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(em.hasOwnProperty(C)?p||(p=[]):(p=p||[]).push(C,null));for(C in l){var w=l[C];if(a=h!=null?h[C]:void 0,l.hasOwnProperty(C)&&w!==a&&(w!=null||a!=null))if(C==="style")if(a){for(_ in a)!a.hasOwnProperty(_)||w&&w.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in w)w.hasOwnProperty(_)&&a[_]!==w[_]&&(o||(o={}),o[_]=w[_])}else o||(p||(p=[]),p.push(C,o)),o=w;else C==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,a=a?a.__html:void 0,w!=null&&a!==w&&(p=p||[]).push(C,w)):C==="children"?typeof w!="string"&&typeof w!="number"||(p=p||[]).push(C,""+w):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(em.hasOwnProperty(C)?(w!=null&&C==="onScroll"&&Wr("scroll",e),p||a===w||(p=[])):(p=p||[]).push(C,w))}o&&(p=p||[]).push("style",o);var C=p;(t.updateQueue=C)&&(t.flags|=4)}};_I=function(e,t,o,l){o!==l&&(t.flags|=4)};function mf(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Yi(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,l=0;if(t)for(var h=e.child;h!==null;)o|=h.lanes|h.childLanes,l|=h.subtreeFlags&14680064,l|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)o|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=o,t}function Q5(e,t,o){var l=t.pendingProps;switch(mw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(t),null;case 1:return bo(t.type)&&_0(),Yi(t),null;case 3:return l=t.stateNode,hh(),Gr(xo),Gr(Qi),Tw(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Cy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,js!==null&&(Tb(js),js=null))),gb(e,t),Yi(t),null;case 5:Sw(t);var h=iu(hm.current);if(o=t.type,e!==null&&t.stateNode!=null)yI(e,t,o,l,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(Wt(166));return Yi(t),null}if(e=iu(ya.current),Cy(t)){l=t.stateNode,o=t.type;var p=t.memoizedProps;switch(l[ha]=t,l[um]=p,e=(t.mode&1)!==0,o){case"dialog":Wr("cancel",l),Wr("close",l);break;case"iframe":case"object":case"embed":Wr("load",l);break;case"video":case"audio":for(h=0;h<Af.length;h++)Wr(Af[h],l);break;case"source":Wr("error",l);break;case"img":case"image":case"link":Wr("error",l),Wr("load",l);break;case"details":Wr("toggle",l);break;case"input":SC(l,p),Wr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!p.multiple},Wr("invalid",l);break;case"textarea":CC(l,p),Wr("invalid",l)}j1(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var a=p[_];_==="children"?typeof a=="string"?l.textContent!==a&&(p.suppressHydrationWarning!==!0&&Ty(l.textContent,a,e),h=["children",a]):typeof a=="number"&&l.textContent!==""+a&&(p.suppressHydrationWarning!==!0&&Ty(l.textContent,a,e),h=["children",""+a]):em.hasOwnProperty(_)&&a!=null&&_==="onScroll"&&Wr("scroll",l)}switch(o){case"input":gy(l),TC(l,p,!0);break;case"textarea":gy(l),EC(l);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(l.onclick=y0)}l=h,t.updateQueue=l,l!==null&&(t.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=GP(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=_.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=_.createElement(o,{is:l.is}):(e=_.createElement(o),o==="select"&&(_=e,l.multiple?_.multiple=!0:l.size&&(_.size=l.size))):e=_.createElementNS(e,o),e[ha]=t,e[um]=l,gI(e,t,!1,!1),t.stateNode=e;e:{switch(_=W1(o,l),o){case"dialog":Wr("cancel",e),Wr("close",e),h=l;break;case"iframe":case"object":case"embed":Wr("load",e),h=l;break;case"video":case"audio":for(h=0;h<Af.length;h++)Wr(Af[h],e);h=l;break;case"source":Wr("error",e),h=l;break;case"img":case"image":case"link":Wr("error",e),Wr("load",e),h=l;break;case"details":Wr("toggle",e),h=l;break;case"input":SC(e,l),h=F1(e,l),Wr("invalid",e);break;case"option":h=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},h=ai({},l,{value:void 0}),Wr("invalid",e);break;case"textarea":CC(e,l),h=U1(e,l),Wr("invalid",e);break;default:h=l}j1(o,h),a=h;for(p in a)if(a.hasOwnProperty(p)){var w=a[p];p==="style"?ZP(e,w):p==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&HP(e,w)):p==="children"?typeof w=="string"?(o!=="textarea"||w!=="")&&tm(e,w):typeof w=="number"&&tm(e,""+w):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(em.hasOwnProperty(p)?w!=null&&p==="onScroll"&&Wr("scroll",e):w!=null&&ew(e,p,w,_))}switch(o){case"input":gy(e),TC(e,l,!1);break;case"textarea":gy(e),EC(e);break;case"option":l.value!=null&&e.setAttribute("value",""+ec(l.value));break;case"select":e.multiple=!!l.multiple,p=l.value,p!=null?Xd(e,!!l.multiple,p,!1):l.defaultValue!=null&&Xd(e,!!l.multiple,l.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=y0)}switch(o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yi(t),null;case 6:if(e&&t.stateNode!=null)_I(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(Wt(166));if(o=iu(hm.current),iu(ya.current),Cy(t)){if(l=t.stateNode,o=t.memoizedProps,l[ha]=t,(p=l.nodeValue!==o)&&(e=No,e!==null))switch(e.tag){case 3:Ty(l.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ty(l.nodeValue,o,(e.mode&1)!==0)}p&&(t.flags|=4)}else l=(o.nodeType===9?o:o.ownerDocument).createTextNode(l),l[ha]=t,t.stateNode=l}return Yi(t),null;case 13:if(Gr(oi),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Yr&&$o!==null&&t.mode&1&&!(t.flags&128))LM(),uh(),t.flags|=98560,p=!1;else if(p=Cy(t),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(Wt(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(Wt(317));p[ha]=t}else uh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yi(t),p=!1}else js!==null&&(Tb(js),js=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||oi.current&1?Ci===0&&(Ci=3):Ow())),t.updateQueue!==null&&(t.flags|=4),Yi(t),null);case 4:return hh(),gb(e,t),e===null&&lm(t.stateNode.containerInfo),Yi(t),null;case 10:return vw(t.type._context),Yi(t),null;case 17:return bo(t.type)&&_0(),Yi(t),null;case 19:if(Gr(oi),p=t.memoizedState,p===null)return Yi(t),null;if(l=(t.flags&128)!==0,_=p.rendering,_===null)if(l)mf(p,!1);else{if(Ci!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(_=C0(e),_!==null){for(t.flags|=128,mf(p,!1),l=_.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=o,o=t.child;o!==null;)p=o,e=l,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,e=_.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Fr(oi,oi.current&1|2),t.child}e=e.sibling}p.tail!==null&&pi()>fh&&(t.flags|=128,l=!0,mf(p,!1),t.lanes=4194304)}else{if(!l)if(e=C0(_),e!==null){if(t.flags|=128,l=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),mf(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Yr)return Yi(t),null}else 2*pi()-p.renderingStartTime>fh&&o!==1073741824&&(t.flags|=128,l=!0,mf(p,!1),t.lanes=4194304);p.isBackwards?(_.sibling=t.child,t.child=_):(o=p.last,o!==null?o.sibling=_:t.child=_,p.last=_)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=pi(),t.sibling=null,o=oi.current,Fr(oi,l?o&1|2:o&1),t):(Yi(t),null);case 22:case 23:return Lw(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?Lo&1073741824&&(Yi(t),t.subtreeFlags&6&&(t.flags|=8192)):Yi(t),null;case 24:return null;case 25:return null}throw Error(Wt(156,t.tag))}function eL(e,t){switch(mw(t),t.tag){case 1:return bo(t.type)&&_0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hh(),Gr(xo),Gr(Qi),Tw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sw(t),null;case 13:if(Gr(oi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Wt(340));uh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Gr(oi),null;case 4:return hh(),null;case 10:return vw(t.type._context),null;case 22:case 23:return Lw(),null;case 24:return null;default:return null}}var Py=!1,Ji=!1,tL=typeof WeakSet=="function"?WeakSet:Set,yn=null;function Hd(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(l){di(e,t,l)}else o.current=null}function yb(e,t,o){try{o()}catch(l){di(e,t,l)}}var mE=!1;function nL(e,t){if(eb=f0,e=wM(),pw(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,a=-1,w=-1,C=0,M=0,D=e,R=null;t:for(;;){for(var $;D!==o||h!==0&&D.nodeType!==3||(a=_+h),D!==p||l!==0&&D.nodeType!==3||(w=_+l),D.nodeType===3&&(_+=D.nodeValue.length),($=D.firstChild)!==null;)R=D,D=$;for(;;){if(D===e)break t;if(R===o&&++C===h&&(a=_),R===p&&++M===l&&(w=_),($=D.nextSibling)!==null)break;D=R,R=D.parentNode}D=$}o=a===-1||w===-1?null:{start:a,end:w}}else o=null}o=o||{start:0,end:0}}else o=null;for(tb={focusedElem:e,selectionRange:o},f0=!1,yn=t;yn!==null;)if(t=yn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yn=e;else for(;yn!==null;){t=yn;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var B=j.memoizedProps,K=j.memoizedState,N=t.stateNode,U=N.getSnapshotBeforeUpdate(t.elementType===t.type?B:Us(t.type,B),K);N.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Wt(163))}}catch(Y){di(t,t.return,Y)}if(e=t.sibling,e!==null){e.return=t.return,yn=e;break}yn=t.return}return j=mE,mE=!1,j}function Vf(e,t,o){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&e)===e){var p=h.destroy;h.destroy=void 0,p!==void 0&&yb(t,o,p)}h=h.next}while(h!==l)}}function Q0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var l=o.create;o.destroy=l()}o=o.next}while(o!==t)}}function _b(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function vI(e){var t=e.alternate;t!==null&&(e.alternate=null,vI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ha],delete t[um],delete t[ib],delete t[F5],delete t[$5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xI(e){return e.tag===5||e.tag===3||e.tag===4}function gE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vb(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=y0));else if(l!==4&&(e=e.child,e!==null))for(vb(e,t,o),e=e.sibling;e!==null;)vb(e,t,o),e=e.sibling}function xb(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(xb(e,t,o),e=e.sibling;e!==null;)xb(e,t,o),e=e.sibling}var Bi=null,Vs=!1;function Rl(e,t,o){for(o=o.child;o!==null;)bI(e,t,o),o=o.sibling}function bI(e,t,o){if(ga&&typeof ga.onCommitFiberUnmount=="function")try{ga.onCommitFiberUnmount(G0,o)}catch{}switch(o.tag){case 5:Ji||Hd(o,t);case 6:var l=Bi,h=Vs;Bi=null,Rl(e,t,o),Bi=l,Vs=h,Bi!==null&&(Vs?(e=Bi,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Bi.removeChild(o.stateNode));break;case 18:Bi!==null&&(Vs?(e=Bi,o=o.stateNode,e.nodeType===8?o1(e.parentNode,o):e.nodeType===1&&o1(e,o),om(e)):o1(Bi,o.stateNode));break;case 4:l=Bi,h=Vs,Bi=o.stateNode.containerInfo,Vs=!0,Rl(e,t,o),Bi=l,Vs=h;break;case 0:case 11:case 14:case 15:if(!Ji&&(l=o.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){h=l=l.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&(p&2||p&4)&&yb(o,t,_),h=h.next}while(h!==l)}Rl(e,t,o);break;case 1:if(!Ji&&(Hd(o,t),l=o.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=o.memoizedProps,l.state=o.memoizedState,l.componentWillUnmount()}catch(a){di(o,t,a)}Rl(e,t,o);break;case 21:Rl(e,t,o);break;case 22:o.mode&1?(Ji=(l=Ji)||o.memoizedState!==null,Rl(e,t,o),Ji=l):Rl(e,t,o);break;default:Rl(e,t,o)}}function yE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new tL),t.forEach(function(l){var h=dL.bind(null,e,l);o.has(l)||(o.add(l),l.then(h,h))})}}function Ns(e,t){var o=t.deletions;if(o!==null)for(var l=0;l<o.length;l++){var h=o[l];try{var p=e,_=t,a=_;e:for(;a!==null;){switch(a.tag){case 5:Bi=a.stateNode,Vs=!1;break e;case 3:Bi=a.stateNode.containerInfo,Vs=!0;break e;case 4:Bi=a.stateNode.containerInfo,Vs=!0;break e}a=a.return}if(Bi===null)throw Error(Wt(160));bI(p,_,h),Bi=null,Vs=!1;var w=h.alternate;w!==null&&(w.return=null),h.return=null}catch(C){di(h,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wI(t,e),t=t.sibling}function wI(e,t){var o=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ns(t,e),sa(e),l&4){try{Vf(3,e,e.return),Q0(3,e)}catch(B){di(e,e.return,B)}try{Vf(5,e,e.return)}catch(B){di(e,e.return,B)}}break;case 1:Ns(t,e),sa(e),l&512&&o!==null&&Hd(o,o.return);break;case 5:if(Ns(t,e),sa(e),l&512&&o!==null&&Hd(o,o.return),e.flags&32){var h=e.stateNode;try{tm(h,"")}catch(B){di(e,e.return,B)}}if(l&4&&(h=e.stateNode,h!=null)){var p=e.memoizedProps,_=o!==null?o.memoizedProps:p,a=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{a==="input"&&p.type==="radio"&&p.name!=null&&jP(h,p),W1(a,_);var C=W1(a,p);for(_=0;_<w.length;_+=2){var M=w[_],D=w[_+1];M==="style"?ZP(h,D):M==="dangerouslySetInnerHTML"?HP(h,D):M==="children"?tm(h,D):ew(h,M,D,C)}switch(a){case"input":$1(h,p);break;case"textarea":WP(h,p);break;case"select":var R=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var $=p.value;$!=null?Xd(h,!!p.multiple,$,!1):R!==!!p.multiple&&(p.defaultValue!=null?Xd(h,!!p.multiple,p.defaultValue,!0):Xd(h,!!p.multiple,p.multiple?[]:"",!1))}h[um]=p}catch(B){di(e,e.return,B)}}break;case 6:if(Ns(t,e),sa(e),l&4){if(e.stateNode===null)throw Error(Wt(162));h=e.stateNode,p=e.memoizedProps;try{h.nodeValue=p}catch(B){di(e,e.return,B)}}break;case 3:if(Ns(t,e),sa(e),l&4&&o!==null&&o.memoizedState.isDehydrated)try{om(t.containerInfo)}catch(B){di(e,e.return,B)}break;case 4:Ns(t,e),sa(e);break;case 13:Ns(t,e),sa(e),h=e.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(zw=pi())),l&4&&yE(e);break;case 22:if(M=o!==null&&o.memoizedState!==null,e.mode&1?(Ji=(C=Ji)||M,Ns(t,e),Ji=C):Ns(t,e),sa(e),l&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!M&&e.mode&1)for(yn=e,M=e.child;M!==null;){for(D=yn=M;yn!==null;){switch(R=yn,$=R.child,R.tag){case 0:case 11:case 14:case 15:Vf(4,R,R.return);break;case 1:Hd(R,R.return);var j=R.stateNode;if(typeof j.componentWillUnmount=="function"){l=R,o=R.return;try{t=l,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(B){di(l,o,B)}}break;case 5:Hd(R,R.return);break;case 22:if(R.memoizedState!==null){vE(D);continue}}$!==null?($.return=R,yn=$):vE(D)}M=M.sibling}e:for(M=null,D=e;;){if(D.tag===5){if(M===null){M=D;try{h=D.stateNode,C?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(a=D.stateNode,w=D.memoizedProps.style,_=w!=null&&w.hasOwnProperty("display")?w.display:null,a.style.display=qP("display",_))}catch(B){di(e,e.return,B)}}}else if(D.tag===6){if(M===null)try{D.stateNode.nodeValue=C?"":D.memoizedProps}catch(B){di(e,e.return,B)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;M===D&&(M=null),D=D.return}M===D&&(M=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:Ns(t,e),sa(e),l&4&&yE(e);break;case 21:break;default:Ns(t,e),sa(e)}}function sa(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(xI(o)){var l=o;break e}o=o.return}throw Error(Wt(160))}switch(l.tag){case 5:var h=l.stateNode;l.flags&32&&(tm(h,""),l.flags&=-33);var p=gE(e);xb(e,p,h);break;case 3:case 4:var _=l.stateNode.containerInfo,a=gE(e);vb(e,a,_);break;default:throw Error(Wt(161))}}catch(w){di(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rL(e,t,o){yn=e,SI(e)}function SI(e,t,o){for(var l=(e.mode&1)!==0;yn!==null;){var h=yn,p=h.child;if(h.tag===22&&l){var _=h.memoizedState!==null||Py;if(!_){var a=h.alternate,w=a!==null&&a.memoizedState!==null||Ji;a=Py;var C=Ji;if(Py=_,(Ji=w)&&!C)for(yn=h;yn!==null;)_=yn,w=_.child,_.tag===22&&_.memoizedState!==null?xE(h):w!==null?(w.return=_,yn=w):xE(h);for(;p!==null;)yn=p,SI(p),p=p.sibling;yn=h,Py=a,Ji=C}_E(e)}else h.subtreeFlags&8772&&p!==null?(p.return=h,yn=p):_E(e)}}function _E(e){for(;yn!==null;){var t=yn;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ji||Q0(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Ji)if(o===null)l.componentDidMount();else{var h=t.elementType===t.type?o.memoizedProps:Us(t.type,o.memoizedProps);l.componentDidUpdate(h,o.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&tE(t,p,l);break;case 3:var _=t.updateQueue;if(_!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}tE(t,_,o)}break;case 5:var a=t.stateNode;if(o===null&&t.flags&4){o=a;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&o.focus();break;case"img":w.src&&(o.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var M=C.memoizedState;if(M!==null){var D=M.dehydrated;D!==null&&om(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Wt(163))}Ji||t.flags&512&&_b(t)}catch(R){di(t,t.return,R)}}if(t===e){yn=null;break}if(o=t.sibling,o!==null){o.return=t.return,yn=o;break}yn=t.return}}function vE(e){for(;yn!==null;){var t=yn;if(t===e){yn=null;break}var o=t.sibling;if(o!==null){o.return=t.return,yn=o;break}yn=t.return}}function xE(e){for(;yn!==null;){var t=yn;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{Q0(4,t)}catch(w){di(t,o,w)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var h=t.return;try{l.componentDidMount()}catch(w){di(t,h,w)}}var p=t.return;try{_b(t)}catch(w){di(t,p,w)}break;case 5:var _=t.return;try{_b(t)}catch(w){di(t,_,w)}}}catch(w){di(t,t.return,w)}if(t===e){yn=null;break}var a=t.sibling;if(a!==null){a.return=t.return,yn=a;break}yn=t.return}}var iL=Math.ceil,P0=nl.ReactCurrentDispatcher,Aw=nl.ReactCurrentOwner,cs=nl.ReactCurrentBatchConfig,lr=0,Ri=null,xi=null,$i=0,Lo=0,qd=ic(0),Ci=0,gm=null,fu=0,e_=0,Dw=0,jf=null,_o=null,zw=0,fh=1/0,Ua=null,M0=!1,bb=null,Yl=null,My=!1,jl=null,I0=0,Wf=0,wb=null,Yy=-1,Ky=0;function oo(){return lr&6?pi():Yy!==-1?Yy:Yy=pi()}function Kl(e){return e.mode&1?lr&2&&$i!==0?$i&-$i:U5.transition!==null?(Ky===0&&(Ky=sM()),Ky):(e=Mr,e!==0||(e=window.event,e=e===void 0?16:pM(e.type)),e):1}function Gs(e,t,o,l){if(50<Wf)throw Wf=0,wb=null,Error(Wt(185));Im(e,o,l),(!(lr&2)||e!==Ri)&&(e===Ri&&(!(lr&2)&&(e_|=o),Ci===4&&Nl(e,$i)),wo(e,l),o===1&&lr===0&&!(t.mode&1)&&(fh=pi()+500,Y0&&oc()))}function wo(e,t){var o=e.callbackNode;UR(e,t);var l=p0(e,e===Ri?$i:0);if(l===0)o!==null&&MC(o),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(o!=null&&MC(o),t===1)e.tag===0?N5(bE.bind(null,e)):DM(bE.bind(null,e)),O5(function(){!(lr&6)&&oc()}),o=null;else{switch(aM(l)){case 1:o=ow;break;case 4:o=iM;break;case 16:o=h0;break;case 536870912:o=oM;break;default:o=h0}o=AI(o,TI.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function TI(e,t){if(Yy=-1,Ky=0,lr&6)throw Error(Wt(327));var o=e.callbackNode;if(eh()&&e.callbackNode!==o)return null;var l=p0(e,e===Ri?$i:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=A0(e,l);else{t=l;var h=lr;lr|=2;var p=EI();(Ri!==e||$i!==t)&&(Ua=null,fh=pi()+500,su(e,t));do try{aL();break}catch(a){CI(e,a)}while(1);_w(),P0.current=p,lr=h,xi!==null?t=0:(Ri=null,$i=0,t=Ci)}if(t!==0){if(t===2&&(h=X1(e),h!==0&&(l=h,t=Sb(e,h))),t===1)throw o=gm,su(e,0),Nl(e,l),wo(e,pi()),o;if(t===6)Nl(e,l);else{if(h=e.current.alternate,!(l&30)&&!oL(h)&&(t=A0(e,l),t===2&&(p=X1(e),p!==0&&(l=p,t=Sb(e,p))),t===1))throw o=gm,su(e,0),Nl(e,l),wo(e,pi()),o;switch(e.finishedWork=h,e.finishedLanes=l,t){case 0:case 1:throw Error(Wt(345));case 2:Jc(e,_o,Ua);break;case 3:if(Nl(e,l),(l&130023424)===l&&(t=zw+500-pi(),10<t)){if(p0(e,0)!==0)break;if(h=e.suspendedLanes,(h&l)!==l){oo(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=rb(Jc.bind(null,e,_o,Ua),t);break}Jc(e,_o,Ua);break;case 4:if(Nl(e,l),(l&4194240)===l)break;for(t=e.eventTimes,h=-1;0<l;){var _=31-Ws(l);p=1<<_,_=t[_],_>h&&(h=_),l&=~p}if(l=h,l=pi()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*iL(l/1960))-l,10<l){e.timeoutHandle=rb(Jc.bind(null,e,_o,Ua),l);break}Jc(e,_o,Ua);break;case 5:Jc(e,_o,Ua);break;default:throw Error(Wt(329))}}}return wo(e,pi()),e.callbackNode===o?TI.bind(null,e):null}function Sb(e,t){var o=jf;return e.current.memoizedState.isDehydrated&&(su(e,t).flags|=256),e=A0(e,t),e!==2&&(t=_o,_o=o,t!==null&&Tb(t)),e}function Tb(e){_o===null?_o=e:_o.push.apply(_o,e)}function oL(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var l=0;l<o.length;l++){var h=o[l],p=h.getSnapshot;h=h.value;try{if(!Hs(p(),h))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nl(e,t){for(t&=~Dw,t&=~e_,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-Ws(t),l=1<<o;e[o]=-1,t&=~l}}function bE(e){if(lr&6)throw Error(Wt(327));eh();var t=p0(e,0);if(!(t&1))return wo(e,pi()),null;var o=A0(e,t);if(e.tag!==0&&o===2){var l=X1(e);l!==0&&(t=l,o=Sb(e,l))}if(o===1)throw o=gm,su(e,0),Nl(e,t),wo(e,pi()),o;if(o===6)throw Error(Wt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jc(e,_o,Ua),wo(e,pi()),null}function Rw(e,t){var o=lr;lr|=1;try{return e(t)}finally{lr=o,lr===0&&(fh=pi()+500,Y0&&oc())}}function mu(e){jl!==null&&jl.tag===0&&!(lr&6)&&eh();var t=lr;lr|=1;var o=cs.transition,l=Mr;try{if(cs.transition=null,Mr=1,e)return e()}finally{Mr=l,cs.transition=o,lr=t,!(lr&6)&&oc()}}function Lw(){Lo=qd.current,Gr(qd)}function su(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,L5(o)),xi!==null)for(o=xi.return;o!==null;){var l=o;switch(mw(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&_0();break;case 3:hh(),Gr(xo),Gr(Qi),Tw();break;case 5:Sw(l);break;case 4:hh();break;case 13:Gr(oi);break;case 19:Gr(oi);break;case 10:vw(l.type._context);break;case 22:case 23:Lw()}o=o.return}if(Ri=e,xi=e=Jl(e.current,null),$i=Lo=t,Ci=0,gm=null,Dw=e_=fu=0,_o=jf=null,ru!==null){for(t=0;t<ru.length;t++)if(o=ru[t],l=o.interleaved,l!==null){o.interleaved=null;var h=l.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,l.next=_}o.pending=l}ru=null}return e}function CI(e,t){do{var o=xi;try{if(_w(),qy.current=k0,E0){for(var l=si.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}E0=!1}if(pu=0,zi=Ti=si=null,Uf=!1,pm=0,Aw.current=null,o===null||o.return===null){Ci=1,gm=t,xi=null;break}e:{var p=e,_=o.return,a=o,w=t;if(t=$i,a.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var C=w,M=a,D=M.tag;if(!(M.mode&1)&&(D===0||D===11||D===15)){var R=M.alternate;R?(M.updateQueue=R.updateQueue,M.memoizedState=R.memoizedState,M.lanes=R.lanes):(M.updateQueue=null,M.memoizedState=null)}var $=lE(_);if($!==null){$.flags&=-257,cE($,_,a,p,t),$.mode&1&&aE(p,C,t),t=$,w=C;var j=t.updateQueue;if(j===null){var B=new Set;B.add(w),t.updateQueue=B}else j.add(w);break e}else{if(!(t&1)){aE(p,C,t),Ow();break e}w=Error(Wt(426))}}else if(Yr&&a.mode&1){var K=lE(_);if(K!==null){!(K.flags&65536)&&(K.flags|=256),cE(K,_,a,p,t),gw(ph(w,a));break e}}p=w=ph(w,a),Ci!==4&&(Ci=2),jf===null?jf=[p]:jf.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var N=lI(p,w,t);eE(p,N);break e;case 1:a=w;var U=p.type,G=p.stateNode;if(!(p.flags&128)&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Yl===null||!Yl.has(G)))){p.flags|=65536,t&=-t,p.lanes|=t;var Y=cI(p,a,t);eE(p,Y);break e}}p=p.return}while(p!==null)}PI(o)}catch(Q){t=Q,xi===o&&o!==null&&(xi=o=o.return);continue}break}while(1)}function EI(){var e=P0.current;return P0.current=k0,e===null?k0:e}function Ow(){(Ci===0||Ci===3||Ci===2)&&(Ci=4),Ri===null||!(fu&268435455)&&!(e_&268435455)||Nl(Ri,$i)}function A0(e,t){var o=lr;lr|=2;var l=EI();(Ri!==e||$i!==t)&&(Ua=null,su(e,t));do try{sL();break}catch(h){CI(e,h)}while(1);if(_w(),lr=o,P0.current=l,xi!==null)throw Error(Wt(261));return Ri=null,$i=0,Ci}function sL(){for(;xi!==null;)kI(xi)}function aL(){for(;xi!==null&&!DR();)kI(xi)}function kI(e){var t=II(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,t===null?PI(e):xi=t,Aw.current=null}function PI(e){var t=e;do{var o=t.alternate;if(e=t.return,t.flags&32768){if(o=eL(o,t),o!==null){o.flags&=32767,xi=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ci=6,xi=null;return}}else if(o=Q5(o,t,Lo),o!==null){xi=o;return}if(t=t.sibling,t!==null){xi=t;return}xi=t=e}while(t!==null);Ci===0&&(Ci=5)}function Jc(e,t,o){var l=Mr,h=cs.transition;try{cs.transition=null,Mr=1,lL(e,t,o,l)}finally{cs.transition=h,Mr=l}return null}function lL(e,t,o,l){do eh();while(jl!==null);if(lr&6)throw Error(Wt(327));o=e.finishedWork;var h=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(Wt(177));e.callbackNode=null,e.callbackPriority=0;var p=o.lanes|o.childLanes;if(VR(e,p),e===Ri&&(xi=Ri=null,$i=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||My||(My=!0,AI(h0,function(){return eh(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=cs.transition,cs.transition=null;var _=Mr;Mr=1;var a=lr;lr|=4,Aw.current=null,nL(e,o),wI(o,e),P5(tb),f0=!!eb,tb=eb=null,e.current=o,rL(o),zR(),lr=a,Mr=_,cs.transition=p}else e.current=o;if(My&&(My=!1,jl=e,I0=h),p=e.pendingLanes,p===0&&(Yl=null),OR(o.stateNode),wo(e,pi()),t!==null)for(l=e.onRecoverableError,o=0;o<t.length;o++)h=t[o],l(h.value,{componentStack:h.stack,digest:h.digest});if(M0)throw M0=!1,e=bb,bb=null,e;return I0&1&&e.tag!==0&&eh(),p=e.pendingLanes,p&1?e===wb?Wf++:(Wf=0,wb=e):Wf=0,oc(),null}function eh(){if(jl!==null){var e=aM(I0),t=cs.transition,o=Mr;try{if(cs.transition=null,Mr=16>e?16:e,jl===null)var l=!1;else{if(e=jl,jl=null,I0=0,lr&6)throw Error(Wt(331));var h=lr;for(lr|=4,yn=e.current;yn!==null;){var p=yn,_=p.child;if(yn.flags&16){var a=p.deletions;if(a!==null){for(var w=0;w<a.length;w++){var C=a[w];for(yn=C;yn!==null;){var M=yn;switch(M.tag){case 0:case 11:case 15:Vf(8,M,p)}var D=M.child;if(D!==null)D.return=M,yn=D;else for(;yn!==null;){M=yn;var R=M.sibling,$=M.return;if(vI(M),M===C){yn=null;break}if(R!==null){R.return=$,yn=R;break}yn=$}}}var j=p.alternate;if(j!==null){var B=j.child;if(B!==null){j.child=null;do{var K=B.sibling;B.sibling=null,B=K}while(B!==null)}}yn=p}}if(p.subtreeFlags&2064&&_!==null)_.return=p,yn=_;else e:for(;yn!==null;){if(p=yn,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Vf(9,p,p.return)}var N=p.sibling;if(N!==null){N.return=p.return,yn=N;break e}yn=p.return}}var U=e.current;for(yn=U;yn!==null;){_=yn;var G=_.child;if(_.subtreeFlags&2064&&G!==null)G.return=_,yn=G;else e:for(_=U;yn!==null;){if(a=yn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Q0(9,a)}}catch(Q){di(a,a.return,Q)}if(a===_){yn=null;break e}var Y=a.sibling;if(Y!==null){Y.return=a.return,yn=Y;break e}yn=a.return}}if(lr=h,oc(),ga&&typeof ga.onPostCommitFiberRoot=="function")try{ga.onPostCommitFiberRoot(G0,e)}catch{}l=!0}return l}finally{Mr=o,cs.transition=t}}return!1}function wE(e,t,o){t=ph(o,t),t=lI(e,t,1),e=Xl(e,t,1),t=oo(),e!==null&&(Im(e,1,t),wo(e,t))}function di(e,t,o){if(e.tag===3)wE(e,e,o);else for(;t!==null;){if(t.tag===3){wE(t,e,o);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Yl===null||!Yl.has(l))){e=ph(o,e),e=cI(t,e,1),t=Xl(t,e,1),e=oo(),t!==null&&(Im(t,1,e),wo(t,e));break}}t=t.return}}function cL(e,t,o){var l=e.pingCache;l!==null&&l.delete(t),t=oo(),e.pingedLanes|=e.suspendedLanes&o,Ri===e&&($i&o)===o&&(Ci===4||Ci===3&&($i&130023424)===$i&&500>pi()-zw?su(e,0):Dw|=o),wo(e,t)}function MI(e,t){t===0&&(e.mode&1?(t=vy,vy<<=1,!(vy&130023424)&&(vy=4194304)):t=1);var o=oo();e=Xa(e,t),e!==null&&(Im(e,t,o),wo(e,o))}function uL(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),MI(e,o)}function dL(e,t){var o=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(o=h.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(Wt(314))}l!==null&&l.delete(t),MI(e,o)}var II;II=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||xo.current)vo=!0;else{if(!(e.lanes&o)&&!(t.flags&128))return vo=!1,J5(e,t,o);vo=!!(e.flags&131072)}else vo=!1,Yr&&t.flags&1048576&&zM(t,b0,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Xy(e,t),e=t.pendingProps;var h=ch(t,Qi.current);Qd(t,o),h=Ew(null,t,l,e,h,o);var p=kw();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bo(l)?(p=!0,v0(t)):p=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,bw(t),h.updater=K0,t.stateNode=h,h._reactInternals=t,ub(t,l,e,o),t=pb(null,t,l,!0,p,o)):(t.tag=0,Yr&&p&&fw(t),io(null,t,h,o),t=t.child),t;case 16:l=t.elementType;e:{switch(Xy(e,t),e=t.pendingProps,h=l._init,l=h(l._payload),t.type=l,h=t.tag=pL(l),e=Us(l,e),h){case 0:t=hb(null,t,l,e,o);break e;case 1:t=hE(null,t,l,e,o);break e;case 11:t=uE(null,t,l,e,o);break e;case 14:t=dE(null,t,l,Us(l.type,e),o);break e}throw Error(Wt(306,l,""))}return t;case 0:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Us(l,h),hb(e,t,l,h,o);case 1:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Us(l,h),hE(e,t,l,h,o);case 3:e:{if(pI(t),e===null)throw Error(Wt(387));l=t.pendingProps,p=t.memoizedState,h=p.element,BM(e,t),T0(t,l,null,o);var _=t.memoizedState;if(l=_.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){h=ph(Error(Wt(423)),t),t=pE(e,t,l,o,h);break e}else if(l!==h){h=ph(Error(Wt(424)),t),t=pE(e,t,l,o,h);break e}else for($o=Zl(t.stateNode.containerInfo.firstChild),No=t,Yr=!0,js=null,o=UM(t,null,l,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(uh(),l===h){t=Ya(e,t,o);break e}io(e,t,l,o)}t=t.child}return t;case 5:return VM(t),e===null&&ab(t),l=t.type,h=t.pendingProps,p=e!==null?e.memoizedProps:null,_=h.children,nb(l,h)?_=null:p!==null&&nb(l,p)&&(t.flags|=32),hI(e,t),io(e,t,_,o),t.child;case 6:return e===null&&ab(t),null;case 13:return fI(e,t,o);case 4:return ww(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=dh(t,null,l,o):io(e,t,l,o),t.child;case 11:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Us(l,h),uE(e,t,l,h,o);case 7:return io(e,t,t.pendingProps,o),t.child;case 8:return io(e,t,t.pendingProps.children,o),t.child;case 12:return io(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(l=t.type._context,h=t.pendingProps,p=t.memoizedProps,_=h.value,Fr(w0,l._currentValue),l._currentValue=_,p!==null)if(Hs(p.value,_)){if(p.children===h.children&&!xo.current){t=Ya(e,t,o);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var a=p.dependencies;if(a!==null){_=p.child;for(var w=a.firstContext;w!==null;){if(w.context===l){if(p.tag===1){w=Ga(-1,o&-o),w.tag=2;var C=p.updateQueue;if(C!==null){C=C.shared;var M=C.pending;M===null?w.next=w:(w.next=M.next,M.next=w),C.pending=w}}p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),lb(p.return,o,t),a.lanes|=o;break}w=w.next}}else if(p.tag===10)_=p.type===t.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(Wt(341));_.lanes|=o,a=_.alternate,a!==null&&(a.lanes|=o),lb(_,o,t),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===t){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}io(e,t,h.children,o),t=t.child}return t;case 9:return h=t.type,l=t.pendingProps.children,Qd(t,o),h=hs(h),l=l(h),t.flags|=1,io(e,t,l,o),t.child;case 14:return l=t.type,h=Us(l,t.pendingProps),h=Us(l.type,h),dE(e,t,l,h,o);case 15:return uI(e,t,t.type,t.pendingProps,o);case 17:return l=t.type,h=t.pendingProps,h=t.elementType===l?h:Us(l,h),Xy(e,t),t.tag=1,bo(l)?(e=!0,v0(t)):e=!1,Qd(t,o),$M(t,l,h),ub(t,l,h,o),pb(null,t,l,!0,e,o);case 19:return mI(e,t,o);case 22:return dI(e,t,o)}throw Error(Wt(156,t.tag))};function AI(e,t){return rM(e,t)}function hL(e,t,o,l){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(e,t,o,l){return new hL(e,t,o,l)}function Bw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pL(e){if(typeof e=="function")return Bw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nw)return 11;if(e===rw)return 14}return 2}function Jl(e,t){var o=e.alternate;return o===null?(o=ls(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Jy(e,t,o,l,h,p){var _=2;if(l=e,typeof e=="function")Bw(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case Bd:return au(o.children,h,p,t);case tw:_=8,h|=8;break;case R1:return e=ls(12,o,t,h|2),e.elementType=R1,e.lanes=p,e;case L1:return e=ls(13,o,t,h),e.elementType=L1,e.lanes=p,e;case O1:return e=ls(19,o,t,h),e.elementType=O1,e.lanes=p,e;case NP:return t_(o,h,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case FP:_=10;break e;case $P:_=9;break e;case nw:_=11;break e;case rw:_=14;break e;case Bl:_=16,l=null;break e}throw Error(Wt(130,e==null?e:typeof e,""))}return t=ls(_,o,t,h),t.elementType=e,t.type=l,t.lanes=p,t}function au(e,t,o,l){return e=ls(7,e,l,t),e.lanes=o,e}function t_(e,t,o,l){return e=ls(22,e,l,t),e.elementType=NP,e.lanes=o,e.stateNode={isHidden:!1},e}function p1(e,t,o){return e=ls(6,e,null,t),e.lanes=o,e}function f1(e,t,o){return t=ls(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fL(e,t,o,l,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zx(0),this.expirationTimes=Zx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zx(0),this.identifierPrefix=l,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Fw(e,t,o,l,h,p,_,a,w){return e=new fL(e,t,o,a,w),t===1?(t=1,p===!0&&(t|=8)):t=0,p=ls(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:l,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},bw(p),e}function mL(e,t,o){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Od,key:l==null?null:""+l,children:e,containerInfo:t,implementation:o}}function DI(e){if(!e)return tc;e=e._reactInternals;e:{if(bu(e)!==e||e.tag!==1)throw Error(Wt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Wt(171))}if(e.tag===1){var o=e.type;if(bo(o))return AM(e,o,t)}return t}function zI(e,t,o,l,h,p,_,a,w){return e=Fw(o,l,!0,e,h,p,_,a,w),e.context=DI(null),o=e.current,l=oo(),h=Kl(o),p=Ga(l,h),p.callback=t??null,Xl(o,p,h),e.current.lanes=h,Im(e,h,l),wo(e,l),e}function n_(e,t,o,l){var h=t.current,p=oo(),_=Kl(h);return o=DI(o),t.context===null?t.context=o:t.pendingContext=o,t=Ga(p,_),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=Xl(h,t,_),e!==null&&(Gs(e,h,_,p),Hy(e,h,_)),_}function D0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function SE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function $w(e,t){SE(e,t),(e=e.alternate)&&SE(e,t)}function gL(){return null}var RI=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nw(e){this._internalRoot=e}r_.prototype.render=Nw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Wt(409));n_(e,t,null,null)};r_.prototype.unmount=Nw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mu(function(){n_(null,e,null,null)}),t[Za]=null}};function r_(e){this._internalRoot=e}r_.prototype.unstable_scheduleHydration=function(e){if(e){var t=uM();e={blockedOn:null,target:e,priority:t};for(var o=0;o<$l.length&&t!==0&&t<$l[o].priority;o++);$l.splice(o,0,e),o===0&&hM(e)}};function Uw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function i_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function TE(){}function yL(e,t,o,l,h){if(h){if(typeof l=="function"){var p=l;l=function(){var C=D0(_);p.call(C)}}var _=zI(t,l,e,0,null,!1,!1,"",TE);return e._reactRootContainer=_,e[Za]=_.current,lm(e.nodeType===8?e.parentNode:e),mu(),_}for(;h=e.lastChild;)e.removeChild(h);if(typeof l=="function"){var a=l;l=function(){var C=D0(w);a.call(C)}}var w=Fw(e,0,!1,null,null,!1,!1,"",TE);return e._reactRootContainer=w,e[Za]=w.current,lm(e.nodeType===8?e.parentNode:e),mu(function(){n_(t,w,o,l)}),w}function o_(e,t,o,l,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var a=h;h=function(){var w=D0(_);a.call(w)}}n_(t,_,e,h)}else _=yL(o,t,e,h,l);return D0(_)}lM=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=If(t.pendingLanes);o!==0&&(sw(t,o|1),wo(t,pi()),!(lr&6)&&(fh=pi()+500,oc()))}break;case 13:mu(function(){var l=Xa(e,1);if(l!==null){var h=oo();Gs(l,e,1,h)}}),$w(e,1)}};aw=function(e){if(e.tag===13){var t=Xa(e,134217728);if(t!==null){var o=oo();Gs(t,e,134217728,o)}$w(e,134217728)}};cM=function(e){if(e.tag===13){var t=Kl(e),o=Xa(e,t);if(o!==null){var l=oo();Gs(o,e,t,l)}$w(e,t)}};uM=function(){return Mr};dM=function(e,t){var o=Mr;try{return Mr=e,t()}finally{Mr=o}};H1=function(e,t,o){switch(t){case"input":if($1(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var l=o[t];if(l!==e&&l.form===e.form){var h=X0(l);if(!h)throw Error(Wt(90));VP(l),$1(l,h)}}}break;case"textarea":WP(e,o);break;case"select":t=o.value,t!=null&&Xd(e,!!o.multiple,t,!1)}};KP=Rw;JP=mu;var _L={usingClientEntryPoint:!1,Events:[Dm,Ud,X0,XP,YP,Rw]},gf={findFiberByHostInstance:nu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vL={bundleType:gf.bundleType,version:gf.version,rendererPackageName:gf.rendererPackageName,rendererConfig:gf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tM(e),e===null?null:e.stateNode},findFiberByHostInstance:gf.findFiberByHostInstance||gL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iy.isDisabled&&Iy.supportsFiber)try{G0=Iy.inject(vL),ga=Iy}catch{}}Go.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_L;Go.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uw(t))throw Error(Wt(200));return mL(e,t,null,o)};Go.createRoot=function(e,t){if(!Uw(e))throw Error(Wt(299));var o=!1,l="",h=RI;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Fw(e,1,!1,null,null,o,!1,l,h),e[Za]=t.current,lm(e.nodeType===8?e.parentNode:e),new Nw(t)};Go.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Wt(188)):(e=Object.keys(e).join(","),Error(Wt(268,e)));return e=tM(t),e=e===null?null:e.stateNode,e};Go.flushSync=function(e){return mu(e)};Go.hydrate=function(e,t,o){if(!i_(t))throw Error(Wt(200));return o_(null,e,t,!0,o)};Go.hydrateRoot=function(e,t,o){if(!Uw(e))throw Error(Wt(405));var l=o!=null&&o.hydratedSources||null,h=!1,p="",_=RI;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),t=zI(t,null,e,1,o??null,h,!1,p,_),e[Za]=t.current,lm(e),l)for(e=0;e<l.length;e++)o=l[e],h=o._getVersion,h=h(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,h]:t.mutableSourceEagerHydrationData.push(o,h);return new r_(t)};Go.render=function(e,t,o){if(!i_(t))throw Error(Wt(200));return o_(null,e,t,!1,o)};Go.unmountComponentAtNode=function(e){if(!i_(e))throw Error(Wt(40));return e._reactRootContainer?(mu(function(){o_(null,null,e,!1,function(){e._reactRootContainer=null,e[Za]=null})}),!0):!1};Go.unstable_batchedUpdates=Rw;Go.unstable_renderSubtreeIntoContainer=function(e,t,o,l){if(!i_(o))throw Error(Wt(200));if(e==null||e._reactInternals===void 0)throw Error(Wt(38));return o_(e,t,o,!1,l)};Go.version="18.2.0-next-9e3b772b8-20220608";function LI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LI)}catch(e){console.error(e)}}LI(),zP.exports=Go;var s_=zP.exports;const Ay=tl(s_);var CE=s_;D1.createRoot=CE.createRoot,D1.hydrateRoot=CE.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function z0(){return z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},z0.apply(this,arguments)}var Wl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Wl||(Wl={}));const EE="popstate";function xL(e){e===void 0&&(e={});function t(l,h){let{pathname:p,search:_,hash:a}=l.location;return Cb("",{pathname:p,search:_,hash:a},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function o(l,h){return typeof h=="string"?h:OI(h)}return wL(t,o,null,e)}function Eo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function bL(){return Math.random().toString(36).substr(2,8)}function kE(e,t){return{usr:e.state,key:e.key,idx:t}}function Cb(e,t,o,l){return o===void 0&&(o=null),z0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?a_(t):t,{state:o,key:t&&t.key||l||bL()})}function OI(e){let{pathname:t="/",search:o="",hash:l=""}=e;return o&&o!=="?"&&(t+=o.charAt(0)==="?"?o:"?"+o),l&&l!=="#"&&(t+=l.charAt(0)==="#"?l:"#"+l),t}function a_(e){let t={};if(e){let o=e.indexOf("#");o>=0&&(t.hash=e.substr(o),e=e.substr(0,o));let l=e.indexOf("?");l>=0&&(t.search=e.substr(l),e=e.substr(0,l)),e&&(t.pathname=e)}return t}function wL(e,t,o,l){l===void 0&&(l={});let{window:h=document.defaultView,v5Compat:p=!1}=l,_=h.history,a=Wl.Pop,w=null,C=M();C==null&&(C=0,_.replaceState(z0({},_.state,{idx:C}),""));function M(){return(_.state||{idx:null}).idx}function D(){a=Wl.Pop;let K=M(),N=K==null?null:K-C;C=K,w&&w({action:a,location:B.location,delta:N})}function R(K,N){a=Wl.Push;let U=Cb(B.location,K,N);o&&o(U,K),C=M()+1;let G=kE(U,C),Y=B.createHref(U);try{_.pushState(G,"",Y)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;h.location.assign(Y)}p&&w&&w({action:a,location:B.location,delta:1})}function $(K,N){a=Wl.Replace;let U=Cb(B.location,K,N);o&&o(U,K),C=M();let G=kE(U,C),Y=B.createHref(U);_.replaceState(G,"",Y),p&&w&&w({action:a,location:B.location,delta:0})}function j(K){let N=h.location.origin!=="null"?h.location.origin:h.location.href,U=typeof K=="string"?K:OI(K);return Eo(N,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,N)}let B={get action(){return a},get location(){return e(h,_)},listen(K){if(w)throw new Error("A history only accepts one active listener");return h.addEventListener(EE,D),w=K,()=>{h.removeEventListener(EE,D),w=null}},createHref(K){return t(h,K)},createURL:j,encodeLocation(K){let N=j(K);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:R,replace:$,go(K){return _.go(K)}};return B}var PE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(PE||(PE={}));function SL(e,t,o){o===void 0&&(o="/");let l=typeof t=="string"?a_(t):t,h=$I(l.pathname||"/",o);if(h==null)return null;let p=BI(e);TL(p);let _=null;for(let a=0;_==null&&a<p.length;++a)_=zL(p[a],OL(h));return _}function BI(e,t,o,l){t===void 0&&(t=[]),o===void 0&&(o=[]),l===void 0&&(l="");let h=(p,_,a)=>{let w={relativePath:a===void 0?p.path||"":a,caseSensitive:p.caseSensitive===!0,childrenIndex:_,route:p};w.relativePath.startsWith("/")&&(Eo(w.relativePath.startsWith(l),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(l.length));let C=th([l,w.relativePath]),M=o.concat(w);p.children&&p.children.length>0&&(Eo(p.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+C+'".')),BI(p.children,t,M,C)),!(p.path==null&&!p.index)&&t.push({path:C,score:AL(C,p.index),routesMeta:M})};return e.forEach((p,_)=>{var a;if(p.path===""||!((a=p.path)!=null&&a.includes("?")))h(p,_);else for(let w of FI(p.path))h(p,_,w)}),t}function FI(e){let t=e.split("/");if(t.length===0)return[];let[o,...l]=t,h=o.endsWith("?"),p=o.replace(/\?$/,"");if(l.length===0)return h?[p,""]:[p];let _=FI(l.join("/")),a=[];return a.push(..._.map(w=>w===""?p:[p,w].join("/"))),h&&a.push(..._),a.map(w=>e.startsWith("/")&&w===""?"/":w)}function TL(e){e.sort((t,o)=>t.score!==o.score?o.score-t.score:DL(t.routesMeta.map(l=>l.childrenIndex),o.routesMeta.map(l=>l.childrenIndex)))}const CL=/^:\w+$/,EL=3,kL=2,PL=1,ML=10,IL=-2,ME=e=>e==="*";function AL(e,t){let o=e.split("/"),l=o.length;return o.some(ME)&&(l+=IL),t&&(l+=kL),o.filter(h=>!ME(h)).reduce((h,p)=>h+(CL.test(p)?EL:p===""?PL:ML),l)}function DL(e,t){return e.length===t.length&&e.slice(0,-1).every((l,h)=>l===t[h])?e[e.length-1]-t[t.length-1]:0}function zL(e,t){let{routesMeta:o}=e,l={},h="/",p=[];for(let _=0;_<o.length;++_){let a=o[_],w=_===o.length-1,C=h==="/"?t:t.slice(h.length)||"/",M=RL({path:a.relativePath,caseSensitive:a.caseSensitive,end:w},C);if(!M)return null;Object.assign(l,M.params);let D=a.route;p.push({params:l,pathname:th([h,M.pathname]),pathnameBase:FL(th([h,M.pathnameBase])),route:D}),M.pathnameBase!=="/"&&(h=th([h,M.pathnameBase]))}return p}function RL(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,l]=LL(e.path,e.caseSensitive,e.end),h=t.match(o);if(!h)return null;let p=h[0],_=p.replace(/(.)\/+$/,"$1"),a=h.slice(1);return{params:l.reduce((C,M,D)=>{if(M==="*"){let R=a[D]||"";_=p.slice(0,p.length-R.length).replace(/(.)\/+$/,"$1")}return C[M]=BL(a[D]||"",M),C},{}),pathname:p,pathnameBase:_,pattern:e}}function LL(e,t,o){t===void 0&&(t=!1),o===void 0&&(o=!0),Vw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(_,a)=>(l.push(a),"/([^\\/]+)"));return e.endsWith("*")?(l.push("*"),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,t?void 0:"i"),l]}function OL(e){try{return decodeURI(e)}catch(t){return Vw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function BL(e,t){try{return decodeURIComponent(e)}catch(o){return Vw(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+o+").")),e}}function $I(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let o=t.endsWith("/")?t.length-1:t.length,l=e.charAt(o);return l&&l!=="/"?null:e.slice(o)||"/"}const th=e=>e.join("/").replace(/\/\/+/g,"/"),FL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function $L(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const NI=["post","put","patch","delete"];new Set(NI);const NL=["get",...NI];new Set(NL);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},Eb.apply(this,arguments)}const UL=W.createContext(null),VL=W.createContext(null),UI=W.createContext(null),l_=W.createContext(null),c_=W.createContext({outlet:null,matches:[],isDataRoute:!1}),VI=W.createContext(null);function jw(){return W.useContext(l_)!=null}function jL(){return jw()||Eo(!1),W.useContext(l_).location}function WL(e,t){return GL(e,t)}function GL(e,t,o){jw()||Eo(!1);let{navigator:l}=W.useContext(UI),{matches:h}=W.useContext(c_),p=h[h.length-1],_=p?p.params:{};p&&p.pathname;let a=p?p.pathnameBase:"/";p&&p.route;let w=jL(),C;if(t){var M;let B=typeof t=="string"?a_(t):t;a==="/"||(M=B.pathname)!=null&&M.startsWith(a)||Eo(!1),C=B}else C=w;let D=C.pathname||"/",R=a==="/"?D:D.slice(a.length)||"/",$=SL(e,{pathname:R}),j=YL($&&$.map(B=>Object.assign({},B,{params:Object.assign({},_,B.params),pathname:th([a,l.encodeLocation?l.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?a:th([a,l.encodeLocation?l.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),h,o);return t&&j?W.createElement(l_.Provider,{value:{location:Eb({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:Wl.Pop}},j):j}function HL(){let e=eO(),t=$L(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},p=null;return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},t),o?W.createElement("pre",{style:h},o):null,p)}const qL=W.createElement(HL,null);class ZL extends W.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,o){return o.location!==t.location||o.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||o.error,location:o.location,revalidation:t.revalidation||o.revalidation}}componentDidCatch(t,o){console.error("React Router caught the following error during render",t,o)}render(){return this.state.error?W.createElement(c_.Provider,{value:this.props.routeContext},W.createElement(VI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XL(e){let{routeContext:t,match:o,children:l}=e,h=W.useContext(UL);return h&&h.static&&h.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=o.route.id),W.createElement(c_.Provider,{value:t},l)}function YL(e,t,o){var l;if(t===void 0&&(t=[]),o===void 0&&(o=null),e==null){var h;if((h=o)!=null&&h.errors)e=o.matches;else return null}let p=e,_=(l=o)==null?void 0:l.errors;if(_!=null){let a=p.findIndex(w=>w.route.id&&(_==null?void 0:_[w.route.id]));a>=0||Eo(!1),p=p.slice(0,Math.min(p.length,a+1))}return p.reduceRight((a,w,C)=>{let M=w.route.id?_==null?void 0:_[w.route.id]:null,D=null;o&&(D=w.route.errorElement||qL);let R=t.concat(p.slice(0,C+1)),$=()=>{let j;return M?j=D:w.route.Component?j=W.createElement(w.route.Component,null):w.route.element?j=w.route.element:j=a,W.createElement(XL,{match:w,routeContext:{outlet:a,matches:R,isDataRoute:o!=null},children:j})};return o&&(w.route.ErrorBoundary||w.route.errorElement||C===0)?W.createElement(ZL,{location:o.location,revalidation:o.revalidation,component:D,error:M,children:$(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):$()},null)}var IE;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(IE||(IE={}));var R0;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(R0||(R0={}));function KL(e){let t=W.useContext(VL);return t||Eo(!1),t}function JL(e){let t=W.useContext(c_);return t||Eo(!1),t}function QL(e){let t=JL(),o=t.matches[t.matches.length-1];return o.route.id||Eo(!1),o.route.id}function eO(){var e;let t=W.useContext(VI),o=KL(R0.UseRouteError),l=QL(R0.UseRouteError);return t||((e=o.errors)==null?void 0:e[l])}function zd(e){Eo(!1)}function tO(e){let{basename:t="/",children:o=null,location:l,navigationType:h=Wl.Pop,navigator:p,static:_=!1}=e;jw()&&Eo(!1);let a=t.replace(/^\/*/,"/"),w=W.useMemo(()=>({basename:a,navigator:p,static:_}),[a,p,_]);typeof l=="string"&&(l=a_(l));let{pathname:C="/",search:M="",hash:D="",state:R=null,key:$="default"}=l,j=W.useMemo(()=>{let B=$I(C,a);return B==null?null:{location:{pathname:B,search:M,hash:D,state:R,key:$},navigationType:h}},[a,C,M,D,R,$,h]);return j==null?null:W.createElement(UI.Provider,{value:w},W.createElement(l_.Provider,{children:o,value:j}))}function nO(e){let{children:t,location:o}=e;return WL(kb(t),o)}var AE;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(AE||(AE={}));new Promise(()=>{});function kb(e,t){t===void 0&&(t=[]);let o=[];return W.Children.forEach(e,(l,h)=>{if(!W.isValidElement(l))return;let p=[...t,h];if(l.type===W.Fragment){o.push.apply(o,kb(l.props.children,p));return}l.type!==zd&&Eo(!1),!l.props.index||!l.props.children||Eo(!1);let _={id:l.props.id||p.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(_.children=kb(l.props.children,p)),o.push(_)}),o}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const rO="startTransition",DE=Qf[rO];function iO(e){let{basename:t,children:o,future:l,window:h}=e,p=W.useRef();p.current==null&&(p.current=xL({window:h,v5Compat:!0}));let _=p.current,[a,w]=W.useState({action:_.action,location:_.location}),{v7_startTransition:C}=l||{},M=W.useCallback(D=>{C&&DE?DE(()=>w(D)):w(D)},[w,C]);return W.useLayoutEffect(()=>_.listen(M),[_,M]),W.createElement(tO,{basename:t,children:o,location:a.location,navigationType:a.action,navigator:_})}var zE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(zE||(zE={}));var RE;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(RE||(RE={}));var jI={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Sh,function(){var o,l,h;function p(a,w){if(!o)o=w;else if(!l)l=w;else{var C="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+o+")(sharedChunk); ("+l+")(sharedChunk); self.onerror = null;",M={};o(M),h=w(M),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(h.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}p(["exports"],function(a){var w=typeof self<"u"?self:{},C="2.15.0";let M;const D={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(M==null){const r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{M={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):r}catch{M=r}}return M},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!D.API_URL)return null;try{const r=new URL(D.API_URL);return r.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":r.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},R={supported:!1,testSupport:function(r){!B&&j&&(K?N(r):$=r)}};let $,j,B=!1,K=!1;function N(r){const n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,j),r.isContextLost())return;R.supported=!0}catch{}r.deleteTexture(n),B=!0}w.document&&(j=w.document.createElement("img"),j.onload=function(){$&&N($),$=null,K=!0},j.onerror=function(){B=!0,$=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const U="01";function G(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Y=Q;function Q(r,n,i,c){this.cx=3*r,this.bx=3*(i-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=n,this.p2x=i,this.p2y=c}Q.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,n){if(n===void 0&&(n=1e-6),r<0)return 0;if(r>1)return 1;for(var i=r,c=0;c<8;c++){var d=this.sampleCurveX(i)-r;if(Math.abs(d)<n)return i;var m=this.sampleCurveDerivativeX(i);if(Math.abs(m)<1e-6)break;i-=d/m}var y=0,x=1;for(i=r,c=0;c<20&&(d=this.sampleCurveX(i),!(Math.abs(d-r)<n));c++)r>d?y=i:x=i,i=.5*(x-y)+y;return i},solve:function(r,n){return this.sampleCurveY(this.solveCurveX(r,n))}};var re=G(Y),oe=de;function de(r,n){this.x=r,this.y=n}de.prototype={clone:function(){return new de(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,n){return this.clone()._rotateAround(r,n)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var n=r.x-this.x,i=r.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,n){return Math.atan2(this.x*n-this.y*r,this.x*r+this.y*n)},_matMult:function(r){var n=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=n,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var n=Math.cos(r),i=Math.sin(r),c=i*this.x+n*this.y;return this.x=n*this.x-i*this.y,this.y=c,this},_rotateAround:function(r,n){var i=Math.cos(r),c=Math.sin(r),d=n.y+c*(this.x-n.x)+i*(this.y-n.y);return this.x=n.x+i*(this.x-n.x)-c*(this.y-n.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},de.convert=function(r){return r instanceof de?r:Array.isArray(r)?new de(r[0],r[1]):r};var ae=G(oe);const ye=Math.PI/180,Ce=180/Math.PI;function Fe(r){return r*ye}function be(r){return r*Ce}const we=[[0,0],[1,0],[1,1],[0,1]];function ue(r){if(r<=0)return 0;if(r>=1)return 1;const n=r*r,i=n*r;return 4*(r<.5?i:3*(r-n)+i-.75)}function Be(r,n,i,c){const d=new re(r,n,i,c);return function(m){return d.solve(m)}}const Ae=Be(.25,.1,.25,1);function Se(r,n,i){return Math.min(i,Math.max(n,r))}function ke(r,n,i){return(i=Se((i-r)/(n-r),0,1))*i*(3-2*i)}function Ne(r,n,i){const c=i-n,d=((r-n)%c+c)%c+n;return d===n?i:d}function nt(r,n,i){if(!r.length)return i(null,[]);let c=r.length;const d=new Array(r.length);let m=null;r.forEach((y,x)=>{n(y,(S,T)=>{S&&(m=S),d[x]=T,--c==0&&i(m,d)})})}function vt(r){const n=[];for(const i in r)n.push(r[i]);return n}function gt(r,...n){for(const i of n)for(const c in i)r[c]=i[c];return r}let rt=1;function xt(){return rt++}function ht(){return function r(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function mt(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Ot(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function Nt(r,n){r.forEach(i=>{n[i]&&(n[i]=n[i].bind(n))})}function at(r,n){return r.indexOf(n,r.length-n.length)!==-1}function Je(r,n,i){const c={};for(const d in r)c[d]=n.call(i||this,r[d],d,r);return c}function it(r,n,i){const c={};for(const d in r)n.call(i||this,r[d],d,r)&&(c[d]=r[d]);return c}function St(r){return Array.isArray(r)?r.map(St):typeof r=="object"&&r?Je(r,St):r}const Gt={};function He(r){Gt[r]||(typeof console<"u"&&console.warn(r),Gt[r]=!0)}function Vt(r,n,i){return(i.y-r.y)*(n.x-r.x)>(n.y-r.y)*(i.x-r.x)}function lt(r){let n=0;for(let i,c,d=0,m=r.length,y=m-1;d<m;y=d++)i=r[d],c=r[y],n+=(c.x-i.x)*(i.y+c.y);return n}function jt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ut(r){const n={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(i,c,d,m)=>{const y=d||m;return n[c]=!y||y.toLowerCase(),""}),n["max-age"]){const i=parseInt(n["max-age"],10);isNaN(i)?delete n["max-age"]:n["max-age"]=i}return n}let $t=null;function Lt(r){if($t==null){const n=r.navigator?r.navigator.userAgent:null;$t=!!r.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return $t}function un(r){try{const n=w[r];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function kn(r,n){return[r[4*n],r[4*n+1],r[4*n+2],r[4*n+3]]}const Hn="mapbox-tiles";let dn=500,En=50,Tn,sn;function an(){try{return w.caches}catch{}}function ln(){an()&&!Tn&&(Tn=w.caches.open(Hn))}function An(r){const n=r.indexOf("?");if(n<0)return r;const i=function(d){const m=d.indexOf("?");return m>0?d.slice(m+1).split("&"):[]}(r),c=i.filter(d=>{const m=d.split("=");return m[0]==="language"||m[0]==="worldview"});return c.length?`${r.slice(0,n)}?${c.join("&")}`:r.slice(0,n)}let Ht=1/0;const nn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(nn);class bn extends Error{constructor(n,i,c){i===401&&We(c)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=i,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const $n=jt()?()=>self.worker&&self.worker.referrer:()=>(w.location.protocol==="blob:"?w.parent:w).location.href,Zn=function(r,n){if(!(/^file:/.test(i=r.url)||/^file:/.test($n())&&!/^\w+:/.test(i))){if(w.fetch&&w.Request&&w.AbortController&&w.Request.prototype.hasOwnProperty("signal"))return function(c,d){const m=new w.AbortController,y=new w.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:$n(),referrerPolicy:c.referrerPolicy,signal:m.signal});let x=!1,S=!1;const T=(P=y.url).indexOf("sku=")>0&&We(P);var P;c.type==="json"&&y.headers.set("Accept","application/json");const A=(F,V,X)=>{if(S)return;if(F&&F.message!=="SecurityError"&&He(F.toString()),V&&X)return z(V);const ne=Date.now();w.fetch(y).then(fe=>{if(fe.ok){const Ee=T?fe.clone():null;return z(fe,Ee,ne)}return d(new bn(fe.statusText,fe.status,c.url))}).catch(fe=>{fe.name!=="AbortError"&&d(new Error(`${fe.message} ${c.url}`))})},z=(F,V,X)=>{(c.type==="arrayBuffer"?F.arrayBuffer():c.type==="json"?F.json():F.text()).then(ne=>{S||(V&&X&&function(fe,Ee,me){if(ln(),!Tn)return;const Te={status:Ee.status,statusText:Ee.statusText,headers:new w.Headers};Ee.headers.forEach((Ke,Ze)=>Te.headers.set(Ze,Ke));const Ie=Ut(Ee.headers.get("Cache-Control")||"");if(Ie["no-store"])return;Ie["max-age"]&&Te.headers.set("Expires",new Date(me+1e3*Ie["max-age"]).toUTCString());const Pe=Te.headers.get("Expires");Pe&&(new Date(Pe).getTime()-me<42e4||function(Ke,Ze){if(sn===void 0)try{new Response(new ReadableStream),sn=!0}catch{sn=!1}sn?Ze(Ke.body):Ke.blob().then(Ze)}(Ee,Ke=>{const Ze=new w.Response(Ke,Te);ln(),Tn&&Tn.then(ut=>ut.put(An(fe.url),Ze)).catch(ut=>He(ut.message))}))}(y,V,X),x=!0,d(null,ne,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(ne=>{S||d(new Error(ne.message))})};return T?function(F,V){if(ln(),!Tn)return V(null);const X=An(F.url);Tn.then(ne=>{ne.match(X).then(fe=>{const Ee=function(me){if(!me)return!1;const Te=new Date(me.headers.get("Expires")||0),Ie=Ut(me.headers.get("Cache-Control")||"");return Te>Date.now()&&!Ie["no-cache"]}(fe);ne.delete(X),Ee&&ne.put(X,fe.clone()),V(null,fe,Ee)}).catch(V)}).catch(V)}(y,A):A(null,null),{cancel:()=>{S=!0,x||m.abort()}}}(r,n);if(jt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,n,void 0,!0)}var i;return function(c,d){const m=new w.XMLHttpRequest;m.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const y in c.headers)m.setRequestHeader(y,c.headers[y]);return c.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=c.credentials==="include",m.onerror=()=>{d(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let y=m.response;if(c.type==="json")try{y=JSON.parse(m.response)}catch(x){return d(x)}d(null,y,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else d(new bn(m.statusText,m.status,c.url))},m.send(c.body),{cancel:()=>m.abort()}}(r,n)},Ar=function(r,n){return Zn(gt(r,{type:"arrayBuffer"}),n)};function Nr(r){const n=w.document.createElement("a");return n.href=r,n.protocol===w.document.location.protocol&&n.host===w.document.location.host}const ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let J,ee;J=[],ee=0;const _e=function(r,n){if(R.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),ee>=D.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:r,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return J.push(m),m}ee++;let i=!1;const c=()=>{if(!i)for(i=!0,ee--;J.length&&ee<D.MAX_PARALLEL_IMAGE_REQUESTS;){const m=J.shift(),{requestParameters:y,callback:x,cancelled:S}=m;S||(m.cancel=_e(y,x).cancel)}},d=Ar(r,(m,y,x,S)=>{c(),m?n(m):y&&(w.createImageBitmap?function(T,P){const A=new w.Blob([new Uint8Array(T)],{type:"image/png"});w.createImageBitmap(A).then(z=>{P(null,z)}).catch(z=>{P(new Error(`Could not load image because of ${z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(T,P)=>n(T,P,x,S)):function(T,P){const A=new w.Image,z=w.URL;A.onload=()=>{P(null,A),z.revokeObjectURL(A.src),A.onload=null,w.requestAnimationFrame(()=>{A.src=ge})},A.onerror=()=>P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const F=new w.Blob([new Uint8Array(T)],{type:"image/png"});A.src=T.byteLength?z.createObjectURL(F):ge}(y,(T,P)=>n(T,P,x,S)))});return{cancel:()=>{d.cancel(),c()}}},Me="NO_ACCESS_TOKEN";function Le(r){return r.indexOf("mapbox:")===0}function We(r){return D.API_URL_REGEX.test(r)}function je(r){return D.API_CDN_URL_REGEX.test(r)}function Oe(r){return D.API_STYLE_REGEX.test(r)&&!Ge(r)}function Ge(r){return D.API_SPRITE_REGEX.test(r)}const bt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function zt(r){const n=r.match(bt);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function Mt(r){const n=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${n}`}const Mn="mapbox.eventData";function Fn(r){if(!r)return null;const n=r.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(w.atob(n[1]).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Pn{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const i=Fn(D.ACCESS_TOKEN);let c="";return c=i&&i.u?w.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(d,m)=>String.fromCharCode(+("0x"+m)))):D.ACCESS_TOKEN||"",n?`${Mn}.${n}:${c}`:`${Mn}:${c}`}fetchEventData(){const n=un("localStorage"),i=this.getStorageKey(),c=this.getStorageKey("uuid");if(n)try{const d=w.localStorage.getItem(i);d&&(this.eventData=JSON.parse(d));const m=w.localStorage.getItem(c);m&&(this.anonId=m)}catch{He("Unable to read from LocalStorage")}}saveEventData(){const n=un("localStorage"),i=this.getStorageKey(),c=this.getStorageKey("uuid");if(n)try{w.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&w.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{He("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,i,c,d){if(!D.EVENTS_URL)return;const m=zt(D.EVENTS_URL);m.params.push(`access_token=${d||D.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(n).toISOString()},x=i?gt(y,i):y,S={url:Mt(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=function(T,P){return Zn(gt(T,{method:"POST"}),P)}(S,T=>{this.pendingRequest=null,c(T),this.saveEventData(),this.processRequests(d)})}queueRequest(n,i){this.queue.push(n),this.processRequests(i)}}const Dn=new class extends Pn{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,n){D.EVENTS_URL&&D.ACCESS_TOKEN&&Array.isArray(r)&&r.some(i=>Le(i)||We(i))&&this.queueRequest(Date.now(),n)}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Fn(D.ACCESS_TOKEN),i=n?n.u:D.ACCESS_TOKEN;let c=i!==this.eventData.tokenU;Ot(this.anonId)||(this.anonId=ht(),c=!0);const d=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),y=new Date(d),x=(d-this.eventData.lastSuccess)/864e5;c=c||x>=1||x<-1||m.getDate()!==y.getDate()}else c=!0;c?this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:U,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=d,this.eventData.tokenU=i)},r):this.processRequests()}},Nn=Dn.postTurnstileEvent.bind(Dn),sr=new class extends Pn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,n,i,c){this.skuToken=n,this.errorCb=c,D.EVENTS_URL&&(i||D.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},i):this.errorCb(new Error(Me)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:i}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),Ot(this.anonId)||(this.anonId=ht()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:U,skuToken:this.skuToken,userId:this.anonId},c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},r))}},_r=sr.postMapLoadEvent.bind(sr),Ur=new class extends Pn{constructor(){super("gljs.performance")}postPerformanceEvent(r,n){D.EVENTS_URL&&(r||D.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},r)}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:i}=this.queue.shift(),c=function(d){const m=w.performance.getEntriesByType("resource"),y=w.performance.getEntriesByType("mark"),x=function(z){const F={};if(z){for(const V in z)if(V!=="other")for(const X of z[V]){const ne=`${V}ResolveRangeMin`,fe=`${V}ResolveRangeMax`,Ee=`${V}RequestCount`,me=`${V}RequestCachedCount`;F[ne]=Math.min(F[ne]||1/0,X.startTime),F[fe]=Math.max(F[fe]||-1/0,X.responseEnd);const Te=Ie=>{F[Ie]===void 0&&(F[Ie]=0),++F[Ie]};X.transferSize!==void 0&&X.transferSize===0&&Te(me),Te(Ee)}}return F}(function(z,F){const V={};if(z)for(const X of z){const ne=F(X);V[ne]===void 0&&(V[ne]=[]),V[ne].push(X)}return V}(m,Hr)),S=w.devicePixelRatio,T=w.navigator.connection||w.navigator.mozConnection||w.navigator.webkitConnection,P={counters:[],metadata:[],attributes:[]},A=(z,F,V)=>{V!=null&&z.push({name:F,value:V.toString()})};for(const z in x)A(P.counters,z,x[z]);if(d.interactionRange[0]!==1/0&&d.interactionRange[1]!==-1/0&&(A(P.counters,"interactionRangeMin",d.interactionRange[0]),A(P.counters,"interactionRangeMax",d.interactionRange[1])),y)for(const z of Object.keys(Qn)){const F=Qn[z],V=y.find(X=>X.name===F);V&&A(P.counters,F,V.startTime)}return A(P.counters,"visibilityHidden",d.visibilityHidden),A(P.attributes,"style",function(z){if(z)for(const F of z){const V=F.name.split("?")[0];if(Oe(V)){const X=V.split("/").slice(-2);if(X.length===2)return`mapbox://styles/${X[0]}/${X[1]}`}}}(m)),A(P.attributes,"terrainEnabled",d.terrainEnabled?"true":"false"),A(P.attributes,"fogEnabled",d.fogEnabled?"true":"false"),A(P.attributes,"projection",d.projection),A(P.attributes,"zoom",d.zoom),A(P.metadata,"devicePixelRatio",S),A(P.metadata,"connectionEffectiveType",T?T.effectiveType:void 0),A(P.metadata,"navigatorUserAgent",w.navigator.userAgent),A(P.metadata,"screenWidth",w.screen.width),A(P.metadata,"screenHeight",w.screen.height),A(P.metadata,"windowWidth",w.innerWidth),A(P.metadata,"windowHeight",w.innerHeight),A(P.metadata,"mapWidth",d.width/S),A(P.metadata,"mapHeight",d.height/S),A(P.metadata,"webglRenderer",d.renderer),A(P.metadata,"webglVendor",d.vendor),A(P.metadata,"sdkVersion",C),A(P.metadata,"sdkIdentifier","mapbox-gl-js"),P}(i);for(const d of c.metadata);for(const d of c.counters);for(const d of c.attributes);this.postEvent(n,c,()=>{},r)}},Qe=Ur.postPerformanceEvent.bind(Ur),ot=new class extends Pn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,n,i,c){if(!D.API_URL||!D.SESSION_PATH)return;const d=zt(D.API_URL+D.SESSION_PATH);d.params.push(`sku=${n||""}`),d.params.push(`access_token=${c||D.ACCESS_TOKEN||""}`);const m={url:Mt(d),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(y,x){return Zn(gt(y,{method:"GET"}),x)}(m,y=>{this.pendingRequest=null,i(y),this.saveEventData(),this.processRequests(c)})}getSessionAPI(r,n,i,c){this.skuToken=n,this.errorCb=c,D.SESSION_PATH&&D.API_URL&&(i||D.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},i):this.errorCb(new Error(Me)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:i}=this.queue.shift();n&&this.success[n]||this.getSession(i,this.skuToken,c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},r)}},Jt=ot.getSessionAPI.bind(ot),hn=new Set,Qn={create:"create",load:"load",fullLoad:"fullLoad"},hi={mark(r){w.performance.mark(r)},measure(r,n,i){w.performance.measure(r,n,i)}};function Hr(r){const n=r.name.split("?")[0];return je(n)&&n.includes("mapbox-gl.js")?"javascript":je(n)&&n.includes("mapbox-gl.css")?"css":function(i){return D.API_FONTS_REGEX.test(i)}(n)?"fontRange":Ge(n)?"sprite":Oe(n)?"style":function(i){return D.API_TILEJSON_REGEX.test(i)}(n)?"tilejson":"other"}const Un=w.performance;function il(r){const n=r?r.url.toString():void 0;return Un.getEntriesByName(n)}let ac,Dh,ku,Zo;const xs={now:()=>ku!==void 0?ku:w.performance.now(),setNow(r){ku=r},restoreNow(){ku=void 0},frame(r){const n=w.requestAnimationFrame(r);return{cancel:()=>w.cancelAnimationFrame(n)}},getImageData(r,n=0){const{width:i,height:c}=r;Zo||(Zo=w.document.createElement("canvas"));const d=Zo.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return(i>Zo.width||c>Zo.height)&&(Zo.width=i,Zo.height=c),d.clearRect(-n,-n,i+2*n,c+2*n),d.drawImage(r,0,0,i,c),d.getImageData(-n,-n,i+2*n,c+2*n)},resolveURL:r=>(ac||(ac=w.document.createElement("a")),ac.href=r,ac.href),get devicePixelRatio(){return w.devicePixelRatio},get prefersReducedMotion(){return!!w.matchMedia&&(Dh==null&&(Dh=w.matchMedia("(prefers-reduced-motion: reduce)")),Dh.matches)}};function zh(r,n,i){i[r]&&i[r].indexOf(n)!==-1||(i[r]=i[r]||[],i[r].push(n))}function Rh(r,n,i){if(i&&i[r]){const c=i[r].indexOf(n);c!==-1&&i[r].splice(c,1)}}class Sa{constructor(n,i={}){gt(this,i),this.type=n}}class bs extends Sa{constructor(n,i={}){super("error",gt({error:n},i))}}class lc{on(n,i){return this._listeners=this._listeners||{},zh(n,i,this._listeners),this}off(n,i){return Rh(n,i,this._listeners),Rh(n,i,this._oneTimeListeners),this}once(n,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},zh(n,i,this._oneTimeListeners),this):new Promise(c=>this.once(n,c))}fire(n,i){typeof n=="string"&&(n=new Sa(n,i||{}));const c=n.type;if(this.listens(c)){n.target=this;const d=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const x of d)x.call(this,n);const m=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const x of m)Rh(c,x,this._oneTimeListeners),x.call(this,n);const y=this._eventedParent;y&&(gt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(n))}else n instanceof bs&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,i){return this._eventedParent=n,this._eventedParentData=i,this}}var ct=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ws(r,...n){for(const i of n)for(const c in i)r[c]=i[c];return r}function Kr(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function fi(r){if(Array.isArray(r))return r.map(fi);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const n={};for(const i in r)n[i]=fi(r[i]);return n}return Kr(r)}class Wm extends Error{constructor(n,i){super(i),this.message=i,this.key=n}}var Xo=Wm;class Lh{constructor(n,i=[]){this.parent=n,this.bindings={};for(const[c,d]of i)this.bindings[c]=d}concat(n){return new Lh(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Gm=Lh;const ol={kind:"null"},Kt={kind:"number"},qn={kind:"string"},jn={kind:"boolean"},eo={kind:"color"},Mo={kind:"object"},Wn={kind:"value"},to={kind:"collator"},cc={kind:"formatted"},Ta={kind:"resolvedImage"};function lo(r,n){return{kind:"array",itemType:r,N:n}}function Dr(r){if(r.kind==="array"){const n=Dr(r.itemType);return typeof r.N=="number"?`array<${n}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${n}>`}return r.kind}const Hm=[ol,Kt,qn,jn,eo,cc,Mo,lo(Wn),Ta];function Ss(r,n){if(n.kind==="error")return null;if(r.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ss(r.itemType,n.itemType))&&(typeof r.N!="number"||r.N===n.N))return null}else{if(r.kind===n.kind)return null;if(r.kind==="value"){for(const i of Hm)if(!Ss(i,n))return null}}return`Expected ${Dr(r)} but found ${Dr(n)} instead.`}function uc(r,n){return n.some(i=>i.kind===r.kind)}function dc(r,n){return n.some(i=>i==="null"?r===null:i==="array"?Array.isArray(r):i==="object"?r&&!Array.isArray(r)&&typeof r=="object":i===typeof r)}var Oh,qm={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function hc(r){return(r=Math.round(r))<0?0:r>255?255:r}function pc(r){return hc(r[r.length-1]==="%"?parseFloat(r)/100*255:parseInt(r))}function Pu(r){return(n=r[r.length-1]==="%"?parseFloat(r)/100:parseFloat(r))<0?0:n>1?1:n;var n}function sl(r,n,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?r+(n-r)*i*6:2*i<1?n:3*i<2?r+(n-r)*(2/3-i)*6:r}try{Oh={}.parseCSSColor=function(r){var n,i=r.replace(/ /g,"").toLowerCase();if(i in qm)return qm[i].slice();if(i[0]==="#")return i.length===4?(n=parseInt(i.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:i.length===7&&(n=parseInt(i.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var c=i.indexOf("("),d=i.indexOf(")");if(c!==-1&&d+1===i.length){var m=i.substr(0,c),y=i.substr(c+1,d-(c+1)).split(","),x=1;switch(m){case"rgba":if(y.length!==4)return null;x=Pu(y.pop());case"rgb":return y.length!==3?null:[pc(y[0]),pc(y[1]),pc(y[2]),x];case"hsla":if(y.length!==4)return null;x=Pu(y.pop());case"hsl":if(y.length!==3)return null;var S=(parseFloat(y[0])%360+360)%360/360,T=Pu(y[1]),P=Pu(y[2]),A=P<=.5?P*(T+1):P+T-P*T,z=2*P-A;return[hc(255*sl(z,A,S+1/3)),hc(255*sl(z,A,S)),hc(255*sl(z,A,S-1/3)),x];default:return null}}return null}}catch{}class Ui{constructor(n,i,c,d=1){this.r=n,this.g=i,this.b=c,this.a=d}static parse(n){if(!n)return;if(n instanceof Ui)return n;if(typeof n!="string")return;const i=Oh(n);return i?new Ui(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}toString(){const[n,i,c,d]=this.toArray();return`rgba(${Math.round(n)},${Math.round(i)},${Math.round(c)},${d})`}toArray(){const{r:n,g:i,b:c,a:d}=this;return d===0?[0,0,0,0]:[255*n/d,255*i/d,255*c/d,d]}toArray01(){const{r:n,g:i,b:c,a:d}=this;return d===0?[0,0,0,0]:[n/d,i/d,c/d,d]}toArray01PremultipliedAlpha(){const{r:n,g:i,b:c,a:d}=this;return[n,i,c,d]}}Ui.black=new Ui(0,0,0,1),Ui.white=new Ui(1,1,1,1),Ui.transparent=new Ui(0,0,0,0),Ui.red=new Ui(1,0,0,1),Ui.blue=new Ui(0,0,1,1);var qr=Ui;class Bh{constructor(n,i,c){this.sensitivity=n?i?"variant":"case":i?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,i){return this.collator.compare(n,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Fh{constructor(n,i,c,d,m){this.text=n.normalize?n.normalize():n,this.image=i,this.scale=c,this.fontStack=d,this.textColor=m}}class Vi{constructor(n){this.sections=n}static fromString(n){return new Vi([new Fh(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Vi?n:Vi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const i of this.sections){if(i.image){n.push(["image",i.image.name]);continue}n.push(i.text);const c={};i.fontStack&&(c["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(c["font-scale"]=i.scale),i.textColor&&(c["text-color"]=["rgba"].concat(i.textColor.toArray())),n.push(c)}return n}}class co{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new co({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Zm(r,n,i,c){return typeof r=="number"&&r>=0&&r<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof i=="number"&&i>=0&&i<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[r,n,i,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[r,n,i,c]:[r,n,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fc(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof qr||r instanceof Bh||r instanceof Vi||r instanceof co)return!0;if(Array.isArray(r)){for(const n of r)if(!fc(n))return!1;return!0}if(typeof r=="object"){for(const n in r)if(!fc(r[n]))return!1;return!0}return!1}function Vr(r){if(r===null)return ol;if(typeof r=="string")return qn;if(typeof r=="boolean")return jn;if(typeof r=="number")return Kt;if(r instanceof qr)return eo;if(r instanceof Bh)return to;if(r instanceof Vi)return cc;if(r instanceof co)return Ta;if(Array.isArray(r)){const n=r.length;let i;for(const c of r){const d=Vr(c);if(i){if(i===d)continue;i=Wn;break}i=d}return lo(i||Wn,n)}return Mo}function mc(r){const n=typeof r;return r===null?"":n==="string"||n==="number"||n==="boolean"?String(r):r instanceof qr||r instanceof Vi||r instanceof co?r.toString():JSON.stringify(r)}class $h{constructor(n,i){this.type=n,this.value=i}static parse(n,i){if(n.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!fc(n[1]))return i.error("invalid value");const c=n[1];let d=Vr(c);const m=i.expectedType;return d.kind!=="array"||d.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(d=m),new $h(d,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof qr?["rgba"].concat(this.value.toArray()):this.value instanceof Vi?this.value.serialize():this.value}}var Ca=$h,bi=class{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}};const Nh={string:qn,number:Kt,boolean:jn,object:Mo};class Uh{constructor(n,i){this.type=n,this.args=i}static parse(n,i){if(n.length<2)return i.error("Expected at least one argument.");let c,d=1;const m=n[0];if(m==="array"){let x,S;if(n.length>2){const T=n[1];if(typeof T!="string"||!(T in Nh)||T==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);x=Nh[T],d++}else x=Wn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return i.error('The length argument to "array" must be a positive integer literal',2);S=n[2],d++}c=lo(x,S)}else c=Nh[m];const y=[];for(;d<n.length;d++){const x=i.parse(n[d],d,Wn);if(!x)return null;y.push(x)}return new Uh(c,y)}evaluate(n){for(let i=0;i<this.args.length;i++){const c=this.args[i].evaluate(n);if(!Ss(this.type,Vr(c)))return c;if(i===this.args.length-1)throw new bi(`Expected value to be of type ${Dr(this.type)}, but found ${Dr(Vr(c))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,i=[n.kind];if(n.kind==="array"){const c=n.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){i.push(c.kind);const d=n.N;(typeof d=="number"||this.args.length>1)&&i.push(d)}}return i.concat(this.args.map(c=>c.serialize()))}}var Ts=Uh;class Xs{constructor(n){this.type=cc,this.sections=n}static parse(n,i){if(n.length<2)return i.error("Expected at least one argument.");const c=n[1];if(!Array.isArray(c)&&typeof c=="object")return i.error("First argument must be an image or text section.");const d=[];let m=!1;for(let y=1;y<=n.length-1;++y){const x=n[y];if(m&&typeof x=="object"&&!Array.isArray(x)){m=!1;let S=null;if(x["font-scale"]&&(S=i.parse(x["font-scale"],1,Kt),!S))return null;let T=null;if(x["text-font"]&&(T=i.parse(x["text-font"],1,lo(qn)),!T))return null;let P=null;if(x["text-color"]&&(P=i.parse(x["text-color"],1,eo),!P))return null;const A=d[d.length-1];A.scale=S,A.font=T,A.textColor=P}else{const S=i.parse(n[y],1,Wn);if(!S)return null;const T=S.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,d.push({content:S,scale:null,font:null,textColor:null})}}return new Xs(d)}evaluate(n){return new Vi(this.sections.map(i=>{const c=i.content.evaluate(n);return Vr(c)===Ta?new Fh("",c,null,null,null):new Fh(mc(c),null,i.scale?i.scale.evaluate(n):null,i.font?i.font.evaluate(n).join(","):null,i.textColor?i.textColor.evaluate(n):null)}))}eachChild(n){for(const i of this.sections)n(i.content),i.scale&&n(i.scale),i.font&&n(i.font),i.textColor&&n(i.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const i of this.sections){n.push(i.content.serialize());const c={};i.scale&&(c["font-scale"]=i.scale.serialize()),i.font&&(c["text-font"]=i.font.serialize()),i.textColor&&(c["text-color"]=i.textColor.serialize()),n.push(c)}return n}}class Mu{constructor(n){this.type=Ta,this.input=n}static parse(n,i){if(n.length!==2)return i.error("Expected two arguments.");const c=i.parse(n[1],1,qn);return c?new Mu(c):i.error("No image name provided.")}evaluate(n){const i=this.input.evaluate(n),c=co.fromString(i);return c&&n.availableImages&&(c.available=n.availableImages.indexOf(i)>-1),c}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const dv={"to-boolean":jn,"to-color":eo,"to-number":Kt,"to-string":qn};class Vh{constructor(n,i){this.type=n,this.args=i}static parse(n,i){if(n.length<2)return i.error("Expected at least one argument.");const c=n[0];if((c==="to-boolean"||c==="to-string")&&n.length!==2)return i.error("Expected one argument.");const d=dv[c],m=[];for(let y=1;y<n.length;y++){const x=i.parse(n[y],y,Wn);if(!x)return null;m.push(x)}return new Vh(d,m)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let i,c;for(const d of this.args){if(i=d.evaluate(n),c=null,i instanceof qr)return i;if(typeof i=="string"){const m=n.parseColor(i);if(m)return m}else if(Array.isArray(i)&&(c=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:Zm(i[0],i[1],i[2],i[3]),!c))return new qr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new bi(c||`Could not parse color from value '${typeof i=="string"?i:String(JSON.stringify(i))}'`)}if(this.type.kind==="number"){let i=null;for(const c of this.args){if(i=c.evaluate(n),i===null)return 0;const d=Number(i);if(!isNaN(d))return d}throw new bi(`Could not convert ${JSON.stringify(i)} to number.`)}return this.type.kind==="formatted"?Vi.fromString(mc(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?co.fromString(mc(this.args[0].evaluate(n))):mc(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Xs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Mu(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(i=>{n.push(i.serialize())}),n}}var al=Vh;const Yo=["Unknown","Point","LineString","Polygon"];var jh=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Yo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:i,y:c}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(i*n-r[0])+this.featureDistanceData.bearing[1]*(c*n-r[1])}return 0}parseColor(r){let n=this._parseColorCache[r];return n||(n=this._parseColorCache[r]=qr.parse(r)),n}};class Ea{constructor(n,i,c,d){this.name=n,this.type=i,this._evaluate=c,this.args=d}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,i){const c=n[0],d=Ea.definitions[c];if(!d)return i.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(d)?d[0]:d.type,y=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,x=y.filter(([T])=>!Array.isArray(T)||T.length===n.length-1);let S=null;for(const[T,P]of x){S=new Xh(i.registry,i.path,null,i.scope);const A=[];let z=!1;for(let F=1;F<n.length;F++){const V=n[F],X=Array.isArray(T)?T[F-1]:T.type,ne=S.parse(V,1+A.length,X);if(!ne){z=!0;break}A.push(ne)}if(!z)if(Array.isArray(T)&&T.length!==A.length)S.error(`Expected ${T.length} arguments, but found ${A.length} instead.`);else{for(let F=0;F<A.length;F++){const V=Array.isArray(T)?T[F]:T.type,X=A[F];S.concat(F+1).checkSubtype(V,X.type)}if(S.errors.length===0)return new Ea(c,m,P,A)}}if(x.length===1)i.errors.push(...S.errors);else{const T=(x.length?x:y).map(([A])=>{return z=A,Array.isArray(z)?`(${z.map(Dr).join(", ")})`:`(${Dr(z.type)}...)`;var z}).join(" | "),P=[];for(let A=1;A<n.length;A++){const z=i.parse(n[A],1+P.length);if(!z)return null;P.push(Dr(z.type))}i.error(`Expected arguments of type ${T}, but found (${P.join(", ")}) instead.`)}return null}static register(n,i){Ea.definitions=i;for(const c in i)n[c]=Ea}}var Cs=Ea;class gc{constructor(n,i,c){this.type=to,this.locale=c,this.caseSensitive=n,this.diacriticSensitive=i}static parse(n,i){if(n.length!==2)return i.error("Expected one argument.");const c=n[1];if(typeof c!="object"||Array.isArray(c))return i.error("Collator options argument must be an object.");const d=i.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,jn);if(!d)return null;const m=i.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,jn);if(!m)return null;let y=null;return c.locale&&(y=i.parse(c.locale,1,qn),!y)?null:new gc(d,m,y)}evaluate(n){return new Bh(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const Es=8192;function Iu(r,n){r[0]=Math.min(r[0],n[0]),r[1]=Math.min(r[1],n[1]),r[2]=Math.max(r[2],n[0]),r[3]=Math.max(r[3],n[1])}function ll(r,n){return!(r[0]<=n[0]||r[2]>=n[2]||r[1]<=n[1]||r[3]>=n[3])}function yc(r,n){const i=(180+r[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,d=Math.pow(2,n.z);return[Math.round(i*d*Es),Math.round(c*d*Es)]}function Xm(r,n,i){const c=r[0]-n[0],d=r[1]-n[1],m=r[0]-i[0],y=r[1]-i[1];return c*y-m*d==0&&c*m<=0&&d*y<=0}function Au(r,n){let i=!1;for(let y=0,x=n.length;y<x;y++){const S=n[y];for(let T=0,P=S.length;T<P-1;T++){if(Xm(r,S[T],S[T+1]))return!1;(d=S[T])[1]>(c=r)[1]!=(m=S[T+1])[1]>c[1]&&c[0]<(m[0]-d[0])*(c[1]-d[1])/(m[1]-d[1])+d[0]&&(i=!i)}}var c,d,m;return i}function Wh(r,n){for(let i=0;i<n.length;i++)if(Au(r,n[i]))return!0;return!1}function Gh(r,n,i,c){const d=c[0]-i[0],m=c[1]-i[1],y=(r[0]-i[0])*m-d*(r[1]-i[1]),x=(n[0]-i[0])*m-d*(n[1]-i[1]);return y>0&&x<0||y<0&&x>0}function cl(r,n,i){for(const T of i)for(let P=0;P<T.length-1;++P)if((x=[(y=T[P+1])[0]-(m=T[P])[0],y[1]-m[1]])[0]*(S=[(d=n)[0]-(c=r)[0],d[1]-c[1]])[1]-x[1]*S[0]!=0&&Gh(c,d,m,y)&&Gh(m,y,c,d))return!0;var c,d,m,y,x,S;return!1}function rr(r,n){for(let i=0;i<r.length;++i)if(!Au(r[i],n))return!1;for(let i=0;i<r.length-1;++i)if(cl(r[i],r[i+1],n))return!1;return!0}function hv(r,n){for(let i=0;i<n.length;i++)if(rr(r,n[i]))return!0;return!1}function Hh(r,n,i){const c=[];for(let d=0;d<r.length;d++){const m=[];for(let y=0;y<r[d].length;y++){const x=yc(r[d][y],i);Iu(n,x),m.push(x)}c.push(m)}return c}function Ym(r,n,i){const c=[];for(let d=0;d<r.length;d++){const m=Hh(r[d],n,i);c.push(m)}return c}function qh(r,n,i,c){if(r[0]<i[0]||r[0]>i[2]){const d=.5*c;let m=r[0]-i[0]>d?-c:i[0]-r[0]>d?c:0;m===0&&(m=r[0]-i[2]>d?-c:i[2]-r[0]>d?c:0),r[0]+=m}Iu(n,r)}function Km(r,n,i,c){const d=Math.pow(2,c.z)*Es,m=[c.x*Es,c.y*Es],y=[];if(!r)return y;for(const x of r)for(const S of x){const T=[S.x+m[0],S.y+m[1]];qh(T,n,i,d),y.push(T)}return y}function Zh(r,n,i,c){const d=Math.pow(2,c.z)*Es,m=[c.x*Es,c.y*Es],y=[];if(!r)return y;for(const S of r){const T=[];for(const P of S){const A=[P.x+m[0],P.y+m[1]];Iu(n,A),T.push(A)}y.push(T)}if(n[2]-n[0]<=d/2){(x=n)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const S of y)for(const T of S)qh(T,n,i,d)}var x;return y}class ul{constructor(n,i){this.type=jn,this.geojson=n,this.geometries=i}static parse(n,i){if(n.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(fc(n[1])){const c=n[1];if(c.type==="FeatureCollection")for(let d=0;d<c.features.length;++d){const m=c.features[d].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ul(c,c.features[d].geometry)}else if(c.type==="Feature"){const d=c.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new ul(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new ul(c,c)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(i,c){const d=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const x=Hh(c.coordinates,m,y),S=Km(i.geometry(),d,m,y);if(!ll(d,m))return!1;for(const T of S)if(!Au(T,x))return!1}if(c.type==="MultiPolygon"){const x=Ym(c.coordinates,m,y),S=Km(i.geometry(),d,m,y);if(!ll(d,m))return!1;for(const T of S)if(!Wh(T,x))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(i,c){const d=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const x=Hh(c.coordinates,m,y),S=Zh(i.geometry(),d,m,y);if(!ll(d,m))return!1;for(const T of S)if(!rr(T,x))return!1}if(c.type==="MultiPolygon"){const x=Ym(c.coordinates,m,y),S=Zh(i.geometry(),d,m,y);if(!ll(d,m))return!1;for(const T of S)if(!hv(T,x))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Du=ul;function dl(r){if(r instanceof Cs&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof Du)return!1;let n=!0;return r.eachChild(i=>{n&&!dl(i)&&(n=!1)}),n}function ks(r){if(r instanceof Cs&&r.name==="feature-state")return!1;let n=!0;return r.eachChild(i=>{n&&!ks(i)&&(n=!1)}),n}function ka(r,n){if(r instanceof Cs&&n.indexOf(r.name)>=0)return!1;let i=!0;return r.eachChild(c=>{i&&!ka(c,n)&&(i=!1)}),i}class zu{constructor(n,i){this.type=i.type,this.name=n,this.boundExpression=i}static parse(n,i){if(n.length!==2||typeof n[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");const c=n[1];return i.scope.has(c)?new zu(c,i.scope.get(c)):i.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Jm=zu;class _c{constructor(n,i=[],c,d=new Gm,m=[]){this.registry=n,this.path=i,this.key=i.map(y=>`[${y}]`).join(""),this.scope=d,this.errors=m,this.expectedType=c}parse(n,i,c,d,m={}){return i?this.concat(i,c,d)._parse(n,m):this._parse(n,m)}_parse(n,i){function c(d,m,y){return y==="assert"?new Ts(m,[d]):y==="coerce"?new al(m,[d]):d}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=n[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[d];if(m){let y=m.parse(n,this);if(!y)return null;if(this.expectedType){const x=this.expectedType,S=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(x,S))return null}else y=c(y,x,i.typeAnnotation||"coerce");else y=c(y,x,i.typeAnnotation||"assert")}if(!(y instanceof Ca)&&y.type.kind!=="resolvedImage"&&Yh(y)){const x=new jh;try{y=new Ca(y.type,y.evaluate(x))}catch(S){return this.error(S.message),null}}return y}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,i,c){const d=typeof n=="number"?this.path.concat(n):this.path,m=c?this.scope.concat(c):this.scope;return new _c(this.registry,d,i||null,m,this.errors)}error(n,...i){const c=`${this.key}${i.map(d=>`[${d}]`).join("")}`;this.errors.push(new Xo(c,n))}checkSubtype(n,i){const c=Ss(n,i);return c&&this.error(c),c}}var Xh=_c;function Yh(r){if(r instanceof Jm)return Yh(r.boundExpression);if(r instanceof Cs&&r.name==="error"||r instanceof gc||r instanceof Du)return!1;const n=r instanceof al||r instanceof Ts;let i=!0;return r.eachChild(c=>{i=n?i&&Yh(c):i&&c instanceof Ca}),!!i&&dl(r)&&ka(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ru(r,n){const i=r.length-1;let c,d,m=0,y=i,x=0;for(;m<=y;)if(x=Math.floor((m+y)/2),c=r[x],d=r[x+1],c<=n){if(x===i||n<d)return x;m=x+1}else{if(!(c>n))throw new bi("Input is not a number.");y=x-1}return 0}class Lu{constructor(n,i,c){this.type=n,this.input=i,this.labels=[],this.outputs=[];for(const[d,m]of c)this.labels.push(d),this.outputs.push(m)}static parse(n,i){if(n.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return i.error("Expected an even number of arguments.");const c=i.parse(n[1],1,Kt);if(!c)return null;const d=[];let m=null;i.expectedType&&i.expectedType.kind!=="value"&&(m=i.expectedType);for(let y=1;y<n.length;y+=2){const x=y===1?-1/0:n[y],S=n[y+1],T=y,P=y+1;if(typeof x!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(d.length&&d[d.length-1][0]>=x)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const A=i.parse(S,P,m);if(!A)return null;m=m||A.type,d.push([x,A])}return new Lu(m,c,d)}evaluate(n){const i=this.labels,c=this.outputs;if(i.length===1)return c[0].evaluate(n);const d=this.input.evaluate(n);if(d<=i[0])return c[0].evaluate(n);const m=i.length;return d>=i[m-1]?c[m-1].evaluate(n):c[Ru(i,d)].evaluate(n)}eachChild(n){n(this.input);for(const i of this.outputs)n(i)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let i=0;i<this.labels.length;i++)i>0&&n.push(this.labels[i]),n.push(this.outputs[i].serialize());return n}}var Kh=Lu;function Xn(r,n,i){return r*(1-i)+n*i}var vc=Object.freeze({__proto__:null,array:function(r,n,i){return r.map((c,d)=>Xn(c,n[d],i))},color:function(r,n,i){return new qr(Xn(r.r,n.r,i),Xn(r.g,n.g,i),Xn(r.b,n.b,i),Xn(r.a,n.a,i))},number:Xn});const Qm=.95047,Jh=1.08883,eg=4/29,Pa=6/29,Qh=3*Pa*Pa,pv=Pa*Pa*Pa,fv=Math.PI/180,mv=180/Math.PI;function ep(r){return r>pv?Math.pow(r,1/3):r/Qh+eg}function tp(r){return r>Pa?r*r*r:Qh*(r-eg)}function np(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function Ou(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function tg(r){const n=Ou(r.r),i=Ou(r.g),c=Ou(r.b),d=ep((.4124564*n+.3575761*i+.1804375*c)/Qm),m=ep((.2126729*n+.7151522*i+.072175*c)/1);return{l:116*m-16,a:500*(d-m),b:200*(m-ep((.0193339*n+.119192*i+.9503041*c)/Jh)),alpha:r.a}}function ng(r){let n=(r.l+16)/116,i=isNaN(r.a)?n:n+r.a/500,c=isNaN(r.b)?n:n-r.b/200;return n=1*tp(n),i=Qm*tp(i),c=Jh*tp(c),new qr(np(3.2404542*i-1.5371385*n-.4985314*c),np(-.969266*i+1.8760108*n+.041556*c),np(.0556434*i-.2040259*n+1.0572252*c),r.alpha)}function gv(r,n,i){const c=n-r;return r+i*(c>180||c<-180?c-360*Math.round(c/360):c)}const xc={forward:tg,reverse:ng,interpolate:function(r,n,i){return{l:Xn(r.l,n.l,i),a:Xn(r.a,n.a,i),b:Xn(r.b,n.b,i),alpha:Xn(r.alpha,n.alpha,i)}}},hl={forward:function(r){const{l:n,a:i,b:c}=tg(r),d=Math.atan2(c,i)*mv;return{h:d<0?d+360:d,c:Math.sqrt(i*i+c*c),l:n,alpha:r.a}},reverse:function(r){const n=r.h*fv,i=r.c;return ng({l:r.l,a:Math.cos(n)*i,b:Math.sin(n)*i,alpha:r.alpha})},interpolate:function(r,n,i){return{h:gv(r.h,n.h,i),c:Xn(r.c,n.c,i),l:Xn(r.l,n.l,i),alpha:Xn(r.alpha,n.alpha,i)}}};var rp=Object.freeze({__proto__:null,hcl:hl,lab:xc});class bc{constructor(n,i,c,d,m){this.type=n,this.operator=i,this.interpolation=c,this.input=d,this.labels=[],this.outputs=[];for(const[y,x]of m)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(n,i,c,d){let m=0;if(n.name==="exponential")m=ip(i,n.base,c,d);else if(n.name==="linear")m=ip(i,1,c,d);else if(n.name==="cubic-bezier"){const y=n.controlPoints;m=new re(y[0],y[1],y[2],y[3]).solve(ip(i,1,c,d))}return m}static parse(n,i){let[c,d,m,...y]=n;if(!Array.isArray(d)||d.length===0)return i.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const T=d[1];if(typeof T!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:T}}else{if(d[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const T=d.slice(1);if(T.length!==4||T.some(P=>typeof P!="number"||P<0||P>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:T}}}if(n.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(m=i.parse(m,2,Kt),!m)return null;const x=[];let S=null;c==="interpolate-hcl"||c==="interpolate-lab"?S=eo:i.expectedType&&i.expectedType.kind!=="value"&&(S=i.expectedType);for(let T=0;T<y.length;T+=2){const P=y[T],A=y[T+1],z=T+3,F=T+4;if(typeof P!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(x.length&&x[x.length-1][0]>=P)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',z);const V=i.parse(A,F,S);if(!V)return null;S=S||V.type,x.push([P,V])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new bc(S,c,d,m,x):i.error(`Type ${Dr(S)} is not interpolatable.`)}evaluate(n){const i=this.labels,c=this.outputs;if(i.length===1)return c[0].evaluate(n);const d=this.input.evaluate(n);if(d<=i[0])return c[0].evaluate(n);const m=i.length;if(d>=i[m-1])return c[m-1].evaluate(n);const y=Ru(i,d),x=bc.interpolationFactor(this.interpolation,d,i[y],i[y+1]),S=c[y].evaluate(n),T=c[y+1].evaluate(n);return this.operator==="interpolate"?vc[this.type.kind.toLowerCase()](S,T,x):this.operator==="interpolate-hcl"?hl.reverse(hl.interpolate(hl.forward(S),hl.forward(T),x)):xc.reverse(xc.interpolate(xc.forward(S),xc.forward(T),x))}eachChild(n){n(this.input);for(const i of this.outputs)n(i)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const i=[this.operator,n,this.input.serialize()];for(let c=0;c<this.labels.length;c++)i.push(this.labels[c],this.outputs[c].serialize());return i}}function ip(r,n,i,c){const d=c-i,m=r-i;return d===0?0:n===1?m/d:(Math.pow(n,m)-1)/(Math.pow(n,d)-1)}var Ko=bc;class Bu{constructor(n,i){this.type=n,this.args=i}static parse(n,i){if(n.length<2)return i.error("Expectected at least one argument.");let c=null;const d=i.expectedType;d&&d.kind!=="value"&&(c=d);const m=[];for(const x of n.slice(1)){const S=i.parse(x,1+m.length,c,void 0,{typeAnnotation:"omit"});if(!S)return null;c=c||S.type,m.push(S)}const y=d&&m.some(x=>Ss(d,x.type));return new Bu(y?Wn:c,m)}evaluate(n){let i,c=null,d=0;for(const m of this.args){if(d++,c=m.evaluate(n),c&&c instanceof co&&!c.available&&(i||(i=c),c=null,d===this.args.length))return i;if(c!==null)break}return c}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(i=>{n.push(i.serialize())}),n}}var op=Bu;class Fu{constructor(n,i){this.type=i.type,this.bindings=[].concat(n),this.result=i}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const i of this.bindings)n(i[1]);n(this.result)}static parse(n,i){if(n.length<4)return i.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const c=[];for(let m=1;m<n.length-1;m+=2){const y=n[m];if(typeof y!="string")return i.error(`Expected string, but found ${typeof y} instead.`,m);if(/[^a-zA-Z0-9_]/.test(y))return i.error("Variable names must contain only alphanumeric characters or '_'.",m);const x=i.parse(n[m+1],m+1);if(!x)return null;c.push([y,x])}const d=i.parse(n[n.length-1],n.length-1,i.expectedType,c);return d?new Fu(c,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[i,c]of this.bindings)n.push(i,c.serialize());return n.push(this.result.serialize()),n}}var rg=Fu;class sp{constructor(n,i,c){this.type=n,this.index=i,this.input=c}static parse(n,i){if(n.length!==3)return i.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=i.parse(n[1],1,Kt),d=i.parse(n[2],2,lo(i.expectedType||Wn));return c&&d?new sp(d.type.itemType,c,d):null}evaluate(n){const i=this.index.evaluate(n),c=this.input.evaluate(n);if(i<0)throw new bi(`Array index out of bounds: ${i} < 0.`);if(i>=c.length)throw new bi(`Array index out of bounds: ${i} > ${c.length-1}.`);if(i!==Math.floor(i))throw new bi(`Array index must be an integer, but found ${i} instead.`);return c[i]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var yv=sp;class ap{constructor(n,i){this.type=jn,this.needle=n,this.haystack=i}static parse(n,i){if(n.length!==3)return i.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=i.parse(n[1],1,Wn),d=i.parse(n[2],2,Wn);return c&&d?uc(c.type,[jn,qn,Kt,ol,Wn])?new ap(c,d):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(c.type)} instead`):null}evaluate(n){const i=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(c==null)return!1;if(!dc(i,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(Vr(i))} instead.`);if(!dc(c,["string","array"]))throw new bi(`Expected second argument to be of type array or string, but found ${Dr(Vr(c))} instead.`);return c.indexOf(i)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var $u=ap;class wc{constructor(n,i,c){this.type=Kt,this.needle=n,this.haystack=i,this.fromIndex=c}static parse(n,i){if(n.length<=2||n.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=i.parse(n[1],1,Wn),d=i.parse(n[2],2,Wn);if(!c||!d)return null;if(!uc(c.type,[jn,qn,Kt,ol,Wn]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(c.type)} instead`);if(n.length===4){const m=i.parse(n[3],3,Kt);return m?new wc(c,d,m):null}return new wc(c,d)}evaluate(n){const i=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!dc(i,["boolean","string","number","null"]))throw new bi(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(Vr(i))} instead.`);if(!dc(c,["string","array"]))throw new bi(`Expected second argument to be of type array or string, but found ${Dr(Vr(c))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(n);return c.indexOf(i,d)}return c.indexOf(i)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ig=wc;class lp{constructor(n,i,c,d,m,y){this.inputType=n,this.type=i,this.input=c,this.cases=d,this.outputs=m,this.otherwise=y}static parse(n,i){if(n.length<5)return i.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return i.error("Expected an even number of arguments.");let c,d;i.expectedType&&i.expectedType.kind!=="value"&&(d=i.expectedType);const m={},y=[];for(let T=2;T<n.length-1;T+=2){let P=n[T];const A=n[T+1];Array.isArray(P)||(P=[P]);const z=i.concat(T);if(P.length===0)return z.error("Expected at least one branch label.");for(const V of P){if(typeof V!="number"&&typeof V!="string")return z.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return z.error("Numeric branch labels must be integer values.");if(c){if(z.checkSubtype(c,Vr(V)))return null}else c=Vr(V);if(m[String(V)]!==void 0)return z.error("Branch labels must be unique.");m[String(V)]=y.length}const F=i.parse(A,T,d);if(!F)return null;d=d||F.type,y.push(F)}const x=i.parse(n[1],1,Wn);if(!x)return null;const S=i.parse(n[n.length-1],n.length-1,d);return S?x.type.kind!=="value"&&i.concat(1).checkSubtype(c,x.type)?null:new lp(c,d,x,m,y,S):null}evaluate(n){const i=this.input.evaluate(n);return(Vr(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),c=[],d={};for(const y of i){const x=d[this.cases[y]];x===void 0?(d[this.cases[y]]=c.length,c.push([this.cases[y],[y]])):c[x][1].push(y)}const m=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,x]of c)n.push(x.length===1?m(x[0]):x.map(m)),n.push(this.outputs[y].serialize());return n.push(this.otherwise.serialize()),n}}var _v=lp;class cp{constructor(n,i,c){this.type=n,this.branches=i,this.otherwise=c}static parse(n,i){if(n.length<4)return i.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return i.error("Expected an odd number of arguments.");let c;i.expectedType&&i.expectedType.kind!=="value"&&(c=i.expectedType);const d=[];for(let y=1;y<n.length-1;y+=2){const x=i.parse(n[y],y,jn);if(!x)return null;const S=i.parse(n[y+1],y+1,c);if(!S)return null;d.push([x,S]),c=c||S.type}const m=i.parse(n[n.length-1],n.length-1,c);return m?new cp(c,d,m):null}evaluate(n){for(const[i,c]of this.branches)if(i.evaluate(n))return c.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[i,c]of this.branches)n(i),n(c);n(this.otherwise)}outputDefined(){return this.branches.every(([n,i])=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(i=>{n.push(i.serialize())}),n}}var og=cp;class Sc{constructor(n,i,c,d){this.type=n,this.input=i,this.beginIndex=c,this.endIndex=d}static parse(n,i){if(n.length<=2||n.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=i.parse(n[1],1,Wn),d=i.parse(n[2],2,Kt);if(!c||!d)return null;if(!uc(c.type,[lo(Wn),qn,Wn]))return i.error(`Expected first argument to be of type array or string, but found ${Dr(c.type)} instead`);if(n.length===4){const m=i.parse(n[3],3,Kt);return m?new Sc(c.type,c,d,m):null}return new Sc(c.type,c,d)}evaluate(n){const i=this.input.evaluate(n),c=this.beginIndex.evaluate(n);if(!dc(i,["string","array"]))throw new bi(`Expected first argument to be of type array or string, but found ${Dr(Vr(i))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(n);return i.slice(c,d)}return i.slice(c)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var sg=Sc;function Nu(r,n){return r==="=="||r==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function ag(r,n,i,c){return c.compare(n,i)===0}function pl(r,n,i){const c=r!=="=="&&r!=="!=";return class WI{constructor(m,y,x){this.type=jn,this.lhs=m,this.rhs=y,this.collator=x,this.hasUntypedArgument=m.type.kind==="value"||y.type.kind==="value"}static parse(m,y){if(m.length!==3&&m.length!==4)return y.error("Expected two or three arguments.");const x=m[0];let S=y.parse(m[1],1,Wn);if(!S)return null;if(!Nu(x,S.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${Dr(S.type)}'.`);let T=y.parse(m[2],2,Wn);if(!T)return null;if(!Nu(x,T.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${Dr(T.type)}'.`);if(S.type.kind!==T.type.kind&&S.type.kind!=="value"&&T.type.kind!=="value")return y.error(`Cannot compare types '${Dr(S.type)}' and '${Dr(T.type)}'.`);c&&(S.type.kind==="value"&&T.type.kind!=="value"?S=new Ts(T.type,[S]):S.type.kind!=="value"&&T.type.kind==="value"&&(T=new Ts(S.type,[T])));let P=null;if(m.length===4){if(S.type.kind!=="string"&&T.type.kind!=="string"&&S.type.kind!=="value"&&T.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(P=y.parse(m[3],3,to),!P)return null}return new WI(S,T,P)}evaluate(m){const y=this.lhs.evaluate(m),x=this.rhs.evaluate(m);if(c&&this.hasUntypedArgument){const S=Vr(y),T=Vr(x);if(S.kind!==T.kind||S.kind!=="string"&&S.kind!=="number")throw new bi(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${S.kind}, ${T.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const S=Vr(y),T=Vr(x);if(S.kind!=="string"||T.kind!=="string")return n(m,y,x)}return this.collator?i(m,y,x,this.collator.evaluate(m)):n(m,y,x)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[r];return this.eachChild(y=>{m.push(y.serialize())}),m}}}const vv=pl("==",function(r,n,i){return n===i},ag),xv=pl("!=",function(r,n,i){return n!==i},function(r,n,i,c){return!ag(0,n,i,c)}),bv=pl("<",function(r,n,i){return n<i},function(r,n,i,c){return c.compare(n,i)<0}),wv=pl(">",function(r,n,i){return n>i},function(r,n,i,c){return c.compare(n,i)>0}),Sv=pl("<=",function(r,n,i){return n<=i},function(r,n,i,c){return c.compare(n,i)<=0}),lg=pl(">=",function(r,n,i){return n>=i},function(r,n,i,c){return c.compare(n,i)>=0});class Uu{constructor(n,i,c,d,m,y){this.type=qn,this.number=n,this.locale=i,this.currency=c,this.unit=d,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(n,i){if(n.length!==3)return i.error("Expected two arguments.");const c=i.parse(n[1],1,Kt);if(!c)return null;const d=n[2];if(typeof d!="object"||Array.isArray(d))return i.error("NumberFormat options argument must be an object.");let m=null;if(d.locale&&(m=i.parse(d.locale,1,qn),!m))return null;let y=null;if(d.currency&&(y=i.parse(d.currency,1,qn),!y))return null;let x=null;if(d.unit&&(x=i.parse(d.unit,1,qn),!x))return null;let S=null;if(d["min-fraction-digits"]&&(S=i.parse(d["min-fraction-digits"],1,Kt),!S))return null;let T=null;return d["max-fraction-digits"]&&(T=i.parse(d["max-fraction-digits"],1,Kt),!T)?null:new Uu(c,m,y,x,S,T)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class fl{constructor(n){this.type=Kt,this.input=n}static parse(n,i){if(n.length!==2)return i.error(`Expected 1 argument, but found ${n.length-1} instead.`);const c=i.parse(n[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${Dr(c.type)} instead.`):new fl(c):null}evaluate(n){const i=this.input.evaluate(n);if(typeof i=="string"||Array.isArray(i))return i.length;throw new bi(`Expected value to be of type string or array, but found ${Dr(Vr(i))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(i=>{n.push(i.serialize())}),n}}const cg={"==":vv,"!=":xv,">":wv,"<":bv,">=":lg,"<=":Sv,array:Ts,at:yv,boolean:Ts,case:og,coalesce:op,collator:gc,format:Xs,image:Mu,in:$u,"index-of":ig,interpolate:Ko,"interpolate-hcl":Ko,"interpolate-lab":Ko,length:fl,let:rg,literal:Ca,match:_v,number:Ts,"number-format":Uu,object:Ts,slice:sg,step:Kh,string:Ts,"to-boolean":al,"to-color":al,"to-number":al,"to-string":al,var:Jm,within:Du};function ug(r,[n,i,c,d]){n=n.evaluate(r),i=i.evaluate(r),c=c.evaluate(r);const m=d?d.evaluate(r):1,y=Zm(n,i,c,m);if(y)throw new bi(y);return new qr(n/255*m,i/255*m,c/255*m,m)}function Ps(r,n){return r in n}function Vu(r,n){const i=n[r];return i===void 0?null:i}function uo(r){return{type:r}}Cs.register(cg,{error:[{kind:"error"},[qn],(r,[n])=>{throw new bi(n.evaluate(r))}],typeof:[qn,[Wn],(r,[n])=>Dr(Vr(n.evaluate(r)))],"to-rgba":[lo(Kt,4),[eo],(r,[n])=>n.evaluate(r).toArray()],rgb:[eo,[Kt,Kt,Kt],ug],rgba:[eo,[Kt,Kt,Kt,Kt],ug],has:{type:jn,overloads:[[[qn],(r,[n])=>Ps(n.evaluate(r),r.properties())],[[qn,Mo],(r,[n,i])=>Ps(n.evaluate(r),i.evaluate(r))]]},get:{type:Wn,overloads:[[[qn],(r,[n])=>Vu(n.evaluate(r),r.properties())],[[qn,Mo],(r,[n,i])=>Vu(n.evaluate(r),i.evaluate(r))]]},"feature-state":[Wn,[qn],(r,[n])=>Vu(n.evaluate(r),r.featureState||{})],properties:[Mo,[],r=>r.properties()],"geometry-type":[qn,[],r=>r.geometryType()],id:[Wn,[],r=>r.id()],zoom:[Kt,[],r=>r.globals.zoom],pitch:[Kt,[],r=>r.globals.pitch||0],"distance-from-center":[Kt,[],r=>r.distanceFromCenter()],"heatmap-density":[Kt,[],r=>r.globals.heatmapDensity||0],"line-progress":[Kt,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[Kt,[],r=>r.globals.skyRadialProgress||0],accumulated:[Wn,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Kt,uo(Kt),(r,n)=>{let i=0;for(const c of n)i+=c.evaluate(r);return i}],"*":[Kt,uo(Kt),(r,n)=>{let i=1;for(const c of n)i*=c.evaluate(r);return i}],"-":{type:Kt,overloads:[[[Kt,Kt],(r,[n,i])=>n.evaluate(r)-i.evaluate(r)],[[Kt],(r,[n])=>-n.evaluate(r)]]},"/":[Kt,[Kt,Kt],(r,[n,i])=>n.evaluate(r)/i.evaluate(r)],"%":[Kt,[Kt,Kt],(r,[n,i])=>n.evaluate(r)%i.evaluate(r)],ln2:[Kt,[],()=>Math.LN2],pi:[Kt,[],()=>Math.PI],e:[Kt,[],()=>Math.E],"^":[Kt,[Kt,Kt],(r,[n,i])=>Math.pow(n.evaluate(r),i.evaluate(r))],sqrt:[Kt,[Kt],(r,[n])=>Math.sqrt(n.evaluate(r))],log10:[Kt,[Kt],(r,[n])=>Math.log(n.evaluate(r))/Math.LN10],ln:[Kt,[Kt],(r,[n])=>Math.log(n.evaluate(r))],log2:[Kt,[Kt],(r,[n])=>Math.log(n.evaluate(r))/Math.LN2],sin:[Kt,[Kt],(r,[n])=>Math.sin(n.evaluate(r))],cos:[Kt,[Kt],(r,[n])=>Math.cos(n.evaluate(r))],tan:[Kt,[Kt],(r,[n])=>Math.tan(n.evaluate(r))],asin:[Kt,[Kt],(r,[n])=>Math.asin(n.evaluate(r))],acos:[Kt,[Kt],(r,[n])=>Math.acos(n.evaluate(r))],atan:[Kt,[Kt],(r,[n])=>Math.atan(n.evaluate(r))],min:[Kt,uo(Kt),(r,n)=>Math.min(...n.map(i=>i.evaluate(r)))],max:[Kt,uo(Kt),(r,n)=>Math.max(...n.map(i=>i.evaluate(r)))],abs:[Kt,[Kt],(r,[n])=>Math.abs(n.evaluate(r))],round:[Kt,[Kt],(r,[n])=>{const i=n.evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[Kt,[Kt],(r,[n])=>Math.floor(n.evaluate(r))],ceil:[Kt,[Kt],(r,[n])=>Math.ceil(n.evaluate(r))],"filter-==":[jn,[qn,Wn],(r,[n,i])=>r.properties()[n.value]===i.value],"filter-id-==":[jn,[Wn],(r,[n])=>r.id()===n.value],"filter-type-==":[jn,[qn],(r,[n])=>r.geometryType()===n.value],"filter-<":[jn,[qn,Wn],(r,[n,i])=>{const c=r.properties()[n.value],d=i.value;return typeof c==typeof d&&c<d}],"filter-id-<":[jn,[Wn],(r,[n])=>{const i=r.id(),c=n.value;return typeof i==typeof c&&i<c}],"filter->":[jn,[qn,Wn],(r,[n,i])=>{const c=r.properties()[n.value],d=i.value;return typeof c==typeof d&&c>d}],"filter-id->":[jn,[Wn],(r,[n])=>{const i=r.id(),c=n.value;return typeof i==typeof c&&i>c}],"filter-<=":[jn,[qn,Wn],(r,[n,i])=>{const c=r.properties()[n.value],d=i.value;return typeof c==typeof d&&c<=d}],"filter-id-<=":[jn,[Wn],(r,[n])=>{const i=r.id(),c=n.value;return typeof i==typeof c&&i<=c}],"filter->=":[jn,[qn,Wn],(r,[n,i])=>{const c=r.properties()[n.value],d=i.value;return typeof c==typeof d&&c>=d}],"filter-id->=":[jn,[Wn],(r,[n])=>{const i=r.id(),c=n.value;return typeof i==typeof c&&i>=c}],"filter-has":[jn,[Wn],(r,[n])=>n.value in r.properties()],"filter-has-id":[jn,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[jn,[lo(qn)],(r,[n])=>n.value.indexOf(r.geometryType())>=0],"filter-id-in":[jn,[lo(Wn)],(r,[n])=>n.value.indexOf(r.id())>=0],"filter-in-small":[jn,[qn,lo(Wn)],(r,[n,i])=>i.value.indexOf(r.properties()[n.value])>=0],"filter-in-large":[jn,[qn,lo(Wn)],(r,[n,i])=>function(c,d,m,y){for(;m<=y;){const x=m+y>>1;if(d[x]===c)return!0;d[x]>c?y=x-1:m=x+1}return!1}(r.properties()[n.value],i.value,0,i.value.length-1)],all:{type:jn,overloads:[[[jn,jn],(r,[n,i])=>n.evaluate(r)&&i.evaluate(r)],[uo(jn),(r,n)=>{for(const i of n)if(!i.evaluate(r))return!1;return!0}]]},any:{type:jn,overloads:[[[jn,jn],(r,[n,i])=>n.evaluate(r)||i.evaluate(r)],[uo(jn),(r,n)=>{for(const i of n)if(i.evaluate(r))return!0;return!1}]]},"!":[jn,[jn],(r,[n])=>!n.evaluate(r)],"is-supported-script":[jn,[qn],(r,[n])=>{const i=r.globals&&r.globals.isSupportedScript;return!i||i(n.evaluate(r))}],upcase:[qn,[qn],(r,[n])=>n.evaluate(r).toUpperCase()],downcase:[qn,[qn],(r,[n])=>n.evaluate(r).toLowerCase()],concat:[qn,uo(Wn),(r,n)=>n.map(i=>mc(i.evaluate(r))).join("")],"resolved-locale":[qn,[to],(r,[n])=>n.evaluate(r).resolvedLocale()]});var Tc=cg;function dg(r){return{result:"success",value:r}}function Ma(r){return{result:"error",value:r}}function ml(r){return r["property-type"]==="data-driven"}function ju(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Wu(r){return!!r.expression&&r.expression.interpolated}function Yn(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Cc(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function hg(r){return r}function Gu(r,n){const i=n.type==="color",c=r.stops&&typeof r.stops[0][0]=="object",d=c||!(c||r.property!==void 0),m=r.type||(Wu(n)?"exponential":"interval");if(i&&((r=ws({},r)).stops&&(r.stops=r.stops.map(T=>[T[0],qr.parse(T[1])])),r.default=qr.parse(r.default?r.default:n.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!rp[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let y,x,S;if(m==="exponential")y=Ms;else if(m==="interval")y=Hu;else if(m==="categorical"){y=pg,x=Object.create(null);for(const T of r.stops)x[T[0]]=T[1];S=typeof r.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);y=fg}if(c){const T={},P=[];for(let F=0;F<r.stops.length;F++){const V=r.stops[F],X=V[0].zoom;T[X]===void 0&&(T[X]={zoom:X,type:r.type,property:r.property,default:r.default,stops:[]},P.push(X)),T[X].stops.push([V[0].value,V[1]])}const A=[];for(const F of P)A.push([T[F].zoom,Gu(T[F],n)]);const z={name:"linear"};return{kind:"composite",interpolationType:z,interpolationFactor:Ko.interpolationFactor.bind(void 0,z),zoomStops:A.map(F=>F[0]),evaluate:({zoom:F},V)=>Ms({stops:A,base:r.base},n,F).evaluate(F,V)}}if(d){const T=m==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:Ko.interpolationFactor.bind(void 0,T),zoomStops:r.stops.map(P=>P[0]),evaluate:({zoom:P})=>y(r,n,P,x,S)}}return{kind:"source",evaluate(T,P){const A=P&&P.properties?P.properties[r.property]:void 0;return A===void 0?gl(r.default,n.default):y(r,n,A,x,S)}}}function gl(r,n,i){return r!==void 0?r:n!==void 0?n:i!==void 0?i:void 0}function pg(r,n,i,c,d){return gl(typeof i===d?c[i]:void 0,r.default,n.default)}function Hu(r,n,i){if(Yn(i)!=="number")return gl(r.default,n.default);const c=r.stops.length;if(c===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[c-1][0])return r.stops[c-1][1];const d=Ru(r.stops.map(m=>m[0]),i);return r.stops[d][1]}function Ms(r,n,i){const c=r.base!==void 0?r.base:1;if(Yn(i)!=="number")return gl(r.default,n.default);const d=r.stops.length;if(d===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[d-1][0])return r.stops[d-1][1];const m=Ru(r.stops.map(P=>P[0]),i),y=function(P,A,z,F){const V=F-z,X=P-z;return V===0?0:A===1?X/V:(Math.pow(A,X)-1)/(Math.pow(A,V)-1)}(i,c,r.stops[m][0],r.stops[m+1][0]),x=r.stops[m][1],S=r.stops[m+1][1];let T=vc[n.type]||hg;if(r.colorSpace&&r.colorSpace!=="rgb"){const P=rp[r.colorSpace];T=(A,z)=>P.reverse(P.interpolate(P.forward(A),P.forward(z),y))}return typeof x.evaluate=="function"?{evaluate(...P){const A=x.evaluate.apply(void 0,P),z=S.evaluate.apply(void 0,P);if(A!==void 0&&z!==void 0)return T(A,z,y)}}:T(x,S,y)}function fg(r,n,i){return n.type==="color"?i=qr.parse(i):n.type==="formatted"?i=Vi.fromString(i.toString()):n.type==="resolvedImage"?i=co.fromString(i.toString()):Yn(i)===n.type||n.type==="enum"&&n.values[i]||(i=void 0),gl(i,r.default,n.default)}class qu{constructor(n,i){this.expression=n,this._warningHistory={},this._evaluator=new jh,this._defaultValue=i?function(c){return c.type==="color"&&(Cc(c.default)||Array.isArray(c.default))?new qr(0,0,0,0):c.type==="color"?qr.parse(c.default)||null:c.default===void 0?null:c.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null}evaluateWithoutErrorHandling(n,i,c,d,m,y,x,S){return this._evaluator.globals=n,this._evaluator.feature=i,this._evaluator.featureState=c,this._evaluator.canonical=d||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(n,i,c,d,m,y,x,S){this._evaluator.globals=n,this._evaluator.feature=i||null,this._evaluator.featureState=c||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new bi(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function yl(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Tc}function _l(r,n){const i=new Xh(Tc,[],n?function(d){const m={color:eo,string:qn,number:Kt,enum:qn,boolean:jn,formatted:cc,resolvedImage:Ta};return d.type==="array"?lo(m[d.value]||Wn,d.length):m[d.type]}(n):void 0),c=i.parse(r,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?dg(new qu(c,n)):Ma(i.errors)}class up{constructor(n,i){this.kind=n,this._styleExpression=i,this.isStateDependent=n!=="constant"&&!ks(i.expression)}evaluateWithoutErrorHandling(n,i,c,d,m,y){return this._styleExpression.evaluateWithoutErrorHandling(n,i,c,d,m,y)}evaluate(n,i,c,d,m,y){return this._styleExpression.evaluate(n,i,c,d,m,y)}}class Ec{constructor(n,i,c,d){this.kind=n,this.zoomStops=c,this._styleExpression=i,this.isStateDependent=n!=="camera"&&!ks(i.expression),this.interpolationType=d}evaluateWithoutErrorHandling(n,i,c,d,m,y){return this._styleExpression.evaluateWithoutErrorHandling(n,i,c,d,m,y)}evaluate(n,i,c,d,m,y){return this._styleExpression.evaluate(n,i,c,d,m,y)}interpolationFactor(n,i,c){return this.interpolationType?Ko.interpolationFactor(this.interpolationType,n,i,c):0}}function kc(r,n){if((r=_l(r,n)).result==="error")return r;const i=r.value.expression,c=dl(i);if(!c&&!ml(n))return Ma([new Xo("","data expressions not supported")]);const d=ka(i,["zoom","pitch","distance-from-center"]);if(!d&&!ju(n))return Ma([new Xo("","zoom expressions not supported")]);const m=Xu(i);return m||d?m instanceof Xo?Ma([m]):m instanceof Ko&&!Wu(n)?Ma([new Xo("",'"interpolate" expressions cannot be used with this property')]):dg(m?new Ec(c?"camera":"composite",r.value,m.labels,m instanceof Ko?m.interpolation:void 0):new up(c?"constant":"source",r.value)):Ma([new Xo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Zu{constructor(n,i){this._parameters=n,this._specification=i,ws(this,Gu(this._parameters,this._specification))}static deserialize(n){return new Zu(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Xu(r){let n=null;if(r instanceof rg)n=Xu(r.result);else if(r instanceof op){for(const i of r.args)if(n=Xu(i),n)break}else(r instanceof Kh||r instanceof Ko)&&r.input instanceof Cs&&r.input.name==="zoom"&&(n=r);return n instanceof Xo||r.eachChild(i=>{const c=Xu(i);c instanceof Xo?n=c:!n&&c?n=new Xo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&c&&n!==c&&(n=new Xo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class Qt{constructor(n,i,c,d){this.message=(n?`${n}: `:"")+c,d&&(this.identifier=d),i!=null&&i.__line__&&(this.line=i.__line__)}}function Io(r){const n=r.key,i=r.value,c=r.valueSpec||{},d=r.objectElementValidators||{},m=r.style,y=r.styleSpec;let x=[];const S=Yn(i);if(S!=="object")return[new Qt(n,i,`object expected, ${S} found`)];for(const T in i){const P=T.split(".")[0];let A;d[P]?A=d[P]:c[P]?A=Mi:d["*"]?A=d["*"]:c["*"]&&(A=Mi),A?x=x.concat(A({key:(n&&`${n}.`)+T,value:i[T],valueSpec:c[P]||c["*"],style:m,styleSpec:y,object:i,objectKey:T},i)):x.push(new Qt(n,i[T],`unknown property "${T}"`))}for(const T in c)d[T]||c[T].required&&c[T].default===void 0&&i[T]===void 0&&x.push(new Qt(n,i,`missing required property "${T}"`));return x}function mg(r){const n=r.value,i=r.valueSpec,c=r.style,d=r.styleSpec,m=r.key,y=r.arrayElementValidator||Mi;if(Yn(n)!=="array")return[new Qt(m,n,`array expected, ${Yn(n)} found`)];if(i.length&&n.length!==i.length)return[new Qt(m,n,`array length ${i.length} expected, length ${n.length} found`)];if(i["min-length"]&&n.length<i["min-length"])return[new Qt(m,n,`array length at least ${i["min-length"]} expected, length ${n.length} found`)];let x={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum,function:void 0};d.$version<7&&(x.function=i.function),Yn(i.value)==="object"&&(x=i.value);let S=[];for(let T=0;T<n.length;T++)S=S.concat(y({array:n,arrayIndex:T,value:n[T],valueSpec:x,style:c,styleSpec:d,key:`${m}[${T}]`}));return S}function Pc(r){const n=r.key,i=r.value,c=r.valueSpec;let d=Yn(i);if(d==="number"&&i!=i&&(d="NaN"),d!=="number")return[new Qt(n,i,`number expected, ${d} found`)];if("minimum"in c){let m=c.minimum;if(Yn(c.minimum)==="array"&&(m=c.minimum[r.arrayIndex]),i<m)return[new Qt(n,i,`${i} is less than the minimum value ${m}`)]}if("maximum"in c){let m=c.maximum;if(Yn(c.maximum)==="array"&&(m=c.maximum[r.arrayIndex]),i>m)return[new Qt(n,i,`${i} is greater than the maximum value ${m}`)]}return[]}function Mc(r){const n=r.valueSpec,i=Kr(r.value.type);let c,d,m,y={};const x=i!=="categorical"&&r.value.property===void 0,S=!x,T=Yn(r.value.stops)==="array"&&Yn(r.value.stops[0])==="array"&&Yn(r.value.stops[0][0])==="object",P=Io({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(F){if(i==="identity")return[new Qt(F.key,F.value,'identity function may not have a "stops" property')];let V=[];const X=F.value;return V=V.concat(mg({key:F.key,value:X,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:A})),Yn(X)==="array"&&X.length===0&&V.push(new Qt(F.key,X,"array must have at least one stop")),V},default:function(F){return Mi({key:F.key,value:F.value,valueSpec:n,style:F.style,styleSpec:F.styleSpec})}}});return i==="identity"&&x&&P.push(new Qt(r.key,r.value,'missing required property "property"')),i==="identity"||r.value.stops||P.push(new Qt(r.key,r.value,'missing required property "stops"')),i==="exponential"&&r.valueSpec.expression&&!Wu(r.valueSpec)&&P.push(new Qt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(S&&!ml(r.valueSpec)?P.push(new Qt(r.key,r.value,"property functions not supported")):x&&!ju(r.valueSpec)&&P.push(new Qt(r.key,r.value,"zoom functions not supported"))),i!=="categorical"&&!T||r.value.property!==void 0||P.push(new Qt(r.key,r.value,'"property" property is required')),P;function A(F){let V=[];const X=F.value,ne=F.key;if(Yn(X)!=="array")return[new Qt(ne,X,`array expected, ${Yn(X)} found`)];if(X.length!==2)return[new Qt(ne,X,`array length 2 expected, length ${X.length} found`)];if(T){if(Yn(X[0])!=="object")return[new Qt(ne,X,`object expected, ${Yn(X[0])} found`)];if(X[0].zoom===void 0)return[new Qt(ne,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Qt(ne,X,"object stop key must have value")];const fe=Kr(X[0].zoom);if(typeof fe!="number")return[new Qt(ne,X[0].zoom,"stop zoom values must be numbers")];if(m&&m>fe)return[new Qt(ne,X[0].zoom,"stop zoom values must appear in ascending order")];fe!==m&&(m=fe,d=void 0,y={}),V=V.concat(Io({key:`${ne}[0]`,value:X[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:Pc,value:z}}))}else V=V.concat(z({key:`${ne}[0]`,value:X[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},X));return yl(fi(X[1]))?V.concat([new Qt(`${ne}[1]`,X[1],"expressions are not allowed in function stops.")]):V.concat(Mi({key:`${ne}[1]`,value:X[1],valueSpec:n,style:F.style,styleSpec:F.styleSpec}))}function z(F,V){const X=Yn(F.value),ne=Kr(F.value),fe=F.value!==null?F.value:V;if(c){if(X!==c)return[new Qt(F.key,fe,`${X} stop domain type must match previous stop domain type ${c}`)]}else c=X;if(X!=="number"&&X!=="string"&&X!=="boolean"&&typeof ne!="number"&&typeof ne!="string"&&typeof ne!="boolean")return[new Qt(F.key,fe,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&i!=="categorical"){let Ee=`number expected, ${X} found`;return ml(n)&&i===void 0&&(Ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qt(F.key,fe,Ee)]}return i!=="categorical"||X!=="number"||typeof ne=="number"&&isFinite(ne)&&Math.floor(ne)===ne?i!=="categorical"&&X==="number"&&typeof ne=="number"&&typeof d=="number"&&d!==void 0&&ne<d?[new Qt(F.key,fe,"stop domain values must appear in ascending order")]:(d=ne,i==="categorical"&&ne in y?[new Qt(F.key,fe,"stop domain values must be unique")]:(y[ne]=!0,[])):[new Qt(F.key,fe,`integer expected, found ${String(ne)}`)]}}function mi(r){const n=(r.expressionContext==="property"?kc:_l)(fi(r.value),r.valueSpec);if(n.result==="error")return n.value.map(c=>new Qt(`${r.key}${c.key}`,r.value,c.message));const i=n.value.expression||n.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!i.outputDefined())return[new Qt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!ks(i))return[new Qt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter")return Ic(i,r);if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!ka(i,["zoom","feature-state"]))return[new Qt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!dl(i))return[new Qt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ic(r,n){const i=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const d of n.valueSpec.expression.parameters)i.delete(d);if(i.size===0)return[];const c=[];return r instanceof Cs&&i.has(r.name)?[new Qt(n.key,n.value,`["${r.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(r.eachChild(d=>{c.push(...Ic(d,n))}),c)}function Yu(r){const n=r.key,i=r.value,c=r.valueSpec,d=[];return Array.isArray(c.values)?c.values.indexOf(Kr(i))===-1&&d.push(new Qt(n,i,`expected one of [${c.values.join(", ")}], ${JSON.stringify(i)} found`)):Object.keys(c.values).indexOf(Kr(i))===-1&&d.push(new Qt(n,i,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(i)} found`)),d}function dp(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const n of r.slice(1))if(!dp(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function Ku(r,n="fill"){if(r==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};dp(r)||(r=xl(r));const i=r;let c=!0;try{c=function(T){if(!vl(T))return T;let P=fi(T);return Ju(P),P=gg(P),P}(i)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(i,null,2)}
        `)}const d=ct[`filter_${n}`],m=_l(c,d);let y=null;if(m.result==="error")throw new Error(m.value.map(T=>`${T.key}: ${T.message}`).join(", "));y=(T,P,A)=>m.value.evaluate(T,P,{},A);let x=null,S=null;if(c!==i){const T=_l(i,d);if(T.result==="error")throw new Error(T.value.map(P=>`${P.key}: ${P.message}`).join(", "));x=(P,A,z,F,V)=>T.value.evaluate(P,A,{},z,void 0,void 0,F,V),S=!dl(T.value.expression)}return{filter:y,dynamicFilter:x||void 0,needGeometry:yg(c),needFeature:!!S}}function gg(r){if(!Array.isArray(r))return r;const n=function(i){if(hp.has(i[0])){for(let c=1;c<i.length;c++)if(vl(i[c]))return!0}return i}(r);return n===!0?n:n.map(i=>gg(i))}function Ju(r){let n=!1;const i=[];if(r[0]==="case"){for(let c=1;c<r.length-1;c+=2)n=n||vl(r[c]),i.push(r[c+1]);i.push(r[r.length-1])}else if(r[0]==="match"){n=n||vl(r[1]);for(let c=2;c<r.length-1;c+=2)i.push(r[c+1]);i.push(r[r.length-1])}else if(r[0]==="step"){n=n||vl(r[1]);for(let c=1;c<r.length-1;c+=2)i.push(r[c+1])}n&&(r.length=0,r.push("any",...i));for(let c=1;c<r.length;c++)Ju(r[c])}function vl(r){if(!Array.isArray(r))return!1;if((n=r[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let i=1;i<r.length;i++)if(vl(r[i]))return!0;return!1}const hp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Tv(r,n){return r<n?-1:r>n?1:0}function yg(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let n=1;n<r.length;n++)if(yg(r[n]))return!0;return!1}function xl(r){if(!r)return!0;const n=r[0];return r.length<=1?n!=="any":n==="=="?pp(r[1],r[2],"=="):n==="!="?Qu(pp(r[1],r[2],"==")):n==="<"||n===">"||n==="<="||n===">="?pp(r[1],r[2],n):n==="any"?(i=r.slice(1),["any"].concat(i.map(xl))):n==="all"?["all"].concat(r.slice(1).map(xl)):n==="none"?["all"].concat(r.slice(1).map(xl).map(Qu)):n==="in"?fp(r[1],r.slice(2)):n==="!in"?Qu(fp(r[1],r.slice(2))):n==="has"?mp(r[1]):n==="!has"?Qu(mp(r[1])):n!=="within"||r;var i}function pp(r,n,i){switch(r){case"$type":return[`filter-type-${i}`,n];case"$id":return[`filter-id-${i}`,n];default:return[`filter-${i}`,r,n]}}function fp(r,n){if(n.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(i=>typeof i!=typeof n[0])?["filter-in-large",r,["literal",n.sort(Tv)]]:["filter-in-small",r,["literal",n]]}}function mp(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Qu(r){return["!",r]}function Ac(r){return dp(fi(r.value))?mi(ws({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${r.layerType||"fill"}`]})):Dc(r)}function Dc(r){const n=r.value,i=r.key;if(Yn(n)!=="array")return[new Qt(i,n,`array expected, ${Yn(n)} found`)];const c=r.styleSpec;let d,m=[];if(n.length<1)return[new Qt(i,n,"filter array must have at least 1 element")];switch(m=m.concat(Yu({key:`${i}[0]`,value:n[0],valueSpec:c.filter_operator,style:r.style,styleSpec:r.styleSpec})),Kr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Kr(n[1])==="$type"&&m.push(new Qt(i,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&m.push(new Qt(i,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(d=Yn(n[1]),d!=="string"&&m.push(new Qt(`${i}[1]`,n[1],`string expected, ${d} found`)));for(let y=2;y<n.length;y++)d=Yn(n[y]),Kr(n[1])==="$type"?m=m.concat(Yu({key:`${i}[${y}]`,value:n[y],valueSpec:c.geometry_type,style:r.style,styleSpec:r.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&m.push(new Qt(`${i}[${y}]`,n[y],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let y=1;y<n.length;y++)m=m.concat(Dc({key:`${i}[${y}]`,value:n[y],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":d=Yn(n[1]),n.length!==2?m.push(new Qt(i,n,`filter array for "${n[0]}" operator must have 2 elements`)):d!=="string"&&m.push(new Qt(`${i}[1]`,n[1],`string expected, ${d} found`));break;case"within":d=Yn(n[1]),n.length!==2?m.push(new Qt(i,n,`filter array for "${n[0]}" operator must have 2 elements`)):d!=="object"&&m.push(new Qt(`${i}[1]`,n[1],`object expected, ${d} found`))}return m}function gp(r,n){const i=r.key,c=r.style,d=r.styleSpec,m=r.value,y=r.objectKey,x=d[`${n}_${r.layerType}`];if(!x)return[];const S=y.match(/^(.*)-transition$/);if(n==="paint"&&S&&x[S[1]]&&x[S[1]].transition)return Mi({key:i,value:m,valueSpec:d.transition,style:c,styleSpec:d});const T=r.valueSpec||x[y];if(!T)return[new Qt(i,m,`unknown property "${y}"`)];let P;if(Yn(m)==="string"&&ml(T)&&!T.tokens&&(P=/^{([^}]+)}$/.exec(m))){const z=`\`{ "type": "identity", "property": ${P?JSON.stringify(P[1]):'"_"'} }\``;return[new Qt(i,m,`"${y}" does not support interpolation syntax
Use an identity property function instead: ${z}.`)]}const A=[];return r.layerType==="symbol"&&(y==="text-field"&&c&&!c.glyphs&&A.push(new Qt(i,m,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&Cc(fi(m))&&Kr(m.type)==="identity"&&A.push(new Qt(i,m,'"text-font" does not support identity functions'))),A.concat(Mi({key:r.key,value:m,valueSpec:T,style:c,styleSpec:d,expressionContext:"property",propertyType:n,propertyKey:y}))}function _g(r){return gp(r,"paint")}function yp(r){return gp(r,"layout")}function vg(r){let n=[];const i=r.value,c=r.key,d=r.style,m=r.styleSpec;i.type||i.ref||n.push(new Qt(c,i,'either "type" or "ref" is required'));let y=Kr(i.type);const x=Kr(i.ref);if(i.id){const S=Kr(i.id);for(let T=0;T<r.arrayIndex;T++){const P=d.layers[T];Kr(P.id)===S&&n.push(new Qt(c,i.id,`duplicate layer id "${i.id}", previously used at line ${P.id.__line__}`))}}if("ref"in i){let S;["type","source","source-layer","filter","layout"].forEach(T=>{T in i&&n.push(new Qt(c,i[T],`"${T}" is prohibited for ref layers`))}),d.layers.forEach(T=>{Kr(T.id)===x&&(S=T)}),S?S.ref?n.push(new Qt(c,i.ref,"ref cannot reference another ref layer")):y=Kr(S.type):typeof x=="string"&&n.push(new Qt(c,i.ref,`ref layer "${x}" not found`))}else if(y!=="background"&&y!=="sky")if(i.source){const S=d.sources&&d.sources[i.source],T=S&&Kr(S.type);S?T==="vector"&&y==="raster"?n.push(new Qt(c,i.source,`layer "${i.id}" requires a raster source`)):T==="raster"&&y!=="raster"?n.push(new Qt(c,i.source,`layer "${i.id}" requires a vector source`)):T!=="vector"||i["source-layer"]?T==="raster-dem"&&y!=="hillshade"?n.push(new Qt(c,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!i.paint||!i.paint["line-gradient"]&&!i.paint["line-trim-offset"]||T==="geojson"&&S.lineMetrics||n.push(new Qt(c,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Qt(c,i,`layer "${i.id}" must specify a "source-layer"`)):n.push(new Qt(c,i.source,`source "${i.source}" not found`))}else n.push(new Qt(c,i,'missing required property "source"'));return n=n.concat(Io({key:c,value:i,valueSpec:m.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Mi({key:`${c}.type`,value:i.type,valueSpec:m.layer.type,style:r.style,styleSpec:r.styleSpec,object:i,objectKey:"type"}),filter:S=>Ac(ws({layerType:y},S)),layout:S=>Io({layer:i,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":T=>yp(ws({layerType:y},T))}}),paint:S=>Io({layer:i,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":T=>_g(ws({layerType:y},T))}})}})),n}function Ys(r){const n=r.value,i=r.key,c=Yn(n);return c!=="string"?[new Qt(i,n,`string expected, ${c} found`)]:[]}const xg={promoteId:function({key:r,value:n}){if(Yn(n)==="string")return Ys({key:r,value:n});{const i=[];for(const c in n)i.push(...Ys({key:`${r}.${c}`,value:n[c]}));return i}}};function bg(r){const n=r.value,i=r.key,c=r.styleSpec,d=r.style;if(!n.type)return[new Qt(i,n,'"type" is required')];const m=Kr(n.type);let y;switch(m){case"vector":case"raster":case"raster-dem":return y=Io({key:i,value:n,valueSpec:c[`source_${m.replace("-","_")}`],style:r.style,styleSpec:c,objectElementValidators:xg}),y;case"geojson":if(y=Io({key:i,value:n,valueSpec:c.source_geojson,style:d,styleSpec:c,objectElementValidators:xg}),n.cluster)for(const x in n.clusterProperties){const[S,T]=n.clusterProperties[x],P=typeof S=="string"?[S,["accumulated"],["get",x]]:S;y.push(...mi({key:`${i}.${x}.map`,value:T,expressionContext:"cluster-map"})),y.push(...mi({key:`${i}.${x}.reduce`,value:P,expressionContext:"cluster-reduce"}))}return y;case"video":return Io({key:i,value:n,valueSpec:c.source_video,style:d,styleSpec:c});case"image":return Io({key:i,value:n,valueSpec:c.source_image,style:d,styleSpec:c});case"canvas":return[new Qt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Yu({key:`${i}.type`,value:n.type,valueSpec:{values:Cv(c)},style:d,styleSpec:c})}}function Cv(r){return r.source.reduce((n,i)=>{const c=r[i];return c.type.type==="enum"&&(n=n.concat(Object.keys(c.type.values))),n},[])}function wg(r){const n=r.value,i=r.styleSpec,c=i.light,d=r.style;let m=[];const y=Yn(n);if(n===void 0)return m;if(y!=="object")return m=m.concat([new Qt("light",n,`object expected, ${y} found`)]),m;for(const x in n){const S=x.match(/^(.*)-transition$/);m=m.concat(S&&c[S[1]]&&c[S[1]].transition?Mi({key:x,value:n[x],valueSpec:i.transition,style:d,styleSpec:i}):c[x]?Mi({key:x,value:n[x],valueSpec:c[x],style:d,styleSpec:i}):[new Qt(x,n[x],`unknown property "${x}"`)])}return m}function _p(r){const n=r.value,i=r.key,c=r.style,d=r.styleSpec,m=d.terrain;let y=[];const x=Yn(n);if(n===void 0)return y;if(x!=="object")return y=y.concat([new Qt("terrain",n,`object expected, ${x} found`)]),y;for(const S in n){const T=S.match(/^(.*)-transition$/);y=y.concat(T&&m[T[1]]&&m[T[1]].transition?Mi({key:S,value:n[S],valueSpec:d.transition,style:c,styleSpec:d}):m[S]?Mi({key:S,value:n[S],valueSpec:m[S],style:c,styleSpec:d}):[new Qt(S,n[S],`unknown property "${S}"`)])}if(n.source){const S=c.sources&&c.sources[n.source],T=S&&Kr(S.type);S?T!=="raster-dem"&&y.push(new Qt(i,n.source,`terrain cannot be used with a source of type ${String(T)}, it only be used with a "raster-dem" source type`)):y.push(new Qt(i,n.source,`source "${n.source}" not found`))}else y.push(new Qt(i,n,'terrain is missing required property "source"'));return y}function Sg(r){const n=r.value,i=r.style,c=r.styleSpec,d=c.fog;let m=[];const y=Yn(n);if(n===void 0)return m;if(y!=="object")return m=m.concat([new Qt("fog",n,`object expected, ${y} found`)]),m;for(const x in n){const S=x.match(/^(.*)-transition$/);m=m.concat(S&&d[S[1]]&&d[S[1]].transition?Mi({key:x,value:n[x],valueSpec:c.transition,style:i,styleSpec:c}):d[x]?Mi({key:x,value:n[x],valueSpec:d[x],style:i,styleSpec:c}):[new Qt(x,n[x],`unknown property "${x}"`)])}return m}const Tg={"*":()=>[],array:mg,boolean:function(r){const n=r.value,i=r.key,c=Yn(n);return c!=="boolean"?[new Qt(i,n,`boolean expected, ${c} found`)]:[]},number:Pc,color:function(r){const n=r.key,i=r.value,c=Yn(i);return c!=="string"?[new Qt(n,i,`color expected, ${c} found`)]:Oh(i)===null?[new Qt(n,i,`color expected, "${i}" found`)]:[]},enum:Yu,filter:Ac,function:Mc,layer:vg,object:Io,source:bg,light:wg,terrain:_p,fog:Sg,string:Ys,formatted:function(r){return Ys(r).length===0?[]:mi(r)},resolvedImage:function(r){return Ys(r).length===0?[]:mi(r)},projection:function(r){const n=r.value,i=r.styleSpec,c=i.projection,d=r.style;let m=[];const y=Yn(n);if(y==="object")for(const x in n)m=m.concat(Mi({key:x,value:n[x],valueSpec:c[x],style:d,styleSpec:i}));else y!=="string"&&(m=m.concat([new Qt("projection",n,`object or string expected, ${y} found`)]));return m}};function Mi(r){const n=r.value,i=r.valueSpec,c=r.styleSpec;return i.expression&&Cc(Kr(n))?Mc(r):i.expression&&yl(fi(n))?mi(r):i.type&&Tg[i.type]?Tg[i.type](r):Io(ws({},r,{valueSpec:i.type?c[i.type]:i}))}function Ev(r){const n=r.value,i=r.key,c=Ys(r);return c.length||(n.indexOf("{fontstack}")===-1&&c.push(new Qt(i,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&c.push(new Qt(i,n,'"glyphs" url must include a "{range}" token'))),c}function Cg(r,n=ct){return ho(Mi({key:"",value:r,valueSpec:n.$root,styleSpec:n,style:r,objectElementValidators:{glyphs:Ev,"*":()=>[]}}))}const kv=r=>ho(_g(r)),Pv=r=>ho(yp(r));function ho(r){return r.slice().sort((n,i)=>n.line&&i.line?n.line-i.line:0)}function Eg(r,n){let i=!1;if(n&&n.length)for(const c of n)r.fire(new bs(new Error(c.message))),i=!0;return i}var Mv=Jo,Ao=3;function Jo(r,n,i){var c=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var d=new Int32Array(this.arrayBuffer);r=d[0],this.d=(n=d[1])+2*(i=d[2]);for(var m=0;m<this.d*this.d;m++){var y=d[Ao+m],x=d[Ao+m+1];c.push(y===x?null:d.subarray(y,x))}var S=d[Ao+c.length+1];this.keys=d.subarray(d[Ao+c.length],S),this.bboxes=d.subarray(S),this.insert=this._insertReadonly}else{this.d=n+2*i;for(var T=0;T<this.d*this.d;T++)c.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=r,this.padding=i,this.scale=n/r,this.uid=0;var P=i/n*r;this.min=-P,this.max=r+P}Jo.prototype.insert=function(r,n,i,c,d){this._forEachCell(n,i,c,d,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(c),this.bboxes.push(d)},Jo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Jo.prototype._insertCell=function(r,n,i,c,d,m){this.cells[d].push(m)},Jo.prototype.query=function(r,n,i,c,d){var m=this.min,y=this.max;if(r<=m&&n<=m&&y<=i&&y<=c&&!d)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(r,n,i,c,this._queryCell,x,{},d),x},Jo.prototype._queryCell=function(r,n,i,c,d,m,y,x){var S=this.cells[d];if(S!==null)for(var T=this.keys,P=this.bboxes,A=0;A<S.length;A++){var z=S[A];if(y[z]===void 0){var F=4*z;(x?x(P[F+0],P[F+1],P[F+2],P[F+3]):r<=P[F+2]&&n<=P[F+3]&&i>=P[F+0]&&c>=P[F+1])?(y[z]=!0,m.push(T[z])):y[z]=!1}}},Jo.prototype._forEachCell=function(r,n,i,c,d,m,y,x){for(var S=this._convertToCellCoord(r),T=this._convertToCellCoord(n),P=this._convertToCellCoord(i),A=this._convertToCellCoord(c),z=S;z<=P;z++)for(var F=T;F<=A;F++){var V=this.d*F+z;if((!x||x(this._convertFromCellCoord(z),this._convertFromCellCoord(F),this._convertFromCellCoord(z+1),this._convertFromCellCoord(F+1)))&&d.call(this,r,n,i,c,V,m,y,x))return}},Jo.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Jo.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Jo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,n=Ao+this.cells.length+1+1,i=0,c=0;c<this.cells.length;c++)i+=this.cells[c].length;var d=new Int32Array(n+i+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;for(var m=n,y=0;y<r.length;y++){var x=r[y];d[Ao+y]=m,d.set(x,m),m+=x.length}return d[Ao+r.length]=m,d.set(this.keys,m),d[Ao+r.length+1]=m+=this.keys.length,d.set(this.bboxes,m),m+=this.bboxes.length,d.buffer};var Ia=G(Mv);const ed={};function en(r,n,i={}){Object.defineProperty(r,"_classRegistryKey",{value:n,writeable:!1}),ed[n]={klass:r,omit:i.omit||[]}}en(Object,"Object"),Ia.serialize=function(r,n){const i=r.toArrayBuffer();return n&&n.push(i),{buffer:i}},Ia.deserialize=function(r){return new Ia(r.buffer)},Object.defineProperty(Ia,"name",{value:"Grid"}),en(Ia,"Grid"),en(qr,"Color"),en(Error,"Error"),en(bn,"AJAXError"),en(co,"ResolvedImage"),en(Zu,"StylePropertyFunction"),en(qu,"StyleExpression",{omit:["_evaluator"]}),en(Ec,"ZoomDependentExpression"),en(up,"ZoomConstantExpression"),en(Cs,"CompoundExpression",{omit:["_evaluate"]});for(const r in Tc)ed[Tc[r]._classRegistryKey]||en(Tc[r],`Expression${r}`);function vp(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function xp(r){return w.ImageBitmap&&r instanceof w.ImageBitmap}function bl(r,n){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(vp(r)||xp(r))return n&&n.push(r),r;if(ArrayBuffer.isView(r)){const i=r;return n&&n.push(i.buffer),i}if(r instanceof w.ImageData)return n&&n.push(r.data.buffer),r;if(Array.isArray(r)){const i=[];for(const c of r)i.push(bl(c,n));return i}if(typeof r=="object"){const i=r.constructor,c=i._classRegistryKey;if(!c)throw new Error(`can't serialize object of unregistered class ${c}`);const d=i.serialize?i.serialize(r,n):{};if(!i.serialize){for(const m in r)r.hasOwnProperty(m)&&(ed[c].omit.indexOf(m)>=0||(d[m]=bl(r[m],n)));r instanceof Error&&(d.message=r.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(d.$name=c),d}throw new Error("can't serialize object of type "+typeof r)}function Aa(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||vp(r)||xp(r)||ArrayBuffer.isView(r)||r instanceof w.ImageData)return r;if(Array.isArray(r))return r.map(Aa);if(typeof r=="object"){const n=r.$name||"Object",{klass:i}=ed[n];if(!i)throw new Error(`can't deserialize unregistered class ${n}`);if(i.deserialize)return i.deserialize(r);const c=Object.create(i.prototype);for(const d of Object.keys(r))d!=="$name"&&(c[d]=Aa(r[d]));return c}throw new Error("can't deserialize object of type "+typeof r)}const Yt={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function bp(r){for(const n of r)if(wp(n.charCodeAt(0)))return!0;return!1}function Iv(r){for(const n of r)if(!kg(n.charCodeAt(0)))return!1;return!0}function kg(r){return!(Yt.Arabic(r)||Yt["Arabic Supplement"](r)||Yt["Arabic Extended-A"](r)||Yt["Arabic Presentation Forms-A"](r)||Yt["Arabic Presentation Forms-B"](r))}function wp(r){return!(r!==746&&r!==747&&(r<4352||!(Yt["Bopomofo Extended"](r)||Yt.Bopomofo(r)||Yt["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||Yt["CJK Compatibility Ideographs"](r)||Yt["CJK Compatibility"](r)||Yt["CJK Radicals Supplement"](r)||Yt["CJK Strokes"](r)||!(!Yt["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||Yt["CJK Unified Ideographs Extension A"](r)||Yt["CJK Unified Ideographs"](r)||Yt["Enclosed CJK Letters and Months"](r)||Yt["Hangul Compatibility Jamo"](r)||Yt["Hangul Jamo Extended-A"](r)||Yt["Hangul Jamo Extended-B"](r)||Yt["Hangul Jamo"](r)||Yt["Hangul Syllables"](r)||Yt.Hiragana(r)||Yt["Ideographic Description Characters"](r)||Yt.Kanbun(r)||Yt["Kangxi Radicals"](r)||Yt["Katakana Phonetic Extensions"](r)||Yt.Katakana(r)&&r!==12540||!(!Yt["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!Yt["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||Yt["Unified Canadian Aboriginal Syllabics"](r)||Yt["Unified Canadian Aboriginal Syllabics Extended"](r)||Yt["Vertical Forms"](r)||Yt["Yijing Hexagram Symbols"](r)||Yt["Yi Syllables"](r)||Yt["Yi Radicals"](r))))}function Pg(r){return!(wp(r)||function(n){return!!(Yt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Yt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Yt["Letterlike Symbols"](n)||Yt["Number Forms"](n)||Yt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Yt["Control Pictures"](n)&&n!==9251||Yt["Optical Character Recognition"](n)||Yt["Enclosed Alphanumerics"](n)||Yt["Geometric Shapes"](n)||Yt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Yt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Yt["CJK Symbols and Punctuation"](n)||Yt.Katakana(n)||Yt["Private Use Area"](n)||Yt["CJK Compatibility Forms"](n)||Yt["Small Form Variants"](n)||Yt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(r))}function Mg(r){return r>=1424&&r<=2303||Yt["Arabic Presentation Forms-A"](r)||Yt["Arabic Presentation Forms-B"](r)}function Av(r,n){return!(!n&&Mg(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||Yt.Khmer(r))}function Dv(r){for(const n of r)if(Mg(n.charCodeAt(0)))return!0;return!1}const Sp="deferred",Tp="loading",Cp="loaded";let wl=null,f="unavailable",s=null;const u=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(f="error"),wl&&wl(r)};function g(){v.fire(new Sa("pluginStateChange",{pluginStatus:f,pluginURL:s}))}const v=new lc,b=function(){return f},E=function(){if(f!==Sp||!s)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");f=Tp,g(),s&&Ar({url:s},r=>{r?u(r):(f=Cp,g())})},k={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>f===Cp||k.applyArabicShaping!=null,isLoading:()=>f===Tp,setState(r){f=r.pluginStatus,s=r.pluginURL},isParsed:()=>k.applyArabicShaping!=null&&k.processBidirectionalText!=null&&k.processStyledBidirectionalText!=null,getPluginURL:()=>s};class I{constructor(n,i){this.zoom=n,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.transition=i.transition,this.pitch=i.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(i,c){for(const d of i)if(!Av(d.charCodeAt(0),c))return!1;return!0}(n,k.isLoaded())}}class O{constructor(n,i){this.property=n,this.value=i,this.expression=function(c,d){if(Cc(c))return new Zu(c,d);if(yl(c)){const m=kc(c,d);if(m.result==="error")throw new Error(m.value.map(y=>`${y.key}: ${y.message}`).join(", "));return m.value}{let m=c;return typeof c=="string"&&d.type==="color"&&(m=qr.parse(c)),{kind:"constant",evaluate:()=>m}}}(i===void 0?n.specification.default:i,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,i,c){return this.property.possiblyEvaluate(this,n,i,c)}}class L{constructor(n){this.property=n,this.value=new O(n,void 0)}transitioned(n,i){return new te(this.property,this.value,i,gt({},n.transition,this.transition),n.now)}untransitioned(){return new te(this.property,this.value,null,{},0)}}class q{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return St(this._values[n].value.value)}setValue(n,i){this._values.hasOwnProperty(n)||(this._values[n]=new L(this._values[n].property)),this._values[n].value=new O(this._values[n].property,i===null?void 0:St(i))}getTransition(n){return St(this._values[n].transition)}setTransition(n,i){this._values.hasOwnProperty(n)||(this._values[n]=new L(this._values[n].property)),this._values[n].transition=St(i)||void 0}serialize(){const n={};for(const i of Object.keys(this._values)){const c=this.getValue(i);c!==void 0&&(n[i]=c);const d=this.getTransition(i);d!==void 0&&(n[`${i}-transition`]=d)}return n}transitioned(n,i){const c=new se(this._properties);for(const d of Object.keys(this._values))c._values[d]=this._values[d].transitioned(n,i._values[d]);return c}untransitioned(){const n=new se(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].untransitioned();return n}}class te{constructor(n,i,c,d,m){const y=d.delay||0,x=d.duration||0;m=m||0,this.property=n,this.value=i,this.begin=m+y,this.end=this.begin+x,n.specification.transition&&(d.delay||d.duration)&&(this.prior=c)}possiblyEvaluate(n,i,c){const d=n.now||0,m=this.value.possiblyEvaluate(n,i,c),y=this.prior;if(y){if(d>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(d<this.begin)return y.possiblyEvaluate(n,i,c);{const x=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(n,i,c),m,ue(x))}}return m}}class se{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,i,c){const d=new pe(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].possiblyEvaluate(n,i,c);return d}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class ce{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return St(this._values[n].value)}setValue(n,i){this._values[n]=new O(this._values[n].property,i===null?void 0:St(i))}serialize(){const n={};for(const i of Object.keys(this._values)){const c=this.getValue(i);c!==void 0&&(n[i]=c)}return n}possiblyEvaluate(n,i,c){const d=new pe(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].possiblyEvaluate(n,i,c);return d}}class le{constructor(n,i,c){this.property=n,this.value=i,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,i,c,d){return this.property.evaluate(this.value,this.parameters,n,i,c,d)}}class pe{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Z{constructor(n){this.specification=n}possiblyEvaluate(n,i){return n.expression.evaluate(i)}interpolate(n,i,c){const d=vc[this.specification.type];return d?d(n,i,c):n}}class ie{constructor(n,i){this.specification=n,this.overrides=i}possiblyEvaluate(n,i,c,d){return new le(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(i,null,{},c,d)}:n.expression,i)}interpolate(n,i,c){if(n.value.kind!=="constant"||i.value.kind!=="constant")return n;if(n.value.value===void 0||i.value.value===void 0)return new le(this,{kind:"constant",value:void 0},n.parameters);const d=vc[this.specification.type];return d?new le(this,{kind:"constant",value:d(n.value.value,i.value.value,c)},n.parameters):n}evaluate(n,i,c,d,m,y){return n.kind==="constant"?n.value:n.evaluate(i,c,d,m,y)}}class ve{constructor(n){this.specification=n}possiblyEvaluate(n,i,c,d){return!!n.expression.evaluate(i,null,{},c,d)}interpolate(){return!1}}class xe{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const i=new I(0,{});for(const c in n){const d=n[c];d.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new O(d,void 0),y=this.defaultTransitionablePropertyValues[c]=new L(d);this.defaultTransitioningPropertyValues[c]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate(i)}}}function De(r,n){return 256*(r=Se(Math.floor(r),0,255))+Se(Math.floor(n),0,255)}en(ie,"DataDrivenProperty"),en(Z,"DataConstantProperty"),en(ve,"ColorRampProperty");const Re={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ze{constructor(n,i){this._structArray=n,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ve{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,i){return n._trim(),i&&(n.isTransferred=!0,i.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const i=Object.create(this.prototype);return i.arrayBuffer=n.arrayBuffer,i.length=n.length,i.capacity=n.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ue(r,n=1){let i=0,c=0;return{members:r.map(d=>{const m=Re[d.type].BYTES_PER_ELEMENT,y=i=Ye(i,Math.max(n,m)),x=d.components||1;return c=Math.max(c,m),i+=m*x,{name:d.name,type:d.type,components:x,offset:y}}),size:Ye(i,Math.max(c,n)),alignment:n}}function Ye(r,n){return Math.ceil(r/n)*n}class kt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i){const c=this.length;return this.resize(c+1),this.emplace(c,n,i)}emplace(n,i,c){const d=2*n;return this.int16[d+0]=i,this.int16[d+1]=c,n}}kt.prototype.bytesPerElement=4,en(kt,"StructArrayLayout2i4");class qe extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c){const d=this.length;return this.resize(d+1),this.emplace(d,n,i,c)}emplace(n,i,c,d){const m=3*n;return this.int16[m+0]=i,this.int16[m+1]=c,this.int16[m+2]=d,n}}qe.prototype.bytesPerElement=6,en(qe,"StructArrayLayout3i6");class ft extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,d)}emplace(n,i,c,d,m){const y=4*n;return this.int16[y+0]=i,this.int16[y+1]=c,this.int16[y+2]=d,this.int16[y+3]=m,n}}ft.prototype.bytesPerElement=8,en(ft,"StructArrayLayout4i8");class et extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,i,c,d,m,y,x)}emplace(n,i,c,d,m,y,x,S){const T=6*n,P=12*n,A=3*n;return this.int16[T+0]=i,this.int16[T+1]=c,this.uint8[P+4]=d,this.uint8[P+5]=m,this.uint8[P+6]=y,this.uint8[P+7]=x,this.float32[A+2]=S,n}}et.prototype.bytesPerElement=12,en(et,"StructArrayLayout2i4ub1f12");class Et extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,d)}emplace(n,i,c,d,m){const y=4*n;return this.float32[y+0]=i,this.float32[y+1]=c,this.float32[y+2]=d,this.float32[y+3]=m,n}}Et.prototype.bytesPerElement=16,en(Et,"StructArrayLayout4f16");class Xe extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,i,c,d,m)}emplace(n,i,c,d,m,y){const x=6*n,S=3*n;return this.uint16[x+0]=i,this.uint16[x+1]=c,this.uint16[x+2]=d,this.uint16[x+3]=m,this.float32[S+2]=y,n}}Xe.prototype.bytesPerElement=12,en(Xe,"StructArrayLayout4ui1f12");class pt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,d)}emplace(n,i,c,d,m){const y=4*n;return this.uint16[y+0]=i,this.uint16[y+1]=c,this.uint16[y+2]=d,this.uint16[y+3]=m,n}}pt.prototype.bytesPerElement=8,en(pt,"StructArrayLayout4ui8");class It extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m,y){const x=this.length;return this.resize(x+1),this.emplace(x,n,i,c,d,m,y)}emplace(n,i,c,d,m,y,x){const S=6*n;return this.int16[S+0]=i,this.int16[S+1]=c,this.int16[S+2]=d,this.int16[S+3]=m,this.int16[S+4]=y,this.int16[S+5]=x,n}}It.prototype.bytesPerElement=12,en(It,"StructArrayLayout6i12");class wt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m,y,x,S,T,P,A,z){const F=this.length;return this.resize(F+1),this.emplace(F,n,i,c,d,m,y,x,S,T,P,A,z)}emplace(n,i,c,d,m,y,x,S,T,P,A,z,F){const V=12*n;return this.int16[V+0]=i,this.int16[V+1]=c,this.int16[V+2]=d,this.int16[V+3]=m,this.uint16[V+4]=y,this.uint16[V+5]=x,this.uint16[V+6]=S,this.uint16[V+7]=T,this.int16[V+8]=P,this.int16[V+9]=A,this.int16[V+10]=z,this.int16[V+11]=F,n}}wt.prototype.bytesPerElement=24,en(wt,"StructArrayLayout4i4ui4i24");class At extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m,y){const x=this.length;return this.resize(x+1),this.emplace(x,n,i,c,d,m,y)}emplace(n,i,c,d,m,y,x){const S=10*n,T=5*n;return this.int16[S+0]=i,this.int16[S+1]=c,this.int16[S+2]=d,this.float32[T+2]=m,this.float32[T+3]=y,this.float32[T+4]=x,n}}At.prototype.bytesPerElement=20,en(At,"StructArrayLayout3i3f20");class pn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const i=this.length;return this.resize(i+1),this.emplace(i,n)}emplace(n,i){return this.uint32[1*n+0]=i,n}}pn.prototype.bytesPerElement=4,en(pn,"StructArrayLayout1ul4");class In extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m,y,x,S,T,P,A,z,F){const V=this.length;return this.resize(V+1),this.emplace(V,n,i,c,d,m,y,x,S,T,P,A,z,F)}emplace(n,i,c,d,m,y,x,S,T,P,A,z,F,V){const X=20*n,ne=10*n;return this.int16[X+0]=i,this.int16[X+1]=c,this.int16[X+2]=d,this.int16[X+3]=m,this.int16[X+4]=y,this.float32[ne+3]=x,this.float32[ne+4]=S,this.float32[ne+5]=T,this.float32[ne+6]=P,this.int16[X+14]=A,this.uint32[ne+8]=z,this.uint16[X+18]=F,this.uint16[X+19]=V,n}}In.prototype.bytesPerElement=40,en(In,"StructArrayLayout5i4f1i1ul2ui40");class rn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m,y,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,i,c,d,m,y,x)}emplace(n,i,c,d,m,y,x,S){const T=8*n;return this.int16[T+0]=i,this.int16[T+1]=c,this.int16[T+2]=d,this.int16[T+4]=m,this.int16[T+5]=y,this.int16[T+6]=x,this.int16[T+7]=S,n}}rn.prototype.bytesPerElement=16,en(rn,"StructArrayLayout3i2i2i16");class wn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,i,c,d,m)}emplace(n,i,c,d,m,y){const x=4*n,S=8*n;return this.float32[x+0]=i,this.float32[x+1]=c,this.float32[x+2]=d,this.int16[S+6]=m,this.int16[S+7]=y,n}}wn.prototype.bytesPerElement=16,en(wn,"StructArrayLayout2f1f2i16");class Gn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,d)}emplace(n,i,c,d,m){const y=12*n,x=3*n;return this.uint8[y+0]=i,this.uint8[y+1]=c,this.float32[x+1]=d,this.float32[x+2]=m,n}}Gn.prototype.bytesPerElement=12,en(Gn,"StructArrayLayout2ub2f12");class Vn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c){const d=this.length;return this.resize(d+1),this.emplace(d,n,i,c)}emplace(n,i,c,d){const m=3*n;return this.float32[m+0]=i,this.float32[m+1]=c,this.float32[m+2]=d,n}}Vn.prototype.bytesPerElement=12,en(Vn,"StructArrayLayout3f12");class cn extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c){const d=this.length;return this.resize(d+1),this.emplace(d,n,i,c)}emplace(n,i,c,d){const m=3*n;return this.uint16[m+0]=i,this.uint16[m+1]=c,this.uint16[m+2]=d,n}}cn.prototype.bytesPerElement=6,en(cn,"StructArrayLayout3ui6");class or extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m,y,x,S,T,P,A,z,F,V,X,ne,fe,Ee,me,Te,Ie){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,n,i,c,d,m,y,x,S,T,P,A,z,F,V,X,ne,fe,Ee,me,Te,Ie)}emplace(n,i,c,d,m,y,x,S,T,P,A,z,F,V,X,ne,fe,Ee,me,Te,Ie,Pe){const Ke=30*n,Ze=15*n,ut=60*n;return this.int16[Ke+0]=i,this.int16[Ke+1]=c,this.int16[Ke+2]=d,this.float32[Ze+2]=m,this.float32[Ze+3]=y,this.uint16[Ke+8]=x,this.uint16[Ke+9]=S,this.uint32[Ze+5]=T,this.uint32[Ze+6]=P,this.uint32[Ze+7]=A,this.uint16[Ke+16]=z,this.uint16[Ke+17]=F,this.uint16[Ke+18]=V,this.float32[Ze+10]=X,this.float32[Ze+11]=ne,this.uint8[ut+48]=fe,this.uint8[ut+49]=Ee,this.uint8[ut+50]=me,this.uint32[Ze+13]=Te,this.int16[Ke+28]=Ie,this.uint8[ut+58]=Pe,n}}or.prototype.bytesPerElement=60,en(or,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class cr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m,y,x,S,T,P,A,z,F,V,X,ne,fe,Ee,me,Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,n,i,c,d,m,y,x,S,T,P,A,z,F,V,X,ne,fe,Ee,me,Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt)}emplace(n,i,c,d,m,y,x,S,T,P,A,z,F,V,X,ne,fe,Ee,me,Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt,Dt){const st=38*n,qt=19*n;return this.int16[st+0]=i,this.int16[st+1]=c,this.int16[st+2]=d,this.float32[qt+2]=m,this.float32[qt+3]=y,this.int16[st+8]=x,this.int16[st+9]=S,this.int16[st+10]=T,this.int16[st+11]=P,this.int16[st+12]=A,this.int16[st+13]=z,this.uint16[st+14]=F,this.uint16[st+15]=V,this.uint16[st+16]=X,this.uint16[st+17]=ne,this.uint16[st+18]=fe,this.uint16[st+19]=Ee,this.uint16[st+20]=me,this.uint16[st+21]=Te,this.uint16[st+22]=Ie,this.uint16[st+23]=Pe,this.uint16[st+24]=Ke,this.uint16[st+25]=Ze,this.uint16[st+26]=ut,this.uint16[st+27]=Pt,this.uint16[st+28]=tt,this.uint32[qt+15]=yt,this.float32[qt+16]=_t,this.float32[qt+17]=Tt,this.float32[qt+18]=Dt,n}}cr.prototype.bytesPerElement=76,en(cr,"StructArrayLayout3i2f6i15ui1ul3f76");class ur extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const i=this.length;return this.resize(i+1),this.emplace(i,n)}emplace(n,i){return this.float32[1*n+0]=i,n}}ur.prototype.bytesPerElement=4,en(ur,"StructArrayLayout1f4");class dr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,i,c,d,m)}emplace(n,i,c,d,m,y){const x=5*n;return this.float32[x+0]=i,this.float32[x+1]=c,this.float32[x+2]=d,this.float32[x+3]=m,this.float32[x+4]=y,n}}dr.prototype.bytesPerElement=20,en(dr,"StructArrayLayout5f20");class Ii extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,d)}emplace(n,i,c,d,m){const y=6*n;return this.uint32[3*n+0]=i,this.uint16[y+2]=c,this.uint16[y+3]=d,this.uint16[y+4]=m,n}}Ii.prototype.bytesPerElement=12,en(Ii,"StructArrayLayout1ul3ui12");class gi extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i){const c=this.length;return this.resize(c+1),this.emplace(c,n,i)}emplace(n,i,c){const d=2*n;return this.uint16[d+0]=i,this.uint16[d+1]=c,n}}gi.prototype.bytesPerElement=4,en(gi,"StructArrayLayout2ui4");class po extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const i=this.length;return this.resize(i+1),this.emplace(i,n)}emplace(n,i){return this.uint16[1*n+0]=i,n}}po.prototype.bytesPerElement=2,en(po,"StructArrayLayout1ui2");class Qo extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i){const c=this.length;return this.resize(c+1),this.emplace(c,n,i)}emplace(n,i,c){const d=2*n;return this.float32[d+0]=i,this.float32[d+1]=c,n}}Qo.prototype.bytesPerElement=8,en(Qo,"StructArrayLayout2f8");class zr extends ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}zr.prototype.size=40;class hr extends In{get(n){return new zr(this,n)}}en(hr,"CollisionBoxArray");class er extends ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}er.prototype.size=60;class Jr extends or{get(n){return new er(this,n)}}en(Jr,"PlacedSymbolArray");class Oi extends ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Oi.prototype.size=76;class Pr extends cr{get(n){return new Oi(this,n)}}en(Pr,"SymbolInstanceArray");class ji extends ur{getoffsetX(n){return this.float32[1*n+0]}}en(ji,"GlyphOffsetArray");class td extends kt{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}en(td,"SymbolLineVertexArray");class Da extends ze{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Da.prototype.size=12;class zc extends Ii{get(n){return new Da(this,n)}}en(zc,"FeatureIndexArray");class Is extends gi{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}en(Is,"FillExtrusionCentroidArray");const Ks=Ue([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),za=Ue([{name:"a_dash",components:4,type:"Uint16"}]);var nd={exports:{}},Rc={exports:{}};Rc.exports=function(r,n){var i,c,d,m,y,x,S,T;for(c=r.length-(i=3&r.length),d=n,y=3432918353,x=461845907,T=0;T<c;)S=255&r.charCodeAt(T)|(255&r.charCodeAt(++T))<<8|(255&r.charCodeAt(++T))<<16|(255&r.charCodeAt(++T))<<24,++T,d=27492+(65535&(m=5*(65535&(d=(d^=S=(65535&(S=(S=(65535&S)*y+(((S>>>16)*y&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(S=0,i){case 3:S^=(255&r.charCodeAt(T+2))<<16;case 2:S^=(255&r.charCodeAt(T+1))<<8;case 1:d^=S=(65535&(S=(S=(65535&(S^=255&r.charCodeAt(T)))*y+(((S>>>16)*y&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295}return d^=r.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0};var Ep=Rc.exports,U2={exports:{}};U2.exports=function(r,n){for(var i,c=r.length,d=n^c,m=0;c>=4;)i=1540483477*(65535&(i=255&r.charCodeAt(m)|(255&r.charCodeAt(++m))<<8|(255&r.charCodeAt(++m))<<16|(255&r.charCodeAt(++m))<<24))+((1540483477*(i>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),c-=4,++m;switch(c){case 3:d^=(255&r.charCodeAt(m+2))<<16;case 2:d^=(255&r.charCodeAt(m+1))<<8;case 1:d=1540483477*(65535&(d^=255&r.charCodeAt(m)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};var V2=Ep,kA=U2.exports;nd.exports=V2,nd.exports.murmur3=V2,nd.exports.murmur2=kA;var zv=G(nd.exports);class Ig{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,i,c,d){this.ids.push(j2(n)),this.positions.push(i,c,d)}getPositions(n){const i=j2(n);let c=0,d=this.ids.length-1;for(;c<d;){const y=c+d>>1;this.ids[y]>=i?d=y:c=y+1}const m=[];for(;this.ids[c]===i;)m.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return m}static serialize(n,i){const c=new Float64Array(n.ids),d=new Uint32Array(n.positions);return Rv(c,d,0,c.length-1),i&&i.push(c.buffer,d.buffer),{ids:c,positions:d}}static deserialize(n){const i=new Ig;return i.ids=n.ids,i.positions=n.positions,i.indexed=!0,i}}function j2(r){const n=+r;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:zv(String(r))}function Rv(r,n,i,c){for(;i<c;){const d=r[i+c>>1];let m=i-1,y=c+1;for(;;){do m++;while(r[m]<d);do y--;while(r[y]>d);if(m>=y)break;Ag(r,m,y),Ag(n,3*m,3*y),Ag(n,3*m+1,3*y+1),Ag(n,3*m+2,3*y+2)}y-i<c-y?(Rv(r,n,i,y),i=y+1):(Rv(r,n,y+1,c),c=y)}}function Ag(r,n,i){const c=r[n];r[n]=r[i],r[i]=c}en(Ig,"FeaturePositionMap");class Ra{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,i){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,i),this.initialized=!0),!!this.location}}class Dg extends Ra{constructor(n){super(n),this.current=0}set(n,i,c){this.fetchUniformLocation(n,i)&&this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class W2 extends Ra{constructor(n){super(n),this.current=[0,0,0,0]}set(n,i,c){this.fetchUniformLocation(n,i)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3])))}}class G2 extends Ra{constructor(n){super(n),this.current=qr.transparent}set(n,i,c){this.fetchUniformLocation(n,i)&&(c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a)))}}const PA=new Float32Array(16),MA=new Float32Array(9),IA=new Float32Array(4);function Lv(r){return[De(255*r.r,255*r.g),De(255*r.b,255*r.a)]}class kp{constructor(n,i,c){this.value=n,this.uniformNames=i.map(d=>`u_${d}`),this.type=c}setUniform(n,i,c,d,m){i.set(n,m,d.constantOr(this.value))}getBinding(n,i){return this.type==="color"?new G2(n):new Dg(n)}}class rd{constructor(n,i){this.uniformNames=i.map(c=>`u_${c}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,i,c,d,m){const y=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;y&&i.set(n,m,y)}getBinding(n,i){return i==="u_pattern"||i==="u_dash"?new W2(n):new Dg(n)}}class La{constructor(n,i,c,d){this.expression=n,this.type=c,this.maxValue=0,this.paintVertexAttributes=i.map(m=>({name:`a_${m}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(n,i,c,d,m,y){const x=this.paintVertexArray.length,S=this.expression.evaluate(new I(0),i,{},m,d,y);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,i,c,d,m){const y=this.expression.evaluate({zoom:0},c,d,void 0,m);this._setPaintValue(n,i,y)}_setPaintValue(n,i,c){if(this.type==="color"){const d=Lv(c);for(let m=n;m<i;m++)this.paintVertexArray.emplace(m,d[0],d[1])}else{for(let d=n;d<i;d++)this.paintVertexArray.emplace(d,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class As{constructor(n,i,c,d,m,y){this.expression=n,this.uniformNames=i.map(x=>`u_${x}_t`),this.type=c,this.useIntegerZoom=d,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=i.map(x=>({name:`a_${x}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,i,c,d,m,y){const x=this.expression.evaluate(new I(this.zoom),i,{},m,d,y),S=this.expression.evaluate(new I(this.zoom+1),i,{},m,d,y),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,x,S)}updatePaintArray(n,i,c,d,m){const y=this.expression.evaluate({zoom:this.zoom},c,d,void 0,m),x=this.expression.evaluate({zoom:this.zoom+1},c,d,void 0,m);this._setPaintValue(n,i,y,x)}_setPaintValue(n,i,c,d){if(this.type==="color"){const m=Lv(c),y=Lv(d);for(let x=n;x<i;x++)this.paintVertexArray.emplace(x,m[0],m[1],y[0],y[1])}else{for(let m=n;m<i;m++)this.paintVertexArray.emplace(m,c,d);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,i,c,d,m){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,x=Se(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);i.set(n,m,x)}getBinding(n,i){return new Dg(n)}}class Sl{constructor(n,i,c,d,m){this.expression=n,this.layerId=m,this.paintVertexAttributes=(c==="array"?za:Ks).members;for(let y=0;y<i.length;++y);this.paintVertexArray=new d}populatePaintArray(n,i,c){const d=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(d,n,i.patterns&&i.patterns[this.layerId],c)}updatePaintArray(n,i,c,d,m,y){this._setPaintValues(n,i,c.patterns&&c.patterns[this.layerId],y)}_setPaintValues(n,i,c,d){if(!d||!c)return;const m=d[c];if(!m)return;const{tl:y,br:x,pixelRatio:S}=m;for(let T=n;T<i;T++)this.paintVertexArray.emplace(T,y[0],y[1],x[0],x[1],S)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Tl{constructor(n,i,c=()=>!0){this.binders={},this._buffers=[];const d=[];for(const m in n.paint._values){if(!c(m))continue;const y=n.paint.get(m);if(!(y instanceof le&&ml(y.property.specification)))continue;const x=DA(m,n.type),S=y.value,T=y.property.specification.type,P=!!y.property.useIntegerZoom,A=m==="line-dasharray"||m.endsWith("pattern"),z=m==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(S.kind!=="constant"||z)if(S.kind==="source"||z||A){const F=H2(m,T,"source");this.binders[m]=A?new Sl(S,x,T,F,n.id):new La(S,x,T,F),d.push(`/a_${m}`)}else{const F=H2(m,T,"composite");this.binders[m]=new As(S,x,T,P,i,F),d.push(`/z_${m}`)}else this.binders[m]=A?new rd(S.value,x):new kp(S.value,x,T),d.push(`/u_${m}`)}this.cacheKey=d.sort().join("")}getMaxValue(n){const i=this.binders[n];return i instanceof La||i instanceof As?i.maxValue:0}populatePaintArrays(n,i,c,d,m,y){for(const x in this.binders){const S=this.binders[x];(S instanceof La||S instanceof As||S instanceof Sl)&&S.populatePaintArray(n,i,c,d,m,y)}}setConstantPatternPositions(n){for(const i in this.binders){const c=this.binders[i];c instanceof rd&&c.setConstantPatternPositions(n)}}updatePaintArrays(n,i,c,d,m,y){let x=!1;for(const S in n){const T=i.getPositions(S);for(const P of T){const A=c.feature(P.index);for(const z in this.binders){const F=this.binders[z];if((F instanceof La||F instanceof As||F instanceof Sl)&&F.expression.isStateDependent===!0){const V=d.paint.get(z);F.expression=V.value,F.updatePaintArray(P.start,P.end,A,n[S],m,y),x=!0}}}}return x}defines(){const n=[];for(const i in this.binders){const c=this.binders[i];(c instanceof kp||c instanceof rd)&&n.push(...c.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return n}getBinderAttributes(){const n=[];for(const i in this.binders){const c=this.binders[i];if(c instanceof La||c instanceof As||c instanceof Sl)for(let d=0;d<c.paintVertexAttributes.length;d++)n.push(c.paintVertexAttributes[d].name)}return n}getBinderUniforms(){const n=[];for(const i in this.binders){const c=this.binders[i];if(c instanceof kp||c instanceof rd||c instanceof As)for(const d of c.uniformNames)n.push(d)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const i=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof kp||d instanceof rd||d instanceof As)for(const m of d.uniformNames)i.push({name:m,property:c,binding:d.getBinding(n,m)})}return i}setUniforms(n,i,c,d,m){for(const{name:y,property:x,binding:S}of c)this.binders[x].setUniform(n,S,m,d.get(x),y)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const i=this.binders[n];(i instanceof La||i instanceof As||i instanceof Sl)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(n){for(const i in this.binders){const c=this.binders[i];(c instanceof La||c instanceof As||c instanceof Sl)&&c.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const i=this.binders[n];(i instanceof La||i instanceof As||i instanceof Sl)&&i.destroy()}}}class Lc{constructor(n,i,c=()=>!0){this.programConfigurations={};for(const d of n)this.programConfigurations[d.id]=new Tl(d,i,c);this.needsUpload=!1,this._featureMap=new Ig,this._bufferOffset=0}populatePaintArrays(n,i,c,d,m,y,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,i,d,m,y,x);i.id!==void 0&&this._featureMap.add(i.id,c,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,i,c,d,m){for(const y of c)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(n,this._featureMap,i,y,d,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const i in this.programConfigurations)this.programConfigurations[i].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const AA={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function DA(r,n){return AA[r]||[r.replace(`${n}-`,"").replace(/-/g,"_")]}const zA={"line-pattern":{source:Xe,composite:Xe},"fill-pattern":{source:Xe,composite:Xe},"fill-extrusion-pattern":{source:Xe,composite:Xe},"line-dasharray":{source:pt,composite:pt}},RA={color:{source:Qo,composite:Et},number:{source:ur,composite:Qo}};function H2(r,n,i){const c=zA[r];return c&&c[i]||RA[n][i]}en(kp,"ConstantBinder"),en(rd,"PatternConstantBinder"),en(La,"SourceExpressionBinder"),en(Sl,"PatternCompositeBinder"),en(As,"CompositeExpressionBinder"),en(Tl,"ProgramConfiguration",{omit:["_buffers"]}),en(Lc,"ProgramConfigurationSet");const q2="-transition";class Ds extends lc{constructor(n,i){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),i.layout&&(this._unevaluatedLayout=new ce(i.layout)),i.paint)){this._transitionablePaint=new q(i.paint);for(const c in n.paint)this.setPaintProperty(c,n.paint[c],{validate:!1});for(const c in n.layout)this.setLayoutProperty(c,n.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pe(i.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,i,c={}){i!=null&&this._validate(Pv,`layers.${this.id}.layout.${n}`,n,i,c)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,i):this.visibility=i)}getPaintProperty(n){return at(n,q2)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,i,c={}){if(i!=null&&this._validate(kv,`layers.${this.id}.paint.${n}`,n,i,c))return!1;if(at(n,q2))return this._transitionablePaint.setTransition(n.slice(0,-11),i||void 0),!1;{const d=this._transitionablePaint._values[n],m=d.value.isDataDriven(),y=d.value;this._transitionablePaint.setValue(n,i),this._handleSpecialPaintPropertyUpdate(n);const x=this._transitionablePaint._values[n].value,S=x.isDataDriven(),T=at(n,"pattern")||n==="line-dasharray";return S||m||T||this._handleOverridablePaintPropertyUpdate(n,y,x)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,i,c){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,i){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,i)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),it(n,(i,c)=>!(i===void 0||c==="layout"&&!Object.keys(i).length||c==="paint"&&!Object.keys(i).length))}_validate(n,i,c,d,m={}){return(!m||m.validate!==!1)&&Eg(this,n.call(Cg,{key:i,layerType:this.type,objectKey:c,value:d,styleSpec:ct,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const i=this.paint.get(n);if(i instanceof le&&ml(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ku(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const LA=Ue([{name:"a_pos",components:2,type:"Int16"}],4),OA=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Qr{constructor(n=[]){this.segments=n}prepareSegment(n,i,c,d){let m=this.segments[this.segments.length-1];return n>Qr.MAX_VERTEX_ARRAY_LENGTH&&He(`Max vertices per segment is ${Qr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!m||m.vertexLength+n>Qr.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==d)&&(m={vertexOffset:i.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},d!==void 0&&(m.sortKey=d),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const n of this.segments)for(const i in n.vaos)n.vaos[i].destroy()}static simpleSegment(n,i,c,d){return new Qr([{vertexOffset:n,primitiveOffset:i,vertexLength:c,primitiveLength:d,vaos:{},sortKey:0}])}}Qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,en(Qr,"SegmentVector");var vn=8192;class Cl{constructor(n,i){n&&(i?this.setSouthWest(n).setNorthEast(i):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof pr?new pr(n.lng,n.lat):pr.convert(n),this}setSouthWest(n){return this._sw=n instanceof pr?new pr(n.lng,n.lat):pr.convert(n),this}extend(n){const i=this._sw,c=this._ne;let d,m;if(n instanceof pr)d=n,m=n;else{if(!(n instanceof Cl))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Cl.convert(n)):this.extend(pr.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(pr.convert(n)):this;if(d=n._sw,m=n._ne,!d||!m)return this}return i||c?(i.lng=Math.min(d.lng,i.lng),i.lat=Math.min(d.lat,i.lat),c.lng=Math.max(m.lng,c.lng),c.lat=Math.max(m.lat,c.lat)):(this._sw=new pr(d.lng,d.lat),this._ne=new pr(m.lng,m.lat)),this}getCenter(){return new pr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new pr(this.getWest(),this.getNorth())}getSouthEast(){return new pr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:i,lat:c}=pr.convert(n);let d=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&d}static convert(n){return!n||n instanceof Cl?n:new Cl(n)}}var zg=1e-6,fo=typeof Float32Array<"u"?Float32Array:Array;function Z2(){var r=new fo(9);return fo!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function X2(r,n,i){var c=n[0],d=n[1],m=n[2],y=n[3],x=n[4],S=n[5],T=n[6],P=n[7],A=n[8],z=i[0],F=i[1],V=i[2],X=i[3],ne=i[4],fe=i[5],Ee=i[6],me=i[7],Te=i[8];return r[0]=z*c+F*y+V*T,r[1]=z*d+F*x+V*P,r[2]=z*m+F*S+V*A,r[3]=X*c+ne*y+fe*T,r[4]=X*d+ne*x+fe*P,r[5]=X*m+ne*S+fe*A,r[6]=Ee*c+me*y+Te*T,r[7]=Ee*d+me*x+Te*P,r[8]=Ee*m+me*S+Te*A,r}function zs(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ov(r,n){var i=n[0],c=n[1],d=n[2],m=n[3],y=n[4],x=n[5],S=n[6],T=n[7],P=n[8],A=n[9],z=n[10],F=n[11],V=n[12],X=n[13],ne=n[14],fe=n[15],Ee=i*x-c*y,me=i*S-d*y,Te=i*T-m*y,Ie=c*S-d*x,Pe=c*T-m*x,Ke=d*T-m*S,Ze=P*X-A*V,ut=P*ne-z*V,Pt=P*fe-F*V,tt=A*ne-z*X,yt=A*fe-F*X,_t=z*fe-F*ne,Tt=Ee*_t-me*yt+Te*tt+Ie*Pt-Pe*ut+Ke*Ze;return Tt?(r[0]=(x*_t-S*yt+T*tt)*(Tt=1/Tt),r[1]=(d*yt-c*_t-m*tt)*Tt,r[2]=(X*Ke-ne*Pe+fe*Ie)*Tt,r[3]=(z*Pe-A*Ke-F*Ie)*Tt,r[4]=(S*Pt-y*_t-T*ut)*Tt,r[5]=(i*_t-d*Pt+m*ut)*Tt,r[6]=(ne*Te-V*Ke-fe*me)*Tt,r[7]=(P*Ke-z*Te+F*me)*Tt,r[8]=(y*yt-x*Pt+T*Ze)*Tt,r[9]=(c*Pt-i*yt-m*Ze)*Tt,r[10]=(V*Pe-X*Te+fe*Ee)*Tt,r[11]=(A*Te-P*Pe-F*Ee)*Tt,r[12]=(x*ut-y*tt-S*Ze)*Tt,r[13]=(i*tt-c*ut+d*Ze)*Tt,r[14]=(X*me-V*Ie-ne*Ee)*Tt,r[15]=(P*Ie-A*me+z*Ee)*Tt,r):null}function Oc(r,n,i){var c=n[0],d=n[1],m=n[2],y=n[3],x=n[4],S=n[5],T=n[6],P=n[7],A=n[8],z=n[9],F=n[10],V=n[11],X=n[12],ne=n[13],fe=n[14],Ee=n[15],me=i[0],Te=i[1],Ie=i[2],Pe=i[3];return r[0]=me*c+Te*x+Ie*A+Pe*X,r[1]=me*d+Te*S+Ie*z+Pe*ne,r[2]=me*m+Te*T+Ie*F+Pe*fe,r[3]=me*y+Te*P+Ie*V+Pe*Ee,r[4]=(me=i[4])*c+(Te=i[5])*x+(Ie=i[6])*A+(Pe=i[7])*X,r[5]=me*d+Te*S+Ie*z+Pe*ne,r[6]=me*m+Te*T+Ie*F+Pe*fe,r[7]=me*y+Te*P+Ie*V+Pe*Ee,r[8]=(me=i[8])*c+(Te=i[9])*x+(Ie=i[10])*A+(Pe=i[11])*X,r[9]=me*d+Te*S+Ie*z+Pe*ne,r[10]=me*m+Te*T+Ie*F+Pe*fe,r[11]=me*y+Te*P+Ie*V+Pe*Ee,r[12]=(me=i[12])*c+(Te=i[13])*x+(Ie=i[14])*A+(Pe=i[15])*X,r[13]=me*d+Te*S+Ie*z+Pe*ne,r[14]=me*m+Te*T+Ie*F+Pe*fe,r[15]=me*y+Te*P+Ie*V+Pe*Ee,r}function Pp(r,n,i){var c,d,m,y,x,S,T,P,A,z,F,V,X=i[0],ne=i[1],fe=i[2];return n===r?(r[12]=n[0]*X+n[4]*ne+n[8]*fe+n[12],r[13]=n[1]*X+n[5]*ne+n[9]*fe+n[13],r[14]=n[2]*X+n[6]*ne+n[10]*fe+n[14],r[15]=n[3]*X+n[7]*ne+n[11]*fe+n[15]):(d=n[1],m=n[2],y=n[3],x=n[4],S=n[5],T=n[6],P=n[7],A=n[8],z=n[9],F=n[10],V=n[11],r[0]=c=n[0],r[1]=d,r[2]=m,r[3]=y,r[4]=x,r[5]=S,r[6]=T,r[7]=P,r[8]=A,r[9]=z,r[10]=F,r[11]=V,r[12]=c*X+x*ne+A*fe+n[12],r[13]=d*X+S*ne+z*fe+n[13],r[14]=m*X+T*ne+F*fe+n[14],r[15]=y*X+P*ne+V*fe+n[15]),r}function Bc(r,n,i){var c=i[0],d=i[1],m=i[2];return r[0]=n[0]*c,r[1]=n[1]*c,r[2]=n[2]*c,r[3]=n[3]*c,r[4]=n[4]*d,r[5]=n[5]*d,r[6]=n[6]*d,r[7]=n[7]*d,r[8]=n[8]*m,r[9]=n[9]*m,r[10]=n[10]*m,r[11]=n[11]*m,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function Bv(r,n,i){var c=Math.sin(i),d=Math.cos(i),m=n[4],y=n[5],x=n[6],S=n[7],T=n[8],P=n[9],A=n[10],z=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=m*d+T*c,r[5]=y*d+P*c,r[6]=x*d+A*c,r[7]=S*d+z*c,r[8]=T*d-m*c,r[9]=P*d-y*c,r[10]=A*d-x*c,r[11]=z*d-S*c,r}function Rg(r,n,i){var c=Math.sin(i),d=Math.cos(i),m=n[0],y=n[1],x=n[2],S=n[3],T=n[8],P=n[9],A=n[10],z=n[11];return n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=m*d-T*c,r[1]=y*d-P*c,r[2]=x*d-A*c,r[3]=S*d-z*c,r[8]=m*c+T*d,r[9]=y*c+P*d,r[10]=x*c+A*d,r[11]=S*c+z*d,r}function Y2(r,n){return r[0]=n[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function K2(r,n,i){var c,d,m,y=i[0],x=i[1],S=i[2],T=Math.hypot(y,x,S);return T<zg?null:(y*=T=1/T,x*=T,S*=T,c=Math.sin(n),d=Math.cos(n),r[0]=y*y*(m=1-d)+d,r[1]=x*y*m+S*c,r[2]=S*y*m-x*c,r[3]=0,r[4]=y*x*m-S*c,r[5]=x*x*m+d,r[6]=S*x*m+y*c,r[7]=0,r[8]=y*S*m+x*c,r[9]=x*S*m-y*c,r[10]=S*S*m+d,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}Math.hypot||(Math.hypot=function(){for(var r=0,n=arguments.length;n--;)r+=arguments[n]*arguments[n];return Math.sqrt(r)});var BA=Oc;function Fv(){var r=new fo(3);return fo!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function J2(r){var n=new fo(3);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n}function Mp(r){return Math.hypot(r[0],r[1],r[2])}function id(r,n,i){var c=new fo(3);return c[0]=r,c[1]=n,c[2]=i,c}function Oa(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r}function $v(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r}function Q2(r,n,i){return r[0]=n[0]*i[0],r[1]=n[1]*i[1],r[2]=n[2]*i[2],r}function Ip(r,n,i){return r[0]=Math.min(n[0],i[0]),r[1]=Math.min(n[1],i[1]),r[2]=Math.min(n[2],i[2]),r}function Ap(r,n,i){return r[0]=Math.max(n[0],i[0]),r[1]=Math.max(n[1],i[1]),r[2]=Math.max(n[2],i[2]),r}function Do(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r}function Dp(r,n,i,c){return r[0]=n[0]+i[0]*c,r[1]=n[1]+i[1]*c,r[2]=n[2]+i[2]*c,r}function Wi(r,n){var i=n[0],c=n[1],d=n[2],m=i*i+c*c+d*d;return m>0&&(m=1/Math.sqrt(m)),r[0]=n[0]*m,r[1]=n[1]*m,r[2]=n[2]*m,r}function es(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}function Nv(r,n,i){var c=n[0],d=n[1],m=n[2],y=i[0],x=i[1],S=i[2];return r[0]=d*S-m*x,r[1]=m*y-c*S,r[2]=c*x-d*y,r}function Zr(r,n,i){var c=n[0],d=n[1],m=n[2],y=i[3]*c+i[7]*d+i[11]*m+i[15];return r[0]=(i[0]*c+i[4]*d+i[8]*m+i[12])/(y=y||1),r[1]=(i[1]*c+i[5]*d+i[9]*m+i[13])/y,r[2]=(i[2]*c+i[6]*d+i[10]*m+i[14])/y,r}function eS(r,n,i){var c=i[0],d=i[1],m=i[2],y=n[0],x=n[1],S=n[2],T=d*S-m*x,P=m*y-c*S,A=c*x-d*y,z=d*A-m*P,F=m*T-c*A,V=c*P-d*T,X=2*i[3];return P*=X,A*=X,F*=2,V*=2,r[0]=y+(T*=X)+(z*=2),r[1]=x+P+F,r[2]=S+A+V,r}var zp,Rs=$v,FA=Q2,$A=Mp;function tS(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=n[3]*i,r}function nS(r,n){var i=n[0],c=n[1],d=n[2],m=n[3],y=i*i+c*c+d*d+m*m;return y>0&&(y=1/Math.sqrt(y)),r[0]=i*y,r[1]=c*y,r[2]=d*y,r[3]=m*y,r}function Fc(r,n,i){var c=n[0],d=n[1],m=n[2],y=n[3];return r[0]=i[0]*c+i[4]*d+i[8]*m+i[12]*y,r[1]=i[1]*c+i[5]*d+i[9]*m+i[13]*y,r[2]=i[2]*c+i[6]*d+i[10]*m+i[14]*y,r[3]=i[3]*c+i[7]*d+i[11]*m+i[15]*y,r}function rS(){var r=new fo(4);return fo!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function iS(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function oS(r,n,i){i*=.5;var c=n[0],d=n[1],m=n[2],y=n[3],x=Math.sin(i),S=Math.cos(i);return r[0]=c*S+y*x,r[1]=d*S+m*x,r[2]=m*S-d*x,r[3]=y*S-c*x,r}function sS(r,n,i){i*=.5;var c=n[0],d=n[1],m=n[2],y=n[3],x=Math.sin(i),S=Math.cos(i);return r[0]=c*S-m*x,r[1]=d*S+y*x,r[2]=m*S+c*x,r[3]=y*S-d*x,r}Fv(),zp=new fo(4),fo!=Float32Array&&(zp[0]=0,zp[1]=0,zp[2]=0,zp[3]=0);var NA=nS;Fv(),id(1,0,0),id(0,1,0),rS(),rS(),Z2();const UA=Ue([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:aS}=UA,lS=Ue([{name:"a_pos_3",components:3,type:"Int16"}]);var Rp=Ue([{name:"a_pos",type:"Int16",components:2}]);class Uv{constructor(n,i){this.pos=n,this.dir=i}intersectsPlane(n,i,c){const d=es(i,this.dir);if(Math.abs(d)<1e-6)return!1;const m=((n[0]-this.pos[0])*i[0]+(n[1]-this.pos[1])*i[1]+(n[2]-this.pos[2])*i[2])/d;return c[0]=this.pos[0]+this.dir[0]*m,c[1]=this.pos[1]+this.dir[1]*m,c[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(n,i,c){if(function(F,V){var X=F[0],ne=F[1],fe=F[2],Ee=V[0],me=V[1],Te=V[2];return Math.abs(X-Ee)<=zg*Math.max(1,Math.abs(X),Math.abs(Ee))&&Math.abs(ne-me)<=zg*Math.max(1,Math.abs(ne),Math.abs(me))&&Math.abs(fe-Te)<=zg*Math.max(1,Math.abs(fe),Math.abs(Te))}(this.pos,n)||i===0)return c[0]=c[1]=c[2]=0,!1;const[d,m,y]=this.dir,x=this.pos[0]-n[0],S=this.pos[1]-n[1],T=this.pos[2]-n[2],P=d*d+m*m+y*y,A=2*(x*d+S*m+T*y),z=A*A-4*P*(x*x+S*S+T*T-i*i);if(z<0){const F=Math.max(-A/2,0),V=x+d*F,X=S+m*F,ne=T+y*F,fe=Math.hypot(V,X,ne);return c[0]=V*i/fe,c[1]=X*i/fe,c[2]=ne*i/fe,!1}{const F=(-A-Math.sqrt(z))/(2*P);if(F<0){const V=Math.hypot(x,S,T);return c[0]=x*i/V,c[1]=S*i/V,c[2]=T*i/V,!1}return c[0]=x+d*F,c[1]=S+m*F,c[2]=T+y*F,!0}}}class Vv{constructor(n,i,c,d,m){this.TL=n,this.TR=i,this.BR=c,this.BL=d,this.horizon=m}static fromInvProjectionMatrix(n,i,c){const d=[-1,1,1],m=[1,1,1],y=[1,-1,1],x=[-1,-1,1],S=Zr(d,d,n),T=Zr(m,m,n),P=Zr(y,y,n),A=Zr(x,x,n);return new Vv(S,T,P,A,i/c)}}class jv{constructor(n,i){this.points=n,this.planes=i}static fromInvProjectionMatrix(n,i,c,d){const m=Math.pow(2,c),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const T=Fc([],S,n),P=1/T[3]/i*m;return function(A,z,F){return A[0]=z[0]*F[0],A[1]=z[1]*F[1],A[2]=z[2]*F[2],A[3]=z[3]*F[3],A}(T,T,[P,P,d?1/T[3]:P,P])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const T=Wi([],Nv([],Rs([],y[S[0]],y[S[1]]),Rs([],y[S[2]],y[S[1]]))),P=-es(T,y[S[1]]);return T.concat(P)});return new jv(y,x)}}class Gi{static fromPoints(n){const i=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0];for(const d of n)Ip(i,i,d),Ap(c,c,d);return new Gi(i,c)}static applyTransform(n,i){const c=n.getCorners();for(let d=0;d<c.length;++d)Zr(c[d],c[d],i);return Gi.fromPoints(c)}constructor(n,i){this.min=n,this.max=i,this.center=Do([],Oa([],this.min,this.max),.5)}quadrant(n){const i=[n%2==0,n<2],c=J2(this.min),d=J2(this.max);for(let m=0;m<i.length;m++)c[m]=i[m]?this.min[m]:this.center[m],d[m]=i[m]?this.center[m]:this.max[m];return d[2]=this.max[2],new Gi(c,d)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,i=this.max;return[[n[0],n[1],n[2]],[i[0],n[1],n[2]],[i[0],i[1],n[2]],[n[0],i[1],n[2]],[n[0],n[1],i[2]],[i[0],n[1],i[2]],[i[0],i[1],i[2]],[n[0],i[1],i[2]]]}intersects(n){const i=this.getCorners();let c=!0;for(let d=0;d<n.planes.length;d++){const m=n.planes[d];let y=0;for(let x=0;x<i.length;x++)y+=es(m,i[x])+m[3]>=0;if(y===0)return 0;y!==i.length&&(c=!1)}if(c)return 2;for(let d=0;d<3;d++){let m=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(let x=0;x<n.points.length;x++){const S=n.points[x][d]-this.min[d];m=Math.min(m,S),y=Math.max(y,S)}if(y<0||m>this.max[d]-this.min[d])return 0}return 1}}const Wv=5,cS=6,Js=vn/Math.PI/2,VA=16383,$c=64,Lp=[$c,32,16],ts=-Js,ns=Js,jA=[new Gi([ts,ts,ts],[ns,ns,ns]),new Gi([ts,ts,ts],[0,0,ns]),new Gi([0,ts,ts],[ns,0,ns]),new Gi([ts,0,ts],[0,ns,ns]),new Gi([0,0,ts],[ns,ns,ns])];function Lg(r){return r*Js/Fp}function uS(r,n,i,c=!0){const d=Do([],r._camera.position,r.worldSize),m=[n,i,1,1];Fc(m,m,r.pixelMatrixInverse),tS(m,m,1/m[3]);const y=Wi([],Rs([],m,d)),x=r.globeMatrix,S=[x[12],x[13],x[14]],T=Rs([],S,d),P=Mp(T),A=Wi([],T),z=r.worldSize/(2*Math.PI),F=es(A,y),V=Math.asin(z/P);if(V<Math.acos(F)){if(!c)return null;const Pt=[],tt=[];Do(Pt,y,P/F),Wi(tt,Rs(tt,Pt,T)),Wi(y,Oa(y,T,Do(y,tt,Math.tan(V)*P)))}const X=[];new Uv(d,y).closestPointOnSphere(S,z,X);const ne=Wi([],kn(x,0)),fe=Wi([],kn(x,1)),Ee=Wi([],kn(x,2)),me=es(ne,X),Te=es(fe,X),Ie=es(Ee,X),Pe=be(Math.asin(-Te/z));let Ke=be(Math.atan2(me,Ie));Ke=r.center.lng+function(Pt,tt){const yt=(tt-Pt+180)%360-180;return yt<-180?yt+360:yt}(r.center.lng,Ke);const Ze=ea(Ke),ut=Se(ta(Pe),0,1);return new ld(Ze,ut)}class WA{constructor(n,i,c){this.a=Rs([],n,c),this.b=Rs([],i,c),this.center=c;const d=Wi([],this.a),m=Wi([],this.b);this.angle=Math.acos(es(d,m))}}function Gv(r,n){if(r.angle===0)return null;let i;return i=r.a[n]===0?1/r.angle*.5*Math.PI:1/r.angle*Math.atan(r.b[n]/r.a[n]/Math.sin(r.angle)-1/Math.tan(r.angle)),i<0||i>1?null:function(c,d,m,y){const x=Math.sin(m);return c*(Math.sin((1-y)*m)/x)+d*(Math.sin(y*m)/x)}(r.a[n],r.b[n],r.angle,Se(i,0,1))+r.center[n]}function Qs(r){if(r.z<=1)return jA[r.z+2*r.y+r.x];const n=Hv(Og(r));return Gi.fromPoints(n)}function Nc(r,n,i){return Do(r,r,1-i),Dp(r,r,n,i)}function dS(r,n){const i=ad(n.zoom);if(i===0)return Qs(r);const c=Og(r),d=Hv(c),m=ea(c.getWest())*n.worldSize,y=ea(c.getEast())*n.worldSize,x=ta(c.getNorth())*n.worldSize,S=ta(c.getSouth())*n.worldSize,T=[m,x,0],P=[y,x,0],A=[m,S,0],z=[y,S,0],F=Ov([],n.globeMatrix);return Zr(T,T,F),Zr(P,P,F),Zr(A,A,F),Zr(z,z,F),d[0]=Nc(d[0],A,i),d[1]=Nc(d[1],z,i),d[2]=Nc(d[2],P,i),d[3]=Nc(d[3],T,i),Gi.fromPoints(d)}function hS(r,n,i){for(const c of r)Zr(c,c,n),Do(c,c,i)}function GA(r,n,i){const c=n/r.worldSize,d=r.globeMatrix;if(i.z<=1){const Ze=Qs(i).getCorners();return hS(Ze,d,c),Gi.fromPoints(Ze)}const m=Og(i),y=Hv(m);hS(y,d,c);const x=Number.MAX_VALUE,S=[-x,-x,-x],T=[x,x,x];if(m.contains(r.center)){for(const Pt of y)Ip(T,T,Pt),Ap(S,S,Pt);S[2]=0;const Ze=r.point,ut=[Ze.x*c,Ze.y*c,0];return Ip(T,T,ut),Ap(S,S,ut),new Gi(T,S)}const P=[d[12]*c,d[13]*c,d[14]*c],A=m.getCenter(),z=Se(r.center.lat,-Di,Di),F=Se(A.lat,-Di,Di),V=ea(r.center.lng),X=ta(z);let ne=V-ea(A.lng);const fe=X-ta(F);ne>.5?ne-=1:ne<-.5&&(ne+=1);let Ee=0;Math.abs(ne)>Math.abs(fe)?Ee=ne>=0?1:3:(Ee=fe>=0?0:2,Dp(P,P,[d[4]*c,d[5]*c,d[6]*c],-Math.sin(Fe(fe>=0?m.getSouth():m.getNorth()))*Js));const me=y[Ee],Te=y[(Ee+1)%4],Ie=new WA(me,Te,P),Pe=[Gv(Ie,0)||me[0],Gv(Ie,1)||me[1],Gv(Ie,2)||me[2]],Ke=ad(r.zoom);if(Ke>0){const Ze=function({x:Pt,y:tt,z:yt},_t,Tt,Dt,st){const qt=1/(1<<yt);let on=Pt*qt,Xt=on+qt,zn=tt*qt,Rt=zn+qt,fn=0;const Rn=(on+Xt)/2-Dt;return Rn>.5?fn=-1:Rn<-.5&&(fn=1),on=((on+fn)*_t-(Dt*=_t))*Tt+Dt,Xt=((Xt+fn)*_t-Dt)*Tt+Dt,zn=(zn*_t-(st*=_t))*Tt+st,Rt=(Rt*_t-st)*Tt+st,[[on,Rt,0],[Xt,Rt,0],[Xt,zn,0],[on,zn,0]]}(i,n,r._pixelsPerMercatorPixel,V,X);for(let Pt=0;Pt<y.length;Pt++)Nc(y[Pt],Ze[Pt],Ke);const ut=Oa([],Ze[Ee],Ze[(Ee+1)%4]);Do(ut,ut,.5),Nc(Pe,ut,Ke)}for(const Ze of y)Ip(T,T,Ze),Ap(S,S,Ze);return T[2]=Math.min(me[2],Te[2]),Ip(T,T,Pe),Ap(S,S,Pe),new Gi(T,S)}function Og({x:r,y:n,z:i}){const c=1/(1<<i),d=new pr(zo(r*c),Ai((n+1)*c)),m=new pr(zo((r+1)*c),Ai(n*c));return new Cl(d,m)}function Hv(r){const n=Fe(r.getNorth()),i=Fe(r.getSouth()),c=Math.cos(n),d=Math.cos(i),m=Math.sin(n),y=Math.sin(i),x=r.getWest(),S=r.getEast();return[od(d,y,x),od(d,y,S),od(c,m,S),od(c,m,x)]}function od(r,n,i,c=Js){return i=Fe(i),[r*Math.sin(i)*c,-n*c,r*Math.cos(i)*c]}function sd(r,n,i){return od(Math.cos(Fe(r)),Math.sin(Fe(r)),n,i)}function Op(r,n,i,c){const d=1<<i.z,m=(r/vn+i.x)/d;return sd(Ai((n/vn+i.y)/d),zo(m),c)}function Bg({min:r,max:n}){return VA/Math.max(n[0]-r[0],n[1]-r[1],n[2]-r[2])}const pS=new Float64Array(16);function Bp(r){const n=Bg(r),i=Y2(pS,[n,n,n]);return Pp(i,i,((c=[])[0]=-(d=r.min)[0],c[1]=-d[1],c[2]=-d[2],c));var c,d}function qv(r){const n=(c=r.min,(i=pS)[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=c[0],i[13]=c[1],i[14]=c[2],i[15]=1,i);var i,c;const d=1/Bg(r);return Bc(n,n,[d,d,d])}function fS(r,n,i,c,d){const m=function(S){const T=vn/(2*Math.PI);return S/(2*Math.PI)/T}(i),y=[r,n,-i/(2*Math.PI)],x=zs(new Float64Array(16));return Pp(x,x,y),Bc(x,x,[m,m,m]),Bv(x,x,Fe(-d)),Rg(x,x,Fe(-c)),x}function ad(r){return ke(Wv,cS,r)}function mS(r,n){const i=sd(n.lat,n.lng),c=function(V){const X=sd(V._center.lat,V._center.lng);let ne=Nv([],id(0,1,0),X);const fe=K2([],-V.angle,X);ne=Zr(ne,ne,fe),K2(fe,-V._pitch,ne);const Ee=Wi([],X);return Do(Ee,Ee,Lg(V.cameraToCenterDistance/V.pixelsPerMeter)),Zr(Ee,Ee,fe),Oa([],X,Ee)}(r);return y=(d=$v([],c,i))[0],x=d[1],S=d[2],T=(m=i)[0],P=m[1],A=m[2],F=(z=Math.sqrt(y*y+x*x+S*S)*Math.sqrt(T*T+P*P+A*A))&&es(d,m)/z,Math.acos(Math.min(Math.max(F,-1),1));var d,m,y,x,S,T,P,A,z,F}function Zv(r,n){return mS(r,n)>Math.PI/2*1.01}const gS=Fe(85),HA=Math.cos(gS),qA=Math.sin(gS),Fp=63710088e-1,yS=2*Math.PI*Fp;class El{constructor(n,i){if(isNaN(n)||isNaN(i))throw new Error(`Invalid LngLat object: (${n}, ${i})`);if(this.lng=+n,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new El(Ne(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const i=Math.PI/180,c=this.lat*i,d=n.lat*i,m=Math.sin(c)*Math.sin(d)+Math.cos(c)*Math.cos(d)*Math.cos((n.lng-this.lng)*i);return Fp*Math.acos(Math.min(m,1))}toBounds(n=0){const i=360*n/40075017,c=i/Math.cos(Math.PI/180*this.lat);return new Cl(new El(this.lng-c,this.lat-i),new El(this.lng+c,this.lat+i))}toEcef(n){const i=Lg(n);return sd(this.lat,this.lng,Js+i)}static convert(n){if(n instanceof El)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new El(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new El(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var pr=El;function Xv(r){return yS*Math.cos(r*Math.PI/180)}function ea(r){return(180+r)/360}function ta(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Ls(r,n){return r/Xv(n)}function zo(r){return 360*r-180}function Ai(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function _S(r,n){return r*Xv(Ai(n))}const Di=85.051129;function vS(r){return 1/Math.cos(r*Math.PI/180)}class ld{constructor(n,i,c=0){this.x=+n,this.y=+i,this.z=+c}static fromLngLat(n,i=0){const c=pr.convert(n);return new ld(ea(c.lng),ta(c.lat),Ls(i,c.lat))}toLngLat(){return new pr(zo(this.x),Ai(this.y))}toAltitude(){return _S(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/yS*vS(Ai(this.y))}}function Yv(r,n,i,c,d,m,y,x,S){const T=(n+c)/2,P=(i+d)/2,A=new ae(T,P);x(A),function(z,F,V,X,ne,fe){const Ee=V-ne,me=X-fe;return Math.abs((X-F)*Ee-(V-z)*me)/Math.hypot(Ee,me)}(A.x,A.y,m.x,m.y,y.x,y.y)>=S?(Yv(r,n,i,T,P,m,A,x,S),Yv(r,T,P,c,d,A,y,x,S)):r.push(y)}function xS(r,n,i){let c=r[0],d=c.x,m=c.y;n(c);const y=[c];for(let x=1;x<r.length;x++){const S=r[x],{x:T,y:P}=S;n(S),Yv(y,d,m,T,P,c,S,n,i),d=T,m=P,c=S}return y}function Kv(r,n,i,c){if(c(n,i)){const d=n.add(i)._mult(.5);Kv(r,n,d,c),Kv(r,d,i,c)}else r.push(i)}function ZA(r,n){let i=r[0];const c=[i];for(let d=1;d<r.length;d++){const m=r[d];Kv(c,i,m,n),i=m}return c}const Jv=Math.pow(2,14)-1,bS=-Jv-1;function XA(r,n){const i=Math.round(r.x*n),c=Math.round(r.y*n);return r.x=Se(i,bS,Jv),r.y=Se(c,bS,Jv),(i<r.x||i>r.x+1||c<r.y||c>r.y+1)&&He("Geometry exceeds allowed extent, reduce your vector tile buffer size"),r}function Ba(r,n,i){const c=r.loadGeometry(),d=r.extent,m=vn/d;if(n&&i&&i.projection.isReprojectedInTileSpace){const y=1<<n.z,{scale:x,x:S,y:T,projection:P}=i,A=z=>{const F=zo((n.x+z.x/d)/y),V=Ai((n.y+z.y/d)/y),X=P.project(F,V);z.x=(X.x*x-S)*d,z.y=(X.y*x-T)*d};for(let z=0;z<c.length;z++)if(r.type!==1)c[z]=xS(c[z],A,1);else{const F=[];for(const V of c[z])V.x<0||V.x>=d||V.y<0||V.y>=d||(A(V),F.push(V));c[z]=F}}for(const y of c)for(const x of y)XA(x,m);return c}function Uc(r,n){return{type:r.type,id:r.id,properties:r.properties,geometry:n?Ba(r):[]}}function Fg(r,n,i,c,d){r.emplaceBack(2*n+(c+1)/2,2*i+(d+1)/2)}function $g(r,n,i){r.emplaceBack(n.x,n.y,n.z,i[0]*16384,i[1]*16384,i[2]*16384)}class Qv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(i=>i.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new kt,this.indexArray=new cn,this.segments=new Qr,this.programConfigurations=new Lc(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(n,i,c,d){const m=this.layers[0],y=[];let x=null;m.type==="circle"&&(x=m.layout.get("circle-sort-key"));for(const{feature:T,id:P,index:A,sourceLayerIndex:z}of n){const F=this.layers[0]._featureFilter.needGeometry,V=Uc(T,F);if(!this.layers[0]._featureFilter.filter(new I(this.zoom),V,c))continue;const X=x?x.evaluate(V,{},c):void 0,ne={id:P,properties:T.properties,type:T.type,sourceLayerIndex:z,index:A,geometry:F?V.geometry:Ba(T,c,d),patterns:{},sortKey:X};y.push(ne)}x&&y.sort((T,P)=>T.sortKey-P.sortKey);let S=null;d.projection.name==="globe"&&(this.globeExtVertexArray=new It,S=d.projection);for(const T of y){const{geometry:P,index:A,sourceLayerIndex:z}=T,F=n[A].feature;this.addFeature(T,P,A,i.availableImages,c,S),i.featureIndex.insert(F,P,A,z,this.index)}}update(n,i,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,i,this.stateDependentLayers,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,LA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,OA.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,i,c,d,m,y){for(const x of i)for(const S of x){const T=S.x,P=S.y;if(T<0||T>=vn||P<0||P>=vn)continue;if(y){const F=y.projectTilePoint(T,P,m),V=y.upVector(m,T,P),X=this.globeExtVertexArray;$g(X,F,V),$g(X,F,V),$g(X,F,V),$g(X,F,V)}const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),z=A.vertexLength;Fg(this.layoutVertexArray,T,P,-1,-1),Fg(this.layoutVertexArray,T,P,1,-1),Fg(this.layoutVertexArray,T,P,1,1),Fg(this.layoutVertexArray,T,P,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+2,z+3),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,{},d,m)}}function wS(r,n){for(let i=0;i<r.length;i++)if(Vc(n,r[i]))return!0;for(let i=0;i<n.length;i++)if(Vc(r,n[i]))return!0;return!!ex(r,n)}function YA(r,n,i){return!!Vc(r,n)||!!tx(n,r,i)}function SS(r,n){if(r.length===1)return CS(n,r[0]);for(let i=0;i<n.length;i++){const c=n[i];for(let d=0;d<c.length;d++)if(Vc(r,c[d]))return!0}for(let i=0;i<r.length;i++)if(CS(n,r[i]))return!0;for(let i=0;i<n.length;i++)if(ex(r,n[i]))return!0;return!1}function KA(r,n,i){if(r.length>1){if(ex(r,n))return!0;for(let c=0;c<n.length;c++)if(tx(n[c],r,i))return!0}for(let c=0;c<r.length;c++)if(tx(r[c],n,i))return!0;return!1}function ex(r,n){if(r.length===0||n.length===0)return!1;for(let i=0;i<r.length-1;i++){const c=r[i],d=r[i+1];for(let m=0;m<n.length-1;m++)if(JA(c,d,n[m],n[m+1]))return!0}return!1}function JA(r,n,i,c){return Vt(r,i,c)!==Vt(n,i,c)&&Vt(r,n,i)!==Vt(r,n,c)}function tx(r,n,i){const c=i*i;if(n.length===1)return r.distSqr(n[0])<c;for(let d=1;d<n.length;d++)if(TS(r,n[d-1],n[d])<c)return!0;return!1}function TS(r,n,i){const c=n.distSqr(i);if(c===0)return r.distSqr(n);const d=((r.x-n.x)*(i.x-n.x)+(r.y-n.y)*(i.y-n.y))/c;return r.distSqr(d<0?n:d>1?i:i.sub(n)._mult(d)._add(n))}function CS(r,n){let i,c,d,m=!1;for(let y=0;y<r.length;y++){i=r[y];for(let x=0,S=i.length-1;x<i.length;S=x++)c=i[x],d=i[S],c.y>n.y!=d.y>n.y&&n.x<(d.x-c.x)*(n.y-c.y)/(d.y-c.y)+c.x&&(m=!m)}return m}function Vc(r,n){let i=!1;for(let c=0,d=r.length-1;c<r.length;d=c++){const m=r[c],y=r[d];m.y>n.y!=y.y>n.y&&n.x<(y.x-m.x)*(n.y-m.y)/(y.y-m.y)+m.x&&(i=!i)}return i}function ES(r,n,i,c,d){for(const y of r)if(n<=y.x&&i<=y.y&&c>=y.x&&d>=y.y)return!0;const m=[new ae(n,i),new ae(n,d),new ae(c,d),new ae(c,i)];if(r.length>2){for(const y of m)if(Vc(r,y))return!0}for(let y=0;y<r.length-1;y++)if(QA(r[y],r[y+1],m))return!0;return!1}function QA(r,n,i){const c=i[0],d=i[2];if(r.x<c.x&&n.x<c.x||r.x>d.x&&n.x>d.x||r.y<c.y&&n.y<c.y||r.y>d.y&&n.y>d.y)return!1;const m=Vt(r,n,i[0]);return m!==Vt(r,n,i[1])||m!==Vt(r,n,i[2])||m!==Vt(r,n,i[3])}function cd(r,n,i){const c=n.paint.get(r).value;return c.kind==="constant"?c.value:i.programConfigurations.get(n.id).getMaxValue(r)}function Ng(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function kS(r,n,i,c,d){if(!n[0]&&!n[1])return r;const m=ae.convert(n)._mult(d);i==="viewport"&&m._rotate(-c);const y=[];for(let x=0;x<r.length;x++)y.push(r[x].sub(m));return y}function PS(r,n,i,c){const d=ae.convert(r)._mult(c);return n==="viewport"&&d._rotate(-i),d}en(Qv,"CircleBucket",{omit:["layers"]});const eD=new xe({"circle-sort-key":new ie(ct.layout_circle["circle-sort-key"])});var tD={paint:new xe({"circle-radius":new ie(ct.paint_circle["circle-radius"]),"circle-color":new ie(ct.paint_circle["circle-color"]),"circle-blur":new ie(ct.paint_circle["circle-blur"]),"circle-opacity":new ie(ct.paint_circle["circle-opacity"]),"circle-translate":new Z(ct.paint_circle["circle-translate"]),"circle-translate-anchor":new Z(ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Z(ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Z(ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ie(ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ie(ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ie(ct.paint_circle["circle-stroke-opacity"])}),layout:eD};function MS(r,n,i,c,d,m,y,x,S){if(m&&r.queryGeometry.isAboveHorizon)return!1;m&&(S*=r.pixelToTileUnitsFactor);const T=r.tileID.canonical,P=i.projection.upVectorScale(T,i.center.lat,i.worldSize).metersToTile;for(const A of n)for(const z of A){const F=z.add(x),V=d&&i.elevation?i.elevation.exaggeration()*d.getElevationAt(F.x,F.y,!0):0,X=i.projection.projectTilePoint(F.x,F.y,T);if(V>0){const me=i.projection.upVector(T,F.x,F.y);X.x+=me[0]*P*V,X.y+=me[1]*P*V,X.z+=me[2]*P*V}const ne=m?F:nD(X.x,X.y,X.z,c),fe=m?r.tilespaceRays.map(me=>iD(me,V)):r.queryGeometry.screenGeometry,Ee=Fc([],[X.x,X.y,X.z,1],c);if(!y&&m?S*=Ee[3]/i.cameraToCenterDistance:y&&!m&&(S*=i.cameraToCenterDistance/Ee[3]),m){const me=Ai((z.y/vn+T.y)/(1<<T.z));S/=i.projection.pixelsPerMeter(me,1)/Ls(1,me)}if(YA(fe,ne,S))return!0}return!1}function nD(r,n,i,c){const d=Fc([],[r,n,i,1],c);return new ae(d[0]/d[3],d[1]/d[3])}const IS=id(0,0,0),rD=id(0,0,1);function iD(r,n){const i=Fv();return IS[2]=n,r.intersectsPlane(IS,rD,i),new ae(i[0],i[1])}class AS extends Qv{}function DS(r,{width:n,height:i},c,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==n*i*c)throw new RangeError("mismatched image size")}else d=new Uint8Array(n*i*c);return r.width=n,r.height=i,r.data=d,r}function zS(r,n,i){const{width:c,height:d}=n;c===r.width&&d===r.height||(nx(r,n,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,c),height:Math.min(r.height,d)},i),r.width=c,r.height=d,r.data=n.data)}function nx(r,n,i,c,d,m){if(d.width===0||d.height===0)return n;if(d.width>r.width||d.height>r.height||i.x>r.width-d.width||i.y>r.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>n.width||d.height>n.height||c.x>n.width-d.width||c.y>n.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const y=r.data,x=n.data;for(let S=0;S<d.height;S++){const T=((i.y+S)*r.width+i.x)*m,P=((c.y+S)*n.width+c.x)*m;for(let A=0;A<d.width*m;A++)x[P+A]=y[T+A]}return n}en(AS,"HeatmapBucket",{omit:["layers"]});class Fa{constructor(n,i){DS(this,n,1,i)}resize(n){zS(this,new Fa(n),1)}clone(){return new Fa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,i,c,d,m){nx(n,i,c,d,m,1)}}class mo{constructor(n,i){DS(this,n,4,i)}resize(n){zS(this,new mo(n),4)}replace(n,i){i?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,i,c,d,m){nx(n,i,c,d,m,4)}}en(Fa,"AlphaImage"),en(mo,"RGBAImage");var oD={paint:new xe({"heatmap-radius":new ie(ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ie(ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Z(ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ve(ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Z(ct.paint_heatmap["heatmap-opacity"])})};function rx(r){const n={},i=r.resolution||256,c=r.clips?r.clips.length:1,d=r.image||new mo({width:i,height:c}),m=(y,x,S)=>{n[r.evaluationKey]=S;const T=r.expression.evaluate(n);d.data[y+x+0]=Math.floor(255*T.r/T.a),d.data[y+x+1]=Math.floor(255*T.g/T.a),d.data[y+x+2]=Math.floor(255*T.b/T.a),d.data[y+x+3]=Math.floor(255*T.a)};if(r.clips)for(let y=0,x=0;y<c;++y,x+=4*i)for(let S=0,T=0;S<i;S++,T+=4){const P=S/(i-1),{start:A,end:z}=r.clips[y];m(x,T,A*(1-P)+z*P)}else for(let y=0,x=0;y<i;y++,x+=4)m(0,x,y/(i-1));return d}var sD={paint:new xe({"hillshade-illumination-direction":new Z(ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Z(ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Z(ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Z(ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Z(ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Z(ct.paint_hillshade["hillshade-accent-color"])})};const aD=Ue([{name:"a_pos",components:2,type:"Int16"}],4),{members:lD}=aD;var ix={exports:{}};function Ug(r,n,i){i=i||2;var c,d,m,y,x,S,T,P=n&&n.length,A=P?n[0]*i:r.length,z=RS(r,0,A,i,!0),F=[];if(!z||z.next===z.prev)return F;if(P&&(z=function(X,ne,fe,Ee){var me,Te,Ie,Pe=[];for(me=0,Te=ne.length;me<Te;me++)(Ie=RS(X,ne[me]*Ee,me<Te-1?ne[me+1]*Ee:X.length,Ee,!1))===Ie.next&&(Ie.steiner=!0),Pe.push(gD(Ie));for(Pe.sort(pD),me=0;me<Pe.length;me++)fe=fD(Pe[me],fe);return fe}(r,n,z,i)),r.length>80*i){c=m=r[0],d=y=r[1];for(var V=i;V<A;V+=i)(x=r[V])<c&&(c=x),(S=r[V+1])<d&&(d=S),x>m&&(m=x),S>y&&(y=S);T=(T=Math.max(m-c,y-d))!==0?32767/T:0}return $p(z,F,i,c,d,T,0),F}function RS(r,n,i,c,d){var m,y;if(d===ax(r,n,i,c)>0)for(m=n;m<i;m+=c)y=BS(m,r[m],r[m+1],y);else for(m=i-c;m>=n;m-=c)y=BS(m,r[m],r[m+1],y);return y&&Vg(y,y.next)&&(Up(y),y=y.next),y}function jc(r,n){if(!r)return r;n||(n=r);var i,c=r;do if(i=!1,c.steiner||!Vg(c,c.next)&&ei(c.prev,c,c.next)!==0)c=c.next;else{if(Up(c),(c=n=c.prev)===c.next)break;i=!0}while(i||c!==n);return n}function $p(r,n,i,c,d,m,y){if(r){!y&&m&&function(P,A,z,F){var V=P;do V.z===0&&(V.z=ox(V.x,V.y,A,z,F)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==P);V.prevZ.nextZ=null,V.prevZ=null,function(X){var ne,fe,Ee,me,Te,Ie,Pe,Ke,Ze=1;do{for(fe=X,X=null,Te=null,Ie=0;fe;){for(Ie++,Ee=fe,Pe=0,ne=0;ne<Ze&&(Pe++,Ee=Ee.nextZ);ne++);for(Ke=Ze;Pe>0||Ke>0&&Ee;)Pe!==0&&(Ke===0||!Ee||fe.z<=Ee.z)?(me=fe,fe=fe.nextZ,Pe--):(me=Ee,Ee=Ee.nextZ,Ke--),Te?Te.nextZ=me:X=me,me.prevZ=Te,Te=me;fe=Ee}Te.nextZ=null,Ze*=2}while(Ie>1)}(V)}(r,c,d,m);for(var x,S,T=r;r.prev!==r.next;)if(x=r.prev,S=r.next,m?uD(r,c,d,m):cD(r))n.push(x.i/i|0),n.push(r.i/i|0),n.push(S.i/i|0),Up(r),r=S.next,T=S.next;else if((r=S)===T){y?y===1?$p(r=dD(jc(r),n,i),n,i,c,d,m,2):y===2&&hD(r,n,i,c,d,m):$p(jc(r),n,i,c,d,m,1);break}}}function cD(r){var n=r.prev,i=r,c=r.next;if(ei(n,i,c)>=0)return!1;for(var d=n.x,m=i.x,y=c.x,x=n.y,S=i.y,T=c.y,P=d<m?d<y?d:y:m<y?m:y,A=x<S?x<T?x:T:S<T?S:T,z=d>m?d>y?d:y:m>y?m:y,F=x>S?x>T?x:T:S>T?S:T,V=c.next;V!==n;){if(V.x>=P&&V.x<=z&&V.y>=A&&V.y<=F&&ud(d,x,m,S,y,T,V.x,V.y)&&ei(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function uD(r,n,i,c){var d=r.prev,m=r,y=r.next;if(ei(d,m,y)>=0)return!1;for(var x=d.x,S=m.x,T=y.x,P=d.y,A=m.y,z=y.y,F=x<S?x<T?x:T:S<T?S:T,V=P<A?P<z?P:z:A<z?A:z,X=x>S?x>T?x:T:S>T?S:T,ne=P>A?P>z?P:z:A>z?A:z,fe=ox(F,V,n,i,c),Ee=ox(X,ne,n,i,c),me=r.prevZ,Te=r.nextZ;me&&me.z>=fe&&Te&&Te.z<=Ee;){if(me.x>=F&&me.x<=X&&me.y>=V&&me.y<=ne&&me!==d&&me!==y&&ud(x,P,S,A,T,z,me.x,me.y)&&ei(me.prev,me,me.next)>=0||(me=me.prevZ,Te.x>=F&&Te.x<=X&&Te.y>=V&&Te.y<=ne&&Te!==d&&Te!==y&&ud(x,P,S,A,T,z,Te.x,Te.y)&&ei(Te.prev,Te,Te.next)>=0))return!1;Te=Te.nextZ}for(;me&&me.z>=fe;){if(me.x>=F&&me.x<=X&&me.y>=V&&me.y<=ne&&me!==d&&me!==y&&ud(x,P,S,A,T,z,me.x,me.y)&&ei(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;Te&&Te.z<=Ee;){if(Te.x>=F&&Te.x<=X&&Te.y>=V&&Te.y<=ne&&Te!==d&&Te!==y&&ud(x,P,S,A,T,z,Te.x,Te.y)&&ei(Te.prev,Te,Te.next)>=0)return!1;Te=Te.nextZ}return!0}function dD(r,n,i){var c=r;do{var d=c.prev,m=c.next.next;!Vg(d,m)&&LS(d,c,c.next,m)&&Np(d,m)&&Np(m,d)&&(n.push(d.i/i|0),n.push(c.i/i|0),n.push(m.i/i|0),Up(c),Up(c.next),c=r=m),c=c.next}while(c!==r);return jc(c)}function hD(r,n,i,c,d,m){var y=r;do{for(var x=y.next.next;x!==y.prev;){if(y.i!==x.i&&yD(y,x)){var S=OS(y,x);return y=jc(y,y.next),S=jc(S,S.next),$p(y,n,i,c,d,m,0),void $p(S,n,i,c,d,m,0)}x=x.next}y=y.next}while(y!==r)}function pD(r,n){return r.x-n.x}function fD(r,n){var i=function(d,m){var y,x=m,S=d.x,T=d.y,P=-1/0;do{if(T<=x.y&&T>=x.next.y&&x.next.y!==x.y){var A=x.x+(T-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(A<=S&&A>P&&(P=A,y=x.x<x.next.x?x:x.next,A===S))return y}x=x.next}while(x!==m);if(!y)return null;var z,F=y,V=y.x,X=y.y,ne=1/0;x=y;do S>=x.x&&x.x>=V&&S!==x.x&&ud(T<X?S:P,T,V,X,T<X?P:S,T,x.x,x.y)&&(z=Math.abs(T-x.y)/(S-x.x),Np(x,d)&&(z<ne||z===ne&&(x.x>y.x||x.x===y.x&&mD(y,x)))&&(y=x,ne=z)),x=x.next;while(x!==F);return y}(r,n);if(!i)return n;var c=OS(i,r);return jc(c,c.next),jc(i,i.next)}function mD(r,n){return ei(r.prev,r,n.prev)<0&&ei(n.next,r,r.next)<0}function ox(r,n,i,c,d){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-i)*d|0)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-c)*d|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function gD(r){var n=r,i=r;do(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next;while(n!==r);return i}function ud(r,n,i,c,d,m,y,x){return(d-y)*(n-x)>=(r-y)*(m-x)&&(r-y)*(c-x)>=(i-y)*(n-x)&&(i-y)*(m-x)>=(d-y)*(c-x)}function yD(r,n){return r.next.i!==n.i&&r.prev.i!==n.i&&!function(i,c){var d=i;do{if(d.i!==i.i&&d.next.i!==i.i&&d.i!==c.i&&d.next.i!==c.i&&LS(d,d.next,i,c))return!0;d=d.next}while(d!==i);return!1}(r,n)&&(Np(r,n)&&Np(n,r)&&function(i,c){var d=i,m=!1,y=(i.x+c.x)/2,x=(i.y+c.y)/2;do d.y>x!=d.next.y>x&&d.next.y!==d.y&&y<(d.next.x-d.x)*(x-d.y)/(d.next.y-d.y)+d.x&&(m=!m),d=d.next;while(d!==i);return m}(r,n)&&(ei(r.prev,r,n.prev)||ei(r,n.prev,n))||Vg(r,n)&&ei(r.prev,r,r.next)>0&&ei(n.prev,n,n.next)>0)}function ei(r,n,i){return(n.y-r.y)*(i.x-n.x)-(n.x-r.x)*(i.y-n.y)}function Vg(r,n){return r.x===n.x&&r.y===n.y}function LS(r,n,i,c){var d=Wg(ei(r,n,i)),m=Wg(ei(r,n,c)),y=Wg(ei(i,c,r)),x=Wg(ei(i,c,n));return d!==m&&y!==x||!(d!==0||!jg(r,i,n))||!(m!==0||!jg(r,c,n))||!(y!==0||!jg(i,r,c))||!(x!==0||!jg(i,n,c))}function jg(r,n,i){return n.x<=Math.max(r.x,i.x)&&n.x>=Math.min(r.x,i.x)&&n.y<=Math.max(r.y,i.y)&&n.y>=Math.min(r.y,i.y)}function Wg(r){return r>0?1:r<0?-1:0}function Np(r,n){return ei(r.prev,r,r.next)<0?ei(r,n,r.next)>=0&&ei(r,r.prev,n)>=0:ei(r,n,r.prev)<0||ei(r,r.next,n)<0}function OS(r,n){var i=new sx(r.i,r.x,r.y),c=new sx(n.i,n.x,n.y),d=r.next,m=n.prev;return r.next=n,n.prev=r,i.next=d,d.prev=i,c.next=i,i.prev=c,m.next=c,c.prev=m,c}function BS(r,n,i,c){var d=new sx(r,n,i);return c?(d.next=c.next,d.prev=c,c.next.prev=d,c.next=d):(d.prev=d,d.next=d),d}function Up(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function sx(r,n,i){this.i=r,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ax(r,n,i,c){for(var d=0,m=n,y=i-c;m<i;m+=c)d+=(r[y]-r[m])*(r[m+1]+r[y+1]),y=m;return d}ix.exports=Ug,ix.exports.default=Ug,Ug.deviation=function(r,n,i,c){var d=n&&n.length,m=Math.abs(ax(r,0,d?n[0]*i:r.length,i));if(d)for(var y=0,x=n.length;y<x;y++)m-=Math.abs(ax(r,n[y]*i,y<x-1?n[y+1]*i:r.length,i));var S=0;for(y=0;y<c.length;y+=3){var T=c[y]*i,P=c[y+1]*i,A=c[y+2]*i;S+=Math.abs((r[T]-r[A])*(r[P+1]-r[T+1])-(r[T]-r[P])*(r[A+1]-r[T+1]))}return m===0&&S===0?0:Math.abs((S-m)/m)},Ug.flatten=function(r){for(var n=r[0][0].length,i={vertices:[],holes:[],dimensions:n},c=0,d=0;d<r.length;d++){for(var m=0;m<r[d].length;m++)for(var y=0;y<n;y++)i.vertices.push(r[d][m][y]);d>0&&i.holes.push(c+=r[d-1].length)}return i};var lx=G(ix.exports);function _D(r,n,i,c,d){FS(r,n,i||0,c||r.length-1,d||vD)}function FS(r,n,i,c,d){for(;c>i;){if(c-i>600){var m=c-i+1,y=n-i+1,x=Math.log(m),S=.5*Math.exp(2*x/3),T=.5*Math.sqrt(x*S*(m-S)/m)*(y-m/2<0?-1:1);FS(r,n,Math.max(i,Math.floor(n-y*S/m+T)),Math.min(c,Math.floor(n+(m-y)*S/m+T)),d)}var P=r[n],A=i,z=c;for(Vp(r,i,n),d(r[c],P)>0&&Vp(r,i,c);A<z;){for(Vp(r,A,z),A++,z--;d(r[A],P)<0;)A++;for(;d(r[z],P)>0;)z--}d(r[i],P)===0?Vp(r,i,z):Vp(r,++z,c),z<=n&&(i=z+1),n<=z&&(c=z-1)}}function Vp(r,n,i){var c=r[n];r[n]=r[i],r[i]=c}function vD(r,n){return r<n?-1:r>n?1:0}function cx(r,n){const i=r.length;if(i<=1)return[r];const c=[];let d,m;for(let y=0;y<i;y++){const x=lt(r[y]);x!==0&&(r[y].area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(d&&c.push(d),d=[r[y]]):d.push(r[y]))}if(d&&c.push(d),n>1)for(let y=0;y<c.length;y++)c[y].length<=n||(_D(c[y],n,1,c[y].length-1,xD),c[y]=c[y].slice(0,n));return c}function xD(r,n){return n.area-r.area}function ux(r,n,i){const c=i.patternDependencies;let d=!1;for(const m of n){const y=m.paint.get(`${r}-pattern`);y.isConstant()||(d=!0);const x=y.constantOr(null);x&&(d=!0,c[x]=!0)}return d}function dx(r,n,i,c,d){const m=d.patternDependencies;for(const y of n){const x=y.paint.get(`${r}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:c},i,{},d.availableImages);S=S&&S.name?S.name:S,m[S]=!0,i.patterns[y.id]=S}}return i}class Gg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(i=>i.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new kt,this.indexArray=new cn,this.indexArray2=new gi,this.programConfigurations=new Lc(n.layers,n.zoom),this.segments=new Qr,this.segments2=new Qr,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.projection=n.projection}populate(n,i,c,d){this.hasPattern=ux("fill",this.layers,i);const m=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:x,id:S,index:T,sourceLayerIndex:P}of n){const A=this.layers[0]._featureFilter.needGeometry,z=Uc(x,A);if(!this.layers[0]._featureFilter.filter(new I(this.zoom),z,c))continue;const F=m?m.evaluate(z,{},c,i.availableImages):void 0,V={id:S,properties:x.properties,type:x.type,sourceLayerIndex:P,index:T,geometry:A?z.geometry:Ba(x,c,d),patterns:{},sortKey:F};y.push(V)}m&&y.sort((x,S)=>x.sortKey-S.sortKey);for(const x of y){const{geometry:S,index:T,sourceLayerIndex:P}=x;if(this.hasPattern){const A=dx("fill",this.layers,x,this.zoom,i);this.patternFeatures.push(A)}else this.addFeature(x,S,T,c,{},i.availableImages);i.featureIndex.insert(n[T].feature,S,T,P,this.index)}}update(n,i,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,i,this.stateDependentLayers,c,d)}addFeatures(n,i,c,d,m){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,i,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,lD),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,i,c,d,m,y=[]){for(const x of cx(i,500)){let S=0;for(const V of x)S+=V.length;const T=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),P=T.vertexLength,A=[],z=[];for(const V of x){if(V.length===0)continue;V!==x[0]&&z.push(A.length/2);const X=this.segments2.prepareSegment(V.length,this.layoutVertexArray,this.indexArray2),ne=X.vertexLength;this.layoutVertexArray.emplaceBack(V[0].x,V[0].y),this.indexArray2.emplaceBack(ne+V.length-1,ne),A.push(V[0].x),A.push(V[0].y);for(let fe=1;fe<V.length;fe++)this.layoutVertexArray.emplaceBack(V[fe].x,V[fe].y),this.indexArray2.emplaceBack(ne+fe-1,ne+fe),A.push(V[fe].x),A.push(V[fe].y);X.vertexLength+=V.length,X.primitiveLength+=V.length}const F=lx(A,z);for(let V=0;V<F.length;V+=3)this.indexArray.emplaceBack(P+F[V],P+F[V+1],P+F[V+2]);T.vertexLength+=S,T.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,y,d)}}en(Gg,"FillBucket",{omit:["layers","patternFeatures"]});const bD=new xe({"fill-sort-key":new ie(ct.layout_fill["fill-sort-key"])});var wD={paint:new xe({"fill-antialias":new Z(ct.paint_fill["fill-antialias"]),"fill-opacity":new ie(ct.paint_fill["fill-opacity"]),"fill-color":new ie(ct.paint_fill["fill-color"]),"fill-outline-color":new ie(ct.paint_fill["fill-outline-color"]),"fill-translate":new Z(ct.paint_fill["fill-translate"]),"fill-translate-anchor":new Z(ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new ie(ct.paint_fill["fill-pattern"])}),layout:bD};const SD=Ue([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),TD=Ue([{name:"a_centroid_pos",components:2,type:"Uint16"}]),CD=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:ED}=SD;var Hg={},kD=oe,$S=dd;function dd(r,n,i,c,d){this.properties={},this.extent=i,this.type=0,this._pbf=r,this._geometry=-1,this._keys=c,this._values=d,r.readFields(PD,this,n)}function PD(r,n,i){r==1?n.id=i.readVarint():r==2?function(c,d){for(var m=c.readVarint()+c.pos;c.pos<m;){var y=d._keys[c.readVarint()],x=d._values[c.readVarint()];d.properties[y]=x}}(i,n):r==3?n.type=i.readVarint():r==4&&(n._geometry=i.pos)}function MD(r){for(var n,i,c=0,d=0,m=r.length,y=m-1;d<m;y=d++)c+=((i=r[y]).x-(n=r[d]).x)*(n.y+i.y);return c}dd.types=["Unknown","Point","LineString","Polygon"],dd.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var n,i=r.readVarint()+r.pos,c=1,d=0,m=0,y=0,x=[];r.pos<i;){if(d<=0){var S=r.readVarint();c=7&S,d=S>>3}if(d--,c===1||c===2)m+=r.readSVarint(),y+=r.readSVarint(),c===1&&(n&&x.push(n),n=[]),n.push(new kD(m,y));else{if(c!==7)throw new Error("unknown command "+c);n&&n.push(n[0].clone())}}return n&&x.push(n),x},dd.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var n=r.readVarint()+r.pos,i=1,c=0,d=0,m=0,y=1/0,x=-1/0,S=1/0,T=-1/0;r.pos<n;){if(c<=0){var P=r.readVarint();i=7&P,c=P>>3}if(c--,i===1||i===2)(d+=r.readSVarint())<y&&(y=d),d>x&&(x=d),(m+=r.readSVarint())<S&&(S=m),m>T&&(T=m);else if(i!==7)throw new Error("unknown command "+i)}return[y,S,x,T]},dd.prototype.toGeoJSON=function(r,n,i){var c,d,m=this.extent*Math.pow(2,i),y=this.extent*r,x=this.extent*n,S=this.loadGeometry(),T=dd.types[this.type];function P(F){for(var V=0;V<F.length;V++){var X=F[V];F[V]=[360*(X.x+y)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+x)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(c=0;c<S.length;c++)A[c]=S[c][0];P(S=A);break;case 2:for(c=0;c<S.length;c++)P(S[c]);break;case 3:for(S=function(F){var V=F.length;if(V<=1)return[F];for(var X,ne,fe=[],Ee=0;Ee<V;Ee++){var me=MD(F[Ee]);me!==0&&(ne===void 0&&(ne=me<0),ne===me<0?(X&&fe.push(X),X=[F[Ee]]):X.push(F[Ee]))}return X&&fe.push(X),fe}(S),c=0;c<S.length;c++)for(d=0;d<S[c].length;d++)P(S[c][d])}S.length===1?S=S[0]:T="Multi"+T;var z={type:"Feature",geometry:{type:T,coordinates:S},properties:this.properties};return"id"in this&&(z.id=this.id),z};var ID=$S,NS=US;function US(r,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(AD,this,n),this.length=this._features.length}function AD(r,n,i){r===15?n.version=i.readVarint():r===1?n.name=i.readString():r===5?n.extent=i.readVarint():r===2?n._features.push(i.pos):r===3?n._keys.push(i.readString()):r===4&&n._values.push(function(c){for(var d=null,m=c.readVarint()+c.pos;c.pos<m;){var y=c.readVarint()>>3;d=y===1?c.readString():y===2?c.readFloat():y===3?c.readDouble():y===4?c.readVarint64():y===5?c.readVarint():y===6?c.readSVarint():y===7?c.readBoolean():null}return d}(i))}US.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var n=this._pbf.readVarint()+this._pbf.pos;return new ID(this._pbf,n,this.extent,this._keys,this._values)};var DD=NS;function zD(r,n,i){if(r===3){var c=new DD(i,i.readVarint()+i.pos);c.length&&(n[c.name]=c)}}var hx=Hg.VectorTile=function(r,n){this.layers=r.readFields(zD,{},n)},qg=Hg.VectorTileFeature=$S;function Zg(r,n,i,c){const d=[],m=c===0?(y,x,S,T,P,A)=>{y.push(new ae(A,S+(A-x)/(T-x)*(P-S)))}:(y,x,S,T,P,A)=>{y.push(new ae(x+(A-S)/(P-S)*(T-x),A))};for(const y of r){const x=[];for(const S of y){if(S.length<=2)continue;const T=[];for(let z=0;z<S.length-1;z++){const F=S[z].x,V=S[z].y,X=S[z+1].x,ne=S[z+1].y,fe=c===0?F:V,Ee=c===0?X:ne;fe<n?Ee>n&&m(T,F,V,X,ne,n):fe>i?Ee<i&&m(T,F,V,X,ne,i):T.push(S[z]),Ee<n&&fe>=n&&m(T,F,V,X,ne,n),Ee>i&&fe<=i&&m(T,F,V,X,ne,i)}let P=S[S.length-1];const A=c===0?P.x:P.y;A>=n&&A<=i&&T.push(P),T.length&&(P=T[T.length-1],T[0].x===P.x&&T[0].y===P.y||T.push(T[0]),x.push(T))}x.length&&d.push(x)}return d}Hg.VectorTileLayer=NS;const RD=qg.types,LD=Math.pow(2,13);function jp(r,n,i,c,d,m,y,x){r.emplaceBack((n<<1)+y,(i<<1)+m,(Math.floor(c*LD)<<1)+d,Math.round(x))}function Wp(r,n,i){r.emplaceBack(n.x,n.y,n.z,i[0]*16384,i[1]*16384,i[2]*16384)}class VS{constructor(){this.acc=new ae(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ae(n.x,n.y),this.max=new ae(n.x,n.y))}append(n,i){this.currentPolyCount.edges++,this.acc._add(n);const c=this.min,d=this.max;n.x<c.x?c.x=n.x:n.x>d.x&&(d.x=n.x),n.y<c.y?c.y=n.y:n.y>d.y&&(d.y=n.y),((n.x===0||n.x===vn)&&n.x===i.x)!=((n.y===0||n.y===vn)&&n.y===i.y)&&this.processBorderOverlap(n,i),i.x<0!=n.x<0&&this.addBorderIntersection(0,Xn(i.y,n.y,(0-i.x)/(n.x-i.x))),i.x>vn!=n.x>vn&&this.addBorderIntersection(1,Xn(i.y,n.y,(vn-i.x)/(n.x-i.x))),i.y<0!=n.y<0&&this.addBorderIntersection(2,Xn(i.x,n.x,(0-i.y)/(n.y-i.y))),i.y>vn!=n.y>vn&&this.addBorderIntersection(3,Xn(i.x,n.x,(vn-i.y)/(n.y-i.y)))}addBorderIntersection(n,i){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[n];i<c[0]&&(c[0]=i),i>c[1]&&(c[1]=i)}processBorderOverlap(n,i){if(n.x===i.x){if(n.y===i.y)return;const c=n.x===0?0:1;this.addBorderIntersection(c,i.y),this.addBorderIntersection(c,n.y)}else{const c=n.y===0?2:3;this.addBorderIntersection(c,i.x),this.addBorderIntersection(c,n.x)}}centroid(){const n=this.polyCount.reduce((i,c)=>i+c.edges,0);return n!==0?this.acc.div(n)._round():new ae(0,0)}span(){return new ae(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,i)=>n+ +(i[0]!==Number.MAX_VALUE),0)}}class Gp{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(i=>i.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new ft,this.centroidVertexArray=new Is,this.indexArray=new cn,this.programConfigurations=new Lc(n.layers,n.zoom),this.segments=new Qr,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.enableTerrain=n.enableTerrain}populate(n,i,c,d){this.features=[],this.hasPattern=ux("fill-extrusion",this.layers,i),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(m){const y=Math.exp(Math.PI*(1-m.y/(1<<m.z)*2));return 80150034*y/(y*y+1)/vn/(1<<m.z)}(c),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:y,index:x,sourceLayerIndex:S}of n){const T=this.layers[0]._featureFilter.needGeometry,P=Uc(m,T);if(!this.layers[0]._featureFilter.filter(new I(this.zoom),P,c))continue;const A={id:y,sourceLayerIndex:S,index:x,geometry:T?P.geometry:Ba(m,c,d),properties:m.properties,type:m.type,patterns:{}},z=this.layoutVertexArray.length;this.hasPattern?this.features.push(dx("fill-extrusion",this.layers,A,this.zoom,i)):this.addFeature(A,A.geometry,x,c,{},i.availableImages,d),i.featureIndex.insert(m,A.geometry,x,S,this.index,z)}this.sortBorders()}addFeatures(n,i,c,d,m){for(const y of this.features){const{geometry:x}=y;this.addFeature(y,x,y.index,i,c,d,m)}this.sortBorders()}update(n,i,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,i,this.stateDependentLayers,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ED),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,CD.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,TD.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,i,c,d,m,y,x){const S=[new ae(0,0),new ae(vn,vn)],T=x.projection,P=T.name==="globe",A=this.enableTerrain&&!P?new VS:null,z=RD[n.type]==="Polygon";P&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new It);const F=cx(i,500);for(let fe=F.length-1;fe>=0;fe--){const Ee=F[fe];(Ee.length===0||(V=Ee[0]).every(me=>me.x<=0)||V.every(me=>me.x>=vn)||V.every(me=>me.y<=0)||V.every(me=>me.y>=vn))&&F.splice(fe,1)}var V;let X;if(P)X=XS(F,S,d);else{X=[];for(const fe of F)X.push({polygon:fe,bounds:S})}const ne=z?this.edgeRadius:0;for(const{polygon:fe,bounds:Ee}of X){let me=0,Te=0;for(const Pe of fe)z&&!Pe[0].equals(Pe[Pe.length-1])&&Pe.push(Pe[0]),Te+=z?Pe.length-1:Pe.length;const Ie=this.segments.prepareSegment((z?5:4)*Te,this.layoutVertexArray,this.indexArray);if(z){const Pe=[],Ke=[];me=Ie.vertexLength;for(const ut of fe){let Pt,tt;ut.length&&ut!==fe[0]&&Ke.push(Pe.length/2),Pt=ut[1].sub(ut[0])._perp()._unit();for(let yt=1;yt<ut.length;yt++){const _t=ut[yt],Tt=ut[yt===ut.length-1?1:yt+1];let{x:Dt,y:st}=_t;if(ne){tt=Tt.sub(_t)._perp()._unit();const qt=Pt.add(tt)._unit(),on=ne*Math.min(4,1/(Pt.x*qt.x+Pt.y*qt.y));Dt+=on*qt.x,st+=on*qt.y,Pt=tt}jp(this.layoutVertexArray,Dt,st,0,0,1,1,0),Ie.vertexLength++,Pe.push(_t.x,_t.y),P&&Wp(this.layoutVertexExtArray,T.projectTilePoint(Dt,st,d),T.upVector(d,Dt,st))}}const Ze=lx(Pe,Ke);for(let ut=0;ut<Ze.length;ut+=3)this.indexArray.emplaceBack(me+Ze[ut],me+Ze[ut+2],me+Ze[ut+1]),Ie.primitiveLength++}for(const Pe of fe){A&&Pe.length&&A.startRing(Pe[0]);let Ke,Ze,ut,Pt=Pe.length>4&&HS(Pe[Pe.length-2],Pe[0],Pe[1]),tt=ne?OD(Pe[Pe.length-2],Pe[0],Pe[1],ne):0;Ze=Pe[1].sub(Pe[0])._perp()._unit();let yt=!0;for(let _t=1,Tt=0;_t<Pe.length;_t++){let Dt=Pe[_t-1],st=Pe[_t];const qt=Pe[_t===Pe.length-1?1:_t+1];if(A&&z&&A.currentPolyCount.top++,GS(st,Dt,Ee)){ne&&(Ze=qt.sub(st)._perp()._unit(),yt=!yt);continue}A&&A.append(st,Dt);const on=st.sub(Dt)._perp(),Xt=on.x/(Math.abs(on.x)+Math.abs(on.y)),zn=on.y>0?1:0,Rt=Dt.dist(st);if(Tt+Rt>32768&&(Tt=0),ne){ut=qt.sub(st)._perp()._unit();let Ln=WS(Dt,st,qt,jS(Ze,ut),ne);isNaN(Ln)&&(Ln=0);const Cn=st.sub(Dt)._unit();Dt=Dt.add(Cn.mult(tt))._round(),st=st.add(Cn.mult(-Ln))._round(),tt=Ln,Ze=ut}const fn=Ie.vertexLength,Rn=Pe.length>4&&HS(Dt,st,qt);let Kn=qS(Tt,Pt,yt);if(jp(this.layoutVertexArray,Dt.x,Dt.y,Xt,zn,0,0,Kn),jp(this.layoutVertexArray,Dt.x,Dt.y,Xt,zn,0,1,Kn),Tt+=Rt,Kn=qS(Tt,Rn,!yt),Pt=Rn,jp(this.layoutVertexArray,st.x,st.y,Xt,zn,0,0,Kn),jp(this.layoutVertexArray,st.x,st.y,Xt,zn,0,1,Kn),Ie.vertexLength+=4,this.indexArray.emplaceBack(fn+0,fn+1,fn+2),this.indexArray.emplaceBack(fn+1,fn+3,fn+2),Ie.primitiveLength+=2,ne){const Ln=me+(_t===1?Pe.length-2:_t-2),Cn=_t===1?me:Ln+1;if(this.indexArray.emplaceBack(fn+1,Ln,fn+3),this.indexArray.emplaceBack(Ln,Cn,fn+3),Ie.primitiveLength+=2,Ke===void 0&&(Ke=fn),!GS(qt,Pe[_t],Ee)){const Cr=_t===Pe.length-1?Ke:Ie.vertexLength;this.indexArray.emplaceBack(fn+2,fn+3,Cr),this.indexArray.emplaceBack(fn+3,Cr+1,Cr),this.indexArray.emplaceBack(fn+3,Cn,Cr+1),Ie.primitiveLength+=3}yt=!yt}if(P){const Ln=this.layoutVertexExtArray,Cn=T.projectTilePoint(Dt.x,Dt.y,d),Cr=T.projectTilePoint(st.x,st.y,d),On=T.upVector(d,Dt.x,Dt.y),Bn=T.upVector(d,st.x,st.y);Wp(Ln,Cn,On),Wp(Ln,Cn,On),Wp(Ln,Cr,Bn),Wp(Ln,Cr,Bn)}}z&&(me+=Pe.length-1)}}if(A&&A.polyCount.length>0){if(A.borders){A.vertexArrayOffset=this.centroidVertexArray.length;const fe=A.borders,Ee=this.featuresOnBorder.push(A)-1;for(let me=0;me<4;me++)fe[me][0]!==Number.MAX_VALUE&&this.borders[me].push(Ee)}this.encodeCentroid(A.borders?void 0:A.centroid(),A)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,y,d)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((i,c)=>this.featuresOnBorder[i].borders[n][0]-this.featuresOnBorder[c].borders[n][0])}encodeCentroid(n,i,c=!0){let d,m;if(n)if(n.y!==0){const x=i.span()._mult(this.tileToMeter);d=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(x.x/10)),m=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else d=Math.ceil(7*(n.x+450)),m=0;else d=0,m=+c;let y=c?this.centroidVertexArray.length:i.vertexArrayOffset;for(const x of i.polyCount){c&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let S=0;S<x.top;S++)this.centroidVertexArray.emplace(y++,d,m);for(let S=0;S<2*x.edges;S++)this.centroidVertexArray.emplace(y++,0,m),this.centroidVertexArray.emplace(y++,d,m)}}}function jS(r,n){const i=r.add(n)._unit();return r.x*i.x+r.y*i.y}function OD(r,n,i,c){const d=n.sub(r)._perp()._unit(),m=i.sub(n)._perp()._unit();return WS(r,n,i,jS(d,m),c)}function WS(r,n,i,c,d){const m=Math.sqrt(1-c*c);return Math.min(r.dist(n)/3,n.dist(i)/3,d*m/c)}function GS(r,n,i){return r.x<i[0].x&&n.x<i[0].x||r.x>i[1].x&&n.x>i[1].x||r.y<i[0].y&&n.y<i[0].y||r.y>i[1].y&&n.y>i[1].y}function HS(r,n,i){if(r.x<0||r.x>=vn||n.x<0||n.x>=vn||i.x<0||i.x>=vn)return!1;const c=i.sub(n),d=c.perp(),m=r.sub(n);return(c.x*m.x+c.y*m.y)/Math.sqrt((c.x*c.x+c.y*c.y)*(m.x*m.x+m.y*m.y))>-.866&&d.x*m.x+d.y*m.y<0}function qS(r,n,i){const c=n?2|r:-3&r;return i?1|c:-2&c}function ZS(){const r=Math.PI/32,n=Math.tan(r),i=Fp;return i*Math.sqrt(1+2*n*n)-i}function XS(r,n,i){const c=1<<i.z,d=zo(i.x/c),m=zo((i.x+1)/c),y=Ai(i.y/c),x=Ai((i.y+1)/c);return function(S,T,P,A,z=0,F){const V=[];if(!S.length||!P||!A)return V;const X=(Pe,Ke)=>{for(const Ze of Pe)V.push({polygon:Ze,bounds:Ke})},ne=Math.ceil(Math.log2(P)),fe=Math.ceil(Math.log2(A)),Ee=ne-fe,me=[];for(let Pe=0;Pe<Math.abs(Ee);Pe++)me.push(Ee>0?0:1);for(let Pe=0;Pe<Math.min(ne,fe);Pe++)me.push(0),me.push(1);let Te=S;if(Te=Zg(Te,T[0].y-z,T[1].y+z,1),Te=Zg(Te,T[0].x-z,T[1].x+z,0),!Te.length)return V;const Ie=[];for(me.length?Ie.push({polygons:Te,bounds:T,depth:0}):X(Te,T);Ie.length;){const Pe=Ie.pop(),Ke=Pe.depth,Ze=me[Ke],ut=Pe.bounds[0],Pt=Pe.bounds[1],tt=Ze===0?ut.x:ut.y,yt=Ze===0?Pt.x:Pt.y,_t=F?F(Ze,tt,yt):.5*(tt+yt),Tt=Zg(Pe.polygons,tt-z,_t+z,Ze),Dt=Zg(Pe.polygons,_t-z,yt+z,Ze);if(Tt.length){const st=[ut,new ae(Ze===0?_t:Pt.x,Ze===1?_t:Pt.y)];me.length>Ke+1?Ie.push({polygons:Tt,bounds:st,depth:Ke+1}):X(Tt,st)}if(Dt.length){const st=[new ae(Ze===0?_t:ut.x,Ze===1?_t:ut.y),Pt];me.length>Ke+1?Ie.push({polygons:Dt,bounds:st,depth:Ke+1}):X(Dt,st)}}return V}(r,n,Math.ceil((m-d)/11.25),Math.ceil((y-x)/11.25),1,(S,T,P)=>{if(S===0)return .5*(T+P);{const A=Ai((i.y+T/vn)/c);return(ta(.5*(Ai((i.y+P/vn)/c)+A))*c-i.y)*vn}})}en(Gp,"FillExtrusionBucket",{omit:["layers","features"]}),en(VS,"PartMetadata");const BD=new xe({"fill-extrusion-edge-radius":new Z(ct["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var FD={paint:new xe({"fill-extrusion-opacity":new Z(ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ie(ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Z(ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Z(ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ie(ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ie(ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ie(ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Z(ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Z(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Z(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Z(ct["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:BD};function YS(r,n,i){var c=2*Math.PI*6378137/256/Math.pow(2,i);return[r*c-2*Math.PI*6378137/2,n*c-2*Math.PI*6378137/2]}class Xg{constructor(n,i,c){this.z=n,this.x=i,this.y=c,this.key=Hp(0,n,n,i,c)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,i){const c=function(m,y,x){var S=YS(256*m,256*(y=Math.pow(2,x)-y-1),x),T=YS(256*(m+1),256*(y+1),x);return S[0]+","+S[1]+","+T[0]+","+T[1]}(this.x,this.y,this.z),d=function(m,y,x){let S,T="";for(let P=m;P>0;P--)S=1<<P-1,T+=(y&S?1:0)+(x&S?2:0);return T}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",d).replace("{bbox-epsg-3857}",c)}toString(){return`${this.z}/${this.x}/${this.y}`}}class KS{constructor(n,i){this.wrap=n,this.canonical=i,this.key=Hp(n,i.z,i.z,i.x,i.y)}}class Hi{constructor(n,i,c,d,m){this.overscaledZ=n,this.wrap=i,this.canonical=new Xg(c,+d,+m),this.key=i===0&&n===c?this.canonical.key:Hp(i,n,c,d,m)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const i=this.canonical.z-n;return n>this.canonical.z?new Hi(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hi(n,this.wrap,n,this.canonical.x>>i,this.canonical.y>>i)}calculateScaledKey(n,i=!0){if(this.overscaledZ===n&&i)return this.key;if(n>this.canonical.z)return Hp(this.wrap*+i,n,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-n;return Hp(this.wrap*+i,n,n,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const i=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>i&&n.canonical.y===this.canonical.y>>i}children(n){if(this.overscaledZ>=n)return[new Hi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const i=this.canonical.z+1,c=2*this.canonical.x,d=2*this.canonical.y;return[new Hi(i,this.wrap,i,c,d),new Hi(i,this.wrap,i,c+1,d),new Hi(i,this.wrap,i,c,d+1),new Hi(i,this.wrap,i,c+1,d+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Hi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Hi(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new KS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Hp(r,n,i,c,d){const m=1<<Math.min(i,22);let y=m*(d%m)+c%m;return r&&i<22&&(y+=m*m*((r<0?-2*r-1:2*r)%(1<<2*(22-i)))),16*(32*y+i)+(n-i)}en(Xg,"CanonicalTileID"),en(Hi,"OverscaledTileID",{omit:["projMatrix"]});class hd extends ae{constructor(n,i,c){super(n,i),this.z=c}}function qp(r,n){return r.x*n.x+r.y*n.y}function JS(r,n){if(r.length===1){let i=0;const c=n[i++];let d;for(;!d||c.equals(d);)if(d=n[i++],!d)return 1/0;for(;i<n.length;i++){const m=n[i],y=r[0],x=d.sub(c),S=m.sub(c),T=y.sub(c),P=qp(x,x),A=qp(x,S),z=qp(S,S),F=qp(T,x),V=qp(T,S),X=P*z-A*A,ne=(z*F-A*V)/X,fe=(P*V-A*F)/X,Ee=c.z*(1-ne-fe)+d.z*ne+m.z*fe;if(isFinite(Ee))return Ee}return 1/0}{let i=1/0;for(const c of n)i=Math.min(i,c.z);return i}}function QS(r,n,i,c,d,m,y,x){const S=y*d.getElevationAt(r,n,!0,!0),T=m[0]!==0,P=T?m[1]===0?y*(m[0]/7-450):y*function(A,z,F){const V=Math.floor(z[0]/8),X=Math.floor(z[1]/8),ne=10*(z[0]-8*V),fe=10*(z[1]-8*X),Ee=A.getElevationAt(V,X,!0,!0),me=A.getMeterToDEM(F),Te=Math.floor(.5*(ne*me-1)),Ie=Math.floor(.5*(fe*me-1)),Pe=A.tileCoordToPixel(V,X),Ke=2*Te+1,Ze=2*Ie+1,ut=function(Dt,st,qt,on,Xt){return[Dt.getElevationAtPixel(st,qt,!0),Dt.getElevationAtPixel(st+Xt,qt,!0),Dt.getElevationAtPixel(st,qt+Xt,!0),Dt.getElevationAtPixel(st+on,qt+Xt,!0)]}(A,Pe.x-Te,Pe.y-Ie,Ke,Ze),Pt=Math.abs(ut[0]-ut[1]),tt=Math.abs(ut[2]-ut[3]),yt=Math.abs(ut[0]-ut[2])+Math.abs(ut[1]-ut[3]),_t=Math.min(.25,.5*me*(Pt+tt)/Ke),Tt=Math.min(.25,.5*me*yt/Ze);return Ee+Math.max(_t*ne,Tt*fe)}(d,m,x):S;return{base:S+(i===0)?-1:i,top:T?Math.max(P+c,S+i+2):S+c}}const $D=Ue([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:ND}=$D,UD=Ue([{name:"a_packed",components:4,type:"Float32"}]),{members:VD}=UD,jD=qg.types,WD=Math.cos(Math.PI/180*37.5);class Yg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(i=>i.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(i=>{this.gradients[i.id]={}}),this.layoutVertexArray=new et,this.layoutVertexArray2=new Et,this.indexArray=new cn,this.programConfigurations=new Lc(n.layers,n.zoom),this.segments=new Qr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(n,i,c,d){this.hasPattern=ux("line",this.layers,i);const m=this.layers[0].layout.get("line-sort-key"),y=[];for(const{feature:P,id:A,index:z,sourceLayerIndex:F}of n){const V=this.layers[0]._featureFilter.needGeometry,X=Uc(P,V);if(!this.layers[0]._featureFilter.filter(new I(this.zoom),X,c))continue;const ne=m?m.evaluate(X,{},c):void 0,fe={id:A,properties:P.properties,type:P.type,sourceLayerIndex:F,index:z,geometry:V?X.geometry:Ba(P,c,d),patterns:{},sortKey:ne};y.push(fe)}m&&y.sort((P,A)=>P.sortKey-A.sortKey);const{lineAtlas:x,featureIndex:S}=i,T=this.addConstantDashes(x);for(const P of y){const{geometry:A,index:z,sourceLayerIndex:F}=P;if(T&&this.addFeatureDashes(P,x),this.hasPattern){const V=dx("line",this.layers,P,this.zoom,i);this.patternFeatures.push(V)}else this.addFeature(P,A,z,c,x.positions,i.availableImages);S.insert(n[z].feature,A,z,F,this.index)}}addConstantDashes(n){let i=!1;for(const c of this.layers){const d=c.paint.get("line-dasharray").value,m=c.layout.get("line-cap").value;if(d.kind!=="constant"||m.kind!=="constant")i=!0;else{const y=m.value,x=d.value;if(!x)continue;n.addDash(x,y)}}return i}addFeatureDashes(n,i){const c=this.zoom;for(const d of this.layers){const m=d.paint.get("line-dasharray").value,y=d.layout.get("line-cap").value;if(m.kind==="constant"&&y.kind==="constant")continue;let x,S;if(m.kind==="constant"){if(x=m.value,!x)continue}else x=m.evaluate({zoom:c},n);S=y.kind==="constant"?y.value:y.evaluate({zoom:c},n),i.addDash(x,S),n.patterns[d.id]=i.getKey(x,S)}}update(n,i,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,i,this.stateDependentLayers,c,d)}addFeatures(n,i,c,d,m){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,i,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,VD)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ND),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,i,c,d,m,y){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),T=x.get("line-cap").evaluate(n,{}),P=x.get("line-miter-limit"),A=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const z of i)this.addLine(z,n,S,T,P,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,y,d)}addLine(n,i,c,d,m,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<n.length-1;fe++)this.totalDistance+=n[fe].dist(n[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=jD[i.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let T=0;for(;T<S-1&&n[T].equals(n[T+1]);)T++;if(S<(x?3:2))return;c==="bevel"&&(m=1.05);const P=this.overscaling<=16?15*vn/(512*this.overscaling):0,A=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let z,F,V,X,ne;this.e1=this.e2=-1,x&&(z=n[S-2],ne=n[T].sub(z)._unit()._perp());for(let fe=T;fe<S;fe++){if(V=fe===S-1?x?n[T+1]:void 0:n[fe+1],V&&n[fe].equals(V))continue;ne&&(X=ne),z&&(F=z),z=n[fe],ne=V?V.sub(z)._unit()._perp():X,X=X||ne;let Ee=X.add(ne);Ee.x===0&&Ee.y===0||Ee._unit();const me=X.x*ne.x+X.y*ne.y,Te=Ee.x*ne.x+Ee.y*ne.y,Ie=Te!==0?1/Te:1/0,Pe=2*Math.sqrt(2-2*Te),Ke=Te<WD&&F&&V,Ze=X.x*ne.y-X.y*ne.x>0;if(Ke&&fe>T){const tt=z.dist(F);if(tt>2*P){const yt=z.sub(z.sub(F)._mult(P/tt)._round());this.updateDistance(F,yt),this.addCurrentVertex(yt,X,0,0,A),F=yt}}const ut=F&&V;let Pt=ut?c:x?"butt":d;if(ut&&Pt==="round"&&(Ie<y?Pt="miter":Ie<=2&&(Pt="fakeround")),Pt==="miter"&&Ie>m&&(Pt="bevel"),Pt==="bevel"&&(Ie>2&&(Pt="flipbevel"),Ie<m&&(Pt="miter")),F&&this.updateDistance(F,z),Pt==="miter")Ee._mult(Ie),this.addCurrentVertex(z,Ee,0,0,A);else if(Pt==="flipbevel"){if(Ie>100)Ee=ne.mult(-1);else{const tt=Ie*X.add(ne).mag()/X.sub(ne).mag();Ee._perp()._mult(tt*(Ze?-1:1))}this.addCurrentVertex(z,Ee,0,0,A),this.addCurrentVertex(z,Ee.mult(-1),0,0,A)}else if(Pt==="bevel"||Pt==="fakeround"){const tt=-Math.sqrt(Ie*Ie-1),yt=Ze?tt:0,_t=Ze?0:tt;if(F&&this.addCurrentVertex(z,X,yt,_t,A),Pt==="fakeround"){const Tt=Math.round(180*Pe/Math.PI/20);for(let Dt=1;Dt<Tt;Dt++){let st=Dt/Tt;if(st!==.5){const on=st-.5;st+=st*on*(st-1)*((1.0904+me*(me*(3.55645-1.43519*me)-3.2452))*on*on+(.848013+me*(.215638*me-1.06021)))}const qt=ne.sub(X)._mult(st)._add(X)._unit()._mult(Ze?-1:1);this.addHalfVertex(z,qt.x,qt.y,!1,Ze,0,A)}}V&&this.addCurrentVertex(z,ne,-yt,-_t,A)}else if(Pt==="butt")this.addCurrentVertex(z,Ee,0,0,A);else if(Pt==="square"){const tt=F?1:-1;F||this.addCurrentVertex(z,Ee,tt,tt,A),this.addCurrentVertex(z,Ee,0,0,A),F&&this.addCurrentVertex(z,Ee,tt,tt,A)}else Pt==="round"&&(F&&(this.addCurrentVertex(z,X,0,0,A),this.addCurrentVertex(z,X,1,1,A,!0)),V&&(this.addCurrentVertex(z,ne,-1,-1,A,!0),this.addCurrentVertex(z,ne,0,0,A)));if(Ke&&fe<S-1){const tt=z.dist(V);if(tt>2*P){const yt=z.add(V.sub(z)._mult(P/tt)._round());this.updateDistance(z,yt),this.addCurrentVertex(yt,ne,0,0,A),z=yt}}}}addCurrentVertex(n,i,c,d,m,y=!1){const x=i.y*d-i.x,S=-i.y-i.x*d;this.addHalfVertex(n,i.x+i.y*c,i.y-i.x*c,y,!1,c,m),this.addHalfVertex(n,x,S,y,!0,-d,m)}addHalfVertex({x:n,y:i},c,d,m,y,x,S){this.layoutVertexArray.emplaceBack((n<<1)+(m?1:0),(i<<1)+(y?1:0),Math.round(63*c)+128,Math.round(63*d)+128,1+(x===0?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),S.primitiveLength++),y?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,i){this.distance+=n.dist(i),this.updateScaledDistance()}}en(Yg,"LineBucket",{omit:["layers","patternFeatures"]});const GD=new xe({"line-cap":new ie(ct.layout_line["line-cap"]),"line-join":new ie(ct.layout_line["line-join"]),"line-miter-limit":new Z(ct.layout_line["line-miter-limit"]),"line-round-limit":new Z(ct.layout_line["line-round-limit"]),"line-sort-key":new ie(ct.layout_line["line-sort-key"])});var eT={paint:new xe({"line-opacity":new ie(ct.paint_line["line-opacity"]),"line-color":new ie(ct.paint_line["line-color"]),"line-translate":new Z(ct.paint_line["line-translate"]),"line-translate-anchor":new Z(ct.paint_line["line-translate-anchor"]),"line-width":new ie(ct.paint_line["line-width"]),"line-gap-width":new ie(ct.paint_line["line-gap-width"]),"line-offset":new ie(ct.paint_line["line-offset"]),"line-blur":new ie(ct.paint_line["line-blur"]),"line-dasharray":new ie(ct.paint_line["line-dasharray"]),"line-pattern":new ie(ct.paint_line["line-pattern"]),"line-gradient":new ve(ct.paint_line["line-gradient"]),"line-trim-offset":new Z(ct.paint_line["line-trim-offset"])}),layout:GD};const tT=new class extends ie{possiblyEvaluate(r,n){return n=new I(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(r,n)}evaluate(r,n,i,c){return n=gt({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(r,n,i,c)}}(eT.paint.properties["line-width"].specification);function nT(r,n){return n>0?n+2*r:r}tT.useIntegerZoom=!0;const HD=Ue([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qD=Ue([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),ZD=Ue([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ue([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const XD=Ue([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),YD=Ue([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const rT=Ue([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),KD=Ue([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ue([{name:"triangle",components:3,type:"Uint16"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ue([{type:"Float32",name:"offsetX"}]),Ue([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var wi=24;const Os=128;function px(r,n){const{expression:i}=n;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new I(r+1))};if(i.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:d}=i;let m=0;for(;m<c.length&&c[m]<=r;)m++;m=Math.max(0,m-1);let y=m;for(;y<c.length&&c[y]<r+1;)y++;y=Math.min(c.length-1,y);const x=c[m],S=c[y];return i.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:d}:{kind:"camera",minZoom:x,maxZoom:S,minSize:i.evaluate(new I(x)),maxSize:i.evaluate(new I(S)),interpolationType:d}}}function Kg(r,{uSize:n,uSizeT:i},{lowerSize:c,upperSize:d}){return r.kind==="source"?c/Os:r.kind==="composite"?Xn(c/Os,d/Os,i):n}function pd(r,n){let i=0,c=0;if(r.kind==="constant")c=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:d,minZoom:m,maxZoom:y}=r,x=d?Se(Ko.interpolationFactor(d,n,m,y),0,1):0;r.kind==="camera"?c=Xn(r.minSize,r.maxSize,x):i=x}return{uSizeT:i,uSize:c}}var JD=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Os,evaluateSizeForFeature:Kg,evaluateSizeForZoom:pd,getSizeData:px});function QD(r,n,i){return r.sections.forEach(c=>{c.text=function(d,m,y){const x=m.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?d=d.toLocaleUpperCase():x==="lowercase"&&(d=d.toLocaleLowerCase()),k.applyArabicShaping&&(d=k.applyArabicShaping(d)),d}(c.text,n,i)}),r}const Zp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function ez(r){return r==="︶"||r==="﹈"||r==="︸"||r==="﹄"||r==="﹂"||r==="︾"||r==="︼"||r==="︺"||r==="︘"||r==="﹀"||r==="︐"||r==="︓"||r==="︔"||r==="｀"||r==="￣"||r==="︑"||r==="︒"}function tz(r){return r==="︵"||r==="﹇"||r==="︷"||r==="﹃"||r==="﹁"||r==="︽"||r==="︻"||r==="︹"||r==="︗"||r==="︿"}var iT=vr,oT=function(r,n,i,c,d){var m,y,x=8*d-c-1,S=(1<<x)-1,T=S>>1,P=-7,A=i?d-1:0,z=i?-1:1,F=r[n+A];for(A+=z,m=F&(1<<-P)-1,F>>=-P,P+=x;P>0;m=256*m+r[n+A],A+=z,P-=8);for(y=m&(1<<-P)-1,m>>=-P,P+=c;P>0;y=256*y+r[n+A],A+=z,P-=8);if(m===0)m=1-T;else{if(m===S)return y?NaN:1/0*(F?-1:1);y+=Math.pow(2,c),m-=T}return(F?-1:1)*y*Math.pow(2,m-c)},sT=function(r,n,i,c,d,m){var y,x,S,T=8*m-d-1,P=(1<<T)-1,A=P>>1,z=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=c?0:m-1,V=c?1:-1,X=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(x=isNaN(n)?1:0,y=P):(y=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-y))<1&&(y--,S*=2),(n+=y+A>=1?z/S:z*Math.pow(2,1-A))*S>=2&&(y++,S/=2),y+A>=P?(x=0,y=P):y+A>=1?(x=(n*S-1)*Math.pow(2,d),y+=A):(x=n*Math.pow(2,A-1)*Math.pow(2,d),y=0));d>=8;r[i+F]=255&x,F+=V,x/=256,d-=8);for(y=y<<d|x,T+=d;T>0;r[i+F]=255&y,F+=V,y/=256,T-=8);r[i+F-V]|=128*X};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function vr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}vr.Varint=0,vr.Fixed64=1,vr.Bytes=2,vr.Fixed32=5;var fx=4294967296,aT=1/fx,lT=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $a(r){return r.type===vr.Bytes?r.readVarint()+r.pos:r.pos+1}function fd(r,n,i){return i?4294967296*n+(r>>>0):4294967296*(n>>>0)+(r>>>0)}function cT(r,n,i){var c=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(c);for(var d=i.pos-1;d>=r;d--)i.buf[d+c]=i.buf[d]}function nz(r,n){for(var i=0;i<r.length;i++)n.writeVarint(r[i])}function rz(r,n){for(var i=0;i<r.length;i++)n.writeSVarint(r[i])}function iz(r,n){for(var i=0;i<r.length;i++)n.writeFloat(r[i])}function oz(r,n){for(var i=0;i<r.length;i++)n.writeDouble(r[i])}function sz(r,n){for(var i=0;i<r.length;i++)n.writeBoolean(r[i])}function az(r,n){for(var i=0;i<r.length;i++)n.writeFixed32(r[i])}function lz(r,n){for(var i=0;i<r.length;i++)n.writeSFixed32(r[i])}function cz(r,n){for(var i=0;i<r.length;i++)n.writeFixed64(r[i])}function uz(r,n){for(var i=0;i<r.length;i++)n.writeSFixed64(r[i])}function Jg(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+16777216*r[n+3]}function md(r,n,i){r[i]=n,r[i+1]=n>>>8,r[i+2]=n>>>16,r[i+3]=n>>>24}function uT(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+(r[n+3]<<24)}vr.prototype={destroy:function(){this.buf=null},readFields:function(r,n,i){for(i=i||this.length;this.pos<i;){var c=this.readVarint(),d=c>>3,m=this.pos;this.type=7&c,r(d,n,this),this.pos===m&&this.skip(c)}return n},readMessage:function(r,n){return this.readFields(r,n,this.readVarint()+this.pos)},readFixed32:function(){var r=Jg(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=uT(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=Jg(this.buf,this.pos)+Jg(this.buf,this.pos+4)*fx;return this.pos+=8,r},readSFixed64:function(){var r=Jg(this.buf,this.pos)+uT(this.buf,this.pos+4)*fx;return this.pos+=8,r},readFloat:function(){var r=oT(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=oT(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var n,i,c=this.buf;return n=127&(i=c[this.pos++]),i<128?n:(n|=(127&(i=c[this.pos++]))<<7,i<128?n:(n|=(127&(i=c[this.pos++]))<<14,i<128?n:(n|=(127&(i=c[this.pos++]))<<21,i<128?n:function(d,m,y){var x,S,T=y.buf;if(x=(112&(S=T[y.pos++]))>>4,S<128||(x|=(127&(S=T[y.pos++]))<<3,S<128)||(x|=(127&(S=T[y.pos++]))<<10,S<128)||(x|=(127&(S=T[y.pos++]))<<17,S<128)||(x|=(127&(S=T[y.pos++]))<<24,S<128)||(x|=(1&(S=T[y.pos++]))<<31,S<128))return fd(d,x,m);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(i=c[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,n=this.pos;return this.pos=r,r-n>=12&&lT?function(i,c,d){return lT.decode(i.subarray(c,d))}(this.buf,n,r):function(i,c,d){for(var m="",y=c;y<d;){var x,S,T,P=i[y],A=null,z=P>239?4:P>223?3:P>191?2:1;if(y+z>d)break;z===1?P<128&&(A=P):z===2?(192&(x=i[y+1]))==128&&(A=(31&P)<<6|63&x)<=127&&(A=null):z===3?(S=i[y+2],(192&(x=i[y+1]))==128&&(192&S)==128&&((A=(15&P)<<12|(63&x)<<6|63&S)<=2047||A>=55296&&A<=57343)&&(A=null)):z===4&&(S=i[y+2],T=i[y+3],(192&(x=i[y+1]))==128&&(192&S)==128&&(192&T)==128&&((A=(15&P)<<18|(63&x)<<12|(63&S)<<6|63&T)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,z=1):A>65535&&(A-=65536,m+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),m+=String.fromCharCode(A),y+=z}return m}(this.buf,n,r)},readBytes:function(){var r=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,r);return this.pos=r,n},readPackedVarint:function(r,n){if(this.type!==vr.Bytes)return r.push(this.readVarint(n));var i=$a(this);for(r=r||[];this.pos<i;)r.push(this.readVarint(n));return r},readPackedSVarint:function(r){if(this.type!==vr.Bytes)return r.push(this.readSVarint());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==vr.Bytes)return r.push(this.readBoolean());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==vr.Bytes)return r.push(this.readFloat());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==vr.Bytes)return r.push(this.readDouble());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==vr.Bytes)return r.push(this.readFixed32());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==vr.Bytes)return r.push(this.readSFixed32());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==vr.Bytes)return r.push(this.readFixed64());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==vr.Bytes)return r.push(this.readSFixed64());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed64());return r},skip:function(r){var n=7&r;if(n===vr.Varint)for(;this.buf[this.pos++]>127;);else if(n===vr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===vr.Fixed32)this.pos+=4;else{if(n!==vr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(r,n){this.writeVarint(r<<3|n)},realloc:function(r){for(var n=this.length||16;n<this.pos+r;)n*=2;if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),md(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),md(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),md(this.buf,-1&r,this.pos),md(this.buf,Math.floor(r*aT),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),md(this.buf,-1&r,this.pos),md(this.buf,Math.floor(r*aT),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(n,i){var c,d;if(n>=0?(c=n%4294967296|0,d=n/4294967296|0):(d=~(-n/4294967296),4294967295^(c=~(-n%4294967296))?c=c+1|0:(c=0,d=d+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(m,y,x){x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,x.buf[x.pos]=127&(m>>>=7)}(c,0,i),function(m,y){var x=(7&m)<<4;y.buf[y.pos++]|=x|((m>>>=3)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m)))))}(d,i)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var n=this.pos;this.pos=function(c,d,m){for(var y,x,S=0;S<d.length;S++){if((y=d.charCodeAt(S))>55295&&y<57344){if(!x){y>56319||S+1===d.length?(c[m++]=239,c[m++]=191,c[m++]=189):x=y;continue}if(y<56320){c[m++]=239,c[m++]=191,c[m++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(c[m++]=239,c[m++]=191,c[m++]=189,x=null);y<128?c[m++]=y:(y<2048?c[m++]=y>>6|192:(y<65536?c[m++]=y>>12|224:(c[m++]=y>>18|240,c[m++]=y>>12&63|128),c[m++]=y>>6&63|128),c[m++]=63&y|128)}return m}(this.buf,r,this.pos);var i=this.pos-n;i>=128&&cT(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeFloat:function(r){this.realloc(4),sT(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),sT(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var n=r.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)this.buf[this.pos++]=r[i]},writeRawMessage:function(r,n){this.pos++;var i=this.pos;r(n,this);var c=this.pos-i;c>=128&&cT(i,c,this),this.pos=i-1,this.writeVarint(c),this.pos+=c},writeMessage:function(r,n,i){this.writeTag(r,vr.Bytes),this.writeRawMessage(n,i)},writePackedVarint:function(r,n){n.length&&this.writeMessage(r,nz,n)},writePackedSVarint:function(r,n){n.length&&this.writeMessage(r,rz,n)},writePackedBoolean:function(r,n){n.length&&this.writeMessage(r,sz,n)},writePackedFloat:function(r,n){n.length&&this.writeMessage(r,iz,n)},writePackedDouble:function(r,n){n.length&&this.writeMessage(r,oz,n)},writePackedFixed32:function(r,n){n.length&&this.writeMessage(r,az,n)},writePackedSFixed32:function(r,n){n.length&&this.writeMessage(r,lz,n)},writePackedFixed64:function(r,n){n.length&&this.writeMessage(r,cz,n)},writePackedSFixed64:function(r,n){n.length&&this.writeMessage(r,uz,n)},writeBytesField:function(r,n){this.writeTag(r,vr.Bytes),this.writeBytes(n)},writeFixed32Field:function(r,n){this.writeTag(r,vr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(r,n){this.writeTag(r,vr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(r,n){this.writeTag(r,vr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(r,n){this.writeTag(r,vr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(r,n){this.writeTag(r,vr.Varint),this.writeVarint(n)},writeSVarintField:function(r,n){this.writeTag(r,vr.Varint),this.writeSVarint(n)},writeStringField:function(r,n){this.writeTag(r,vr.Bytes),this.writeString(n)},writeFloatField:function(r,n){this.writeTag(r,vr.Fixed32),this.writeFloat(n)},writeDoubleField:function(r,n){this.writeTag(r,vr.Fixed64),this.writeDouble(n)},writeBooleanField:function(r,n){this.writeVarintField(r,!!n)}};var Qg=G(iT);const mx=3;function dz(r,n,i){n.glyphs=[],r===1&&i.readMessage(hz,n)}function hz(r,n,i){if(r===3){const{id:c,bitmap:d,width:m,height:y,left:x,top:S,advance:T}=i.readMessage(pz,{});n.glyphs.push({id:c,bitmap:new Fa({width:m+2*mx,height:y+2*mx},d),metrics:{width:m,height:y,left:x,top:S,advance:T}})}else r===4?n.ascender=i.readSVarint():r===5&&(n.descender=i.readSVarint())}function pz(r,n,i){r===1?n.id=i.readVarint():r===2?n.bitmap=i.readBytes():r===3?n.width=i.readVarint():r===4?n.height=i.readVarint():r===5?n.left=i.readSVarint():r===6?n.top=i.readSVarint():r===7&&(n.advance=i.readVarint())}const dT=mx;function gx(r){let n=0,i=0;for(const y of r)n+=y.w*y.h,i=Math.max(i,y.w);r.sort((y,x)=>x.h-y.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),i),h:1/0}];let d=0,m=0;for(const y of r)for(let x=c.length-1;x>=0;x--){const S=c[x];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,m=Math.max(m,y.y+y.h),d=Math.max(d,y.x+y.w),y.w===S.w&&y.h===S.h){const T=c.pop();x<c.length&&(c[x]=T)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(c.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:d,h:m,fill:n/(d*m)||0}}const no=1;class yx{constructor(n,{pixelRatio:i,version:c,stretchX:d,stretchY:m,content:y}){this.paddedRect=n,this.pixelRatio=i,this.stretchX=d,this.stretchY=m,this.content=y,this.version=c}get tl(){return[this.paddedRect.x+no,this.paddedRect.y+no]}get br(){return[this.paddedRect.x+this.paddedRect.w-no,this.paddedRect.y+this.paddedRect.h-no]}get displaySize(){return[(this.paddedRect.w-2*no)/this.pixelRatio,(this.paddedRect.h-2*no)/this.pixelRatio]}}class hT{constructor(n,i){const c={},d={};this.haveRenderCallbacks=[];const m=[];this.addImages(n,c,m),this.addImages(i,d,m);const{w:y,h:x}=gx(m),S=new mo({width:y||1,height:x||1});for(const T in n){const P=n[T],A=c[T].paddedRect;mo.copy(P.data,S,{x:0,y:0},{x:A.x+no,y:A.y+no},P.data)}for(const T in i){const P=i[T],A=d[T].paddedRect,z=A.x+no,F=A.y+no,V=P.data.width,X=P.data.height;mo.copy(P.data,S,{x:0,y:0},{x:z,y:F},P.data),mo.copy(P.data,S,{x:0,y:X-1},{x:z,y:F-1},{width:V,height:1}),mo.copy(P.data,S,{x:0,y:0},{x:z,y:F+X},{width:V,height:1}),mo.copy(P.data,S,{x:V-1,y:0},{x:z-1,y:F},{width:1,height:X}),mo.copy(P.data,S,{x:0,y:0},{x:z+V,y:F},{width:1,height:X})}this.image=S,this.iconPositions=c,this.patternPositions=d}addImages(n,i,c){for(const d in n){const m=n[d],y={x:0,y:0,w:m.data.width+2*no,h:m.data.height+2*no};c.push(y),i[d]=new yx(y,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(n,i){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(c=>n.hasImage(c)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in n.updatedImages)this.patchUpdatedImage(this.iconPositions[c],n.getImage(c),i),this.patchUpdatedImage(this.patternPositions[c],n.getImage(c),i)}patchUpdatedImage(n,i,c){if(!n||!i||n.version===i.version)return;n.version=i.version;const[d,m]=n.tl;c.update(i.data,void 0,{x:d,y:m})}}en(yx,"ImagePosition"),en(hT,"ImageAtlas");const Ro={horizontal:1,vertical:2,horizontalOnly:3},pT=-17;class Xp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,i){const c=new Xp;return c.scale=n||1,c.fontStack=i,c}static forImage(n){const i=new Xp;return i.imageName=n,i}}class gd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,i){const c=new gd;for(let d=0;d<n.sections.length;d++){const m=n.sections[d];m.image?c.addImageSection(m):c.addTextSection(m,i)}return c}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(i,c){let d="";for(let m=0;m<i.length;m++){const y=i.charCodeAt(m+1)||null,x=i.charCodeAt(m-1)||null;d+=!c&&(y&&Pg(y)&&!Zp[i[m+1]]||x&&Pg(x)&&!Zp[i[m-1]])||!Zp[i[m]]?i[m]:Zp[i[m]]}return d}(this.text,n)}trim(){let n=0;for(let c=0;c<this.text.length&&ey[this.text.charCodeAt(c)];c++)n++;let i=this.text.length;for(let c=this.text.length-1;c>=0&&c>=n&&ey[this.text.charCodeAt(c)];c--)i--;this.text=this.text.substring(n,i),this.sectionIndex=this.sectionIndex.slice(n,i)}substring(n,i){const c=new gd;return c.text=this.text.substring(n,i),c.sectionIndex=this.sectionIndex.slice(n,i),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,i)=>Math.max(n,this.sections[i].scale),0)}addTextSection(n,i){this.text+=n.text,this.sections.push(Xp.forText(n.scale,n.fontStack||i));const c=this.sections.length-1;for(let d=0;d<n.text.length;++d)this.sectionIndex.push(c)}addImageSection(n){const i=n.image?n.image.name:"";if(i.length===0)return void He("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(Xp.forImage(i)),this.sectionIndex.push(this.sections.length-1)):He("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _x(r,n,i,c,d,m,y,x,S,T,P,A,z,F,V){const X=gd.fromFeature(r,d);A===Ro.vertical&&X.verticalizePunctuation(z);let ne=[];const fe=function(Pe,Ke,Ze,ut,Pt,tt){if(!Pe)return[];const yt=[],_t=function(qt,on,Xt,zn,Rt,fn){let Rn=0;for(let Kn=0;Kn<qt.length();Kn++){const Ln=qt.getSection(Kn);Rn+=fT(qt.getCharCode(Kn),Ln,zn,Rt,on,fn)}return Rn/Math.max(1,Math.ceil(Rn/Xt))}(Pe,Ke,Ze,ut,Pt,tt),Tt=Pe.text.indexOf("​")>=0;let Dt=0;for(let qt=0;qt<Pe.length();qt++){const on=Pe.getSection(qt),Xt=Pe.getCharCode(qt);if(ey[Xt]||(Dt+=fT(Xt,on,ut,Pt,Ke,tt)),qt<Pe.length()-1){const zn=!((st=Xt)<11904||!(Yt["Bopomofo Extended"](st)||Yt.Bopomofo(st)||Yt["CJK Compatibility Forms"](st)||Yt["CJK Compatibility Ideographs"](st)||Yt["CJK Compatibility"](st)||Yt["CJK Radicals Supplement"](st)||Yt["CJK Strokes"](st)||Yt["CJK Symbols and Punctuation"](st)||Yt["CJK Unified Ideographs Extension A"](st)||Yt["CJK Unified Ideographs"](st)||Yt["Enclosed CJK Letters and Months"](st)||Yt["Halfwidth and Fullwidth Forms"](st)||Yt.Hiragana(st)||Yt["Ideographic Description Characters"](st)||Yt["Kangxi Radicals"](st)||Yt["Katakana Phonetic Extensions"](st)||Yt.Katakana(st)||Yt["Vertical Forms"](st)||Yt["Yi Radicals"](st)||Yt["Yi Syllables"](st)));(fz[Xt]||zn||on.imageName)&&yt.push(gT(qt+1,Dt,_t,yt,mz(Xt,Pe.getCharCode(qt+1),zn&&Tt),!1))}}var st;return yT(gT(Pe.length(),Dt,_t,yt,0,!0))}(X,T,m,n,c,F),{processBidirectionalText:Ee,processStyledBidirectionalText:me}=k;if(Ee&&X.sections.length===1){const Pe=Ee(X.toString(),fe);for(const Ke of Pe){const Ze=new gd;Ze.text=Ke,Ze.sections=X.sections;for(let ut=0;ut<Ke.length;ut++)Ze.sectionIndex.push(0);ne.push(Ze)}}else if(me){const Pe=me(X.text,X.sectionIndex,fe);for(const Ke of Pe){const Ze=new gd;Ze.text=Ke[0],Ze.sectionIndex=Ke[1],Ze.sections=X.sections,ne.push(Ze)}}else ne=function(Pe,Ke){const Ze=[],ut=Pe.text;let Pt=0;for(const tt of Ke)Ze.push(Pe.substring(Pt,tt)),Pt=tt;return Pt<ut.length&&Ze.push(Pe.substring(Pt,ut.length)),Ze}(X,fe);const Te=[],Ie={positionedLines:Te,text:X.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:A,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt,Dt,st,qt){let on=0,Xt=0,zn=0;const Rt=_t==="right"?1:_t==="left"?0:.5;let fn=!1;for(const On of Pt){const Bn=On.getSections();for(const fr of Bn){if(fr.imageName)continue;const xr=Ke[fr.fontStack];if(xr&&(fn=xr.ascender!==void 0&&xr.descender!==void 0,!fn))break}if(!fn)break}let Rn=0;for(const On of Pt){On.trim();const Bn=On.getMaxScale(),fr=(Bn-1)*wi,xr={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[Rn]=xr;const br=xr.positionedGlyphs;let mr=0;if(!On.length()){Xt+=tt,++Rn;continue}let Or=0,jr=0;for(let gr=0;gr<On.length();gr++){const li=On.getSection(gr),ni=On.getSectionIndex(gr),Br=On.getCharCode(gr);let tr=li.scale,ri=null,wr=null,qi=null,ii=wi,Si=0;const yi=!(Tt===Ro.horizontal||!st&&!wp(Br)||st&&(ey[Br]||(Kn=Br,Yt.Arabic(Kn)||Yt["Arabic Supplement"](Kn)||Yt["Arabic Extended-A"](Kn)||Yt["Arabic Presentation Forms-A"](Kn)||Yt["Arabic Presentation Forms-B"](Kn))));if(li.imageName){const Zi=ut[li.imageName];if(!Zi)continue;qi=li.imageName,Pe.iconsInText=Pe.iconsInText||!0,wr=Zi.paddedRect;const _i=Zi.displaySize;tr=tr*wi/qt,ri={width:_i[0],height:_i[1],left:no,top:-dT,advance:yi?_i[1]:_i[0],localGlyph:!1},Si=fn?-ri.height*tr:pT+Bn*wi-_i[1]*tr,ii=ri.advance;const $s=(yi?_i[0]:_i[1])*tr-wi*Bn;$s>0&&$s>mr&&(mr=$s)}else{const Zi=Ze[li.fontStack];if(!Zi)continue;Zi[Br]&&(wr=Zi[Br]);const _i=Ke[li.fontStack];if(!_i)continue;const $s=_i.glyphs[Br];if(!$s)continue;if(ri=$s.metrics,ii=Br!==8203?wi:0,fn){const Sd=_i.ascender!==void 0?Math.abs(_i.ascender):0,sf=_i.descender!==void 0?Math.abs(_i.descender):0,af=(Sd+sf)*tr;Or<af&&(Or=af,jr=(Sd-sf)/2*tr),Si=-Sd*tr}else Si=pT+(Bn-tr)*wi}yi?(Pe.verticalizable=!0,br.push({glyph:Br,imageName:qi,x:on,y:Xt+Si,vertical:yi,scale:tr,localGlyph:ri.localGlyph,fontStack:li.fontStack,sectionIndex:ni,metrics:ri,rect:wr}),on+=ii*tr+Dt):(br.push({glyph:Br,imageName:qi,x:on,y:Xt+Si,vertical:yi,scale:tr,localGlyph:ri.localGlyph,fontStack:li.fontStack,sectionIndex:ni,metrics:ri,rect:wr}),on+=ri.advance*tr+Dt)}br.length!==0&&(zn=Math.max(on-Dt,zn),fn?_T(br,Rt,mr,jr,tt*Bn/2):_T(br,Rt,mr,0,tt/2)),on=0;const ti=tt*Bn+mr;xr.lineOffset=Math.max(mr,fr),Xt+=ti,++Rn}var Kn;const Ln=Xt,{horizontalAlign:Cn,verticalAlign:Cr}=vx(yt);(function(On,Bn,fr,xr,br,mr){const Or=(Bn-fr)*br,jr=-mr*xr;for(const ti of On)for(const gr of ti.positionedGlyphs)gr.x+=Or,gr.y+=jr})(Pe.positionedLines,Rt,Cn,Cr,zn,Ln),Pe.top+=-Cr*Ln,Pe.bottom=Pe.top+Ln,Pe.left+=-Cn*zn,Pe.right=Pe.left+zn,Pe.hasBaseline=fn}(Ie,n,i,c,ne,y,x,S,A,T,z,V),!function(Pe){for(const Ke of Pe)if(Ke.positionedGlyphs.length!==0)return!1;return!0}(Te)&&Ie}const ey={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fz={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function fT(r,n,i,c,d,m){if(n.imageName){const y=c[n.imageName];return y?y.displaySize[0]*n.scale*wi/m+d:0}{const y=i[n.fontStack],x=y&&y.glyphs[r];return x?x.metrics.advance*n.scale+d:0}}function mT(r,n,i,c){const d=Math.pow(r-n,2);return c?r<n?d/2:2*d:d+Math.abs(i)*i}function mz(r,n,i){let c=0;return r===10&&(c-=1e4),i&&(c+=150),r!==40&&r!==65288||(c+=50),n!==41&&n!==65289||(c+=50),c}function gT(r,n,i,c,d,m){let y=null,x=mT(n,i,d,m);for(const S of c){const T=mT(n-S.x,i,d,m)+S.badness;T<=x&&(y=S,x=T)}return{index:r,x:n,priorBreak:y,badness:x}}function yT(r){return r?yT(r.priorBreak).concat(r.index):[]}function vx(r){let n=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:n,verticalAlign:i}}function _T(r,n,i,c,d){if(!(n||i||c||d))return;const m=r.length-1,y=r[m],x=(y.x+y.metrics.advance*y.scale)*n;for(let S=0;S<=m;S++)r[S].x-=x,r[S].y+=i+c+d}function gz(r,n,i){const{horizontalAlign:c,verticalAlign:d}=vx(i),m=n[0]-r.displaySize[0]*c,y=n[1]-r.displaySize[1]*d;return{image:r,top:y,bottom:y+r.displaySize[1],left:m,right:m+r.displaySize[0]}}function vT(r,n,i,c,d,m){const y=r.image;let x;if(y.content){const ne=y.content,fe=y.pixelRatio||1;x=[ne[0]/fe,ne[1]/fe,y.displaySize[0]-ne[2]/fe,y.displaySize[1]-ne[3]/fe]}const S=n.left*m,T=n.right*m;let P,A,z,F;i==="width"||i==="both"?(F=d[0]+S-c[3],A=d[0]+T+c[1]):(F=d[0]+(S+T-y.displaySize[0])/2,A=F+y.displaySize[0]);const V=n.top*m,X=n.bottom*m;return i==="height"||i==="both"?(P=d[1]+V-c[0],z=d[1]+X+c[2]):(P=d[1]+(V+X-y.displaySize[1])/2,z=P+y.displaySize[1]),{image:y,top:P,right:A,bottom:z,left:F,collisionPadding:x}}class Na extends ae{constructor(n,i,c,d,m){super(n,i),this.angle=d,this.z=c,m!==void 0&&(this.segment=m)}clone(){return new Na(this.x,this.y,this.z,this.angle,this.segment)}}function xT(r,n,i,c,d){if(n.segment===void 0)return!0;let m=n,y=n.segment+1,x=0;for(;x>-i/2;){if(y--,y<0)return!1;x-=r[y].dist(m),m=r[y]}x+=r[y].dist(r[y+1]),y++;const S=[];let T=0;for(;x<i/2;){const P=r[y],A=r[y+1];if(!A)return!1;let z=r[y-1].angleTo(P)-P.angleTo(A);for(z=Math.abs((z+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:z}),T+=z;x-S[0].distance>c;)T-=S.shift().angleDelta;if(T>d)return!1;y++,x+=P.dist(A)}return!0}function bT(r){let n=0;for(let i=0;i<r.length-1;i++)n+=r[i].dist(r[i+1]);return n}function wT(r,n,i){return r?.6*n*i:0}function ST(r,n){return Math.max(r?r.right-r.left:0,n?n.right-n.left:0)}function yz(r,n,i,c,d,m){const y=wT(i,d,m),x=ST(i,c)*m;let S=0;const T=bT(r)/2;for(let P=0;P<r.length-1;P++){const A=r[P],z=r[P+1],F=A.dist(z);if(S+F>T){const V=(T-S)/F,X=Xn(A.x,z.x,V),ne=Xn(A.y,z.y,V),fe=new Na(X,ne,0,z.angleTo(A),P);return!y||xT(r,fe,x,y,n)?fe:void 0}S+=F}}function _z(r,n,i,c,d,m,y,x,S){const T=wT(c,m,y),P=ST(c,d),A=P*y,z=r[0].x===0||r[0].x===S||r[0].y===0||r[0].y===S;return n-A<n/4&&(n=A+n/4),TT(r,z?n/2*x%n:(P/2+2*m)*y*x%n,n,T,i,A,z,!1,S)}function TT(r,n,i,c,d,m,y,x,S){const T=m/2,P=bT(r);let A=0,z=n-i,F=[];for(let V=0;V<r.length-1;V++){const X=r[V],ne=r[V+1],fe=X.dist(ne),Ee=ne.angleTo(X);for(;z+i<A+fe;){z+=i;const me=(z-A)/fe,Te=Xn(X.x,ne.x,me),Ie=Xn(X.y,ne.y,me);if(Te>=0&&Te<S&&Ie>=0&&Ie<S&&z-T>=0&&z+T<=P){const Pe=new Na(Te,Ie,0,Ee,V);Pe._round(),c&&!xT(r,Pe,m,c,d)||F.push(Pe)}}A+=fe}return x||F.length||y||(F=TT(r,A/2,i,c,d,m,y,!0,S)),F}function CT(r,n,i,c,d){const m=[];for(let y=0;y<r.length;y++){const x=r[y];let S;for(let T=0;T<x.length-1;T++){let P=x[T],A=x[T+1];P.x<n&&A.x<n||(P.x<n?P=new ae(n,P.y+(n-P.x)/(A.x-P.x)*(A.y-P.y))._round():A.x<n&&(A=new ae(n,P.y+(n-P.x)/(A.x-P.x)*(A.y-P.y))._round()),P.y<i&&A.y<i||(P.y<i?P=new ae(P.x+(i-P.y)/(A.y-P.y)*(A.x-P.x),i)._round():A.y<i&&(A=new ae(P.x+(i-P.y)/(A.y-P.y)*(A.x-P.x),i)._round()),P.x>=c&&A.x>=c||(P.x>=c?P=new ae(c,P.y+(c-P.x)/(A.x-P.x)*(A.y-P.y))._round():A.x>=c&&(A=new ae(c,P.y+(c-P.x)/(A.x-P.x)*(A.y-P.y))._round()),P.y>=d&&A.y>=d||(P.y>=d?P=new ae(P.x+(d-P.y)/(A.y-P.y)*(A.x-P.x),d)._round():A.y>=d&&(A=new ae(P.x+(d-P.y)/(A.y-P.y)*(A.x-P.x),d)._round()),S&&P.equals(S[S.length-1])||(S=[P],m.push(S)),S.push(A)))))}}return m}en(Na,"Anchor");const Yp=1e20;function ET(r,n,i,c,d,m,y,x,S){for(let T=n;T<n+c;T++)kT(r,i*m+T,m,d,y,x,S);for(let T=i;T<i+d;T++)kT(r,T*m+n,1,c,y,x,S)}function kT(r,n,i,c,d,m,y){m[0]=0,y[0]=-Yp,y[1]=Yp,d[0]=r[n];for(let x=1,S=0,T=0;x<c;x++){d[x]=r[n+x*i];const P=x*x;do{const A=m[S];T=(d[x]-d[A]+P-A*A)/(x-A)/2}while(T<=y[S]&&--S>-1);S++,m[S]=x,y[S]=T,y[S+1]=Yp}for(let x=0,S=0;x<c;x++){for(;y[S+1]<x;)S++;const T=m[S],P=x-T;r[n+x*i]=d[T]+P*P}}const Bs=2,xx={none:0,ideographs:1,all:2};class yd{constructor(n,i,c){this.requestManager=n,this.localGlyphMode=i,this.localFontFamily=c,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,i){const c=[];for(const d in n)for(const m of n[d])c.push({stack:d,id:m});nt(c,({stack:d,id:m},y)=>{let x=this.entries[d];x||(x=this.entries[d]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=x.glyphs[m];if(S!==void 0)return void y(null,{stack:d,id:m,glyph:S});if(S=this._tinySDF(x,d,m),S)return x.glyphs[m]=S,void y(null,{stack:d,id:m,glyph:S});const T=Math.floor(m/256);if(256*T>65535)return void y(new Error("glyphs > 65535 not supported"));if(x.ranges[T])return void y(null,{stack:d,id:m,glyph:S});let P=x.requests[T];P||(P=x.requests[T]=[],yd.loadGlyphRange(d,T,this.url,this.requestManager,(A,z)=>{if(z){x.ascender=z.ascender,x.descender=z.descender;for(const F in z.glyphs)this._doesCharSupportLocalGlyph(+F)||(x.glyphs[+F]=z.glyphs[+F]);x.ranges[T]=!0}for(const F of P)F(A,z);delete x.requests[T]})),P.push((A,z)=>{A?y(A):z&&y(null,{stack:d,id:m,glyph:z.glyphs[m]||null})})},(d,m)=>{if(d)i(d);else if(m){const y={};for(const{stack:x,id:S,glyph:T}of m)y[x]===void 0&&(y[x]={}),y[x].glyphs===void 0&&(y[x].glyphs={}),y[x].glyphs[S]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},y[x].ascender=this.entries[x].ascender,y[x].descender=this.entries[x].descender;i(null,y)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==xx.none&&(this.localGlyphMode===xx.all?!!this.localFontFamily:!!this.localFontFamily&&(Yt["CJK Unified Ideographs"](n)||Yt["Hangul Syllables"](n)||Yt.Hiragana(n)||Yt.Katakana(n)||Yt["CJK Symbols and Punctuation"](n)))}_tinySDF(n,i,c){const d=this.localFontFamily;if(!d||!this._doesCharSupportLocalGlyph(c))return;let m=n.tinySDF;if(!m){let X="400";/bold/i.test(i)?X="900":/medium/i.test(i)?X="500":/light/i.test(i)&&(X="200"),m=n.tinySDF=new yd.TinySDF({fontFamily:d,fontWeight:X,fontSize:24*Bs,buffer:3*Bs,radius:8*Bs}),m.fontWeight=X}if(this.localGlyphs[m.fontWeight][c])return this.localGlyphs[m.fontWeight][c];const y=String.fromCharCode(c),{data:x,width:S,height:T,glyphWidth:P,glyphHeight:A,glyphLeft:z,glyphTop:F,glyphAdvance:V}=m.draw(y);return this.localGlyphs[m.fontWeight][c]={id:c,bitmap:new Fa({width:S,height:T},x),metrics:{width:P/Bs,height:A/Bs,left:z/Bs,top:F/Bs-27,advance:V/Bs,localGlyph:!0}}}}yd.loadGlyphRange=function(r,n,i,c,d){const m=256*n,y=m+255,x=c.transformRequest(c.normalizeGlyphsURL(i).replace("{fontstack}",r).replace("{range}",`${m}-${y}`),nn.Glyphs);Ar(x,(S,T)=>{if(S)d(S);else if(T){const P={},A=function(z){return new Qg(z).readFields(dz,{})}(T);for(const z of A.glyphs)P[z.id]=z;d(null,{glyphs:P,ascender:A.ascender,descender:A.descender})}})},yd.TinySDF=class{constructor({fontSize:r=24,buffer:n=3,radius:i=8,cutoff:c=.25,fontFamily:d="sans-serif",fontWeight:m="normal",fontStyle:y="normal"}={}){this.buffer=n,this.cutoff=c,this.radius=i;const x=this.size=r+4*n,S=this._createCanvas(x),T=this.ctx=S.getContext("2d",{willReadFrequently:!0});T.font=`${y} ${m} ${r}px ${d}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(r){const n=document.createElement("canvas");return n.width=n.height=r,n}draw(r){const{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:c,actualBoundingBoxLeft:d,actualBoundingBoxRight:m}=this.ctx.measureText(r),y=Math.ceil(i),x=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-d))),S=Math.min(this.size-this.buffer,y+Math.ceil(c)),T=x+2*this.buffer,P=S+2*this.buffer,A=Math.max(T*P,0),z=new Uint8ClampedArray(A),F={data:z,width:T,height:P,glyphWidth:x,glyphHeight:S,glyphTop:y,glyphLeft:0,glyphAdvance:n};if(x===0||S===0)return F;const{ctx:V,buffer:X,gridInner:ne,gridOuter:fe}=this;V.clearRect(X,X,x,S),V.fillText(r,X,X+y);const Ee=V.getImageData(X,X,x,S);fe.fill(Yp,0,A),ne.fill(0,0,A);for(let me=0;me<S;me++)for(let Te=0;Te<x;Te++){const Ie=Ee.data[4*(me*x+Te)+3]/255;if(Ie===0)continue;const Pe=(me+X)*T+Te+X;if(Ie===1)fe[Pe]=0,ne[Pe]=Yp;else{const Ke=.5-Ie;fe[Pe]=Ke>0?Ke*Ke:0,ne[Pe]=Ke<0?Ke*Ke:0}}ET(fe,0,0,T,P,T,this.f,this.v,this.z),ET(ne,X,X,x,S,T,this.f,this.v,this.z);for(let me=0;me<A;me++){const Te=Math.sqrt(fe[me])-Math.sqrt(ne[me]);z[me]=Math.round(255-255*(Te/this.radius+this.cutoff))}return F}};const _d=no;function PT(r,n,i,c){const d=[],m=r.image,y=m.pixelRatio,x=m.paddedRect.w-2*_d,S=m.paddedRect.h-2*_d,T=r.right-r.left,P=r.bottom-r.top,A=m.stretchX||[[0,x]],z=m.stretchY||[[0,S]],F=(tt,yt)=>tt+yt[1]-yt[0],V=A.reduce(F,0),X=z.reduce(F,0),ne=x-V,fe=S-X;let Ee=0,me=V,Te=0,Ie=X,Pe=0,Ke=ne,Ze=0,ut=fe;if(m.content&&c){const tt=m.content;Ee=ty(A,0,tt[0]),Te=ty(z,0,tt[1]),me=ty(A,tt[0],tt[2]),Ie=ty(z,tt[1],tt[3]),Pe=tt[0]-Ee,Ze=tt[1]-Te,Ke=tt[2]-tt[0]-me,ut=tt[3]-tt[1]-Ie}const Pt=(tt,yt,_t,Tt)=>{const Dt=ny(tt.stretch-Ee,me,T,r.left),st=ry(tt.fixed-Pe,Ke,tt.stretch,V),qt=ny(yt.stretch-Te,Ie,P,r.top),on=ry(yt.fixed-Ze,ut,yt.stretch,X),Xt=ny(_t.stretch-Ee,me,T,r.left),zn=ry(_t.fixed-Pe,Ke,_t.stretch,V),Rt=ny(Tt.stretch-Te,Ie,P,r.top),fn=ry(Tt.fixed-Ze,ut,Tt.stretch,X),Rn=new ae(Dt,qt),Kn=new ae(Xt,qt),Ln=new ae(Xt,Rt),Cn=new ae(Dt,Rt),Cr=new ae(st/y,on/y),On=new ae(zn/y,fn/y),Bn=n*Math.PI/180;if(Bn){const br=Math.sin(Bn),mr=Math.cos(Bn),Or=[mr,-br,br,mr];Rn._matMult(Or),Kn._matMult(Or),Cn._matMult(Or),Ln._matMult(Or)}const fr=tt.stretch+tt.fixed,xr=yt.stretch+yt.fixed;return{tl:Rn,tr:Kn,bl:Cn,br:Ln,tex:{x:m.paddedRect.x+_d+fr,y:m.paddedRect.y+_d+xr,w:_t.stretch+_t.fixed-fr,h:Tt.stretch+Tt.fixed-xr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Cr,pixelOffsetBR:On,minFontScaleX:Ke/y/T,minFontScaleY:ut/y/P,isSDF:i}};if(c&&(m.stretchX||m.stretchY)){const tt=MT(A,ne,V),yt=MT(z,fe,X);for(let _t=0;_t<tt.length-1;_t++){const Tt=tt[_t],Dt=tt[_t+1];for(let st=0;st<yt.length-1;st++)d.push(Pt(Tt,yt[st],Dt,yt[st+1]))}}else d.push(Pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return d}function ty(r,n,i){let c=0;for(const d of r)c+=Math.max(n,Math.min(i,d[1]))-Math.max(n,Math.min(i,d[0]));return c}function MT(r,n,i){const c=[{fixed:-_d,stretch:0}];for(const[d,m]of r){const y=c[c.length-1];c.push({fixed:d-y.stretch,stretch:y.stretch}),c.push({fixed:d-y.stretch,stretch:y.stretch+(m-d)})}return c.push({fixed:n+_d,stretch:i}),c}function ny(r,n,i,c){return r/n*i+c}function ry(r,n,i,c){return r-n*i/c}function vz(r,n,i,c){const d=n+r.positionedLines[c].lineOffset;return c===0?i+d/2:i+(d+(n+r.positionedLines[c-1].lineOffset))/2}class xz{constructor(n=[],i=bz){if(this.data=n,this.length=this.data.length,this.compare=i,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:i,compare:c}=this,d=i[n];for(;n>0;){const m=n-1>>1,y=i[m];if(c(d,y)>=0)break;i[n]=y,n=m}i[n]=d}_down(n){const{data:i,compare:c}=this,d=this.length>>1,m=i[n];for(;n<d;){let y=1+(n<<1),x=i[y];const S=y+1;if(S<this.length&&c(i[S],x)<0&&(y=S,x=i[S]),c(x,m)>=0)break;i[n]=x,n=y}i[n]=m}}function bz(r,n){return r<n?-1:r>n?1:0}function wz(r,n=1,i=!1){let c=1/0,d=1/0,m=-1/0,y=-1/0;const x=r[0];for(let F=0;F<x.length;F++){const V=x[F];(!F||V.x<c)&&(c=V.x),(!F||V.y<d)&&(d=V.y),(!F||V.x>m)&&(m=V.x),(!F||V.y>y)&&(y=V.y)}const S=Math.min(m-c,y-d);let T=S/2;const P=new xz([],Sz);if(S===0)return new ae(c,d);for(let F=c;F<m;F+=S)for(let V=d;V<y;V+=S)P.push(new vd(F+T,V+T,T,r));let A=function(F){let V=0,X=0,ne=0;const fe=F[0];for(let Ee=0,me=fe.length,Te=me-1;Ee<me;Te=Ee++){const Ie=fe[Ee],Pe=fe[Te],Ke=Ie.x*Pe.y-Pe.x*Ie.y;X+=(Ie.x+Pe.x)*Ke,ne+=(Ie.y+Pe.y)*Ke,V+=3*Ke}return new vd(X/V,ne/V,0,F)}(r),z=P.length;for(;P.length;){const F=P.pop();(F.d>A.d||!A.d)&&(A=F,i&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,z)),F.max-A.d<=n||(T=F.h/2,P.push(new vd(F.p.x-T,F.p.y-T,T,r)),P.push(new vd(F.p.x+T,F.p.y-T,T,r)),P.push(new vd(F.p.x-T,F.p.y+T,T,r)),P.push(new vd(F.p.x+T,F.p.y+T,T,r)),z+=4)}return i&&(console.log(`num probes: ${z}`),console.log(`best distance: ${A.d}`)),A.p}function Sz(r,n){return n.max-r.max}class vd{constructor(n,i,c,d){this.p=new ae(n,i),this.h=c,this.d=function(m,y){let x=!1,S=1/0;for(let T=0;T<y.length;T++){const P=y[T];for(let A=0,z=P.length,F=z-1;A<z;F=A++){const V=P[A],X=P[F];V.y>m.y!=X.y>m.y&&m.x<(X.x-V.x)*(m.y-V.y)/(X.y-V.y)+V.x&&(x=!x),S=Math.min(S,TS(m,V,X))}}return(x?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}}const xd=7,bx=Number.POSITIVE_INFINITY,Tz=Math.sqrt(2);function IT(r,[n,i]){let c=0,d=0;if(i===bx){n<0&&(n=0);const m=n/Tz;switch(r){case"top-right":case"top-left":d=m-xd;break;case"bottom-right":case"bottom-left":d=-m+xd;break;case"bottom":d=-n+xd;break;case"top":d=n-xd}switch(r){case"top-right":case"bottom-right":c=-m;break;case"top-left":case"bottom-left":c=m;break;case"left":c=n;break;case"right":c=-n}}else{switch(n=Math.abs(n),i=Math.abs(i),r){case"top-right":case"top-left":case"top":d=i-xd;break;case"bottom-right":case"bottom-left":case"bottom":d=-i+xd}switch(r){case"top-right":case"bottom-right":case"right":c=-n;break;case"top-left":case"bottom-left":case"left":c=n}}return[c,d]}function Cz(r,n,i,c,d,m,y,x,S,T){r.createArrays(),r.tilePixelRatio=vn/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const P=r.layers[0].layout,A=r.layers[0]._unevaluatedLayout._values,z={};if(r.textSizeData.kind==="composite"){const{minZoom:X,maxZoom:ne}=r.textSizeData;z.compositeTextSizes=[A["text-size"].possiblyEvaluate(new I(X),x),A["text-size"].possiblyEvaluate(new I(ne),x)]}if(r.iconSizeData.kind==="composite"){const{minZoom:X,maxZoom:ne}=r.iconSizeData;z.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new I(X),x),A["icon-size"].possiblyEvaluate(new I(ne),x)]}z.layoutTextSize=A["text-size"].possiblyEvaluate(new I(S+1),x),z.layoutIconSize=A["icon-size"].possiblyEvaluate(new I(S+1),x),z.textMaxSize=A["text-size"].possiblyEvaluate(new I(18),x);const F=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point",V=P.get("text-size");for(const X of r.features){const ne=P.get("text-font").evaluate(X,{},x).join(","),fe=V.evaluate(X,{},x),Ee=z.layoutTextSize.evaluate(X,{},x),me=(z.layoutIconSize.evaluate(X,{},x),{horizontal:{},vertical:void 0}),Te=X.text;let Ie,Pe=[0,0];if(Te){const ut=Te.toString(),Pt=P.get("text-letter-spacing").evaluate(X,{},x)*wi,tt=P.get("text-line-height").evaluate(X,{},x)*wi,yt=Iv(ut)?Pt:0,_t=P.get("text-anchor").evaluate(X,{},x),Tt=P.get("text-variable-anchor");if(!Tt){const Xt=P.get("text-radial-offset").evaluate(X,{},x);Pe=Xt?IT(_t,[Xt*wi,bx]):P.get("text-offset").evaluate(X,{},x).map(zn=>zn*wi)}let Dt=F?"center":P.get("text-justify").evaluate(X,{},x);const st=P.get("symbol-placement")==="point",qt=st?P.get("text-max-width").evaluate(X,{},x)*wi:1/0,on=Xt=>{r.allowVerticalPlacement&&bp(ut)&&(me.vertical=_x(Te,n,i,d,ne,qt,tt,_t,Xt,yt,Pe,Ro.vertical,!0,Ee,fe))};if(!F&&Tt){const Xt=Dt==="auto"?Tt.map(Rt=>wx(Rt)):[Dt];let zn=!1;for(let Rt=0;Rt<Xt.length;Rt++){const fn=Xt[Rt];if(!me.horizontal[fn])if(zn)me.horizontal[fn]=me.horizontal[0];else{const Rn=_x(Te,n,i,d,ne,qt,tt,"center",fn,yt,Pe,Ro.horizontal,!1,Ee,fe);Rn&&(me.horizontal[fn]=Rn,zn=Rn.positionedLines.length===1)}}on("left")}else{if(Dt==="auto"&&(Dt=wx(_t)),st||P.get("text-writing-mode").indexOf("horizontal")>=0||!bp(ut)){const Xt=_x(Te,n,i,d,ne,qt,tt,_t,Dt,yt,Pe,Ro.horizontal,!1,Ee,fe);Xt&&(me.horizontal[Dt]=Xt)}on(st?"left":Dt)}}let Ke=!1;if(X.icon&&X.icon.name){const ut=c[X.icon.name];ut&&(Ie=gz(d[X.icon.name],P.get("icon-offset").evaluate(X,{},x),P.get("icon-anchor").evaluate(X,{},x)),Ke=ut.sdf,r.sdfIcons===void 0?r.sdfIcons=ut.sdf:r.sdfIcons!==ut.sdf&&He("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ut.pixelRatio!==r.pixelRatio||P.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const Ze=DT(me.horizontal)||me.vertical;r.iconsInText||(r.iconsInText=!!Ze&&Ze.iconsInText),(Ze||Ie)&&Ez(r,X,me,Ie,c,z,Ee,0,Pe,Ke,y,x,T)}m&&r.generateCollisionDebugBuffers(S,r.collisionBoxArray)}function wx(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ez(r,n,i,c,d,m,y,x,S,T,P,A,z){let F=m.textMaxSize.evaluate(n,{},A);F===void 0&&(F=y);const V=r.layers[0].layout,X=V.get("icon-offset").evaluate(n,{},A),ne=DT(i.horizontal)||i.vertical,fe=z.name==="globe",Ee=wi,me=y/Ee,Te=r.tilePixelRatio*F/Ee,Ie=(_t=r.overscaling,r.zoom>18&&_t>2&&(_t>>=1),Math.max(vn/(512*_t),1)*V.get("symbol-spacing")),Pe=V.get("text-padding")*r.tilePixelRatio,Ke=V.get("icon-padding")*r.tilePixelRatio,Ze=Fe(V.get("text-max-angle")),ut=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Pt=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",tt=V.get("symbol-placement"),yt=Ie/2;var _t;const Tt=V.get("icon-text-fit");let Dt;c&&Tt!=="none"&&(r.allowVerticalPlacement&&i.vertical&&(Dt=vT(c,i.vertical,Tt,V.get("icon-text-fit-padding"),X,me)),ne&&(c=vT(c,ne,Tt,V.get("icon-text-fit-padding"),X,me)));const st=(qt,on,Xt)=>{if(on.x<0||on.x>=vn||on.y<0||on.y>=vn)return;let zn=null;if(fe){const{x:Rt,y:fn,z:Rn}=z.projectTilePoint(on.x,on.y,Xt);zn={anchor:new Na(Rt,fn,Rn,0,void 0),up:z.upVector(Xt,on.x,on.y)}}(function(Rt,fn,Rn,Kn,Ln,Cn,Cr,On,Bn,fr,xr,br,mr,Or,jr,ti,gr,li,ni,Br,tr,ri,wr,qi,ii){const Si=Rt.addToLineVertexArray(fn,Kn);let yi,Zi,_i,$s,Sd,sf,af,dC=0,hC=0,pC=0,fC=0,Bx=-1,Fx=-1;const oa={};let mC=zv("");const Hc=Rn?Rn.anchor:fn;let $x=0,Nx=0;if(Bn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[$x,Nx]=Bn.layout.get("text-offset").evaluate(tr,{},ii).map(go=>go*wi):($x=Bn.layout.get("text-radial-offset").evaluate(tr,{},ii)*wi,Nx=bx),Rt.allowVerticalPlacement&&Ln.vertical){const go=Ln.vertical;if(jr)sf=Sx(go),On&&(af=Sx(On));else{const yo=Bn.layout.get("text-rotate").evaluate(tr,{},ii)+90;_i=iy(fr,Hc,fn,xr,br,mr,go,Or,yo,ti),On&&($s=iy(fr,Hc,fn,xr,br,mr,On,li,yo))}}if(Cn){const go=Bn.layout.get("icon-rotate").evaluate(tr,{},ii),yo=Bn.layout.get("icon-text-fit")!=="none",lf=PT(Cn,go,wr,yo),Vx=On?PT(On,go,wr,yo):void 0;Zi=iy(fr,Hc,fn,xr,br,mr,Cn,li,go),dC=4*lf.length;const gC=Rt.iconSizeData;let qc=null;gC.kind==="source"?(qc=[Os*Bn.layout.get("icon-size").evaluate(tr,{},ii)],qc[0]>kl&&He(`${Rt.layerIds[0]}: Value for "icon-size" is >= ${Kp}. Reduce your "icon-size".`)):gC.kind==="composite"&&(qc=[Os*ri.compositeIconSizes[0].evaluate(tr,{},ii),Os*ri.compositeIconSizes[1].evaluate(tr,{},ii)],(qc[0]>kl||qc[1]>kl)&&He(`${Rt.layerIds[0]}: Value for "icon-size" is >= ${Kp}. Reduce your "icon-size".`)),Rt.addSymbols(Rt.icon,lf,qc,Br,ni,tr,!1,Rn,fn,Si.lineStartIndex,Si.lineLength,-1,qi,ii),Bx=Rt.icon.placedSymbolArray.length-1,Vx&&(hC=4*Vx.length,Rt.addSymbols(Rt.icon,Vx,qc,Br,ni,tr,Ro.vertical,Rn,fn,Si.lineStartIndex,Si.lineLength,-1,qi,ii),Fx=Rt.icon.placedSymbolArray.length-1)}for(const go in Ln.horizontal){const yo=Ln.horizontal[go];yi||(mC=zv(yo.text),jr?Sd=Sx(yo):yi=iy(fr,Hc,fn,xr,br,mr,yo,Or,Bn.layout.get("text-rotate").evaluate(tr,{},ii),ti));const lf=yo.positionedLines.length===1;if(pC+=AT(Rt,Rn,fn,yo,Cr,Bn,jr,tr,ti,Si,Ln.vertical?Ro.horizontal:Ro.horizontalOnly,lf?Object.keys(Ln.horizontal):[go],oa,Bx,ri,qi,ii),lf)break}Ln.vertical&&(fC+=AT(Rt,Rn,fn,Ln.vertical,Cr,Bn,jr,tr,ti,Si,Ro.vertical,["vertical"],oa,Fx,ri,qi,ii));let zl=-1;const Ux=(go,yo)=>go?Math.max(go,yo):yo;zl=Ux(Sd,zl),zl=Ux(sf,zl),zl=Ux(af,zl);const eR=zl>-1?1:0;Rt.glyphOffsetArray.length>=Ml.MAX_GLYPHS&&He("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),tr.sortKey!==void 0&&Rt.addToSortKeyRanges(Rt.symbolInstances.length,tr.sortKey),Rt.symbolInstances.emplaceBack(Hc.x,Hc.y,Hc.z,fn.x,fn.y,oa.right>=0?oa.right:-1,oa.center>=0?oa.center:-1,oa.left>=0?oa.left:-1,oa.vertical>=0?oa.vertical:-1,Bx,Fx,mC,yi!==void 0?yi:Rt.collisionBoxArray.length,yi!==void 0?yi+1:Rt.collisionBoxArray.length,_i!==void 0?_i:Rt.collisionBoxArray.length,_i!==void 0?_i+1:Rt.collisionBoxArray.length,Zi!==void 0?Zi:Rt.collisionBoxArray.length,Zi!==void 0?Zi+1:Rt.collisionBoxArray.length,$s||Rt.collisionBoxArray.length,$s?$s+1:Rt.collisionBoxArray.length,xr,pC,fC,dC,hC,eR,0,$x,Nx,zl)})(r,on,zn,qt,i,c,d,Dt,r.layers[0],r.collisionBoxArray,n.index,n.sourceLayerIndex,r.index,Pe,ut,S,0,Ke,Pt,X,n,m,T,P,A)};if(tt==="line")for(const qt of CT(n.geometry,0,0,vn,vn)){const on=_z(qt,Ie,Ze,i.vertical||ne,c,Ee,Te,r.overscaling,vn);for(const Xt of on)ne&&kz(r,ne.text,yt,Xt)||st(qt,Xt,A)}else if(tt==="line-center"){for(const qt of n.geometry)if(qt.length>1){const on=yz(qt,Ze,i.vertical||ne,c,Ee,Te);on&&st(qt,on,A)}}else if(n.type==="Polygon")for(const qt of cx(n.geometry,0)){const on=wz(qt,16);st(qt[0],new Na(on.x,on.y,0,0,void 0),A)}else if(n.type==="LineString")for(const qt of n.geometry)st(qt,new Na(qt[0].x,qt[0].y,0,0,void 0),A);else if(n.type==="Point")for(const qt of n.geometry)for(const on of qt)st([on],new Na(on.x,on.y,0,0,void 0),A)}const Kp=255,kl=Kp*Os;function AT(r,n,i,c,d,m,y,x,S,T,P,A,z,F,V,X,ne){const fe=function(Te,Ie,Pe,Ke,Ze,ut,Pt,tt){const yt=[];if(Ie.positionedLines.length===0)return yt;const _t=Ke.layout.get("text-rotate").evaluate(ut,{})*Math.PI/180,Tt=function(Xt){const zn=Xt[0],Rt=Xt[1],fn=zn*Rt;return fn>0?[zn,-Rt]:fn<0?[-zn,Rt]:zn===0?[Rt,zn]:[Rt,-zn]}(Pe);let Dt=Math.abs(Ie.top-Ie.bottom);for(const Xt of Ie.positionedLines)Dt-=Xt.lineOffset;const st=Ie.positionedLines.length,qt=Dt/st;let on=Ie.top-Pe[1];for(let Xt=0;Xt<st;++Xt){const zn=Ie.positionedLines[Xt];on=vz(Ie,qt,on,Xt);for(const Rt of zn.positionedGlyphs){if(!Rt.rect)continue;const fn=Rt.rect||{};let Rn=dT+1,Kn=!0,Ln=1,Cn=0;if(Rt.imageName){const wr=Pt[Rt.imageName];if(!wr)continue;if(wr.sdf){He("SDF images are not supported in formatted text and will be ignored.");continue}Kn=!1,Ln=wr.pixelRatio,Rn=no/Ln}const Cr=(Ze||tt)&&Rt.vertical,On=Rt.metrics.advance*Rt.scale/2,Bn=Rt.metrics,fr=Rt.rect;if(fr===null)continue;tt&&Ie.verticalizable&&(Cn=Rt.imageName?On-Rt.metrics.width*Rt.scale/2:0);const xr=Ze?[Rt.x+On,Rt.y]:[0,0];let br=[0,0],mr=[0,0],Or=!1;Ze||(Cr?(mr=[Rt.x+On+Tt[0],Rt.y+Tt[1]-Cn],Or=!0):br=[Rt.x+On+Pe[0],Rt.y+Pe[1]-Cn]);const jr=fr.w*Rt.scale/(Ln*(Rt.localGlyph?Bs:1)),ti=fr.h*Rt.scale/(Ln*(Rt.localGlyph?Bs:1));let gr,li,ni,Br;if(Cr){const wr=Rt.y-on,qi=new ae(-On,On-wr),ii=-Math.PI/2,Si=new ae(...mr);gr=new ae(-On+br[0],br[1]),gr._rotateAround(ii,qi)._add(Si),gr.x+=-wr+On,gr.y-=(Bn.left-Rn)*Rt.scale;const yi=Rt.imageName?Bn.advance*Rt.scale:wi*Rt.scale,Zi=String.fromCharCode(Rt.glyph);ez(Zi)?gr.x+=(1-Rn)*Rt.scale:tz(Zi)?gr.x+=yi-Bn.height*Rt.scale+(-Rn-1)*Rt.scale:gr.x+=Rt.imageName||Bn.width+2*Rn===fr.w&&Bn.height+2*Rn===fr.h?(yi-ti)/2:(yi-(Bn.height+2*Rn)*Rt.scale)/2,li=new ae(gr.x,gr.y-jr),ni=new ae(gr.x+ti,gr.y),Br=new ae(gr.x+ti,gr.y-jr)}else{const wr=(Bn.left-Rn)*Rt.scale-On+br[0],qi=(-Bn.top-Rn)*Rt.scale+br[1],ii=wr+jr,Si=qi+ti;gr=new ae(wr,qi),li=new ae(ii,qi),ni=new ae(wr,Si),Br=new ae(ii,Si)}if(_t){let wr;wr=Ze?new ae(0,0):Or?new ae(Tt[0],Tt[1]):new ae(Pe[0],Pe[1]),gr._rotateAround(_t,wr),li._rotateAround(_t,wr),ni._rotateAround(_t,wr),Br._rotateAround(_t,wr)}const tr=new ae(0,0),ri=new ae(0,0);yt.push({tl:gr,tr:li,bl:ni,br:Br,tex:fn,writingMode:Ie.writingMode,glyphOffset:xr,sectionIndex:Rt.sectionIndex,isSDF:Kn,pixelOffsetTL:tr,pixelOffsetBR:ri,minFontScaleX:0,minFontScaleY:0})}}return yt}(0,c,S,m,y,x,d,r.allowVerticalPlacement),Ee=r.textSizeData;let me=null;Ee.kind==="source"?(me=[Os*m.layout.get("text-size").evaluate(x,{},ne)],me[0]>kl&&He(`${r.layerIds[0]}: Value for "text-size" is >= ${Kp}. Reduce your "text-size".`)):Ee.kind==="composite"&&(me=[Os*V.compositeTextSizes[0].evaluate(x,{},ne),Os*V.compositeTextSizes[1].evaluate(x,{},ne)],(me[0]>kl||me[1]>kl)&&He(`${r.layerIds[0]}: Value for "text-size" is >= ${Kp}. Reduce your "text-size".`)),r.addSymbols(r.text,fe,me,S,y,x,P,n,i,T.lineStartIndex,T.lineLength,F,X,ne);for(const Te of A)z[Te]=r.text.placedSymbolArray.length-1;return 4*fe.length}function DT(r){for(const n in r)return r[n];return null}function iy(r,n,i,c,d,m,y,x,S,T){let P=y.top,A=y.bottom,z=y.left,F=y.right;const V=y.collisionPadding;if(V&&(z-=V[0],P-=V[1],F+=V[2],A+=V[3]),S){const X=new ae(z,P),ne=new ae(F,P),fe=new ae(z,A),Ee=new ae(F,A),me=Fe(S);let Te=new ae(0,0);T&&(Te=new ae(T[0],T[1])),X._rotateAround(me,Te),ne._rotateAround(me,Te),fe._rotateAround(me,Te),Ee._rotateAround(me,Te),z=Math.min(X.x,ne.x,fe.x,Ee.x),F=Math.max(X.x,ne.x,fe.x,Ee.x),P=Math.min(X.y,ne.y,fe.y,Ee.y),A=Math.max(X.y,ne.y,fe.y,Ee.y)}return r.emplaceBack(n.x,n.y,n.z,i.x,i.y,z,P,F,A,x,c,d,m),r.length-1}function Sx(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);const n=r.bottom-r.top;return n>0?Math.max(10,n):null}function kz(r,n,i,c){const d=r.compareText;if(n in d){const m=d[n];for(let y=m.length-1;y>=0;y--)if(c.dist(m[y])<i)return!0}else d[n]=[];return d[n].push(c),!1}function zT(r,n){const i=r.fovAboveCenter,c=r.elevation?r.elevation.getMinElevationBelowMSL()*n:0,d=(r._camera.position[2]*r.worldSize-c)/Math.cos(r._pitch),m=Math.sin(i)*d/Math.sin(Math.max(Math.PI/2-r._pitch-i,.01)),y=Math.sin(r._pitch)*m+d;return Math.min(1.01*y,d*(1/r._horizonShift))}function Wc(r,n){if(!n.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:n};const i=Math.pow(2,-r.z),c=r.x*i,d=(r.x+1)*i,m=r.y*i,y=(r.y+1)*i,x=zo(c),S=zo(d),T=Ai(m),P=Ai(y),A=n.project(x,T),z=n.project(S,T),F=n.project(S,P),V=n.project(x,P);let X=Math.min(A.x,z.x,F.x,V.x),ne=Math.min(A.y,z.y,F.y,V.y),fe=Math.max(A.x,z.x,F.x,V.x),Ee=Math.max(A.y,z.y,F.y,V.y);const me=i/16;function Te(Pe,Ke,Ze,ut,Pt,tt){const yt=(Ze+Pt)/2,_t=(ut+tt)/2,Tt=n.project(zo(yt),Ai(_t)),Dt=Math.max(0,X-Tt.x,ne-Tt.y,Tt.x-fe,Tt.y-Ee);X=Math.min(X,Tt.x),fe=Math.max(fe,Tt.x),ne=Math.min(ne,Tt.y),Ee=Math.max(Ee,Tt.y),Dt>me&&(Te(Pe,Tt,Ze,ut,yt,_t),Te(Tt,Ke,yt,_t,Pt,tt))}Te(A,z,c,m,d,m),Te(z,F,d,m,d,y),Te(F,V,d,y,c,y),Te(V,A,c,y,c,m),X-=me,ne-=me,fe+=me,Ee+=me;const Ie=1/Math.max(fe-X,Ee-ne);return{scale:Ie,x:X*Ie,y:ne*Ie,x2:fe*Ie,y2:Ee*Ie,projection:n}}const Pz=zs(new Float32Array(16));class Pl{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,i){return{x:0,y:0,z:0}}unproject(n,i){return new pr(0,0)}projectTilePoint(n,i,c){return{x:n,y:i,z:0}}locationPoint(n,i,c=!0){return n._coordinatePoint(n.locationCoordinate(i),c)}pixelsPerMeter(n,i){return Ls(1,n)*i}pixelSpaceConversion(n,i,c){return 1}farthestPixelDistance(n){return zT(n,n.pixelsPerMeter)}pointCoordinate(n,i,c,d){const m=n.horizonLineFromTop(!1),y=new ae(i,Math.max(m,c));return n.rayIntersectionCoordinate(n.pointRayIntersection(y,d))}pointCoordinate3D(n,i,c){const d=new ae(i,c);if(n.elevation)return n.elevation.pointCoordinate(d);{const m=this.pointCoordinate(n,d.x,d.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(n,i){if(n.elevation)return!this.pointCoordinate3D(n,i.x,i.y);const c=n.horizonLineFromTop();return i.y<c}createInversionMatrix(n,i){return Pz}createTileMatrix(n,i,c){let d,m,y;const x=c.canonical,S=zs(new Float64Array(16));if(this.isReprojectedInTileSpace){const T=Wc(x,this);d=1,m=T.x+c.wrap*T.scale,y=T.y,Bc(S,S,[d/T.scale,d/T.scale,n.pixelsPerMeter/i])}else d=i/n.zoomScale(x.z),m=(x.x+Math.pow(2,x.z)*c.wrap)*d,y=x.y*d;return Pp(S,S,[m,y,0]),Bc(S,S,[d/vn,d/vn,1]),S}upVector(n,i,c){return[0,0,1]}upVectorScale(n,i,c){return{metersToTile:1}}}class Mz extends Pl{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[i,c]=this.parallels=n.parallels||[29.5,45.5],d=Math.sin(Fe(i));this.n=(d+Math.sin(Fe(c)))/2,this.c=1+d*(2*this.n-d),this.r0=Math.sqrt(this.c)/this.n}project(n,i){const{n:c,c:d,r0:m}=this,y=Fe(n-this.center[0]),x=Fe(i),S=Math.sqrt(d-2*c*Math.sin(x))/c;return{x:S*Math.sin(y*c),y:S*Math.cos(y*c)-m,z:0}}unproject(n,i){const{n:c,c:d,r0:m}=this,y=m+i;let x=Math.atan2(n,Math.abs(y))*Math.sign(y);y*c<0&&(x-=Math.PI*Math.sign(n)*Math.sign(y));const S=Fe(this.center[0])*c;x=Ne(x,-Math.PI-S,Math.PI-S);const T=Se(be(x/c)+this.center[0],-180,180),P=Math.asin(Se((d-(n*n+y*y)*c*c)/(2*c),-1,1)),A=Se(be(P),-Di,Di);return new pr(T,A)}}const Jp=1.340264,Qp=-.081106,ef=893e-6,tf=.003796,oy=Math.sqrt(3)/2;class Iz extends Pl{project(n,i){i=i/180*Math.PI,n=n/180*Math.PI;const c=Math.asin(oy*Math.sin(i)),d=c*c,m=d*d*d;return{x:.5*(n*Math.cos(c)/(oy*(Jp+3*Qp*d+m*(7*ef+9*tf*d)))/Math.PI+.5),y:1-.5*(c*(Jp+Qp*d+m*(ef+tf*d))/Math.PI+1),z:0}}unproject(n,i){n=(2*n-.5)*Math.PI;let c=i=(2*(1-i)-1)*Math.PI,d=c*c,m=d*d*d;for(let P,A,z,F=0;F<12&&(A=c*(Jp+Qp*d+m*(ef+tf*d))-i,z=Jp+3*Qp*d+m*(7*ef+9*tf*d),P=A/z,c=Se(c-P,-Math.PI/3,Math.PI/3),d=c*c,m=d*d*d,!(Math.abs(P)<1e-12));++F);const y=oy*n*(Jp+3*Qp*d+m*(7*ef+9*tf*d))/Math.cos(c),x=Math.asin(Math.sin(c)/oy),S=Se(180*y/Math.PI,-180,180),T=Se(180*x/Math.PI,-Di,Di);return new pr(S,T)}}class Az extends Pl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,i){return{x:.5+n/360,y:.5-i/360,z:0}}unproject(n,i){const c=360*(n-.5),d=Se(360*(.5-i),-Di,Di);return new pr(c,d)}}const bd=Math.PI/2;function sy(r){return Math.tan((bd+r)/2)}class Dz extends Pl{constructor(n){super(n),this.center=n.center||[0,30];const[i,c]=this.parallels=n.parallels||[30,30];let d=Fe(i),m=Fe(c);this.southernCenter=d+m<0,this.southernCenter&&(d=-d,m=-m);const y=Math.cos(d),x=sy(d);this.n=d===m?Math.sin(d):Math.log(y/Math.cos(m))/Math.log(sy(m)/x),this.f=y*Math.pow(sy(d),this.n)/this.n}project(n,i){i=Fe(i),this.southernCenter&&(i=-i),n=Fe(n-this.center[0]);const c=1e-6,{n:d,f:m}=this;m>0?i<-bd+c&&(i=-bd+c):i>bd-c&&(i=bd-c);const y=m/Math.pow(sy(i),d);let x=y*Math.sin(d*n),S=m-y*Math.cos(d*n);return x=.5*(x/Math.PI+.5),S=.5*(S/Math.PI+.5),{x,y:this.southernCenter?S:1-S,z:0}}unproject(n,i){n=(2*n-.5)*Math.PI,this.southernCenter&&(i=1-i),i=(2*(1-i)-.5)*Math.PI;const{n:c,f:d}=this,m=d-i,y=Math.sign(m),x=Math.sign(c)*Math.sqrt(n*n+m*m);let S=Math.atan2(n,Math.abs(m))*y;m*c<0&&(S-=Math.PI*Math.sign(n)*y);const T=Se(be(S/c)+this.center[0],-180,180),P=Se(be(2*Math.atan(Math.pow(d/x,1/c))-bd),-Di,Di);return new pr(T,this.southernCenter?-P:P)}}class RT extends Pl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,i){return{x:ea(n),y:ta(i),z:0}}unproject(n,i){const c=zo(n),d=Ai(i);return new pr(c,d)}}const LT=Fe(Di);class zz extends Pl{project(n,i){const c=(i=Fe(i))*i,d=c*c;return{x:.5*((n=Fe(n))*(.8707-.131979*c+d*(d*(.003971*c-.001529*d)-.013791))/Math.PI+.5),y:1-.5*(i*(1.007226+c*(.015085+d*(.028874*c-.044475-.005916*d)))/Math.PI+1),z:0}}unproject(n,i){n=(2*n-.5)*Math.PI;let c=i=(2*(1-i)-1)*Math.PI,d=25,m=0,y=c*c;do{y=c*c;const T=y*y;m=(c*(1.007226+y*(.015085+T*(.028874*y-.044475-.005916*T)))-i)/(1.007226+y*(.045255+T*(.259866*y-.311325-.005916*11*T))),c=Se(c-m,-LT,LT)}while(Math.abs(m)>1e-6&&--d>0);y=c*c;const x=Se(be(n/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),S=be(c);return new pr(x,S)}}const OT=Fe(Di);class Rz extends Pl{project(n,i){i=Fe(i),n=Fe(n);const c=Math.cos(i),d=2/Math.PI,m=Math.acos(c*Math.cos(n/2)),y=Math.sin(m)/m,x=.5*(n*d+2*c*Math.sin(n/2)/y)||0,S=.5*(i+Math.sin(i)/y)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(n,i){let c=n=(2*n-.5)*Math.PI,d=i=(2*(1-i)-1)*Math.PI,m=25;const y=1e-6;let x=0,S=0;do{const T=Math.cos(d),P=Math.sin(d),A=2*P*T,z=P*P,F=T*T,V=Math.cos(c/2),X=Math.sin(c/2),ne=2*V*X,fe=X*X,Ee=1-F*V*V,me=Ee?1/Ee:0,Te=Ee?Math.acos(T*V)*Math.sqrt(1/Ee):0,Ie=.5*(2*Te*T*X+2*c/Math.PI)-n,Pe=.5*(Te*P+d)-i,Ke=.5*me*(F*fe+Te*T*V*z)+1/Math.PI,Ze=me*(ne*A/4-Te*P*X),ut=.125*me*(A*X-Te*P*F*ne),Pt=.5*me*(z*V+Te*fe*T)+.5,tt=Ze*ut-Pt*Ke;x=(Pe*Ze-Ie*Pt)/tt,S=(Ie*ut-Pe*Ke)/tt,c=Se(c-x,-Math.PI,Math.PI),d=Se(d-S,-OT,OT)}while((Math.abs(x)>y||Math.abs(S)>y)&&--m>0);return new pr(be(c),be(d))}}class BT extends Pl{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Fe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,i){const{scale:c,cosPhi:d}=this;return{x:Fe(n)*d*c+.5,y:-Math.sin(Fe(i))/d*c+.5,z:0}}unproject(n,i){const{scale:c,cosPhi:d}=this,m=-(i-.5)/c,y=Se(be((n-.5)/c)/d,-180,180),x=Math.asin(Se(m*d,-1,1)),S=Se(be(x),-Di,Di);return new pr(y,S)}}class Lz extends RT{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,i,c){const d=Op(n,i,c);return Zr(d,d,Bp(Qs(c))),{x:d[0],y:d[1],z:d[2]}}locationPoint(n,i){const c=sd(i.lat,i.lng),d=Wi([],c),m=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(i),n._centerAltitude):n._centerAltitude;Dp(c,c,d,Ls(1,0)*vn*m);const y=zs(new Float64Array(16));return Oc(y,n.pixelMatrix,n.globeMatrix),Zr(c,c,y),new ae(c[0],c[1])}pixelsPerMeter(n,i){return Ls(1,0)*i}pixelSpaceConversion(n,i,c){const d=Ls(1,n)*i,m=Xn(Ls(1,45)*i,d,c);return this.pixelsPerMeter(n,i)/m}createTileMatrix(n,i,c){const d=qv(Qs(c.canonical));return Oc(new Float64Array(16),n.globeMatrix,d)}createInversionMatrix(n,i){const{center:c}=n,d=Bp(Qs(i));return Rg(d,d,Fe(c.lng)),Bv(d,d,Fe(c.lat)),Bc(d,d,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(d)}pointCoordinate(n,i,c,d){return uS(n,i,c,!0)||new ld(0,0)}pointCoordinate3D(n,i,c){const d=this.pointCoordinate(n,i,c,0);return[d.x,d.y,d.z]}isPointAboveHorizon(n,i){return!uS(n,i.x,i.y,!1)}farthestPixelDistance(n){const i=function(d,m){const y=d.cameraToCenterDistance,x=d._centerAltitude*m,S=d._camera,T=d._camera.forward(),P=Oa([],Do([],T,-y),[0,0,x]),A=d.worldSize/(2*Math.PI),z=[0,0,-A],F=d.width/d.height,V=Math.tan(d.fovAboveCenter),X=Do([],S.up(),V),ne=Do([],S.right(),V*F),fe=Wi([],Oa([],Oa([],T,X),ne)),Ee=[];let me;if(new Uv(P,fe).closestPointOnSphere(z,A,Ee)){const Te=Oa([],Ee,z),Ie=Rs([],Te,P);me=Math.cos(d.fovAboveCenter)*Mp(Ie)}else{const Te=Rs([],P,z),Ie=Rs([],z,P);Wi(Ie,Ie);const Pe=Mp(Te)-A;me=Math.sqrt(Pe*(Pe+2*A));const Ke=Math.acos(me/(A+Pe))-Math.acos(es(T,Ie));me*=Math.cos(Ke)}return 1.01*me}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),c=ad(n.zoom);if(c>0){const d=zT(n,Ls(1,n.center.lat)*n.worldSize),m=n.worldSize/(2*Math.PI),y=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Xn(i,d+m*(1-Math.cos(y)),Math.pow(c,10))}return i}upVector(n,i,c){return Op(i,c,n,1)}upVectorScale(n){return{metersToTile:Lg(Bg(Qs(n)))}}}function FT(r){const n=r.parallels,i=!!n&&Math.abs(n[0]+n[1])<.01;switch(r.name){case"mercator":return new RT(r);case"equirectangular":return new Az(r);case"naturalEarth":return new zz(r);case"equalEarth":return new Iz(r);case"winkelTripel":return new Rz(r);case"albers":return i?new BT(r):new Mz(r);case"lambertConformalConic":return i?new BT(r):new Dz(r);case"globe":return new Lz(r)}throw new Error(`Invalid projection name: ${r.name}`)}const Oz=qg.types,Bz=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ay(r,n,i,c,d,m,y,x,S,T,P,A,z){const F=x?Math.min(kl,Math.round(x[0])):0,V=x?Math.min(kl,Math.round(x[1])):0;r.emplaceBack(n,i,Math.round(32*c),Math.round(32*d),m,y,(F<<1)+(S?1:0),V,16*T,16*P,256*A,256*z)}function ly(r,n,i,c,d,m,y){r.emplaceBack(n,i,c,d,m,y)}function cy(r,n,i,c,d){r.emplaceBack(n,i,c,d),r.emplaceBack(n,i,c,d),r.emplaceBack(n,i,c,d),r.emplaceBack(n,i,c,d)}function Fz(r){for(const n of r.sections)if(Dv(n.text))return!0;return!1}class Tx{constructor(n){this.layoutVertexArray=new wt,this.indexArray=new cn,this.programConfigurations=n,this.segments=new Qr,this.dynamicLayoutVertexArray=new Et,this.opacityVertexArray=new pn,this.placedSymbolArray=new Jr,this.globeExtVertexArray=new At}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,i,c,d){this.isEmpty()||(c&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,HD.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,ZD.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Bz,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,qD.members,!0)),this.opacityVertexBuffer.itemSize=1),(c||d)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}en(Tx,"SymbolBuffers");class Cx{constructor(n,i,c){this.layoutVertexArray=new n,this.layoutAttributes=i,this.indexArray=new c,this.segments=new Qr,this.collisionVertexArray=new Gn,this.collisionVertexArrayExt=new Vn}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,XD.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,YD.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}en(Cx,"CollisionBuffers");class Ml{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(y=>y.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=zs([]),this.placementViewportMatrix=zs([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=px(this.zoom,i["text-size"]),this.iconSizeData=px(this.zoom,i["icon-size"]);const c=this.layers[0].layout,d=c.get("symbol-sort-key"),m=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&d.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=c.get("text-writing-mode").map(y=>Ro[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new Tx(new Lc(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Tx(new Lc(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ji,this.lineVertexArray=new td,this.symbolInstances=new Pr}calculateGlyphDependencies(n,i,c,d,m){for(let y=0;y<n.length;y++)if(i[n.charCodeAt(y)]=!0,d&&m){const x=Zp[n.charAt(y)];x&&(i[x.charCodeAt(0)]=!0)}}populate(n,i,c,d){const m=this.layers[0],y=m.layout,x=this.projection.name==="globe",S=y.get("text-font"),T=y.get("text-field"),P=y.get("icon-image"),A=(T.value.kind!=="constant"||T.value.value instanceof Vi&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),z=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,F=y.get("symbol-sort-key");if(this.features=[],!A&&!z)return;const V=i.iconDependencies,X=i.glyphDependencies,ne=i.availableImages,fe=new I(this.zoom);for(const{feature:Ee,id:me,index:Te,sourceLayerIndex:Ie}of n){const Pe=m._featureFilter.needGeometry,Ke=Uc(Ee,Pe);if(!m._featureFilter.filter(fe,Ke,c))continue;if(Pe||(Ke.geometry=Ba(Ee,c,d)),x&&Ee.type!==1&&c.z<=5){const tt=Ke.geometry,yt=.98078528056,_t=(Tt,Dt)=>es(Op(Tt.x,Tt.y,c,1),Op(Dt.x,Dt.y,c,1))<yt;for(let Tt=0;Tt<tt.length;Tt++)tt[Tt]=ZA(tt[Tt],_t)}let Ze,ut;if(A){const tt=m.getValueAndResolveTokens("text-field",Ke,c,ne),yt=Vi.factory(tt);Fz(yt)&&(this.hasRTLText=!0),(!this.hasRTLText||b()==="unavailable"||this.hasRTLText&&k.isParsed())&&(Ze=QD(yt,m,Ke))}if(z){const tt=m.getValueAndResolveTokens("icon-image",Ke,c,ne);ut=tt instanceof co?tt:co.fromString(tt)}if(!Ze&&!ut)continue;const Pt=this.sortFeaturesByKey?F.evaluate(Ke,{},c):void 0;if(this.features.push({id:me,text:Ze,icon:ut,index:Te,sourceLayerIndex:Ie,geometry:Ke.geometry,properties:Ee.properties,type:Oz[Ee.type],sortKey:Pt}),ut&&(V[ut.name]=!0),Ze){const tt=S.evaluate(Ke,{},c).join(","),yt=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ro.vertical)>=0;for(const _t of Ze.sections)if(_t.image)V[_t.image.name]=!0;else{const Tt=bp(Ze.toString()),Dt=_t.fontStack||tt,st=X[Dt]=X[Dt]||{};this.calculateGlyphDependencies(_t.text,st,yt,this.allowVerticalPlacement,Tt)}}}y.get("symbol-placement")==="line"&&(this.features=function(Ee){const me={},Te={},Ie=[];let Pe=0;function Ke(tt){Ie.push(Ee[tt]),Pe++}function Ze(tt,yt,_t){const Tt=Te[tt];return delete Te[tt],Te[yt]=Tt,Ie[Tt].geometry[0].pop(),Ie[Tt].geometry[0]=Ie[Tt].geometry[0].concat(_t[0]),Tt}function ut(tt,yt,_t){const Tt=me[yt];return delete me[yt],me[tt]=Tt,Ie[Tt].geometry[0].shift(),Ie[Tt].geometry[0]=_t[0].concat(Ie[Tt].geometry[0]),Tt}function Pt(tt,yt,_t){const Tt=_t?yt[0][yt[0].length-1]:yt[0][0];return`${tt}:${Tt.x}:${Tt.y}`}for(let tt=0;tt<Ee.length;tt++){const yt=Ee[tt],_t=yt.geometry,Tt=yt.text?yt.text.toString():null;if(!Tt){Ke(tt);continue}const Dt=Pt(Tt,_t),st=Pt(Tt,_t,!0);if(Dt in Te&&st in me&&Te[Dt]!==me[st]){const qt=ut(Dt,st,_t),on=Ze(Dt,st,Ie[qt].geometry);delete me[Dt],delete Te[st],Te[Pt(Tt,Ie[on].geometry,!0)]=on,Ie[qt].geometry=null}else Dt in Te?Ze(Dt,st,_t):st in me?ut(Dt,st,_t):(Ke(tt),me[Dt]=Pe-1,Te[st]=Pe-1)}return Ie.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ee,me)=>Ee.sortKey-me.sortKey)}update(n,i,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,i,this.layers,c,d),this.icon.programConfigurations.updatePaintArrays(n,i,this.layers,c,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=FT(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,i){const c=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:d,y:m}of i)this.lineVertexArray.emplaceBack(d,m);return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(n,i,c,d,m,y,x,S,T,P,A,z,F,V){const X=n.indexArray,ne=n.layoutVertexArray,fe=n.globeExtVertexArray,Ee=n.segments.prepareSegment(4*i.length,ne,X,this.canOverlap?y.sortKey:void 0),me=this.glyphOffsetArray.length,Te=Ee.vertexLength,Ie=this.allowVerticalPlacement&&x===Ro.vertical?Math.PI/2:0,Pe=y.text&&y.text.sections;for(let Ze=0;Ze<i.length;Ze++){const{tl:ut,tr:Pt,bl:tt,br:yt,tex:_t,pixelOffsetTL:Tt,pixelOffsetBR:Dt,minFontScaleX:st,minFontScaleY:qt,glyphOffset:on,isSDF:Xt,sectionIndex:zn}=i[Ze],Rt=Ee.vertexLength,fn=on[1];if(ay(ne,T.x,T.y,ut.x,fn+ut.y,_t.x,_t.y,c,Xt,Tt.x,Tt.y,st,qt),ay(ne,T.x,T.y,Pt.x,fn+Pt.y,_t.x+_t.w,_t.y,c,Xt,Dt.x,Tt.y,st,qt),ay(ne,T.x,T.y,tt.x,fn+tt.y,_t.x,_t.y+_t.h,c,Xt,Tt.x,Dt.y,st,qt),ay(ne,T.x,T.y,yt.x,fn+yt.y,_t.x+_t.w,_t.y+_t.h,c,Xt,Dt.x,Dt.y,st,qt),S){const{x:Rn,y:Kn,z:Ln}=S.anchor,[Cn,Cr,On]=S.up;ly(fe,Rn,Kn,Ln,Cn,Cr,On),ly(fe,Rn,Kn,Ln,Cn,Cr,On),ly(fe,Rn,Kn,Ln,Cn,Cr,On),ly(fe,Rn,Kn,Ln,Cn,Cr,On),cy(n.dynamicLayoutVertexArray,Rn,Kn,Ln,Ie)}else cy(n.dynamicLayoutVertexArray,T.x,T.y,T.z,Ie);X.emplaceBack(Rt,Rt+1,Rt+2),X.emplaceBack(Rt+1,Rt+2,Rt+3),Ee.vertexLength+=4,Ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(on[0]),Ze!==i.length-1&&zn===i[Ze+1].sectionIndex||n.programConfigurations.populatePaintArrays(ne.length,y,y.index,{},F,V,Pe&&Pe[zn])}const Ke=S?S.anchor:T;n.placedSymbolArray.emplaceBack(Ke.x,Ke.y,Ke.z,T.x,T.y,me,this.glyphOffsetArray.length-me,Te,P,A,T.segment,c?c[0]:0,c?c[1]:0,d[0],d[1],x,0,!1,0,z,0)}_commitLayoutVertex(n,i,c,d,m,y,x){n.emplaceBack(i,c,d,m,y,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(n,i,c,d,m,y,x){const S=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),T=S.vertexLength,P=x.tileAnchorX,A=x.tileAnchorY;for(let F=0;F<4;F++)c.collisionVertexArray.emplaceBack(0,0,0,0);c.collisionVertexArrayExt.emplaceBack(i,-n.padding,-n.padding),c.collisionVertexArrayExt.emplaceBack(i,n.padding,-n.padding),c.collisionVertexArrayExt.emplaceBack(i,n.padding,n.padding),c.collisionVertexArrayExt.emplaceBack(i,-n.padding,n.padding),this._commitLayoutVertex(c.layoutVertexArray,d,m,y,P,A,new ae(n.x1,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,d,m,y,P,A,new ae(n.x2,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,d,m,y,P,A,new ae(n.x2,n.y2)),this._commitLayoutVertex(c.layoutVertexArray,d,m,y,P,A,new ae(n.x1,n.y2)),S.vertexLength+=4;const z=c.indexArray;z.emplaceBack(T,T+1),z.emplaceBack(T+1,T+2),z.emplaceBack(T+2,T+3),z.emplaceBack(T+3,T),S.primitiveLength+=4}_addTextDebugCollisionBoxes(n,i,c,d,m,y){for(let x=d;x<m;x++){const S=c.get(x),T=this.getSymbolInstanceTextSize(n,y,i,x);this._addCollisionDebugVertices(S,T,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(n,i,c,d,m,y){for(let x=d;x<m;x++){const S=c.get(x),T=this.getSymbolInstanceIconSize(n,i,y.placedIconSymbolIndex);this._addCollisionDebugVertices(S,T,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,y)}}generateCollisionDebugBuffers(n,i){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cx(rn,rT.members,gi),this.iconCollisionBox=new Cx(rn,rT.members,gi);const c=pd(this.iconSizeData,n),d=pd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const y=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(d,n,i,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(d,n,i,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,n,i,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,n,i,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(n,i,c,d){const m=this.text.placedSymbolArray.get(i.rightJustifiedTextSymbolIndex>=0?i.rightJustifiedTextSymbolIndex:i.centerJustifiedTextSymbolIndex>=0?i.centerJustifiedTextSymbolIndex:i.leftJustifiedTextSymbolIndex>=0?i.leftJustifiedTextSymbolIndex:i.verticalPlacedTextSymbolIndex>=0?i.verticalPlacedTextSymbolIndex:d),y=Kg(this.textSizeData,n,m)/wi;return this.tilePixelRatio*y}getSymbolInstanceIconSize(n,i,c){const d=this.icon.placedSymbolArray.get(c),m=Kg(this.iconSizeData,n,d);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(n,i,c){n.emplaceBack(i,-c,-c),n.emplaceBack(i,c,-c),n.emplaceBack(i,c,c),n.emplaceBack(i,-c,c)}_updateTextDebugCollisionBoxes(n,i,c,d,m,y){for(let x=d;x<m;x++){const S=c.get(x),T=this.getSymbolInstanceTextSize(n,y,i,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,S.padding)}}_updateIconDebugCollisionBoxes(n,i,c,d,m,y){for(let x=d;x<m;x++){const S=c.get(x),T=this.getSymbolInstanceIconSize(n,i,y);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,T,S.padding)}}updateCollisionDebugBuffers(n,i){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const c=pd(this.iconSizeData,n),d=pd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const y=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(d,n,i,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(d,n,i,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(c,n,i,y.iconBoxStartIndex,y.iconBoxEndIndex,y.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(c,n,i,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,i,c,d,m,y,x,S,T){const P={};if(i<c){const{x1:A,y1:z,x2:F,y2:V,padding:X,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te,featureIndex:Ie}=n.get(i);P.textBox={x1:A,y1:z,x2:F,y2:V,padding:X,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te},P.textFeatureIndex=Ie}if(d<m){const{x1:A,y1:z,x2:F,y2:V,padding:X,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te,featureIndex:Ie}=n.get(d);P.verticalTextBox={x1:A,y1:z,x2:F,y2:V,padding:X,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te},P.verticalTextFeatureIndex=Ie}if(y<x){const{x1:A,y1:z,x2:F,y2:V,padding:X,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te,featureIndex:Ie}=n.get(y);P.iconBox={x1:A,y1:z,x2:F,y2:V,padding:X,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te},P.iconFeatureIndex=Ie}if(S<T){const{x1:A,y1:z,x2:F,y2:V,padding:X,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te,featureIndex:Ie}=n.get(S);P.verticalIconBox={x1:A,y1:z,x2:F,y2:V,padding:X,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te},P.verticalIconFeatureIndex=Ie}return P}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){const c=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,i){const c=n.placedSymbolArray.get(i),d=c.vertexStartIndex+4*c.numGlyphs;for(let m=c.vertexStartIndex;m<d;m+=4)n.indexArray.emplaceBack(m,m+1,m+2),n.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const i=Math.sin(n),c=Math.cos(n),d=[],m=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);const S=this.symbolInstances.get(x);d.push(0|Math.round(i*S.tileAnchorX+c*S.tileAnchorY)),m.push(S.featureIndex)}return y.sort((x,S)=>d[x]-d[S]||m[S]-m[x]),y}addToSortKeyRanges(n,i){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===i?c.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const i of this.symbolInstanceIndexes){const c=this.symbolInstances.get(i);this.featureSortOrder.push(c.featureIndex);const{rightJustifiedTextSymbolIndex:d,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:x,placedIconSymbolIndex:S,verticalPlacedIconSymbolIndex:T}=c;d>=0&&this.addIndicesForPlacedSymbol(this.text,d),m>=0&&m!==d&&this.addIndicesForPlacedSymbol(this.text,m),y>=0&&y!==m&&y!==d&&this.addIndicesForPlacedSymbol(this.text,y),x>=0&&this.addIndicesForPlacedSymbol(this.text,x),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}en(Ml,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Ml.MAX_GLYPHS=65535,Ml.addDynamicAttributes=cy;const $z=new xe({"symbol-placement":new Z(ct.layout_symbol["symbol-placement"]),"symbol-spacing":new Z(ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Z(ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ie(ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Z(ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Z(ct.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Z(ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new Z(ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Z(ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new ie(ct.layout_symbol["icon-size"]),"icon-text-fit":new Z(ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Z(ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new ie(ct.layout_symbol["icon-image"]),"icon-rotate":new ie(ct.layout_symbol["icon-rotate"]),"icon-padding":new Z(ct.layout_symbol["icon-padding"]),"icon-keep-upright":new Z(ct.layout_symbol["icon-keep-upright"]),"icon-offset":new ie(ct.layout_symbol["icon-offset"]),"icon-anchor":new ie(ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Z(ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Z(ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Z(ct.layout_symbol["text-rotation-alignment"]),"text-field":new ie(ct.layout_symbol["text-field"]),"text-font":new ie(ct.layout_symbol["text-font"]),"text-size":new ie(ct.layout_symbol["text-size"]),"text-max-width":new ie(ct.layout_symbol["text-max-width"]),"text-line-height":new ie(ct.layout_symbol["text-line-height"]),"text-letter-spacing":new ie(ct.layout_symbol["text-letter-spacing"]),"text-justify":new ie(ct.layout_symbol["text-justify"]),"text-radial-offset":new ie(ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Z(ct.layout_symbol["text-variable-anchor"]),"text-anchor":new ie(ct.layout_symbol["text-anchor"]),"text-max-angle":new Z(ct.layout_symbol["text-max-angle"]),"text-writing-mode":new Z(ct.layout_symbol["text-writing-mode"]),"text-rotate":new ie(ct.layout_symbol["text-rotate"]),"text-padding":new Z(ct.layout_symbol["text-padding"]),"text-keep-upright":new Z(ct.layout_symbol["text-keep-upright"]),"text-transform":new ie(ct.layout_symbol["text-transform"]),"text-offset":new ie(ct.layout_symbol["text-offset"]),"text-allow-overlap":new Z(ct.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Z(ct.layout_symbol["text-ignore-placement"]),"text-optional":new Z(ct.layout_symbol["text-optional"])});var Ex={paint:new xe({"icon-opacity":new ie(ct.paint_symbol["icon-opacity"]),"icon-color":new ie(ct.paint_symbol["icon-color"]),"icon-halo-color":new ie(ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new ie(ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ie(ct.paint_symbol["icon-halo-blur"]),"icon-translate":new Z(ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new Z(ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new ie(ct.paint_symbol["text-opacity"]),"text-color":new ie(ct.paint_symbol["text-color"],{runtimeType:eo,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new ie(ct.paint_symbol["text-halo-color"]),"text-halo-width":new ie(ct.paint_symbol["text-halo-width"]),"text-halo-blur":new ie(ct.paint_symbol["text-halo-blur"]),"text-translate":new Z(ct.paint_symbol["text-translate"]),"text-translate-anchor":new Z(ct.paint_symbol["text-translate-anchor"])}),layout:$z};class $T{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:ol,this.defaultValue=n}evaluate(n){if(n.formattedSection){const i=this.defaultValue.property.overrides;if(i&&i.hasOverride(n.formattedSection))return i.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}en($T,"FormatSectionOverride",{omit:["defaultValue"]});class uy extends Ds{constructor(n){super(n,Ex)}recalculate(n,i){super.recalculate(n,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const c=this.layout.get("text-writing-mode");if(c){const d=[];for(const m of c)d.indexOf(m)<0&&d.push(m);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,i,c,d){const m=this.layout.get(n).evaluate(i,{},c,d),y=this._unevaluatedLayout._values[n];return y.isDataDriven()||yl(y.value)||!m?m:function(x,S){return S.replace(/{([^{}]+)}/g,(T,P)=>P in x?String(x[P]):"")}(i.properties,m)}createBucket(n){return new Ml(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of Ex.paint.overridableProperties){if(!uy.hasPaintOverride(this.layout,n))continue;const i=this.paint.get(n),c=new $T(i),d=new qu(c,i.property.specification);let m=null;m=i.value.kind==="constant"||i.value.kind==="source"?new up("source",d):new Ec("composite",d,i.value.zoomStops,i.value._interpolationType),this.paint._values[n]=new le(i.property,m,i.parameters)}}_handleOverridablePaintPropertyUpdate(n,i,c){return!(!this.layout||i.isDataDriven()||c.isDataDriven())&&uy.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,i){const c=n.get("text-field"),d=Ex.paint.properties[i];let m=!1;const y=x=>{for(const S of x)if(d.overrides&&d.overrides.hasOverride(S))return void(m=!0)};if(c.value.kind==="constant"&&c.value.value instanceof Vi)y(c.value.value.sections);else if(c.value.kind==="source"){const x=T=>{m||(T instanceof Ca&&Vr(T.value)===cc?y(T.value.sections):T instanceof Xs?y(T.sections):T.eachChild(x))},S=c.value;S._styleExpression&&x(S._styleExpression.expression)}return m}getProgramConfiguration(n){return new Tl(this,n)}}var Nz={paint:new xe({"background-color":new Z(ct.paint_background["background-color"]),"background-pattern":new Z(ct.paint_background["background-pattern"]),"background-opacity":new Z(ct.paint_background["background-opacity"])})},Uz={paint:new xe({"raster-opacity":new Z(ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new Z(ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Z(ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Z(ct.paint_raster["raster-brightness-max"]),"raster-saturation":new Z(ct.paint_raster["raster-saturation"]),"raster-contrast":new Z(ct.paint_raster["raster-contrast"]),"raster-resampling":new Z(ct.paint_raster["raster-resampling"]),"raster-fade-duration":new Z(ct.paint_raster["raster-fade-duration"])})};class Vz extends Ds{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var jz={paint:new xe({"sky-type":new Z(ct.paint_sky["sky-type"]),"sky-atmosphere-sun":new Z(ct.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Z(ct.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Z(ct.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Z(ct.paint_sky["sky-gradient-radius"]),"sky-gradient":new ve(ct.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Z(ct.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Z(ct.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Z(ct.paint_sky["sky-opacity"])})};function kx(r,n,i){const c=[0,0,1],d=iS([]);return sS(d,d,i?-Fe(r)+Math.PI:Fe(r)),oS(d,d,-Fe(n)),eS(c,c,d),Wi(c,c)}const Wz={circle:class extends Ds{constructor(r){super(r,tD)}createBucket(r){return new Qv(r)}queryRadius(r){const n=r;return cd("circle-radius",this,n)+cd("circle-stroke-width",this,n)+Ng(this.paint.get("circle-translate"))}queryIntersectsFeature(r,n,i,c,d,m,y,x){const S=PS(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,r.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(n,i)+this.paint.get("circle-stroke-width").evaluate(n,i);return MS(r,c,m,y,x,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,T)}getProgramIds(){return["circle"]}getProgramConfiguration(r){return new Tl(this,r)}},heatmap:class extends Ds{createBucket(r){return new AS(r)}constructor(r){super(r,oD),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=rx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return cd("heatmap-radius",this,r)}queryIntersectsFeature(r,n,i,c,d,m,y,x){const S=this.paint.get("heatmap-radius").evaluate(n,i);return MS(r,c,m,y,x,!0,!0,new ae(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(r){return new Tl(this,r)}},hillshade:class extends Ds{constructor(r){super(r,sD)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ds{constructor(r){super(r,wD)}getProgramIds(){const r=this.paint.get("fill-pattern"),n=r&&r.constantOr(1),i=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(r){return new Tl(this,r)}recalculate(r,n){super.recalculate(r,n);const i=this.paint._values["fill-outline-color"];i.value.kind==="constant"&&i.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Gg(r)}queryRadius(){return Ng(this.paint.get("fill-translate"))}queryIntersectsFeature(r,n,i,c,d,m){return!r.queryGeometry.isAboveHorizon&&SS(kS(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,r.pixelToTileUnitsFactor),c)}isTileClipped(){return!0}},"fill-extrusion":class extends Ds{constructor(r){super(r,FD)}createBucket(r){return new Gp(r)}queryRadius(){return Ng(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(r){return new Tl(this,r)}queryIntersectsFeature(r,n,i,c,d,m,y,x,S){const T=PS(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,r.pixelToTileUnitsFactor),P=this.paint.get("fill-extrusion-height").evaluate(n,i),A=this.paint.get("fill-extrusion-base").evaluate(n,i),z=[0,0],F=x&&m.elevation,V=m.elevation?m.elevation.exaggeration():1,X=r.tile.getBucket(this);if(F&&X instanceof Gp){const Te=X.centroidVertexArray,Ie=S+1;Ie<Te.length&&(z[0]=Te.geta_centroid_pos0(Ie),z[1]=Te.geta_centroid_pos1(Ie))}if(z[0]===0&&z[1]===1)return!1;m.projection.name==="globe"&&(c=XS([c],[new ae(0,0),new ae(vn,vn)],r.tileID.canonical).map(Te=>Te.polygon).flat());const ne=F?x:null,[fe,Ee]=function(Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt){return Te.projection.name==="globe"?function(Dt,st,qt,on,Xt,zn,Rt,fn,Rn,Kn,Ln){const Cn=[],Cr=[],On=Dt.projection.upVectorScale(Ln,Dt.center.lat,Dt.worldSize).metersToTile,Bn=[0,0,0,1],fr=[0,0,0,1],xr=(mr,Or,jr,ti)=>{mr[0]=Or,mr[1]=jr,mr[2]=ti,mr[3]=1},br=ZS();qt>0&&(qt+=br),on+=br;for(const mr of st){const Or=[],jr=[];for(const ti of mr){const gr=ti.x+Xt.x,li=ti.y+Xt.y,ni=Dt.projection.projectTilePoint(gr,li,Ln),Br=Dt.projection.upVector(Ln,ti.x,ti.y);let tr=qt,ri=on;if(Rt){const wr=QS(gr,li,qt,on,Rt,fn,Rn,Kn);tr+=wr.base,ri+=wr.top}qt!==0?xr(Bn,ni.x+Br[0]*On*tr,ni.y+Br[1]*On*tr,ni.z+Br[2]*On*tr):xr(Bn,ni.x,ni.y,ni.z),xr(fr,ni.x+Br[0]*On*ri,ni.y+Br[1]*On*ri,ni.z+Br[2]*On*ri),Zr(Bn,Bn,zn),Zr(fr,fr,zn),Or.push(new hd(Bn[0],Bn[1],Bn[2])),jr.push(new hd(fr[0],fr[1],fr[2]))}Cn.push(Or),Cr.push(jr)}return[Cn,Cr]}(Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt):Pt?function(Dt,st,qt,on,Xt,zn,Rt,fn,Rn){const Kn=[],Ln=[],Cn=[0,0,0,1];for(const Cr of Dt){const On=[],Bn=[];for(const fr of Cr){const xr=fr.x+on.x,br=fr.y+on.y,mr=QS(xr,br,st,qt,zn,Rt,fn,Rn);Cn[0]=xr,Cn[1]=br,Cn[2]=mr.base,Cn[3]=1,Fc(Cn,Cn,Xt),Cn[3]=Math.max(Cn[3],1e-5);const Or=new hd(Cn[0]/Cn[3],Cn[1]/Cn[3],Cn[2]/Cn[3]);Cn[0]=xr,Cn[1]=br,Cn[2]=mr.top,Cn[3]=1,Fc(Cn,Cn,Xt),Cn[3]=Math.max(Cn[3],1e-5);const jr=new hd(Cn[0]/Cn[3],Cn[1]/Cn[3],Cn[2]/Cn[3]);On.push(Or),Bn.push(jr)}Kn.push(On),Ln.push(Bn)}return[Kn,Ln]}(Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t):function(Dt,st,qt,on,Xt){const zn=[],Rt=[],fn=Xt[8]*st,Rn=Xt[9]*st,Kn=Xt[10]*st,Ln=Xt[11]*st,Cn=Xt[8]*qt,Cr=Xt[9]*qt,On=Xt[10]*qt,Bn=Xt[11]*qt;for(const fr of Dt){const xr=[],br=[];for(const mr of fr){const Or=mr.x+on.x,jr=mr.y+on.y,ti=Xt[0]*Or+Xt[4]*jr+Xt[12],gr=Xt[1]*Or+Xt[5]*jr+Xt[13],li=Xt[2]*Or+Xt[6]*jr+Xt[14],ni=Xt[3]*Or+Xt[7]*jr+Xt[15],Br=ti+fn,tr=gr+Rn,ri=li+Kn,wr=Math.max(ni+Ln,1e-5),qi=ti+Cn,ii=gr+Cr,Si=li+On,yi=Math.max(ni+Bn,1e-5);xr.push(new hd(Br/wr,tr/wr,ri/wr)),br.push(new hd(qi/yi,ii/yi,Si/yi))}zn.push(xr),Rt.push(br)}return[zn,Rt]}(Ie,Pe,Ke,Ze,ut)}(m,c,A,P,T,y,ne,z,V,m.center.lat,r.tileID.canonical),me=r.queryGeometry;return function(Te,Ie,Pe){let Ke=1/0;SS(Pe,Ie)&&(Ke=JS(Pe,Ie[0]));for(let Ze=0;Ze<Ie.length;Ze++){const ut=Ie[Ze],Pt=Te[Ze];for(let tt=0;tt<ut.length-1;tt++){const yt=ut[tt],_t=[yt,ut[tt+1],Pt[tt+1],Pt[tt],yt];wS(Pe,_t)&&(Ke=Math.min(Ke,JS(Pe,_t)))}}return Ke!==1/0&&Ke}(fe,Ee,me.isPointQuery()?me.screenBounds:me.screenGeometry)}},line:class extends Ds{constructor(r){super(r,eT),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof Kh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(r,n){super.recalculate(r,n),this.paint._values["line-floorwidth"]=tT.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Yg(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(r){return new Tl(this,r)}queryRadius(r){const n=r,i=nT(cd("line-width",this,n),cd("line-gap-width",this,n)),c=cd("line-offset",this,n);return i/2+Math.abs(c)+Ng(this.paint.get("line-translate"))}queryIntersectsFeature(r,n,i,c,d,m){if(r.queryGeometry.isAboveHorizon)return!1;const y=kS(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,r.pixelToTileUnitsFactor),x=r.pixelToTileUnitsFactor/2*nT(this.paint.get("line-width").evaluate(n,i),this.paint.get("line-gap-width").evaluate(n,i)),S=this.paint.get("line-offset").evaluate(n,i);return S&&(c=function(T,P){const A=[],z=new ae(0,0);for(let F=0;F<T.length;F++){const V=T[F],X=[];for(let ne=0;ne<V.length;ne++){const fe=V[ne],Ee=V[ne+1],me=ne===0?z:fe.sub(V[ne-1])._unit()._perp(),Te=ne===V.length-1?z:Ee.sub(fe)._unit()._perp(),Ie=me._add(Te)._unit();Ie._mult(1/(Ie.x*Te.x+Ie.y*Te.y)),X.push(Ie._mult(P)._add(fe))}A.push(X)}return A}(c,S*r.pixelToTileUnitsFactor)),function(T,P,A){for(let z=0;z<P.length;z++){const F=P[z];if(T.length>=3){for(let V=0;V<F.length;V++)if(Vc(T,F[V]))return!0}if(KA(T,F,A))return!0}return!1}(y,c,x)}isTileClipped(){return!0}},symbol:uy,background:class extends Ds{constructor(r){super(r,Nz)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ds{constructor(r){super(r,Uz)}getProgramIds(){return["raster"]}},sky:class extends Ds{constructor(r){super(r,jz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="sky-gradient"?this._updateColorRamp():r!=="sky-atmosphere-sun"&&r!=="sky-atmosphere-halo-color"&&r!=="sky-atmosphere-color"&&r!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=rx({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(r,n){if(this.paint.get("sky-type")==="atmosphere"){const c=this.paint.get("sky-atmosphere-sun"),d=!c,m=r.style.light,y=m.properties.get("position");return d&&m.properties.get("anchor")==="viewport"&&He("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),d?kx(y.azimuthal,90-y.polar,n):kx(c[0],90-c[1],n)}const i=this.paint.get("sky-gradient-center");return kx(i[0],90-i[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const r=this.paint.get("sky-type");return r==="atmosphere"?["skyboxCapture","skybox"]:r==="gradient"?["skyboxGradient"]:null}}};class nf{constructor(n,i,c,d){this.context=n,this.format=c,this.texture=n.gl.createTexture(),this.update(i,d)}update(n,i,c){const{width:d,height:m}=n,{context:y}=this,{gl:x}=y,{HTMLImageElement:S,HTMLCanvasElement:T,HTMLVideoElement:P,ImageData:A,ImageBitmap:z}=w;if(x.bindTexture(x.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!i||i.premultiply!==!1)),c||this.size&&this.size[0]===d&&this.size[1]===m){const{x:F,y:V}=c||{x:0,y:0};n instanceof S||n instanceof T||n instanceof P||n instanceof A||z&&n instanceof z?x.texSubImage2D(x.TEXTURE_2D,0,F,V,x.RGBA,x.UNSIGNED_BYTE,n):x.texSubImage2D(x.TEXTURE_2D,0,F,V,d,m,x.RGBA,x.UNSIGNED_BYTE,n.data)}else this.size=[d,m],n instanceof S||n instanceof T||n instanceof P||n instanceof A||z&&n instanceof z?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,n):x.texImage2D(x.TEXTURE_2D,0,this.format,d,m,0,this.format,x.UNSIGNED_BYTE,n.data);this.useMipmap=!!(i&&i.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(n,i){const{context:c}=this,{gl:d}=c;d.bindTexture(d.TEXTURE_2D,this.texture),n!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,n),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.useMipmap?n===d.NEAREST?d.NEAREST_MIPMAP_NEAREST:d.LINEAR_MIPMAP_NEAREST:n),this.filter=n),i!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,i),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,i),this.wrap=i)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class Gz{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Hz{constructor(){this.tasks={},this.taskQueue=[],Nt(["process"],this),this.invoker=new Gz(this.process),this.nextId=0}add(n,i){const c=this.nextId++,d=function({type:m,isSymbolTile:y,zoom:x}){return x=x||0,m==="message"?0:m!=="maybePrepare"||y?m!=="parseTile"||y?m==="parseTile"&&y?300-x:m==="maybePrepare"&&y?400-x:500:200-x:100-x}(i);if(d===0){jt();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[c]={fn:n,metadata:i,priority:d,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){jt();try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const i=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!i)return;i.fn()}finally{}}pick(){let n=null,i=1/0;for(let d=0;d<this.taskQueue.length;d++){const m=this.tasks[this.taskQueue[d]];m.priority<i&&(i=m.priority,n=d)}if(n===null)return null;const c=this.taskQueue[n];return this.taskQueue.splice(n,1),c}remove(){this.invoker.remove()}}class NT{constructor(n){this._stringToNumber={},this._numberToString=[];for(let i=0;i<n.length;i++){const c=n[i];this._stringToNumber[c]=i,this._numberToString[i]=c}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const qz=["tile","layer","source","sourceLayer","state"];class UT{constructor(n,i,c,d,m){this.type="Feature",this._vectorTileFeature=n,this._z=i,this._x=c,this._y=d,this.properties=n.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const i of qz)this[i]!==void 0&&(n[i]=this[i]);return n}}const rs=32,na=33,Il=new Uint16Array(8184);for(let r=0;r<2046;r++){let n=r+2,i=0,c=0,d=0,m=0,y=0,x=0;for(1&n?d=m=y=rs:i=c=x=rs;(n>>=1)>1;){const T=i+d>>1,P=c+m>>1;1&n?(d=i,m=c,i=y,c=x):(i=d,c=m,d=y,m=x),y=T,x=P}const S=4*r;Il[S+0]=i,Il[S+1]=c,Il[S+2]=d,Il[S+3]=m}const ra=new Uint16Array(2178),Al=new Uint8Array(1089),dy=new Uint16Array(1089);function VT(r){return r===0?-.03125:r===32?.03125:0}var jT=Ue([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const WT={type:2,extent:vn,loadGeometry:()=>[[new ae(0,0),new ae(vn+1,0),new ae(vn+1,vn+1),new ae(0,vn+1),new ae(0,0)]]};class Px{constructor(n,i,c,d,m){this.tileID=n,this.uid=xt(),this.uses=0,this.tileSize=i,this.tileZoom=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,this.expiredRequestCount=0,this.state="loading",d&&d.transform&&(this.projection=d.transform.projection)}registerFadeDuration(n){const i=n+this.timeAdded;i<xs.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Wc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,i,c){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(d,m){const y={};if(!m)return y;for(const x of d){const S=x.layerIds.map(T=>m.getLayer(T)).filter(Boolean);if(S.length!==0){x.layers=S,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(T=>S.filter(P=>P.id===T)[0]));for(const T of S)y[T.id]=x}}return y}(n.buckets,i.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const m=this.buckets[d];if(m instanceof Ml){if(this.hasSymbolBuckets=!0,!c)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const m=this.buckets[d];if(m instanceof Ml&&m.hasRTLText){this.hasRTLText=!0,k.isLoading()||k.isLoaded()||b()!=="deferred"||E();break}}this.queryPadding=0;for(const d in this.buckets){const m=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(d).queryRadius(m))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new hr}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const c in this.buckets){const d=this.buckets[c];d.uploadPending()&&d.upload(n)}const i=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new nf(n,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new nf(n,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new nf(n,this.lineAtlas.image,i.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,i,c,d,m,y,x,S){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:d,pixelPosMatrix:x,transform:y,params:m,tileTransform:this.tileTransform},n,i,c):{}}querySourceFeatures(n,i){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const d=c.loadVTLayers(),m=i?i.sourceLayer:"",y=d._geojsonTileLayer||d[m];if(!y)return;const x=Ku(i&&i.filter),{z:S,x:T,y:P}=this.tileID.canonical,A={z:S,x:T,y:P};for(let z=0;z<y.length;z++){const F=y.feature(z);if(x.needGeometry){const ne=Uc(F,!0);if(!x.filter(new I(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!x.filter(new I(this.tileID.overscaledZ),F))continue;const V=c.getId(F,m),X=new UT(F,S,T,P,V);X.tile=A,n.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const i=this.expirationTime;if(n.cacheControl){const c=Ut(n.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const c=Date.now();let d=!1;if(this.expirationTime>c)d=!1;else if(i)if(this.expirationTime<i)d=!0;else{const m=this.expirationTime-i;m?this.expirationTime=c+Math.max(m,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,i){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!i)return;const c=this.latestFeatureIndex.loadVTLayers(),d=i.style.listImages();for(const m in this.buckets){if(!i.style.hasLayer(m))continue;const y=this.buckets[m],x=y.layers[0].sourceLayer||"_geojsonTileLayer",S=c[x],T=n[x];if(!S||!T||Object.keys(T).length===0)continue;if(y.update(T,S,d,this.imageAtlas&&this.imageAtlas.patternPositions||{}),y instanceof Yg||y instanceof Gg){const A=i.style._getSourceCache(y.layers[0].source);i._terrain&&i._terrain.enabled&&A&&y.programConfigurations.needsUpload&&i._terrain._clearRenderCacheForTile(A.id,this.tileID)}const P=i&&i.style&&i.style.getLayer(m);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<xs.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=xs.now()+n}setTexture(n,i){const c=i.context,d=c.gl;this.texture=this.texture||i.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new nf(c,n,d.RGBA,{useMipmap:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE))}setDependencies(n,i){const c={};for(const d of i)c[d]=!0;this.dependencies[n]=c}hasDependency(n,i){for(const c of n){const d=this.dependencies[c];if(d){for(const m of i)if(d[m])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,i){if(!i||i.name==="mercator"||this._tileDebugBuffer)return;const c=Ba(WT,this.tileID.canonical,this.tileTransform)[0],d=new kt,m=new po;for(let y=0;y<c.length;y++){const{x,y:S}=c[y];d.emplaceBack(x,S),m.emplaceBack(y)}m.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(m),this._tileDebugBuffer=n.createVertexBuffer(d,Rp.members),this._tileDebugSegments=Qr.simpleSegment(0,0,d.length,m.length)}_makeTileBoundsBuffers(n,i){if(this._tileBoundsBuffer||!i||i.name==="mercator")return;const c=Ba(WT,this.tileID.canonical,this.tileTransform)[0];let d,m;if(this.isRaster){const y=function(x,S){const T=Wc(x,S),P=Math.pow(2,x.z);for(let ne=0;ne<na;ne++)for(let fe=0;fe<na;fe++){const Ee=zo((x.x+(fe+VT(fe))/rs)/P),me=Ai((x.y+(ne+VT(ne))/rs)/P),Te=S.project(Ee,me),Ie=ne*na+fe;ra[2*Ie+0]=Math.round((Te.x*T.scale-T.x)*vn),ra[2*Ie+1]=Math.round((Te.y*T.scale-T.y)*vn)}Al.fill(0),dy.fill(0);for(let ne=2045;ne>=0;ne--){const fe=4*ne,Ee=Il[fe+0],me=Il[fe+1],Te=Il[fe+2],Ie=Il[fe+3],Pe=Ee+Te>>1,Ke=me+Ie>>1,Ze=Pe+Ke-me,ut=Ke+Ee-Pe,Pt=me*na+Ee,tt=Ie*na+Te,yt=Ke*na+Pe,_t=Math.hypot((ra[2*Pt+0]+ra[2*tt+0])/2-ra[2*yt+0],(ra[2*Pt+1]+ra[2*tt+1])/2-ra[2*yt+1])>=16;Al[yt]=Al[yt]||(_t?1:0),ne<1022&&(Al[yt]=Al[yt]||Al[(me+ut>>1)*na+(Ee+Ze>>1)]||Al[(Ie+ut>>1)*na+(Te+Ze>>1)])}const A=new ft,z=new cn;let F=0;function V(ne,fe){const Ee=fe*na+ne;return dy[Ee]===0&&(A.emplaceBack(ra[2*Ee+0],ra[2*Ee+1],ne*vn/rs,fe*vn/rs),dy[Ee]=++F),dy[Ee]-1}function X(ne,fe,Ee,me,Te,Ie){const Pe=ne+Ee>>1,Ke=fe+me>>1;if(Math.abs(ne-Te)+Math.abs(fe-Ie)>1&&Al[Ke*na+Pe])X(Te,Ie,ne,fe,Pe,Ke),X(Ee,me,Te,Ie,Pe,Ke);else{const Ze=V(ne,fe),ut=V(Ee,me),Pt=V(Te,Ie);z.emplaceBack(Ze,ut,Pt)}}return X(0,0,rs,rs,rs,0),X(rs,rs,0,0,0,rs),{vertices:A,indices:z}}(this.tileID.canonical,i);d=y.vertices,m=y.indices}else{d=new ft,m=new cn;for(const{x,y:S}of c)d.emplaceBack(x,S,0,0);const y=lx(d.int16,void 0,4);for(let x=0;x<y.length;x+=3)m.emplaceBack(y[x],y[x+1],y[x+2])}this._tileBoundsBuffer=n.createVertexBuffer(d,jT.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(m),this._tileBoundsSegments=Qr.simpleSegment(0,0,d.length,m.length)}_makeGlobeTileDebugBuffers(n,i){const c=i.projection;if(!c||c.name!=="globe"||i.freezeTileCoverage)return;const d=this.tileID.canonical,m=Bp(dS(d,i)),y=ad(i.zoom);let x;y>0&&(x=Ov(new Float64Array(16),i.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,d,i,m,x,y),this._makeGlobeTileDebugTextBuffer(n,d,i,m,x,y)}_globePoint(n,i,c,d,m,y,x){let S=Op(n,i,c);if(y){const T=1<<c.z,P=ea(d.center.lng),A=ta(d.center.lat),z=(c.x+.5)/T-P;let F=0;z>.5?F=-1:z<-.5&&(F=1);let V=(n/vn+c.x)/T+F,X=(i/vn+c.y)/T;V=(V-P)*d._pixelsPerMercatorPixel+P,X=(X-A)*d._pixelsPerMercatorPixel+A;const ne=[V*d.worldSize,X*d.worldSize,0];Zr(ne,ne,y),S=Nc(S,ne,x)}return Zr(S,S,m)}_makeGlobeTileDebugBorderBuffer(n,i,c,d,m,y){const x=new kt,S=new po,T=new qe,P=(z,F,V,X,ne)=>{const fe=(V-z)/(ne-1),Ee=(X-F)/(ne-1),me=x.length;for(let Te=0;Te<ne;Te++){const Ie=z+Te*fe,Pe=F+Te*Ee;x.emplaceBack(Ie,Pe);const Ke=this._globePoint(Ie,Pe,i,c,d,m,y);T.emplaceBack(Ke[0],Ke[1],Ke[2]),S.emplaceBack(me+Te)}},A=vn;P(0,0,A,0,16),P(A,0,A,A,16),P(A,A,0,A,16),P(0,A,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(S),this._tileDebugBuffer=n.createVertexBuffer(x,Rp.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(T,lS.members),this._tileDebugSegments=Qr.simpleSegment(0,0,x.length,S.length)}_makeGlobeTileDebugTextBuffer(n,i,c,d,m,y){const x=vn/4,S=new kt,T=new cn,P=new qe,A=25;T.reserve(32),S.reserve(A),P.reserve(A);const z=(F,V)=>A*F+V;for(let F=0;F<A;F++){const V=F*x;for(let X=0;X<A;X++){const ne=X*x;S.emplaceBack(ne,V);const fe=this._globePoint(ne,V,i,c,d,m,y);P.emplaceBack(fe[0],fe[1],fe[2])}}for(let F=0;F<4;F++)for(let V=0;V<4;V++){const X=z(F,V),ne=z(F,V+1),fe=z(F+1,V),Ee=z(F+1,V+1);T.emplaceBack(X,ne,fe),T.emplaceBack(fe,ne,Ee)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(T),this._tileDebugTextBuffer=n.createVertexBuffer(S,Rp.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(P,lS.members),this._tileDebugTextSegments=Qr.simpleSegment(0,0,A,32)}}class Zz{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,i,c){const d=String(i);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][d]=this.stateChanges[n][d]||{},gt(this.stateChanges[n][d],c),this.deletedStates[n]===null){this.deletedStates[n]={};for(const m in this.state[n])m!==d&&(this.deletedStates[n][m]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][d]===null){this.deletedStates[n][d]={};for(const m in this.state[n][d])c[m]||(this.deletedStates[n][d][m]=null)}else for(const m in c)this.deletedStates[n]&&this.deletedStates[n][d]&&this.deletedStates[n][d][m]===null&&delete this.deletedStates[n][d][m]}removeFeatureState(n,i,c){if(this.deletedStates[n]===null)return;const d=String(i);if(this.deletedStates[n]=this.deletedStates[n]||{},c&&i!==void 0)this.deletedStates[n][d]!==null&&(this.deletedStates[n][d]=this.deletedStates[n][d]||{},this.deletedStates[n][d][c]=null);else if(i!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][d])for(c in this.deletedStates[n][d]={},this.stateChanges[n][d])this.deletedStates[n][d][c]=null;else this.deletedStates[n][d]=null;else this.deletedStates[n]=null}getState(n,i){const c=String(i),d=gt({},(this.state[n]||{})[c],(this.stateChanges[n]||{})[c]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const m=this.deletedStates[n][i];if(m===null)return{};for(const y in m)delete d[y]}return d}initializeTileState(n,i){n.setFeatureState(this.state,i)}coalesceChanges(n,i){const c={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const m={};for(const y in this.stateChanges[d])this.state[d][y]||(this.state[d][y]={}),gt(this.state[d][y],this.stateChanges[d][y]),m[y]=this.state[d][y];c[d]=m}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const m={};if(this.deletedStates[d]===null)for(const y in this.state[d])m[y]={},this.state[d][y]={};else for(const y in this.deletedStates[d]){if(this.deletedStates[d][y]===null)this.state[d][y]={};else if(this.state[d][y])for(const x of Object.keys(this.deletedStates[d][y]))delete this.state[d][y][x];m[y]=this.state[d][y]}c[d]=c[d]||{},gt(c[d],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const d in n)n[d].setFeatureState(c,i)}}class GT{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,i){const c=this.toIdx(n,i);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(n,i){return this.leaves[this.toIdx(n,i)]}toIdx(n,i){return i*this.size+n}}function HT(r,n,i,c){let d=0,m=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(c[y])<1e-15){if(i[y]<r[y]||i[y]>n[y])return null}else{const x=1/c[y];let S=(r[y]-i[y])*x,T=(n[y]-i[y])*x;if(S>T){const P=S;S=T,T=P}if(S>d&&(d=S),T<m&&(m=T),d>m)return null}return d}function qT(r,n,i,c,d,m,y,x,S,T,P){const A=c-r,z=d-n,F=m-i,V=y-r,X=x-n,ne=S-i,fe=P[1]*ne-P[2]*X,Ee=P[2]*V-P[0]*ne,me=P[0]*X-P[1]*V,Te=A*fe+z*Ee+F*me;if(Math.abs(Te)<1e-15)return null;const Ie=1/Te,Pe=T[0]-r,Ke=T[1]-n,Ze=T[2]-i,ut=(Pe*fe+Ke*Ee+Ze*me)*Ie;if(ut<0||ut>1)return null;const Pt=Ke*F-Ze*z,tt=Ze*A-Pe*F,yt=Pe*z-Ke*A,_t=(P[0]*Pt+P[1]*tt+P[2]*yt)*Ie;return _t<0||ut+_t>1?null:(V*Pt+X*tt+ne*yt)*Ie}function ZT(r,n,i){return(r-n)/(i-n)}function XT(r,n,i,c,d,m,y,x,S){const T=1<<i,P=m-c,A=y-d,z=(r+1)/T*P+c,F=(n+0)/T*A+d,V=(n+1)/T*A+d;x[0]=(r+0)/T*P+c,x[1]=F,S[0]=z,S[1]=V}class YT{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const i=function(m){const y=Math.ceil(Math.log2(m.dim/8)),x=[];let S=Math.ceil(Math.pow(2,y));const T=1/S,P=(F,V,X,ne,fe)=>{const Ee=ne?1:0,me=(F+1)*X-Ee,Te=V*X,Ie=(V+1)*X-Ee;fe[0]=F*X,fe[1]=Te,fe[2]=me,fe[3]=Ie};let A=new GT(S);const z=[];for(let F=0;F<S*S;F++){P(F%S,Math.floor(F/S),T,!1,z);const V=Dl(z[0],z[1],m),X=Dl(z[2],z[1],m),ne=Dl(z[2],z[3],m),fe=Dl(z[0],z[3],m);A.minimums.push(Math.min(V,X,ne,fe)),A.maximums.push(Math.max(V,X,ne,fe)),A.leaves.push(1)}for(x.push(A),S/=2;S>=1;S/=2){const F=x[x.length-1];A=new GT(S);for(let V=0;V<S*S;V++){P(V%S,Math.floor(V/S),2,!0,z);const X=F.getElevation(z[0],z[1]),ne=F.getElevation(z[2],z[1]),fe=F.getElevation(z[2],z[3]),Ee=F.getElevation(z[0],z[3]),me=F.isLeaf(z[0],z[1]),Te=F.isLeaf(z[2],z[1]),Ie=F.isLeaf(z[2],z[3]),Pe=F.isLeaf(z[0],z[3]),Ke=Math.min(X.min,ne.min,fe.min,Ee.min),Ze=Math.max(X.max,ne.max,fe.max,Ee.max),ut=me&&Te&&Ie&&Pe;A.maximums.push(Ze),A.minimums.push(Ke),A.leaves.push(Ze-Ke<=5&&ut?1:0)}x.push(A)}return x}(this.dem),c=i.length-1,d=i[c];this._addNode(d.minimums[0],d.maximums[0],d.leaves[0]),this._construct(i,0,0,c,0)}raycastRoot(n,i,c,d,m,y,x=1){return HT([n,i,-100],[c,d,this.maximums[0]*x],m,y)}raycast(n,i,c,d,m,y,x=1){if(!this.nodeCount)return null;const S=this.raycastRoot(n,i,c,d,m,y,x);if(S==null)return null;const T=[],P=[],A=[],z=[],F=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;F.length>0;){const{idx:V,t:X,nodex:ne,nodey:fe,depth:Ee}=F.pop();if(this.leaves[V]){XT(ne,fe,Ee,n,i,c,d,A,z);const Te=1<<Ee,Ie=(ne+0)/Te,Pe=(ne+1)/Te,Ke=(fe+0)/Te,Ze=(fe+1)/Te,ut=Dl(Ie,Ke,this.dem)*x,Pt=Dl(Pe,Ke,this.dem)*x,tt=Dl(Pe,Ze,this.dem)*x,yt=Dl(Ie,Ze,this.dem)*x,_t=qT(A[0],A[1],ut,z[0],A[1],Pt,z[0],z[1],tt,m,y),Tt=qT(z[0],z[1],tt,A[0],z[1],yt,A[0],A[1],ut,m,y),Dt=Math.min(_t!==null?_t:Number.MAX_VALUE,Tt!==null?Tt:Number.MAX_VALUE);if(Dt!==Number.MAX_VALUE)return Dt;{const st=Dp([],m,y,X);if(KT(ut,Pt,yt,tt,ZT(st[0],A[0],z[0]),ZT(st[1],A[1],z[1]))>=st[2])return X}continue}let me=0;for(let Te=0;Te<this._siblingOffset.length;Te++){XT((ne<<1)+this._siblingOffset[Te][0],(fe<<1)+this._siblingOffset[Te][1],Ee+1,n,i,c,d,A,z),A[2]=-100,z[2]=this.maximums[this.childOffsets[V]+Te]*x;const Ie=HT(A,z,m,y);if(Ie!=null){const Pe=Ie;T[Te]=Pe;let Ke=!1;for(let Ze=0;Ze<me&&!Ke;Ze++)Pe>=T[P[Ze]]&&(P.splice(Ze,0,Te),Ke=!0);Ke||(P[me]=Te),me++}}for(let Te=0;Te<me;Te++){const Ie=P[Te];F.push({idx:this.childOffsets[V]+Ie,t:T[Ie],nodex:(ne<<1)+this._siblingOffset[Ie][0],nodey:(fe<<1)+this._siblingOffset[Ie][1],depth:Ee+1})}}return null}_addNode(n,i,c){return this.minimums.push(n),this.maximums.push(i),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(n,i,c,d,m){if(n[d].isLeaf(i,c)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const y=d-1,x=n[y];let S=0,T=0;for(let P=0;P<this._siblingOffset.length;P++){const A=2*i+this._siblingOffset[P][0],z=2*c+this._siblingOffset[P][1],F=x.getElevation(A,z),V=x.isLeaf(A,z),X=this._addNode(F.min,F.max,V);V&&(S|=1<<P),T||(T=X)}for(let P=0;P<this._siblingOffset.length;P++)S&1<<P||this._construct(n,2*i+this._siblingOffset[P][0],2*c+this._siblingOffset[P][1],y,T+P)}}function KT(r,n,i,c,d,m){return Xn(Xn(r,i,m),Xn(n,c,m),d)}function Dl(r,n,i){const c=i.dim,d=Se(r*c-.5,0,c-1),m=Se(n*c-.5,0,c-1),y=Math.floor(d),x=Math.floor(m),S=Math.min(y+1,c-1),T=Math.min(x+1,c-1);return KT(i.get(y,x),i.get(S,x),i.get(y,T),i.get(S,T),d-y,m-x)}const JT={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Xz(r,n,i){return(256*r*256+256*n+i)/10-1e4}function Yz(r,n,i){return 256*r+n+i/256-32768}class hy{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,i,c,d=!1,m=!1){if(this.uid=n,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return He(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=i.height;const y=this.dim=i.height-2,x=new Uint32Array(i.data.buffer);if(this.pixels=new Uint8Array(i.data.buffer),this.encoding=c||"mapbox",this.borderReady=d,!d){for(let S=0;S<y;S++)x[this._idx(-1,S)]=x[this._idx(0,S)],x[this._idx(y,S)]=x[this._idx(y-1,S)],x[this._idx(S,-1)]=x[this._idx(S,0)],x[this._idx(S,y)]=x[this._idx(S,y-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(y,-1)]=x[this._idx(y-1,0)],x[this._idx(-1,y)]=x[this._idx(0,y-1)],x[this._idx(y,y)]=x[this._idx(y-1,y-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new YT(this)}get(n,i,c=!1){c&&(n=Se(n,-1,this.dim),i=Se(i,-1,this.dim));const d=4*this._idx(n,i);return(this.encoding==="terrarium"?Yz:Xz)(this.pixels[d],this.pixels[d+1],this.pixels[d+2])}static getUnpackVector(n){return JT[n]}get unpackVector(){return JT[this.encoding]}_idx(n,i){if(n<-1||n>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(n+1)}static pack(n,i){const c=[0,0,0,0],d=hy.getUnpackVector(i);let m=Math.floor((n+d[3])/d[2]);return c[2]=m%256,m=Math.floor(m/256),c[1]=m%256,m=Math.floor(m/256),c[0]=m,c}getPixels(){return new mo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,i,c){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let d=i*this.dim,m=i*this.dim+this.dim,y=c*this.dim,x=c*this.dim+this.dim;switch(i){case-1:d=m-1;break;case 1:m=d+1}switch(c){case-1:y=x-1;break;case 1:x=y+1}const S=-i*this.dim,T=-c*this.dim;for(let P=y;P<x;P++)for(let A=d;A<m;A++){const z=4*this._idx(A,P),F=4*this._idx(A+S,P+T);this.pixels[z+0]=n.pixels[F+0],this.pixels[z+1]=n.pixels[F+1],this.pixels[z+2]=n.pixels[F+2],this.pixels[z+3]=n.pixels[F+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}en(hy,"DEMData"),en(YT,"DemMinMaxQuadTree",{omit:["dem"]});class Kz{constructor(n,i){this.max=n,this.onRemove=i,this.reset()}reset(){for(const n in this.data)for(const i of this.data[n])i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value);return this.data={},this.order=[],this}add(n,i,c){const d=n.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const m={value:i,timeout:void 0};if(c!==void 0&&(m.timeout=setTimeout(()=>{this.remove(n,m)},c)),this.data[d].push(m),this.order.push(d),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const i=this.data[n].shift();return i.timeout&&clearTimeout(i.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),i.value}getByKey(n){const i=this.data[n];return i?i[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,i){if(!this.has(n))return this;const c=n.wrapped().key,d=i===void 0?0:this.data[c].indexOf(i),m=this.data[c][d];return this.data[c].splice(d,1),m.timeout&&clearTimeout(m.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(m.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const i=this._getAndRemoveByKey(this.order[0]);i&&this.onRemove(i)}return this}filter(n){const i=[];for(const c in this.data)for(const d of this.data[c])n(d.value)||i.push(d);for(const c of i)this.remove(c.value.tileID,c)}}class wd{constructor(n,i,c){this.func=n,this.mask=i,this.range=c}}wd.ReadOnly=!1,wd.ReadWrite=!0,wd.disabled=new wd(519,wd.ReadOnly,[0,1]);const Mx=7680;class Ix{constructor(n,i,c,d,m,y){this.test=n,this.ref=i,this.mask=c,this.fail=d,this.depthFail=m,this.pass=y}}Ix.disabled=new Ix({func:519,mask:0},0,0,Mx,Mx,Mx);class ia{constructor(n,i,c){this.blendFunction=n,this.blendColor=i,this.mask=c}}ia.Replace=[1,0],ia.disabled=new ia(ia.Replace,qr.transparent,[!1,!1,!1,!1]),ia.unblended=new ia(ia.Replace,qr.transparent,[!0,!0,!0,!0]),ia.alphaBlended=new ia([1,771],qr.transparent,[!0,!0,!0,!0]);const Ax=1029,Dx=2305;class Fs{constructor(n,i,c){this.enable=n,this.mode=i,this.frontFace=c}}Fs.disabled=new Fs(!1,Ax,Dx),Fs.backCCW=new Fs(!0,Ax,Dx),Fs.backCW=new Fs(!0,Ax,2304),Fs.frontCW=new Fs(!0,1028,2304),Fs.frontCCW=new Fs(!0,1028,Dx);class Gc extends lc{constructor(n,i,c){super(),this.id=n,this._onlySymbols=c,i.on("data",d=>{d.dataType==="source"&&d.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&d.dataType==="source"&&d.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),i.on("error",()=>{this._sourceErrored=!0}),this._source=i,this._tiles={},this._cache=new Kz(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=i.minTileCacheSize,this._maxTileCacheSize=i.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Zz,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const i=this._tiles[n];if(i.state!=="loaded"&&i.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,i){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,i)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const i in this._tiles){const c=this._tiles[i];c.upload(n),c.prepare(this.map.style.imageManager)}}getIds(){return vt(this._tiles).map(n=>n.tileID).sort(QT).map(n=>n.key)}getRenderableIds(n){const i=[];for(const c in this._tiles)this._isIdRenderable(+c,n)&&i.push(this._tiles[c]);return n?i.sort((c,d)=>{const m=c.tileID,y=d.tileID,x=new ae(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),S=new ae(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-y.overscaledZ||S.y-x.y||S.x-x.x}).map(c=>c.tileID.key):i.map(c=>c.tileID).sort(QT).map(c=>c.key)}hasRenderableParent(n){const i=this.findLoadedParent(n,0);return!!i&&this._isIdRenderable(i.tileID.key)}_isIdRenderable(n,i){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(i||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,i){const c=this._tiles[n];c&&(c.state!=="loading"&&(c.state=i),this._loadTile(c,this._tileLoaded.bind(this,c,n,i)))}_tileLoaded(n,i,c,d){if(d)if(n.state="errored",d.status!==404)this._source.fire(new bs(d,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=xs.now(),c==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(i,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new Sa("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const i=this.getRenderableIds();for(let d=0;d<i.length;d++){const m=i[d];if(n.neighboringTiles&&n.neighboringTiles[m]){const y=this.getTileByID(m);c(n,y),c(y,n)}}function c(d,m){if(!d.dem||d.dem.borderReady)return;d.needsHillshadePrepare=!0,d.needsDEMTextureUpload=!0;let y=m.tileID.canonical.x-d.tileID.canonical.x;const x=m.tileID.canonical.y-d.tileID.canonical.y,S=Math.pow(2,d.tileID.canonical.z),T=m.tileID.key;y===0&&x===0||Math.abs(x)>1||(Math.abs(y)>1&&(Math.abs(y+S)===1?y+=S:Math.abs(y-S)===1&&(y-=S)),m.dem&&d.dem&&(d.dem.backfillBorder(m.dem,y,x),d.neighboringTiles&&d.neighboringTiles[T]&&(d.neighboringTiles[T].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,i,c,d){for(const m in this._tiles){let y=this._tiles[m];if(d[m]||!y.hasData()||y.tileID.overscaledZ<=i||y.tileID.overscaledZ>c)continue;let x=y.tileID;for(;y&&y.tileID.overscaledZ>i+1;){const T=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[T.key],y&&y.hasData()&&(x=T)}let S=x;for(;S.overscaledZ>i;)if(S=S.scaledTo(S.overscaledZ-1),n[S.key]){d[x.key]=x;break}}}findLoadedParent(n,i){if(n.key in this._loadedParentTiles){const c=this._loadedParentTiles[n.key];return c&&c.tileID.overscaledZ>=i?c:null}for(let c=n.overscaledZ-1;c>=i;c--){const d=n.scaledTo(c),m=this._getLoadedTile(d);if(m)return m}}_getLoadedTile(n){const i=this._tiles[n.key];return i&&i.hasData()?i:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,i){i=i||this._source.tileSize;const c=Math.ceil(n.width/i)+1,d=Math.ceil(n.height/i)+1,m=Math.floor(c*d*5),y=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,m):m,x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(n){const i=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,i){const c={};for(const d in this._tiles){const m=this._tiles[d];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+i),c[m.tileID.key]=m}this._tiles=c;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(+d,this._tiles[d])}}update(n,i,c){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!c)return;let d;this.updateCacheSize(n,i),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new Hi(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(d=n.coveringTiles({tileSize:i||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!c,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(d=d.filter(x=>this._source.hasTile(x)))):d=[];const m=this._updateRetainedTiles(d);if(eC(this._source.type)&&d.length!==0){const x={},S={},T=Object.keys(m);for(const A of T){const z=m[A],F=this._tiles[A];if(!F||F.fadeEndTime&&F.fadeEndTime<=xs.now())continue;const V=this.findLoadedParent(z,Math.max(z.overscaledZ-Gc.maxOverzooming,this._source.minzoom));V&&(this._addTile(V.tileID),x[V.tileID.key]=V.tileID),S[A]=z}const P=d[d.length-1].overscaledZ;for(const A in this._tiles){const z=this._tiles[A];if(m[A]||!z.hasData())continue;let F=z.tileID;for(;F.overscaledZ>P;){F=F.scaledTo(F.overscaledZ-1);const V=this._tiles[F.key];if(V&&V.hasData()&&S[F.key]){m[A]=z.tileID;break}}}for(const A in x)m[A]||(this._coveredTiles[A]=!0,m[A]=x[A])}for(const x in m)this._tiles[x].clearFadeHold();const y=function(x,S){const T=[];for(const P in x)P in S||T.push(P);return T}(this._tiles,m);for(const x of y){const S=this._tiles[x];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const i={};if(n.length===0)return i;const c={},d=n.reduce((T,P)=>Math.min(T,P.overscaledZ),1/0),m=n[0].overscaledZ,y=Math.max(m-Gc.maxOverzooming,this._source.minzoom),x=Math.max(m+Gc.maxUnderzooming,this._source.minzoom),S={};for(const T of n){const P=this._addTile(T);i[T.key]=T,P.hasData()||d<this._source.maxzoom&&(S[T.key]=T)}this._retainLoadedChildren(S,d,x,i);for(const T of n){let P=this._tiles[T.key];if(P.hasData())continue;if(T.canonical.z>=this._source.maxzoom){const z=T.children(this._source.maxzoom)[0],F=this.getTile(z);if(F&&F.hasData()){i[z.key]=z;continue}}else{const z=T.children(this._source.maxzoom);if(i[z[0].key]&&i[z[1].key]&&i[z[2].key]&&i[z[3].key])continue}let A=P.wasRequested();for(let z=T.overscaledZ-1;z>=y;--z){const F=T.scaledTo(z);if(c[F.key]||(c[F.key]=!0,P=this.getTile(F),!P&&A&&(P=this._addTile(F)),P&&(i[F.key]=F,A=P.wasRequested(),P.hasData())))break}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const i=[];let c,d=this._tiles[n].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){c=this._loadedParentTiles[d.key];break}i.push(d.key);const m=d.scaledTo(d.overscaledZ-1);if(c=this._getLoadedTile(m),c)break;d=m}for(const m of i)this._loadedParentTiles[m]=c}}_addTile(n){let i=this._tiles[n.key];if(i)return i;i=this._cache.getAndRemove(n),i&&(this._setTileReloadTimer(n.key,i),i.tileID=n,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,i)));const c=!!i;if(!c){const d=this.map?this.map.painter:null;i=new Px(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,d,this._isRaster),this._loadTile(i,this._tileLoaded.bind(this,i,n.key,i.state))}return i?(i.uses++,this._tiles[n.key]=i,c||this._source.fire(new Sa("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null}_setTileReloadTimer(n,i){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const c=i.getExpiryTimeout();c&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},c))}_removeTile(n){const i=this._tiles[n];i&&(i.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),i.uses>0||(i.hasData()&&i.state!=="reloading"?this._cache.add(i.tileID,i,i.getExpiryTimeout()):(i.aborted=!0,this._abortTile(i),this._unloadTile(i))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,i,c){const d=[],m=this.transform;if(!m)return d;const y=m.projection.name==="globe",x=ea(m.center.lng);for(const S in this._tiles){const T=this._tiles[S];if(c&&T.clearQueryDebugViz(),T.holdingForFade())continue;let P;if(y){const A=T.tileID.canonical;if(A.z===0){const z=[Math.abs(Se(x,...rf(A,-1))-x),Math.abs(Se(x,...rf(A,1))-x)];P=[0,2*z.indexOf(Math.min(...z))-1]}else{const z=[Math.abs(Se(x,...rf(A,-1))-x),Math.abs(Se(x,...rf(A,0))-x),Math.abs(Se(x,...rf(A,1))-x)];P=[z.indexOf(Math.min(...z))-1]}}else P=[0];for(const A of P){const z=n.containsTile(T,m,i,A);z&&d.push(z)}}return d}getVisibleCoordinates(n){const i=this.getRenderableIds(n).map(c=>this._tiles[c].tileID);for(const c of i)c.projMatrix=this.transform.calculateProjMatrix(c.toUnwrapped());return i}hasTransition(){if(this._source.hasTransition())return!0;if(eC(this._source.type))for(const n in this._tiles){const i=this._tiles[n];if(i.fadeEndTime!==void 0&&i.fadeEndTime>=xs.now())return!0}return!1}setFeatureState(n,i,c){this._state.updateState(n=n||"_geojsonTileLayer",i,c)}removeFeatureState(n,i,c){this._state.removeFeatureState(n=n||"_geojsonTileLayer",i,c)}getFeatureState(n,i){return this._state.getState(n=n||"_geojsonTileLayer",i)}setDependencies(n,i,c){const d=this._tiles[n];d&&d.setDependencies(i,c)}reloadTilesForDependencies(n,i){for(const c in this._tiles)this._tiles[c].hasDependency(n,i)&&this._reloadTile(+c,"reloading");this._cache.filter(c=>!c.hasDependency(n,i))}_preloadTiles(n,i){if(!this._sourceLoaded){const x=()=>{this._sourceLoaded&&(this._source.off("data",x),this._preloadTiles(n,i))};return void this._source.on("data",x)}const c=new Map,d=Array.isArray(n)?n:[n],m=this.map.painter.terrain,y=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const x of d){const S=x.coveringTiles({tileSize:y,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const T of S)c.set(T.key,T);this.usedForTerrain&&x.updateElevation(!1)}nt(Array.from(c.values()),(x,S)=>{const T=new Px(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(T,P=>{this._source.type==="raster-dem"&&T.dem&&this._backfillDEM(T),S(P,T)})},i)}}function QT(r,n){const i=Math.abs(2*r.wrap)-+(r.wrap<0),c=Math.abs(2*n.wrap)-+(n.wrap<0);return r.overscaledZ-n.overscaledZ||c-i||n.canonical.y-r.canonical.y||n.canonical.x-r.canonical.x}function eC(r){return r==="raster"||r==="image"||r==="video"||r==="custom"}function rf(r,n){const i=1<<r.z;return[r.x/i+n,(r.x+1)/i+n]}Gc.maxOverzooming=10,Gc.maxUnderzooming=3;class py{constructor(n,i,c){this._demTile=n,this._dem=this._demTile.dem,this._scale=i,this._offset=c}static create(n,i,c){const d=c||n.findDEMTileFor(i);if(!d||!d.dem)return;const m=d.dem,y=d.tileID,x=1<<i.canonical.z-y.canonical.z;return new py(d,d.tileSize/vn/x,[(i.canonical.x/x-y.canonical.x)*m.dim,(i.canonical.y/x-y.canonical.y)*m.dim])}tileCoordToPixel(n,i){const c=i*this._scale+this._offset[1],d=Math.floor(n*this._scale+this._offset[0]),m=Math.floor(c);return new ae(d,m)}getElevationAt(n,i,c,d){const m=n*this._scale+this._offset[0],y=i*this._scale+this._offset[1],x=Math.floor(m),S=Math.floor(y),T=this._dem;return d=!!d,c?Xn(Xn(T.get(x,S,d),T.get(x,S+1,d),y-S),Xn(T.get(x+1,S,d),T.get(x+1,S+1,d),y-S),m-x):T.get(x,S,d)}getElevationAtPixel(n,i,c){return this._dem.get(n,i,!!c)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Ls(1,n)*this._dem.stride}}class tC{constructor(n,i){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ia(vn,16,0),this.featureIndexArray=new zc,this.promoteId=i}insert(n,i,c,d,m,y=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,d,m,y);const S=this.grid;for(let T=0;T<i.length;T++){const P=i[T],A=[1/0,1/0,-1/0,-1/0];for(let z=0;z<P.length;z++){const F=P[z];A[0]=Math.min(A[0],F.x),A[1]=Math.min(A[1],F.y),A[2]=Math.max(A[2],F.x),A[3]=Math.max(A[3],F.y)}A[0]<vn&&A[1]<vn&&A[2]>=0&&A[3]>=0&&S.insert(x,A[0],A[1],A[2],A[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new hx(new Qg(this.rawTileData)).layers,this.sourceLayerCoder=new NT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,i,c,d){this.loadVTLayers();const m=n.params||{},y=Ku(m.filter),x=n.tileResult,S=n.transform,T=x.bufferedTilespaceBounds,P=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(V,X,ne,fe)=>ES(x.bufferedTilespaceGeometry,V,X,ne,fe));P.sort(Jz);let A=null;S.elevation&&P.length>0&&(A=py.create(S.elevation,this.tileID));const z={};let F;for(let V=0;V<P.length;V++){const X=P[V];if(X===F)continue;F=X;const ne=this.featureIndexArray.get(X);let fe=null;this.loadMatchingFeature(z,ne,y,m.layers,m.availableImages,i,c,d,(Ee,me,Te,Ie=0)=>(fe||(fe=Ba(Ee,this.tileID.canonical,n.tileTransform)),me.queryIntersectsFeature(x,Ee,Te,fe,this.z,n.transform,n.pixelPosMatrix,A,Ie)))}return z}loadMatchingFeature(n,i,c,d,m,y,x,S,T){const{featureIndex:P,bucketIndex:A,sourceLayerIndex:z,layoutVertexArrayOffset:F}=i,V=this.bucketLayerIDs[A];if(d&&!function(Ee,me){for(let Te=0;Te<Ee.length;Te++)if(me.indexOf(Ee[Te])>=0)return!0;return!1}(d,V))return;const X=this.sourceLayerCoder.decode(z),ne=this.vtLayers[X].feature(P);if(c.needGeometry){const Ee=Uc(ne,!0);if(!c.filter(new I(this.tileID.overscaledZ),Ee,this.tileID.canonical))return}else if(!c.filter(new I(this.tileID.overscaledZ),ne))return;const fe=this.getId(ne,X);for(let Ee=0;Ee<V.length;Ee++){const me=V[Ee];if(d&&d.indexOf(me)<0)continue;const Te=y[me];if(!Te)continue;let Ie={};fe!==void 0&&S&&(Ie=S.getState(Te.sourceLayer||"_geojsonTileLayer",fe));const Pe=gt({},x[me]);Pe.paint=nC(Pe.paint,Te.paint,ne,Ie,m),Pe.layout=nC(Pe.layout,Te.layout,ne,Ie,m);const Ke=!T||T(ne,Te,Ie,F);if(!Ke)continue;const Ze=new UT(ne,this.z,this.x,this.y,fe);Ze.layer=Pe;let ut=n[me];ut===void 0&&(ut=n[me]=[]),ut.push({featureIndex:P,feature:Ze,intersectionZ:Ke})}}lookupSymbolFeatures(n,i,c,d,m,y,x,S){const T={};this.loadVTLayers();const P=Ku(m);for(const A of n)this.loadMatchingFeature(T,{bucketIndex:c,sourceLayerIndex:d,featureIndex:A,layoutVertexArrayOffset:0},P,y,x,S,i);return T}loadFeature(n){const{featureIndex:i,sourceLayerIndex:c}=n;this.loadVTLayers();const d=this.sourceLayerCoder.decode(c),m=this.vtFeatures[d];if(m[i])return m[i];const y=this.vtLayers[d].feature(i);return m[i]=y,y}hasLayer(n){for(const i of this.bucketLayerIDs)for(const c of i)if(n===c)return!0;return!1}getId(n,i){let c=n.id;if(this.promoteId){const d=typeof this.promoteId=="string"?this.promoteId:this.promoteId[i];d!=null&&(c=n.properties[d]),typeof c=="boolean"&&(c=Number(c))}return c}}function nC(r,n,i,c,d){return Je(r,(m,y)=>{const x=n instanceof pe?n.get(y):null;return x&&x.evaluate?x.evaluate(i,c,d):x})}function Jz(r,n){return n-r}en(tC,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class rC{constructor(n,i){this.width=n,this.height=i,this.nextRow=0,this.image=new Fa({width:n,height:i}),this.positions={},this.uploaded=!1}getDash(n,i){const c=this.getKey(n,i);return this.positions[c]}trim(){const n=this.width,i=this.height=mt(this.nextRow);this.image.resize({width:n,height:i})}getKey(n,i){return n.join(",")+i}getDashRanges(n,i,c){const d=[];let m=n.length%2==1?-n[n.length-1]*c:0,y=n[0]*c,x=!0;d.push({left:m,right:y,isDash:x,zeroLength:n[0]===0});let S=n[0];for(let T=1;T<n.length;T++){x=!x;const P=n[T];m=S*c,S+=P,y=S*c,d.push({left:m,right:y,isDash:x,zeroLength:P===0})}return d}addRoundDash(n,i,c){const d=i/2;for(let m=-c;m<=c;m++){const y=this.width*(this.nextRow+c+m);let x=0,S=n[x];for(let T=0;T<this.width;T++){T/S.right>1&&(S=n[++x]);const P=Math.abs(T-S.left),A=Math.abs(T-S.right),z=Math.min(P,A);let F;const V=m/c*(d+1);if(S.isDash){const X=d-Math.abs(V);F=Math.sqrt(z*z+X*X)}else F=d-Math.sqrt(z*z+V*V);this.image.data[y+T]=Math.max(0,Math.min(255,F+128))}}}addRegularDash(n,i){for(let S=n.length-1;S>=0;--S){const T=n[S],P=n[S+1];T.zeroLength?n.splice(S,1):P&&P.isDash===T.isDash&&(P.left=T.left,n.splice(S,1))}const c=n[0],d=n[n.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const m=this.width*this.nextRow;let y=0,x=n[y];for(let S=0;S<this.width;S++){S/x.right>1&&(x=n[++y]);const T=Math.abs(S-x.left),P=Math.abs(S-x.right),A=Math.min(T,P);this.image.data[m+S]=Math.max(0,Math.min(255,(x.isDash?A:-A)+i+128))}}addDash(n,i){const c=this.getKey(n,i);if(this.positions[c])return this.positions[c];const d=i==="round",m=d?7:0,y=2*m+1;if(this.nextRow+y>this.height)return He("LineAtlas out of space"),null;n.length===0&&n.push(1);let x=0;for(let P=0;P<n.length;P++)n[P]<0&&(He("Negative value is found in line dasharray, replacing values with 0"),n[P]=0),x+=n[P];if(x!==0){const P=this.width/x,A=this.getDashRanges(n,this.width,P);d?this.addRoundDash(A,P,m):this.addRegularDash(A,i==="square"?.5*P:0)}const S=this.nextRow+m;this.nextRow+=y;const T={tl:[S,m],br:[x,0]};return this.positions[c]=T,T}}en(rC,"LineAtlas");const iC=1*Bs;class oC{constructor(n){const i={},c=[];for(const x in n){const S=n[x],T=i[x]={};for(const P in S.glyphs){const A=S.glyphs[+P];if(!A||A.bitmap.width===0||A.bitmap.height===0)continue;const z=A.metrics.localGlyph?iC:1,F={x:0,y:0,w:A.bitmap.width+2*z,h:A.bitmap.height+2*z};c.push(F),T[P]=F}}const{w:d,h:m}=gx(c),y=new Fa({width:d||1,height:m||1});for(const x in n){const S=n[x];for(const T in S.glyphs){const P=S.glyphs[+T];if(!P||P.bitmap.width===0||P.bitmap.height===0)continue;const A=i[x][T],z=P.metrics.localGlyph?iC:1;Fa.copy(P.bitmap,y,{x:0,y:0},{x:A.x+z,y:A.y+z},P.bitmap)}}this.image=y,this.positions=i}}en(oC,"GlyphAtlas");class Qz{constructor(n){this.tileID=new Hi(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Wc(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,i,c,d,m){this.status="parsing",this.data=n,this.collisionBoxArray=new hr;const y=new NT(Object.keys(n.layers).sort()),x=new tC(this.tileID,this.promoteId);x.bucketLayerIDs=[];const S={},T=new rC(256,256),P={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:T,availableImages:c},A=i.familiesBySource[this.source];for(const Ie in A){const Pe=n.layers[Ie];if(!Pe)continue;let Ke=!1,Ze=!1;for(const tt of A[Ie])tt[0].type==="symbol"?Ke=!0:Ze=!0;if(this.isSymbolTile===!0&&!Ke||this.isSymbolTile===!1&&!Ze)continue;Pe.version===1&&He(`Vector tile source "${this.source}" layer "${Ie}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ut=y.encode(Ie),Pt=[];for(let tt=0;tt<Pe.length;tt++){const yt=Pe.feature(tt),_t=x.getId(yt,Ie);Pt.push({feature:yt,id:_t,index:tt,sourceLayerIndex:ut})}for(const tt of A[Ie]){const yt=tt[0];this.isSymbolTile!==void 0&&yt.type==="symbol"!==this.isSymbolTile||yt.minzoom&&this.zoom<Math.floor(yt.minzoom)||yt.maxzoom&&this.zoom>=yt.maxzoom||yt.visibility!=="none"&&(zx(tt,this.zoom,c),(S[yt.id]=yt.createBucket({index:x.bucketLayerIDs.length,layers:tt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ut,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:c})).populate(Pt,P,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(tt.map(_t=>_t.id)))}}let z,F,V,X;T.trim();const ne={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},fe=()=>{if(z)return m(z);if(F&&V&&X){const Ie=new oC(F),Pe=new hT(V,X);for(const Ke in S){const Ze=S[Ke];Ze instanceof Ml?(zx(Ze.layers,this.zoom,c),Cz(Ze,F,Ie.positions,V,Pe.iconPositions,this.showCollisionBoxes,c,this.tileID.canonical,this.tileZoom,this.projection)):Ze.hasPattern&&(Ze instanceof Yg||Ze instanceof Gg||Ze instanceof Gp)&&(zx(Ze.layers,this.zoom,c),Ze.addFeatures(P,this.tileID.canonical,Pe.patternPositions,c,this.tileTransform))}this.status="done",m(null,{buckets:vt(S).filter(Ke=>!Ke.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ie.image,lineAtlas:T,imageAtlas:Pe,glyphMap:this.returnDependencies?F:null,iconMap:this.returnDependencies?V:null,glyphPositions:this.returnDependencies?Ie.positions:null})}},Ee=Je(P.glyphDependencies,Ie=>Object.keys(Ie).map(Number));Object.keys(Ee).length?d.send("getGlyphs",{uid:this.uid,stacks:Ee},(Ie,Pe)=>{z||(z=Ie,F=Pe,fe())},void 0,!1,ne):F={};const me=Object.keys(P.iconDependencies);me.length?d.send("getImages",{icons:me,source:this.source,tileID:this.tileID,type:"icons"},(Ie,Pe)=>{z||(z=Ie,V=Pe,fe())},void 0,!1,ne):V={};const Te=Object.keys(P.patternDependencies);Te.length?d.send("getImages",{icons:Te,source:this.source,tileID:this.tileID,type:"patterns"},(Ie,Pe)=>{z||(z=Ie,X=Pe,fe())},void 0,!1,ne):X={},fe()}}function zx(r,n,i){const c=new I(n);for(const d of r)d.recalculate(c,i)}class sC{constructor(n){this.entries={},this.scheduler=n}request(n,i,c,d){const m=this.entries[n]=this.entries[n]||{callbacks:[]};if(m.result){const[y,x]=m.result;return this.scheduler?this.scheduler.add(()=>{d(y,x)},i):d(y,x),()=>{}}return m.callbacks.push(d),m.cancel||(m.cancel=c((y,x)=>{m.result=[y,x];for(const S of m.callbacks)this.scheduler?this.scheduler.add(()=>{S(y,x)},i):S(y,x);setTimeout(()=>delete this.entries[n],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(y=>y!==d),m.callbacks.length||(m.cancel(),delete this.entries[n]))}}}function aC(r,n,i){const c=JSON.stringify(r.request);return r.data&&(this.deduped.entries[c]={result:[null,r.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},d=>{const m=Ar(r.request,(y,x,S,T)=>{y?d(y):x&&d(null,{vectorTile:i?void 0:new hx(new Qg(x)),rawData:x,cacheControl:S,expires:T})});return()=>{m.cancel(),d()}},n)}const lC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Rx{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,c]=new Uint8Array(n,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const d=c>>4;if(d!==1)throw new Error(`Got v${d} data when expected v1.`);const m=lC[15&c];if(!m)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(n,2,1),[x]=new Uint32Array(n,4,1);return new Rx(x,y,m,n)}constructor(n,i=64,c=Float64Array,d){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=c,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const m=lC.indexOf(this.ArrayType),y=2*n*this.ArrayType.BYTES_PER_ELEMENT,x=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${c}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+x+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=n)}add(n,i){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=n,this.coords[this._pos++]=i,c}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Lx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,i,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:x}=this,S=[0,m.length-1,0],T=[];for(;S.length;){const P=S.pop()||0,A=S.pop()||0,z=S.pop()||0;if(A-z<=x){for(let ne=z;ne<=A;ne++){const fe=y[2*ne],Ee=y[2*ne+1];fe>=n&&fe<=c&&Ee>=i&&Ee<=d&&T.push(m[ne])}continue}const F=z+A>>1,V=y[2*F],X=y[2*F+1];V>=n&&V<=c&&X>=i&&X<=d&&T.push(m[F]),(P===0?n<=V:i<=X)&&(S.push(z),S.push(F-1),S.push(1-P)),(P===0?c>=V:d>=X)&&(S.push(F+1),S.push(A),S.push(1-P))}return T}within(n,i,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:m,nodeSize:y}=this,x=[0,d.length-1,0],S=[],T=c*c;for(;x.length;){const P=x.pop()||0,A=x.pop()||0,z=x.pop()||0;if(A-z<=y){for(let ne=z;ne<=A;ne++)uC(m[2*ne],m[2*ne+1],n,i)<=T&&S.push(d[ne]);continue}const F=z+A>>1,V=m[2*F],X=m[2*F+1];uC(V,X,n,i)<=T&&S.push(d[F]),(P===0?n-c<=V:i-c<=X)&&(x.push(z),x.push(F-1),x.push(1-P)),(P===0?n+c>=V:i+c>=X)&&(x.push(F+1),x.push(A),x.push(1-P))}return S}}function Lx(r,n,i,c,d,m){if(d-c<=i)return;const y=c+d>>1;cC(r,n,y,c,d,m),Lx(r,n,i,c,y-1,1-m),Lx(r,n,i,y+1,d,1-m)}function cC(r,n,i,c,d,m){for(;d>c;){if(d-c>600){const T=d-c+1,P=i-c+1,A=Math.log(T),z=.5*Math.exp(2*A/3),F=.5*Math.sqrt(A*z*(T-z)/T)*(P-T/2<0?-1:1);cC(r,n,i,Math.max(c,Math.floor(i-P*z/T+F)),Math.min(d,Math.floor(i+(T-P)*z/T+F)),m)}const y=n[2*i+m];let x=c,S=d;for(of(r,n,c,i),n[2*d+m]>y&&of(r,n,c,d);x<S;){for(of(r,n,x,S),x++,S--;n[2*x+m]<y;)x++;for(;n[2*S+m]>y;)S--}n[2*c+m]===y?of(r,n,c,S):(S++,of(r,n,S,d)),S<=i&&(c=S+1),i<=S&&(d=S-1)}}function of(r,n,i,c){Ox(r,i,c),Ox(n,2*i,2*c),Ox(n,2*i+1,2*c+1)}function Ox(r,n,i){const c=r[n];r[n]=r[i],r[i]=c}function uC(r,n,i,c){const d=r-i,m=n-c;return d*d+m*m}a.ARRAY_TYPE=fo,a.AUTH_ERR_MSG=Me,a.Aabb=Gi,a.Actor=class{constructor(r,n,i){this.target=r,this.parent=n,this.mapId=i,this.callbacks={},this.cancelCallbacks={},Nt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=jt()?r:w,this.scheduler=new Hz}send(r,n,i,c,d=!1,m){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=m,this.callbacks[y]=i);const x=Lt(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:r,hasCallback:!!i,targetMapId:c,mustQueue:d,sourceMapId:this.mapId,data:bl(n,x)},x),{cancel:()=>{i&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(r){const n=r.data,i=n.id;if(i&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const c=this.cancelCallbacks[i];delete this.cancelCallbacks[i],c&&c.cancel()}else if(n.mustQueue||jt()){const c=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add(()=>this.processTask(i,n),c&&c.metadata||{type:"message"})}else this.processTask(i,n)}processTask(r,n){if(n.type==="<response>"){const i=this.callbacks[r];delete this.callbacks[r],i&&(n.error?i(Aa(n.error)):i(null,Aa(n.data)))}else{const i=Lt(this.globalScope)?void 0:[],c=n.hasCallback?(m,y)=>{delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:m?bl(m):null,data:bl(y,i)},i)}:m=>{},d=Aa(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,d,c);else if(this.parent.getWorkerSource){const m=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,m[0],d.source)[m[1]](d,c)}else c(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.CanonicalTileID=Xg,a.Color=qr,a.ColorMode=ia,a.CullFaceMode=Fs,a.DEMData=hy,a.DataConstantProperty=Z,a.DedupedRequest=sC,a.DepthMode=wd,a.EXTENT=vn,a.Elevation=class{isDataAvailableAtPoint(r){const n=this._source();if(this.isUsingMockSource()||!n||r.y<0||r.y>1)return!1;const i=n.getSource().maxzoom,c=1<<i,d=Math.floor(r.x),m=Math.floor((r.x-d)*c),y=Math.floor(r.y*c),x=this.findDEMTileFor(new Hi(i,d,i,m,y));return!(!x||!x.dem)}getAtPointOrZero(r,n=0){return this.getAtPoint(r,n)||0}getAtPoint(r,n,i=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const c=this._source();if(!c||r.y<0||r.y>1)return n;const d=c.getSource().maxzoom,m=1<<d,y=Math.floor(r.x),x=r.x-y,S=new Hi(d,y,d,Math.floor(x*m),Math.floor(r.y*m)),T=this.findDEMTileFor(S);if(!T||!T.dem)return n;const P=T.dem,A=1<<T.tileID.canonical.z,z=(x*A-T.tileID.canonical.x)*P.dim,F=(r.y*A-T.tileID.canonical.y)*P.dim,V=Math.floor(z),X=Math.floor(F);return(i?this.exaggeration():1)*Xn(Xn(P.get(V,X),P.get(V,X+1),F-X),Xn(P.get(V+1,X),P.get(V+1,X+1),F-X),z-V)}getAtTileOffset(r,n,i){const c=1<<r.canonical.z;return this.getAtPointOrZero(new ld(r.wrap+(r.canonical.x+n/vn)/c,(r.canonical.y+i/vn)/c))}getAtTileOffsetFunc(r,n,i,c){return d=>{const m=this.getAtTileOffset(r,d.x,d.y),y=c.upVector(r.canonical,d.x,d.y);return Do(y,y,m*c.upVectorScale(r.canonical,n,i).metersToTile),y}}getForTilePoints(r,n,i,c){if(this.isUsingMockSource())return!1;const d=py.create(this,r,c);return!!d&&(n.forEach(m=>{m[2]=this.exaggeration()*d.getElevationAt(m[0],m[1],i)}),!0)}getMinMaxForTile(r){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(r);if(!n||!n.dem)return null;const i=n.dem.tree,c=n.tileID,d=1<<r.canonical.z-c.canonical.z;let m=r.canonical.x/d-c.canonical.x,y=r.canonical.y/d-c.canonical.y,x=0;for(let S=0;S<r.canonical.z-c.canonical.z&&!i.leaves[x];S++){m*=2,y*=2;const T=2*Math.floor(y)+Math.floor(m);x=i.childOffsets[x]+T,m%=1,y%=1}return{min:this.exaggeration()*i.minimums[x],max:this.exaggeration()*i.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(r,n,i){throw new Error("Pure virtual method called.")}pointCoordinate(r){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(r){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},a.ErrorEvent=bs,a.EvaluationParameters=I,a.Event=Sa,a.Evented=lc,a.FillExtrusionBucket=Gp,a.Frustum=jv,a.FrustumCorners=Vv,a.GLOBE_RADIUS=Js,a.GLOBE_SCALE_MATCH_LATITUDE=45,a.GLOBE_ZOOM_THRESHOLD_MAX=cS,a.GLOBE_ZOOM_THRESHOLD_MIN=Wv,a.GlobeSharedBuffers=class{constructor(r){this._createGrid(r),this._createPoles(r)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const r of this._poleSegments)r.destroy();for(const r of this._gridSegments)r.withSkirts.destroy(),r.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const r of this._wireframeSegments)r.destroy()}}_fillGridMeshWithLods(r,n){const i=new kt,c=new cn,d=[],m=r+1+2,y=n[0]+1,x=n[0]+1+(1+n.length),S=(T,P,A)=>{let z=T===m-1?T-2:T===0?T:T-1;return z+=A?24575:0,[z,P]};for(let T=0;T<m;++T)i.emplaceBack(...S(T,0,!0));for(let T=0;T<y;++T)for(let P=0;P<m;++P)i.emplaceBack(...S(P,T,(P===0||P===m-1)&&!0));for(let T=0;T<n.length;++T){const P=n[T];for(let A=0;A<m;++A)i.emplaceBack(...S(A,P,!0))}for(let T=0;T<n.length;++T){const P=c.length,A=n[T]+1+2,z=new cn;for(let X=0;X<A-1;X++){const ne=X===A-2,fe=ne?m*(x-n.length+T-X):m;for(let Ee=0;Ee<m-1;Ee++){const me=X*m+Ee;X===0||ne||Ee===0||Ee===m-2?(z.emplaceBack(me+1,me,me+fe),z.emplaceBack(me+fe,me+fe+1,me+1)):(c.emplaceBack(me+1,me,me+fe),c.emplaceBack(me+fe,me+fe+1,me+1))}}const F=Qr.simpleSegment(0,P,i.length,c.length-P);for(let X=0;X<z.uint16.length;X+=3)c.emplaceBack(z.uint16[X],z.uint16[X+1],z.uint16[X+2]);const V=Qr.simpleSegment(0,P,i.length,c.length-P);d.push({withoutSkirts:F,withSkirts:V})}return{vertices:i,indices:c,segments:d}}_createGrid(r){const n=this._fillGridMeshWithLods($c,Lp);this._gridSegments=n.segments,this._gridBuffer=r.createVertexBuffer(n.vertices,Rp.members),this._gridIndexBuffer=r.createIndexBuffer(n.indices,!0)}_createPoles(r){const n=new cn;for(let d=0;d<=$c;d++)n.emplaceBack(0,d+1,d+2);this._poleIndexBuffer=r.createIndexBuffer(n,!0);const i=new dr,c=new dr;this._poleSegments=[];for(let d=0,m=0;d<Wv;d++){const y=360/(1<<d);i.emplaceBack(0,-Js,0,.5,0),c.emplaceBack(0,-Js,0,.5,1);for(let x=0;x<=$c;x++){const S=x/$c,T=Xn(0,y,S),[P,A,z]=od(HA,qA,T,Js);i.emplaceBack(P,A,z,S,0),c.emplaceBack(P,A,z,S,1)}this._poleSegments.push(Qr.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=r.createVertexBuffer(i,aS,!1),this._poleSouthVertexBuffer=r.createVertexBuffer(c,aS,!1)}getGridBuffers(r,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[r].withSkirts:this._gridSegments[r].withoutSkirts]}getPoleBuffers(r){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[r]]}getWirefameBuffers(r,n){if(!this._wireframeSegments){const i=new gi,c=$c,d=c+1+2,m=1;this._wireframeSegments=[];for(let y=0,x=0;y<Lp.length;y++){const S=Lp[y];for(let P=m;P<S+m;P++)for(let A=m;A<c+m;A++){const z=P*d+A;i.emplaceBack(z,z+1),i.emplaceBack(z,z+d),i.emplaceBack(z,z+d+1)}const T=S*c*3;this._wireframeSegments.push(Qr.simpleSegment(0,x,(S+1)*d,T)),x+=T}this._wireframeIndexBuffer=r.createIndexBuffer(i)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},a.GlyphManager=yd,a.ImagePosition=yx,a.KDBush=Rx,a.LivePerformanceUtils=hi,a.LngLat=pr,a.LngLatBounds=Cl,a.LocalGlyphMode=xx,a.MAX_MERCATOR_LATITUDE=Di,a.MercatorCoordinate=ld,a.ONE_EM=wi,a.OverscaledTileID=Hi,a.PerformanceMarkers=Qn,a.Point=ae,a.Properties=xe,a.RGBAImage=mo,a.Ray=Uv,a.RequestManager=class{constructor(r,n,i){this._transformRequestFn=r,this._customAccessToken=n,this._silenceAuthErrors=!!i,this._createSkuToken()}_createSkuToken(){const r=function(){let n="";for(let i=0;i<10;i++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",U,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(r,n){return this._transformRequestFn&&this._transformRequestFn(r,n)||{url:r}}normalizeStyleURL(r,n){if(!Le(r))return r;const i=zt(r);return i.path=`/styles/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||n)}normalizeGlyphsURL(r,n){if(!Le(r))return r;const i=zt(r);return i.path=`/fonts/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||n)}normalizeSourceURL(r,n,i,c){if(!Le(r))return r;const d=zt(r);return d.path=`/v4/${d.authority}.json`,d.params.push("secure"),i&&d.params.push(`language=${i}`),c&&d.params.push(`worldview=${c}`),this._makeAPIURL(d,this._customAccessToken||n)}normalizeSpriteURL(r,n,i,c){const d=zt(r);return Le(r)?(d.path=`/styles/v1${d.path}/sprite${n}${i}`,this._makeAPIURL(d,this._customAccessToken||c)):(d.path+=`${n}${i}`,Mt(d))}normalizeTileURL(r,n,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Le(r))return r;const c=zt(r);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||i&&c.authority!=="raster"&&i===512?"@2x":""}${R.supported?".webp":"$1"}`),c.authority==="raster"?c.path=`/${D.RASTER_URL_PREFIX}${c.path}`:(c.path=c.path.replace(/^.+\/v4\//,"/"),c.path=`/${D.TILE_URL_VERSION}${c.path}`);const d=this._customAccessToken||function(m){for(const y of m){const x=y.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(c.params)||D.ACCESS_TOKEN;return D.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&c.params.push(`sku=${this._skuToken}`),this._makeAPIURL(c,d)}canonicalizeTileURL(r,n){const i=zt(r);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return r;let c="mapbox://";i.path.match(/^\/raster\/v1\//)?c+=`raster/${i.path.replace(`/${D.RASTER_URL_PREFIX}/`,"")}`:c+=`tiles/${i.path.replace(`/${D.TILE_URL_VERSION}/`,"")}`;let d=i.params;return n&&(d=d.filter(m=>!m.match(/^access_token=/))),d.length&&(c+=`?${d.join("&")}`),c}canonicalizeTileset(r,n){const i=!!n&&Le(n),c=[];for(const d of r.tiles||[])We(d)?c.push(this.canonicalizeTileURL(d,i)):c.push(d);return c}_makeAPIURL(r,n){const i="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",c=zt(D.API_URL);if(r.protocol=c.protocol,r.authority=c.authority,r.protocol==="http"){const d=r.params.indexOf("secure");d>=0&&r.params.splice(d,1)}if(c.path!=="/"&&(r.path=`${c.path}${r.path}`),!D.REQUIRE_ACCESS_TOKEN)return Mt(r);if(n=n||D.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${i}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${i}`)}return r.params=r.params.filter(d=>d.indexOf("access_token")===-1),r.params.push(`access_token=${n||""}`),Mt(r)}},a.ResourceType=nn,a.SegmentVector=Qr,a.SourceCache=Gc,a.StencilMode=Ix,a.StructArrayLayout1ui2=po,a.StructArrayLayout2f1f2i16=wn,a.StructArrayLayout2i4=kt,a.StructArrayLayout2ui4=gi,a.StructArrayLayout3f12=Vn,a.StructArrayLayout3ui6=cn,a.StructArrayLayout4i8=ft,a.StructArrayLayout5f20=dr,a.Texture=nf,a.Tile=Px,a.Transitionable=q,a.Uniform1f=Dg,a.Uniform1i=class extends Ra{constructor(r){super(r),this.current=0}set(r,n,i){this.fetchUniformLocation(r,n)&&this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},a.Uniform2f=class extends Ra{constructor(r){super(r),this.current=[0,0]}set(r,n,i){this.fetchUniformLocation(r,n)&&(i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1])))}},a.Uniform3f=class extends Ra{constructor(r){super(r),this.current=[0,0,0]}set(r,n,i){this.fetchUniformLocation(r,n)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2])))}},a.Uniform4f=W2,a.UniformColor=G2,a.UniformMatrix2f=class extends Ra{constructor(r){super(r),this.current=IA}set(r,n,i){if(this.fetchUniformLocation(r,n)){for(let c=0;c<4;c++)if(i[c]!==this.current[c]){this.current=i,this.gl.uniformMatrix2fv(this.location,!1,i);break}}}},a.UniformMatrix3f=class extends Ra{constructor(r){super(r),this.current=MA}set(r,n,i){if(this.fetchUniformLocation(r,n)){for(let c=0;c<9;c++)if(i[c]!==this.current[c]){this.current=i,this.gl.uniformMatrix3fv(this.location,!1,i);break}}}},a.UniformMatrix4f=class extends Ra{constructor(r){super(r),this.current=PA}set(r,n,i){if(this.fetchUniformLocation(r,n)){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let c=1;c<16;c++)if(i[c]!==this.current[c]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}}},a.UnwrappedTileID=KS,a.ValidationError=Qt,a.VectorTileFeature=qg,a.VectorTileWorkerSource=class extends lc{constructor(r,n,i,c,d){super(),this.actor=r,this.layerIndex=n,this.availableImages=i,this.loadVectorData=d||aC,this.loading={},this.loaded={},this.deduped=new sC(r.scheduler),this.isSpriteLoaded=c,this.scheduler=r.scheduler}loadTile(r,n){const i=r.uid,c=r&&r.request,d=c&&c.collectResourceTiming,m=this.loading[i]=new Qz(r);m.abort=this.loadVectorData(r,(y,x)=>{const S=!this.loading[i];if(delete this.loading[i],S||y||!x)return m.status="done",S||(this.loaded[i]=m),n(y);const T=x.rawData,P={};x.expires&&(P.expires=x.expires),x.cacheControl&&(P.cacheControl=x.cacheControl),m.vectorTile=x.vectorTile||new hx(new Qg(T));const A=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(z,F)=>{if(z||!F)return n(z);const V={};if(d){const X=il(c);X.length>0&&(V.resourceTiming=JSON.parse(JSON.stringify(X)))}n(null,gt({rawTileData:T.slice(0)},F,P,V))})};this.isSpriteLoaded?A():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(A,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):A()}),this.loaded=this.loaded||{},this.loaded[i]=m})}reloadTile(r,n){const i=this.loaded,c=r.uid,d=this;if(i&&i[c]){const m=i[c];m.showCollisionBoxes=r.showCollisionBoxes,m.enableTerrain=!!r.enableTerrain,m.projection=r.projection,m.tileTransform=Wc(r.tileID.canonical,r.projection);const y=(x,S)=>{const T=m.reloadCallback;T&&(delete m.reloadCallback,m.parse(m.vectorTile,d.layerIndex,this.availableImages,d.actor,T)),n(x,S)};m.status==="parsing"?m.reloadCallback=y:m.status==="done"&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,y):y())}}abortTile(r,n){const i=r.uid,c=this.loading[i];c&&(c.abort&&c.abort(),delete this.loading[i]),n()}removeTile(r,n){const i=this.loaded,c=r.uid;i&&i[c]&&delete i[c],n()}},a.WritingMode=Ro,a.ZoomDependentExpression=Ec,a.add=Oa,a.addDynamicAttributes=cy,a.adjoint=function(r,n){var i=n[0],c=n[1],d=n[2],m=n[3],y=n[4],x=n[5],S=n[6],T=n[7],P=n[8];return r[0]=y*P-x*T,r[1]=d*T-c*P,r[2]=c*x-d*y,r[3]=x*S-m*P,r[4]=i*P-d*S,r[5]=d*m-i*x,r[6]=m*T-y*S,r[7]=c*S-i*T,r[8]=i*y-c*m,r},a.asyncAll=nt,a.bezier=Be,a.bindAll=Nt,a.boundsAttributes=jT,a.bufferConvexPolygon=function(r,n){const i=[];for(let c=0;c<r.length;c++){const d=Ne(c-1,-1,r.length-1),m=Ne(c+1,-1,r.length-1),y=r[c],x=r[m],S=r[d].sub(y).unit(),T=x.sub(y).unit(),P=T.angleWithSep(S.x,S.y),A=S.add(T).unit().mult(-1*n/Math.sin(P/2));i.push(y.add(A))}return i},a.cacheEntryPossiblyAdded=function(r){Ht++,Ht>En&&(r.getActor().send("enforceCacheSizeLimit",dn),Ht=0)},a.calculateGlobeLabelMatrix=function(r,n){const{x:i,y:c}=r.point,d=fS(i,c,r.worldSize/r._pixelsPerMercatorPixel,0,0);return Oc(d,d,qv(Qs(n)))},a.calculateGlobeMatrix=function(r){const{x:n,y:i}=r.point,{lng:c,lat:d}=r._center;return fS(n,i,r.worldSize,c,d)},a.calculateGlobeMercatorMatrix=function(r){const n=r.pixelsPerMeter,i=n/Ls(1,r.center.lat),c=zs(new Float64Array(16));return Pp(c,c,[r.point.x,r.point.y,0]),Bc(c,c,[i,i,n]),Float32Array.from(c)},a.circumferenceAtLatitude=Xv,a.clamp=Se,a.clearTileCache=function(r){if(!an())return;const n=w.caches.delete(Hn);r&&n.catch(r).then(()=>r())},a.clipLine=CT,a.clone=function(r){var n=new fo(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n},a.clone$1=St,a.collisionCircleLayout=KD,a.config=D,a.conjugate=function(r,n){return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[3]=n[3],r},a.create=function(){var r=new fo(16);return fo!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},a.create$1=Z2,a.createExpression=_l,a.createLayout=Ue,a.createStyleLayer=function(r){return r.type==="custom"?new Vz(r):new Wz[r.type](r)},a.cross=Nv,a.degToRad=Fe,a.distance=function(r,n){return Math.hypot(n[0]-r[0],n[1]-r[1],n[2]-r[2])},a.div=function(r,n,i){return r[0]=n[0]/i[0],r[1]=n[1]/i[1],r[2]=n[2]/i[2],r},a.dot=es,a.earthRadius=Fp,a.ease=Ae,a.easeCubicInOut=ue,a.ecefToLatLng=function([r,n,i]){const c=Math.hypot(r,n,i),d=Math.atan2(r,i),m=.5*Math.PI-Math.acos(-n/c);return new pr(be(d),be(m))},a.emitValidationErrors=Eg,a.endsWith=at,a.enforceCacheSizeLimit=function(r){ln(),Tn&&Tn.then(n=>{n.keys().then(i=>{for(let c=0;c<i.length-r;c++)n.delete(i[c])})})},a.evaluateSizeForFeature=Kg,a.evaluateSizeForZoom=pd,a.evaluateVariableOffset=IT,a.evented=v,a.exactEquals=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]},a.exactEquals$1=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]},a.exported=xs,a.exported$1=R,a.extend=gt,a.extend$1=ws,a.fillExtrusionHeightLift=ZS,a.filterObject=it,a.fromMat4=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[4],r[4]=n[5],r[5]=n[6],r[6]=n[8],r[7]=n[9],r[8]=n[10],r},a.fromQuat=function(r,n){var i=n[0],c=n[1],d=n[2],m=n[3],y=i+i,x=c+c,S=d+d,T=i*y,P=c*y,A=c*x,z=d*y,F=d*x,V=d*S,X=m*y,ne=m*x,fe=m*S;return r[0]=1-A-V,r[1]=P+fe,r[2]=z-ne,r[3]=0,r[4]=P-fe,r[5]=1-T-V,r[6]=F+X,r[7]=0,r[8]=z+ne,r[9]=F-X,r[10]=1-T-A,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},a.fromRotation=function(r,n){var i=Math.sin(n),c=Math.cos(n);return r[0]=c,r[1]=i,r[2]=0,r[3]=-i,r[4]=c,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},a.fromScaling=Y2,a.furthestTileCorner=function(r){const n=Math.round((r+45+360)%360/90)%4;return we[n]},a.getAABBPointSquareDist=function(r,n,i){let c=0;for(let d=0;d<2;++d){const m=i?i[d]:0;r[d]>m&&(c+=(r[d]-m)*(r[d]-m)),n[d]<m&&(c+=(m-n[d])*(m-n[d]))}return c},a.getAnchorAlignment=vx,a.getAnchorJustification=wx,a.getBounds=function(r){let n=1/0,i=1/0,c=-1/0,d=-1/0;for(const m of r)n=Math.min(n,m.x),i=Math.min(i,m.y),c=Math.max(c,m.x),d=Math.max(d,m.y);return{min:new ae(n,i),max:new ae(c,d)}},a.getColumn=kn,a.getDefaultExportFromCjs=G,a.getGridMatrix=function(r,n,i,c){const d=n.getNorth(),m=n.getSouth(),y=n.getWest(),x=n.getEast(),S=1<<r.z,T=x-y,P=d-m,A=T/$c,z=-P/Lp[i],F=[0,A,0,z,0,0,d,y,0];if(r.z>0){const V=180/c;X2(F,F,[V/T+1,0,0,0,V/P+1,0,-.5*V/A,.5*V/z,1])}return F[2]=S,F[5]=r.x,F[8]=r.y,F},a.getImage=_e,a.getJSON=function(r,n){return Zn(gt(r,{type:"json"}),n)},a.getLatitudinalLod=function(r){const n=Di-5;r=Se(r,-n,n)/n*90;const i=Math.pow(Math.abs(Math.sin(Fe(r))),3);return Math.round(i*(Lp.length-1))},a.getMapSessionAPI=Jt,a.getPerformanceMeasurement=il,a.getProjection=FT,a.getRTLTextPluginStatus=b,a.getReferrer=$n,a.getTilePoint=function(r,{x:n,y:i},c=0){return new ae(((n-c)*r.scale-r.x)*vn,(i*r.scale-r.y)*vn)},a.getTileVec3=function(r,n,i=0){return id(((n.x-i)*r.scale-r.x)*vn,(n.y*r.scale-r.y)*vn,_S(n.z,n.y))},a.getVideo=function(r,n){const i=w.document.createElement("video");i.muted=!0,i.onloadstart=function(){n(null,i)};for(let c=0;c<r.length;c++){const d=w.document.createElement("source");Nr(r[c])||(i.crossOrigin="Anonymous"),d.src=r[c],i.appendChild(d)}return{cancel:()=>{}}},a.globeCenterToScreenPoint=function(r){const n=[0,0,0],i=zs(new Float64Array(16));return Oc(i,r.pixelMatrix,r.globeMatrix),Zr(n,n,i),new ae(n[0],n[1])},a.globeDenormalizeECEF=qv,a.globeECEFOrigin=function(r,n){const i=[0,0,0];return Zr(i,i,Bp(Qs(n.canonical))),Zr(i,i,r),i},a.globeMetersToEcef=Lg,a.globeNormalizeECEF=Bp,a.globePixelsToTileUnits=function(r,n){return vn/(512*Math.pow(2,r))*Bg(Qs(n))},a.globePoleMatrixForTile=function(r,n,i){const c=zs(new Float64Array(16)),d=(n/(1<<r)-.5)*Math.PI*2;return Rg(c,i.globeMatrix,d),Float32Array.from(c)},a.globeTileBounds=Qs,a.globeTiltAtLngLat=mS,a.globeToMercatorTransition=ad,a.globeUseCustomAntiAliasing=function(r,n,i){const c=ad(i.zoom),d=r.style.map._antialias,m=!!n.extStandardDerivatives,y=n.extStandardDerivativesForceOff||r.terrain&&r.terrain.exaggeration()>0;return c===0&&!d&&!y&&m},a.identity=zs,a.identity$1=iS,a.invert=Ov,a.isFullscreen=function(){return!!w.document.fullscreenElement||!!w.document.webkitFullscreenElement},a.isLngLatBehindGlobe=Zv,a.isMapAuthenticated=function(r){return hn.has(r)},a.isMapboxURL=Le,a.isSafariWithAntialiasingBug=function(r){const n=r.navigator?r.navigator.userAgent:null;return!!Lt(r)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.latFromMercatorY=Ai,a.latLngToECEF=sd,a.len=$A,a.length=Mp,a.length$1=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},a.lngFromMercatorX=zo,a.loadVectorTile=aC,a.makeRequest=Zn,a.mapValue=function(r,n,i,c,d){return Se((r-n)/(i-n)*(d-c)+c,c,d)},a.mercatorScale=vS,a.mercatorXfromLng=ea,a.mercatorYfromLat=ta,a.mercatorZfromAltitude=Ls,a.mul=BA,a.mul$1=FA,a.multiply=Oc,a.multiply$1=X2,a.multiply$2=Q2,a.nextPowerOfTwo=mt,a.normalize=Wi,a.normalize$1=NA,a.normalize$2=nS,a.number=Xn,a.ortho=function(r,n,i,c,d,m,y){var x=1/(n-i),S=1/(c-d),T=1/(m-y);return r[0]=-2*x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*S,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*T,r[11]=0,r[12]=(n+i)*x,r[13]=(d+c)*S,r[14]=(y+m)*T,r[15]=1,r},a.pbf=iT,a.perspective=function(r,n,i,c,d){var m,y=1/Math.tan(n/2);return r[0]=y/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=y,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,d!=null&&d!==1/0?(r[10]=(d+c)*(m=1/(c-d)),r[14]=2*d*c*m):(r[10]=-1,r[14]=-2*c),r},a.pick=function(r,n){const i={};for(let c=0;c<n.length;c++){const d=n[c];d in r&&(i[d]=r[d])}return i},a.plugin=k,a.pointGeometry=oe,a.polesInViewport=function(r){const n=zs(new Float64Array(16));Oc(n,r.pixelMatrix,r.globeMatrix);const i=[0,ts,0],c=[0,ns,0];return Zr(i,i,n),Zr(c,c,n),[i[0]>0&&i[0]<=r.width&&i[1]>0&&i[1]<=r.height&&!Zv(r,new pr(r.center.lat,90)),c[0]>0&&c[0]<=r.width&&c[1]>0&&c[1]<=r.height&&!Zv(r,new pr(r.center.lat,-90))]},a.polygonContainsPoint=Vc,a.polygonIntersectsBox=ES,a.polygonIntersectsPolygon=wS,a.polygonizeBounds=function(r,n,i=0,c=!0){const d=new ae(i,i),m=r.sub(d),y=n.add(d),x=[m,new ae(y.x,m.y),y,new ae(m.x,y.y)];return c&&x.push(m.clone()),x},a.posAttributes=Rp,a.postMapLoadEvent=_r,a.postPerformanceEvent=Qe,a.postTurnstileEvent=Nn,a.potpack=gx,a.prevPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},a.radToDeg=be,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.registerForPluginStateChange=function(r){return r({pluginStatus:f,pluginURL:s}),v.on("pluginStateChange",r),r},a.removeAuthState=function(r){hn.delete(r)},a.renderColorRamp=rx,a.resample=xS,a.rotateX=Bv,a.rotateX$1=oS,a.rotateY=Rg,a.rotateY$1=sS,a.rotateZ=function(r,n,i){var c=Math.sin(i),d=Math.cos(i),m=n[0],y=n[1],x=n[2],S=n[3],T=n[4],P=n[5],A=n[6],z=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=m*d+T*c,r[1]=y*d+P*c,r[2]=x*d+A*c,r[3]=S*d+z*c,r[4]=T*d-m*c,r[5]=P*d-y*c,r[6]=A*d-x*c,r[7]=z*d-S*c,r},a.rotateZ$1=function(r,n,i){i*=.5;var c=n[0],d=n[1],m=n[2],y=n[3],x=Math.sin(i),S=Math.cos(i);return r[0]=c*S+d*x,r[1]=d*S-c*x,r[2]=m*S+y*x,r[3]=y*S-m*x,r},a.scale=Bc,a.scale$1=tS,a.scale$2=Do,a.scaleAndAdd=Dp,a.set=function(r,n,i,c){return r[0]=n,r[1]=i,r[2]=c,r},a.setCacheLimits=function(r,n){dn=r,En=n},a.setColumn=function(r,n,i){r[4*n+0]=i[0],r[4*n+1]=i[1],r[4*n+2]=i[2],r[4*n+3]=i[3]},a.setRTLTextPlugin=function(r,n,i=!1){if(f===Sp||f===Tp||f===Cp)throw new Error("setRTLTextPlugin cannot be called multiple times.");s=xs.resolveURL(r),f=Sp,wl=n,g(),i||E()},a.smoothstep=ke,a.spec=ct,a.squaredLength=function(r){var n=r[0],i=r[1],c=r[2];return n*n+i*i+c*c},a.storeAuthState=function(r,n){n?hn.add(r):hn.delete(r)},a.sub=Rs,a.subtract=$v,a.symbolSize=JD,a.tileAABB=function(r,n,i,c,d,m,y,x,S){if(S.name==="globe")return GA(r,n,new Xg(i,c,d));const T=Wc({z:i,x:c,y:d},S);return new Gi([(m+T.x/T.scale)*n,n*(T.y/T.scale),y],[(m+T.x2/T.scale)*n,n*(T.y2/T.scale),x])},a.tileCornersToBounds=Og,a.tileTransform=Wc,a.transformMat3=function(r,n,i){var c=n[0],d=n[1],m=n[2];return r[0]=c*i[0]+d*i[3]+m*i[6],r[1]=c*i[1]+d*i[4]+m*i[7],r[2]=c*i[2]+d*i[5]+m*i[8],r},a.transformMat4=Zr,a.transformMat4$1=Fc,a.transformQuat=eS,a.transitionTileAABBinECEF=dS,a.translate=Pp,a.transpose=function(r,n){if(r===n){var i=n[1],c=n[2],d=n[5];r[1]=n[3],r[2]=n[6],r[3]=i,r[5]=n[7],r[6]=c,r[7]=d}else r[0]=n[0],r[1]=n[3],r[2]=n[6],r[3]=n[1],r[4]=n[4],r[5]=n[7],r[6]=n[2],r[7]=n[5],r[8]=n[8];return r},a.triggerPluginCompletionEvent=u,a.uniqueId=xt,a.updateGlobeVertexNormal=function(r,n,i,c,d){const m=5*n+2;r.float32[m+0]=i,r.float32[m+1]=c,r.float32[m+2]=d},a.validateCustomStyleLayer=function(r){const n=[],i=r.id;return i===void 0&&n.push({message:`layers.${i}: missing required property "id"`}),r.render===void 0&&n.push({message:`layers.${i}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&n.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),n},a.validateFilter=r=>ho(Ac(r)),a.validateFog=r=>ho(Sg(r)),a.validateLayer=r=>ho(vg(r)),a.validateLight=r=>ho(wg(r)),a.validateSource=r=>ho(bg(r)),a.validateStyle=Cg,a.validateTerrain=r=>ho(_p(r)),a.values=vt,a.vectorTile=Hg,a.version=C,a.warnOnce=He,a.window=w,a.wrap=Ne}),p(["./shared"],function(a){function w(ge){if(typeof ge=="number"||typeof ge=="boolean"||typeof ge=="string"||ge==null)return JSON.stringify(ge);if(Array.isArray(ge)){let ee="[";for(const _e of ge)ee+=`${w(_e)},`;return`${ee}]`}let J="{";for(const ee of Object.keys(ge).sort())J+=`${ee}:${w(ge[ee])},`;return`${J}}`}function C(ge){let J="";for(const ee of a.refProperties)J+=`/${w(ge[ee])}`;return J}class M{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,ee){for(const Me of J)this._layerConfigs[Me.id]=Me,(this._layers[Me.id]=a.createStyleLayer(Me)).compileFilter(),this.keyCache[Me.id]&&delete this.keyCache[Me.id];for(const Me of ee)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const _e=function(Me,Le){const We={};for(let Oe=0;Oe<Me.length;Oe++){const Ge=Le&&Le[Me[Oe].id]||C(Me[Oe]);Le&&(Le[Me[Oe].id]=Ge);let bt=We[Ge];bt||(bt=We[Ge]=[]),bt.push(Me[Oe])}const je=[];for(const Oe in We)je.push(We[Oe]);return je}(a.values(this._layerConfigs),this.keyCache);for(const Me of _e){const Le=Me.map(zt=>this._layers[zt.id]),We=Le[0];if(We.visibility==="none")continue;const je=We.source||"";let Oe=this.familiesBySource[je];Oe||(Oe=this.familiesBySource[je]={});const Ge=We.sourceLayer||"_geojsonTileLayer";let bt=Oe[Ge];bt||(bt=Oe[Ge]=[]),bt.push(Le)}}}class D{loadTile(J,ee){const{uid:_e,encoding:Me,rawImageData:Le,padding:We,buildQuadTree:je}=J,Oe=a.window.ImageBitmap&&Le instanceof a.window.ImageBitmap?this.getImageData(Le,We):Le;ee(null,new a.DEMData(_e,Oe,Me,We<1,je))}getImageData(J,ee){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(J.width,J.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=J.width,this.offscreenCanvas.height=J.height,this.offscreenCanvasContext.drawImage(J,0,0,J.width,J.height);const _e=this.offscreenCanvasContext.getImageData(-ee,-ee,J.width+2*ee,J.height+2*ee);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),_e}}function R(ge,J){if(ge.length!==0){$(ge[0],J);for(var ee=1;ee<ge.length;ee++)$(ge[ee],!J)}}function $(ge,J){for(var ee=0,_e=0,Me=0,Le=ge.length,We=Le-1;Me<Le;We=Me++){var je=(ge[Me][0]-ge[We][0])*(ge[We][1]+ge[Me][1]),Oe=ee+je;_e+=Math.abs(ee)>=Math.abs(je)?ee-Oe+je:je-Oe+ee,ee=Oe}ee+_e>=0!=!!J&&ge.reverse()}var j=a.getDefaultExportFromCjs(function ge(J,ee){var _e,Me=J&&J.type;if(Me==="FeatureCollection")for(_e=0;_e<J.features.length;_e++)ge(J.features[_e],ee);else if(Me==="GeometryCollection")for(_e=0;_e<J.geometries.length;_e++)ge(J.geometries[_e],ee);else if(Me==="Feature")ge(J.geometry,ee);else if(Me==="Polygon")R(J.coordinates,ee);else if(Me==="MultiPolygon")for(_e=0;_e<J.coordinates.length;_e++)R(J.coordinates[_e],ee);return J});const B=a.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},N=a.pointGeometry,U=a.vectorTile.VectorTileFeature,G=Y;function Y(ge,J){this.options=J||{},this.features=ge,this.length=ge.length}function Q(ge,J){this.id=typeof ge.id=="number"?ge.id:void 0,this.type=ge.type,this.rawGeometry=ge.type===1?[ge.geometry]:ge.geometry,this.properties=ge.tags,this.extent=J||4096}Y.prototype.feature=function(ge){return new Q(this.features[ge],this.options.extent)},Q.prototype.loadGeometry=function(){var ge=this.rawGeometry;this.geometry=[];for(var J=0;J<ge.length;J++){for(var ee=ge[J],_e=[],Me=0;Me<ee.length;Me++)_e.push(new N(ee[Me][0],ee[Me][1]));this.geometry.push(_e)}return this.geometry},Q.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ge=this.geometry,J=1/0,ee=-1/0,_e=1/0,Me=-1/0,Le=0;Le<ge.length;Le++)for(var We=ge[Le],je=0;je<We.length;je++){var Oe=We[je];J=Math.min(J,Oe.x),ee=Math.max(ee,Oe.x),_e=Math.min(_e,Oe.y),Me=Math.max(Me,Oe.y)}return[J,_e,ee,Me]},Q.prototype.toGeoJSON=U.prototype.toGeoJSON;var re=a.pbf,oe=G;function de(ge){var J=new re;return function(ee,_e){for(var Me in ee.layers)_e.writeMessage(3,ae,ee.layers[Me])}(ge,J),J.finish()}function ae(ge,J){var ee;J.writeVarintField(15,ge.version||1),J.writeStringField(1,ge.name||""),J.writeVarintField(5,ge.extent||4096);var _e={keys:[],values:[],keycache:{},valuecache:{}};for(ee=0;ee<ge.length;ee++)_e.feature=ge.feature(ee),J.writeMessage(2,ye,_e);var Me=_e.keys;for(ee=0;ee<Me.length;ee++)J.writeStringField(3,Me[ee]);var Le=_e.values;for(ee=0;ee<Le.length;ee++)J.writeMessage(4,ue,Le[ee])}function ye(ge,J){var ee=ge.feature;ee.id!==void 0&&J.writeVarintField(1,ee.id),J.writeMessage(2,Ce,ge),J.writeVarintField(3,ee.type),J.writeMessage(4,we,ee)}function Ce(ge,J){var ee=ge.feature,_e=ge.keys,Me=ge.values,Le=ge.keycache,We=ge.valuecache;for(var je in ee.properties){var Oe=ee.properties[je],Ge=Le[je];if(Oe!==null){Ge===void 0&&(_e.push(je),Le[je]=Ge=_e.length-1),J.writeVarint(Ge);var bt=typeof Oe;bt!=="string"&&bt!=="boolean"&&bt!=="number"&&(Oe=JSON.stringify(Oe));var zt=bt+":"+Oe,Mt=We[zt];Mt===void 0&&(Me.push(Oe),We[zt]=Mt=Me.length-1),J.writeVarint(Mt)}}}function Fe(ge,J){return(J<<3)+(7&ge)}function be(ge){return ge<<1^ge>>31}function we(ge,J){for(var ee=ge.loadGeometry(),_e=ge.type,Me=0,Le=0,We=ee.length,je=0;je<We;je++){var Oe=ee[je],Ge=1;_e===1&&(Ge=Oe.length),J.writeVarint(Fe(1,Ge));for(var bt=_e===3?Oe.length-1:Oe.length,zt=0;zt<bt;zt++){zt===1&&_e!==1&&J.writeVarint(Fe(2,bt-1));var Mt=Oe[zt].x-Me,Mn=Oe[zt].y-Le;J.writeVarint(be(Mt)),J.writeVarint(be(Mn)),Me+=Mt,Le+=Mn}_e===3&&J.writeVarint(Fe(7,1))}}function ue(ge,J){var ee=typeof ge;ee==="string"?J.writeStringField(1,ge):ee==="boolean"?J.writeBooleanField(7,ge):ee==="number"&&(ge%1!=0?J.writeDoubleField(3,ge):ge<0?J.writeSVarintField(6,ge):J.writeVarintField(5,ge))}K.exports=de,K.exports.fromVectorTileJs=de,K.exports.fromGeojsonVt=function(ge,J){J=J||{};var ee={};for(var _e in ge)ee[_e]=new oe(ge[_e].features,J),ee[_e].name=_e,ee[_e].version=J.version,ee[_e].extent=J.extent;return de({layers:ee})},K.exports.GeoJSONWrapper=oe;var Be=a.getDefaultExportFromCjs(K.exports);const Ae={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ge=>ge},Se=Math.fround||(ke=new Float32Array(1),ge=>(ke[0]=+ge,ke[0]));var ke;const Ne=3,nt=5,vt=6;class gt{constructor(J){this.options=Object.assign(Object.create(Ae),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){const{log:ee,minZoom:_e,maxZoom:Me}=this.options;ee&&console.time("total time");const Le=`prepare ${J.length} points`;ee&&console.time(Le),this.points=J;const We=[];for(let Oe=0;Oe<J.length;Oe++){const Ge=J[Oe];if(!Ge.geometry)continue;const[bt,zt]=Ge.geometry.coordinates,Mt=Se(ht(bt)),Mn=Se(mt(zt));We.push(Mt,Mn,1/0,Oe,-1,1),this.options.reduce&&We.push(0)}let je=this.trees[Me+1]=this._createTree(We);ee&&console.timeEnd(Le);for(let Oe=Me;Oe>=_e;Oe--){const Ge=+Date.now();je=this.trees[Oe]=this._createTree(this._cluster(je,Oe)),ee&&console.log("z%d: %d clusters in %dms",Oe,je.numItems,+Date.now()-Ge)}return ee&&console.timeEnd("total time"),this}getClusters(J,ee){let _e=((J[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,J[1]));let Le=J[2]===180?180:((J[2]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)_e=-180,Le=180;else if(_e>Le){const zt=this.getClusters([_e,Me,180,We],ee),Mt=this.getClusters([-180,Me,Le,We],ee);return zt.concat(Mt)}const je=this.trees[this._limitZoom(ee)],Oe=je.range(ht(_e),mt(We),ht(Le),mt(Me)),Ge=je.data,bt=[];for(const zt of Oe){const Mt=this.stride*zt;bt.push(Ge[Mt+nt]>1?rt(Ge,Mt,this.clusterProps):this.points[Ge[Mt+Ne]])}return bt}getChildren(J){const ee=this._getOriginId(J),_e=this._getOriginZoom(J),Me="No cluster with the specified id.",Le=this.trees[_e];if(!Le)throw new Error(Me);const We=Le.data;if(ee*this.stride>=We.length)throw new Error(Me);const je=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),Oe=Le.within(We[ee*this.stride],We[ee*this.stride+1],je),Ge=[];for(const bt of Oe){const zt=bt*this.stride;We[zt+4]===J&&Ge.push(We[zt+nt]>1?rt(We,zt,this.clusterProps):this.points[We[zt+Ne]])}if(Ge.length===0)throw new Error(Me);return Ge}getLeaves(J,ee,_e){const Me=[];return this._appendLeaves(Me,J,ee=ee||10,_e=_e||0,0),Me}getTile(J,ee,_e){const Me=this.trees[this._limitZoom(J)],Le=Math.pow(2,J),{extent:We,radius:je}=this.options,Oe=je/We,Ge=(_e-Oe)/Le,bt=(_e+1+Oe)/Le,zt={features:[]};return this._addTileFeatures(Me.range((ee-Oe)/Le,Ge,(ee+1+Oe)/Le,bt),Me.data,ee,_e,Le,zt),ee===0&&this._addTileFeatures(Me.range(1-Oe/Le,Ge,1,bt),Me.data,Le,_e,Le,zt),ee===Le-1&&this._addTileFeatures(Me.range(0,Ge,Oe/Le,bt),Me.data,-1,_e,Le,zt),zt.features.length?zt:null}getClusterExpansionZoom(J){let ee=this._getOriginZoom(J)-1;for(;ee<=this.options.maxZoom;){const _e=this.getChildren(J);if(ee++,_e.length!==1)break;J=_e[0].properties.cluster_id}return ee}_appendLeaves(J,ee,_e,Me,Le){const We=this.getChildren(ee);for(const je of We){const Oe=je.properties;if(Oe&&Oe.cluster?Le+Oe.point_count<=Me?Le+=Oe.point_count:Le=this._appendLeaves(J,Oe.cluster_id,_e,Me,Le):Le<Me?Le++:J.push(je),J.length===_e)break}return Le}_createTree(J){const ee=new a.KDBush(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<J.length;_e+=this.stride)ee.add(J[_e],J[_e+1]);return ee.finish(),ee.data=J,ee}_addTileFeatures(J,ee,_e,Me,Le,We){for(const je of J){const Oe=je*this.stride,Ge=ee[Oe+nt]>1;let bt,zt,Mt;if(Ge)bt=xt(ee,Oe,this.clusterProps),zt=ee[Oe],Mt=ee[Oe+1];else{const Pn=this.points[ee[Oe+Ne]];bt=Pn.properties;const[Dn,Nn]=Pn.geometry.coordinates;zt=ht(Dn),Mt=mt(Nn)}const Mn={type:1,geometry:[[Math.round(this.options.extent*(zt*Le-_e)),Math.round(this.options.extent*(Mt*Le-Me))]],tags:bt};let Fn;Fn=Ge||this.options.generateId?ee[Oe+Ne]:this.points[ee[Oe+Ne]].id,Fn!==void 0&&(Mn.id=Fn),We.features.push(Mn)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,ee){const{radius:_e,extent:Me,reduce:Le,minPoints:We}=this.options,je=_e/(Me*Math.pow(2,ee)),Oe=J.data,Ge=[],bt=this.stride;for(let zt=0;zt<Oe.length;zt+=bt){if(Oe[zt+2]<=ee)continue;Oe[zt+2]=ee;const Mt=Oe[zt],Mn=Oe[zt+1],Fn=J.within(Oe[zt],Oe[zt+1],je),Pn=Oe[zt+nt];let Dn=Pn;for(const Nn of Fn){const sr=Nn*bt;Oe[sr+2]>ee&&(Dn+=Oe[sr+nt])}if(Dn>Pn&&Dn>=We){let Nn,sr=Mt*Pn,_r=Mn*Pn,Ur=-1;const Qe=((zt/bt|0)<<5)+(ee+1)+this.points.length;for(const ot of Fn){const Jt=ot*bt;if(Oe[Jt+2]<=ee)continue;Oe[Jt+2]=ee;const hn=Oe[Jt+nt];sr+=Oe[Jt]*hn,_r+=Oe[Jt+1]*hn,Oe[Jt+4]=Qe,Le&&(Nn||(Nn=this._map(Oe,zt,!0),Ur=this.clusterProps.length,this.clusterProps.push(Nn)),Le(Nn,this._map(Oe,Jt)))}Oe[zt+4]=Qe,Ge.push(sr/Dn,_r/Dn,1/0,Qe,-1,Dn),Le&&Ge.push(Ur)}else{for(let Nn=0;Nn<bt;Nn++)Ge.push(Oe[zt+Nn]);if(Dn>1)for(const Nn of Fn){const sr=Nn*bt;if(!(Oe[sr+2]<=ee)){Oe[sr+2]=ee;for(let _r=0;_r<bt;_r++)Ge.push(Oe[sr+_r])}}}}return Ge}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,ee,_e){if(J[ee+nt]>1){const We=this.clusterProps[J[ee+vt]];return _e?Object.assign({},We):We}const Me=this.points[J[ee+Ne]].properties,Le=this.options.map(Me);return _e&&Le===Me?Object.assign({},Le):Le}}function rt(ge,J,ee){return{type:"Feature",id:ge[J+Ne],properties:xt(ge,J,ee),geometry:{type:"Point",coordinates:[(_e=ge[J],360*(_e-.5)),Ot(ge[J+1])]}};var _e}function xt(ge,J,ee){const _e=ge[J+nt],Me=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,Le=ge[J+vt],We=Le===-1?{}:Object.assign({},ee[Le]);return Object.assign(We,{cluster:!0,cluster_id:ge[J+Ne],point_count:_e,point_count_abbreviated:Me})}function ht(ge){return ge/360+.5}function mt(ge){const J=Math.sin(ge*Math.PI/180),ee=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return ee<0?0:ee>1?1:ee}function Ot(ge){const J=(180-360*ge)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function Nt(ge,J,ee,_e){for(var Me,Le=_e,We=ee-J>>1,je=ee-J,Oe=ge[J],Ge=ge[J+1],bt=ge[ee],zt=ge[ee+1],Mt=J+3;Mt<ee;Mt+=3){var Mn=at(ge[Mt],ge[Mt+1],Oe,Ge,bt,zt);if(Mn>Le)Me=Mt,Le=Mn;else if(Mn===Le){var Fn=Math.abs(Mt-We);Fn<je&&(Me=Mt,je=Fn)}}Le>_e&&(Me-J>3&&Nt(ge,J,Me,_e),ge[Me+2]=Le,ee-Me>3&&Nt(ge,Me,ee,_e))}function at(ge,J,ee,_e,Me,Le){var We=Me-ee,je=Le-_e;if(We!==0||je!==0){var Oe=((ge-ee)*We+(J-_e)*je)/(We*We+je*je);Oe>1?(ee=Me,_e=Le):Oe>0&&(ee+=We*Oe,_e+=je*Oe)}return(We=ge-ee)*We+(je=J-_e)*je}function Je(ge,J,ee,_e){var Me={id:ge===void 0?null:ge,type:J,geometry:ee,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Le){var We=Le.geometry,je=Le.type;if(je==="Point"||je==="MultiPoint"||je==="LineString")it(Le,We);else if(je==="Polygon"||je==="MultiLineString")for(var Oe=0;Oe<We.length;Oe++)it(Le,We[Oe]);else if(je==="MultiPolygon")for(Oe=0;Oe<We.length;Oe++)for(var Ge=0;Ge<We[Oe].length;Ge++)it(Le,We[Oe][Ge])}(Me),Me}function it(ge,J){for(var ee=0;ee<J.length;ee+=3)ge.minX=Math.min(ge.minX,J[ee]),ge.minY=Math.min(ge.minY,J[ee+1]),ge.maxX=Math.max(ge.maxX,J[ee]),ge.maxY=Math.max(ge.maxY,J[ee+1])}function St(ge,J,ee,_e){if(J.geometry){var Me=J.geometry.coordinates,Le=J.geometry.type,We=Math.pow(ee.tolerance/((1<<ee.maxZoom)*ee.extent),2),je=[],Oe=J.id;if(ee.promoteId?Oe=J.properties[ee.promoteId]:ee.generateId&&(Oe=_e||0),Le==="Point")Gt(Me,je);else if(Le==="MultiPoint")for(var Ge=0;Ge<Me.length;Ge++)Gt(Me[Ge],je);else if(Le==="LineString")He(Me,je,We,!1);else if(Le==="MultiLineString"){if(ee.lineMetrics){for(Ge=0;Ge<Me.length;Ge++)He(Me[Ge],je=[],We,!1),ge.push(Je(Oe,"LineString",je,J.properties));return}Vt(Me,je,We,!1)}else if(Le==="Polygon")Vt(Me,je,We,!0);else{if(Le!=="MultiPolygon"){if(Le==="GeometryCollection"){for(Ge=0;Ge<J.geometry.geometries.length;Ge++)St(ge,{id:Oe,geometry:J.geometry.geometries[Ge],properties:J.properties},ee,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ge=0;Ge<Me.length;Ge++){var bt=[];Vt(Me[Ge],bt,We,!0),je.push(bt)}}ge.push(Je(Oe,Le,je,J.properties))}}function Gt(ge,J){J.push(lt(ge[0])),J.push(jt(ge[1])),J.push(0)}function He(ge,J,ee,_e){for(var Me,Le,We=0,je=0;je<ge.length;je++){var Oe=lt(ge[je][0]),Ge=jt(ge[je][1]);J.push(Oe),J.push(Ge),J.push(0),je>0&&(We+=_e?(Me*Ge-Oe*Le)/2:Math.sqrt(Math.pow(Oe-Me,2)+Math.pow(Ge-Le,2))),Me=Oe,Le=Ge}var bt=J.length-3;J[2]=1,Nt(J,0,bt,ee),J[bt+2]=1,J.size=Math.abs(We),J.start=0,J.end=J.size}function Vt(ge,J,ee,_e){for(var Me=0;Me<ge.length;Me++){var Le=[];He(ge[Me],Le,ee,_e),J.push(Le)}}function lt(ge){return ge/360+.5}function jt(ge){var J=Math.sin(ge*Math.PI/180),ee=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return ee<0?0:ee>1?1:ee}function Ut(ge,J,ee,_e,Me,Le,We,je){if(_e/=J,Le>=(ee/=J)&&We<_e)return ge;if(We<ee||Le>=_e)return null;for(var Oe=[],Ge=0;Ge<ge.length;Ge++){var bt=ge[Ge],zt=bt.geometry,Mt=bt.type,Mn=Me===0?bt.minX:bt.minY,Fn=Me===0?bt.maxX:bt.maxY;if(Mn>=ee&&Fn<_e)Oe.push(bt);else if(!(Fn<ee||Mn>=_e)){var Pn=[];if(Mt==="Point"||Mt==="MultiPoint")$t(zt,Pn,ee,_e,Me);else if(Mt==="LineString")Lt(zt,Pn,ee,_e,Me,!1,je.lineMetrics);else if(Mt==="MultiLineString")kn(zt,Pn,ee,_e,Me,!1);else if(Mt==="Polygon")kn(zt,Pn,ee,_e,Me,!0);else if(Mt==="MultiPolygon")for(var Dn=0;Dn<zt.length;Dn++){var Nn=[];kn(zt[Dn],Nn,ee,_e,Me,!0),Nn.length&&Pn.push(Nn)}if(Pn.length){if(je.lineMetrics&&Mt==="LineString"){for(Dn=0;Dn<Pn.length;Dn++)Oe.push(Je(bt.id,Mt,Pn[Dn],bt.tags));continue}Mt!=="LineString"&&Mt!=="MultiLineString"||(Pn.length===1?(Mt="LineString",Pn=Pn[0]):Mt="MultiLineString"),Mt!=="Point"&&Mt!=="MultiPoint"||(Mt=Pn.length===3?"Point":"MultiPoint"),Oe.push(Je(bt.id,Mt,Pn,bt.tags))}}}return Oe.length?Oe:null}function $t(ge,J,ee,_e,Me){for(var Le=0;Le<ge.length;Le+=3){var We=ge[Le+Me];We>=ee&&We<=_e&&(J.push(ge[Le]),J.push(ge[Le+1]),J.push(ge[Le+2]))}}function Lt(ge,J,ee,_e,Me,Le,We){for(var je,Oe,Ge=un(ge),bt=Me===0?dn:En,zt=ge.start,Mt=0;Mt<ge.length-3;Mt+=3){var Mn=ge[Mt],Fn=ge[Mt+1],Pn=ge[Mt+2],Dn=ge[Mt+3],Nn=ge[Mt+4],sr=Me===0?Mn:Fn,_r=Me===0?Dn:Nn,Ur=!1;We&&(je=Math.sqrt(Math.pow(Mn-Dn,2)+Math.pow(Fn-Nn,2))),sr<ee?_r>ee&&(Oe=bt(Ge,Mn,Fn,Dn,Nn,ee),We&&(Ge.start=zt+je*Oe)):sr>_e?_r<_e&&(Oe=bt(Ge,Mn,Fn,Dn,Nn,_e),We&&(Ge.start=zt+je*Oe)):Hn(Ge,Mn,Fn,Pn),_r<ee&&sr>=ee&&(Oe=bt(Ge,Mn,Fn,Dn,Nn,ee),Ur=!0),_r>_e&&sr<=_e&&(Oe=bt(Ge,Mn,Fn,Dn,Nn,_e),Ur=!0),!Le&&Ur&&(We&&(Ge.end=zt+je*Oe),J.push(Ge),Ge=un(ge)),We&&(zt+=je)}var Qe=ge.length-3;Mn=ge[Qe],Fn=ge[Qe+1],Pn=ge[Qe+2],(sr=Me===0?Mn:Fn)>=ee&&sr<=_e&&Hn(Ge,Mn,Fn,Pn),Qe=Ge.length-3,Le&&Qe>=3&&(Ge[Qe]!==Ge[0]||Ge[Qe+1]!==Ge[1])&&Hn(Ge,Ge[0],Ge[1],Ge[2]),Ge.length&&J.push(Ge)}function un(ge){var J=[];return J.size=ge.size,J.start=ge.start,J.end=ge.end,J}function kn(ge,J,ee,_e,Me,Le){for(var We=0;We<ge.length;We++)Lt(ge[We],J,ee,_e,Me,Le,!1)}function Hn(ge,J,ee,_e){ge.push(J),ge.push(ee),ge.push(_e)}function dn(ge,J,ee,_e,Me,Le){var We=(Le-J)/(_e-J);return ge.push(Le),ge.push(ee+(Me-ee)*We),ge.push(1),We}function En(ge,J,ee,_e,Me,Le){var We=(Le-ee)/(Me-ee);return ge.push(J+(_e-J)*We),ge.push(Le),ge.push(1),We}function Tn(ge,J){for(var ee=[],_e=0;_e<ge.length;_e++){var Me,Le=ge[_e],We=Le.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")Me=sn(Le.geometry,J);else if(We==="MultiLineString"||We==="Polygon"){Me=[];for(var je=0;je<Le.geometry.length;je++)Me.push(sn(Le.geometry[je],J))}else if(We==="MultiPolygon")for(Me=[],je=0;je<Le.geometry.length;je++){for(var Oe=[],Ge=0;Ge<Le.geometry[je].length;Ge++)Oe.push(sn(Le.geometry[je][Ge],J));Me.push(Oe)}ee.push(Je(Le.id,We,Me,Le.tags))}return ee}function sn(ge,J){var ee=[];ee.size=ge.size,ge.start!==void 0&&(ee.start=ge.start,ee.end=ge.end);for(var _e=0;_e<ge.length;_e+=3)ee.push(ge[_e]+J,ge[_e+1],ge[_e+2]);return ee}function an(ge,J){if(ge.transformed)return ge;var ee,_e,Me,Le=1<<ge.z,We=ge.x,je=ge.y;for(ee=0;ee<ge.features.length;ee++){var Oe=ge.features[ee],Ge=Oe.geometry,bt=Oe.type;if(Oe.geometry=[],bt===1)for(_e=0;_e<Ge.length;_e+=2)Oe.geometry.push(ln(Ge[_e],Ge[_e+1],J,Le,We,je));else for(_e=0;_e<Ge.length;_e++){var zt=[];for(Me=0;Me<Ge[_e].length;Me+=2)zt.push(ln(Ge[_e][Me],Ge[_e][Me+1],J,Le,We,je));Oe.geometry.push(zt)}}return ge.transformed=!0,ge}function ln(ge,J,ee,_e,Me,Le){return[Math.round(ee*(ge*_e-Me)),Math.round(ee*(J*_e-Le))]}function An(ge,J,ee,_e,Me){for(var Le=J===Me.maxZoom?0:Me.tolerance/((1<<J)*Me.extent),We={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ee,y:_e,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},je=0;je<ge.length;je++){We.numFeatures++,Ht(We,ge[je],Le,Me);var Oe=ge[je].minX,Ge=ge[je].minY,bt=ge[je].maxX,zt=ge[je].maxY;Oe<We.minX&&(We.minX=Oe),Ge<We.minY&&(We.minY=Ge),bt>We.maxX&&(We.maxX=bt),zt>We.maxY&&(We.maxY=zt)}return We}function Ht(ge,J,ee,_e){var Me=J.geometry,Le=J.type,We=[];if(Le==="Point"||Le==="MultiPoint")for(var je=0;je<Me.length;je+=3)We.push(Me[je]),We.push(Me[je+1]),ge.numPoints++,ge.numSimplified++;else if(Le==="LineString")nn(We,Me,ge,ee,!1,!1);else if(Le==="MultiLineString"||Le==="Polygon")for(je=0;je<Me.length;je++)nn(We,Me[je],ge,ee,Le==="Polygon",je===0);else if(Le==="MultiPolygon")for(var Oe=0;Oe<Me.length;Oe++){var Ge=Me[Oe];for(je=0;je<Ge.length;je++)nn(We,Ge[je],ge,ee,!0,je===0)}if(We.length){var bt=J.tags||null;if(Le==="LineString"&&_e.lineMetrics){for(var zt in bt={},J.tags)bt[zt]=J.tags[zt];bt.mapbox_clip_start=Me.start/Me.size,bt.mapbox_clip_end=Me.end/Me.size}var Mt={geometry:We,type:Le==="Polygon"||Le==="MultiPolygon"?3:Le==="LineString"||Le==="MultiLineString"?2:1,tags:bt};J.id!==null&&(Mt.id=J.id),ge.features.push(Mt)}}function nn(ge,J,ee,_e,Me,Le){var We=_e*_e;if(_e>0&&J.size<(Me?We:_e))ee.numPoints+=J.length/3;else{for(var je=[],Oe=0;Oe<J.length;Oe+=3)(_e===0||J[Oe+2]>We)&&(ee.numSimplified++,je.push(J[Oe]),je.push(J[Oe+1])),ee.numPoints++;Me&&function(Ge,bt){for(var zt=0,Mt=0,Mn=Ge.length,Fn=Mn-2;Mt<Mn;Fn=Mt,Mt+=2)zt+=(Ge[Mt]-Ge[Fn])*(Ge[Mt+1]+Ge[Fn+1]);if(zt>0===bt)for(Mt=0,Mn=Ge.length;Mt<Mn/2;Mt+=2){var Pn=Ge[Mt],Dn=Ge[Mt+1];Ge[Mt]=Ge[Mn-2-Mt],Ge[Mt+1]=Ge[Mn-1-Mt],Ge[Mn-2-Mt]=Pn,Ge[Mn-1-Mt]=Dn}}(je,Le),ge.push(je)}}function bn(ge,J){var ee=(J=this.options=function(Me,Le){for(var We in Le)Me[We]=Le[We];return Me}(Object.create(this.options),J)).debug;if(ee&&console.time("preprocess data"),J.maxZoom<0||J.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(J.promoteId&&J.generateId)throw new Error("promoteId and generateId cannot be used together.");var _e=function(Me,Le){var We=[];if(Me.type==="FeatureCollection")for(var je=0;je<Me.features.length;je++)St(We,Me.features[je],Le,je);else St(We,Me.type==="Feature"?Me:{geometry:Me},Le);return We}(ge,J);this.tiles={},this.tileCoords=[],ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",J.indexMaxZoom,J.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=function(Me,Le){var We=Le.buffer/Le.extent,je=Me,Oe=Ut(Me,1,-1-We,We,0,-1,2,Le),Ge=Ut(Me,1,1-We,2+We,0,-1,2,Le);return(Oe||Ge)&&(je=Ut(Me,1,-We,1+We,0,-1,2,Le)||[],Oe&&(je=Tn(Oe,1).concat(je)),Ge&&(je=je.concat(Tn(Ge,-1)))),je}(_e,J),_e.length&&this.splitTile(_e,0,0,0),ee&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function $n(ge,J,ee){return 32*((1<<ge)*ee+J)+ge}function Zn(ge,J){const ee=ge.tileID.canonical;if(!this._geoJSONIndex)return J(null,null);const _e=this._geoJSONIndex.getTile(ee.z,ee.x,ee.y);if(!_e)return J(null,null);const Me=new class{constructor(We){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=We.length,this._features=We}feature(We){return new class{constructor(je){this._feature=je,this.extent=a.EXTENT,this.type=je.type,this.properties=je.tags,"id"in je&&!isNaN(je.id)&&(this.id=parseInt(je.id,10))}loadGeometry(){if(this._feature.type===1){const je=[];for(const Oe of this._feature.geometry)je.push([new a.Point(Oe[0],Oe[1])]);return je}{const je=[];for(const Oe of this._feature.geometry){const Ge=[];for(const bt of Oe)Ge.push(new a.Point(bt[0],bt[1]));je.push(Ge)}return je}}toGeoJSON(je,Oe,Ge){return B.call(this,je,Oe,Ge)}}(this._features[We])}}(_e.features);let Le=Be(Me);Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),J(null,{vectorTile:Me,rawData:Le.buffer})}bn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},bn.prototype.splitTile=function(ge,J,ee,_e,Me,Le,We){for(var je=[ge,J,ee,_e],Oe=this.options,Ge=Oe.debug;je.length;){_e=je.pop(),ee=je.pop(),J=je.pop(),ge=je.pop();var bt=1<<J,zt=$n(J,ee,_e),Mt=this.tiles[zt];if(!Mt&&(Ge>1&&console.time("creation"),Mt=this.tiles[zt]=An(ge,J,ee,_e,Oe),this.tileCoords.push({z:J,x:ee,y:_e}),Ge)){Ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",J,ee,_e,Mt.numFeatures,Mt.numPoints,Mt.numSimplified),console.timeEnd("creation"));var Mn="z"+J;this.stats[Mn]=(this.stats[Mn]||0)+1,this.total++}if(Mt.source=ge,Me){if(J===Oe.maxZoom||J===Me)continue;var Fn=1<<Me-J;if(ee!==Math.floor(Le/Fn)||_e!==Math.floor(We/Fn))continue}else if(J===Oe.indexMaxZoom||Mt.numPoints<=Oe.indexMaxPoints)continue;if(Mt.source=null,ge.length!==0){Ge>1&&console.time("clipping");var Pn,Dn,Nn,sr,_r,Ur,Qe=.5*Oe.buffer/Oe.extent,ot=.5-Qe,Jt=.5+Qe,hn=1+Qe;Pn=Dn=Nn=sr=null,_r=Ut(ge,bt,ee-Qe,ee+Jt,0,Mt.minX,Mt.maxX,Oe),Ur=Ut(ge,bt,ee+ot,ee+hn,0,Mt.minX,Mt.maxX,Oe),ge=null,_r&&(Pn=Ut(_r,bt,_e-Qe,_e+Jt,1,Mt.minY,Mt.maxY,Oe),Dn=Ut(_r,bt,_e+ot,_e+hn,1,Mt.minY,Mt.maxY,Oe),_r=null),Ur&&(Nn=Ut(Ur,bt,_e-Qe,_e+Jt,1,Mt.minY,Mt.maxY,Oe),sr=Ut(Ur,bt,_e+ot,_e+hn,1,Mt.minY,Mt.maxY,Oe),Ur=null),Ge>1&&console.timeEnd("clipping"),je.push(Pn||[],J+1,2*ee,2*_e),je.push(Dn||[],J+1,2*ee,2*_e+1),je.push(Nn||[],J+1,2*ee+1,2*_e),je.push(sr||[],J+1,2*ee+1,2*_e+1)}}},bn.prototype.getTile=function(ge,J,ee){var _e=this.options,Me=_e.extent,Le=_e.debug;if(ge<0||ge>24)return null;var We=1<<ge,je=$n(ge,J=(J%We+We)%We,ee);if(this.tiles[je])return an(this.tiles[je],Me);Le>1&&console.log("drilling down to z%d-%d-%d",ge,J,ee);for(var Oe,Ge=ge,bt=J,zt=ee;!Oe&&Ge>0;)Ge--,bt=Math.floor(bt/2),zt=Math.floor(zt/2),Oe=this.tiles[$n(Ge,bt,zt)];return Oe&&Oe.source?(Le>1&&console.log("found parent tile z%d-%d-%d",Ge,bt,zt),Le>1&&console.time("drilling down"),this.splitTile(Oe.source,Ge,bt,zt,ge,J,ee),Le>1&&console.timeEnd("drilling down"),this.tiles[je]?an(this.tiles[je],Me):null):null};class Ar extends a.VectorTileWorkerSource{constructor(J,ee,_e,Me,Le){super(J,ee,_e,Me,Zn),Le&&(this.loadGeoJSON=Le)}loadData(J,ee){const _e=J&&J.request,Me=_e&&_e.collectResourceTiming;this.loadGeoJSON(J,(Le,We)=>{if(Le||!We)return ee(Le);if(typeof We!="object")return ee(new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`));{j(We,!0);try{if(J.filter){const Oe=a.createExpression(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(bt=>`${bt.key}: ${bt.message}`).join(", "));We={type:"FeatureCollection",features:We.features.filter(bt=>Oe.value.evaluate({zoom:0},bt))}}this._geoJSONIndex=J.cluster?new gt(function({superclusterOptions:Oe,clusterProperties:Ge}){if(!Ge||!Oe)return Oe;const bt={},zt={},Mt={accumulated:null,zoom:0},Mn={properties:null},Fn=Object.keys(Ge);for(const Pn of Fn){const[Dn,Nn]=Ge[Pn],sr=a.createExpression(Nn),_r=a.createExpression(typeof Dn=="string"?[Dn,["accumulated"],["get",Pn]]:Dn);bt[Pn]=sr.value,zt[Pn]=_r.value}return Oe.map=Pn=>{Mn.properties=Pn;const Dn={};for(const Nn of Fn)Dn[Nn]=bt[Nn].evaluate(Mt,Mn);return Dn},Oe.reduce=(Pn,Dn)=>{Mn.properties=Dn;for(const Nn of Fn)Mt.accumulated=Pn[Nn],Pn[Nn]=zt[Nn].evaluate(Mt,Mn)},Oe}(J)).load(We.features):function(Oe,Ge){return new bn(Oe,Ge)}(We,J.geojsonVtOptions)}catch(Oe){return ee(Oe)}this.loaded={};const je={};if(Me){const Oe=a.getPerformanceMeasurement(_e);Oe&&(je.resourceTiming={},je.resourceTiming[J.source]=JSON.parse(JSON.stringify(Oe)))}ee(null,je)}})}reloadTile(J,ee){const _e=this.loaded;return _e&&_e[J.uid]?super.reloadTile(J,ee):this.loadTile(J,ee)}loadGeoJSON(J,ee){if(J.request)a.getJSON(J.request,ee);else{if(typeof J.data!="string")return ee(new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`));try{return ee(null,JSON.parse(J.data))}catch{return ee(new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(J,ee){try{ee(null,this._geoJSONIndex.getClusterExpansionZoom(J.clusterId))}catch(_e){ee(_e)}}getClusterChildren(J,ee){try{ee(null,this._geoJSONIndex.getChildren(J.clusterId))}catch(_e){ee(_e)}}getClusterLeaves(J,ee){try{ee(null,this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset))}catch(_e){ee(_e)}}}class Nr{constructor(J){this.self=J,this.actor=new a.Actor(J,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=a.getProjection({name:"mercator"}),this.workerSourceTypes={vector:a.VectorTileWorkerSource,geojson:Ar},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ee,_e)=>{if(this.workerSourceTypes[ee])throw new Error(`Worker source with name "${ee}" already registered.`);this.workerSourceTypes[ee]=_e},this.self.registerRTLTextPlugin=ee=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=ee.applyArabicShaping,a.plugin.processBidirectionalText=ee.processBidirectionalText,a.plugin.processStyledBidirectionalText=ee.processStyledBidirectionalText}}clearCaches(J,ee,_e){delete this.layerIndexes[J],delete this.availableImages[J],delete this.workerSources[J],delete this.demWorkerSources[J],_e()}checkIfReady(J,ee,_e){_e()}setReferrer(J,ee){this.referrer=ee}spriteLoaded(J,ee){this.isSpriteLoaded[J]=ee;for(const _e in this.workerSources[J]){const Me=this.workerSources[J][_e];for(const Le in Me)Me[Le]instanceof a.VectorTileWorkerSource&&(Me[Le].isSpriteLoaded=ee,Me[Le].fire(new a.Event("isSpriteLoaded")))}}setImages(J,ee,_e){this.availableImages[J]=ee;for(const Me in this.workerSources[J]){const Le=this.workerSources[J][Me];for(const We in Le)Le[We].availableImages=ee}_e()}enableTerrain(J,ee,_e){this.terrain=ee,_e()}setProjection(J,ee){this.projections[J]=a.getProjection(ee)}setLayers(J,ee,_e){this.getLayerIndex(J).replace(ee),_e()}updateLayers(J,ee,_e){this.getLayerIndex(J).update(ee.layers,ee.removedIds),_e()}loadTile(J,ee,_e){const Me=this.enableTerrain?a.extend({enableTerrain:this.terrain},ee):ee;Me.projection=this.projections[J]||this.defaultProjection,this.getWorkerSource(J,ee.type,ee.source).loadTile(Me,_e)}loadDEMTile(J,ee,_e){const Me=this.enableTerrain?a.extend({buildQuadTree:this.terrain},ee):ee;this.getDEMWorkerSource(J,ee.source).loadTile(Me,_e)}reloadTile(J,ee,_e){const Me=this.enableTerrain?a.extend({enableTerrain:this.terrain},ee):ee;Me.projection=this.projections[J]||this.defaultProjection,this.getWorkerSource(J,ee.type,ee.source).reloadTile(Me,_e)}abortTile(J,ee,_e){this.getWorkerSource(J,ee.type,ee.source).abortTile(ee,_e)}removeTile(J,ee,_e){this.getWorkerSource(J,ee.type,ee.source).removeTile(ee,_e)}removeSource(J,ee,_e){if(!this.workerSources[J]||!this.workerSources[J][ee.type]||!this.workerSources[J][ee.type][ee.source])return;const Me=this.workerSources[J][ee.type][ee.source];delete this.workerSources[J][ee.type][ee.source],Me.removeSource!==void 0?Me.removeSource(ee,_e):_e()}loadWorkerSource(J,ee,_e){try{this.self.importScripts(ee.url),_e()}catch(Me){_e(Me.toString())}}syncRTLPluginState(J,ee,_e){try{a.plugin.setState(ee);const Me=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Me!=null){this.self.importScripts(Me);const Le=a.plugin.isParsed();_e(Le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Me}`),Le)}}catch(Me){_e(Me.toString())}}getAvailableImages(J){let ee=this.availableImages[J];return ee||(ee=[]),ee}getLayerIndex(J){let ee=this.layerIndexes[J];return ee||(ee=this.layerIndexes[J]=new M),ee}getWorkerSource(J,ee,_e){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][ee]||(this.workerSources[J][ee]={}),!this.workerSources[J][ee][_e]){const Me={send:(Le,We,je,Oe,Ge,bt)=>{this.actor.send(Le,We,je,J,Ge,bt)},scheduler:this.actor.scheduler};this.workerSources[J][ee][_e]=new this.workerSourceTypes[ee](Me,this.getLayerIndex(J),this.getAvailableImages(J),this.isSpriteLoaded[J])}return this.workerSources[J][ee][_e]}getDEMWorkerSource(J,ee){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][ee]||(this.demWorkerSources[J][ee]=new D),this.demWorkerSources[J][ee]}enforceCacheSizeLimit(J,ee){a.enforceCacheSizeLimit(ee)}getWorkerPerformanceMetrics(J,ee,_e){_e(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Nr(self)),Nr}),p(["./shared"],function(a){function w(f,s){if(Array.isArray(f)){if(!Array.isArray(s)||f.length!==s.length)return!1;for(let u=0;u<f.length;u++)if(!w(f[u],s[u]))return!1;return!0}if(typeof f=="object"&&f!==null&&s!==null){if(typeof s!="object"||Object.keys(f).length!==Object.keys(s).length)return!1;for(const u in f)if(!w(f[u],s[u]))return!1;return!0}return f===s}var C=M;function M(f){return!function(s){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,v,b=new Blob([""],{type:"text/javascript"}),E=URL.createObjectURL(b);try{v=new Worker(E),g=!0}catch{g=!1}return v&&v.terminate(),URL.revokeObjectURL(E),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var v=g.getContext("2d");if(!v)return!1;var b=v.getImageData(0,0,1,1);return b&&b.width===g.width}()?(D[u=s&&s.failIfMajorPerformanceCaveat]===void 0&&(D[u]=function(g){var v,b=function(E){var k=document.createElement("canvas"),I=Object.create(M.webGLContextAttributes);return I.failIfMajorPerformanceCaveat=E,k.getContext("webgl",I)||k.getContext("experimental-webgl",I)}(g);if(!b)return!1;try{v=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!v||b.isContextLost())&&(b.shaderSource(v,"void main() {}"),b.compileShader(v),b.getShaderParameter(v,b.COMPILE_STATUS)===!0)}(u)),D[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(f)}var D={};function R(f,s,u){const g=a.window.document.createElement(f);return s!==void 0&&(g.className=s),u&&u.appendChild(g),g}function $(f,s,u){const g=a.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const v of Object.keys(s))g.setAttributeNS(null,v,s[v]);return u&&u.appendChild(g),g}M.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const j=a.window.document&&a.window.document.documentElement.style,B=j&&j.userSelect!==void 0?"userSelect":"WebkitUserSelect";let K;function N(){j&&B&&(K=j[B],j[B]="none")}function U(){j&&B&&(j[B]=K)}function G(f){f.preventDefault(),f.stopPropagation(),a.window.removeEventListener("click",G,!0)}function Y(){a.window.addEventListener("click",G,!0),a.window.setTimeout(()=>{a.window.removeEventListener("click",G,!0)},0)}function Q(f,s){const u=f.getBoundingClientRect();return de(f,u,s)}function re(f,s){const u=f.getBoundingClientRect(),g=[];for(let v=0;v<s.length;v++)g.push(de(f,u,s[v]));return g}function oe(f){return a.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function de(f,s,u){const g=f.offsetWidth===s.width?1:f.offsetWidth/s.width;return new a.Point((u.clientX-s.left)*g,(u.clientY-s.top)*g)}function ae(f,s){var u=s[0],g=s[1],v=s[2],b=s[3],E=u*b-v*g;return E?(f[0]=b*(E=1/E),f[1]=-g*E,f[2]=-v*E,f[3]=u*E,f):null}function ye(f){const{userImage:s}=f;return!!(s&&s.render&&s.render())&&(f.data.replace(new Uint8Array(s.data.buffer)),!0)}class Ce extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:u,callback:g}of this.requestors)this._notify(u,g);this.requestors=[]}}hasImage(s){return!!this.getImage(s)}getImage(s){return this.images[s]}addImage(s,u){this._validate(s,u)&&(this.images[s]=u)}_validate(s,u){let g=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),g=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),g=!1),this._validateContent(u.content,u)||(this.fire(new a.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),g=!1),g}_validateStretch(s,u){if(!s)return!0;let g=0;for(const v of s){if(v[0]<g||v[1]<v[0]||u<v[1])return!1;g=v[1]}return!0}_validateContent(s,u){return!(s&&(s.length!==4||s[0]<0||u.data.width<s[0]||s[1]<0||u.data.height<s[1]||s[2]<0||u.data.width<s[2]||s[3]<0||u.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,u){u.version=this.images[s].version+1,this.images[s]=u,this.updatedImages[s]=!0}removeImage(s){const u=this.images[s];delete this.images[s],delete this.patterns[s],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,u){let g=!0;if(!this.isLoaded())for(const v of s)this.images[v]||(g=!1);this.isLoaded()||g?this._notify(s,u):this.requestors.push({ids:s,callback:u})}_notify(s,u){const g={};for(const v of s){this.images[v]||this.fire(new a.Event("styleimagemissing",{id:v}));const b=this.images[v];b?g[v]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:a.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,g)}getPixelSize(){const{width:s,height:u}=this.atlasImage;return{width:s,height:u}}getPattern(s){const u=this.patterns[s],g=this.getImage(s);if(!g)return null;if(u&&u.position.version===g.version)return u.position;if(u)u.position.version=g.version;else{const v={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new a.ImagePosition(v,g);this.patterns[s]={bin:v,position:b}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const u=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(s,this.atlasImage,u.RGBA),this.atlasTexture&&this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const b in this.patterns)s.push(this.patterns[b].bin);const{w:u,h:g}=a.potpack(s),v=this.atlasImage;v.resize({width:u||1,height:g||1});for(const b in this.patterns){const{bin:E}=this.patterns[b],k=E.x+1,I=E.y+1,O=this.images[b].data,L=O.width,q=O.height;a.RGBAImage.copy(O,v,{x:0,y:0},{x:k,y:I},{width:L,height:q}),a.RGBAImage.copy(O,v,{x:0,y:q-1},{x:k,y:I-1},{width:L,height:1}),a.RGBAImage.copy(O,v,{x:0,y:0},{x:k,y:I+q},{width:L,height:1}),a.RGBAImage.copy(O,v,{x:L-1,y:0},{x:k-1,y:I},{width:1,height:q}),a.RGBAImage.copy(O,v,{x:0,y:0},{x:k+L,y:I},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const u of s){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const g=this.images[u];ye(g)&&this.updateImage(u,g)}}}const Fe=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(f,s){return function([u,g,v]){const b=a.degToRad(g+90),E=a.degToRad(v);return{x:u*Math.cos(b)*Math.sin(E),y:u*Math.sin(b)*Math.sin(E),z:u*Math.cos(E),azimuthal:g,polar:v}}(f.expression.evaluate(s))}interpolate(f,s,u){return{x:a.number(f.x,s.x,u),y:a.number(f.y,s.y,u),z:a.number(f.z,s.z,u),azimuthal:a.number(f.azimuthal,s.azimuthal,u),polar:a.number(f.polar,s.polar,u)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)});class be extends a.Evented{constructor(s){super(),this._transitionable=new a.Transitionable(Fe),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,u={}){if(!this._validate(a.validateLight,s,u))for(const g in s){const v=s[g];a.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),v):this._transitionable.setValue(g,v)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,u,g){return(!g||g.validate!==!1)&&a.emitValidationErrors(this,s.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}const we=new a.Properties({source:new a.DataConstantProperty(a.spec.terrain.source),exaggeration:new a.DataConstantProperty(a.spec.terrain.exaggeration)});let ue=class extends a.Evented{constructor(f,s){super(),this._transitionable=new a.Transitionable(we),this.set(f),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=s}get(){return this._transitionable.serialize()}set(f){for(const s in f){const u=f[s];a.endsWith(s,"-transition")?this._transitionable.setTransition(s.slice(0,-11),u):this._transitionable.setValue(s,u)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}};function Be(f,s,u,g){const v=a.smoothstep(45,65,u),[b,E]=Ae(f,g),k=a.length(s);let I=1-Math.min(1,Math.exp((k-b)/(E-b)*-6));return I*=I*I,I=Math.min(1,1.00747*I),I*v*f.alpha}function Ae(f,s){const u=.5/Math.tan(.5*s);return[f.range[0]+u,f.range[1]+u]}const Se=new a.Properties({range:new a.DataConstantProperty(a.spec.fog.range),color:new a.DataConstantProperty(a.spec.fog.color),"high-color":new a.DataConstantProperty(a.spec.fog["high-color"]),"space-color":new a.DataConstantProperty(a.spec.fog["space-color"]),"horizon-blend":new a.DataConstantProperty(a.spec.fog["horizon-blend"]),"star-intensity":new a.DataConstantProperty(a.spec.fog["star-intensity"])});class ke extends a.Evented{constructor(s,u){super(),this._transitionable=new a.Transitionable(Se),this.set(s),this._transitioning=this._transitionable.untransitioned(),this._transform=u}get state(){const s=this._transform,u=s.projection.name==="globe",g=a.globeToMercatorTransition(s.zoom),v=this.properties.get("range"),b=[.5,3];return{range:u?[a.number(b[0],v[0],g),a.number(b[1],v[1],g)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(s,u={}){if(!this._validate(a.validateFog,s,u)){for(const g of Object.keys(a.spec.fog))s&&s[g]===void 0&&(s[g]=a.spec.fog[g].default);for(const g in s){const v=s[g];a.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),v):this._transitionable.setValue(g,v)}}}getOpacity(s){if(!this._transform.projection.supportsFog)return 0;const u=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.smoothstep(45,65,s))*u.a}getOpacityAtLatLng(s,u){return this._transform.projection.supportsFog?function(g,v,b){const E=a.MercatorCoordinate.fromLngLat(v),k=b.elevation?b.elevation.getAtPointOrZero(E):0,I=[E.x,E.y,k];return a.transformMat4(I,I,b.mercatorFogMatrix),Be(g,I,b.pitch,b._fov)}(this.state,s,u):0}getFovAdjustedRange(s){return this._transform.projection.supportsFog?Ae(this.state,s):[0,1]}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,u,g){return(!g||g.validate!==!1)&&a.emitValidationErrors(this,s.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class Ne{constructor(s,u){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const g=this.workerPool.acquire(this.id);for(let v=0;v<g.length;v++){const b=new Ne.Actor(g[v],u,this.id);b.name=`Worker ${v}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,u,g){a.asyncAll(this.actors,(v,b)=>{v.send(s,u,b)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}function nt(f,s,u){return s*(a.EXTENT/(f.tileSize*Math.pow(2,u-f.tileID.overscaledZ)))}Ne.Actor=a.Actor;class vt{constructor(s,u,g,v){this.screenBounds=s,this.cameraPoint=u,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(s,u){let g,v;if(s instanceof a.Point||typeof s[0]=="number"){const b=a.Point.convert(s);g=[b],v=u.isPointAboveHorizon(b)}else{const b=a.Point.convert(s[0]),E=a.Point.convert(s[1]);g=[b,E],v=a.polygonizeBounds(b,E).every(k=>u.isPointAboveHorizon(k))}return new vt(g,u.getCameraPoint(),v,u)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(s){return a.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],s)}bufferedCameraGeometry(s){const u=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new a.Point(1,1)):this.screenBounds[1],v=a.polygonizeBounds(u,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>u.x&&this.cameraPoint.x<g.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?v[2]=this.cameraPoint:this.cameraPoint.x<=u.x&&(v[3]=this.cameraPoint)),a.bufferConvexPolygon(v,s)}bufferedCameraGeometryGlobe(s){const u=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new a.Point(1,1)):this.screenBounds[1],v=a.polygonizeBounds(u,g,s),b=this.cameraPoint.clone();switch(3*((b.y>u.y)+(b.y>g.y))+((b.x>u.x)+(b.x>g.x))){case 0:v[0]=b,v[4]=b.clone();break;case 1:v.splice(1,0,b);break;case 2:v[1]=b;break;case 3:v.splice(4,0,b);break;case 5:v.splice(2,0,b);break;case 6:v[3]=b;break;case 7:v.splice(3,0,b);break;case 8:v[2]=b}return v}containsTile(s,u,g,v=0){const b=s.queryPadding/u._pixelsPerMercatorPixel+1,E=g?this._bufferedCameraMercator(b,u):this._bufferedScreenMercator(b,u);let k=s.tileID.wrap+(E.unwrapped?v:0);const I=E.polygon.map(pe=>a.getTilePoint(s.tileTransform,pe,k));if(!a.polygonIntersectsBox(I,0,0,a.EXTENT,a.EXTENT))return;k=s.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const O=this.screenGeometryMercator.polygon.map(pe=>a.getTileVec3(s.tileTransform,pe,k)),L=O.map(pe=>new a.Point(pe[0],pe[1])),q=u.getFreeCameraOptions().position||new a.MercatorCoordinate(0,0,0),te=a.getTileVec3(s.tileTransform,q,k),se=O.map(pe=>{const Z=a.sub(pe,pe,te);return a.normalize(Z,Z),new a.Ray(te,Z)}),ce=nt(s,1,u.zoom)*u._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:L,tilespaceRays:se,bufferedTilespaceGeometry:I,bufferedTilespaceBounds:(le=a.getBounds(I),le.min.x=a.clamp(le.min.x,0,a.EXTENT),le.min.y=a.clamp(le.min.y,0,a.EXTENT),le.max.x=a.clamp(le.max.x,0,a.EXTENT),le.max.y=a.clamp(le.max.y,0,a.EXTENT),le),tile:s,tileID:s.tileID,pixelToTileUnitsFactor:ce};var le}_bufferedScreenMercator(s,u){const g=xt(s);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let v;return v=u.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(s),u):{polygon:this.bufferedScreenGeometry(s).map(b=>u.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[g]=v,v}}_bufferedCameraMercator(s,u){const g=xt(s);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let v;return v=u.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(s),u):{polygon:this.bufferedCameraGeometry(s).map(b=>u.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[g]=v,v}}_projectAndResample(s,u){const g=function(b,E){const k=a.multiply([],E.pixelMatrix,E.globeMatrix),I=[0,-a.GLOBE_RADIUS,0,1],O=[0,a.GLOBE_RADIUS,0,1],L=[0,0,0,1];a.transformMat4$1(I,I,k),a.transformMat4$1(O,O,k),a.transformMat4$1(L,L,k);const q=new a.Point(I[0]/I[3],I[1]/I[3]),te=new a.Point(O[0]/O[3],O[1]/O[3]),se=a.polygonContainsPoint(b,q)&&I[3]<L[3],ce=a.polygonContainsPoint(b,te)&&O[3]<L[3];if(!se&&!ce)return null;const le=function(ze,Ve,Ue){for(let Ye=1;Ye<ze.length;Ye++){const kt=rt(Ve.pointCoordinate3D(ze[Ye-1]).x),qe=rt(Ve.pointCoordinate3D(ze[Ye]).x);if(Ue<0){if(kt<qe)return{idx:Ye,t:-kt/(qe-1-kt)}}else if(qe<kt)return{idx:Ye,t:(1-kt)/(qe+1-kt)}}return null}(b,E,se?-1:1);if(!le)return null;const{idx:pe,t:Z}=le;let ie=pe>1?gt(b.slice(0,pe),E):[],ve=pe<b.length?gt(b.slice(pe),E):[];ie=ie.map(ze=>new a.Point(rt(ze.x),ze.y)),ve=ve.map(ze=>new a.Point(rt(ze.x),ze.y));const xe=[...ie];xe.length===0&&xe.push(ve[ve.length-1]);const De=a.number(xe[xe.length-1].y,(ve.length===0?ie[0]:ve[0]).y,Z);let Re;return Re=se?[new a.Point(0,De),new a.Point(0,0),new a.Point(1,0),new a.Point(1,De)]:[new a.Point(1,De),new a.Point(1,1),new a.Point(0,1),new a.Point(0,De)],xe.push(...Re),ve.length===0?xe.push(ie[0]):xe.push(...ve),{polygon:xe.map(ze=>new a.MercatorCoordinate(ze.x,ze.y)),unwrapped:!1}}(s,u);if(g)return g;const v=function(b,E){let k=!1,I=-1/0,O=0;for(let q=0;q<b.length-1;q++)b[q].x>I&&(I=b[q].x,O=q);for(let q=0;q<b.length-1;q++){const te=(O+q)%(b.length-1),se=b[te],ce=b[te+1];Math.abs(se.x-ce.x)>.5&&(se.x<ce.x?(se.x+=1,te===0&&(b[b.length-1].x+=1)):(ce.x+=1,te+1===b.length-1&&(b[0].x+=1)),k=!0)}const L=a.mercatorXfromLng(E.center.lng);return k&&L<Math.abs(L-1)&&b.forEach(q=>{q.x-=1}),{polygon:b,unwrapped:k}}(gt(s,u).map(b=>new a.Point(rt(b.x),b.y)),u);return{polygon:v.polygon.map(b=>new a.MercatorCoordinate(b.x,b.y)),unwrapped:v.unwrapped}}}function gt(f,s){return a.resample(f,u=>{const g=s.pointCoordinate3D(u);u.x=g.x,u.y=g.y},1/256)}function rt(f){return f<0?1+f%1:f%1}function xt(f){return 100*f|0}function ht(f,s,u,g,v){const b=function(E,k){if(E)return v(E);if(k){f.url&&k.tiles&&f.tiles&&delete f.tiles;const I=a.pick(a.extend(k,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);k.vector_layers&&(I.vectorLayers=k.vector_layers,I.vectorLayerIds=I.vectorLayers.map(O=>O.id)),I.tiles=s.canonicalizeTileset(I,f.url),v(null,I)}};return f.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(f.url,null,u,g),a.ResourceType.Source),b):a.exported.frame(()=>b(null,f))}class mt{constructor(s,u,g){this.bounds=a.LngLatBounds.convert(this.validateBounds(s)),this.minzoom=u||0,this.maxzoom=g||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const u=Math.pow(2,s.z),g=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*u),v=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*u),b=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*u),E=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*u);return s.x>=g&&s.x<b&&s.y>=v&&s.y<E}}class Ot{constructor(s,u,g){this.context=s;const v=s.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||u.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Nt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class at{constructor(s,u,g,v){this.length=u.length,this.attributes=g,this.itemSize=u.bytesPerElement,this.dynamicDraw=v,this.context=s;const b=s.gl;this.buffer=b.createBuffer(),s.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||u.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,u){for(let g=0;g<this.attributes.length;g++){const v=u.attributes[this.attributes[g].name];v!==void 0&&s.enableVertexAttribArray(v)}}setVertexAttribPointers(s,u,g){for(let v=0;v<this.attributes.length;v++){const b=this.attributes[v],E=u.attributes[b.name];E!==void 0&&s.vertexAttribPointer(E,b.components,s[Nt[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Je{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class it extends Je{getDefault(){return a.Color.transparent}set(s){const u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class St extends Je{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Gt extends Je{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class He extends Je{getDefault(){return[!0,!0,!0,!0]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Vt extends Je{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class lt extends Je{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class jt extends Je{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const u=this.current;(s.func!==u.func||s.ref!==u.ref||s.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Ut extends Je{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class $t extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=s,this.dirty=!1}}class Lt extends Je{getDefault(){return[0,1]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class un extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=s,this.dirty=!1}}class kn extends Je{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Hn extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.BLEND):u.disable(u.BLEND),this.current=s,this.dirty=!1}}class dn extends Je{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class En extends Je{getDefault(){return a.Color.transparent}set(s){const u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Tn extends Je{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class sn extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=s,this.dirty=!1}}class an extends Je{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class ln extends Je{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}let An,Ht=class extends Je{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}};class nn extends Je{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class bn extends Je{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class $n extends Je{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Zn extends Je{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Ar extends Je{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Nr extends Je{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class ge extends Je{getDefault(){return null}set(s){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class J extends Je{constructor(s){super(s),this.vao=s.extVertexArrayObject}getDefault(){return null}set(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)}}class ee extends Je{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class _e extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Me extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Le extends Je{constructor(s,u){super(s),this.context=s,this.parent=u}getDefault(){return null}}class We extends Le{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class je extends Le{attachment(){return this.gl.DEPTH_ATTACHMENT}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,this.attachment(),u.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Oe extends je{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ge{constructor(s,u,g,v){this.context=s,this.width=u,this.height=g;const b=this.framebuffer=s.gl.createFramebuffer();this.colorAttachment=new We(s,b),v&&(this.depthAttachment=new je(s,b))}destroy(){const s=this.context.gl,u=this.colorAttachment.get();if(u&&s.deleteTexture(u),this.depthAttachment){const g=this.depthAttachment.get();g&&s.deleteRenderbuffer(g)}s.deleteFramebuffer(this.framebuffer)}}class bt{constructor(s,u=!1){if(this.gl=s,this.isWebGL2=u,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),u){const g=s;this.extVertexArrayObject={createVertexArrayOES:g.createVertexArray.bind(s),deleteVertexArrayOES:g.deleteVertexArray.bind(s),bindVertexArrayOES:g.bindVertexArray.bind(s)}}this.clearColor=new it(this),this.clearDepth=new St(this),this.clearStencil=new Gt(this),this.colorMask=new He(this),this.depthMask=new Vt(this),this.stencilMask=new lt(this),this.stencilFunc=new jt(this),this.stencilOp=new Ut(this),this.stencilTest=new $t(this),this.depthRange=new Lt(this),this.depthTest=new un(this),this.depthFunc=new kn(this),this.blend=new Hn(this),this.blendFunc=new dn(this),this.blendColor=new En(this),this.blendEquation=new Tn(this),this.cullFace=new sn(this),this.cullFaceSide=new an(this),this.frontFace=new ln(this),this.program=new Ht(this),this.activeTexture=new nn(this),this.viewport=new bn(this),this.bindFramebuffer=new $n(this),this.bindRenderbuffer=new Zn(this),this.bindTexture=new Ar(this),this.bindVertexBuffer=new Nr(this),this.bindElementBuffer=new ge(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new J(this),this.pixelStoreUnpack=new ee(this),this.pixelStoreUnpackPremultiplyAlpha=new _e(this),this.pixelStoreUnpackFlipY=new Me(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=s.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=s.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=s.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),u||(this.extTextureHalfFloat=s.getExtension("OES_texture_half_float")),(u||this.extTextureHalfFloat&&s.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=u||s.getExtension("OES_standard_derivatives"),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,u){return new Ot(this,s,u)}createVertexBuffer(s,u,g){return new at(this,s,u,g)}createRenderbuffer(s,u,g){const v=this.gl,b=v.createRenderbuffer();return this.bindRenderbuffer.set(b),v.renderbufferStorage(v.RENDERBUFFER,s,u,g),this.bindRenderbuffer.set(null),b}createFramebuffer(s,u,g){return new Ge(this,s,u,g)}clear({color:s,depth:u,stencil:g}){const v=this.gl;let b=0;s&&(b|=v.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(b|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),g!==void 0&&(b|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),v.clear(b)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){w(s.blendFunction,a.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class zt extends a.Evented{constructor(s,u,g,v){if(super(),this.id=s,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(u,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new a.DedupedRequest}load(s){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"}));const u=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map._worldview;this._tileJSONRequest=ht(this._options,this.map._requestManager,u,g,(v,b)=>{this._tileJSONRequest=null,this._loaded=!0,v?(u&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${u}`),g&&g.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new a.ErrorEvent(v))):b&&(a.extend(this,b),b.bounds&&(this.tileBounds=new mt(b.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(v)})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}loadTile(s,u){const g=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(g,a.ResourceType.Tile),data:void 0,uid:s.uid,tileID:s.tileID,tileZoom:s.tileZoom,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:s.isSymbolTile};if(v.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired")s.state==="loading"?s.reloadCallback=u:s.request=s.actor.send("reloadTile",v,b.bind(this));else if(s.actor=this._tileWorkers[g]=this._tileWorkers[g]||this.dispatcher.getActor(),this.dispatcher.ready)s.request=s.actor.send("loadTile",v,b.bind(this),void 0,!0);else{const E=a.loadVectorTile.call({deduped:this._deduped},v,(k,I)=>{k||!I?b.call(this,k):(v.data={cacheControl:I.cacheControl,expires:I.expires,rawData:I.rawData.slice(0)},s.actor&&s.actor.send("loadTile",v,b.bind(this),void 0,!0))},!0);s.request={cancel:E}}function b(E,k){return delete s.request,s.aborted?u(null):E&&E.status!==404?u(E):(k&&k.resourceTiming&&(s.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&s.setExpiryData(k),s.loadVectorData(k,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id})}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Mt extends a.Evented{constructor(s,u,g,v){super(),this.id=s,this.dispatcher=g,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},u),a.extend(this,a.pick(u,["url","scheme","tileSize"]))}load(s){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ht(this._options,this.map._requestManager,null,null,(u,g)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new a.ErrorEvent(u)):g&&(a.extend(this,g),g.bounds&&(this.tileBounds=new mt(g.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(g.tiles),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(u)})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,u){const g=a.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);s.request=a.getImage(this.map._requestManager.transformRequest(v,a.ResourceType.Tile),(b,E,k,I)=>(delete s.request,s.aborted?(s.state="unloaded",u(null)):b?(s.state="errored",u(b)):E?(this.map._refreshExpiredTiles&&s.setExpiryData({cacheControl:k,expires:I}),s.setTexture(E,this.map.painter),s.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),void u(null)):u(null)))}static loadTileData(s,u,g){s.setTexture(u,g)}static unloadTileData(s,u){s.texture&&u.saveTileTexture(s.texture)}abortTile(s,u){s.request&&(s.request.cancel(),delete s.request),u()}unloadTile(s,u){s.texture&&this.map.painter.saveTileTexture(s.texture),u()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Mn(f,s,u,g,v,b,E,k){const I=[f,u,v,s,g,b,1,1,1],O=[E,k,1],L=a.adjoint([],I),[q,te,se]=a.transformMat3(O,O,a.transpose(L,L));return a.multiply$1(I,[q,0,0,0,te,0,0,0,se],I)}class Fn extends a.Evented{constructor(s,u,g,v){super(),this.id=s,this.dispatcher=g,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=u,this._dirty=!1}load(s,u){this._loaded=u||!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(g,v)=>{if(this._imageRequest=null,this._loaded=!0,g)this.fire(new a.ErrorEvent(g));else if(v){const{HTMLImageElement:b}=a.window;this.image=v instanceof b?a.exported.getImageData(v):v,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading()}})}loaded(){return this._loaded}updateImage(s){return this.image&&s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(s){this.coordinates=s,this._boundsArray=void 0;const u=s.map(a.MercatorCoordinate.fromLngLat);return this.tileID=function(g){let v=1/0,b=1/0,E=-1/0,k=-1/0;for(const q of g)v=Math.min(v,q.x),b=Math.min(b,q.y),E=Math.max(E,q.x),k=Math.max(k,q.y);const I=Math.max(E-v,k-b),O=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),L=Math.pow(2,O);return new a.CanonicalTileID(O,Math.floor((v+E)/2*L),Math.floor((b+k)/2*L))}(u),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(s){for(const I in this.tiles){const O=this.tiles[I];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture)}if(this._boundsArray)return;const u=a.tileTransform(this.tileID,this.map.transform.projection),[g,v,b,E]=this.coordinates.map(I=>{const O=u.projection.project(I[0],I[1]);return a.getTilePoint(u,O)._round()});this.perspectiveTransform=function(I,O,L,q,te,se,ce,le,pe,Z){const ie=Mn(0,0,I,0,0,O,I,O),ve=Mn(L,q,te,se,ce,le,pe,Z);return a.multiply$1(ve,a.adjoint(ie,ie),ve),[ve[6]/ve[8]*I/a.EXTENT,ve[7]/ve[8]*O/a.EXTENT]}(this.width,this.height,g.x,g.y,v.x,v.y,E.x,E.y,b.x,b.y);const k=this._boundsArray=new a.StructArrayLayout4i8;k.emplaceBack(g.x,g.y,0,0),k.emplaceBack(v.x,v.y,a.EXTENT,0),k.emplaceBack(E.x,E.y,0,a.EXTENT),k.emplaceBack(b.x,b.y,a.EXTENT,a.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=s.createVertexBuffer(k,a.boundsAttributes.members),this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,u=s.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new a.Texture(s,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(s)}loadTile(s,u){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},u(null)):(s.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Pn={vector:zt,raster:Mt,"raster-dem":class extends Mt{constructor(f,s,u,g){super(f,s,u,g),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}loadTile(f,s){const u=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(v,b){v&&(f.state="errored",s(v)),b&&(f.dem=b,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",s(null))}f.request=a.getImage(this.map._requestManager.transformRequest(u,a.ResourceType.Tile),function(v,b,E,k){if(delete f.request,f.aborted)f.state="unloaded",s(null);else if(v)f.state="errored",s(v);else if(b){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:E,expires:k});const I=a.window.ImageBitmap&&b instanceof a.window.ImageBitmap&&(An==null&&(An=a.window.OffscreenCanvas&&new a.window.OffscreenCanvas(1,1).getContext("2d")&&typeof a.window.createImageBitmap=="function"),An),O=1-(b.width-a.prevPowerOfTwo(b.width))/2;O<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const L=I?b:a.exported.getImageData(b,O),q={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:L,encoding:this.encoding,padding:O};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",q,g.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const s=f.canonical,u=Math.pow(2,s.z),g=(s.x-1+u)%u,v=s.x===0?f.wrap-1:f.wrap,b=(s.x+1+u)%u,E=s.x+1===u?f.wrap+1:f.wrap,k={};return k[new a.OverscaledTileID(f.overscaledZ,v,s.z,g,s.y).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,E,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(k[new a.OverscaledTileID(f.overscaledZ,v,s.z,g,s.y-1).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,f.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,E,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<u&&(k[new a.OverscaledTileID(f.overscaledZ,v,s.z,g,s.y+1).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,f.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,E,s.z,b,s.y+1).key]={backfilled:!1}),k}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends a.Evented{constructor(f,s,u,g){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=u.getActor(),this.setEventedParent(g),this._data=s.data,this._options=a.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const v=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*v,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*v,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:a.EXTENT,radius:(s.clusterRadius!==void 0?s.clusterRadius:50)*v,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},s),this}getClusterChildren(f,s){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},s),this}getClusterLeaves(f,s,u,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:s,offset:u},g),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=a.extend({},this.workerOptions),s=this._data;typeof s=="string"?(f.request=this.map._requestManager.transformRequest(a.exported.resolveURL(s),a.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(s),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(u,g)=>{if(this._loaded=!0,this._pendingLoad=null,u)this.fire(new a.ErrorEvent(u));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&g&&g.resourceTiming&&g.resourceTiming[this.id]&&(v.resourceTiming=g.resourceTiming[this.id]),this.fire(new a.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,s){const u=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(u,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(g,v)=>(delete f.request,f.unloadVectorData(),f.aborted?s(null):g?s(g):(f.loadVectorData(v,this.map.painter,u==="reloadTile"),s(null))),void 0,u==="loadTile")}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Fn{constructor(f,s,u,g){super(f,s,u,g),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const s of f.urls)this.urls.push(this.map._requestManager.transformRequest(s,a.ResourceType.Source).url);a.getVideo(this.urls,(s,u)=>{this._loaded=!0,s?this.fire(new a.ErrorEvent(s)):u&&(this.video=u,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const s=this.video.seekable;f<s.start(0)||f>s.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,s=f.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(f,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Fn,canvas:class extends Fn{constructor(f,s,u,g){super(f,s,u,g),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(b=>typeof b!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(s,this.canvas,s.gl.RGBA,{premultiply:!0}),this._prepareData(s)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends a.Evented{constructor(f,s,u,g){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=u,this._implementation=s,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new mt(this._implementation.bounds,this.minzoom,this.maxzoom)),s.update=this._update.bind(this),s.clearTiles=this._clearTiles.bind(this),s.coveringTiles=this._coveringTiles.bind(this),a.extend(this,a.pick(s,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:s,y:u,z:g}=f.canonical;return this._implementation.hasTile({x:s,y:u,z:g})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,s){const{x:u,y:g,z:v}=f.tileID.canonical,b=new a.window.AbortController;f.request=Promise.resolve(this._implementation.loadTile({x:u,y:g,z:v},{signal:b.signal})).then(function(E){return delete f.request,f.aborted?(f.state="unloaded",s(null)):E===void 0?(f.state="errored",s(null)):E===null?(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",s(null)):function(k){return k instanceof a.window.ImageData||k instanceof a.window.HTMLCanvasElement||k instanceof a.window.ImageBitmap||k instanceof a.window.HTMLImageElement}(E)?(this.loadTileData(f,E),f.state="loaded",void s(null)):(f.state="errored",s(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(E=>{E.code!==20&&(f.state="errored",s(E))}),f.request.cancel=()=>b.abort()}loadTileData(f,s){Mt.loadTileData(f,s,this._map.painter)}unloadTileData(f){Mt.unloadTileData(f,this._map.painter)}unloadTile(f,s){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:u,y:g,z:v}=f.tileID.canonical;this._implementation.unloadTile({x:u,y:g,z:v})}s()}abortTile(f,s){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),s()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Dn=function(f,s,u,g){const v=new Pn[s.type](f,s,u,g);if(v.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${v.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],v),v};function Nn(f,s){const u=a.identity([]);return a.scale(u,u,[.5*f.width,.5*-f.height,1]),a.translate(u,u,[1,-1,0]),a.multiply(u,u,f.calculateProjMatrix(s.toUnwrapped())),Float32Array.from(u)}function sr(f,s,u,g,v,b,E,k=!1){const I=f.tilesIn(g,E,k);I.sort(Ur);const O=[];for(const q of I)O.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(s,u,f._state,q,v,b,Nn(f.transform,q.tile.tileID),k)});const L=function(q){const te={},se={};for(const ce of q){const le=ce.queryResults,pe=ce.wrappedTileID,Z=se[pe]=se[pe]||{};for(const ie in le){const ve=le[ie],xe=Z[ie]=Z[ie]||{},De=te[ie]=te[ie]||[];for(const Re of ve)xe[Re.featureIndex]||(xe[Re.featureIndex]=!0,De.push(Re))}}return te}(O);for(const q in L)L[q].forEach(te=>{const se=te.feature,ce=se.layer;ce&&ce.type!=="background"&&ce.type!=="sky"&&(se.source=ce.source,ce["source-layer"]&&(se.sourceLayer=ce["source-layer"]),se.state=se.id!==void 0?f.getFeatureState(ce["source-layer"],se.id):{})});return L}function _r(f,s){const u=f.getRenderableIds().map(b=>f.getTileByID(b)),g=[],v={};for(let b=0;b<u.length;b++){const E=u[b],k=E.tileID.canonical.key;v[k]||(v[k]=!0,E.querySourceFeatures(g,s))}return g}function Ur(f,s){const u=f.tileID,g=s.tileID;return u.overscaledZ-g.overscaledZ||u.canonical.y-g.canonical.y||u.wrap-g.wrap||u.canonical.x-g.canonical.x}function Qe(){return wl.workerClass!=null?new wl.workerClass:new a.window.Worker(wl.workerUrl)}const ot="mapboxgl_preloaded_worker_pool";class Jt{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Jt.workerCount;)this.workers.push(new Qe);return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ot]}numActive(){return Object.keys(this.active).length}}let hn;function Qn(){return hn||(hn=new Jt),hn}function hi(f,s){const u={};for(const g in f)g!=="ref"&&(u[g]=f[g]);return a.refProperties.forEach(g=>{g in s&&(u[g]=s[g])}),u}function Hr(f){f=f.slice();const s=Object.create(null);for(let u=0;u<f.length;u++)s[f[u].id]=f[u];for(let u=0;u<f.length;u++)"ref"in f[u]&&(f[u]=hi(f[u],s[f[u].ref]));return f}Jt.workerCount=2;const Un={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function il(f,s,u){u.push({command:Un.addSource,args:[f,s[f]]})}function ac(f,s,u){s.push({command:Un.removeSource,args:[f]}),u[f]=!0}function Dh(f,s,u,g){ac(f,u,g),il(f,s,u)}function ku(f,s,u){let g;for(g in f[u])if(f[u].hasOwnProperty(g)&&g!=="data"&&!w(f[u][g],s[u][g]))return!1;for(g in s[u])if(s[u].hasOwnProperty(g)&&g!=="data"&&!w(f[u][g],s[u][g]))return!1;return!0}function Zo(f,s,u,g,v,b){let E;for(E in s=s||{},f=f||{})f.hasOwnProperty(E)&&(w(f[E],s[E])||u.push({command:b,args:[g,E,s[E],v]}));for(E in s)s.hasOwnProperty(E)&&!f.hasOwnProperty(E)&&(w(f[E],s[E])||u.push({command:b,args:[g,E,s[E],v]}))}function xs(f){return f.id}function zh(f,s){return f[s.id]=s,f}class Rh{constructor(s,u){this.reset(s,u)}reset(s,u){this.points=s||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.clamp(s,0,1);let u=1,g=this._distances[u];const v=s*this.paddedLength+this.padding;for(;g<v&&u<this._distances.length;)g=this._distances[++u];const b=u-1,E=this._distances[b],k=g-E,I=k>0?(v-E)/k:0;return this.points[b].mult(1-I).add(this.points[u].mult(I))}}class Sa{constructor(s,u,g){const v=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(s/g),this.yCellCount=Math.ceil(u/g);for(let E=0;E<this.xCellCount*this.yCellCount;E++)v.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=u,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,u,g,v,b){this._forEachCell(u,g,v,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(v),this.bboxes.push(b)}insertCircle(s,u,g,v){this._forEachCell(u-v,g-v,u+v,g+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(u),this.circles.push(g),this.circles.push(v)}_insertBoxCell(s,u,g,v,b,E){this.boxCells[b].push(E)}_insertCircleCell(s,u,g,v,b,E){this.circleCells[b].push(E)}_query(s,u,g,v,b,E){if(g<0||s>this.width||v<0||u>this.height)return!b&&[];const k=[];if(s<=0&&u<=0&&this.width<=g&&this.height<=v){if(b)return!0;for(let I=0;I<this.boxKeys.length;I++)k.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(let I=0;I<this.circleKeys.length;I++){const O=this.circles[3*I],L=this.circles[3*I+1],q=this.circles[3*I+2];k.push({key:this.circleKeys[I],x1:O-q,y1:L-q,x2:O+q,y2:L+q})}return E?k.filter(E):k}return this._forEachCell(s,u,g,v,this._queryCell,k,{hitTest:b,seenUids:{box:{},circle:{}}},E),b?k.length>0:k}_queryCircle(s,u,g,v,b){const E=s-g,k=s+g,I=u-g,O=u+g;if(k<0||E>this.width||O<0||I>this.height)return!v&&[];const L=[];return this._forEachCell(E,I,k,O,this._queryCellCircle,L,{hitTest:v,circle:{x:s,y:u,radius:g},seenUids:{box:{},circle:{}}},b),v?L.length>0:L}query(s,u,g,v,b){return this._query(s,u,g,v,!1,b)}hitTest(s,u,g,v,b){return this._query(s,u,g,v,!0,b)}hitTestCircle(s,u,g,v){return this._queryCircle(s,u,g,!0,v)}_queryCell(s,u,g,v,b,E,k,I){const O=k.seenUids,L=this.boxCells[b];if(L!==null){const te=this.bboxes;for(const se of L)if(!O.box[se]){O.box[se]=!0;const ce=4*se;if(s<=te[ce+2]&&u<=te[ce+3]&&g>=te[ce+0]&&v>=te[ce+1]&&(!I||I(this.boxKeys[se]))){if(k.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[se],x1:te[ce],y1:te[ce+1],x2:te[ce+2],y2:te[ce+3]})}}}const q=this.circleCells[b];if(q!==null){const te=this.circles;for(const se of q)if(!O.circle[se]){O.circle[se]=!0;const ce=3*se;if(this._circleAndRectCollide(te[ce],te[ce+1],te[ce+2],s,u,g,v)&&(!I||I(this.circleKeys[se]))){if(k.hitTest)return E.push(!0),!0;{const le=te[ce],pe=te[ce+1],Z=te[ce+2];E.push({key:this.circleKeys[se],x1:le-Z,y1:pe-Z,x2:le+Z,y2:pe+Z})}}}}}_queryCellCircle(s,u,g,v,b,E,k,I){const O=k.circle,L=k.seenUids,q=this.boxCells[b];if(q!==null){const se=this.bboxes;for(const ce of q)if(!L.box[ce]){L.box[ce]=!0;const le=4*ce;if(this._circleAndRectCollide(O.x,O.y,O.radius,se[le+0],se[le+1],se[le+2],se[le+3])&&(!I||I(this.boxKeys[ce])))return E.push(!0),!0}}const te=this.circleCells[b];if(te!==null){const se=this.circles;for(const ce of te)if(!L.circle[ce]){L.circle[ce]=!0;const le=3*ce;if(this._circlesCollide(se[le],se[le+1],se[le+2],O.x,O.y,O.radius)&&(!I||I(this.circleKeys[ce])))return E.push(!0),!0}}}_forEachCell(s,u,g,v,b,E,k,I){const O=this._convertToXCellCoord(s),L=this._convertToYCellCoord(u),q=this._convertToXCellCoord(g),te=this._convertToYCellCoord(v);for(let se=O;se<=q;se++)for(let ce=L;ce<=te;ce++)if(b.call(this,s,u,g,v,this.xCellCount*ce+se,E,k,I))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,u,g,v,b,E){const k=v-s,I=b-u,O=g+E;return O*O>k*k+I*I}_circleAndRectCollide(s,u,g,v,b,E,k){const I=(E-v)/2,O=Math.abs(s-(v+I));if(O>I+g)return!1;const L=(k-b)/2,q=Math.abs(u-(b+L));if(q>L+g)return!1;if(O<=I||q<=L)return!0;const te=O-I,se=q-L;return te*te+se*se<=g*g}}const bs={unknown:0,flipRequired:1,flipNotRequired:2},lc=Math.tan(85*Math.PI/180);function ct(f,s,u,g,v,b,E){const k=a.create();if(u)if(b.name==="globe"){const I=a.calculateGlobeLabelMatrix(v,s);a.multiply(k,k,I)}else{const I=ae([],E);k[0]=I[0],k[1]=I[1],k[4]=I[2],k[5]=I[3],g||a.rotateZ(k,k,v.angle)}else a.multiply(k,v.labelPlaneMatrix,f);return k}function ws(f,s,u,g,v,b,E){const k=ct(f,s,u,g,v,b,E);return b.name==="globe"&&u||(k[2]=k[6]=k[10]=k[14]=0),k}function Kr(f,s,u,g,v,b,E){if(u){if(b.name==="globe"){const k=ct(f,s,u,g,v,b,E);return a.invert(k,k),a.multiply(k,f,k),k}{const k=a.clone(f),I=a.identity([]);return I[0]=E[0],I[1]=E[1],I[4]=E[2],I[5]=E[3],a.multiply(k,k,I),g||a.rotateZ(k,k,-v.angle),k}}return v.glCoordMatrix}function fi(f,s,u,g){const v=[f,s,u,1];u?a.transformMat4$1(v,v,g):Wn(v,v,g);const b=v[3];return v[0]/=b,v[1]/=b,v[2]/=b,v}function Wm(f,s){return Math.min(.5+f/s*.5,1.5)}function Xo(f,s){const u=f[0]/f[3],g=f[1]/f[3];return u>=-s[0]&&u<=s[0]&&g>=-s[1]&&g<=s[1]}function Lh(f,s,u,g,v,b,E,k,I,O){const L=u.transform,q=g?f.textSizeData:f.iconSizeData,te=a.evaluateSizeForZoom(q,u.transform.zoom),se=L.projection.name==="globe",ce=[256/u.width*2+1,256/u.height*2+1],le=g?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;le.clear();let pe=null;se&&(pe=g?f.text.globeExtVertexArray:f.icon.globeExtVertexArray);const Z=f.lineVertexArray,ie=g?f.text.placedSymbolArray:f.icon.placedSymbolArray,ve=u.transform.width/u.transform.height;let xe,De=!1;for(let Re=0;Re<ie.length;Re++){const ze=ie.get(Re),{numGlyphs:Ve,writingMode:Ue}=ze;if(Ue!==a.WritingMode.vertical||De||xe===a.WritingMode.horizontal||(De=!0),xe=Ue,(ze.hidden||Ue===a.WritingMode.vertical)&&!De){Mo(Ve,le);continue}De=!1;const Ye=new a.Point(ze.tileAnchorX,ze.tileAnchorY);let{x:kt,y:qe,z:ft}=L.projection.projectTilePoint(Ye.x,Ye.y,O.canonical);if(I){const[In,rn,wn]=I(Ye);kt+=In,qe+=rn,ft+=wn}const et=[kt,qe,ft,1];if(a.transformMat4$1(et,et,s),!Xo(et,ce)){Mo(Ve,le);continue}const Et=Wm(u.transform.cameraToCenterDistance,et[3]),Xe=a.evaluateSizeForFeature(q,te,ze),pt=E?Xe/Et:Xe*Et,It=fi(kt,qe,ft,v);if(It[3]<=0){Mo(Ve,le);continue}let wt={};const At=E?null:I,pn=Kt(ze,pt,!1,k,s,v,b,f.glyphOffsetArray,Z,le,pe,It,Ye,wt,ve,At,L.projection,O,E);De=pn.useVertical,At&&pn.needsFlipping&&(wt={}),(pn.notEnoughRoom||De||pn.needsFlipping&&Kt(ze,pt,!0,k,s,v,b,f.glyphOffsetArray,Z,le,pe,It,Ye,wt,ve,At,L.projection,O,E).notEnoughRoom)&&Mo(Ve,le)}g?(f.text.dynamicLayoutVertexBuffer.updateData(le),pe&&f.text.globeExtVertexBuffer.updateData(pe)):(f.icon.dynamicLayoutVertexBuffer.updateData(le),pe&&f.icon.globeExtVertexBuffer.updateData(pe))}function Gm(f,s,u,g,v,b,E,k,I,O,L,q,te,se,ce,le){const{lineStartIndex:pe,glyphStartIndex:Z,segment:ie}=k,ve=Z+k.numGlyphs,xe=pe+k.lineLength,De=s.getoffsetX(Z),Re=s.getoffsetX(ve-1),ze=eo(f*De,u,g,v,b,E,ie,pe,xe,I,O,L,q,te,!0,se,ce,le);if(!ze)return null;const Ve=eo(f*Re,u,g,v,b,E,ie,pe,xe,I,O,L,q,te,!0,se,ce,le);return Ve?{first:ze,last:Ve}:null}function ol(f,s,u,g){return f===a.WritingMode.horizontal&&Math.abs(g)>Math.abs(u)?{useVertical:!0}:f===a.WritingMode.vertical?g>0?{needsFlipping:!0}:null:s!==bs.unknown&&function(v,b){return v===0||Math.abs(b/v)>lc}(u,g)?s===bs.flipRequired?{needsFlipping:!0}:null:u<0?{needsFlipping:!0}:null}function Kt(f,s,u,g,v,b,E,k,I,O,L,q,te,se,ce,le,pe,Z,ie){const ve=s/24,xe=f.lineOffsetX*ve,De=f.lineOffsetY*ve,{lineStartIndex:Re,glyphStartIndex:ze,numGlyphs:Ve,segment:Ue,writingMode:Ye,flipState:kt}=f,qe=Re+f.lineLength,ft=et=>{if(L){const[It,wt,At]=et.up,pn=O.length;a.updateGlobeVertexNormal(L,pn+0,It,wt,At),a.updateGlobeVertexNormal(L,pn+1,It,wt,At),a.updateGlobeVertexNormal(L,pn+2,It,wt,At),a.updateGlobeVertexNormal(L,pn+3,It,wt,At)}const[Et,Xe,pt]=et.point;a.addDynamicAttributes(O,Et,Xe,pt,et.angle)};if(Ve>1){const et=Gm(ve,k,xe,De,u,q,te,f,I,b,se,le,!1,pe,Z,ie);if(!et)return{notEnoughRoom:!0};if(g&&!u){let[Et,Xe,pt]=et.first.point,[It,wt,At]=et.last.point;[Et,Xe]=fi(Et,Xe,pt,E),[It,wt]=fi(It,wt,At,E);const pn=ol(Ye,kt,(It-Et)*ce,wt-Xe);if(f.flipState=pn&&pn.needsFlipping?bs.flipRequired:bs.flipNotRequired,pn)return pn}ft(et.first);for(let Et=ze+1;Et<ze+Ve-1;Et++){const Xe=eo(ve*k.getoffsetX(Et),xe,De,u,q,te,Ue,Re,qe,I,b,se,le,!1,!1,pe,Z,ie);if(!Xe)return O.length-=4*(Et-ze),{notEnoughRoom:!0};ft(Xe)}ft(et.last)}else{if(g&&!u){const Et=fi(te.x,te.y,0,v),Xe=Re+Ue+1,pt=new a.Point(I.getx(Xe),I.gety(Xe)),It=fi(pt.x,pt.y,0,v),wt=It[3]>0?It:jn(te,pt,Et,1,v,void 0,pe,Z.canonical),At=ol(Ye,kt,(wt[0]-Et[0])*ce,wt[1]-Et[1]);if(f.flipState=At&&At.needsFlipping?bs.flipRequired:bs.flipNotRequired,At)return At}const et=eo(ve*k.getoffsetX(ze),xe,De,u,q,te,Ue,Re,qe,I,b,se,le,!1,!1,pe,Z,ie);if(!et)return{notEnoughRoom:!0};ft(et)}return{}}function qn(f,s,u,g,v){const{x:b,y:E,z:k}=g.projectTilePoint(f.x,f.y,s);if(!v)return fi(b,E,k,u);const[I,O,L]=v(f);return fi(b+I,E+O,k+L,u)}function jn(f,s,u,g,v,b,E,k){const I=qn(f.sub(s)._unit()._add(f),k,v,E,b);return a.sub(I,u,I),a.normalize(I,I),a.scaleAndAdd(I,u,I,g)}function eo(f,s,u,g,v,b,E,k,I,O,L,q,te,se,ce,le,pe,Z){const ie=g?f-s:f+s;let ve=ie>0?1:-1,xe=0;g&&(ve*=-1,xe=Math.PI),ve<0&&(xe+=Math.PI);let De=k+E+(ve>0?0:1)|0,Re=v,ze=v,Ve=0,Ue=0;const Ye=Math.abs(ie),kt=[],qe=[];let ft=b,et=ft;const Et=()=>jn(et,ft,ze,Ye-Ve+1,L,te,le,pe.canonical);for(;Ve+Ue<=Ye;){if(De+=ve,De<k||De>=I)return null;if(ze=Re,et=ft,kt.push(ze),se&&qe.push(et),ft=new a.Point(O.getx(De),O.gety(De)),Re=q[De],!Re){const wn=qn(ft,pe.canonical,L,le,te);Re=wn[3]>0?q[De]=wn:Et()}Ve+=Ue,Ue=a.distance(ze,Re)}ce&&te&&(q[De]&&(Re=Et(),Ue=a.distance(ze,Re)),q[De]=Re);const Xe=(Ye-Ve)/Ue,pt=ft.sub(et)._mult(Xe)._add(et),It=a.sub([],Re,ze),wt=a.scaleAndAdd([],ze,It,Xe);let At=[0,0,1],pn=It[0],In=It[1];if(Z&&(At=le.upVector(pe.canonical,pt.x,pt.y),At[0]!==0||At[1]!==0||At[2]!==1)){const wn=[At[2],0,-At[0]],Gn=a.cross([],At,wn);a.normalize(wn,wn),a.normalize(Gn,Gn),pn=a.dot(It,wn),In=a.dot(It,Gn)}if(u){const wn=a.cross([],At,It);a.normalize(wn,wn),a.scaleAndAdd(wt,wt,wn,u*ve)}const rn=xe+Math.atan2(In,pn);return kt.push(wt),se&&qe.push(pt),{point:wt,angle:rn,path:kt,tilePath:qe,up:At}}function Mo(f,s){const u=s.length,g=u+4*f;s.resize(g),s.float32.fill(-1/0,4*u,4*g)}function Wn(f,s,u){const g=s[0],v=s[1];return f[0]=u[0]*g+u[4]*v+u[12],f[1]=u[1]*g+u[5]*v+u[13],f[3]=u[3]*g+u[7]*v+u[15],f}const to=100;class cc{constructor(s,u,g=new Sa(s.width+200,s.height+200,25),v=new Sa(s.width+200,s.height+200,25)){this.transform=s,this.grid=g,this.ignoredGrid=v,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+to,this.screenBottomBoundary=s.height+to,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.fogState=u}placeCollisionBox(s,u,g,v,b,E,k,I){let O=g.projectedAnchorX,L=g.projectedAnchorY,q=g.projectedAnchorZ;const te=g.elevation,se=g.tileID,ce=s.getProjection();if(te&&se){const[Re,ze,Ve]=ce.upVector(se.canonical,g.tileAnchorX,g.tileAnchorY),Ue=ce.upVectorScale(se.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;O+=Re*te*Ue,L+=ze*te*Ue,q+=Ve*te*Ue}const le=this.projectAndGetPerspectiveRatio(k,O,L,q,g.tileID,ce.name==="globe"||!!te||this.transform.pitch>0,ce),pe=E*le.perspectiveRatio,Z=(g.x1*u+v.x-g.padding)*pe+le.point.x,ie=(g.y1*u+v.y-g.padding)*pe+le.point.y,ve=(g.x2*u+v.x+g.padding)*pe+le.point.x,xe=(g.y2*u+v.y+g.padding)*pe+le.point.y,De=le.perspectiveRatio<=.55||le.occluded;return!this.isInsideGrid(Z,ie,ve,xe)||!b&&this.grid.hitTest(Z,ie,ve,xe,I)||De?{box:[],offscreen:!1,occluded:le.occluded}:{box:[Z,ie,ve,xe],offscreen:this.isOffscreen(Z,ie,ve,xe),occluded:!1}}placeCollisionCircles(s,u,g,v,b,E,k,I,O,L,q,te,se,ce,le){const pe=[],Z=this.transform.elevation,ie=s.getProjection(),ve=Z?Z.getAtTileOffsetFunc(le,this.transform.center.lat,this.transform.worldSize,ie):null,xe=new a.Point(g.tileAnchorX,g.tileAnchorY);let{x:De,y:Re,z:ze}=ie.projectTilePoint(xe.x,xe.y,le.canonical);if(ve){const[pt,It,wt]=ve(xe);De+=pt,Re+=It,ze+=wt}const Ve=ie.name==="globe",Ue=this.projectAndGetPerspectiveRatio(k,De,Re,ze,le,Ve||!!Z||this.transform.pitch>0,ie),{perspectiveRatio:Ye}=Ue,kt=(q?E/Ye:E*Ye)/a.ONE_EM,qe=fi(De,Re,ze,I),ft=Ue.signedDistanceFromCamera>0?Gm(kt,b,g.lineOffsetX*kt,g.lineOffsetY*kt,!1,qe,xe,g,v,I,{},Z&&!q?ve:null,q&&!!Z,ie,le,q):null;let et=!1,Et=!1,Xe=!0;if(ft&&!Ue.occluded){const pt=.5*se*Ye+ce,It=new a.Point(-100,-100),wt=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),At=new Rh,{first:pn,last:In}=ft,rn=pn.path.length;let wn=[];for(let cn=rn-1;cn>=1;cn--)wn.push(pn.path[cn]);for(let cn=1;cn<In.path.length;cn++)wn.push(In.path[cn]);const Gn=2.5*pt;O&&(wn=wn.map(([cn,or,cr],ur)=>(ve&&!Ve&&(cr=ve(ur<rn-1?pn.tilePath[rn-1-ur]:In.tilePath[ur-rn+2])[2]),fi(cn,or,cr,O))),wn.some(cn=>cn[3]<=0)&&(wn=[]));let Vn=[];if(wn.length>0){let cn=1/0,or=-1/0,cr=1/0,ur=-1/0;for(const dr of wn)cn=Math.min(cn,dr[0]),cr=Math.min(cr,dr[1]),or=Math.max(or,dr[0]),ur=Math.max(ur,dr[1]);or>=It.x&&cn<=wt.x&&ur>=It.y&&cr<=wt.y&&(Vn=[wn.map(dr=>new a.Point(dr[0],dr[1]))],(cn<It.x||or>wt.x||cr<It.y||ur>wt.y)&&(Vn=a.clipLine(Vn,It.x,It.y,wt.x,wt.y)))}for(const cn of Vn){At.reset(cn,.25*pt);let or=0;or=At.length<=.5*pt?1:Math.ceil(At.paddedLength/Gn)+1;for(let cr=0;cr<or;cr++){const ur=cr/Math.max(or-1,1),dr=At.lerp(ur),Ii=dr.x+to,gi=dr.y+to;pe.push(Ii,gi,pt,0);const po=Ii-pt,Qo=gi-pt,zr=Ii+pt,hr=gi+pt;if(Xe=Xe&&this.isOffscreen(po,Qo,zr,hr),Et=Et||this.isInsideGrid(po,Qo,zr,hr),!u&&this.grid.hitTestCircle(Ii,gi,pt,te)&&(et=!0,!L))return{circles:[],offscreen:!1,collisionDetected:et,occluded:!1}}}}return{circles:!L&&et||!Et?[]:pe,offscreen:Xe,collisionDetected:et,occluded:Ue.occluded}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let g=1/0,v=1/0,b=-1/0,E=-1/0;for(const L of s){const q=new a.Point(L.x+to,L.y+to);g=Math.min(g,q.x),v=Math.min(v,q.y),b=Math.max(b,q.x),E=Math.max(E,q.y),u.push(q)}const k=this.grid.query(g,v,b,E).concat(this.ignoredGrid.query(g,v,b,E)),I={},O={};for(const L of k){const q=L.key;if(I[q.bucketInstanceId]===void 0&&(I[q.bucketInstanceId]={}),I[q.bucketInstanceId][q.featureIndex])continue;const te=[new a.Point(L.x1,L.y1),new a.Point(L.x2,L.y1),new a.Point(L.x2,L.y2),new a.Point(L.x1,L.y2)];a.polygonIntersectsPolygon(u,te)&&(I[q.bucketInstanceId][q.featureIndex]=!0,O[q.bucketInstanceId]===void 0&&(O[q.bucketInstanceId]=[]),O[q.bucketInstanceId].push(q.featureIndex))}return O}insertCollisionBox(s,u,g,v,b){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:v,collisionGroupID:b},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,u,g,v,b){const E=u?this.ignoredGrid:this.grid,k={bucketInstanceId:g,featureIndex:v,collisionGroupID:b};for(let I=0;I<s.length;I+=4)E.insertCircle(k,s[I],s[I+1],s[I+2])}projectAndGetPerspectiveRatio(s,u,g,v,b,E,k){const I=[u,g,v,1];let O=!1;v||this.transform.pitch>0?(a.transformMat4$1(I,I,s),this.fogState&&b&&k.name!=="globe"&&(O=function(te,se,ce,le,pe,Z){const ie=Z.calculateFogTileMatrix(pe),ve=[se,ce,le];return a.transformMat4(ve,ve,ie),Be(te,ve,Z.pitch,Z._fov)}(this.fogState,u,g,v,b.toUnwrapped(),this.transform)>.9)):Wn(I,I,s);const L=I[3];return{point:new a.Point((I[0]/L+1)/2*this.transform.width+to,(-I[1]/L+1)/2*this.transform.height+to),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/L*.5,1.5),signedDistanceFromCamera:L,occluded:E&&I[2]>L||O}}isOffscreen(s,u,g,v){return g<to||s>=this.screenRightBoundary||v<to||u>this.screenBottomBoundary}isInsideGrid(s,u,g,v){return g>=0&&s<this.gridRightBoundary&&v>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const s=a.identity([]);return a.translate(s,s,[-100,-100,0]),s}}function Ta(f,s,u){const g=s.createTileMatrix(f,f.worldSize,u.toUnwrapped());return a.multiply(new Float32Array(16),f.projMatrix,g)}function lo(f,s,u){if(s.projection.name===u.projection.name)return f.projMatrix;const g=u.clone();return g.setProjection(s.projection),Ta(g,s.getProjection(),f)}function Dr(f,s,u){return s.name===u.projection.name?f.projMatrix:Ta(u,s,f)}class Hm{constructor(s,u,g,v){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?u:-u))):v&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Ss{constructor(s,u,g,v,b,E=!1){this.text=new Hm(s?s.text:null,u,g,b),this.icon=new Hm(s?s.icon:null,u,v,b),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class uc{constructor(s,u,g,v=!1){this.text=s,this.icon=u,this.skipFade=g,this.clipped=v}}class dc{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Oh{constructor(s,u,g,v,b){this.bucketInstanceId=s,this.featureIndex=u,this.sourceLayerIndex=g,this.bucketIndex=v,this.tileID=b}}class qm{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const u=++this.maxGroupID;this.collisionGroups[s]={ID:u,predicate:g=>g.collisionGroupID===u}}return this.collisionGroups[s]}}function hc(f,s,u,g,v){const{horizontalAlign:b,verticalAlign:E}=a.getAnchorAlignment(f),k=-(b-.5)*s,I=-(E-.5)*u,O=a.evaluateVariableOffset(f,g);return new a.Point(k+O[0]*v,I+O[1]*v)}function pc(f,s,u,g,v){const b=new a.Point(f,s);return u&&b._rotate(g?v:-v),b}class Pu{constructor(s,u,g,v,b){this.transform=s.clone(),this.projection=s.projection.name,this.collisionIndex=new cc(this.transform,b),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new qm(g),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,u,g,v){const b=g.getBucket(u),E=g.latestFeatureIndex;if(!b||!E||u.id!==b.layerIds[0])return;const k=b.layers[0].layout,I=g.collisionBoxArray,O=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),L=g.tileSize/a.EXTENT,q=g.tileID.toUnwrapped();this.transform.setProjection(b.projection);const te=(se=g.tileID,ce=b.getProjection(),le=this.transform,ce.name===this.projection?le.calculateProjMatrix(se.toUnwrapped()):Ta(le,ce,se));var se,ce,le;const pe=k.get("text-pitch-alignment")==="map",Z=k.get("text-rotation-alignment")==="map";u.compileFilter();const ie=u.dynamicFilter(),ve=u.dynamicFilterNeedsFeature(),xe=this.transform.calculatePixelsToTileUnitsMatrix(g),De=ws(te,g.tileID.canonical,pe,Z,this.transform,b.getProjection(),xe);let Re=null;if(pe){const Ue=Kr(te,g.tileID.canonical,pe,Z,this.transform,b.getProjection(),xe);Re=a.multiply([],this.transform.labelPlaneMatrix,Ue)}let ze=null;ie&&g.latestFeatureIndex&&(ze={unwrappedTileID:q,dynamicFilter:ie,dynamicFilterNeedsFeature:ve,featureIndex:g.latestFeatureIndex}),this.retainedQueryData[b.bucketInstanceId]=new Oh(b.bucketInstanceId,E,b.sourceLayerIndex,b.index,g.tileID);const Ve={bucket:b,layout:k,posMatrix:te,textLabelPlaneMatrix:De,labelToScreenMatrix:Re,clippingData:ze,scale:O,textPixelRatio:L,holdingForFade:g.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:a.evaluateSizeForZoom(b.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(v)for(const Ue of b.sortKeyRanges){const{sortKey:Ye,symbolInstanceStart:kt,symbolInstanceEnd:qe}=Ue;s.push({sortKey:Ye,symbolInstanceStart:kt,symbolInstanceEnd:qe,parameters:Ve})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(s,u,g,v,b,E,k,I,O,L,q,te,se,ce,le,pe,Z,ie){const{textOffset0:ve,textOffset1:xe,crossTileID:De}=te,Re=[ve,xe],ze=hc(s,g,v,Re,b),Ve=this.collisionIndex.placeCollisionBox(ce,b,u,pc(ze.x,ze.y,E,k,this.transform.angle),q,I,O,L.predicate);if(pe){const Ue=ce.getSymbolInstanceIconSize(ie,this.transform.zoom,te.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ce,Ue,pe,pc(ze.x,ze.y,E,k,this.transform.angle),q,I,O,L.predicate).box.length===0)return}if(Ve.box.length>0){let Ue;return this.prevPlacement&&this.prevPlacement.variableOffsets[De]&&this.prevPlacement.placements[De]&&this.prevPlacement.placements[De].text&&(Ue=this.prevPlacement.variableOffsets[De].anchor),this.variableOffsets[De]={textOffset:Re,width:g,height:v,anchor:s,textScale:b,prevAnchor:Ue},this.markUsedJustification(ce,s,te,le),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,le,te),this.placedOrientations[De]=le),{shift:ze,placedGlyphBoxes:Ve}}}placeLayerBucketPart(s,u,g,v){const{bucket:b,layout:E,posMatrix:k,textLabelPlaneMatrix:I,labelToScreenMatrix:O,clippingData:L,textPixelRatio:q,holdingForFade:te,collisionBoxArray:se,partiallyEvaluatedTextSize:ce,partiallyEvaluatedIconSize:le,collisionGroup:pe}=s.parameters,Z=E.get("text-optional"),ie=E.get("icon-optional"),ve=E.get("text-allow-overlap"),xe=E.get("icon-allow-overlap"),De=E.get("text-rotation-alignment")==="map",Re=E.get("text-pitch-alignment")==="map",ze=E.get("icon-text-fit")!=="none",Ve=E.get("symbol-z-order")==="viewport-y";this.transform.setProjection(b.projection);let Ue=ve&&(xe||!b.hasIconData()||ie),Ye=xe&&(ve||!b.hasTextData()||Z);!b.collisionArrays&&se&&b.deserializeCollisionBoxes(se),g&&v&&b.updateCollisionDebugBuffers(this.transform.zoom,se);const kt=(qe,ft,et)=>{const{crossTileID:Et,numVerticalGlyphVertices:Xe}=qe;if(L){const zr={zoom:this.transform.zoom,pitch:this.transform.pitch};let hr=null;if(L.dynamicFilterNeedsFeature){const er=this.retainedQueryData[b.bucketInstanceId];hr=L.featureIndex.loadFeature({featureIndex:qe.featureIndex,bucketIndex:er.bucketIndex,sourceLayerIndex:er.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,L.dynamicFilter)(zr,hr,this.retainedQueryData[b.bucketInstanceId].tileID.canonical,new a.Point(qe.tileAnchorX,qe.tileAnchorY),this.transform.calculateDistanceTileData(L.unwrappedTileID)))return this.placements[Et]=new uc(!1,!1,!1,!0),void u.add(Et)}if(u.has(Et))return;if(te)return void(this.placements[Et]=new uc(!1,!1,!1));let pt=!1,It=!1,wt=!0,At=!1,pn=!1,In=null,rn={box:null,offscreen:null,occluded:null},wn={box:null,offscreen:null,occluded:null},Gn=null,Vn=null,cn=null,or=0,cr=0,ur=0;et.textFeatureIndex?or=et.textFeatureIndex:qe.useRuntimeCollisionCircles&&(or=qe.featureIndex),et.verticalTextFeatureIndex&&(cr=et.verticalTextFeatureIndex);const dr=zr=>{zr.tileID=this.retainedQueryData[b.bucketInstanceId].tileID;const hr=this.transform.elevation;(hr||zr.elevation)&&(zr.elevation=hr?hr.getAtTileOffset(zr.tileID,zr.tileAnchorX,zr.tileAnchorY):0)},Ii=et.textBox;if(Ii){dr(Ii);const zr=er=>{let Jr=a.WritingMode.horizontal;if(b.allowVerticalPlacement&&!er&&this.prevPlacement){const Oi=this.prevPlacement.placedOrientations[Et];Oi&&(this.placedOrientations[Et]=Oi,Jr=Oi,this.markUsedOrientation(b,Jr,qe))}return Jr},hr=(er,Jr)=>{if(b.allowVerticalPlacement&&Xe>0&&et.verticalTextBox){for(const Oi of b.writingModes)if(Oi===a.WritingMode.vertical?(rn=Jr(),wn=rn):rn=er(),rn&&rn.box&&rn.box.length)break}else rn=er()};if(E.get("text-variable-anchor")){let er=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Et]){const Pr=this.prevPlacement.variableOffsets[Et];er.indexOf(Pr.anchor)>0&&(er=er.filter(ji=>ji!==Pr.anchor),er.unshift(Pr.anchor))}const Jr=(Pr,ji,td)=>{const Da=b.getSymbolInstanceTextSize(ce,qe,this.transform.zoom,ft),zc=(Pr.x2-Pr.x1)*Da+2*Pr.padding,Is=(Pr.y2-Pr.y1)*Da+2*Pr.padding,Ks=ze&&!xe?ji:null;Ks&&dr(Ks);let za={box:[],offscreen:!1,occluded:!1};const nd=ve?2*er.length:er.length;for(let Rc=0;Rc<nd;++Rc){const Ep=this.attemptAnchorPlacement(er[Rc%er.length],Pr,zc,Is,Da,De,Re,q,k,pe,Rc>=er.length,qe,ft,b,td,Ks,ce,le);if(Ep&&(za=Ep.placedGlyphBoxes,za&&za.box&&za.box.length)){pt=!0,In=Ep.shift;break}}return za};hr(()=>Jr(Ii,et.iconBox,a.WritingMode.horizontal),()=>{const Pr=et.verticalTextBox;return Pr&&dr(Pr),b.allowVerticalPlacement&&!(rn&&rn.box&&rn.box.length)&&Xe>0&&Pr?Jr(Pr,et.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),rn&&(pt=rn.box,wt=rn.offscreen,At=rn.occluded);const Oi=zr(!(!rn||!rn.box));if(!pt&&this.prevPlacement){const Pr=this.prevPlacement.variableOffsets[Et];Pr&&(this.variableOffsets[Et]=Pr,this.markUsedJustification(b,Pr.anchor,qe,Oi))}}else{const er=(Jr,Oi)=>{const Pr=b.getSymbolInstanceTextSize(ce,qe,this.transform.zoom,ft),ji=this.collisionIndex.placeCollisionBox(b,Pr,Jr,new a.Point(0,0),ve,q,k,pe.predicate);return ji&&ji.box&&ji.box.length&&(this.markUsedOrientation(b,Oi,qe),this.placedOrientations[Et]=Oi),ji};hr(()=>er(Ii,a.WritingMode.horizontal),()=>{const Jr=et.verticalTextBox;return b.allowVerticalPlacement&&Xe>0&&Jr?(dr(Jr),er(Jr,a.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),zr(!!(rn&&rn.box&&rn.box.length))}}if(Gn=rn,pt=Gn&&Gn.box&&Gn.box.length>0,wt=Gn&&Gn.offscreen,At=Gn&&Gn.occluded,qe.useRuntimeCollisionCircles){const zr=b.text.placedSymbolArray.get(qe.centerJustifiedTextSymbolIndex>=0?qe.centerJustifiedTextSymbolIndex:qe.verticalPlacedTextSymbolIndex),hr=a.evaluateSizeForFeature(b.textSizeData,ce,zr),er=E.get("text-padding");Vn=this.collisionIndex.placeCollisionCircles(b,ve,zr,b.lineVertexArray,b.glyphOffsetArray,hr,k,I,O,g,Re,pe.predicate,qe.collisionCircleDiameter*hr/a.ONE_EM,er,this.retainedQueryData[b.bucketInstanceId].tileID),pt=ve||Vn.circles.length>0&&!Vn.collisionDetected,wt=wt&&Vn.offscreen,At=Vn.occluded}if(et.iconFeatureIndex&&(ur=et.iconFeatureIndex),et.iconBox){const zr=hr=>{dr(hr);const er=ze&&In?pc(In.x,In.y,De,Re,this.transform.angle):new a.Point(0,0),Jr=b.getSymbolInstanceIconSize(le,this.transform.zoom,qe.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(b,Jr,hr,er,xe,q,k,pe.predicate)};wn&&wn.box&&wn.box.length&&et.verticalIconBox?(cn=zr(et.verticalIconBox),It=cn.box.length>0):(cn=zr(et.iconBox),It=cn.box.length>0),wt=wt&&cn.offscreen,pn=cn.occluded}const gi=Z||qe.numHorizontalGlyphVertices===0&&Xe===0,po=ie||qe.numIconVertices===0;if(gi||po?po?gi||(It=It&&pt):pt=It&&pt:It=pt=It&&pt,pt&&Gn&&Gn.box&&this.collisionIndex.insertCollisionBox(Gn.box,E.get("text-ignore-placement"),b.bucketInstanceId,wn&&wn.box&&cr?cr:or,pe.ID),It&&cn&&this.collisionIndex.insertCollisionBox(cn.box,E.get("icon-ignore-placement"),b.bucketInstanceId,ur,pe.ID),Vn&&(pt&&this.collisionIndex.insertCollisionCircles(Vn.circles,E.get("text-ignore-placement"),b.bucketInstanceId,or,pe.ID),g)){const zr=b.bucketInstanceId;let hr=this.collisionCircleArrays[zr];hr===void 0&&(hr=this.collisionCircleArrays[zr]=new dc);for(let er=0;er<Vn.circles.length;er+=4)hr.circles.push(Vn.circles[er+0]),hr.circles.push(Vn.circles[er+1]),hr.circles.push(Vn.circles[er+2]),hr.circles.push(Vn.collisionDetected?1:0)}const Qo=b.projection.name!=="globe";Ue=Ue&&(Qo||!At),Ye=Ye&&(Qo||!pn),this.placements[Et]=new uc(pt||Ue,It||Ye,wt||b.justReloaded),u.add(Et)};if(Ve){const qe=b.getSortedSymbolIndexes(this.transform.angle);for(let ft=qe.length-1;ft>=0;--ft){const et=qe[ft];kt(b.symbolInstances.get(et),et,b.collisionArrays[et])}}else for(let qe=s.symbolInstanceStart;qe<s.symbolInstanceEnd;qe++)kt(b.symbolInstances.get(qe),qe,b.collisionArrays[qe]);if(g&&b.bucketInstanceId in this.collisionCircleArrays){const qe=this.collisionCircleArrays[b.bucketInstanceId];a.invert(qe.invProjMatrix,k),qe.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(s,u,g,v){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:E,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:I,crossTileID:O}=g,L=a.getAnchorJustification(u),q=v===a.WritingMode.vertical?I:L==="left"?b:L==="center"?E:L==="right"?k:-1;b>=0&&(s.text.placedSymbolArray.get(b).crossTileID=q>=0&&b!==q?0:O),E>=0&&(s.text.placedSymbolArray.get(E).crossTileID=q>=0&&E!==q?0:O),k>=0&&(s.text.placedSymbolArray.get(k).crossTileID=q>=0&&k!==q?0:O),I>=0&&(s.text.placedSymbolArray.get(I).crossTileID=q>=0&&I!==q?0:O)}markUsedOrientation(s,u,g){const v=u===a.WritingMode.horizontal||u===a.WritingMode.horizontalOnly?u:0,b=u===a.WritingMode.vertical?u:0,{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:O}=g,L=s.text.placedSymbolArray;E>=0&&(L.get(E).placedOrientation=v),k>=0&&(L.get(k).placedOrientation=v),I>=0&&(L.get(I).placedOrientation=v),O>=0&&(L.get(O).placedOrientation=b)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let g=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const v=u?u.symbolFadeChange(s):1,b=u?u.opacities:{},E=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const I in this.placements){const O=this.placements[I],L=b[I];L?(this.opacities[I]=new Ss(L,v,O.text,O.icon,null,O.clipped),g=g||O.text!==L.text.placed||O.icon!==L.icon.placed):(this.opacities[I]=new Ss(null,v,O.text,O.icon,O.skipFade,O.clipped),g=g||O.text||O.icon)}for(const I in b){const O=b[I];if(!this.opacities[I]){const L=new Ss(O,v,!1,!1);L.isHidden()||(this.opacities[I]=L,g=g||O.text.placed||O.icon.placed)}}for(const I in E)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=E[I]);for(const I in k)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=k[I]);g?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:s)}updateLayerOpacities(s,u){const g=new Set;for(const v of u){const b=v.getBucket(s);b&&v.latestFeatureIndex&&s.id===b.layerIds[0]&&this.updateBucketOpacities(b,g,v.collisionBoxArray)}}updateBucketOpacities(s,u,g){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const v=s.layers[0].layout,b=!!s.layers[0].dynamicFilter(),E=new Ss(null,0,!1,!1,!0),k=v.get("text-allow-overlap"),I=v.get("icon-allow-overlap"),O=v.get("text-variable-anchor"),L=v.get("text-rotation-alignment")==="map",q=v.get("text-pitch-alignment")==="map",te=v.get("icon-text-fit")!=="none",se=new Ss(null,0,k&&(I||!s.hasIconData()||v.get("icon-optional")),I&&(k||!s.hasTextData()||v.get("text-optional")),!0);!s.collisionArrays&&g&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(g);const ce=(pe,Z,ie)=>{for(let ve=0;ve<Z/4;ve++)pe.opacityVertexArray.emplaceBack(ie)};let le=0;for(let pe=0;pe<s.symbolInstances.length;pe++){const Z=s.symbolInstances.get(pe),{numHorizontalGlyphVertices:ie,numVerticalGlyphVertices:ve,crossTileID:xe,numIconVertices:De}=Z,Re=u.has(xe);let ze=this.opacities[xe];Re?ze=E:ze||(ze=se,this.opacities[xe]=ze),u.add(xe);const Ve=ie>0||ve>0,Ue=De>0,Ye=this.placedOrientations[xe],kt=Ye===a.WritingMode.vertical,qe=Ye===a.WritingMode.horizontal||Ye===a.WritingMode.horizontalOnly;if(!Ve&&!Ue||ze.isHidden()||le++,Ve){const ft=fc(ze.text);ce(s.text,ie,kt?Vr:ft),ce(s.text,ve,qe?Vr:ft);const et=ze.text.isHidden(),{leftJustifiedTextSymbolIndex:Et,centerJustifiedTextSymbolIndex:Xe,rightJustifiedTextSymbolIndex:pt,verticalPlacedTextSymbolIndex:It}=Z,wt=s.text.placedSymbolArray,At=et||kt?1:0;Et>=0&&(wt.get(Et).hidden=At),Xe>=0&&(wt.get(Xe).hidden=At),pt>=0&&(wt.get(pt).hidden=At),It>=0&&(wt.get(It).hidden=et||qe?1:0);const pn=this.variableOffsets[xe];pn&&this.markUsedJustification(s,pn.anchor,Z,Ye);const In=this.placedOrientations[xe];In&&(this.markUsedJustification(s,"left",Z,In),this.markUsedOrientation(s,In,Z))}if(Ue){const ft=fc(ze.icon),{placedIconSymbolIndex:et,verticalPlacedIconSymbolIndex:Et}=Z,Xe=s.icon.placedSymbolArray,pt=ze.icon.isHidden()?1:0;et>=0&&(ce(s.icon,De,kt?Vr:ft),Xe.get(et).hidden=pt),Et>=0&&(ce(s.icon,Z.numVerticalIconVertices,qe?Vr:ft),Xe.get(Et).hidden=pt)}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const ft=s.collisionArrays[pe];if(ft){let et=new a.Point(0,0),Et=!0;if(ft.textBox||ft.verticalTextBox){if(O){const pt=this.variableOffsets[xe];pt?(et=hc(pt.anchor,pt.width,pt.height,pt.textOffset,pt.textScale),L&&et._rotate(q?this.transform.angle:-this.transform.angle)):Et=!1}b&&(Et=!ze.clipped),ft.textBox&&sl(s.textCollisionBox.collisionVertexArray,ze.text.placed,!Et||kt,et.x,et.y),ft.verticalTextBox&&sl(s.textCollisionBox.collisionVertexArray,ze.text.placed,!Et||qe,et.x,et.y)}const Xe=Et&&!!(!qe&&ft.verticalIconBox);ft.iconBox&&sl(s.iconCollisionBox.collisionVertexArray,ze.icon.placed,Xe,te?et.x:0,te?et.y:0),ft.verticalIconBox&&sl(s.iconCollisionBox.collisionVertexArray,ze.icon.placed,!Xe,te?et.x:0,te?et.y:0)}}}if(s.fullyClipped=le===0,s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=pe.invProjMatrix,s.placementViewportMatrix=pe.viewportMatrix,s.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,u){const g=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*g>s}setStale(){this.stale=!0}}function sl(f,s,u,g,v){f.emplaceBack(s?1:0,u?1:0,g||0,v||0),f.emplaceBack(s?1:0,u?1:0,g||0,v||0),f.emplaceBack(s?1:0,u?1:0,g||0,v||0),f.emplaceBack(s?1:0,u?1:0,g||0,v||0)}const Ui=Math.pow(2,25),qr=Math.pow(2,24),Bh=Math.pow(2,17),Fh=Math.pow(2,16),Vi=Math.pow(2,9),co=Math.pow(2,8),Zm=Math.pow(2,1);function fc(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const s=f.placed?1:0,u=Math.floor(127*f.opacity);return u*Ui+s*qr+u*Bh+s*Fh+u*Vi+s*co+u*Zm+s}const Vr=0;class mc{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&s.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(s,u,g,v,b){const E=this._bucketParts;for(;this._currentTileIndex<s.length;)if(u.getBucketParts(E,v,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((k,I)=>k.sortKey-I.sortKey));this._currentPartIndex<E.length;){const k=E[this._currentPartIndex];if(u.placeLayerBucketPart(k,this._seenCrossTileIDs,g,k.symbolInstanceStart===0),this._currentPartIndex++,b())return!0}return!1}}class $h{constructor(s,u,g,v,b,E,k,I){this.placement=new Pu(s,b,E,k,I),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(s,u,g){const v=a.exported.now(),b=()=>{const E=a.exported.now()-v;return!this._forceFullPlacement&&E>2};for(;this._currentPlacementIndex>=0;){const E=u[s[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=k)&&(!E.maxzoom||E.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new mc(E)),this._inProgressLayer.continuePlacement(g[E.source],this.placement,this._showCollisionBoxes,E,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Ca=512/a.EXTENT/2;class bi{constructor(s,u,g){this.tileID=s,this.bucketInstanceId=g,this.index=new a.KDBush(u.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=s.canonical.x*a.EXTENT,b=s.canonical.y*a.EXTENT;for(let E=0;E<u.length;E++){const{key:k,crossTileID:I,tileAnchorX:O,tileAnchorY:L}=u.get(E),q=Math.floor((v+O)*Ca),te=Math.floor((b+L)*Ca);this.index.add(q,te),this.keys.push(k),this.crossTileIDs.push(I)}this.index.finish()}findMatches(s,u,g){const v=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z),b=Ca/Math.pow(2,u.canonical.z-this.tileID.canonical.z),E=u.canonical.x*a.EXTENT,k=u.canonical.y*a.EXTENT;for(let I=0;I<s.length;I++){const O=s.get(I);if(O.crossTileID)continue;const{key:L,tileAnchorX:q,tileAnchorY:te}=O,se=Math.floor((E+q)*b),ce=Math.floor((k+te)*b),le=this.index.range(se-v,ce-v,se+v,ce+v);for(const pe of le){const Z=this.crossTileIDs[pe];if(this.keys[pe]===L&&!g.has(Z)){g.add(Z),O.crossTileID=Z;break}}}}}class Nh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Uh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const u=Math.round((s-this.lng)/360);if(u!==0)for(const g in this.indexes){const v=this.indexes[g],b={};for(const E in v){const k=v[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),b[k.tileID.key]=k}this.indexes[g]=b}this.lng=s}addBucket(s,u,g){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let b=0;b<u.symbolInstances.length;b++)u.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]=new Set);const v=this.usedCrossTileIDs[s.overscaledZ];for(const b in this.indexes){const E=this.indexes[b];if(Number(b)>s.overscaledZ)for(const k in E){const I=E[k];I.tileID.isChildOf(s)&&I.findMatches(u.symbolInstances,s,v)}else{const k=E[s.scaledTo(Number(b)).key];k&&k.findMatches(u.symbolInstances,s,v)}}for(let b=0;b<u.symbolInstances.length;b++){const E=u.symbolInstances.get(b);E.crossTileID||(E.crossTileID=g.generate(),v.add(E.crossTileID))}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new bi(s,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(s,u){for(const g of u.crossTileIDs)this.usedCrossTileIDs[s].delete(g)}removeStaleBuckets(s){let u=!1;for(const g in this.indexes){const v=this.indexes[g];for(const b in v)s[v[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,v[b]),delete v[b],u=!0)}return u}}class Ts{constructor(){this.layerIndexes={},this.crossTileIDs=new Nh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,u,g,v){let b=this.layerIndexes[s.id];b===void 0&&(b=this.layerIndexes[s.id]=new Uh);let E=!1;const k={};v.name!=="globe"&&b.handleWrapJump(g);for(const I of u){const O=I.getBucket(s);O&&s.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(I.tileID,O,this.crossTileIDs)&&(E=!0),k[O.bucketInstanceId]=!0)}return b.removeStaleBuckets(k)&&(E=!0),E}pruneUnusedLayers(s){const u={};s.forEach(g=>{u[g]=!0});for(const g in this.layerIndexes)u[g]||delete this.layerIndexes[g]}}const Xs=(f,s)=>a.emitValidationErrors(f,s&&s.filter(u=>u.identifier!=="source.canvas")),Mu=a.pick(Un,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),dv=a.pick(Un,["setCenter","setZoom","setBearing","setPitch"]),Vh={version:8,layers:[],sources:{}},al={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Yo extends a.Evented{constructor(s,u={}){super(),this.map=s,this.dispatcher=new Ne(Qn(),this),this.imageManager=new Ce,this.imageManager.setEventedParent(this),this.glyphManager=new a.GlyphManager(s._requestManager,u.localFontFamily?a.LocalGlyphMode.all:u.localIdeographFontFamily?a.LocalGlyphMode.ideographs:a.LocalGlyphMode.none,u.localFontFamily||u.localIdeographFontFamily),this.crossTileSymbolIndex=new Ts,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const g=this;this._rtlTextPluginCallback=Yo.registerForPluginStateChange(v=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(b,E)=>{if(a.triggerPluginCompletionEvent(b),E&&E.every(k=>k))for(const k in g._sourceCaches){const I=g._sourceCaches[k],O=I.getSource().type;O!=="vector"&&O!=="geojson"||I.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const b=this.getSource(v.sourceId);if(b&&b.vectorLayerIds)for(const E in this._layers){const k=this._layers[E];k.source===b.id&&this._validateLayer(k)}})}loadURL(s,u={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const g=typeof u.validate=="boolean"?u.validate:!a.isMapboxURL(s);s=this.map._requestManager.normalizeStyleURL(s,u.accessToken);const v=this.map._requestManager.transformRequest(s,a.ResourceType.Style);this._request=a.getJSON(v,(b,E)=>{this._request=null,b?this.fire(new a.ErrorEvent(b)):E&&this._load(E,g)})}loadJSON(s,u={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(s,u.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Vh,!1)}_updateLayerCount(s,u){const g=u?1:-1;s.is3D()&&(this._num3DLayers+=g),s.type==="circle"&&(this._numCircleLayers+=g),s.type==="symbol"&&(this._numSymbolLayers+=g)}_load(s,u){if(u&&Xs(this,a.validateStyle(s)))return;this._loaded=!0,this.stylesheet=a.clone$1(s),this._updateMapProjection();for(const v in s.sources)this.addSource(v,s.sources[v],{validate:!1});this._changed=!1,s.sprite?this._loadSprite(s.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(s.glyphs);const g=Hr(this.stylesheet.layers);this._order=g.map(v=>v.id),this._layers={},this._serializedLayers={};for(const v of g){const b=a.createStyleLayer(v);b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new be(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(s){s?this.stylesheet.projection=s:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(s){this._spriteRequest=function(u,g,v){let b,E,k;const I=a.exported.devicePixelRatio>1?"@2x":"";let O=a.getJSON(g.transformRequest(g.normalizeSpriteURL(u,I,".json"),a.ResourceType.SpriteJSON),(te,se)=>{O=null,k||(k=te,b=se,q())}),L=a.getImage(g.transformRequest(g.normalizeSpriteURL(u,I,".png"),a.ResourceType.SpriteImage),(te,se)=>{L=null,k||(k=te,E=se,q())});function q(){if(k)v(k);else if(b&&E){const te=a.exported.getImageData(E),se={};for(const ce in b){const{width:le,height:pe,x:Z,y:ie,sdf:ve,pixelRatio:xe,stretchX:De,stretchY:Re,content:ze}=b[ce],Ve=new a.RGBAImage({width:le,height:pe});a.RGBAImage.copy(te,Ve,{x:Z,y:ie},{x:0,y:0},{width:le,height:pe}),se[ce]={data:Ve,pixelRatio:xe,sdf:ve,stretchX:De,stretchY:Re,content:ze}}v(null,se)}}return{cancel(){O&&(O.cancel(),O=null),L&&(L.cancel(),L=null)}}}(s,this.map._requestManager,(u,g)=>{if(this._spriteRequest=null,u)this.fire(new a.ErrorEvent(u));else if(g)for(const v in g)this.imageManager.addImage(v,g[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(s){const u=this.getSource(s.source);if(!u)return;const g=s.sourceLayer;g&&(u.type==="geojson"||u.vectorLayerIds&&u.vectorLayerIds.indexOf(g)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${u.id}" as specified by style layer "${s.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this._sourceCaches)if(!this._sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(s){const u=[];for(const g of s){const v=this._layers[g];v.type!=="custom"&&u.push(v.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const s in this._sourceCaches)if(this._sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(s){return!!this.terrain&&(typeof s.isLayerDraped=="function"?s.isLayerDraped():al[s.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(s){if(!this._loaded)return;const u=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(v.length||b.length)&&this._updateWorkerLayers(v,b);for(const E in this._updatedSources){const k=this._updatedSources[E];k==="reload"?this._reloadSource(E):k==="clear"&&this._clearSource(E)}this._updateTilesForChangedImages();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(s);this.light.updateTransitions(s),this.fog&&this.fog.updateTransitions(s),this._resetUpdates()}const g={};for(const v in this._sourceCaches){const b=this._sourceCaches[v];g[v]=b.used,b.used=!1}for(const v of this._order){const b=this._layers[v];if(b.recalculate(s,this._availableImages),!b.isHidden(s.zoom)){const k=this._getLayerSourceCache(b);k&&(k.used=!0)}const E=this.map.painter;if(E){const k=b.getProgramIds();if(!k)continue;const I=b.getProgramConfiguration(s.zoom);for(const O of k)E.useProgram(O,I)}}for(const v in g){const b=this._sourceCaches[v];g[v]!==b.used&&b.getSource().fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b.getSource().id}))}this.light.recalculate(s),this.terrain&&this.terrain.recalculate(s),this.fog&&this.fog.recalculate(s),this.z=s.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),u&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const u in this._sourceCaches)this._sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateWorkerLayers(s,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(s){if(this._checkLoaded(),Xs(this,a.validateStyle(s)))return!1;(s=a.clone$1(s)).layers=Hr(s.layers);const u=function(v,b){if(!v)return[{command:Un.setStyle,args:[b]}];let E=[];try{if(!w(v.version,b.version))return[{command:Un.setStyle,args:[b]}];w(v.center,b.center)||E.push({command:Un.setCenter,args:[b.center]}),w(v.zoom,b.zoom)||E.push({command:Un.setZoom,args:[b.zoom]}),w(v.bearing,b.bearing)||E.push({command:Un.setBearing,args:[b.bearing]}),w(v.pitch,b.pitch)||E.push({command:Un.setPitch,args:[b.pitch]}),w(v.sprite,b.sprite)||E.push({command:Un.setSprite,args:[b.sprite]}),w(v.glyphs,b.glyphs)||E.push({command:Un.setGlyphs,args:[b.glyphs]}),w(v.transition,b.transition)||E.push({command:Un.setTransition,args:[b.transition]}),w(v.light,b.light)||E.push({command:Un.setLight,args:[b.light]}),w(v.fog,b.fog)||E.push({command:Un.setFog,args:[b.fog]}),w(v.projection,b.projection)||E.push({command:Un.setProjection,args:[b.projection]});const k={},I=[];(function(q,te,se,ce){let le;for(le in te=te||{},q=q||{})q.hasOwnProperty(le)&&(te.hasOwnProperty(le)||ac(le,se,ce));for(le in te){if(!te.hasOwnProperty(le))continue;const pe=te[le];q.hasOwnProperty(le)?w(q[le],pe)||(q[le].type==="geojson"&&pe.type==="geojson"&&ku(q,te,le)?se.push({command:Un.setGeoJSONSourceData,args:[le,pe.data]}):Dh(le,te,se,ce)):il(le,te,se)}})(v.sources,b.sources,I,k);const O=[];v.layers&&v.layers.forEach(q=>{q.source&&k[q.source]?E.push({command:Un.removeLayer,args:[q.id]}):O.push(q)});let L=v.terrain;L&&k[L.source]&&(E.push({command:Un.setTerrain,args:[void 0]}),L=void 0),E=E.concat(I),w(L,b.terrain)||E.push({command:Un.setTerrain,args:[b.terrain]}),function(q,te,se){te=te||[];const ce=(q=q||[]).map(xs),le=te.map(xs),pe=q.reduce(zh,{}),Z=te.reduce(zh,{}),ie=ce.slice(),ve=Object.create(null);let xe,De,Re,ze,Ve,Ue,Ye;for(xe=0,De=0;xe<ce.length;xe++)Re=ce[xe],Z.hasOwnProperty(Re)?De++:(se.push({command:Un.removeLayer,args:[Re]}),ie.splice(ie.indexOf(Re,De),1));for(xe=0,De=0;xe<le.length;xe++)Re=le[le.length-1-xe],ie[ie.length-1-xe]!==Re&&(pe.hasOwnProperty(Re)?(se.push({command:Un.removeLayer,args:[Re]}),ie.splice(ie.lastIndexOf(Re,ie.length-De),1)):De++,Ue=ie[ie.length-xe],se.push({command:Un.addLayer,args:[Z[Re],Ue]}),ie.splice(ie.length-xe,0,Re),ve[Re]=!0);for(xe=0;xe<le.length;xe++)if(Re=le[xe],ze=pe[Re],Ve=Z[Re],!ve[Re]&&!w(ze,Ve))if(w(ze.source,Ve.source)&&w(ze["source-layer"],Ve["source-layer"])&&w(ze.type,Ve.type)){for(Ye in Zo(ze.layout,Ve.layout,se,Re,null,Un.setLayoutProperty),Zo(ze.paint,Ve.paint,se,Re,null,Un.setPaintProperty),w(ze.filter,Ve.filter)||se.push({command:Un.setFilter,args:[Re,Ve.filter]}),w(ze.minzoom,Ve.minzoom)&&w(ze.maxzoom,Ve.maxzoom)||se.push({command:Un.setLayerZoomRange,args:[Re,Ve.minzoom,Ve.maxzoom]}),ze)ze.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?Zo(ze[Ye],Ve[Ye],se,Re,Ye.slice(6),Un.setPaintProperty):w(ze[Ye],Ve[Ye])||se.push({command:Un.setLayerProperty,args:[Re,Ye,Ve[Ye]]}));for(Ye in Ve)Ve.hasOwnProperty(Ye)&&!ze.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?Zo(ze[Ye],Ve[Ye],se,Re,Ye.slice(6),Un.setPaintProperty):w(ze[Ye],Ve[Ye])||se.push({command:Un.setLayerProperty,args:[Re,Ye,Ve[Ye]]}))}else se.push({command:Un.removeLayer,args:[Re]}),Ue=ie[ie.lastIndexOf(Re)+1],se.push({command:Un.addLayer,args:[Ve,Ue]})}(O,b.layers,E)}catch(k){console.warn("Unable to compute style diff:",k),E=[{command:Un.setStyle,args:[b]}]}return E}(this.serialize(),s).filter(v=>!(v.command in dv));if(u.length===0)return!1;const g=u.filter(v=>!(v.command in Mu));if(g.length>0)throw new Error(`Unimplemented: ${g.map(v=>v.command).join(", ")}.`);return u.forEach(v=>{v.command!=="setTransition"&&v.command!=="setProjection"&&this[v.command].apply(this,v.args)}),this.stylesheet=s,this._updateMapProjection(),!0}addImage(s,u){return this.getImage(s)?this.fire(new a.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(s,u),this._afterImageUpdated(s),this)}updateImage(s,u){this.imageManager.updateImage(s,u)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){return this.getImage(s)?(this.imageManager.removeImage(s),this._afterImageUpdated(s),this):this.fire(new a.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(s,u,g={}){if(this._checkLoaded(),this.getSource(s)!==void 0)throw new Error("There is already a source with this ID");if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.validateSource,`sources.${s}`,u,null,g))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const v=Dn(s,u,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(s),source:v.serialize(),sourceId:s}));const b=E=>{const k=(E?"symbol:":"other:")+s,I=this._sourceCaches[k]=new a.SourceCache(k,v,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[s]=I,I.style=this,I.onAdd(this.map)};b(!1),u.type!=="vector"&&u.type!=="geojson"||b(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(s){this._checkLoaded();const u=this.getSource(s);if(!u)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===s)return this.fire(new a.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===s)return this.fire(new a.ErrorEvent(new Error(`Source "${s}" cannot be removed while terrain is using it.`)));const g=this._getSourceCaches(s);for(const v of g)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();return delete this._otherSourceCaches[s],delete this._symbolSourceCaches[s],u.setEventedParent(null),u.onRemove&&u.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(s,u){this._checkLoaded(),this.getSource(s).setData(u),this._changed=!0}getSource(s){const u=this._getSourceCache(s);return u&&u.getSource()}_getSources(){const s=[];for(const u in this._otherSourceCaches){const g=this._getSourceCache(u);g&&s.push(g.getSource())}return s}addLayer(s,u,g={}){this._checkLoaded();const v=s.id;if(this.getLayer(v))return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let b;if(s.type==="custom"){if(Xs(this,a.validateCustomStyleLayer(s)))return;b=a.createStyleLayer(s)}else{if(typeof s.source=="object"&&(this.addSource(v,s.source),s=a.clone$1(s),s=a.extend(s,{source:v})),this._validate(a.validateLayer,`layers.${v}`,s,{arrayIndex:-1},g))return;b=a.createStyleLayer(s),this._validateLayer(b),b.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}const E=u?this._order.indexOf(u):this._order.length;if(u&&E===-1)return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`)));this._order.splice(E,0,v),this._layerOrderChanged=!0,this._layers[v]=b;const k=this._getLayerSourceCache(b);if(this._removedLayers[v]&&b.source&&k&&b.type!=="custom"){const I=this._removedLayers[v];delete this._removedLayers[v],I.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",k.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(s,u){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===u)return;const g=this._order.indexOf(s);this._order.splice(g,1);const v=u?this._order.indexOf(u):this._order.length;u&&v===-1?this.fire(new a.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`))):(this._order.splice(v,0,s),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(s){this._checkLoaded();const u=this._layers[s];if(!u)return void this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be removed.`)));u.setEventedParent(null),this._updateLayerCount(u,!1);const g=this._order.indexOf(s);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=u,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],u.onRemove&&u.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}hasLayerType(s){for(const u in this._layers)if(this._layers[u].type===s)return!0;return!1}setLayerZoomRange(s,u,g){this._checkLoaded();const v=this.getLayer(s);v?v.minzoom===u&&v.maxzoom===g||(u!=null&&(v.minzoom=u),g!=null&&(v.maxzoom=g),this._updateLayer(v)):this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(s,u,g={}){this._checkLoaded();const v=this.getLayer(s);if(v){if(!w(v.filter,u))return u==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(a.validateFilter,`layers.${v.id}.filter`,u,{layerType:v.type},g)||(v.filter=a.clone$1(u),this._updateLayer(v)))}else this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be filtered.`)))}getFilter(s){const u=this.getLayer(s);return u&&a.clone$1(u.filter)}setLayoutProperty(s,u,g,v={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getLayoutProperty(u),g)||(b.setLayoutProperty(u,g,v),this._updateLayer(b)):this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(s,u){const g=this.getLayer(s);if(g)return g.getLayoutProperty(u);this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style.`)))}setPaintProperty(s,u,g,v={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getPaintProperty(u),g)||(b.setPaintProperty(u,g,v)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(s,u){const g=this.getLayer(s);return g&&g.getPaintProperty(u)}setFeatureState(s,u){this._checkLoaded();const g=s.source,v=s.sourceLayer,b=this.getSource(g);if(!b)return void this.fire(new a.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const E=b.type;if(E==="geojson"&&v)return void this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!v)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));s.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided.")));const k=this._getSourceCaches(g);for(const I of k)I.setFeatureState(v,s.id,u)}removeFeatureState(s,u){this._checkLoaded();const g=s.source,v=this.getSource(g);if(!v)return void this.fire(new a.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const b=v.type,E=b==="vector"?s.sourceLayer:void 0;if(b==="vector"&&!E)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(u&&typeof s.id!="string"&&typeof s.id!="number")return void this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const k=this._getSourceCaches(g);for(const I of k)I.removeFeatureState(E,s.id,u)}getFeatureState(s){this._checkLoaded();const u=s.source,g=s.sourceLayer,v=this.getSource(u);if(v){if(v.type!=="vector"||g)return s.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(u)[0].getFeatureState(g,s.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const s={};for(const u in this._sourceCaches){const g=this._sourceCaches[u].getSource();s[g.id]||(s[g.id]=g.serialize())}return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:s,layers:this._serializeLayers(this._order)},u=>u!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0;const u=this._getLayerSourceCache(s);s.source&&!this._updatedSources[s.source]&&u&&u.getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",u.pause()),this._changed=!0,s.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(s){const u=E=>this._layers[E].type==="fill-extrusion",g={},v=[];for(let E=this._order.length-1;E>=0;E--){const k=this._order[E];if(u(k)){g[k]=E;for(const I of s){const O=I[k];if(O)for(const L of O)v.push(L)}}}v.sort((E,k)=>k.intersectionZ-E.intersectionZ);const b=[];for(let E=this._order.length-1;E>=0;E--){const k=this._order[E];if(u(k))for(let I=v.length-1;I>=0;I--){const O=v[I].feature;if(g[O.layer.id]<E)break;b.push(O),v.pop()}else for(const I of s){const O=I[k];if(O)for(const L of O)b.push(L.feature)}}return b}queryRenderedFeatures(s,u,g){u&&u.filter&&this._validate(a.validateFilter,"queryRenderedFeatures.filter",u.filter,null,u);const v={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const I of u.layers){const O=this._layers[I];if(!O)return this.fire(new a.ErrorEvent(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];v[O.source]=!0}}const b=[];u.availableImages=this._availableImages;const E=u&&u.layers?u.layers.some(I=>{const O=this.getLayer(I);return O&&O.is3D()}):this.has3DLayers(),k=vt.createFromScreenPoints(s,g);for(const I in this._sourceCaches){const O=this._sourceCaches[I].getSource().id;u.layers&&!v[O]||b.push(sr(this._sourceCaches[I],this._layers,this._serializedLayers,k,u,g,E,!!this.map._showQueryGeometry))}return this.placement&&b.push(function(I,O,L,q,te,se,ce){const le={},pe=se.queryRenderedSymbols(q),Z=[];for(const ie of Object.keys(pe).map(Number))Z.push(ce[ie]);Z.sort(Ur);for(const ie of Z){const ve=ie.featureIndex.lookupSymbolFeatures(pe[ie.bucketInstanceId],O,ie.bucketIndex,ie.sourceLayerIndex,te.filter,te.layers,te.availableImages,I);for(const xe in ve){const De=le[xe]=le[xe]||[],Re=ve[xe];Re.sort((ze,Ve)=>{const Ue=ie.featureSortOrder;if(Ue){const Ye=Ue.indexOf(ze.featureIndex);return Ue.indexOf(Ve.featureIndex)-Ye}return Ve.featureIndex-ze.featureIndex});for(const ze of Re)De.push(ze)}}for(const ie in le)le[ie].forEach(ve=>{const xe=ve.feature,De=L(I[ie]);if(!De)return;const Re=De.getFeatureState(xe.layer["source-layer"],xe.id);xe.source=xe.layer.source,xe.layer["source-layer"]&&(xe.sourceLayer=xe.layer["source-layer"]),xe.state=Re});return le}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),k.screenGeometry,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(s,u){u&&u.filter&&this._validate(a.validateFilter,"querySourceFeatures.filter",u.filter,null,u);const g=this._getSourceCaches(s);let v=[];for(const b of g)v=v.concat(_r(b,u));return v}addSourceType(s,u,g){return Yo.getSourceType(s)?g(new Error(`A source type called "${s}" already exists.`)):(Yo.setSourceType(s,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:u.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(s,u={}){this._checkLoaded();const g=this.light.getLight();let v=!1;for(const E in s)if(!w(s[E],g[E])){v=!0;break}if(!v)return;const b=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(s,u),this.light.updateTransitions(b)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(s,u=1){if(this._checkLoaded(),!s)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let g=s;if(u===1){if(typeof g.source=="object"){const v="terrain-dem-src";this.addSource(v,g.source),g=a.clone$1(g),g=a.extend(g,{source:v})}if(this._validate(a.validateTerrain,"terrain",g))return}if(!this.terrain||this.terrain&&u!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,u)}else{const v=this.terrain,b=v.get();for(const E of Object.keys(a.spec.terrain))!g.hasOwnProperty(E)&&a.spec.terrain[E].default&&(g[E]=a.spec.terrain[E].default);for(const E in g)if(!w(g[E],b[E])){v.set(g),this.stylesheet.terrain=g;const k=this._setTransitionParameters({duration:0});v.updateTransitions(k);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(s){const u=this.fog=new ke(s,this.map.transform);this.stylesheet.fog=s;const g=this._setTransitionParameters({duration:0});u.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const s of this.map._markers)s._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(s){if(this._checkLoaded(),!s)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const u=this.fog,g=u.get();Object.keys(s).length===0&&u.set(s);for(const v in s)if(!w(s[v],g[v])){u.set(s),this.stylesheet.fog=s;const b=this._setTransitionParameters({duration:0});u.updateTransitions(b);break}}else this._createFog(s);this._markersNeedUpdate=!0}_setTransitionParameters(s){return{now:a.exported.now(),transition:a.extend(s,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const s=this._order.filter(g=>this.isLayerDraped(this._layers[g])),u=this._order.filter(g=>!this.isLayerDraped(this._layers[g]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...s),this._drapedFirstOrder.push(...u)}_createTerrain(s,u){const g=this.terrain=new ue(s,u);this.stylesheet.terrain=s,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const v=this._setTransitionParameters({duration:0});g.updateTransitions(v)}_force3DLayerUpdate(){for(const s in this._layers){const u=this._layers[s];u.type==="fill-extrusion"&&this._updateLayer(u)}}_forceSymbolLayerUpdate(){for(const s in this._layers){const u=this._layers[s];u.type==="symbol"&&this._updateLayer(u)}}_validate(s,u,g,v,b={}){return(!b||b.validate!==!1)&&Xs(this,s.call(a.validateStyle,a.extend({key:u,style:this.serialize(),value:g,styleSpec:a.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this._sourceCaches)this._sourceCaches[s].clearTiles(),this._sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(s){const u=this._getSourceCaches(s);for(const g of u)g.clearTiles()}_reloadSource(s){const u=this._getSourceCaches(s);for(const g of u)g.resume(),g.reload()}_reloadSources(){for(const s of this._getSources())s.reload&&s.reload()}_updateSources(s){for(const u in this._sourceCaches)this._sourceCaches[u].update(s)}_generateCollisionBoxes(){for(const s in this._sourceCaches){const u=this._sourceCaches[s];u.resume(),u.reload()}}_updatePlacement(s,u,g,v,b=!1){let E=!1,k=!1;const I={};for(const O of this._order){const L=this._layers[O];if(L.type!=="symbol")continue;if(!I[L.source]){const te=this._getLayerSourceCache(L);if(!te)continue;I[L.source]=te.getRenderableIds(!0).map(se=>te.getTileByID(se)).sort((se,ce)=>ce.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(ce.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(L,I[L.source],s.center.lng,s.projection);E=E||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),b=b||this._layerOrderChanged||g===0,this._layerOrderChanged&&this.fire(new a.Event("neworder")),(b||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),s.zoom))&&(this.pauseablePlacement=new $h(s,this._order,b,u,g,v,this.placement,this.fog&&s.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),k=!0),E&&this.pauseablePlacement.placement.setStale()),k||E)for(const O of this._order){const L=this._layers[O];L.type==="symbol"&&this.placement.updateLayerOpacities(L,I[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const s in this._sourceCaches)this._sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,u,g){this.imageManager.getImages(u.icons,g),this._updateTilesForChangedImages();const v=b=>{b&&b.setDependencies(u.tileID.key,u.type,u.icons)};v(this._otherSourceCaches[u.source]),v(this._symbolSourceCaches[u.source])}getGlyphs(s,u,g){this.glyphManager.getGlyphs(u.stacks,g)}getResource(s,u,g){return a.makeRequest(u,g)}_getSourceCache(s){return this._otherSourceCaches[s]}_getLayerSourceCache(s){return s.type==="symbol"?this._symbolSourceCaches[s.source]:this._otherSourceCaches[s.source]}_getSourceCaches(s){const u=[];return this._otherSourceCaches[s]&&u.push(this._otherSourceCaches[s]),this._symbolSourceCaches[s]&&u.push(this._symbolSourceCaches[s]),u}_isSourceCacheLoaded(s){const u=this._getSourceCaches(s);return u.length===0?(this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${s}'`))),!1):u.every(g=>g.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Yo.getSourceType=function(f){return Pn[f]},Yo.setSourceType=function(f,s){Pn[f]=s},Yo.registerForPluginStateChange=a.registerForPluginStateChange;var jh=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Ea="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Cs=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,gc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Es=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Iu={},ll={};const yc=[];cl(jh,yc),cl(Cs,yc),cl(gc,yc),cl(Es,yc),Iu=rr("",Cs),ll=rr(Es,gc);const Xm=rr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Au=jh,Wh=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Gh={background:rr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:rr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:rr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:rr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:rr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:rr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:rr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:rr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:rr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:rr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:rr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:rr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:rr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:rr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:rr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:rr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:rr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:rr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:rr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:rr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:rr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:rr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:rr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:rr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:rr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:rr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ea),skyboxGradient:rr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ea),skyboxCapture:rr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:rr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:rr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function cl(f,s){const u=f.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of u)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=g.split(" ");for(const b of v)s.includes(b)||s.push(b)}}function rr(f,s){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=s.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),v={},b=[...yc];return cl(f,b),cl(s,b),{fragmentSource:f=f.replace(u,(E,k,I,O,L)=>(v[L]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${L}
varying ${I} ${O} ${L};
#else
uniform ${I} ${O} u_${L};
#endif
`:`
#ifdef HAS_UNIFORM_u_${L}
    ${I} ${O} ${L} = u_${L};
#endif
`)),vertexSource:s=s.replace(u,(E,k,I,O,L)=>{const q=O==="float"?"vec2":"vec4",te=L.match(/color/)?"color":q;return v[L]?k==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
attribute ${I} ${q} a_${L};
varying ${I} ${O} ${L};
#else
uniform ${I} ${O} u_${L};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = a_${L};
#else
    ${I} ${O} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = unpack_mix_${te}(a_${L}, u_${L}_t);
#else
    ${I} ${O} ${L} = u_${L};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
attribute ${I} ${q} a_${L};
#else
uniform ${I} ${O} u_${L};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${I} ${O} ${L} = a_${L};
#else
    ${I} ${O} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${I} ${O} ${L} = unpack_mix_${te}(a_${L}, u_${L}_t);
#else
    ${I} ${O} ${L} = u_${L};
#endif
`}),staticAttributes:g,usedDefines:b}}class hv{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(s,u,g,v,b,E,k){this.context=s;let I=this.boundPaintVertexBuffers.length!==v.length;for(let L=0;!I&&L<v.length;L++)this.boundPaintVertexBuffers[L]!==v[L]&&(I=!0);let O=this.boundDynamicVertexBuffers.length!==k.length;for(let L=0;!O&&L<k.length;L++)this.boundDynamicVertexBuffers[L]!==k[L]&&(O=!0);if(!s.extVertexArrayObject||!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==g||I||O||this.boundIndexBuffer!==b||this.boundVertexOffset!==E)this.freshBind(u,g,v,b,E,k);else{s.bindVertexArrayOES.set(this.vao);for(const L of k)L&&L.bind();b&&b.dynamicDraw&&b.bind()}}freshBind(s,u,g,v,b,E){let k;const I=s.numAttributes,O=this.context,L=O.gl;if(O.extVertexArrayObject)this.vao&&this.destroy(),this.vao=O.extVertexArrayObject.createVertexArrayOES(),O.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=s,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=v,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=E;else{k=O.currentNumAttributes||0;for(let q=I;q<k;q++)L.disableVertexAttribArray(q)}u.enableAttributes(L,s),u.bind(),u.setVertexAttribPointers(L,s,b);for(const q of g)q.enableAttributes(L,s),q.bind(),q.setVertexAttribPointers(L,s,b);for(const q of E)q&&(q.enableAttributes(L,s),q.bind(),q.setVertexAttribPointers(L,s,b));v&&v.bind(),O.currentNumAttributes=I}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Hh(f,s){const u=Math.pow(2,s.canonical.z),g=s.canonical.y;return[new a.MercatorCoordinate(0,g/u).toLngLat().lat,new a.MercatorCoordinate(0,(g+1)/u).toLngLat().lat]}function Ym(f,s,u,g,v,b,E){const k=f.context,I=k.gl,O=u.fbo;if(!O)return;f.prepareDrawTile();const L=f.useProgram("hillshade");k.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,O.colorAttachment.get());const q=((le,pe,Z,ie)=>{const ve=Z.paint.get("hillshade-shadow-color"),xe=Z.paint.get("hillshade-highlight-color"),De=Z.paint.get("hillshade-accent-color");let Re=Z.paint.get("hillshade-illumination-direction")*(Math.PI/180);Z.paint.get("hillshade-illumination-anchor")==="viewport"&&(Re-=le.transform.angle);const ze=!le.options.moving;return{u_matrix:ie||le.transform.calculateProjMatrix(pe.tileID.toUnwrapped(),ze),u_image:0,u_latrange:Hh(0,pe.tileID),u_light:[Z.paint.get("hillshade-exaggeration"),Re],u_shadow:ve,u_highlight:xe,u_accent:De}})(f,u,g,f.terrain?s.projMatrix:null);f.prepareDrawProgram(k,L,s.toUnwrapped());const{tileBoundsBuffer:te,tileBoundsIndexBuffer:se,tileBoundsSegments:ce}=f.getTileBoundsBuffers(u);L.draw(k,I.TRIANGLES,v,b,E,a.CullFaceMode.disabled,q,g.id,te,se,ce)}function qh(f,s,u){if(!s.needsDEMTextureUpload)return;const g=f.context,v=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||f.getTileTexture(u.stride);const b=u.getPixels();s.demTexture?s.demTexture.update(b,{premultiply:!1}):s.demTexture=new a.Texture(g,b,v.RGBA,{premultiply:!1}),s.needsDEMTextureUpload=!1}function Km(f,s,u,g,v,b){const E=f.context,k=E.gl;if(!s.dem)return;const I=s.dem;if(E.activeTexture.set(k.TEXTURE1),qh(f,s,I),!s.demTexture)return;s.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);const O=I.dim;E.activeTexture.set(k.TEXTURE0);let L=s.fbo;if(!L){const ce=new a.Texture(E,{width:O,height:O,data:null},k.RGBA);ce.bind(k.LINEAR,k.CLAMP_TO_EDGE),L=s.fbo=E.createFramebuffer(O,O,!0),L.colorAttachment.set(ce.texture)}E.bindFramebuffer.set(L.framebuffer),E.viewport.set([0,0,O,O]);const{tileBoundsBuffer:q,tileBoundsIndexBuffer:te,tileBoundsSegments:se}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(E,k.TRIANGLES,g,v,b,a.CullFaceMode.disabled,((ce,le)=>{const pe=le.stride,Z=a.create();return a.ortho(Z,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Z,Z,[0,-a.EXTENT,0]),{u_matrix:Z,u_image:1,u_dimension:[pe,pe],u_zoom:ce.overscaledZ,u_unpack:le.unpackVector}})(s.tileID,I),u.id,q,te,se),s.needsHillshadePrepare=!1}const Zh=f=>({u_matrix:new a.UniformMatrix4f(f),u_image0:new a.Uniform1i(f),u_skirt_height:new a.Uniform1f(f)}),ul=(f,s)=>({u_matrix:f,u_image0:0,u_skirt_height:s}),Du=(f,s,u,g,v,b,E,k,I,O,L,q,te,se,ce)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:s,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:u,u_zoom_transition:v,u_merc_center:b,u_image0:0,u_frustum_tl:E,u_frustum_tr:k,u_frustum_br:I,u_frustum_bl:O,u_globe_pos:L,u_globe_radius:q,u_viewport:te,u_grid_matrix:ce?Float32Array.from(ce):new Float32Array(9),u_skirt_height:se});function dl(f,s){return f!=null&&s!=null&&!(!f.hasData()||!s.hasData())&&f.demTexture!=null&&s.demTexture!=null&&f.tileID.key!==s.tileID.key}const ks=new class{constructor(){this.operations={}}newMorphing(f,s,u,g,v){if(f in this.operations){const b=this.operations[f];b.to.tileID.key!==u.tileID.key&&(b.queued=u)}else this.operations[f]={startTime:g,phase:0,duration:v,from:s,to:u,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const s=this.operations[f];return{from:s.from,to:s.to,phase:s.phase}}update(f){for(const s in this.operations){const u=this.operations[s];for(u.phase=(f-u.startTime)/u.duration;u.phase>=1||!this._validOp(u);)if(!this._nextOp(u,f)){delete this.operations[s];break}}}_nextOp(f,s){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=s,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},ka={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function zu(f){return 6*Math.pow(1.5,22-f)}function Jm(f,s){const u=1<<f.z;return!s&&(f.x===0||f.x===u-1)||f.y===0||f.y===u-1}const _c=f=>({u_matrix:f});function Xh(f,s,u,g,v){if(v>0){const b=a.exported.now(),E=(b-f.timeAdded)/v,k=s?(b-s.timeAdded)/v:-1,I=u.getSource(),O=g.coveringZoomLevel({tileSize:I.tileSize,roundZoom:I.roundZoom}),L=!s||Math.abs(s.tileID.overscaledZ-O)>Math.abs(f.tileID.overscaledZ-O),q=L&&f.refreshedUponExpiration?1:a.clamp(L?E:1-k,0,1);return f.refreshedUponExpiration&&E>=1&&(f.refreshedUponExpiration=!1),s?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}class Yh extends a.SourceCache{constructor(s){const u={type:"raster-dem",maxzoom:s.transform.maxZoom},g=new Ne(Qn(),null),v=Dn("mock-dem",u,g,s.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(s,u){s.state="loaded",u(null)}}class Ru extends a.SourceCache{constructor(s){const u=Dn("proxy",{type:"geojson",maxzoom:s.transform.maxZoom},new Ne(Qn(),null),s.style);super("proxy",u,!1),u.setEventedParent(this),this.map=this.getSource().map=s,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(s,u,g){if(s.freezeTileCoverage)return;this.transform=s;const v=s.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,E)=>{if(b[E.key]="",!this._tiles[E.key]){const k=new a.Tile(E,this._source.tileSize*E.overscaleFactor(),s.tileZoom);k.state="loaded",this._tiles[E.key]=k}return b},{});for(const b in this._tiles)b in v||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(s){const u=this.proxyCachedFBO[s];if(u!==void 0){const g=Object.values(u);this.renderCachePool.push(...g),delete this.proxyCachedFBO[s]}}deallocRenderCache(){this.renderCache.forEach(s=>s.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Lu extends a.OverscaledTileID{constructor(s,u,g){super(s.overscaledZ,s.wrap,s.canonical.z,s.canonical.x,s.canonical.y),this.proxyTileKey=u,this.projMatrix=g}}class Kh extends a.Elevation{constructor(s,u){super(),this.painter=s,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,v,b]=function(I){const O=new a.StructArrayLayout2i4,L=new a.StructArrayLayout3ui6,q=131;O.reserve(17161),L.reserve(33800);const te=a.EXTENT/128,se=a.EXTENT+te/2,ce=se+te;for(let pe=-te;pe<ce;pe+=te)for(let Z=-te;Z<ce;Z+=te){const ie=Z<0||Z>se||pe<0||pe>se?24575:0,ve=a.clamp(Math.round(Z),0,a.EXTENT),xe=a.clamp(Math.round(pe),0,a.EXTENT);O.emplaceBack(ve+ie,xe)}const le=(pe,Z)=>{const ie=Z*q+pe;L.emplaceBack(ie+1,ie,ie+q),L.emplaceBack(ie+q,ie+q+1,ie+1)};for(let pe=1;pe<129;pe++)for(let Z=1;Z<129;Z++)le(Z,pe);return[0,129].forEach(pe=>{for(let Z=0;Z<130;Z++)le(Z,pe),le(pe,Z)}),[O,L,32768]}(),E=s.context;this.gridBuffer=E.createVertexBuffer(g,a.posAttributes.members),this.gridIndexBuffer=E.createIndexBuffer(v),this.gridSegments=a.SegmentVector.simpleSegment(0,0,g.length,v.length),this.gridNoSkirtSegments=a.SegmentVector.simpleSegment(0,0,g.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ru(u.map),this.orthoMatrix=a.create(),a.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.EXTENT,0,a.EXTENT,0,1);const k=E.gl;this._overlapStencilMode=new a.StencilMode({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=s.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=u,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Yh(u.map)}set style(s){s.on("data",this._onStyleDataEvent.bind(this)),s.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=s,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(s,u,g){if(s&&s.terrain){this._style!==s&&(this.style=s),this.enabled=!0;const v=s.terrain.properties;this.sourceCache=s.terrain.drapeRenderMode===0?this._mockSourceCache:s._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const b=()=>{this.sourceCache.used&&a.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const E=this.getScaledDemTileSize();this.sourceCache.update(u,E,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,b(),this._initializing=!0),b(),u.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(u),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(s){this._findCoveringTileCache[s]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const s=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||s.efficiency!==100&&a.warnOnce(`Terrain render cache efficiency is not optimal (${s.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${s.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(s){s.coord&&s.dataType==="source"?this._clearRenderCacheForTile(s.sourceCacheId,s.coord):s.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const s in this._style._sourceCaches)this._style._sourceCaches[s].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(s=>s.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const s=2*this.proxySourceCache.getSource().tileSize;return[s,s]}set useVertexMorphing(s){this._useVertexMorphing=s}updateTileBinding(s){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const u=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=u.getIds().map(I=>{const O=u.getTileByID(I).tileID;return O.projMatrix=g.calculateProjMatrix(O.toUnwrapped()),O});(function(I,O){const L=O.transform.pointCoordinate(O.transform.getCameraPoint()),q=new a.Point(L.x,L.y);I.sort((te,se)=>{if(se.overscaledZ-te.overscaledZ)return se.overscaledZ-te.overscaledZ;const ce=new a.Point(te.canonical.x+(1<<te.canonical.z)*te.wrap,te.canonical.y),le=new a.Point(se.canonical.x+(1<<se.canonical.z)*se.wrap,se.canonical.y),pe=q.mult(1<<te.canonical.z);return pe.x-=.5,pe.y-=.5,pe.distSqr(ce)-pe.distSqr(le)})})(v,this.painter),this._previousZoom=g.zoom;const b=this.proxyToSource||{};this.proxyToSource={},v.forEach(I=>{this.proxyToSource[I.key]={}}),this.terrainTileForTile={};const E=this._style._sourceCaches;for(const I in E){const O=E[I];if(!O.used||(O!==this.sourceCache&&this.resetTileLookupCache(O.id),this._setupProxiedCoordsForOrtho(O,s[I],b),O.usedForTerrain))continue;const L=s[I];O.getSource().reparseOverscaled&&this._assignTerrainTiles(L)}this.proxiedCoords[u.id]=v.map(I=>new Lu(I,I.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1,this._updateTimestamp=a.exported.now();const k={};this._visibleDemTiles=[];for(const I of this.proxyCoords){const O=this.terrainTileForTile[I.key];if(!O)continue;const L=O.tileID.key;L in k||(this._visibleDemTiles.push(O),k[L]=L)}}_assignTerrainTiles(s){this._initializing||s.forEach(u=>{if(this.terrainTileForTile[u.key])return;const g=this._findTileCoveringTileID(u,this.sourceCache);g&&(this.terrainTileForTile[u.key]=g)})}_prepareDEMTextures(){const s=this.painter.context,u=s.gl;for(const g in this.terrainTileForTile){const v=this.terrainTileForTile[g],b=v.dem;!b||v.demTexture&&!v.needsDEMTextureUpload||(s.activeTexture.set(u.TEXTURE1),qh(this.painter,v,b))}}_prepareDemTileUniforms(s,u,g,v){if(!u||u.demTexture==null)return!1;const b=s.tileID.canonical,E=Math.pow(2,u.tileID.canonical.z-b.z),k=v||"";return g[`u_dem_tl${k}`]=[b.x*E%1,b.y*E%1],g[`u_dem_scale${k}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const s=this.painter.context,u=s.gl;if(!this._emptyDepthBufferTexture){const g=new a.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new a.Texture(s,g,u.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let s=0;const u=this._visibleDemTiles.reduce((g,v)=>{if(!v.dem)return g;const b=v.dem.tree.minimums[0];return b>0&&s++,g+b},0);return s?u/s:0}_updateEmptyDEMTexture(){const s=this.painter.context,u=s.gl;s.activeTexture.set(u.TEXTURE2);const g=this._getLoadedAreaMinimum(),v=new a.RGBAImage({width:1,height:1},new Uint8Array(a.DEMData.pack(g,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(v,{premultiply:!1}):b=this._emptyDEMTexture=new a.Texture(s,v,u.RGBA,{premultiply:!1}),b}setupElevationDraw(s,u,g){const v=this.painter.context,b=v.gl,E=(k=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:a.DEMData.getUnpackVector(k),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var k;E.u_dem_size=this.sourceCache.getSource().tileSize,E.u_exaggeration=this.exaggeration();let I=null,O=null,L=1;if(g&&g.morphing&&this._useVertexMorphing){const q=g.morphing.srcDemTile,te=g.morphing.dstDemTile;L=g.morphing.phase,q&&te&&(this._prepareDemTileUniforms(s,q,E,"_prev")&&(O=q),this._prepareDemTileUniforms(s,te,E)&&(I=te))}if(O&&I?(v.activeTexture.set(b.TEXTURE2),I.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),v.activeTexture.set(b.TEXTURE4),O.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),E.u_dem_lerp=L):(I=this.terrainTileForTile[s.tileID.key],v.activeTexture.set(b.TEXTURE2),(this._prepareDemTileUniforms(s,I,E)?I.demTexture:this.emptyDEMTexture).bind(b.NEAREST,b.CLAMP_TO_EDGE)),v.activeTexture.set(b.TEXTURE3),g&&g.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),this._depthFBO&&(E.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),E.u_depth_size_inv=[1,1]),g&&g.useMeterToDem&&I){const q=(1<<I.tileID.canonical.z)*a.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=q}if(g&&g.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),u.setTerrainUniformValues(v,E),this.painter.transform.projection.name==="globe"){const q=this.globeUniformValues(this.painter.transform,s.tileID.canonical,g&&g.useDenormalizedUpVectorScale);u.setGlobeUniformValues(v,q)}}globeUniformValues(s,u,g){const v=s.projection;return{u_tile_tl_up:v.upVector(u,0,0),u_tile_tr_up:v.upVector(u,a.EXTENT,0),u_tile_br_up:v.upVector(u,a.EXTENT,a.EXTENT),u_tile_bl_up:v.upVector(u,0,a.EXTENT),u_tile_up_scale:g?a.globeMetersToEcef(1):v.upVectorScale(u,s.center.lat,s.worldSize).metersToTile}}renderToBackBuffer(s){const u=this.painter,g=this.painter.context;s.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),u.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,b,E,k,I){if(v.transform.projection.name==="globe")(function(O,L,q,te,se){const ce=O.context,le=ce.gl;let pe,Z;const ie=O.options.showTerrainWireframe?2:0,ve=O.transform,xe=a.globeUseCustomAntiAliasing(O,ce,ve),De=(Et,Xe)=>{if(Z===Et)return;const pt=[ka[Et],"PROJECTION_GLOBE_VIEW"];xe&&pt.push("CUSTOM_ANTIALIASING"),Xe&&pt.push(ka[ie]),pe=O.useProgram("globeRaster",null,pt),Z=Et},Re=O.colorModeForRenderPass(),ze=new a.DepthMode(le.LEQUAL,a.DepthMode.ReadWrite,O.depthRangeFor3D);ks.update(se);const Ve=a.calculateGlobeMercatorMatrix(ve),Ue=[a.mercatorXfromLng(ve.center.lng),a.mercatorYfromLat(ve.center.lat)],Ye=ie?[!1,!0]:[!1],kt=O.globeSharedBuffers,qe=[ve.width*a.exported.devicePixelRatio,ve.height*a.exported.devicePixelRatio],ft=Float32Array.from(ve.globeMatrix),et={useDenormalizedUpVectorScale:!0};if(Ye.forEach(Et=>{const Xe=O.transform,pt=zu(Xe.zoom)*L.exaggeration();Z=-1;const It=Et?le.LINES:le.TRIANGLES;for(const wt of te){const At=q.getTile(wt),pn=a.StencilMode.disabled,In=L.prevTerrainTileForTile[wt.key],rn=L.terrainTileForTile[wt.key];dl(In,rn)&&ks.newMorphing(wt.key,In,rn,se,250),ce.activeTexture.set(le.TEXTURE0),At.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);const wn=ks.getMorphValuesForProxy(wt.key),Gn=wn?1:0;wn&&a.extend$1(et,{morphing:{srcDemTile:wn.from,dstDemTile:wn.to,phase:a.easeCubicInOut(wn.phase)}});const Vn=a.tileCornersToBounds(wt.canonical),cn=a.getLatitudinalLod(Vn.getCenter().lat),or=a.getGridMatrix(wt.canonical,Vn,cn,Xe.worldSize/Xe._pixelsPerMercatorPixel),cr=a.globeNormalizeECEF(a.globeTileBounds(wt.canonical)),ur=Du(Xe.projMatrix,ft,Ve,cr,a.globeToMercatorTransition(Xe.zoom),Ue,Xe.frustumCorners.TL,Xe.frustumCorners.TR,Xe.frustumCorners.BR,Xe.frustumCorners.BL,Xe.globeCenterInViewSpace,Xe.globeRadius,qe,pt,or);if(De(Gn,Et),L.setupElevationDraw(At,pe,et),O.prepareDrawProgram(ce,pe,wt.toUnwrapped()),kt){const[dr,Ii,gi]=Et?kt.getWirefameBuffers(O.context,cn):kt.getGridBuffers(cn,pt!==0);pe.draw(ce,It,ze,pn,Re,a.CullFaceMode.backCCW,ur,"globe_raster",dr,Ii,gi)}}}),kt){const Et=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];xe&&Et.push("CUSTOM_ANTIALIASING"),pe=O.useProgram("globeRaster",null,Et);for(const Xe of te){const{x:pt,y:It,z:wt}=Xe.canonical,At=It===0,pn=It===(1<<wt)-1,[In,rn,wn,Gn]=kt.getPoleBuffers(wt);if(Gn&&(At||pn)){const Vn=q.getTile(Xe);ce.activeTexture.set(le.TEXTURE0),Vn.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);let cn=a.globePoleMatrixForTile(wt,pt,ve);const or=a.globeNormalizeECEF(a.globeTileBounds(Xe.canonical)),cr=(ur,dr)=>ur.draw(ce,le.TRIANGLES,ze,a.StencilMode.disabled,Re,a.CullFaceMode.disabled,Du(ve.projMatrix,cn,cn,or,0,Ue,ve.frustumCorners.TL,ve.frustumCorners.TR,ve.frustumCorners.BR,ve.frustumCorners.BL,ve.globeCenterInViewSpace,ve.globeRadius,qe,0),"globe_pole_raster",dr,wn,Gn);L.setupElevationDraw(Vn,pe,et),O.prepareDrawProgram(ce,pe,Xe.toUnwrapped()),At&&cr(pe,In),pn&&(cn=a.scale(a.create(),cn,[1,-1,1]),cr(pe,rn))}}}})(v,b,E,k,I);else{const O=v.context,L=O.gl;let q,te;const se=v.options.showTerrainWireframe?2:0,ce=(ve,xe)=>{if(te===ve)return;const De=[ka[ve]];xe&&De.push(ka[se]),q=v.useProgram("terrainRaster",null,De),te=ve},le=v.colorModeForRenderPass(),pe=new a.DepthMode(L.LEQUAL,a.DepthMode.ReadWrite,v.depthRangeFor3D);ks.update(I);const Z=v.transform,ie=zu(Z.zoom)*b.exaggeration();(se?[!1,!0]:[!1]).forEach(ve=>{te=-1;const xe=ve?L.LINES:L.TRIANGLES,[De,Re]=ve?b.getWirefameBuffer():[b.gridIndexBuffer,b.gridSegments];for(const ze of k){const Ve=E.getTile(ze),Ue=a.StencilMode.disabled,Ye=b.prevTerrainTileForTile[ze.key],kt=b.terrainTileForTile[ze.key];dl(Ye,kt)&&ks.newMorphing(ze.key,Ye,kt,I,250),O.activeTexture.set(L.TEXTURE0),Ve.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST);const qe=ks.getMorphValuesForProxy(ze.key),ft=qe?1:0;let et;qe&&(et={morphing:{srcDemTile:qe.from,dstDemTile:qe.to,phase:a.easeCubicInOut(qe.phase)}});const Et=ul(ze.projMatrix,Jm(ze.canonical,Z.renderWorldCopies)?ie/10:ie);ce(ft,ve),b.setupElevationDraw(Ve,q,et),v.prepareDrawProgram(O,q,ze.toUnwrapped()),q.draw(O,xe,pe,Ue,le,a.CullFaceMode.backCCW,Et,"terrain_raster",b.gridBuffer,De,Re)}})}}(u,this,this.proxySourceCache,s,this._updateTimestamp),this.renderingToTexture=!0,u.gpuTimingDeferredRenderEnd(),s.splice(0,s.length))}renderBatch(s){if(this._drapedRenderBatches.length===0)return s+1;this.renderingToTexture=!0;const u=this.painter,g=this.painter.context,v=this.proxySourceCache,b=this.proxiedCoords[v.id],E=this._drapedRenderBatches.shift(),k=[],I=u.style.order;let O=0;for(const L of b){const q=v.getTileByID(L.proxyTileKey),te=v.proxyCachedFBO[L.key]?v.proxyCachedFBO[L.key][s]:void 0,se=te!==void 0?v.renderCache[te]:this.pool[O++],ce=te!==void 0;if(q.texture=se.tex,ce&&!se.dirty){k.push(q.tileID);continue}let le;g.bindFramebuffer.set(se.fb.framebuffer),this.renderedToTile=!1,se.dirty&&(g.clear({color:a.Color.transparent,stencil:0}),se.dirty=!1);for(let pe=E.start;pe<=E.end;++pe){const Z=u.style._layers[I[pe]];if(Z.isHidden(u.transform.zoom))continue;const ie=u.style._getLayerSourceCache(Z),ve=ie?this.proxyToSource[L.key][ie.id]:[L];if(!ve)continue;const xe=ve;g.viewport.set([0,0,se.fb.width,se.fb.height]),le!==(ie?ie.id:null)&&(this._setupStencil(se,ve,Z,ie),le=ie?ie.id:null),u.renderLayer(u,ie,Z,xe)}this.renderedToTile?(se.dirty=!0,k.push(q.tileID)):ce||--O,O===5&&(O=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),E.end+1}postRender(){}renderCacheEfficiency(s){const u=s.order.length;if(u===0)return{efficiency:100};let g,v=0,b=0,E=!1;for(let k=0;k<u;++k){const I=s._layers[s.order[k]];this._style.isLayerDraped(I)?(E&&++v,++b):E||(E=!0,g=I.id)}return b===0?{efficiency:100}:{efficiency:100*(1-v/b),firstUndrapedLayer:g}}getMinElevationBelowMSL(){let s=0;return this._visibleDemTiles.filter(u=>u.dem).forEach(u=>{s=Math.min(s,u.dem.tree.minimums[0])}),s===0?s:(s-30)*this._exaggeration}raycast(s,u,g){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const E=b.tileID,k=1<<E.overscaledZ,{x:I,y:O}=E.canonical,L=I/k,q=(I+1)/k,te=O/k,se=(O+1)/k;return{minx:L,miny:te,maxx:q,maxy:se,t:b.dem.tree.raycastRoot(L,te,q,se,s,u,g),tile:b}});v.sort((b,E)=>(b.t!==null?b.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const b of v){if(b.t==null)return null;const E=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,s,u,g);if(E!=null)return E}return null}_createFBO(){const s=this.painter.context,u=s.gl,g=this.drapeBufferSize;s.activeTexture.set(u.TEXTURE0);const v=new a.Texture(s,{width:g[0],height:g[1],data:null},u.RGBA);v.bind(u.LINEAR,u.CLAMP_TO_EDGE);const b=s.createFramebuffer(g[0],g[1],!1);return b.colorAttachment.set(v.texture),b.depthAttachment=new Oe(s,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=s.createRenderbuffer(s.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),s.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),s.extTextureFilterAnisotropic&&!s.extTextureFilterAnisotropicForceOff&&u.texParameterf(u.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax),{fb:b,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const s in this._style._sourceCaches)if(this._style._sourceCaches[s].hasTransition())return!0;return this._style.order.some(s=>{const u=this._style._layers[s],g=u.isHidden(this.painter.transform.zoom);return u.type==="custom"?!g&&u.shouldRedrape():!g&&u.hasTransition()})}_clearLineLayersFromRenderCache(){let s=!1;for(const g of this._style._getSources())if(g instanceof zt){s=!0;break}if(!s)return;const u={};for(let g=0;g<this._style.order.length;++g){const v=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(v);if(b&&!u[b.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof a.ZoomDependentExpression){u[b.id]=!0;for(const E of this.proxyCoords){const k=this.proxyToSource[E.key][b.id];if(k)for(const I of k)this._clearRenderCacheForTile(b.id,I)}}}}_clearRasterLayersFromRenderCache(){let s=!1;for(const g in this._style._sourceCaches)if(this._style._sourceCaches[g]._source instanceof Mt){s=!0;break}if(!s)return;const u={};for(let g=0;g<this._style.order.length;++g){const v=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(v);if(!b||u[b.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const E=v.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const I=this.proxyToSource[k.key][b.id];if(I)for(const O of I){const L=Xh(b.getTile(O),b.findLoadedParent(O,0),b,this.painter.transform,E);(L.opacity!==1||L.mix!==0)&&this._clearRenderCacheForTile(b.id,O)}}}}_setupDrapedRenderBatches(){const s=this._style.order,u=s.length;if(u===0)return;const g=[];let v,b=0,E=this._style._layers[s[b]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++b<u;)E=this._style._layers[s[b]];for(;b<u;++b){const k=this._style._layers[s[b]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?v===void 0&&(v=b):v!==void 0&&(g.push({start:v,end:b-1}),v=void 0))}v!==void 0&&g.push({start:v,end:b-1}),this._drapedRenderBatches=g}_setupRenderCache(s){const u=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,u.renderCache.length>u.renderCachePool.length){const E=Object.values(u.proxyCachedFBO);u.proxyCachedFBO={};for(let k=0;k<E.length;++k){const I=Object.values(E[k]);u.renderCachePool.push(...I)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,v=this._tilesDirty;for(let E=g.length-1;E>=0;E--){const k=g[E];if(u.getTileByID(k.key),u.proxyCachedFBO[k.key]!==void 0){const I=s[k.key],O=this.proxyToSource[k.key];let L=0;for(const q in O){const te=O[q],se=I[q];if(!se||se.length!==te.length||te.some((ce,le)=>ce!==se[le]||v[q]&&v[q].hasOwnProperty(ce.key))){L=-1;break}++L}for(const q in u.proxyCachedFBO[k.key])u.renderCache[u.proxyCachedFBO[k.key][q]].dirty=L<0||L!==Object.values(I).length}}const b=[...this._drapedRenderBatches];b.sort((E,k)=>k.end-k.start-(E.end-E.start));for(const E of b)for(const k of g){if(u.proxyCachedFBO[k.key])continue;let I=u.renderCachePool.pop();I===void 0&&u.renderCache.length<50&&(I=u.renderCache.length,u.renderCache.push(this._createFBO())),I!==void 0&&(u.proxyCachedFBO[k.key]={},u.proxyCachedFBO[k.key][E.start]=I,u.renderCache[I].dirty=!0)}this._tilesDirty={}}_setupStencil(s,u,g,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,E=b.gl;if(u.length<=1)return void(this._overlapStencilType=!1);let k;if(g.isTileClipped())k=u.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(u[0].overscaledZ>u[u.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(u,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(s){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[s.key]),this._overlapStencilMode):a.StencilMode.disabled}_renderTileClippingMasks(s,u){const g=this.painter,v=this.painter.context,b=v.gl;g._tileClippingMaskIDs={},v.setColorMode(a.ColorMode.disabled),v.setDepthMode(a.DepthMode.disabled);const E=g.useProgram("clippingMask");for(const k of s){const I=g._tileClippingMaskIDs[k.key]=--u;E.draw(v,b.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:b.ALWAYS,mask:0},I,255,b.KEEP,b.KEEP,b.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,_c(k.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(s){const u=this.painter.transform;if(s.x<0||s.x>u.width||s.y<0||s.y>u.height)return null;const g=[s.x,s.y,1,1];a.transformMat4$1(g,g,u.pixelMatrixInverse),a.scale$1(g,g,1/g[3]),g[0]/=u.worldSize,g[1]/=u.worldSize;const v=u._camera.position,b=a.mercatorZfromAltitude(1,u.center.lat),E=[v[0],v[1],v[2]/b,0],k=a.subtract([],g.slice(0,3),E);a.normalize(k,k);const I=this.raycast(E,k,this._exaggeration);return I!==null&&I?(a.scaleAndAdd(E,E,k,I),E[3]=E[2],E[2]*=b,E):null}drawDepth(){const s=this.painter,u=s.context,g=this.proxySourceCache,v=Math.ceil(s.width),b=Math.ceil(s.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===b||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const E=u.gl,k=u.createFramebuffer(v,b,!0);u.activeTexture.set(E.TEXTURE0);const I=new a.Texture(u,{width:v,height:b,data:null},E.RGBA);I.bind(E.NEAREST,E.CLAMP_TO_EDGE),k.colorAttachment.set(I.texture);const O=u.createRenderbuffer(u.gl.DEPTH_COMPONENT16,v,b);k.depthAttachment.set(O),this._depthFBO=k,this._depthTexture=I}u.bindFramebuffer.set(this._depthFBO.framebuffer),u.viewport.set([0,0,v,b]),function(E,k,I,O){if(E.transform.projection.name==="globe")return;const L=E.context,q=L.gl;L.clear({depth:1});const te=E.useProgram("terrainDepth"),se=new a.DepthMode(q.LESS,a.DepthMode.ReadWrite,E.depthRangeFor3D);for(const ce of O){const le=I.getTile(ce),pe=ul(ce.projMatrix,0);k.setupElevationDraw(le,te),te.draw(L,q.TRIANGLES,se,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.backCCW,pe,"terrain_depth",k.gridBuffer,k.gridIndexBuffer,k.gridNoSkirtSegments)}}(s,this,g,this.proxyCoords)}_setupProxiedCoordsForOrtho(s,u,g){if(s.getSource()instanceof Fn)return this._setupProxiedCoordsForImageSource(s,u,g);this._findCoveringTileCache[s.id]=this._findCoveringTileCache[s.id]||{};const v=this.proxiedCoords[s.id]=[],b=this.proxyCoords;for(let k=0;k<b.length;k++){const I=b[k],O=this._findTileCoveringTileID(I,s);if(O){const L=this._createProxiedId(I,O,g[I.key]&&g[I.key][s.id]);v.push(L),this.proxyToSource[I.key][s.id]=[L]}}let E=!1;for(let k=0;k<u.length;k++){const I=s.getTile(u[k]);if(!I||!I.hasData())continue;const O=this._findTileCoveringTileID(I.tileID,this.proxySourceCache);if(O&&O.tileID.canonical.z!==I.tileID.canonical.z){const L=this.proxyToSource[O.tileID.key][s.id],q=this._createProxiedId(O.tileID,I,g[O.tileID.key]&&g[O.tileID.key][s.id]);L?L.splice(L.length-1,0,q):this.proxyToSource[O.tileID.key][s.id]=[q],v.push(q),E=!0}}this._sourceTilesOverlap[s.id]=E}_setupProxiedCoordsForImageSource(s,u,g){if(!s.getSource().loaded())return;const v=this.proxiedCoords[s.id]=[],b=this.proxyCoords,E=s.getSource(),k=new a.Point(E.tileID.x,E.tileID.y)._div(1<<E.tileID.z),I=E.coordinates.map(a.MercatorCoordinate.fromLngLat).reduce((L,q)=>(L.min.x=Math.min(L.min.x,q.x-k.x),L.min.y=Math.min(L.min.y,q.y-k.y),L.max.x=Math.max(L.max.x,q.x-k.x),L.max.y=Math.max(L.max.y,q.y-k.y),L),{min:new a.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),O=(L,q)=>{const te=L.wrap+L.canonical.x/(1<<L.canonical.z),se=L.canonical.y/(1<<L.canonical.z),ce=a.EXTENT/(1<<L.canonical.z),le=q.wrap+q.canonical.x/(1<<q.canonical.z),pe=q.canonical.y/(1<<q.canonical.z);return te+ce<le+I.min.x||te>le+I.max.x||se+ce<pe+I.min.y||se>pe+I.max.y};for(let L=0;L<b.length;L++){const q=b[L];for(let te=0;te<u.length;te++){const se=s.getTile(u[te]);if(!se||!se.hasData()||O(q,se.tileID))continue;const ce=this._createProxiedId(q,se,g[q.key]&&g[q.key][s.id]),le=this.proxyToSource[q.key][s.id];le?le.push(ce):this.proxyToSource[q.key][s.id]=[ce],v.push(ce)}}}_createProxiedId(s,u,g){let v=this.orthoMatrix;if(g){const b=g.find(E=>E.key===u.tileID.key);if(b)return b}if(u.tileID.key!==s.key){const b=s.canonical.z-u.tileID.canonical.z;let E,k,I;v=a.create();const O=u.tileID.wrap-s.wrap<<s.overscaledZ;b>0?(E=a.EXTENT>>b,k=E*((u.tileID.canonical.x<<b)-s.canonical.x+O),I=E*((u.tileID.canonical.y<<b)-s.canonical.y)):(E=a.EXTENT<<-b,k=a.EXTENT*(u.tileID.canonical.x-(s.canonical.x+O<<-b)),I=a.EXTENT*(u.tileID.canonical.y-(s.canonical.y<<-b))),a.ortho(v,0,E,0,E,0,1),a.translate(v,v,[k,I,0])}return new Lu(u.tileID,s.key,v)}_findTileCoveringTileID(s,u){let g=u.getTile(s);if(g&&g.hasData())return g;const v=this._findCoveringTileCache[u.id],b=v[s.key];if(g=b?u.getTileByID(b):null,g&&g.hasData()||b===null)return g;let E=g?g.tileID:s,k=E.overscaledZ;const I=u.getSource().minzoom,O=[];if(!b){const q=u.getSource().maxzoom;if(s.canonical.z>=q){const te=s.canonical.z-q;u.getSource().reparseOverscaled?(k=Math.max(s.canonical.z+2,u.transform.tileZoom),E=new a.OverscaledTileID(k,s.wrap,q,s.canonical.x>>te,s.canonical.y>>te)):te!==0&&(k=q,E=new a.OverscaledTileID(k,s.wrap,q,s.canonical.x>>te,s.canonical.y>>te))}E.key!==s.key&&(O.push(E.key),g=u.getTile(E))}const L=q=>{O.forEach(te=>{v[te]=q}),O.length=0};for(k-=1;k>=I&&(!g||!g.hasData());k--){g&&L(g.tileID.key);const q=E.calculateScaledKey(k);if(g=u.getTileByID(q),g&&g.hasData())break;const te=v[q];if(te===null)break;te===void 0?O.push(q):g=u.getTileByID(te)}return L(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(s){return this.enabled?this._findTileCoveringTileID(s,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(s,u){let g=this._tilesDirty[s];g||(g=this._tilesDirty[s]={}),g[u.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const s=function(u){let g=0;const v=new a.StructArrayLayout2ui4,b=131;for(let E=1;E<129;E++){for(let k=1;k<129;k++)g=E*b+k,v.emplaceBack(g,g+1),v.emplaceBack(g,g+b),v.emplaceBack(g+1,g+b),E===128&&v.emplaceBack(g+b,g+b+1);v.emplaceBack(g+1,g+1+b)}return v}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(s),this.wireframeSegments=a.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,s.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Xn{static cacheKey(s,u,g,v){let b=`${u}${v?v.cacheKey:""}`;for(const E of g)s.usedDefines.includes(E)&&(b+=`/${E}`);return b}constructor(s,u,g,v,b,E){const k=s.gl;this.program=k.createProgram();const I=function(Z){const ie=[];for(let ve=0;ve<Z.length;ve++){if(Z[ve]===null)continue;const xe=Z[ve].split(" ");ie.push(xe.pop())}return ie}(g.staticAttributes),O=v?v.getBinderAttributes():[],L=I.concat(O);let q=v?v.defines():[];q=q.concat(E.map(Z=>`#define ${Z}`));const te=s.isWebGL2?`#version 300 es
`:"",se=te+q.concat(s.extStandardDerivatives&&te.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Wh):Wh,Wh,Au,Xm.fragmentSource,ll.fragmentSource,g.fragmentSource).join(`
`),ce=te+q.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Au,Xm.vertexSource,ll.vertexSource,Iu.vertexSource,g.vertexSource).join(`
`),le=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(le,se),k.compileShader(le),k.attachShader(this.program,le);const pe=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(pe,ce),k.compileShader(pe),k.attachShader(this.program,pe),this.attributes={},this.numAttributes=L.length;for(let Z=0;Z<this.numAttributes;Z++)L[Z]&&(k.bindAttribLocation(this.program,Z,L[Z]),this.attributes[L[Z]]=Z);k.linkProgram(this.program),k.deleteShader(pe),k.deleteShader(le),this.fixedUniforms=b(s),this.binderUniforms=v?v.getUniforms(s):[],E.includes("TERRAIN")&&(this.terrainUniforms=(Z=>({u_dem:new a.Uniform1i(Z),u_dem_prev:new a.Uniform1i(Z),u_dem_unpack:new a.Uniform4f(Z),u_dem_tl:new a.Uniform2f(Z),u_dem_scale:new a.Uniform1f(Z),u_dem_tl_prev:new a.Uniform2f(Z),u_dem_scale_prev:new a.Uniform1f(Z),u_dem_size:new a.Uniform1f(Z),u_dem_lerp:new a.Uniform1f(Z),u_exaggeration:new a.Uniform1f(Z),u_depth:new a.Uniform1i(Z),u_depth_size_inv:new a.Uniform2f(Z),u_meter_to_dem:new a.Uniform1f(Z),u_label_plane_matrix_inv:new a.UniformMatrix4f(Z)}))(s)),E.includes("GLOBE")&&(this.globeUniforms=(Z=>({u_tile_tl_up:new a.Uniform3f(Z),u_tile_tr_up:new a.Uniform3f(Z),u_tile_br_up:new a.Uniform3f(Z),u_tile_bl_up:new a.Uniform3f(Z),u_tile_up_scale:new a.Uniform1f(Z)}))(s)),E.includes("FOG")&&(this.fogUniforms=(Z=>({u_fog_matrix:new a.UniformMatrix4f(Z),u_fog_range:new a.Uniform2f(Z),u_fog_color:new a.Uniform4f(Z),u_fog_horizon_blend:new a.Uniform1f(Z),u_fog_temporal_offset:new a.Uniform1f(Z),u_frustum_tl:new a.Uniform3f(Z),u_frustum_tr:new a.Uniform3f(Z),u_frustum_br:new a.Uniform3f(Z),u_frustum_bl:new a.Uniform3f(Z),u_globe_pos:new a.Uniform3f(Z),u_globe_radius:new a.Uniform1f(Z),u_globe_transition:new a.Uniform1f(Z),u_is_globe:new a.Uniform1i(Z),u_viewport:new a.Uniform2f(Z)}))(s))}}setTerrainUniformValues(s,u){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const v in u)g[v]&&g[v].set(this.program,v,u[v])}}setGlobeUniformValues(s,u){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const v in u)g[v]&&g[v].set(this.program,v,u[v])}}setFogUniformValues(s,u){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const v in u)g[v].set(this.program,v,u[v])}}draw(s,u,g,v,b,E,k,I,O,L,q,te,se,ce,le){const pe=s.gl;if(this.failedToCreate)return;s.program.set(this.program),s.setDepthMode(g),s.setStencilMode(v),s.setColorMode(b),s.setCullFace(E);for(const ie of Object.keys(this.fixedUniforms))this.fixedUniforms[ie].set(this.program,ie,k[ie]);ce&&ce.setUniforms(this.program,s,this.binderUniforms,te,{zoom:se});const Z={[pe.LINES]:2,[pe.TRIANGLES]:3,[pe.LINE_STRIP]:1}[u];for(const ie of q.get()){const ve=ie.vaos||(ie.vaos={});(ve[I]||(ve[I]=new hv)).bind(s,this,O,ce?ce.getPaintVertexBuffers():[],L,ie.vertexOffset,le||[]),pe.drawElements(u,ie.primitiveLength*Z,pe.UNSIGNED_SHORT,ie.primitiveOffset*Z*2)}}}function vc(f,s){const u=Math.pow(2,s.tileID.overscaledZ),g=s.tileSize*Math.pow(2,f.transform.tileZoom)/u,v=g*(s.tileID.canonical.x+s.tileID.wrap*u),b=g*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_tile_units_to_pixels:1/nt(s,1,f.transform.tileZoom),u_pixel_coord_upper:[v>>16,b>>16],u_pixel_coord_lower:[65535&v,65535&b]}}const Qm=a.create(),Jh=(f,s,u,g,v,b,E,k,I,O,L)=>{const q=s.style.light,te=q.properties.get("position"),se=[te.x,te.y,te.z],ce=a.create$1();q.properties.get("anchor")==="viewport"&&(a.fromRotation(ce,-s.transform.angle),a.transformMat3(se,se,ce));const le=q.properties.get("color"),pe=s.transform,Z={u_matrix:f,u_lightpos:se,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[le.r,le.g,le.b],u_vertical_gradient:+u,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Qm,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:v,u_edge_radius:b};return pe.projection.name==="globe"&&(Z.u_tile_id=[E.canonical.x,E.canonical.y,1<<E.canonical.z],Z.u_zoom_transition=I,Z.u_inv_rot_matrix=L,Z.u_merc_center=O,Z.u_up_dir=pe.projection.upVector(new a.CanonicalTileID(0,0,0),O[0]*a.EXTENT,O[1]*a.EXTENT),Z.u_height_lift=k),Z},eg=(f,s,u,g,v,b,E,k,I,O,L,q)=>{const te=Jh(f,s,u,g,v,b,E,I,O,L,q),se={u_height_factor:-Math.pow(2,E.overscaledZ)/k.tileSize/8};return a.extend(te,vc(s,k),se)},Pa=f=>({u_matrix:f}),Qh=(f,s,u)=>a.extend(Pa(f),vc(s,u)),pv=(f,s)=>({u_matrix:f,u_world:s}),fv=(f,s,u,g)=>a.extend(Qh(f,s,u),{u_world:g}),mv=a.create(),ep=(f,s,u,g,v,b)=>{const E=f.transform,k=E.projection.name==="globe";let I;if(b.paint.get("circle-pitch-alignment")==="map")if(k){const L=a.globePixelsToTileUnits(E.zoom,s.canonical)*E._pixelsPerMercatorPixel;I=Float32Array.from([L,0,0,L])}else I=E.calculatePixelsToTileUnitsMatrix(u);else I=new Float32Array([E.pixelsToGLUnits[0],0,0,E.pixelsToGLUnits[1]]);const O={u_camera_to_center_distance:E.cameraToCenterDistance,u_matrix:f.translatePosMatrix(s.projMatrix,u,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:a.exported.devicePixelRatio,u_extrude_scale:I,u_inv_rot_matrix:mv,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){O.u_inv_rot_matrix=g,O.u_merc_center=v,O.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],O.u_zoom_transition=a.globeToMercatorTransition(E.zoom);const L=v[0]*a.EXTENT,q=v[1]*a.EXTENT;O.u_up_dir=E.projection.upVector(new a.CanonicalTileID(0,0,0),L,q)}return O},tp=f=>{const s=[];return f.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s},np=(f,s,u,g)=>{const v=a.EXTENT/u.tileSize;return{u_matrix:f,u_camera_to_center_distance:s.getCameraToCenterDistance(g),u_extrude_scale:[s.pixelsToGLUnits[0]/v,s.pixelsToGLUnits[1]/v]}},Ou=(f,s,u=1)=>({u_matrix:f,u_color:s,u_overlay:0,u_overlay_scale:u}),tg=a.create(),ng=(f,s,u,g,v,b,E)=>{const k=f.transform,I=k.projection.name==="globe",O=I?a.globePixelsToTileUnits(k.zoom,s.canonical)*k._pixelsPerMercatorPixel:nt(u,1,b),L={u_matrix:s.projMatrix,u_extrude_scale:O,u_intensity:E,u_inv_rot_matrix:tg,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(I){L.u_inv_rot_matrix=g,L.u_merc_center=v,L.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],L.u_zoom_transition=a.globeToMercatorTransition(k.zoom);const q=v[0]*a.EXTENT,te=v[1]*a.EXTENT;L.u_up_dir=k.projection.upVector(new a.CanonicalTileID(0,0,0),q,te)}return L},gv=(f,s,u,g,v,b,E)=>{const k=f.transform,I=k.calculatePixelsToTileUnitsMatrix(s);return{u_matrix:rp(f,s,u,g),u_pixels_to_tile_units:I,u_device_pixel_ratio:b,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:v,u_texsize:bc(u)?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:hl(s,f.transform),u_alpha_discard_threshold:0,u_trim_offset:E}},xc=(f,s,u,g,v)=>{const b=f.transform;return{u_matrix:rp(f,s,u,g),u_texsize:s.imageAtlasTexture.size,u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:v,u_image:0,u_tile_units_to_pixels:hl(s,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function hl(f,s){return 1/nt(f,1,s.tileZoom)}function rp(f,s,u,g){return f.translatePosMatrix(g||s.tileID.projMatrix,s,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}function bc(f){const s=f.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}const ip=(f,s,u,g,v,b)=>{return{u_matrix:f,u_tl_parent:s,u_scale_parent:u,u_fade_t:g.mix,u_opacity:g.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(k=v.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(E=v.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Ko(v.paint.get("raster-hue-rotate")),u_perspective_transform:b};var E,k};function Ko(f){f*=Math.PI/180;const s=Math.sin(f),u=Math.cos(f);return[(2*u+1)/3,(-Math.sqrt(3)*s-u+1)/3,(Math.sqrt(3)*s-u+1)/3]}const Bu=a.create(),op=(f,s,u,g,v,b,E,k,I,O,L,q,te,se,ce,le)=>{const pe=v.transform,Z={u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:pe.cameraToCenterDistance,u_rotate_symbol:+u,u_aspect_ratio:pe.width/pe.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:E,u_coord_matrix:k,u_is_text:+I,u_pitch_with_map:+g,u_texsize:O,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Bu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Bu,u_up_vector:[0,-1,0]};return le.name==="globe"&&(Z.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],Z.u_zoom_transition=q,Z.u_inv_rot_matrix=se,Z.u_merc_center=te,Z.u_camera_forward=pe._camera.forward(),Z.u_ecef_origin=a.globeECEFOrigin(pe.globeMatrix,L.toUnwrapped()),Z.u_tile_matrix=Float32Array.from(pe.globeMatrix),Z.u_up_vector=ce),Z},Fu=(f,s,u,g,v,b,E,k,I,O,L,q,te,se,ce,le,pe)=>a.extend(op(f,s,u,g,v,b,E,k,I,O,q,te,se,ce,le,pe),{u_gamma_scale:g?v.transform.cameraToCenterDistance*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:a.exported.devicePixelRatio,u_is_halo:+L}),rg=(f,s,u,g,v,b,E,k,I,O,L,q,te,se,ce,le)=>a.extend(Fu(f,s,u,g,v,b,E,k,!0,I,!0,L,q,te,se,ce,le),{u_texsize_icon:O,u_texture_icon:1}),sp=(f,s,u)=>({u_matrix:f,u_opacity:s,u_color:u}),yv=(f,s,u,g,v)=>a.extend(function(b,E,k){const I=E.imageManager.getPattern(b.toString()),{width:O,height:L}=E.imageManager.getPixelSize(),q=Math.pow(2,k.tileID.overscaledZ),te=k.tileSize*Math.pow(2,E.transform.tileZoom)/q,se=te*(k.tileID.canonical.x+k.tileID.wrap*q),ce=te*k.tileID.canonical.y;return{u_image:0,u_pattern_tl:I.tl,u_pattern_br:I.br,u_texsize:[O,L],u_pattern_size:I.displaySize,u_tile_units_to_pixels:1/nt(k,1,E.transform.tileZoom),u_pixel_coord_upper:[se>>16,ce>>16],u_pixel_coord_lower:[65535&se,65535&ce]}}(g,u,v),{u_matrix:f,u_opacity:s}),ap={fillExtrusion:f=>({u_matrix:new a.UniformMatrix4f(f),u_lightpos:new a.Uniform3f(f),u_lightintensity:new a.Uniform1f(f),u_lightcolor:new a.Uniform3f(f),u_vertical_gradient:new a.Uniform1f(f),u_opacity:new a.Uniform1f(f),u_edge_radius:new a.Uniform1f(f),u_ao:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_up_dir:new a.Uniform3f(f),u_height_lift:new a.Uniform1f(f)}),fillExtrusionPattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_lightpos:new a.Uniform3f(f),u_lightintensity:new a.Uniform1f(f),u_lightcolor:new a.Uniform3f(f),u_vertical_gradient:new a.Uniform1f(f),u_height_factor:new a.Uniform1f(f),u_edge_radius:new a.Uniform1f(f),u_ao:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_up_dir:new a.Uniform3f(f),u_height_lift:new a.Uniform1f(f),u_image:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_pixel_coord_upper:new a.Uniform2f(f),u_pixel_coord_lower:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f),u_opacity:new a.Uniform1f(f)}),fill:f=>({u_matrix:new a.UniformMatrix4f(f)}),fillPattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_image:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_pixel_coord_upper:new a.Uniform2f(f),u_pixel_coord_lower:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f)}),fillOutline:f=>({u_matrix:new a.UniformMatrix4f(f),u_world:new a.Uniform2f(f)}),fillOutlinePattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_world:new a.Uniform2f(f),u_image:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_pixel_coord_upper:new a.Uniform2f(f),u_pixel_coord_lower:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f)}),circle:f=>({u_camera_to_center_distance:new a.Uniform1f(f),u_extrude_scale:new a.UniformMatrix2f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_up_dir:new a.Uniform3f(f)}),collisionBox:f=>({u_matrix:new a.UniformMatrix4f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_extrude_scale:new a.Uniform2f(f)}),collisionCircle:f=>({u_matrix:new a.UniformMatrix4f(f),u_inv_matrix:new a.UniformMatrix4f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_viewport_size:new a.Uniform2f(f)}),debug:f=>({u_color:new a.UniformColor(f),u_matrix:new a.UniformMatrix4f(f),u_overlay:new a.Uniform1i(f),u_overlay_scale:new a.Uniform1f(f)}),clippingMask:f=>({u_matrix:new a.UniformMatrix4f(f)}),heatmap:f=>({u_extrude_scale:new a.Uniform1f(f),u_intensity:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_up_dir:new a.Uniform3f(f)}),heatmapTexture:f=>({u_image:new a.Uniform1i(f),u_color_ramp:new a.Uniform1i(f),u_opacity:new a.Uniform1f(f)}),hillshade:f=>({u_matrix:new a.UniformMatrix4f(f),u_image:new a.Uniform1i(f),u_latrange:new a.Uniform2f(f),u_light:new a.Uniform2f(f),u_shadow:new a.UniformColor(f),u_highlight:new a.UniformColor(f),u_accent:new a.UniformColor(f)}),hillshadePrepare:f=>({u_matrix:new a.UniformMatrix4f(f),u_image:new a.Uniform1i(f),u_dimension:new a.Uniform2f(f),u_zoom:new a.Uniform1f(f),u_unpack:new a.Uniform4f(f)}),line:f=>({u_matrix:new a.UniformMatrix4f(f),u_pixels_to_tile_units:new a.UniformMatrix2f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_units_to_pixels:new a.Uniform2f(f),u_dash_image:new a.Uniform1i(f),u_gradient_image:new a.Uniform1i(f),u_image_height:new a.Uniform1f(f),u_texsize:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f),u_alpha_discard_threshold:new a.Uniform1f(f),u_trim_offset:new a.Uniform2f(f)}),linePattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_texsize:new a.Uniform2f(f),u_pixels_to_tile_units:new a.UniformMatrix2f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_image:new a.Uniform1i(f),u_units_to_pixels:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f),u_alpha_discard_threshold:new a.Uniform1f(f)}),raster:f=>({u_matrix:new a.UniformMatrix4f(f),u_tl_parent:new a.Uniform2f(f),u_scale_parent:new a.Uniform1f(f),u_fade_t:new a.Uniform1f(f),u_opacity:new a.Uniform1f(f),u_image0:new a.Uniform1i(f),u_image1:new a.Uniform1i(f),u_brightness_low:new a.Uniform1f(f),u_brightness_high:new a.Uniform1f(f),u_saturation_factor:new a.Uniform1f(f),u_contrast_factor:new a.Uniform1f(f),u_spin_weights:new a.Uniform3f(f),u_perspective_transform:new a.Uniform2f(f)}),symbolIcon:f=>({u_is_size_zoom_constant:new a.Uniform1i(f),u_is_size_feature_constant:new a.Uniform1i(f),u_size_t:new a.Uniform1f(f),u_size:new a.Uniform1f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_rotate_symbol:new a.Uniform1i(f),u_aspect_ratio:new a.Uniform1f(f),u_fade_change:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_label_plane_matrix:new a.UniformMatrix4f(f),u_coord_matrix:new a.UniformMatrix4f(f),u_is_text:new a.Uniform1i(f),u_pitch_with_map:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_camera_forward:new a.Uniform3f(f),u_tile_matrix:new a.UniformMatrix4f(f),u_up_vector:new a.Uniform3f(f),u_ecef_origin:new a.Uniform3f(f),u_texture:new a.Uniform1i(f)}),symbolSDF:f=>({u_is_size_zoom_constant:new a.Uniform1i(f),u_is_size_feature_constant:new a.Uniform1i(f),u_size_t:new a.Uniform1f(f),u_size:new a.Uniform1f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_rotate_symbol:new a.Uniform1i(f),u_aspect_ratio:new a.Uniform1f(f),u_fade_change:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_label_plane_matrix:new a.UniformMatrix4f(f),u_coord_matrix:new a.UniformMatrix4f(f),u_is_text:new a.Uniform1i(f),u_pitch_with_map:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_texture:new a.Uniform1i(f),u_gamma_scale:new a.Uniform1f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_camera_forward:new a.Uniform3f(f),u_tile_matrix:new a.UniformMatrix4f(f),u_up_vector:new a.Uniform3f(f),u_ecef_origin:new a.Uniform3f(f),u_is_halo:new a.Uniform1i(f)}),symbolTextAndIcon:f=>({u_is_size_zoom_constant:new a.Uniform1i(f),u_is_size_feature_constant:new a.Uniform1i(f),u_size_t:new a.Uniform1f(f),u_size:new a.Uniform1f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_rotate_symbol:new a.Uniform1i(f),u_aspect_ratio:new a.Uniform1f(f),u_fade_change:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_label_plane_matrix:new a.UniformMatrix4f(f),u_coord_matrix:new a.UniformMatrix4f(f),u_is_text:new a.Uniform1i(f),u_pitch_with_map:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_texsize_icon:new a.Uniform2f(f),u_texture:new a.Uniform1i(f),u_texture_icon:new a.Uniform1i(f),u_gamma_scale:new a.Uniform1f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_is_halo:new a.Uniform1i(f)}),background:f=>({u_matrix:new a.UniformMatrix4f(f),u_opacity:new a.Uniform1f(f),u_color:new a.UniformColor(f)}),backgroundPattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_opacity:new a.Uniform1f(f),u_image:new a.Uniform1i(f),u_pattern_tl:new a.Uniform2f(f),u_pattern_br:new a.Uniform2f(f),u_texsize:new a.Uniform2f(f),u_pattern_size:new a.Uniform2f(f),u_pixel_coord_upper:new a.Uniform2f(f),u_pixel_coord_lower:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f)}),terrainRaster:Zh,terrainDepth:Zh,skybox:f=>({u_matrix:new a.UniformMatrix4f(f),u_sun_direction:new a.Uniform3f(f),u_cubemap:new a.Uniform1i(f),u_opacity:new a.Uniform1f(f),u_temporal_offset:new a.Uniform1f(f)}),skyboxGradient:f=>({u_matrix:new a.UniformMatrix4f(f),u_color_ramp:new a.Uniform1i(f),u_center_direction:new a.Uniform3f(f),u_radius:new a.Uniform1f(f),u_opacity:new a.Uniform1f(f),u_temporal_offset:new a.Uniform1f(f)}),skyboxCapture:f=>({u_matrix_3f:new a.UniformMatrix3f(f),u_sun_direction:new a.Uniform3f(f),u_sun_intensity:new a.Uniform1f(f),u_color_tint_r:new a.Uniform4f(f),u_color_tint_m:new a.Uniform4f(f),u_luminance:new a.Uniform1f(f)}),globeRaster:f=>({u_proj_matrix:new a.UniformMatrix4f(f),u_globe_matrix:new a.UniformMatrix4f(f),u_normalize_matrix:new a.UniformMatrix4f(f),u_merc_matrix:new a.UniformMatrix4f(f),u_zoom_transition:new a.Uniform1f(f),u_merc_center:new a.Uniform2f(f),u_image0:new a.Uniform1i(f),u_grid_matrix:new a.UniformMatrix3f(f),u_skirt_height:new a.Uniform1f(f),u_frustum_tl:new a.Uniform3f(f),u_frustum_tr:new a.Uniform3f(f),u_frustum_br:new a.Uniform3f(f),u_frustum_bl:new a.Uniform3f(f),u_globe_pos:new a.Uniform3f(f),u_globe_radius:new a.Uniform1f(f),u_viewport:new a.Uniform2f(f)}),globeAtmosphere:f=>({u_frustum_tl:new a.Uniform3f(f),u_frustum_tr:new a.Uniform3f(f),u_frustum_br:new a.Uniform3f(f),u_frustum_bl:new a.Uniform3f(f),u_horizon:new a.Uniform1f(f),u_transition:new a.Uniform1f(f),u_fadeout_range:new a.Uniform1f(f),u_color:new a.Uniform4f(f),u_high_color:new a.Uniform4f(f),u_space_color:new a.Uniform4f(f),u_star_intensity:new a.Uniform1f(f),u_star_density:new a.Uniform1f(f),u_star_size:new a.Uniform1f(f),u_temporal_offset:new a.Uniform1f(f),u_horizon_angle:new a.Uniform1f(f),u_rotation_matrix:new a.UniformMatrix4f(f)})};let $u;function wc(f,s,u,g,v,b,E){const k=f.context,I=k.gl,O=f.transform,L=f.useProgram("collisionBox"),q=[];let te=0,se=0;for(let xe=0;xe<g.length;xe++){const De=g[xe],Re=s.getTile(De),ze=Re.getBucket(u);if(!ze)continue;const Ve=lo(De,ze,O);let Ue=Ve;v[0]===0&&v[1]===0||(Ue=f.translatePosMatrix(Ve,Re,v,b));const Ye=E?ze.textCollisionBox:ze.iconCollisionBox,kt=ze.collisionCircleArray;if(kt.length>0){const qe=a.create(),ft=Ue;a.mul(qe,ze.placementInvProjMatrix,O.glCoordMatrix),a.mul(qe,qe,ze.placementViewportMatrix),q.push({circleArray:kt,circleOffset:se,transform:ft,invTransform:qe,projection:ze.getProjection()}),te+=kt.length/4,se=te}Ye&&(f.terrain&&f.terrain.setupElevationDraw(Re,L),L.draw(k,I.LINES,a.DepthMode.disabled,a.StencilMode.disabled,f.colorModeForRenderPass(),a.CullFaceMode.disabled,np(Ue,O,Re,ze.getProjection()),u.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,null,O.zoom,null,[Ye.collisionVertexBuffer,Ye.collisionVertexBufferExt]))}if(!E||!q.length)return;const ce=f.useProgram("collisionCircle"),le=new a.StructArrayLayout2f1f2i16;le.resize(4*te),le._trim();let pe=0;for(const xe of q)for(let De=0;De<xe.circleArray.length/4;De++){const Re=4*De,ze=xe.circleArray[Re+0],Ve=xe.circleArray[Re+1],Ue=xe.circleArray[Re+2],Ye=xe.circleArray[Re+3];le.emplace(pe++,ze,Ve,Ue,Ye,0),le.emplace(pe++,ze,Ve,Ue,Ye,1),le.emplace(pe++,ze,Ve,Ue,Ye,2),le.emplace(pe++,ze,Ve,Ue,Ye,3)}(!$u||$u.length<2*te)&&($u=function(xe){const De=2*xe,Re=new a.StructArrayLayout3ui6;Re.resize(De),Re._trim();for(let ze=0;ze<De;ze++){const Ve=6*ze;Re.uint16[Ve+0]=4*ze+0,Re.uint16[Ve+1]=4*ze+1,Re.uint16[Ve+2]=4*ze+2,Re.uint16[Ve+3]=4*ze+2,Re.uint16[Ve+4]=4*ze+3,Re.uint16[Ve+5]=4*ze+0}return Re}(te));const Z=k.createIndexBuffer($u,!0),ie=k.createVertexBuffer(le,a.collisionCircleLayout.members,!0);for(const xe of q){const De={u_matrix:xe.transform,u_inv_matrix:xe.invTransform,u_camera_to_center_distance:(ve=O).getCameraToCenterDistance(xe.projection),u_viewport_size:[ve.width,ve.height]};ce.draw(k,I.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,f.colorModeForRenderPass(),a.CullFaceMode.disabled,De,u.id,ie,Z,a.SegmentVector.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,O.zoom)}var ve;ie.destroy(),Z.destroy()}const ig=a.create();function lp({width:f,height:s,anchor:u,textOffset:g,textScale:v},b){const{horizontalAlign:E,verticalAlign:k}=a.getAnchorAlignment(u),I=-(E-.5)*f,O=-(k-.5)*s,L=a.evaluateVariableOffset(u,g);return new a.Point((I/v+L[0])*b,(O/v+L[1])*b)}function _v(f,s,u,g,v,b,E,k,I,O,L){const q=f.text.placedSymbolArray,te=f.text.dynamicLayoutVertexArray,se=f.icon.dynamicLayoutVertexArray,ce={},le=f.getProjection(),pe=Dr(k,le,b),Z=b.elevation,ie=le.upVectorScale(k.canonical,b.center.lat,b.worldSize).metersToTile;te.clear();for(let ve=0;ve<q.length;ve++){const xe=q.get(ve),{tileAnchorX:De,tileAnchorY:Re,numGlyphs:ze}=xe,Ve=xe.hidden||!xe.crossTileID||f.allowVerticalPlacement&&!xe.placedOrientation?null:g[xe.crossTileID];if(Ve){let Ue=0,Ye=0,kt=0;if(Z){const At=Z?Z.getAtTileOffset(k,De,Re):0,[pn,In,rn]=le.upVector(k.canonical,De,Re);Ue=At*pn*ie,Ye=At*In*ie,kt=At*rn*ie}let[qe,ft,et,Et]=fi(xe.projectedAnchorX+Ue,xe.projectedAnchorY+Ye,xe.projectedAnchorZ+kt,u?pe:E);const Xe=Wm(b.getCameraToCenterDistance(le),Et);let pt=v.evaluateSizeForFeature(f.textSizeData,O,xe)*Xe/a.ONE_EM;u&&(pt*=f.tilePixelRatio/I);const It=lp(Ve,pt);u?({x:qe,y:ft,z:et}=le.projectTilePoint(De+It.x,Re+It.y,k.canonical),[qe,ft,et]=fi(qe+Ue,ft+Ye,et+kt,E)):(s&&It._rotate(-b.angle),qe+=It.x,ft+=It.y,et=0);const wt=f.allowVerticalPlacement&&xe.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let At=0;At<ze;At++)a.addDynamicAttributes(te,qe,ft,et,wt);L&&xe.associatedIconIndex>=0&&(ce[xe.associatedIconIndex]={x:qe,y:ft,z:et,angle:wt})}else Mo(ze,te)}if(L){se.clear();const ve=f.icon.placedSymbolArray;for(let xe=0;xe<ve.length;xe++){const De=ve.get(xe),{numGlyphs:Re}=De,ze=ce[xe];if(De.hidden||!ze)Mo(Re,se);else{const{x:Ve,y:Ue,z:Ye,angle:kt}=ze;for(let qe=0;qe<Re;qe++)a.addDynamicAttributes(se,Ve,Ue,Ye,kt)}}f.icon.dynamicLayoutVertexBuffer.updateData(se)}f.text.dynamicLayoutVertexBuffer.updateData(te)}function cp(f,s,u){return u.iconsInText&&s?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function og(f,s,u,g,v,b,E,k,I,O,L,q){const te=f.context,se=te.gl,ce=f.transform,le=k==="map",pe=I==="map",Z=le&&u.layout.get("symbol-placement")!=="point",ie=le&&!pe&&!Z,ve=u.layout.get("symbol-sort-key").constantOr(1)!==void 0;let xe=!1;const De=f.depthModeForSublayer(0,a.DepthMode.ReadOnly),Re=[a.mercatorXfromLng(ce.center.lng),a.mercatorYfromLat(ce.center.lat)],ze=u.layout.get("text-variable-anchor"),Ve=ce.projection.name==="globe",Ue=[],Ye=[0,-1,0];let kt=Ye;!Ve&&!ce.mercatorFromTransition||le||(kt=function(qe){const ft=qe._camera.getWorldToCamera(qe.worldSize,1),et=a.multiply([],ft,qe.globeMatrix);a.invert(et,et);const Et=[0,0,0],Xe=[0,1,0,0];return a.transformMat4$1(Xe,Xe,et),Et[0]=Xe[0],Et[1]=Xe[1],Et[2]=Xe[2],a.normalize(Et,Et),Et}(ce));for(const qe of g){const ft=s.getTile(qe),et=ft.getBucket(u);if(!et||et.projection.name==="mercator"&&Ve)continue;const Et=v?et.text:et.icon;if(!Et||et.fullyClipped||!Et.segments.get().length)continue;const Xe=Et.programConfigurations.get(u.id),pt=v||et.sdfIcons,It=v?et.textSizeData:et.iconSizeData,wt=pe||ce.pitch!==0,At=a.evaluateSizeForZoom(It,ce.zoom);let pn,In,rn,wn,Gn=[0,0],Vn=null;if(v)In=ft.glyphAtlasTexture,rn=se.LINEAR,pn=ft.glyphAtlasTexture.size,et.iconsInText&&(Gn=ft.imageAtlasTexture.size,Vn=ft.imageAtlasTexture,wn=wt||f.options.rotating||f.options.zooming||It.kind==="composite"||It.kind==="camera"?se.LINEAR:se.NEAREST);else{const Is=u.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;In=ft.imageAtlasTexture,rn=pt||f.options.rotating||f.options.zooming||Is||wt?se.LINEAR:se.NEAREST,pn=ft.imageAtlasTexture.size}const cn=et.projection.name==="globe",or=cn?kt:Ye,cr=cn?a.globeToMercatorTransition(ce.zoom):0,ur=Dr(qe,et.getProjection(),ce),dr=ce.calculatePixelsToTileUnitsMatrix(ft),Ii=ct(ur,ft.tileID.canonical,pe,le,ce,et.getProjection(),dr),gi=f.terrain&&pe&&Z?a.invert(a.create(),Ii):ig,po=Kr(ur,ft.tileID.canonical,pe,le,ce,et.getProjection(),dr),Qo=ze&&et.hasTextData(),zr=u.layout.get("icon-text-fit")!=="none"&&Qo&&et.hasIconData();if(Z){const Is=ce.elevation,Ks=Is?Is.getAtTileOffsetFunc(qe,ce.center.lat,ce.worldSize,et.getProjection()):null,za=ws(ur,ft.tileID.canonical,pe,le,ce,et.getProjection(),dr);Lh(et,ur,f,v,za,po,pe,O,Ks,qe)}const hr=Z||v&&ze||zr,er=f.translatePosMatrix(ur,ft,b,E),Jr=hr?ig:Ii,Oi=f.translatePosMatrix(po,ft,b,E,!0),Pr=et.getProjection().createInversionMatrix(ce,qe.canonical),ji=[];f.terrainRenderModeElevated()&&pe&&ji.push("PITCH_WITH_MAP_TERRAIN"),cn&&ji.push("PROJECTION_GLOBE_VIEW"),hr&&ji.push("PROJECTED_POS_ON_VIEWPORT");const td=pt&&u.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Da;Da=pt?et.iconsInText?rg(It.kind,At,ie,pe,f,er,Jr,Oi,pn,Gn,qe,cr,Re,Pr,or,et.getProjection()):Fu(It.kind,At,ie,pe,f,er,Jr,Oi,v,pn,!0,qe,cr,Re,Pr,or,et.getProjection()):op(It.kind,At,ie,pe,f,er,Jr,Oi,v,pn,qe,cr,Re,Pr,or,et.getProjection());const zc={program:f.useProgram(cp(pt,v,et),Xe,ji),buffers:Et,uniformValues:Da,atlasTexture:In,atlasTextureIcon:Vn,atlasInterpolation:rn,atlasInterpolationIcon:wn,isSDF:pt,hasHalo:td,tile:ft,labelPlaneMatrixInv:gi};if(ve&&et.canOverlap){xe=!0;const Is=Et.segments.get();for(const Ks of Is)Ue.push({segments:new a.SegmentVector([Ks]),sortKey:Ks.sortKey,state:zc})}else Ue.push({segments:Et.segments,sortKey:0,state:zc})}xe&&Ue.sort((qe,ft)=>qe.sortKey-ft.sortKey);for(const qe of Ue){const ft=qe.state;if(f.terrain&&f.terrain.setupElevationDraw(ft.tile,ft.program,{useDepthForOcclusion:!Ve,labelPlaneMatrixInv:ft.labelPlaneMatrixInv}),te.activeTexture.set(se.TEXTURE0),ft.atlasTexture.bind(ft.atlasInterpolation,se.CLAMP_TO_EDGE),ft.atlasTextureIcon&&(te.activeTexture.set(se.TEXTURE1),ft.atlasTextureIcon&&ft.atlasTextureIcon.bind(ft.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),ft.isSDF){const et=ft.uniformValues;ft.hasHalo&&(et.u_is_halo=1,Sc(ft.buffers,qe.segments,u,f,ft.program,De,L,q,et)),et.u_is_halo=0}Sc(ft.buffers,qe.segments,u,f,ft.program,De,L,q,ft.uniformValues)}}function Sc(f,s,u,g,v,b,E,k,I){const O=g.context,L=[f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer,f.globeExtVertexBuffer];v.draw(O,O.gl.TRIANGLES,b,E,k,a.CullFaceMode.disabled,I,u.id,f.layoutVertexBuffer,f.indexBuffer,s,u.paint,g.transform.zoom,f.programConfigurations.get(u.id),L)}function sg(f,s,u,g,v,b,E){const k=f.context.gl,I=u.paint.get("fill-pattern"),O=I&&I.constantOr(1);let L,q,te,se,ce;E?(q=O&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",L=k.LINES):(q=O?"fillPattern":"fill",L=k.TRIANGLES);for(const le of g){const pe=s.getTile(le);if(O&&!pe.patternsLoaded())continue;const Z=pe.getBucket(u);if(!Z)continue;f.prepareDrawTile();const ie=Z.programConfigurations.get(u.id),ve=f.useProgram(q,ie);O&&(f.context.activeTexture.set(k.TEXTURE0),pe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ie.updatePaintBuffers());const xe=I.constantOr(null);if(xe&&pe.imageAtlas){const Re=pe.imageAtlas.patternPositions[xe.toString()];Re&&ie.setConstantPatternPositions(Re)}const De=f.translatePosMatrix(le.projMatrix,pe,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(E){se=Z.indexBuffer2,ce=Z.segments2;const Re=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];te=q==="fillOutlinePattern"&&O?fv(De,f,pe,Re):pv(De,Re)}else se=Z.indexBuffer,ce=Z.segments,te=O?Qh(De,f,pe):Pa(De);f.prepareDrawProgram(f.context,ve,le.toUnwrapped()),ve.draw(f.context,L,v,f.stencilModeForClipping(le),b,a.CullFaceMode.disabled,te,u.id,Z.layoutVertexBuffer,se,ce,u.paint,f.transform.zoom,ie)}}function Nu(f,s,u,g,v,b,E){const k=f.context,I=k.gl,O=f.transform,L=u.paint.get("fill-extrusion-pattern"),q=L.constantOr(1),te=u.paint.get("fill-extrusion-opacity"),se=[u.paint.get("fill-extrusion-ambient-occlusion-intensity"),u.paint.get("fill-extrusion-ambient-occlusion-radius")],ce=u.layout.get("fill-extrusion-edge-radius"),le=ce>0&&!u.paint.get("fill-extrusion-rounded-roof"),pe=le?0:ce,Z=O.projection.name==="globe"?a.fillExtrusionHeightLift():0,ie=O.projection.name==="globe",ve=ie?a.globeToMercatorTransition(O.zoom):0,xe=[a.mercatorXfromLng(O.center.lng),a.mercatorYfromLat(O.center.lat)],De=[];ie&&De.push("PROJECTION_GLOBE_VIEW"),se[0]>0&&De.push("FAUX_AO"),le&&De.push("ZERO_ROOF_RADIUS");for(const Re of g){const ze=s.getTile(Re),Ve=ze.getBucket(u);if(!Ve||Ve.projection.name!==O.projection.name)continue;const Ue=Ve.programConfigurations.get(u.id),Ye=f.useProgram(q?"fillExtrusionPattern":"fillExtrusion",Ue,De);if(f.terrain){const pt=f.terrain;if(f.style.terrainSetForDrapingOnly())pt.setupElevationDraw(ze,Ye,{useMeterToDem:!0});else{if(!Ve.enableTerrain)continue;if(pt.setupElevationDraw(ze,Ye,{useMeterToDem:!0}),ag(k,s,Re,Ve,u,pt),!Ve.centroidVertexBuffer){const It=Ye.attributes.a_centroid_pos;It!==void 0&&I.vertexAttrib2f(It,0,0)}}}q&&(f.context.activeTexture.set(I.TEXTURE0),ze.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),Ue.updatePaintBuffers());const kt=L.constantOr(null);if(kt&&ze.imageAtlas){const pt=ze.imageAtlas.patternPositions[kt.toString()];pt&&Ue.setConstantPatternPositions(pt)}const qe=f.translatePosMatrix(Re.projMatrix,ze,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),ft=O.projection.createInversionMatrix(O,Re.canonical),et=u.paint.get("fill-extrusion-vertical-gradient"),Et=q?eg(qe,f,et,te,se,pe,Re,ze,Z,ve,xe,ft):Jh(qe,f,et,te,se,pe,Re,Z,ve,xe,ft);f.prepareDrawProgram(k,Ye,Re.toUnwrapped());const Xe=[];f.terrain&&Xe.push(Ve.centroidVertexBuffer),ie&&Xe.push(Ve.layoutVertexExtBuffer),Ye.draw(k,k.gl.TRIANGLES,v,b,E,a.CullFaceMode.backCCW,Et,u.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,u.paint,f.transform.zoom,Ue,Xe)}}function ag(f,s,u,g,v,b){const E=[Z=>{let ie=Z.canonical.x-1,ve=Z.wrap;return ie<0&&(ie=(1<<Z.canonical.z)-1,ve--),new a.OverscaledTileID(Z.overscaledZ,ve,Z.canonical.z,ie,Z.canonical.y)},Z=>{let ie=Z.canonical.x+1,ve=Z.wrap;return ie===1<<Z.canonical.z&&(ie=0,ve++),new a.OverscaledTileID(Z.overscaledZ,ve,Z.canonical.z,ie,Z.canonical.y)},Z=>new a.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,(Z.canonical.y===0?1<<Z.canonical.z:Z.canonical.y)-1),Z=>new a.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y===(1<<Z.canonical.z)-1?0:Z.canonical.y+1)],k=Z=>{const ie=s.getSource().minzoom,ve=De=>{const Re=s.getTileByID(De);if(Re&&Re.hasData())return Re.getBucket(v)},xe=[0,-1,1];for(const De of xe){if(Z.overscaledZ+De<ie)continue;const Re=ve(Z.calculateScaledKey(Z.overscaledZ+De));if(Re)return Re}},I=[0,0,0],O=(Z,ie)=>(I[0]=Math.min(Z.min.y,ie.min.y),I[1]=Math.max(Z.max.y,ie.max.y),I[2]=a.EXTENT-ie.min.x>Z.max.x?ie.min.x-a.EXTENT:Z.max.x,I),L=(Z,ie)=>(I[0]=Math.min(Z.min.x,ie.min.x),I[1]=Math.max(Z.max.x,ie.max.x),I[2]=a.EXTENT-ie.min.y>Z.max.y?ie.min.y-a.EXTENT:Z.max.y,I),q=[(Z,ie)=>O(Z,ie),(Z,ie)=>O(ie,Z),(Z,ie)=>L(Z,ie),(Z,ie)=>L(ie,Z)],te=new a.Point(0,0);let se,ce,le;const pe=(Z,ie,ve,xe,De)=>{const Re=[[xe?ve:Z,xe?Z:ve,0],[xe?ve:ie,xe?ie:ve,0]],ze=De<0?a.EXTENT+De:De,Ve=[xe?ze:(Z+ie)/2,xe?(Z+ie)/2:ze,0];return ve===0&&De<0||ve!==0&&De>0?b.getForTilePoints(le,[Ve],!0,ce):Re.push(Ve),b.getForTilePoints(u,Re,!0,se),Math.max(Re[0][2],Re[1][2],Ve[2])/b.exaggeration()};for(let Z=0;Z<4;Z++){const ie=(Z<2?1:5)-Z,ve=g.borders[Z];if(ve.length===0)continue;const xe=le=E[Z](u),De=k(xe);if(!(De&&De instanceof a.FillExtrusionBucket&&De.enableTerrain)||g.borderDoneWithNeighborZ[Z]===De.canonical.z&&De.borderDoneWithNeighborZ[ie]===g.canonical.z||(ce=b.findDEMTileFor(xe),!ce||!ce.dem))continue;if(!se){const Ue=b.findDEMTileFor(u);if(!Ue||!Ue.dem)return;se=Ue}const Re=De.borders[ie];let ze=0;const Ve=De.borderDoneWithNeighborZ[ie]!==g.canonical.z;if(g.canonical.z===De.canonical.z){for(let Ue=0;Ue<ve.length;Ue++){const Ye=g.featuresOnBorder[ve[Ue]],kt=Ye.borders[Z];let qe;for(;ze<Re.length&&(qe=De.featuresOnBorder[Re[ze]],!(qe.borders[ie][1]>kt[0]+3));)Ve&&De.encodeCentroid(void 0,qe,!1),ze++;if(qe&&ze<Re.length){const ft=ze;let et=0;for(;!(qe.borders[ie][0]>kt[1]-3)&&(et++,++ze!==Re.length);)qe=De.featuresOnBorder[Re[ze]];if(qe=De.featuresOnBorder[Re[ft]],Ye.intersectsCount()>1||qe.intersectsCount()>1||et!==1){et!==1&&(ze=ft),g.encodeCentroid(void 0,Ye,!1),Ve&&De.encodeCentroid(void 0,qe,!1);continue}const Et=q[Z](Ye,qe),Xe=Z%2?a.EXTENT-1:0;te.x=pe(Et[0],Math.min(a.EXTENT-1,Et[1]),Xe,Z<2,Et[2]),te.y=0,g.encodeCentroid(te,Ye,!1),Ve&&De.encodeCentroid(te,qe,!1)}else g.encodeCentroid(void 0,Ye,!1)}g.borderDoneWithNeighborZ[Z]=De.canonical.z,g.needsCentroidUpdate=!0,Ve&&(De.borderDoneWithNeighborZ[ie]=g.canonical.z,De.needsCentroidUpdate=!0)}else{for(const Ue of ve)g.encodeCentroid(void 0,g.featuresOnBorder[Ue],!1);if(Ve){for(const Ue of Re)De.encodeCentroid(void 0,De.featuresOnBorder[Ue],!1);De.borderDoneWithNeighborZ[ie]=g.canonical.z,De.needsCentroidUpdate=!0}g.borderDoneWithNeighborZ[Z]=De.canonical.z,g.needsCentroidUpdate=!0}}(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(f)}const pl=new a.Color(1,0,0,1),vv=new a.Color(0,1,0,1),xv=new a.Color(0,0,1,1),bv=new a.Color(1,0,1,1),wv=new a.Color(0,1,1,1);function Sv(f,s,u){const g=f.context,v=f.transform,b=g.gl,E=v.projection.name==="globe",k=E?["PROJECTION_GLOBE_VIEW"]:null;let I=u.projMatrix;if(E&&a.globeToMercatorTransition(v.zoom)>0){const Ye=a.transitionTileAABBinECEF(u.canonical,v),kt=a.globeDenormalizeECEF(Ye);I=a.multiply(new Float32Array(16),v.globeMatrix,kt),a.multiply(I,v.projMatrix,I)}const O=f.useProgram("debug",null,k),L=s.getTileByID(u.key);f.terrain&&f.terrain.setupElevationDraw(L,O);const q=a.DepthMode.disabled,te=a.StencilMode.disabled,se=f.colorModeForRenderPass(),ce="$debug";g.activeTexture.set(b.TEXTURE0),f.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),E?L._makeGlobeTileDebugBuffers(f.context,v):L._makeDebugTileBoundsBuffers(f.context,v.projection);const le=L._tileDebugBuffer||f.debugBuffer,pe=L._tileDebugIndexBuffer||f.debugIndexBuffer,Z=L._tileDebugSegments||f.debugSegments;O.draw(g,b.LINE_STRIP,q,te,se,a.CullFaceMode.disabled,Ou(I,a.Color.red),ce,le,pe,Z,null,null,null,[L._globeTileDebugBorderBuffer]);const ie=L.latestRawTileData,ve=Math.floor((ie&&ie.byteLength||0)/1024),xe=s.getTile(u).tileSize,De=512/Math.min(xe,512)*(u.overscaledZ/v.zoom)*.5;let Re=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Re+=` => ${u.overscaledZ}`),Re+=` ${ve}kb`,function(Ye,kt){Ye.initDebugOverlayCanvas();const qe=Ye.debugOverlayCanvas,ft=Ye.context.gl,et=Ye.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,qe.width,qe.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText(kt,5,5),et.strokeText(kt,5,5),Ye.debugOverlayTexture.update(qe),Ye.debugOverlayTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE)}(f,Re);const ze=L._tileDebugTextBuffer||f.debugBuffer,Ve=L._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,Ue=L._tileDebugTextSegments||f.debugSegments;O.draw(g,b.TRIANGLES,q,te,a.ColorMode.alphaBlended,a.CullFaceMode.disabled,Ou(I,a.Color.transparent,De),ce,ze,Ve,Ue,null,null,null,[L._globeTileDebugTextBuffer])}function lg(f,s,u,g){fl(f,0,s+u/2,f.transform.width,u,g)}function Uu(f,s,u,g){fl(f,s-u/2,0,u,f.transform.height,g)}function fl(f,s,u,g,v,b){const E=f.context,k=E.gl;k.enable(k.SCISSOR_TEST),k.scissor(s*a.exported.devicePixelRatio,u*a.exported.devicePixelRatio,g*a.exported.devicePixelRatio,v*a.exported.devicePixelRatio),E.clear({color:b}),k.disable(k.SCISSOR_TEST)}const cg=a.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:ug}=cg;function Ps(f,s,u,g){f.emplaceBack(s,u,g)}class Vu{constructor(s){this.vertexArray=new a.StructArrayLayout3f12,this.indices=new a.StructArrayLayout3ui6,Ps(this.vertexArray,-1,-1,1),Ps(this.vertexArray,1,-1,1),Ps(this.vertexArray,-1,1,1),Ps(this.vertexArray,1,1,1),Ps(this.vertexArray,-1,-1,-1),Ps(this.vertexArray,1,-1,-1),Ps(this.vertexArray,-1,1,-1),Ps(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=s.createVertexBuffer(this.vertexArray,ug),this.indexBuffer=s.createIndexBuffer(this.indices),this.segment=a.SegmentVector.simpleSegment(0,0,36,12)}}function uo(f,s,u,g,v,b){const E=f.gl,k=s.paint.get("sky-atmosphere-color"),I=s.paint.get("sky-atmosphere-halo-color"),O=s.paint.get("sky-atmosphere-sun-intensity"),L=((q,te,se,ce,le)=>({u_matrix_3f:q,u_sun_direction:te,u_sun_intensity:se,u_color_tint_r:[ce.r,ce.g,ce.b,ce.a],u_color_tint_m:[le.r,le.g,le.b,le.a],u_luminance:5e-5}))(a.fromMat4(a.create$1(),g),v,O,k,I);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+b,s.skyboxTexture,0),u.draw(f,E.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.frontCW,L,"skyboxCapture",s.skyboxGeometry.vertexBuffer,s.skyboxGeometry.indexBuffer,s.skyboxGeometry.segment)}const Tc=a.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class dg{constructor(s){const u=new a.StructArrayLayout5f20;u.emplaceBack(-1,1,1,0,0),u.emplaceBack(1,1,1,1,0),u.emplaceBack(1,-1,1,1,1),u.emplaceBack(-1,-1,1,0,1);const g=new a.StructArrayLayout3ui6;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=s.createVertexBuffer(u,Tc.members),this.indexBuffer=s.createIndexBuffer(g),this.segments=a.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ma={symbol:function(f,s,u,g,v){if(f.renderPass!=="translucent")return;const b=a.StencilMode.disabled,E=f.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(k,I,O,L,q,te,se){const ce=I.transform,le=q==="map",pe=te==="map";for(const Z of k){const ie=L.getTile(Z),ve=ie.getBucket(O);if(!ve||!ve.text||!ve.text.segments.get().length)continue;const xe=a.evaluateSizeForZoom(ve.textSizeData,ce.zoom),De=Dr(Z,ve.getProjection(),ce),Re=ce.calculatePixelsToTileUnitsMatrix(ie),ze=ct(De,ie.tileID.canonical,pe,le,ce,ve.getProjection(),Re),Ve=O.layout.get("icon-text-fit")!=="none"&&ve.hasIconData();if(xe){const Ue=Math.pow(2,ce.zoom-ie.tileID.overscaledZ);_v(ve,le,pe,se,a.symbolSize,ce,ze,Z,Ue,xe,Ve)}}}(g,f,u,s,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),v),u.paint.get("icon-opacity").constantOr(1)!==0&&og(f,s,u,g,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),b,E),u.paint.get("text-opacity").constantOr(1)!==0&&og(f,s,u,g,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),b,E),s.map.showCollisionBoxes&&(wc(f,s,u,g,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),wc(f,s,u,g,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(f,s,u,g){if(f.renderPass!=="translucent")return;const v=u.paint.get("circle-opacity"),b=u.paint.get("circle-stroke-width"),E=u.paint.get("circle-stroke-opacity"),k=u.layout.get("circle-sort-key").constantOr(1)!==void 0;if(v.constantOr(1)===0&&(b.constantOr(1)===0||E.constantOr(1)===0))return;const I=f.context,O=I.gl,L=f.transform,q=f.depthModeForSublayer(0,a.DepthMode.ReadOnly),te=a.StencilMode.disabled,se=f.colorModeForRenderPass(),ce=L.projection.name==="globe",le=[a.mercatorXfromLng(L.center.lng),a.mercatorYfromLat(L.center.lat)],pe=[];for(let ie=0;ie<g.length;ie++){const ve=g[ie],xe=s.getTile(ve),De=xe.getBucket(u);if(!De||De.projection.name!==L.projection.name)continue;const Re=De.programConfigurations.get(u.id),ze=tp(u);ce&&ze.push("PROJECTION_GLOBE_VIEW");const Ve=f.useProgram("circle",Re,ze),Ue=De.layoutVertexBuffer,Ye=De.globeExtVertexBuffer,kt=De.indexBuffer,qe=L.projection.createInversionMatrix(L,ve.canonical),ft={programConfiguration:Re,program:Ve,layoutVertexBuffer:Ue,globeExtVertexBuffer:Ye,indexBuffer:kt,uniformValues:ep(f,ve,xe,qe,le,u),tile:xe};if(k){const et=De.segments.get();for(const Et of et)pe.push({segments:new a.SegmentVector([Et]),sortKey:Et.sortKey,state:ft})}else pe.push({segments:De.segments,sortKey:0,state:ft})}k&&pe.sort((ie,ve)=>ie.sortKey-ve.sortKey);const Z={useDepthForOcclusion:!ce};for(const ie of pe){const{programConfiguration:ve,program:xe,layoutVertexBuffer:De,globeExtVertexBuffer:Re,indexBuffer:ze,uniformValues:Ve,tile:Ue}=ie.state,Ye=ie.segments;f.terrain&&f.terrain.setupElevationDraw(Ue,xe,Z),f.prepareDrawProgram(I,xe,Ue.tileID.toUnwrapped()),xe.draw(I,O.TRIANGLES,q,te,se,a.CullFaceMode.disabled,Ve,u.id,De,ze,Ye,u.paint,L.zoom,ve,[Re])}},heatmap:function(f,s,u,g){if(u.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const v=f.context,b=v.gl,E=a.StencilMode.disabled,k=new a.ColorMode([b.ONE,b.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(se,ce,le,pe){const Z=se.gl,ie=ce.width*pe,ve=ce.height*pe;se.activeTexture.set(Z.TEXTURE1),se.viewport.set([0,0,ie,ve]);let xe=le.heatmapFbo;if(!xe||xe&&(xe.width!==ie||xe.height!==ve)){xe&&xe.destroy();const De=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,De),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),xe=le.heatmapFbo=se.createFramebuffer(ie,ve,!1),function(Re,ze,Ve,Ue,Ye,kt){const qe=Re.gl;qe.texImage2D(qe.TEXTURE_2D,0,Re.isWebGL2&&Re.extRenderToTextureHalfFloat?qe.RGBA16F:qe.RGBA,Ye,kt,0,qe.RGBA,Re.extRenderToTextureHalfFloat?Re.isWebGL2?qe.HALF_FLOAT:Re.extTextureHalfFloat.HALF_FLOAT_OES:qe.UNSIGNED_BYTE,null),Ue.colorAttachment.set(Ve)}(se,0,De,xe,ie,ve)}else Z.bindTexture(Z.TEXTURE_2D,xe.colorAttachment.get()),se.bindFramebuffer.set(xe.framebuffer)})(v,f,u,f.transform.projection.name==="globe"?.5:.25),v.clear({color:a.Color.transparent});const I=f.transform,O=I.projection.name==="globe",L=O?["PROJECTION_GLOBE_VIEW"]:null,q=O?a.CullFaceMode.frontCCW:a.CullFaceMode.disabled,te=[a.mercatorXfromLng(I.center.lng),a.mercatorYfromLat(I.center.lat)];for(let se=0;se<g.length;se++){const ce=g[se];if(s.hasRenderableParent(ce))continue;const le=s.getTile(ce),pe=le.getBucket(u);if(!pe||pe.projection.name!==I.projection.name)continue;const Z=pe.programConfigurations.get(u.id),ie=f.useProgram("heatmap",Z,L),{zoom:ve}=f.transform;f.terrain&&f.terrain.setupElevationDraw(le,ie),f.prepareDrawProgram(v,ie,ce.toUnwrapped());const xe=I.projection.createInversionMatrix(I,ce.canonical);ie.draw(v,b.TRIANGLES,a.DepthMode.disabled,E,k,q,ng(f,ce,le,xe,te,ve,u.paint.get("heatmap-intensity")),u.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,u.paint,f.transform.zoom,Z,O?[pe.globeExtVertexBuffer]:null)}v.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(v,b){const E=v.context,k=E.gl,I=b.heatmapFbo;if(!I)return;E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,I.colorAttachment.get()),E.activeTexture.set(k.TEXTURE1);let O=b.colorRampTexture;O||(O=b.colorRampTexture=new a.Texture(E,b.colorRamp,k.RGBA)),O.bind(k.LINEAR,k.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(E,k.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,v.colorModeForRenderPass(),a.CullFaceMode.disabled,((L,q,te,se)=>({u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}))(0,b),b.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,b.paint,v.transform.zoom)}(f,u))},line:function(f,s,u,g){if(f.renderPass!=="translucent")return;const v=u.paint.get("line-opacity"),b=u.paint.get("line-width");if(v.constantOr(1)===0||b.constantOr(1)===0)return;const E=f.depthModeForSublayer(0,a.DepthMode.ReadOnly),k=f.colorModeForRenderPass(),I=f.terrain&&f.terrain.renderingToTexture?1:a.exported.devicePixelRatio,O=u.paint.get("line-dasharray"),L=O.constantOr(1),q=u.layout.get("line-cap"),te=u.paint.get("line-pattern"),se=te.constantOr(1),ce=u.paint.get("line-gradient"),le=se?"linePattern":"line",pe=f.context,Z=pe.gl,ie=(xe=>{const De=[];bc(xe)&&De.push("RENDER_LINE_DASH"),xe.paint.get("line-gradient")&&De.push("RENDER_LINE_GRADIENT");const Re=xe.paint.get("line-trim-offset");Re[0]===0&&Re[1]===0||De.push("RENDER_LINE_TRIM_OFFSET");const ze=xe.paint.get("line-pattern").constantOr(1),Ve=xe.paint.get("line-opacity").constantOr(1)!==1;return!ze&&Ve&&De.push("RENDER_LINE_ALPHA_DISCARD"),De})(u);let ve=ie.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(ve=!1);for(const xe of g){const De=s.getTile(xe);if(se&&!De.patternsLoaded())continue;const Re=De.getBucket(u);if(!Re)continue;f.prepareDrawTile();const ze=Re.programConfigurations.get(u.id),Ve=f.useProgram(le,ze,ie),Ue=te.constantOr(null);if(Ue&&De.imageAtlas){const pt=De.imageAtlas.patternPositions[Ue.toString()];pt&&ze.setConstantPatternPositions(pt)}const Ye=O.constantOr(null),kt=q.constantOr(null);if(!se&&Ye&&kt&&De.lineAtlas){const pt=De.lineAtlas.getDash(Ye,kt);pt&&ze.setConstantPatternPositions(pt)}let[qe,ft]=u.paint.get("line-trim-offset");(kt==="round"||kt==="square")&&qe!==ft&&(qe===0&&(qe-=1),ft===1&&(ft+=1));const et=f.terrain?xe.projMatrix:null,Et=se?xc(f,De,u,et,I):gv(f,De,u,et,Re.lineClipsArray.length,I,[qe,ft]);if(ce){const pt=Re.gradients[u.id];let It=pt.texture;if(u.gradientVersion!==pt.version){let wt=256;if(u.stepInterpolant){const At=s.getSource().maxzoom,pn=xe.canonical.z===At?Math.ceil(1<<f.transform.maxZoom-xe.canonical.z):1;wt=a.clamp(a.nextPowerOfTwo(Re.maxLineLength/a.EXTENT*1024*pn),256,pe.maxTextureSize)}pt.gradient=a.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:wt,image:pt.gradient||void 0,clips:Re.lineClipsArray}),pt.texture?pt.texture.update(pt.gradient):pt.texture=new a.Texture(pe,pt.gradient,Z.RGBA),pt.version=u.gradientVersion,It=pt.texture}pe.activeTexture.set(Z.TEXTURE1),It.bind(u.stepInterpolant?Z.NEAREST:Z.LINEAR,Z.CLAMP_TO_EDGE)}L&&(pe.activeTexture.set(Z.TEXTURE0),De.lineAtlasTexture.bind(Z.LINEAR,Z.REPEAT),ze.updatePaintBuffers()),se&&(pe.activeTexture.set(Z.TEXTURE0),De.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),ze.updatePaintBuffers()),f.prepareDrawProgram(pe,Ve,xe.toUnwrapped());const Xe=pt=>{Ve.draw(pe,Z.TRIANGLES,E,pt,k,a.CullFaceMode.disabled,Et,u.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,u.paint,f.transform.zoom,ze,[Re.layoutVertexBuffer2])};if(ve){const pt=f.stencilModeForClipping(xe).ref;pt===0&&f.terrain&&pe.clear({stencil:0});const It={func:Z.EQUAL,mask:255};Et.u_alpha_discard_threshold=.8,Xe(new a.StencilMode(It,pt,255,Z.KEEP,Z.KEEP,Z.INVERT)),Et.u_alpha_discard_threshold=0,Xe(new a.StencilMode(It,pt,255,Z.KEEP,Z.KEEP,Z.KEEP))}else Xe(f.stencilModeForClipping(xe))}ve&&(f.resetStencilClippingMasks(),f.terrain&&pe.clear({stencil:0}))},fill:function(f,s,u,g){const v=u.paint.get("fill-color"),b=u.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const E=f.colorModeForRenderPass(),k=u.paint.get("fill-pattern"),I=f.opaquePassEnabledForLayer()&&!k.constantOr(1)&&v.constantOr(a.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===I){const O=f.depthModeForSublayer(1,f.renderPass==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly);sg(f,s,u,g,O,E,!1)}if(f.renderPass==="translucent"&&u.paint.get("fill-antialias")){const O=f.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,a.DepthMode.ReadOnly);sg(f,s,u,g,O,E,!0)}},"fill-extrusion":function(f,s,u,g){const v=u.paint.get("fill-extrusion-opacity");if(v!==0&&f.renderPass==="translucent"){const b=new a.DepthMode(f.context.gl.LEQUAL,a.DepthMode.ReadWrite,f.depthRangeFor3D);if(v!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))Nu(f,s,u,g,b,a.StencilMode.disabled,a.ColorMode.disabled),Nu(f,s,u,g,b,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const E=f.colorModeForRenderPass();Nu(f,s,u,g,b,a.StencilMode.disabled,E)}}},hillshade:function(f,s,u,g){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const v=f.context,b=f.depthModeForSublayer(0,a.DepthMode.ReadOnly),E=f.colorModeForRenderPass(),k=f.terrain&&f.terrain.renderingToTexture,[I,O]=f.renderPass!=="translucent"||k?[{},g]:f.stencilConfigForOverlap(g);for(const L of O){const q=s.getTile(L);if(q.needsHillshadePrepare&&f.renderPass==="offscreen")Km(f,q,u,b,a.StencilMode.disabled,E);else if(f.renderPass==="translucent"){const te=k&&f.terrain?f.terrain.stencilModeForRTTOverlap(L):I[L.overscaledZ];Ym(f,L,q,u,b,te,E)}}v.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,s,u,g,v,b){if(f.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!g.length)return;const E=f.context,k=E.gl,I=s.getSource(),O=f.useProgram("raster"),L=f.colorModeForRenderPass(),q=f.terrain&&f.terrain.renderingToTexture,[te,se]=I instanceof Fn||q?[{},g]:f.stencilConfigForOverlap(g),ce=se[se.length-1].overscaledZ,le=!f.options.moving;for(const pe of se){const Z=q?a.DepthMode.disabled:f.depthModeForSublayer(pe.overscaledZ-ce,u.paint.get("raster-opacity")===1?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly,k.LESS),ie=pe.toUnwrapped(),ve=s.getTile(pe);if(q&&(!ve||!ve.hasData()))continue;const xe=q?pe.projMatrix:f.transform.calculateProjMatrix(ie,le),De=f.terrain&&q?f.terrain.stencilModeForRTTOverlap(pe):te[pe.overscaledZ],Re=b?0:u.paint.get("raster-fade-duration");ve.registerFadeDuration(Re);const ze=s.findLoadedParent(pe,0),Ve=Xh(ve,ze,s,f.transform,Re);let Ue,Ye;f.terrain&&f.terrain.prepareDrawTile();const kt=u.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;E.activeTexture.set(k.TEXTURE0),ve.texture.bind(kt,k.CLAMP_TO_EDGE),E.activeTexture.set(k.TEXTURE1),ze?(ze.texture.bind(kt,k.CLAMP_TO_EDGE),Ue=Math.pow(2,ze.tileID.overscaledZ-ve.tileID.overscaledZ),Ye=[ve.tileID.canonical.x*Ue%1,ve.tileID.canonical.y*Ue%1]):ve.texture.bind(kt,k.CLAMP_TO_EDGE),ve.texture.useMipmap&&E.extTextureFilterAnisotropic&&f.transform.pitch>20&&k.texParameterf(k.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax);const qe=ip(xe,Ye||[0,0],Ue||1,Ve,u,I instanceof Fn?I.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(E,O,ie),I instanceof Fn)I.boundsBuffer&&I.boundsSegments&&O.draw(E,k.TRIANGLES,Z,a.StencilMode.disabled,L,a.CullFaceMode.disabled,qe,u.id,I.boundsBuffer,f.quadTriangleIndexBuffer,I.boundsSegments);else{const{tileBoundsBuffer:ft,tileBoundsIndexBuffer:et,tileBoundsSegments:Et}=f.getTileBoundsBuffers(ve);O.draw(E,k.TRIANGLES,Z,De,L,a.CullFaceMode.disabled,qe,u.id,ft,et,Et)}}f.resetStencilClippingMasks()},background:function(f,s,u,g){const v=u.paint.get("background-color"),b=u.paint.get("background-opacity");if(b===0)return;const E=f.context,k=E.gl,I=f.transform,O=I.tileSize,L=u.paint.get("background-pattern");if(f.isPatternMissing(L))return;const q=!L&&v.a===1&&b===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==q)return;const te=a.StencilMode.disabled,se=f.depthModeForSublayer(0,q==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly),ce=f.colorModeForRenderPass(),le=f.useProgram(L?"backgroundPattern":"background");let pe,Z=g;Z||(pe=f.getBackgroundTiles(),Z=Object.values(pe).map(ie=>ie.tileID)),L&&(E.activeTexture.set(k.TEXTURE0),f.imageManager.bind(f.context));for(const ie of Z){const ve=ie.toUnwrapped(),xe=g?ie.projMatrix:f.transform.calculateProjMatrix(ve);f.prepareDrawTile();const De=s?s.getTile(ie):pe?pe[ie.key]:new a.Tile(ie,O,I.zoom,f),Re=L?yv(xe,b,f,L,{tileID:ie,tileSize:O}):sp(xe,b,v);f.prepareDrawProgram(E,le,ve);const{tileBoundsBuffer:ze,tileBoundsIndexBuffer:Ve,tileBoundsSegments:Ue}=f.getTileBoundsBuffers(De);le.draw(E,k.TRIANGLES,se,te,ce,a.CullFaceMode.disabled,Re,u.id,ze,Ve,Ue)}},sky:function(f,s,u){const g=f.transform,v=g.projection.name==="mercator"||g.projection.name==="globe"?1:a.smoothstep(7,8,g.zoom),b=u.paint.get("sky-opacity")*v;if(b===0)return;const E=f.context,k=u.paint.get("sky-type"),I=new a.DepthMode(E.gl.LEQUAL,a.DepthMode.ReadOnly,[0,1]),O=f.frameCounter/1e3%1;k==="atmosphere"?f.renderPass==="offscreen"?u.needsSkyboxCapture(f)&&(function(L,q,te,se){const ce=L.context,le=ce.gl;let pe=q.skyboxFbo;if(!pe){pe=q.skyboxFbo=ce.createFramebuffer(32,32,!1),q.skyboxGeometry=new Vu(ce),q.skyboxTexture=ce.gl.createTexture(),le.bindTexture(le.TEXTURE_CUBE_MAP,q.skyboxTexture),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MAG_FILTER,le.LINEAR);for(let xe=0;xe<6;++xe)le.texImage2D(le.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,le.RGBA,32,32,0,le.RGBA,le.UNSIGNED_BYTE,null)}ce.bindFramebuffer.set(pe.framebuffer),ce.viewport.set([0,0,32,32]);const Z=q.getCenter(L,!0),ie=L.useProgram("skyboxCapture"),ve=new Float64Array(16);a.identity(ve),a.rotateY(ve,ve,.5*-Math.PI),uo(ce,q,ie,ve,Z,0),a.identity(ve),a.rotateY(ve,ve,.5*Math.PI),uo(ce,q,ie,ve,Z,1),a.identity(ve),a.rotateX(ve,ve,.5*-Math.PI),uo(ce,q,ie,ve,Z,2),a.identity(ve),a.rotateX(ve,ve,.5*Math.PI),uo(ce,q,ie,ve,Z,3),a.identity(ve),uo(ce,q,ie,ve,Z,4),a.identity(ve),a.rotateY(ve,ve,Math.PI),uo(ce,q,ie,ve,Z,5),ce.viewport.set([0,0,L.width,L.height])}(f,u),u.markSkyboxValid(f)):f.renderPass==="sky"&&function(L,q,te,se,ce){const le=L.context,pe=le.gl,Z=L.transform,ie=L.useProgram("skybox");le.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_CUBE_MAP,q.skyboxTexture);const ve=((xe,De,Re,ze,Ve)=>({u_matrix:xe,u_sun_direction:De,u_cubemap:0,u_opacity:ze,u_temporal_offset:Ve}))(Z.skyboxMatrix,q.getCenter(L,!1),0,se,ce);L.prepareDrawProgram(le,ie),ie.draw(le,pe.TRIANGLES,te,a.StencilMode.disabled,L.colorModeForRenderPass(),a.CullFaceMode.backCW,ve,"skybox",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(f,u,I,b,O):k==="gradient"&&f.renderPass==="sky"&&function(L,q,te,se,ce){const le=L.context,pe=le.gl,Z=L.transform,ie=L.useProgram("skyboxGradient");q.skyboxGeometry||(q.skyboxGeometry=new Vu(le)),le.activeTexture.set(pe.TEXTURE0);let ve=q.colorRampTexture;ve||(ve=q.colorRampTexture=new a.Texture(le,q.colorRamp,pe.RGBA)),ve.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);const xe=((De,Re,ze,Ve,Ue)=>({u_matrix:De,u_color_ramp:0,u_center_direction:Re,u_radius:a.degToRad(ze),u_opacity:Ve,u_temporal_offset:Ue}))(Z.skyboxMatrix,q.getCenter(L,!1),q.paint.get("sky-gradient-radius"),se,ce);L.prepareDrawProgram(le,ie),ie.draw(le,pe.TRIANGLES,te,a.StencilMode.disabled,L.colorModeForRenderPass(),a.CullFaceMode.backCW,xe,"skyboxGradient",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(f,u,I,b,O)},debug:function(f,s,u){for(let g=0;g<u.length;g++)Sv(f,s,u[g])},custom:function(f,s,u,g){const v=f.context,b=u.implementation;if(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes("custom")||f.terrain&&(f.terrain.renderingToTexture||f.renderPass==="offscreen")&&u.isLayerDraped()){if(f.renderPass==="offscreen"){const E=b.prerender;if(E){if(f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),f.transform.projection.name==="globe"){const k=f.transform.pointMerc;E.call(b,v.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(f.transform.zoom),[k.x,k.y],f.transform.pixelsPerMeterRatio)}else E.call(b,v.gl,f.transform.customLayerMatrix());v.setDirty(),f.setBaseState()}}else if(f.renderPass==="translucent"){if(f.terrain&&f.terrain.renderingToTexture){const k=b.renderToTile;if(k){const I=g[0].canonical,O=new a.MercatorCoordinate(I.x+g[0].wrap*(1<<I.z),I.y,I.z);v.setDepthMode(a.DepthMode.disabled),v.setStencilMode(a.StencilMode.disabled),v.setColorMode(f.colorModeForRenderPass()),f.setCustomLayerDefaults(),k.call(b,v.gl,O),v.setDirty(),f.setBaseState()}return}f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),v.setStencilMode(a.StencilMode.disabled);const E=b.renderingMode==="3d"?new a.DepthMode(f.context.gl.LEQUAL,a.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,a.DepthMode.ReadOnly);if(v.setDepthMode(E),f.transform.projection.name==="globe"){const k=f.transform.pointMerc;b.render(v.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(f.transform.zoom),[k.x,k.y],f.transform.pixelsPerMeterRatio)}else b.render(v.gl,f.transform.customLayerMatrix());v.setDirty(),f.setBaseState(),v.bindFramebuffer.set(null)}}else a.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class ml{constructor(s,u,g=!1){this.context=new bt(s,g),this.transform=u,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=a.SourceCache.maxUnderzooming+a.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(s,u){const g=!!s&&!!s.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Kh(this,s));const v=this._terrain;this.transform.elevation=g?v:null,v.update(s,this.transform,u)}_updateFog(s){const u=s.fog;if(!u||this.transform.projection.name==="globe"||u.getOpacity(this.transform.pitch)<1||u.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,v]=u.getFovAdjustedRange(this.transform._fov);if(g>v)return void(this.transform.fogCullDistSq=null);const b=g+.78*(v-g);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(s,u){if(this.width=s*a.exported.devicePixelRatio,this.height=u*a.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._layers[g].resize()}setup(){const s=this.context,u=new a.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(a.EXTENT,0),u.emplaceBack(0,a.EXTENT),u.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(u,a.posAttributes.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const g=new a.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(a.EXTENT,0),g.emplaceBack(0,a.EXTENT),g.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=s.createVertexBuffer(g,a.posAttributes.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const v=new a.StructArrayLayout2i4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(v,a.posAttributes.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const b=new a.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(a.EXTENT,0,a.EXTENT,0),b.emplaceBack(0,a.EXTENT,0,a.EXTENT),b.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.mercatorBoundsBuffer=s.createVertexBuffer(b,a.boundsAttributes.members),this.mercatorBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const E=new a.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(E);const k=new a.StructArrayLayout1ui2;for(const O of[0,1,3,2,0])k.emplaceBack(O);this.debugIndexBuffer=s.createIndexBuffer(k),this.emptyTexture=new a.Texture(s,new a.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),s.gl.RGBA),this.identityMat=a.create();const I=this.context.gl;this.stencilClearMode=new a.StencilMode({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO),this.loadTimeStamps.push(a.window.performance.now()),this.atmosphereBuffer=new dg(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(s){return s._makeTileBoundsBuffers(this.context,this.transform.projection),s._tileBoundsBuffer?{tileBoundsBuffer:s._tileBoundsBuffer,tileBoundsIndexBuffer:s._tileBoundsIndexBuffer,tileBoundsSegments:s._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const s=this.context,u=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(s,u.TRIANGLES,a.DepthMode.disabled,this.stencilClearMode,a.ColorMode.disabled,a.CullFaceMode.disabled,_c(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(s,u,g){if(!u||this.currentStencilSource===u.id||!s.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const I of g)if(this._tileClippingMaskIDs[I.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=u.id;const v=this.context,b=v.gl;this.nextStencilID+g.length>256&&this.clearStencil(),v.setColorMode(a.ColorMode.disabled),v.setDepthMode(a.DepthMode.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of g){const I=u.getTile(k),O=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:L,tileBoundsIndexBuffer:q,tileBoundsSegments:te}=this.getTileBoundsBuffers(I);E.draw(v,b.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:b.ALWAYS,mask:0},O,255,b.KEEP,b.KEEP,b.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,_c(k.projMatrix),"$clipping",L,q,te)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,u=this.context.gl;return new a.StencilMode({func:u.NOTEQUAL,mask:255},s,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(s){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(s);const u=this.context.gl;return new a.StencilMode({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(s){const u=this.context.gl,g=s.sort((E,k)=>k.overscaledZ-E.overscaledZ),v=g[g.length-1].overscaledZ,b=g[0].overscaledZ-v+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const E={};for(let k=0;k<b;k++)E[k+v]=new a.StencilMode({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=b,[E,g]}return[{[v]:a.StencilMode.disabled},g]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new a.ColorMode([s.CONSTANT_COLOR,s.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?a.ColorMode.unblended:a.ColorMode.alphaBlended}depthModeForSublayer(s,u,g){if(!this.opaquePassEnabledForLayer())return a.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new a.DepthMode(g||this.context.gl.LEQUAL,u,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,u){this.style=s,this.options=u,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const g=this.style.order,v=this.style._sourceCaches;for(const O in v){const L=v[O];L.used&&L.prepare(this.context)}const b={},E={},k={};for(const O in v){const L=v[O];b[O]=L.getVisibleCoordinates(),E[O]=b[O].slice().reverse(),k[O]=L.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<g.length;O++)if(this.style._layers[g[O]].is3D()){this.opaquePassCutoff=O;break}if(this.terrain&&(this.terrain.updateTileBinding(k),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.GlobeSharedBuffers(this.context)),!a.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const O of g){const L=this.style._layers[O],q=s._getLayerSourceCache(L);if(!L.hasOffscreenPass()||L.isHidden(this.transform.zoom))continue;const te=q?E[q.id]:void 0;(L.type==="custom"||L.isSky()||te&&te.length)&&this.renderLayer(this,q,L,te)}this.depthRangeFor3D=[0,1-(s.order.length+2)*this.numSublayers*this.depthEpsilon];const I=this.terrain;if(I&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&I.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:u.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[g[this.currentLayer]],L=s._getLayerSourceCache(O);if(O.isSky())continue;const q=L?E[L.id]:void 0;this._renderTileClippingMasks(O,L,q),this.renderLayer(this,L,O,q)}if(this.style.fog&&this.transform.projection.supportsFog&&function(O,L){const q=O.context,te=q.gl,se=O.transform,ce=new a.DepthMode(te.LEQUAL,a.DepthMode.ReadOnly,[0,1]),le=O.useProgram("globeAtmosphere",null,se.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),pe=a.globeToMercatorTransition(se.zoom),Z=L.properties.get("color").toArray01(),ie=L.properties.get("high-color").toArray01(),ve=L.properties.get("space-color").toArray01PremultipliedAlpha(),xe=a.identity$1([]);a.rotateY$1(xe,xe,-a.degToRad(se._center.lng)),a.rotateX$1(xe,xe,a.degToRad(se._center.lat)),a.rotateZ$1(xe,xe,se.angle),a.rotateX$1(xe,xe,-se._pitch);const De=a.fromQuat(new Float32Array(16),xe),Re=a.mapValue(L.properties.get("star-intensity"),0,1,0,.25),ze=5e-4,Ve=a.mapValue(L.properties.get("horizon-blend"),0,1,ze,.25),Ue=a.globeUseCustomAntiAliasing(O,q,se)&&Ve===ze?se.worldSize/(2*Math.PI*1.025)-1:se.globeRadius,Ye=O.frameCounter/1e3%1,kt=a.length(se.globeCenterInViewSpace),qe=Math.sqrt(Math.pow(kt,2)-Math.pow(Ue,2)),ft=Math.acos(qe/kt),et=((Xe,pt,It,wt,At,pn,In,rn,wn,Gn,Vn,cn,or,cr)=>({u_frustum_tl:Xe,u_frustum_tr:pt,u_frustum_br:It,u_frustum_bl:wt,u_horizon:At,u_transition:pn,u_fadeout_range:In,u_color:rn,u_high_color:wn,u_space_color:Gn,u_star_intensity:Vn,u_star_size:5*a.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:cn,u_horizon_angle:or,u_rotation_matrix:cr}))(se.frustumCorners.TL,se.frustumCorners.TR,se.frustumCorners.BR,se.frustumCorners.BL,se.frustumCorners.horizon,pe,Ve,Z,ie,ve,Re,Ye,ft,De);O.prepareDrawProgram(q,le);const Et=O.atmosphereBuffer;Et&&le.draw(q,te.TRIANGLES,ce,a.StencilMode.disabled,a.ColorMode.alphaBlended,a.CullFaceMode.backCW,et,"skybox",Et.vertexBuffer,Et.indexBuffer,Et.segments)}(this,this.style.fog),this.renderPass="sky",(a.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const O=this.style._layers[g[this.currentLayer]],L=s._getLayerSourceCache(O);O.isSky()&&this.renderLayer(this,L,O,L?E[L.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;){const O=this.style._layers[g[this.currentLayer]],L=s._getLayerSourceCache(O);if(O.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(O)){if(O.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const q=L?(O.type==="symbol"?k:E)[L.id]:void 0;this._renderTileClippingMasks(O,L,L?b[L.id]:void 0),this.renderLayer(this,L,O,q),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let O=null;a.values(this.style._layers).forEach(L=>{const q=s._getLayerSourceCache(L);q&&!L.isHidden(this.transform.zoom)&&(!O||O.getSource().maxzoom<q.getSource().maxzoom)&&(O=q)}),O&&this.options.showTileBoundaries&&Ma.debug(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const L=O.transform.padding;lg(O,O.transform.height-(L.top||0),3,pl),lg(O,L.bottom||0,3,vv),Uu(O,L.left||0,3,xv),Uu(O,O.transform.width-(L.right||0),3,bv);const q=O.transform.centerPoint;(function(te,se,ce,le){fl(te,se-1,ce-10,2,20,le),fl(te,se-10,ce-1,20,2,le)})(O,q.x,O.transform.height-q.y,wv)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(a.window.performance.now()),this.saveCanvasCopy())}renderLayer(s,u,g,v){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||v&&v.length)&&(this.id=g.id,this.gpuTimingStart(g),(!s.transform.projection.unsupportedLayers||!s.transform.projection.unsupportedLayers.includes(g.type)||s.terrain&&g.type==="custom")&&Ma[g.type](s,u,g,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let g=this.gpuTimers[s.id];g||(g=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),g.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,g.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const s=this.context.extTimerQuery,u=s.createQueryEXT();this.deferredRenderGpuTimeQueries.push(u),s.beginQueryEXT(s.TIME_ELAPSED_EXT,u)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}collectDeferredRenderGpuQueries(){const s=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],s}queryGpuTimers(s){const u={};for(const g in s){const v=s[g],b=this.context.extTimerQuery,E=b.getQueryObjectEXT(v.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(v.query),u[g]=E}return u}queryGpuTimeDeferredRender(s){if(!this.options.gpuTimingDeferredRender)return 0;const u=this.context.extTimerQuery;let g=0;for(const v of s)g+=u.getQueryObjectEXT(v,u.QUERY_RESULT_EXT)/1e6,u.deleteQueryEXT(v);return g}translatePosMatrix(s,u,g,v,b){if(!g[0]&&!g[1])return s;const E=b?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(E){const O=Math.sin(E),L=Math.cos(E);g=[g[0]*L-g[1]*O,g[0]*O+g[1]*L]}const k=[b?g[0]:nt(u,g[0],this.transform.zoom),b?g[1]:nt(u,g[1],this.transform.zoom),0],I=new Float32Array(16);return a.translate(I,s,k),I}saveTileTexture(s){const u=this._tileTextures[s.size[0]];u?u.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const u=this._tileTextures[s];return u&&u.length>0?u.pop():null}isPatternMissing(s){return s===null||s!==void 0&&!this.imageManager.getPattern(s.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const s=this.terrain&&this.terrain.renderingToTexture,u=this.terrain&&this.terrain.exaggeration()===0,g=this.style&&this.style.fog,v=[];return this.terrainRenderModeElevated()&&v.push("TERRAIN"),this.transform.projection.name==="globe"&&v.push("GLOBE"),u&&v.push("ZERO_EXAGGERATION"),g&&!s&&g.getOpacity(this.transform.pitch)!==0&&v.push("FOG"),s&&v.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&v.push("OVERDRAW_INSPECTOR"),v}useProgram(s,u,g){this.cache=this.cache||{};const v=g||[],b=this.currentGlobalDefines().concat(v),E=Xn.cacheKey(Gh[s],s,b,u);return this.cache[E]||(this.cache[E]=new Xn(this.context,s,Gh[s],u,ap[s],b)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(s,u,g){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const b=v.getOpacity(this.transform.pitch),E=((k,I,O,L,q,te,se,ce,le,pe,Z)=>{const ie=k.transform,ve=I.properties.get("color").toArray01();ve[3]=L;const xe=k.frameCounter/1e3%1;return{u_fog_matrix:O?ie.calculateFogTileMatrix(O):k.identityMat,u_fog_range:I.getFovAdjustedRange(ie._fov),u_fog_color:ve,u_fog_horizon_blend:I.properties.get("horizon-blend"),u_fog_temporal_offset:xe,u_frustum_tl:q,u_frustum_tr:te,u_frustum_br:se,u_frustum_bl:ce,u_globe_pos:le,u_globe_radius:pe,u_viewport:Z,u_globe_transition:a.globeToMercatorTransition(ie.zoom),u_is_globe:+(ie.projection.name==="globe")}})(this,v,g,b,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.exported.devicePixelRatio,this.transform.height*a.exported.devicePixelRatio]);u.setFogUniformValues(s,E)}}setTileLoadedFlag(s){this.tileLoaded=s}saveCanvasCopy(){const s=this.canvasCopy();s&&(this.frameCopies.push(s),this.tileLoaded=!1)}canvasCopy(){const s=this.context.gl,u=s.createTexture();return s.bindTexture(s.TEXTURE_2D,u),s.copyTexImage2D(s.TEXTURE_2D,0,s.RGBA,0,0,s.drawingBufferWidth,s.drawingBufferHeight,0),u}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const s=this.style&&this.style.fog;return!!s&&s.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const s=this._backgroundTiles,u=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const v of g)u[v.key]=s[v.key]||new a.Tile(v,512,this.transform.tileZoom,this);return u}clearBackgroundTiles(){this._backgroundTiles={}}}class ju{constructor(s=0,u=0,g=0,v=0){if(isNaN(s)||s<0||isNaN(u)||u<0||isNaN(g)||g<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=u,this.left=g,this.right=v}interpolate(s,u,g){return u.top!=null&&s.top!=null&&(this.top=a.number(s.top,u.top,g)),u.bottom!=null&&s.bottom!=null&&(this.bottom=a.number(s.bottom,u.bottom,g)),u.left!=null&&s.left!=null&&(this.left=a.number(s.left,u.left,g)),u.right!=null&&s.right!=null&&(this.right=a.number(s.right,u.right,g)),this}getCenter(s,u){const g=a.clamp((this.left+s-this.right)/2,0,s),v=a.clamp((this.top+u-this.bottom)/2,0,u);return new a.Point(g,v)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new ju(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Wu(f,s){const u=a.getColumn(f,3);a.fromQuat(f,s),a.setColumn(f,3,u)}function Yn(f,s){const u=a.identity$1([]);return a.rotateZ$1(u,u,-s),a.rotateX$1(u,u,-f),u}function Cc(f,s){const u=[f[0],f[1],0],g=[s[0],s[1],0];if(a.length(u)>=1e-15){const E=a.normalize([],u);a.scale$2(g,E,a.dot(g,E)),s[0]=g[0],s[1]=g[1]}const v=a.cross([],s,f);if(a.len(v)<1e-15)return null;const b=Math.atan2(-v[1],v[0]);return Yn(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),b)}class hg{constructor(s,u){this.position=s,this.orientation=u}get position(){return this._position}set position(s){if(s){const u=s instanceof a.MercatorCoordinate?s:new a.MercatorCoordinate(s[0],s[1],s[2]);this._renderWorldCopies&&(u.x=a.wrap(u.x,0,1)),this._position=u}else this._position=null}lookAtPoint(s,u){if(this.orientation=null,!this.position)return;const g=this.position,v=this._elevation?this._elevation.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(s)):0,b=a.MercatorCoordinate.fromLngLat(s,v),E=[b.x-g.x,b.y-g.y,b.z-g.z];u||(u=[0,0,1]),u[2]=Math.abs(u[2]),this.orientation=Cc(E,u)}setPitchBearing(s,u){this.orientation=Yn(a.degToRad(s),a.degToRad(-u))}}class Gu{constructor(s,u){this._transform=a.identity([]),this.orientation=u,this.position=s}get mercatorPosition(){const s=this.position;return new a.MercatorCoordinate(s[0],s[1],s[2])}get position(){const s=a.getColumn(this._transform,3);return[s[0],s[1],s[2]]}set position(s){var u;s&&a.setColumn(this._transform,3,[(u=s)[0],u[1],u[2],1])}get orientation(){return this._orientation}set orientation(s){this._orientation=s||a.identity$1([]),s&&Wu(this._transform,this._orientation)}getPitchBearing(){const s=this.forward(),u=this.right();return{bearing:Math.atan2(-u[1],u[0]),pitch:Math.atan2(Math.sqrt(s[0]*s[0]+s[1]*s[1]),-s[2])}}setPitchBearing(s,u){this._orientation=Yn(s,u),Wu(this._transform,this._orientation)}forward(){const s=a.getColumn(this._transform,2);return[-s[0],-s[1],-s[2]]}up(){const s=a.getColumn(this._transform,1);return[-s[0],-s[1],-s[2]]}right(){const s=a.getColumn(this._transform,0);return[s[0],s[1],s[2]]}getCameraToWorld(s,u){const g=new Float64Array(16);return a.invert(g,this.getWorldToCamera(s,u)),g}getWorldToCameraPosition(s,u,g){const v=this.position;a.scale$2(v,v,-s);const b=new Float64Array(16);return a.fromScaling(b,[g,g,g]),a.translate(b,b,v),b[10]*=u,b}getWorldToCamera(s,u){const g=new Float64Array(16),v=new Float64Array(4),b=this.position;return a.conjugate(v,this._orientation),a.scale$2(b,b,-s),a.fromQuat(g,v),a.translate(g,g,b),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=u,g[9]*=u,g[10]*=u,g[11]*=u,g}getCameraToClipPerspective(s,u,g,v){const b=new Float64Array(16);return a.perspective(b,s,u,g,v),b}getDistanceToElevation(s,u=!1){const g=s===0?0:a.mercatorZfromAltitude(s,u?a.latFromMercatorY(this.position[1]):this.position[1]),v=this.forward();return(g-this.position[2])/v[2]}clone(){return new Gu([...this.position],[...this.orientation])}}function gl(f,s){const u=Hu(f.projection,f.zoom,f.width,f.height),g=function(b,E,k,I,O){const L=new a.LngLat(k.lng-180*Ms,k.lat),q=new a.LngLat(k.lng+180*Ms,k.lat),te=b.project(L.lng,L.lat),se=b.project(q.lng,q.lat),ce=-Math.atan2(se.y-te.y,se.x-te.x),le=a.MercatorCoordinate.fromLngLat(k);le.y=a.clamp(le.y,-1+Ms,1-Ms);const pe=le.toLngLat(),Z=b.project(pe.lng,pe.lat),ie=a.MercatorCoordinate.fromLngLat(pe);ie.x+=Ms;const ve=ie.toLngLat(),xe=b.project(ve.lng,ve.lat),De=qu(xe.x-Z.x,xe.y-Z.y,ce),Re=a.MercatorCoordinate.fromLngLat(pe);Re.y+=Ms;const ze=Re.toLngLat(),Ve=b.project(ze.lng,ze.lat),Ue=qu(Ve.x-Z.x,Ve.y-Z.y,ce),Ye=Math.abs(De.x)/Math.abs(Ue.y),kt=a.identity([]);a.rotateZ(kt,kt,-ce*(1-(O?0:I)));const qe=a.identity([]);return a.scale(qe,qe,[1,1-(1-Ye)*I,1]),qe[4]=-Ue.x/Ue.y*I,a.rotateZ(qe,qe,ce),a.multiply(qe,kt,qe),qe}(f.projection,0,f.center,u,s),v=pg(f);return a.scale(g,g,[v,v,1]),g}function pg(f){const s=f.projection,u=Hu(f.projection,f.zoom,f.width,f.height),g=fg(s,f.center),v=fg(s,a.LngLat.convert(s.center));return Math.pow(2,g*u+(1-u)*v)}function Hu(f,s,u,g,v=1/0){const b=f.range;if(!b)return 0;const E=Math.min(v,Math.max(u,g)),k=Math.log(E/1024)/Math.LN2;return a.smoothstep(b[0]+k,b[1]+k,s)}const Ms=1/4e4;function fg(f,s){const u=a.clamp(s.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),g=new a.LngLat(s.lng-180*Ms,u),v=new a.LngLat(s.lng+180*Ms,u),b=f.project(g.lng,u),E=f.project(v.lng,u),k=a.MercatorCoordinate.fromLngLat(g),I=a.MercatorCoordinate.fromLngLat(v),O=E.x-b.x,L=E.y-b.y,q=I.x-k.x,te=I.y-k.y,se=Math.sqrt((q*q+te*te)/(O*O+L*L));return Math.log(se)/Math.LN2}function qu(f,s,u){const g=Math.cos(u),v=Math.sin(u);return{x:f*g-s*v,y:f*v+s*g}}class yl{constructor(s,u,g,v,b,E,k){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=s||0,this._maxZoom=u||22,this._minPitch=g??0,this._maxPitch=v??60,this.setProjection(E),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ju,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Gu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const s=new yl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return s._elevation=this._elevation,s._centerAltitude=this._centerAltitude,s._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,s.tileSize=this.tileSize,s.mercatorFromTransition=this.mercatorFromTransition,s.width=this.width,s.height=this.height,s.cameraElevationReference=this.cameraElevationReference,s._center=this._center,s._setZoom(this.zoom),s._seaLevelZoom=this._seaLevelZoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._nearZ=this._nearZ,s._farZ=this._farZ,s._averageElevation=this._averageElevation,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._camera=this._camera.clone(),s._calcMatrices(),s.freezeTileCoverage=this.freezeTileCoverage,s.frustumCorners=this.frustumCorners,s}get elevation(){return this._elevation}set elevation(s){this._elevation!==s&&(this._elevation=s,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(s,u=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(s||g)&&this._constrainCamera(u),this._calcMatrices()}getProjection(){return a.pick(this.projection,["name","center","parallels"])}setProjection(s){this.projectionOptions=s||{name:"mercator"};const u=this.projection?this.getProjection():void 0;this.projection=a.getProjection(this.projectionOptions);const g=!w(u,this.getProjection());return g&&this._calcMatrices(),this.mercatorFromTransition=!1,g}setMercatorFromTransition(){const s=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.getProjection({name:"mercator"});const u=s!==this.projection.name;return u&&this._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get cameraWorldSize(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.Point(this.width,this.height)}get bearing(){return a.wrap(this.rotation,-180,180)}set bearing(s){this.rotation=s}get rotation(){return-this.angle/Math.PI*180}set rotation(s){const u=-s*Math.PI/180;var g;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(g=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(v,b,E){var k=b[0],I=b[1],O=b[2],L=b[3],q=Math.sin(E),te=Math.cos(E);v[0]=k*te+O*q,v[1]=I*te+L*q,v[2]=k*-q+O*te,v[3]=I*-q+L*te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const u=a.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const s=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/s)}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=a.degToRad(s),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(s){this._averageElevation=s,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(s){const u=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._setZoom(u),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(s){this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const s=this._elevation;this._centerAltitude=s.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=s.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const s=this._elevation,u=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let v=0,b=0;for(let E=0;E<u.length;E++){const k=new a.Point(u[E][0]*this.width,g+u[E][1]*(this.height-g)),I=s.pointCoordinate(k);if(!I)continue;const O=1/Math.hypot(I[0]-this._camera.position[0],I[1]-this._camera.position[1]);v+=I[3]*O,b+=O}return b===0?NaN:v/b}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const s=this._seaLevelZoom,u=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*u,v=this._mercatorZfromZoom(s),b=this._mercatorZfromZoom(this._maxZoom),E=Math.max(v-g,b);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}computeZoomRelativeTo(s){const u=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,s.toAltitude()));let g;g=s.z<this._camera.position[2]?[u.x,u.y,u.z]:[s.x,s.y,s.z];const v=a.length(a.sub([],this._camera.position,g));return a.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(s){if(!this.height||!s.position&&!s.orientation)return;this._updateCameraState();let u=!1;if(s.orientation&&!a.exactEquals(s.orientation,this._camera.orientation)&&(u=this._setCameraOrientation(s.orientation)),s.position){const g=[s.position.x,s.position.y,s.position.z];a.exactEquals$1(g,this._camera.position)||(this._setCameraPosition(g),u=!0)}u&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const s=this._camera.position,u=new hg;return u.position=new a.MercatorCoordinate(s[0],s[1],s[2]),u.orientation=this._camera.orientation,u._elevation=this.elevation,u._renderWorldCopies=this.renderWorldCopies,u}_setCameraOrientation(s){if(!a.length$1(s))return!1;a.normalize$1(s,s);const u=a.transformQuat([],[0,0,-1],s),g=a.transformQuat([],[0,-1,0],s);if(g[2]<0)return!1;const v=Cc(u,g);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(s){const u=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;s[2]=a.clamp(s[2],v/g,v/u),this._camera.position=s}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,u,g){this._unmodified=!1,this._edgeInsets.interpolate(s,u,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const u=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(s){const u=[new a.UnwrappedTileID(0,s)];if(this.renderWorldCopies){const g=this.pointCoordinate(new a.Point(0,0)),v=this.pointCoordinate(new a.Point(this.width,0)),b=this.pointCoordinate(new a.Point(this.width,this.height)),E=this.pointCoordinate(new a.Point(0,this.height)),k=Math.floor(Math.min(g.x,v.x,b.x,E.x)),I=Math.floor(Math.max(g.x,v.x,b.x,E.x)),O=1;for(let L=k-O;L<=I+O;L++)L!==0&&u.push(new a.UnwrappedTileID(L,s))}return u}coveringTiles(s){let u=this.coveringZoomLevel(s);const g=u,v=this.elevation&&!s.isTerrainDEM,b=this.projection.name==="mercator";if(s.minzoom!==void 0&&u<s.minzoom)return[];s.maxzoom!==void 0&&u>s.maxzoom&&(u=s.maxzoom);const E=this.locationCoordinate(this.center),k=this.center.lat,I=1<<u,O=[I*E.x,I*E.y,0],L=this.projection.name==="globe",q=!L,te=a.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u,q),se=L?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ce=I*a.mercatorZfromAltitude(1,this.center.lat),le=this._camera.position[2]/a.mercatorZfromAltitude(1,this.center.lat),pe=[I*se.x,I*se.y,le*(q?1:ce)],Z=this.cameraToCenterDistance/s.tileSize*(s.roundZoom?1:.502),ie=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?u:0,ve=s.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,xe=s.isTerrainDEM?-ve:this._elevation?this._elevation.getMinElevationBelowMSL():0,De=this.projection.isReprojectedInTileSpace?pg(this):1,Re=Xe=>{const It=new a.MercatorCoordinate(Xe.x+25e-6,Xe.y,Xe.z),wt=new a.MercatorCoordinate(Xe.x,Xe.y+25e-6,Xe.z),At=Xe.toLngLat(),pn=It.toLngLat(),In=wt.toLngLat(),rn=this.locationCoordinate(At),wn=this.locationCoordinate(pn),Gn=this.locationCoordinate(In),Vn=Math.hypot(wn.x-rn.x,wn.y-rn.y),cn=Math.hypot(Gn.x-rn.x,Gn.y-rn.y);return Math.sqrt(Vn*cn)*De/25e-6},ze=Xe=>{const pt=ve,It=xe;return{aabb:a.tileAABB(this,I,0,0,0,Xe,It,pt,this.projection),zoom:0,x:0,y:0,minZ:It,maxZ:pt,wrap:Xe,fullyVisible:!1}},Ve=[];let Ue=[];const Ye=u,kt=s.reparseOverscaled?g:u,qe=Xe=>Xe*Xe,ft=qe((le-this._centerAltitude)*ce),et=Xe=>{if(!this._elevation||!Xe.tileID||!b)return;const pt=this._elevation.getMinMaxForTile(Xe.tileID),It=Xe.aabb;pt?(It.min[2]=pt.min,It.max[2]=pt.max,It.center[2]=(It.min[2]+It.max[2])/2):(Xe.shouldSplit=Et(Xe),Xe.shouldSplit||(It.min[2]=It.max[2]=It.center[2]=this._centerAltitude))},Et=Xe=>{if(Xe.zoom<ie)return!0;if(Xe.zoom===Ye)return!1;if(Xe.shouldSplit!=null)return Xe.shouldSplit;const pt=Xe.aabb.distanceX(pe),It=Xe.aabb.distanceY(pe);let wt=ft,At=1;if(L){wt=qe(Xe.aabb.distanceZ(pe));const rn=Math.pow(2,Xe.zoom),wn=a.latFromMercatorY((Xe.y+1)/rn),Gn=a.latFromMercatorY(Xe.y/rn),Vn=Math.min(Math.max(k,wn),Gn),cn=a.circumferenceAtLatitude(Vn)/a.circumferenceAtLatitude(k);if(At=Vn===k?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,cn/this._mercatorScaleRatio),this.zoom<=a.GLOBE_ZOOM_THRESHOLD_MIN&&Xe.zoom===Ye-1&&cn>=.9)return!0}else if(v&&(wt=qe(Xe.aabb.distanceZ(pe)*ce)),this.projection.isReprojectedInTileSpace&&g<=5){const rn=Math.pow(2,Xe.zoom),wn=Re(new a.MercatorCoordinate((Xe.x+.5)/rn,(Xe.y+.5)/rn));At=wn>.85?1:wn}const pn=pt*pt+It*It+wt,In=qe((1<<Ye-Xe.zoom)*Z*At*((rn,wn)=>{if(wn*qe(.707)<rn)return 1;const Gn=Math.sqrt(wn/rn);return Gn/(1.4144271570014144+(Math.pow(1.1,Gn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(wt,ft),pn));return pn<In};if(this.renderWorldCopies)for(let Xe=1;Xe<=3;Xe++)Ve.push(ze(-Xe)),Ve.push(ze(Xe));for(Ve.push(ze(0));Ve.length>0;){const Xe=Ve.pop(),pt=Xe.x,It=Xe.y;let wt=Xe.fullyVisible;if(!wt){const At=Xe.aabb.intersects(te);if(At===0)continue;wt=At===2}if(Xe.zoom!==Ye&&Et(Xe))for(let At=0;At<4;At++){const pn=(pt<<1)+At%2,In=(It<<1)+(At>>1),rn={aabb:b?Xe.aabb.quadrant(At):a.tileAABB(this,I,Xe.zoom+1,pn,In,Xe.wrap,Xe.minZ,Xe.maxZ,this.projection),zoom:Xe.zoom+1,x:pn,y:In,wrap:Xe.wrap,fullyVisible:wt,tileID:void 0,shouldSplit:void 0,minZ:Xe.minZ,maxZ:Xe.maxZ};v&&!L&&(rn.tileID=new a.OverscaledTileID(Xe.zoom+1===Ye?kt:Xe.zoom+1,Xe.wrap,Xe.zoom+1,pn,In),et(rn)),Ve.push(rn)}else{const At=Xe.zoom===Ye?kt:Xe.zoom;if(s.minzoom&&s.minzoom>At)continue;const pn=O[0]-(.5+pt+(Xe.wrap<<Xe.zoom))*(1<<u-Xe.zoom),In=O[1]-.5-It,rn=Xe.tileID?Xe.tileID:new a.OverscaledTileID(At,Xe.wrap,Xe.zoom,pt,It);Ue.push({tileID:rn,distanceSq:pn*pn+In*In})}}if(this.fogCullDistSq){const Xe=this.fogCullDistSq,pt=this.horizonLineFromTop();Ue=Ue.filter(It=>{const wt=[0,0,0,1],At=[a.EXTENT,a.EXTENT,0,1],pn=this.calculateFogTileMatrix(It.tileID.toUnwrapped());a.transformMat4$1(wt,wt,pn),a.transformMat4$1(At,At,pn);const In=a.getAABBPointSquareDist(wt,At);if(In===0)return!0;let rn=!1;const wn=this._elevation;if(wn&&In>Xe&&pt!==0){const Gn=this.calculateProjMatrix(It.tileID.toUnwrapped());let Vn;s.isTerrainDEM||(Vn=wn.getMinMaxForTile(It.tileID)),Vn||(Vn={min:xe,max:ve});const cn=a.furthestTileCorner(this.rotation),or=[cn[0]*a.EXTENT,cn[1]*a.EXTENT,Vn.max];a.transformMat4(or,or,Gn),rn=(1-or[1])*this.height*.5<pt}return In<Xe||rn})}return Ue.sort((Xe,pt)=>Xe.distanceSq-pt.distanceSq).map(Xe=>Xe.tileID)}resize(s,u){this.width=s,this.height=u,this.pixelsToGLUnits=[2/s,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const u=a.clamp(s.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),g=this.projection.project(s.lng,u);return new a.Point(g.x*this.worldSize,g.y*this.worldSize)}unproject(s){return this.projection.unproject(s.x/this.worldSize,s.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(s,u){let g,v;const b=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;g=(u.x-b.x)/k,v=(u.y-b.y)/k}else{const k=this.pointCoordinate(u),I=this.pointCoordinate(b);g=k.x-I.x,v=k.y-I.y}const E=this.locationCoordinate(s);this.setLocation(new a.MercatorCoordinate(E.x-g,E.y-v))}setLocation(s){this.center=this.coordinateLocation(s),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(s){return this.projection.locationPoint(this,s)}locationPoint3D(s){return this.projection.locationPoint(this,s,!0)}pointLocation(s){return this.coordinateLocation(this.pointCoordinate(s))}pointLocation3D(s){return this.coordinateLocation(this.pointCoordinate3D(s))}locationCoordinate(s,u){const g=u?a.mercatorZfromAltitude(u,s.lat):void 0,v=this.projection.project(s.lng,s.lat);return new a.MercatorCoordinate(v.x,v.y,g)}coordinateLocation(s){return this.projection.unproject(s.x,s.y)}pointRayIntersection(s,u){const g=u??this._centerAltitude,v=[s.x,s.y,0,1],b=[s.x,s.y,1,1];a.transformMat4$1(v,v,this.pixelMatrixInverse),a.transformMat4$1(b,b,this.pixelMatrixInverse);const E=b[3];a.scale$1(v,v,1/v[3]),a.scale$1(b,b,1/E);const k=v[2],I=b[2];return{p0:v,p1:b,t:k===I?0:(g-k)/(I-k)}}screenPointToMercatorRay(s){const u=[s.x,s.y,0,1],g=[s.x,s.y,1,1];return a.transformMat4$1(u,u,this.pixelMatrixInverse),a.transformMat4$1(g,g,this.pixelMatrixInverse),a.scale$1(u,u,1/u[3]),a.scale$1(g,g,1/g[3]),u[2]=a.mercatorZfromAltitude(u[2],this._center.lat)*this.worldSize,g[2]=a.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,a.scale$1(u,u,1/this.worldSize),a.scale$1(g,g,1/this.worldSize),new a.Ray([u[0],u[1],u[2]],a.normalize([],a.sub([],g,u)))}rayIntersectionCoordinate(s){const{p0:u,p1:g,t:v}=s,b=a.mercatorZfromAltitude(u[2],this._center.lat),E=a.mercatorZfromAltitude(g[2],this._center.lat);return new a.MercatorCoordinate(a.number(u[0],g[0],v)/this.worldSize,a.number(u[1],g[1],v)/this.worldSize,a.number(b,E,v))}pointCoordinate(s,u=this._centerAltitude){return this.projection.pointCoordinate(this,s.x,s.y,u)}pointCoordinate3D(s){if(!this.elevation)return this.pointCoordinate(s);let u=this.projection.pointCoordinate3D(this,s.x,s.y);if(u)return new a.MercatorCoordinate(u[0],u[1],u[2]);let g=0,v=this.horizonLineFromTop();if(s.y>v)return this.pointCoordinate(s);const b=.02*v,E=s.clone();for(let k=0;k<10&&v-g>b;k++){E.y=a.number(g,v,.66);const I=this.projection.pointCoordinate3D(this,E.x,E.y);I?(v=E.y,u=I):g=E.y}return u?new a.MercatorCoordinate(u[0],u[1],u[2]):this.pointCoordinate(s)}isPointAboveHorizon(s){return this.projection.isPointAboveHorizon(this,s)}isPointOnSurface(s){if(s.y<0||s.y>this.height||s.x<0||s.x>this.width)return!1;if(this.elevation||this.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(s);const u=this.pointCoordinate(s);return u.y>=0&&u.y<=1}_coordinatePoint(s,u){const g=u&&this.elevation?this.elevation.getAtPointOrZero(s,this._centerAltitude):this._centerAltitude,v=[s.x*this.worldSize,s.y*this.worldSize,g+s.toAltitude(),1];return a.transformMat4$1(v,v,this.pixelMatrix),v[3]>0?new a.Point(v[0]/v[3],v[1]/v[3]):new a.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:s,left:u}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,b=this.pointLocation3D(new a.Point(u,s)),E=this.pointLocation3D(new a.Point(v,s)),k=this.pointLocation3D(new a.Point(v,g)),I=this.pointLocation3D(new a.Point(u,g));let O=Math.min(b.lng,E.lng,k.lng,I.lng),L=Math.max(b.lng,E.lng,k.lng,I.lng),q=Math.min(b.lat,E.lat,k.lat,I.lat),te=Math.max(b.lat,E.lat,k.lat,I.lat);const se=Math.pow(2,-this.zoom)/16*270,ce=this.projection.name==="globe"?1:4,le=(pe,Z,ie,ve,xe)=>{const De=(pe+ie)/2,Re=(Z+ve)/2,ze=new a.Point(De,Re),{lng:Ve,lat:Ue}=this.pointLocation3D(ze),Ye=Math.max(0,O-Ve,q-Ue,Ve-L,Ue-te);O=Math.min(O,Ve),L=Math.max(L,Ve),q=Math.min(q,Ue),te=Math.max(te,Ue),(xe<ce||Ye>se)&&(le(pe,Z,De,Re,xe+1),le(De,Re,ie,ve,xe+1))};if(le(u,s,v,s,1),le(v,s,v,g,1),le(v,g,u,g,1),le(u,g,u,s,1),this.projection.name==="globe"){const[pe,Z]=a.polesInViewport(this);pe?(te=90,L=180,O=-180):Z&&(q=-90,L=180,O=-180)}return new a.LngLatBounds(new a.LngLat(O,q),new a.LngLat(L,te))}_getBoundsRectangular(s,u){const{top:g,left:v}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,k=new a.Point(v,g),I=new a.Point(E,g),O=new a.Point(E,b),L=new a.Point(v,b);let q=this.pointCoordinate(k,s),te=this.pointCoordinate(I,s);const se=this.pointCoordinate(O,u),ce=this.pointCoordinate(L,u),le=(pe,Z)=>(Z.y-pe.y)/(Z.x-pe.x);return q.y>1&&te.y>=0?q=new a.MercatorCoordinate((1-ce.y)/le(ce,q)+ce.x,1):q.y<0&&te.y<=1&&(q=new a.MercatorCoordinate(-ce.y/le(ce,q)+ce.x,0)),te.y>1&&q.y>=0?te=new a.MercatorCoordinate((1-se.y)/le(se,te)+se.x,1):te.y<0&&q.y<=1&&(te=new a.MercatorCoordinate(-se.y/le(se,te)+se.x,0)),new a.LngLatBounds().extend(this.coordinateLocation(q)).extend(this.coordinateLocation(te)).extend(this.coordinateLocation(ce)).extend(this.coordinateLocation(se))}_getBoundsRectangularTerrain(){const s=this.elevation;if(!s.visibleDemTiles.length||s.isUsingMockSource())return this._getBoundsRectangular(0,0);const u=s.visibleDemTiles.reduce((g,v)=>{if(v.dem){const b=v.dem.tree;g.min=Math.min(g.min,b.minimums[0]),g.max=Math.max(g.max,b.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(u.min*s.exaggeration(),u.max*s.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(s=!0){const u=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,g=this.height/2-u*(1-this._horizonShift);return s?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(s){this.maxBounds=s,this.minLat=-a.MAX_MERCATOR_LATITUDE,this.maxLat=a.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,s&&(this.minLat=s.getSouth(),this.maxLat=s.getNorth(),this.minLng=s.getWest(),this.maxLng=s.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=a.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=a.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=a.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(s,u){return this.projection.createTileMatrix(this,u,s)}calculateDistanceTileData(s){const u=s.key,g=this._distanceTileDataCache;if(g[u])return g[u];const v=s.canonical,b=1/this.height,E=this.cameraWorldSize,k=E/this.zoomScale(v.z),I=(v.x+Math.pow(2,v.z)*s.wrap)*k,O=v.y*k,L=this.point;L.x*=E/this.worldSize,L.y*=E/this.worldSize;const q=this.angle,te=Math.sin(-q),se=-Math.cos(-q);return g[u]={bearing:[te,se],center:[(L.x-I)*b,(L.y-O)*b],scale:k/a.EXTENT*b},g[u]}calculateFogTileMatrix(s){const u=s.key,g=this._fogTileMatrixCache;if(g[u])return g[u];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,s);return a.multiply(v,this.worldToFogMatrix,v),g[u]=new Float32Array(v),g[u]}calculateProjMatrix(s,u=!1){const g=s.key,v=u?this._alignedProjMatrixCache:this._projMatrixCache;if(v[g])return v[g];const b=this.calculatePosMatrix(s,this.worldSize);return a.multiply(b,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:u?this.alignedProjMatrix:this.projMatrix,b),v[g]=new Float32Array(b),v[g]}calculatePixelsToTileUnitsMatrix(s){const u=s.tileID.key,g=this._pixelsToTileUnitsCache;if(g[u])return g[u];const v=function(b,E){const{scale:k}=b.tileTransform,I=k*a.EXTENT/(b.tileSize*Math.pow(2,E.zoom-b.tileID.overscaledZ+b.tileID.canonical.z));return O=new Float32Array(4),te=(L=E.inverseAdjustmentMatrix)[1],se=L[2],ce=L[3],pe=(q=[I,I])[1],O[0]=L[0]*(le=q[0]),O[1]=te*le,O[2]=se*pe,O[3]=ce*pe,O;var O,L,q,te,se,ce,le,pe}(s,this);return g[u]=v,g[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const s=1/this.worldSize,u=a.fromScaling([],[s,s,s]);return a.multiply(u,u,this.globeMatrix),u}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const s=this._elevation;this._updateCameraState();const u=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(u),v=this._camera.forward(),b=a.mercatorZfromAltitude(1,this._center.lat);g[2]/=b,v[2]/=b,a.normalize(v,v);const E=s.raycast(g,v,s.exaggeration());if(E){const k=a.scaleAndAdd([],g,v,E),I=new a.MercatorCoordinate(k[0],k[1],a.mercatorZfromAltitude(k[2],a.latFromMercatorY(k[1]))),O=(I.z+a.length([I.x-g[0],I.y-g[1],I.z-g[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(O),this._centerAltitude=I.toAltitude(),this._center=this.coordinateLocation(I),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(s=!1){if(!this._elevation)return;const u=this._elevation,g=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(g),b=u.getAtPointOrZero(new a.MercatorCoordinate(...v)),E=this.pixelsPerMeter/this.worldSize*b,k=this._minimumHeightOverTerrain(),I=v[2]-E;if(I<=k)if(I<0||s){const O=this.locationCoordinate(this._center,this._centerAltitude),L=[v[0],v[1],O.z-v[2]],q=a.length(L);L[2]-=(k-I)/this._pixelsPerMercatorPixel;const te=a.length(L);if(te===0)return;a.scale$2(L,L,q/te*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],O.z*this._pixelsPerMercatorPixel-L[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||s){const te=this.center;return te.lat=a.clamp(te.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!s)&&(te.lng=a.clamp(te.lng,this.minLng,this.maxLng)),this.center=te,void(this._constraining=!1)}const u=this._unmodified,{x:g,y:v}=this.point;let b=0,E=g,k=v;const I=this.width/2,O=this.height/2,L=this.worldMinY*this.scale,q=this.worldMaxY*this.scale;if(v-O<L&&(k=L+O),v+O>q&&(k=q-O),q-L<this.height&&(b=Math.max(b,this.height/(q-L)),k=(q+L)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const te=this.worldMinX*this.scale,se=this.worldMaxX*this.scale,ce=this.worldSize/2-(te+se)/2;E=(g+ce+this.worldSize)%this.worldSize-ce,E-I<te&&(E=te+I),E+I>se&&(E=se-I),se-te<this.width&&(b=Math.max(b,this.width/(se-te)),E=(se+te)/2)}E===g&&k===v||(this.center=this.unproject(new a.Point(E,k))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){let s=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(s=Math.max(s,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),s}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,u=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.mercatorZfromAltitude(1,this.center.lat)/a.mercatorZfromAltitude(1,a.GLOBE_SCALE_MATCH_LATITUDE));const g=Hu(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,g),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const v=this.projection.zAxisUnit==="meters"?u:1,b=this._camera.getWorldToCamera(this.worldSize,v),E=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);E[8]=2*-s.x/this.width,E[9]=2*s.y/this.height;let k=a.mul([],E,b);if(this.projection.isReprojectedInTileSpace){const Re=this.locationCoordinate(this.center),ze=a.identity([]);a.translate(ze,ze,[Re.x*this.worldSize,Re.y*this.worldSize,0]),a.multiply(ze,ze,gl(this)),a.translate(ze,ze,[-Re.x*this.worldSize,-Re.y*this.worldSize,0]),a.multiply(k,k,ze),this.inverseAdjustmentMatrix=function(Ve){const Ue=gl(Ve,!0);return ae([],[Ue[0],Ue[1],Ue[4],Ue[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=a.scale([],k,[this.worldSize,this.worldSize,this.worldSize/v,1]),this.projMatrix=k,this.invProjMatrix=a.invert(new Float64Array(16),this.projMatrix);const I=a.invert([],E);this.frustumCorners=a.FrustumCorners.fromInvProjectionMatrix(I,this.horizonLineFromTop(),this.height);const O=new Float32Array(16);a.identity(O),a.scale(O,O,[1,-1,1]),a.rotateX(O,O,this._pitch),a.rotateZ(O,O,this.angle);const L=a.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),q=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;L[8]=2*-s.x/this.width,L[9]=2*(s.y+q)/this.height,this.skyboxMatrix=a.multiply(O,L,O);const te=this.point,se=te.x,ce=te.y,le=this.width%2/2,pe=this.height%2/2,Z=Math.cos(this.angle),ie=Math.sin(this.angle),ve=se-Math.round(se)+Z*le+ie*pe,xe=ce-Math.round(ce)+Z*pe+ie*le,De=new Float64Array(k);if(a.translate(De,De,[ve>.5?ve-1:ve,xe>.5?xe-1:xe,0]),this.alignedProjMatrix=De,k=a.create(),a.scale(k,k,[this.width/2,-this.height/2,1]),a.translate(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=a.create(),a.scale(k,k,[1,-1,1]),a.translate(k,k,[-1,-1,0]),a.scale(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},k=a.invert(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=k,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.calculateGlobeMatrix(this);const Re=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.transformMat4(Re,Re,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=k;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const s=this.cameraWorldSizeForFog,u=this.cameraPixelsPerMeter,g=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,b=[s,s,u];a.scale$2(b,b,v),a.scale$2(g,g,-1),a.multiply$2(g,g,b);const E=a.create();a.translate(E,E,g),a.scale(E,E,b),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(s,u,v)}_computeCameraPosition(s){const u=(s=s||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),v=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*u-s/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-g[0]*b,v.y/this.worldSize-g[1]*b,s/this.worldSize*this._centerAltitude-g[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(s){const u=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],v=s[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(b=Math.min((u-g)/v,1)),this._camera.position=a.scaleAndAdd([],this._camera.position,s,b),this._updateStateFromCamera()}_updateStateFromCamera(){const s=this._camera.position,u=this._camera.forward(),{pitch:g,bearing:v}=this._camera.getPitchBearing(),b=a.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.degToRad(this._maxPitch)),k=Math.max((s[2]-b)/Math.cos(g),E),I=this._zoomFromMercatorZ(k);a.scaleAndAdd(s,s,u,k),this._pitch=a.clamp(g,a.degToRad(this.minPitch),a.degToRad(this.maxPitch)),this.angle=a.wrap(v,-Math.PI,Math.PI),this._setZoom(a.clamp(I,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.MercatorCoordinate(s[0],s[1],s[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(s){return Math.pow(2,s)*this.tileSize}_mercatorZfromZoom(s){return this.cameraToCenterDistance/this._worldSizeFromZoom(s)}_minimumHeightOverTerrain(){const s=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(s)}_zoomFromMercatorZ(s){return this.scaleZoom(this.cameraToCenterDistance/(s*this.tileSize))}zoomFromMercatorZAdjusted(s){let u=0,g=a.GLOBE_ZOOM_THRESHOLD_MAX,v=0,b=1/0;for(;g-u>1e-6&&g>u;){const E=u+.5*(g-u),k=this.tileSize*Math.pow(2,E),I=this.getCameraToCenterDistance(this.projection,E,k),O=this.scaleZoom(I/(s*this.tileSize)),L=Math.abs(E-O);L<b&&(b=L,v=E),E<O?u=E:g=E}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(s,u){const g=Math.min(s.x,u.x),v=Math.max(s.x,u.x),b=Math.min(s.y,u.y),E=Math.max(s.y,u.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new a.Point(g,b),new a.Point(v,E),new a.Point(g,E),new a.Point(v,b)],I=this.renderWorldCopies?-3:0,O=this.renderWorldCopies?4:1;for(const L of k){const q=this.pointRayIntersection(L);if(q.t<0)return!0;const te=this.rayIntersectionCoordinate(q);if(te.x<I||te.y<0||te.x>O||te.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.Point(0,0),new a.Point(this.width,this.height))}zoomDeltaToMovement(s,u){const g=a.length(a.sub([],this._camera.position,s)),v=this._zoomFromMercatorZ(g)+u;return g-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const s=function([u,g,v],b){const E=[u,g,v,1];a.transformMat4$1(E,E,b);const k=E[3]=Math.max(E[3],1e-6);return E[0]/=k,E[1]/=k,E[2]/=k,E}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.Point(s[0],s[1])}{const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,s))}}getCameraToCenterDistance(s,u=this.zoom,g=this.worldSize){const v=Hu(s,u,this.width,this.height,1024),b=s.pixelSpaceConversion(this.center.lat,g,v);return .5/Math.tan(.5*this._fov)*this.height*b}getWorldToCameraMatrix(){const s=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.multiply(s,s,this.globeMatrix),s}}function _l(f,s){let u=!1,g=null;const v=()=>{g=null,u&&(f(),g=setTimeout(v,s),u=!1)};return()=>(u=!0,g||v(),g)}class up{constructor(s){this._hashName=s&&encodeURIComponent(s),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=_l(this._updateHashUnthrottled.bind(this),300)}addTo(s){return this._map=s,a.window.addEventListener("hashchange",this._onHashChange,!1),s.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),a.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const s=this._map;if(!s)return"";const u=Ec(s);if(this._hashName){const g=this._hashName;let v=!1;const b=a.window.location.hash.slice(1).split("&").map(E=>{const k=E.split("=")[0];return k===g?(v=!0,`${k}=${u}`):E}).filter(E=>E);return v||b.push(`${g}=${u}`),`#${b.join("&")}`}return`#${u}`}_getCurrentHash(){const s=a.window.location.hash.replace("#","");if(this._hashName){let u;return s.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(u=g)}),(u&&u[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._map;if(!s)return!1;const u=this._getCurrentHash();if(u.length>=3&&!u.some(g=>isNaN(g))){const g=s.dragRotate.isEnabled()&&s.touchZoomRotate.isEnabled()?+(u[3]||0):s.getBearing();return s.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:g,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){const s=a.window.location.href.replace(/(#.+)?$/,this.getHashString());a.window.history.replaceState(a.window.history.state,null,s)}}function Ec(f,s){const u=f.getCenter(),g=Math.round(100*f.getZoom())/100,v=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,v),E=Math.round(u.lng*b)/b,k=Math.round(u.lat*b)/b,I=f.getBearing(),O=f.getPitch();let L=s?`/${E}/${k}/${g}`:`${g}/${k}/${E}`;return(I||O)&&(L+="/"+Math.round(10*I)/10),O&&(L+=`/${Math.round(O)}`),L}const kc={linearity:.3,easing:a.bezier(0,0,.3,1)},Zu=a.extend({deceleration:2500,maxSpeed:1400},kc),Xu=a.extend({deceleration:20,maxSpeed:1400},kc),Qt=a.extend({deceleration:1e3,maxSpeed:360},kc),Io=a.extend({deceleration:1e3,maxSpeed:90},kc);class mg{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,u=a.exported.now();for(;s.length>0&&u-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const u={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)u.zoom+=b.zoomDelta||0,u.bearing+=b.bearingDelta||0,u.pitch+=b.pitchDelta||0,b.panDelta&&u.pan._add(b.panDelta),b.around&&(u.around=b.around),b.pinchAround&&(u.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(u.pan.mag()){const b=Mc(u.pan.mag(),g,a.extend({},Zu,s||{}));v.offset=u.pan.mult(b.amount/u.pan.mag()),v.center=this._map.transform.center,Pc(v,b)}if(u.zoom){const b=Mc(u.zoom,g,Xu);v.zoom=this._map.transform.zoom+b.amount,Pc(v,b)}if(u.bearing){const b=Mc(u.bearing,g,Qt);v.bearing=this._map.transform.bearing+a.clamp(b.amount,-179,179),Pc(v,b)}if(u.pitch){const b=Mc(u.pitch,g,Io);v.pitch=this._map.transform.pitch+b.amount,Pc(v,b)}if(v.zoom||v.bearing){const b=u.pinchAround===void 0?u.around:u.pinchAround;v.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function Pc(f,s){(!f.duration||f.duration<s.duration)&&(f.duration=s.duration,f.easing=s.easing)}function Mc(f,s,u){const{maxSpeed:g,linearity:v,deceleration:b}=u,E=a.clamp(f*v/(s/1e3),-g,g),k=Math.abs(E)/(b*v);return{easing:u.easing,duration:1e3*k,amount:E*(k/2)}}class mi extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,g,v={}){const b=Q(u.getCanvasContainer(),g),E=u.unproject(b);super(s,a.extend({point:b,lngLat:E,originalEvent:g},v)),this._defaultPrevented=!1,this.target=u}}class Ic extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,g){const v=s==="touchend"?g.changedTouches:g.touches,b=re(u.getCanvasContainer(),v),E=b.map(I=>u.unproject(I)),k=b.reduce((I,O,L,q)=>I.add(O.div(q.length)),new a.Point(0,0));super(s,{points:b,point:k,lngLats:E,lngLat:u.unproject(k),originalEvent:g}),this._defaultPrevented=!1}}class Yu extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,g){super(s,{originalEvent:g}),this._defaultPrevented=!1}}class dp{constructor(s,u){this._map=s,this._clickTolerance=u.clickTolerance}reset(){this._mousedownPos=void 0}wheel(s){return this._firePreventable(new Yu(s.type,this._map,s))}mousedown(s,u){return this._mousedownPos=u,this._firePreventable(new mi(s.type,this._map,s))}mouseup(s){this._map.fire(new mi(s.type,this._map,s))}preclick(s){const u=a.extend({},s);u.type="preclick",this._map.fire(new mi(u.type,this._map,u))}click(s,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||(this.preclick(s),this._map.fire(new mi(s.type,this._map,s)))}dblclick(s){return this._firePreventable(new mi(s.type,this._map,s))}mouseover(s){this._map.fire(new mi(s.type,this._map,s))}mouseout(s){this._map.fire(new mi(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Ic(s.type,this._map,s))}touchmove(s){this._map.fire(new Ic(s.type,this._map,s))}touchend(s){this._map.fire(new Ic(s.type,this._map,s))}touchcancel(s){this._map.fire(new Ic(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ku{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(s){this._map.fire(new mi(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._map.fire(new mi(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gg{constructor(s,u){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,u){this.isEnabled()&&s.shiftKey&&s.button===0&&(N(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(s,u){if(!this._active)return;const g=u,v=this._startPos,b=this._lastPos;if(!v||!b||b.equals(g)||!this._box&&g.dist(v)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=R("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const E=Math.min(v.x,g.x),k=Math.max(v.x,g.x),I=Math.min(v.y,g.y),O=Math.max(v.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${E}px,${I}px)`,this._box.style.width=k-E+"px",this._box.style.height=O-I+"px")})}mouseupWindow(s,u){if(!this._active)return;const g=this._startPos,v=u;if(g&&s.button===0){if(this.reset(),Y(),g.x!==v.x||g.y!==v.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:b=>b.fitScreenCoordinates(g,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",s)}}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),U(),delete this._startPos,delete this._lastPos}_fireEvent(s,u){return this._map.fire(new a.Event(s,{originalEvent:u}))}}function Ju(f,s){const u={};for(let g=0;g<f.length;g++)u[f[g].identifier]=s[g];return u}class vl{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(s,u,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=s.timeStamp),g.length===this.numTouches&&(this.centroid=function(v){const b=new a.Point(0,0);for(const E of v)b._add(E);return b.div(v.length)}(u),this.touches=Ju(g,u)))}touchmove(s,u,g){if(this.aborted||!this.centroid)return;const v=Ju(g,u);for(const b in this.touches){const E=v[b];(!E||E.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(s,u,g){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class hp{constructor(s){this.singleTap=new vl(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(s,u,g){this.singleTap.touchstart(s,u,g)}touchmove(s,u,g){this.singleTap.touchmove(s,u,g)}touchend(s,u,g){const v=this.singleTap.touchend(s,u,g);if(v){const b=s.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(v)<30;if(b&&E||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Tv{constructor(){this._zoomIn=new hp({numTouches:1,numTaps:2}),this._zoomOut=new hp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,u,g){this._zoomIn.touchstart(s,u,g),this._zoomOut.touchstart(s,u,g)}touchmove(s,u,g){this._zoomIn.touchmove(s,u,g),this._zoomOut.touchmove(s,u,g)}touchend(s,u,g){const v=this._zoomIn.touchend(s,u,g),b=this._zoomOut.touchend(s,u,g);return v?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(v)},{originalEvent:s})}):b?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(b)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yg={0:1,2:2};class xl{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(s,u){return!1}_move(s,u){return{}}mousedown(s,u){if(this._lastPoint)return;const g=oe(s);this._correctButton(s,g)&&(this._lastPoint=u,this._eventButton=g)}mousemoveWindow(s,u){const g=this._lastPoint;if(g){if(s.preventDefault(),this._eventButton!=null&&function(v,b){const E=yg[b];return v.buttons===void 0||(v.buttons&E)!==E}(s,this._eventButton))this.reset();else if(this._moved||!(u.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(g,u)}}mouseupWindow(s){this._lastPoint&&oe(s)===this._eventButton&&(this._moved&&Y(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pp extends xl{mousedown(s,u){super.mousedown(s,u),this._lastPoint&&(this._active=!0)}_correctButton(s,u){return u===0&&!s.ctrlKey}_move(s,u){return{around:u,panDelta:u.sub(s)}}}class fp extends xl{_correctButton(s,u){return u===0&&s.ctrlKey||u===2}_move(s,u){const g=.8*(u.x-s.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(s){s.preventDefault()}}class mp extends xl{_correctButton(s,u){return u===0&&s.ctrlKey||u===2}_move(s,u){const g=-.5*(u.y-s.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(s){s.preventDefault()}}class Qu{constructor(s,u){this._map=s,this._el=s.getCanvasContainer(),this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset(),a.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)}touchstart(s,u,g){return this._calculateTransform(s,u,g)}touchmove(s,u,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!a.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return s.cancelable&&s.preventDefault(),this._calculateTransform(s,u,g)}}touchend(s,u,g){this._calculateTransform(s,u,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,u,g){g.length>0&&(this._active=!0);const v=Ju(g,u),b=new a.Point(0,0),E=new a.Point(0,0);let k=0;for(const O in v){const L=v[O],q=this._touches[O];q&&(b._add(L),E._add(L.sub(q)),k++,v[O]=L)}if(this._touches=v,k<this._minTouches||!E.mag())return;const I=E.div(k);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(k),panDelta:I}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=R("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Ac{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(s){}_move(s,u,g){return{}}touchstart(s,u,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([u[0],u[1]]))}touchmove(s,u,g){const v=this._firstTwoTouches;if(!v)return;s.preventDefault();const[b,E]=v,k=Dc(g,u,b),I=Dc(g,u,E);if(!k||!I)return;const O=this._aroundCenter?null:k.add(I).div(2);return this._move([k,I],O,s)}touchend(s,u,g){if(!this._firstTwoTouches)return;const[v,b]=this._firstTwoTouches,E=Dc(g,u,v),k=Dc(g,u,b);E&&k||(this._active&&Y(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Dc(f,s,u){for(let g=0;g<f.length;g++)if(f[g].identifier===u)return s[g]}function gp(f,s){return Math.log(f/s)/Math.LN2}class _g extends Ac{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,u){const g=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(gp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:gp(this._distance,g),pinchAround:u}}}function yp(f,s){return 180*f.angleWith(s)/Math.PI}class vg extends Ac{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,u){const g=this._vector;if(this._vector=s[0].sub(s[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:yp(this._vector,g),pinchAround:u}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const u=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const v=yp(s,g);return Math.abs(v)<u}}function Ys(f){return Math.abs(f.y)>Math.abs(f.x)}class xg extends Ac{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(s){this._lastPoints=s,Ys(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,u,g){const v=this._lastPoints;if(!v)return;const b=s[0].sub(v[0]),E=s[1].sub(v[1]);return this._map._cooperativeGestures&&!a.isFullscreen()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(b,E,g.timeStamp),!this._valid)?void 0:(this._lastPoints=s,this._active=!0,{pitchDelta:(b.y+E.y)/2*-.5})}gestureBeginsVertically(s,u,g){if(this._valid!==void 0)return this._valid;const v=s.mag()>=2,b=u.mag()>=2;if(!v&&!b)return;if(!v||!b)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const E=s.y>0==u.y>0;return Ys(s)&&Ys(u)&&E}}const bg={panStep:100,bearingStep:15,pitchStep:10};class Cv{constructor(){const s=bg;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let u=0,g=0,v=0,b=0,E=0;switch(s.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:s.shiftKey?g=-1:(s.preventDefault(),b=-1);break;case 39:s.shiftKey?g=1:(s.preventDefault(),b=1);break;case 38:s.shiftKey?v=1:(s.preventDefault(),E=-1);break;case 40:s.shiftKey?v=-1:(s.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(g=0,v=0),{cameraAnimation:k=>{const I=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:wg,zoom:u?Math.round(I)+u*(s.shiftKey?2:1):I,bearing:k.getBearing()+g*this._bearingStep,pitch:k.getPitch()+v*this._pitchStep,offset:[-b*this._panStep,-E*this._panStep],center:k.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function wg(f){return f*(2-f)}const _p=4.000244140625;class Sg{constructor(s,u){this._map=s,this._el=s.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(s.ctrlKey||s.metaKey||this.isZooming()||a.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let u=s.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const g=a.exported.now(),v=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,u!==0&&u%_p==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(v*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),s.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=s,this._delta-=u,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=Q(this._el,s);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:u,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;this._type==="wheel"&&s.projection.wrap&&(s._center.lng>=180||s._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const u=()=>s._terrainEnabled()&&this._aroundCoord?s.computeZoomRelativeTo(this._aroundCoord):s.zoom;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>_p?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&O!==0&&(O=1/O);const L=u(),q=Math.pow(2,L),te=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(te*O))),this._type==="wheel"&&(this._startZoom=L,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:u(),v=this._startZoom,b=this._easing;let E,k=!1;if(this._type==="wheel"&&v&&b){const I=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),O=b(I);E=a.number(v,g,O),I<1?this._frameId||(this._frameId=!0):k=!0}else E=g,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:E-u(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let u=a.ease;if(this._prevEase){const g=this._prevEase,v=(a.exported.now()-g.start)/g.duration,b=g.easing(v+.01)-g.easing(v),E=.27/Math.sqrt(b*b+1e-4)*.01,k=Math.sqrt(.0729-E*E);u=a.bezier(E,k,.25,1)}return this._prevEase={start:a.exported.now(),duration:s,easing:u},u}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=R("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(a.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Tg{constructor(s,u){this._clickZoom=s,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Mi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(s,u){return s.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(s.shiftKey?-1:1),around:g.unproject(u)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ev{constructor(){this._tap=new hp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(s,u,g){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=u[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(s,u,g))}touchmove(s,u,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const v=u[0],b=v.y-this._swipePoint.y;return this._swipePoint=v,s.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(s,u,g)}touchend(s,u,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(s,u,g)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cg{constructor(s,u,g){this._el=s,this._mousePan=u,this._touchPan=g}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class kv{constructor(s,u,g){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=u,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Pv{constructor(s,u,g,v){this._el=s,this._touchZoom=u,this._touchRotate=g,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ho=f=>f.zoom||f.drag||f.pitch||f.rotate;class Eg extends a.Event{}class Mv{constructor(){this.constants=[1,1,.01],this.radius=0}setup(s,u){const g=a.sub([],u,s);this.radius=a.length(g[2]<0?a.div([],g,this.constants):[g[0],g[1],0])}projectRay(s){a.div(s,s,this.constants),a.normalize(s,s),a.mul$1(s,s,this.constants);const u=a.scale$2([],s,this.radius);if(u[2]>0){const g=a.scale$2([],[0,0,1],a.dot(u,[0,0,1])),v=a.scale$2([],a.normalize([],[u[0],u[1],0]),this.radius),b=a.add([],u,a.scale$2([],a.sub([],a.add([],v,g),u),2));u[0]=b[0],u[1]=b[1]}return u}}function Ao(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class Jo{constructor(s,u){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new mg(s),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Mv,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(u),a.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[a.window,"blur",void 0]];for(const[v,b,E]of this._listeners)v.addEventListener(b,v===a.window.document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[s,u,g]of this._listeners)s.removeEventListener(u,s===a.window.document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(s){const u=this._map,g=u.getCanvasContainer();this._add("mapEvent",new dp(u,s));const v=u.boxZoom=new gg(u,s);this._add("boxZoom",v);const b=new Tv,E=new Mi;u.doubleClickZoom=new Tg(E,b),this._add("tapZoom",b),this._add("clickZoom",E);const k=new Ev;this._add("tapDragZoom",k);const I=u.touchPitch=new xg(u);this._add("touchPitch",I);const O=new fp(s),L=new mp(s);u.dragRotate=new kv(s,O,L),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);const q=new pp(s),te=new Qu(u,s);u.dragPan=new Cg(g,q,te),this._add("mousePan",q),this._add("touchPan",te,["touchZoom","touchRotate"]);const se=new vg,ce=new _g;u.touchZoomRotate=new Pv(g,ce,se,k),this._add("touchRotate",se,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ku(u));const le=u.scrollZoom=new Sg(u,this);this._add("scrollZoom",le,["mousePan"]);const pe=u.keyboard=new Cv;this._add("keyboard",pe);for(const Z of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[Z]&&u[Z].enable(s[Z])}_add(s,u,g){this._handlers.push({handlerName:s,handler:u,allowed:g}),this._handlersById[s]=u}stop(s){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ho(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(s,u,g){for(const v in s)if(v!==g&&(!u||u.indexOf(v)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const u=[];for(const g of s)this._el.contains(g.target)&&u.push(g);return u}handleEvent(s,u){this._updatingCamera=!0;const g=s.type==="renderFrame",v=g?void 0:s,b={needsRenderFrame:!1},E={},k={},I=s.touches?this._getMapTouches(s.touches):void 0,O=I?re(this._el,I):g?void 0:Q(this._el,s);for(const{handlerName:te,handler:se,allowed:ce}of this._handlers){if(!se.isEnabled())continue;let le;this._blockedByActive(k,ce,te)?se.reset():se[u||s.type]&&(le=se[u||s.type](s,O,I),this.mergeHandlerResult(b,E,le,te,v),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||se.isActive())&&(k[te]=se)}const L={};for(const te in this._previousActiveHandlers)k[te]||(L[te]=v);this._previousActiveHandlers=k,(Object.keys(L).length||Ao(b))&&(this._changes.push([b,E,L]),this._triggerRenderFrame()),(Object.keys(k).length||Ao(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=b;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(s,u,g,v,b){if(!g)return;a.extend(s,g);const E={handlerName:v,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(u.zoom=E),g.panDelta!==void 0&&(u.drag=E),g.pitchDelta!==void 0&&(u.pitch=E),g.bearingDelta!==void 0&&(u.rotate=E)}_applyChanges(){const s={},u={},g={};for(const[v,b,E]of this._changes)v.panDelta&&(s.panDelta=(s.panDelta||new a.Point(0,0))._add(v.panDelta)),v.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(s.around=v.around),v.aroundCoord!==void 0&&(s.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(s.pinchAround=v.pinchAround),v.noInertia&&(s.noInertia=v.noInertia),a.extend(u,b),a.extend(g,E);this._updateMapTransform(s,u,g),this._changes=[]}_updateMapTransform(s,u,g){const v=this._map,b=v.transform,E=ie=>[ie.x,ie.y,ie.z];if((ie=>{const ve=this._eventsInProgress.drag;return ve&&!this._handlersById[ve.handlerName].isActive()})()&&!Ao(s)){const ie=b.zoom;b.cameraElevationReference="sea",b.recenterOnTerrain(),b.cameraElevationReference="ground",ie!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&v._stop(!0),!Ao(s))return void this._fireEvents(u,g,!0);let{panDelta:k,zoomDelta:I,bearingDelta:O,pitchDelta:L,around:q,aroundCoord:te,pinchAround:se}=s;b._isCameraConstrained&&(I>0&&(I=0),b._isCameraConstrained=!1),se!==void 0&&(q=se),(I||(ie=>u[ie]&&!this._eventsInProgress[ie])("drag"))&&q&&(this._dragOrigin=E(b.pointCoordinate3D(q)),this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",v._stop(!0),q=q||v.transform.centerPoint,O&&(b.bearing+=O),L&&(b.pitch+=L),b._updateCameraState();const ce=[0,0,0];if(k)if(b.projection.name==="mercator"){const ie=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q).dir),ve=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q.sub(k)).dir);ce[0]=ve[0]-ie[0],ce[1]=ve[1]-ie[1]}else{const ie=b.pointCoordinate(q);if(b.projection.name==="globe"){k=k.rotate(-b.angle);const ve=b._pixelsPerMercatorPixel/b.worldSize;ce[0]=-k.x*a.mercatorScale(a.latFromMercatorY(ie.y))*ve,ce[1]=-k.y*a.mercatorScale(b.center.lat)*ve}else{const ve=b.pointCoordinate(q.sub(k));ie&&ve&&(ce[0]=ve.x-ie.x,ce[1]=ve.y-ie.y)}}const le=b.zoom,pe=[0,0,0];if(I){const ie=E(te||b.pointCoordinate3D(q)),ve={dir:a.normalize([],a.sub([],ie,b._camera.position))};if(ve.dir[2]<0){const xe=b.zoomDeltaToMovement(ie,I);a.scale$2(pe,ve.dir,xe)}}const Z=a.add(ce,ce,pe);b._translateCameraConstrained(Z),I&&Math.abs(b.zoom-le)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(u,g,!0)}_fireEvents(s,u,g){const v=ho(this._eventsInProgress),b=ho(s),E={};for(const L in s){const{originalEvent:q}=s[L];this._eventsInProgress[L]||(E[`${L}start`]=q),this._eventsInProgress[L]=s[L]}!v&&b&&this._fireEvent("movestart",b.originalEvent);for(const L in E)this._fireEvent(L,E[L]);b&&this._fireEvent("move",b.originalEvent);for(const L in s){const{originalEvent:q}=s[L];this._fireEvent(L,q)}const k={};let I;for(const L in this._eventsInProgress){const{handlerName:q,originalEvent:te}=this._eventsInProgress[L];this._handlersById[q].isActive()||(delete this._eventsInProgress[L],I=u[q]||te,k[`${L}end`]=I)}for(const L in k)this._fireEvent(L,k[L]);const O=ho(this._eventsInProgress);if(g&&(v||b)&&!O){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;L?(q(L.bearing||this._map.getBearing())&&(L.bearing=0),this._map.easeTo(L,{originalEvent:I})):(this._map.fire(new a.Event("moveend",{originalEvent:I})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,u){this._map.fire(new a.Event(s,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{this._frameId=void 0,this.handleEvent(new Eg("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ia="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ed extends a.Evented{constructor(s,u){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=u.bearingSnap,this._respectPrefersReducedMotion=u.respectPrefersReducedMotion!==!1,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,u){return this.jumpTo({center:s},u)}panBy(s,u,g){return s=a.Point.convert(s).mult(-1),this.panTo(this.transform.center,a.extend({offset:s},u),g)}panTo(s,u,g){return this.easeTo(a.extend({center:s},u),g)}getZoom(){return this.transform.zoom}setZoom(s,u){return this.jumpTo({zoom:s},u),this}zoomTo(s,u,g){return this.easeTo(a.extend({zoom:s},u),g)}zoomIn(s,u){return this.zoomTo(this.getZoom()+1,s,u),this}zoomOut(s,u){return this.zoomTo(this.getZoom()-1,s,u),this}getBearing(){return this.transform.bearing}setBearing(s,u){return this.jumpTo({bearing:s},u),this}getPadding(){return this.transform.padding}setPadding(s,u){return this.jumpTo({padding:s},u),this}rotateTo(s,u,g){return this.easeTo(a.extend({bearing:s},u),g)}resetNorth(s,u){return this.rotateTo(0,a.extend({duration:1e3},s),u),this}resetNorthPitch(s,u){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},s),u),this}snapToNorth(s,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,u):this}getPitch(){return this.transform.pitch}setPitch(s,u){return this.jumpTo({pitch:s},u),this}cameraForBounds(s,u){s=a.LngLatBounds.convert(s);const g=u&&u.bearing||0,v=u&&u.pitch||0,b=s.getNorthWest(),E=s.getSouthEast();return this._cameraForBounds(this.transform,b,E,g,v,u)}_extendCameraOptions(s){const u={top:0,bottom:0,right:0,left:0};if(typeof(s=a.extend({padding:u,offset:[0,0],maxZoom:this.transform.maxZoom},s)).padding=="number"){const g=s.padding;s.padding={top:g,bottom:g,right:g,left:g}}return s.padding=a.extend(u,s.padding),s}_minimumAABBFrustumDistance(s,u){const g=u.max[0]-u.min[0],v=u.max[1]-u.min[1];return g/v>s.aspect?g/(2*Math.tan(.5*s.fovX)*s.aspect):v/(2*Math.tan(.5*s.fovY)*s.aspect)}_cameraForBoundsOnGlobe(s,u,g,v,b,E){const k=s.clone(),I=this._extendCameraOptions(E);k.bearing=v,k.pitch=b;const O=a.LngLat.convert(u),L=a.LngLat.convert(g),q=.5*(O.lat+L.lat),te=.5*(O.lng+L.lng),se=a.latLngToECEF(q,te),ce=a.normalize([],se),le=a.normalize([],a.cross([],ce,[0,1,0])),pe=a.cross([],le,ce),Z=[le[0],le[1],le[2],0,pe[0],pe[1],pe[2],0,ce[0],ce[1],ce[2],0,0,0,0,1],ie=[se,a.latLngToECEF(O.lat,O.lng),a.latLngToECEF(L.lat,O.lng),a.latLngToECEF(L.lat,L.lng),a.latLngToECEF(O.lat,L.lng),a.latLngToECEF(q,O.lng),a.latLngToECEF(q,L.lng),a.latLngToECEF(O.lat,te),a.latLngToECEF(L.lat,te)];let ve=a.Aabb.fromPoints(ie.map(wt=>[a.dot(le,wt),a.dot(pe,wt),a.dot(ce,wt)]));const xe=a.transformMat4([],ve.center,Z);a.squaredLength(xe)===0&&a.set(xe,0,0,1),a.normalize(xe,xe),a.scale$2(xe,xe,a.GLOBE_RADIUS),k.center=a.ecefToLatLng(xe);const De=k.getWorldToCameraMatrix(),Re=a.invert(new Float64Array(16),De);ve=a.Aabb.applyTransform(ve,a.multiply([],De,Z)),a.transformMat4(xe,xe,De);const ze=.5*(ve.max[2]-ve.min[2]),Ve=this._minimumAABBFrustumDistance(k,ve),Ue=a.scale$2([],[0,0,1],ze),Ye=a.add(Ue,xe,Ue),kt=Ve+(k.pitch===0?0:a.distance(xe,Ye)),qe=k.globeCenterInViewSpace,ft=a.sub([],xe,[qe[0],qe[1],qe[2]]);a.normalize(ft,ft),a.scale$2(ft,ft,kt);const et=a.add([],xe,ft);a.transformMat4(et,et,Re);const Et=a.earthRadius/a.GLOBE_RADIUS,Xe=a.length(et),pt=a.mercatorZfromAltitude(Math.max(Xe*Et-a.earthRadius,Number.EPSILON),0),It=Math.min(k.zoomFromMercatorZAdjusted(pt),I.maxZoom);return It>.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"mercator"}),k.zoom=It,this._cameraForBounds(k,u,g,v,b,E)):{center:k.center,zoom:It,bearing:v,pitch:b}}queryTerrainElevation(s,u){const g=this.transform.elevation;return g?(u=a.extend({},{exaggerated:!0},u),g.getAtPoint(a.MercatorCoordinate.fromLngLat(s),null,u.exaggerated)):null}_cameraForBounds(s,u,g,v,b,E){if(s.projection.name==="globe")return this._cameraForBoundsOnGlobe(s,u,g,v,b,E);const k=s.clone(),I=this._extendCameraOptions(E),O=k.padding;k.bearing=v,k.pitch=b;const L=a.LngLat.convert(u),q=a.LngLat.convert(g),te=new a.LngLat(L.lng,q.lat),se=new a.LngLat(q.lng,L.lat),ce=k.project(L),le=k.project(q),pe=this.queryTerrainElevation(L),Z=this.queryTerrainElevation(q),ie=this.queryTerrainElevation(te),ve=this.queryTerrainElevation(se),xe=[[ce.x,ce.y,Math.min(pe||0,Z||0,ie||0,ve||0)],[le.x,le.y,Math.max(pe||0,Z||0,ie||0,ve||0)]];let De=a.Aabb.fromPoints(xe);const Re=k.getWorldToCameraMatrix(),ze=a.invert(new Float64Array(16),Re);De=a.Aabb.applyTransform(De,Re);const Ve=a.sub([],De.max,De.min),Ue=O.left||0,Ye=O.right||0,kt=O.bottom||0,qe=O.top||0,{left:ft,right:et,top:Et,bottom:Xe}=I.padding,pt=.5*(Ue+Ye),It=.5*(qe+kt),wt=Math.min(k.scaleZoom(k.scale*Math.min((k.width-(Ue+Ye+ft+et))/Ve[0],(k.height-(kt+qe+Xe+Et))/Ve[1])),I.maxZoom),At=k.scale/k.zoomScale(wt);De=new a.Aabb([De.min[0]-(ft+pt)*At,De.min[1]-(Xe+It)*At,De.min[2]],[De.max[0]+(et+pt)*At,De.max[1]+(Et+It)*At,De.max[2]]);const pn=.5*Ve[2],In=this._minimumAABBFrustumDistance(k,De),rn=[0,0,1,0];a.transformMat4$1(rn,rn,Re),a.normalize$2(rn,rn);const wn=a.scale$2([],rn,In+pn),Gn=a.add([],De.center,wn),Vn=(typeof I.offset.x=="number"&&typeof I.offset.y=="number"?new a.Point(I.offset.x,I.offset.y):a.Point.convert(I.offset)).rotate(-a.degToRad(v));De.center[0]-=Vn.x*At,De.center[1]+=Vn.y*At,a.transformMat4(De.center,De.center,ze),a.transformMat4(Gn,Gn,ze);const cn=[De.center[0],De.center[1],Gn[2]*k.pixelsPerMeter];a.scale$2(cn,cn,1/k.worldSize);const or=a.lngFromMercatorX(cn[0]),cr=a.latFromMercatorY(cn[1]),ur=Math.min(k._zoomFromMercatorZ(cn[2]),I.maxZoom),dr=new a.LngLat(or,cr);return k.mercatorFromTransition&&ur<.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"globe"}),k.zoom=ur,this._cameraForBounds(k,u,g,v,b,E)):{center:dr,zoom:ur,bearing:v,pitch:b}}fitBounds(s,u,g){const v=this.cameraForBounds(s,u);return this._fitInternal(v,u,g)}fitScreenCoordinates(s,u,g,v,b){const E=a.Point.convert(s),k=a.Point.convert(u),I=new a.Point(Math.min(E.x,k.x),Math.min(E.y,k.y)),O=new a.Point(Math.max(E.x,k.x),Math.max(E.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(E,k))return this;const L=this.transform.pointLocation3D(I),q=this.transform.pointLocation3D(O),te=this.transform.pointLocation3D(new a.Point(I.x,O.y)),se=this.transform.pointLocation3D(new a.Point(O.x,I.y)),ce=[Math.min(L.lng,q.lng,te.lng,se.lng),Math.min(L.lat,q.lat,te.lat,se.lat)],le=[Math.max(L.lng,q.lng,te.lng,se.lng),Math.max(L.lat,q.lat,te.lat,se.lat)],pe=v&&v.pitch?v.pitch:this.getPitch(),Z=this._cameraForBounds(this.transform,ce,le,g,pe,v);return this._fitInternal(Z,v,b)}_fitInternal(s,u,g){return s?(delete(u=a.extend(s,u)).padding,u.linear?this.easeTo(u,g):this.flyTo(u,g)):this}jumpTo(s,u){this.stop();const g=s.preloadOnly?this.transform.clone():this.transform;let v=!1,b=!1,E=!1;return"zoom"in s&&g.zoom!==+s.zoom&&(v=!0,g.zoom=+s.zoom),s.center!==void 0&&(g.center=a.LngLat.convert(s.center)),"bearing"in s&&g.bearing!==+s.bearing&&(b=!0,g.bearing=+s.bearing),"pitch"in s&&g.pitch!==+s.pitch&&(E=!0,g.pitch=+s.pitch),s.padding==null||g.isPaddingEqual(s.padding)||(g.padding=s.padding),s.preloadOnly?(this._preloadTiles(g),this):(this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),v&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),b&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),E&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.warnOnce(Ia),this.transform.getFreeCameraOptions()}setFreeCameraOptions(s,u){const g=this.transform;if(!g.projection.supportsFreeCamera)return a.warnOnce(Ia),this;this.stop();const v=g.zoom,b=g.pitch,E=g.bearing;g.setFreeCameraOptions(s);const k=v!==g.zoom,I=b!==g.pitch,O=E!==g.bearing;return this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),k&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),O&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),I&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u)),this}easeTo(s,u){this._stop(!1,s.easeId),((s=a.extend({offset:[0,0],duration:500,easing:a.ease},s)).animate===!1||this._prefersReducedMotion(s))&&(s.duration=0);const g=this.transform,v=this.getZoom(),b=this.getBearing(),E=this.getPitch(),k=this.getPadding(),I="zoom"in s?+s.zoom:v,O="bearing"in s?this._normalizeBearing(s.bearing,b):b,L="pitch"in s?+s.pitch:E,q="padding"in s?s.padding:g.padding,te=a.Point.convert(s.offset);let se,ce,le;if(g.projection.name==="globe"){const Ue=a.MercatorCoordinate.fromLngLat(g.center),Ye=te.rotate(-g.angle);Ue.x+=Ye.x/g.worldSize,Ue.y+=Ye.y/g.worldSize;const kt=Ue.toLngLat(),qe=a.LngLat.convert(s.center||kt);this._normalizeCenter(qe),se=g.centerPoint.add(Ye),ce=new a.Point(Ue.x,Ue.y).mult(g.worldSize),le=new a.Point(a.mercatorXfromLng(qe.lng),a.mercatorYfromLat(qe.lat)).mult(g.worldSize).sub(ce)}else{se=g.centerPoint.add(te);const Ue=g.pointLocation(se),Ye=a.LngLat.convert(s.center||Ue);this._normalizeCenter(Ye),ce=g.project(Ue),le=g.project(Ye).sub(ce)}const pe=g.zoomScale(I-v);let Z,ie;s.around&&(Z=a.LngLat.convert(s.around),ie=g.locationPoint(Z));const ve=this._zooming||I!==v,xe=this._rotating||b!==O,De=this._pitching||L!==E,Re=!g.isPaddingEqual(q),ze=Ue=>Ye=>{if(ve&&(Ue.zoom=a.number(v,I,Ye)),xe&&(Ue.bearing=a.number(b,O,Ye)),De&&(Ue.pitch=a.number(E,L,Ye)),Re&&(Ue.interpolatePadding(k,q,Ye),se=Ue.centerPoint.add(te)),Z)Ue.setLocationAtPoint(Z,ie);else{const kt=Ue.zoomScale(Ue.zoom-v),qe=I>v?Math.min(2,pe):Math.max(.5,pe),ft=Math.pow(qe,1-Ye),et=Ue.unproject(ce.add(le.mult(Ye*ft)).mult(kt));Ue.setLocationAtPoint(Ue.renderWorldCopies?et.wrap():et,se)}return s.preloadOnly||this._fireMoveEvents(u),Ue};if(s.preloadOnly){const Ue=this._emulate(ze,s.duration,g);return this._preloadTiles(Ue),this}const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ve,this._rotating=xe,this._pitching=De,this._padding=Re,this._easeId=s.easeId,this._prepareEase(u,s.noMoveStart,Ve),this._ease(ze(g),Ue=>{g.recenterOnTerrain(),this._afterEase(u,Ue)},s),this}_prepareEase(s,u,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",u||g.moving||this.fire(new a.Event("movestart",s)),this._zooming&&!g.zooming&&this.fire(new a.Event("zoomstart",s)),this._rotating&&!g.rotating&&this.fire(new a.Event("rotatestart",s)),this._pitching&&!g.pitching&&this.fire(new a.Event("pitchstart",s))}_fireMoveEvents(s){this.fire(new a.Event("move",s)),this._zooming&&this.fire(new a.Event("zoom",s)),this._rotating&&this.fire(new a.Event("rotate",s)),this._pitching&&this.fire(new a.Event("pitch",s))}_afterEase(s,u){if(this._easeId&&u&&this._easeId===u)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,v=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new a.Event("zoomend",s)),v&&this.fire(new a.Event("rotateend",s)),b&&this.fire(new a.Event("pitchend",s)),this.fire(new a.Event("moveend",s))}flyTo(s,u){if(this._prefersReducedMotion(s)){const wt=a.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(wt,u)}this.stop(),s=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},s);const g=this.transform,v=this.getZoom(),b=this.getBearing(),E=this.getPitch(),k=this.getPadding(),I="zoom"in s?a.clamp(+s.zoom,g.minZoom,g.maxZoom):v,O="bearing"in s?this._normalizeBearing(s.bearing,b):b,L="pitch"in s?+s.pitch:E,q="padding"in s?s.padding:g.padding,te=g.zoomScale(I-v),se=a.Point.convert(s.offset);let ce=g.centerPoint.add(se);const le=g.pointLocation(ce),pe=a.LngLat.convert(s.center||le);this._normalizeCenter(pe);const Z=g.project(le),ie=g.project(pe).sub(Z);let ve=s.curve;const xe=Math.max(g.width,g.height),De=xe/te,Re=ie.mag();if("minZoom"in s){const wt=a.clamp(Math.min(s.minZoom,v,I),g.minZoom,g.maxZoom),At=xe/g.zoomScale(wt-v);ve=Math.sqrt(At/Re*2)}const ze=ve*ve;function Ve(wt){const At=(De*De-xe*xe+(wt?-1:1)*ze*ze*Re*Re)/(2*(wt?De:xe)*ze*Re);return Math.log(Math.sqrt(At*At+1)-At)}function Ue(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function Ye(wt){return(Math.exp(wt)+Math.exp(-wt))/2}const kt=Ve(0);let qe=function(wt){return Ye(kt)/Ye(kt+ve*wt)},ft=function(wt){return xe*((Ye(kt)*(Ue(At=kt+ve*wt)/Ye(At))-Ue(kt))/ze)/Re;var At},et=(Ve(1)-kt)/ve;if(Math.abs(Re)<1e-6||!isFinite(et)){if(Math.abs(xe-De)<1e-6)return this.easeTo(s,u);const wt=De<xe?-1:1;et=Math.abs(Math.log(De/xe))/ve,ft=function(){return 0},qe=function(At){return Math.exp(wt*ve*At)}}s.duration="duration"in s?+s.duration:1e3*et/("screenSpeed"in s?+s.screenSpeed/ve:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0);const Et=b!==O,Xe=L!==E,pt=!g.isPaddingEqual(q),It=wt=>At=>{const pn=At*et,In=1/qe(pn);wt.zoom=At===1?I:v+wt.scaleZoom(In),Et&&(wt.bearing=a.number(b,O,At)),Xe&&(wt.pitch=a.number(E,L,At)),pt&&(wt.interpolatePadding(k,q,At),ce=wt.centerPoint.add(se));const rn=At===1?pe:wt.unproject(Z.add(ie.mult(ft(pn))).mult(In));return wt.setLocationAtPoint(wt.renderWorldCopies?rn.wrap():rn,ce),wt._updateCameraOnTerrain(),s.preloadOnly||this._fireMoveEvents(u),wt};if(s.preloadOnly){const wt=this._emulate(It,s.duration,g);return this._preloadTiles(wt),this}return this._zooming=!0,this._rotating=Et,this._pitching=Xe,this._padding=pt,this._prepareEase(u,!1),this._ease(It(g),()=>this._afterEase(u),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,u)}if(!s){const g=this.handlers;g&&g.stop(!1)}return this}_ease(s,u,g){g.animate===!1||g.duration===0?(s(1),u()):(this._easeStart=a.exported.now(),this._easeOptions=g,this._onEaseFrame=s,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1),u=this._onEaseFrame;u&&u(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,u){s=a.wrap(s,-180,180);const g=Math.abs(s-u);return Math.abs(s-360-u)<g&&(s-=360),Math.abs(s+360-u)<g&&(s+=360),s}_normalizeCenter(s){const u=this.transform;if(!u.renderWorldCopies||u.maxBounds)return;const g=s.lng-u.center.lng;s.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(s){return this._respectPrefersReducedMotion&&a.exported.prefersReducedMotion&&!(s&&s.essential)}_emulate(s,u,g){const v=Math.ceil(15*u/1e3),b=[],E=s(g.clone());for(let k=0;k<=v;k++){const I=E(k/v);b.push(I.clone())}return b}}class en{constructor(s={}){this.options=s,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){const u=this.options&&this.options.compact;return this._map=s,this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=R("button","mapboxgl-ctrl-attrib-button",this._container),R("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),u===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(s,u){const g=this._map._getUIString(`AttributionControl.${u}`);s.setAttribute("aria-label",g),s.removeAttribute("title"),s.firstElementChild&&s.firstElementChild.setAttribute("title",g)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let s=this._editLink;s||(s=this._editLink=this._container.querySelector(".mapbox-improve-map"));const u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(s){const g=u.reduce((v,b,E)=>(b.value&&(v+=`${b.key}=${b.value}${E<u.length-1?"&":""}`),v),"?");s.href=`${a.config.FEEDBACK_URL}/${g}#${Ec(this._map,!0)}`,s.rel="noopener nofollow",this._setElementTitle(s,"MapFeedback")}}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let s=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const u=this._map.style._sourceCaches;for(const v in u){const b=u[v];if(b.used){const E=b.getSource();E.attribution&&s.indexOf(E.attribution)<0&&s.push(E.attribution)}}s.sort((v,b)=>v.length-b.length),s=s.filter((v,b)=>{for(let E=b+1;E<s.length;E++)if(s[E].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=[...this.options.customAttribution,...s]:s.unshift(this.options.customAttribution));const g=s.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,s.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class vp{constructor(){a.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(s){this._map=s,this._container=R("div","mapboxgl-ctrl");const u=R("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(s){s&&s.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const s=this._map.style._sourceCaches;if(Object.entries(s).length===0)return!0;for(const u in s){const g=s[u].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const s=this._container.children;if(s.length){const u=s[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}}}class xp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const u=++this._id;return this._queue.push({callback:s,id:u,cancelled:!1}),u}remove(s){const u=this._currentlyRunning,g=u?this._queue.concat(u):this._queue;for(const v of g)if(v.id===s)return void(v.cancelled=!0)}run(s=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const g of u)if(!g.cancelled&&(g.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function bl(f,s,u){if(f=new a.LngLat(f.lng,f.lat),s){const g=new a.LngLat(f.lng-360,f.lat),v=new a.LngLat(f.lng+360,f.lat),b=360*Math.ceil(Math.abs(f.lng-u.center.lng)/360),E=u.locationPoint(f).distSqr(s),k=s.x<0||s.y<0||s.x>u.width||s.y>u.height;u.locationPoint(g).distSqr(s)<E&&(k||Math.abs(g.lng-u.center.lng)<b)?f=g:u.locationPoint(v).distSqr(s)<E&&(k||Math.abs(v.lng-u.center.lng)<b)&&(f=v)}for(;Math.abs(f.lng-u.center.lng)>180;){const g=u.locationPoint(f);if(g.x>=0&&g.y>=0&&g.x<=u.width&&g.y<=u.height)break;f.lng>u.center.lng?f.lng-=360:f.lng+=360}return f}const Aa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Yt extends a.Evented{constructor(s,u){if(super(),(s instanceof a.window.HTMLElement||u)&&(s=a.extend({element:s},u)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=s&&s.occludedOpacity||.2,s&&s.element)this._element=s.element,this._offset=a.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=R("div");const v=41,b=27,E=$("svg",{display:"block",height:v*this._scale+"px",width:b*this._scale+"px",viewBox:`0 0 ${b} ${v}`},this._element),k=$("radialGradient",{id:"shadowGradient"},$("defs",{},E));$("stop",{offset:"10%","stop-opacity":.4},k),$("stop",{offset:"100%","stop-opacity":.05},k),$("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},E),$("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},E),$("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},E),$("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},E),this._offset=a.Point.convert(s&&s.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()});const g=this._element.classList;for(const v in Aa)g.remove(`mapboxgl-marker-anchor-${v}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(s){return s===this._map||(this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._updateMoving),s.on("moveend",this._update),s.on("remove",this._clearFadeTimer),s._addMarker(this),this.setDraggable(this._draggable),this._update(),s.on("click",this._onMapClick)),this}remove(){const s=this._map;return s&&(s.off("click",this._onMapClick),s.off("move",this._updateMoving),s.off("moveend",this._update),s.off("mousedown",this._addDragHandler),s.off("touchstart",this._addDragHandler),s.off("mouseup",this._onUp),s.off("touchend",this._onUp),s.off("mousemove",this._onMove),s.off("touchmove",this._onMove),s.off("remove",this._clearFadeTimer),s._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,s._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(s){const u=s.code,g=s.charCode||s.keyCode;u!=="Space"&&u!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(s){const u=s.originalEvent.target,g=this._element;this._popup&&(u===g||g.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?(s.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(s.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const s=this._map,u=this._pos;if(!s||!u)return!1;const g=s.unproject(u),v=s.getFreeCameraOptions();if(!v.position)return!1;const b=v.position.toLngLat();return b.distanceTo(g)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const s=this._map;if(!s)return;const u=this._pos;if(!u||u.x<0||u.x>s.transform.width||u.y<0||u.y>s.transform.height)return void this._clearFadeTimer();const g=s.unproject(u);let v;s._showingGlobe()&&a.isLngLatBehindGlobe(s.transform,this._lngLat)?v=0:(v=1-s._queryFogOpacity(g),s.transform._terrainEnabled()&&s.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const s=this._pos;if(!s||!this._map)return;const u=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${s.x}px,${s.y}px)
            ${Aa[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${u.x}px,${u.y}px)
        `}_calculateXYTransform(){const s=this._pos,u=this._map,g=this.getPitchAlignment();if(!u||!s||g!=="map")return"";if(!u._showingGlobe()){const I=u.getPitch();return I?`rotateX(${I}deg)`:""}const v=a.radToDeg(a.globeTiltAtLngLat(u.transform,this._lngLat)),b=s.sub(a.globeCenterToScreenPoint(u.transform)),E=Math.abs(b.x)+Math.abs(b.y);if(E===0)return"";const k=v/E;return`rotateX(${-b.y*k}deg) rotateY(${b.x*k}deg)`}_calculateZTransform(){const s=this._pos,u=this._map;if(!u||!s)return"";let g=0;const v=this.getRotationAlignment();if(v==="map")if(u._showingGlobe()){const b=u.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),E=u.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);g=a.radToDeg(Math.atan2(E.y,E.x))-90}else g=-u.getBearing();else if(v==="horizon"){const b=a.smoothstep(4,6,u.getZoom()),E=a.globeCenterToScreenPoint(u.transform);E.y+=b*u.transform.height;const k=s.sub(E),I=a.radToDeg(Math.atan2(k.y,k.x));g=(I>90?I-270:I+90)*(1-b)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(s){a.window.cancelAnimationFrame(this._updateFrameId);const u=this._map;u&&(u.transform.renderWorldCopies&&(this._lngLat=bl(this._lngLat,this._pos,u.transform)),this._pos=u.project(this._lngLat),s===!0?this._updateFrameId=a.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),u._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(u._showingGlobe()||u.getTerrain()||u.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(s){return this._offset=a.Point.convert(s),this._update(),this}_onMove(s){const u=this._map;if(!u)return;const g=this._pointerdownPos,v=this._positionDelta;if(g&&v){if(!this._isDragging){const b=this._clickTolerance||u._clickTolerance;if(s.point.dist(g)<b)return;this._isDragging=!0}this._pos=s.point.sub(v),this._lngLat=u.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const s=this._map;s&&(s.off("mousemove",this._onMove),s.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(s){const u=this._map,g=this._pos;u&&g&&this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(g),this._pointerdownPos=s.point,this._state="pending",u.on("mousemove",this._onMove),u.on("touchmove",this._onMove),u.once("mouseup",this._onUp),u.once("touchend",this._onUp))}setDraggable(s){this._draggable=!!s;const u=this._map;return u&&(s?(u.on("mousedown",this._addDragHandler),u.on("touchstart",this._addDragHandler)):(u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(s){return this._occludedOpacity=s||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const bp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Iv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function kg(f=new a.Point(0,0),s="bottom"){if(typeof f=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(s){case"top":return new a.Point(0,f);case"top-left":return new a.Point(u,u);case"top-right":return new a.Point(-u,u);case"bottom":return new a.Point(0,-f);case"bottom-left":return new a.Point(u,-u);case"bottom-right":return new a.Point(-u,-u);case"left":return new a.Point(f,0);case"right":return new a.Point(-f,0)}return new a.Point(0,0)}return f instanceof a.Point||Array.isArray(f)?a.Point.convert(f):a.Point.convert(f[s]||[0,0])}class wp{constructor(s){this.jumpTo(s)}getValue(s){if(s<=this._startTime)return this._start;if(s>=this._endTime)return this._end;const u=a.easeCubicInOut((s-this._startTime)/(this._endTime-this._startTime));return this._start*(1-u)+this._end*u}isEasing(s){return s>=this._startTime&&s<=this._endTime}jumpTo(s){this._startTime=-1/0,this._endTime=-1/0,this._start=s,this._end=s}easeTo(s,u,g){this._start=this.getValue(u),this._end=s,this._startTime=u,this._endTime=u+g}}const Pg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Mg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Av={showCompass:!0,showZoom:!0,visualizePitch:!1};class Dv{constructor(s,u,g=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new fp({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,g&&(this.mousePitch=new mp({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener("mousedown",this.mousedown),u.addEventListener("touchstart",this.touchstart,{passive:!1}),u.addEventListener("touchmove",this.touchmove),u.addEventListener("touchend",this.touchend),u.addEventListener("touchcancel",this.reset)}down(s,u){this.mouseRotate.mousedown(s,u),this.mousePitch&&this.mousePitch.mousedown(s,u),N()}move(s,u){const g=this.map,v=this.mouseRotate.mousemoveWindow(s,u),b=v&&v.bearingDelta;if(b&&g.setBearing(g.getBearing()+b),this.mousePitch){const E=this.mousePitch.mousemoveWindow(s,u),k=E&&E.pitchDelta;k&&g.setPitch(g.getPitch()+k)}}off(){const s=this.element;s.removeEventListener("mousedown",this.mousedown),s.removeEventListener("touchstart",this.touchstart,{passive:!1}),s.removeEventListener("touchmove",this.touchmove),s.removeEventListener("touchend",this.touchend),s.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){U(),a.window.removeEventListener("mousemove",this.mousemove),a.window.removeEventListener("mouseup",this.mouseup)}mousedown(s){this.down(a.extend({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),Q(this.element,s)),a.window.addEventListener("mousemove",this.mousemove),a.window.addEventListener("mouseup",this.mouseup)}mousemove(s){this.move(s,Q(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=re(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=re(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Sp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Tp={maxWidth:100,unit:"metric"},Cp={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},wl={version:a.version,supported:C,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends ed{constructor(f){if(a.LivePerformanceUtils.mark(a.PerformanceMarkers.create),(f=a.extend({},Mg,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&a.isSafariWithAntialiasingBug(a.window)&&(f.antialias=!1,a.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new yl(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._useWebGL2=f.useWebGL2,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._language=this._parseLanguage(f.language),this._worldview=f.worldview,this._renderTaskQueue=new xp,this._domRenderTaskQueue=new xp,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Pg,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._performanceMetricsCollection=f.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new wp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new a.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,typeof f.container=="string"){if(this._container=a.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof a.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&a.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1),a.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Jo(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new up(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,a.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new en({customAttribution:f.customAttribution})),this._logoControl=new vp,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new a.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new a.Event(`${s.dataType}dataloading`,s))})}_getMapId(){return this._mapId}addControl(f,s){if(s===void 0&&(s=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=f.onAdd(this);this._controls.push(f);const g=this._controlPositions[s];return s.indexOf("bottom")!==-1?g.insertBefore(u,g.firstChild):g.appendChild(u),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(f);return s>-1&&this._controls.splice(s,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const s=!this._moving;return s&&this.fire(new a.Event("movestart",f)).fire(new a.Event("move",f)),this.fire(new a.Event("resize",f)),s&&this.fire(new a.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(a.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(f){return f==="auto"?a.window.navigator.language:Array.isArray(f)?f.length===0?void 0:f.map(s=>s==="auto"?a.window.navigator.language:s):f}setLanguage(f){const s=this._parseLanguage(f);if(!this.style||s===this._language)return this;this._language=s,this.style._reloadSources();for(const u of this._controls)u._setLanguage&&u._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(f){return this.style&&f!==this._worldview?(this._worldview=f,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(f){return this._lazyInitEmptyStyle(),f?typeof f=="string"&&(f={name:f}):f=null,this._useExplicitProjection=!!f,this._prioritizeAndUpdateProjection(f,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const f=this.transform,s=f.projection.name;let u;s==="globe"&&f.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?(f.setMercatorFromTransition(),u=!0):s==="mercator"&&f.zoom<a.GLOBE_ZOOM_THRESHOLD_MAX&&(f.setProjection({name:"globe"}),u=!0),u&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(f,s){return this._updateProjection(f||s||{name:"mercator"})}_updateProjection(f){let s;if(s=f.name==="globe"&&this.transform.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(f),this.style.applyProjectionUpdate(),s){this.painter.clearBackgroundTiles();for(const u in this.style._sourceCaches)this.style._sourceCaches[u].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(f){return this.transform.locationPoint3D(a.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(a.Point.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(f,s,u){if(f==="mouseenter"||f==="mouseover"){let g=!1;const v=E=>{const k=s.filter(O=>this.getLayer(O)),I=k.length?this.queryRenderedFeatures(E.point,{layers:k}):[];I.length?g||(g=!0,u.call(this,new mi(f,this,E.originalEvent,{features:I}))):g=!1},b=()=>{g=!1};return{layers:new Set(s),listener:u,delegates:{mousemove:v,mouseout:b}}}if(f==="mouseleave"||f==="mouseout"){let g=!1;const v=E=>{const k=s.filter(I=>this.getLayer(I));(k.length?this.queryRenderedFeatures(E.point,{layers:k}):[]).length?g=!0:g&&(g=!1,u.call(this,new mi(f,this,E.originalEvent)))},b=E=>{g&&(g=!1,u.call(this,new mi(f,this,E.originalEvent)))};return{layers:new Set(s),listener:u,delegates:{mousemove:v,mouseout:b}}}{const g=v=>{const b=s.filter(k=>this.getLayer(k)),E=b.length?this.queryRenderedFeatures(v.point,{layers:b}):[];E.length&&(v.features=E,u.call(this,v),delete v.features)};return{layers:new Set(s),listener:u,delegates:{[f]:g}}}}on(f,s,u){if(u===void 0)return super.on(f,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(f,s,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(g);for(const v in g.delegates)this.on(v,g.delegates[v]);return this}once(f,s,u){if(u===void 0)return super.once(f,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(f,s,u);for(const v in g.delegates)this.once(v,g.delegates[v]);return this}off(f,s,u){if(u===void 0)return super.off(f,s);s=new Set(Array.isArray(s)?s:[s]);const g=(b,E)=>{if(b.size!==E.size)return!1;for(const k of b)if(!E.has(k))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[f]:void 0;return v&&(b=>{for(let E=0;E<b.length;E++){const k=b[E];if(k.listener===u&&g(k.layers,s)){for(const I in k.delegates)this.off(I,k.delegates[I]);return b.splice(E,1),this}}})(v),this}queryRenderedFeatures(f,s){return this.style?(s!==void 0||f===void 0||f instanceof a.Point||Array.isArray(f)||(s=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],s=s||{},this.transform)):[]}querySourceFeatures(f,s){return this.style.querySourceFeatures(f,s)}isPointOnSurface(f){const{name:s}=this.transform.projection;return s!=="globe"&&s!=="mercator"&&a.warnOnce(`${s} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.Point.convert(f))}setStyle(f,s){return(s=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&s.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._localFontFamily=s.localFontFamily,this._updateStyle(f,s))}_getUIString(f){const s=this._locale[f];if(s==null)throw new Error(`Missing UI string '${f}'`);return s}_updateStyle(f,s){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new Yo(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Yo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,s){if(typeof f=="string"){const u=this._requestManager.normalizeStyleURL(f),g=this._requestManager.transformRequest(u,a.ResourceType.Style);a.getJSON(g,(v,b)=>{v?this.fire(new a.ErrorEvent(v)):b&&this._updateDiff(b,s)})}else typeof f=="object"&&this._updateDiff(f,s)}_updateDiff(f,s){try{this.style.setState(f)&&this._update(!0)}catch(u){a.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(f,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.warnOnce("There is no style added to the map."),!1)}addSource(f,s){return this._lazyInitEmptyStyle(),this.style.addSource(f,s),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const s in f){const u=f[s]._tiles;for(const g in u){const v=u[g];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(f,s,u){this._lazyInitEmptyStyle(),this.style.addSourceType(f,s,u)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,s,{pixelRatio:u=1,sdf:g=!1,stretchX:v,stretchY:b,content:E}={}){if(this._lazyInitEmptyStyle(),s instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&s instanceof a.window.ImageBitmap){const{width:k,height:I,data:O}=a.exported.getImageData(s);this.style.addImage(f,{data:new a.RGBAImage({width:k,height:I},O),pixelRatio:u,stretchX:v,stretchY:b,content:E,sdf:g,version:0})}else if(s.width===void 0||s.height===void 0)this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:k,height:I}=s,O=s;this.style.addImage(f,{data:new a.RGBAImage({width:k,height:I},new Uint8Array(O.data)),pixelRatio:u,stretchX:v,stretchY:b,content:E,sdf:g,version:0,userImage:O}),O.onAdd&&O.onAdd(this,f)}}updateImage(f,s){const u=this.style.getImage(f);if(!u)return void this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=s instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&s instanceof a.window.ImageBitmap?a.exported.getImageData(s):s,{width:v,height:b}=g;v!==void 0&&b!==void 0?v===u.data.width&&b===u.data.height?(u.data.replace(g.data,!(s instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&s instanceof a.window.ImageBitmap)),this.style.updateImage(f,u)):this.fire(new a.ErrorEvent(new Error(`The width and height of the updated image (${v}, ${b})
                must be that same as the previous version of the image
                (${u.data.width}, ${u.data.height})`))):this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,s){a.getImage(this._requestManager.transformRequest(f,a.ResourceType.Image),(u,g)=>{s(u,g instanceof a.window.HTMLImageElement?a.exported.getImageData(g):g)})}listImages(){return this.style.listImages()}addLayer(f,s){return this._lazyInitEmptyStyle(),this.style.addLayer(f,s),this._update(!0)}moveLayer(f,s){return this.style.moveLayer(f,s),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,s,u){return this.style.setLayerZoomRange(f,s,u),this._update(!0)}setFilter(f,s,u={}){return this.style.setFilter(f,s,u),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,s,u,g={}){return this.style.setPaintProperty(f,s,u,g),this._update(!0)}getPaintProperty(f,s){return this.style.getPaintProperty(f,s)}setLayoutProperty(f,s,u,g={}){return this.style.setLayoutProperty(f,s,u,g),this._update(!0)}getLayoutProperty(f,s){return this.style.getLayoutProperty(f,s)}setLight(f,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,s),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.LngLat.convert(f),this.transform):0}setFeatureState(f,s){return this.style.setFeatureState(f,s),this._update()}removeFeatureState(f,s){return this.style.removeFeatureState(f,s),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,s=this._container.getBoundingClientRect().height||300;let u,g,v,b=this._container;for(;b&&(!g||!v);){const E=a.window.getComputedStyle(b).transform;E&&E!=="none"&&(u=E.match(/matrix.*\((.+)\)/)[1].split(", "),u[0]&&u[0]!=="0"&&u[0]!=="1"&&(g=u[0]),u[3]&&u[3]!=="0"&&u[3]!=="1"&&(v=u[3])),b=b.parentElement}this._containerWidth=g?Math.abs(f/g):f,this._containerHeight=v?Math.abs(s/v):s}_detectMissingCSS(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=R("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const s=this._canvasContainer=R("div","mapboxgl-canvas-container",f);this._interactive&&s.classList.add("mapboxgl-interactive"),this._canvas=R("canvas","mapboxgl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const u=this._controlContainer=R("div","mapboxgl-control-container",f),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{g[v]=R("div",`mapboxgl-ctrl-${v}`,u)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,s){const u=a.exported.devicePixelRatio||1;this._canvas.width=u*Math.ceil(f),this._canvas.height=u*Math.ceil(s),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${s}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const s=this._markers.indexOf(f);s!==-1&&this._markers.splice(s,1)}_addPopup(f){this._popups.push(f)}_removePopup(f){const s=this._popups.indexOf(f);s!==-1&&this._popups.splice(s,1)}_setupPainter(){const f=a.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._useWebGL2&&this._canvas.getContext("webgl2",f),u=s||this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);u?(this._useWebGL2&&!s&&a.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),a.storeAuthState(u,!0),this.painter=new ml(u,this.transform,!!s),this.on("data",g=>{g.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),a.exported$1.testSupport(u)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let s;const u=this.painter.context.extTimerQuery,g=a.exported.now();if(this.listens("gpu-timing-frame")&&(s=u.createQueryEXT(),u.beginQueryEXT(u.TIME_ELAPSED_EXT,s)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],a.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],a.window.performance.now())),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;this._updateProjectionTransition();const v=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,I=this.transform.pitch,O=a.exported.now(),L=new a.EvaluationParameters(k,{now:O,fadeDuration:v,pitch:I,transition:this.style.getTransition()});this.style.update(L)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let b=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),b=this._updateAverageElevation(g),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):b=this._updateAverageElevation(g),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,v,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),s){const k=a.exported.now()-g;u.endQueryEXT(u.TIME_ELAPSED_EXT,s),setTimeout(()=>{const I=u.getQueryObjectEXT(s,u.QUERY_RESULT_EXT)/1e6;u.deleteQueryEXT(s),this.fire(new a.Event("gpu-timing-frame",{cpuTime:k,gpuTime:I})),a.window.performance.mark("frame-gpu",{startTime:g,detail:{gpuTime:I}})},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const I=this.painter.queryGpuTimers(k);this.fire(new a.Event("gpu-timing-layer",{layerTimes:I}))},50)}if(this.listens("gpu-timing-deferred-render")){const k=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const I=this.painter.queryGpuTimeDeferredRender(k);this.fire(new a.Event("gpu-timing-deferred-render",{gpuTime:I}))},50)}const E=this._sourcesDirty||this._styleDirty||this._placementDirty||b;if(E||this._repaint)this.triggerRepaint();else{const k=!this.isMoving()&&this.loaded();if(k&&(b=this._updateAverageElevation(g,!0)),b)this.triggerRepaint();else if(this._triggerFrame(!1),k&&(this.fire(new a.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const I=this._calculateSpeedIndex();this.fire(new a.Event("speedindexcompleted",{speedIndex:I})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||E||(this._fullyLoaded=!0,a.LivePerformanceUtils.mark(a.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&a.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(f){for(const s of this._markers)f&&!this.getRenderWorldCopies()&&(s._lngLat=s._lngLat.wrap()),s._update();for(const s of this._popups)!f||this.getRenderWorldCopies()||s._trackPointer||(s._lngLat=s._lngLat.wrap()),s._update()}_updateAverageElevation(f,s=!1){const u=g=>(this.transform.averageElevation=g,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&u(0);if((s||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const g=this.transform.averageElevation;let v=this.transform.sampleAverageElevation(),b=!1;this.transform.elevation&&(b=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(v)?v=0:this._averageElevationLastSampledAt=f;const E=Math.abs(g-v);if(E>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(v),u(v);this._averageElevation.easeTo(v,f,300)}else if(E>1e-4)return this._averageElevation.jumpTo(v),u(v)}return!!this._averageElevation.isEasing(f)&&u(this._averageElevation.getValue(f))}_authenticate(){a.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===a.AUTH_ERR_MSG||f.status===401)){const s=this.painter.context.gl;a.storeAuthState(s,!1),this._logoControl instanceof vp&&this._logoControl._updateLogo(),s&&s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),a.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const f=this._isDragging();this.painter.updateTerrain(this.style,f)}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),s=this.painter.getCanvasCopiesAndTimestamps();s.timeStamps.push(performance.now());const u=this.painter.context.gl,g=u.createFramebuffer();function v(b){u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,b,0);const E=new Uint8Array(u.drawingBufferWidth*u.drawingBufferHeight*4);return u.readPixels(0,0,u.drawingBufferWidth,u.drawingBufferHeight,u.RGBA,u.UNSIGNED_BYTE,E),E}return u.bindFramebuffer(u.FRAMEBUFFER,g),this._canvasPixelComparison(v(f),s.canvasCopies.map(v),s.timeStamps)}_canvasPixelComparison(f,s,u){let g=u[1]-u[0];const v=f.length/4;for(let b=0;b<s.length;b++){const E=s[b];let k=0;for(let I=0;I<E.length;I+=4)E[I]===f[I]&&E[I+1]===f[I+1]&&E[I+2]===f[I+2]&&E[I+3]===f[I+3]&&(k+=1);g+=(u[b+2]-u[b+1])*(1-k/v)}return g}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1),a.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),a.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=a.exported.frame(s=>{const u=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,u&&this._render(s)}))}_preloadTiles(f){const s=this.style?Object.values(this.style._sourceCaches):[];return a.asyncAll(s,(u,g)=>u._preloadTiles(f,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}_onVisibilityChange(){a.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(f){this._showTileAABBs!==f&&(this._showTileAABBs=f,f&&this._update())}_setCacheLimits(f,s){a.setCacheLimits(f,s)}get version(){return a.version}},NavigationControl:class{constructor(f){this.options=a.extend({},Av,f),this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",s=>{this._map&&this._map.zoomIn({},{originalEvent:s})}),R("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",s=>{this._map&&this._map.zoomOut({},{originalEvent:s})}),R("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",s=>{const u=this._map;u&&(this.options.visualizePitch?u.resetNorthPitch({},{originalEvent:s}):u.resetNorth({},{originalEvent:s}))}),this._compassIcon=R("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const s=f.getZoom(),u=s===f.getMaxZoom(),g=s===f.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=s)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Dv(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,s){const u=R("button",f,this._container);return u.type="button",u.addEventListener("click",s),u}_setButtonTitle(f,s){if(!this._map)return;const u=this._map._getUIString(`NavigationControl.${s}`);f.setAttribute("aria-label",u),f.firstElementChild&&f.firstElementChild.setAttribute("title",u)}},GeolocateControl:class extends a.Evented{constructor(f){super(),this.options=a.extend({geolocation:a.window.navigator.geolocation},Sp,f),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=_l(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(f){return this._map=f,this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(f){const s=(u=!!this.options.geolocation)=>{this._supportsGeolocation=u,f(u)};this._supportsGeolocation!==void 0?f(this._supportsGeolocation):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(u=>s(u.state!=="denied")).catch(()=>s()):s()}_isOutOfMapMaxBounds(f){const s=this._map.getMaxBounds(),u=f.coords;return!!s&&(u.longitude<s.getWest()||u.longitude>s.getEast()||u.latitude<s.getSouth()||u.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",f)),this._finish()}}_updateCamera(f){const s=new a.LngLat(f.coords.longitude,f.coords.latitude),u=f.coords.accuracy,g=this._map.getBearing(),v=a.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(u),v,{geolocateSource:!0})}_updateMarker(f){if(f){const s=new a.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.transform,s=a.mercatorZfromAltitude(1,f._center.lat)*f.worldSize,u=Math.ceil(2*this._accuracy*s);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=R("button","mapboxgl-ctrl-geolocate",this._container),R("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R("div","mapboxgl-user-location"),this._dotElement.appendChild(R("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(R("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Yt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=R("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Yt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:f.absolute===!0&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(f={maximumAge:6e5,timeout:0},this._noTimeout=!0):(f=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{a.window.addEventListener("ondeviceorientationabsolute"in a.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};a.window.DeviceMotionEvent!==void 0&&typeof a.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(s=>{s==="granted"&&f()}).catch(console.error):f()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),a.window.removeEventListener("deviceorientation",this._onDeviceOrientation),a.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:en,ScaleControl:class{constructor(f){this.options=a.extend({},Tp,f),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),a.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const f=this.options.maxWidth||100,s=this._map,u=s._containerHeight/2,g=s._containerWidth/2-f/2,v=s.unproject([g,u]),b=s.unproject([g+f,u]),E=v.distanceTo(b);if(this.options.unit==="imperial"){const k=3.2808*E;k>5280?this._setScale(f,k/5280,"mile"):this._setScale(f,k,"foot")}else this.options.unit==="nautical"?this._setScale(f,E/1852,"nautical-mile"):E>=1e3?this._setScale(f,E/1e3,"kilometer"):this._setScale(f,E,"meter")}_setScale(f,s,u){this._map._requestDomTask(()=>{const g=function(b){const E=Math.pow(10,`${Math.floor(b)}`.length-1);let k=b/E;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(I){const O=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*O)/O}(k),E*k}(s),v=g/s;this._container.innerHTML=this._isNumberFormatSupported&&u!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:u}).format(g):`${g}&nbsp;${Cp[u]}`,this._container.style.width=f*v+"px"})}onAdd(f){return this._map=f,this._language=f.getLanguage(),this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(f){this._language=f,this._update()}setUnit(f){this.options.unit=f,this._update()}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof a.window.HTMLElement?this._container=f.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in a.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!a.window.document.fullscreenEnabled&&!a.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=R("button","mapboxgl-ctrl-fullscreen",this._controlContainer);R("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(a.window.document.fullscreenElement||a.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.Evented{constructor(f){super(),this.options=a.extend(Object.create(bp),f),a.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),f._addPopup(this),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),f._canvasContainer&&f._canvasContainer.classList.remove("mapboxgl-track-pointer"),f._removePopup(this),this._map=void 0),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=a.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const s=this._map;return s&&(s.on("move",this._update),s.off("mousemove",this._onMouseEvent),s._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(a.window.document.createTextNode(f))}setHTML(f){const s=a.window.document.createDocumentFragment(),u=a.window.document.createElement("body");let g;for(u.innerHTML=f;g=u.firstChild,g;)s.appendChild(g);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let s=this._content;if(s)for(;s.hasChildNodes();)s.firstChild&&s.removeChild(s.firstChild);else s=this._content=R("div","mapboxgl-popup-content",this._container||void 0);if(s.appendChild(f),this.options.closeButton){const u=this._closeButton=R("button","mapboxgl-popup-close-button",s);u.type="button",u.setAttribute("aria-label","Close popup"),u.setAttribute("aria-hidden","true"),u.innerHTML="&#215;",u.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let s;return this._classList.delete(f)?s=!1:(this._classList.add(f),s=!0),this._updateClassList(),s}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const s=this._map,u=this._container,g=this._pos;if(!s||!u||!g)return"bottom";const v=u.offsetWidth,b=u.offsetHeight,E=g.x<v/2,k=g.x>s.transform.width-v/2;if(g.y+f<b)return E?"top-left":k?"top-right":"top";if(g.y>s.transform.height-b){if(E)return"bottom-left";if(k)return"bottom-right"}return E?"left":k?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const s=[...this._classList];s.push("mapboxgl-popup"),this._anchor&&s.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&s.push("mapboxgl-popup-track-pointer"),f.className=s.join(" ")}_update(f){const s=this._map,u=this._content;if(!s||!this._lngLat&&!this._trackPointer||!u)return;let g=this._container;if(g||(g=this._container=R("div","mapboxgl-popup",s.getContainer()),this._tip=R("div","mapboxgl-popup-tip",g),g.appendChild(u)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),s.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=bl(this._lngLat,this._pos,s.transform)),!this._trackPointer||f){const v=this._pos=this._trackPointer&&f?f:s.project(this._lngLat),b=kg(this.options.offset),E=this._anchor=this._getAnchor(b.y),k=kg(this.options.offset,E),I=v.add(k).round();s._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${Aa[E]} translate(${I.x}px,${I.y}px)`)})}if(!this._marker&&s._showingGlobe()){const v=a.isLngLatBehindGlobe(s.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Iv);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._container&&(this._container.style.opacity=`${f}`),this._content&&(this._content.style.pointerEvents=f?"auto":"none")}},Marker:Yt,Style:Yo,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,FreeCameraOptions:hg,Evented:a.Evented,config:a.config,prewarm:function(){Qn().acquire(ot)},clearPrewarmedResources:function(){const f=hn;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(ot),hn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(f){a.config.ACCESS_TOKEN=f},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(f){a.config.API_URL=f},get workerCount(){return Jt.workerCount},set workerCount(f){Jt.workerCount=f},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){a.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){a.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:a.exported.setNow,restoreNow:a.exported.restoreNow};return wl});var _=h;return _})})(jI);var oO=jI.exports;const Df=tl(oO),sO=[{id:5029111,name:"Battery Park",location:{latitude:40.7028143,longitude:-74.015775},taxizone:"12",busi:.83,poll:.36},{id:22727025,name:"Bryant Park",location:{latitude:40.7537508,longitude:-73.9835384},taxizone:"164",busi:.56,poll:.39},{id:22899286,name:"Madison Square Park",location:{latitude:40.7421868,longitude:-73.987872},taxizone:"234",busi:.54,poll:.97},{id:22899302,name:"Washington Square Park",location:{latitude:40.730896,longitude:-73.9975857},taxizone:"114",busi:.43,poll:.64},{id:22900913,name:"Dr. Gertrude B. Kelly Playground",location:{latitude:40.7416557,longitude:-74.0020105},taxizone:"68",busi:.7,poll:.05},{id:22900959,name:"Chelsea Park",location:{latitude:40.7499194,longitude:-74.0006702},taxizone:"68",busi:.05,poll:.23},{id:22901074,name:"Gramercy Park",location:{latitude:40.737939,longitude:-73.9859225},taxizone:"107",busi:.47,poll:.57},{id:22903972,name:"Chelsea Waterside Park",location:{latitude:40.7492535,longitude:-74.0074571},taxizone:"246",busi:.26,poll:.26},{id:22904239,name:"14th Street Park",location:{latitude:40.742717,longitude:-74.0082549},taxizone:"246",busi:.07,poll:.05},{id:22926662,name:"Liberty Park",location:{latitude:40.7102299,longitude:-74.0135844},taxizone:"261",busi:.88,poll:.46},{id:22926980,name:"Washington Market Park",location:{latitude:40.7170293,longitude:-74.0116375},taxizone:"231",busi:.46,poll:.37},{id:22941918,name:"DeWitt Clinton Park",location:{latitude:40.7682011,longitude:-73.9942676},taxizone:"50",busi:.47,poll:.97},{id:22961817,name:"Jackson Square Park",location:{latitude:40.7390049,longitude:-74.0028822},taxizone:"249",busi:.32,poll:.84},{id:22961821,name:"Corporal John A. Seravalli Playground",location:{latitude:40.7390844,longitude:-74.0048187},taxizone:"249",busi:.36,poll:.68},{id:22961904,name:"Clement Clarke Moore Park",location:{latitude:40.746629,longitude:-74.0043038},taxizone:"68",busi:.16,poll:.32},{id:23048485,name:"Tudor City Greens - North Park",location:{latitude:40.7495583,longitude:-73.9705138},taxizone:"233",busi:.19,poll:.48},{id:23048493,name:"Tudor City Greens - South Park",location:{latitude:40.7488541,longitude:-73.9710191},taxizone:"233",busi:.34,poll:.18},{id:25026338,name:"Zuccotti Park",location:{latitude:40.7092314,longitude:-74.0112539},taxizone:"261",busi:.27,poll:.4},{id:25162896,name:"Tompkins Square Park",location:{latitude:40.7264724,longitude:-73.9816871},taxizone:"79",busi:.27,poll:.95},{id:30657456,name:"Christopher Park",location:{latitude:40.7335833,longitude:-74.0022513},taxizone:"249",busi:.22,poll:.38},{id:30657462,name:"Sheridan Square Garden",location:{latitude:40.7330286,longitude:-74.0021296},taxizone:"249",busi:.15,poll:.18},{id:31009822,name:"Stuyvesant Cove Park",location:{latitude:40.7328321,longitude:-73.9739596},taxizone:"224",busi:.83,poll:.2},{id:33804388,name:"East River Esplanade",location:{latitude:40.7449845,longitude:-73.9704672},taxizone:"233",busi:.67,poll:.82},{id:33804405,name:"Asser Levy Playground",location:{latitude:40.7364315,longitude:-73.9756432},taxizone:"137",busi:.81,poll:.21},{id:36185652,name:"Bellevue Society Garden",location:{latitude:40.7380949,longitude:-73.9745264},taxizone:"137",busi:.64,poll:.51},{id:36865288,name:"Desalvio Playground",location:{latitude:40.7216408,longitude:-73.9961097},taxizone:"144",busi:.7,poll:1},{id:37003318,name:"Riverside Park",location:{latitude:40.7880268,longitude:-73.982186},taxizone:"239",busi:.53,poll:.95},{id:39243853,name:"Morningside Park",location:{latitude:40.8060522,longitude:-73.9580625},taxizone:"166",busi:.25,poll:.91},{id:44225581,name:"Petrosino Square",location:{latitude:40.7217802,longitude:-73.9974692},taxizone:"144",busi:.5,poll:.11},{id:53189828,name:"DeLury Square",location:{latitude:40.7091073,longitude:-74.0050236},taxizone:"209",busi:.27,poll:.27},{id:66374787,name:"Columbus Park",location:{latitude:40.7151001,longitude:-74.0000509},taxizone:"45",busi:.85,poll:.89},{id:75311774,name:"Battery Park City Ball Fields",location:{latitude:40.7160843,longitude:-74.0140082},taxizone:"13",busi:.79,poll:.33},{id:75364733,name:"Bogardus Garden",location:{latitude:40.7158736,longitude:-74.0090666},taxizone:"231",busi:.59,poll:.85},{id:86144190,name:"Abingdon Square",location:{latitude:40.7372675,longitude:-74.0053868},taxizone:"249",busi:.58,poll:.15},{id:86144198,name:"Unknown Park",location:{latitude:40.736377,longitude:-74.0054892},taxizone:"249",busi:.61,poll:.14},{id:86256760,name:"Arthur Strickler Triangle",location:{latitude:40.7368584,longitude:-74.0058066},taxizone:"158",busi:.75,poll:.11},{id:86336886,name:"Sherman Square",location:{latitude:40.7773648,longitude:-73.9823502},taxizone:"142",busi:.09,poll:.99},{id:86338375,name:"Greenacre Park",location:{latitude:40.7562735,longitude:-73.9692846},taxizone:"229",busi:.06,poll:.02},{id:86714429,name:"Kimlau Square",location:{latitude:40.713421,longitude:-73.9979986},taxizone:"45",busi:.71,poll:.81},{id:95833119,name:"Cooper Triangle",location:{latitude:40.7288189,longitude:-73.9907764},taxizone:"79",busi:.92,poll:.14},{id:104077634,name:"Gorman Memorial Park",location:{latitude:40.8556942,longitude:-73.9324027},taxizone:"243",busi:.19,poll:.16},{id:104078386,name:"Bennett Park",location:{latitude:40.8528398,longitude:-73.938113},taxizone:"243",busi:.7,poll:.43},{id:104169861,name:"Isham Park",location:{latitude:40.8696523,longitude:-73.9190761},taxizone:"127",busi:.59,poll:.15},{id:105715154,name:"Fort Washington Park",location:{latitude:40.8531632,longitude:-73.9398863},taxizone:"243",busi:.28,poll:.43},{id:108153375,name:"Collect Pond Park",location:{latitude:40.716328,longitude:-74.0018252},taxizone:"231",busi:.47,poll:.44},{id:108153676,name:"Duarte Square",location:{latitude:40.7225449,longitude:-74.0055296},taxizone:"125",busi:.1,poll:.37},{id:108159406,name:"Carl Schurz Park",location:{latitude:40.7752127,longitude:-73.9437574},taxizone:"262",busi:.97,poll:.84},{id:108159407,name:"Thomas Jefferson Park",location:{latitude:40.7932541,longitude:-73.9353945},taxizone:"74",busi:.3,poll:.62},{id:108199253,name:"Robert Moses Plaza",location:{latitude:40.7707338,longitude:-73.9847792},taxizone:"142",busi:.39,poll:.82},{id:108199260,name:"St. Peter's Garden",location:{latitude:40.7711578,longitude:-73.9854676},taxizone:"142",busi:.76,poll:.53},{id:108201933,name:"Mill Rock Park",location:{latitude:40.7804689,longitude:-73.9385927},taxizone:"262",busi:.31,poll:.43},{id:108220705,name:"Unknown Park",location:{latitude:40.7630623,longitude:-73.9481835},taxizone:"202",busi:.34,poll:.68},{id:108235832,name:"Corlears Hook Park",location:{latitude:40.7117107,longitude:-73.9792885},taxizone:"232",busi:.89,poll:.07},{id:108235833,name:"Rector Park",location:{latitude:40.709189,longitude:-74.016925},taxizone:"13",busi:.08,poll:.25},{id:108235836,name:"Seward Park",location:{latitude:40.7148304,longitude:-73.9891502},taxizone:"232",busi:.93,poll:.67},{id:108235837,name:"Vietnam Veterans Plaza",location:{latitude:40.7026897,longitude:-74.0097625},taxizone:"88",busi:.89,poll:.21},{id:108235842,name:"John V. Lindsay East River Park",location:{latitude:40.7185542,longitude:-73.976023},taxizone:"232",busi:0,poll:.93},{id:108236534,name:"Wards Island Park",location:{latitude:40.7861499,longitude:-73.9296327},taxizone:"194",busi:.15,poll:.67},{id:108237827,name:"Wallenberg Playground",location:{latitude:40.8529616,longitude:-73.9267854},taxizone:"120",busi:.39,poll:.9},{id:108237828,name:"Jackie Robinson Park",location:{latitude:40.8267343,longitude:-73.9412148},taxizone:"116",busi:.49,poll:.22},{id:108239585,name:"Jacob H. Schiff Playground",location:{latitude:40.8205186,longitude:-73.9520188},taxizone:"152",busi:.68,poll:.01},{id:108239586,name:"Montefiore Park",location:{latitude:40.8214533,longitude:-73.9535643},taxizone:"152",busi:.72,poll:.41},{id:108239588,name:"Alexander Hamilton Playground",location:{latitude:40.8230955,longitude:-73.9512438},taxizone:"116",busi:.65,poll:.32},{id:108239589,name:"Saint Nicholas Park",location:{latitude:40.8172175,longitude:-73.9489593},taxizone:"152",busi:.9,poll:.84},{id:108295732,name:"Unknown Park",location:{latitude:40.7657936,longitude:-73.9476698},taxizone:"202",busi:.28,poll:.04},{id:108295735,name:"Unknown Park",location:{latitude:40.7664493,longitude:-73.9468825},taxizone:"202",busi:.16,poll:.87},{id:108295739,name:"Manhattan Park Parcel A",location:{latitude:40.7654725,longitude:-73.946894},taxizone:"202",busi:.64,poll:.7},{id:108296005,name:"Unknown Park",location:{latitude:40.760694,longitude:-73.9517296},taxizone:"202",busi:.23,poll:.27},{id:108315458,name:"FDR Four Freedoms State Park",location:{latitude:40.7506326,longitude:-73.9603839},taxizone:"202",busi:.19,poll:.56},{id:109267278,name:"Coenties Slip Park",location:{latitude:40.7034788,longitude:-74.0105207},taxizone:"88",busi:.59,poll:.35},{id:109269750,name:"Grand Army Plaza",location:{latitude:40.764415,longitude:-73.9733608},taxizone:"163",busi:.13,poll:.42},{id:109328312,name:"Joseph C. Sauer Park",location:{latitude:40.7281595,longitude:-73.9797195},taxizone:"79",busi:.75,poll:.45},{id:109330342,name:"James Madison Plaza",location:{latitude:40.7114325,longitude:-74.0003718},taxizone:"45",busi:.78,poll:.82},{id:109441961,name:"Titanic Memorial Park",location:{latitude:40.7075392,longitude:-74.0036904},taxizone:"209",busi:.42,poll:.37},{id:109447376,name:"Louise Nevelson Plaza",location:{latitude:40.7076565,longitude:-74.0079164},taxizone:"87",busi:.13,poll:.11},{id:111563947,name:"Peretz Square",location:{latitude:40.7229342,longitude:-73.9878534},taxizone:"79",busi:.37,poll:.98},{id:112692313,name:"Bowling Green",location:{latitude:40.7050354,longitude:-74.0136629},taxizone:"261",busi:.66,poll:.51},{id:113690621,name:"Marsh & McLennan Public Space",location:{latitude:40.75669,longitude:-73.9815898},taxizone:"161",busi:.97,poll:.47},{id:113723738,name:"Straus Park",location:{latitude:40.8018962,longitude:-73.9682115},taxizone:"24",busi:.96,poll:.1},{id:117994215,name:"Samuel N. Bennerson 2nd Playground",location:{latitude:40.7738043,longitude:-73.9869758},taxizone:"143",busi:.46,poll:.63},{id:117994217,name:"Damrosch Park",location:{latitude:40.7723209,longitude:-73.9850051},taxizone:"142",busi:.28,poll:.21},{id:118116798,name:"Pier 84",location:{latitude:40.7637561,longitude:-74.0013936},taxizone:"50",busi:.4,poll:.83},{id:118116802,name:"Unknown Park",location:{latitude:40.7746717,longitude:-73.9889625},taxizone:"143",busi:.45,poll:.51},{id:118505053,name:"Clinton Cove",location:{latitude:40.7706616,longitude:-73.9954545},taxizone:"50",busi:.33,poll:.61},{id:118524658,name:"Johnny Hartman Plaza",location:{latitude:40.8241497,longitude:-73.9486126},taxizone:"116",busi:.79,poll:.59},{id:118524659,name:"Courtney Callender Playground",location:{latitude:40.8100335,longitude:-73.9400997},taxizone:"42",busi:.9,poll:.82},{id:118524660,name:"Alice Kornegay Triangle",location:{latitude:40.8064189,longitude:-73.9353004},taxizone:"74",busi:.48,poll:.01},{id:118524662,name:"Colonel Charles Young Triangle",location:{latitude:40.8272244,longitude:-73.9358637},taxizone:"42",busi:.02,poll:.8},{id:118524664,name:"Renaissance Playground",location:{latitude:40.8212878,longitude:-73.9413653},taxizone:"42",busi:.38,poll:.87},{id:118524667,name:"Harlem Lane Playground",location:{latitude:40.8259868,longitude:-73.9349482},taxizone:"42",busi:.71,poll:.18},{id:118524668,name:"Howard Bennett Playground",location:{latitude:40.8136382,longitude:-73.9386348},taxizone:"42",busi:.46,poll:.51},{id:118524669,name:"Moore Playground",location:{latitude:40.8094037,longitude:-73.938501},taxizone:"42",busi:.25,poll:.98},{id:118524671,name:"Colonel Charles Young Playground",location:{latitude:40.8191237,longitude:-73.935624},taxizone:"42",busi:.94,poll:.11},{id:118524675,name:"Riverside Park",location:{latitude:40.8290212,longitude:-73.953451},taxizone:"116",busi:.9,poll:.31},{id:118524677,name:"Frederick Johnson Park",location:{latitude:40.8247169,longitude:-73.9355292},taxizone:"42",busi:.05,poll:.12},{id:118524678,name:"Abraham Lincoln Playground",location:{latitude:40.812198,longitude:-73.9371517},taxizone:"74",busi:.71,poll:.07},{id:118524689,name:"Holcombe Rucker Park",location:{latitude:40.829198,longitude:-73.9361184},taxizone:"42",busi:.46,poll:.23},{id:118524694,name:"Riverbank State Park",location:{latitude:40.8254269,longitude:-73.9565197},taxizone:"116",busi:.4,poll:.85},{id:118524697,name:"Crack Is Wack Playground",location:{latitude:40.8044855,longitude:-73.9317785},taxizone:"74",busi:.73,poll:.12},{id:118524700,name:"Harlem River Park",location:{latitude:40.8059758,longitude:-73.9336626},taxizone:"74",busi:.89,poll:.44},{id:118524701,name:"Bradhurst Urban Renewal Park",location:{latitude:40.8226795,longitude:-73.9400884},taxizone:"42",busi:.91,poll:.9},{id:118524706,name:"Convent Garden",location:{latitude:40.828365,longitude:-73.9427004},taxizone:"116",busi:.3,poll:.42},{id:118528233,name:"Sakura Park",location:{latitude:40.8130779,longitude:-73.962112},taxizone:"166",busi:.58,poll:.44},{id:118528235,name:"West Harlem Piers Park",location:{latitude:40.8191647,longitude:-73.9611293},taxizone:"166",busi:.88,poll:.26},{id:118528587,name:"Unknown Park",location:{latitude:40.7972777,longitude:-73.9768346},taxizone:"238",busi:.55,poll:.17},{id:118529212,name:"Inwood Hill Park",location:{latitude:40.8722547,longitude:-73.9253479},taxizone:"128",busi:.44,poll:.34},{id:124814434,name:"Bogardus Plaza",location:{latitude:40.7159015,longitude:-74.0092316},taxizone:"231",busi:.77,poll:.52},{id:129700421,name:"Wagner Park",location:{latitude:40.705538,longitude:-74.0183661},taxizone:"13",busi:.46,poll:.6},{id:129700423,name:"South Cove Park",location:{latitude:40.7073325,longitude:-74.0184369},taxizone:"13",busi:.63,poll:.26},{id:129700430,name:"The Esplanade",location:{latitude:40.711556,longitude:-74.0171986},taxizone:"13",busi:.48,poll:.65},{id:144333814,name:"Joseph Slifka Park",location:{latitude:40.743948,longitude:-73.9729184},taxizone:"233",busi:.29,poll:.85},{id:147035202,name:"Duane Park",location:{latitude:40.7171562,longitude:-74.0094215},taxizone:"231",busi:.64,poll:.59},{id:147475917,name:"Hamilton Fish Park",location:{latitude:40.7197929,longitude:-73.9808332},taxizone:"232",busi:.13,poll:.59},{id:154416663,name:"Dante Park",location:{latitude:40.77192,longitude:-73.9825711},taxizone:"142",busi:.58,poll:.71},{id:154416666,name:"Richard Tucker Square",location:{latitude:40.7734422,longitude:-73.9818886},taxizone:"142",busi:.35,poll:.56},{id:159028631,name:"Channel Gardens",location:{latitude:40.758446,longitude:-73.9779564},taxizone:"161",busi:.12,poll:.24},{id:160903868,name:"McKinley Playground",location:{latitude:40.7242531,longitude:-73.9857747},taxizone:"79",busi:.89,poll:.31},{id:161768219,name:"Hudson River Park",location:{latitude:40.7194932,longitude:-74.0144394},taxizone:"79",busi:.29,poll:.19},{id:169483357,name:"Unknown Park",location:{latitude:40.7572689,longitude:-73.9947724},taxizone:"48",busi:.88,poll:.12},{id:171562481,name:"Father Demo Square",location:{latitude:40.7302244,longitude:-74.0021376},taxizone:"249",busi:.89,poll:.2},{id:171805412,name:"Luther Gulick Playground",location:{latitude:40.7158754,longitude:-73.9818757},taxizone:"232",busi:.19,poll:.2},{id:171815618,name:"Pier 35 Park",location:{latitude:40.7095904,longitude:-73.9884481},taxizone:"232",busi:.03,poll:.66},{id:177068788,name:"Laurie M. Tisch Illumination Lawn",location:{latitude:40.7733857,longitude:-73.9835496},taxizone:"142",busi:.34,poll:.3},{id:178575123,name:"Riverside Park",location:{latitude:40.8068603,longitude:-73.9680684},taxizone:"166",busi:.62,poll:.07},{id:194212578,name:"Tecumseh Playground",location:{latitude:40.7818184,longitude:-73.9785715},taxizone:"239",busi:.35,poll:.53},{id:197064614,name:"James J Walker Park",location:{latitude:40.7298088,longitude:-74.0061054},taxizone:"249",busi:.22,poll:.05},{id:197066133,name:"Pier 45",location:{latitude:40.7331785,longitude:-74.0124101},taxizone:"158",busi:.71,poll:.07},{id:199925533,name:"Marcus Garvey Memorial Park",location:{latitude:40.8044864,longitude:-73.9436727},taxizone:"74",busi:.92,poll:.35},{id:201158183,name:"Irish Hunger Memorial",location:{latitude:40.7151544,longitude:-74.0165528},taxizone:"13",busi:.05,poll:.84},{id:208360494,name:"The Queen Elizabeth II September 11th Garden",location:{latitude:40.704797,longitude:-74.0093346},taxizone:"87",busi:.48,poll:.54},{id:217722093,name:"J. Hood Wright Park",location:{latitude:40.8464722,longitude:-73.941255},taxizone:"244",busi:.57,poll:.04},{id:218327131,name:"Verizon Plaza",location:{latitude:40.7548157,longitude:-73.9851583},taxizone:"100",busi:.71,poll:.38},{id:219612698,name:"Finn Square",location:{latitude:40.7186426,longitude:-74.0068689},taxizone:"231",busi:.68,poll:.86},{id:221922459,name:"Chelsea Waterside Park",location:{latitude:40.7511887,longitude:-74.0093436},taxizone:"231",busi:.29,poll:.32},{id:221922480,name:"Riverside Park South",location:{latitude:40.7772231,longitude:-73.9905567},taxizone:"143",busi:.38,poll:.99},{id:224028029,name:"132nd Street Block Association Park",location:{latitude:40.8123187,longitude:-73.943153},taxizone:"42",busi:.07,poll:.44},{id:224029303,name:"Rev. Linnette C Williamson Memorial Park",location:{latitude:40.8094612,longitude:-73.9429209},taxizone:"42",busi:.71,poll:.33},{id:224031776,name:"Collyer Brothers Park",location:{latitude:40.8085313,longitude:-73.9410487},taxizone:"42",busi:.95,poll:.26},{id:224034804,name:"A Philip Randolph Square",location:{latitude:40.8038286,longitude:-73.952422},taxizone:"41",busi:.24,poll:.68},{id:225132539,name:"Dr. Ronald E. McNair Playground",location:{latitude:40.8025387,longitude:-73.9381332},taxizone:"74",busi:.92,poll:.7},{id:225134048,name:"Dream Street Park",location:{latitude:40.8027407,longitude:-73.9350402},taxizone:"74",busi:.7,poll:.93},{id:225134049,name:"Harlem Art Park",location:{latitude:40.8010442,longitude:-73.9388073},taxizone:"74",busi:.53,poll:.91},{id:225135028,name:"Mayor Wagner Pool",location:{latitude:40.8016837,longitude:-73.9325907},taxizone:"74",busi:.05,poll:.67},{id:225143097,name:"Martin Luther King Playground",location:{latitude:40.8002087,longitude:-73.9503857},taxizone:"41",busi:.03,poll:.85},{id:225159200,name:"Hancock Park",location:{latitude:40.8095436,longitude:-73.9532979},taxizone:"41",busi:.27,poll:.66},{id:225171034,name:"Peter Minuit Playground",location:{latitude:40.7947722,longitude:-73.9472299},taxizone:"75",busi:.11,poll:.96},{id:225173496,name:"Unknown Park",location:{latitude:40.8063252,longitude:-73.9344249},taxizone:"74",busi:.89,poll:.95},{id:225173571,name:"Unknown Park",location:{latitude:40.8078192,longitude:-73.9346167},taxizone:"74",busi:0,poll:.13},{id:225173572,name:"Unknown Park",location:{latitude:40.8069688,longitude:-73.9353248},taxizone:"74",busi:.89,poll:.25},{id:225173799,name:"Each One Teach One",location:{latitude:40.8071736,longitude:-73.9345657},taxizone:"74",busi:.28,poll:.19},{id:225188061,name:"Mae Grant Playground",location:{latitude:40.7924257,longitude:-73.9494365},taxizone:"75",busi:.13,poll:.44},{id:225188879,name:"Sunshine Playground",location:{latitude:40.7884898,longitude:-73.9478109},taxizone:"75",busi:.17,poll:.41},{id:225188968,name:"Cherry Tree Park",location:{latitude:40.7872445,longitude:-73.9471949},taxizone:"75",busi:.54,poll:.18},{id:225189359,name:"White Playground",location:{latitude:40.7916462,longitude:-73.9458897},taxizone:"75",busi:.79,poll:.24},{id:225189391,name:"103rd Street Community Garden",location:{latitude:40.7909291,longitude:-73.9486547},taxizone:"75",busi:.68,poll:.43},{id:225189513,name:"Poor Richard's Playground",location:{latitude:40.7926185,longitude:-73.9426331},taxizone:"75",busi:.03,poll:.55},{id:225190178,name:"Marx Brothers Playground",location:{latitude:40.7842492,longitude:-73.9459882},taxizone:"75",busi:.83,poll:.16},{id:225190195,name:"Stanley Isaacs Courts",location:{latitude:40.7834698,longitude:-73.9441011},taxizone:"75",busi:.76,poll:.33},{id:225190397,name:"Unknown Park",location:{latitude:40.7853549,longitude:-73.9427366},taxizone:"75",busi:.44,poll:.61},{id:225190636,name:"Playground 103",location:{latitude:40.7869524,longitude:-73.9390245},taxizone:"75",busi:.33,poll:.38},{id:225190643,name:"Unknown Park",location:{latitude:40.7893497,longitude:-73.9382443},taxizone:"75",busi:.8,poll:.83},{id:225191605,name:"Harlem River Drive Park",location:{latitude:40.8148592,longitude:-73.9343099},taxizone:"74",busi:.04,poll:0},{id:225336126,name:"Randalls Island Park",location:{latitude:40.7938563,longitude:-73.9217786},taxizone:"194",busi:.2,poll:.63},{id:226010200,name:"Jacob K. Javits Playground",location:{latitude:40.8589557,longitude:-73.9349368},taxizone:"243",busi:.89,poll:.68},{id:237054245,name:"Plaza de las Americas",location:{latitude:40.8460987,longitude:-73.9381037},taxizone:"244",busi:.46,poll:.03},{id:237393267,name:"Southpoint Park",location:{latitude:40.7523609,longitude:-73.9587446},taxizone:"202",busi:.34,poll:.49},{id:237397736,name:"Unknown Park",location:{latitude:40.7145611,longitude:-73.9910703},taxizone:"148",busi:.27,poll:.44},{id:239982768,name:"LentSpace",location:{latitude:40.7227168,longitude:-74.0057708},taxizone:"125",busi:.56,poll:.31},{id:239988106,name:"Spring Street Park",location:{latitude:40.724913,longitude:-74.0044414},taxizone:"125",busi:.17,poll:.94},{id:239988114,name:"Minetta Triangle",location:{latitude:40.7298853,longitude:-74.0018589},taxizone:"114",busi:.58,poll:.42},{id:239988118,name:"Father Fagan Park",location:{latitude:40.7267003,longitude:-74.0033094},taxizone:"125",busi:.06,poll:.98},{id:239988120,name:"Jefferson Market Garden",location:{latitude:40.7344325,longitude:-73.9995026},taxizone:"249",busi:.39,poll:.86},{id:241883186,name:"Unknown Park",location:{latitude:40.7954341,longitude:-73.9721055},taxizone:"238",busi:.13,poll:.77},{id:242113355,name:"Playground One",location:{latitude:40.7122529,longitude:-73.9974005},taxizone:"45",busi:.96,poll:.58},{id:244977216,name:"William E. Passannante Ballfield",location:{latitude:40.728579,longitude:-74.0022425},taxizone:"114",busi:.86,poll:.49},{id:244978444,name:"Winston Churchill Square",location:{latitude:40.7298571,longitude:-74.0024499},taxizone:"249",busi:.57,poll:.92},{id:246964616,name:"Booker T Washington Playground",location:{latitude:40.8009598,longitude:-73.9637796},taxizone:"24",busi:.17,poll:.17},{id:249665058,name:"Playground of the Americas",location:{latitude:40.728006,longitude:-74.0026728},taxizone:"125",busi:.66,poll:.83},{id:250049345,name:"Unknown Park",location:{latitude:40.7195161,longitude:-74.0109504},taxizone:"231",busi:.56,poll:.5},{id:250051493,name:"Unknown Park",location:{latitude:40.7178178,longitude:-74.0112569},taxizone:"231",busi:.24,poll:.41},{id:250265505,name:"Hartman Triangle",location:{latitude:40.7207559,longitude:-73.9806992},taxizone:"4",busi:.03,poll:.56},{id:252823151,name:"Straus Square",location:{latitude:40.7142374,longitude:-73.9899111},taxizone:"232",busi:.41,poll:.27},{id:254594895,name:"Audubon Playground",location:{latitude:40.8416095,longitude:-73.9381178},taxizone:"244",busi:.98,poll:.04},{id:257389723,name:"Twentyfour Sycamores Park",location:{latitude:40.7594475,longitude:-73.9586677},taxizone:"140",busi:.69,poll:.81},{id:257671578,name:"Penn South Playground",location:{latitude:40.7474929,longitude:-73.9987079},taxizone:"68",busi:.71,poll:.63},{id:264003876,name:"Paley Park",location:{latitude:40.7603437,longitude:-73.9750748},taxizone:"161",busi:.01,poll:.61},{id:264851981,name:"Big Screen Plaza1",location:{latitude:40.7472248,longitude:-73.990373},taxizone:"186",busi:.63,poll:.95},{id:266077859,name:"Hells Kitchen Park",location:{latitude:40.7629731,longitude:-73.9925633},taxizone:"48",busi:.69,poll:.73},{id:266097823,name:"Matthews-Palmer Playground",location:{latitude:40.7613978,longitude:-73.9927341},taxizone:"48",busi:.35,poll:.8},{id:266113539,name:"Ramone Aponte Park",location:{latitude:40.7614489,longitude:-73.9893455},taxizone:"48",busi:.33,poll:.38},{id:270791455,name:"Freeman Plaza West",location:{latitude:40.7242344,longitude:-74.0074749},taxizone:"125",busi:.52,poll:.32},{id:281499420,name:"Lower East Side Playground",location:{latitude:40.7293823,longitude:-73.9829156},taxizone:"79",busi:.65,poll:.93},{id:287462475,name:"Bellevue South Park",location:{latitude:40.7400387,longitude:-73.9780496},taxizone:"137",busi:.12,poll:.85},{id:292727035,name:"Unknown Park",location:{latitude:40.7111594,longitude:-74.0058691},taxizone:"209",busi:.55,poll:.33},{id:293720019,name:"Balsley Park",location:{latitude:40.7674642,longitude:-73.9856951},taxizone:"48",busi:.45,poll:.98},{id:295969929,name:"St. Catherine's Park",location:{latitude:40.7652136,longitude:-73.9587494},taxizone:"141",busi:.67,poll:.87},{id:304129981,name:"Unknown Park",location:{latitude:40.7141821,longitude:-73.9851165},taxizone:"232",busi:.15,poll:.2},{id:317355661,name:"Henry M. Jackson Playground",location:{latitude:40.7139646,longitude:-73.981496},taxizone:"232",busi:.99,poll:.98},{id:318328998,name:"Unknown Park",location:{latitude:40.8005903,longitude:-73.9581806},taxizone:"41",busi:.99,poll:.16},{id:318329003,name:"Roosevelt Triangle",location:{latitude:40.8113293,longitude:-73.9544008},taxizone:"166",busi:.02,poll:.45},{id:319615856,name:"Unknown Park",location:{latitude:40.7601079,longitude:-73.9505807},taxizone:"202",busi:.82,poll:.44},{id:321905068,name:"Riverwalk Commons",location:{latitude:40.7589617,longitude:-73.9528666},taxizone:"202",busi:.42,poll:.36},{id:324750157,name:"First Park",location:{latitude:40.7234173,longitude:-73.9892626},taxizone:"79",busi:.85,poll:.58},{id:324975287,name:"Unknown Park",location:{latitude:40.714787,longitude:-74.001878},taxizone:"45",busi:.52,poll:.53},{id:324975291,name:"Canal Park",location:{latitude:40.7254013,longitude:-74.0105312},taxizone:"231",busi:.42,poll:.88},{id:325008929,name:"Alfred E. Smith Playground",location:{latitude:40.710613,longitude:-73.9974893},taxizone:"45",busi:.94,poll:.51},{id:325008930,name:"Tanahey Playground",location:{latitude:40.7101263,longitude:-73.9953543},taxizone:"45",busi:.05,poll:.22},{id:328238569,name:"Unknown Park",location:{latitude:40.7072737,longitude:-74.0006237},taxizone:"209",busi:.27,poll:.75},{id:329041506,name:"Freeman Plaza East",location:{latitude:40.7240917,longitude:-74.0065116},taxizone:"125",busi:.3,poll:.13},{id:329041537,name:"Freeman Plaza North",location:{latitude:40.7243541,longitude:-74.0065666},taxizone:"125",busi:.09,poll:.44},{id:329988114,name:"Verdi Square",location:{latitude:40.7791313,longitude:-73.9816274},taxizone:"143",busi:.05,poll:.87},{id:334715965,name:"Poses Park",location:{latitude:40.7674465,longitude:-73.9635001},taxizone:"237",busi:.48,poll:.54},{id:343765233,name:"Peter Detmold Park",location:{latitude:40.7536627,longitude:-73.9635157},taxizone:"229",busi:.9,poll:.5},{id:351201923,name:"Tramway Plaza",location:{latitude:40.7609599,longitude:-73.9644278},taxizone:"141",busi:.99,poll:.55},{id:353000933,name:"Ruppert Park",location:{latitude:40.7809662,longitude:-73.9501489},taxizone:"263",busi:.96,poll:.88},{id:353133685,name:"Park Avenue Malls",location:{latitude:40.7869307,longitude:-73.9522659},taxizone:"75",busi:.08,poll:.36},{id:357523569,name:"Unknown Park",location:{latitude:40.8339778,longitude:-73.9452121},taxizone:"244",busi:.03,poll:.13},{id:362684406,name:"Unknown Park",location:{latitude:40.8033166,longitude:-73.954381},taxizone:"41",busi:.86,poll:.81},{id:362826160,name:"Harlem Valley Garden",location:{latitude:40.8145685,longitude:-73.9435785},taxizone:"42",busi:.94,poll:.53},{id:362827398,name:"Mandela Garden",location:{latitude:40.8107974,longitude:-73.9499718},taxizone:"42",busi:.86,poll:.45},{id:371120098,name:"Chealsea Green",location:{latitude:40.7415933,longitude:-73.9960607},taxizone:"90",busi:.49,poll:.71},{id:372721441,name:"Teardrop Park",location:{latitude:40.7167736,longitude:-74.0156166},taxizone:"13",busi:.37,poll:.27},{id:375369088,name:"Unknown Park",location:{latitude:40.7090264,longitude:-74.0080705},taxizone:"87",busi:.26,poll:.07},{id:375369089,name:"Unknown Park",location:{latitude:40.7091468,longitude:-74.0082314},taxizone:"87",busi:.17,poll:.78},{id:376015439,name:"CU SIPA Commons",location:{latitude:40.807298,longitude:-73.9599478},taxizone:"166",busi:.36,poll:.55},{id:376015442,name:"CU SE Field",location:{latitude:40.806367,longitude:-73.9623446},taxizone:"166",busi:.48,poll:.38},{id:378359193,name:"Vincent F. Albano Jr. Playground",location:{latitude:40.7419438,longitude:-73.9783848},taxizone:"137",busi:.3,poll:.47},{id:378364365,name:"Peter's Field",location:{latitude:40.7361158,longitude:-73.9815688},taxizone:"107",busi:.38,poll:.14},{id:379634622,name:"Unknown Park",location:{latitude:40.736497,longitude:-74.0103959},taxizone:"158",busi:.08,poll:.7},{id:379634625,name:"Unknown Park",location:{latitude:40.7346149,longitude:-74.0105573},taxizone:"158",busi:.2,poll:.27},{id:379657566,name:"Unknown Park",location:{latitude:40.7526667,longitude:-73.9704924},taxizone:"233",busi:.63,poll:.18},{id:379747570,name:"Unknown Park",location:{latitude:40.7515363,longitude:-73.9697087},taxizone:"233",busi:0,poll:.55},{id:379749111,name:"Unknown Park",location:{latitude:40.7535038,longitude:-73.9704538},taxizone:"233",busi:.93,poll:.51},{id:379758354,name:"Unknown Park",location:{latitude:40.7495206,longitude:-73.9760712},taxizone:"170",busi:.26,poll:.04},{id:380425199,name:"Unknown Park",location:{latitude:40.7516246,longitude:-73.9730606},taxizone:"233",busi:.05,poll:.93},{id:385106972,name:"Ralph Bunche Park",location:{latitude:40.7493256,longitude:-73.969745},taxizone:"233",busi:.91,poll:.19},{id:395678163,name:"Unknown Park",location:{latitude:40.7445517,longitude:-73.9862513},taxizone:"164",busi:.94,poll:.06},{id:400780940,name:"Teardrop Park South",location:{latitude:40.7157927,longitude:-74.0160302},taxizone:"13",busi:.06,poll:.81},{id:400782867,name:"Unknown Park",location:{latitude:40.714576,longitude:-74.0139461},taxizone:"13",busi:.22,poll:.59},{id:400782868,name:"Unknown Park",location:{latitude:40.7063887,longitude:-74.0165613},taxizone:"13",busi:.96,poll:.56},{id:400782869,name:"Vesey Green",location:{latitude:40.7149552,longitude:-74.0166948},taxizone:"13",busi:.05,poll:.78},{id:400782871,name:"Unknown Park",location:{latitude:40.71596,longitude:-74.0135378},taxizone:"13",busi:.31,poll:.56},{id:400782872,name:"West Thames Park",location:{latitude:40.7088371,longitude:-74.0157564},taxizone:"13",busi:.93,poll:.73},{id:410310399,name:"Coleman Playground",location:{latitude:40.7111652,longitude:-73.9933311},taxizone:"45",busi:.09,poll:.73},{id:413055246,name:"City Hall Park",location:{latitude:40.7128841,longitude:-74.0060845},taxizone:"231",busi:.06,poll:.35},{id:427818536,name:"Central Park",location:{latitude:40.7825293,longitude:-73.9655068},taxizone:"43",busi:.15,poll:.7},{id:440055119,name:"Minetta Green",location:{latitude:40.7303446,longitude:-74.0016029},taxizone:"114",busi:.91,poll:.34},{id:440055120,name:"West Fourth Street Courts",location:{latitude:40.7312486,longitude:-74.0009604},taxizone:"114",busi:.72,poll:.35},{id:449139914,name:"Urban Park",location:{latitude:40.7235239,longitude:-74.0034678},taxizone:"211",busi:.63,poll:.57},{id:453456965,name:"Unknown Park",location:{latitude:40.7157919,longitude:-74.006181},taxizone:"231",busi:.39,poll:.7},{id:453461400,name:"Elizabeth Street Garden",location:{latitude:40.7221953,longitude:-73.9947837},taxizone:"144",busi:.09,poll:.14},{id:453528989,name:"Dry Dock Playground",location:{latitude:40.7254397,longitude:-73.9754832},taxizone:"4",busi:.4,poll:.77},{id:455314804,name:"Trygve Lie Plaza",location:{latitude:40.7484918,longitude:-73.9704129},taxizone:"233",busi:.73,poll:.89},{id:458511171,name:"Unknown Park",location:{latitude:40.7603632,longitude:-73.9823986},taxizone:"230",busi:.32,poll:.24},{id:458642434,name:"Unknown Park",location:{latitude:40.7647609,longitude:-73.9828725},taxizone:"163",busi:.19,poll:.69},{id:458642435,name:"Unknown Park",location:{latitude:40.7661451,longitude:-73.9830132},taxizone:"163",busi:.02,poll:.22},{id:462302471,name:"Manuel Plaza",location:{latitude:40.7276683,longitude:-73.9921173},taxizone:"113",busi:.35,poll:.74},{id:468472672,name:"Unknown Park",location:{latitude:40.7610842,longitude:-73.9783735},taxizone:"161",busi:.17,poll:.82},{id:468485719,name:"Unknown Park",location:{latitude:40.7305654,longitude:-73.9748081},taxizone:"224",busi:.71,poll:.04},{id:468548548,name:"West 111th Street People's Garden",location:{latitude:40.803897,longitude:-73.9635414},taxizone:"166",busi:.96,poll:.96},{id:468555499,name:"Unknown Park",location:{latitude:40.81501,longitude:-73.9622763},taxizone:"166",busi:.8,poll:.61},{id:468591558,name:"West 104th Street Garden",location:{latitude:40.7968848,longitude:-73.9619463},taxizone:"151",busi:.12,poll:.16},{id:469101347,name:"Tenzer Garden",location:{latitude:40.8498324,longitude:-73.9291411},taxizone:"243",busi:.51,poll:.13},{id:469101348,name:"Danciger Quadrangle",location:{latitude:40.850316,longitude:-73.928956},taxizone:"243",busi:.22,poll:.55},{id:471549306,name:"NYC AIDS Memorial Park at St. Vincent's Triangle",location:{latitude:40.7371836,longitude:-74.0011967},taxizone:"249",busi:.38,poll:.79},{id:473565702,name:"Rapkin-Gayle Plaza",location:{latitude:40.7204001,longitude:-73.9991398},taxizone:"144",busi:.4,poll:.54},{id:474169900,name:"Lieutenant William Tighe Triangle",location:{latitude:40.8658571,longitude:-73.9279994},taxizone:"243",busi:.3,poll:.85},{id:474173970,name:"Sherman Creek",location:{latitude:40.8608411,longitude:-73.9182038},taxizone:"127",busi:.36,poll:.43},{id:474175699,name:"Unknown Park",location:{latitude:40.8601542,longitude:-73.9185091},taxizone:"127",busi:.6,poll:.33},{id:474199302,name:"Monsignor Kett Playground",location:{latitude:40.8625304,longitude:-73.9209396},taxizone:"127",busi:.46,poll:.6},{id:476650290,name:"Unknown Park",location:{latitude:40.8379833,longitude:-73.9459572},taxizone:"244",busi:.35,poll:.15},{id:479358564,name:"Rooftop Park",location:{latitude:40.7576241,longitude:-73.9686533},taxizone:"229",busi:.86,poll:.85},{id:480966277,name:"148th Street Block Association Park",location:{latitude:40.8243789,longitude:-73.9389915},taxizone:"42",busi:.41,poll:.46},{id:483509921,name:"Poinsettia Community Garden",location:{latitude:40.808972,longitude:-73.9588785},taxizone:"166",busi:.04,poll:.76},{id:483509926,name:"Ruggles Commons",location:{latitude:40.8056356,longitude:-73.9628429},taxizone:"166",busi:.1,poll:.04},{id:483702983,name:"Augustus Saint-Gaudens Playground",location:{latitude:40.7355499,longitude:-73.9821423},taxizone:"107",busi:.29,poll:.31},{id:497484756,name:"Albert Capsouto Park",location:{latitude:40.7220549,longitude:-74.0059139},taxizone:"231",busi:.4,poll:.97},{id:498671779,name:"Drumgoole Plaza",location:{latitude:40.7110399,longitude:-74.0041141},taxizone:"209",busi:.61,poll:.57},{id:504045549,name:"Unknown Park",location:{latitude:40.7072581,longitude:-74.0083037},taxizone:"87",busi:.22,poll:.87},{id:531272222,name:"CS Garden",location:{latitude:40.8091383,longitude:-73.9599533},taxizone:"166",busi:.06,poll:.04},{id:531580782,name:"Robert Moses Playground",location:{latitude:40.7481156,longitude:-73.9692894},taxizone:"233",busi:.22,poll:.33},{id:538080002,name:"Elizabeth H. Berger Plaza",location:{latitude:40.7066764,longitude:-74.0140208},taxizone:"261",busi:.11,poll:.99},{id:539005582,name:"Unknown Park",location:{latitude:40.7156052,longitude:-74.0150931},taxizone:"13",busi:.15,poll:.98},{id:544675664,name:"Mitchell Park",location:{latitude:40.8401868,longitude:-73.9400483},taxizone:"244",busi:.42,poll:.59},{id:580123906,name:"Mulry Square",location:{latitude:40.7362506,longitude:-74.0010873},taxizone:"249",busi:.16,poll:.45},{id:581666857,name:"Jane Street Garden",location:{latitude:40.738004,longitude:-74.0045481},taxizone:"249",busi:.61,poll:.36},{id:585788256,name:"Central Park Carousel",location:{latitude:40.7699426,longitude:-73.9752476},taxizone:"43",busi:.3,poll:.89},{id:588483880,name:"Unknown Park",location:{latitude:40.8446978,longitude:-73.9329917},taxizone:"120",busi:.7,poll:.89},{id:613509792,name:"Tribeca Park",location:{latitude:40.7202027,longitude:-74.0056402},taxizone:"231",busi:.52,poll:.68},{id:664153164,name:'Bill "Bojangles" Robinson Playground',location:{latitude:40.8252699,longitude:-73.9372963},taxizone:"42",busi:.38,poll:.12},{id:664153165,name:"LaGuardia Corner Garden",location:{latitude:40.7279235,longitude:-73.9988616},taxizone:"114",busi:.06,poll:.76},{id:664697032,name:"Monterey Public Garden",location:{latitude:40.785788,longitude:-73.949994},taxizone:"75",busi:.47,poll:.51},{id:672251427,name:"Abe Lebewohl Park",location:{latitude:40.7300001,longitude:-73.9870591},taxizone:"79",busi:.28,poll:.24},{id:675913161,name:"Unknown Park",location:{latitude:40.7123128,longitude:-73.9916567},taxizone:"232",busi:.25,poll:.91},{id:675935774,name:"Unknown Park",location:{latitude:40.7147518,longitude:-73.9926339},taxizone:"148",busi:.95,poll:.56},{id:675935775,name:"Unknown Park",location:{latitude:40.7187024,longitude:-73.9906477},taxizone:"148",busi:.9,poll:.54},{id:675935776,name:"Unknown Park",location:{latitude:40.7178532,longitude:-73.9910848},taxizone:"148",busi:.6,poll:.24},{id:675935777,name:"Unknown Park",location:{latitude:40.7167999,longitude:-73.9916173},taxizone:"148",busi:.05,poll:.19},{id:675935778,name:"Unknown Park",location:{latitude:40.715654,longitude:-73.9922088},taxizone:"148",busi:.88,poll:.71},{id:675935779,name:"Unknown Park",location:{latitude:40.7113496,longitude:-73.9922318},taxizone:"45",busi:.25,poll:.1},{id:675935780,name:"Unknown Park",location:{latitude:40.7120492,longitude:-73.9923541},taxizone:"45",busi:.41,poll:.85},{id:675937259,name:"Unknown Park",location:{latitude:40.7142311,longitude:-73.9970905},taxizone:"148",busi:.64,poll:.13},{id:675962287,name:"Sophie Irene Loeb Playground",location:{latitude:40.7133595,longitude:-73.9943004},taxizone:"45",busi:.02,poll:1},{id:684670439,name:"Unknown Park",location:{latitude:40.7426586,longitude:-73.9756162},taxizone:"137",busi:.16,poll:.87},{id:687661469,name:"First Street Green Cultural Park",location:{latitude:40.723751,longitude:-73.9903251},taxizone:"79",busi:.18,poll:.38},{id:702078581,name:"McMahon Lawn",location:{latitude:40.7713558,longitude:-73.9865241},taxizone:"142",busi:.91,poll:.03},{id:705304809,name:"30 Lincoln Plaza",location:{latitude:40.7707961,longitude:-73.9814012},taxizone:"142",busi:.8,poll:.33},{id:718438725,name:"Murphy Park",location:{latitude:40.7303687,longitude:-73.9734976},taxizone:"224",busi:1,poll:.7},{id:718471254,name:"Unknown Park",location:{latitude:40.7640426,longitude:-73.9544696},taxizone:"140",busi:.04,poll:.46},{id:727964618,name:"Lafayette Square",location:{latitude:40.8035524,longitude:-73.9580337},taxizone:"41",busi:.66,poll:.51},{id:743395860,name:"The Elevated Acre",location:{latitude:40.7032051,longitude:-74.0087006},taxizone:"88",busi:.13,poll:.61},{id:759460622,name:"Minerva Bernadino Green Street",location:{latitude:40.8028294,longitude:-73.9640762},taxizone:"24",busi:.94,poll:.11},{id:765274333,name:"Playground 11",location:{latitude:40.7310982,longitude:-73.9763847},taxizone:"224",busi:.26,poll:.59},{id:765274338,name:"Unknown Park",location:{latitude:40.7324171,longitude:-73.9792686},taxizone:"224",busi:.9,poll:.62},{id:769716502,name:"Hillman Park",location:{latitude:40.7151983,longitude:-73.982351},taxizone:"232",busi:.3,poll:.85},{id:769716504,name:"Sol Lain Playground",location:{latitude:40.7142341,longitude:-73.9838951},taxizone:"232",busi:.22,poll:.27},{id:793720073,name:"Unknown Park",location:{latitude:40.7444405,longitude:-73.9717305},taxizone:"233",busi:.92,poll:.62},{id:800212158,name:"Community Island Pond",location:{latitude:40.7025673,longitude:-74.0054799},taxizone:"87",busi:.2,poll:.84},{id:800212164,name:"Catherine Slip Malls",location:{latitude:40.7095081,longitude:-73.9961545},taxizone:"45",busi:0,poll:.99},{id:821278619,name:"Small Square",location:{latitude:40.8170021,longitude:-73.9588657},taxizone:"152",busi:.84,poll:.85},{id:833335529,name:"Little Island",location:{latitude:40.7420048,longitude:-74.0106097},taxizone:"152",busi:.21,poll:.48},{id:837603512,name:"Pier 26",location:{latitude:40.7212402,longitude:-74.0146496},taxizone:"152",busi:.5,poll:.29},{id:889019981,name:"Lighthouse Park",location:{latitude:40.7719982,longitude:-73.9409857},taxizone:"202",busi:.19,poll:.91},{id:889906332,name:"Unknown Park",location:{latitude:40.7575423,longitude:-73.9528616},taxizone:"202",busi:.08,poll:.56},{id:889906443,name:"Unknown Park",location:{latitude:40.7674104,longitude:-73.9451183},taxizone:"202",busi:.48,poll:.26},{id:890862707,name:"Unknown Park",location:{latitude:40.7127252,longitude:-73.9985494},taxizone:"45",busi:.58,poll:.47},{id:890862858,name:"Fishbridge Garden",location:{latitude:40.7090589,longitude:-74.0013302},taxizone:"209",busi:.31,poll:.54},{id:890862859,name:"Pearl Street Playground",location:{latitude:40.7079571,longitude:-74.003871},taxizone:"209",busi:.51,poll:.23},{id:891074490,name:"Unknown Park",location:{latitude:40.7104212,longitude:-74.0058293},taxizone:"209",busi:.61,poll:.24},{id:891134387,name:"Unknown Park",location:{latitude:40.7165399,longitude:-74.0148155},taxizone:"13",busi:.6,poll:.38},{id:891134388,name:"Unknown Park",location:{latitude:40.7173682,longitude:-74.014168},taxizone:"13",busi:.99,poll:.71},{id:893841834,name:"Unknown Park",location:{latitude:40.7352313,longitude:-74.0017222},taxizone:"249",busi:.84,poll:.21},{id:893841889,name:"Washington Commons",location:{latitude:40.7384531,longitude:-74.0083015},taxizone:"158",busi:.3,poll:.78},{id:894035808,name:"Unknown Park",location:{latitude:40.7298816,longitude:-74.002776},taxizone:"249",busi:.47,poll:.16},{id:895611180,name:"West 87th Street Garden",location:{latitude:40.787094,longitude:-73.9709212},taxizone:"238",busi:.01,poll:.12},{id:895757747,name:"Joan of Arc Park",location:{latitude:40.7942118,longitude:-73.976389},taxizone:"238",busi:.75,poll:.88},{id:904714816,name:"Happy Warrior Playground",location:{latitude:40.7954197,longitude:-73.9684305},taxizone:"151",busi:.78,poll:.77},{id:918302837,name:"Unknown Park",location:{latitude:40.7777983,longitude:-73.9873252},taxizone:"143",busi:.76,poll:.4},{id:943557523,name:"Dorrence Brook Square",location:{latitude:40.8181963,longitude:-73.9472809},taxizone:"42",busi:.83,poll:.82},{id:954250916,name:"Dekovats Park",location:{latitude:40.7793517,longitude:-73.9442344},taxizone:"262",busi:.47,poll:.54},{id:954250919,name:"Samuel Marx Triangle",location:{latitude:40.802576,longitude:-73.9527698},taxizone:"41",busi:.69,poll:.57},{id:959894788,name:"Roger Morris Park",location:{latitude:40.8345035,longitude:-73.9385228},taxizone:"244",busi:.36,poll:.14},{id:959895071,name:"McKenna Square Park",location:{latitude:40.8383487,longitude:-73.9391569},taxizone:"244",busi:0,poll:.68},{id:964819132,name:"Seward Park Extension Park",location:{latitude:40.7171165,longitude:-73.9884804},taxizone:"148",busi:.54,poll:.96},{id:964822654,name:"Seward Park Extension Park",location:{latitude:40.7168088,longitude:-73.9848922},taxizone:"232",busi:.89,poll:.3},{id:973521995,name:"Ahearn Park",location:{latitude:40.7148041,longitude:-73.9834567},taxizone:"232",busi:.45,poll:.55},{id:976724943,name:"Unknown Park",location:{latitude:40.7294006,longitude:-73.9911035},taxizone:"113",busi:.77,poll:.17},{id:985281628,name:"Seward Park High School - Community Playground",location:{latitude:40.7158595,longitude:-73.9891313},taxizone:"232",busi:.84,poll:.9},{id:990936691,name:"Pier 42 Upland Park",location:{latitude:40.7102679,longitude:-73.9818413},taxizone:"232",busi:.94,poll:.16},{id:997819338,name:"Andrew Haswell Green Park",location:{latitude:40.7594825,longitude:-73.9575866},taxizone:"140",busi:.77,poll:.82},{id:1015980340,name:"Unknown Park",location:{latitude:40.7168628,longitude:-73.9867292},taxizone:"232",busi:.56,poll:.47},{id:1016487162,name:"Queensborough Oval",location:{latitude:40.7592353,longitude:-73.9600741},taxizone:"140",busi:.78,poll:.72},{id:1018935492,name:"Vladeck Park",location:{latitude:40.7123997,longitude:-73.9820519},taxizone:"232",busi:.57,poll:.16},{id:1021760821,name:"Unknown Park",location:{latitude:40.7562014,longitude:-74.0035176},taxizone:"246",busi:.37,poll:.15},{id:1023817153,name:"Pier 76",location:{latitude:40.7591506,longitude:-74.005364},taxizone:"246",busi:.22,poll:.91},{id:1025959315,name:"The Square",location:{latitude:40.8180211,longitude:-73.9589542},taxizone:"152",busi:.36,poll:.61},{id:1059903962,name:"Unknown Park",location:{latitude:40.7500032,longitude:-73.9756477},taxizone:"170",busi:.32,poll:.17},{id:1068258666,name:"Unknown Park",location:{latitude:40.7443685,longitude:-73.9781439},taxizone:"137",busi:.43,poll:.89},{id:1068603579,name:"Unknown Park",location:{latitude:40.7474521,longitude:-73.9837467},taxizone:"164",busi:.87,poll:.5},{id:1077518596,name:"Hester Street Park",location:{latitude:40.7154087,longitude:-73.9893119},taxizone:"232",busi:.61,poll:.23},{id:1082729243,name:"Saint Vartan Park",location:{latitude:40.7456086,longitude:-73.9748201},taxizone:"170",busi:.6,poll:.85},{id:1083911850,name:"Unknown Park",location:{latitude:40.7231734,longitude:-73.987557},taxizone:"79",busi:.53,poll:.95},{id:1087523912,name:"Unknown Park",location:{latitude:40.7408339,longitude:-73.9794828},taxizone:"137",busi:.92,poll:.09},{id:1090764362,name:"Unknown Park",location:{latitude:40.7801006,longitude:-73.9524877},taxizone:"263",busi:.47,poll:.2},{id:1095508395,name:"Unknown Park",location:{latitude:40.8674781,longitude:-73.9228727},taxizone:"127",busi:.53,poll:.07},{id:1107165183,name:"Anibal Aviles Playground",location:{latitude:40.801159,longitude:-73.9627985},taxizone:"24",busi:.68,poll:.76},{id:1121582607,name:"Herald Square",location:{latitude:40.750256,longitude:-73.987625},taxizone:"100",busi:.02,poll:.86},{id:1121932385,name:"Greeley Square Park",location:{latitude:40.7487036,longitude:-73.9883472},taxizone:"164",busi:.53,poll:.65},{id:1127559545,name:"Peck Slip",location:{latitude:40.7078001,longitude:-74.0015491},taxizone:"209",busi:.86,poll:.8},{id:1127851294,name:"Imagination Playground",location:{latitude:40.7061989,longitude:-74.0040983},taxizone:"87",busi:.52,poll:.02},{id:1135559125,name:"Unknown Park",location:{latitude:40.8505811,longitude:-73.9407742},taxizone:"244",busi:.77,poll:.49},{id:1141662701,name:"Unknown Park",location:{latitude:40.7569158,longitude:-73.9662011},taxizone:"229",busi:.98,poll:.29},{id:1173199006,name:"Unknown Park",location:{latitude:40.7825984,longitude:-73.949957},taxizone:"263",busi:.21,poll:.81},{id:1173199007,name:"Unknown Park",location:{latitude:40.7826106,longitude:-73.9501576},taxizone:"263",busi:.89,poll:.5},{id:1183761752,name:"Clara Coffey Park",location:{latitude:40.755163,longitude:-73.9621444},taxizone:"229",busi:.31,poll:.22},{id:1183958467,name:"MacArthur Playground",location:{latitude:40.752273,longitude:-73.9651557},taxizone:"229",busi:.32,poll:.83},{id:1751075,name:"John Jay Park",location:{latitude:40.7692516,longitude:-73.9496384},taxizone:"140",busi:.63,poll:.59},{id:3690816,name:"Highbridge Park",location:{latitude:40.8460051,longitude:-73.9319502},taxizone:"120",busi:.69,poll:.45},{id:4099553,name:"Sara D. Roosevelt Park",location:{latitude:40.7196275,longitude:-73.9925973},taxizone:"148",busi:.27,poll:.91},{id:5625630,name:"Fort Tryon Park",location:{latitude:40.8619781,longitude:-73.9326365},taxizone:"243",busi:.63,poll:.81},{id:6802606,name:"Mannahatta Park",location:{latitude:40.7047834,longitude:-74.006686},taxizone:"87",busi:.23,poll:.82},{id:6992452,name:"Dag Hammarskjold Plaza",location:{latitude:40.7523203,longitude:-73.9688866},taxizone:"233",busi:.3,poll:.5},{id:7095444,name:"Union Square Park",location:{latitude:40.7358088,longitude:-73.9904565},taxizone:"234",busi:.16,poll:.92},{id:7095669,name:"Stuyvesant Square",location:{latitude:40.7336501,longitude:-73.9839997},taxizone:"107",busi:.73,poll:.83},{id:7109446,name:"Theodore Roosevelt Park",location:{latitude:40.7813637,longitude:-73.9740819},taxizone:"239",busi:.35,poll:.86},{id:7141751,name:"The High Line",location:{latitude:40.7479527,longitude:-74.0039779},taxizone:"246",busi:.43,poll:.17},{id:8176996,name:"Old Slip Park",location:{latitude:40.7038707,longitude:-74.0085649},taxizone:"87",busi:.62,poll:.91},{id:8456861,name:"Columbia University Well Garden",location:{latitude:40.8081586,longitude:-73.9607078},taxizone:"166",busi:.59,poll:.97},{id:9340888,name:"United Nations Garden",location:{latitude:40.7509687,longitude:-73.9664023},taxizone:"233",busi:.44,poll:.5},{id:9643461,name:"Nelson A. Rockefeller Park",location:{latitude:40.716889,longitude:-74.0152879},taxizone:"13",busi:.57,poll:.12},{id:10025591,name:"West 59th Street Recreation Center",location:{latitude:40.7712414,longitude:-73.988724},taxizone:"143",busi:.16,poll:.37},{id:10170445,name:"Low Plaza",location:{latitude:40.8076784,longitude:-73.9622466},taxizone:"166",busi:.16,poll:.18},{id:10571875,name:"Duke Ellington Circle",location:{latitude:40.7968563,longitude:-73.949257},taxizone:"43",busi:.13,poll:.34},{id:11037505,name:"Charles B. Benenson Grove",location:{latitude:40.7714021,longitude:-73.9835705},taxizone:"142",busi:.77,poll:.9},{id:11077079,name:"African Burial Ground National Monument",location:{latitude:40.7145261,longitude:-74.004464},taxizone:"231",busi:.47,poll:.89},{id:11225305,name:"Honey Locust Park",location:{latitude:40.7601599,longitude:-73.9628992},taxizone:"141",busi:.3,poll:.52},{id:13613032,name:"Thomas Paine Park",location:{latitude:40.714782,longitude:-74.0027707},taxizone:"231",busi:.48,poll:.53},{id:13678220,name:"Bella Abzug Park",location:{latitude:40.7558415,longitude:-74.0003803},taxizone:"246",busi:1,poll:.7},{id:14374901,name:"Sherman Creek",location:{latitude:40.8585719,longitude:-73.9216107},taxizone:"127",busi:.49,poll:.81},{id:14425097,name:"Saint Vartan Park",location:{latitude:40.7452795,longitude:-73.9740145},taxizone:"170",busi:.16,poll:.69},{id:15039698,name:"Silverstein Family Park",location:{latitude:40.7131852,longitude:-74.0114448},taxizone:"231",busi:.65,poll:.42},{id:15902634,name:"Brooklyn Banks",location:{latitude:40.7114732,longitude:-74.0027148},taxizone:"45",busi:.73,poll:.64},{id:16000824,name:"Sutton Parks",location:{latitude:40.7565069,longitude:-73.9605051},taxizone:"229",busi:.02,poll:.09}],LE={data:sO};function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},H.apply(this,arguments)}function tu(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function GI(e){if(!tu(e))return e;const t={};return Object.keys(e).forEach(o=>{t[o]=GI(e[o])}),t}function So(e,t,o={clone:!0}){const l=o.clone?H({},e):e;return tu(e)&&tu(t)&&Object.keys(t).forEach(h=>{h!=="__proto__"&&(tu(t[h])&&h in e&&tu(e[h])?l[h]=So(e[h],t[h],o):o.clone?l[h]=tu(t[h])?GI(t[h]):t[h]:l[h]=t[h])}),l}var HI={exports:{}},aO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lO=aO,cO=lO;function qI(){}function ZI(){}ZI.resetWarningCache=qI;var uO=function(){function e(l,h,p,_,a,w){if(w!==cO){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ZI,resetWarningCache:qI};return o.PropTypes=o,o};HI.exports=uO();var dO=HI.exports;const $e=tl(dO);function nc(e){let t="https://mui.com/production-error/?code="+e;for(let o=1;o<arguments.length;o+=1)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function tn(e){if(typeof e!="string")throw new Error(nc(7));return e.charAt(0).toUpperCase()+e.slice(1)}function OE(...e){return e.reduce((t,o)=>o==null?t:function(...h){t.apply(this,h),o.apply(this,h)},()=>{})}function ym(e,t=166){let o;function l(...h){const p=()=>{e.apply(this,h)};clearTimeout(o),o=setTimeout(p,t)}return l.clear=()=>{clearTimeout(o)},l}function Qy(e,t){return W.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function Ei(e){return e&&e.ownerDocument||document}function Ka(e){return Ei(e).defaultView||window}function L0(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const hO=typeof window<"u"?W.useLayoutEffect:W.useEffect,ki=hO;let BE=0;function pO(e){const[t,o]=W.useState(e),l=e||t;return W.useEffect(()=>{t==null&&(BE+=1,o(`mui-${BE}`))},[t]),l}const FE=Qf["useId".toString()];function wu(e){if(FE!==void 0){const t=FE();return e??t}return pO(e)}function Uo({controlled:e,default:t,name:o,state:l="value"}){const{current:h}=W.useRef(e!==void 0),[p,_]=W.useState(t),a=h?e:p,w=W.useCallback(C=>{h||_(C)},[]);return[a,w]}function mn(e){const t=W.useRef(e);return ki(()=>{t.current=e}),W.useCallback((...o)=>(0,t.current)(...o),[])}function Rr(...e){return W.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(o=>{L0(o,t)})},e)}let u_=!0,Pb=!1,$E;const fO={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function mO(e){const{type:t,tagName:o}=e;return!!(o==="INPUT"&&fO[t]&&!e.readOnly||o==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function gO(e){e.metaKey||e.altKey||e.ctrlKey||(u_=!0)}function m1(){u_=!1}function yO(){this.visibilityState==="hidden"&&Pb&&(u_=!0)}function _O(e){e.addEventListener("keydown",gO,!0),e.addEventListener("mousedown",m1,!0),e.addEventListener("pointerdown",m1,!0),e.addEventListener("touchstart",m1,!0),e.addEventListener("visibilitychange",yO,!0)}function vO(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return u_||mO(t)}function xO(){const e=W.useCallback(h=>{h!=null&&_O(h.ownerDocument)},[]),t=W.useRef(!1);function o(){return t.current?(Pb=!0,window.clearTimeout($E),$E=window.setTimeout(()=>{Pb=!1},100),t.current=!1,!0):!1}function l(h){return vO(h)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:l,onBlur:o,ref:e}}function XI(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let Cd;function YI(){if(Cd)return Cd;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),Cd="reverse",e.scrollLeft>0?Cd="default":(e.scrollLeft=1,e.scrollLeft===0&&(Cd="negative")),document.body.removeChild(e),Cd}function NE(e,t){const o=e.scrollLeft;if(t!=="rtl")return o;switch(YI()){case"negative":return e.scrollWidth-e.clientWidth+o;case"reverse":return e.scrollWidth-e.clientWidth-o;default:return o}}const bO=e=>{const t=W.useRef({});return W.useEffect(()=>{t.current=e}),t.current},wO=bO;function Ww(e,t){const o=H({},t);return Object.keys(e).forEach(l=>{if(l.toString().match(/^(components|slots)$/))o[l]=H({},e[l],o[l]);else if(l.toString().match(/^(componentsProps|slotProps)$/)){const h=e[l]||{},p=t[l];o[l]={},!p||!Object.keys(p)?o[l]=h:!h||!Object.keys(h)?o[l]=p:(o[l]=H({},p),Object.keys(h).forEach(_=>{o[l][_]=Ww(h[_],p[_])}))}else o[l]===void 0&&(o[l]=e[l])}),o}function xn(e,t,o=void 0){const l={};return Object.keys(e).forEach(h=>{l[h]=e[h].reduce((p,_)=>{if(_){const a=t(_);a!==""&&p.push(a),o&&o[_]&&p.push(o[_])}return p},[]).join(" ")}),l}const UE=e=>e,SO=()=>{let e=UE;return{configure(t){e=t},generate(t){return e(t)},reset(){e=UE}}},TO=SO(),KI=TO,CO={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Sn(e,t,o="Mui"){const l=CO[t];return l?`${o}-${l}`:`${KI.generate(e)}-${t}`}function _n(e,t,o="Mui"){const l={};return t.forEach(h=>{l[h]=Sn(e,h,o)}),l}function Bt(e,t){if(e==null)return{};var o={},l=Object.keys(e),h,p;for(p=0;p<l.length;p++)h=l[p],!(t.indexOf(h)>=0)&&(o[h]=e[h]);return o}function JI(e){var t,o,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=JI(e[t]))&&(l&&(l+=" "),l+=o);else for(t in e)e[t]&&(l&&(l+=" "),l+=t);return l}function Zt(){for(var e,t,o=0,l="";o<arguments.length;)(e=arguments[o++])&&(t=JI(e))&&(l&&(l+=" "),l+=t);return l}function gu(e){return typeof e=="string"}function EO(e,t,o){return e===void 0||gu(e)?t:H({},t,{ownerState:H({},t.ownerState,o)})}var QI={exports:{}},d_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kO=W,PO=Symbol.for("react.element"),MO=Symbol.for("react.fragment"),IO=Object.prototype.hasOwnProperty,AO=kO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DO={key:!0,ref:!0,__self:!0,__source:!0};function e3(e,t,o){var l,h={},p=null,_=null;o!==void 0&&(p=""+o),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(_=t.ref);for(l in t)IO.call(t,l)&&!DO.hasOwnProperty(l)&&(h[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)h[l]===void 0&&(h[l]=t[l]);return{$$typeof:PO,type:e,key:p,ref:_,props:h,_owner:AO.current}}d_.Fragment=MO;d_.jsx=e3;d_.jsxs=e3;QI.exports=d_;var he=QI.exports;const zO={disableDefaultClasses:!1},RO=W.createContext(zO);function t3(e){const{disableDefaultClasses:t}=W.useContext(RO);return o=>t?"":e(o)}function LO(e,t=[]){if(e===void 0)return{};const o={};return Object.keys(e).filter(l=>l.match(/^on[A-Z]/)&&typeof e[l]=="function"&&!t.includes(l)).forEach(l=>{o[l]=e[l]}),o}function mh(e,t){return typeof e=="function"?e(t):e}function VE(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(o=>!(o.match(/^on[A-Z]/)&&typeof e[o]=="function")).forEach(o=>{t[o]=e[o]}),t}function OO(e){const{getSlotProps:t,additionalProps:o,externalSlotProps:l,externalForwardedProps:h,className:p}=e;if(!t){const $=Zt(h==null?void 0:h.className,l==null?void 0:l.className,p,o==null?void 0:o.className),j=H({},o==null?void 0:o.style,h==null?void 0:h.style,l==null?void 0:l.style),B=H({},o,h,l);return $.length>0&&(B.className=$),Object.keys(j).length>0&&(B.style=j),{props:B,internalRef:void 0}}const _=LO(H({},h,l)),a=VE(l),w=VE(h),C=t(_),M=Zt(C==null?void 0:C.className,o==null?void 0:o.className,p,h==null?void 0:h.className,l==null?void 0:l.className),D=H({},C==null?void 0:C.style,o==null?void 0:o.style,h==null?void 0:h.style,l==null?void 0:l.style),R=H({},C,o,w,a);return M.length>0&&(R.className=M),Object.keys(D).length>0&&(R.style=D),{props:R,internalRef:C.ref}}const BO=["elementType","externalSlotProps","ownerState"];function $r(e){var t;const{elementType:o,externalSlotProps:l,ownerState:h}=e,p=Bt(e,BO),_=mh(l,h),{props:a,internalRef:w}=OO(H({},p,{externalSlotProps:_})),C=Rr(w,_==null?void 0:_.ref,(t=e.additionalProps)==null?void 0:t.ref);return EO(o,H({},a,{ref:C}),h)}const FO=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function $O(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function NO(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=l=>e.ownerDocument.querySelector(`input[type="radio"]${l}`);let o=t(`[name="${e.name}"]:checked`);return o||(o=t(`[name="${e.name}"]`)),o!==e}function UO(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||NO(e))}function VO(e){const t=[],o=[];return Array.from(e.querySelectorAll(FO)).forEach((l,h)=>{const p=$O(l);p===-1||!UO(l)||(p===0?t.push(l):o.push({documentOrder:h,tabIndex:p,node:l}))}),o.sort((l,h)=>l.tabIndex===h.tabIndex?l.documentOrder-h.documentOrder:l.tabIndex-h.tabIndex).map(l=>l.node).concat(t)}function jO(){return!0}function n3(e){const{children:t,disableAutoFocus:o=!1,disableEnforceFocus:l=!1,disableRestoreFocus:h=!1,getTabbable:p=VO,isEnabled:_=jO,open:a}=e,w=W.useRef(!1),C=W.useRef(null),M=W.useRef(null),D=W.useRef(null),R=W.useRef(null),$=W.useRef(!1),j=W.useRef(null),B=Rr(t.ref,j),K=W.useRef(null);W.useEffect(()=>{!a||!j.current||($.current=!o)},[o,a]),W.useEffect(()=>{if(!a||!j.current)return;const G=Ei(j.current);return j.current.contains(G.activeElement)||(j.current.hasAttribute("tabIndex")||j.current.setAttribute("tabIndex","-1"),$.current&&j.current.focus()),()=>{h||(D.current&&D.current.focus&&(w.current=!0,D.current.focus()),D.current=null)}},[a]),W.useEffect(()=>{if(!a||!j.current)return;const G=Ei(j.current),Y=oe=>{const{current:de}=j;if(de!==null){if(!G.hasFocus()||l||!_()||w.current){w.current=!1;return}if(!de.contains(G.activeElement)){if(oe&&R.current!==oe.target||G.activeElement!==R.current)R.current=null;else if(R.current!==null)return;if(!$.current)return;let Ce=[];if((G.activeElement===C.current||G.activeElement===M.current)&&(Ce=p(j.current)),Ce.length>0){var ae,ye;const Fe=!!((ae=K.current)!=null&&ae.shiftKey&&((ye=K.current)==null?void 0:ye.key)==="Tab"),be=Ce[0],we=Ce[Ce.length-1];typeof be!="string"&&typeof we!="string"&&(Fe?we.focus():be.focus())}else de.focus()}}},Q=oe=>{K.current=oe,!(l||!_()||oe.key!=="Tab")&&G.activeElement===j.current&&oe.shiftKey&&(w.current=!0,M.current&&M.current.focus())};G.addEventListener("focusin",Y),G.addEventListener("keydown",Q,!0);const re=setInterval(()=>{G.activeElement&&G.activeElement.tagName==="BODY"&&Y(null)},50);return()=>{clearInterval(re),G.removeEventListener("focusin",Y),G.removeEventListener("keydown",Q,!0)}},[o,l,h,_,a,p]);const N=G=>{D.current===null&&(D.current=G.relatedTarget),$.current=!0,R.current=G.target;const Y=t.props.onFocus;Y&&Y(G)},U=G=>{D.current===null&&(D.current=G.relatedTarget),$.current=!0};return he.jsxs(W.Fragment,{children:[he.jsx("div",{tabIndex:a?0:-1,onFocus:U,ref:C,"data-testid":"sentinelStart"}),W.cloneElement(t,{ref:B,onFocus:N}),he.jsx("div",{tabIndex:a?0:-1,onFocus:U,ref:M,"data-testid":"sentinelEnd"})]})}var To="top",fs="bottom",ms="right",Co="left",Gw="auto",Rm=[To,fs,ms,Co],gh="start",_m="end",WO="clippingParents",r3="viewport",yf="popper",GO="reference",jE=Rm.reduce(function(e,t){return e.concat([t+"-"+gh,t+"-"+_m])},[]),i3=[].concat(Rm,[Gw]).reduce(function(e,t){return e.concat([t,t+"-"+gh,t+"-"+_m])},[]),HO="beforeRead",qO="read",ZO="afterRead",XO="beforeMain",YO="main",KO="afterMain",JO="beforeWrite",QO="write",eB="afterWrite",tB=[HO,qO,ZO,XO,YO,KO,JO,QO,eB];function xa(e){return e?(e.nodeName||"").toLowerCase():null}function Wo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function yu(e){var t=Wo(e).Element;return e instanceof t||e instanceof Element}function us(e){var t=Wo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Hw(e){if(typeof ShadowRoot>"u")return!1;var t=Wo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function nB(e){var t=e.state;Object.keys(t.elements).forEach(function(o){var l=t.styles[o]||{},h=t.attributes[o]||{},p=t.elements[o];!us(p)||!xa(p)||(Object.assign(p.style,l),Object.keys(h).forEach(function(_){var a=h[_];a===!1?p.removeAttribute(_):p.setAttribute(_,a===!0?"":a)}))})}function rB(e){var t=e.state,o={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,o.popper),t.styles=o,t.elements.arrow&&Object.assign(t.elements.arrow.style,o.arrow),function(){Object.keys(t.elements).forEach(function(l){var h=t.elements[l],p=t.attributes[l]||{},_=Object.keys(t.styles.hasOwnProperty(l)?t.styles[l]:o[l]),a=_.reduce(function(w,C){return w[C]="",w},{});!us(h)||!xa(h)||(Object.assign(h.style,a),Object.keys(p).forEach(function(w){h.removeAttribute(w)}))})}}const iB={name:"applyStyles",enabled:!0,phase:"write",fn:nB,effect:rB,requires:["computeStyles"]};function _a(e){return e.split("-")[0]}var lu=Math.max,O0=Math.min,yh=Math.round;function Mb(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function o3(){return!/^((?!chrome|android).)*safari/i.test(Mb())}function _h(e,t,o){t===void 0&&(t=!1),o===void 0&&(o=!1);var l=e.getBoundingClientRect(),h=1,p=1;t&&us(e)&&(h=e.offsetWidth>0&&yh(l.width)/e.offsetWidth||1,p=e.offsetHeight>0&&yh(l.height)/e.offsetHeight||1);var _=yu(e)?Wo(e):window,a=_.visualViewport,w=!o3()&&o,C=(l.left+(w&&a?a.offsetLeft:0))/h,M=(l.top+(w&&a?a.offsetTop:0))/p,D=l.width/h,R=l.height/p;return{width:D,height:R,top:M,right:C+D,bottom:M+R,left:C,x:C,y:M}}function qw(e){var t=_h(e),o=e.offsetWidth,l=e.offsetHeight;return Math.abs(t.width-o)<=1&&(o=t.width),Math.abs(t.height-l)<=1&&(l=t.height),{x:e.offsetLeft,y:e.offsetTop,width:o,height:l}}function s3(e,t){var o=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(o&&Hw(o)){var l=t;do{if(l&&e.isSameNode(l))return!0;l=l.parentNode||l.host}while(l)}return!1}function Ja(e){return Wo(e).getComputedStyle(e)}function oB(e){return["table","td","th"].indexOf(xa(e))>=0}function sc(e){return((yu(e)?e.ownerDocument:e.document)||window.document).documentElement}function h_(e){return xa(e)==="html"?e:e.assignedSlot||e.parentNode||(Hw(e)?e.host:null)||sc(e)}function WE(e){return!us(e)||Ja(e).position==="fixed"?null:e.offsetParent}function sB(e){var t=/firefox/i.test(Mb()),o=/Trident/i.test(Mb());if(o&&us(e)){var l=Ja(e);if(l.position==="fixed")return null}var h=h_(e);for(Hw(h)&&(h=h.host);us(h)&&["html","body"].indexOf(xa(h))<0;){var p=Ja(h);if(p.transform!=="none"||p.perspective!=="none"||p.contain==="paint"||["transform","perspective"].indexOf(p.willChange)!==-1||t&&p.willChange==="filter"||t&&p.filter&&p.filter!=="none")return h;h=h.parentNode}return null}function Lm(e){for(var t=Wo(e),o=WE(e);o&&oB(o)&&Ja(o).position==="static";)o=WE(o);return o&&(xa(o)==="html"||xa(o)==="body"&&Ja(o).position==="static")?t:o||sB(e)||t}function Zw(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Gf(e,t,o){return lu(e,O0(t,o))}function aB(e,t,o){var l=Gf(e,t,o);return l>o?o:l}function a3(){return{top:0,right:0,bottom:0,left:0}}function l3(e){return Object.assign({},a3(),e)}function c3(e,t){return t.reduce(function(o,l){return o[l]=e,o},{})}var lB=function(t,o){return t=typeof t=="function"?t(Object.assign({},o.rects,{placement:o.placement})):t,l3(typeof t!="number"?t:c3(t,Rm))};function cB(e){var t,o=e.state,l=e.name,h=e.options,p=o.elements.arrow,_=o.modifiersData.popperOffsets,a=_a(o.placement),w=Zw(a),C=[Co,ms].indexOf(a)>=0,M=C?"height":"width";if(!(!p||!_)){var D=lB(h.padding,o),R=qw(p),$=w==="y"?To:Co,j=w==="y"?fs:ms,B=o.rects.reference[M]+o.rects.reference[w]-_[w]-o.rects.popper[M],K=_[w]-o.rects.reference[w],N=Lm(p),U=N?w==="y"?N.clientHeight||0:N.clientWidth||0:0,G=B/2-K/2,Y=D[$],Q=U-R[M]-D[j],re=U/2-R[M]/2+G,oe=Gf(Y,re,Q),de=w;o.modifiersData[l]=(t={},t[de]=oe,t.centerOffset=oe-re,t)}}function uB(e){var t=e.state,o=e.options,l=o.element,h=l===void 0?"[data-popper-arrow]":l;h!=null&&(typeof h=="string"&&(h=t.elements.popper.querySelector(h),!h)||s3(t.elements.popper,h)&&(t.elements.arrow=h))}const dB={name:"arrow",enabled:!0,phase:"main",fn:cB,effect:uB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vh(e){return e.split("-")[1]}var hB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pB(e,t){var o=e.x,l=e.y,h=t.devicePixelRatio||1;return{x:yh(o*h)/h||0,y:yh(l*h)/h||0}}function GE(e){var t,o=e.popper,l=e.popperRect,h=e.placement,p=e.variation,_=e.offsets,a=e.position,w=e.gpuAcceleration,C=e.adaptive,M=e.roundOffsets,D=e.isFixed,R=_.x,$=R===void 0?0:R,j=_.y,B=j===void 0?0:j,K=typeof M=="function"?M({x:$,y:B}):{x:$,y:B};$=K.x,B=K.y;var N=_.hasOwnProperty("x"),U=_.hasOwnProperty("y"),G=Co,Y=To,Q=window;if(C){var re=Lm(o),oe="clientHeight",de="clientWidth";if(re===Wo(o)&&(re=sc(o),Ja(re).position!=="static"&&a==="absolute"&&(oe="scrollHeight",de="scrollWidth")),re=re,h===To||(h===Co||h===ms)&&p===_m){Y=fs;var ae=D&&re===Q&&Q.visualViewport?Q.visualViewport.height:re[oe];B-=ae-l.height,B*=w?1:-1}if(h===Co||(h===To||h===fs)&&p===_m){G=ms;var ye=D&&re===Q&&Q.visualViewport?Q.visualViewport.width:re[de];$-=ye-l.width,$*=w?1:-1}}var Ce=Object.assign({position:a},C&&hB),Fe=M===!0?pB({x:$,y:B},Wo(o)):{x:$,y:B};if($=Fe.x,B=Fe.y,w){var be;return Object.assign({},Ce,(be={},be[Y]=U?"0":"",be[G]=N?"0":"",be.transform=(Q.devicePixelRatio||1)<=1?"translate("+$+"px, "+B+"px)":"translate3d("+$+"px, "+B+"px, 0)",be))}return Object.assign({},Ce,(t={},t[Y]=U?B+"px":"",t[G]=N?$+"px":"",t.transform="",t))}function fB(e){var t=e.state,o=e.options,l=o.gpuAcceleration,h=l===void 0?!0:l,p=o.adaptive,_=p===void 0?!0:p,a=o.roundOffsets,w=a===void 0?!0:a,C={placement:_a(t.placement),variation:vh(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:h,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,GE(Object.assign({},C,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:_,roundOffsets:w})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,GE(Object.assign({},C,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:w})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const mB={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:fB,data:{}};var Dy={passive:!0};function gB(e){var t=e.state,o=e.instance,l=e.options,h=l.scroll,p=h===void 0?!0:h,_=l.resize,a=_===void 0?!0:_,w=Wo(t.elements.popper),C=[].concat(t.scrollParents.reference,t.scrollParents.popper);return p&&C.forEach(function(M){M.addEventListener("scroll",o.update,Dy)}),a&&w.addEventListener("resize",o.update,Dy),function(){p&&C.forEach(function(M){M.removeEventListener("scroll",o.update,Dy)}),a&&w.removeEventListener("resize",o.update,Dy)}}const yB={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:gB,data:{}};var _B={left:"right",right:"left",bottom:"top",top:"bottom"};function e0(e){return e.replace(/left|right|bottom|top/g,function(t){return _B[t]})}var vB={start:"end",end:"start"};function HE(e){return e.replace(/start|end/g,function(t){return vB[t]})}function Xw(e){var t=Wo(e),o=t.pageXOffset,l=t.pageYOffset;return{scrollLeft:o,scrollTop:l}}function Yw(e){return _h(sc(e)).left+Xw(e).scrollLeft}function xB(e,t){var o=Wo(e),l=sc(e),h=o.visualViewport,p=l.clientWidth,_=l.clientHeight,a=0,w=0;if(h){p=h.width,_=h.height;var C=o3();(C||!C&&t==="fixed")&&(a=h.offsetLeft,w=h.offsetTop)}return{width:p,height:_,x:a+Yw(e),y:w}}function bB(e){var t,o=sc(e),l=Xw(e),h=(t=e.ownerDocument)==null?void 0:t.body,p=lu(o.scrollWidth,o.clientWidth,h?h.scrollWidth:0,h?h.clientWidth:0),_=lu(o.scrollHeight,o.clientHeight,h?h.scrollHeight:0,h?h.clientHeight:0),a=-l.scrollLeft+Yw(e),w=-l.scrollTop;return Ja(h||o).direction==="rtl"&&(a+=lu(o.clientWidth,h?h.clientWidth:0)-p),{width:p,height:_,x:a,y:w}}function Kw(e){var t=Ja(e),o=t.overflow,l=t.overflowX,h=t.overflowY;return/auto|scroll|overlay|hidden/.test(o+h+l)}function u3(e){return["html","body","#document"].indexOf(xa(e))>=0?e.ownerDocument.body:us(e)&&Kw(e)?e:u3(h_(e))}function Hf(e,t){var o;t===void 0&&(t=[]);var l=u3(e),h=l===((o=e.ownerDocument)==null?void 0:o.body),p=Wo(l),_=h?[p].concat(p.visualViewport||[],Kw(l)?l:[]):l,a=t.concat(_);return h?a:a.concat(Hf(h_(_)))}function Ib(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function wB(e,t){var o=_h(e,!1,t==="fixed");return o.top=o.top+e.clientTop,o.left=o.left+e.clientLeft,o.bottom=o.top+e.clientHeight,o.right=o.left+e.clientWidth,o.width=e.clientWidth,o.height=e.clientHeight,o.x=o.left,o.y=o.top,o}function qE(e,t,o){return t===r3?Ib(xB(e,o)):yu(t)?wB(t,o):Ib(bB(sc(e)))}function SB(e){var t=Hf(h_(e)),o=["absolute","fixed"].indexOf(Ja(e).position)>=0,l=o&&us(e)?Lm(e):e;return yu(l)?t.filter(function(h){return yu(h)&&s3(h,l)&&xa(h)!=="body"}):[]}function TB(e,t,o,l){var h=t==="clippingParents"?SB(e):[].concat(t),p=[].concat(h,[o]),_=p[0],a=p.reduce(function(w,C){var M=qE(e,C,l);return w.top=lu(M.top,w.top),w.right=O0(M.right,w.right),w.bottom=O0(M.bottom,w.bottom),w.left=lu(M.left,w.left),w},qE(e,_,l));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function d3(e){var t=e.reference,o=e.element,l=e.placement,h=l?_a(l):null,p=l?vh(l):null,_=t.x+t.width/2-o.width/2,a=t.y+t.height/2-o.height/2,w;switch(h){case To:w={x:_,y:t.y-o.height};break;case fs:w={x:_,y:t.y+t.height};break;case ms:w={x:t.x+t.width,y:a};break;case Co:w={x:t.x-o.width,y:a};break;default:w={x:t.x,y:t.y}}var C=h?Zw(h):null;if(C!=null){var M=C==="y"?"height":"width";switch(p){case gh:w[C]=w[C]-(t[M]/2-o[M]/2);break;case _m:w[C]=w[C]+(t[M]/2-o[M]/2);break}}return w}function vm(e,t){t===void 0&&(t={});var o=t,l=o.placement,h=l===void 0?e.placement:l,p=o.strategy,_=p===void 0?e.strategy:p,a=o.boundary,w=a===void 0?WO:a,C=o.rootBoundary,M=C===void 0?r3:C,D=o.elementContext,R=D===void 0?yf:D,$=o.altBoundary,j=$===void 0?!1:$,B=o.padding,K=B===void 0?0:B,N=l3(typeof K!="number"?K:c3(K,Rm)),U=R===yf?GO:yf,G=e.rects.popper,Y=e.elements[j?U:R],Q=TB(yu(Y)?Y:Y.contextElement||sc(e.elements.popper),w,M,_),re=_h(e.elements.reference),oe=d3({reference:re,element:G,strategy:"absolute",placement:h}),de=Ib(Object.assign({},G,oe)),ae=R===yf?de:re,ye={top:Q.top-ae.top+N.top,bottom:ae.bottom-Q.bottom+N.bottom,left:Q.left-ae.left+N.left,right:ae.right-Q.right+N.right},Ce=e.modifiersData.offset;if(R===yf&&Ce){var Fe=Ce[h];Object.keys(ye).forEach(function(be){var we=[ms,fs].indexOf(be)>=0?1:-1,ue=[To,fs].indexOf(be)>=0?"y":"x";ye[be]+=Fe[ue]*we})}return ye}function CB(e,t){t===void 0&&(t={});var o=t,l=o.placement,h=o.boundary,p=o.rootBoundary,_=o.padding,a=o.flipVariations,w=o.allowedAutoPlacements,C=w===void 0?i3:w,M=vh(l),D=M?a?jE:jE.filter(function(j){return vh(j)===M}):Rm,R=D.filter(function(j){return C.indexOf(j)>=0});R.length===0&&(R=D);var $=R.reduce(function(j,B){return j[B]=vm(e,{placement:B,boundary:h,rootBoundary:p,padding:_})[_a(B)],j},{});return Object.keys($).sort(function(j,B){return $[j]-$[B]})}function EB(e){if(_a(e)===Gw)return[];var t=e0(e);return[HE(e),t,HE(t)]}function kB(e){var t=e.state,o=e.options,l=e.name;if(!t.modifiersData[l]._skip){for(var h=o.mainAxis,p=h===void 0?!0:h,_=o.altAxis,a=_===void 0?!0:_,w=o.fallbackPlacements,C=o.padding,M=o.boundary,D=o.rootBoundary,R=o.altBoundary,$=o.flipVariations,j=$===void 0?!0:$,B=o.allowedAutoPlacements,K=t.options.placement,N=_a(K),U=N===K,G=w||(U||!j?[e0(K)]:EB(K)),Y=[K].concat(G).reduce(function(rt,xt){return rt.concat(_a(xt)===Gw?CB(t,{placement:xt,boundary:M,rootBoundary:D,padding:C,flipVariations:j,allowedAutoPlacements:B}):xt)},[]),Q=t.rects.reference,re=t.rects.popper,oe=new Map,de=!0,ae=Y[0],ye=0;ye<Y.length;ye++){var Ce=Y[ye],Fe=_a(Ce),be=vh(Ce)===gh,we=[To,fs].indexOf(Fe)>=0,ue=we?"width":"height",Be=vm(t,{placement:Ce,boundary:M,rootBoundary:D,altBoundary:R,padding:C}),Ae=we?be?ms:Co:be?fs:To;Q[ue]>re[ue]&&(Ae=e0(Ae));var Se=e0(Ae),ke=[];if(p&&ke.push(Be[Fe]<=0),a&&ke.push(Be[Ae]<=0,Be[Se]<=0),ke.every(function(rt){return rt})){ae=Ce,de=!1;break}oe.set(Ce,ke)}if(de)for(var Ne=j?3:1,nt=function(xt){var ht=Y.find(function(mt){var Ot=oe.get(mt);if(Ot)return Ot.slice(0,xt).every(function(Nt){return Nt})});if(ht)return ae=ht,"break"},vt=Ne;vt>0;vt--){var gt=nt(vt);if(gt==="break")break}t.placement!==ae&&(t.modifiersData[l]._skip=!0,t.placement=ae,t.reset=!0)}}const PB={name:"flip",enabled:!0,phase:"main",fn:kB,requiresIfExists:["offset"],data:{_skip:!1}};function ZE(e,t,o){return o===void 0&&(o={x:0,y:0}),{top:e.top-t.height-o.y,right:e.right-t.width+o.x,bottom:e.bottom-t.height+o.y,left:e.left-t.width-o.x}}function XE(e){return[To,ms,fs,Co].some(function(t){return e[t]>=0})}function MB(e){var t=e.state,o=e.name,l=t.rects.reference,h=t.rects.popper,p=t.modifiersData.preventOverflow,_=vm(t,{elementContext:"reference"}),a=vm(t,{altBoundary:!0}),w=ZE(_,l),C=ZE(a,h,p),M=XE(w),D=XE(C);t.modifiersData[o]={referenceClippingOffsets:w,popperEscapeOffsets:C,isReferenceHidden:M,hasPopperEscaped:D},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":M,"data-popper-escaped":D})}const IB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:MB};function AB(e,t,o){var l=_a(e),h=[Co,To].indexOf(l)>=0?-1:1,p=typeof o=="function"?o(Object.assign({},t,{placement:e})):o,_=p[0],a=p[1];return _=_||0,a=(a||0)*h,[Co,ms].indexOf(l)>=0?{x:a,y:_}:{x:_,y:a}}function DB(e){var t=e.state,o=e.options,l=e.name,h=o.offset,p=h===void 0?[0,0]:h,_=i3.reduce(function(M,D){return M[D]=AB(D,t.rects,p),M},{}),a=_[t.placement],w=a.x,C=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=w,t.modifiersData.popperOffsets.y+=C),t.modifiersData[l]=_}const zB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:DB};function RB(e){var t=e.state,o=e.name;t.modifiersData[o]=d3({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const LB={name:"popperOffsets",enabled:!0,phase:"read",fn:RB,data:{}};function OB(e){return e==="x"?"y":"x"}function BB(e){var t=e.state,o=e.options,l=e.name,h=o.mainAxis,p=h===void 0?!0:h,_=o.altAxis,a=_===void 0?!1:_,w=o.boundary,C=o.rootBoundary,M=o.altBoundary,D=o.padding,R=o.tether,$=R===void 0?!0:R,j=o.tetherOffset,B=j===void 0?0:j,K=vm(t,{boundary:w,rootBoundary:C,padding:D,altBoundary:M}),N=_a(t.placement),U=vh(t.placement),G=!U,Y=Zw(N),Q=OB(Y),re=t.modifiersData.popperOffsets,oe=t.rects.reference,de=t.rects.popper,ae=typeof B=="function"?B(Object.assign({},t.rects,{placement:t.placement})):B,ye=typeof ae=="number"?{mainAxis:ae,altAxis:ae}:Object.assign({mainAxis:0,altAxis:0},ae),Ce=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Fe={x:0,y:0};if(re){if(p){var be,we=Y==="y"?To:Co,ue=Y==="y"?fs:ms,Be=Y==="y"?"height":"width",Ae=re[Y],Se=Ae+K[we],ke=Ae-K[ue],Ne=$?-de[Be]/2:0,nt=U===gh?oe[Be]:de[Be],vt=U===gh?-de[Be]:-oe[Be],gt=t.elements.arrow,rt=$&&gt?qw(gt):{width:0,height:0},xt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:a3(),ht=xt[we],mt=xt[ue],Ot=Gf(0,oe[Be],rt[Be]),Nt=G?oe[Be]/2-Ne-Ot-ht-ye.mainAxis:nt-Ot-ht-ye.mainAxis,at=G?-oe[Be]/2+Ne+Ot+mt+ye.mainAxis:vt+Ot+mt+ye.mainAxis,Je=t.elements.arrow&&Lm(t.elements.arrow),it=Je?Y==="y"?Je.clientTop||0:Je.clientLeft||0:0,St=(be=Ce==null?void 0:Ce[Y])!=null?be:0,Gt=Ae+Nt-St-it,He=Ae+at-St,Vt=Gf($?O0(Se,Gt):Se,Ae,$?lu(ke,He):ke);re[Y]=Vt,Fe[Y]=Vt-Ae}if(a){var lt,jt=Y==="x"?To:Co,Ut=Y==="x"?fs:ms,$t=re[Q],Lt=Q==="y"?"height":"width",un=$t+K[jt],kn=$t-K[Ut],Hn=[To,Co].indexOf(N)!==-1,dn=(lt=Ce==null?void 0:Ce[Q])!=null?lt:0,En=Hn?un:$t-oe[Lt]-de[Lt]-dn+ye.altAxis,Tn=Hn?$t+oe[Lt]+de[Lt]-dn-ye.altAxis:kn,sn=$&&Hn?aB(En,$t,Tn):Gf($?En:un,$t,$?Tn:kn);re[Q]=sn,Fe[Q]=sn-$t}t.modifiersData[l]=Fe}}const FB={name:"preventOverflow",enabled:!0,phase:"main",fn:BB,requiresIfExists:["offset"]};function $B(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function NB(e){return e===Wo(e)||!us(e)?Xw(e):$B(e)}function UB(e){var t=e.getBoundingClientRect(),o=yh(t.width)/e.offsetWidth||1,l=yh(t.height)/e.offsetHeight||1;return o!==1||l!==1}function VB(e,t,o){o===void 0&&(o=!1);var l=us(t),h=us(t)&&UB(t),p=sc(t),_=_h(e,h,o),a={scrollLeft:0,scrollTop:0},w={x:0,y:0};return(l||!l&&!o)&&((xa(t)!=="body"||Kw(p))&&(a=NB(t)),us(t)?(w=_h(t,!0),w.x+=t.clientLeft,w.y+=t.clientTop):p&&(w.x=Yw(p))),{x:_.left+a.scrollLeft-w.x,y:_.top+a.scrollTop-w.y,width:_.width,height:_.height}}function jB(e){var t=new Map,o=new Set,l=[];e.forEach(function(p){t.set(p.name,p)});function h(p){o.add(p.name);var _=[].concat(p.requires||[],p.requiresIfExists||[]);_.forEach(function(a){if(!o.has(a)){var w=t.get(a);w&&h(w)}}),l.push(p)}return e.forEach(function(p){o.has(p.name)||h(p)}),l}function WB(e){var t=jB(e);return tB.reduce(function(o,l){return o.concat(t.filter(function(h){return h.phase===l}))},[])}function GB(e){var t;return function(){return t||(t=new Promise(function(o){Promise.resolve().then(function(){t=void 0,o(e())})})),t}}function HB(e){var t=e.reduce(function(o,l){var h=o[l.name];return o[l.name]=h?Object.assign({},h,l,{options:Object.assign({},h.options,l.options),data:Object.assign({},h.data,l.data)}):l,o},{});return Object.keys(t).map(function(o){return t[o]})}var YE={placement:"bottom",modifiers:[],strategy:"absolute"};function KE(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return!t.some(function(l){return!(l&&typeof l.getBoundingClientRect=="function")})}function qB(e){e===void 0&&(e={});var t=e,o=t.defaultModifiers,l=o===void 0?[]:o,h=t.defaultOptions,p=h===void 0?YE:h;return function(a,w,C){C===void 0&&(C=p);var M={placement:"bottom",orderedModifiers:[],options:Object.assign({},YE,p),modifiersData:{},elements:{reference:a,popper:w},attributes:{},styles:{}},D=[],R=!1,$={state:M,setOptions:function(N){var U=typeof N=="function"?N(M.options):N;B(),M.options=Object.assign({},p,M.options,U),M.scrollParents={reference:yu(a)?Hf(a):a.contextElement?Hf(a.contextElement):[],popper:Hf(w)};var G=WB(HB([].concat(l,M.options.modifiers)));return M.orderedModifiers=G.filter(function(Y){return Y.enabled}),j(),$.update()},forceUpdate:function(){if(!R){var N=M.elements,U=N.reference,G=N.popper;if(KE(U,G)){M.rects={reference:VB(U,Lm(G),M.options.strategy==="fixed"),popper:qw(G)},M.reset=!1,M.placement=M.options.placement,M.orderedModifiers.forEach(function(ye){return M.modifiersData[ye.name]=Object.assign({},ye.data)});for(var Y=0;Y<M.orderedModifiers.length;Y++){if(M.reset===!0){M.reset=!1,Y=-1;continue}var Q=M.orderedModifiers[Y],re=Q.fn,oe=Q.options,de=oe===void 0?{}:oe,ae=Q.name;typeof re=="function"&&(M=re({state:M,options:de,name:ae,instance:$})||M)}}}},update:GB(function(){return new Promise(function(K){$.forceUpdate(),K(M)})}),destroy:function(){B(),R=!0}};if(!KE(a,w))return $;$.setOptions(C).then(function(K){!R&&C.onFirstUpdate&&C.onFirstUpdate(K)});function j(){M.orderedModifiers.forEach(function(K){var N=K.name,U=K.options,G=U===void 0?{}:U,Y=K.effect;if(typeof Y=="function"){var Q=Y({state:M,name:N,instance:$,options:G}),re=function(){};D.push(Q||re)}})}function B(){D.forEach(function(K){return K()}),D=[]}return $}}var ZB=[yB,LB,mB,iB,zB,PB,FB,dB,IB],XB=qB({defaultModifiers:ZB});function YB(e){return typeof e=="function"?e():e}const KB=W.forwardRef(function(t,o){const{children:l,container:h,disablePortal:p=!1}=t,[_,a]=W.useState(null),w=Rr(W.isValidElement(l)?l.ref:null,o);if(ki(()=>{p||a(YB(h)||document.body)},[h,p]),ki(()=>{if(_&&!p)return L0(o,_),()=>{L0(o,null)}},[o,_,p]),p){if(W.isValidElement(l)){const C={ref:w};return W.cloneElement(l,C)}return he.jsx(W.Fragment,{children:l})}return he.jsx(W.Fragment,{children:_&&s_.createPortal(l,_)})}),h3=KB;function JB(e){return Sn("MuiPopper",e)}_n("MuiPopper",["root"]);const QB=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],e6=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function t6(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function Ab(e){return typeof e=="function"?e():e}function n6(e){return e.nodeType!==void 0}const r6=()=>xn({root:["root"]},t3(JB)),i6={},o6=W.forwardRef(function(t,o){var l;const{anchorEl:h,children:p,direction:_,disablePortal:a,modifiers:w,open:C,placement:M,popperOptions:D,popperRef:R,slotProps:$={},slots:j={},TransitionProps:B}=t,K=Bt(t,QB),N=W.useRef(null),U=Rr(N,o),G=W.useRef(null),Y=Rr(G,R),Q=W.useRef(Y);ki(()=>{Q.current=Y},[Y]),W.useImperativeHandle(R,()=>G.current,[]);const re=t6(M,_),[oe,de]=W.useState(re),[ae,ye]=W.useState(Ab(h));W.useEffect(()=>{G.current&&G.current.forceUpdate()}),W.useEffect(()=>{h&&ye(Ab(h))},[h]),ki(()=>{if(!ae||!C)return;const ue=Se=>{de(Se.placement)};let Be=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Se})=>{ue(Se)}}];w!=null&&(Be=Be.concat(w)),D&&D.modifiers!=null&&(Be=Be.concat(D.modifiers));const Ae=XB(ae,N.current,H({placement:re},D,{modifiers:Be}));return Q.current(Ae),()=>{Ae.destroy(),Q.current(null)}},[ae,a,w,C,D,re]);const Ce={placement:oe};B!==null&&(Ce.TransitionProps=B);const Fe=r6(),be=(l=j.root)!=null?l:"div",we=$r({elementType:be,externalSlotProps:$.root,externalForwardedProps:K,additionalProps:{role:"tooltip",ref:U},ownerState:t,className:Fe.root});return he.jsx(be,H({},we,{children:typeof p=="function"?p(Ce):p}))}),s6=W.forwardRef(function(t,o){const{anchorEl:l,children:h,container:p,direction:_="ltr",disablePortal:a=!1,keepMounted:w=!1,modifiers:C,open:M,placement:D="bottom",popperOptions:R=i6,popperRef:$,style:j,transition:B=!1,slotProps:K={},slots:N={}}=t,U=Bt(t,e6),[G,Y]=W.useState(!0),Q=()=>{Y(!1)},re=()=>{Y(!0)};if(!w&&!M&&(!B||G))return null;let oe;if(p)oe=p;else if(l){const ye=Ab(l);oe=ye&&n6(ye)?Ei(ye).body:Ei(null).body}const de=!M&&w&&(!B||G)?"none":void 0,ae=B?{in:M,onEnter:Q,onExited:re}:void 0;return he.jsx(h3,{disablePortal:a,container:oe,children:he.jsx(o6,H({anchorEl:l,direction:_,disablePortal:a,modifiers:C,ref:o,open:B?!G:M,placement:D,popperOptions:R,popperRef:$,slotProps:K,slots:N},U,{style:H({position:"fixed",top:0,left:0,display:de},j),TransitionProps:ae,children:h}))})}),a6=s6;function l6(e){const t=Ei(e);return t.body===e?Ka(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function qf(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function JE(e){return parseInt(Ka(e).getComputedStyle(e).paddingRight,10)||0}function c6(e){const o=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,l=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return o||l}function QE(e,t,o,l,h){const p=[t,o,...l];[].forEach.call(e.children,_=>{const a=p.indexOf(_)===-1,w=!c6(_);a&&w&&qf(_,h)})}function g1(e,t){let o=-1;return e.some((l,h)=>t(l)?(o=h,!0):!1),o}function u6(e,t){const o=[],l=e.container;if(!t.disableScrollLock){if(l6(l)){const _=XI(Ei(l));o.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${JE(l)+_}px`;const a=Ei(l).querySelectorAll(".mui-fixed");[].forEach.call(a,w=>{o.push({value:w.style.paddingRight,property:"padding-right",el:w}),w.style.paddingRight=`${JE(w)+_}px`})}let p;if(l.parentNode instanceof DocumentFragment)p=Ei(l).body;else{const _=l.parentElement,a=Ka(l);p=(_==null?void 0:_.nodeName)==="HTML"&&a.getComputedStyle(_).overflowY==="scroll"?_:l}o.push({value:p.style.overflow,property:"overflow",el:p},{value:p.style.overflowX,property:"overflow-x",el:p},{value:p.style.overflowY,property:"overflow-y",el:p}),p.style.overflow="hidden"}return()=>{o.forEach(({value:p,el:_,property:a})=>{p?_.style.setProperty(a,p):_.style.removeProperty(a)})}}function d6(e){const t=[];return[].forEach.call(e.children,o=>{o.getAttribute("aria-hidden")==="true"&&t.push(o)}),t}class h6{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,o){let l=this.modals.indexOf(t);if(l!==-1)return l;l=this.modals.length,this.modals.push(t),t.modalRef&&qf(t.modalRef,!1);const h=d6(o);QE(o,t.mount,t.modalRef,h,!0);const p=g1(this.containers,_=>_.container===o);return p!==-1?(this.containers[p].modals.push(t),l):(this.containers.push({modals:[t],container:o,restore:null,hiddenSiblings:h}),l)}mount(t,o){const l=g1(this.containers,p=>p.modals.indexOf(t)!==-1),h=this.containers[l];h.restore||(h.restore=u6(h,o))}remove(t,o=!0){const l=this.modals.indexOf(t);if(l===-1)return l;const h=g1(this.containers,_=>_.modals.indexOf(t)!==-1),p=this.containers[h];if(p.modals.splice(p.modals.indexOf(t),1),this.modals.splice(l,1),p.modals.length===0)p.restore&&p.restore(),t.modalRef&&qf(t.modalRef,o),QE(p.container,t.mount,t.modalRef,p.hiddenSiblings,!1),this.containers.splice(h,1);else{const _=p.modals[p.modals.length-1];_.modalRef&&qf(_.modalRef,!1)}return l}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function p6(e){return Sn("MuiModal",e)}_n("MuiModal",["root","hidden","backdrop"]);const f6=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],m6=e=>{const{open:t,exited:o}=e;return xn({root:["root",!t&&o&&"hidden"],backdrop:["backdrop"]},t3(p6))};function g6(e){return typeof e=="function"?e():e}function y6(e){return e?e.props.hasOwnProperty("in"):!1}const _6=new h6,v6=W.forwardRef(function(t,o){var l,h;const{children:p,closeAfterTransition:_=!1,container:a,disableAutoFocus:w=!1,disableEnforceFocus:C=!1,disableEscapeKeyDown:M=!1,disablePortal:D=!1,disableRestoreFocus:R=!1,disableScrollLock:$=!1,hideBackdrop:j=!1,keepMounted:B=!1,manager:K=_6,onBackdropClick:N,onClose:U,onKeyDown:G,open:Y,onTransitionEnter:Q,onTransitionExited:re,slotProps:oe={},slots:de={}}=t,ae=Bt(t,f6),ye=K,[Ce,Fe]=W.useState(!Y),be=W.useRef({}),we=W.useRef(null),ue=W.useRef(null),Be=Rr(ue,o),Ae=y6(p),Se=(l=t["aria-hidden"])!=null?l:!0,ke=()=>Ei(we.current),Ne=()=>(be.current.modalRef=ue.current,be.current.mountNode=we.current,be.current),nt=()=>{ye.mount(Ne(),{disableScrollLock:$}),ue.current&&(ue.current.scrollTop=0)},vt=mn(()=>{const lt=g6(a)||ke().body;ye.add(Ne(),lt),ue.current&&nt()}),gt=W.useCallback(()=>ye.isTopModal(Ne()),[ye]),rt=mn(lt=>{we.current=lt,!(!lt||!ue.current)&&(Y&&gt()?nt():qf(ue.current,Se))}),xt=W.useCallback(()=>{ye.remove(Ne(),Se)},[ye,Se]);W.useEffect(()=>()=>{xt()},[xt]),W.useEffect(()=>{Y?vt():(!Ae||!_)&&xt()},[Y,xt,Ae,_,vt]);const ht=H({},t,{closeAfterTransition:_,disableAutoFocus:w,disableEnforceFocus:C,disableEscapeKeyDown:M,disablePortal:D,disableRestoreFocus:R,disableScrollLock:$,exited:Ce,hideBackdrop:j,keepMounted:B}),mt=m6(ht),Ot=()=>{Fe(!1),Q&&Q()},Nt=()=>{Fe(!0),re&&re(),_&&xt()},at=lt=>{lt.target===lt.currentTarget&&(N&&N(lt),U&&U(lt,"backdropClick"))},Je=lt=>{G&&G(lt),!(lt.key!=="Escape"||!gt())&&(M||(lt.stopPropagation(),U&&U(lt,"escapeKeyDown")))},it={};p.props.tabIndex===void 0&&(it.tabIndex="-1"),Ae&&(it.onEnter=OE(Ot,p.props.onEnter),it.onExited=OE(Nt,p.props.onExited));const St=(h=de.root)!=null?h:"div",Gt=$r({elementType:St,externalSlotProps:oe.root,externalForwardedProps:ae,additionalProps:{ref:Be,role:"presentation",onKeyDown:Je},className:mt.root,ownerState:ht}),He=de.backdrop,Vt=$r({elementType:He,externalSlotProps:oe.backdrop,additionalProps:{"aria-hidden":!0,onClick:at,open:Y},className:mt.backdrop,ownerState:ht});return!B&&!Y&&(!Ae||Ce)?null:he.jsx(h3,{ref:rt,container:a,disablePortal:D,children:he.jsxs(St,H({},Gt,{children:[!j&&He?he.jsx(He,H({},Vt)):null,he.jsx(n3,{disableEnforceFocus:C,disableAutoFocus:w,disableRestoreFocus:R,isEnabled:gt,open:Y,children:W.cloneElement(p,it)})]}))})}),x6=v6,b6=["onChange","maxRows","minRows","style","value"];function zy(e){return parseInt(e,10)||0}const w6={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function ek(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const S6=W.forwardRef(function(t,o){const{onChange:l,maxRows:h,minRows:p=1,style:_,value:a}=t,w=Bt(t,b6),{current:C}=W.useRef(a!=null),M=W.useRef(null),D=Rr(o,M),R=W.useRef(null),$=W.useRef(0),[j,B]=W.useState({outerHeightStyle:0}),K=W.useCallback(()=>{const Q=M.current,oe=Ka(Q).getComputedStyle(Q);if(oe.width==="0px")return{outerHeightStyle:0};const de=R.current;de.style.width=oe.width,de.value=Q.value||t.placeholder||"x",de.value.slice(-1)===`
`&&(de.value+=" ");const ae=oe.boxSizing,ye=zy(oe.paddingBottom)+zy(oe.paddingTop),Ce=zy(oe.borderBottomWidth)+zy(oe.borderTopWidth),Fe=de.scrollHeight;de.value="x";const be=de.scrollHeight;let we=Fe;p&&(we=Math.max(Number(p)*be,we)),h&&(we=Math.min(Number(h)*be,we)),we=Math.max(we,be);const ue=we+(ae==="border-box"?ye+Ce:0),Be=Math.abs(we-Fe)<=1;return{outerHeightStyle:ue,overflow:Be}},[h,p,t.placeholder]),N=(Q,re)=>{const{outerHeightStyle:oe,overflow:de}=re;return $.current<20&&(oe>0&&Math.abs((Q.outerHeightStyle||0)-oe)>1||Q.overflow!==de)?($.current+=1,{overflow:de,outerHeightStyle:oe}):Q},U=W.useCallback(()=>{const Q=K();ek(Q)||B(re=>N(re,Q))},[K]),G=()=>{const Q=K();ek(Q)||s_.flushSync(()=>{B(re=>N(re,Q))})};W.useEffect(()=>{const Q=ym(()=>{$.current=0,M.current&&G()});let re;const oe=M.current,de=Ka(oe);return de.addEventListener("resize",Q),typeof ResizeObserver<"u"&&(re=new ResizeObserver(Q),re.observe(oe)),()=>{Q.clear(),de.removeEventListener("resize",Q),re&&re.disconnect()}}),ki(()=>{U()}),W.useEffect(()=>{$.current=0},[a]);const Y=Q=>{$.current=0,C||U(),l&&l(Q)};return he.jsxs(W.Fragment,{children:[he.jsx("textarea",H({value:a,onChange:Y,ref:D,rows:p,style:H({height:j.outerHeightStyle,overflow:j.overflow?"hidden":void 0},_)},w)),he.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:R,tabIndex:-1,style:H({},w6.shadow,_,{padding:0})})]})}),T6=S6;function tk(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function C6(e={}){const{ignoreAccents:t=!0,ignoreCase:o=!0,limit:l,matchFrom:h="any",stringify:p,trim:_=!1}=e;return(a,{inputValue:w,getOptionLabel:C})=>{let M=_?w.trim():w;o&&(M=M.toLowerCase()),t&&(M=tk(M));const D=M?a.filter(R=>{let $=(p||C)(R);return o&&($=$.toLowerCase()),t&&($=tk($)),h==="start"?$.indexOf(M)===0:$.indexOf(M)>-1}):a;return typeof l=="number"?D.slice(0,l):D}}function y1(e,t){for(let o=0;o<e.length;o+=1)if(t(e[o]))return o;return-1}const E6=C6(),nk=5,k6=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function P6(e){const{unstable_isActiveElementInListbox:t=k6,unstable_classNamePrefix:o="Mui",autoComplete:l=!1,autoHighlight:h=!1,autoSelect:p=!1,blurOnSelect:_=!1,clearOnBlur:a=!e.freeSolo,clearOnEscape:w=!1,componentName:C="useAutocomplete",defaultValue:M=e.multiple?[]:null,disableClearable:D=!1,disableCloseOnSelect:R=!1,disabled:$,disabledItemsFocusable:j=!1,disableListWrap:B=!1,filterOptions:K=E6,filterSelectedOptions:N=!1,freeSolo:U=!1,getOptionDisabled:G,getOptionLabel:Y=Qe=>{var ot;return(ot=Qe.label)!=null?ot:Qe},groupBy:Q,handleHomeEndKeys:re=!e.freeSolo,id:oe,includeInputInList:de=!1,inputValue:ae,isOptionEqualToValue:ye=(Qe,ot)=>Qe===ot,multiple:Ce=!1,onChange:Fe,onClose:be,onHighlightChange:we,onInputChange:ue,onOpen:Be,open:Ae,openOnFocus:Se=!1,options:ke,readOnly:Ne=!1,selectOnFocus:nt=!e.freeSolo,value:vt}=e,gt=wu(oe);let rt=Y;rt=Qe=>{const ot=Y(Qe);return typeof ot!="string"?String(ot):ot};const xt=W.useRef(!1),ht=W.useRef(!0),mt=W.useRef(null),Ot=W.useRef(null),[Nt,at]=W.useState(null),[Je,it]=W.useState(-1),St=h?0:-1,Gt=W.useRef(St),[He,Vt]=Uo({controlled:vt,default:M,name:C}),[lt,jt]=Uo({controlled:ae,default:"",name:C,state:"inputValue"}),[Ut,$t]=W.useState(!1),Lt=W.useCallback((Qe,ot)=>{if(!(Ce?He.length<ot.length:ot!==null)&&!a)return;let hn;if(Ce)hn="";else if(ot==null)hn="";else{const Qn=rt(ot);hn=typeof Qn=="string"?Qn:""}lt!==hn&&(jt(hn),ue&&ue(Qe,hn,"reset"))},[rt,lt,Ce,ue,jt,a,He]),[un,kn]=Uo({controlled:Ae,default:!1,name:C,state:"open"}),[Hn,dn]=W.useState(!0),En=!Ce&&He!=null&&lt===rt(He),Tn=un&&!Ne,sn=Tn?K(ke.filter(Qe=>!(N&&(Ce?He:[He]).some(ot=>ot!==null&&ye(Qe,ot)))),{inputValue:En&&Hn?"":lt,getOptionLabel:rt}):[],an=wO({filteredOptions:sn,value:He,inputValue:lt});W.useEffect(()=>{const Qe=He!==an.value;Ut&&!Qe||U&&!Qe||Lt(null,He)},[He,Lt,Ut,an.value,U]);const ln=un&&sn.length>0&&!Ne,An=mn(Qe=>{Qe===-1?mt.current.focus():Nt.querySelector(`[data-tag-index="${Qe}"]`).focus()});W.useEffect(()=>{Ce&&Je>He.length-1&&(it(-1),An(-1))},[He,Ce,Je,An]);function Ht(Qe,ot){if(!Ot.current||Qe===-1)return-1;let Jt=Qe;for(;;){if(ot==="next"&&Jt===sn.length||ot==="previous"&&Jt===-1)return-1;const hn=Ot.current.querySelector(`[data-option-index="${Jt}"]`),Qn=j?!1:!hn||hn.disabled||hn.getAttribute("aria-disabled")==="true";if(hn&&!hn.hasAttribute("tabindex")||Qn)Jt+=ot==="next"?1:-1;else return Jt}}const nn=mn(({event:Qe,index:ot,reason:Jt="auto"})=>{if(Gt.current=ot,ot===-1?mt.current.removeAttribute("aria-activedescendant"):mt.current.setAttribute("aria-activedescendant",`${gt}-option-${ot}`),we&&we(Qe,ot===-1?null:sn[ot],Jt),!Ot.current)return;const hn=Ot.current.querySelector(`[role="option"].${o}-focused`);hn&&(hn.classList.remove(`${o}-focused`),hn.classList.remove(`${o}-focusVisible`));let Qn=Ot.current;if(Ot.current.getAttribute("role")!=="listbox"&&(Qn=Ot.current.parentElement.querySelector('[role="listbox"]')),!Qn)return;if(ot===-1){Qn.scrollTop=0;return}const hi=Ot.current.querySelector(`[data-option-index="${ot}"]`);if(hi&&(hi.classList.add(`${o}-focused`),Jt==="keyboard"&&hi.classList.add(`${o}-focusVisible`),Qn.scrollHeight>Qn.clientHeight&&Jt!=="mouse")){const Hr=hi,Un=Qn.clientHeight+Qn.scrollTop,il=Hr.offsetTop+Hr.offsetHeight;il>Un?Qn.scrollTop=il-Qn.clientHeight:Hr.offsetTop-Hr.offsetHeight*(Q?1.3:0)<Qn.scrollTop&&(Qn.scrollTop=Hr.offsetTop-Hr.offsetHeight*(Q?1.3:0))}}),bn=mn(({event:Qe,diff:ot,direction:Jt="next",reason:hn="auto"})=>{if(!Tn)return;const hi=Ht((()=>{const Hr=sn.length-1;if(ot==="reset")return St;if(ot==="start")return 0;if(ot==="end")return Hr;const Un=Gt.current+ot;return Un<0?Un===-1&&de?-1:B&&Gt.current!==-1||Math.abs(ot)>1?0:Hr:Un>Hr?Un===Hr+1&&de?-1:B||Math.abs(ot)>1?Hr:0:Un})(),Jt);if(nn({index:hi,reason:hn,event:Qe}),l&&ot!=="reset")if(hi===-1)mt.current.value=lt;else{const Hr=rt(sn[hi]);mt.current.value=Hr,Hr.toLowerCase().indexOf(lt.toLowerCase())===0&&lt.length>0&&mt.current.setSelectionRange(lt.length,Hr.length)}}),$n=()=>{const Qe=(ot,Jt)=>{const hn=ot?rt(ot):"",Qn=Jt?rt(Jt):"";return hn===Qn};if(Gt.current!==-1&&an.filteredOptions&&an.filteredOptions.length!==sn.length&&an.inputValue===lt&&(Ce?He.length===an.value.length&&an.value.every((ot,Jt)=>rt(He[Jt])===rt(ot)):Qe(an.value,He))){const ot=an.filteredOptions[Gt.current];if(ot&&sn.some(hn=>rt(hn)===rt(ot)))return!0}return!1},Zn=W.useCallback(()=>{if(!Tn||$n())return;const Qe=Ce?He[0]:He;if(sn.length===0||Qe==null){bn({diff:"reset"});return}if(Ot.current){if(Qe!=null){const ot=sn[Gt.current];if(Ce&&ot&&y1(He,hn=>ye(ot,hn))!==-1)return;const Jt=y1(sn,hn=>ye(hn,Qe));Jt===-1?bn({diff:"reset"}):nn({index:Jt});return}if(Gt.current>=sn.length-1){nn({index:sn.length-1});return}nn({index:Gt.current})}},[sn.length,Ce?!1:He,N,bn,nn,Tn,lt,Ce]),Ar=mn(Qe=>{L0(Ot,Qe),Qe&&Zn()});W.useEffect(()=>{Zn()},[Zn]);const Nr=Qe=>{un||(kn(!0),dn(!0),Be&&Be(Qe))},ge=(Qe,ot)=>{un&&(kn(!1),be&&be(Qe,ot))},J=(Qe,ot,Jt,hn)=>{if(Ce){if(He.length===ot.length&&He.every((Qn,hi)=>Qn===ot[hi]))return}else if(He===ot)return;Fe&&Fe(Qe,ot,Jt,hn),Vt(ot)},ee=W.useRef(!1),_e=(Qe,ot,Jt="selectOption",hn="options")=>{let Qn=Jt,hi=ot;if(Ce){hi=Array.isArray(He)?He.slice():[];const Hr=y1(hi,Un=>ye(ot,Un));Hr===-1?hi.push(ot):hn!=="freeSolo"&&(hi.splice(Hr,1),Qn="removeOption")}Lt(Qe,hi),J(Qe,hi,Qn,{option:ot}),!R&&(!Qe||!Qe.ctrlKey&&!Qe.metaKey)&&ge(Qe,Qn),(_===!0||_==="touch"&&ee.current||_==="mouse"&&!ee.current)&&mt.current.blur()};function Me(Qe,ot){if(Qe===-1)return-1;let Jt=Qe;for(;;){if(ot==="next"&&Jt===He.length||ot==="previous"&&Jt===-1)return-1;const hn=Nt.querySelector(`[data-tag-index="${Jt}"]`);if(!hn||!hn.hasAttribute("tabindex")||hn.disabled||hn.getAttribute("aria-disabled")==="true")Jt+=ot==="next"?1:-1;else return Jt}}const Le=(Qe,ot)=>{if(!Ce)return;lt===""&&ge(Qe,"toggleInput");let Jt=Je;Je===-1?lt===""&&ot==="previous"&&(Jt=He.length-1):(Jt+=ot==="next"?1:-1,Jt<0&&(Jt=0),Jt===He.length&&(Jt=-1)),Jt=Me(Jt,ot),it(Jt),An(Jt)},We=Qe=>{xt.current=!0,jt(""),ue&&ue(Qe,"","clear"),J(Qe,Ce?[]:null,"clear")},je=Qe=>ot=>{if(Qe.onKeyDown&&Qe.onKeyDown(ot),!ot.defaultMuiPrevented&&(Je!==-1&&["ArrowLeft","ArrowRight"].indexOf(ot.key)===-1&&(it(-1),An(-1)),ot.which!==229))switch(ot.key){case"Home":Tn&&re&&(ot.preventDefault(),bn({diff:"start",direction:"next",reason:"keyboard",event:ot}));break;case"End":Tn&&re&&(ot.preventDefault(),bn({diff:"end",direction:"previous",reason:"keyboard",event:ot}));break;case"PageUp":ot.preventDefault(),bn({diff:-nk,direction:"previous",reason:"keyboard",event:ot}),Nr(ot);break;case"PageDown":ot.preventDefault(),bn({diff:nk,direction:"next",reason:"keyboard",event:ot}),Nr(ot);break;case"ArrowDown":ot.preventDefault(),bn({diff:1,direction:"next",reason:"keyboard",event:ot}),Nr(ot);break;case"ArrowUp":ot.preventDefault(),bn({diff:-1,direction:"previous",reason:"keyboard",event:ot}),Nr(ot);break;case"ArrowLeft":Le(ot,"previous");break;case"ArrowRight":Le(ot,"next");break;case"Enter":if(Gt.current!==-1&&Tn){const Jt=sn[Gt.current],hn=G?G(Jt):!1;if(ot.preventDefault(),hn)return;_e(ot,Jt,"selectOption"),l&&mt.current.setSelectionRange(mt.current.value.length,mt.current.value.length)}else U&&lt!==""&&En===!1&&(Ce&&ot.preventDefault(),_e(ot,lt,"createOption","freeSolo"));break;case"Escape":Tn?(ot.preventDefault(),ot.stopPropagation(),ge(ot,"escape")):w&&(lt!==""||Ce&&He.length>0)&&(ot.preventDefault(),ot.stopPropagation(),We(ot));break;case"Backspace":if(Ce&&!Ne&&lt===""&&He.length>0){const Jt=Je===-1?He.length-1:Je,hn=He.slice();hn.splice(Jt,1),J(ot,hn,"removeOption",{option:He[Jt]})}break;case"Delete":if(Ce&&!Ne&&lt===""&&He.length>0&&Je!==-1){const Jt=Je,hn=He.slice();hn.splice(Jt,1),J(ot,hn,"removeOption",{option:He[Jt]})}break}},Oe=Qe=>{$t(!0),Se&&!xt.current&&Nr(Qe)},Ge=Qe=>{if(t(Ot)){mt.current.focus();return}$t(!1),ht.current=!0,xt.current=!1,p&&Gt.current!==-1&&Tn?_e(Qe,sn[Gt.current],"blur"):p&&U&&lt!==""?_e(Qe,lt,"blur","freeSolo"):a&&Lt(Qe,He),ge(Qe,"blur")},bt=Qe=>{const ot=Qe.target.value;lt!==ot&&(jt(ot),dn(!1),ue&&ue(Qe,ot,"input")),ot===""?!D&&!Ce&&J(Qe,null,"clear"):Nr(Qe)},zt=Qe=>{const ot=Number(Qe.currentTarget.getAttribute("data-option-index"));Gt.current!==ot&&nn({event:Qe,index:ot,reason:"mouse"})},Mt=Qe=>{nn({event:Qe,index:Number(Qe.currentTarget.getAttribute("data-option-index")),reason:"touch"}),ee.current=!0},Mn=Qe=>{const ot=Number(Qe.currentTarget.getAttribute("data-option-index"));_e(Qe,sn[ot],"selectOption"),ee.current=!1},Fn=Qe=>ot=>{const Jt=He.slice();Jt.splice(Qe,1),J(ot,Jt,"removeOption",{option:He[Qe]})},Pn=Qe=>{un?ge(Qe,"toggleInput"):Nr(Qe)},Dn=Qe=>{Qe.currentTarget.contains(Qe.target)&&Qe.target.getAttribute("id")!==gt&&Qe.preventDefault()},Nn=Qe=>{Qe.currentTarget.contains(Qe.target)&&(mt.current.focus(),nt&&ht.current&&mt.current.selectionEnd-mt.current.selectionStart===0&&mt.current.select(),ht.current=!1)},sr=Qe=>{(lt===""||!un)&&Pn(Qe)};let _r=U&&lt.length>0;_r=_r||(Ce?He.length>0:He!==null);let Ur=sn;return Q&&(Ur=sn.reduce((Qe,ot,Jt)=>{const hn=Q(ot);return Qe.length>0&&Qe[Qe.length-1].group===hn?Qe[Qe.length-1].options.push(ot):Qe.push({key:Jt,index:Jt,group:hn,options:[ot]}),Qe},[])),$&&Ut&&Ge(),{getRootProps:(Qe={})=>H({"aria-owns":ln?`${gt}-listbox`:null},Qe,{onKeyDown:je(Qe),onMouseDown:Dn,onClick:Nn}),getInputLabelProps:()=>({id:`${gt}-label`,htmlFor:gt}),getInputProps:()=>({id:gt,value:lt,onBlur:Ge,onFocus:Oe,onChange:bt,onMouseDown:sr,"aria-activedescendant":Tn?"":null,"aria-autocomplete":l?"both":"list","aria-controls":ln?`${gt}-listbox`:void 0,"aria-expanded":ln,autoComplete:"off",ref:mt,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:$}),getClearProps:()=>({tabIndex:-1,onClick:We}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:Pn}),getTagProps:({index:Qe})=>H({key:Qe,"data-tag-index":Qe,tabIndex:-1},!Ne&&{onDelete:Fn(Qe)}),getListboxProps:()=>({role:"listbox",id:`${gt}-listbox`,"aria-labelledby":`${gt}-label`,ref:Ar,onMouseDown:Qe=>{Qe.preventDefault()}}),getOptionProps:({index:Qe,option:ot})=>{const Jt=(Ce?He:[He]).some(Qn=>Qn!=null&&ye(ot,Qn)),hn=G?G(ot):!1;return{key:rt(ot),tabIndex:-1,role:"option",id:`${gt}-option-${Qe}`,onMouseMove:zt,onClick:Mn,onTouchStart:Mt,"data-option-index":Qe,"aria-disabled":hn,"aria-selected":Jt}},id:gt,inputValue:lt,value:He,dirty:_r,expanded:Tn&&Nt,popupOpen:Tn,focused:Ut||Je!==-1,anchorEl:Nt,setAnchorEl:at,focusedTag:Je,groupedOptions:Ur}}function p3(e){var t=Object.create(null);return function(o){return t[o]===void 0&&(t[o]=e(o)),t[o]}}var M6=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,I6=p3(function(e){return M6.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function A6(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function D6(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var z6=function(){function e(o){var l=this;this._insertTag=function(h){var p;l.tags.length===0?l.insertionPoint?p=l.insertionPoint.nextSibling:l.prepend?p=l.container.firstChild:p=l.before:p=l.tags[l.tags.length-1].nextSibling,l.container.insertBefore(h,p),l.tags.push(h)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(l){l.forEach(this._insertTag)},t.insert=function(l){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(D6(this));var h=this.tags[this.tags.length-1];if(this.isSpeedy){var p=A6(h);try{p.insertRule(l,p.cssRules.length)}catch{}}else h.appendChild(document.createTextNode(l));this.ctr++},t.flush=function(){this.tags.forEach(function(l){return l.parentNode&&l.parentNode.removeChild(l)}),this.tags=[],this.ctr=0},e}(),Ki="-ms-",B0="-moz-",Sr="-webkit-",f3="comm",Jw="rule",Qw="decl",R6="@import",m3="@keyframes",L6="@layer",O6=Math.abs,p_=String.fromCharCode,B6=Object.assign;function F6(e,t){return Fi(e,0)^45?(((t<<2^Fi(e,0))<<2^Fi(e,1))<<2^Fi(e,2))<<2^Fi(e,3):0}function g3(e){return e.trim()}function $6(e,t){return(e=t.exec(e))?e[0]:e}function Tr(e,t,o){return e.replace(t,o)}function Db(e,t){return e.indexOf(t)}function Fi(e,t){return e.charCodeAt(t)|0}function xm(e,t,o){return e.slice(t,o)}function ca(e){return e.length}function e2(e){return e.length}function Ry(e,t){return t.push(e),e}function N6(e,t){return e.map(t).join("")}var f_=1,xh=1,y3=0,ko=0,vi=0,kh="";function m_(e,t,o,l,h,p,_){return{value:e,root:t,parent:o,type:l,props:h,children:p,line:f_,column:xh,length:_,return:""}}function _f(e,t){return B6(m_("",null,null,"",null,null,0),e,{length:-e.length},t)}function U6(){return vi}function V6(){return vi=ko>0?Fi(kh,--ko):0,xh--,vi===10&&(xh=1,f_--),vi}function Vo(){return vi=ko<y3?Fi(kh,ko++):0,xh++,vi===10&&(xh=1,f_++),vi}function va(){return Fi(kh,ko)}function t0(){return ko}function Om(e,t){return xm(kh,e,t)}function bm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _3(e){return f_=xh=1,y3=ca(kh=e),ko=0,[]}function v3(e){return kh="",e}function n0(e){return g3(Om(ko-1,zb(e===91?e+2:e===40?e+1:e)))}function j6(e){for(;(vi=va())&&vi<33;)Vo();return bm(e)>2||bm(vi)>3?"":" "}function W6(e,t){for(;--t&&Vo()&&!(vi<48||vi>102||vi>57&&vi<65||vi>70&&vi<97););return Om(e,t0()+(t<6&&va()==32&&Vo()==32))}function zb(e){for(;Vo();)switch(vi){case e:return ko;case 34:case 39:e!==34&&e!==39&&zb(vi);break;case 40:e===41&&zb(e);break;case 92:Vo();break}return ko}function G6(e,t){for(;Vo()&&e+vi!==47+10;)if(e+vi===42+42&&va()===47)break;return"/*"+Om(t,ko-1)+"*"+p_(e===47?e:Vo())}function H6(e){for(;!bm(va());)Vo();return Om(e,ko)}function q6(e){return v3(r0("",null,null,null,[""],e=_3(e),0,[0],e))}function r0(e,t,o,l,h,p,_,a,w){for(var C=0,M=0,D=_,R=0,$=0,j=0,B=1,K=1,N=1,U=0,G="",Y=h,Q=p,re=l,oe=G;K;)switch(j=U,U=Vo()){case 40:if(j!=108&&Fi(oe,D-1)==58){Db(oe+=Tr(n0(U),"&","&\f"),"&\f")!=-1&&(N=-1);break}case 34:case 39:case 91:oe+=n0(U);break;case 9:case 10:case 13:case 32:oe+=j6(j);break;case 92:oe+=W6(t0()-1,7);continue;case 47:switch(va()){case 42:case 47:Ry(Z6(G6(Vo(),t0()),t,o),w);break;default:oe+="/"}break;case 123*B:a[C++]=ca(oe)*N;case 125*B:case 59:case 0:switch(U){case 0:case 125:K=0;case 59+M:N==-1&&(oe=Tr(oe,/\f/g,"")),$>0&&ca(oe)-D&&Ry($>32?ik(oe+";",l,o,D-1):ik(Tr(oe," ","")+";",l,o,D-2),w);break;case 59:oe+=";";default:if(Ry(re=rk(oe,t,o,C,M,h,a,G,Y=[],Q=[],D),p),U===123)if(M===0)r0(oe,t,re,re,Y,p,D,a,Q);else switch(R===99&&Fi(oe,3)===110?100:R){case 100:case 108:case 109:case 115:r0(e,re,re,l&&Ry(rk(e,re,re,0,0,h,a,G,h,Y=[],D),Q),h,Q,D,a,l?Y:Q);break;default:r0(oe,re,re,re,[""],Q,0,a,Q)}}C=M=$=0,B=N=1,G=oe="",D=_;break;case 58:D=1+ca(oe),$=j;default:if(B<1){if(U==123)--B;else if(U==125&&B++==0&&V6()==125)continue}switch(oe+=p_(U),U*B){case 38:N=M>0?1:(oe+="\f",-1);break;case 44:a[C++]=(ca(oe)-1)*N,N=1;break;case 64:va()===45&&(oe+=n0(Vo())),R=va(),M=D=ca(G=oe+=H6(t0())),U++;break;case 45:j===45&&ca(oe)==2&&(B=0)}}return p}function rk(e,t,o,l,h,p,_,a,w,C,M){for(var D=h-1,R=h===0?p:[""],$=e2(R),j=0,B=0,K=0;j<l;++j)for(var N=0,U=xm(e,D+1,D=O6(B=_[j])),G=e;N<$;++N)(G=g3(B>0?R[N]+" "+U:Tr(U,/&\f/g,R[N])))&&(w[K++]=G);return m_(e,t,o,h===0?Jw:a,w,C,M)}function Z6(e,t,o){return m_(e,t,o,f3,p_(U6()),xm(e,2,-2),0)}function ik(e,t,o,l){return m_(e,t,o,Qw,xm(e,0,l),xm(e,l+1,-1),l)}function nh(e,t){for(var o="",l=e2(e),h=0;h<l;h++)o+=t(e[h],h,e,t)||"";return o}function X6(e,t,o,l){switch(e.type){case L6:if(e.children.length)break;case R6:case Qw:return e.return=e.return||e.value;case f3:return"";case m3:return e.return=e.value+"{"+nh(e.children,l)+"}";case Jw:e.value=e.props.join(",")}return ca(o=nh(e.children,l))?e.return=e.value+"{"+o+"}":""}function Y6(e){var t=e2(e);return function(o,l,h,p){for(var _="",a=0;a<t;a++)_+=e[a](o,l,h,p)||"";return _}}function K6(e){return function(t){t.root||(t=t.return)&&e(t)}}var J6=function(t,o,l){for(var h=0,p=0;h=p,p=va(),h===38&&p===12&&(o[l]=1),!bm(p);)Vo();return Om(t,ko)},Q6=function(t,o){var l=-1,h=44;do switch(bm(h)){case 0:h===38&&va()===12&&(o[l]=1),t[l]+=J6(ko-1,o,l);break;case 2:t[l]+=n0(h);break;case 4:if(h===44){t[++l]=va()===58?"&\f":"",o[l]=t[l].length;break}default:t[l]+=p_(h)}while(h=Vo());return t},eF=function(t,o){return v3(Q6(_3(t),o))},ok=new WeakMap,tF=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var o=t.value,l=t.parent,h=t.column===l.column&&t.line===l.line;l.type!=="rule";)if(l=l.parent,!l)return;if(!(t.props.length===1&&o.charCodeAt(0)!==58&&!ok.get(l))&&!h){ok.set(t,!0);for(var p=[],_=eF(o,p),a=l.props,w=0,C=0;w<_.length;w++)for(var M=0;M<a.length;M++,C++)t.props[C]=p[w]?_[w].replace(/&\f/g,a[M]):a[M]+" "+_[w]}}},nF=function(t){if(t.type==="decl"){var o=t.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(t.return="",t.value="")}};function x3(e,t){switch(F6(e,t)){case 5103:return Sr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Sr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Sr+e+B0+e+Ki+e+e;case 6828:case 4268:return Sr+e+Ki+e+e;case 6165:return Sr+e+Ki+"flex-"+e+e;case 5187:return Sr+e+Tr(e,/(\w+).+(:[^]+)/,Sr+"box-$1$2"+Ki+"flex-$1$2")+e;case 5443:return Sr+e+Ki+"flex-item-"+Tr(e,/flex-|-self/,"")+e;case 4675:return Sr+e+Ki+"flex-line-pack"+Tr(e,/align-content|flex-|-self/,"")+e;case 5548:return Sr+e+Ki+Tr(e,"shrink","negative")+e;case 5292:return Sr+e+Ki+Tr(e,"basis","preferred-size")+e;case 6060:return Sr+"box-"+Tr(e,"-grow","")+Sr+e+Ki+Tr(e,"grow","positive")+e;case 4554:return Sr+Tr(e,/([^-])(transform)/g,"$1"+Sr+"$2")+e;case 6187:return Tr(Tr(Tr(e,/(zoom-|grab)/,Sr+"$1"),/(image-set)/,Sr+"$1"),e,"")+e;case 5495:case 3959:return Tr(e,/(image-set\([^]*)/,Sr+"$1$`$1");case 4968:return Tr(Tr(e,/(.+:)(flex-)?(.*)/,Sr+"box-pack:$3"+Ki+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Sr+e+e;case 4095:case 3583:case 4068:case 2532:return Tr(e,/(.+)-inline(.+)/,Sr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ca(e)-1-t>6)switch(Fi(e,t+1)){case 109:if(Fi(e,t+4)!==45)break;case 102:return Tr(e,/(.+:)(.+)-([^]+)/,"$1"+Sr+"$2-$3$1"+B0+(Fi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Db(e,"stretch")?x3(Tr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Fi(e,t+1)!==115)break;case 6444:switch(Fi(e,ca(e)-3-(~Db(e,"!important")&&10))){case 107:return Tr(e,":",":"+Sr)+e;case 101:return Tr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Sr+(Fi(e,14)===45?"inline-":"")+"box$3$1"+Sr+"$2$3$1"+Ki+"$2box$3")+e}break;case 5936:switch(Fi(e,t+11)){case 114:return Sr+e+Ki+Tr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Sr+e+Ki+Tr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Sr+e+Ki+Tr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Sr+e+Ki+e+e}return e}var rF=function(t,o,l,h){if(t.length>-1&&!t.return)switch(t.type){case Qw:t.return=x3(t.value,t.length);break;case m3:return nh([_f(t,{value:Tr(t.value,"@","@"+Sr)})],h);case Jw:if(t.length)return N6(t.props,function(p){switch($6(p,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return nh([_f(t,{props:[Tr(p,/:(read-\w+)/,":"+B0+"$1")]})],h);case"::placeholder":return nh([_f(t,{props:[Tr(p,/:(plac\w+)/,":"+Sr+"input-$1")]}),_f(t,{props:[Tr(p,/:(plac\w+)/,":"+B0+"$1")]}),_f(t,{props:[Tr(p,/:(plac\w+)/,Ki+"input-$1")]})],h)}return""})}},iF=[rF],oF=function(t){var o=t.key;if(o==="css"){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,function(B){var K=B.getAttribute("data-emotion");K.indexOf(" ")!==-1&&(document.head.appendChild(B),B.setAttribute("data-s",""))})}var h=t.stylisPlugins||iF,p={},_,a=[];_=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(B){for(var K=B.getAttribute("data-emotion").split(" "),N=1;N<K.length;N++)p[K[N]]=!0;a.push(B)});var w,C=[tF,nF];{var M,D=[X6,K6(function(B){M.insert(B)})],R=Y6(C.concat(h,D)),$=function(K){return nh(q6(K),R)};w=function(K,N,U,G){M=U,$(K?K+"{"+N.styles+"}":N.styles),G&&(j.inserted[N.name]=!0)}}var j={key:o,sheet:new z6({key:o,container:_,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:p,registered:{},insert:w};return j.sheet.hydrate(a),j},b3={exports:{}},Ir={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=typeof Symbol=="function"&&Symbol.for,t2=Li?Symbol.for("react.element"):60103,n2=Li?Symbol.for("react.portal"):60106,g_=Li?Symbol.for("react.fragment"):60107,y_=Li?Symbol.for("react.strict_mode"):60108,__=Li?Symbol.for("react.profiler"):60114,v_=Li?Symbol.for("react.provider"):60109,x_=Li?Symbol.for("react.context"):60110,r2=Li?Symbol.for("react.async_mode"):60111,b_=Li?Symbol.for("react.concurrent_mode"):60111,w_=Li?Symbol.for("react.forward_ref"):60112,S_=Li?Symbol.for("react.suspense"):60113,sF=Li?Symbol.for("react.suspense_list"):60120,T_=Li?Symbol.for("react.memo"):60115,C_=Li?Symbol.for("react.lazy"):60116,aF=Li?Symbol.for("react.block"):60121,lF=Li?Symbol.for("react.fundamental"):60117,cF=Li?Symbol.for("react.responder"):60118,uF=Li?Symbol.for("react.scope"):60119;function qo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case t2:switch(e=e.type,e){case r2:case b_:case g_:case __:case y_:case S_:return e;default:switch(e=e&&e.$$typeof,e){case x_:case w_:case C_:case T_:case v_:return e;default:return t}}case n2:return t}}}function w3(e){return qo(e)===b_}Ir.AsyncMode=r2;Ir.ConcurrentMode=b_;Ir.ContextConsumer=x_;Ir.ContextProvider=v_;Ir.Element=t2;Ir.ForwardRef=w_;Ir.Fragment=g_;Ir.Lazy=C_;Ir.Memo=T_;Ir.Portal=n2;Ir.Profiler=__;Ir.StrictMode=y_;Ir.Suspense=S_;Ir.isAsyncMode=function(e){return w3(e)||qo(e)===r2};Ir.isConcurrentMode=w3;Ir.isContextConsumer=function(e){return qo(e)===x_};Ir.isContextProvider=function(e){return qo(e)===v_};Ir.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===t2};Ir.isForwardRef=function(e){return qo(e)===w_};Ir.isFragment=function(e){return qo(e)===g_};Ir.isLazy=function(e){return qo(e)===C_};Ir.isMemo=function(e){return qo(e)===T_};Ir.isPortal=function(e){return qo(e)===n2};Ir.isProfiler=function(e){return qo(e)===__};Ir.isStrictMode=function(e){return qo(e)===y_};Ir.isSuspense=function(e){return qo(e)===S_};Ir.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===g_||e===b_||e===__||e===y_||e===S_||e===sF||typeof e=="object"&&e!==null&&(e.$$typeof===C_||e.$$typeof===T_||e.$$typeof===v_||e.$$typeof===x_||e.$$typeof===w_||e.$$typeof===lF||e.$$typeof===cF||e.$$typeof===uF||e.$$typeof===aF)};Ir.typeOf=qo;b3.exports=Ir;var dF=b3.exports,S3=dF,hF={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},pF={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},T3={};T3[S3.ForwardRef]=hF;T3[S3.Memo]=pF;var fF=!0;function mF(e,t,o){var l="";return o.split(" ").forEach(function(h){e[h]!==void 0?t.push(e[h]+";"):l+=h+" "}),l}var C3=function(t,o,l){var h=t.key+"-"+o.name;(l===!1||fF===!1)&&t.registered[h]===void 0&&(t.registered[h]=o.styles)},E3=function(t,o,l){C3(t,o,l);var h=t.key+"-"+o.name;if(t.inserted[o.name]===void 0){var p=o;do t.insert(o===p?"."+h:"",p,t.sheet,!0),p=p.next;while(p!==void 0)}};function gF(e){for(var t=0,o,l=0,h=e.length;h>=4;++l,h-=4)o=e.charCodeAt(l)&255|(e.charCodeAt(++l)&255)<<8|(e.charCodeAt(++l)&255)<<16|(e.charCodeAt(++l)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(h){case 3:t^=(e.charCodeAt(l+2)&255)<<16;case 2:t^=(e.charCodeAt(l+1)&255)<<8;case 1:t^=e.charCodeAt(l)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var yF={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_F=/[A-Z]|^ms/g,vF=/_EMO_([^_]+?)_([^]*?)_EMO_/g,k3=function(t){return t.charCodeAt(1)===45},sk=function(t){return t!=null&&typeof t!="boolean"},_1=p3(function(e){return k3(e)?e:e.replace(_F,"-$&").toLowerCase()}),ak=function(t,o){switch(t){case"animation":case"animationName":if(typeof o=="string")return o.replace(vF,function(l,h,p){return ua={name:h,styles:p,next:ua},h})}return yF[t]!==1&&!k3(t)&&typeof o=="number"&&o!==0?o+"px":o};function wm(e,t,o){if(o==null)return"";if(o.__emotion_styles!==void 0)return o;switch(typeof o){case"boolean":return"";case"object":{if(o.anim===1)return ua={name:o.name,styles:o.styles,next:ua},o.name;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)ua={name:l.name,styles:l.styles,next:ua},l=l.next;var h=o.styles+";";return h}return xF(e,t,o)}case"function":{if(e!==void 0){var p=ua,_=o(e);return ua=p,wm(e,t,_)}break}}if(t==null)return o;var a=t[o];return a!==void 0?a:o}function xF(e,t,o){var l="";if(Array.isArray(o))for(var h=0;h<o.length;h++)l+=wm(e,t,o[h])+";";else for(var p in o){var _=o[p];if(typeof _!="object")t!=null&&t[_]!==void 0?l+=p+"{"+t[_]+"}":sk(_)&&(l+=_1(p)+":"+ak(p,_)+";");else if(Array.isArray(_)&&typeof _[0]=="string"&&(t==null||t[_[0]]===void 0))for(var a=0;a<_.length;a++)sk(_[a])&&(l+=_1(p)+":"+ak(p,_[a])+";");else{var w=wm(e,t,_);switch(p){case"animation":case"animationName":{l+=_1(p)+":"+w+";";break}default:l+=p+"{"+w+"}"}}}return l}var lk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ua,i2=function(t,o,l){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var h=!0,p="";ua=void 0;var _=t[0];_==null||_.raw===void 0?(h=!1,p+=wm(l,o,_)):p+=_[0];for(var a=1;a<t.length;a++)p+=wm(l,o,t[a]),h&&(p+=_[a]);lk.lastIndex=0;for(var w="",C;(C=lk.exec(p))!==null;)w+="-"+C[1];var M=gF(p)+w;return{name:M,styles:p,next:ua}},bF=function(t){return t()},P3=Qf["useInsertionEffect"]?Qf["useInsertionEffect"]:!1,wF=P3||bF,ck=P3||W.useLayoutEffect,M3=W.createContext(typeof HTMLElement<"u"?oF({key:"css"}):null);M3.Provider;var I3=function(t){return W.forwardRef(function(o,l){var h=W.useContext(M3);return t(o,h,l)})},o2=W.createContext({}),SF=I3(function(e,t){var o=e.styles,l=i2([o],void 0,W.useContext(o2)),h=W.useRef();return ck(function(){var p=t.key+"-global",_=new t.sheet.constructor({key:p,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,w=document.querySelector('style[data-emotion="'+p+" "+l.name+'"]');return t.sheet.tags.length&&(_.before=t.sheet.tags[0]),w!==null&&(a=!0,w.setAttribute("data-emotion",p),_.hydrate([w])),h.current=[_,a],function(){_.flush()}},[t]),ck(function(){var p=h.current,_=p[0],a=p[1];if(a){p[1]=!1;return}if(l.next!==void 0&&E3(t,l.next,!0),_.tags.length){var w=_.tags[_.tags.length-1].nextElementSibling;_.before=w,_.flush()}t.insert("",l,_,!1)},[t,l.name]),null});function TF(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return i2(t)}var s2=function(){var t=TF.apply(void 0,arguments),o="animation-"+t.name;return{name:o,styles:"@keyframes "+o+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},CF=I6,EF=function(t){return t!=="theme"},uk=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?CF:EF},dk=function(t,o,l){var h;if(o){var p=o.shouldForwardProp;h=t.__emotion_forwardProp&&p?function(_){return t.__emotion_forwardProp(_)&&p(_)}:p}return typeof h!="function"&&l&&(h=t.__emotion_forwardProp),h},kF=function(t){var o=t.cache,l=t.serialized,h=t.isStringTag;return C3(o,l,h),wF(function(){return E3(o,l,h)}),null},PF=function e(t,o){var l=t.__emotion_real===t,h=l&&t.__emotion_base||t,p,_;o!==void 0&&(p=o.label,_=o.target);var a=dk(t,o,l),w=a||uk(h),C=!w("as");return function(){var M=arguments,D=l&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(p!==void 0&&D.push("label:"+p+";"),M[0]==null||M[0].raw===void 0)D.push.apply(D,M);else{D.push(M[0][0]);for(var R=M.length,$=1;$<R;$++)D.push(M[$],M[0][$])}var j=I3(function(B,K,N){var U=C&&B.as||h,G="",Y=[],Q=B;if(B.theme==null){Q={};for(var re in B)Q[re]=B[re];Q.theme=W.useContext(o2)}typeof B.className=="string"?G=mF(K.registered,Y,B.className):B.className!=null&&(G=B.className+" ");var oe=i2(D.concat(Y),K.registered,Q);G+=K.key+"-"+oe.name,_!==void 0&&(G+=" "+_);var de=C&&a===void 0?uk(U):w,ae={};for(var ye in B)C&&ye==="as"||de(ye)&&(ae[ye]=B[ye]);return ae.className=G,ae.ref=N,W.createElement(W.Fragment,null,W.createElement(kF,{cache:K,serialized:oe,isStringTag:typeof U=="string"}),W.createElement(U,ae))});return j.displayName=p!==void 0?p:"Styled("+(typeof h=="string"?h:h.displayName||h.name||"Component")+")",j.defaultProps=t.defaultProps,j.__emotion_real=j,j.__emotion_base=h,j.__emotion_styles=D,j.__emotion_forwardProp=a,Object.defineProperty(j,"toString",{value:function(){return"."+_}}),j.withComponent=function(B,K){return e(B,H({},o,K,{shouldForwardProp:dk(j,K,!0)})).apply(void 0,D)},j}},MF=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Rb=PF.bind();MF.forEach(function(e){Rb[e]=Rb(e)});function IF(e){return e==null||Object.keys(e).length===0}function AF(e){const{styles:t,defaultTheme:o={}}=e,l=typeof t=="function"?h=>t(IF(h)?o:h):t;return he.jsx(SF,{styles:l})}/**
 * @mui/styled-engine v5.13.2
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function A3(e,t){return Rb(e,t)}const DF=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},zF=["values","unit","step"],RF=e=>{const t=Object.keys(e).map(o=>({key:o,val:e[o]}))||[];return t.sort((o,l)=>o.val-l.val),t.reduce((o,l)=>H({},o,{[l.key]:l.val}),{})};function LF(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:o="px",step:l=5}=e,h=Bt(e,zF),p=RF(t),_=Object.keys(p);function a(R){return`@media (min-width:${typeof t[R]=="number"?t[R]:R}${o})`}function w(R){return`@media (max-width:${(typeof t[R]=="number"?t[R]:R)-l/100}${o})`}function C(R,$){const j=_.indexOf($);return`@media (min-width:${typeof t[R]=="number"?t[R]:R}${o}) and (max-width:${(j!==-1&&typeof t[_[j]]=="number"?t[_[j]]:$)-l/100}${o})`}function M(R){return _.indexOf(R)+1<_.length?C(R,_[_.indexOf(R)+1]):a(R)}function D(R){const $=_.indexOf(R);return $===0?a(_[1]):$===_.length-1?w(_[$]):C(R,_[_.indexOf(R)+1]).replace("@media","@media not all and")}return H({keys:_,values:p,up:a,down:w,between:C,only:M,not:D,unit:o},h)}const OF={borderRadius:4},BF=OF;function Zf(e,t){return t?So(e,t,{clone:!1}):e}const a2={xs:0,sm:600,md:900,lg:1200,xl:1536},hk={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${a2[e]}px)`};function Po(e,t,o){const l=e.theme||{};if(Array.isArray(t)){const p=l.breakpoints||hk;return t.reduce((_,a,w)=>(_[p.up(p.keys[w])]=o(t[w]),_),{})}if(typeof t=="object"){const p=l.breakpoints||hk;return Object.keys(t).reduce((_,a)=>{if(Object.keys(p.values||a2).indexOf(a)!==-1){const w=p.up(a);_[w]=o(t[a],a)}else{const w=a;_[w]=t[w]}return _},{})}return o(t)}function D3(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((l,h)=>{const p=e.up(h);return l[p]={},l},{}))||{}}function z3(e,t){return e.reduce((o,l)=>{const h=o[l];return(!h||Object.keys(h).length===0)&&delete o[l],o},t)}function FF(e,...t){const o=D3(e),l=[o,...t].reduce((h,p)=>So(h,p),{});return z3(Object.keys(o),l)}function $F(e,t){if(typeof e!="object")return{};const o={},l=Object.keys(t);return Array.isArray(e)?l.forEach((h,p)=>{p<e.length&&(o[h]=!0)}):l.forEach(h=>{e[h]!=null&&(o[h]=!0)}),o}function cu({values:e,breakpoints:t,base:o}){const l=o||$F(e,t),h=Object.keys(l);if(h.length===0)return e;let p;return h.reduce((_,a,w)=>(Array.isArray(e)?(_[a]=e[w]!=null?e[w]:e[p],p=w):typeof e=="object"?(_[a]=e[a]!=null?e[a]:e[p],p=a):_[a]=e,_),{})}function E_(e,t,o=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&o){const l=`vars.${t}`.split(".").reduce((h,p)=>h&&h[p]?h[p]:null,e);if(l!=null)return l}return t.split(".").reduce((l,h)=>l&&l[h]!=null?l[h]:null,e)}function F0(e,t,o,l=o){let h;return typeof e=="function"?h=e(o):Array.isArray(e)?h=e[o]||l:h=E_(e,o)||l,t&&(h=t(h,l,e)),h}function Er(e){const{prop:t,cssProperty:o=e.prop,themeKey:l,transform:h}=e,p=_=>{if(_[t]==null)return null;const a=_[t],w=_.theme,C=E_(w,l)||{};return Po(_,a,D=>{let R=F0(C,h,D);return D===R&&typeof D=="string"&&(R=F0(C,h,`${t}${D==="default"?"":tn(D)}`,D)),o===!1?R:{[o]:R}})};return p.propTypes={},p.filterProps=[t],p}function NF(e){const t={};return o=>(t[o]===void 0&&(t[o]=e(o)),t[o])}const UF={m:"margin",p:"padding"},VF={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},pk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},jF=NF(e=>{if(e.length>2)if(pk[e])e=pk[e];else return[e];const[t,o]=e.split(""),l=UF[t],h=VF[o]||"";return Array.isArray(h)?h.map(p=>l+p):[l+h]}),l2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],c2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...l2,...c2];function Bm(e,t,o,l){var h;const p=(h=E_(e,t,!1))!=null?h:o;return typeof p=="number"?_=>typeof _=="string"?_:p*_:Array.isArray(p)?_=>typeof _=="string"?_:p[_]:typeof p=="function"?p:()=>{}}function u2(e){return Bm(e,"spacing",8)}function _u(e,t){if(typeof t=="string"||t==null)return t;const o=Math.abs(t),l=e(o);return t>=0?l:typeof l=="number"?-l:`-${l}`}function WF(e,t){return o=>e.reduce((l,h)=>(l[h]=_u(t,o),l),{})}function GF(e,t,o,l){if(t.indexOf(o)===-1)return null;const h=jF(o),p=WF(h,l),_=e[o];return Po(e,_,p)}function R3(e,t){const o=u2(e.theme);return Object.keys(e).map(l=>GF(e,t,l,o)).reduce(Zf,{})}function ci(e){return R3(e,l2)}ci.propTypes={};ci.filterProps=l2;function ui(e){return R3(e,c2)}ui.propTypes={};ui.filterProps=c2;function HF(e=8){if(e.mui)return e;const t=u2({spacing:e}),o=(...l)=>(l.length===0?[1]:l).map(p=>{const _=t(p);return typeof _=="number"?`${_}px`:_}).join(" ");return o.mui=!0,o}function k_(...e){const t=e.reduce((l,h)=>(h.filterProps.forEach(p=>{l[p]=h}),l),{}),o=l=>Object.keys(l).reduce((h,p)=>t[p]?Zf(h,t[p](l)):h,{});return o.propTypes={},o.filterProps=e.reduce((l,h)=>l.concat(h.filterProps),[]),o}function pa(e){return typeof e!="number"?e:`${e}px solid`}const qF=Er({prop:"border",themeKey:"borders",transform:pa}),ZF=Er({prop:"borderTop",themeKey:"borders",transform:pa}),XF=Er({prop:"borderRight",themeKey:"borders",transform:pa}),YF=Er({prop:"borderBottom",themeKey:"borders",transform:pa}),KF=Er({prop:"borderLeft",themeKey:"borders",transform:pa}),JF=Er({prop:"borderColor",themeKey:"palette"}),QF=Er({prop:"borderTopColor",themeKey:"palette"}),e7=Er({prop:"borderRightColor",themeKey:"palette"}),t7=Er({prop:"borderBottomColor",themeKey:"palette"}),n7=Er({prop:"borderLeftColor",themeKey:"palette"}),P_=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Bm(e.theme,"shape.borderRadius",4),o=l=>({borderRadius:_u(t,l)});return Po(e,e.borderRadius,o)}return null};P_.propTypes={};P_.filterProps=["borderRadius"];k_(qF,ZF,XF,YF,KF,JF,QF,e7,t7,n7,P_);const M_=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Bm(e.theme,"spacing",8),o=l=>({gap:_u(t,l)});return Po(e,e.gap,o)}return null};M_.propTypes={};M_.filterProps=["gap"];const I_=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Bm(e.theme,"spacing",8),o=l=>({columnGap:_u(t,l)});return Po(e,e.columnGap,o)}return null};I_.propTypes={};I_.filterProps=["columnGap"];const A_=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Bm(e.theme,"spacing",8),o=l=>({rowGap:_u(t,l)});return Po(e,e.rowGap,o)}return null};A_.propTypes={};A_.filterProps=["rowGap"];const r7=Er({prop:"gridColumn"}),i7=Er({prop:"gridRow"}),o7=Er({prop:"gridAutoFlow"}),s7=Er({prop:"gridAutoColumns"}),a7=Er({prop:"gridAutoRows"}),l7=Er({prop:"gridTemplateColumns"}),c7=Er({prop:"gridTemplateRows"}),u7=Er({prop:"gridTemplateAreas"}),d7=Er({prop:"gridArea"});k_(M_,I_,A_,r7,i7,o7,s7,a7,l7,c7,u7,d7);function rh(e,t){return t==="grey"?t:e}const h7=Er({prop:"color",themeKey:"palette",transform:rh}),p7=Er({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:rh}),f7=Er({prop:"backgroundColor",themeKey:"palette",transform:rh});k_(h7,p7,f7);function Fo(e){return e<=1&&e!==0?`${e*100}%`:e}const m7=Er({prop:"width",transform:Fo}),d2=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=o=>{var l,h,p;return{maxWidth:((l=e.theme)==null||(h=l.breakpoints)==null||(p=h.values)==null?void 0:p[o])||a2[o]||Fo(o)}};return Po(e,e.maxWidth,t)}return null};d2.filterProps=["maxWidth"];const g7=Er({prop:"minWidth",transform:Fo}),y7=Er({prop:"height",transform:Fo}),_7=Er({prop:"maxHeight",transform:Fo}),v7=Er({prop:"minHeight",transform:Fo});Er({prop:"size",cssProperty:"width",transform:Fo});Er({prop:"size",cssProperty:"height",transform:Fo});const x7=Er({prop:"boxSizing"});k_(m7,d2,g7,y7,_7,v7,x7);const b7={border:{themeKey:"borders",transform:pa},borderTop:{themeKey:"borders",transform:pa},borderRight:{themeKey:"borders",transform:pa},borderBottom:{themeKey:"borders",transform:pa},borderLeft:{themeKey:"borders",transform:pa},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:P_},color:{themeKey:"palette",transform:rh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:rh},backgroundColor:{themeKey:"palette",transform:rh},p:{style:ui},pt:{style:ui},pr:{style:ui},pb:{style:ui},pl:{style:ui},px:{style:ui},py:{style:ui},padding:{style:ui},paddingTop:{style:ui},paddingRight:{style:ui},paddingBottom:{style:ui},paddingLeft:{style:ui},paddingX:{style:ui},paddingY:{style:ui},paddingInline:{style:ui},paddingInlineStart:{style:ui},paddingInlineEnd:{style:ui},paddingBlock:{style:ui},paddingBlockStart:{style:ui},paddingBlockEnd:{style:ui},m:{style:ci},mt:{style:ci},mr:{style:ci},mb:{style:ci},ml:{style:ci},mx:{style:ci},my:{style:ci},margin:{style:ci},marginTop:{style:ci},marginRight:{style:ci},marginBottom:{style:ci},marginLeft:{style:ci},marginX:{style:ci},marginY:{style:ci},marginInline:{style:ci},marginInlineStart:{style:ci},marginInlineEnd:{style:ci},marginBlock:{style:ci},marginBlockStart:{style:ci},marginBlockEnd:{style:ci},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:M_},rowGap:{style:A_},columnGap:{style:I_},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Fo},maxWidth:{style:d2},minWidth:{transform:Fo},height:{transform:Fo},maxHeight:{transform:Fo},minHeight:{transform:Fo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},D_=b7;function w7(...e){const t=e.reduce((l,h)=>l.concat(Object.keys(h)),[]),o=new Set(t);return e.every(l=>o.size===Object.keys(l).length)}function S7(e,t){return typeof e=="function"?e(t):e}function T7(){function e(o,l,h,p){const _={[o]:l,theme:h},a=p[o];if(!a)return{[o]:l};const{cssProperty:w=o,themeKey:C,transform:M,style:D}=a;if(l==null)return null;if(C==="typography"&&l==="inherit")return{[o]:l};const R=E_(h,C)||{};return D?D(_):Po(_,l,j=>{let B=F0(R,M,j);return j===B&&typeof j=="string"&&(B=F0(R,M,`${o}${j==="default"?"":tn(j)}`,j)),w===!1?B:{[w]:B}})}function t(o){var l;const{sx:h,theme:p={}}=o||{};if(!h)return null;const _=(l=p.unstable_sxConfig)!=null?l:D_;function a(w){let C=w;if(typeof w=="function")C=w(p);else if(typeof w!="object")return w;if(!C)return null;const M=D3(p.breakpoints),D=Object.keys(M);let R=M;return Object.keys(C).forEach($=>{const j=S7(C[$],p);if(j!=null)if(typeof j=="object")if(_[$])R=Zf(R,e($,j,p,_));else{const B=Po({theme:p},j,K=>({[$]:K}));w7(B,j)?R[$]=t({sx:j,theme:p}):R=Zf(R,B)}else R=Zf(R,e($,j,p,_))}),z3(D,R)}return Array.isArray(h)?h.map(a):a(h)}return t}const L3=T7();L3.filterProps=["sx"];const z_=L3,C7=["breakpoints","palette","spacing","shape"];function R_(e={},...t){const{breakpoints:o={},palette:l={},spacing:h,shape:p={}}=e,_=Bt(e,C7),a=LF(o),w=HF(h);let C=So({breakpoints:a,direction:"ltr",components:{},palette:H({mode:"light"},l),spacing:w,shape:H({},BF,p)},_);return C=t.reduce((M,D)=>So(M,D),C),C.unstable_sxConfig=H({},D_,_==null?void 0:_.unstable_sxConfig),C.unstable_sx=function(D){return z_({sx:D,theme:this})},C}function E7(e){return Object.keys(e).length===0}function h2(e=null){const t=W.useContext(o2);return!t||E7(t)?e:t}const k7=R_();function Ph(e=k7){return h2(e)}function P7({styles:e,themeId:t,defaultTheme:o={}}){const l=Ph(o),h=typeof e=="function"?e(t&&l[t]||l):e;return he.jsx(AF,{styles:h})}const M7=["sx"],I7=e=>{var t,o;const l={systemProps:{},otherProps:{}},h=(t=e==null||(o=e.theme)==null?void 0:o.unstable_sxConfig)!=null?t:D_;return Object.keys(e).forEach(p=>{h[p]?l.systemProps[p]=e[p]:l.otherProps[p]=e[p]}),l};function L_(e){const{sx:t}=e,o=Bt(e,M7),{systemProps:l,otherProps:h}=I7(o);let p;return Array.isArray(t)?p=[l,...t]:typeof t=="function"?p=(..._)=>{const a=t(..._);return tu(a)?H({},l,a):l}:p=H({},l,t),H({},h,{sx:p})}const A7=["className","component"];function D7(e={}){const{themeId:t,defaultTheme:o,defaultClassName:l="MuiBox-root",generateClassName:h}=e,p=A3("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(z_);return W.forwardRef(function(w,C){const M=Ph(o),D=L_(w),{className:R,component:$="div"}=D,j=Bt(D,A7);return he.jsx(p,H({as:$,ref:C,className:Zt(R,h?h(l):l),theme:t&&M[t]||M},j))})}const z7=["variant"];function fk(e){return e.length===0}function O3(e){const{variant:t}=e,o=Bt(e,z7);let l=t||"";return Object.keys(o).sort().forEach(h=>{h==="color"?l+=fk(l)?e[h]:tn(e[h]):l+=`${fk(l)?h:tn(h)}${tn(e[h].toString())}`}),l}const R7=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function L7(e){return Object.keys(e).length===0}function O7(e){return typeof e=="string"&&e.charCodeAt(0)>96}const B7=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,F7=(e,t)=>{let o=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(o=t.components[e].variants);const l={};return o.forEach(h=>{const p=O3(h.props);l[p]=h.style}),l},$7=(e,t,o,l)=>{var h,p;const{ownerState:_={}}=e,a=[],w=o==null||(h=o.components)==null||(p=h[l])==null?void 0:p.variants;return w&&w.forEach(C=>{let M=!0;Object.keys(C.props).forEach(D=>{_[D]!==C.props[D]&&e[D]!==C.props[D]&&(M=!1)}),M&&a.push(t[O3(C.props)])}),a};function Xf(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const N7=R_();function vf({defaultTheme:e,theme:t,themeId:o}){return L7(t)?e:t[o]||t}function B3(e={}){const{themeId:t,defaultTheme:o=N7,rootShouldForwardProp:l=Xf,slotShouldForwardProp:h=Xf}=e,p=_=>z_(H({},_,{theme:vf(H({},_,{defaultTheme:o,themeId:t}))}));return p.__mui_systemSx=!0,(_,a={})=>{DF(_,Y=>Y.filter(Q=>!(Q!=null&&Q.__mui_systemSx)));const{name:w,slot:C,skipVariantsResolver:M,skipSx:D,overridesResolver:R}=a,$=Bt(a,R7),j=M!==void 0?M:C&&C!=="Root"||!1,B=D||!1;let K,N=Xf;C==="Root"?N=l:C?N=h:O7(_)&&(N=void 0);const U=A3(_,H({shouldForwardProp:N,label:K},$)),G=(Y,...Q)=>{const re=Q?Q.map(ye=>typeof ye=="function"&&ye.__emotion_real!==ye?Ce=>ye(H({},Ce,{theme:vf(H({},Ce,{defaultTheme:o,themeId:t}))})):ye):[];let oe=Y;w&&R&&re.push(ye=>{const Ce=vf(H({},ye,{defaultTheme:o,themeId:t})),Fe=B7(w,Ce);if(Fe){const be={};return Object.entries(Fe).forEach(([we,ue])=>{be[we]=typeof ue=="function"?ue(H({},ye,{theme:Ce})):ue}),R(ye,be)}return null}),w&&!j&&re.push(ye=>{const Ce=vf(H({},ye,{defaultTheme:o,themeId:t}));return $7(ye,F7(w,Ce),Ce,w)}),B||re.push(p);const de=re.length-Q.length;if(Array.isArray(Y)&&de>0){const ye=new Array(de).fill("");oe=[...Y,...ye],oe.raw=[...Y.raw,...ye]}else typeof Y=="function"&&Y.__emotion_real!==Y&&(oe=ye=>Y(H({},ye,{theme:vf(H({},ye,{defaultTheme:o,themeId:t}))})));const ae=U(oe,...re);return _.muiName&&(ae.muiName=_.muiName),ae};return U.withConfig&&(G.withConfig=U.withConfig),G}}const U7=B3(),V7=U7;function F3(e){const{theme:t,name:o,props:l}=e;return!t||!t.components||!t.components[o]||!t.components[o].defaultProps?l:Ww(t.components[o].defaultProps,l)}function $3({props:e,name:t,defaultTheme:o,themeId:l}){let h=Ph(o);return l&&(h=h[l]||h),F3({theme:h,name:t,props:e})}function p2(e,t=0,o=1){return Math.min(Math.max(t,e),o)}function j7(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let o=e.match(t);return o&&o[0].length===1&&(o=o.map(l=>l+l)),o?`rgb${o.length===4?"a":""}(${o.map((l,h)=>h<3?parseInt(l,16):Math.round(parseInt(l,16)/255*1e3)/1e3).join(", ")})`:""}function vu(e){if(e.type)return e;if(e.charAt(0)==="#")return vu(j7(e));const t=e.indexOf("("),o=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(o)===-1)throw new Error(nc(9,e));let l=e.substring(t+1,e.length-1),h;if(o==="color"){if(l=l.split(" "),h=l.shift(),l.length===4&&l[3].charAt(0)==="/"&&(l[3]=l[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(h)===-1)throw new Error(nc(10,h))}else l=l.split(",");return l=l.map(p=>parseFloat(p)),{type:o,values:l,colorSpace:h}}function O_(e){const{type:t,colorSpace:o}=e;let{values:l}=e;return t.indexOf("rgb")!==-1?l=l.map((h,p)=>p<3?parseInt(h,10):h):t.indexOf("hsl")!==-1&&(l[1]=`${l[1]}%`,l[2]=`${l[2]}%`),t.indexOf("color")!==-1?l=`${o} ${l.join(" ")}`:l=`${l.join(", ")}`,`${t}(${l})`}function W7(e){e=vu(e);const{values:t}=e,o=t[0],l=t[1]/100,h=t[2]/100,p=l*Math.min(h,1-h),_=(C,M=(C+o/30)%12)=>h-p*Math.max(Math.min(M-3,9-M,1),-1);let a="rgb";const w=[Math.round(_(0)*255),Math.round(_(8)*255),Math.round(_(4)*255)];return e.type==="hsla"&&(a+="a",w.push(t[3])),O_({type:a,values:w})}function mk(e){e=vu(e);let t=e.type==="hsl"||e.type==="hsla"?vu(W7(e)).values:e.values;return t=t.map(o=>(e.type!=="color"&&(o/=255),o<=.03928?o/12.92:((o+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function G7(e,t){const o=mk(e),l=mk(t);return(Math.max(o,l)+.05)/(Math.min(o,l)+.05)}function Jn(e,t){return e=vu(e),t=p2(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,O_(e)}function H7(e,t){if(e=vu(e),t=p2(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let o=0;o<3;o+=1)e.values[o]*=1-t;return O_(e)}function q7(e,t){if(e=vu(e),t=p2(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let o=0;o<3;o+=1)e.values[o]+=(255-e.values[o])*t;else if(e.type.indexOf("color")!==-1)for(let o=0;o<3;o+=1)e.values[o]+=(1-e.values[o])*t;return O_(e)}const Z7=["component","direction","spacing","divider","children","className","useFlexGap"],X7=R_(),Y7=V7("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function K7(e){return $3({props:e,name:"MuiStack",defaultTheme:X7})}function J7(e,t){const o=W.Children.toArray(e).filter(Boolean);return o.reduce((l,h,p)=>(l.push(h),p<o.length-1&&l.push(W.cloneElement(t,{key:`separator-${p}`})),l),[])}const Q7=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],e8=({ownerState:e,theme:t})=>{let o=H({display:"flex",flexDirection:"column"},Po({theme:t},cu({values:e.direction,breakpoints:t.breakpoints.values}),l=>({flexDirection:l})));if(e.spacing){const l=u2(t),h=Object.keys(t.breakpoints.values).reduce((w,C)=>((typeof e.spacing=="object"&&e.spacing[C]!=null||typeof e.direction=="object"&&e.direction[C]!=null)&&(w[C]=!0),w),{}),p=cu({values:e.direction,base:h}),_=cu({values:e.spacing,base:h});typeof p=="object"&&Object.keys(p).forEach((w,C,M)=>{if(!p[w]){const R=C>0?p[M[C-1]]:"column";p[w]=R}}),o=So(o,Po({theme:t},_,(w,C)=>e.useFlexGap?{gap:_u(l,w)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${Q7(C?p[C]:e.direction)}`]:_u(l,w)}}))}return o=FF(t.breakpoints,o),o};function t8(e={}){const{createStyledComponent:t=Y7,useThemeProps:o=K7,componentName:l="MuiStack"}=e,h=()=>xn({root:["root"]},w=>Sn(l,w),{}),p=t(e8);return W.forwardRef(function(w,C){const M=o(w),D=L_(M),{component:R="div",direction:$="column",spacing:j=0,divider:B,children:K,className:N,useFlexGap:U=!1}=D,G=Bt(D,Z7),Y={direction:$,spacing:j,useFlexGap:U},Q=h();return he.jsx(p,H({as:R,ownerState:Y,ref:C,className:Zt(Q.root,N)},G,{children:B?J7(K,B):K}))})}function n8(e,t){return H({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const r8={black:"#000",white:"#fff"},Sm=r8,i8={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},o8=i8,s8={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Ed=s8,a8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},kd=a8,l8={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},xf=l8,c8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Pd=c8,u8={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Md=u8,d8={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Id=d8,h8=["mode","contrastThreshold","tonalOffset"],gk={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Sm.white,default:Sm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},v1={text:{primary:Sm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Sm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function yk(e,t,o,l){const h=l.light||l,p=l.dark||l*1.5;e[t]||(e.hasOwnProperty(o)?e[t]=e[o]:t==="light"?e.light=q7(e.main,h):t==="dark"&&(e.dark=H7(e.main,p)))}function p8(e="light"){return e==="dark"?{main:Pd[200],light:Pd[50],dark:Pd[400]}:{main:Pd[700],light:Pd[400],dark:Pd[800]}}function f8(e="light"){return e==="dark"?{main:Ed[200],light:Ed[50],dark:Ed[400]}:{main:Ed[500],light:Ed[300],dark:Ed[700]}}function m8(e="light"){return e==="dark"?{main:kd[500],light:kd[300],dark:kd[700]}:{main:kd[700],light:kd[400],dark:kd[800]}}function g8(e="light"){return e==="dark"?{main:Md[400],light:Md[300],dark:Md[700]}:{main:Md[700],light:Md[500],dark:Md[900]}}function y8(e="light"){return e==="dark"?{main:Id[400],light:Id[300],dark:Id[700]}:{main:Id[800],light:Id[500],dark:Id[900]}}function _8(e="light"){return e==="dark"?{main:xf[400],light:xf[300],dark:xf[700]}:{main:"#ed6c02",light:xf[500],dark:xf[900]}}function v8(e){const{mode:t="light",contrastThreshold:o=3,tonalOffset:l=.2}=e,h=Bt(e,h8),p=e.primary||p8(t),_=e.secondary||f8(t),a=e.error||m8(t),w=e.info||g8(t),C=e.success||y8(t),M=e.warning||_8(t);function D(B){return G7(B,v1.text.primary)>=o?v1.text.primary:gk.text.primary}const R=({color:B,name:K,mainShade:N=500,lightShade:U=300,darkShade:G=700})=>{if(B=H({},B),!B.main&&B[N]&&(B.main=B[N]),!B.hasOwnProperty("main"))throw new Error(nc(11,K?` (${K})`:"",N));if(typeof B.main!="string")throw new Error(nc(12,K?` (${K})`:"",JSON.stringify(B.main)));return yk(B,"light",U,l),yk(B,"dark",G,l),B.contrastText||(B.contrastText=D(B.main)),B},$={dark:v1,light:gk};return So(H({common:H({},Sm),mode:t,primary:R({color:p,name:"primary"}),secondary:R({color:_,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:a,name:"error"}),warning:R({color:M,name:"warning"}),info:R({color:w,name:"info"}),success:R({color:C,name:"success"}),grey:o8,contrastThreshold:o,getContrastText:D,augmentColor:R,tonalOffset:l},$[t]),h)}const x8=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function b8(e){return Math.round(e*1e5)/1e5}const _k={textTransform:"uppercase"},vk='"Roboto", "Helvetica", "Arial", sans-serif';function w8(e,t){const o=typeof t=="function"?t(e):t,{fontFamily:l=vk,fontSize:h=14,fontWeightLight:p=300,fontWeightRegular:_=400,fontWeightMedium:a=500,fontWeightBold:w=700,htmlFontSize:C=16,allVariants:M,pxToRem:D}=o,R=Bt(o,x8),$=h/14,j=D||(N=>`${N/C*$}rem`),B=(N,U,G,Y,Q)=>H({fontFamily:l,fontWeight:N,fontSize:j(U),lineHeight:G},l===vk?{letterSpacing:`${b8(Y/U)}em`}:{},Q,M),K={h1:B(p,96,1.167,-1.5),h2:B(p,60,1.2,-.5),h3:B(_,48,1.167,0),h4:B(_,34,1.235,.25),h5:B(_,24,1.334,0),h6:B(a,20,1.6,.15),subtitle1:B(_,16,1.75,.15),subtitle2:B(a,14,1.57,.1),body1:B(_,16,1.5,.15),body2:B(_,14,1.43,.15),button:B(a,14,1.75,.4,_k),caption:B(_,12,1.66,.4),overline:B(_,12,2.66,1,_k),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return So(H({htmlFontSize:C,pxToRem:j,fontFamily:l,fontSize:h,fontWeightLight:p,fontWeightRegular:_,fontWeightMedium:a,fontWeightBold:w},K),R,{clone:!1})}const S8=.2,T8=.14,C8=.12;function Xr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${S8})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${T8})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${C8})`].join(",")}const E8=["none",Xr(0,2,1,-1,0,1,1,0,0,1,3,0),Xr(0,3,1,-2,0,2,2,0,0,1,5,0),Xr(0,3,3,-2,0,3,4,0,0,1,8,0),Xr(0,2,4,-1,0,4,5,0,0,1,10,0),Xr(0,3,5,-1,0,5,8,0,0,1,14,0),Xr(0,3,5,-1,0,6,10,0,0,1,18,0),Xr(0,4,5,-2,0,7,10,1,0,2,16,1),Xr(0,5,5,-3,0,8,10,1,0,3,14,2),Xr(0,5,6,-3,0,9,12,1,0,3,16,2),Xr(0,6,6,-3,0,10,14,1,0,4,18,3),Xr(0,6,7,-4,0,11,15,1,0,4,20,3),Xr(0,7,8,-4,0,12,17,2,0,5,22,4),Xr(0,7,8,-4,0,13,19,2,0,5,24,4),Xr(0,7,9,-4,0,14,21,2,0,5,26,4),Xr(0,8,9,-5,0,15,22,2,0,6,28,5),Xr(0,8,10,-5,0,16,24,2,0,6,30,5),Xr(0,8,11,-5,0,17,26,2,0,6,32,5),Xr(0,9,11,-5,0,18,28,2,0,7,34,6),Xr(0,9,12,-6,0,19,29,2,0,7,36,6),Xr(0,10,13,-6,0,20,31,3,0,8,38,7),Xr(0,10,13,-6,0,21,33,3,0,8,40,7),Xr(0,10,14,-6,0,22,35,3,0,8,42,7),Xr(0,11,14,-7,0,23,36,3,0,9,44,8),Xr(0,11,15,-7,0,24,38,3,0,9,46,8)],k8=E8,P8=["duration","easing","delay"],M8={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},I8={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function xk(e){return`${Math.round(e)}ms`}function A8(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function D8(e){const t=H({},M8,e.easing),o=H({},I8,e.duration);return H({getAutoHeightDuration:A8,create:(h=["all"],p={})=>{const{duration:_=o.standard,easing:a=t.easeInOut,delay:w=0}=p;return Bt(p,P8),(Array.isArray(h)?h:[h]).map(C=>`${C} ${typeof _=="string"?_:xk(_)} ${a} ${typeof w=="string"?w:xk(w)}`).join(",")}},e,{easing:t,duration:o})}const z8={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},R8=z8,L8=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function N3(e={},...t){const{mixins:o={},palette:l={},transitions:h={},typography:p={}}=e,_=Bt(e,L8);if(e.vars)throw new Error(nc(18));const a=v8(l),w=R_(e);let C=So(w,{mixins:n8(w.breakpoints,o),palette:a,shadows:k8.slice(),typography:w8(a,p),transitions:D8(h),zIndex:H({},R8)});return C=So(C,_),C=t.reduce((M,D)=>So(M,D),C),C.unstable_sxConfig=H({},D_,_==null?void 0:_.unstable_sxConfig),C.unstable_sx=function(D){return z_({sx:D,theme:this})},C}const O8=N3(),B_=O8,Fm="$$material";function gn({props:e,name:t}){return $3({props:e,name:t,defaultTheme:B_,themeId:Fm})}const ba=e=>Xf(e)&&e!=="classes",B8=Xf,F8=B3({themeId:Fm,defaultTheme:B_,rootShouldForwardProp:ba}),dt=F8;function $8(e){return Sn("MuiSvgIcon",e)}_n("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const N8=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],U8=e=>{const{color:t,fontSize:o,classes:l}=e,h={root:["root",t!=="inherit"&&`color${tn(t)}`,`fontSize${tn(o)}`]};return xn(h,$8,l)},V8=dt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="inherit"&&t[`color${tn(o.color)}`],t[`fontSize${tn(o.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var o,l,h,p,_,a,w,C,M,D,R,$,j,B,K,N,U;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(o=e.transitions)==null||(l=o.create)==null?void 0:l.call(o,"fill",{duration:(h=e.transitions)==null||(p=h.duration)==null?void 0:p.shorter}),fontSize:{inherit:"inherit",small:((_=e.typography)==null||(a=_.pxToRem)==null?void 0:a.call(_,20))||"1.25rem",medium:((w=e.typography)==null||(C=w.pxToRem)==null?void 0:C.call(w,24))||"1.5rem",large:((M=e.typography)==null||(D=M.pxToRem)==null?void 0:D.call(M,35))||"2.1875rem"}[t.fontSize],color:(R=($=(e.vars||e).palette)==null||(j=$[t.color])==null?void 0:j.main)!=null?R:{action:(B=(e.vars||e).palette)==null||(K=B.action)==null?void 0:K.active,disabled:(N=(e.vars||e).palette)==null||(U=N.action)==null?void 0:U.disabled,inherit:void 0}[t.color]}}),U3=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiSvgIcon"}),{children:h,className:p,color:_="inherit",component:a="svg",fontSize:w="medium",htmlColor:C,inheritViewBox:M=!1,titleAccess:D,viewBox:R="0 0 24 24"}=l,$=Bt(l,N8),j=W.isValidElement(h)&&h.type==="svg",B=H({},l,{color:_,component:a,fontSize:w,instanceFontSize:t.fontSize,inheritViewBox:M,viewBox:R,hasSvgAsChild:j}),K={};M||(K.viewBox=R);const N=U8(B);return he.jsxs(V8,H({as:a,className:Zt(N.root,p),focusable:"false",color:C,"aria-hidden":D?void 0:!0,role:D?"img":void 0,ref:o},K,$,j&&h.props,{ownerState:B,children:[j?h.props.children:h,D?he.jsx("title",{children:D}):null]}))});U3.muiName="SvgIcon";const bk=U3;function ys(e,t){function o(l,h){return he.jsx(bk,H({"data-testid":`${t}Icon`,ref:h},l,{children:e}))}return o.muiName=bk.muiName,W.memo(W.forwardRef(o))}Df.accessToken="pk.eyJ1IjoiZmluYmFyYWxsYW4iLCJhIjoiY2xqY3NtYWN6MjV0ODNqcXhhaTY4aGQxdSJ9.VeVQzxCCtpyP_MeT1CkjOg";const j8=({inputValues:e})=>{const t=W.useRef(null),o=W.useRef(null),[l,h]=W.useState(40.727872),[p,_]=W.useState(-73.993157),[a,w]=W.useState(12.4),[C,M]=W.useState([]);W.useEffect(()=>{if(o.current)return;o.current=new Df.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v12",center:[p,l],zoom:a}),console.log("parks:",LE);const R=LE.data.map($=>({id:$.id,name:$.name,latitude:$.location.latitude,longitude:$.location.longitude}));M(R),o.current.on("load",()=>{o.current.loadImage("/static/tree.png",($,j)=>{if($)throw $;o.current.addImage("cat",j),o.current.addSource("markers",{type:"geojson",data:{type:"FeatureCollection",features:R.map(B=>({type:"Feature",geometry:{type:"Point",coordinates:[B.longitude,B.latitude]},properties:{id:B.id,name:B.name}}))}}),o.current.addLayer({id:"markers",type:"symbol",source:"markers",layout:{"icon-image":"cat","icon-size":.25},paint:{"icon-opacity":.8}}),o.current.on("mouseenter","markers",()=>{o.current.getCanvas().style.cursor="pointer"}),o.current.on("mouseleave","markers",()=>{o.current.getCanvas().style.cursor=""})}),o.current.on("click",$=>{const j=o.current.queryRenderedFeatures($.point,{layers:["markers"]});if(j.length>0){const B=j[0].geometry.coordinates.slice(),K=j[0].properties.name,N=j[0].properties.id;new Df.Popup({className:"custom-popup"}).setLngLat(B).setHTML(`<div class="popup-content">${K}<br>${N}<br>${B}</div>`).addTo(o.current)}})})},[]);const D=async R=>{console.log("inputValues:",R);try{const $=await fetch(`https://api.mapbox.com/directions/v5/mapbox/walking/${R.startLatitude},${R.startLongitude};${R.endLatitude},${R.endLongitude}?geometries=geojson&access_token=${Df.accessToken}`);console.log("response:",$);const j=await $.json();console.log("data:",j);const B=j.routes[0].geometry.coordinates;console.log("routeCoordinates:",B);const K={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:B}};if(!o.current)return;o.current.getSource("route")&&(o.current.removeLayer("route"),o.current.removeSource("route")),o.current.addSource("route",{type:"geojson",data:K}),o.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3b9ddd","line-width":4}});const N=new Df.LngLatBounds;B.forEach(U=>N.extend(U)),o.current.fitBounds(N,{padding:40})}catch($){console.error("Error:",$)}};return W.useEffect(()=>{o.current&&o.current.on("move",()=>{_(o.current.getCenter().lng.toFixed(4)),h(o.current.getCenter().lat.toFixed(4)),w(o.current.getZoom().toFixed(2))})}),Ft.createElement("div",null,Ft.createElement("button",{type:"submit",onClick:()=>{D(e)}},"Go!"),Ft.createElement("div",{className:"sidebar"},"Longitude: ",p," | Latitude NEW: ",l," | Zoom: ",a),Ft.createElement("div",{ref:t,className:"map-container"}))};function _s(){const e=Ph(B_);return e[Fm]||e}const W8=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},wk=W8;function V3(e,t){return function(){return e.apply(t,arguments)}}const{toString:G8}=Object.prototype,{getPrototypeOf:f2}=Object,F_=(e=>t=>{const o=G8.call(t);return e[o]||(e[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),wa=e=>(e=e.toLowerCase(),t=>F_(t)===e),$_=e=>t=>typeof t===e,{isArray:Mh}=Array,Tm=$_("undefined");function H8(e){return e!==null&&!Tm(e)&&e.constructor!==null&&!Tm(e.constructor)&&ds(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const j3=wa("ArrayBuffer");function q8(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&j3(e.buffer),t}const Z8=$_("string"),ds=$_("function"),W3=$_("number"),N_=e=>e!==null&&typeof e=="object",X8=e=>e===!0||e===!1,i0=e=>{if(F_(e)!=="object")return!1;const t=f2(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Y8=wa("Date"),K8=wa("File"),J8=wa("Blob"),Q8=wa("FileList"),e$=e=>N_(e)&&ds(e.pipe),t$=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ds(e.append)&&((t=F_(e))==="formdata"||t==="object"&&ds(e.toString)&&e.toString()==="[object FormData]"))},n$=wa("URLSearchParams"),r$=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $m(e,t,{allOwnKeys:o=!1}={}){if(e===null||typeof e>"u")return;let l,h;if(typeof e!="object"&&(e=[e]),Mh(e))for(l=0,h=e.length;l<h;l++)t.call(null,e[l],l,e);else{const p=o?Object.getOwnPropertyNames(e):Object.keys(e),_=p.length;let a;for(l=0;l<_;l++)a=p[l],t.call(null,e[a],a,e)}}function G3(e,t){t=t.toLowerCase();const o=Object.keys(e);let l=o.length,h;for(;l-- >0;)if(h=o[l],t===h.toLowerCase())return h;return null}const H3=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),q3=e=>!Tm(e)&&e!==H3;function Lb(){const{caseless:e}=q3(this)&&this||{},t={},o=(l,h)=>{const p=e&&G3(t,h)||h;i0(t[p])&&i0(l)?t[p]=Lb(t[p],l):i0(l)?t[p]=Lb({},l):Mh(l)?t[p]=l.slice():t[p]=l};for(let l=0,h=arguments.length;l<h;l++)arguments[l]&&$m(arguments[l],o);return t}const i$=(e,t,o,{allOwnKeys:l}={})=>($m(t,(h,p)=>{o&&ds(h)?e[p]=V3(h,o):e[p]=h},{allOwnKeys:l}),e),o$=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),s$=(e,t,o,l)=>{e.prototype=Object.create(t.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),o&&Object.assign(e.prototype,o)},a$=(e,t,o,l)=>{let h,p,_;const a={};if(t=t||{},e==null)return t;do{for(h=Object.getOwnPropertyNames(e),p=h.length;p-- >0;)_=h[p],(!l||l(_,e,t))&&!a[_]&&(t[_]=e[_],a[_]=!0);e=o!==!1&&f2(e)}while(e&&(!o||o(e,t))&&e!==Object.prototype);return t},l$=(e,t,o)=>{e=String(e),(o===void 0||o>e.length)&&(o=e.length),o-=t.length;const l=e.indexOf(t,o);return l!==-1&&l===o},c$=e=>{if(!e)return null;if(Mh(e))return e;let t=e.length;if(!W3(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=e[t];return o},u$=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&f2(Uint8Array)),d$=(e,t)=>{const l=(e&&e[Symbol.iterator]).call(e);let h;for(;(h=l.next())&&!h.done;){const p=h.value;t.call(e,p[0],p[1])}},h$=(e,t)=>{let o;const l=[];for(;(o=e.exec(t))!==null;)l.push(o);return l},p$=wa("HTMLFormElement"),f$=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,l,h){return l.toUpperCase()+h}),Sk=(({hasOwnProperty:e})=>(t,o)=>e.call(t,o))(Object.prototype),m$=wa("RegExp"),Z3=(e,t)=>{const o=Object.getOwnPropertyDescriptors(e),l={};$m(o,(h,p)=>{t(h,p,e)!==!1&&(l[p]=h)}),Object.defineProperties(e,l)},g$=e=>{Z3(e,(t,o)=>{if(ds(e)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const l=e[o];if(ds(l)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},y$=(e,t)=>{const o={},l=h=>{h.forEach(p=>{o[p]=!0})};return Mh(e)?l(e):l(String(e).split(t)),o},_$=()=>{},v$=(e,t)=>(e=+e,Number.isFinite(e)?e:t),x1="abcdefghijklmnopqrstuvwxyz",Tk="0123456789",X3={DIGIT:Tk,ALPHA:x1,ALPHA_DIGIT:x1+x1.toUpperCase()+Tk},x$=(e=16,t=X3.ALPHA_DIGIT)=>{let o="";const{length:l}=t;for(;e--;)o+=t[Math.random()*l|0];return o};function b$(e){return!!(e&&ds(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const w$=e=>{const t=new Array(10),o=(l,h)=>{if(N_(l)){if(t.indexOf(l)>=0)return;if(!("toJSON"in l)){t[h]=l;const p=Mh(l)?[]:{};return $m(l,(_,a)=>{const w=o(_,h+1);!Tm(w)&&(p[a]=w)}),t[h]=void 0,p}}return l};return o(e,0)},S$=wa("AsyncFunction"),T$=e=>e&&(N_(e)||ds(e))&&ds(e.then)&&ds(e.catch),Ct={isArray:Mh,isArrayBuffer:j3,isBuffer:H8,isFormData:t$,isArrayBufferView:q8,isString:Z8,isNumber:W3,isBoolean:X8,isObject:N_,isPlainObject:i0,isUndefined:Tm,isDate:Y8,isFile:K8,isBlob:J8,isRegExp:m$,isFunction:ds,isStream:e$,isURLSearchParams:n$,isTypedArray:u$,isFileList:Q8,forEach:$m,merge:Lb,extend:i$,trim:r$,stripBOM:o$,inherits:s$,toFlatObject:a$,kindOf:F_,kindOfTest:wa,endsWith:l$,toArray:c$,forEachEntry:d$,matchAll:h$,isHTMLForm:p$,hasOwnProperty:Sk,hasOwnProp:Sk,reduceDescriptors:Z3,freezeMethods:g$,toObjectSet:y$,toCamelCase:f$,noop:_$,toFiniteNumber:v$,findKey:G3,global:H3,isContextDefined:q3,ALPHABET:X3,generateString:x$,isSpecCompliantForm:b$,toJSONObject:w$,isAsyncFn:S$,isThenable:T$};function ar(e,t,o,l,h){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),l&&(this.request=l),h&&(this.response=h)}Ct.inherits(ar,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ct.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Y3=ar.prototype,K3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{K3[e]={value:e}});Object.defineProperties(ar,K3);Object.defineProperty(Y3,"isAxiosError",{value:!0});ar.from=(e,t,o,l,h,p)=>{const _=Object.create(Y3);return Ct.toFlatObject(e,_,function(w){return w!==Error.prototype},a=>a!=="isAxiosError"),ar.call(_,e.message,t,o,l,h),_.cause=e,_.name=e.name,p&&Object.assign(_,p),_};const C$=null;function Ob(e){return Ct.isPlainObject(e)||Ct.isArray(e)}function J3(e){return Ct.endsWith(e,"[]")?e.slice(0,-2):e}function Ck(e,t,o){return e?e.concat(t).map(function(h,p){return h=J3(h),!o&&p?"["+h+"]":h}).join(o?".":""):t}function E$(e){return Ct.isArray(e)&&!e.some(Ob)}const k$=Ct.toFlatObject(Ct,{},null,function(t){return/^is[A-Z]/.test(t)});function U_(e,t,o){if(!Ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,o=Ct.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,K){return!Ct.isUndefined(K[B])});const l=o.metaTokens,h=o.visitor||M,p=o.dots,_=o.indexes,w=(o.Blob||typeof Blob<"u"&&Blob)&&Ct.isSpecCompliantForm(t);if(!Ct.isFunction(h))throw new TypeError("visitor must be a function");function C(j){if(j===null)return"";if(Ct.isDate(j))return j.toISOString();if(!w&&Ct.isBlob(j))throw new ar("Blob is not supported. Use a Buffer instead.");return Ct.isArrayBuffer(j)||Ct.isTypedArray(j)?w&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function M(j,B,K){let N=j;if(j&&!K&&typeof j=="object"){if(Ct.endsWith(B,"{}"))B=l?B:B.slice(0,-2),j=JSON.stringify(j);else if(Ct.isArray(j)&&E$(j)||(Ct.isFileList(j)||Ct.endsWith(B,"[]"))&&(N=Ct.toArray(j)))return B=J3(B),N.forEach(function(G,Y){!(Ct.isUndefined(G)||G===null)&&t.append(_===!0?Ck([B],Y,p):_===null?B:B+"[]",C(G))}),!1}return Ob(j)?!0:(t.append(Ck(K,B,p),C(j)),!1)}const D=[],R=Object.assign(k$,{defaultVisitor:M,convertValue:C,isVisitable:Ob});function $(j,B){if(!Ct.isUndefined(j)){if(D.indexOf(j)!==-1)throw Error("Circular reference detected in "+B.join("."));D.push(j),Ct.forEach(j,function(N,U){(!(Ct.isUndefined(N)||N===null)&&h.call(t,N,Ct.isString(U)?U.trim():U,B,R))===!0&&$(N,B?B.concat(U):[U])}),D.pop()}}if(!Ct.isObject(e))throw new TypeError("data must be an object");return $(e),t}function Ek(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return t[l]})}function m2(e,t){this._pairs=[],e&&U_(e,this,t)}const Q3=m2.prototype;Q3.append=function(t,o){this._pairs.push([t,o])};Q3.toString=function(t){const o=t?function(l){return t.call(this,l,Ek)}:Ek;return this._pairs.map(function(h){return o(h[0])+"="+o(h[1])},"").join("&")};function P$(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function e4(e,t,o){if(!t)return e;const l=o&&o.encode||P$,h=o&&o.serialize;let p;if(h?p=h(t,o):p=Ct.isURLSearchParams(t)?t.toString():new m2(t,o).toString(l),p){const _=e.indexOf("#");_!==-1&&(e=e.slice(0,_)),e+=(e.indexOf("?")===-1?"?":"&")+p}return e}class M${constructor(){this.handlers=[]}use(t,o,l){return this.handlers.push({fulfilled:t,rejected:o,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ct.forEach(this.handlers,function(l){l!==null&&t(l)})}}const kk=M$,t4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},I$=typeof URLSearchParams<"u"?URLSearchParams:m2,A$=typeof FormData<"u"?FormData:null,D$=typeof Blob<"u"?Blob:null,z$=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),R$=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ma={isBrowser:!0,classes:{URLSearchParams:I$,FormData:A$,Blob:D$},isStandardBrowserEnv:z$,isStandardBrowserWebWorkerEnv:R$,protocols:["http","https","file","blob","url","data"]};function L$(e,t){return U_(e,new ma.classes.URLSearchParams,Object.assign({visitor:function(o,l,h,p){return ma.isNode&&Ct.isBuffer(o)?(this.append(l,o.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},t))}function O$(e){return Ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function B$(e){const t={},o=Object.keys(e);let l;const h=o.length;let p;for(l=0;l<h;l++)p=o[l],t[p]=e[p];return t}function n4(e){function t(o,l,h,p){let _=o[p++];const a=Number.isFinite(+_),w=p>=o.length;return _=!_&&Ct.isArray(h)?h.length:_,w?(Ct.hasOwnProp(h,_)?h[_]=[h[_],l]:h[_]=l,!a):((!h[_]||!Ct.isObject(h[_]))&&(h[_]=[]),t(o,l,h[_],p)&&Ct.isArray(h[_])&&(h[_]=B$(h[_])),!a)}if(Ct.isFormData(e)&&Ct.isFunction(e.entries)){const o={};return Ct.forEachEntry(e,(l,h)=>{t(O$(l),h,o,0)}),o}return null}const F$={"Content-Type":void 0};function $$(e,t,o){if(Ct.isString(e))try{return(t||JSON.parse)(e),Ct.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(o||JSON.stringify)(e)}const V_={transitional:t4,adapter:["xhr","http"],transformRequest:[function(t,o){const l=o.getContentType()||"",h=l.indexOf("application/json")>-1,p=Ct.isObject(t);if(p&&Ct.isHTMLForm(t)&&(t=new FormData(t)),Ct.isFormData(t))return h&&h?JSON.stringify(n4(t)):t;if(Ct.isArrayBuffer(t)||Ct.isBuffer(t)||Ct.isStream(t)||Ct.isFile(t)||Ct.isBlob(t))return t;if(Ct.isArrayBufferView(t))return t.buffer;if(Ct.isURLSearchParams(t))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return L$(t,this.formSerializer).toString();if((a=Ct.isFileList(t))||l.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return U_(a?{"files[]":t}:t,w&&new w,this.formSerializer)}}return p||h?(o.setContentType("application/json",!1),$$(t)):t}],transformResponse:[function(t){const o=this.transitional||V_.transitional,l=o&&o.forcedJSONParsing,h=this.responseType==="json";if(t&&Ct.isString(t)&&(l&&!this.responseType||h)){const _=!(o&&o.silentJSONParsing)&&h;try{return JSON.parse(t)}catch(a){if(_)throw a.name==="SyntaxError"?ar.from(a,ar.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ma.classes.FormData,Blob:ma.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ct.forEach(["delete","get","head"],function(t){V_.headers[t]={}});Ct.forEach(["post","put","patch"],function(t){V_.headers[t]=Ct.merge(F$)});const g2=V_,N$=Ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U$=e=>{const t={};let o,l,h;return e&&e.split(`
`).forEach(function(_){h=_.indexOf(":"),o=_.substring(0,h).trim().toLowerCase(),l=_.substring(h+1).trim(),!(!o||t[o]&&N$[o])&&(o==="set-cookie"?t[o]?t[o].push(l):t[o]=[l]:t[o]=t[o]?t[o]+", "+l:l)}),t},Pk=Symbol("internals");function bf(e){return e&&String(e).trim().toLowerCase()}function o0(e){return e===!1||e==null?e:Ct.isArray(e)?e.map(o0):String(e)}function V$(e){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=o.exec(e);)t[l[1]]=l[2];return t}const j$=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function b1(e,t,o,l,h){if(Ct.isFunction(l))return l.call(this,t,o);if(h&&(t=o),!!Ct.isString(t)){if(Ct.isString(l))return t.indexOf(l)!==-1;if(Ct.isRegExp(l))return l.test(t)}}function W$(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,l)=>o.toUpperCase()+l)}function G$(e,t){const o=Ct.toCamelCase(" "+t);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+o,{value:function(h,p,_){return this[l].call(this,t,h,p,_)},configurable:!0})})}class j_{constructor(t){t&&this.set(t)}set(t,o,l){const h=this;function p(a,w,C){const M=bf(w);if(!M)throw new Error("header name must be a non-empty string");const D=Ct.findKey(h,M);(!D||h[D]===void 0||C===!0||C===void 0&&h[D]!==!1)&&(h[D||w]=o0(a))}const _=(a,w)=>Ct.forEach(a,(C,M)=>p(C,M,w));return Ct.isPlainObject(t)||t instanceof this.constructor?_(t,o):Ct.isString(t)&&(t=t.trim())&&!j$(t)?_(U$(t),o):t!=null&&p(o,t,l),this}get(t,o){if(t=bf(t),t){const l=Ct.findKey(this,t);if(l){const h=this[l];if(!o)return h;if(o===!0)return V$(h);if(Ct.isFunction(o))return o.call(this,h,l);if(Ct.isRegExp(o))return o.exec(h);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,o){if(t=bf(t),t){const l=Ct.findKey(this,t);return!!(l&&this[l]!==void 0&&(!o||b1(this,this[l],l,o)))}return!1}delete(t,o){const l=this;let h=!1;function p(_){if(_=bf(_),_){const a=Ct.findKey(l,_);a&&(!o||b1(l,l[a],a,o))&&(delete l[a],h=!0)}}return Ct.isArray(t)?t.forEach(p):p(t),h}clear(t){const o=Object.keys(this);let l=o.length,h=!1;for(;l--;){const p=o[l];(!t||b1(this,this[p],p,t,!0))&&(delete this[p],h=!0)}return h}normalize(t){const o=this,l={};return Ct.forEach(this,(h,p)=>{const _=Ct.findKey(l,p);if(_){o[_]=o0(h),delete o[p];return}const a=t?W$(p):String(p).trim();a!==p&&delete o[p],o[a]=o0(h),l[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const o=Object.create(null);return Ct.forEach(this,(l,h)=>{l!=null&&l!==!1&&(o[h]=t&&Ct.isArray(l)?l.join(", "):l)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,o])=>t+": "+o).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...o){const l=new this(t);return o.forEach(h=>l.set(h)),l}static accessor(t){const l=(this[Pk]=this[Pk]={accessors:{}}).accessors,h=this.prototype;function p(_){const a=bf(_);l[a]||(G$(h,_),l[a]=!0)}return Ct.isArray(t)?t.forEach(p):p(t),this}}j_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ct.freezeMethods(j_.prototype);Ct.freezeMethods(j_);const Ha=j_;function w1(e,t){const o=this||g2,l=t||o,h=Ha.from(l.headers);let p=l.data;return Ct.forEach(e,function(a){p=a.call(o,p,h.normalize(),t?t.status:void 0)}),h.normalize(),p}function r4(e){return!!(e&&e.__CANCEL__)}function Nm(e,t,o){ar.call(this,e??"canceled",ar.ERR_CANCELED,t,o),this.name="CanceledError"}Ct.inherits(Nm,ar,{__CANCEL__:!0});function H$(e,t,o){const l=o.config.validateStatus;!o.status||!l||l(o.status)?e(o):t(new ar("Request failed with status code "+o.status,[ar.ERR_BAD_REQUEST,ar.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}const q$=ma.isStandardBrowserEnv?function(){return{write:function(o,l,h,p,_,a){const w=[];w.push(o+"="+encodeURIComponent(l)),Ct.isNumber(h)&&w.push("expires="+new Date(h).toGMTString()),Ct.isString(p)&&w.push("path="+p),Ct.isString(_)&&w.push("domain="+_),a===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(o){const l=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Z$(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function X$(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function i4(e,t){return e&&!Z$(t)?X$(e,t):t}const Y$=ma.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");let l;function h(p){let _=p;return t&&(o.setAttribute("href",_),_=o.href),o.setAttribute("href",_),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return l=h(window.location.href),function(_){const a=Ct.isString(_)?h(_):_;return a.protocol===l.protocol&&a.host===l.host}}():function(){return function(){return!0}}();function K$(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function J$(e,t){e=e||10;const o=new Array(e),l=new Array(e);let h=0,p=0,_;return t=t!==void 0?t:1e3,function(w){const C=Date.now(),M=l[p];_||(_=C),o[h]=w,l[h]=C;let D=p,R=0;for(;D!==h;)R+=o[D++],D=D%e;if(h=(h+1)%e,h===p&&(p=(p+1)%e),C-_<t)return;const $=M&&C-M;return $?Math.round(R*1e3/$):void 0}}function Mk(e,t){let o=0;const l=J$(50,250);return h=>{const p=h.loaded,_=h.lengthComputable?h.total:void 0,a=p-o,w=l(a),C=p<=_;o=p;const M={loaded:p,total:_,progress:_?p/_:void 0,bytes:a,rate:w||void 0,estimated:w&&_&&C?(_-p)/w:void 0,event:h};M[t?"download":"upload"]=!0,e(M)}}const Q$=typeof XMLHttpRequest<"u",e9=Q$&&function(e){return new Promise(function(o,l){let h=e.data;const p=Ha.from(e.headers).normalize(),_=e.responseType;let a;function w(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}Ct.isFormData(h)&&(ma.isStandardBrowserEnv||ma.isStandardBrowserWebWorkerEnv?p.setContentType(!1):p.setContentType("multipart/form-data;",!1));let C=new XMLHttpRequest;if(e.auth){const $=e.auth.username||"",j=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.set("Authorization","Basic "+btoa($+":"+j))}const M=i4(e.baseURL,e.url);C.open(e.method.toUpperCase(),e4(M,e.params,e.paramsSerializer),!0),C.timeout=e.timeout;function D(){if(!C)return;const $=Ha.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),B={data:!_||_==="text"||_==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:$,config:e,request:C};H$(function(N){o(N),w()},function(N){l(N),w()},B),C=null}if("onloadend"in C?C.onloadend=D:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(D)},C.onabort=function(){C&&(l(new ar("Request aborted",ar.ECONNABORTED,e,C)),C=null)},C.onerror=function(){l(new ar("Network Error",ar.ERR_NETWORK,e,C)),C=null},C.ontimeout=function(){let j=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const B=e.transitional||t4;e.timeoutErrorMessage&&(j=e.timeoutErrorMessage),l(new ar(j,B.clarifyTimeoutError?ar.ETIMEDOUT:ar.ECONNABORTED,e,C)),C=null},ma.isStandardBrowserEnv){const $=(e.withCredentials||Y$(M))&&e.xsrfCookieName&&q$.read(e.xsrfCookieName);$&&p.set(e.xsrfHeaderName,$)}h===void 0&&p.setContentType(null),"setRequestHeader"in C&&Ct.forEach(p.toJSON(),function(j,B){C.setRequestHeader(B,j)}),Ct.isUndefined(e.withCredentials)||(C.withCredentials=!!e.withCredentials),_&&_!=="json"&&(C.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&C.addEventListener("progress",Mk(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",Mk(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=$=>{C&&(l(!$||$.type?new Nm(null,e,C):$),C.abort(),C=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const R=K$(M);if(R&&ma.protocols.indexOf(R)===-1){l(new ar("Unsupported protocol "+R+":",ar.ERR_BAD_REQUEST,e));return}C.send(h||null)})},s0={http:C$,xhr:e9};Ct.forEach(s0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const t9={getAdapter:e=>{e=Ct.isArray(e)?e:[e];const{length:t}=e;let o,l;for(let h=0;h<t&&(o=e[h],!(l=Ct.isString(o)?s0[o.toLowerCase()]:o));h++);if(!l)throw l===!1?new ar(`Adapter ${o} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Ct.hasOwnProp(s0,o)?`Adapter '${o}' is not available in the build`:`Unknown adapter '${o}'`);if(!Ct.isFunction(l))throw new TypeError("adapter is not a function");return l},adapters:s0};function S1(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Nm(null,e)}function Ik(e){return S1(e),e.headers=Ha.from(e.headers),e.data=w1.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),t9.getAdapter(e.adapter||g2.adapter)(e).then(function(l){return S1(e),l.data=w1.call(e,e.transformResponse,l),l.headers=Ha.from(l.headers),l},function(l){return r4(l)||(S1(e),l&&l.response&&(l.response.data=w1.call(e,e.transformResponse,l.response),l.response.headers=Ha.from(l.response.headers))),Promise.reject(l)})}const Ak=e=>e instanceof Ha?e.toJSON():e;function bh(e,t){t=t||{};const o={};function l(C,M,D){return Ct.isPlainObject(C)&&Ct.isPlainObject(M)?Ct.merge.call({caseless:D},C,M):Ct.isPlainObject(M)?Ct.merge({},M):Ct.isArray(M)?M.slice():M}function h(C,M,D){if(Ct.isUndefined(M)){if(!Ct.isUndefined(C))return l(void 0,C,D)}else return l(C,M,D)}function p(C,M){if(!Ct.isUndefined(M))return l(void 0,M)}function _(C,M){if(Ct.isUndefined(M)){if(!Ct.isUndefined(C))return l(void 0,C)}else return l(void 0,M)}function a(C,M,D){if(D in t)return l(C,M);if(D in e)return l(void 0,C)}const w={url:p,method:p,data:p,baseURL:_,transformRequest:_,transformResponse:_,paramsSerializer:_,timeout:_,timeoutMessage:_,withCredentials:_,adapter:_,responseType:_,xsrfCookieName:_,xsrfHeaderName:_,onUploadProgress:_,onDownloadProgress:_,decompress:_,maxContentLength:_,maxBodyLength:_,beforeRedirect:_,transport:_,httpAgent:_,httpsAgent:_,cancelToken:_,socketPath:_,responseEncoding:_,validateStatus:a,headers:(C,M)=>h(Ak(C),Ak(M),!0)};return Ct.forEach(Object.keys(Object.assign({},e,t)),function(M){const D=w[M]||h,R=D(e[M],t[M],M);Ct.isUndefined(R)&&D!==a||(o[M]=R)}),o}const o4="1.4.0",y2={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{y2[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});const Dk={};y2.transitional=function(t,o,l){function h(p,_){return"[Axios v"+o4+"] Transitional option '"+p+"'"+_+(l?". "+l:"")}return(p,_,a)=>{if(t===!1)throw new ar(h(_," has been removed"+(o?" in "+o:"")),ar.ERR_DEPRECATED);return o&&!Dk[_]&&(Dk[_]=!0,console.warn(h(_," has been deprecated since v"+o+" and will be removed in the near future"))),t?t(p,_,a):!0}};function n9(e,t,o){if(typeof e!="object")throw new ar("options must be an object",ar.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let h=l.length;for(;h-- >0;){const p=l[h],_=t[p];if(_){const a=e[p],w=a===void 0||_(a,p,e);if(w!==!0)throw new ar("option "+p+" must be "+w,ar.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new ar("Unknown option "+p,ar.ERR_BAD_OPTION)}}const Bb={assertOptions:n9,validators:y2},Ll=Bb.validators;class $0{constructor(t){this.defaults=t,this.interceptors={request:new kk,response:new kk}}request(t,o){typeof t=="string"?(o=o||{},o.url=t):o=t||{},o=bh(this.defaults,o);const{transitional:l,paramsSerializer:h,headers:p}=o;l!==void 0&&Bb.assertOptions(l,{silentJSONParsing:Ll.transitional(Ll.boolean),forcedJSONParsing:Ll.transitional(Ll.boolean),clarifyTimeoutError:Ll.transitional(Ll.boolean)},!1),h!=null&&(Ct.isFunction(h)?o.paramsSerializer={serialize:h}:Bb.assertOptions(h,{encode:Ll.function,serialize:Ll.function},!0)),o.method=(o.method||this.defaults.method||"get").toLowerCase();let _;_=p&&Ct.merge(p.common,p[o.method]),_&&Ct.forEach(["delete","get","head","post","put","patch","common"],j=>{delete p[j]}),o.headers=Ha.concat(_,p);const a=[];let w=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(o)===!1||(w=w&&B.synchronous,a.unshift(B.fulfilled,B.rejected))});const C=[];this.interceptors.response.forEach(function(B){C.push(B.fulfilled,B.rejected)});let M,D=0,R;if(!w){const j=[Ik.bind(this),void 0];for(j.unshift.apply(j,a),j.push.apply(j,C),R=j.length,M=Promise.resolve(o);D<R;)M=M.then(j[D++],j[D++]);return M}R=a.length;let $=o;for(D=0;D<R;){const j=a[D++],B=a[D++];try{$=j($)}catch(K){B.call(this,K);break}}try{M=Ik.call(this,$)}catch(j){return Promise.reject(j)}for(D=0,R=C.length;D<R;)M=M.then(C[D++],C[D++]);return M}getUri(t){t=bh(this.defaults,t);const o=i4(t.baseURL,t.url);return e4(o,t.params,t.paramsSerializer)}}Ct.forEach(["delete","get","head","options"],function(t){$0.prototype[t]=function(o,l){return this.request(bh(l||{},{method:t,url:o,data:(l||{}).data}))}});Ct.forEach(["post","put","patch"],function(t){function o(l){return function(p,_,a){return this.request(bh(a||{},{method:t,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:_}))}}$0.prototype[t]=o(),$0.prototype[t+"Form"]=o(!0)});const a0=$0;class _2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(p){o=p});const l=this;this.promise.then(h=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](h);l._listeners=null}),this.promise.then=h=>{let p;const _=new Promise(a=>{l.subscribe(a),p=a}).then(h);return _.cancel=function(){l.unsubscribe(p)},_},t(function(p,_,a){l.reason||(l.reason=new Nm(p,_,a),o(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}static source(){let t;return{token:new _2(function(h){t=h}),cancel:t}}}const r9=_2;function i9(e){return function(o){return e.apply(null,o)}}function o9(e){return Ct.isObject(e)&&e.isAxiosError===!0}const Fb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fb).forEach(([e,t])=>{Fb[t]=e});const s9=Fb;function s4(e){const t=new a0(e),o=V3(a0.prototype.request,t);return Ct.extend(o,a0.prototype,t,{allOwnKeys:!0}),Ct.extend(o,t,null,{allOwnKeys:!0}),o.create=function(h){return s4(bh(e,h))},o}const Pi=s4(g2);Pi.Axios=a0;Pi.CanceledError=Nm;Pi.CancelToken=r9;Pi.isCancel=r4;Pi.VERSION=o4;Pi.toFormData=U_;Pi.AxiosError=ar;Pi.Cancel=Pi.CanceledError;Pi.all=function(t){return Promise.all(t)};Pi.spread=i9;Pi.isAxiosError=o9;Pi.mergeConfig=bh;Pi.AxiosHeaders=Ha;Pi.formToJSON=e=>n4(Ct.isHTMLForm(e)?new FormData(e):e);Pi.HttpStatusCode=s9;Pi.default=Pi;const W_=Pi;const a9=({inputValues:e,setInputValues:t})=>{const o=h=>{t({...e,[h.target.name]:h.target.value})},l=h=>{h.preventDefault(),console.log("handleInputSubmit",e),W_.post("/users",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(p=>{console.log("errorless:",p.data),t({...e,endLatitude:p.data.dest[1],endLongitude:p.data.dest[0]})}).catch(p=>{p.response?(console.log(p.response),console.log("server responded with error")):p.request?console.log("network error"):console.log(p)})};return Ft.createElement("div",{className:"comms"},Ft.createElement("form",{onSubmit:l},Ft.createElement("label",{htmlFor:"latitude"},"Latitude:"),Ft.createElement("input",{type:"text",name:"startLatitude",value:e.startLatitude,onChange:o}),Ft.createElement("label",{htmlFor:"longitude"},"Longitude:"),Ft.createElement("input",{type:"text",name:"startLongitude",value:e.startLongitude,onChange:o}),Ft.createElement("button",{type:"submit"},"Submit")))},l9=t8({createStyledComponent:dt("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>gn({props:e,name:"MuiStack"})}),c9=l9;function u9(e){return Sn("MuiTypography",e)}_n("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const d9=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],h9=e=>{const{align:t,gutterBottom:o,noWrap:l,paragraph:h,variant:p,classes:_}=e,a={root:["root",p,e.align!=="inherit"&&`align${tn(t)}`,o&&"gutterBottom",l&&"noWrap",h&&"paragraph"]};return xn(a,u9,_)},p9=dt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.variant&&t[o.variant],o.align!=="inherit"&&t[`align${tn(o.align)}`],o.noWrap&&t.noWrap,o.gutterBottom&&t.gutterBottom,o.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>H({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),zk={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},f9={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},m9=e=>f9[e]||e,g9=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiTypography"}),h=m9(l.color),p=L_(H({},l,{color:h})),{align:_="inherit",className:a,component:w,gutterBottom:C=!1,noWrap:M=!1,paragraph:D=!1,variant:R="body1",variantMapping:$=zk}=p,j=Bt(p,d9),B=H({},p,{align:_,color:h,className:a,component:w,gutterBottom:C,noWrap:M,paragraph:D,variant:R,variantMapping:$}),K=w||(D?"p":$[R]||zk[R])||"span",N=h9(B);return he.jsx(p9,H({as:K,ref:o,ownerState:B,className:Zt(N.root,a)},j))}),Qa=g9;function Ih({props:e,states:t,muiFormControl:o}){return t.reduce((l,h)=>(l[h]=e[h],o&&typeof e[h]>"u"&&(l[h]=o[h]),l),{})}const y9=W.createContext(void 0),G_=y9;function Su(){return W.useContext(G_)}function _9(e){return he.jsx(P7,H({},e,{defaultTheme:B_,themeId:Fm}))}function Rk(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function N0(e,t=!1){return e&&(Rk(e.value)&&e.value!==""||t&&Rk(e.defaultValue)&&e.defaultValue!=="")}function v9(e){return e.startAdornment}function x9(e){return Sn("MuiInputBase",e)}const b9=_n("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Oo=b9,w9=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],H_=(e,t)=>{const{ownerState:o}=e;return[t.root,o.formControl&&t.formControl,o.startAdornment&&t.adornedStart,o.endAdornment&&t.adornedEnd,o.error&&t.error,o.size==="small"&&t.sizeSmall,o.multiline&&t.multiline,o.color&&t[`color${tn(o.color)}`],o.fullWidth&&t.fullWidth,o.hiddenLabel&&t.hiddenLabel]},q_=(e,t)=>{const{ownerState:o}=e;return[t.input,o.size==="small"&&t.inputSizeSmall,o.multiline&&t.inputMultiline,o.type==="search"&&t.inputTypeSearch,o.startAdornment&&t.inputAdornedStart,o.endAdornment&&t.inputAdornedEnd,o.hiddenLabel&&t.inputHiddenLabel]},S9=e=>{const{classes:t,color:o,disabled:l,error:h,endAdornment:p,focused:_,formControl:a,fullWidth:w,hiddenLabel:C,multiline:M,readOnly:D,size:R,startAdornment:$,type:j}=e,B={root:["root",`color${tn(o)}`,l&&"disabled",h&&"error",w&&"fullWidth",_&&"focused",a&&"formControl",R==="small"&&"sizeSmall",M&&"multiline",$&&"adornedStart",p&&"adornedEnd",C&&"hiddenLabel",D&&"readOnly"],input:["input",l&&"disabled",j==="search"&&"inputTypeSearch",M&&"inputMultiline",R==="small"&&"inputSizeSmall",C&&"inputHiddenLabel",$&&"inputAdornedStart",p&&"inputAdornedEnd",D&&"readOnly"]};return xn(B,x9,t)},Z_=dt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:H_})(({theme:e,ownerState:t})=>H({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Oo.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&H({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),X_=dt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:q_})(({theme:e,ownerState:t})=>{const o=e.palette.mode==="light",l=H({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:o?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),h={opacity:"0 !important"},p=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:o?.42:.5};return H({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Oo.formControl} &`]:{"&::-webkit-input-placeholder":h,"&::-moz-placeholder":h,"&:-ms-input-placeholder":h,"&::-ms-input-placeholder":h,"&:focus::-webkit-input-placeholder":p,"&:focus::-moz-placeholder":p,"&:focus:-ms-input-placeholder":p,"&:focus::-ms-input-placeholder":p},[`&.${Oo.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),T9=he.jsx(_9,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),C9=W.forwardRef(function(t,o){var l;const h=gn({props:t,name:"MuiInputBase"}),{"aria-describedby":p,autoComplete:_,autoFocus:a,className:w,components:C={},componentsProps:M={},defaultValue:D,disabled:R,disableInjectingGlobalStyles:$,endAdornment:j,fullWidth:B=!1,id:K,inputComponent:N="input",inputProps:U={},inputRef:G,maxRows:Y,minRows:Q,multiline:re=!1,name:oe,onBlur:de,onChange:ae,onClick:ye,onFocus:Ce,onKeyDown:Fe,onKeyUp:be,placeholder:we,readOnly:ue,renderSuffix:Be,rows:Ae,slotProps:Se={},slots:ke={},startAdornment:Ne,type:nt="text",value:vt}=h,gt=Bt(h,w9),rt=U.value!=null?U.value:vt,{current:xt}=W.useRef(rt!=null),ht=W.useRef(),mt=W.useCallback(sn=>{},[]),Ot=Rr(ht,G,U.ref,mt),[Nt,at]=W.useState(!1),Je=Su(),it=Ih({props:h,muiFormControl:Je,states:["color","disabled","error","hiddenLabel","size","required","filled"]});it.focused=Je?Je.focused:Nt,W.useEffect(()=>{!Je&&R&&Nt&&(at(!1),de&&de())},[Je,R,Nt,de]);const St=Je&&Je.onFilled,Gt=Je&&Je.onEmpty,He=W.useCallback(sn=>{N0(sn)?St&&St():Gt&&Gt()},[St,Gt]);ki(()=>{xt&&He({value:rt})},[rt,He,xt]);const Vt=sn=>{if(it.disabled){sn.stopPropagation();return}Ce&&Ce(sn),U.onFocus&&U.onFocus(sn),Je&&Je.onFocus?Je.onFocus(sn):at(!0)},lt=sn=>{de&&de(sn),U.onBlur&&U.onBlur(sn),Je&&Je.onBlur?Je.onBlur(sn):at(!1)},jt=(sn,...an)=>{if(!xt){const ln=sn.target||ht.current;if(ln==null)throw new Error(nc(1));He({value:ln.value})}U.onChange&&U.onChange(sn,...an),ae&&ae(sn,...an)};W.useEffect(()=>{He(ht.current)},[]);const Ut=sn=>{ht.current&&sn.currentTarget===sn.target&&ht.current.focus(),ye&&!it.disabled&&ye(sn)};let $t=N,Lt=U;re&&$t==="input"&&(Ae?Lt=H({type:void 0,minRows:Ae,maxRows:Ae},Lt):Lt=H({type:void 0,maxRows:Y,minRows:Q},Lt),$t=T6);const un=sn=>{He(sn.animationName==="mui-auto-fill-cancel"?ht.current:{value:"x"})};W.useEffect(()=>{Je&&Je.setAdornedStart(!!Ne)},[Je,Ne]);const kn=H({},h,{color:it.color||"primary",disabled:it.disabled,endAdornment:j,error:it.error,focused:it.focused,formControl:Je,fullWidth:B,hiddenLabel:it.hiddenLabel,multiline:re,size:it.size,startAdornment:Ne,type:nt}),Hn=S9(kn),dn=ke.root||C.Root||Z_,En=Se.root||M.root||{},Tn=ke.input||C.Input||X_;return Lt=H({},Lt,(l=Se.input)!=null?l:M.input),he.jsxs(W.Fragment,{children:[!$&&T9,he.jsxs(dn,H({},En,!gu(dn)&&{ownerState:H({},kn,En.ownerState)},{ref:o,onClick:Ut},gt,{className:Zt(Hn.root,En.className,w,ue&&"MuiInputBase-readOnly"),children:[Ne,he.jsx(G_.Provider,{value:null,children:he.jsx(Tn,H({ownerState:kn,"aria-invalid":it.error,"aria-describedby":p,autoComplete:_,autoFocus:a,defaultValue:D,disabled:it.disabled,id:K,onAnimationStart:un,name:oe,placeholder:we,readOnly:ue,required:it.required,rows:Ae,value:rt,onKeyDown:Fe,onKeyUp:be,type:nt},Lt,!gu(Tn)&&{as:$t,ownerState:H({},kn,Lt.ownerState)},{ref:Ot,className:Zt(Hn.input,Lt.className,ue&&"MuiInputBase-readOnly"),onBlur:lt,onChange:jt,onFocus:Vt}))}),j,Be?Be(H({},it,{startAdornment:Ne})):null]}))]})}),v2=C9;function E9(e){return Sn("MuiInput",e)}const k9=H({},Oo,_n("MuiInput",["root","underline","input"])),Ul=k9,P9=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],M9=e=>{const{classes:t,disableUnderline:o}=e,h=xn({root:["root",!o&&"underline"],input:["input"]},E9,t);return H({},t,h)},I9=dt(Z_,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...H_(e,t),!o.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let l=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(l=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),H({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ul.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ul.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${l}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ul.disabled}, .${Ul.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${l}`}},[`&.${Ul.disabled}:before`]:{borderBottomStyle:"dotted"}})}),A9=dt(X_,{name:"MuiInput",slot:"Input",overridesResolver:q_})({}),a4=W.forwardRef(function(t,o){var l,h,p,_;const a=gn({props:t,name:"MuiInput"}),{disableUnderline:w,components:C={},componentsProps:M,fullWidth:D=!1,inputComponent:R="input",multiline:$=!1,slotProps:j,slots:B={},type:K="text"}=a,N=Bt(a,P9),U=M9(a),Y={root:{ownerState:{disableUnderline:w}}},Q=j??M?So(j??M,Y):Y,re=(l=(h=B.root)!=null?h:C.Root)!=null?l:I9,oe=(p=(_=B.input)!=null?_:C.Input)!=null?p:A9;return he.jsx(v2,H({slots:{root:re,input:oe},slotProps:Q,fullWidth:D,inputComponent:R,multiline:$,ref:o,type:K},N,{classes:U}))});a4.muiName="Input";const l4=a4;function D9(e){return Sn("MuiFilledInput",e)}const z9=H({},Oo,_n("MuiFilledInput",["root","underline","input"])),Bo=z9,R9=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],L9=e=>{const{classes:t,disableUnderline:o}=e,h=xn({root:["root",!o&&"underline"],input:["input"]},D9,t);return H({},t,h)},O9=dt(Z_,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...H_(e,t),!o.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var o;const l=e.palette.mode==="light",h=l?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",p=l?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",_=l?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=l?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return H({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:p,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:_,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:p}},[`&.${Bo.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:p},[`&.${Bo.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:a}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(o=(e.vars||e).palette[t.color||"primary"])==null?void 0:o.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Bo.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Bo.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:h}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Bo.disabled}, .${Bo.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Bo.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&H({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),B9=dt(X_,{name:"MuiFilledInput",slot:"Input",overridesResolver:q_})(({theme:e,ownerState:t})=>H({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),c4=W.forwardRef(function(t,o){var l,h,p,_;const a=gn({props:t,name:"MuiFilledInput"}),{components:w={},componentsProps:C,fullWidth:M=!1,inputComponent:D="input",multiline:R=!1,slotProps:$,slots:j={},type:B="text"}=a,K=Bt(a,R9),N=H({},a,{fullWidth:M,inputComponent:D,multiline:R,type:B}),U=L9(a),G={root:{ownerState:N},input:{ownerState:N}},Y=$??C?So($??C,G):G,Q=(l=(h=j.root)!=null?h:w.Root)!=null?l:O9,re=(p=(_=j.input)!=null?_:w.Input)!=null?p:B9;return he.jsx(v2,H({slots:{root:Q,input:re},componentsProps:Y,fullWidth:M,inputComponent:D,multiline:R,ref:o,type:B},K,{classes:U}))});c4.muiName="Input";const u4=c4;var Lk;const F9=["children","classes","className","label","notched"],$9=dt("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),N9=dt("legend")(({ownerState:e,theme:t})=>H({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&H({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function U9(e){const{className:t,label:o,notched:l}=e,h=Bt(e,F9),p=o!=null&&o!=="",_=H({},e,{notched:l,withLabel:p});return he.jsx($9,H({"aria-hidden":!0,className:t,ownerState:_},h,{children:he.jsx(N9,{ownerState:_,children:p?he.jsx("span",{children:o}):Lk||(Lk=he.jsx("span",{className:"notranslate",children:"​"}))})}))}function V9(e){return Sn("MuiOutlinedInput",e)}const j9=H({},Oo,_n("MuiOutlinedInput",["root","notchedOutline","input"])),la=j9,W9=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],G9=e=>{const{classes:t}=e,l=xn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},V9,t);return H({},t,l)},H9=dt(Z_,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:H_})(({theme:e,ownerState:t})=>{const o=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return H({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${la.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${la.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:o}},[`&.${la.focused} .${la.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${la.error} .${la.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${la.disabled} .${la.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&H({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),q9=dt(U9,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),Z9=dt(X_,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:q_})(({theme:e,ownerState:t})=>H({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),d4=W.forwardRef(function(t,o){var l,h,p,_,a;const w=gn({props:t,name:"MuiOutlinedInput"}),{components:C={},fullWidth:M=!1,inputComponent:D="input",label:R,multiline:$=!1,notched:j,slots:B={},type:K="text"}=w,N=Bt(w,W9),U=G9(w),G=Su(),Y=Ih({props:w,muiFormControl:G,states:["required"]}),Q=H({},w,{color:Y.color||"primary",disabled:Y.disabled,error:Y.error,focused:Y.focused,formControl:G,fullWidth:M,hiddenLabel:Y.hiddenLabel,multiline:$,size:Y.size,type:K}),re=(l=(h=B.root)!=null?h:C.Root)!=null?l:H9,oe=(p=(_=B.input)!=null?_:C.Input)!=null?p:Z9;return he.jsx(v2,H({slots:{root:re,input:oe},renderSuffix:de=>he.jsx(q9,{ownerState:Q,className:U.notchedOutline,label:R!=null&&R!==""&&Y.required?a||(a=he.jsxs(W.Fragment,{children:[R," ","*"]})):R,notched:typeof j<"u"?j:!!(de.startAdornment||de.filled||de.focused)}),fullWidth:M,inputComponent:D,multiline:$,ref:o,type:K},N,{classes:H({},U,{notchedOutline:null})}))});d4.muiName="Input";const x2=d4;function X9(e){return Sn("MuiFormLabel",e)}const Y9=_n("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Yf=Y9,K9=["children","className","color","component","disabled","error","filled","focused","required"],J9=e=>{const{classes:t,color:o,focused:l,disabled:h,error:p,filled:_,required:a}=e,w={root:["root",`color${tn(o)}`,h&&"disabled",p&&"error",_&&"filled",l&&"focused",a&&"required"],asterisk:["asterisk",p&&"error"]};return xn(w,X9,t)},Q9=dt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>H({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>H({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Yf.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Yf.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Yf.error}`]:{color:(e.vars||e).palette.error.main}})),eN=dt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Yf.error}`]:{color:(e.vars||e).palette.error.main}})),tN=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiFormLabel"}),{children:h,className:p,component:_="label"}=l,a=Bt(l,K9),w=Su(),C=Ih({props:l,muiFormControl:w,states:["color","required","focused","disabled","error","filled"]}),M=H({},l,{color:C.color||"primary",component:_,disabled:C.disabled,error:C.error,filled:C.filled,focused:C.focused,required:C.required}),D=J9(M);return he.jsxs(Q9,H({as:_,ownerState:M,className:Zt(D.root,p),ref:o},a,{children:[h,C.required&&he.jsxs(eN,{ownerState:M,"aria-hidden":!0,className:D.asterisk,children:[" ","*"]})]}))}),nN=tN;function rN(e){return Sn("MuiInputLabel",e)}_n("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const iN=["disableAnimation","margin","shrink","variant","className"],oN=e=>{const{classes:t,formControl:o,size:l,shrink:h,disableAnimation:p,variant:_,required:a}=e,C=xn({root:["root",o&&"formControl",!p&&"animated",h&&"shrink",l==="small"&&"sizeSmall",_],asterisk:[a&&"asterisk"]},rN,t);return H({},t,C)},sN=dt(nN,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${Yf.asterisk}`]:t.asterisk},t.root,o.formControl&&t.formControl,o.size==="small"&&t.sizeSmall,o.shrink&&t.shrink,!o.disableAnimation&&t.animated,t[o.variant]]}})(({theme:e,ownerState:t})=>H({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&H({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&H({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&H({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),aN=W.forwardRef(function(t,o){const l=gn({name:"MuiInputLabel",props:t}),{disableAnimation:h=!1,shrink:p,className:_}=l,a=Bt(l,iN),w=Su();let C=p;typeof C>"u"&&w&&(C=w.filled||w.focused||w.adornedStart);const M=Ih({props:l,muiFormControl:w,states:["size","variant","required"]}),D=H({},l,{disableAnimation:h,formControl:w,shrink:C,size:M.size,variant:M.variant,required:M.required}),R=oN(D);return he.jsx(sN,H({"data-shrink":C,ownerState:D,ref:o,className:Zt(R.root,_)},a,{classes:R}))}),lN=aN;function cN(e){return Sn("MuiFormControl",e)}_n("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const uN=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],dN=e=>{const{classes:t,margin:o,fullWidth:l}=e,h={root:["root",o!=="none"&&`margin${tn(o)}`,l&&"fullWidth"]};return xn(h,cN,t)},hN=dt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>H({},t.root,t[`margin${tn(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>H({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),pN=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiFormControl"}),{children:h,className:p,color:_="primary",component:a="div",disabled:w=!1,error:C=!1,focused:M,fullWidth:D=!1,hiddenLabel:R=!1,margin:$="none",required:j=!1,size:B="medium",variant:K="outlined"}=l,N=Bt(l,uN),U=H({},l,{color:_,component:a,disabled:w,error:C,fullWidth:D,hiddenLabel:R,margin:$,required:j,size:B,variant:K}),G=dN(U),[Y,Q]=W.useState(()=>{let be=!1;return h&&W.Children.forEach(h,we=>{if(!Qy(we,["Input","Select"]))return;const ue=Qy(we,["Select"])?we.props.input:we;ue&&v9(ue.props)&&(be=!0)}),be}),[re,oe]=W.useState(()=>{let be=!1;return h&&W.Children.forEach(h,we=>{Qy(we,["Input","Select"])&&(N0(we.props,!0)||N0(we.props.inputProps,!0))&&(be=!0)}),be}),[de,ae]=W.useState(!1);w&&de&&ae(!1);const ye=M!==void 0&&!w?M:de;let Ce;const Fe=W.useMemo(()=>({adornedStart:Y,setAdornedStart:Q,color:_,disabled:w,error:C,filled:re,focused:ye,fullWidth:D,hiddenLabel:R,size:B,onBlur:()=>{ae(!1)},onEmpty:()=>{oe(!1)},onFilled:()=>{oe(!0)},onFocus:()=>{ae(!0)},registerEffect:Ce,required:j,variant:K}),[Y,_,w,C,re,ye,D,R,Ce,j,B,K]);return he.jsx(G_.Provider,{value:Fe,children:he.jsx(hN,H({as:a,ownerState:U,className:Zt(G.root,p),ref:o},N,{children:h}))})}),h4=pN;function fN(e){return Sn("MuiFormHelperText",e)}const mN=_n("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Ok=mN;var Bk;const gN=["children","className","component","disabled","error","filled","focused","margin","required","variant"],yN=e=>{const{classes:t,contained:o,size:l,disabled:h,error:p,filled:_,focused:a,required:w}=e,C={root:["root",h&&"disabled",p&&"error",l&&`size${tn(l)}`,o&&"contained",a&&"focused",_&&"filled",w&&"required"]};return xn(C,fN,t)},_N=dt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.size&&t[`size${tn(o.size)}`],o.contained&&t.contained,o.filled&&t.filled]}})(({theme:e,ownerState:t})=>H({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Ok.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Ok.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),vN=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiFormHelperText"}),{children:h,className:p,component:_="p"}=l,a=Bt(l,gN),w=Su(),C=Ih({props:l,muiFormControl:w,states:["variant","size","disabled","error","filled","focused","required"]}),M=H({},l,{component:_,contained:C.variant==="filled"||C.variant==="outlined",variant:C.variant,size:C.size,disabled:C.disabled,error:C.error,filled:C.filled,focused:C.focused,required:C.required}),D=yN(M);return he.jsx(_N,H({as:_,ownerState:M,className:Zt(D.root,p),ref:o},a,{children:h===" "?Bk||(Bk=he.jsx("span",{className:"notranslate",children:"​"})):h}))}),xN=vN;var Lr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2=Symbol.for("react.element"),w2=Symbol.for("react.portal"),Y_=Symbol.for("react.fragment"),K_=Symbol.for("react.strict_mode"),J_=Symbol.for("react.profiler"),Q_=Symbol.for("react.provider"),ev=Symbol.for("react.context"),bN=Symbol.for("react.server_context"),tv=Symbol.for("react.forward_ref"),nv=Symbol.for("react.suspense"),rv=Symbol.for("react.suspense_list"),iv=Symbol.for("react.memo"),ov=Symbol.for("react.lazy"),wN=Symbol.for("react.offscreen"),p4;p4=Symbol.for("react.module.reference");function vs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case b2:switch(e=e.type,e){case Y_:case J_:case K_:case nv:case rv:return e;default:switch(e=e&&e.$$typeof,e){case bN:case ev:case tv:case ov:case iv:case Q_:return e;default:return t}}case w2:return t}}}Lr.ContextConsumer=ev;Lr.ContextProvider=Q_;Lr.Element=b2;Lr.ForwardRef=tv;Lr.Fragment=Y_;Lr.Lazy=ov;Lr.Memo=iv;Lr.Portal=w2;Lr.Profiler=J_;Lr.StrictMode=K_;Lr.Suspense=nv;Lr.SuspenseList=rv;Lr.isAsyncMode=function(){return!1};Lr.isConcurrentMode=function(){return!1};Lr.isContextConsumer=function(e){return vs(e)===ev};Lr.isContextProvider=function(e){return vs(e)===Q_};Lr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===b2};Lr.isForwardRef=function(e){return vs(e)===tv};Lr.isFragment=function(e){return vs(e)===Y_};Lr.isLazy=function(e){return vs(e)===ov};Lr.isMemo=function(e){return vs(e)===iv};Lr.isPortal=function(e){return vs(e)===w2};Lr.isProfiler=function(e){return vs(e)===J_};Lr.isStrictMode=function(e){return vs(e)===K_};Lr.isSuspense=function(e){return vs(e)===nv};Lr.isSuspenseList=function(e){return vs(e)===rv};Lr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Y_||e===J_||e===K_||e===nv||e===rv||e===wN||typeof e=="object"&&e!==null&&(e.$$typeof===ov||e.$$typeof===iv||e.$$typeof===Q_||e.$$typeof===ev||e.$$typeof===tv||e.$$typeof===p4||e.getModuleId!==void 0)};Lr.typeOf=vs;const SN=W.createContext({}),uu=SN;function TN(e){return Sn("MuiList",e)}_n("MuiList",["root","padding","dense","subheader"]);const CN=["children","className","component","dense","disablePadding","subheader"],EN=e=>{const{classes:t,disablePadding:o,dense:l,subheader:h}=e;return xn({root:["root",!o&&"padding",l&&"dense",h&&"subheader"]},TN,t)},kN=dt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disablePadding&&t.padding,o.dense&&t.dense,o.subheader&&t.subheader]}})(({ownerState:e})=>H({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),PN=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiList"}),{children:h,className:p,component:_="ul",dense:a=!1,disablePadding:w=!1,subheader:C}=l,M=Bt(l,CN),D=W.useMemo(()=>({dense:a}),[a]),R=H({},l,{component:_,dense:a,disablePadding:w}),$=EN(R);return he.jsx(uu.Provider,{value:D,children:he.jsxs(kN,H({as:_,className:Zt($.root,p),ref:o,ownerState:R},M,{children:[C,h]}))})}),f4=PN,MN=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function T1(e,t,o){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:o?null:e.firstChild}function Fk(e,t,o){return e===t?o?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:o?null:e.lastChild}function m4(e,t){if(t===void 0)return!0;let o=e.innerText;return o===void 0&&(o=e.textContent),o=o.trim().toLowerCase(),o.length===0?!1:t.repeating?o[0]===t.keys[0]:o.indexOf(t.keys.join(""))===0}function wf(e,t,o,l,h,p){let _=!1,a=h(e,t,t?o:!1);for(;a;){if(a===e.firstChild){if(_)return!1;_=!0}const w=l?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!m4(a,p)||w)a=h(e,a,o);else return a.focus(),!0}return!1}const IN=W.forwardRef(function(t,o){const{actions:l,autoFocus:h=!1,autoFocusItem:p=!1,children:_,className:a,disabledItemsFocusable:w=!1,disableListWrap:C=!1,onKeyDown:M,variant:D="selectedMenu"}=t,R=Bt(t,MN),$=W.useRef(null),j=W.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});ki(()=>{h&&$.current.focus()},[h]),W.useImperativeHandle(l,()=>({adjustStyleForScrollbar:(G,Y)=>{const Q=!$.current.style.width;if(G.clientHeight<$.current.clientHeight&&Q){const re=`${XI(Ei(G))}px`;$.current.style[Y.direction==="rtl"?"paddingLeft":"paddingRight"]=re,$.current.style.width=`calc(100% + ${re})`}return $.current}}),[]);const B=G=>{const Y=$.current,Q=G.key,re=Ei(Y).activeElement;if(Q==="ArrowDown")G.preventDefault(),wf(Y,re,C,w,T1);else if(Q==="ArrowUp")G.preventDefault(),wf(Y,re,C,w,Fk);else if(Q==="Home")G.preventDefault(),wf(Y,null,C,w,T1);else if(Q==="End")G.preventDefault(),wf(Y,null,C,w,Fk);else if(Q.length===1){const oe=j.current,de=Q.toLowerCase(),ae=performance.now();oe.keys.length>0&&(ae-oe.lastTime>500?(oe.keys=[],oe.repeating=!0,oe.previousKeyMatched=!0):oe.repeating&&de!==oe.keys[0]&&(oe.repeating=!1)),oe.lastTime=ae,oe.keys.push(de);const ye=re&&!oe.repeating&&m4(re,oe);oe.previousKeyMatched&&(ye||wf(Y,re,!1,w,T1,oe))?G.preventDefault():oe.previousKeyMatched=!1}M&&M(G)},K=Rr($,o);let N=-1;W.Children.forEach(_,(G,Y)=>{if(!W.isValidElement(G)){N===Y&&(N+=1,N>=_.length&&(N=-1));return}G.props.disabled||(D==="selectedMenu"&&G.props.selected||N===-1)&&(N=Y),N===Y&&(G.props.disabled||G.props.muiSkipListHighlight||G.type.muiSkipListHighlight)&&(N+=1,N>=_.length&&(N=-1))});const U=W.Children.map(_,(G,Y)=>{if(Y===N){const Q={};return p&&(Q.autoFocus=!0),G.props.tabIndex===void 0&&D==="selectedMenu"&&(Q.tabIndex=0),W.cloneElement(G,Q)}return G});return he.jsx(f4,H({role:"menu",ref:K,className:a,onKeyDown:B,tabIndex:h?0:-1},R,{children:U}))}),g4=IN;function $b(e,t){return $b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,h){return l.__proto__=h,l},$b(e,t)}function S2(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$b(e,t)}function AN(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function DN(e,t){e.classList?e.classList.add(t):AN(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function $k(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function zN(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=$k(e.className,t):e.setAttribute("class",$k(e.className&&e.className.baseVal||"",t))}const Nk={disabled:!1},U0=Ft.createContext(null);var y4=function(t){return t.scrollTop},zf="unmounted",Qc="exited",eu="entering",Rd="entered",Nb="exiting",rl=function(e){S2(t,e);function t(l,h){var p;p=e.call(this,l,h)||this;var _=h,a=_&&!_.isMounting?l.enter:l.appear,w;return p.appearStatus=null,l.in?a?(w=Qc,p.appearStatus=eu):w=Rd:l.unmountOnExit||l.mountOnEnter?w=zf:w=Qc,p.state={status:w},p.nextCallback=null,p}t.getDerivedStateFromProps=function(h,p){var _=h.in;return _&&p.status===zf?{status:Qc}:null};var o=t.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(h){var p=null;if(h!==this.props){var _=this.state.status;this.props.in?_!==eu&&_!==Rd&&(p=eu):(_===eu||_===Rd)&&(p=Nb)}this.updateStatus(!1,p)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var h=this.props.timeout,p,_,a;return p=_=a=h,h!=null&&typeof h!="number"&&(p=h.exit,_=h.enter,a=h.appear!==void 0?h.appear:_),{exit:p,enter:_,appear:a}},o.updateStatus=function(h,p){if(h===void 0&&(h=!1),p!==null)if(this.cancelNextCallback(),p===eu){if(this.props.unmountOnExit||this.props.mountOnEnter){var _=this.props.nodeRef?this.props.nodeRef.current:Ay.findDOMNode(this);_&&y4(_)}this.performEnter(h)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qc&&this.setState({status:zf})},o.performEnter=function(h){var p=this,_=this.props.enter,a=this.context?this.context.isMounting:h,w=this.props.nodeRef?[a]:[Ay.findDOMNode(this),a],C=w[0],M=w[1],D=this.getTimeouts(),R=a?D.appear:D.enter;if(!h&&!_||Nk.disabled){this.safeSetState({status:Rd},function(){p.props.onEntered(C)});return}this.props.onEnter(C,M),this.safeSetState({status:eu},function(){p.props.onEntering(C,M),p.onTransitionEnd(R,function(){p.safeSetState({status:Rd},function(){p.props.onEntered(C,M)})})})},o.performExit=function(){var h=this,p=this.props.exit,_=this.getTimeouts(),a=this.props.nodeRef?void 0:Ay.findDOMNode(this);if(!p||Nk.disabled){this.safeSetState({status:Qc},function(){h.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Nb},function(){h.props.onExiting(a),h.onTransitionEnd(_.exit,function(){h.safeSetState({status:Qc},function(){h.props.onExited(a)})})})},o.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(h,p){p=this.setNextCallback(p),this.setState(h,p)},o.setNextCallback=function(h){var p=this,_=!0;return this.nextCallback=function(a){_&&(_=!1,p.nextCallback=null,h(a))},this.nextCallback.cancel=function(){_=!1},this.nextCallback},o.onTransitionEnd=function(h,p){this.setNextCallback(p);var _=this.props.nodeRef?this.props.nodeRef.current:Ay.findDOMNode(this),a=h==null&&!this.props.addEndListener;if(!_||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var w=this.props.nodeRef?[this.nextCallback]:[_,this.nextCallback],C=w[0],M=w[1];this.props.addEndListener(C,M)}h!=null&&setTimeout(this.nextCallback,h)},o.render=function(){var h=this.state.status;if(h===zf)return null;var p=this.props,_=p.children;p.in,p.mountOnEnter,p.unmountOnExit,p.appear,p.enter,p.exit,p.timeout,p.addEndListener,p.onEnter,p.onEntering,p.onEntered,p.onExit,p.onExiting,p.onExited,p.nodeRef;var a=Bt(p,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ft.createElement(U0.Provider,{value:null},typeof _=="function"?_(h,a):Ft.cloneElement(Ft.Children.only(_),a))},t}(Ft.Component);rl.contextType=U0;rl.propTypes={};function Ad(){}rl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ad,onEntering:Ad,onEntered:Ad,onExit:Ad,onExiting:Ad,onExited:Ad};rl.UNMOUNTED=zf;rl.EXITED=Qc;rl.ENTERING=eu;rl.ENTERED=Rd;rl.EXITING=Nb;const T2=rl;var RN=function(t,o){return t&&o&&o.split(" ").forEach(function(l){return DN(t,l)})},C1=function(t,o){return t&&o&&o.split(" ").forEach(function(l){return zN(t,l)})},C2=function(e){S2(t,e);function t(){for(var l,h=arguments.length,p=new Array(h),_=0;_<h;_++)p[_]=arguments[_];return l=e.call.apply(e,[this].concat(p))||this,l.appliedClasses={appear:{},enter:{},exit:{}},l.onEnter=function(a,w){var C=l.resolveArguments(a,w),M=C[0],D=C[1];l.removeClasses(M,"exit"),l.addClass(M,D?"appear":"enter","base"),l.props.onEnter&&l.props.onEnter(a,w)},l.onEntering=function(a,w){var C=l.resolveArguments(a,w),M=C[0],D=C[1],R=D?"appear":"enter";l.addClass(M,R,"active"),l.props.onEntering&&l.props.onEntering(a,w)},l.onEntered=function(a,w){var C=l.resolveArguments(a,w),M=C[0],D=C[1],R=D?"appear":"enter";l.removeClasses(M,R),l.addClass(M,R,"done"),l.props.onEntered&&l.props.onEntered(a,w)},l.onExit=function(a){var w=l.resolveArguments(a),C=w[0];l.removeClasses(C,"appear"),l.removeClasses(C,"enter"),l.addClass(C,"exit","base"),l.props.onExit&&l.props.onExit(a)},l.onExiting=function(a){var w=l.resolveArguments(a),C=w[0];l.addClass(C,"exit","active"),l.props.onExiting&&l.props.onExiting(a)},l.onExited=function(a){var w=l.resolveArguments(a),C=w[0];l.removeClasses(C,"exit"),l.addClass(C,"exit","done"),l.props.onExited&&l.props.onExited(a)},l.resolveArguments=function(a,w){return l.props.nodeRef?[l.props.nodeRef.current,a]:[a,w]},l.getClassNames=function(a){var w=l.props.classNames,C=typeof w=="string",M=C&&w?w+"-":"",D=C?""+M+a:w[a],R=C?D+"-active":w[a+"Active"],$=C?D+"-done":w[a+"Done"];return{baseClassName:D,activeClassName:R,doneClassName:$}},l}var o=t.prototype;return o.addClass=function(h,p,_){var a=this.getClassNames(p)[_+"ClassName"],w=this.getClassNames("enter"),C=w.doneClassName;p==="appear"&&_==="done"&&C&&(a+=" "+C),_==="active"&&h&&y4(h),a&&(this.appliedClasses[p][_]=a,RN(h,a))},o.removeClasses=function(h,p){var _=this.appliedClasses[p],a=_.base,w=_.active,C=_.done;this.appliedClasses[p]={},a&&C1(h,a),w&&C1(h,w),C&&C1(h,C)},o.render=function(){var h=this.props;h.classNames;var p=Bt(h,["classNames"]);return Ft.createElement(T2,H({},p,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(Ft.Component);C2.defaultProps={classNames:""};C2.propTypes={};const LN=C2;function ON(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E2(e,t){var o=function(p){return t&&W.isValidElement(p)?t(p):p},l=Object.create(null);return e&&W.Children.map(e,function(h){return h}).forEach(function(h){l[h.key]=o(h)}),l}function BN(e,t){e=e||{},t=t||{};function o(M){return M in t?t[M]:e[M]}var l=Object.create(null),h=[];for(var p in e)p in t?h.length&&(l[p]=h,h=[]):h.push(p);var _,a={};for(var w in t){if(l[w])for(_=0;_<l[w].length;_++){var C=l[w][_];a[l[w][_]]=o(C)}a[w]=o(w)}for(_=0;_<h.length;_++)a[h[_]]=o(h[_]);return a}function ou(e,t,o){return o[t]!=null?o[t]:e.props[t]}function FN(e,t){return E2(e.children,function(o){return W.cloneElement(o,{onExited:t.bind(null,o),in:!0,appear:ou(o,"appear",e),enter:ou(o,"enter",e),exit:ou(o,"exit",e)})})}function $N(e,t,o){var l=E2(e.children),h=BN(t,l);return Object.keys(h).forEach(function(p){var _=h[p];if(W.isValidElement(_)){var a=p in t,w=p in l,C=t[p],M=W.isValidElement(C)&&!C.props.in;w&&(!a||M)?h[p]=W.cloneElement(_,{onExited:o.bind(null,_),in:!0,exit:ou(_,"exit",e),enter:ou(_,"enter",e)}):!w&&a&&!M?h[p]=W.cloneElement(_,{in:!1}):w&&a&&W.isValidElement(C)&&(h[p]=W.cloneElement(_,{onExited:o.bind(null,_),in:C.props.in,exit:ou(_,"exit",e),enter:ou(_,"enter",e)}))}}),h}var NN=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},UN={component:"div",childFactory:function(t){return t}},k2=function(e){S2(t,e);function t(l,h){var p;p=e.call(this,l,h)||this;var _=p.handleExited.bind(ON(p));return p.state={contextValue:{isMounting:!0},handleExited:_,firstRender:!0},p}var o=t.prototype;return o.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},o.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(h,p){var _=p.children,a=p.handleExited,w=p.firstRender;return{children:w?FN(h,a):$N(h,_,a),firstRender:!1}},o.handleExited=function(h,p){var _=E2(this.props.children);h.key in _||(h.props.onExited&&h.props.onExited(p),this.mounted&&this.setState(function(a){var w=H({},a.children);return delete w[h.key],{children:w}}))},o.render=function(){var h=this.props,p=h.component,_=h.childFactory,a=Bt(h,["component","childFactory"]),w=this.state.contextValue,C=NN(this.state.children).map(_);return delete a.appear,delete a.enter,delete a.exit,p===null?Ft.createElement(U0.Provider,{value:w},C):Ft.createElement(U0.Provider,{value:w},Ft.createElement(p,a,C))},t}(Ft.Component);k2.propTypes={};k2.defaultProps=UN;const P2=k2,_4=e=>e.scrollTop;function V0(e,t){var o,l;const{timeout:h,easing:p,style:_={}}=e;return{duration:(o=_.transitionDuration)!=null?o:typeof h=="number"?h:h[t.mode]||0,easing:(l=_.transitionTimingFunction)!=null?l:typeof p=="object"?p[t.mode]:p,delay:_.transitionDelay}}const VN=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Ub(e){return`scale(${e}, ${e**2})`}const jN={entering:{opacity:1,transform:Ub(1)},entered:{opacity:1,transform:"none"}},E1=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),v4=W.forwardRef(function(t,o){const{addEndListener:l,appear:h=!0,children:p,easing:_,in:a,onEnter:w,onEntered:C,onEntering:M,onExit:D,onExited:R,onExiting:$,style:j,timeout:B="auto",TransitionComponent:K=T2}=t,N=Bt(t,VN),U=W.useRef(),G=W.useRef(),Y=_s(),Q=W.useRef(null),re=Rr(Q,p.ref,o),oe=ue=>Be=>{if(ue){const Ae=Q.current;Be===void 0?ue(Ae):ue(Ae,Be)}},de=oe(M),ae=oe((ue,Be)=>{_4(ue);const{duration:Ae,delay:Se,easing:ke}=V0({style:j,timeout:B,easing:_},{mode:"enter"});let Ne;B==="auto"?(Ne=Y.transitions.getAutoHeightDuration(ue.clientHeight),G.current=Ne):Ne=Ae,ue.style.transition=[Y.transitions.create("opacity",{duration:Ne,delay:Se}),Y.transitions.create("transform",{duration:E1?Ne:Ne*.666,delay:Se,easing:ke})].join(","),w&&w(ue,Be)}),ye=oe(C),Ce=oe($),Fe=oe(ue=>{const{duration:Be,delay:Ae,easing:Se}=V0({style:j,timeout:B,easing:_},{mode:"exit"});let ke;B==="auto"?(ke=Y.transitions.getAutoHeightDuration(ue.clientHeight),G.current=ke):ke=Be,ue.style.transition=[Y.transitions.create("opacity",{duration:ke,delay:Ae}),Y.transitions.create("transform",{duration:E1?ke:ke*.666,delay:E1?Ae:Ae||ke*.333,easing:Se})].join(","),ue.style.opacity=0,ue.style.transform=Ub(.75),D&&D(ue)}),be=oe(R),we=ue=>{B==="auto"&&(U.current=setTimeout(ue,G.current||0)),l&&l(Q.current,ue)};return W.useEffect(()=>()=>{clearTimeout(U.current)},[]),he.jsx(K,H({appear:h,in:a,nodeRef:Q,onEnter:ae,onEntered:ye,onEntering:de,onExit:Fe,onExited:be,onExiting:Ce,addEndListener:we,timeout:B==="auto"?null:B},N,{children:(ue,Be)=>W.cloneElement(p,H({style:H({opacity:0,transform:Ub(.75),visibility:ue==="exited"&&!a?"hidden":void 0},jN[ue],j,p.props.style),ref:re},Be))}))});v4.muiSupportAuto=!0;const x4=v4,WN=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],GN={entering:{opacity:1},entered:{opacity:1}},HN=W.forwardRef(function(t,o){const l=_s(),h={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:p,appear:_=!0,children:a,easing:w,in:C,onEnter:M,onEntered:D,onEntering:R,onExit:$,onExited:j,onExiting:B,style:K,timeout:N=h,TransitionComponent:U=T2}=t,G=Bt(t,WN),Y=W.useRef(null),Q=Rr(Y,a.ref,o),re=we=>ue=>{if(we){const Be=Y.current;ue===void 0?we(Be):we(Be,ue)}},oe=re(R),de=re((we,ue)=>{_4(we);const Be=V0({style:K,timeout:N,easing:w},{mode:"enter"});we.style.webkitTransition=l.transitions.create("opacity",Be),we.style.transition=l.transitions.create("opacity",Be),M&&M(we,ue)}),ae=re(D),ye=re(B),Ce=re(we=>{const ue=V0({style:K,timeout:N,easing:w},{mode:"exit"});we.style.webkitTransition=l.transitions.create("opacity",ue),we.style.transition=l.transitions.create("opacity",ue),$&&$(we)}),Fe=re(j),be=we=>{p&&p(Y.current,we)};return he.jsx(U,H({appear:_,in:C,nodeRef:Y,onEnter:de,onEntered:ae,onEntering:oe,onExit:Ce,onExited:Fe,onExiting:ye,addEndListener:be,timeout:N},G,{children:(we,ue)=>W.cloneElement(a,H({style:H({opacity:0,visibility:we==="exited"&&!C?"hidden":void 0},GN[we],K,a.props.style),ref:Q},ue))}))}),Um=HN;function qN(e){return Sn("MuiBackdrop",e)}_n("MuiBackdrop",["root","invisible"]);const ZN=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],XN=e=>{const{classes:t,invisible:o}=e;return xn({root:["root",o&&"invisible"]},qN,t)},YN=dt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.invisible&&t.invisible]}})(({ownerState:e})=>H({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),KN=W.forwardRef(function(t,o){var l,h,p;const _=gn({props:t,name:"MuiBackdrop"}),{children:a,className:w,component:C="div",components:M={},componentsProps:D={},invisible:R=!1,open:$,slotProps:j={},slots:B={},TransitionComponent:K=Um,transitionDuration:N}=_,U=Bt(_,ZN),G=H({},_,{component:C,invisible:R}),Y=XN(G),Q=(l=j.root)!=null?l:D.root;return he.jsx(K,H({in:$,timeout:N},U,{children:he.jsx(YN,H({"aria-hidden":!0},Q,{as:(h=(p=B.root)!=null?p:M.Root)!=null?h:C,className:Zt(Y.root,w,Q==null?void 0:Q.className),ownerState:H({},G,Q==null?void 0:Q.ownerState),classes:Y,ref:o,children:a}))}))}),b4=KN,JN=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],QN=dt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.open&&o.exited&&t.hidden]}})(({theme:e,ownerState:t})=>H({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),eU=dt(b4,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),tU=W.forwardRef(function(t,o){var l,h,p,_,a,w;const C=gn({name:"MuiModal",props:t}),{BackdropComponent:M=eU,BackdropProps:D,classes:R,className:$,closeAfterTransition:j=!1,children:B,container:K,component:N,components:U={},componentsProps:G={},disableAutoFocus:Y=!1,disableEnforceFocus:Q=!1,disableEscapeKeyDown:re=!1,disablePortal:oe=!1,disableRestoreFocus:de=!1,disableScrollLock:ae=!1,hideBackdrop:ye=!1,keepMounted:Ce=!1,onBackdropClick:Fe,onClose:be,open:we,slotProps:ue,slots:Be,theme:Ae}=C,Se=Bt(C,JN),[ke,Ne]=W.useState(!0),nt={container:K,closeAfterTransition:j,disableAutoFocus:Y,disableEnforceFocus:Q,disableEscapeKeyDown:re,disablePortal:oe,disableRestoreFocus:de,disableScrollLock:ae,hideBackdrop:ye,keepMounted:Ce,onBackdropClick:Fe,onClose:be,open:we},vt=H({},C,nt,{exited:ke}),gt=(l=(h=Be==null?void 0:Be.root)!=null?h:U.Root)!=null?l:QN,rt=(p=(_=Be==null?void 0:Be.backdrop)!=null?_:U.Backdrop)!=null?p:M,xt=(a=ue==null?void 0:ue.root)!=null?a:G.root,ht=(w=ue==null?void 0:ue.backdrop)!=null?w:G.backdrop;return he.jsx(x6,H({slots:{root:gt,backdrop:rt},slotProps:{root:()=>H({},mh(xt,vt),!gu(gt)&&{as:N,theme:Ae},{className:Zt($,xt==null?void 0:xt.className,R==null?void 0:R.root,!vt.open&&vt.exited&&(R==null?void 0:R.hidden))}),backdrop:()=>H({},D,mh(ht,vt),{className:Zt(ht==null?void 0:ht.className,D==null?void 0:D.className,R==null?void 0:R.backdrop)})},onTransitionEnter:()=>Ne(!1),onTransitionExited:()=>Ne(!0),ref:o},Se,nt,{children:B}))}),w4=tU;function nU(e){return Sn("MuiPaper",e)}_n("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const rU=["className","component","elevation","square","variant"],iU=e=>{const{square:t,elevation:o,variant:l,classes:h}=e,p={root:["root",l,!t&&"rounded",l==="elevation"&&`elevation${o}`]};return xn(p,nU,h)},oU=dt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],!o.square&&t.rounded,o.variant==="elevation"&&t[`elevation${o.elevation}`]]}})(({theme:e,ownerState:t})=>{var o;return H({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&H({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Jn("#fff",wk(t.elevation))}, ${Jn("#fff",wk(t.elevation))})`},e.vars&&{backgroundImage:(o=e.vars.overlays)==null?void 0:o[t.elevation]}))}),sU=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiPaper"}),{className:h,component:p="div",elevation:_=1,square:a=!1,variant:w="elevation"}=l,C=Bt(l,rU),M=H({},l,{component:p,elevation:_,square:a,variant:w}),D=iU(M);return he.jsx(oU,H({as:p,ownerState:M,className:Zt(D.root,h),ref:o},C))}),Ah=sU;function aU(e){return Sn("MuiPopover",e)}_n("MuiPopover",["root","paper"]);const lU=["onEntering"],cU=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"],uU=["slotProps"];function Uk(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.height/2:t==="bottom"&&(o=e.height),o}function Vk(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.width/2:t==="right"&&(o=e.width),o}function jk(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function k1(e){return typeof e=="function"?e():e}const dU=e=>{const{classes:t}=e;return xn({root:["root"],paper:["paper"]},aU,t)},hU=dt(w4,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),S4=dt(Ah,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),pU=W.forwardRef(function(t,o){var l,h,p;const _=gn({props:t,name:"MuiPopover"}),{action:a,anchorEl:w,anchorOrigin:C={vertical:"top",horizontal:"left"},anchorPosition:M,anchorReference:D="anchorEl",children:R,className:$,container:j,elevation:B=8,marginThreshold:K=16,open:N,PaperProps:U={},slots:G,slotProps:Y,transformOrigin:Q={vertical:"top",horizontal:"left"},TransitionComponent:re=x4,transitionDuration:oe="auto",TransitionProps:{onEntering:de}={}}=_,ae=Bt(_.TransitionProps,lU),ye=Bt(_,cU),Ce=(l=Y==null?void 0:Y.paper)!=null?l:U,Fe=W.useRef(),be=Rr(Fe,Ce.ref),we=H({},_,{anchorOrigin:C,anchorReference:D,elevation:B,marginThreshold:K,externalPaperSlotProps:Ce,transformOrigin:Q,TransitionComponent:re,transitionDuration:oe,TransitionProps:ae}),ue=dU(we),Be=W.useCallback(()=>{if(D==="anchorPosition")return M;const it=k1(w),Gt=(it&&it.nodeType===1?it:Ei(Fe.current).body).getBoundingClientRect();return{top:Gt.top+Uk(Gt,C.vertical),left:Gt.left+Vk(Gt,C.horizontal)}},[w,C.horizontal,C.vertical,M,D]),Ae=W.useCallback(it=>({vertical:Uk(it,Q.vertical),horizontal:Vk(it,Q.horizontal)}),[Q.horizontal,Q.vertical]),Se=W.useCallback(it=>{const St={width:it.offsetWidth,height:it.offsetHeight},Gt=Ae(St);if(D==="none")return{top:null,left:null,transformOrigin:jk(Gt)};const He=Be();let Vt=He.top-Gt.vertical,lt=He.left-Gt.horizontal;const jt=Vt+St.height,Ut=lt+St.width,$t=Ka(k1(w)),Lt=$t.innerHeight-K,un=$t.innerWidth-K;if(Vt<K){const kn=Vt-K;Vt-=kn,Gt.vertical+=kn}else if(jt>Lt){const kn=jt-Lt;Vt-=kn,Gt.vertical+=kn}if(lt<K){const kn=lt-K;lt-=kn,Gt.horizontal+=kn}else if(Ut>un){const kn=Ut-un;lt-=kn,Gt.horizontal+=kn}return{top:`${Math.round(Vt)}px`,left:`${Math.round(lt)}px`,transformOrigin:jk(Gt)}},[w,D,Be,Ae,K]),[ke,Ne]=W.useState(N),nt=W.useCallback(()=>{const it=Fe.current;if(!it)return;const St=Se(it);St.top!==null&&(it.style.top=St.top),St.left!==null&&(it.style.left=St.left),it.style.transformOrigin=St.transformOrigin,Ne(!0)},[Se]),vt=(it,St)=>{de&&de(it,St),nt()},gt=()=>{Ne(!1)};W.useEffect(()=>{N&&nt()}),W.useImperativeHandle(a,()=>N?{updatePosition:()=>{nt()}}:null,[N,nt]),W.useEffect(()=>{if(!N)return;const it=ym(()=>{nt()}),St=Ka(w);return St.addEventListener("resize",it),()=>{it.clear(),St.removeEventListener("resize",it)}},[w,N,nt]);let rt=oe;oe==="auto"&&!re.muiSupportAuto&&(rt=void 0);const xt=j||(w?Ei(k1(w)).body:void 0),ht=(h=G==null?void 0:G.root)!=null?h:hU,mt=(p=G==null?void 0:G.paper)!=null?p:S4,Ot=$r({elementType:mt,externalSlotProps:H({},Ce,{style:ke?Ce.style:H({},Ce.style,{opacity:0})}),additionalProps:{elevation:B,ref:be},ownerState:we,className:Zt(ue.paper,Ce==null?void 0:Ce.className)}),Nt=$r({elementType:ht,externalSlotProps:(Y==null?void 0:Y.root)||{},externalForwardedProps:ye,additionalProps:{ref:o,slotProps:{backdrop:{invisible:!0}},container:xt,open:N},ownerState:we,className:Zt(ue.root,$)}),{slotProps:at}=Nt,Je=Bt(Nt,uU);return he.jsx(ht,H({},Je,!gu(ht)&&{slotProps:at},{children:he.jsx(re,H({appear:!0,in:N,onEntering:vt,onExited:gt,timeout:rt},ae,{children:he.jsx(mt,H({},Ot,{children:R}))}))}))}),fU=pU;function mU(e){return Sn("MuiMenu",e)}_n("MuiMenu",["root","paper","list"]);const gU=["onEntering"],yU=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],_U={vertical:"top",horizontal:"right"},vU={vertical:"top",horizontal:"left"},xU=e=>{const{classes:t}=e;return xn({root:["root"],paper:["paper"],list:["list"]},mU,t)},bU=dt(fU,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),wU=dt(S4,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),SU=dt(g4,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),TU=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiMenu"}),{autoFocus:h=!0,children:p,disableAutoFocusItem:_=!1,MenuListProps:a={},onClose:w,open:C,PaperProps:M={},PopoverClasses:D,transitionDuration:R="auto",TransitionProps:{onEntering:$}={},variant:j="selectedMenu"}=l,B=Bt(l.TransitionProps,gU),K=Bt(l,yU),N=_s(),U=N.direction==="rtl",G=H({},l,{autoFocus:h,disableAutoFocusItem:_,MenuListProps:a,onEntering:$,PaperProps:M,transitionDuration:R,TransitionProps:B,variant:j}),Y=xU(G),Q=h&&!_&&C,re=W.useRef(null),oe=(ye,Ce)=>{re.current&&re.current.adjustStyleForScrollbar(ye,N),$&&$(ye,Ce)},de=ye=>{ye.key==="Tab"&&(ye.preventDefault(),w&&w(ye,"tabKeyDown"))};let ae=-1;return W.Children.map(p,(ye,Ce)=>{W.isValidElement(ye)&&(ye.props.disabled||(j==="selectedMenu"&&ye.props.selected||ae===-1)&&(ae=Ce))}),he.jsx(bU,H({onClose:w,anchorOrigin:{vertical:"bottom",horizontal:U?"right":"left"},transformOrigin:U?_U:vU,slots:{paper:wU},slotProps:{paper:H({},M,{classes:H({},M.classes,{root:Y.paper})})},className:Y.root,open:C,ref:o,transitionDuration:R,TransitionProps:H({onEntering:oe},B),ownerState:G},K,{classes:D,children:he.jsx(SU,H({onKeyDown:de,actions:re,autoFocus:h&&(ae===-1||_),autoFocusItem:Q,variant:j},a,{className:Zt(Y.list,a.className),children:p}))}))}),CU=TU;function EU(e){return Sn("MuiNativeSelect",e)}const kU=_n("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),M2=kU,PU=["className","disabled","error","IconComponent","inputRef","variant"],MU=e=>{const{classes:t,variant:o,disabled:l,multiple:h,open:p,error:_}=e,a={select:["select",o,l&&"disabled",h&&"multiple",_&&"error"],icon:["icon",`icon${tn(o)}`,p&&"iconOpen",l&&"disabled"]};return xn(a,EU,t)},T4=({ownerState:e,theme:t})=>H({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":H({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${M2.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),IU=dt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ba,overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.select,t[o.variant],o.error&&t.error,{[`&.${M2.multiple}`]:t.multiple}]}})(T4),C4=({ownerState:e,theme:t})=>H({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${M2.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),AU=dt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${tn(o.variant)}`],o.open&&t.iconOpen]}})(C4),DU=W.forwardRef(function(t,o){const{className:l,disabled:h,error:p,IconComponent:_,inputRef:a,variant:w="standard"}=t,C=Bt(t,PU),M=H({},t,{disabled:h,variant:w,error:p}),D=MU(M);return he.jsxs(W.Fragment,{children:[he.jsx(IU,H({ownerState:M,className:Zt(D.select,l),disabled:h,ref:a||o},C)),t.multiple?null:he.jsx(AU,{as:_,ownerState:M,className:D.icon})]})}),zU=DU;function RU(e){return Sn("MuiSelect",e)}const LU=_n("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Sf=LU;var Wk;const OU=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],BU=dt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`&.${Sf.select}`]:t.select},{[`&.${Sf.select}`]:t[o.variant]},{[`&.${Sf.error}`]:t.error},{[`&.${Sf.multiple}`]:t.multiple}]}})(T4,{[`&.${Sf.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),FU=dt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${tn(o.variant)}`],o.open&&t.iconOpen]}})(C4),$U=dt("input",{shouldForwardProp:e=>B8(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Gk(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function NU(e){return e==null||typeof e=="string"&&!e.trim()}const UU=e=>{const{classes:t,variant:o,disabled:l,multiple:h,open:p,error:_}=e,a={select:["select",o,l&&"disabled",h&&"multiple",_&&"error"],icon:["icon",`icon${tn(o)}`,p&&"iconOpen",l&&"disabled"],nativeInput:["nativeInput"]};return xn(a,RU,t)},VU=W.forwardRef(function(t,o){const{"aria-describedby":l,"aria-label":h,autoFocus:p,autoWidth:_,children:a,className:w,defaultOpen:C,defaultValue:M,disabled:D,displayEmpty:R,error:$=!1,IconComponent:j,inputRef:B,labelId:K,MenuProps:N={},multiple:U,name:G,onBlur:Y,onChange:Q,onClose:re,onFocus:oe,onOpen:de,open:ae,readOnly:ye,renderValue:Ce,SelectDisplayProps:Fe={},tabIndex:be,value:we,variant:ue="standard"}=t,Be=Bt(t,OU),[Ae,Se]=Uo({controlled:we,default:M,name:"Select"}),[ke,Ne]=Uo({controlled:ae,default:C,name:"Select"}),nt=W.useRef(null),vt=W.useRef(null),[gt,rt]=W.useState(null),{current:xt}=W.useRef(ae!=null),[ht,mt]=W.useState(),Ot=Rr(o,B),Nt=W.useCallback(ln=>{vt.current=ln,ln&&rt(ln)},[]),at=gt==null?void 0:gt.parentNode;W.useImperativeHandle(Ot,()=>({focus:()=>{vt.current.focus()},node:nt.current,value:Ae}),[Ae]),W.useEffect(()=>{C&&ke&&gt&&!xt&&(mt(_?null:at.clientWidth),vt.current.focus())},[gt,_]),W.useEffect(()=>{p&&vt.current.focus()},[p]),W.useEffect(()=>{if(!K)return;const ln=Ei(vt.current).getElementById(K);if(ln){const An=()=>{getSelection().isCollapsed&&vt.current.focus()};return ln.addEventListener("click",An),()=>{ln.removeEventListener("click",An)}}},[K]);const Je=(ln,An)=>{ln?de&&de(An):re&&re(An),xt||(mt(_?null:at.clientWidth),Ne(ln))},it=ln=>{ln.button===0&&(ln.preventDefault(),vt.current.focus(),Je(!0,ln))},St=ln=>{Je(!1,ln)},Gt=W.Children.toArray(a),He=ln=>{const An=Gt.find(Ht=>Ht.props.value===ln.target.value);An!==void 0&&(Se(An.props.value),Q&&Q(ln,An))},Vt=ln=>An=>{let Ht;if(An.currentTarget.hasAttribute("tabindex")){if(U){Ht=Array.isArray(Ae)?Ae.slice():[];const nn=Ae.indexOf(ln.props.value);nn===-1?Ht.push(ln.props.value):Ht.splice(nn,1)}else Ht=ln.props.value;if(ln.props.onClick&&ln.props.onClick(An),Ae!==Ht&&(Se(Ht),Q)){const nn=An.nativeEvent||An,bn=new nn.constructor(nn.type,nn);Object.defineProperty(bn,"target",{writable:!0,value:{value:Ht,name:G}}),Q(bn,ln)}U||Je(!1,An)}},lt=ln=>{ye||[" ","ArrowUp","ArrowDown","Enter"].indexOf(ln.key)!==-1&&(ln.preventDefault(),Je(!0,ln))},jt=gt!==null&&ke,Ut=ln=>{!jt&&Y&&(Object.defineProperty(ln,"target",{writable:!0,value:{value:Ae,name:G}}),Y(ln))};delete Be["aria-invalid"];let $t,Lt;const un=[];let kn=!1;(N0({value:Ae})||R)&&(Ce?$t=Ce(Ae):kn=!0);const Hn=Gt.map(ln=>{if(!W.isValidElement(ln))return null;let An;if(U){if(!Array.isArray(Ae))throw new Error(nc(2));An=Ae.some(Ht=>Gk(Ht,ln.props.value)),An&&kn&&un.push(ln.props.children)}else An=Gk(Ae,ln.props.value),An&&kn&&(Lt=ln.props.children);return W.cloneElement(ln,{"aria-selected":An?"true":"false",onClick:Vt(ln),onKeyUp:Ht=>{Ht.key===" "&&Ht.preventDefault(),ln.props.onKeyUp&&ln.props.onKeyUp(Ht)},role:"option",selected:An,value:void 0,"data-value":ln.props.value})});kn&&(U?un.length===0?$t=null:$t=un.reduce((ln,An,Ht)=>(ln.push(An),Ht<un.length-1&&ln.push(", "),ln),[]):$t=Lt);let dn=ht;!_&&xt&&gt&&(dn=at.clientWidth);let En;typeof be<"u"?En=be:En=D?null:0;const Tn=Fe.id||(G?`mui-component-select-${G}`:void 0),sn=H({},t,{variant:ue,value:Ae,open:jt,error:$}),an=UU(sn);return he.jsxs(W.Fragment,{children:[he.jsx(BU,H({ref:Nt,tabIndex:En,role:"button","aria-disabled":D?"true":void 0,"aria-expanded":jt?"true":"false","aria-haspopup":"listbox","aria-label":h,"aria-labelledby":[K,Tn].filter(Boolean).join(" ")||void 0,"aria-describedby":l,onKeyDown:lt,onMouseDown:D||ye?null:it,onBlur:Ut,onFocus:oe},Fe,{ownerState:sn,className:Zt(Fe.className,an.select,w),id:Tn,children:NU($t)?Wk||(Wk=he.jsx("span",{className:"notranslate",children:"​"})):$t})),he.jsx($U,H({"aria-invalid":$,value:Array.isArray(Ae)?Ae.join(","):Ae,name:G,ref:nt,"aria-hidden":!0,onChange:He,tabIndex:-1,disabled:D,className:an.nativeInput,autoFocus:p,ownerState:sn},Be)),he.jsx(FU,{as:j,className:an.icon,ownerState:sn}),he.jsx(CU,H({id:`menu-${G||""}`,anchorEl:at,open:jt,onClose:St,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},N,{MenuListProps:H({"aria-labelledby":K,role:"listbox",disableListWrap:!0},N.MenuListProps),PaperProps:H({},N.PaperProps,{style:H({minWidth:dn},N.PaperProps!=null?N.PaperProps.style:null)}),children:Hn}))]})}),jU=VU,E4=ys(he.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),WU=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],GU=e=>{const{classes:t}=e;return t},I2={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>ba(e)&&e!=="variant",slot:"Root"},HU=dt(l4,I2)(""),qU=dt(x2,I2)(""),ZU=dt(u4,I2)(""),k4=W.forwardRef(function(t,o){const l=gn({name:"MuiSelect",props:t}),{autoWidth:h=!1,children:p,classes:_={},className:a,defaultOpen:w=!1,displayEmpty:C=!1,IconComponent:M=E4,id:D,input:R,inputProps:$,label:j,labelId:B,MenuProps:K,multiple:N=!1,native:U=!1,onClose:G,onOpen:Y,open:Q,renderValue:re,SelectDisplayProps:oe,variant:de="outlined"}=l,ae=Bt(l,WU),ye=U?zU:jU,Ce=Su(),Fe=Ih({props:l,muiFormControl:Ce,states:["variant","error"]}),be=Fe.variant||de,we=H({},l,{variant:be,classes:_}),ue=GU(we),Be=R||{standard:he.jsx(HU,{ownerState:we}),outlined:he.jsx(qU,{label:j,ownerState:we}),filled:he.jsx(ZU,{ownerState:we})}[be],Ae=Rr(o,Be.ref);return he.jsx(W.Fragment,{children:W.cloneElement(Be,H({inputComponent:ye,inputProps:H({children:p,error:Fe.error,IconComponent:M,variant:be,type:void 0,multiple:N},U?{id:D}:{autoWidth:h,defaultOpen:w,displayEmpty:C,labelId:B,MenuProps:K,onClose:G,onOpen:Y,open:Q,renderValue:re,SelectDisplayProps:H({id:D},oe)},$,{classes:$?So(ue,$.classes):ue},R?R.props.inputProps:{})},N&&U&&be==="outlined"?{notched:!0}:{},{ref:Ae,className:Zt(Be.props.className,a)},!R&&{variant:be},ae))})});k4.muiName="Select";const XU=k4;function YU(e){return Sn("MuiTextField",e)}const KU=_n("MuiTextField",["root"]),Ly=KU,JU=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],QU={standard:l4,filled:u4,outlined:x2},eV=e=>{const{classes:t}=e;return xn({root:["root"]},YU,t)},tV=dt(h4,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nV=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiTextField"}),{autoComplete:h,autoFocus:p=!1,children:_,className:a,color:w="primary",defaultValue:C,disabled:M=!1,error:D=!1,FormHelperTextProps:R,fullWidth:$=!1,helperText:j,id:B,InputLabelProps:K,inputProps:N,InputProps:U,inputRef:G,label:Y,maxRows:Q,minRows:re,multiline:oe=!1,name:de,onBlur:ae,onChange:ye,onClick:Ce,onFocus:Fe,placeholder:be,required:we=!1,rows:ue,select:Be=!1,SelectProps:Ae,type:Se,value:ke,variant:Ne="outlined"}=l,nt=Bt(l,JU),vt=H({},l,{autoFocus:p,color:w,disabled:M,error:D,fullWidth:$,multiline:oe,required:we,select:Be,variant:Ne}),gt=eV(vt),rt={};Ne==="outlined"&&(K&&typeof K.shrink<"u"&&(rt.notched=K.shrink),rt.label=Y),Be&&((!Ae||!Ae.native)&&(rt.id=void 0),rt["aria-describedby"]=void 0);const xt=wu(B),ht=j&&xt?`${xt}-helper-text`:void 0,mt=Y&&xt?`${xt}-label`:void 0,Ot=QU[Ne],Nt=he.jsx(Ot,H({"aria-describedby":ht,autoComplete:h,autoFocus:p,defaultValue:C,fullWidth:$,multiline:oe,name:de,rows:ue,maxRows:Q,minRows:re,type:Se,value:ke,id:xt,inputRef:G,onBlur:ae,onChange:ye,onFocus:Fe,onClick:Ce,placeholder:be,inputProps:N},rt,U));return he.jsxs(tV,H({className:Zt(gt.root,a),disabled:M,error:D,fullWidth:$,ref:o,required:we,color:w,variant:Ne,ownerState:vt},nt,{children:[Y!=null&&Y!==""&&he.jsx(lN,H({htmlFor:xt,id:mt},K,{children:Y})),Be?he.jsx(XU,H({"aria-describedby":ht,id:xt,labelId:mt,value:ke,input:Nt},Ae,{children:_})):Nt,j&&he.jsx(xN,H({id:ht},R,{children:j}))]}))}),P4=nV,rV=e=>e.match(/^([A-Za-z]+)Range(Calendar|Clock)$/)?"multi-panel-UI-view":e.match(/^([A-Za-z]*)(DigitalClock)$/)?"Tall-UI-view":e.match(/^Static([A-Za-z]+)/)||e.match(/^([A-Za-z]+)(Calendar|Clock)$/)?"UI-view":e.match(/^MultiInput([A-Za-z]+)RangeField$/)||e.match(/^([A-Za-z]+)RangePicker$/)?"multi-input-range-field":e.match(/^SingleInput([A-Za-z]+)RangeField$/)?"single-input-range-field":"single-input-field",iV=e=>e.includes("DateTime")?"date-time":e.includes("Date")?"date":"time";function oV(e){const{children:t,components:o,sx:l}=e,h=new Set,p=new Set;o.forEach(M=>{h.add(rV(M)),p.add(iV(M))});const _=M=>M==="row"?h.has("UI-view")||h.has("Tall-UI-view")?3:2:h.has("UI-view")?4:3;let a,w,C=H({overflow:"auto",pt:1},l);return o.length>2||h.has("multi-input-range-field")||h.has("single-input-range-field")||h.has("multi-panel-UI-view")||h.has("UI-view")||p.has("date-time")?(a="column",w=_("column")):(a={xs:"column",lg:"row"},w={xs:_("column"),lg:_("row")}),h.has("UI-view")||(h.has("single-input-range-field")?p.has("date-time")?C=H({},C,{[`& > .${Ly.root}`]:{minWidth:{xs:300,md:400}}}):C=H({},C,{[`& > .${Ly.root}`]:{minWidth:300}}):p.has("date-time")?C=H({},C,{[`& > .${Ly.root}`]:{minWidth:270}}):C=H({},C,{[`& > .${Ly.root}`]:{minWidth:200}})),he.jsx(c9,{direction:a,spacing:w,sx:C,children:t})}var M4={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Sh,function(){var o=1e3,l=6e4,h=36e5,p="millisecond",_="second",a="minute",w="hour",C="day",M="week",D="month",R="quarter",$="year",j="date",B="Invalid Date",K=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,U={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(be){var we=["th","st","nd","rd"],ue=be%100;return"["+be+(we[(ue-20)%10]||we[ue]||we[0])+"]"}},G=function(be,we,ue){var Be=String(be);return!Be||Be.length>=we?be:""+Array(we+1-Be.length).join(ue)+be},Y={s:G,z:function(be){var we=-be.utcOffset(),ue=Math.abs(we),Be=Math.floor(ue/60),Ae=ue%60;return(we<=0?"+":"-")+G(Be,2,"0")+":"+G(Ae,2,"0")},m:function be(we,ue){if(we.date()<ue.date())return-be(ue,we);var Be=12*(ue.year()-we.year())+(ue.month()-we.month()),Ae=we.clone().add(Be,D),Se=ue-Ae<0,ke=we.clone().add(Be+(Se?-1:1),D);return+(-(Be+(ue-Ae)/(Se?Ae-ke:ke-Ae))||0)},a:function(be){return be<0?Math.ceil(be)||0:Math.floor(be)},p:function(be){return{M:D,y:$,w:M,d:C,D:j,h:w,m:a,s:_,ms:p,Q:R}[be]||String(be||"").toLowerCase().replace(/s$/,"")},u:function(be){return be===void 0}},Q="en",re={};re[Q]=U;var oe=function(be){return be instanceof Ce},de=function be(we,ue,Be){var Ae;if(!we)return Q;if(typeof we=="string"){var Se=we.toLowerCase();re[Se]&&(Ae=Se),ue&&(re[Se]=ue,Ae=Se);var ke=we.split("-");if(!Ae&&ke.length>1)return be(ke[0])}else{var Ne=we.name;re[Ne]=we,Ae=Ne}return!Be&&Ae&&(Q=Ae),Ae||!Be&&Q},ae=function(be,we){if(oe(be))return be.clone();var ue=typeof we=="object"?we:{};return ue.date=be,ue.args=arguments,new Ce(ue)},ye=Y;ye.l=de,ye.i=oe,ye.w=function(be,we){return ae(be,{locale:we.$L,utc:we.$u,x:we.$x,$offset:we.$offset})};var Ce=function(){function be(ue){this.$L=de(ue.locale,null,!0),this.parse(ue)}var we=be.prototype;return we.parse=function(ue){this.$d=function(Be){var Ae=Be.date,Se=Be.utc;if(Ae===null)return new Date(NaN);if(ye.u(Ae))return new Date;if(Ae instanceof Date)return new Date(Ae);if(typeof Ae=="string"&&!/Z$/i.test(Ae)){var ke=Ae.match(K);if(ke){var Ne=ke[2]-1||0,nt=(ke[7]||"0").substring(0,3);return Se?new Date(Date.UTC(ke[1],Ne,ke[3]||1,ke[4]||0,ke[5]||0,ke[6]||0,nt)):new Date(ke[1],Ne,ke[3]||1,ke[4]||0,ke[5]||0,ke[6]||0,nt)}}return new Date(Ae)}(ue),this.$x=ue.x||{},this.init()},we.init=function(){var ue=this.$d;this.$y=ue.getFullYear(),this.$M=ue.getMonth(),this.$D=ue.getDate(),this.$W=ue.getDay(),this.$H=ue.getHours(),this.$m=ue.getMinutes(),this.$s=ue.getSeconds(),this.$ms=ue.getMilliseconds()},we.$utils=function(){return ye},we.isValid=function(){return this.$d.toString()!==B},we.isSame=function(ue,Be){var Ae=ae(ue);return this.startOf(Be)<=Ae&&Ae<=this.endOf(Be)},we.isAfter=function(ue,Be){return ae(ue)<this.startOf(Be)},we.isBefore=function(ue,Be){return this.endOf(Be)<ae(ue)},we.$g=function(ue,Be,Ae){return ye.u(ue)?this[Be]:this.set(Ae,ue)},we.unix=function(){return Math.floor(this.valueOf()/1e3)},we.valueOf=function(){return this.$d.getTime()},we.startOf=function(ue,Be){var Ae=this,Se=!!ye.u(Be)||Be,ke=ye.p(ue),Ne=function(Ot,Nt){var at=ye.w(Ae.$u?Date.UTC(Ae.$y,Nt,Ot):new Date(Ae.$y,Nt,Ot),Ae);return Se?at:at.endOf(C)},nt=function(Ot,Nt){return ye.w(Ae.toDate()[Ot].apply(Ae.toDate("s"),(Se?[0,0,0,0]:[23,59,59,999]).slice(Nt)),Ae)},vt=this.$W,gt=this.$M,rt=this.$D,xt="set"+(this.$u?"UTC":"");switch(ke){case $:return Se?Ne(1,0):Ne(31,11);case D:return Se?Ne(1,gt):Ne(0,gt+1);case M:var ht=this.$locale().weekStart||0,mt=(vt<ht?vt+7:vt)-ht;return Ne(Se?rt-mt:rt+(6-mt),gt);case C:case j:return nt(xt+"Hours",0);case w:return nt(xt+"Minutes",1);case a:return nt(xt+"Seconds",2);case _:return nt(xt+"Milliseconds",3);default:return this.clone()}},we.endOf=function(ue){return this.startOf(ue,!1)},we.$set=function(ue,Be){var Ae,Se=ye.p(ue),ke="set"+(this.$u?"UTC":""),Ne=(Ae={},Ae[C]=ke+"Date",Ae[j]=ke+"Date",Ae[D]=ke+"Month",Ae[$]=ke+"FullYear",Ae[w]=ke+"Hours",Ae[a]=ke+"Minutes",Ae[_]=ke+"Seconds",Ae[p]=ke+"Milliseconds",Ae)[Se],nt=Se===C?this.$D+(Be-this.$W):Be;if(Se===D||Se===$){var vt=this.clone().set(j,1);vt.$d[Ne](nt),vt.init(),this.$d=vt.set(j,Math.min(this.$D,vt.daysInMonth())).$d}else Ne&&this.$d[Ne](nt);return this.init(),this},we.set=function(ue,Be){return this.clone().$set(ue,Be)},we.get=function(ue){return this[ye.p(ue)]()},we.add=function(ue,Be){var Ae,Se=this;ue=Number(ue);var ke=ye.p(Be),Ne=function(gt){var rt=ae(Se);return ye.w(rt.date(rt.date()+Math.round(gt*ue)),Se)};if(ke===D)return this.set(D,this.$M+ue);if(ke===$)return this.set($,this.$y+ue);if(ke===C)return Ne(1);if(ke===M)return Ne(7);var nt=(Ae={},Ae[a]=l,Ae[w]=h,Ae[_]=o,Ae)[ke]||1,vt=this.$d.getTime()+ue*nt;return ye.w(vt,this)},we.subtract=function(ue,Be){return this.add(-1*ue,Be)},we.format=function(ue){var Be=this,Ae=this.$locale();if(!this.isValid())return Ae.invalidDate||B;var Se=ue||"YYYY-MM-DDTHH:mm:ssZ",ke=ye.z(this),Ne=this.$H,nt=this.$m,vt=this.$M,gt=Ae.weekdays,rt=Ae.months,xt=function(Nt,at,Je,it){return Nt&&(Nt[at]||Nt(Be,Se))||Je[at].slice(0,it)},ht=function(Nt){return ye.s(Ne%12||12,Nt,"0")},mt=Ae.meridiem||function(Nt,at,Je){var it=Nt<12?"AM":"PM";return Je?it.toLowerCase():it},Ot={YY:String(this.$y).slice(-2),YYYY:ye.s(this.$y,4,"0"),M:vt+1,MM:ye.s(vt+1,2,"0"),MMM:xt(Ae.monthsShort,vt,rt,3),MMMM:xt(rt,vt),D:this.$D,DD:ye.s(this.$D,2,"0"),d:String(this.$W),dd:xt(Ae.weekdaysMin,this.$W,gt,2),ddd:xt(Ae.weekdaysShort,this.$W,gt,3),dddd:gt[this.$W],H:String(Ne),HH:ye.s(Ne,2,"0"),h:ht(1),hh:ht(2),a:mt(Ne,nt,!0),A:mt(Ne,nt,!1),m:String(nt),mm:ye.s(nt,2,"0"),s:String(this.$s),ss:ye.s(this.$s,2,"0"),SSS:ye.s(this.$ms,3,"0"),Z:ke};return Se.replace(N,function(Nt,at){return at||Ot[Nt]||ke.replace(":","")})},we.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},we.diff=function(ue,Be,Ae){var Se,ke=ye.p(Be),Ne=ae(ue),nt=(Ne.utcOffset()-this.utcOffset())*l,vt=this-Ne,gt=ye.m(this,Ne);return gt=(Se={},Se[$]=gt/12,Se[D]=gt,Se[R]=gt/3,Se[M]=(vt-nt)/6048e5,Se[C]=(vt-nt)/864e5,Se[w]=vt/h,Se[a]=vt/l,Se[_]=vt/o,Se)[ke]||vt,Ae?gt:ye.a(gt)},we.daysInMonth=function(){return this.endOf(D).$D},we.$locale=function(){return re[this.$L]},we.locale=function(ue,Be){if(!ue)return this.$L;var Ae=this.clone(),Se=de(ue,Be,!0);return Se&&(Ae.$L=Se),Ae},we.clone=function(){return ye.w(this.$d,this)},we.toDate=function(){return new Date(this.valueOf())},we.toJSON=function(){return this.isValid()?this.toISOString():null},we.toISOString=function(){return this.$d.toISOString()},we.toString=function(){return this.$d.toUTCString()},be}(),Fe=Ce.prototype;return ae.prototype=Fe,[["$ms",p],["$s",_],["$m",a],["$H",w],["$W",C],["$M",D],["$y",$],["$D",j]].forEach(function(be){Fe[be[1]]=function(we){return this.$g(we,be[0],be[1])}}),ae.extend=function(be,we){return be.$i||(be(we,Ce,ae),be.$i=!0),ae},ae.locale=de,ae.isDayjs=oe,ae.unix=function(be){return ae(1e3*be)},ae.en=re[Q],ae.Ls=re,ae.p={},ae})})(M4);var sV=M4.exports;const ro=tl(sV);var I4={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Sh,function(){var o="week",l="year";return function(h,p,_){var a=p.prototype;a.week=function(w){if(w===void 0&&(w=null),w!==null)return this.add(7*(w-this.week()),"day");var C=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var M=_(this).startOf(l).add(1,l).date(C),D=_(this).endOf(o);if(M.isBefore(D))return 1}var R=_(this).startOf(l).date(C).startOf(o).subtract(1,"millisecond"),$=this.diff(R,o,!0);return $<0?_(this).startOf("week").week():Math.ceil($)},a.weeks=function(w){return w===void 0&&(w=null),this.week(w)}}})})(I4);var aV=I4.exports;const lV=tl(aV);var A4={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Sh,function(){var o={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},l=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,h=/\d\d/,p=/\d\d?/,_=/\d*[^-_:/,()\s\d]+/,a={},w=function(B){return(B=+B)+(B>68?1900:2e3)},C=function(B){return function(K){this[B]=+K}},M=[/[+-]\d\d:?(\d\d)?|Z/,function(B){(this.zone||(this.zone={})).offset=function(K){if(!K||K==="Z")return 0;var N=K.match(/([+-]|\d\d)/g),U=60*N[1]+(+N[2]||0);return U===0?0:N[0]==="+"?-U:U}(B)}],D=function(B){var K=a[B];return K&&(K.indexOf?K:K.s.concat(K.f))},R=function(B,K){var N,U=a.meridiem;if(U){for(var G=1;G<=24;G+=1)if(B.indexOf(U(G,0,K))>-1){N=G>12;break}}else N=B===(K?"pm":"PM");return N},$={A:[_,function(B){this.afternoon=R(B,!1)}],a:[_,function(B){this.afternoon=R(B,!0)}],S:[/\d/,function(B){this.milliseconds=100*+B}],SS:[h,function(B){this.milliseconds=10*+B}],SSS:[/\d{3}/,function(B){this.milliseconds=+B}],s:[p,C("seconds")],ss:[p,C("seconds")],m:[p,C("minutes")],mm:[p,C("minutes")],H:[p,C("hours")],h:[p,C("hours")],HH:[p,C("hours")],hh:[p,C("hours")],D:[p,C("day")],DD:[h,C("day")],Do:[_,function(B){var K=a.ordinal,N=B.match(/\d+/);if(this.day=N[0],K)for(var U=1;U<=31;U+=1)K(U).replace(/\[|\]/g,"")===B&&(this.day=U)}],M:[p,C("month")],MM:[h,C("month")],MMM:[_,function(B){var K=D("months"),N=(D("monthsShort")||K.map(function(U){return U.slice(0,3)})).indexOf(B)+1;if(N<1)throw new Error;this.month=N%12||N}],MMMM:[_,function(B){var K=D("months").indexOf(B)+1;if(K<1)throw new Error;this.month=K%12||K}],Y:[/[+-]?\d+/,C("year")],YY:[h,function(B){this.year=w(B)}],YYYY:[/\d{4}/,C("year")],Z:M,ZZ:M};function j(B){var K,N;K=B,N=a&&a.formats;for(var U=(B=K.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(ae,ye,Ce){var Fe=Ce&&Ce.toUpperCase();return ye||N[Ce]||o[Ce]||N[Fe].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(be,we,ue){return we||ue.slice(1)})})).match(l),G=U.length,Y=0;Y<G;Y+=1){var Q=U[Y],re=$[Q],oe=re&&re[0],de=re&&re[1];U[Y]=de?{regex:oe,parser:de}:Q.replace(/^\[|\]$/g,"")}return function(ae){for(var ye={},Ce=0,Fe=0;Ce<G;Ce+=1){var be=U[Ce];if(typeof be=="string")Fe+=be.length;else{var we=be.regex,ue=be.parser,Be=ae.slice(Fe),Ae=we.exec(Be)[0];ue.call(ye,Ae),ae=ae.replace(Ae,"")}}return function(Se){var ke=Se.afternoon;if(ke!==void 0){var Ne=Se.hours;ke?Ne<12&&(Se.hours+=12):Ne===12&&(Se.hours=0),delete Se.afternoon}}(ye),ye}}return function(B,K,N){N.p.customParseFormat=!0,B&&B.parseTwoDigitYear&&(w=B.parseTwoDigitYear);var U=K.prototype,G=U.parse;U.parse=function(Y){var Q=Y.date,re=Y.utc,oe=Y.args;this.$u=re;var de=oe[1];if(typeof de=="string"){var ae=oe[2]===!0,ye=oe[3]===!0,Ce=ae||ye,Fe=oe[2];ye&&(Fe=oe[2]),a=this.$locale(),!ae&&Fe&&(a=N.Ls[Fe]),this.$d=function(Be,Ae,Se){try{if(["x","X"].indexOf(Ae)>-1)return new Date((Ae==="X"?1e3:1)*Be);var ke=j(Ae)(Be),Ne=ke.year,nt=ke.month,vt=ke.day,gt=ke.hours,rt=ke.minutes,xt=ke.seconds,ht=ke.milliseconds,mt=ke.zone,Ot=new Date,Nt=vt||(Ne||nt?1:Ot.getDate()),at=Ne||Ot.getFullYear(),Je=0;Ne&&!nt||(Je=nt>0?nt-1:Ot.getMonth());var it=gt||0,St=rt||0,Gt=xt||0,He=ht||0;return mt?new Date(Date.UTC(at,Je,Nt,it,St,Gt,He+60*mt.offset*1e3)):Se?new Date(Date.UTC(at,Je,Nt,it,St,Gt,He)):new Date(at,Je,Nt,it,St,Gt,He)}catch{return new Date("")}}(Q,de,re),this.init(),Fe&&Fe!==!0&&(this.$L=this.locale(Fe).$L),Ce&&Q!=this.format(de)&&(this.$d=new Date("")),a={}}else if(de instanceof Array)for(var be=de.length,we=1;we<=be;we+=1){oe[1]=de[we-1];var ue=N.apply(this,oe);if(ue.isValid()){this.$d=ue.$d,this.$L=ue.$L,this.init();break}we===be&&(this.$d=new Date(""))}else G.call(this,Y)}}})})(A4);var cV=A4.exports;const uV=tl(cV);var D4={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Sh,function(){var o={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(l,h,p){var _=h.prototype,a=_.format;p.en.formats=o,_.format=function(w){w===void 0&&(w="YYYY-MM-DDTHH:mm:ssZ");var C=this.$locale().formats,M=function(D,R){return D.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function($,j,B){var K=B&&B.toUpperCase();return j||R[B]||o[B]||R[K].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,U,G){return U||G.slice(1)})})}(w,C===void 0?{}:C);return a.call(this,M)}}})})(D4);var dV=D4.exports;const hV=tl(dV);var z4={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Sh,function(){return function(o,l,h){l.prototype.isBetween=function(p,_,a,w){var C=h(p),M=h(_),D=(w=w||"()")[0]==="(",R=w[1]===")";return(D?this.isAfter(C,a):!this.isBefore(C,a))&&(R?this.isBefore(M,a):!this.isAfter(M,a))||(D?this.isBefore(C,a):!this.isAfter(C,a))&&(R?this.isAfter(M,a):!this.isBefore(M,a))}}})})(z4);var pV=z4.exports;const fV=tl(pV),R4=(e,t="warning")=>{let o=!1;const l=Array.isArray(e)?e.join(`
`):e;return()=>{o||(o=!0,t==="error"?console.error(l):console.warn(l))}};ro.extend(uV);ro.extend(hV);ro.extend(fV);const mV=R4(["Your locale has not been found.","Either the locale key is not a supported one. Locales supported by dayjs are available here: https://github.com/iamkun/dayjs/tree/dev/src/locale","Or you forget to import the locale with `require('dayjs/locale/{localeUsed}')`","fallback on English locale"]),gV={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},yV={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",weekday:"dddd",weekdayShort:"ddd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",fullDateWithWeekday:"dddd, LL",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",monthAndYear:"MMMM YYYY",monthAndDate:"MMMM D",fullTime:"LT",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",fullDateTime:"lll",fullDateTime12h:"ll hh:mm A",fullDateTime24h:"ll HH:mm",keyboardDateTime:"L LT",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},P1=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join(`
`),Hk=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join(`
`),_V=(e,t)=>t?(...o)=>e(...o).locale(t):e;class vV{constructor({locale:t,formats:o,instance:l}={}){var h;this.isMUIAdapter=!0,this.isTimezoneCompatible=!0,this.lib="dayjs",this.rawDayJsInstance=void 0,this.dayjs=void 0,this.locale=void 0,this.formats=void 0,this.escapedCharacters={start:"[",end:"]"},this.formatTokenMap=gV,this.setLocaleToValue=p=>{const _=this.getCurrentLocaleCode();return _===p.locale()?p:p.locale(_)},this.hasUTCPlugin=()=>typeof ro.utc<"u",this.hasTimezonePlugin=()=>typeof ro.tz<"u",this.isSame=(p,_,a)=>{const w=this.setTimezone(_,this.getTimezone(p));return p.format(a)===w.format(a)},this.cleanTimezone=p=>p==="default"?void 0:p,this.createSystemDate=p=>{if(this.rawDayJsInstance)return this.rawDayJsInstance(p);if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const _=ro.tz.guess();return _!=="UTC"?ro.tz(p,_):ro(p)}return ro(p)},this.createUTCDate=p=>{if(!this.hasUTCPlugin())throw new Error(P1);return ro.utc(p)},this.createTZDate=(p,_)=>{if(!this.hasUTCPlugin())throw new Error(P1);if(!this.hasTimezonePlugin())throw new Error(Hk);const a=p!==void 0&&!p.endsWith("Z");return ro(p).tz(this.cleanTimezone(_),a)},this.getLocaleFormats=()=>{const p=ro.Ls,_=this.locale||"en";let a=p[_];return a===void 0&&(mV(),a=p.en),a.formats},this.date=p=>p===null?null:this.dayjs(p),this.dateWithTimezone=(p,_)=>{if(p===null)return null;let a;return _==="UTC"?a=this.createUTCDate(p):_==="system"||_==="default"&&!this.hasTimezonePlugin()?a=this.createSystemDate(p):a=this.createTZDate(p,_),this.locale===void 0?a:a.locale(this.locale)},this.getTimezone=p=>{if(this.hasUTCPlugin()&&p.isUTC())return"UTC";if(this.hasTimezonePlugin()){var _;const a=(_=p.$x)==null?void 0:_.$timezone;return a??"system"}return"system"},this.setTimezone=(p,_)=>{if(this.getTimezone(p)===_)return p;if(_==="UTC"){if(!this.hasUTCPlugin())throw new Error(P1);return p.utc()}if(_==="system")return p.local();if(!this.hasTimezonePlugin()){if(_==="default")return p;throw new Error(Hk)}return ro.tz(p,this.cleanTimezone(_))},this.toJsDate=p=>p.toDate(),this.parseISO=p=>this.dayjs(p),this.toISO=p=>p.toISOString(),this.parse=(p,_)=>p===""?null:this.dayjs(p,_,this.locale,!0),this.getCurrentLocaleCode=()=>this.locale||"en",this.is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||""),this.expandFormat=p=>{const _=this.getLocaleFormats(),a=w=>w.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(C,M,D)=>M||D.slice(1));return p.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(w,C,M)=>{const D=M&&M.toUpperCase();return C||_[M]||a(_[D])})},this.getFormatHelperText=p=>this.expandFormat(p).replace(/a/gi,"(a|p)m").toLocaleLowerCase(),this.isNull=p=>p===null,this.isValid=p=>this.dayjs(p).isValid(),this.format=(p,_)=>this.formatByString(p,this.formats[_]),this.formatByString=(p,_)=>this.dayjs(p).format(_),this.formatNumber=p=>p,this.getDiff=(p,_,a)=>p.diff(_,a),this.isEqual=(p,_)=>p===null&&_===null?!0:this.dayjs(p).toDate().getTime()===this.dayjs(_).toDate().getTime(),this.isSameYear=(p,_)=>this.isSame(p,_,"YYYY"),this.isSameMonth=(p,_)=>this.isSame(p,_,"YYYY-MM"),this.isSameDay=(p,_)=>this.isSame(p,_,"YYYY-MM-DD"),this.isSameHour=(p,_)=>p.isSame(_,"hour"),this.isAfter=(p,_)=>p>_,this.isAfterYear=(p,_)=>this.hasUTCPlugin()?!this.isSameYear(p,_)&&p.utc()>_.utc():p.isAfter(_,"year"),this.isAfterDay=(p,_)=>this.hasUTCPlugin()?!this.isSameDay(p,_)&&p.utc()>_.utc():p.isAfter(_,"day"),this.isBefore=(p,_)=>p<_,this.isBeforeYear=(p,_)=>this.hasUTCPlugin()?!this.isSameYear(p,_)&&p.utc()<_.utc():p.isBefore(_,"year"),this.isBeforeDay=(p,_)=>this.hasUTCPlugin()?!this.isSameDay(p,_)&&p.utc()<_.utc():p.isBefore(_,"day"),this.isWithinRange=(p,[_,a])=>p>=_&&p<=a,this.startOfYear=p=>p.startOf("year"),this.startOfMonth=p=>p.startOf("month"),this.startOfWeek=p=>p.startOf("week"),this.startOfDay=p=>p.startOf("day"),this.endOfYear=p=>p.endOf("year"),this.endOfMonth=p=>p.endOf("month"),this.endOfWeek=p=>p.endOf("week"),this.endOfDay=p=>p.endOf("day"),this.addYears=(p,_)=>_<0?p.subtract(Math.abs(_),"year"):p.add(_,"year"),this.addMonths=(p,_)=>_<0?p.subtract(Math.abs(_),"month"):p.add(_,"month"),this.addWeeks=(p,_)=>_<0?p.subtract(Math.abs(_),"week"):p.add(_,"week"),this.addDays=(p,_)=>_<0?p.subtract(Math.abs(_),"day"):p.add(_,"day"),this.addHours=(p,_)=>_<0?p.subtract(Math.abs(_),"hour"):p.add(_,"hour"),this.addMinutes=(p,_)=>_<0?p.subtract(Math.abs(_),"minute"):p.add(_,"minute"),this.addSeconds=(p,_)=>_<0?p.subtract(Math.abs(_),"second"):p.add(_,"second"),this.getYear=p=>p.year(),this.getMonth=p=>p.month(),this.getDate=p=>p.date(),this.getHours=p=>p.hour(),this.getMinutes=p=>p.minute(),this.getSeconds=p=>p.second(),this.getMilliseconds=p=>p.millisecond(),this.setYear=(p,_)=>p.set("year",_),this.setMonth=(p,_)=>p.set("month",_),this.setDate=(p,_)=>p.set("date",_),this.setHours=(p,_)=>p.set("hour",_),this.setMinutes=(p,_)=>p.set("minute",_),this.setSeconds=(p,_)=>p.set("second",_),this.setMilliseconds=(p,_)=>p.set("millisecond",_),this.getDaysInMonth=p=>p.daysInMonth(),this.getNextMonth=p=>p.add(1,"month"),this.getPreviousMonth=p=>p.subtract(1,"month"),this.getMonthArray=p=>{const a=[p.startOf("year")];for(;a.length<12;){const w=a[a.length-1];a.push(this.addMonths(w,1))}return a},this.mergeDateAndTime=(p,_)=>p.hour(_.hour()).minute(_.minute()).second(_.second()),this.getWeekdays=()=>{const p=this.dayjs().startOf("week");return[0,1,2,3,4,5,6].map(_=>this.formatByString(p.add(_,"day"),"dd"))},this.getWeekArray=p=>{const _=this.getTimezone(p),a=this.setLocaleToValue(p),w=a.startOf("month").startOf("week"),C=a.endOf("month").endOf("week");let M=0,D=w;const R=[];for(;D<C;){const $=Math.floor(M/7);R[$]=R[$]||[],R[$].push(D),D=D.add(1,"day"),this.hasTimezonePlugin()&&_!=="UTC"&&_!=="system"&&(D=D.tz(this.cleanTimezone(_),!0)),M+=1}return R},this.getWeekNumber=p=>p.week(),this.getYearRange=(p,_)=>{const a=p.startOf("year"),w=_.endOf("year"),C=[];let M=a;for(;M<w;)C.push(M),M=M.add(1,"year");return C},this.getMeridiemText=p=>p==="am"?"AM":"PM",this.rawDayJsInstance=l,this.dayjs=_V((h=this.rawDayJsInstance)!=null?h:ro,t),this.locale=t,this.formats=H({},yV,o),ro.extend(lV)}}const xV=["localeText"],Vb=W.createContext(null),A2=function(t){var o;const{localeText:l}=t,h=Bt(t,xV),{utils:p,localeText:_}=(o=W.useContext(Vb))!=null?o:{utils:void 0,localeText:void 0},a=gn({props:h,name:"MuiLocalizationProvider"}),{children:w,dateAdapter:C,dateFormats:M,dateLibInstance:D,adapterLocale:R,localeText:$}=a,j=W.useMemo(()=>H({},$,_,l),[$,_,l]),B=W.useMemo(()=>{if(!C)return p||null;const U=new C({locale:R,formats:M,instance:D});if(!U.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return U},[C,R,M,D,p]),K=W.useMemo(()=>B?{minDate:B.date("1900-01-01T00:00:00.000"),maxDate:B.date("2099-12-31T00:00:00.000")}:null,[B]),N=W.useMemo(()=>({utils:B,defaultDates:K,localeText:j}),[K,B,j]);return he.jsx(Vb.Provider,{value:N,children:w})};function bV(e,t,o,l,h){const[p,_]=W.useState(()=>h&&o?o(e).matches:l?l(e).matches:t);return ki(()=>{let a=!0;if(!o)return;const w=o(e),C=()=>{a&&_(w.matches)};return C(),w.addListener(C),()=>{a=!1,w.removeListener(C)}},[e,o]),p}const L4=Qf["useSyncExternalStore"];function wV(e,t,o,l,h){const p=W.useCallback(()=>t,[t]),_=W.useMemo(()=>{if(h&&o)return()=>o(e).matches;if(l!==null){const{matches:M}=l(e);return()=>M}return p},[p,e,l,h,o]),[a,w]=W.useMemo(()=>{if(o===null)return[p,()=>()=>{}];const M=o(e);return[()=>M.matches,D=>(M.addListener(D),()=>{M.removeListener(D)})]},[p,o,e]);return L4(w,a,_)}function SV(e,t={}){const o=h2(),l=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:h=!1,matchMedia:p=l?window.matchMedia:null,ssrMatchMedia:_=null,noSsr:a=!1}=F3({name:"MuiUseMediaQuery",props:t,theme:o});let w=typeof e=="function"?e(o):e;return w=w.replace(/^@media( ?)/m,""),(L4!==void 0?wV:bV)(w,h,p,_,a)}const fa=(e,t)=>e.length!==t.length?!1:t.every(o=>e.includes(o)),TV=({openTo:e,defaultOpenTo:t,views:o,defaultViews:l})=>{const h=o??l;let p;if(e!=null)p=e;else if(h.includes(t))p=t;else if(h.length>0)p=h[0];else throw new Error("MUI: The `views` prop must contain at least one view");return{views:h,openTo:p}},Kf=({date:e,disableFuture:t,disablePast:o,maxDate:l,minDate:h,isDateDisabled:p,utils:_,timezone:a})=>{const w=_.startOfDay(_.dateWithTimezone(void 0,a));o&&_.isBefore(h,w)&&(h=w),t&&_.isAfter(l,w)&&(l=w);let C=e,M=e;for(_.isBefore(e,h)&&(C=h,M=null),_.isAfter(e,l)&&(M&&(M=l),C=null);C||M;){if(C&&_.isAfter(C,l)&&(C=null),M&&_.isBefore(M,h)&&(M=null),C){if(!p(C))return C;C=_.addDays(C,1)}if(M){if(!p(M))return M;M=_.addDays(M,-1)}}return null},CV=(e,t)=>t==null||!e.isValid(t)?null:t,gs=(e,t,o)=>t==null||!e.isValid(t)?o:t,EV=(e,t,o)=>!e.isValid(t)&&t!=null&&!e.isValid(o)&&o!=null?!0:e.isEqual(t,o),D2=(e,t)=>{const l=[e.startOfYear(t)];for(;l.length<12;){const h=l[l.length-1];l.push(e.addMonths(h,1))}return l},jb=(e,t,o)=>{let l=t;return l=e.setHours(l,e.getHours(o)),l=e.setMinutes(l,e.getMinutes(o)),l=e.setSeconds(l,e.getSeconds(o)),l},O4=(e,t,o)=>o==="date"?e.startOfDay(e.dateWithTimezone(void 0,t)):e.dateWithTimezone(void 0,t),kV=["year","month","day"],ih=e=>kV.includes(e),qk=(e,{format:t,views:o},l)=>{if(t!=null)return t;const h=e.formats;return fa(o,["year"])?h.year:fa(o,["month"])?h.month:fa(o,["day"])?h.dayOfMonth:fa(o,["month","year"])?`${h.month} ${h.year}`:fa(o,["day","month"])?`${h.month} ${h.dayOfMonth}`:l?/en/.test(e.getCurrentLocaleCode())?h.normalDateWithWeekday:h.normalDate:h.keyboardDate},B4=["hours","minutes","seconds"],j0=e=>B4.includes(e),M1=e=>B4.includes(e)||e==="meridiem",PV=(e,t)=>e?t.getHours(e)>=12?"pm":"am":null,Cm=(e,t,o)=>o&&(e>=12?"pm":"am")!==t?t==="am"?e-12:e+12:e,MV=(e,t,o,l)=>{const h=Cm(l.getHours(e),t,o);return l.setHours(e,h)},Zk=(e,t)=>t.getHours(e)*3600+t.getMinutes(e)*60+t.getSeconds(e),sv=(e,t)=>(o,l)=>e?t.isAfter(o,l):Zk(o,t)>Zk(l,t),Xk=(e,{format:t,views:o,ampm:l})=>{if(t!=null)return t;const h=e.formats;return fa(o,["hours"])?l?`${h.hours12h} ${h.meridiem}`:h.hours24h:fa(o,["minutes"])?h.minutes:fa(o,["seconds"])?h.seconds:fa(o,["minutes","seconds"])?`${h.minutes}:${h.seconds}`:fa(o,["hours","minutes","seconds"])?l?`${h.hours12h}:${h.minutes}:${h.seconds} ${h.meridiem}`:`${h.hours24h}:${h.minutes}:${h.seconds}`:l?`${h.hours12h}:${h.minutes} ${h.meridiem}`:`${h.hours24h}:${h.minutes}`},da={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},IV=e=>Math.max(...e.map(t=>{var o;return(o=da[t.type])!=null?o:1})),Tf=(e,t,o)=>{if(t===da.year)return e.startOfYear(o);if(t===da.month)return e.startOfMonth(o);if(t===da.day)return e.startOfDay(o);let l=o;return t<da.minutes&&(l=e.setMinutes(l,0)),t<da.seconds&&(l=e.setSeconds(l,0)),t<da.milliseconds&&(l=e.setMilliseconds(l,0)),l},AV=({props:e,utils:t,granularity:o,timezone:l})=>{var h;let p=Tf(t,o,O4(t,l));e.minDate!=null&&t.isAfterDay(e.minDate,p)&&(p=Tf(t,o,e.minDate)),e.maxDate!=null&&t.isBeforeDay(e.maxDate,p)&&(p=Tf(t,o,e.maxDate));const _=sv((h=e.disableIgnoringDatePartForTimeValidation)!=null?h:!1,t);return e.minTime!=null&&_(e.minTime,p)&&(p=Tf(t,o,e.disableIgnoringDatePartForTimeValidation?e.minTime:jb(t,p,e.minTime))),e.maxTime!=null&&_(p,e.maxTime)&&(p=Tf(t,o,e.disableIgnoringDatePartForTimeValidation?e.maxTime:jb(t,p,e.maxTime))),p},F4=(e,t)=>{const o=e.formatTokenMap[t];if(o==null)throw new Error([`MUI: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof o=="string"?{type:o,contentType:o==="meridiem"?"letter":"digit",maxLength:void 0}:{type:o.sectionType,contentType:o.contentType,maxLength:o.maxLength}},DV=e=>{switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},av=(e,t,o)=>{const l=[],h=e.dateWithTimezone(void 0,t),p=e.startOfWeek(h),_=e.endOfWeek(h);let a=p;for(;e.isBefore(a,_);)l.push(a),a=e.addDays(a,1);return l.map(w=>e.formatByString(w,o))},$4=(e,t,o,l)=>{switch(o){case"month":return D2(e,e.dateWithTimezone(void 0,t)).map(h=>e.formatByString(h,l));case"weekDay":return av(e,t,l);case"meridiem":{const h=e.dateWithTimezone(void 0,t);return[e.startOfDay(h),e.endOfDay(h)].map(p=>e.formatByString(p,l))}default:return[]}},N4=(e,t,o)=>{let l=t;for(l=Number(l).toString();l.length<o;)l=`0${l}`;return l},z2=(e,t,o,l,h)=>{if(h.type==="day"&&h.contentType==="digit-with-letter"){const _=e.setDate(l.longestMonth,o);return e.formatByString(_,h.format)}const p=o.toString();return h.hasLeadingZerosInInput?N4(e,p,h.maxLength):p},zV=(e,t,o,l,h,p,_)=>{const a=DV(l),w=l==="Home",C=l==="End",M=o.value===""||w||C,D=()=>{const $=h[o.type]({currentDate:p,format:o.format,contentType:o.contentType}),j=U=>z2(e,t,U,$,o),B=o.type==="minutes"&&_!=null&&_.minutesStep?_.minutesStep:1;let N=parseInt(o.value,10)+a*B;if(M){if(o.type==="year"&&!C&&!w)return e.formatByString(e.dateWithTimezone(void 0,t),o.format);a>0||w?N=$.minimum:N=$.maximum}return N%B!==0&&((a<0||w)&&(N+=B-(B+N)%B),(a>0||C)&&(N-=N%B)),N>$.maximum?j($.minimum+(N-$.maximum-1)%($.maximum-$.minimum+1)):N<$.minimum?j($.maximum-($.minimum-N-1)%($.maximum-$.minimum+1)):j(N)},R=()=>{const $=$4(e,t,o.type,o.format);if($.length===0)return o.value;if(M)return a>0||w?$[0]:$[$.length-1];const B=($.indexOf(o.value)+$.length+a)%$.length;return $[B]};return o.contentType==="digit"||o.contentType==="digit-with-letter"?D():R()},R2=(e,t)=>{let o=e.value||e.placeholder;const l=t==="non-input"?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;return t==="non-input"&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(o=Number(o).toString()),["input-rtl","input-ltr"].includes(t)&&e.contentType==="digit"&&!l&&o.length===1&&(o=`${o}‎`),t==="input-rtl"&&(o=`⁨${o}⁩`),o},Zd=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),U4=(e,t)=>{let o=0,l=t?1:0;const h=[];for(let p=0;p<e.length;p+=1){const _=e[p],a=R2(_,t?"input-rtl":"input-ltr"),w=`${_.startSeparator}${a}${_.endSeparator}`,C=Zd(w).length,M=w.length,D=Zd(a),R=l+a.indexOf(D[0])+_.startSeparator.length,$=R+D.length;h.push(H({},_,{start:o,end:o+C,startInInput:R,endInInput:$})),o+=C,l+=M}return h},RV=(e,t,o,l,h)=>{switch(l.type){case"year":return o.fieldYearPlaceholder({digitAmount:e.formatByString(e.dateWithTimezone(void 0,t),h).length});case"month":return o.fieldMonthPlaceholder({contentType:l.contentType});case"day":return o.fieldDayPlaceholder();case"weekDay":return o.fieldWeekDayPlaceholder({contentType:l.contentType});case"hours":return o.fieldHoursPlaceholder();case"minutes":return o.fieldMinutesPlaceholder();case"seconds":return o.fieldSecondsPlaceholder();case"meridiem":return o.fieldMeridiemPlaceholder();default:return h}},Yk=(e,t,o,l)=>e.formatByString(e.parse(t,o),l),V4=(e,t,o)=>e.formatByString(e.dateWithTimezone(void 0,t),o).length===4,j4=(e,t,o,l,h)=>{if(o!=="digit")return!1;const p=e.dateWithTimezone(void 0,t);switch(l){case"year":return V4(e,t,h)?e.formatByString(e.setYear(p,1),h)==="0001":e.formatByString(e.setYear(p,2001),h)==="01";case"month":return e.formatByString(e.startOfYear(p),h).length>1;case"day":return e.formatByString(e.startOfMonth(p),h).length>1;case"weekDay":return e.formatByString(e.startOfWeek(p),h).length>1;case"hours":return e.formatByString(e.setHours(p,1),h).length>1;case"minutes":return e.formatByString(e.setMinutes(p,1),h).length>1;case"seconds":return e.formatByString(e.setMinutes(p,1),h).length>1;default:throw new Error("Invalid section type")}},LV=(e,t)=>{const o=[],{start:l,end:h}=e.escapedCharacters,p=new RegExp(`(\\${l}[^\\${h}]*\\${h})+`,"g");let _=null;for(;_=p.exec(t);)o.push({start:_.index,end:p.lastIndex-1});return o},Kk=(e,t,o,l,h,p,_,a)=>{let w="";const C=[],M=e.date(),D=G=>{if(G==="")return null;const Y=F4(e,G),Q=j4(e,t,Y.contentType,Y.type,G),re=_?Q:Y.contentType==="digit",oe=h!=null&&e.isValid(h);let de=oe?e.formatByString(h,G):"",ae=null;if(re)if(Q)ae=de===""?e.formatByString(M,G).length:de.length;else{if(Y.maxLength==null)throw new Error(`MUI: The token ${G} should have a 'maxDigitNumber' property on it's adapter`);ae=Y.maxLength,oe&&(de=N4(e,de,ae))}return C.push(H({},Y,{format:G,maxLength:ae,value:de,placeholder:RV(e,t,o,Y,G),hasLeadingZeros:Q,hasLeadingZerosInFormat:Q,hasLeadingZerosInInput:re,startSeparator:C.length===0?w:"",endSeparator:"",modified:!1})),null};let R=10,$=l,j=e.expandFormat(l);for(;j!==$;)if($=j,j=e.expandFormat($),R-=1,R<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const B=j,K=LV(e,B),N=new RegExp(`^(${Object.keys(e.formatTokenMap).join("|")})`);let U="";for(let G=0;G<B.length;G+=1){const Y=K.find(de=>de.start<=G&&de.end>=G),Q=B[G],re=Y!=null,oe=`${U}${B.slice(G)}`;!re&&Q.match(/([A-Za-z]+)/)&&N.test(oe)?U+=Q:re&&(Y==null?void 0:Y.start)===G||(Y==null?void 0:Y.end)===G||(D(U),U="",C.length===0?w+=Q:C[C.length-1].endSeparator+=Q)}return D(U),C.map(G=>{const Y=Q=>{let re=Q;return a&&re!==null&&re.includes(" ")&&(re=`⁩${re}⁦`),p==="spacious"&&["/",".","-"].includes(re)&&(re=` ${re} `),re};return G.startSeparator=Y(G.startSeparator),G.endSeparator=Y(G.endSeparator),G})},Wb=(e,t)=>{const o=t.some(a=>a.type==="day"),l=[],h=[];for(let a=0;a<t.length;a+=1){const w=t[a];o&&w.type==="weekDay"||(l.push(w.format),h.push(R2(w,"non-input")))}const p=l.join(" "),_=h.join(" ");return e.parse(_,p)},OV=(e,t)=>{const l=e.map(h=>{const p=R2(h,t?"input-rtl":"input-ltr");return`${h.startSeparator}${p}${h.endSeparator}`}).join("");return t?`⁦${l}⁩`:l},BV=(e,t)=>{const o=e.dateWithTimezone(void 0,t),l=e.endOfYear(o),{maxDaysInMonth:h,longestMonth:p}=D2(e,o).reduce((_,a)=>{const w=e.getDaysInMonth(a);return w>_.maxDaysInMonth?{maxDaysInMonth:w,longestMonth:a}:_},{maxDaysInMonth:0,longestMonth:null});return{year:({format:_})=>({minimum:0,maximum:V4(e,t,_)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(l)+1}),day:({currentDate:_})=>({minimum:1,maximum:_!=null&&e.isValid(_)?e.getDaysInMonth(_):h,longestMonth:p}),weekDay:({format:_,contentType:a})=>{if(a==="digit"){const w=av(e,t,_).map(Number);return{minimum:Math.min(...w),maximum:Math.max(...w)}}return{minimum:1,maximum:7}},hours:({format:_})=>{const a=e.getHours(l);return e.formatByString(e.endOfDay(o),_)!==a.toString()?{minimum:1,maximum:Number(e.formatByString(e.startOfDay(o),_))}:{minimum:0,maximum:a}},minutes:()=>({minimum:0,maximum:e.getMinutes(l)}),seconds:()=>({minimum:0,maximum:e.getSeconds(l)}),meridiem:()=>({minimum:0,maximum:0})}},FV=(e,t,o,l,h)=>{switch(o.type){case"year":return e.setYear(h,e.getYear(l));case"month":return e.setMonth(h,e.getMonth(l));case"weekDay":{const p=av(e,t,o.format),_=e.formatByString(l,o.format),a=p.indexOf(_),C=p.indexOf(o.value)-a;return e.addDays(l,C)}case"day":return e.setDate(h,e.getDate(l));case"meridiem":{const p=e.getHours(l)<12,_=e.getHours(h);return p&&_>=12?e.addHours(h,-12):!p&&_<12?e.addHours(h,12):h}case"hours":return e.setHours(h,e.getHours(l));case"minutes":return e.setMinutes(h,e.getMinutes(l));case"seconds":return e.setSeconds(h,e.getSeconds(l));default:return h}},Jk={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},Qk=(e,t,o,l,h,p)=>[...l].sort((_,a)=>Jk[_.type]-Jk[a.type]).reduce((_,a)=>!p||a.modified?FV(e,t,a,o,_):_,h),$V=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,NV=(e,t,o,l)=>{if(!(o.every(a=>a.type==="weekDay"||a.value!=="")&&o.some(a=>a.type==="day")))return null;const p=o.map(a=>{if(a.type!=="day")return a;const w=l.day({currentDate:null,format:a.format,contentType:a.contentType});return H({},a,{value:z2(e,t,w.minimum,w,a)})}),_=Wb(e,p);return _==null||!e.isValid(_)?null:o.map(a=>{if(a.type!=="day")return a;const w=l.day({currentDate:_,format:a.format,contentType:a.contentType});return Number(a.value)<=w.maximum?a:H({},a,{value:w.maximum.toString()})})},UV=(e,t)=>{const o={};if(!t)return e.forEach((w,C)=>{const M=C===0?null:C-1,D=C===e.length-1?null:C+1;o[C]={leftIndex:M,rightIndex:D}}),{neighbors:o,startIndex:0,endIndex:e.length-1};const l={},h={};let p=0,_=0,a=e.length-1;for(;a>=0;){_=e.findIndex((w,C)=>{var M;return C>=p&&((M=w.endSeparator)==null?void 0:M.includes(" "))&&w.endSeparator!==" / "}),_===-1&&(_=e.length-1);for(let w=_;w>=p;w-=1)h[w]=a,l[a]=w,a-=1;p=_+1}return e.forEach((w,C)=>{const M=h[C],D=M===0?null:l[M-1],R=M===e.length-1?null:l[M+1];o[C]={leftIndex:D,rightIndex:R}}),{neighbors:o,startIndex:l[0],endIndex:l[e.length-1]}},VV=["value","referenceDate"],qs={emptyValue:null,getTodayValue:O4,getInitialReferenceValue:e=>{let{value:t,referenceDate:o}=e,l=Bt(e,VV);return t!=null&&l.utils.isValid(t)?t:o??AV(l)},cleanValue:CV,areValuesEqual:EV,isSameError:(e,t)=>e===t,hasError:e=>e!=null,defaultErrorState:null,getTimezone:(e,t)=>t==null?null:e.getTimezone(t),setTimezone:(e,t,o)=>o==null?null:e.setTimezone(o,t)},jV={updateReferenceValue:(e,t,o)=>t==null||!e.isValid(t)?o:t,getSectionsFromValue:(e,t,o,l,h)=>!e.isValid(t)&&!!o?o:U4(h(t),l),getValueStrFromSections:OV,getActiveDateManager:(e,t)=>({date:t.value,referenceDate:t.referenceValue,getSections:o=>o,getNewValuesFromNewActiveDate:o=>({value:o,referenceValue:o==null||!e.isValid(o)?t.referenceValue:o})}),parseValueStr:(e,t,o)=>o(e.trim(),t)},WV=e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:H({},e)}}}}),W4={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:e=>e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,t,o)=>`Select ${e}. ${t===null?"No time selected":`Selected time is ${o.format(t,"fullTime")}`}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,t)=>e!==null&&t.isValid(e)?`Choose date, selected date is ${t.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,t)=>e!==null&&t.isValid(e)?`Choose time, selected time is ${t.format(e,"fullTime")}`:"Choose time",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>e.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>e.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},GV=W4;WV(W4);const Tu=()=>{const e=W.useContext(Vb);if(e===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(e.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const t=W.useMemo(()=>H({},GV,e.localeText),[e.localeText]);return W.useMemo(()=>H({},e,{localeText:t}),[e,t])},kr=()=>Tu().utils,Vm=()=>Tu().defaultDates,Zs=()=>Tu().localeText,Cu=e=>{const t=kr(),o=W.useRef();return o.current===void 0&&(o.current=t.dateWithTimezone(void 0,e)),o.current};function G4(e,t,o,l){const{value:h,onError:p}=e,_=Tu(),a=W.useRef(l),w=t({adapter:_,value:h,props:e});return W.useEffect(()=>{p&&!o(w,a.current)&&p(w,h),a.current=w},[o,p,a,w,h]),w}const L2=({timezone:e,value:t,defaultValue:o,onChange:l,valueManager:h})=>{var p,_;const a=kr(),w=W.useRef(o),C=(p=t??w.current)!=null?p:h.emptyValue,M=W.useMemo(()=>h.getTimezone(a,C),[a,h,C]),D=mn(B=>M==null?B:h.setTimezone(a,M,B)),R=(_=e??M)!=null?_:"default",$=W.useMemo(()=>h.setTimezone(a,R,C),[h,a,R,C]),j=mn((B,...K)=>{const N=D(B);l==null||l(N,...K)});return{value:$,handleValueChange:j,timezone:R}},jm=({name:e,timezone:t,value:o,defaultValue:l,onChange:h,valueManager:p})=>{const[_,a]=Uo({name:e,state:"value",controlled:o,default:l??p.emptyValue}),w=mn((C,...M)=>{a(C),h==null||h(C,...M)});return L2({timezone:t,value:_,defaultValue:void 0,onChange:w,valueManager:p})},HV=e=>{const t=kr(),o=Zs(),l=Tu(),p=_s().direction==="rtl",{valueManager:_,fieldValueManager:a,valueType:w,validator:C,internalProps:M,internalProps:{value:D,defaultValue:R,referenceDate:$,onChange:j,format:B,formatDensity:K="dense",selectedSections:N,onSelectedSectionsChange:U,shouldRespectLeadingZeros:G=!1,timezone:Y}}=e,{timezone:Q,value:re,handleValueChange:oe}=L2({timezone:Y,value:D,defaultValue:R,onChange:j,valueManager:_}),de=W.useMemo(()=>BV(t,Q),[t,Q]),ae=W.useCallback((rt,xt=null)=>a.getSectionsFromValue(t,rt,xt,p,ht=>Kk(t,Q,o,B,ht,K,G,p)),[a,B,o,p,G,t,K,Q]),ye=W.useMemo(()=>a.getValueStrFromSections(ae(_.emptyValue),p),[a,ae,_.emptyValue,p]),[Ce,Fe]=W.useState(()=>{const rt=ae(re),xt={sections:rt,value:re,referenceValue:_.emptyValue,tempValueStrAndroid:null},ht=IV(rt),mt=_.getInitialReferenceValue({referenceDate:$,value:re,utils:t,props:M,granularity:ht,timezone:Q});return H({},xt,{referenceValue:mt})}),[be,we]=Uo({controlled:N,default:null,name:"useField",state:"selectedSectionIndexes"}),ue=rt=>{we(rt),U==null||U(rt),Fe(xt=>H({},xt,{selectedSectionQuery:null}))},Be=W.useMemo(()=>{if(be==null)return null;if(be==="all")return{startIndex:0,endIndex:Ce.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof be=="number")return{startIndex:be,endIndex:be};if(typeof be=="string"){const rt=Ce.sections.findIndex(xt=>xt.type===be);return{startIndex:rt,endIndex:rt}}return be},[be,Ce.sections]),Ae=({value:rt,referenceValue:xt,sections:ht})=>{Fe(Ot=>H({},Ot,{sections:ht,value:rt,referenceValue:xt,tempValueStrAndroid:null}));const mt={validationError:C({adapter:l,value:rt,props:H({},M,{value:rt,timezone:Q})})};oe(rt,mt)},Se=(rt,xt)=>{const ht=[...Ce.sections];return ht[rt]=H({},ht[rt],{value:xt,modified:!0}),U4(ht,p)},ke=()=>{_.areValuesEqual(t,Ce.value,_.emptyValue)||Ae({value:_.emptyValue,referenceValue:Ce.referenceValue,sections:ae(_.emptyValue)})},Ne=()=>{if(Be==null)return;const rt=Ce.sections[Be.startIndex];if(rt.value==="")return;const xt=a.getActiveDateManager(t,Ce,rt),mt=xt.getSections(Ce.sections).filter(Je=>Je.value!=="").length===1,Ot=Se(Be.startIndex,""),Nt=mt?null:t.date(new Date("")),at=xt.getNewValuesFromNewActiveDate(Nt);(Nt!=null&&!t.isValid(Nt))!=(xt.date!=null&&!t.isValid(xt.date))?Ae(H({},at,{sections:Ot})):Fe(Je=>H({},Je,at,{sections:Ot,tempValueStrAndroid:null}))},nt=rt=>{const xt=(Ot,Nt)=>{const at=t.parse(Ot,B);if(at==null||!t.isValid(at))return null;const Je=Kk(t,Q,o,B,at,K,G,p);return Qk(t,Q,at,Je,Nt,!1)},ht=a.parseValueStr(rt,Ce.referenceValue,xt),mt=a.updateReferenceValue(t,ht,Ce.referenceValue);Ae({value:ht,referenceValue:mt,sections:ae(ht,Ce.sections)})},vt=({activeSection:rt,newSectionValue:xt,shouldGoToNextSection:ht})=>{ht&&Be&&Be.startIndex<Ce.sections.length-1?ue(Be.startIndex+1):Be&&Be.startIndex!==Be.endIndex&&ue(Be.startIndex);const mt=a.getActiveDateManager(t,Ce,rt),Ot=Se(Be.startIndex,xt),Nt=mt.getSections(Ot);let at=Wb(t,Nt),Je=!1;if(!t.isValid(at)){const He=NV(t,Q,Nt,de);He!=null&&(Je=!0,at=Wb(t,He))}let it,St;if(at!=null&&t.isValid(at)){const He=Qk(t,Q,at,Nt,mt.referenceDate,!0);it=mt.getNewValuesFromNewActiveDate(He),St=!0}else it=mt.getNewValuesFromNewActiveDate(at),St=(at!=null&&!t.isValid(at))!=(mt.date!=null&&!t.isValid(mt.date));const Gt=Je?ae(it.value,Ce.sections):Ot;return St?Ae(H({},it,{sections:Gt})):Fe(He=>H({},He,it,{sections:Gt,tempValueStrAndroid:null}))},gt=rt=>Fe(xt=>H({},xt,{tempValueStrAndroid:rt}));return W.useEffect(()=>{let rt=!1;_.areValuesEqual(t,Ce.value,re)?rt=_.getTimezone(t,Ce.value)!==_.getTimezone(t,re):rt=!0,rt&&Fe(xt=>H({},xt,{value:re,referenceValue:a.updateReferenceValue(t,re,xt.referenceValue),sections:ae(re)}))},[re]),W.useEffect(()=>{const rt=ae(Ce.value);Fe(xt=>H({},xt,{sections:rt}))},[B,t.locale]),{state:Ce,selectedSectionIndexes:Be,setSelectedSections:ue,clearValue:ke,clearActiveSection:Ne,updateSectionValue:vt,updateValueFromValueStr:nt,setTempAndroidValueStr:gt,sectionsValueBoundaries:de,placeholder:ye,timezone:Q}},qV=5e3,Dd=e=>e.saveQuery!=null,ZV=({sections:e,updateSectionValue:t,sectionsValueBoundaries:o,setTempAndroidValueStr:l,timezone:h})=>{const p=kr(),[_,a]=W.useState(null),w=mn(()=>a(null));W.useEffect(()=>{var $;_!=null&&(($=e[_.sectionIndex])==null?void 0:$.type)!==_.sectionType&&w()},[e,_,w]),W.useEffect(()=>{if(_!=null){const $=setTimeout(()=>w(),qV);return()=>{window.clearTimeout($)}}return()=>{}},[_,w]);const C=({keyPressed:$,sectionIndex:j},B,K)=>{const N=$.toLowerCase(),U=e[j];if(_!=null&&(!K||K(_.value))&&_.sectionIndex===j){const Y=`${_.value}${N}`,Q=B(Y,U);if(!Dd(Q))return a({sectionIndex:j,value:Y,sectionType:U.type}),Q}const G=B(N,U);return Dd(G)&&!G.saveQuery?(w(),null):(a({sectionIndex:j,value:N,sectionType:U.type}),Dd(G)?null:G)},M=$=>{const j=(N,U,G)=>{const Y=U.filter(Q=>Q.toLowerCase().startsWith(G));return Y.length===0?{saveQuery:!1}:{sectionValue:Y[0],shouldGoToNextSection:Y.length===1}},B=(N,U,G,Y)=>{const Q=re=>$4(p,h,U.type,re);if(U.contentType==="letter")return j(U.format,Q(U.format),N);if(G&&Y!=null&&F4(p,G).contentType==="letter"){const re=Q(G),oe=j(G,re,N);return Dd(oe)?{saveQuery:!1}:H({},oe,{sectionValue:Y(oe.sectionValue,re)})}return{saveQuery:!1}};return C($,(N,U)=>{switch(U.type){case"month":{const G=Y=>Yk(p,Y,p.formats.month,U.format);return B(N,U,p.formats.month,G)}case"weekDay":{const G=(Y,Q)=>Q.indexOf(Y).toString();return B(N,U,p.formats.weekday,G)}case"meridiem":return B(N,U);default:return{saveQuery:!1}}})},D=$=>{const j=(K,N)=>{const U=+`${K}`,G=o[N.type]({currentDate:null,format:N.format,contentType:N.contentType});if(U>G.maximum)return{saveQuery:!1};if(U<G.minimum)return{saveQuery:!0};const Y=+`${K}0`>G.maximum||K.length===G.maximum.toString().length;return{sectionValue:z2(p,h,U,G,N),shouldGoToNextSection:Y}};return C($,(K,N)=>{if(N.contentType==="digit"||N.contentType==="digit-with-letter")return j(K,N);if(N.type==="month"){const U=j4(p,h,"digit","month","MM"),G=j(K,{type:N.type,format:"MM",hasLeadingZerosInFormat:U,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(Dd(G))return G;const Y=Yk(p,G.sectionValue,"MM",N.format);return H({},G,{sectionValue:Y})}if(N.type==="weekDay"){const U=j(K,N);if(Dd(U))return U;const G=av(p,h,N.format)[Number(U.sectionValue)-1];return H({},U,{sectionValue:G})}return{saveQuery:!1}},K=>!Number.isNaN(Number(K)))};return{applyCharacterEditing:mn($=>{const j=e[$.sectionIndex],K=!Number.isNaN(Number($.keyPressed))?D($):M($);K==null?l(null):t({activeSection:j,newSectionValue:K.sectionValue,shouldGoToNextSection:K.shouldGoToNextSection})}),resetCharacterQuery:w}};function XV(e,t){return Array.isArray(t)?t.every(o=>e.indexOf(o)!==-1):e.indexOf(t)!==-1}const YV=(e,t)=>o=>{(o.key==="Enter"||o.key===" ")&&(e(o),o.preventDefault(),o.stopPropagation()),t&&t(o)},W0=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?W0(t.shadowRoot):t:null},KV="@media (pointer: fine)",JV=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error"],QV=e=>{const t=kr(),{state:o,selectedSectionIndexes:l,setSelectedSections:h,clearValue:p,clearActiveSection:_,updateSectionValue:a,updateValueFromValueStr:w,setTempAndroidValueStr:C,sectionsValueBoundaries:M,placeholder:D,timezone:R}=HV(e),{inputRef:$,internalProps:j,internalProps:{readOnly:B=!1,unstableFieldRef:K,minutesStep:N},forwardedProps:{onClick:U,onKeyDown:G,onFocus:Y,onBlur:Q,onMouseUp:re,onPaste:oe,error:de},fieldValueManager:ae,valueManager:ye,validator:Ce}=e,Fe=Bt(e.forwardedProps,JV),{applyCharacterEditing:be,resetCharacterQuery:we}=ZV({sections:o.sections,updateSectionValue:a,sectionsValueBoundaries:M,setTempAndroidValueStr:C,timezone:R}),ue=W.useRef(null),Be=Rr($,ue),Ae=W.useRef(void 0),ke=_s().direction==="rtl",Ne=W.useMemo(()=>UV(o.sections,ke),[o.sections,ke]),nt=()=>{var He;if(B){h(null);return}const Vt=(He=ue.current.selectionStart)!=null?He:0;let lt;Vt<=o.sections[0].startInInput||Vt>=o.sections[o.sections.length-1].endInInput?lt=1:lt=o.sections.findIndex(Ut=>Ut.startInInput-Ut.startSeparator.length>Vt);const jt=lt===-1?o.sections.length-1:lt-1;h(jt)},vt=mn((...He)=>{U==null||U(...He),nt()}),gt=mn(He=>{re==null||re(He),He.preventDefault()}),rt=mn((...He)=>{Y==null||Y(...He);const Vt=ue.current;window.clearTimeout(Ae.current),Ae.current=setTimeout(()=>{!Vt||Vt!==ue.current||l!=null||B||(Vt.value.length&&Number(Vt.selectionEnd)-Number(Vt.selectionStart)===Vt.value.length?h("all"):nt())})}),xt=mn((...He)=>{Q==null||Q(...He),h(null)}),ht=mn(He=>{if(oe==null||oe(He),B){He.preventDefault();return}const Vt=He.clipboardData.getData("text");if(l&&l.startIndex===l.endIndex){const lt=o.sections[l.startIndex],jt=/^[a-zA-Z]+$/.test(Vt),Ut=/^[0-9]+$/.test(Vt),$t=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(Vt);if(lt.contentType==="letter"&&jt||lt.contentType==="digit"&&Ut||lt.contentType==="digit-with-letter"&&$t)return;if(jt||Ut){He.preventDefault();return}}He.preventDefault(),we(),w(Vt)}),mt=mn(He=>{if(B)return;const Vt=He.target.value,lt=Zd(Vt);if(l==null){w(lt);return}let jt;if(l.startIndex===0&&l.endIndex===o.sections.length-1&&lt.length===1)jt=lt;else{const Ut=Zd(ae.getValueStrFromSections(o.sections,ke));let $t=-1,Lt=-1;for(let dn=0;dn<Ut.length;dn+=1)$t===-1&&Ut[dn]!==lt[dn]&&($t=dn),Lt===-1&&Ut[Ut.length-dn-1]!==lt[lt.length-dn-1]&&(Lt=dn);const un=o.sections[l.startIndex];if($t<un.start||Ut.length-Lt-1>un.end)return;const Hn=lt.length-Ut.length+un.end-Zd(un.endSeparator||"").length;jt=lt.slice(un.start+Zd(un.startSeparator||"").length,Hn)}if($V()&&jt.length===0){C(Vt);return}be({keyPressed:jt,sectionIndex:l.startIndex})}),Ot=mn(He=>{switch(G==null||G(He),!0){case(He.key==="a"&&(He.ctrlKey||He.metaKey)):{He.preventDefault(),h("all");break}case He.key==="ArrowRight":{if(He.preventDefault(),l==null)h(Ne.startIndex);else if(l.startIndex!==l.endIndex)h(l.endIndex);else{const Vt=Ne.neighbors[l.startIndex].rightIndex;Vt!==null&&h(Vt)}break}case He.key==="ArrowLeft":{if(He.preventDefault(),l==null)h(Ne.endIndex);else if(l.startIndex!==l.endIndex)h(l.startIndex);else{const Vt=Ne.neighbors[l.startIndex].leftIndex;Vt!==null&&h(Vt)}break}case["Backspace","Delete"].includes(He.key):{if(He.preventDefault(),B)break;l==null||l.startIndex===0&&l.endIndex===o.sections.length-1?p():_(),we();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(He.key):{if(He.preventDefault(),B||l==null)break;const Vt=o.sections[l.startIndex],lt=ae.getActiveDateManager(t,o,Vt),jt=zV(t,R,Vt,He.key,M,lt.date,{minutesStep:N});a({activeSection:Vt,newSectionValue:jt,shouldGoToNextSection:!1});break}}});ki(()=>{if(!ue.current)return;if(l==null){ue.current.scrollLeft&&(ue.current.scrollLeft=0);return}const He=o.sections[l.startIndex],Vt=o.sections[l.endIndex];let lt=He.startInInput,jt=Vt.endInInput;if(l.shouldSelectBoundarySelectors&&(lt-=He.startSeparator.length,jt+=Vt.endSeparator.length),lt!==ue.current.selectionStart||jt!==ue.current.selectionEnd){const Ut=ue.current.scrollTop;ue.current===W0(document)&&ue.current.setSelectionRange(lt,jt),ue.current.scrollTop=Ut}});const Nt=G4(H({},j,{value:o.value,timezone:R}),Ce,ye.isSameError,ye.defaultErrorState),at=W.useMemo(()=>de!==void 0?de:ye.hasError(Nt),[ye,Nt,de]);W.useEffect(()=>{!at&&!l&&we()},[o.referenceValue,l,at]),W.useEffect(()=>(ue.current&&ue.current===document.activeElement&&h("all"),()=>window.clearTimeout(Ae.current)),[]),W.useEffect(()=>{o.tempValueStrAndroid!=null&&l!=null&&(we(),_())},[o.tempValueStrAndroid]);const Je=W.useMemo(()=>{var He;return(He=o.tempValueStrAndroid)!=null?He:ae.getValueStrFromSections(o.sections,ke)},[o.sections,ae,o.tempValueStrAndroid,ke]),it=W.useMemo(()=>l==null||o.sections[l.startIndex].contentType==="letter"?"text":"tel",[l,o.sections]),Gt=!(ue.current&&ue.current===W0(document))&&ye.areValuesEqual(t,o.value,ye.emptyValue);return W.useImperativeHandle(K,()=>({getSections:()=>o.sections,getActiveSectionIndex:()=>{var He,Vt;const lt=(He=ue.current.selectionStart)!=null?He:0,jt=(Vt=ue.current.selectionEnd)!=null?Vt:0;if(lt===0&&jt===0)return null;const Ut=lt<=o.sections[0].startInInput?1:o.sections.findIndex($t=>$t.startInInput-$t.startSeparator.length>lt);return Ut===-1?o.sections.length-1:Ut-1},setSelectedSections:He=>h(He)})),H({placeholder:D,autoComplete:"off"},Fe,{value:Gt?"":Je,inputMode:it,readOnly:B,onClick:vt,onFocus:rt,onBlur:xt,onPaste:ht,onChange:mt,onKeyDown:Ot,onMouseUp:gt,error:at,ref:Be})},H4=({props:e,value:t,adapter:o})=>{if(t===null)return null;const{shouldDisableDate:l,shouldDisableMonth:h,shouldDisableYear:p,disablePast:_,disableFuture:a,timezone:w}=e,C=o.utils.dateWithTimezone(void 0,w),M=gs(o.utils,e.minDate,o.defaultDates.minDate),D=gs(o.utils,e.maxDate,o.defaultDates.maxDate);switch(!0){case!o.utils.isValid(t):return"invalidDate";case!!(l&&l(t)):return"shouldDisableDate";case!!(h&&h(t)):return"shouldDisableMonth";case!!(p&&p(t)):return"shouldDisableYear";case!!(a&&o.utils.isAfterDay(t,C)):return"disableFuture";case!!(_&&o.utils.isBeforeDay(t,C)):return"disablePast";case!!(M&&o.utils.isBeforeDay(t,M)):return"minDate";case!!(D&&o.utils.isAfterDay(t,D)):return"maxDate";default:return null}},ej=({adapter:e,value:t,props:o})=>{if(t===null)return null;const{minTime:l,maxTime:h,minutesStep:p,shouldDisableClock:_,shouldDisableTime:a,disableIgnoringDatePartForTimeValidation:w=!1,disablePast:C,disableFuture:M,timezone:D}=o,R=e.utils.dateWithTimezone(void 0,D),$=sv(w,e.utils);switch(!0){case!e.utils.isValid(t):return"invalidDate";case!!(l&&$(l,t)):return"minTime";case!!(h&&$(t,h)):return"maxTime";case!!(M&&e.utils.isAfter(t,R)):return"disableFuture";case!!(C&&e.utils.isBefore(t,R)):return"disablePast";case!!(a&&a(t,"hours")):return"shouldDisableTime-hours";case!!(a&&a(t,"minutes")):return"shouldDisableTime-minutes";case!!(a&&a(t,"seconds")):return"shouldDisableTime-seconds";case!!(_&&_(e.utils.getHours(t),"hours")):return"shouldDisableClock-hours";case!!(_&&_(e.utils.getMinutes(t),"minutes")):return"shouldDisableClock-minutes";case!!(_&&_(e.utils.getSeconds(t),"seconds")):return"shouldDisableClock-seconds";case!!(p&&e.utils.getMinutes(t)%p!==0):return"minutesStep";default:return null}},O2=({props:e,value:t,adapter:o})=>{const l=H4({adapter:o,value:t,props:e});return l!==null?l:ej({adapter:o,value:t,props:e})},Gb=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],Hb=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],q4=["minDateTime","maxDateTime"],tj=[...Gb,...Hb,...q4],Z4=e=>tj.reduce((t,o)=>(e.hasOwnProperty(o)&&(t[o]=e[o]),t),{}),nj=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],rj=(e,t)=>{const o=H({},e),l={},h=p=>{o.hasOwnProperty(p)&&(l[p]=o[p],delete o[p])};return nj.forEach(h),t==="date"?Gb.forEach(h):t==="time"?Hb.forEach(h):t==="date-time"&&(Gb.forEach(h),Hb.forEach(h),q4.forEach(h)),{forwardedProps:o,internalProps:l}},ij=e=>{var t,o,l,h,p,_,a,w;const C=kr(),M=Vm(),R=((t=e.ampm)!=null?t:C.is12HourCycleInCurrentLocale())?C.formats.keyboardDateTime12h:C.formats.keyboardDateTime24h;return H({},e,{disablePast:(o=e.disablePast)!=null?o:!1,disableFuture:(l=e.disableFuture)!=null?l:!1,format:(h=e.format)!=null?h:R,disableIgnoringDatePartForTimeValidation:!!(e.minDateTime||e.maxDateTime),minDate:gs(C,(p=e.minDateTime)!=null?p:e.minDate,M.minDate),maxDate:gs(C,(_=e.maxDateTime)!=null?_:e.maxDate,M.maxDate),minTime:(a=e.minDateTime)!=null?a:e.minTime,maxTime:(w=e.maxDateTime)!=null?w:e.maxTime})},oj=({props:e,inputRef:t})=>{const o=ij(e),{forwardedProps:l,internalProps:h}=rj(o,"date-time");return QV({inputRef:t,forwardedProps:l,internalProps:h,valueManager:qs,fieldValueManager:jV,validator:O2,valueType:"date-time"})},sj=["components","componentsProps","slots","slotProps","InputProps","inputProps"],aj=["inputRef"],lj=["ref","onPaste","inputMode","readOnly"],X4=W.forwardRef(function(t,o){var l,h,p;const _=gn({props:t,name:"MuiDateTimeField"}),{components:a,componentsProps:w,slots:C,slotProps:M,InputProps:D,inputProps:R}=_,$=Bt(_,sj),j=_,B=(l=(h=C==null?void 0:C.textField)!=null?h:a==null?void 0:a.TextField)!=null?l:P4,K=$r({elementType:B,externalSlotProps:(p=M==null?void 0:M.textField)!=null?p:w==null?void 0:w.textField,externalForwardedProps:$,ownerState:j}),{inputRef:N}=K,U=Bt(K,aj);U.inputProps=H({},U.inputProps,R),U.InputProps=H({},U.InputProps,D);const G=oj({props:U,inputRef:N}),{ref:Y,onPaste:Q,inputMode:re,readOnly:oe}=G,de=Bt(G,lj);return he.jsx(B,H({ref:o},de,{InputProps:H({},de.InputProps,{readOnly:oe}),inputProps:H({},de.inputProps,{inputMode:re,onPaste:Q,ref:Y})}))});function cj(e){const{className:t,classes:o,pulsate:l=!1,rippleX:h,rippleY:p,rippleSize:_,in:a,onExited:w,timeout:C}=e,[M,D]=W.useState(!1),R=Zt(t,o.ripple,o.rippleVisible,l&&o.ripplePulsate),$={width:_,height:_,top:-(_/2)+p,left:-(_/2)+h},j=Zt(o.child,M&&o.childLeaving,l&&o.childPulsate);return!a&&!M&&D(!0),W.useEffect(()=>{if(!a&&w!=null){const B=setTimeout(w,C);return()=>{clearTimeout(B)}}},[w,a,C]),he.jsx("span",{className:R,style:$,children:he.jsx("span",{className:j})})}const uj=_n("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),os=uj,dj=["center","classes","className"];let lv=e=>e,eP,tP,nP,rP;const qb=550,hj=80,pj=s2(eP||(eP=lv`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),fj=s2(tP||(tP=lv`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),mj=s2(nP||(nP=lv`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),gj=dt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),yj=dt(cj,{name:"MuiTouchRipple",slot:"Ripple"})(rP||(rP=lv`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),os.rippleVisible,pj,qb,({theme:e})=>e.transitions.easing.easeInOut,os.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,os.child,os.childLeaving,fj,qb,({theme:e})=>e.transitions.easing.easeInOut,os.childPulsate,mj,({theme:e})=>e.transitions.easing.easeInOut),_j=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiTouchRipple"}),{center:h=!1,classes:p={},className:_}=l,a=Bt(l,dj),[w,C]=W.useState([]),M=W.useRef(0),D=W.useRef(null);W.useEffect(()=>{D.current&&(D.current(),D.current=null)},[w]);const R=W.useRef(!1),$=W.useRef(0),j=W.useRef(null),B=W.useRef(null);W.useEffect(()=>()=>{$.current&&clearTimeout($.current)},[]);const K=W.useCallback(Y=>{const{pulsate:Q,rippleX:re,rippleY:oe,rippleSize:de,cb:ae}=Y;C(ye=>[...ye,he.jsx(yj,{classes:{ripple:Zt(p.ripple,os.ripple),rippleVisible:Zt(p.rippleVisible,os.rippleVisible),ripplePulsate:Zt(p.ripplePulsate,os.ripplePulsate),child:Zt(p.child,os.child),childLeaving:Zt(p.childLeaving,os.childLeaving),childPulsate:Zt(p.childPulsate,os.childPulsate)},timeout:qb,pulsate:Q,rippleX:re,rippleY:oe,rippleSize:de},M.current)]),M.current+=1,D.current=ae},[p]),N=W.useCallback((Y={},Q={},re=()=>{})=>{const{pulsate:oe=!1,center:de=h||Q.pulsate,fakeElement:ae=!1}=Q;if((Y==null?void 0:Y.type)==="mousedown"&&R.current){R.current=!1;return}(Y==null?void 0:Y.type)==="touchstart"&&(R.current=!0);const ye=ae?null:B.current,Ce=ye?ye.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Fe,be,we;if(de||Y===void 0||Y.clientX===0&&Y.clientY===0||!Y.clientX&&!Y.touches)Fe=Math.round(Ce.width/2),be=Math.round(Ce.height/2);else{const{clientX:ue,clientY:Be}=Y.touches&&Y.touches.length>0?Y.touches[0]:Y;Fe=Math.round(ue-Ce.left),be=Math.round(Be-Ce.top)}if(de)we=Math.sqrt((2*Ce.width**2+Ce.height**2)/3),we%2===0&&(we+=1);else{const ue=Math.max(Math.abs((ye?ye.clientWidth:0)-Fe),Fe)*2+2,Be=Math.max(Math.abs((ye?ye.clientHeight:0)-be),be)*2+2;we=Math.sqrt(ue**2+Be**2)}Y!=null&&Y.touches?j.current===null&&(j.current=()=>{K({pulsate:oe,rippleX:Fe,rippleY:be,rippleSize:we,cb:re})},$.current=setTimeout(()=>{j.current&&(j.current(),j.current=null)},hj)):K({pulsate:oe,rippleX:Fe,rippleY:be,rippleSize:we,cb:re})},[h,K]),U=W.useCallback(()=>{N({},{pulsate:!0})},[N]),G=W.useCallback((Y,Q)=>{if(clearTimeout($.current),(Y==null?void 0:Y.type)==="touchend"&&j.current){j.current(),j.current=null,$.current=setTimeout(()=>{G(Y,Q)});return}j.current=null,C(re=>re.length>0?re.slice(1):re),D.current=Q},[]);return W.useImperativeHandle(o,()=>({pulsate:U,start:N,stop:G}),[U,N,G]),he.jsx(gj,H({className:Zt(os.root,p.root,_),ref:B},a,{children:he.jsx(P2,{component:null,exit:!0,children:w})}))}),vj=_j;function xj(e){return Sn("MuiButtonBase",e)}const bj=_n("MuiButtonBase",["root","disabled","focusVisible"]),wj=bj,Sj=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Tj=e=>{const{disabled:t,focusVisible:o,focusVisibleClassName:l,classes:h}=e,_=xn({root:["root",t&&"disabled",o&&"focusVisible"]},xj,h);return o&&l&&(_.root+=` ${l}`),_},Cj=dt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${wj.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Ej=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiButtonBase"}),{action:h,centerRipple:p=!1,children:_,className:a,component:w="button",disabled:C=!1,disableRipple:M=!1,disableTouchRipple:D=!1,focusRipple:R=!1,LinkComponent:$="a",onBlur:j,onClick:B,onContextMenu:K,onDragLeave:N,onFocus:U,onFocusVisible:G,onKeyDown:Y,onKeyUp:Q,onMouseDown:re,onMouseLeave:oe,onMouseUp:de,onTouchEnd:ae,onTouchMove:ye,onTouchStart:Ce,tabIndex:Fe=0,TouchRippleProps:be,touchRippleRef:we,type:ue}=l,Be=Bt(l,Sj),Ae=W.useRef(null),Se=W.useRef(null),ke=Rr(Se,we),{isFocusVisibleRef:Ne,onFocus:nt,onBlur:vt,ref:gt}=xO(),[rt,xt]=W.useState(!1);C&&rt&&xt(!1),W.useImperativeHandle(h,()=>({focusVisible:()=>{xt(!0),Ae.current.focus()}}),[]);const[ht,mt]=W.useState(!1);W.useEffect(()=>{mt(!0)},[]);const Ot=ht&&!M&&!C;W.useEffect(()=>{rt&&R&&!M&&ht&&Se.current.pulsate()},[M,R,rt,ht]);function Nt(an,ln,An=D){return mn(Ht=>(ln&&ln(Ht),!An&&Se.current&&Se.current[an](Ht),!0))}const at=Nt("start",re),Je=Nt("stop",K),it=Nt("stop",N),St=Nt("stop",de),Gt=Nt("stop",an=>{rt&&an.preventDefault(),oe&&oe(an)}),He=Nt("start",Ce),Vt=Nt("stop",ae),lt=Nt("stop",ye),jt=Nt("stop",an=>{vt(an),Ne.current===!1&&xt(!1),j&&j(an)},!1),Ut=mn(an=>{Ae.current||(Ae.current=an.currentTarget),nt(an),Ne.current===!0&&(xt(!0),G&&G(an)),U&&U(an)}),$t=()=>{const an=Ae.current;return w&&w!=="button"&&!(an.tagName==="A"&&an.href)},Lt=W.useRef(!1),un=mn(an=>{R&&!Lt.current&&rt&&Se.current&&an.key===" "&&(Lt.current=!0,Se.current.stop(an,()=>{Se.current.start(an)})),an.target===an.currentTarget&&$t()&&an.key===" "&&an.preventDefault(),Y&&Y(an),an.target===an.currentTarget&&$t()&&an.key==="Enter"&&!C&&(an.preventDefault(),B&&B(an))}),kn=mn(an=>{R&&an.key===" "&&Se.current&&rt&&!an.defaultPrevented&&(Lt.current=!1,Se.current.stop(an,()=>{Se.current.pulsate(an)})),Q&&Q(an),B&&an.target===an.currentTarget&&$t()&&an.key===" "&&!an.defaultPrevented&&B(an)});let Hn=w;Hn==="button"&&(Be.href||Be.to)&&(Hn=$);const dn={};Hn==="button"?(dn.type=ue===void 0?"button":ue,dn.disabled=C):(!Be.href&&!Be.to&&(dn.role="button"),C&&(dn["aria-disabled"]=C));const En=Rr(o,gt,Ae),Tn=H({},l,{centerRipple:p,component:w,disabled:C,disableRipple:M,disableTouchRipple:D,focusRipple:R,tabIndex:Fe,focusVisible:rt}),sn=Tj(Tn);return he.jsxs(Cj,H({as:Hn,className:Zt(sn.root,a),ownerState:Tn,onBlur:jt,onClick:B,onContextMenu:Je,onFocus:Ut,onKeyDown:un,onKeyUp:kn,onMouseDown:at,onMouseLeave:Gt,onMouseUp:St,onDragLeave:it,onTouchEnd:Vt,onTouchMove:lt,onTouchStart:He,ref:En,tabIndex:C?-1:Fe,type:ue},dn,Be,{children:[_,Ot?he.jsx(vj,H({ref:ke,center:p},be)):null]}))}),el=Ej;function kj(e){return Sn("MuiTab",e)}const Pj=_n("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Zc=Pj,Mj=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],Ij=e=>{const{classes:t,textColor:o,fullWidth:l,wrapped:h,icon:p,label:_,selected:a,disabled:w}=e,C={root:["root",p&&_&&"labelIcon",`textColor${tn(o)}`,l&&"fullWidth",h&&"wrapped",a&&"selected",w&&"disabled"],iconWrapper:["iconWrapper"]};return xn(C,kj,t)},Aj=dt(el,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.label&&o.icon&&t.labelIcon,t[`textColor${tn(o.textColor)}`],o.fullWidth&&t.fullWidth,o.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>H({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Zc.iconWrapper}`]:H({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${Zc.selected}`]:{opacity:1},[`&.${Zc.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${Zc.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${Zc.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${Zc.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${Zc.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),Dj=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiTab"}),{className:h,disabled:p=!1,disableFocusRipple:_=!1,fullWidth:a,icon:w,iconPosition:C="top",indicator:M,label:D,onChange:R,onClick:$,onFocus:j,selected:B,selectionFollowsFocus:K,textColor:N="inherit",value:U,wrapped:G=!1}=l,Y=Bt(l,Mj),Q=H({},l,{disabled:p,disableFocusRipple:_,selected:B,icon:!!w,iconPosition:C,label:!!D,fullWidth:a,textColor:N,wrapped:G}),re=Ij(Q),oe=w&&D&&W.isValidElement(w)?W.cloneElement(w,{className:Zt(re.iconWrapper,w.props.className)}):w,de=ye=>{!B&&R&&R(ye,U),$&&$(ye)},ae=ye=>{K&&!B&&R&&R(ye,U),j&&j(ye)};return he.jsxs(Aj,H({focusRipple:!_,className:Zt(re.root,h),ref:o,role:"tab","aria-selected":B,disabled:p,onClick:de,onFocus:ae,ownerState:Q,tabIndex:B?0:-1},Y,{children:[C==="top"||C==="start"?he.jsxs(W.Fragment,{children:[oe,D]}):he.jsxs(W.Fragment,{children:[D,oe]}),M]}))}),iP=Dj;function zj(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function Rj(e,t,o,l={},h=()=>{}){const{ease:p=zj,duration:_=300}=l;let a=null;const w=t[e];let C=!1;const M=()=>{C=!0},D=R=>{if(C){h(new Error("Animation cancelled"));return}a===null&&(a=R);const $=Math.min(1,(R-a)/_);if(t[e]=p($)*(o-w)+w,$>=1){requestAnimationFrame(()=>{h(null)});return}requestAnimationFrame(D)};return w===o?(h(new Error("Element already at target position")),M):(requestAnimationFrame(D),M)}const Lj=["onChange"],Oj={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Bj(e){const{onChange:t}=e,o=Bt(e,Lj),l=W.useRef(),h=W.useRef(null),p=()=>{l.current=h.current.offsetHeight-h.current.clientHeight};return ki(()=>{const _=ym(()=>{const w=l.current;p(),w!==l.current&&t(l.current)}),a=Ka(h.current);return a.addEventListener("resize",_),()=>{_.clear(),a.removeEventListener("resize",_)}},[t]),W.useEffect(()=>{p(),t(l.current)},[t]),he.jsx("div",H({style:Oj,ref:h},o))}const Fj=ys(he.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),$j=ys(he.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Nj(e){return Sn("MuiTabScrollButton",e)}const Uj=_n("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Vj=Uj,jj=["className","slots","slotProps","direction","orientation","disabled"],Wj=e=>{const{classes:t,orientation:o,disabled:l}=e;return xn({root:["root",o,l&&"disabled"]},Nj,t)},Gj=dt(el,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.orientation&&t[o.orientation]]}})(({ownerState:e})=>H({width:40,flexShrink:0,opacity:.8,[`&.${Vj.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),Hj=W.forwardRef(function(t,o){var l,h;const p=gn({props:t,name:"MuiTabScrollButton"}),{className:_,slots:a={},slotProps:w={},direction:C}=p,M=Bt(p,jj),R=_s().direction==="rtl",$=H({isRtl:R},p),j=Wj($),B=(l=a.StartScrollButtonIcon)!=null?l:Fj,K=(h=a.EndScrollButtonIcon)!=null?h:$j,N=$r({elementType:B,externalSlotProps:w.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:$}),U=$r({elementType:K,externalSlotProps:w.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:$});return he.jsx(Gj,H({component:"div",className:Zt(j.root,_),ref:o,role:null,ownerState:$,tabIndex:null},M,{children:C==="left"?he.jsx(B,H({},N)):he.jsx(K,H({},U))}))}),qj=Hj;function Zj(e){return Sn("MuiTabs",e)}const Xj=_n("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),l0=Xj,Yj=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],oP=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,sP=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Oy=(e,t,o)=>{let l=!1,h=o(e,t);for(;h;){if(h===e.firstChild){if(l)return;l=!0}const p=h.disabled||h.getAttribute("aria-disabled")==="true";if(!h.hasAttribute("tabindex")||p)h=o(e,h);else{h.focus();return}}},Kj=e=>{const{vertical:t,fixed:o,hideScrollbar:l,scrollableX:h,scrollableY:p,centered:_,scrollButtonsHideMobile:a,classes:w}=e;return xn({root:["root",t&&"vertical"],scroller:["scroller",o&&"fixed",l&&"hideScrollbar",h&&"scrollableX",p&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",_&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[h&&"scrollableX"],hideScrollbar:[l&&"hideScrollbar"]},Zj,w)},Jj=dt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${l0.scrollButtons}`]:t.scrollButtons},{[`& .${l0.scrollButtons}`]:o.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,o.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>H({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${l0.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),Qj=dt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.scroller,o.fixed&&t.fixed,o.hideScrollbar&&t.hideScrollbar,o.scrollableX&&t.scrollableX,o.scrollableY&&t.scrollableY]}})(({ownerState:e})=>H({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),eW=dt("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.flexContainer,o.vertical&&t.flexContainerVertical,o.centered&&t.centered]}})(({ownerState:e})=>H({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),tW=dt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>H({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),nW=dt(Bj,{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),aP={},rW=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiTabs"}),h=_s(),p=h.direction==="rtl",{"aria-label":_,"aria-labelledby":a,action:w,centered:C=!1,children:M,className:D,component:R="div",allowScrollButtonsMobile:$=!1,indicatorColor:j="primary",onChange:B,orientation:K="horizontal",ScrollButtonComponent:N=qj,scrollButtons:U="auto",selectionFollowsFocus:G,slots:Y={},slotProps:Q={},TabIndicatorProps:re={},TabScrollButtonProps:oe={},textColor:de="primary",value:ae,variant:ye="standard",visibleScrollbar:Ce=!1}=l,Fe=Bt(l,Yj),be=ye==="scrollable",we=K==="vertical",ue=we?"scrollTop":"scrollLeft",Be=we?"top":"left",Ae=we?"bottom":"right",Se=we?"clientHeight":"clientWidth",ke=we?"height":"width",Ne=H({},l,{component:R,allowScrollButtonsMobile:$,indicatorColor:j,orientation:K,vertical:we,scrollButtons:U,textColor:de,variant:ye,visibleScrollbar:Ce,fixed:!be,hideScrollbar:be&&!Ce,scrollableX:be&&!we,scrollableY:be&&we,centered:C&&!be,scrollButtonsHideMobile:!$}),nt=Kj(Ne),vt=$r({elementType:Y.StartScrollButtonIcon,externalSlotProps:Q.startScrollButtonIcon,ownerState:Ne}),gt=$r({elementType:Y.EndScrollButtonIcon,externalSlotProps:Q.endScrollButtonIcon,ownerState:Ne}),[rt,xt]=W.useState(!1),[ht,mt]=W.useState(aP),[Ot,Nt]=W.useState({start:!1,end:!1}),[at,Je]=W.useState({overflow:"hidden",scrollbarWidth:0}),it=new Map,St=W.useRef(null),Gt=W.useRef(null),He=()=>{const Ht=St.current;let nn;if(Ht){const $n=Ht.getBoundingClientRect();nn={clientWidth:Ht.clientWidth,scrollLeft:Ht.scrollLeft,scrollTop:Ht.scrollTop,scrollLeftNormalized:NE(Ht,h.direction),scrollWidth:Ht.scrollWidth,top:$n.top,bottom:$n.bottom,left:$n.left,right:$n.right}}let bn;if(Ht&&ae!==!1){const $n=Gt.current.children;if($n.length>0){const Zn=$n[it.get(ae)];bn=Zn?Zn.getBoundingClientRect():null}}return{tabsMeta:nn,tabMeta:bn}},Vt=mn(()=>{const{tabsMeta:Ht,tabMeta:nn}=He();let bn=0,$n;if(we)$n="top",nn&&Ht&&(bn=nn.top-Ht.top+Ht.scrollTop);else if($n=p?"right":"left",nn&&Ht){const Ar=p?Ht.scrollLeftNormalized+Ht.clientWidth-Ht.scrollWidth:Ht.scrollLeft;bn=(p?-1:1)*(nn[$n]-Ht[$n]+Ar)}const Zn={[$n]:bn,[ke]:nn?nn[ke]:0};if(isNaN(ht[$n])||isNaN(ht[ke]))mt(Zn);else{const Ar=Math.abs(ht[$n]-Zn[$n]),Nr=Math.abs(ht[ke]-Zn[ke]);(Ar>=1||Nr>=1)&&mt(Zn)}}),lt=(Ht,{animation:nn=!0}={})=>{nn?Rj(ue,St.current,Ht,{duration:h.transitions.duration.standard}):St.current[ue]=Ht},jt=Ht=>{let nn=St.current[ue];we?nn+=Ht:(nn+=Ht*(p?-1:1),nn*=p&&YI()==="reverse"?-1:1),lt(nn)},Ut=()=>{const Ht=St.current[Se];let nn=0;const bn=Array.from(Gt.current.children);for(let $n=0;$n<bn.length;$n+=1){const Zn=bn[$n];if(nn+Zn[Se]>Ht){$n===0&&(nn=Ht);break}nn+=Zn[Se]}return nn},$t=()=>{jt(-1*Ut())},Lt=()=>{jt(Ut())},un=W.useCallback(Ht=>{Je({overflow:null,scrollbarWidth:Ht})},[]),kn=()=>{const Ht={};Ht.scrollbarSizeListener=be?he.jsx(nW,{onChange:un,className:Zt(nt.scrollableX,nt.hideScrollbar)}):null;const nn=Ot.start||Ot.end,bn=be&&(U==="auto"&&nn||U===!0);return Ht.scrollButtonStart=bn?he.jsx(N,H({slots:{StartScrollButtonIcon:Y.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:vt},orientation:K,direction:p?"right":"left",onClick:$t,disabled:!Ot.start},oe,{className:Zt(nt.scrollButtons,oe.className)})):null,Ht.scrollButtonEnd=bn?he.jsx(N,H({slots:{EndScrollButtonIcon:Y.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:gt},orientation:K,direction:p?"left":"right",onClick:Lt,disabled:!Ot.end},oe,{className:Zt(nt.scrollButtons,oe.className)})):null,Ht},Hn=mn(Ht=>{const{tabsMeta:nn,tabMeta:bn}=He();if(!(!bn||!nn)){if(bn[Be]<nn[Be]){const $n=nn[ue]+(bn[Be]-nn[Be]);lt($n,{animation:Ht})}else if(bn[Ae]>nn[Ae]){const $n=nn[ue]+(bn[Ae]-nn[Ae]);lt($n,{animation:Ht})}}}),dn=mn(()=>{if(be&&U!==!1){const{scrollTop:Ht,scrollHeight:nn,clientHeight:bn,scrollWidth:$n,clientWidth:Zn}=St.current;let Ar,Nr;if(we)Ar=Ht>1,Nr=Ht<nn-bn-1;else{const ge=NE(St.current,h.direction);Ar=p?ge<$n-Zn-1:ge>1,Nr=p?ge>1:ge<$n-Zn-1}(Ar!==Ot.start||Nr!==Ot.end)&&Nt({start:Ar,end:Nr})}});W.useEffect(()=>{const Ht=ym(()=>{St.current&&(Vt(),dn())}),nn=Ka(St.current);nn.addEventListener("resize",Ht);let bn;return typeof ResizeObserver<"u"&&(bn=new ResizeObserver(Ht),Array.from(Gt.current.children).forEach($n=>{bn.observe($n)})),()=>{Ht.clear(),nn.removeEventListener("resize",Ht),bn&&bn.disconnect()}},[Vt,dn]);const En=W.useMemo(()=>ym(()=>{dn()}),[dn]);W.useEffect(()=>()=>{En.clear()},[En]),W.useEffect(()=>{xt(!0)},[]),W.useEffect(()=>{Vt(),dn()}),W.useEffect(()=>{Hn(aP!==ht)},[Hn,ht]),W.useImperativeHandle(w,()=>({updateIndicator:Vt,updateScrollButtons:dn}),[Vt,dn]);const Tn=he.jsx(tW,H({},re,{className:Zt(nt.indicator,re.className),ownerState:Ne,style:H({},ht,re.style)}));let sn=0;const an=W.Children.map(M,Ht=>{if(!W.isValidElement(Ht))return null;const nn=Ht.props.value===void 0?sn:Ht.props.value;it.set(nn,sn);const bn=nn===ae;return sn+=1,W.cloneElement(Ht,H({fullWidth:ye==="fullWidth",indicator:bn&&!rt&&Tn,selected:bn,selectionFollowsFocus:G,onChange:B,textColor:de,value:nn},sn===1&&ae===!1&&!Ht.props.tabIndex?{tabIndex:0}:{}))}),ln=Ht=>{const nn=Gt.current,bn=Ei(nn).activeElement;if(bn.getAttribute("role")!=="tab")return;let Zn=K==="horizontal"?"ArrowLeft":"ArrowUp",Ar=K==="horizontal"?"ArrowRight":"ArrowDown";switch(K==="horizontal"&&p&&(Zn="ArrowRight",Ar="ArrowLeft"),Ht.key){case Zn:Ht.preventDefault(),Oy(nn,bn,sP);break;case Ar:Ht.preventDefault(),Oy(nn,bn,oP);break;case"Home":Ht.preventDefault(),Oy(nn,null,oP);break;case"End":Ht.preventDefault(),Oy(nn,null,sP);break}},An=kn();return he.jsxs(Jj,H({className:Zt(nt.root,D),ownerState:Ne,ref:o,as:R},Fe,{children:[An.scrollButtonStart,An.scrollbarSizeListener,he.jsxs(Qj,{className:nt.scroller,ownerState:Ne,style:{overflow:at.overflow,[we?`margin${p?"Left":"Right"}`:"marginBottom"]:Ce?void 0:-at.scrollbarWidth},ref:St,onScroll:En,children:[he.jsx(eW,{"aria-label":_,"aria-labelledby":a,"aria-orientation":K==="vertical"?"vertical":null,className:nt.flexContainer,ownerState:Ne,onKeyDown:ln,ref:Gt,role:"tablist",children:an}),rt&&Tn]}),An.scrollButtonEnd]}))}),iW=rW,oW=ys(he.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),sW=ys(he.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),aW=ys(he.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),lW=ys(he.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");ys(he.jsxs(W.Fragment,{children:[he.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),he.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");const cW=ys(he.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),uW=ys(he.jsxs(W.Fragment,{children:[he.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),he.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");function dW(e){return Sn("MuiDateTimePickerTabs",e)}_n("MuiDateTimePickerTabs",["root"]);const hW=e=>ih(e)?"date":"time",pW=e=>e==="date"?"day":"hours",fW=e=>{const{classes:t}=e;return xn({root:["root"]},dW,t)},mW=dt(iW,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({boxShadow:`0 -1px 0 0 inset ${(e.vars||e).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(e.vars||e).palette.divider}`,[`& .${l0.indicator}`]:{bottom:"auto",top:0}}})),gW=function(t){const o=gn({props:t,name:"MuiDateTimePickerTabs"}),{dateIcon:l=he.jsx(cW,{}),onViewChange:h,timeIcon:p=he.jsx(uW,{}),view:_,hidden:a=typeof window>"u"||window.innerHeight<667}=o,w=Zs(),C=fW(o),M=(D,R)=>{h(pW(R))};return a?null:he.jsxs(mW,{ownerState:o,variant:"fullWidth",value:hW(_),onChange:M,className:C.root,children:[he.jsx(iP,{value:"date","aria-label":w.dateTableLabel,icon:he.jsx(W.Fragment,{children:l})}),he.jsx(iP,{value:"time","aria-label":w.timeTableLabel,icon:he.jsx(W.Fragment,{children:p})})]})};function yW(e){return Sn("MuiPickersToolbarText",e)}const lP=_n("MuiPickersToolbarText",["root","selected"]),_W=["className","selected","value"],vW=e=>{const{classes:t,selected:o}=e;return xn({root:["root",o&&"selected"]},yW,t)},xW=dt(Qa,{name:"MuiPickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${lP.selected}`]:t.selected}]})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,[`&.${lP.selected}`]:{color:(e.vars||e).palette.text.primary}})),Y4=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiPickersToolbarText"}),{className:h,value:p}=l,_=Bt(l,_W),a=vW(l);return he.jsx(xW,H({ref:o,className:Zt(h,a.root),component:"span"},_,{children:p}))}),bW=W.createContext(),cP=bW;function wW(e){return Sn("MuiGrid",e)}const SW=[0,1,2,3,4,5,6,7,8,9,10],TW=["column-reverse","column","row-reverse","row"],CW=["nowrap","wrap-reverse","wrap"],Cf=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],EW=_n("MuiGrid",["root","container","item","zeroMinWidth",...SW.map(e=>`spacing-xs-${e}`),...TW.map(e=>`direction-xs-${e}`),...CW.map(e=>`wrap-xs-${e}`),...Cf.map(e=>`grid-xs-${e}`),...Cf.map(e=>`grid-sm-${e}`),...Cf.map(e=>`grid-md-${e}`),...Cf.map(e=>`grid-lg-${e}`),...Cf.map(e=>`grid-xl-${e}`)]),Em=EW,kW=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function oh(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function PW({theme:e,ownerState:t}){let o;return e.breakpoints.keys.reduce((l,h)=>{let p={};if(t[h]&&(o=t[h]),!o)return l;if(o===!0)p={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(o==="auto")p={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const _=cu({values:t.columns,breakpoints:e.breakpoints.values}),a=typeof _=="object"?_[h]:_;if(a==null)return l;const w=`${Math.round(o/a*1e8)/1e6}%`;let C={};if(t.container&&t.item&&t.columnSpacing!==0){const M=e.spacing(t.columnSpacing);if(M!=="0px"){const D=`calc(${w} + ${oh(M)})`;C={flexBasis:D,maxWidth:D}}}p=H({flexBasis:w,flexGrow:0,maxWidth:w},C)}return e.breakpoints.values[h]===0?Object.assign(l,p):l[e.breakpoints.up(h)]=p,l},{})}function MW({theme:e,ownerState:t}){const o=cu({values:t.direction,breakpoints:e.breakpoints.values});return Po({theme:e},o,l=>{const h={flexDirection:l};return l.indexOf("column")===0&&(h[`& > .${Em.item}`]={maxWidth:"none"}),h})}function K4({breakpoints:e,values:t}){let o="";Object.keys(t).forEach(h=>{o===""&&t[h]!==0&&(o=h)});const l=Object.keys(e).sort((h,p)=>e[h]-e[p]);return l.slice(0,l.indexOf(o))}function IW({theme:e,ownerState:t}){const{container:o,rowSpacing:l}=t;let h={};if(o&&l!==0){const p=cu({values:l,breakpoints:e.breakpoints.values});let _;typeof p=="object"&&(_=K4({breakpoints:e.breakpoints.values,values:p})),h=Po({theme:e},p,(a,w)=>{var C;const M=e.spacing(a);return M!=="0px"?{marginTop:`-${oh(M)}`,[`& > .${Em.item}`]:{paddingTop:oh(M)}}:(C=_)!=null&&C.includes(w)?{}:{marginTop:0,[`& > .${Em.item}`]:{paddingTop:0}}})}return h}function AW({theme:e,ownerState:t}){const{container:o,columnSpacing:l}=t;let h={};if(o&&l!==0){const p=cu({values:l,breakpoints:e.breakpoints.values});let _;typeof p=="object"&&(_=K4({breakpoints:e.breakpoints.values,values:p})),h=Po({theme:e},p,(a,w)=>{var C;const M=e.spacing(a);return M!=="0px"?{width:`calc(100% + ${oh(M)})`,marginLeft:`-${oh(M)}`,[`& > .${Em.item}`]:{paddingLeft:oh(M)}}:(C=_)!=null&&C.includes(w)?{}:{width:"100%",marginLeft:0,[`& > .${Em.item}`]:{paddingLeft:0}}})}return h}function DW(e,t,o={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[o[`spacing-xs-${String(e)}`]];const l=[];return t.forEach(h=>{const p=e[h];Number(p)>0&&l.push(o[`spacing-${h}-${String(p)}`])}),l}const zW=dt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e,{container:l,direction:h,item:p,spacing:_,wrap:a,zeroMinWidth:w,breakpoints:C}=o;let M=[];l&&(M=DW(_,C,t));const D=[];return C.forEach(R=>{const $=o[R];$&&D.push(t[`grid-${R}-${String($)}`])}),[t.root,l&&t.container,p&&t.item,w&&t.zeroMinWidth,...M,h!=="row"&&t[`direction-xs-${String(h)}`],a!=="wrap"&&t[`wrap-xs-${String(a)}`],...D]}})(({ownerState:e})=>H({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),MW,IW,AW,PW);function RW(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const o=[];return t.forEach(l=>{const h=e[l];if(Number(h)>0){const p=`spacing-${l}-${String(h)}`;o.push(p)}}),o}const LW=e=>{const{classes:t,container:o,direction:l,item:h,spacing:p,wrap:_,zeroMinWidth:a,breakpoints:w}=e;let C=[];o&&(C=RW(p,w));const M=[];w.forEach(R=>{const $=e[R];$&&M.push(`grid-${R}-${String($)}`)});const D={root:["root",o&&"container",h&&"item",a&&"zeroMinWidth",...C,l!=="row"&&`direction-xs-${String(l)}`,_!=="wrap"&&`wrap-xs-${String(_)}`,...M]};return xn(D,wW,t)},OW=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiGrid"}),{breakpoints:h}=_s(),p=L_(l),{className:_,columns:a,columnSpacing:w,component:C="div",container:M=!1,direction:D="row",item:R=!1,rowSpacing:$,spacing:j=0,wrap:B="wrap",zeroMinWidth:K=!1}=p,N=Bt(p,kW),U=$||j,G=w||j,Y=W.useContext(cP),Q=M?a||12:Y,re={},oe=H({},N);h.keys.forEach(ye=>{N[ye]!=null&&(re[ye]=N[ye],delete oe[ye])});const de=H({},p,{columns:Q,container:M,direction:D,item:R,rowSpacing:U,columnSpacing:G,wrap:B,zeroMinWidth:K,spacing:j},re,{breakpoints:h.keys}),ae=LW(de);return he.jsx(cP.Provider,{value:Q,children:he.jsx(zW,H({ownerState:de,className:Zt(ae.root,_),as:C,ref:o},oe))})}),BW=OW;function J4(e){return Sn("MuiPickersToolbar",e)}const FW=_n("MuiPickersToolbar",["root","content","penIconButton","penIconButtonLandscape"]),$W=e=>{const{classes:t,isLandscape:o}=e;return xn({root:["root"],content:["content"],penIconButton:["penIconButton",o&&"penIconButtonLandscape"]},J4,t)},NW=dt("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>H({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3)},t.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),UW=dt(BW,{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})(({ownerState:e})=>H({flex:1},!e.isLandscape&&{alignItems:"center"})),VW=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiPickersToolbar"}),{children:h,className:p,isLandscape:_,landscapeDirection:a="column",toolbarTitle:w,hidden:C,titleId:M}=l,D=l,R=$W(D);return C?null:he.jsxs(NW,{ref:o,className:Zt(R.root,p),ownerState:D,children:[he.jsx(Qa,{color:"text.secondary",variant:"overline",id:M,children:w}),he.jsx(UW,{container:!0,justifyContent:_?"flex-start":"space-between",className:R.content,ownerState:D,direction:_?a:"row",alignItems:_?"flex-start":"flex-end",children:h})]})});function jW(e){return Sn("MuiButton",e)}const WW=_n("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),By=WW,GW=W.createContext({}),HW=GW,qW=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],ZW=e=>{const{color:t,disableElevation:o,fullWidth:l,size:h,variant:p,classes:_}=e,a={root:["root",p,`${p}${tn(t)}`,`size${tn(h)}`,`${p}Size${tn(h)}`,t==="inherit"&&"colorInherit",o&&"disableElevation",l&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${tn(h)}`],endIcon:["endIcon",`iconSize${tn(h)}`]},w=xn(a,jW,_);return H({},_,w)},Q4=e=>H({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),XW=dt(el,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`${o.variant}${tn(o.color)}`],t[`size${tn(o.size)}`],t[`${o.variant}Size${tn(o.size)}`],o.color==="inherit"&&t.colorInherit,o.disableElevation&&t.disableElevation,o.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var o,l;const h=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],p=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return H({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":H({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:p,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":H({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${By.focusVisible}`]:H({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${By.disabled}`]:H({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${Jn(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(o=(l=e.palette).getContrastText)==null?void 0:o.call(l,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:h,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${By.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${By.disabled}`]:{boxShadow:"none"}}),YW=dt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.startIcon,t[`iconSize${tn(o.size)}`]]}})(({ownerState:e})=>H({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},Q4(e))),KW=dt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.endIcon,t[`iconSize${tn(o.size)}`]]}})(({ownerState:e})=>H({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},Q4(e))),JW=W.forwardRef(function(t,o){const l=W.useContext(HW),h=Ww(l,t),p=gn({props:h,name:"MuiButton"}),{children:_,color:a="primary",component:w="button",className:C,disabled:M=!1,disableElevation:D=!1,disableFocusRipple:R=!1,endIcon:$,focusVisibleClassName:j,fullWidth:B=!1,size:K="medium",startIcon:N,type:U,variant:G="text"}=p,Y=Bt(p,qW),Q=H({},p,{color:a,component:w,disabled:M,disableElevation:D,disableFocusRipple:R,fullWidth:B,size:K,type:U,variant:G}),re=ZW(Q),oe=N&&he.jsx(YW,{className:re.startIcon,ownerState:Q,children:N}),de=$&&he.jsx(KW,{className:re.endIcon,ownerState:Q,children:$});return he.jsxs(XW,H({ownerState:Q,className:Zt(l.className,re.root,C),component:w,disabled:M,focusRipple:!R,focusVisibleClassName:Zt(re.focusVisible,j),ref:o,type:U},Y,{classes:re,children:[oe,_,de]}))}),Rf=JW,QW=["align","className","selected","typographyClassName","value","variant","width"],eG=e=>{const{classes:t}=e;return xn({root:["root"]},J4,t)},tG=dt(Rf,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),Ol=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiPickersToolbarButton"}),{align:h,className:p,selected:_,typographyClassName:a,value:w,variant:C,width:M}=l,D=Bt(l,QW),R=eG(l);return he.jsx(tG,H({variant:"text",ref:o,className:Zt(p,R.root)},M?{sx:{width:M}}:{},D,{children:he.jsx(Y4,{align:h,className:a,variant:C,value:w,selected:_})}))});function nG(e){return Sn("MuiDateTimePickerToolbar",e)}const I1=_n("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]);function rG(e,{disableFuture:t,maxDate:o,timezone:l}){const h=kr();return W.useMemo(()=>{const p=h.dateWithTimezone(void 0,l),_=h.startOfMonth(t&&h.isBefore(p,o)?p:o);return!h.isAfter(_,e)},[t,o,e,h,l])}function iG(e,{disablePast:t,minDate:o,timezone:l}){const h=kr();return W.useMemo(()=>{const p=h.dateWithTimezone(void 0,l),_=h.startOfMonth(t&&h.isAfter(p,o)?p:o);return!h.isBefore(_,e)},[t,o,e,h,l])}function B2(e,t,o,l){const h=kr(),p=PV(e,h),_=W.useCallback(a=>{const w=e==null?null:MV(e,a,!!t,h);o(w,l??"partial")},[t,e,o,l,h]);return{meridiemMode:p,handleMeridiemChange:_}}const km=36,cv=2,eA=320,tA=358,oG=232,Lf=48,sG=["ampm","ampmInClock","value","onChange","view","isLandscape","onViewChange","toolbarFormat","toolbarPlaceholder","views","disabled","readOnly","toolbarVariant"],aG=e=>{const{classes:t,theme:o,isLandscape:l}=e,h={root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",o.direction==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",o.direction==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",l&&"ampmLandscape"],ampmLabel:["ampmLabel"]};return xn(h,nG,t)},nA=dt(VW,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>({paddingLeft:t.toolbarVariant==="desktop"&&!t.isLandscape?24:16,paddingRight:t.toolbarVariant==="desktop"&&!t.isLandscape?0:16,borderBottom:t.toolbarVariant==="desktop"?`1px solid ${(e.vars||e).palette.divider}`:void 0,borderRight:t.toolbarVariant==="desktop"&&t.isLandscape?`1px solid ${(e.vars||e).palette.divider}`:void 0,justifyContent:"space-around",position:"relative",[`& .${FW.penIconButton}`]:H({position:"absolute",top:8},e.direction==="rtl"?{left:8}:{right:8})}));nA.propTypes={as:$e.elementType,classes:$e.object,className:$e.string,isLandscape:$e.bool.isRequired,isMobileKeyboardViewOpen:$e.bool,landscapeDirection:$e.oneOf(["column","row"]),ownerState:$e.object.isRequired,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object]),toggleMobileKeyboardView:$e.func,toolbarTitle:$e.node,viewType:$e.oneOf(["date","time"])};const lG=dt("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(e,t)=>t.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),rA=dt("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(e,t)=>t.timeContainer})(({theme:e,ownerState:t})=>{const o=t.isLandscape&&t.toolbarVariant!=="desktop"?"column":"row";return H({display:"flex",flexDirection:o},t.toolbarVariant==="desktop"&&H({},!t.isLandscape&&{gap:9,marginRight:4,alignSelf:"flex-end"}),e.direction==="rtl"&&{flexDirection:`${o}-reverse`})}),cG=dt("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",overridesResolver:(e,t)=>t.timeDigitsContainer})(({theme:e,ownerState:t})=>H({display:"flex"},t.toolbarVariant==="desktop"&&{gap:1.5},e.direction==="rtl"&&{flexDirection:"row-reverse"}));rA.propTypes={as:$e.elementType,ownerState:$e.object.isRequired,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object])};const uP=dt(Y4,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})(({ownerState:e})=>({margin:e.toolbarVariant==="desktop"?0:"0 4px 0 2px",cursor:"default"})),uG=dt("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,t)=>[{[`.${I1.ampmLabel}`]:t.ampmLabel},{[`&.${I1.ampmLandscape}`]:t.ampmLandscape},t.ampmSelection]})(({ownerState:e})=>H({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12},e.isLandscape&&{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"},{[`& .${I1.ampmLabel}`]:{fontSize:17}}));function dG(e){const t=gn({props:e,name:"MuiDateTimePickerToolbar"}),{ampm:o,ampmInClock:l,value:h,onChange:p,view:_,isLandscape:a,onViewChange:w,toolbarFormat:C,toolbarPlaceholder:M="––",views:D,disabled:R,readOnly:$,toolbarVariant:j="mobile"}=t,B=Bt(t,sG),K=t,N=kr(),{meridiemMode:U,handleMeridiemChange:G}=B2(h,o,p),Y=!!(o&&!l),Q=j==="desktop",re=Zs(),oe=_s(),de=aG(H({},K,{theme:oe})),ae=Ce=>o?N.format(Ce,"hours12h"):N.format(Ce,"hours24h"),ye=W.useMemo(()=>h?C?N.formatByString(h,C):N.format(h,"shortDate"):M,[h,C,M,N]);return he.jsxs(nA,H({toolbarTitle:re.dateTimePickerToolbarTitle,isLandscape:a,className:de.root},B,{ownerState:K,children:[he.jsxs(lG,{className:de.dateContainer,ownerState:K,children:[D.includes("year")&&he.jsx(Ol,{tabIndex:-1,variant:"subtitle1",onClick:()=>w("year"),selected:_==="year",value:h?N.format(h,"year"):"–"}),D.includes("day")&&he.jsx(Ol,{tabIndex:-1,variant:Q?"h5":"h4",onClick:()=>w("day"),selected:_==="day",value:ye})]}),he.jsxs(rA,{className:de.timeContainer,ownerState:K,children:[he.jsxs(cG,{className:de.timeDigitsContainer,ownerState:K,children:[D.includes("hours")&&he.jsx(Ol,{variant:Q?"h5":"h3",width:Q&&!a?Lf:void 0,onClick:()=>w("hours"),selected:_==="hours",value:h?ae(h):"--"}),D.includes("minutes")&&he.jsxs(W.Fragment,{children:[he.jsx(uP,{variant:Q?"h5":"h3",value:":",className:de.separator,ownerState:K}),he.jsx(Ol,{variant:Q?"h5":"h3",width:Q&&!a?Lf:void 0,onClick:()=>w("minutes"),selected:_==="minutes",value:h?N.format(h,"minutes"):"--"})]}),D.includes("seconds")&&he.jsxs(W.Fragment,{children:[he.jsx(uP,{variant:Q?"h5":"h3",value:":",className:de.separator,ownerState:K}),he.jsx(Ol,{variant:Q?"h5":"h3",width:Q&&!a?Lf:void 0,onClick:()=>w("seconds"),selected:_==="seconds",value:h?N.format(h,"seconds"):"--"})]})]}),Y&&!Q&&he.jsxs(uG,{className:de.ampmSelection,ownerState:K,children:[he.jsx(Ol,{variant:"subtitle2",selected:U==="am",typographyClassName:de.ampmLabel,value:N.getMeridiemText("am"),onClick:$?void 0:()=>G("am"),disabled:R}),he.jsx(Ol,{variant:"subtitle2",selected:U==="pm",typographyClassName:de.ampmLabel,value:N.getMeridiemText("pm"),onClick:$?void 0:()=>G("pm"),disabled:R})]}),o&&Q&&he.jsx(Ol,{variant:"h5",onClick:()=>w("meridiem"),selected:_==="meridiem",value:h&&U?N.getMeridiemText(U):"--",width:Lf})]})]}))}const F2=e=>{if(e!==void 0)return Object.keys(e).reduce((t,o)=>H({},t,{[`${o.slice(0,1).toLowerCase()}${o.slice(1)}`]:e[o]}),{})};function iA(e,t){var o,l,h,p,_,a,w,C,M,D,R;const $=kr(),j=Vm(),B=gn({props:e,name:t}),K=(o=B.ampm)!=null?o:$.is12HourCycleInCurrentLocale(),N=W.useMemo(()=>{var Y;return((Y=B.localeText)==null?void 0:Y.toolbarTitle)==null?B.localeText:H({},B.localeText,{dateTimePickerToolbarTitle:B.localeText.toolbarTitle})},[B.localeText]),U=(l=B.slots)!=null?l:F2(B.components),G=(h=B.slotProps)!=null?h:B.componentsProps;return H({},B,TV({views:B.views,openTo:B.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{ampm:K,localeText:N,orientation:(p=B.orientation)!=null?p:"portrait",disableIgnoringDatePartForTimeValidation:(_=B.disableIgnoringDatePartForTimeValidation)!=null?_:!!(B.minDateTime||B.maxDateTime||B.disablePast||B.disableFuture),disableFuture:(a=B.disableFuture)!=null?a:!1,disablePast:(w=B.disablePast)!=null?w:!1,minDate:gs($,(C=B.minDateTime)!=null?C:B.minDate,j.minDate),maxDate:gs($,(M=B.maxDateTime)!=null?M:B.maxDate,j.maxDate),minTime:(D=B.minDateTime)!=null?D:B.minTime,maxTime:(R=B.maxDateTime)!=null?R:B.maxTime,slots:H({toolbar:dG,tabs:gW},U),slotProps:H({},G,{toolbar:H({ampm:K},G==null?void 0:G.toolbar)})})}const oA=({shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:o,minDate:l,maxDate:h,disableFuture:p,disablePast:_,timezone:a})=>{const w=Tu();return W.useCallback(C=>H4({adapter:w,value:C,props:{shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:o,minDate:l,maxDate:h,disableFuture:p,disablePast:_,timezone:a}})!==null,[w,e,t,o,l,h,p,_,a])},hG=(e,t,o)=>(l,h)=>{switch(h.type){case"changeMonth":return H({},l,{slideDirection:h.direction,currentMonth:h.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return H({},l,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(l.focusedDay!=null&&h.focusedDay!=null&&o.isSameDay(h.focusedDay,l.focusedDay))return l;const p=h.focusedDay!=null&&!t&&!o.isSameMonth(l.currentMonth,h.focusedDay);return H({},l,{focusedDay:h.focusedDay,isMonthSwitchingAnimating:p&&!e&&!h.withoutMonthSwitchingAnimation,currentMonth:p?o.startOfMonth(h.focusedDay):l.currentMonth,slideDirection:h.focusedDay!=null&&o.isAfterDay(h.focusedDay,l.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},pG=e=>{const{value:t,referenceDate:o,defaultCalendarMonth:l,disableFuture:h,disablePast:p,disableSwitchToMonthOnDayFocus:_=!1,maxDate:a,minDate:w,onMonthChange:C,reduceAnimations:M,shouldDisableDate:D,timezone:R}=e,$=Cu(R),j=kr(),B=W.useRef(hG(!!M,_,j)).current,K=W.useMemo(()=>{let de=null;return o?de=o:l&&(de=j.startOfMonth(l)),qs.getInitialReferenceValue({value:t,utils:j,timezone:R,props:e,referenceDate:de,granularity:da.day})},[]),[N,U]=W.useReducer(B,{isMonthSwitchingAnimating:!1,focusedDay:t||$,currentMonth:j.startOfMonth(K),slideDirection:"left"}),G=W.useCallback(de=>{U(H({type:"changeMonth"},de)),C&&C(de.newMonth)},[C]),Y=W.useCallback(de=>{const ae=de;j.isSameMonth(ae,N.currentMonth)||G({newMonth:j.startOfMonth(ae),direction:j.isAfterDay(ae,N.currentMonth)?"left":"right"})},[N.currentMonth,G,j]),Q=oA({shouldDisableDate:D,minDate:w,maxDate:a,disableFuture:h,disablePast:p,timezone:R}),re=W.useCallback(()=>{U({type:"finishMonthSwitchingAnimation"})},[]),oe=mn((de,ae)=>{Q(de)||U({type:"changeFocusedDay",focusedDay:de,withoutMonthSwitchingAnimation:ae})});return{referenceDate:K,calendarState:N,changeMonth:Y,changeFocusedDay:oe,isDateDisabled:Q,onMonthSwitchingAnimationEnd:re,handleChangeMonth:G}},fG=e=>Sn("MuiPickersFadeTransitionGroup",e);_n("MuiPickersFadeTransitionGroup",["root"]);const mG=e=>{const{classes:t}=e;return xn({root:["root"]},fG,t)},dP=500,gG=dt(P2,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"});function sA(e){const t=gn({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:o,className:l,reduceAnimations:h,transKey:p}=t,_=mG(t);return h?o:he.jsx(gG,{className:Zt(_.root,l),children:he.jsx(Um,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:dP,enter:dP/2,exit:0},children:o},p)})}function yG(e){return Sn("MuiPickersDay",e)}const Xc=_n("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),_G=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],vG=e=>{const{selected:t,disableMargin:o,disableHighlightToday:l,today:h,disabled:p,outsideCurrentMonth:_,showDaysOutsideCurrentMonth:a,classes:w}=e;return xn({root:["root",t&&"selected",p&&"disabled",!o&&"dayWithMargin",!l&&h&&"today",_&&a&&"dayOutsideMonth",_&&!a&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},yG,w)},aA=({theme:e,ownerState:t})=>H({},e.typography.caption,{width:km,height:km,borderRadius:"50%",padding:0,backgroundColor:"transparent",color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:Jn(e.palette.primary.main,e.palette.action.focusOpacity),[`&.${Xc.selected}`]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${Xc.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${Xc.disabled}:not(.${Xc.selected})`]:{color:(e.vars||e).palette.text.disabled},[`&.${Xc.disabled}&.${Xc.selected}`]:{opacity:.6}},!t.disableMargin&&{margin:`0 ${cv}px`},t.outsideCurrentMonth&&t.showDaysOutsideCurrentMonth&&{color:(e.vars||e).palette.text.secondary},!t.disableHighlightToday&&t.today&&{[`&:not(.${Xc.selected})`]:{border:`1px solid ${(e.vars||e).palette.text.secondary}`}}),lA=(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableMargin&&t.dayWithMargin,!o.disableHighlightToday&&o.today&&t.today,!o.outsideCurrentMonth&&o.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,o.outsideCurrentMonth&&!o.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},xG=dt(el,{name:"MuiPickersDay",slot:"Root",overridesResolver:lA})(aA),bG=dt("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:lA})(({theme:e,ownerState:t})=>H({},aA({theme:e,ownerState:t}),{opacity:0,pointerEvents:"none"})),Ef=()=>{},wG=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiPickersDay"}),{autoFocus:h=!1,className:p,day:_,disabled:a=!1,disableHighlightToday:w=!1,disableMargin:C=!1,isAnimating:M,onClick:D,onDaySelect:R,onFocus:$=Ef,onBlur:j=Ef,onKeyDown:B=Ef,onMouseDown:K=Ef,onMouseEnter:N=Ef,outsideCurrentMonth:U,selected:G=!1,showDaysOutsideCurrentMonth:Y=!1,children:Q,today:re=!1}=l,oe=Bt(l,_G),de=H({},l,{autoFocus:h,disabled:a,disableHighlightToday:w,disableMargin:C,selected:G,showDaysOutsideCurrentMonth:Y,today:re}),ae=vG(de),ye=kr(),Ce=W.useRef(null),Fe=Rr(Ce,o);ki(()=>{h&&!a&&!M&&!U&&Ce.current.focus()},[h,a,M,U]);const be=ue=>{K(ue),U&&ue.preventDefault()},we=ue=>{a||R(_),U&&ue.currentTarget.focus(),D&&D(ue)};return U&&!Y?he.jsx(bG,{className:Zt(ae.root,ae.hiddenDaySpacingFiller,p),ownerState:de,role:oe.role}):he.jsx(xG,H({className:Zt(ae.root,p),ref:Fe,centerRipple:!0,disabled:a,tabIndex:G?0:-1,onKeyDown:ue=>B(ue,_),onFocus:ue=>$(ue,_),onBlur:ue=>j(ue,_),onMouseEnter:ue=>N(ue,_),onClick:we,onMouseDown:be},oe,{ownerState:de,children:Q||ye.format(_,"dayOfMonth")}))}),SG=W.memo(wG),TG=e=>Sn("MuiPickersSlideTransition",e),is=_n("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),CG=["children","className","reduceAnimations","slideDirection","transKey","classes"],EG=e=>{const{classes:t,slideDirection:o}=e,l={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${o}`],exitActive:[`slideExitActiveLeft-${o}`]};return xn(l,TG,t)},cA=350,kG=dt(P2,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${is["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${is["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${is.slideEnterActive}`]:t.slideEnterActive},{[`.${is.slideExit}`]:t.slideExit},{[`.${is["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${is["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})(({theme:e})=>{const t=e.transitions.create("transform",{duration:cA,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${is["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${is["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${is.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${is.slideExit}`]:{transform:"translate(0%)"},[`& .${is["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${is["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}});function PG(e){const t=gn({props:e,name:"MuiPickersSlideTransition"}),{children:o,className:l,reduceAnimations:h,transKey:p}=t,_=Bt(t,CG),a=EG(t);if(h)return he.jsx("div",{className:Zt(a.root,l),children:o});const w={exit:a.exit,enterActive:a.enterActive,enter:a.enter,exitActive:a.exitActive};return he.jsx(kG,{className:Zt(a.root,l),childFactory:C=>W.cloneElement(C,{classNames:w}),role:"presentation",children:he.jsx(LN,H({mountOnEnter:!0,unmountOnExit:!0,timeout:cA,classNames:w},_,{children:o}),p)})}const MG=e=>Sn("MuiDayCalendar",e);_n("MuiDayCalendar",["header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const IG=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],AG=["ownerState"],DG=e=>{const{classes:t}=e;return xn({header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},MG,t)},zG=e=>e.charAt(0).toUpperCase(),uA=(km+cv*2)*6,RG=dt("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),LG=dt(Qa,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),OG=dt(Qa,{name:"MuiDayPicker",slot:"WeekNumberLabel",overridesResolver:(e,t)=>t.weekNumberLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.disabled})),BG=dt(Qa,{name:"MuiDayPicker",slot:"WeekNumber",overridesResolver:(e,t)=>t.weekNumber})(({theme:e})=>H({},e.typography.caption,{width:km,height:km,padding:0,margin:`0 ${cv}px`,color:e.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),FG=dt("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:uA}),$G=dt(PG,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:uA}),NG=dt("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),UG=dt("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:`${cv}px 0`,display:"flex",justifyContent:"center"});function VG(e){var t,o,l;let{parentProps:h,day:p,focusableDay:_,selectedDays:a,isDateDisabled:w,currentMonthNumber:C,isViewFocused:M}=e,D=Bt(e,IG);const{disabled:R,disableHighlightToday:$,isMonthSwitchingAnimating:j,showDaysOutsideCurrentMonth:B,components:K,componentsProps:N,slots:U,slotProps:G,timezone:Y}=h,Q=kr(),re=Cu(Y),oe=_!==null&&Q.isSameDay(p,_),de=a.some(Ae=>Q.isSameDay(Ae,p)),ae=Q.isSameDay(p,re),ye=(t=(o=U==null?void 0:U.day)!=null?o:K==null?void 0:K.Day)!=null?t:SG,Ce=$r({elementType:ye,externalSlotProps:(l=G==null?void 0:G.day)!=null?l:N==null?void 0:N.day,additionalProps:H({disableHighlightToday:$,showDaysOutsideCurrentMonth:B,role:"gridcell",isAnimating:j,"data-timestamp":Q.toJsDate(p).valueOf()},D),ownerState:H({},h,{day:p,selected:de})}),Fe=Bt(Ce,AG),be=W.useMemo(()=>R||w(p),[R,w,p]),we=W.useMemo(()=>Q.getMonth(p)!==C,[Q,p,C]),ue=W.useMemo(()=>{const Ae=Q.startOfMonth(Q.setMonth(p,C));return B?Q.isSameDay(p,Q.startOfWeek(Ae)):Q.isSameDay(p,Ae)},[C,p,B,Q]),Be=W.useMemo(()=>{const Ae=Q.endOfMonth(Q.setMonth(p,C));return B?Q.isSameDay(p,Q.endOfWeek(Ae)):Q.isSameDay(p,Ae)},[C,p,B,Q]);return he.jsx(ye,H({},Fe,{day:p,disabled:be,autoFocus:M&&oe,today:ae,outsideCurrentMonth:we,isFirstVisibleCell:ue,isLastVisibleCell:Be,selected:de,tabIndex:oe?0:-1,"aria-selected":de,"aria-current":ae?"date":void 0}))}function jG(e){const t=gn({props:e,name:"MuiDayCalendar"}),{onFocusedDayChange:o,className:l,currentMonth:h,selectedDays:p,focusedDay:_,loading:a,onSelectedDaysChange:w,onMonthSwitchingAnimationEnd:C,readOnly:M,reduceAnimations:D,renderLoading:R=()=>he.jsx("span",{children:"..."}),slideDirection:$,TransitionProps:j,disablePast:B,disableFuture:K,minDate:N,maxDate:U,shouldDisableDate:G,shouldDisableMonth:Y,shouldDisableYear:Q,dayOfWeekFormatter:re=zG,hasFocus:oe,onFocusedViewChange:de,gridLabelId:ae,displayWeekNumber:ye,fixedWeekNumber:Ce,autoFocus:Fe,timezone:be}=t,we=Cu(be),ue=kr(),Be=DG(t),Se=_s().direction==="rtl",ke=oA({shouldDisableDate:G,shouldDisableMonth:Y,shouldDisableYear:Q,minDate:N,maxDate:U,disablePast:B,disableFuture:K,timezone:be}),Ne=Zs(),[nt,vt]=Uo({name:"DayCalendar",state:"hasFocus",controlled:oe,default:Fe??!1}),[gt,rt]=W.useState(()=>_||we),xt=mn(lt=>{M||w(lt)}),ht=lt=>{ke(lt)||(o(lt),rt(lt),de==null||de(!0),vt(!0))},mt=mn((lt,jt)=>{switch(lt.key){case"ArrowUp":ht(ue.addDays(jt,-7)),lt.preventDefault();break;case"ArrowDown":ht(ue.addDays(jt,7)),lt.preventDefault();break;case"ArrowLeft":{const Ut=ue.addDays(jt,Se?1:-1),$t=ue.addMonths(jt,Se?1:-1),Lt=Kf({utils:ue,date:Ut,minDate:Se?Ut:ue.startOfMonth($t),maxDate:Se?ue.endOfMonth($t):Ut,isDateDisabled:ke,timezone:be});ht(Lt||Ut),lt.preventDefault();break}case"ArrowRight":{const Ut=ue.addDays(jt,Se?-1:1),$t=ue.addMonths(jt,Se?-1:1),Lt=Kf({utils:ue,date:Ut,minDate:Se?ue.startOfMonth($t):Ut,maxDate:Se?Ut:ue.endOfMonth($t),isDateDisabled:ke,timezone:be});ht(Lt||Ut),lt.preventDefault();break}case"Home":ht(ue.startOfWeek(jt)),lt.preventDefault();break;case"End":ht(ue.endOfWeek(jt)),lt.preventDefault();break;case"PageUp":ht(ue.addMonths(jt,1)),lt.preventDefault();break;case"PageDown":ht(ue.addMonths(jt,-1)),lt.preventDefault();break}}),Ot=mn((lt,jt)=>ht(jt)),Nt=mn((lt,jt)=>{nt&&ue.isSameDay(gt,jt)&&(de==null||de(!1))}),at=ue.getMonth(h),Je=W.useMemo(()=>p.filter(lt=>!!lt).map(lt=>ue.startOfDay(lt)),[ue,p]),it=at,St=W.useMemo(()=>W.createRef(),[it]),Gt=ue.startOfWeek(we),He=W.useMemo(()=>{const lt=ue.startOfMonth(h),jt=ue.endOfMonth(h);return ke(gt)||ue.isAfterDay(gt,jt)||ue.isBeforeDay(gt,lt)?Kf({utils:ue,date:gt,minDate:lt,maxDate:jt,disablePast:B,disableFuture:K,isDateDisabled:ke,timezone:be}):gt},[h,K,B,gt,ke,ue,be]),Vt=W.useMemo(()=>{const lt=ue.setTimezone(h,be),jt=ue.getWeekArray(lt);let Ut=ue.addMonths(lt,1);for(;Ce&&jt.length<Ce;){const $t=ue.getWeekArray(Ut),Lt=ue.isSameDay(jt[jt.length-1][0],$t[0][0]);$t.slice(Lt?1:0).forEach(un=>{jt.length<Ce&&jt.push(un)}),Ut=ue.addMonths(Ut,1)}return jt},[h,Ce,ue,be]);return he.jsxs("div",{role:"grid","aria-labelledby":ae,children:[he.jsxs(RG,{role:"row",className:Be.header,children:[ye&&he.jsx(OG,{variant:"caption",role:"columnheader","aria-label":Ne.calendarWeekNumberHeaderLabel,className:Be.weekNumberLabel,children:Ne.calendarWeekNumberHeaderText}),ue.getWeekdays().map((lt,jt)=>{var Ut;return he.jsx(LG,{variant:"caption",role:"columnheader","aria-label":ue.format(ue.addDays(Gt,jt),"weekday"),className:Be.weekDayLabel,children:(Ut=re==null?void 0:re(lt))!=null?Ut:lt},lt+jt.toString())})]}),a?he.jsx(FG,{className:Be.loadingContainer,children:R()}):he.jsx($G,H({transKey:it,onExited:C,reduceAnimations:D,slideDirection:$,className:Zt(l,Be.slideTransition)},j,{nodeRef:St,children:he.jsx(NG,{ref:St,role:"rowgroup",className:Be.monthContainer,children:Vt.map((lt,jt)=>he.jsxs(UG,{role:"row",className:Be.weekContainer,"aria-rowindex":jt+1,children:[ye&&he.jsx(BG,{className:Be.weekNumber,role:"rowheader","aria-label":Ne.calendarWeekNumberAriaLabelText(ue.getWeekNumber(lt[0])),children:Ne.calendarWeekNumberText(ue.getWeekNumber(lt[0]))}),lt.map((Ut,$t)=>he.jsx(VG,{parentProps:t,day:Ut,selectedDays:Je,focusableDay:He,onKeyDown:mt,onFocus:Ot,onBlur:Nt,onDaySelect:xt,isDateDisabled:ke,currentMonthNumber:at,isViewFocused:nt,"aria-colindex":$t+1},Ut.toString()))]},`week-${lt[0]}`))})}))]})}function WG(e){return Sn("MuiPickersMonth",e)}const Fy=_n("MuiPickersMonth",["root","monthButton","disabled","selected"]),GG=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","monthsPerRow"],HG=e=>{const{disabled:t,selected:o,classes:l}=e;return xn({root:["root"],monthButton:["monthButton",t&&"disabled",o&&"selected"]},WG,l)},qG=dt("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root]})(({ownerState:e})=>({flexBasis:e.monthsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),ZG=dt("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,t)=>[t.monthButton,{[`&.${Fy.disabled}`]:t.disabled},{[`&.${Fy.selected}`]:t.selected}]})(({theme:e})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Fy.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${Fy.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),XG=W.memo(function(t){const o=gn({props:t,name:"MuiPickersMonth"}),{autoFocus:l,children:h,disabled:p,value:_,tabIndex:a,onClick:w,onKeyDown:C,onFocus:M,onBlur:D,"aria-current":R}=o,$=Bt(o,GG),j=W.useRef(null),B=HG(o);return ki(()=>{if(l){var K;(K=j.current)==null||K.focus()}},[l]),he.jsx(qG,H({className:B.root,ownerState:o},$,{children:he.jsx(ZG,{ref:j,disabled:p,type:"button",tabIndex:p?-1:a,"aria-current":R,onClick:K=>w(K,_),onKeyDown:K=>C(K,_),onFocus:K=>M(K,_),onBlur:K=>D(K,_),className:B.monthButton,ownerState:o,children:h})}))});function YG(e){return Sn("MuiMonthCalendar",e)}_n("MuiMonthCalendar",["root"]);const KG=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone"],JG=e=>{const{classes:t}=e;return xn({root:["root"]},YG,t)};function QG(e,t){const o=kr(),l=Vm(),h=gn({props:e,name:t});return H({disableFuture:!1,disablePast:!1},h,{minDate:gs(o,h.minDate,l.minDate),maxDate:gs(o,h.maxDate,l.maxDate)})}const eH=dt("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:320}),tH=W.forwardRef(function(t,o){const l=QG(t,"MuiMonthCalendar"),{className:h,value:p,defaultValue:_,referenceDate:a,disabled:w,disableFuture:C,disablePast:M,maxDate:D,minDate:R,onChange:$,shouldDisableMonth:j,readOnly:B,disableHighlightToday:K,autoFocus:N=!1,onMonthFocus:U,hasFocus:G,onFocusedViewChange:Y,monthsPerRow:Q=3,timezone:re}=l,oe=Bt(l,KG),{value:de,handleValueChange:ae,timezone:ye}=jm({name:"MonthCalendar",timezone:re,value:p,defaultValue:_,onChange:$,valueManager:qs}),Ce=Cu(ye),Fe=Ph(),be=kr(),we=W.useMemo(()=>qs.getInitialReferenceValue({value:de,utils:be,props:l,timezone:ye,referenceDate:a,granularity:da.month}),[]),ue=l,Be=JG(ue),Ae=W.useMemo(()=>be.getMonth(Ce),[be,Ce]),Se=W.useMemo(()=>de!=null?be.getMonth(de):K?null:be.getMonth(we),[de,be,K,we]),[ke,Ne]=W.useState(()=>Se||Ae),[nt,vt]=Uo({name:"MonthCalendar",state:"hasFocus",controlled:G,default:N??!1}),gt=mn(at=>{vt(at),Y&&Y(at)}),rt=W.useCallback(at=>{const Je=be.startOfMonth(M&&be.isAfter(Ce,R)?Ce:R),it=be.startOfMonth(C&&be.isBefore(Ce,D)?Ce:D),St=be.startOfMonth(at);return be.isBefore(St,Je)||be.isAfter(St,it)?!0:j?j(St):!1},[C,M,D,R,Ce,j,be]),xt=mn((at,Je)=>{if(B)return;const it=be.setMonth(de??we,Je);ae(it)}),ht=mn(at=>{rt(be.setMonth(de??we,at))||(Ne(at),gt(!0),U&&U(at))});W.useEffect(()=>{Ne(at=>Se!==null&&at!==Se?Se:at)},[Se]);const mt=mn((at,Je)=>{switch(at.key){case"ArrowUp":ht((12+Je-3)%12),at.preventDefault();break;case"ArrowDown":ht((12+Je+3)%12),at.preventDefault();break;case"ArrowLeft":ht((12+Je+(Fe.direction==="ltr"?-1:1))%12),at.preventDefault();break;case"ArrowRight":ht((12+Je+(Fe.direction==="ltr"?1:-1))%12),at.preventDefault();break}}),Ot=mn((at,Je)=>{ht(Je)}),Nt=mn((at,Je)=>{ke===Je&&gt(!1)});return he.jsx(eH,H({ref:o,className:Zt(Be.root,h),ownerState:ue},oe,{children:D2(be,de??we).map(at=>{const Je=be.getMonth(at),it=be.format(at,"monthShort"),St=Je===Se,Gt=w||rt(at);return he.jsx(XG,{selected:St,value:Je,onClick:xt,onKeyDown:mt,autoFocus:nt&&Je===ke,disabled:Gt,tabIndex:Je===ke?0:-1,onFocus:Ot,onBlur:Nt,"aria-current":Ae===Je?"date":void 0,monthsPerRow:Q,children:it},it)})}))});function nH(e){return Sn("MuiPickersYear",e)}const $y=_n("MuiPickersYear",["root","yearButton","selected","disabled"]),rH=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],iH=e=>{const{disabled:t,selected:o,classes:l}=e;return xn({root:["root"],yearButton:["yearButton",t&&"disabled",o&&"selected"]},nH,l)},oH=dt("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root]})(({ownerState:e})=>({flexBasis:e.yearsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),sH=dt("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,t)=>[t.yearButton,{[`&.${$y.disabled}`]:t.disabled},{[`&.${$y.selected}`]:t.selected}]})(({theme:e})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.focusOpacity})`:Jn(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${$y.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${$y.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),aH=W.memo(function(t){const o=gn({props:t,name:"MuiPickersYear"}),{autoFocus:l,className:h,children:p,disabled:_,value:a,tabIndex:w,onClick:C,onKeyDown:M,onFocus:D,onBlur:R,"aria-current":$}=o,j=Bt(o,rH),B=W.useRef(null),K=iH(o);return W.useEffect(()=>{l&&B.current.focus()},[l]),he.jsx(oH,H({className:Zt(K.root,h),ownerState:o},j,{children:he.jsx(sH,{ref:B,disabled:_,type:"button",tabIndex:_?-1:w,"aria-current":$,onClick:N=>C(N,a),onKeyDown:N=>M(N,a),onFocus:N=>D(N,a),onBlur:N=>R(N,a),className:K.yearButton,ownerState:o,children:p})}))});function lH(e){return Sn("MuiYearCalendar",e)}_n("MuiYearCalendar",["root"]);const cH=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone"],uH=e=>{const{classes:t}=e;return xn({root:["root"]},lH,t)};function dH(e,t){const o=kr(),l=Vm(),h=gn({props:e,name:t});return H({disablePast:!1,disableFuture:!1},h,{minDate:gs(o,h.minDate,l.minDate),maxDate:gs(o,h.maxDate,l.maxDate)})}const hH=dt("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:320,maxHeight:304}),pH=W.forwardRef(function(t,o){const l=dH(t,"MuiYearCalendar"),{autoFocus:h,className:p,value:_,defaultValue:a,referenceDate:w,disabled:C,disableFuture:M,disablePast:D,maxDate:R,minDate:$,onChange:j,readOnly:B,shouldDisableYear:K,disableHighlightToday:N,onYearFocus:U,hasFocus:G,onFocusedViewChange:Y,yearsPerRow:Q=3,timezone:re}=l,oe=Bt(l,cH),{value:de,handleValueChange:ae,timezone:ye}=jm({name:"YearCalendar",timezone:re,value:_,defaultValue:a,onChange:j,valueManager:qs}),Ce=Cu(ye),Fe=Ph(),be=kr(),we=W.useMemo(()=>qs.getInitialReferenceValue({value:de,utils:be,props:l,timezone:ye,referenceDate:w,granularity:da.year}),[]),ue=l,Be=uH(ue),Ae=W.useMemo(()=>be.getYear(Ce),[be,Ce]),Se=W.useMemo(()=>de!=null?be.getYear(de):N?null:be.getYear(we),[de,be,N,we]),[ke,Ne]=W.useState(()=>Se||Ae),[nt,vt]=Uo({name:"YearCalendar",state:"hasFocus",controlled:G,default:h??!1}),gt=mn(it=>{vt(it),Y&&Y(it)}),rt=W.useCallback(it=>{if(D&&be.isBeforeYear(it,Ce)||M&&be.isAfterYear(it,Ce)||$&&be.isBeforeYear(it,$)||R&&be.isAfterYear(it,R))return!0;if(!K)return!1;const St=be.startOfYear(it);return K(St)},[M,D,R,$,Ce,K,be]),xt=mn((it,St)=>{if(B)return;const Gt=be.setYear(de??we,St);ae(Gt)}),ht=mn(it=>{rt(be.setYear(de??we,it))||(Ne(it),gt(!0),U==null||U(it))});W.useEffect(()=>{Ne(it=>Se!==null&&it!==Se?Se:it)},[Se]);const mt=mn((it,St)=>{switch(it.key){case"ArrowUp":ht(St-Q),it.preventDefault();break;case"ArrowDown":ht(St+Q),it.preventDefault();break;case"ArrowLeft":ht(St+(Fe.direction==="ltr"?-1:1)),it.preventDefault();break;case"ArrowRight":ht(St+(Fe.direction==="ltr"?1:-1)),it.preventDefault();break}}),Ot=mn((it,St)=>{ht(St)}),Nt=mn((it,St)=>{ke===St&&gt(!1)}),at=W.useRef(null),Je=Rr(o,at);return W.useEffect(()=>{if(h||at.current===null)return;const it=at.current.querySelector('[tabindex="0"]');if(!it)return;const St=it.offsetHeight,Gt=it.offsetTop,He=at.current.clientHeight,Vt=at.current.scrollTop,lt=Gt+St;St>He||Gt<Vt||(at.current.scrollTop=lt-He/2-St/2)},[h]),he.jsx(hH,H({ref:Je,className:Zt(Be.root,p),ownerState:ue},oe,{children:be.getYearRange($,R).map(it=>{const St=be.getYear(it),Gt=St===Se,He=C||rt(it);return he.jsx(aH,{selected:Gt,value:St,onClick:xt,onKeyDown:mt,autoFocus:nt&&St===ke,disabled:He,tabIndex:St===ke?0:-1,onFocus:Ot,onBlur:Nt,"aria-current":Ae===St?"date":void 0,yearsPerRow:Q,children:be.format(it,"year")},be.format(it,"year"))})}))});function uv({onChange:e,onViewChange:t,openTo:o,view:l,views:h,autoFocus:p,focusedView:_,onFocusedViewChange:a}){var w,C;const M=W.useRef(o),D=W.useRef(h),R=W.useRef(h.includes(o)?o:h[0]),[$,j]=Uo({name:"useViews",state:"view",controlled:l,default:R.current}),B=W.useRef(p?$:null),[K,N]=Uo({name:"useViews",state:"focusedView",controlled:_,default:B.current});W.useEffect(()=>{(M.current&&M.current!==o||D.current&&D.current.some(ye=>!h.includes(ye)))&&(j(h.includes(o)?o:h[0]),D.current=h,M.current=o)},[o,j,$,h]);const U=h.indexOf($),G=(w=h[U-1])!=null?w:null,Y=(C=h[U+1])!=null?C:null,Q=mn((ye,Ce)=>{N(Ce?ye:Fe=>ye===Fe?null:Fe),a==null||a(ye,Ce)}),re=mn(ye=>{ye!==$&&(j(ye),Q(ye,!0),t&&t(ye))}),oe=mn(()=>{Y&&re(Y),Q(Y,!0)}),de=mn((ye,Ce,Fe)=>{const be=Ce==="finish",we=Fe?h.indexOf(Fe)<h.length-1:!!Y;e(ye,be&&we?"partial":Ce),be&&oe()}),ae=mn((ye,Ce,Fe)=>{e(ye,Ce?"partial":"finish",Fe),Ce&&(re(Ce),Q(Ce,!0))});return{view:$,setView:re,focusedView:K,setFocusedView:Q,nextView:Y,previousView:G,defaultView:R.current,goToNextView:oe,setValueAndGoToNextView:de,setValueAndGoToView:ae}}function fH(e){return Sn("MuiIconButton",e)}const mH=_n("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),gH=mH,yH=["edge","children","className","color","disabled","disableFocusRipple","size"],_H=e=>{const{classes:t,disabled:o,color:l,edge:h,size:p}=e,_={root:["root",o&&"disabled",l!=="default"&&`color${tn(l)}`,h&&`edge${tn(h)}`,`size${tn(p)}`]};return xn(_,fH,t)},vH=dt(el,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="default"&&t[`color${tn(o.color)}`],o.edge&&t[`edge${tn(o.edge)}`],t[`size${tn(o.size)}`]]}})(({theme:e,ownerState:t})=>H({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var o;const l=(o=(e.vars||e).palette)==null?void 0:o[t.color];return H({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&H({color:l==null?void 0:l.main},!t.disableRipple&&{"&:hover":H({},l&&{backgroundColor:e.vars?`rgba(${l.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(l.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${gH.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),xH=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiIconButton"}),{edge:h=!1,children:p,className:_,color:a="default",disabled:w=!1,disableFocusRipple:C=!1,size:M="medium"}=l,D=Bt(l,yH),R=H({},l,{edge:h,color:a,disabled:w,disableFocusRipple:C,size:M}),$=_H(R);return he.jsx(vH,H({className:Zt($.root,_),centerRipple:!0,focusRipple:!C,disabled:w,ref:o,ownerState:R},D,{children:p}))}),Eu=xH;function bH(e){return Sn("MuiPickersArrowSwitcher",e)}_n("MuiPickersArrowSwitcher",["root","spacer","button"]);const wH=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],SH=["ownerState"],TH=["ownerState"],CH=dt("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),EH=dt("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})(({theme:e})=>({width:e.spacing(3)})),hP=dt(Eu,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>H({},e.hidden&&{visibility:"hidden"})),kH=e=>{const{classes:t}=e;return xn({root:["root"],spacer:["spacer"],button:["button"]},bH,t)},dA=W.forwardRef(function(t,o){var l,h,p,_;const w=_s().direction==="rtl",C=gn({props:t,name:"MuiPickersArrowSwitcher"}),{children:M,className:D,slots:R,slotProps:$,isNextDisabled:j,isNextHidden:B,onGoToNext:K,nextLabel:N,isPreviousDisabled:U,isPreviousHidden:G,onGoToPrevious:Y,previousLabel:Q}=C,re=Bt(C,wH),oe=C,de=kH(oe),ae={isDisabled:j,isHidden:B,goTo:K,label:N},ye={isDisabled:U,isHidden:G,goTo:Y,label:Q},[Ce,Fe]=w?[ae,ye]:[ye,ae],be=(l=R==null?void 0:R.previousIconButton)!=null?l:hP,we=$r({elementType:be,externalSlotProps:$==null?void 0:$.previousIconButton,additionalProps:{size:"medium",title:Ce.label,"aria-label":Ce.label,disabled:Ce.isDisabled,edge:"end",onClick:Ce.goTo},ownerState:H({},oe,{hidden:Ce.isHidden}),className:de.button}),ue=(h=R==null?void 0:R.nextIconButton)!=null?h:hP,Be=$r({elementType:ue,externalSlotProps:$==null?void 0:$.nextIconButton,additionalProps:{size:"medium",title:Fe.label,"aria-label":Fe.label,disabled:Fe.isDisabled,edge:"start",onClick:Fe.goTo},ownerState:H({},oe,{hidden:Fe.isHidden}),className:de.button}),Ae=(p=R==null?void 0:R.leftArrowIcon)!=null?p:sW,Se=$r({elementType:Ae,externalSlotProps:$==null?void 0:$.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),ke=Bt(Se,SH),Ne=(_=R==null?void 0:R.rightArrowIcon)!=null?_:aW,nt=$r({elementType:Ne,externalSlotProps:$==null?void 0:$.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),vt=Bt(nt,TH);return he.jsxs(CH,H({ref:o,className:Zt(de.root,D),ownerState:oe},re,{children:[he.jsx(be,H({},we,{children:w?he.jsx(Ne,H({},vt)):he.jsx(Ae,H({},ke))})),M?he.jsx(Qa,{variant:"subtitle1",component:"span",children:M}):he.jsx(EH,{className:de.spacer,ownerState:oe}),he.jsx(ue,H({},Be,{children:w?he.jsx(Ae,H({},ke)):he.jsx(Ne,H({},vt))}))]}))}),PH=e=>Sn("MuiPickersCalendarHeader",e),MH=_n("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),IH=["ownerState"],AH=e=>{const{classes:t}=e;return xn({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},PH,t)},DH=dt("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),zH=dt("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>H({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),RH=dt("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),LH=dt(Eu,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})(({ownerState:e})=>H({marginRight:"auto"},e.view==="year"&&{[`.${MH.switchViewIcon}`]:{transform:"rotate(180deg)"}})),OH=dt(oW,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"}));function BH(e){var t,o;const l=Zs(),h=kr(),p=gn({props:e,name:"MuiPickersCalendarHeader"}),{slots:_,slotProps:a,currentMonth:w,disabled:C,disableFuture:M,disablePast:D,maxDate:R,minDate:$,onMonthChange:j,onViewChange:B,view:K,reduceAnimations:N,views:U,labelId:G,timezone:Y}=p,Q=p,re=AH(p),oe=(t=_==null?void 0:_.switchViewButton)!=null?t:LH,de=$r({elementType:oe,externalSlotProps:a==null?void 0:a.switchViewButton,additionalProps:{size:"small","aria-label":l.calendarViewSwitchingButtonAriaLabel(K)},ownerState:Q,className:re.switchViewButton}),ae=(o=_==null?void 0:_.switchViewIcon)!=null?o:OH,ye=$r({elementType:ae,externalSlotProps:a==null?void 0:a.switchViewIcon,ownerState:void 0,className:re.switchViewIcon}),Ce=Bt(ye,IH),Fe=()=>j(h.addMonths(w,1),"left"),be=()=>j(h.addMonths(w,-1),"right"),we=rG(w,{disableFuture:M,maxDate:R,timezone:Y}),ue=iG(w,{disablePast:D,minDate:$,timezone:Y}),Be=()=>{if(!(U.length===1||!B||C))if(U.length===2)B(U.find(Ae=>Ae!==K)||U[0]);else{const Ae=U.indexOf(K)!==0?0:1;B(U[Ae])}};return U.length===1&&U[0]==="year"?null:he.jsxs(DH,{ownerState:Q,className:re.root,children:[he.jsxs(zH,{role:"presentation",onClick:Be,ownerState:Q,"aria-live":"polite",className:re.labelContainer,children:[he.jsx(sA,{reduceAnimations:N,transKey:h.format(w,"monthAndYear"),children:he.jsx(RH,{id:G,ownerState:Q,className:re.label,children:h.format(w,"monthAndYear")})}),U.length>1&&!C&&he.jsx(oe,H({},de,{children:he.jsx(ae,H({},Ce))}))]}),he.jsx(Um,{in:K==="day",children:he.jsx(dA,{slots:_,slotProps:a,onGoToPrevious:be,isPreviousDisabled:ue,previousLabel:l.previousMonth,onGoToNext:Fe,isNextDisabled:we,nextLabel:l.nextMonth})})]})}const $2=dt("div")({overflow:"hidden",width:eA,maxHeight:tA,display:"flex",flexDirection:"column",margin:"0 auto"}),FH=typeof navigator<"u"&&/(android)/i.test(navigator.userAgent),$H=e=>Sn("MuiDateCalendar",e);_n("MuiDateCalendar",["root","viewTransitionContainer"]);const NH=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],UH=e=>{const{classes:t}=e;return xn({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},$H,t)};function VH(e,t){const o=kr(),l=Vm(),h=gn({props:e,name:t});return H({loading:!1,disablePast:!1,disableFuture:!1,openTo:"day",views:["year","day"],reduceAnimations:FH,renderLoading:()=>he.jsx("span",{children:"..."})},h,{minDate:gs(o,h.minDate,l.minDate),maxDate:gs(o,h.maxDate,l.maxDate)})}const jH=dt($2,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column"}),WH=dt(sA,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({}),hA=W.forwardRef(function(t,o){const l=kr(),h=wu(),p=VH(t,"MuiDateCalendar"),{autoFocus:_,onViewChange:a,value:w,defaultValue:C,referenceDate:M,disableFuture:D,disablePast:R,defaultCalendarMonth:$,onChange:j,onYearChange:B,onMonthChange:K,reduceAnimations:N,shouldDisableDate:U,shouldDisableMonth:G,shouldDisableYear:Y,view:Q,views:re,openTo:oe,className:de,disabled:ae,readOnly:ye,minDate:Ce,maxDate:Fe,disableHighlightToday:be,focusedView:we,onFocusedViewChange:ue,showDaysOutsideCurrentMonth:Be,fixedWeekNumber:Ae,dayOfWeekFormatter:Se,components:ke,componentsProps:Ne,slots:nt,slotProps:vt,loading:gt,renderLoading:rt,displayWeekNumber:xt,yearsPerRow:ht,monthsPerRow:mt,timezone:Ot}=p,Nt=Bt(p,NH),{value:at,handleValueChange:Je,timezone:it}=jm({name:"DateCalendar",timezone:Ot,value:w,defaultValue:C,onChange:j,valueManager:qs}),{view:St,setView:Gt,focusedView:He,setFocusedView:Vt,goToNextView:lt,setValueAndGoToNextView:jt}=uv({view:Q,views:re,openTo:oe,onChange:Je,onViewChange:a,autoFocus:_,focusedView:we,onFocusedViewChange:ue}),{referenceDate:Ut,calendarState:$t,changeFocusedDay:Lt,changeMonth:un,handleChangeMonth:kn,isDateDisabled:Hn,onMonthSwitchingAnimationEnd:dn}=pG({value:at,defaultCalendarMonth:$,referenceDate:M,reduceAnimations:N,onMonthChange:K,minDate:Ce,maxDate:Fe,shouldDisableDate:U,disablePast:R,disableFuture:D,timezone:it}),En=mn(ge=>{const J=l.startOfMonth(ge),ee=l.endOfMonth(ge),_e=Hn(ge)?Kf({utils:l,date:ge,minDate:l.isBefore(Ce,J)?J:Ce,maxDate:l.isAfter(Fe,ee)?ee:Fe,disablePast:R,disableFuture:D,isDateDisabled:Hn,timezone:it}):ge;_e?(jt(_e,"finish"),K==null||K(J)):(lt(),un(J)),Lt(_e,!0)}),Tn=mn(ge=>{const J=l.startOfYear(ge),ee=l.endOfYear(ge),_e=Hn(ge)?Kf({utils:l,date:ge,minDate:l.isBefore(Ce,J)?J:Ce,maxDate:l.isAfter(Fe,ee)?ee:Fe,disablePast:R,disableFuture:D,isDateDisabled:Hn,timezone:it}):ge;_e?(jt(_e,"finish"),B==null||B(_e)):(lt(),un(J)),Lt(_e,!0)}),sn=mn(ge=>Je(ge&&jb(l,ge,at??Ut),"finish"));W.useEffect(()=>{at!=null&&l.isValid(at)&&un(at)},[at]);const an=p,ln=UH(an),An={disablePast:R,disableFuture:D,maxDate:Fe,minDate:Ce},Ht=ae&&at||Ce,nn=ae&&at||Fe,bn={disableHighlightToday:be,readOnly:ye,disabled:ae,timezone:it},$n=`${h}-grid-label`,Zn=He!==null,Ar=W.useRef(St);W.useEffect(()=>{Ar.current!==St&&(He===Ar.current&&Vt(St,!0),Ar.current=St)},[He,Vt,St]);const Nr=W.useMemo(()=>[at],[at]);return he.jsxs(jH,H({ref:o,className:Zt(ln.root,de),ownerState:an},Nt,{children:[he.jsx(BH,{views:re,view:St,currentMonth:$t.currentMonth,onViewChange:Gt,onMonthChange:(ge,J)=>kn({newMonth:ge,direction:J}),minDate:Ht,maxDate:nn,disabled:ae,disablePast:R,disableFuture:D,reduceAnimations:N,labelId:$n,slots:nt,slotProps:vt,timezone:it}),he.jsx(WH,{reduceAnimations:N,className:ln.viewTransitionContainer,transKey:St,ownerState:an,children:he.jsxs("div",{children:[St==="year"&&he.jsx(pH,H({},An,bn,{value:at,onChange:Tn,shouldDisableYear:Y,hasFocus:Zn,onFocusedViewChange:ge=>Vt("year",ge),yearsPerRow:ht,referenceDate:Ut})),St==="month"&&he.jsx(tH,H({},An,bn,{hasFocus:Zn,className:de,value:at,onChange:En,shouldDisableMonth:G,onFocusedViewChange:ge=>Vt("month",ge),monthsPerRow:mt,referenceDate:Ut})),St==="day"&&he.jsx(jG,H({},$t,An,bn,{onMonthSwitchingAnimationEnd:dn,onFocusedDayChange:Lt,reduceAnimations:N,selectedDays:Nr,onSelectedDaysChange:sn,shouldDisableDate:U,shouldDisableMonth:G,shouldDisableYear:Y,hasFocus:Zn,onFocusedViewChange:ge=>Vt("day",ge),gridLabelId:$n,showDaysOutsideCurrentMonth:Be,fixedWeekNumber:Ae,dayOfWeekFormatter:Se,displayWeekNumber:xt,components:ke,componentsProps:Ne,slots:nt,slotProps:vt,loading:gt,renderLoading:rt}))]})})]}))}),sh=({view:e,onViewChange:t,views:o,focusedView:l,onFocusedViewChange:h,value:p,defaultValue:_,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minDate:R,maxDate:$,shouldDisableDate:j,shouldDisableMonth:B,shouldDisableYear:K,reduceAnimations:N,onMonthChange:U,monthsPerRow:G,onYearChange:Y,yearsPerRow:Q,defaultCalendarMonth:re,components:oe,componentsProps:de,slots:ae,slotProps:ye,loading:Ce,renderLoading:Fe,disableHighlightToday:be,readOnly:we,disabled:ue,showDaysOutsideCurrentMonth:Be,dayOfWeekFormatter:Ae,sx:Se,autoFocus:ke,fixedWeekNumber:Ne,displayWeekNumber:nt,timezone:vt})=>he.jsx(hA,{view:e,onViewChange:t,views:o.filter(ih),focusedView:l&&ih(l)?l:null,onFocusedViewChange:h,value:p,defaultValue:_,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minDate:R,maxDate:$,shouldDisableDate:j,shouldDisableMonth:B,shouldDisableYear:K,reduceAnimations:N,onMonthChange:U,monthsPerRow:G,onYearChange:Y,yearsPerRow:Q,defaultCalendarMonth:re,components:oe,componentsProps:de,slots:ae,slotProps:ye,loading:Ce,renderLoading:Fe,disableHighlightToday:be,readOnly:we,disabled:ue,showDaysOutsideCurrentMonth:Be,dayOfWeekFormatter:Ae,sx:Se,autoFocus:ke,fixedWeekNumber:Ne,displayWeekNumber:nt,timezone:vt});function GH(e){return Sn("MuiDivider",e)}const pP=_n("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),HH=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],qH=e=>{const{absolute:t,children:o,classes:l,flexItem:h,light:p,orientation:_,textAlign:a,variant:w}=e;return xn({root:["root",t&&"absolute",w,p&&"light",_==="vertical"&&"vertical",h&&"flexItem",o&&"withChildren",o&&_==="vertical"&&"withChildrenVertical",a==="right"&&_!=="vertical"&&"textAlignRight",a==="left"&&_!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",_==="vertical"&&"wrapperVertical"]},GH,l)},ZH=dt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.absolute&&t.absolute,t[o.variant],o.light&&t.light,o.orientation==="vertical"&&t.vertical,o.flexItem&&t.flexItem,o.children&&t.withChildren,o.children&&o.orientation==="vertical"&&t.withChildrenVertical,o.textAlign==="right"&&o.orientation!=="vertical"&&t.textAlignRight,o.textAlign==="left"&&o.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>H({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Jn(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>H({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>H({},t.children&&t.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}}),({theme:e,ownerState:t})=>H({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}}),({ownerState:e})=>H({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),XH=dt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.wrapper,o.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>H({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),YH=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiDivider"}),{absolute:h=!1,children:p,className:_,component:a=p?"div":"hr",flexItem:w=!1,light:C=!1,orientation:M="horizontal",role:D=a!=="hr"?"separator":void 0,textAlign:R="center",variant:$="fullWidth"}=l,j=Bt(l,HH),B=H({},l,{absolute:h,component:a,flexItem:w,light:C,orientation:M,role:D,textAlign:R,variant:$}),K=qH(B);return he.jsx(ZH,H({as:a,className:Zt(K.root,_),role:D,ref:o,ownerState:B},j,{children:p?he.jsx(XH,{className:K.wrapper,ownerState:B,children:p}):null}))}),fP=YH;function KH(e){return Sn("MuiMultiSectionDigitalClock",e)}_n("MuiMultiSectionDigitalClock",["root"]);const JH=_n("MuiListItemIcon",["root","alignItemsFlexStart"]),mP=JH,QH=_n("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),gP=QH;function eq(e){return Sn("MuiMenuItem",e)}const tq=_n("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),kf=tq,nq=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],rq=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.divider&&t.divider,!o.disableGutters&&t.gutters]},iq=e=>{const{disabled:t,dense:o,divider:l,disableGutters:h,selected:p,classes:_}=e,w=xn({root:["root",o&&"dense",t&&"disabled",!h&&"gutters",l&&"divider",p&&"selected"]},eq,_);return H({},_,w)},oq=dt(el,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:rq})(({theme:e,ownerState:t})=>H({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${kf.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${kf.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${kf.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${kf.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${kf.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${pP.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${pP.inset}`]:{marginLeft:52},[`& .${gP.root}`]:{marginTop:0,marginBottom:0},[`& .${gP.inset}`]:{paddingLeft:36},[`& .${mP.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&H({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${mP.root} svg`]:{fontSize:"1.25rem"}}))),sq=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiMenuItem"}),{autoFocus:h=!1,component:p="li",dense:_=!1,divider:a=!1,disableGutters:w=!1,focusVisibleClassName:C,role:M="menuitem",tabIndex:D,className:R}=l,$=Bt(l,nq),j=W.useContext(uu),B=W.useMemo(()=>({dense:_||j.dense||!1,disableGutters:w}),[j.dense,_,w]),K=W.useRef(null);ki(()=>{h&&K.current&&K.current.focus()},[h]);const N=H({},l,{dense:B.dense,divider:a,disableGutters:w}),U=iq(l),G=Rr(K,o);let Y;return l.disabled||(Y=D!==void 0?D:-1),he.jsx(uu.Provider,{value:B,children:he.jsx(oq,H({ref:G,role:M,tabIndex:Y,component:p,focusVisibleClassName:Zt(U.focusVisible,C),className:Zt(U.root,R)},$,{ownerState:N,classes:U}))})}),aq=sq;function lq(e){return Sn("MuiMultiSectionDigitalClock",e)}const cq=_n("MuiMultiSectionDigitalClock",["root","item"]),uq=["autoFocus","onChange","className","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],dq=e=>{const{classes:t}=e;return xn({root:["root"],item:["item"]},lq,t)},hq=dt(g4,{name:"MuiMultiSectionDigitalClockSection",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>({maxHeight:oG,width:56,padding:0,overflow:"hidden",scrollBehavior:t.alreadyRendered?"smooth":"auto","&:hover":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},"&:after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"}})),pq=dt(aq,{name:"MuiMultiSectionDigitalClockSection",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:8,margin:"2px 4px",width:Lf,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:Jn(e.palette.primary.main,e.palette.action.focusOpacity)}})),fq=W.forwardRef(function(t,o){var l;const h=W.useRef(null),p=Rr(o,h),_=gn({props:t,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:a,onChange:w,className:C,disabled:M,readOnly:D,items:R,active:$,slots:j,slotProps:B,skipDisabled:K}=_,N=Bt(_,uq),U=W.useMemo(()=>H({},_,{alreadyRendered:!!h.current}),[_]),G=dq(U),Y=(l=j==null?void 0:j.digitalClockSectionItem)!=null?l:pq;return W.useEffect(()=>{if(h.current===null)return;const Q=h.current.querySelector('[role="option"][aria-selected="true"]');if(!Q)return;$&&a&&Q.focus();const re=Q.offsetTop;h.current.scrollTop=re-4}),he.jsx(hq,H({ref:p,className:Zt(G.root,C),ownerState:U,autoFocusItem:a&&$,role:"listbox"},N,{children:R.map(Q=>{var re,oe;if(K&&(re=Q.isDisabled)!=null&&re.call(Q,Q.value))return null;const de=Q.isSelected(Q.value);return he.jsx(Y,H({onClick:()=>!D&&w(Q.value),selected:de,disabled:M||((oe=Q.isDisabled)==null?void 0:oe.call(Q,Q.value)),disableRipple:D,role:"option","aria-disabled":D,"aria-label":Q.ariaLabel,"aria-selected":de},B==null?void 0:B.digitalClockSectionItem,{children:Q.label}),Q.label)})}))}),mq=({now:e,value:t,utils:o,ampm:l,isDisabled:h,resolveAriaLabel:p,timeStep:_})=>{const a=t?o.getHours(t):null,w=[],C=D=>a===null?!1:l?D===12?a===12||a===0:a===D||a-12===D:a===D,M=l?11:23;for(let D=0;D<=M;D+=_){let R=o.format(o.setHours(e,D),l?"hours12h":"hours24h");const $=p(parseInt(R,10).toString());R=o.formatNumber(R),w.push({value:D,label:R,isSelected:C,isDisabled:h,ariaLabel:$})}return w},yP=({value:e,isDisabled:t,timeStep:o,resolveLabel:l,resolveAriaLabel:h,hasValue:p=!0})=>{const _=a=>e===null?!1:p&&e===a;return[...Array.from({length:Math.ceil(60/o)},(a,w)=>{const C=o*w;return{value:C,label:l(C),isDisabled:t,isSelected:_,ariaLabel:h(C.toString())}})]},gq=["ampm","timeSteps","autoFocus","components","componentsProps","slots","slotProps","value","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableClock","shouldDisableTime","onChange","defaultValue","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","skipDisabled","timezone"],yq=e=>{const{classes:t}=e;return xn({root:["root"]},KH,t)},_q=dt($2,{name:"MuiMultiSectionDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",flexDirection:"row",width:"100%",borderBottom:`1px solid ${(e.vars||e).palette.divider}`})),vq=W.forwardRef(function(t,o){const l=kr(),h=gn({props:t,name:"MuiMultiSectionDigitalClock"}),{ampm:p=l.is12HourCycleInCurrentLocale(),timeSteps:_,autoFocus:a,components:w,componentsProps:C,slots:M,slotProps:D,value:R,disableIgnoringDatePartForTimeValidation:$=!1,maxTime:j,minTime:B,disableFuture:K,disablePast:N,minutesStep:U=1,shouldDisableClock:G,shouldDisableTime:Y,onChange:Q,defaultValue:re,view:oe,views:de=["hours","minutes"],openTo:ae,onViewChange:ye,focusedView:Ce,onFocusedViewChange:Fe,className:be,disabled:we,readOnly:ue,skipDisabled:Be=!1,timezone:Ae}=h,Se=Bt(h,gq),{value:ke,handleValueChange:Ne,timezone:nt}=jm({name:"MultiSectionDigitalClock",timezone:Ae,value:R,defaultValue:re,onChange:Q,valueManager:qs}),vt=Zs(),gt=Cu(nt),rt=W.useMemo(()=>H({hours:1,minutes:5,seconds:5},_),[_]),xt=mn(($t,Lt,un)=>Ne($t,Lt,un)),ht=W.useMemo(()=>!p||!de.includes("hours")||de.includes("meridiem")?de:[...de,"meridiem"],[p,de]),{view:mt,setValueAndGoToView:Ot,focusedView:Nt}=uv({view:oe,views:ht,openTo:ae,onViewChange:ye,onChange:xt,focusedView:Ce,onFocusedViewChange:Fe}),at=W.useMemo(()=>ke||l.setSeconds(l.setMinutes(l.setHours(gt,0),0),0),[ke,gt,l]),Je=mn($t=>{Ot($t,null,"meridiem")}),{meridiemMode:it,handleMeridiemChange:St}=B2(at,p,Je,"finish"),Gt=W.useCallback(($t,Lt)=>{const un=sv($,l),kn=Lt==="hours"||Lt==="minutes"&&ht.includes("seconds"),Hn=({start:En,end:Tn})=>!(B&&un(B,Tn)||j&&un(En,j)||K&&un(En,gt)||N&&un(gt,kn?Tn:En)),dn=(En,Tn=1)=>{if(En%Tn!==0||G!=null&&G(En,Lt))return!1;if(Y)switch(Lt){case"hours":return!Y(l.setHours(at,En),"hours");case"minutes":return!Y(l.setMinutes(at,En),"minutes");case"seconds":return!Y(l.setSeconds(at,En),"seconds");default:return!1}return!0};switch(Lt){case"hours":{const En=Cm($t,it,p),Tn=l.setHours(at,En),sn=l.setSeconds(l.setMinutes(Tn,0),0),an=l.setSeconds(l.setMinutes(Tn,59),59);return!Hn({start:sn,end:an})||!dn(En)}case"minutes":{const En=l.setMinutes(at,$t),Tn=l.setSeconds(En,0),sn=l.setSeconds(En,59);return!Hn({start:Tn,end:sn})||!dn($t,U)}case"seconds":{const En=l.setSeconds(at,$t);return!Hn({start:En,end:En})||!dn($t)}default:throw new Error("not supported")}},[p,at,$,j,it,B,U,G,Y,l,K,N,gt,ht]),He=mn(($t,Lt)=>{const un=ht.indexOf($t),kn=ht[un+1];Ot(Lt,kn,$t)}),Vt=W.useCallback($t=>{switch($t){case"hours":return{onChange:Lt=>{const un=Cm(Lt,it,p);He("hours",l.setHours(at,un))},items:mq({now:gt,value:ke,ampm:p,utils:l,isDisabled:Lt=>we||Gt(Lt,"hours"),timeStep:rt.hours,resolveAriaLabel:vt.hoursClockNumberText})};case"minutes":return{onChange:Lt=>{He("minutes",l.setMinutes(at,Lt))},items:yP({value:l.getMinutes(at),isDisabled:Lt=>we||Gt(Lt,"minutes"),resolveLabel:Lt=>l.format(l.setMinutes(gt,Lt),"minutes"),timeStep:rt.minutes,hasValue:!!ke,resolveAriaLabel:vt.minutesClockNumberText})};case"seconds":return{onChange:Lt=>{He("seconds",l.setSeconds(at,Lt))},items:yP({value:l.getSeconds(at),isDisabled:Lt=>we||Gt(Lt,"seconds"),resolveLabel:Lt=>l.format(l.setSeconds(gt,Lt),"seconds"),timeStep:rt.seconds,hasValue:!!ke,resolveAriaLabel:vt.secondsClockNumberText})};case"meridiem":{const Lt=l.getMeridiemText("am"),un=l.getMeridiemText("pm");return{onChange:St,items:[{value:"am",label:Lt,isSelected:()=>!!ke&&it==="am",ariaLabel:Lt},{value:"pm",label:un,isSelected:()=>!!ke&&it==="pm",ariaLabel:un}]}}default:throw new Error(`Unknown view: ${$t} found.`)}},[gt,ke,p,l,rt.hours,rt.minutes,rt.seconds,vt.hoursClockNumberText,vt.minutesClockNumberText,vt.secondsClockNumberText,it,He,at,we,Gt,St]),lt=W.useMemo(()=>ht.reduce(($t,Lt)=>H({},$t,{[Lt]:Vt(Lt)}),{}),[ht,Vt]),jt=h,Ut=yq(jt);return he.jsx(_q,H({ref:o,className:Zt(Ut.root,be),ownerState:jt,role:"group"},Se,{children:Object.entries(lt).map(([$t,Lt])=>he.jsx(fq,{items:Lt.items,onChange:Lt.onChange,active:mt===$t,autoFocus:a??Nt===$t,disabled:we,readOnly:ue,slots:M??w,slotProps:D??C,skipDisabled:Be,"aria-label":vt.selectViewText($t)},$t))}))}),xq=dt("div")({display:"flex",margin:"0 auto"}),Yc=({view:e,onViewChange:t,views:o,focusedView:l,onFocusedViewChange:h,value:p,defaultValue:_,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minDate:R,minTime:$,maxDate:j,maxTime:B,shouldDisableDate:K,shouldDisableMonth:N,shouldDisableYear:U,shouldDisableTime:G,shouldDisableClock:Y,reduceAnimations:Q,minutesStep:re,ampm:oe,onMonthChange:de,monthsPerRow:ae,onYearChange:ye,yearsPerRow:Ce,defaultCalendarMonth:Fe,components:be,componentsProps:we,slots:ue,slotProps:Be,loading:Ae,renderLoading:Se,disableHighlightToday:ke,readOnly:Ne,disabled:nt,showDaysOutsideCurrentMonth:vt,dayOfWeekFormatter:gt,sx:rt,autoFocus:xt,fixedWeekNumber:ht,displayWeekNumber:mt,timezone:Ot,disableIgnoringDatePartForTimeValidation:Nt,timeSteps:at,skipDisabled:Je,timeViewsCount:it})=>{var St,Gt,He;const Vt=!!((St=mh((He=Be==null?void 0:Be.actionBar)!=null?He:we==null?void 0:we.actionBar,{}))!=null&&(Gt=St.actions)!=null&&Gt.length);return he.jsxs(W.Fragment,{children:[he.jsxs(xq,{children:[he.jsx(hA,{view:ih(e)?e:"day",onViewChange:t,views:o.filter(ih),focusedView:l&&ih(l)?l:null,onFocusedViewChange:h,value:p,defaultValue:_,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minDate:R,maxDate:j,shouldDisableDate:K,shouldDisableMonth:N,shouldDisableYear:U,reduceAnimations:Q,onMonthChange:de,monthsPerRow:ae,onYearChange:ye,yearsPerRow:Ce,defaultCalendarMonth:Fe,components:be,componentsProps:we,slots:ue,slotProps:Be,loading:Ae,renderLoading:Se,disableHighlightToday:ke,readOnly:Ne,disabled:nt,showDaysOutsideCurrentMonth:vt,dayOfWeekFormatter:gt,sx:rt,autoFocus:xt,fixedWeekNumber:ht,displayWeekNumber:mt,timezone:Ot}),it>0&&he.jsxs(W.Fragment,{children:[he.jsx(fP,{orientation:"vertical"}),he.jsx(vq,{view:M1(e)?e:"hours",onViewChange:t,focusedView:l&&M1(l)?l:null,onFocusedViewChange:h,views:o.filter(M1),value:p,defaultValue:_,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minTime:$,maxTime:B,shouldDisableTime:G,shouldDisableClock:Y,minutesStep:re,ampm:oe,components:be,componentsProps:we,slots:ue,slotProps:Be,readOnly:Ne,disabled:nt,sx:H({borderBottom:0,width:"auto",[`.${cq.root}`]:{maxHeight:"100%"}},Array.isArray(rt)?rt:[rt]),autoFocus:xt,disableIgnoringDatePartForTimeValidation:Nt,timeSteps:at,skipDisabled:Je,timezone:Ot})]})]}),Vt&&he.jsx(fP,{})]})};function bq(e){return Sn("MuiInputAdornment",e)}const wq=_n("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),_P=wq;var vP;const Sq=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Tq=(e,t)=>{const{ownerState:o}=e;return[t.root,t[`position${tn(o.position)}`],o.disablePointerEvents===!0&&t.disablePointerEvents,t[o.variant]]},Cq=e=>{const{classes:t,disablePointerEvents:o,hiddenLabel:l,position:h,size:p,variant:_}=e,a={root:["root",o&&"disablePointerEvents",h&&`position${tn(h)}`,_,l&&"hiddenLabel",p&&`size${tn(p)}`]};return xn(a,bq,t)},Eq=dt("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Tq})(({theme:e,ownerState:t})=>H({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${_P.positionStart}&:not(.${_P.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),kq=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiInputAdornment"}),{children:h,className:p,component:_="div",disablePointerEvents:a=!1,disableTypography:w=!1,position:C,variant:M}=l,D=Bt(l,Sq),R=Su()||{};let $=M;M&&R.variant,R&&!$&&($=R.variant);const j=H({},l,{hiddenLabel:R.hiddenLabel,size:R.size,disablePointerEvents:a,position:C,variant:$}),B=Cq(j);return he.jsx(G_.Provider,{value:null,children:he.jsx(Eq,H({as:_,ownerState:j,className:Zt(B.root,p),ref:o},D,{children:typeof h=="string"&&!w?he.jsx(Qa,{color:"text.secondary",children:h}):he.jsxs(W.Fragment,{children:[C==="start"?vP||(vP=he.jsx("span",{className:"notranslate",children:"​"})):null,h]})}))})}),pA=kq,Pq=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Mq=dt(a6,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Iq=W.forwardRef(function(t,o){var l;const h=h2(),p=gn({props:t,name:"MuiPopper"}),{anchorEl:_,component:a,components:w,componentsProps:C,container:M,disablePortal:D,keepMounted:R,modifiers:$,open:j,placement:B,popperOptions:K,popperRef:N,transition:U,slots:G,slotProps:Y}=p,Q=Bt(p,Pq),re=(l=G==null?void 0:G.root)!=null?l:w==null?void 0:w.Root,oe=H({anchorEl:_,container:M,disablePortal:D,keepMounted:R,modifiers:$,open:j,placement:B,popperOptions:K,popperRef:N,transition:U},Q);return he.jsx(Mq,H({as:a,direction:h==null?void 0:h.direction,slots:{root:re},slotProps:Y??C},oe,{ref:o}))}),N2=Iq;function Aq(e){return Sn("MuiPickersPopper",e)}_n("MuiPickersPopper",["root","paper"]);const Dq=e=>{const{classes:t}=e;return xn({root:["root"],paper:["paper"]},Aq,t)},zq=dt(N2,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({zIndex:e.zIndex.modal})),Rq=dt(Ah,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({ownerState:e})=>H({transformOrigin:"top center",outline:0},e.placement==="top"&&{transformOrigin:"bottom center"}));function Lq(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Oq(e,t){const o=W.useRef(!1),l=W.useRef(!1),h=W.useRef(null),p=W.useRef(!1);W.useEffect(()=>{if(!e)return;function w(){p.current=!0}return document.addEventListener("mousedown",w,!0),document.addEventListener("touchstart",w,!0),()=>{document.removeEventListener("mousedown",w,!0),document.removeEventListener("touchstart",w,!0),p.current=!1}},[e]);const _=mn(w=>{if(!p.current)return;const C=l.current;l.current=!1;const M=Ei(h.current);if(!h.current||"clientX"in w&&Lq(w,M))return;if(o.current){o.current=!1;return}let D;w.composedPath?D=w.composedPath().indexOf(h.current)>-1:D=!M.documentElement.contains(w.target)||h.current.contains(w.target),!D&&!C&&t(w)}),a=()=>{l.current=!0};return W.useEffect(()=>{if(e){const w=Ei(h.current),C=()=>{o.current=!0};return w.addEventListener("touchstart",_),w.addEventListener("touchmove",C),()=>{w.removeEventListener("touchstart",_),w.removeEventListener("touchmove",C)}}},[e,_]),W.useEffect(()=>{if(e){const w=Ei(h.current);return w.addEventListener("click",_),()=>{w.removeEventListener("click",_),l.current=!1}}},[e,_]),[h,a,a]}function Bq(e){var t,o,l,h;const p=gn({props:e,name:"MuiPickersPopper"}),{anchorEl:_,children:a,containerRef:w=null,shouldRestoreFocus:C,onBlur:M,onDismiss:D,open:R,role:$,placement:j,slots:B,slotProps:K}=p;W.useEffect(()=>{function Ae(Se){R&&(Se.key==="Escape"||Se.key==="Esc")&&D()}return document.addEventListener("keydown",Ae),()=>{document.removeEventListener("keydown",Ae)}},[D,R]);const N=W.useRef(null);W.useEffect(()=>{$==="tooltip"||C&&!C()||(R?N.current=W0(document):N.current&&N.current instanceof HTMLElement&&setTimeout(()=>{N.current instanceof HTMLElement&&N.current.focus()}))},[R,$,C]);const[U,G,Y]=Oq(R,M??D),Q=W.useRef(null),re=Rr(Q,w),oe=Rr(re,U),de=p,ae=Dq(de),ye=Ae=>{Ae.key==="Escape"&&(Ae.stopPropagation(),D())},Ce=(t=B==null?void 0:B.desktopTransition)!=null?t:x4,Fe=(o=B==null?void 0:B.desktopTrapFocus)!=null?o:n3,be=(l=B==null?void 0:B.desktopPaper)!=null?l:Rq,we=$r({elementType:be,externalSlotProps:K==null?void 0:K.desktopPaper,additionalProps:{tabIndex:-1,elevation:8,ref:oe},className:ae.paper,ownerState:{}}),ue=(h=B==null?void 0:B.popper)!=null?h:zq,Be=$r({elementType:ue,externalSlotProps:K==null?void 0:K.popper,additionalProps:{transition:!0,role:$,open:R,anchorEl:_,placement:j,onKeyDown:ye},className:ae.root,ownerState:p});return he.jsx(ue,H({},Be,{children:({TransitionProps:Ae,placement:Se})=>he.jsx(Fe,H({open:R,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:$==="tooltip",isEnabled:()=>!0},K==null?void 0:K.desktopTrapFocus,{children:he.jsx(Ce,H({},Ae,K==null?void 0:K.desktopTransition,{children:he.jsx(be,H({},we,{onClick:ke=>{var Ne;G(ke),(Ne=we.onClick)==null||Ne.call(we,ke)},onTouchStart:ke=>{var Ne;Y(ke),(Ne=we.onTouchStart)==null||Ne.call(we,ke)},ownerState:H({},de,{placement:Se}),children:a}))}))}))}))}const Fq=({open:e,onOpen:t,onClose:o})=>{const l=W.useRef(typeof e=="boolean").current,[h,p]=W.useState(!1);W.useEffect(()=>{if(l){if(typeof e!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");p(e)}},[l,e]);const _=W.useCallback(a=>{l||p(a),a&&t&&t(),!a&&o&&o()},[l,t,o]);return{isOpen:h,setIsOpen:_}},$q=e=>{const{action:t,hasChanged:o,dateState:l,isControlled:h}=e,p=!h&&!l.hasBeenModifiedSinceMount;return t.name==="setValueFromField"?!0:t.name==="setValueFromAction"?p&&["accept","today","clear"].includes(t.pickerAction)?!0:o(l.lastPublishedValue):t.name==="setValueFromView"&&t.selectionState!=="shallow"||t.name==="setValueFromShortcut"&&t.changeImportance==="accept"?p?!0:o(l.lastPublishedValue):!1},Nq=e=>{const{action:t,hasChanged:o,dateState:l,isControlled:h,closeOnSelect:p}=e,_=!h&&!l.hasBeenModifiedSinceMount;return t.name==="setValueFromAction"?_&&["accept","today","clear"].includes(t.pickerAction)?!0:o(l.lastCommittedValue):t.name==="setValueFromView"&&t.selectionState==="finish"&&p?_?!0:o(l.lastCommittedValue):t.name==="setValueFromShortcut"?t.changeImportance==="accept"&&o(l.lastCommittedValue):!1},Uq=e=>{const{action:t,closeOnSelect:o}=e;return t.name==="setValueFromAction"?!0:t.name==="setValueFromView"?t.selectionState==="finish"&&o:t.name==="setValueFromShortcut"?t.changeImportance==="accept":!1},Vq=({props:e,valueManager:t,valueType:o,wrapperVariant:l,validator:h})=>{const{onAccept:p,onChange:_,value:a,defaultValue:w,closeOnSelect:C=l==="desktop",selectedSections:M,onSelectedSectionsChange:D,timezone:R}=e,{current:$}=W.useRef(w),{current:j}=W.useRef(a!==void 0),B=kr(),K=Tu(),[N,U]=Uo({controlled:M,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:G,setIsOpen:Y}=Fq(e),[Q,re]=W.useState(()=>{let mt;return a!==void 0?mt=a:$!==void 0?mt=$:mt=t.emptyValue,{draft:mt,lastPublishedValue:mt,lastCommittedValue:mt,lastControlledValue:a,hasBeenModifiedSinceMount:!1}}),{timezone:oe,handleValueChange:de}=L2({timezone:R,value:a,defaultValue:$,onChange:_,valueManager:t});G4(H({},e,{value:Q.draft,timezone:oe}),h,t.isSameError,t.defaultErrorState);const ae=mn(mt=>{const Ot={action:mt,dateState:Q,hasChanged:it=>!t.areValuesEqual(B,mt.value,it),isControlled:j,closeOnSelect:C},Nt=$q(Ot),at=Nq(Ot),Je=Uq(Ot);if(re(it=>H({},it,{draft:mt.value,lastPublishedValue:Nt?mt.value:it.lastPublishedValue,lastCommittedValue:at?mt.value:it.lastCommittedValue,hasBeenModifiedSinceMount:!0})),Nt){const St={validationError:mt.name==="setValueFromField"?mt.context.validationError:h({adapter:K,value:mt.value,props:H({},e,{value:mt.value,timezone:oe})})};de(mt.value,St)}at&&p&&p(mt.value),Je&&Y(!1)});if(a!==void 0&&(Q.lastControlledValue===void 0||!t.areValuesEqual(B,Q.lastControlledValue,a))){const mt=t.areValuesEqual(B,Q.draft,a);re(Ot=>H({},Ot,{lastControlledValue:a},mt?{}:{lastCommittedValue:a,lastPublishedValue:a,draft:a,hasBeenModifiedSinceMount:!0}))}const ye=mn(()=>{ae({value:t.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),Ce=mn(()=>{ae({value:Q.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),Fe=mn(()=>{ae({value:Q.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),be=mn(()=>{ae({value:Q.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),we=mn(()=>{ae({value:t.getTodayValue(B,oe,o),name:"setValueFromAction",pickerAction:"today"})}),ue=mn(()=>Y(!0)),Be=mn(()=>Y(!1)),Ae=mn((mt,Ot="partial")=>ae({name:"setValueFromView",value:mt,selectionState:Ot})),Se=mn((mt,Ot)=>ae({name:"setValueFromShortcut",value:mt,changeImportance:Ot??"accept"})),ke=mn((mt,Ot)=>ae({name:"setValueFromField",value:mt,context:Ot})),Ne=mn(mt=>{U(mt),D==null||D(mt)}),nt={onClear:ye,onAccept:Ce,onDismiss:Fe,onCancel:be,onSetToday:we,onOpen:ue,onClose:Be},vt={value:Q.draft,onChange:ke,selectedSections:N,onSelectedSectionsChange:Ne},gt=W.useMemo(()=>t.cleanValue(B,Q.draft),[B,t,Q.draft]),rt={value:gt,onChange:Ae,onClose:Be,open:G,onSelectedSectionsChange:Ne},ht=H({},nt,{value:gt,onChange:Ae,onSelectShortcut:Se,isValid:mt=>{const Ot=h({adapter:K,value:mt,props:H({},e,{value:mt,timezone:oe})});return!t.hasError(Ot)}});return{open:G,fieldProps:vt,viewProps:rt,layoutProps:ht,actions:nt}},jq=["className","sx"],Wq=({props:e,propsFromPickerValue:t,additionalViewProps:o,inputRef:l,autoFocusView:h})=>{const{onChange:p,open:_,onSelectedSectionsChange:a,onClose:w}=t,{views:C,openTo:M,onViewChange:D,disableOpenPicker:R,viewRenderers:$,timezone:j}=e,B=Bt(e,jq),{view:K,setView:N,defaultView:U,focusedView:G,setFocusedView:Y,setValueAndGoToNextView:Q}=uv({view:void 0,views:C,openTo:M,onChange:p,onViewChange:D,autoFocus:h}),{hasUIView:re,viewModeLookup:oe}=W.useMemo(()=>C.reduce((we,ue)=>{let Be;return R?Be="field":$[ue]!=null?Be="UI":Be="field",we.viewModeLookup[ue]=Be,Be==="UI"&&(we.hasUIView=!0),we},{hasUIView:!1,viewModeLookup:{}}),[R,$,C]),de=W.useMemo(()=>C.reduce((we,ue)=>$[ue]!=null&&j0(ue)?we+1:we,0),[$,C]),ae=oe[K],ye=mn(()=>ae==="UI"),[Ce,Fe]=W.useState(ae==="UI"?K:null);return Ce!==K&&oe[K]==="UI"&&Fe(K),ki(()=>{ae==="field"&&_&&(w(),setTimeout(()=>{l==null||l.current.focus(),a(K)}))},[K]),ki(()=>{if(!_)return;let we=K;ae==="field"&&Ce!=null&&(we=Ce),we!==U&&oe[we]==="UI"&&oe[U]==="UI"&&(we=U),we!==K&&N(we),Y(we,!0)},[_]),{hasUIView:re,shouldRestoreFocus:ye,layoutProps:{views:C,view:Ce,onViewChange:N},renderCurrentView:()=>{if(Ce==null)return null;const we=$[Ce];return we==null?null:we(H({},B,o,t,{views:C,timezone:j,onChange:Q,view:Ce,onViewChange:N,focusedView:G,onFocusedViewChange:Y,showViewSwitcher:de>1,timeViewsCount:de}))}}};function xP(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const Gq=(e,t)=>{const[o,l]=W.useState(xP);return ki(()=>{const p=()=>{l(xP())};return window.addEventListener("orientationchange",p),()=>{window.removeEventListener("orientationchange",p)}},[]),XV(e,["hours","minutes","seconds"])?!1:(t||o)==="landscape"},Hq=({props:e,propsFromPickerValue:t,propsFromPickerViews:o,wrapperVariant:l})=>{const{orientation:h}=e,p=Gq(o.views,h);return{layoutProps:H({},o,t,{isLandscape:p,wrapperVariant:l,disabled:e.disabled,readOnly:e.readOnly})}};R4(["The `renderInput` prop has been removed in version 6.0 of the Date and Time Pickers.","You can replace it with the `textField` component slot in most cases.","For more information, please have a look at the migration guide (https://mui.com/x/migration/migration-pickers-v5/#input-renderer-required-in-v5)."]);const fA=({props:e,valueManager:t,valueType:o,wrapperVariant:l,inputRef:h,additionalViewProps:p,validator:_,autoFocusView:a})=>{const w=Vq({props:e,valueManager:t,valueType:o,wrapperVariant:l,validator:_}),C=Wq({props:e,inputRef:h,additionalViewProps:p,autoFocusView:a,propsFromPickerValue:w.viewProps}),M=Hq({props:e,wrapperVariant:l,propsFromPickerValue:w.layoutProps,propsFromPickerViews:C.layoutProps});return{open:w.open,actions:w.actions,fieldProps:w.fieldProps,renderCurrentView:C.renderCurrentView,hasUIView:C.hasUIView,shouldRestoreFocus:C.shouldRestoreFocus,layoutProps:M.layoutProps}};function mA(e){return Sn("MuiPickersLayout",e)}const A1=_n("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","shortcuts"]);function qq(e){return Sn("MuiDialogActions",e)}_n("MuiDialogActions",["root","spacing"]);const Zq=["className","disableSpacing"],Xq=e=>{const{classes:t,disableSpacing:o}=e;return xn({root:["root",!o&&"spacing"]},qq,t)},Yq=dt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableSpacing&&t.spacing]}})(({ownerState:e})=>H({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),Kq=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiDialogActions"}),{className:h,disableSpacing:p=!1}=l,_=Bt(l,Zq),a=H({},l,{disableSpacing:p}),w=Xq(a);return he.jsx(Yq,H({className:Zt(w.root,h),ownerState:a,ref:o},_))}),Jq=Kq,Qq=["onAccept","onClear","onCancel","onSetToday","actions"];function eZ(e){const{onAccept:t,onClear:o,onCancel:l,onSetToday:h,actions:p}=e,_=Bt(e,Qq),a=Zs();if(p==null||p.length===0)return null;const w=p==null?void 0:p.map(C=>{switch(C){case"clear":return he.jsx(Rf,{onClick:o,children:a.clearButtonLabel},C);case"cancel":return he.jsx(Rf,{onClick:l,children:a.cancelButtonLabel},C);case"accept":return he.jsx(Rf,{onClick:t,children:a.okButtonLabel},C);case"today":return he.jsx(Rf,{onClick:h,children:a.todayButtonLabel},C);default:return null}});return he.jsx(Jq,H({},_,{children:w}))}function tZ(e){return Sn("MuiListItem",e)}const nZ=_n("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),Ld=nZ,rZ=_n("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),iZ=rZ;function oZ(e){return Sn("MuiListItemSecondaryAction",e)}_n("MuiListItemSecondaryAction",["root","disableGutters"]);const sZ=["className"],aZ=e=>{const{disableGutters:t,classes:o}=e;return xn({root:["root",t&&"disableGutters"]},oZ,o)},lZ=dt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.disableGutters&&t.disableGutters]}})(({ownerState:e})=>H({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),gA=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiListItemSecondaryAction"}),{className:h}=l,p=Bt(l,sZ),_=W.useContext(uu),a=H({},l,{disableGutters:_.disableGutters}),w=aZ(a);return he.jsx(lZ,H({className:Zt(w.root,h),ownerState:a,ref:o},p))});gA.muiName="ListItemSecondaryAction";const cZ=gA,uZ=["className"],dZ=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],hZ=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters,!o.disablePadding&&t.padding,o.button&&t.button,o.hasSecondaryAction&&t.secondaryAction]},pZ=e=>{const{alignItems:t,button:o,classes:l,dense:h,disabled:p,disableGutters:_,disablePadding:a,divider:w,hasSecondaryAction:C,selected:M}=e;return xn({root:["root",h&&"dense",!_&&"gutters",!a&&"padding",w&&"divider",p&&"disabled",o&&"button",t==="flex-start"&&"alignItemsFlexStart",C&&"secondaryAction",M&&"selected"],container:["container"]},tZ,l)},fZ=dt("div",{name:"MuiListItem",slot:"Root",overridesResolver:hZ})(({theme:e,ownerState:t})=>H({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&H({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${iZ.root}`]:{paddingRight:48}},{[`&.${Ld.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ld.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Ld.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Ld.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ld.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),mZ=dt("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),gZ=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiListItem"}),{alignItems:h="center",autoFocus:p=!1,button:_=!1,children:a,className:w,component:C,components:M={},componentsProps:D={},ContainerComponent:R="li",ContainerProps:{className:$}={},dense:j=!1,disabled:B=!1,disableGutters:K=!1,disablePadding:N=!1,divider:U=!1,focusVisibleClassName:G,secondaryAction:Y,selected:Q=!1,slotProps:re={},slots:oe={}}=l,de=Bt(l.ContainerProps,uZ),ae=Bt(l,dZ),ye=W.useContext(uu),Ce=W.useMemo(()=>({dense:j||ye.dense||!1,alignItems:h,disableGutters:K}),[h,ye.dense,j,K]),Fe=W.useRef(null);ki(()=>{p&&Fe.current&&Fe.current.focus()},[p]);const be=W.Children.toArray(a),we=be.length&&Qy(be[be.length-1],["ListItemSecondaryAction"]),ue=H({},l,{alignItems:h,autoFocus:p,button:_,dense:Ce.dense,disabled:B,disableGutters:K,disablePadding:N,divider:U,hasSecondaryAction:we,selected:Q}),Be=pZ(ue),Ae=Rr(Fe,o),Se=oe.root||M.Root||fZ,ke=re.root||D.root||{},Ne=H({className:Zt(Be.root,ke.className,w),disabled:B},ae);let nt=C||"li";return _&&(Ne.component=C||"div",Ne.focusVisibleClassName=Zt(Ld.focusVisible,G),nt=el),we?(nt=!Ne.component&&!C?"div":nt,R==="li"&&(nt==="li"?nt="div":Ne.component==="li"&&(Ne.component="div")),he.jsx(uu.Provider,{value:Ce,children:he.jsxs(mZ,H({as:R,className:Zt(Be.container,$),ref:Ae,ownerState:ue},de,{children:[he.jsx(Se,H({},ke,!gu(Se)&&{as:nt,ownerState:H({},ue,ke.ownerState)},Ne,{children:be})),be.pop()]}))})):he.jsx(uu.Provider,{value:Ce,children:he.jsxs(Se,H({},ke,{as:nt,ref:Ae},!gu(Se)&&{ownerState:H({},ue,ke.ownerState)},Ne,{children:[be,Y&&he.jsx(cZ,{children:Y})]}))})}),yZ=gZ,_Z=ys(he.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function vZ(e){return Sn("MuiChip",e)}const xZ=_n("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),yr=xZ,bZ=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],wZ=e=>{const{classes:t,disabled:o,size:l,color:h,iconColor:p,onDelete:_,clickable:a,variant:w}=e,C={root:["root",w,o&&"disabled",`size${tn(l)}`,`color${tn(h)}`,a&&"clickable",a&&`clickableColor${tn(h)}`,_&&"deletable",_&&`deletableColor${tn(h)}`,`${w}${tn(h)}`],label:["label",`label${tn(l)}`],avatar:["avatar",`avatar${tn(l)}`,`avatarColor${tn(h)}`],icon:["icon",`icon${tn(l)}`,`iconColor${tn(p)}`],deleteIcon:["deleteIcon",`deleteIcon${tn(l)}`,`deleteIconColor${tn(h)}`,`deleteIcon${tn(w)}Color${tn(h)}`]};return xn(C,vZ,t)},SZ=dt("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e,{color:l,iconColor:h,clickable:p,onDelete:_,size:a,variant:w}=o;return[{[`& .${yr.avatar}`]:t.avatar},{[`& .${yr.avatar}`]:t[`avatar${tn(a)}`]},{[`& .${yr.avatar}`]:t[`avatarColor${tn(l)}`]},{[`& .${yr.icon}`]:t.icon},{[`& .${yr.icon}`]:t[`icon${tn(a)}`]},{[`& .${yr.icon}`]:t[`iconColor${tn(h)}`]},{[`& .${yr.deleteIcon}`]:t.deleteIcon},{[`& .${yr.deleteIcon}`]:t[`deleteIcon${tn(a)}`]},{[`& .${yr.deleteIcon}`]:t[`deleteIconColor${tn(l)}`]},{[`& .${yr.deleteIcon}`]:t[`deleteIcon${tn(w)}Color${tn(l)}`]},t.root,t[`size${tn(a)}`],t[`color${tn(l)}`],p&&t.clickable,p&&l!=="default"&&t[`clickableColor${tn(l)})`],_&&t.deletable,_&&l!=="default"&&t[`deletableColor${tn(l)}`],t[w],t[`${w}${tn(l)}`]]}})(({theme:e,ownerState:t})=>{const o=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return H({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${yr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${yr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:o,fontSize:e.typography.pxToRem(12)},[`& .${yr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${yr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${yr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${yr.icon}`]:H({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&H({color:e.vars?e.vars.palette.Chip.defaultIconColor:o},t.color!=="default"&&{color:"inherit"})),[`& .${yr.deleteIcon}`]:H({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:Jn(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Jn(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:Jn(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${yr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Jn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${yr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>H({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Jn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${yr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Jn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${yr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>H({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${yr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${yr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${yr.avatar}`]:{marginLeft:4},[`& .${yr.avatarSmall}`]:{marginLeft:2},[`& .${yr.icon}`]:{marginLeft:4},[`& .${yr.iconSmall}`]:{marginLeft:2},[`& .${yr.deleteIcon}`]:{marginRight:5},[`& .${yr.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Jn(e.palette[t.color].main,.7)}`,[`&.${yr.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Jn(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${yr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Jn(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${yr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Jn(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),TZ=dt("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:o}=e,{size:l}=o;return[t.label,t[`label${tn(l)}`]]}})(({ownerState:e})=>H({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function bP(e){return e.key==="Backspace"||e.key==="Delete"}const CZ=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiChip"}),{avatar:h,className:p,clickable:_,color:a="default",component:w,deleteIcon:C,disabled:M=!1,icon:D,label:R,onClick:$,onDelete:j,onKeyDown:B,onKeyUp:K,size:N="medium",variant:U="filled",tabIndex:G,skipFocusWhenDisabled:Y=!1}=l,Q=Bt(l,bZ),re=W.useRef(null),oe=Rr(re,o),de=ke=>{ke.stopPropagation(),j&&j(ke)},ae=ke=>{ke.currentTarget===ke.target&&bP(ke)&&ke.preventDefault(),B&&B(ke)},ye=ke=>{ke.currentTarget===ke.target&&(j&&bP(ke)?j(ke):ke.key==="Escape"&&re.current&&re.current.blur()),K&&K(ke)},Ce=_!==!1&&$?!0:_,Fe=Ce||j?el:w||"div",be=H({},l,{component:Fe,disabled:M,size:N,color:a,iconColor:W.isValidElement(D)&&D.props.color||a,onDelete:!!j,clickable:Ce,variant:U}),we=wZ(be),ue=Fe===el?H({component:w||"div",focusVisibleClassName:we.focusVisible},j&&{disableRipple:!0}):{};let Be=null;j&&(Be=C&&W.isValidElement(C)?W.cloneElement(C,{className:Zt(C.props.className,we.deleteIcon),onClick:de}):he.jsx(_Z,{className:Zt(we.deleteIcon),onClick:de}));let Ae=null;h&&W.isValidElement(h)&&(Ae=W.cloneElement(h,{className:Zt(we.avatar,h.props.className)}));let Se=null;return D&&W.isValidElement(D)&&(Se=W.cloneElement(D,{className:Zt(we.icon,D.props.className)})),he.jsxs(SZ,H({as:Fe,className:Zt(we.root,p),disabled:Ce&&M?!0:void 0,onClick:$,onKeyDown:ae,onKeyUp:ye,ref:oe,tabIndex:Y&&M?-1:G,ownerState:be},ue,Q,{children:[Ae||Se,he.jsx(TZ,{className:Zt(we.label),ownerState:be,children:R}),Be]}))}),yA=CZ,EZ=["items","changeImportance","isLandscape","onChange","isValid"];function kZ(e){const{items:t,changeImportance:o,onChange:l,isValid:h}=e,p=Bt(e,EZ);if(t==null||t.length===0)return null;const _=t.map(a=>{const w=a.getValue({isValid:h});return{label:a.label,onClick:()=>{l(w,o)},disabled:!h(w)}});return he.jsx(f4,H({dense:!0,sx:[{maxHeight:tA,maxWidth:200,overflow:"auto"},...Array.isArray(p.sx)?p.sx:[p.sx]]},p,{children:_.map(a=>he.jsx(yZ,{children:he.jsx(yA,H({},a))},a.label))}))}function PZ(e){return e.view!==null}const MZ=e=>{const{classes:t,isLandscape:o}=e;return xn({root:["root",o&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},mA,t)},IZ=e=>{var t,o;const{wrapperVariant:l,onAccept:h,onClear:p,onCancel:_,onSetToday:a,view:w,views:C,onViewChange:M,value:D,onChange:R,onSelectShortcut:$,isValid:j,isLandscape:B,disabled:K,readOnly:N,children:U,components:G,componentsProps:Y,slots:Q,slotProps:re}=e,oe=Q??F2(G),de=re??Y,ae=MZ(e),ye=(t=oe==null?void 0:oe.actionBar)!=null?t:eZ,Ce=$r({elementType:ye,externalSlotProps:de==null?void 0:de.actionBar,additionalProps:{onAccept:h,onClear:p,onCancel:_,onSetToday:a,actions:l==="desktop"?[]:["cancel","accept"],className:ae.actionBar},ownerState:H({},e,{wrapperVariant:l})}),Fe=he.jsx(ye,H({},Ce)),be=oe==null?void 0:oe.toolbar,we=$r({elementType:be,externalSlotProps:de==null?void 0:de.toolbar,additionalProps:{isLandscape:B,onChange:R,value:D,view:w,onViewChange:M,views:C,disabled:K,readOnly:N,className:ae.toolbar},ownerState:H({},e,{wrapperVariant:l})}),ue=PZ(we)&&be?he.jsx(be,H({},we)):null,Be=U,Ae=oe==null?void 0:oe.tabs,Se=w&&Ae?he.jsx(Ae,H({view:w,onViewChange:M},de==null?void 0:de.tabs)):null,ke=(o=oe==null?void 0:oe.shortcuts)!=null?o:kZ,Ne=$r({elementType:ke,externalSlotProps:de==null?void 0:de.shortcuts,additionalProps:{isValid:j,isLandscape:B,onChange:$,className:ae.shortcuts},ownerState:{isValid:j,isLandscape:B,onChange:$,className:ae.shortcuts,wrapperVariant:l}}),nt=w&&ke?he.jsx(ke,H({},Ne)):null;return{toolbar:ue,content:Be,tabs:Se,actionBar:Fe,shortcuts:nt}},AZ=IZ,DZ=e=>{const{isLandscape:t,classes:o}=e;return xn({root:["root",t&&"landscape"],contentWrapper:["contentWrapper"]},mA,o)},_A=dt("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${A1.toolbar}`]:t.isLandscape?{gridColumn:e.direction==="rtl"?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${A1.shortcuts}`]:t.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:e.direction==="rtl"?3:1,gridRow:"2 / 3"},[`& .${A1.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}));_A.propTypes={as:$e.elementType,ownerState:$e.shape({isLandscape:$e.bool.isRequired}).isRequired,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object])};const zZ=dt("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,t)=>t.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),vA=function(t){const o=gn({props:t,name:"MuiPickersLayout"}),{toolbar:l,content:h,tabs:p,actionBar:_,shortcuts:a}=AZ(o),{sx:w,className:C,isLandscape:M,ref:D,wrapperVariant:R}=o,$=o,j=DZ($);return he.jsxs(_A,{ref:D,sx:w,className:Zt(C,j.root),ownerState:$,children:[M?a:l,M?l:a,he.jsx(zZ,{className:j.contentWrapper,children:R==="desktop"?he.jsxs(W.Fragment,{children:[h,p]}):he.jsxs(W.Fragment,{children:[p,h]})}),_]})},RZ=["props","getOpenDialogAriaText"],LZ=["ownerState"],OZ=["ownerState"],BZ=e=>{var t,o,l,h,p;let{props:_,getOpenDialogAriaText:a}=e,w=Bt(e,RZ);const{slots:C,slotProps:M,className:D,sx:R,format:$,formatDensity:j,timezone:B,label:K,inputRef:N,readOnly:U,disabled:G,autoFocus:Y,localeText:Q}=_,re=kr(),oe=W.useRef(null),de=W.useRef(null),ae=wu(),ye=(t=M==null||(o=M.toolbar)==null?void 0:o.hidden)!=null?t:!1,{open:Ce,actions:Fe,hasUIView:be,layoutProps:we,renderCurrentView:ue,shouldRestoreFocus:Be,fieldProps:Ae}=fA(H({},w,{props:_,inputRef:oe,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),Se=(l=C.inputAdornment)!=null?l:pA,ke=$r({elementType:Se,externalSlotProps:M==null?void 0:M.inputAdornment,additionalProps:{position:"end"},ownerState:_}),Ne=Bt(ke,LZ),nt=(h=C.openPickerButton)!=null?h:Eu,vt=$r({elementType:nt,externalSlotProps:M==null?void 0:M.openPickerButton,additionalProps:{disabled:G||U,onClick:Fe.onOpen,"aria-label":a(Ae.value,re),edge:Ne.position},ownerState:_}),gt=Bt(vt,OZ),rt=C.openPickerIcon,xt=C.field,ht=$r({elementType:xt,externalSlotProps:M==null?void 0:M.field,additionalProps:H({},Ae,ye&&{id:ae},{readOnly:U,disabled:G,className:D,sx:R,format:$,formatDensity:j,timezone:B,label:K,autoFocus:Y&&!_.open,focused:Ce?!0:void 0}),ownerState:_});be&&(ht.InputProps=H({},ht.InputProps,{ref:de,[`${Ne.position}Adornment`]:he.jsx(Se,H({},Ne,{children:he.jsx(nt,H({},gt,{children:he.jsx(rt,H({},M==null?void 0:M.openPickerIcon))}))}))}));const mt=H({textField:C.textField},ht.slots),Ot=(p=C.layout)!=null?p:vA,Nt=Rr(oe,ht.inputRef,N);let at=ae;ye&&(K?at=`${ae}-label`:at=void 0);const Je=H({},M,{toolbar:H({},M==null?void 0:M.toolbar,{titleId:ae}),popper:H({"aria-labelledby":at},M==null?void 0:M.popper)});return{renderPicker:()=>he.jsxs(A2,{localeText:Q,children:[he.jsx(xt,H({},ht,{slots:mt,slotProps:Je,inputRef:Nt})),he.jsx(Bq,H({role:"dialog",placement:"bottom-start",anchorEl:de.current},Fe,{open:Ce,slots:C,slotProps:Je,shouldRestoreFocus:Be,children:he.jsx(Ot,H({},we,Je==null?void 0:Je.layout,{slots:C,slotProps:Je,children:ue()}))}))]})}},FZ=["views","format"],xA=(e,t)=>{let{views:o,format:l}=t,h=Bt(t,FZ);if(l)return l;const p=[],_=[];if(o.forEach(C=>{j0(C)?_.push(C):p.push(C)}),_.length===0)return qk(e,H({views:p},h),!1);if(p.length===0)return Xk(e,H({views:_},h));const a=Xk(e,H({views:_},h));return`${qk(e,H({views:p},h),!1)} ${a}`},bA=W.forwardRef(function(t,o){var l,h,p,_,a;const w=Zs(),C=kr(),M=iA(t,"MuiDesktopDateTimePicker"),D=H({hours:1,minutes:5,seconds:5},M.timeSteps),R=!M.viewRenderers||Object.keys(M.viewRenderers).length===0,$=R?{day:Yc,month:Yc,year:Yc,hours:Yc,minutes:Yc,seconds:Yc,meridiem:Yc}:H({day:sh,month:sh,year:sh,hours:null,minutes:null,seconds:null,meridiem:null},M.viewRenderers),j=(l=M.ampmInClock)!=null?l:!0,B=R?["accept"]:[],K=H({},M,{viewRenderers:$,format:xA(C,M),views:M.ampm?[...M.views,"meridiem"]:M.views,yearsPerRow:(h=M.yearsPerRow)!=null?h:4,ampmInClock:j,timeSteps:D,slots:H({field:X4,openPickerIcon:lW},M.slots),slotProps:H({},M.slotProps,{field:U=>{var G;return H({},mh((G=M.slotProps)==null?void 0:G.field,U),Z4(M),{ref:o})},toolbar:H({hidden:!0,ampmInClock:j,toolbarVariant:R?"desktop":"mobile"},(p=M.slotProps)==null?void 0:p.toolbar),tabs:H({hidden:!0},(_=M.slotProps)==null?void 0:_.tabs),actionBar:H({actions:B},(a=M.slotProps)==null?void 0:a.actionBar)})}),{renderPicker:N}=BZ({props:K,valueManager:qs,valueType:"date-time",getOpenDialogAriaText:w.openDatePickerDialogue,validator:O2});return N()});bA.propTypes={ampm:$e.bool,ampmInClock:$e.bool,autoFocus:$e.bool,className:$e.string,closeOnSelect:$e.bool,components:$e.object,componentsProps:$e.object,dayOfWeekFormatter:$e.func,defaultCalendarMonth:$e.any,defaultValue:$e.any,disabled:$e.bool,disableFuture:$e.bool,disableHighlightToday:$e.bool,disableIgnoringDatePartForTimeValidation:$e.bool,disableOpenPicker:$e.bool,disablePast:$e.bool,displayWeekNumber:$e.bool,fixedWeekNumber:$e.number,format:$e.string,formatDensity:$e.oneOf(["dense","spacious"]),inputRef:$e.oneOfType([$e.func,$e.shape({current:$e.object})]),label:$e.node,loading:$e.bool,localeText:$e.object,maxDate:$e.any,maxDateTime:$e.any,maxTime:$e.any,minDate:$e.any,minDateTime:$e.any,minTime:$e.any,minutesStep:$e.number,monthsPerRow:$e.oneOf([3,4]),onAccept:$e.func,onChange:$e.func,onClose:$e.func,onError:$e.func,onMonthChange:$e.func,onOpen:$e.func,onSelectedSectionsChange:$e.func,onViewChange:$e.func,onYearChange:$e.func,open:$e.bool,openTo:$e.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:$e.oneOf(["landscape","portrait"]),readOnly:$e.bool,reduceAnimations:$e.bool,renderLoading:$e.func,selectedSections:$e.oneOfType([$e.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),$e.number,$e.shape({endIndex:$e.number.isRequired,startIndex:$e.number.isRequired})]),shouldDisableClock:$e.func,shouldDisableDate:$e.func,shouldDisableMonth:$e.func,shouldDisableTime:$e.func,shouldDisableYear:$e.func,showDaysOutsideCurrentMonth:$e.bool,skipDisabled:$e.bool,slotProps:$e.object,slots:$e.object,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object]),timeSteps:$e.shape({hours:$e.number,minutes:$e.number,seconds:$e.number}),timezone:$e.string,value:$e.any,view:$e.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:$e.shape({day:$e.func,hours:$e.func,meridiem:$e.func,minutes:$e.func,month:$e.func,seconds:$e.func,year:$e.func}),views:$e.arrayOf($e.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsPerRow:$e.oneOf([3,4])};function $Z(e){return Sn("MuiDialogContent",e)}_n("MuiDialogContent",["root","dividers"]);const NZ=_n("MuiDialogTitle",["root"]),UZ=NZ,VZ=["className","dividers"],jZ=e=>{const{classes:t,dividers:o}=e;return xn({root:["root",o&&"dividers"]},$Z,t)},WZ=dt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>H({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${UZ.root} + &`]:{paddingTop:0}})),GZ=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiDialogContent"}),{className:h,dividers:p=!1}=l,_=Bt(l,VZ),a=H({},l,{dividers:p}),w=jZ(a);return he.jsx(WZ,H({className:Zt(w.root,h),ownerState:a,ref:o},_))}),HZ=GZ;function qZ(e){return Sn("MuiDialog",e)}const ZZ=_n("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Jf=ZZ,XZ=W.createContext({}),YZ=XZ,KZ=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],JZ=dt(b4,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),QZ=e=>{const{classes:t,scroll:o,maxWidth:l,fullWidth:h,fullScreen:p}=e,_={root:["root"],container:["container",`scroll${tn(o)}`],paper:["paper",`paperScroll${tn(o)}`,`paperWidth${tn(String(l))}`,h&&"paperFullWidth",p&&"paperFullScreen"]};return xn(_,qZ,t)},eX=dt(w4,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),tX=dt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.container,t[`scroll${tn(o.scroll)}`]]}})(({ownerState:e})=>H({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),nX=dt(Ah,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`scrollPaper${tn(o.scroll)}`],t[`paperWidth${tn(String(o.maxWidth))}`],o.fullWidth&&t.paperFullWidth,o.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>H({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${Jf.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${Jf.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Jf.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),rX=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiDialog"}),h=_s(),p={enter:h.transitions.duration.enteringScreen,exit:h.transitions.duration.leavingScreen},{"aria-describedby":_,"aria-labelledby":a,BackdropComponent:w,BackdropProps:C,children:M,className:D,disableEscapeKeyDown:R=!1,fullScreen:$=!1,fullWidth:j=!1,maxWidth:B="sm",onBackdropClick:K,onClose:N,open:U,PaperComponent:G=Ah,PaperProps:Y={},scroll:Q="paper",TransitionComponent:re=Um,transitionDuration:oe=p,TransitionProps:de}=l,ae=Bt(l,KZ),ye=H({},l,{disableEscapeKeyDown:R,fullScreen:$,fullWidth:j,maxWidth:B,scroll:Q}),Ce=QZ(ye),Fe=W.useRef(),be=Ae=>{Fe.current=Ae.target===Ae.currentTarget},we=Ae=>{Fe.current&&(Fe.current=null,K&&K(Ae),N&&N(Ae,"backdropClick"))},ue=wu(a),Be=W.useMemo(()=>({titleId:ue}),[ue]);return he.jsx(eX,H({className:Zt(Ce.root,D),closeAfterTransition:!0,components:{Backdrop:JZ},componentsProps:{backdrop:H({transitionDuration:oe,as:w},C)},disableEscapeKeyDown:R,onClose:N,open:U,ref:o,onClick:we,ownerState:ye},ae,{children:he.jsx(re,H({appear:!0,in:U,timeout:oe,role:"presentation"},de,{children:he.jsx(tX,{className:Zt(Ce.container),onMouseDown:be,ownerState:ye,children:he.jsx(nX,H({as:G,elevation:24,role:"dialog","aria-describedby":_,"aria-labelledby":ue},Y,{className:Zt(Ce.paper,Y.className),ownerState:ye,children:he.jsx(YZ.Provider,{value:Be,children:M})}))})}))}))}),iX=rX,oX=dt(iX)({[`& .${Jf.container}`]:{outline:0},[`& .${Jf.paper}`]:{outline:0,minWidth:eA}}),sX=dt(HZ)({"&:first-of-type":{padding:0}});function aX(e){var t,o;const{children:l,onDismiss:h,open:p,slots:_,slotProps:a}=e,w=(t=_==null?void 0:_.dialog)!=null?t:oX,C=(o=_==null?void 0:_.mobileTransition)!=null?o:Um;return he.jsx(w,H({open:p,onClose:h},a==null?void 0:a.dialog,{TransitionComponent:C,TransitionProps:a==null?void 0:a.mobileTransition,PaperComponent:_==null?void 0:_.mobilePaper,PaperProps:a==null?void 0:a.mobilePaper,children:he.jsx(sX,{children:l})}))}const lX=["props","getOpenDialogAriaText"],cX=e=>{var t,o,l;let{props:h,getOpenDialogAriaText:p}=e,_=Bt(e,lX);const{slots:a,slotProps:w,className:C,sx:M,format:D,formatDensity:R,timezone:$,label:j,inputRef:B,readOnly:K,disabled:N,localeText:U}=h,G=kr(),Y=W.useRef(null),Q=wu(),re=(t=w==null||(o=w.toolbar)==null?void 0:o.hidden)!=null?t:!1,{open:oe,actions:de,layoutProps:ae,renderCurrentView:ye,fieldProps:Ce}=fA(H({},_,{props:h,inputRef:Y,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),Fe=a.field,be=$r({elementType:Fe,externalSlotProps:w==null?void 0:w.field,additionalProps:H({},Ce,re&&{id:Q},!(N||K)&&{onClick:de.onOpen,onKeyDown:YV(de.onOpen)},{readOnly:K??!0,disabled:N,className:C,sx:M,format:D,formatDensity:R,timezone:$,label:j}),ownerState:h});be.inputProps=H({},be.inputProps,{"aria-label":p(Ce.value,G)});const we=H({textField:a.textField},be.slots),ue=(l=a.layout)!=null?l:vA,Be=Rr(Y,be.inputRef,B);let Ae=Q;re&&(j?Ae=`${Q}-label`:Ae=void 0);const Se=H({},w,{toolbar:H({},w==null?void 0:w.toolbar,{titleId:Q}),mobilePaper:H({"aria-labelledby":Ae},w==null?void 0:w.mobilePaper)});return{renderPicker:()=>he.jsxs(A2,{localeText:U,children:[he.jsx(Fe,H({},be,{slots:we,slotProps:Se,inputRef:Be})),he.jsx(aX,H({},de,{open:oe,slots:a,slotProps:Se,children:he.jsx(ue,H({},ae,Se==null?void 0:Se.layout,{slots:a,slotProps:Se,children:ye()}))}))]})}};function uX(e){return Sn("MuiTimeClock",e)}_n("MuiTimeClock",["root","arrowSwitcher"]);const wh=220,Ql=36,Pm={x:wh/2,y:wh/2},wA={x:Pm.x,y:0},dX=wA.x-Pm.x,hX=wA.y-Pm.y,pX=e=>e*(180/Math.PI),SA=(e,t,o)=>{const l=t-Pm.x,h=o-Pm.y,p=Math.atan2(dX,hX)-Math.atan2(l,h);let _=pX(p);_=Math.round(_/e)*e,_%=360;const a=Math.floor(_/e)||0,w=l**2+h**2,C=Math.sqrt(w);return{value:a,distance:C}},fX=(e,t,o=1)=>{const l=o*6;let{value:h}=SA(l,e,t);return h=h*o%60,h},mX=(e,t,o)=>{const{value:l,distance:h}=SA(30,e,t);let p=l||12;return o?p%=12:h<wh/2-Ql&&(p+=12,p%=24),p};function gX(e){return Sn("MuiClockPointer",e)}_n("MuiClockPointer",["root","thumb"]);const yX=["className","hasSelected","isInner","type","viewValue"],_X=e=>{const{classes:t}=e;return xn({root:["root"],thumb:["thumb"]},gX,t)},vX=dt("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>H({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},t.shouldAnimate&&{transition:e.transitions.create(["transform","height"])})),xX=dt("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e,ownerState:t})=>H({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:`calc(50% - ${Ql/2}px)`,border:`${(Ql-4)/2}px solid ${(e.vars||e).palette.primary.main}`,boxSizing:"content-box"},t.hasSelected&&{backgroundColor:(e.vars||e).palette.primary.main}));function bX(e){const t=gn({props:e,name:"MuiClockPointer"}),{className:o,isInner:l,type:h,viewValue:p}=t,_=Bt(t,yX),a=W.useRef(h);W.useEffect(()=>{a.current=h},[h]);const w=H({},t,{shouldAnimate:a.current!==h}),C=_X(w),M=()=>{let R=360/(h==="hours"?12:60)*p;return h==="hours"&&p>12&&(R-=360),{height:Math.round((l?.26:.4)*wh),transform:`rotateZ(${R}deg)`}};return he.jsx(vX,H({style:M(),className:Zt(o,C.root),ownerState:w},_,{children:he.jsx(xX,{ownerState:w,className:C.thumb})}))}function wX(e){return Sn("MuiClock",e)}_n("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton"]);const SX=e=>{const{classes:t}=e;return xn({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton"],pmButton:["pmButton"]},wX,t)},TX=dt("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),CX=dt("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),EX=dt("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),kX=dt("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})(({ownerState:e})=>H({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none"},e.disabled?{}:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}})),PX=dt("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),MX=dt(Eu,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})(({theme:e,ownerState:t})=>H({zIndex:1,position:"absolute",bottom:8,left:8},t.meridiemMode==="am"&&{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}})),IX=dt(Eu,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})(({theme:e,ownerState:t})=>H({zIndex:1,position:"absolute",bottom:8,right:8},t.meridiemMode==="pm"&&{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}));function AX(e){const t=gn({props:e,name:"MuiClock"}),{ampm:o,ampmInClock:l,autoFocus:h,children:p,value:_,handleMeridiemChange:a,isTimeDisabled:w,meridiemMode:C,minutesStep:M=1,onChange:D,selectedId:R,type:$,viewValue:j,disabled:B,readOnly:K,className:N}=t,U=t,G=kr(),Y=Zs(),Q=W.useRef(!1),re=SX(U),oe=w(j,$),de=!o&&$==="hours"&&(j<1||j>12),ae=(ke,Ne)=>{B||K||w(ke,$)||D(ke,Ne)},ye=(ke,Ne)=>{let{offsetX:nt,offsetY:vt}=ke;if(nt===void 0){const rt=ke.target.getBoundingClientRect();nt=ke.changedTouches[0].clientX-rt.left,vt=ke.changedTouches[0].clientY-rt.top}const gt=$==="seconds"||$==="minutes"?fX(nt,vt,M):mX(nt,vt,!!o);ae(gt,Ne)},Ce=ke=>{Q.current=!0,ye(ke,"shallow")},Fe=ke=>{Q.current&&(ye(ke,"finish"),Q.current=!1)},be=ke=>{ke.buttons>0&&ye(ke.nativeEvent,"shallow")},we=ke=>{Q.current&&(Q.current=!1),ye(ke.nativeEvent,"finish")},ue=W.useMemo(()=>$==="hours"?!0:j%5===0,[$,j]),Be=$==="minutes"?M:1,Ae=W.useRef(null);ki(()=>{h&&Ae.current.focus()},[h]);const Se=ke=>{if(!Q.current)switch(ke.key){case"Home":ae(0,"partial"),ke.preventDefault();break;case"End":ae($==="minutes"?59:23,"partial"),ke.preventDefault();break;case"ArrowUp":ae(j+Be,"partial"),ke.preventDefault();break;case"ArrowDown":ae(j-Be,"partial"),ke.preventDefault();break}};return he.jsxs(TX,{className:Zt(N,re.root),children:[he.jsxs(CX,{className:re.clock,children:[he.jsx(kX,{onTouchMove:Ce,onTouchEnd:Fe,onMouseUp:we,onMouseMove:be,ownerState:{disabled:B},className:re.squareMask}),!oe&&he.jsxs(W.Fragment,{children:[he.jsx(PX,{className:re.pin}),_!=null&&he.jsx(bX,{type:$,viewValue:j,isInner:de,hasSelected:ue})]}),he.jsx(EX,{"aria-activedescendant":R,"aria-label":Y.clockLabelText($,_,G),ref:Ae,role:"listbox",onKeyDown:Se,tabIndex:0,className:re.wrapper,children:p})]}),o&&l&&he.jsxs(W.Fragment,{children:[he.jsx(MX,{onClick:K?void 0:()=>a("am"),disabled:B||C===null,ownerState:U,className:re.amButton,children:he.jsx(Qa,{variant:"caption",children:"AM"})}),he.jsx(IX,{disabled:B||C===null,onClick:K?void 0:()=>a("pm"),ownerState:U,className:re.pmButton,children:he.jsx(Qa,{variant:"caption",children:"PM"})})]})]})}function DX(e){return Sn("MuiClockNumber",e)}const Ny=_n("MuiClockNumber",["root","selected","disabled"]),zX=["className","disabled","index","inner","label","selected"],RX=e=>{const{classes:t,selected:o,disabled:l}=e;return xn({root:["root",o&&"selected",l&&"disabled"]},DX,t)},LX=dt("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${Ny.disabled}`]:t.disabled},{[`&.${Ny.selected}`]:t.selected}]})(({theme:e,ownerState:t})=>H({height:Ql,width:Ql,position:"absolute",left:`calc((100% - ${Ql}px) / 2)`,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},[`&.${Ny.selected}`]:{color:(e.vars||e).palette.primary.contrastText},[`&.${Ny.disabled}`]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled}},t.inner&&H({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})));function TA(e){const t=gn({props:e,name:"MuiClockNumber"}),{className:o,disabled:l,index:h,inner:p,label:_,selected:a}=t,w=Bt(t,zX),C=t,M=RX(C),D=h%12/12*Math.PI*2-Math.PI/2,R=(wh-Ql-2)/2*(p?.65:1),$=Math.round(Math.cos(D)*R),j=Math.round(Math.sin(D)*R);return he.jsx(LX,H({className:Zt(o,M.root),"aria-disabled":l?!0:void 0,"aria-selected":a?!0:void 0,role:"option",style:{transform:`translate(${$}px, ${j+(wh-Ql)/2}px`},ownerState:C},w,{children:_}))}const OX=({ampm:e,value:t,getClockNumberText:o,isDisabled:l,selectedId:h,utils:p})=>{const _=t?p.getHours(t):null,a=[],w=e?1:0,C=e?12:23,M=D=>_===null?!1:e?D===12?_===12||_===0:_===D||_-12===D:_===D;for(let D=w;D<=C;D+=1){let R=D.toString();D===0&&(R="00");const $=!e&&(D===0||D>12);R=p.formatNumber(R);const j=M(D);a.push(he.jsx(TA,{id:j?h:void 0,index:D,inner:$,selected:j,disabled:l(D),label:R,"aria-label":o(R)},D))}return a},wP=({utils:e,value:t,isDisabled:o,getClockNumberText:l,selectedId:h})=>{const p=e.formatNumber;return[[5,p("05")],[10,p("10")],[15,p("15")],[20,p("20")],[25,p("25")],[30,p("30")],[35,p("35")],[40,p("40")],[45,p("45")],[50,p("50")],[55,p("55")],[0,p("00")]].map(([_,a],w)=>{const C=_===t;return he.jsx(TA,{label:a,id:C?h:void 0,index:w+1,inner:!1,disabled:o(_),selected:C,"aria-label":l(a)},_)})},BX=["ampm","ampmInClock","autoFocus","components","componentsProps","slots","slotProps","value","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableClock","shouldDisableTime","showViewSwitcher","onChange","defaultValue","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","timezone"],FX=e=>{const{classes:t}=e;return xn({root:["root"],arrowSwitcher:["arrowSwitcher"]},uX,t)},$X=dt($2,{name:"MuiTimeClock",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",position:"relative"}),NX=dt(dA,{name:"MuiTimeClock",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),UX=W.forwardRef(function(t,o){const l=kr(),h=gn({props:t,name:"MuiTimeClock"}),{ampm:p=l.is12HourCycleInCurrentLocale(),ampmInClock:_=!1,autoFocus:a,components:w,componentsProps:C,slots:M,slotProps:D,value:R,disableIgnoringDatePartForTimeValidation:$=!1,maxTime:j,minTime:B,disableFuture:K,disablePast:N,minutesStep:U=1,shouldDisableClock:G,shouldDisableTime:Y,showViewSwitcher:Q,onChange:re,defaultValue:oe,view:de,views:ae=["hours","minutes"],openTo:ye,onViewChange:Ce,focusedView:Fe,onFocusedViewChange:be,className:we,disabled:ue,readOnly:Be,timezone:Ae}=h,Se=Bt(h,BX),ke=M??F2(w),Ne=D??C,{value:nt,handleValueChange:vt,timezone:gt}=jm({name:"TimeClock",timezone:Ae,value:R,defaultValue:oe,onChange:re,valueManager:qs}),rt=Zs(),xt=Cu(gt),{view:ht,setView:mt,previousView:Ot,nextView:Nt,setValueAndGoToNextView:at}=uv({view:de,views:ae,openTo:ye,onViewChange:Ce,onChange:vt,focusedView:Fe,onFocusedViewChange:be}),Je=W.useMemo(()=>nt||l.setSeconds(l.setMinutes(l.setHours(xt,0),0),0),[nt,xt,l]),{meridiemMode:it,handleMeridiemChange:St}=B2(Je,p,at),Gt=W.useCallback((Ut,$t)=>{const Lt=sv($,l),un=$t==="hours"||$t==="minutes"&&ae.includes("seconds"),kn=({start:dn,end:En})=>!(B&&Lt(B,En)||j&&Lt(dn,j)||K&&Lt(dn,xt)||N&&Lt(xt,un?En:dn)),Hn=(dn,En=1)=>{if(dn%En!==0||G!=null&&G(dn,$t))return!1;if(Y)switch($t){case"hours":return!Y(l.setHours(Je,dn),"hours");case"minutes":return!Y(l.setMinutes(Je,dn),"minutes");case"seconds":return!Y(l.setSeconds(Je,dn),"seconds");default:return!1}return!0};switch($t){case"hours":{const dn=Cm(Ut,it,p),En=l.setHours(Je,dn),Tn=l.setSeconds(l.setMinutes(En,0),0),sn=l.setSeconds(l.setMinutes(En,59),59);return!kn({start:Tn,end:sn})||!Hn(dn)}case"minutes":{const dn=l.setMinutes(Je,Ut),En=l.setSeconds(dn,0),Tn=l.setSeconds(dn,59);return!kn({start:En,end:Tn})||!Hn(Ut,U)}case"seconds":{const dn=l.setSeconds(Je,Ut);return!kn({start:dn,end:dn})||!Hn(Ut)}default:throw new Error("not supported")}},[p,Je,$,j,it,B,U,G,Y,l,K,N,xt,ae]),He=wu(),Vt=W.useMemo(()=>{switch(ht){case"hours":{const Ut=($t,Lt)=>{const un=Cm($t,it,p);at(l.setHours(Je,un),Lt)};return{onChange:Ut,viewValue:l.getHours(Je),children:OX({value:nt,utils:l,ampm:p,onChange:Ut,getClockNumberText:rt.hoursClockNumberText,isDisabled:$t=>ue||Gt($t,"hours"),selectedId:He})}}case"minutes":{const Ut=l.getMinutes(Je),$t=(Lt,un)=>{at(l.setMinutes(Je,Lt),un)};return{viewValue:Ut,onChange:$t,children:wP({utils:l,value:Ut,onChange:$t,getClockNumberText:rt.minutesClockNumberText,isDisabled:Lt=>ue||Gt(Lt,"minutes"),selectedId:He})}}case"seconds":{const Ut=l.getSeconds(Je),$t=(Lt,un)=>{at(l.setSeconds(Je,Lt),un)};return{viewValue:Ut,onChange:$t,children:wP({utils:l,value:Ut,onChange:$t,getClockNumberText:rt.secondsClockNumberText,isDisabled:Lt=>ue||Gt(Lt,"seconds"),selectedId:He})}}default:throw new Error("You must provide the type for ClockView")}},[ht,l,nt,p,rt.hoursClockNumberText,rt.minutesClockNumberText,rt.secondsClockNumberText,it,at,Je,Gt,He,ue]),lt=h,jt=FX(lt);return he.jsxs($X,H({ref:o,className:Zt(jt.root,we),ownerState:lt},Se,{children:[he.jsx(AX,H({autoFocus:a??!!Fe,ampmInClock:_&&ae.includes("hours"),value:nt,type:ht,ampm:p,minutesStep:U,isTimeDisabled:Gt,meridiemMode:it,handleMeridiemChange:St,selectedId:He,disabled:ue,readOnly:Be},Vt)),Q&&he.jsx(NX,{className:jt.arrowSwitcher,slots:ke,slotProps:Ne,onGoToPrevious:()=>mt(Ot),isPreviousDisabled:!Ot,previousLabel:rt.openPreviousView,onGoToNext:()=>mt(Nt),isNextDisabled:!Nt,nextLabel:rt.openNextView,ownerState:lt})]}))}),ah=({view:e,onViewChange:t,focusedView:o,onFocusedViewChange:l,views:h,value:p,defaultValue:_,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minTime:R,maxTime:$,shouldDisableTime:j,shouldDisableClock:B,minutesStep:K,ampm:N,ampmInClock:U,components:G,componentsProps:Y,slots:Q,slotProps:re,readOnly:oe,disabled:de,sx:ae,autoFocus:ye,showViewSwitcher:Ce,disableIgnoringDatePartForTimeValidation:Fe,timezone:be})=>he.jsx(UX,{view:e,onViewChange:t,focusedView:o&&j0(o)?o:null,onFocusedViewChange:l,views:h.filter(j0),value:p,defaultValue:_,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minTime:R,maxTime:$,shouldDisableTime:j,shouldDisableClock:B,minutesStep:K,ampm:N,ampmInClock:U,components:G,componentsProps:Y,slots:Q,slotProps:re,readOnly:oe,disabled:de,sx:ae,autoFocus:ye,showViewSwitcher:Ce,disableIgnoringDatePartForTimeValidation:Fe,timezone:be}),CA=W.forwardRef(function(t,o){var l,h,p;const _=Zs(),a=kr(),w=iA(t,"MuiMobileDateTimePicker"),C=H({day:sh,month:sh,year:sh,hours:ah,minutes:ah,seconds:ah},w.viewRenderers),M=(l=w.ampmInClock)!=null?l:!1,D=H({},w,{viewRenderers:C,format:xA(a,w),ampmInClock:M,slots:H({field:X4},w.slots),slotProps:H({},w.slotProps,{field:$=>{var j;return H({},mh((j=w.slotProps)==null?void 0:j.field,$),Z4(w),{ref:o})},toolbar:H({hidden:!1,ampmInClock:M},(h=w.slotProps)==null?void 0:h.toolbar),tabs:H({hidden:!1},(p=w.slotProps)==null?void 0:p.tabs)})}),{renderPicker:R}=cX({props:D,valueManager:qs,valueType:"date-time",getOpenDialogAriaText:_.openDatePickerDialogue,validator:O2});return R()});CA.propTypes={ampm:$e.bool,ampmInClock:$e.bool,autoFocus:$e.bool,className:$e.string,closeOnSelect:$e.bool,components:$e.object,componentsProps:$e.object,dayOfWeekFormatter:$e.func,defaultCalendarMonth:$e.any,defaultValue:$e.any,disabled:$e.bool,disableFuture:$e.bool,disableHighlightToday:$e.bool,disableIgnoringDatePartForTimeValidation:$e.bool,disableOpenPicker:$e.bool,disablePast:$e.bool,displayWeekNumber:$e.bool,fixedWeekNumber:$e.number,format:$e.string,formatDensity:$e.oneOf(["dense","spacious"]),inputRef:$e.oneOfType([$e.func,$e.shape({current:$e.object})]),label:$e.node,loading:$e.bool,localeText:$e.object,maxDate:$e.any,maxDateTime:$e.any,maxTime:$e.any,minDate:$e.any,minDateTime:$e.any,minTime:$e.any,minutesStep:$e.number,monthsPerRow:$e.oneOf([3,4]),onAccept:$e.func,onChange:$e.func,onClose:$e.func,onError:$e.func,onMonthChange:$e.func,onOpen:$e.func,onSelectedSectionsChange:$e.func,onViewChange:$e.func,onYearChange:$e.func,open:$e.bool,openTo:$e.oneOf(["day","hours","minutes","month","seconds","year"]),orientation:$e.oneOf(["landscape","portrait"]),readOnly:$e.bool,reduceAnimations:$e.bool,renderLoading:$e.func,selectedSections:$e.oneOfType([$e.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),$e.number,$e.shape({endIndex:$e.number.isRequired,startIndex:$e.number.isRequired})]),shouldDisableClock:$e.func,shouldDisableDate:$e.func,shouldDisableMonth:$e.func,shouldDisableTime:$e.func,shouldDisableYear:$e.func,showDaysOutsideCurrentMonth:$e.bool,slotProps:$e.object,slots:$e.object,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object]),timezone:$e.string,value:$e.any,view:$e.oneOf(["day","hours","minutes","month","seconds","year"]),viewRenderers:$e.shape({day:$e.func,hours:$e.func,minutes:$e.func,month:$e.func,seconds:$e.func,year:$e.func}),views:$e.arrayOf($e.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsPerRow:$e.oneOf([3,4])};const VX=["desktopModeMediaQuery"],jX=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:h=KV}=l,p=Bt(l,VX);return SV(h,{defaultMatches:!0})?he.jsx(bA,H({ref:o},p)):he.jsx(CA,H({ref:o},p))});function WX(){return W.createElement(A2,{dateAdapter:vV},W.createElement(oV,{sx:{width:270},components:["DateTimePicker"]},W.createElement(jX,{label:"Choose Time",viewRenderers:{hours:ah,minutes:ah,seconds:ah}})))}function GX(e){return Sn("MuiListSubheader",e)}_n("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const HX=["className","color","component","disableGutters","disableSticky","inset"],qX=e=>{const{classes:t,color:o,disableGutters:l,inset:h,disableSticky:p}=e,_={root:["root",o!=="default"&&`color${tn(o)}`,!l&&"gutters",h&&"inset",!p&&"sticky"]};return xn(_,GX,t)},ZX=dt("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="default"&&t[`color${tn(o.color)}`],!o.disableGutters&&t.gutters,o.inset&&t.inset,!o.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>H({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),EA=W.forwardRef(function(t,o){const l=gn({props:t,name:"MuiListSubheader"}),{className:h,color:p="default",component:_="li",disableGutters:a=!1,disableSticky:w=!1,inset:C=!1}=l,M=Bt(l,HX),D=H({},l,{color:p,component:_,disableGutters:a,disableSticky:w,inset:C}),R=qX(D);return he.jsx(ZX,H({as:_,className:Zt(R.root,h),ref:o,ownerState:D},M))});EA.muiSkipListHighlight=!0;const XX=EA,YX=ys(he.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function KX(e){return Sn("MuiAutocomplete",e)}const JX=_n("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),nr=JX;var SP,TP;const QX=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],eY=["ref"],tY=e=>{const{classes:t,disablePortal:o,expanded:l,focused:h,fullWidth:p,hasClearIcon:_,hasPopupIcon:a,inputFocused:w,popupOpen:C,size:M}=e,D={root:["root",l&&"expanded",h&&"focused",p&&"fullWidth",_&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",w&&"inputFocused"],tag:["tag",`tagSize${tn(M)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",C&&"popupIndicatorOpen"],popper:["popper",o&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return xn(D,KX,t)},nY=dt("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e,{fullWidth:l,hasClearIcon:h,hasPopupIcon:p,inputFocused:_,size:a}=o;return[{[`& .${nr.tag}`]:t.tag},{[`& .${nr.tag}`]:t[`tagSize${tn(a)}`]},{[`& .${nr.inputRoot}`]:t.inputRoot},{[`& .${nr.input}`]:t.input},{[`& .${nr.input}`]:_&&t.inputFocused},t.root,l&&t.fullWidth,p&&t.hasPopupIcon,h&&t.hasClearIcon]}})(({ownerState:e})=>H({[`&.${nr.focused} .${nr.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${nr.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${nr.tag}`]:H({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${nr.inputRoot}`]:{flexWrap:"wrap",[`.${nr.hasPopupIcon}&, .${nr.hasClearIcon}&`]:{paddingRight:26+4},[`.${nr.hasPopupIcon}.${nr.hasClearIcon}&`]:{paddingRight:52+4},[`& .${nr.input}`]:{width:0,minWidth:30}},[`& .${Ul.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Ul.root}.${Oo.sizeSmall}`]:{[`& .${Ul.input}`]:{padding:"2px 4px 3px 0"}},[`& .${la.root}`]:{padding:9,[`.${nr.hasPopupIcon}&, .${nr.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${nr.hasPopupIcon}.${nr.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${nr.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${nr.endAdornment}`]:{right:9}},[`& .${la.root}.${Oo.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${nr.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Bo.root}`]:{paddingTop:19,paddingLeft:8,[`.${nr.hasPopupIcon}&, .${nr.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${nr.hasPopupIcon}.${nr.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${Bo.input}`]:{padding:"7px 4px"},[`& .${nr.endAdornment}`]:{right:9}},[`& .${Bo.root}.${Oo.sizeSmall}`]:{paddingBottom:1,[`& .${Bo.input}`]:{padding:"2.5px 4px"}},[`& .${Oo.hiddenLabel}`]:{paddingTop:8},[`& .${Bo.root}.${Oo.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${nr.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Bo.root}.${Oo.hiddenLabel}.${Oo.sizeSmall}`]:{[`& .${nr.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${nr.input}`]:H({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),rY=dt("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),iY=dt(Eu,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),oY=dt(Eu,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>H({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>H({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),sY=dt(N2,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${nr.option}`]:t.option},t.popper,o.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>H({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),aY=dt(Ah,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>H({},e.typography.body1,{overflow:"auto"})),lY=dt("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),cY=dt("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),uY=dt("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${nr.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${nr.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${nr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${nr.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${nr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Jn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),dY=dt(XX,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),hY=dt("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${nr.option}`]:{paddingLeft:24}}),pY=W.forwardRef(function(t,o){var l,h,p,_;const a=gn({props:t,name:"MuiAutocomplete"}),{autoComplete:w=!1,autoHighlight:C=!1,autoSelect:M=!1,blurOnSelect:D=!1,ChipProps:R,className:$,clearIcon:j=SP||(SP=he.jsx(YX,{fontSize:"small"})),clearOnBlur:B=!a.freeSolo,clearOnEscape:K=!1,clearText:N="Clear",closeText:U="Close",componentsProps:G={},defaultValue:Y=a.multiple?[]:null,disableClearable:Q=!1,disableCloseOnSelect:re=!1,disabled:oe=!1,disabledItemsFocusable:de=!1,disableListWrap:ae=!1,disablePortal:ye=!1,filterSelectedOptions:Ce=!1,forcePopupIcon:Fe="auto",freeSolo:be=!1,fullWidth:we=!1,getLimitTagsText:ue=Qe=>`+${Qe}`,getOptionLabel:Be=Qe=>{var ot;return(ot=Qe.label)!=null?ot:Qe},groupBy:Ae,handleHomeEndKeys:Se=!a.freeSolo,includeInputInList:ke=!1,limitTags:Ne=-1,ListboxComponent:nt="ul",ListboxProps:vt,loading:gt=!1,loadingText:rt="Loading…",multiple:xt=!1,noOptionsText:ht="No options",openOnFocus:mt=!1,openText:Ot="Open",PaperComponent:Nt=Ah,PopperComponent:at=N2,popupIcon:Je=TP||(TP=he.jsx(E4,{})),readOnly:it=!1,renderGroup:St,renderInput:Gt,renderOption:He,renderTags:Vt,selectOnFocus:lt=!a.freeSolo,size:jt="medium",slotProps:Ut={}}=a,$t=Bt(a,QX),{getRootProps:Lt,getInputProps:un,getInputLabelProps:kn,getPopupIndicatorProps:Hn,getClearProps:dn,getTagProps:En,getListboxProps:Tn,getOptionProps:sn,value:an,dirty:ln,expanded:An,id:Ht,popupOpen:nn,focused:bn,focusedTag:$n,anchorEl:Zn,setAnchorEl:Ar,inputValue:Nr,groupedOptions:ge}=P6(H({},a,{componentName:"Autocomplete"})),J=!Q&&!oe&&ln&&!it,ee=(!be||Fe===!0)&&Fe!==!1,{onMouseDown:_e}=un(),{ref:Me}=vt??{},Le=Tn(),{ref:We}=Le,je=Bt(Le,eY),Oe=Rr(We,Me),Ge=H({},a,{disablePortal:ye,expanded:An,focused:bn,fullWidth:we,hasClearIcon:J,hasPopupIcon:ee,inputFocused:$n===-1,popupOpen:nn,size:jt}),bt=tY(Ge);let zt;if(xt&&an.length>0){const Qe=ot=>H({className:bt.tag,disabled:oe},En(ot));Vt?zt=Vt(an,Qe,Ge):zt=an.map((ot,Jt)=>he.jsx(yA,H({label:Be(ot),size:jt},Qe({index:Jt}),R)))}if(Ne>-1&&Array.isArray(zt)){const Qe=zt.length-Ne;!bn&&Qe>0&&(zt=zt.splice(0,Ne),zt.push(he.jsx("span",{className:bt.tag,children:ue(Qe)},zt.length)))}const Mn=St||(Qe=>he.jsxs("li",{children:[he.jsx(dY,{className:bt.groupLabel,ownerState:Ge,component:"div",children:Qe.group}),he.jsx(hY,{className:bt.groupUl,ownerState:Ge,children:Qe.children})]},Qe.key)),Pn=He||((Qe,ot)=>he.jsx("li",H({},Qe,{children:Be(ot)}))),Dn=(Qe,ot)=>{const Jt=sn({option:Qe,index:ot});return Pn(H({},Jt,{className:bt.option}),Qe,{selected:Jt["aria-selected"],index:ot,inputValue:Nr})},Nn=(l=Ut.clearIndicator)!=null?l:G.clearIndicator,sr=(h=Ut.paper)!=null?h:G.paper,_r=(p=Ut.popper)!=null?p:G.popper,Ur=(_=Ut.popupIndicator)!=null?_:G.popupIndicator;return he.jsxs(W.Fragment,{children:[he.jsx(nY,H({ref:o,className:Zt(bt.root,$),ownerState:Ge},Lt($t),{children:Gt({id:Ht,disabled:oe,fullWidth:!0,size:jt==="small"?"small":void 0,InputLabelProps:kn(),InputProps:H({ref:Ar,className:bt.inputRoot,startAdornment:zt,onClick:Qe=>{Qe.target===Qe.currentTarget&&_e(Qe)}},(J||ee)&&{endAdornment:he.jsxs(rY,{className:bt.endAdornment,ownerState:Ge,children:[J?he.jsx(iY,H({},dn(),{"aria-label":N,title:N,ownerState:Ge},Nn,{className:Zt(bt.clearIndicator,Nn==null?void 0:Nn.className),children:j})):null,ee?he.jsx(oY,H({},Hn(),{disabled:oe,"aria-label":nn?U:Ot,title:nn?U:Ot,ownerState:Ge},Ur,{className:Zt(bt.popupIndicator,Ur==null?void 0:Ur.className),children:Je})):null]})}),inputProps:H({className:bt.input,disabled:oe,readOnly:it},un())})})),Zn?he.jsx(sY,H({as:at,disablePortal:ye,style:{width:Zn?Zn.clientWidth:null},ownerState:Ge,role:"presentation",anchorEl:Zn,open:nn},_r,{className:Zt(bt.popper,_r==null?void 0:_r.className),children:he.jsxs(aY,H({ownerState:Ge,as:Nt},sr,{className:Zt(bt.paper,sr==null?void 0:sr.className),children:[gt&&ge.length===0?he.jsx(lY,{className:bt.loading,ownerState:Ge,children:rt}):null,ge.length===0&&!be&&!gt?he.jsx(cY,{className:bt.noOptions,ownerState:Ge,role:"presentation",onMouseDown:Qe=>{Qe.preventDefault()},children:ht}):null,ge.length>0?he.jsx(uY,H({as:nt,className:bt.listbox,ownerState:Ge},je,vt,{ref:Oe,children:ge.map((Qe,ot)=>Ae?Mn({key:Qe.key,group:Qe.group,children:Qe.options.map((Jt,hn)=>Dn(Jt,Qe.index+hn))}):Dn(Qe,ot))})):null]}))})):null]})}),fY=pY;function mY(){return W.createElement(fY,{multiple:!0,limitTags:2,id:"multiple-limit-tags",options:gY,getOptionLabel:e=>e.title,renderInput:e=>W.createElement(P4,{...e,label:"Preference",placeholder:"Favorites"}),sx:{width:"270px"}})}const gY=[{title:"Parks"},{title:"WIFI"},{title:"Bench"},{title:"Cafe"},{title:"Canteen"},{title:"Library"},{title:"Landscape"}],yY=N3(),_Y=D7({themeId:Fm,defaultTheme:yY,defaultClassName:"MuiBox-root",generateClassName:KI.generate}),vY=_Y;function xY(){const[e,t]=W.useState(""),o=l=>{const h=l.target.value.replace(/\D/g,"");t(h)};return W.createElement(vY,{sx:{display:"flex",flexWrap:"wrap"}},W.createElement("div",null,W.createElement(h4,{sx:{m:1,width:270},variant:"outlined"},W.createElement(x2,{id:"outlined-adornment-weight",value:e,onChange:o,endAdornment:W.createElement(pA,{position:"end"},"meter"),"aria-describedby":"outlined-weight-helper-text",inputProps:{"aria-label":"meter"}}))))}function bY({inputValues:e,setInputValues:t}){return Ft.createElement("div",null,Ft.createElement("img",{src:"/static/images/menu.png",className:"menu-button",alt:"Menu button"}),Ft.createElement("div",{className:"PlanWin"},Ft.createElement("div",{className:"PlanSet"},Ft.createElement("div",{className:"green-bar"},Ft.createElement("span",{className:"text_bar"},"Walking Setting")),Ft.createElement("div",{className:"start-place"},Ft.createElement("span",{className:"text_bar_3"},"Start Place:"),Ft.createElement(a9,{inputValues:e,setInputValues:t})),Ft.createElement("div",{className:"start-time"},Ft.createElement("span",{className:"text_bar_3"},"Start Time:"),Ft.createElement(WX,null)),Ft.createElement("div",{className:"walk-duration"},Ft.createElement("span",{className:"text_bar_3"},"Distance:"),Ft.createElement("span",{className:"spacer1"}," "),Ft.createElement(xY,null)),Ft.createElement("div",{className:"preference"},Ft.createElement("span",{className:"text_bar_3"},"Preference:"),Ft.createElement(mY,null)),Ft.createElement("div",{className:"gain-route"},Ft.createElement("button",{className:"gainroute-button"},"Gain a Route"))),Ft.createElement("div",{className:"PlanMap"},Ft.createElement("div",{className:"additional-blocks"},Ft.createElement("div",{className:"additional-block-text"},Ft.createElement("span",{className:"text_bar_2"},"Choose Position")),Ft.createElement("div",{className:"additional-block-close"},Ft.createElement("img",{src:"/static/images/close.png",className:"close-button",alt:"Mclose button"}))),Ft.createElement(j8,{inputValues:e}))))}const wY=()=>{const[e,t]=W.useState({first_name:"",last_name:"",email:"",address:"",password:""}),o=h=>{t({...e,[h.target.name]:h.target.value})},l=async h=>{h.preventDefault(),W_.post("/users",e).then(p=>{console.log(p)}).catch(p=>{p.response?(console.log(p.response),console.log("server responded")):p.request?console.log("network error"):console.log(p)})};return Ft.createElement("div",{className:"login-area"},Ft.createElement("form",{onSubmit:l},Ft.createElement("div",null,Ft.createElement("label",{htmlFor:"first_name"},"First Name:"),Ft.createElement("input",{type:"text",name:"first_name",id:"first_name",value:e.first_name,onChange:o})),Ft.createElement("div",null,Ft.createElement("label",{htmlFor:"last_name"},"Last Name:"),Ft.createElement("input",{type:"text",name:"last_name",value:e.last_name,onChange:o})),Ft.createElement("div",null,Ft.createElement("label",{htmlFor:"email"},"Email:"),Ft.createElement("input",{type:"text",name:"email",id:"email",value:e.email,onChange:o})),Ft.createElement("div",null,Ft.createElement("label",{htmlFor:"address"},"Address:"),Ft.createElement("input",{type:"text",name:"address",id:"address",value:e.address,onChange:o})),Ft.createElement("div",null,Ft.createElement("label",{htmlFor:"password"},"Password:"),Ft.createElement("input",{type:"text",name:"password",id:"password",value:e.password,onChange:o})),Ft.createElement("button",{type:"submit",className:"submit-button"},"Submit")))};function SY(){const[e,t]=W.useState({latitude:"",longitude:""}),o=h=>{t({...e,[h.target.name]:h.target.value})},l=h=>{h.preventDefault(),W_.post("/users",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(p=>{console.log(p.data)}).catch(p=>{p.response?(console.log(p.response),console.log("server responded with error")):p.request?console.log("network error"):console.log(p)})};return Ft.createElement("div",{className:"comms"},Ft.createElement("form",{onSubmit:l},Ft.createElement("label",{htmlFor:"latitude"},"Latitude:"),Ft.createElement("input",{type:"text",name:"latitude",onChange:o}),Ft.createElement("label",{htmlFor:"longitude"},"Longitude:"),Ft.createElement("input",{type:"text",name:"longitude",onChange:o}),Ft.createElement("button",{type:"submit"},"Submit")))}const TY=()=>{const[e,t]=W.useState({latitude:"",longitude:"",distance:""}),o=h=>{t({...e,[h.target.name]:h.target.value})},l=h=>{h.preventDefault(),W_.post("/users",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(p=>{console.log(p.data)}).catch(p=>{p.response?(console.log(p.response),console.log("server responded")):p.request?console.log("network error"):console.log(p)})};return Ft.createElement("form",{onSubmit:l},Ft.createElement("div",null,Ft.createElement("label",{htmlFor:"latitude"},"Latitude:"),Ft.createElement("input",{type:"text",name:"latitude",onChange:o})),Ft.createElement("div",null,Ft.createElement("label",{htmlFor:"longitude"},"Longitude:"),Ft.createElement("input",{type:"text",name:"longitude",onChange:o})),Ft.createElement("div",null,Ft.createElement("label",{htmlFor:"distance"},"Distance:"),Ft.createElement("input",{type:"text",name:"distance",onChange:o})),Ft.createElement("button",{type:"submit"},"Submit"))};function CY(){const[e,t]=W.useState({startLatitude:-73.98786664009094,startLongitude:40.74218481889335,endLatitude:0,endLongitude:0});return Ft.createElement("div",null,Ft.createElement(iO,null,Ft.createElement(nO,null,Ft.createElement(zd,{exact:!0,path:"/",element:Ft.createElement(bY,{inputValues:e,setInputValues:t})}),Ft.createElement(zd,{path:"/login",element:Ft.createElement(wY,null)}),Ft.createElement(zd,{path:"/comms",element:Ft.createElement(SY,null)}),Ft.createElement(zd,{path:"/latlondis",element:Ft.createElement(TY,null)}),Ft.createElement(zd,{path:"*",element:Ft.createElement(EY,null)}))))}function EY(){return Ft.createElement("h2",null,"The requested page does not exist")}D1.createRoot(document.getElementById("root")).render(Ft.createElement(Ft.StrictMode,null,Ft.createElement(CY,null)));
