function eM(e,t){for(var o=0;o<t.length;o++){const l=t[o];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in e)){const p=Object.getOwnPropertyDescriptor(l,d);p&&Object.defineProperty(e,d,p.get?p:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var TS={exports:{}},G0={},CS={exports:{}},rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1=Symbol.for("react.element"),tM=Symbol.for("react.portal"),nM=Symbol.for("react.fragment"),rM=Symbol.for("react.strict_mode"),iM=Symbol.for("react.profiler"),oM=Symbol.for("react.provider"),sM=Symbol.for("react.context"),aM=Symbol.for("react.forward_ref"),lM=Symbol.for("react.suspense"),cM=Symbol.for("react.memo"),uM=Symbol.for("react.lazy"),y5=Symbol.iterator;function dM(e){return e===null||typeof e!="object"?null:(e=y5&&e[y5]||e["@@iterator"],typeof e=="function"?e:null)}var ES={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kS=Object.assign,PS={};function Ch(e,t,o){this.props=e,this.context=t,this.refs=PS,this.updater=o||ES}Ch.prototype.isReactComponent={};Ch.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ch.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function MS(){}MS.prototype=Ch.prototype;function Zv(e,t,o){this.props=e,this.context=t,this.refs=PS,this.updater=o||ES}var Xv=Zv.prototype=new MS;Xv.constructor=Zv;kS(Xv,Ch.prototype);Xv.isPureReactComponent=!0;var _5=Array.isArray,IS=Object.prototype.hasOwnProperty,Yv={current:null},AS={key:!0,ref:!0,__self:!0,__source:!0};function DS(e,t,o){var l,d={},p=null,y=null;if(t!=null)for(l in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(p=""+t.key),t)IS.call(t,l)&&!AS.hasOwnProperty(l)&&(d[l]=t[l]);var a=arguments.length-2;if(a===1)d.children=o;else if(1<a){for(var w=Array(a),C=0;C<a;C++)w[C]=arguments[C+2];d.children=w}if(e&&e.defaultProps)for(l in a=e.defaultProps,a)d[l]===void 0&&(d[l]=a[l]);return{$$typeof:M1,type:e,key:p,ref:y,props:d,_owner:Yv.current}}function hM(e,t){return{$$typeof:M1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kv(e){return typeof e=="object"&&e!==null&&e.$$typeof===M1}function pM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(o){return t[o]})}var x5=/\/+/g;function V2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pM(""+e.key):t.toString(36)}function jg(e,t,o,l,d){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(p){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case M1:case tM:y=!0}}if(y)return y=e,d=d(y),e=l===""?"."+V2(y,0):l,_5(d)?(o="",e!=null&&(o=e.replace(x5,"$&/")+"/"),jg(d,t,o,"",function(C){return C})):d!=null&&(Kv(d)&&(d=hM(d,o+(!d.key||y&&y.key===d.key?"":(""+d.key).replace(x5,"$&/")+"/")+e)),t.push(d)),1;if(y=0,l=l===""?".":l+":",_5(e))for(var a=0;a<e.length;a++){p=e[a];var w=l+V2(p,a);y+=jg(p,t,o,w,d)}else if(w=dM(e),typeof w=="function")for(e=w.call(e),a=0;!(p=e.next()).done;)p=p.value,w=l+V2(p,a++),y+=jg(p,t,o,w,d);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function fg(e,t,o){if(e==null)return e;var l=[],d=0;return jg(e,l,"","",function(p){return t.call(o,p,d++)}),l}function fM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(o){(e._status===0||e._status===-1)&&(e._status=1,e._result=o)},function(o){(e._status===0||e._status===-1)&&(e._status=2,e._result=o)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var oo={current:null},Ug={transition:null},mM={ReactCurrentDispatcher:oo,ReactCurrentBatchConfig:Ug,ReactCurrentOwner:Yv};rr.Children={map:fg,forEach:function(e,t,o){fg(e,function(){t.apply(this,arguments)},o)},count:function(e){var t=0;return fg(e,function(){t++}),t},toArray:function(e){return fg(e,function(t){return t})||[]},only:function(e){if(!Kv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rr.Component=Ch;rr.Fragment=nM;rr.Profiler=iM;rr.PureComponent=Zv;rr.StrictMode=rM;rr.Suspense=lM;rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mM;rr.cloneElement=function(e,t,o){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=kS({},e.props),d=e.key,p=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,y=Yv.current),t.key!==void 0&&(d=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(w in t)IS.call(t,w)&&!AS.hasOwnProperty(w)&&(l[w]=t[w]===void 0&&a!==void 0?a[w]:t[w])}var w=arguments.length-2;if(w===1)l.children=o;else if(1<w){a=Array(w);for(var C=0;C<w;C++)a[C]=arguments[C+2];l.children=a}return{$$typeof:M1,type:e.type,key:d,ref:p,props:l,_owner:y}};rr.createContext=function(e){return e={$$typeof:sM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oM,_context:e},e.Consumer=e};rr.createElement=DS;rr.createFactory=function(e){var t=DS.bind(null,e);return t.type=e,t};rr.createRef=function(){return{current:null}};rr.forwardRef=function(e){return{$$typeof:aM,render:e}};rr.isValidElement=Kv;rr.lazy=function(e){return{$$typeof:uM,_payload:{_status:-1,_result:e},_init:fM}};rr.memo=function(e,t){return{$$typeof:cM,type:e,compare:t===void 0?null:t}};rr.startTransition=function(e){var t=Ug.transition;Ug.transition={};try{e()}finally{Ug.transition=t}};rr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};rr.useCallback=function(e,t){return oo.current.useCallback(e,t)};rr.useContext=function(e){return oo.current.useContext(e)};rr.useDebugValue=function(){};rr.useDeferredValue=function(e){return oo.current.useDeferredValue(e)};rr.useEffect=function(e,t){return oo.current.useEffect(e,t)};rr.useId=function(){return oo.current.useId()};rr.useImperativeHandle=function(e,t,o){return oo.current.useImperativeHandle(e,t,o)};rr.useInsertionEffect=function(e,t){return oo.current.useInsertionEffect(e,t)};rr.useLayoutEffect=function(e,t){return oo.current.useLayoutEffect(e,t)};rr.useMemo=function(e,t){return oo.current.useMemo(e,t)};rr.useReducer=function(e,t,o){return oo.current.useReducer(e,t,o)};rr.useRef=function(e){return oo.current.useRef(e)};rr.useState=function(e){return oo.current.useState(e)};rr.useSyncExternalStore=function(e,t,o){return oo.current.useSyncExternalStore(e,t,o)};rr.useTransition=function(){return oo.current.useTransition()};rr.version="18.2.0";CS.exports=rr;var W=CS.exports;const Fo=tl(W),Qf=eM({__proto__:null,default:Fo},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gM=W,yM=Symbol.for("react.element"),_M=Symbol.for("react.fragment"),xM=Object.prototype.hasOwnProperty,vM=gM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bM={key:!0,ref:!0,__self:!0,__source:!0};function zS(e,t,o){var l,d={},p=null,y=null;o!==void 0&&(p=""+o),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(y=t.ref);for(l in t)xM.call(t,l)&&!bM.hasOwnProperty(l)&&(d[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)d[l]===void 0&&(d[l]=t[l]);return{$$typeof:yM,type:e,key:p,ref:y,props:d,_owner:vM.current}}G0.Fragment=_M;G0.jsx=zS;G0.jsxs=zS;TS.exports=G0;var ee=TS.exports,Dx={},RS={exports:{}},Go={},LS={exports:{}},OS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Se,ke){var Ne=Se.length;Se.push(ke);e:for(;0<Ne;){var nt=Ne-1>>>1,xt=Se[nt];if(0<d(xt,ke))Se[nt]=ke,Se[Ne]=xt,Ne=nt;else break e}}function o(Se){return Se.length===0?null:Se[0]}function l(Se){if(Se.length===0)return null;var ke=Se[0],Ne=Se.pop();if(Ne!==ke){Se[0]=Ne;e:for(var nt=0,xt=Se.length,gt=xt>>>1;nt<gt;){var rt=2*(nt+1)-1,vt=Se[rt],ht=rt+1,mt=Se[ht];if(0>d(vt,Ne))ht<xt&&0>d(mt,vt)?(Se[nt]=mt,Se[ht]=Ne,nt=ht):(Se[nt]=vt,Se[rt]=Ne,nt=rt);else if(ht<xt&&0>d(mt,Ne))Se[nt]=mt,Se[ht]=Ne,nt=ht;else break e}}return ke}function d(Se,ke){var Ne=Se.sortIndex-ke.sortIndex;return Ne!==0?Ne:Se.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var y=Date,a=y.now();e.unstable_now=function(){return y.now()-a}}var w=[],C=[],M=1,D=null,R=3,$=!1,V=!1,B=!1,J=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Se){for(var ke=o(C);ke!==null;){if(ke.callback===null)l(C);else if(ke.startTime<=Se)l(C),ke.sortIndex=ke.expirationTime,t(w,ke);else break;ke=o(C)}}function Y(Se){if(B=!1,G(Se),!V)if(o(w)!==null)V=!0,Be(K);else{var ke=o(C);ke!==null&&Ae(Y,ke.startTime-Se)}}function K(Se,ke){V=!1,B&&(B=!1,j(de),de=-1),$=!0;var Ne=R;try{for(G(ke),D=o(w);D!==null&&(!(D.expirationTime>ke)||Se&&!Ce());){var nt=D.callback;if(typeof nt=="function"){D.callback=null,R=D.priorityLevel;var xt=nt(D.expirationTime<=ke);ke=e.unstable_now(),typeof xt=="function"?D.callback=xt:D===o(w)&&l(w),G(ke)}else l(w);D=o(w)}if(D!==null)var gt=!0;else{var rt=o(C);rt!==null&&Ae(Y,rt.startTime-ke),gt=!1}return gt}finally{D=null,R=Ne,$=!1}}var oe=!1,ie=null,de=-1,le=5,ye=-1;function Ce(){return!(e.unstable_now()-ye<le)}function Fe(){if(ie!==null){var Se=e.unstable_now();ye=Se;var ke=!0;try{ke=ie(!0,Se)}finally{ke?be():(oe=!1,ie=null)}}else oe=!1}var be;if(typeof N=="function")be=function(){N(Fe)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,he=we.port2;we.port1.onmessage=Fe,be=function(){he.postMessage(null)}}else be=function(){J(Fe,0)};function Be(Se){ie=Se,oe||(oe=!0,be())}function Ae(Se,ke){de=J(function(){Se(e.unstable_now())},ke)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Se){Se.callback=null},e.unstable_continueExecution=function(){V||$||(V=!0,Be(K))},e.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<Se?Math.floor(1e3/Se):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return o(w)},e.unstable_next=function(Se){switch(R){case 1:case 2:case 3:var ke=3;break;default:ke=R}var Ne=R;R=ke;try{return Se()}finally{R=Ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Se,ke){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var Ne=R;R=Se;try{return ke()}finally{R=Ne}},e.unstable_scheduleCallback=function(Se,ke,Ne){var nt=e.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?nt+Ne:nt):Ne=nt,Se){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=Ne+xt,Se={id:M++,callback:ke,priorityLevel:Se,startTime:Ne,expirationTime:xt,sortIndex:-1},Ne>nt?(Se.sortIndex=Ne,t(C,Se),o(w)===null&&Se===o(C)&&(B?(j(de),de=-1):B=!0,Ae(Y,Ne-nt))):(Se.sortIndex=xt,t(w,Se),V||$||(V=!0,Be(K))),Se},e.unstable_shouldYield=Ce,e.unstable_wrapCallback=function(Se){var ke=R;return function(){var Ne=R;R=ke;try{return Se.apply(this,arguments)}finally{R=Ne}}}})(OS);LS.exports=OS;var wM=LS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=W,Vo=wM;function Vt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FS=new Set,e1={};function bu(e,t){ch(e,t),ch(e+"Capture",t)}function ch(e,t){for(e1[e]=t,e=0;e<t.length;e++)FS.add(t[e])}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zx=Object.prototype.hasOwnProperty,SM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v5={},b5={};function TM(e){return zx.call(b5,e)?!0:zx.call(v5,e)?!1:SM.test(e)?b5[e]=!0:(v5[e]=!0,!1)}function CM(e,t,o,l){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function EM(e,t,o,l){if(t===null||typeof t>"u"||CM(e,t,o,l))return!0;if(l)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function so(e,t,o,l,d,p,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=y}var $i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$i[e]=new so(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$i[t]=new so(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$i[e]=new so(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$i[e]=new so(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$i[e]=new so(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$i[e]=new so(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$i[e]=new so(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$i[e]=new so(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$i[e]=new so(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jv=/[\-:]([a-z])/g;function Qv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jv,Qv);$i[t]=new so(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jv,Qv);$i[t]=new so(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jv,Qv);$i[t]=new so(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$i[e]=new so(e,1,!1,e.toLowerCase(),null,!1,!1)});$i.xlinkHref=new so("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$i[e]=new so(e,1,!1,e.toLowerCase(),null,!0,!0)});function eb(e,t,o,l){var d=$i.hasOwnProperty(t)?$i[t]:null;(d!==null?d.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(EM(t,o,d,l)&&(o=null),l||d===null?TM(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):d.mustUseProperty?e[d.propertyName]=o===null?d.type===3?!1:"":o:(t=d.attributeName,l=d.attributeNamespace,o===null?e.removeAttribute(t):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,l?e.setAttributeNS(l,t,o):e.setAttribute(t,o))))}var nl=BS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mg=Symbol.for("react.element"),Bd=Symbol.for("react.portal"),Fd=Symbol.for("react.fragment"),tb=Symbol.for("react.strict_mode"),Rx=Symbol.for("react.profiler"),$S=Symbol.for("react.provider"),NS=Symbol.for("react.context"),nb=Symbol.for("react.forward_ref"),Lx=Symbol.for("react.suspense"),Ox=Symbol.for("react.suspense_list"),rb=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),jS=Symbol.for("react.offscreen"),w5=Symbol.iterator;function uf(e){return e===null||typeof e!="object"?null:(e=w5&&e[w5]||e["@@iterator"],typeof e=="function"?e:null)}var si=Object.assign,W2;function Mf(e){if(W2===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);W2=t&&t[1]||""}return`
`+W2+e}var G2=!1;function H2(e,t){if(!e||G2)return"";G2=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var l=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){l=C}e.call(t.prototype)}else{try{throw Error()}catch(C){l=C}e()}}catch(C){if(C&&l&&typeof C.stack=="string"){for(var d=C.stack.split(`
`),p=l.stack.split(`
`),y=d.length-1,a=p.length-1;1<=y&&0<=a&&d[y]!==p[a];)a--;for(;1<=y&&0<=a;y--,a--)if(d[y]!==p[a]){if(y!==1||a!==1)do if(y--,a--,0>a||d[y]!==p[a]){var w=`
`+d[y].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=y&&0<=a);break}}}finally{G2=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?Mf(e):""}function kM(e){switch(e.tag){case 5:return Mf(e.type);case 16:return Mf("Lazy");case 13:return Mf("Suspense");case 19:return Mf("SuspenseList");case 0:case 2:case 15:return e=H2(e.type,!1),e;case 11:return e=H2(e.type.render,!1),e;case 1:return e=H2(e.type,!0),e;default:return""}}function Bx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fd:return"Fragment";case Bd:return"Portal";case Rx:return"Profiler";case tb:return"StrictMode";case Lx:return"Suspense";case Ox:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case NS:return(e.displayName||"Context")+".Consumer";case $S:return(e._context.displayName||"Context")+".Provider";case nb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rb:return t=e.displayName||null,t!==null?t:Bx(e.type)||"Memo";case Bl:t=e._payload,e=e._init;try{return Bx(e(t))}catch{}}return null}function PM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bx(t);case 8:return t===tb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ec(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function US(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MM(e){var t=US(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,p=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){l=""+y,p.call(this,y)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gg(e){e._valueTracker||(e._valueTracker=MM(e))}function VS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),l="";return e&&(l=US(e)?e.checked?"true":"false":e.value),e=l,e!==o?(t.setValue(e),!0):!1}function c0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fx(e,t){var o=t.checked;return si({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function S5(e,t){var o=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;o=ec(t.value!=null?t.value:o),e._wrapperState={initialChecked:l,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WS(e,t){t=t.checked,t!=null&&eb(e,"checked",t,!1)}function $x(e,t){WS(e,t);var o=ec(t.value),l=t.type;if(o!=null)l==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Nx(e,t.type,o):t.hasOwnProperty("defaultValue")&&Nx(e,t.type,ec(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function T5(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function Nx(e,t,o){(t!=="number"||c0(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var If=Array.isArray;function Yd(e,t,o,l){if(e=e.options,t){t={};for(var d=0;d<o.length;d++)t["$"+o[d]]=!0;for(o=0;o<e.length;o++)d=t.hasOwnProperty("$"+e[o].value),e[o].selected!==d&&(e[o].selected=d),d&&l&&(e[o].defaultSelected=!0)}else{for(o=""+ec(o),t=null,d=0;d<e.length;d++){if(e[d].value===o){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function jx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Vt(91));return si({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function C5(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(Vt(92));if(If(o)){if(1<o.length)throw Error(Vt(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:ec(o)}}function GS(e,t){var o=ec(t.value),l=ec(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),l!=null&&(e.defaultValue=""+l)}function E5(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function HS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ux(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?HS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yg,qS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,l,d){MSApp.execUnsafeLocalFunction(function(){return e(t,o,l,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yg=yg||document.createElement("div"),yg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function t1(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IM=["Webkit","ms","Moz","O"];Object.keys(Of).forEach(function(e){IM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Of[t]=Of[e]})});function ZS(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Of.hasOwnProperty(e)&&Of[e]?(""+t).trim():t+"px"}function XS(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var l=o.indexOf("--")===0,d=ZS(o,t[o],l);o==="float"&&(o="cssFloat"),l?e.setProperty(o,d):e[o]=d}}var AM=si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vx(e,t){if(t){if(AM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Vt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Vt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Vt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Vt(62))}}function Wx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gx=null;function ib(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hx=null,Kd=null,Jd=null;function k5(e){if(e=D1(e)){if(typeof Hx!="function")throw Error(Vt(280));var t=e.stateNode;t&&(t=Y0(t),Hx(e.stateNode,e.type,t))}}function YS(e){Kd?Jd?Jd.push(e):Jd=[e]:Kd=e}function KS(){if(Kd){var e=Kd,t=Jd;if(Jd=Kd=null,k5(e),t)for(e=0;e<t.length;e++)k5(t[e])}}function JS(e,t){return e(t)}function QS(){}var q2=!1;function eT(e,t,o){if(q2)return e(t,o);q2=!0;try{return JS(e,t,o)}finally{q2=!1,(Kd!==null||Jd!==null)&&(QS(),KS())}}function n1(e,t){var o=e.stateNode;if(o===null)return null;var l=Y0(o);if(l===null)return null;o=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(Vt(231,t,typeof o));return o}var qx=!1;if(qa)try{var df={};Object.defineProperty(df,"passive",{get:function(){qx=!0}}),window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{qx=!1}function DM(e,t,o,l,d,p,y,a,w){var C=Array.prototype.slice.call(arguments,3);try{t.apply(o,C)}catch(M){this.onError(M)}}var Bf=!1,u0=null,d0=!1,Zx=null,zM={onError:function(e){Bf=!0,u0=e}};function RM(e,t,o,l,d,p,y,a,w){Bf=!1,u0=null,DM.apply(zM,arguments)}function LM(e,t,o,l,d,p,y,a,w){if(RM.apply(this,arguments),Bf){if(Bf){var C=u0;Bf=!1,u0=null}else throw Error(Vt(198));d0||(d0=!0,Zx=C)}}function wu(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function tT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function P5(e){if(wu(e)!==e)throw Error(Vt(188))}function OM(e){var t=e.alternate;if(!t){if(t=wu(e),t===null)throw Error(Vt(188));return t!==e?null:e}for(var o=e,l=t;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(l=d.return,l!==null){o=l;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return P5(d),e;if(p===l)return P5(d),t;p=p.sibling}throw Error(Vt(188))}if(o.return!==l.return)o=d,l=p;else{for(var y=!1,a=d.child;a;){if(a===o){y=!0,o=d,l=p;break}if(a===l){y=!0,l=d,o=p;break}a=a.sibling}if(!y){for(a=p.child;a;){if(a===o){y=!0,o=p,l=d;break}if(a===l){y=!0,l=p,o=d;break}a=a.sibling}if(!y)throw Error(Vt(189))}}if(o.alternate!==l)throw Error(Vt(190))}if(o.tag!==3)throw Error(Vt(188));return o.stateNode.current===o?e:t}function nT(e){return e=OM(e),e!==null?rT(e):null}function rT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rT(e);if(t!==null)return t;e=e.sibling}return null}var iT=Vo.unstable_scheduleCallback,M5=Vo.unstable_cancelCallback,BM=Vo.unstable_shouldYield,FM=Vo.unstable_requestPaint,hi=Vo.unstable_now,$M=Vo.unstable_getCurrentPriorityLevel,ob=Vo.unstable_ImmediatePriority,oT=Vo.unstable_UserBlockingPriority,h0=Vo.unstable_NormalPriority,NM=Vo.unstable_LowPriority,sT=Vo.unstable_IdlePriority,H0=null,ga=null;function jM(e){if(ga&&typeof ga.onCommitFiberRoot=="function")try{ga.onCommitFiberRoot(H0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:WM,UM=Math.log,VM=Math.LN2;function WM(e){return e>>>=0,e===0?32:31-(UM(e)/VM|0)|0}var _g=64,xg=4194304;function Af(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function p0(e,t){var o=e.pendingLanes;if(o===0)return 0;var l=0,d=e.suspendedLanes,p=e.pingedLanes,y=o&268435455;if(y!==0){var a=y&~d;a!==0?l=Af(a):(p&=y,p!==0&&(l=Af(p)))}else y=o&~d,y!==0?l=Af(y):p!==0&&(l=Af(p));if(l===0)return 0;if(t!==0&&t!==l&&!(t&d)&&(d=l&-l,p=t&-t,d>=p||d===16&&(p&4194240)!==0))return t;if(l&4&&(l|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)o=31-Ws(t),d=1<<o,l|=e[o],t&=~d;return l}function GM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HM(e,t){for(var o=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,p=e.pendingLanes;0<p;){var y=31-Ws(p),a=1<<y,w=d[y];w===-1?(!(a&o)||a&l)&&(d[y]=GM(a,t)):w<=t&&(e.expiredLanes|=a),p&=~a}}function Xx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function aT(){var e=_g;return _g<<=1,!(_g&4194240)&&(_g=64),e}function Z2(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function I1(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ws(t),e[t]=o}function qM(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<o;){var d=31-Ws(o),p=1<<d;t[d]=0,l[d]=-1,e[d]=-1,o&=~p}}function sb(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var l=31-Ws(o),d=1<<l;d&t|e[l]&t&&(e[l]|=t),o&=~d}}var Pr=0;function lT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cT,ab,uT,dT,hT,Yx=!1,vg=[],Gl=null,Hl=null,ql=null,r1=new Map,i1=new Map,$l=[],ZM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function I5(e,t){switch(e){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":ql=null;break;case"pointerover":case"pointerout":r1.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":i1.delete(t.pointerId)}}function hf(e,t,o,l,d,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:o,eventSystemFlags:l,nativeEvent:p,targetContainers:[d]},t!==null&&(t=D1(t),t!==null&&ab(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function XM(e,t,o,l,d){switch(t){case"focusin":return Gl=hf(Gl,e,t,o,l,d),!0;case"dragenter":return Hl=hf(Hl,e,t,o,l,d),!0;case"mouseover":return ql=hf(ql,e,t,o,l,d),!0;case"pointerover":var p=d.pointerId;return r1.set(p,hf(r1.get(p)||null,e,t,o,l,d)),!0;case"gotpointercapture":return p=d.pointerId,i1.set(p,hf(i1.get(p)||null,e,t,o,l,d)),!0}return!1}function pT(e){var t=nu(e.target);if(t!==null){var o=wu(t);if(o!==null){if(t=o.tag,t===13){if(t=tT(o),t!==null){e.blockedOn=t,hT(e.priority,function(){uT(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=Kx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var l=new o.constructor(o.type,o);Gx=l,o.target.dispatchEvent(l),Gx=null}else return t=D1(o),t!==null&&ab(t),e.blockedOn=o,!1;t.shift()}return!0}function A5(e,t,o){Vg(e)&&o.delete(t)}function YM(){Yx=!1,Gl!==null&&Vg(Gl)&&(Gl=null),Hl!==null&&Vg(Hl)&&(Hl=null),ql!==null&&Vg(ql)&&(ql=null),r1.forEach(A5),i1.forEach(A5)}function pf(e,t){e.blockedOn===t&&(e.blockedOn=null,Yx||(Yx=!0,Vo.unstable_scheduleCallback(Vo.unstable_NormalPriority,YM)))}function o1(e){function t(d){return pf(d,e)}if(0<vg.length){pf(vg[0],e);for(var o=1;o<vg.length;o++){var l=vg[o];l.blockedOn===e&&(l.blockedOn=null)}}for(Gl!==null&&pf(Gl,e),Hl!==null&&pf(Hl,e),ql!==null&&pf(ql,e),r1.forEach(t),i1.forEach(t),o=0;o<$l.length;o++)l=$l[o],l.blockedOn===e&&(l.blockedOn=null);for(;0<$l.length&&(o=$l[0],o.blockedOn===null);)pT(o),o.blockedOn===null&&$l.shift()}var Qd=nl.ReactCurrentBatchConfig,f0=!0;function KM(e,t,o,l){var d=Pr,p=Qd.transition;Qd.transition=null;try{Pr=1,lb(e,t,o,l)}finally{Pr=d,Qd.transition=p}}function JM(e,t,o,l){var d=Pr,p=Qd.transition;Qd.transition=null;try{Pr=4,lb(e,t,o,l)}finally{Pr=d,Qd.transition=p}}function lb(e,t,o,l){if(f0){var d=Kx(e,t,o,l);if(d===null)ix(e,t,l,m0,o),I5(e,l);else if(XM(d,e,t,o,l))l.stopPropagation();else if(I5(e,l),t&4&&-1<ZM.indexOf(e)){for(;d!==null;){var p=D1(d);if(p!==null&&cT(p),p=Kx(e,t,o,l),p===null&&ix(e,t,l,m0,o),p===d)break;d=p}d!==null&&l.stopPropagation()}else ix(e,t,l,null,o)}}var m0=null;function Kx(e,t,o,l){if(m0=null,e=ib(l),e=nu(e),e!==null)if(t=wu(e),t===null)e=null;else if(o=t.tag,o===13){if(e=tT(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return m0=e,null}function fT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($M()){case ob:return 1;case oT:return 4;case h0:case NM:return 16;case sT:return 536870912;default:return 16}default:return 16}}var Ul=null,cb=null,Wg=null;function mT(){if(Wg)return Wg;var e,t=cb,o=t.length,l,d="value"in Ul?Ul.value:Ul.textContent,p=d.length;for(e=0;e<o&&t[e]===d[e];e++);var y=o-e;for(l=1;l<=y&&t[o-l]===d[p-l];l++);return Wg=d.slice(e,1<l?1-l:void 0)}function Gg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bg(){return!0}function D5(){return!1}function Ho(e){function t(o,l,d,p,y){this._reactName=o,this._targetInst=d,this.type=l,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(o=e[a],this[a]=o?o(p):p[a]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?bg:D5,this.isPropagationStopped=D5,this}return si(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=bg)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=bg)},persist:function(){},isPersistent:bg}),t}var Eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ub=Ho(Eh),A1=si({},Eh,{view:0,detail:0}),QM=Ho(A1),X2,Y2,ff,q0=si({},A1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:db,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ff&&(ff&&e.type==="mousemove"?(X2=e.screenX-ff.screenX,Y2=e.screenY-ff.screenY):Y2=X2=0,ff=e),X2)},movementY:function(e){return"movementY"in e?e.movementY:Y2}}),z5=Ho(q0),eI=si({},q0,{dataTransfer:0}),tI=Ho(eI),nI=si({},A1,{relatedTarget:0}),K2=Ho(nI),rI=si({},Eh,{animationName:0,elapsedTime:0,pseudoElement:0}),iI=Ho(rI),oI=si({},Eh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sI=Ho(oI),aI=si({},Eh,{data:0}),R5=Ho(aI),lI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uI[e])?!!t[e]:!1}function db(){return dI}var hI=si({},A1,{key:function(e){if(e.key){var t=lI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:db,charCode:function(e){return e.type==="keypress"?Gg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pI=Ho(hI),fI=si({},q0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L5=Ho(fI),mI=si({},A1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:db}),gI=Ho(mI),yI=si({},Eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),_I=Ho(yI),xI=si({},q0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vI=Ho(xI),bI=[9,13,27,32],hb=qa&&"CompositionEvent"in window,Ff=null;qa&&"documentMode"in document&&(Ff=document.documentMode);var wI=qa&&"TextEvent"in window&&!Ff,gT=qa&&(!hb||Ff&&8<Ff&&11>=Ff),O5=String.fromCharCode(32),B5=!1;function yT(e,t){switch(e){case"keyup":return bI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _T(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $d=!1;function SI(e,t){switch(e){case"compositionend":return _T(t);case"keypress":return t.which!==32?null:(B5=!0,O5);case"textInput":return e=t.data,e===O5&&B5?null:e;default:return null}}function TI(e,t){if($d)return e==="compositionend"||!hb&&yT(e,t)?(e=mT(),Wg=cb=Ul=null,$d=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gT&&t.locale!=="ko"?null:t.data;default:return null}}var CI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!CI[e.type]:t==="textarea"}function xT(e,t,o,l){YS(l),t=g0(t,"onChange"),0<t.length&&(o=new ub("onChange","change",null,o,l),e.push({event:o,listeners:t}))}var $f=null,s1=null;function EI(e){IT(e,0)}function Z0(e){var t=Ud(e);if(VS(t))return e}function kI(e,t){if(e==="change")return t}var vT=!1;if(qa){var J2;if(qa){var Q2="oninput"in document;if(!Q2){var $5=document.createElement("div");$5.setAttribute("oninput","return;"),Q2=typeof $5.oninput=="function"}J2=Q2}else J2=!1;vT=J2&&(!document.documentMode||9<document.documentMode)}function N5(){$f&&($f.detachEvent("onpropertychange",bT),s1=$f=null)}function bT(e){if(e.propertyName==="value"&&Z0(s1)){var t=[];xT(t,s1,e,ib(e)),eT(EI,t)}}function PI(e,t,o){e==="focusin"?(N5(),$f=t,s1=o,$f.attachEvent("onpropertychange",bT)):e==="focusout"&&N5()}function MI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Z0(s1)}function II(e,t){if(e==="click")return Z0(t)}function AI(e,t){if(e==="input"||e==="change")return Z0(t)}function DI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hs=typeof Object.is=="function"?Object.is:DI;function a1(e,t){if(Hs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var d=o[l];if(!zx.call(t,d)||!Hs(e[d],t[d]))return!1}return!0}function j5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function U5(e,t){var o=j5(e);e=0;for(var l;o;){if(o.nodeType===3){if(l=e+o.textContent.length,e<=t&&l>=t)return{node:o,offset:t-e};e=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=j5(o)}}function wT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ST(){for(var e=window,t=c0();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=c0(e.document)}return t}function pb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zI(e){var t=ST(),o=e.focusedElem,l=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&wT(o.ownerDocument.documentElement,o)){if(l!==null&&pb(o)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=o.textContent.length,p=Math.min(l.start,d);l=l.end===void 0?p:Math.min(l.end,d),!e.extend&&p>l&&(d=l,l=p,p=d),d=U5(o,p);var y=U5(o,l);d&&y&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),p>l?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RI=qa&&"documentMode"in document&&11>=document.documentMode,Nd=null,Jx=null,Nf=null,Qx=!1;function V5(e,t,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Qx||Nd==null||Nd!==c0(l)||(l=Nd,"selectionStart"in l&&pb(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Nf&&a1(Nf,l)||(Nf=l,l=g0(Jx,"onSelect"),0<l.length&&(t=new ub("onSelect","select",null,t,o),e.push({event:t,listeners:l}),t.target=Nd)))}function wg(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var jd={animationend:wg("Animation","AnimationEnd"),animationiteration:wg("Animation","AnimationIteration"),animationstart:wg("Animation","AnimationStart"),transitionend:wg("Transition","TransitionEnd")},ex={},TT={};qa&&(TT=document.createElement("div").style,"AnimationEvent"in window||(delete jd.animationend.animation,delete jd.animationiteration.animation,delete jd.animationstart.animation),"TransitionEvent"in window||delete jd.transitionend.transition);function X0(e){if(ex[e])return ex[e];if(!jd[e])return e;var t=jd[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in TT)return ex[e]=t[o];return e}var CT=X0("animationend"),ET=X0("animationiteration"),kT=X0("animationstart"),PT=X0("transitionend"),MT=new Map,W5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rc(e,t){MT.set(e,t),bu(t,[e])}for(var tx=0;tx<W5.length;tx++){var nx=W5[tx],LI=nx.toLowerCase(),OI=nx[0].toUpperCase()+nx.slice(1);rc(LI,"on"+OI)}rc(CT,"onAnimationEnd");rc(ET,"onAnimationIteration");rc(kT,"onAnimationStart");rc("dblclick","onDoubleClick");rc("focusin","onFocus");rc("focusout","onBlur");rc(PT,"onTransitionEnd");ch("onMouseEnter",["mouseout","mouseover"]);ch("onMouseLeave",["mouseout","mouseover"]);ch("onPointerEnter",["pointerout","pointerover"]);ch("onPointerLeave",["pointerout","pointerover"]);bu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bu("onBeforeInput",["compositionend","keypress","textInput","paste"]);bu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Df));function G5(e,t,o){var l=e.type||"unknown-event";e.currentTarget=o,LM(l,t,void 0,e),e.currentTarget=null}function IT(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var l=e[o],d=l.event;l=l.listeners;e:{var p=void 0;if(t)for(var y=l.length-1;0<=y;y--){var a=l[y],w=a.instance,C=a.currentTarget;if(a=a.listener,w!==p&&d.isPropagationStopped())break e;G5(d,a,C),p=w}else for(y=0;y<l.length;y++){if(a=l[y],w=a.instance,C=a.currentTarget,a=a.listener,w!==p&&d.isPropagationStopped())break e;G5(d,a,C),p=w}}}if(d0)throw e=Zx,d0=!1,Zx=null,e}function Vr(e,t){var o=t[iv];o===void 0&&(o=t[iv]=new Set);var l=e+"__bubble";o.has(l)||(AT(t,e,2,!1),o.add(l))}function rx(e,t,o){var l=0;t&&(l|=4),AT(o,e,l,t)}var Sg="_reactListening"+Math.random().toString(36).slice(2);function l1(e){if(!e[Sg]){e[Sg]=!0,FS.forEach(function(o){o!=="selectionchange"&&(BI.has(o)||rx(o,!1,e),rx(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sg]||(t[Sg]=!0,rx("selectionchange",!1,t))}}function AT(e,t,o,l){switch(fT(t)){case 1:var d=KM;break;case 4:d=JM;break;default:d=lb}o=d.bind(null,t,o,e),d=void 0,!qx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,o,{capture:!0,passive:d}):e.addEventListener(t,o,!0):d!==void 0?e.addEventListener(t,o,{passive:d}):e.addEventListener(t,o,!1)}function ix(e,t,o,l,d){var p=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var a=l.stateNode.containerInfo;if(a===d||a.nodeType===8&&a.parentNode===d)break;if(y===4)for(y=l.return;y!==null;){var w=y.tag;if((w===3||w===4)&&(w=y.stateNode.containerInfo,w===d||w.nodeType===8&&w.parentNode===d))return;y=y.return}for(;a!==null;){if(y=nu(a),y===null)return;if(w=y.tag,w===5||w===6){l=p=y;continue e}a=a.parentNode}}l=l.return}eT(function(){var C=p,M=ib(o),D=[];e:{var R=MT.get(e);if(R!==void 0){var $=ub,V=e;switch(e){case"keypress":if(Gg(o)===0)break e;case"keydown":case"keyup":$=pI;break;case"focusin":V="focus",$=K2;break;case"focusout":V="blur",$=K2;break;case"beforeblur":case"afterblur":$=K2;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=z5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=tI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=gI;break;case CT:case ET:case kT:$=iI;break;case PT:$=_I;break;case"scroll":$=QM;break;case"wheel":$=vI;break;case"copy":case"cut":case"paste":$=sI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=L5}var B=(t&4)!==0,J=!B&&e==="scroll",j=B?R!==null?R+"Capture":null:R;B=[];for(var N=C,G;N!==null;){G=N;var Y=G.stateNode;if(G.tag===5&&Y!==null&&(G=Y,j!==null&&(Y=n1(N,j),Y!=null&&B.push(c1(N,Y,G)))),J)break;N=N.return}0<B.length&&(R=new $(R,V,null,o,M),D.push({event:R,listeners:B}))}}if(!(t&7)){e:{if(R=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",R&&o!==Gx&&(V=o.relatedTarget||o.fromElement)&&(nu(V)||V[Za]))break e;if(($||R)&&(R=M.window===M?M:(R=M.ownerDocument)?R.defaultView||R.parentWindow:window,$?(V=o.relatedTarget||o.toElement,$=C,V=V?nu(V):null,V!==null&&(J=wu(V),V!==J||V.tag!==5&&V.tag!==6)&&(V=null)):($=null,V=C),$!==V)){if(B=z5,Y="onMouseLeave",j="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(B=L5,Y="onPointerLeave",j="onPointerEnter",N="pointer"),J=$==null?R:Ud($),G=V==null?R:Ud(V),R=new B(Y,N+"leave",$,o,M),R.target=J,R.relatedTarget=G,Y=null,nu(M)===C&&(B=new B(j,N+"enter",V,o,M),B.target=G,B.relatedTarget=J,Y=B),J=Y,$&&V)t:{for(B=$,j=V,N=0,G=B;G;G=Cd(G))N++;for(G=0,Y=j;Y;Y=Cd(Y))G++;for(;0<N-G;)B=Cd(B),N--;for(;0<G-N;)j=Cd(j),G--;for(;N--;){if(B===j||j!==null&&B===j.alternate)break t;B=Cd(B),j=Cd(j)}B=null}else B=null;$!==null&&H5(D,R,$,B,!1),V!==null&&J!==null&&H5(D,J,V,B,!0)}}e:{if(R=C?Ud(C):window,$=R.nodeName&&R.nodeName.toLowerCase(),$==="select"||$==="input"&&R.type==="file")var K=kI;else if(F5(R))if(vT)K=AI;else{K=MI;var oe=PI}else($=R.nodeName)&&$.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(K=II);if(K&&(K=K(e,C))){xT(D,K,o,M);break e}oe&&oe(e,R,C),e==="focusout"&&(oe=R._wrapperState)&&oe.controlled&&R.type==="number"&&Nx(R,"number",R.value)}switch(oe=C?Ud(C):window,e){case"focusin":(F5(oe)||oe.contentEditable==="true")&&(Nd=oe,Jx=C,Nf=null);break;case"focusout":Nf=Jx=Nd=null;break;case"mousedown":Qx=!0;break;case"contextmenu":case"mouseup":case"dragend":Qx=!1,V5(D,o,M);break;case"selectionchange":if(RI)break;case"keydown":case"keyup":V5(D,o,M)}var ie;if(hb)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else $d?yT(e,o)&&(de="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(de="onCompositionStart");de&&(gT&&o.locale!=="ko"&&($d||de!=="onCompositionStart"?de==="onCompositionEnd"&&$d&&(ie=mT()):(Ul=M,cb="value"in Ul?Ul.value:Ul.textContent,$d=!0)),oe=g0(C,de),0<oe.length&&(de=new R5(de,e,null,o,M),D.push({event:de,listeners:oe}),ie?de.data=ie:(ie=_T(o),ie!==null&&(de.data=ie)))),(ie=wI?SI(e,o):TI(e,o))&&(C=g0(C,"onBeforeInput"),0<C.length&&(M=new R5("onBeforeInput","beforeinput",null,o,M),D.push({event:M,listeners:C}),M.data=ie))}IT(D,t)})}function c1(e,t,o){return{instance:e,listener:t,currentTarget:o}}function g0(e,t){for(var o=t+"Capture",l=[];e!==null;){var d=e,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=n1(e,o),p!=null&&l.unshift(c1(e,p,d)),p=n1(e,t),p!=null&&l.push(c1(e,p,d))),e=e.return}return l}function Cd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function H5(e,t,o,l,d){for(var p=t._reactName,y=[];o!==null&&o!==l;){var a=o,w=a.alternate,C=a.stateNode;if(w!==null&&w===l)break;a.tag===5&&C!==null&&(a=C,d?(w=n1(o,p),w!=null&&y.unshift(c1(o,w,a))):d||(w=n1(o,p),w!=null&&y.push(c1(o,w,a)))),o=o.return}y.length!==0&&e.push({event:t,listeners:y})}var FI=/\r\n?/g,$I=/\u0000|\uFFFD/g;function q5(e){return(typeof e=="string"?e:""+e).replace(FI,`
`).replace($I,"")}function Tg(e,t,o){if(t=q5(t),q5(e)!==t&&o)throw Error(Vt(425))}function y0(){}var ev=null,tv=null;function nv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rv=typeof setTimeout=="function"?setTimeout:void 0,NI=typeof clearTimeout=="function"?clearTimeout:void 0,Z5=typeof Promise=="function"?Promise:void 0,jI=typeof queueMicrotask=="function"?queueMicrotask:typeof Z5<"u"?function(e){return Z5.resolve(null).then(e).catch(UI)}:rv;function UI(e){setTimeout(function(){throw e})}function ox(e,t){var o=t,l=0;do{var d=o.nextSibling;if(e.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(l===0){e.removeChild(d),o1(t);return}l--}else o!=="$"&&o!=="$?"&&o!=="$!"||l++;o=d}while(o);o1(t)}function Zl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function X5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var kh=Math.random().toString(36).slice(2),ha="__reactFiber$"+kh,u1="__reactProps$"+kh,Za="__reactContainer$"+kh,iv="__reactEvents$"+kh,VI="__reactListeners$"+kh,WI="__reactHandles$"+kh;function nu(e){var t=e[ha];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Za]||o[ha]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=X5(e);e!==null;){if(o=e[ha])return o;e=X5(e)}return t}e=o,o=e.parentNode}return null}function D1(e){return e=e[ha]||e[Za],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ud(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Vt(33))}function Y0(e){return e[u1]||null}var ov=[],Vd=-1;function ic(e){return{current:e}}function Wr(e){0>Vd||(e.current=ov[Vd],ov[Vd]=null,Vd--)}function Br(e,t){Vd++,ov[Vd]=e.current,e.current=t}var tc={},Ji=ic(tc),xo=ic(!1),du=tc;function uh(e,t){var o=e.type.contextTypes;if(!o)return tc;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in o)d[p]=t[p];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function vo(e){return e=e.childContextTypes,e!=null}function _0(){Wr(xo),Wr(Ji)}function Y5(e,t,o){if(Ji.current!==tc)throw Error(Vt(168));Br(Ji,t),Br(xo,o)}function DT(e,t,o){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return o;l=l.getChildContext();for(var d in l)if(!(d in t))throw Error(Vt(108,PM(e)||"Unknown",d));return si({},o,l)}function x0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tc,du=Ji.current,Br(Ji,e),Br(xo,xo.current),!0}function K5(e,t,o){var l=e.stateNode;if(!l)throw Error(Vt(169));o?(e=DT(e,t,du),l.__reactInternalMemoizedMergedChildContext=e,Wr(xo),Wr(Ji),Br(Ji,e)):Wr(xo),Br(xo,o)}var Ua=null,K0=!1,sx=!1;function zT(e){Ua===null?Ua=[e]:Ua.push(e)}function GI(e){K0=!0,zT(e)}function oc(){if(!sx&&Ua!==null){sx=!0;var e=0,t=Pr;try{var o=Ua;for(Pr=1;e<o.length;e++){var l=o[e];do l=l(!0);while(l!==null)}Ua=null,K0=!1}catch(d){throw Ua!==null&&(Ua=Ua.slice(e+1)),iT(ob,oc),d}finally{Pr=t,sx=!1}}return null}var Wd=[],Gd=0,v0=null,b0=0,ss=[],as=0,hu=null,Va=1,Wa="";function Kc(e,t){Wd[Gd++]=b0,Wd[Gd++]=v0,v0=e,b0=t}function RT(e,t,o){ss[as++]=Va,ss[as++]=Wa,ss[as++]=hu,hu=e;var l=Va;e=Wa;var d=32-Ws(l)-1;l&=~(1<<d),o+=1;var p=32-Ws(t)+d;if(30<p){var y=d-d%5;p=(l&(1<<y)-1).toString(32),l>>=y,d-=y,Va=1<<32-Ws(t)+d|o<<d|l,Wa=p+e}else Va=1<<p|o<<d|l,Wa=e}function fb(e){e.return!==null&&(Kc(e,1),RT(e,1,0))}function mb(e){for(;e===v0;)v0=Wd[--Gd],Wd[Gd]=null,b0=Wd[--Gd],Wd[Gd]=null;for(;e===hu;)hu=ss[--as],ss[as]=null,Wa=ss[--as],ss[as]=null,Va=ss[--as],ss[as]=null}var No=null,$o=null,Xr=!1,Vs=null;function LT(e,t){var o=ls(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function J5(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,No=e,$o=Zl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,No=e,$o=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=hu!==null?{id:Va,overflow:Wa}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=ls(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,No=e,$o=null,!0):!1;default:return!1}}function sv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function av(e){if(Xr){var t=$o;if(t){var o=t;if(!J5(e,t)){if(sv(e))throw Error(Vt(418));t=Zl(o.nextSibling);var l=No;t&&J5(e,t)?LT(l,o):(e.flags=e.flags&-4097|2,Xr=!1,No=e)}}else{if(sv(e))throw Error(Vt(418));e.flags=e.flags&-4097|2,Xr=!1,No=e}}}function Q5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;No=e}function Cg(e){if(e!==No)return!1;if(!Xr)return Q5(e),Xr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nv(e.type,e.memoizedProps)),t&&(t=$o)){if(sv(e))throw OT(),Error(Vt(418));for(;t;)LT(e,t),t=Zl(t.nextSibling)}if(Q5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Vt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){$o=Zl(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}$o=null}}else $o=No?Zl(e.stateNode.nextSibling):null;return!0}function OT(){for(var e=$o;e;)e=Zl(e.nextSibling)}function dh(){$o=No=null,Xr=!1}function gb(e){Vs===null?Vs=[e]:Vs.push(e)}var HI=nl.ReactCurrentBatchConfig;function js(e,t){if(e&&e.defaultProps){t=si({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}var w0=ic(null),S0=null,Hd=null,yb=null;function _b(){yb=Hd=S0=null}function xb(e){var t=w0.current;Wr(w0),e._currentValue=t}function lv(e,t,o){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===o)break;e=e.return}}function eh(e,t){S0=e,yb=Hd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_o=!0),e.firstContext=null)}function hs(e){var t=e._currentValue;if(yb!==e)if(e={context:e,memoizedValue:t,next:null},Hd===null){if(S0===null)throw Error(Vt(308));Hd=e,S0.dependencies={lanes:0,firstContext:e}}else Hd=Hd.next=e;return t}var ru=null;function vb(e){ru===null?ru=[e]:ru.push(e)}function BT(e,t,o,l){var d=t.interleaved;return d===null?(o.next=o,vb(t)):(o.next=d.next,d.next=o),t.interleaved=o,Xa(e,l)}function Xa(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var Fl=!1;function bb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ga(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xl(e,t,o){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,ar&2){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,Xa(e,o)}return d=l.interleaved,d===null?(t.next=t,vb(l)):(t.next=d.next,d.next=t),l.interleaved=t,Xa(e,o)}function Hg(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,sb(e,o)}}function e6(e,t){var o=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var y={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?d=p=y:p=p.next=y,o=o.next}while(o!==null);p===null?d=p=t:p=p.next=t}else d=p=t;o={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:l.shared,effects:l.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function T0(e,t,o,l){var d=e.updateQueue;Fl=!1;var p=d.firstBaseUpdate,y=d.lastBaseUpdate,a=d.shared.pending;if(a!==null){d.shared.pending=null;var w=a,C=w.next;w.next=null,y===null?p=C:y.next=C,y=w;var M=e.alternate;M!==null&&(M=M.updateQueue,a=M.lastBaseUpdate,a!==y&&(a===null?M.firstBaseUpdate=C:a.next=C,M.lastBaseUpdate=w))}if(p!==null){var D=d.baseState;y=0,M=C=w=null,a=p;do{var R=a.lane,$=a.eventTime;if((l&R)===R){M!==null&&(M=M.next={eventTime:$,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var V=e,B=a;switch(R=t,$=o,B.tag){case 1:if(V=B.payload,typeof V=="function"){D=V.call($,D,R);break e}D=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=B.payload,R=typeof V=="function"?V.call($,D,R):V,R==null)break e;D=si({},D,R);break e;case 2:Fl=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,R=d.effects,R===null?d.effects=[a]:R.push(a))}else $={eventTime:$,lane:R,tag:a.tag,payload:a.payload,callback:a.callback,next:null},M===null?(C=M=$,w=D):M=M.next=$,y|=R;if(a=a.next,a===null){if(a=d.shared.pending,a===null)break;R=a,a=R.next,R.next=null,d.lastBaseUpdate=R,d.shared.pending=null}}while(1);if(M===null&&(w=D),d.baseState=w,d.firstBaseUpdate=C,d.lastBaseUpdate=M,t=d.shared.interleaved,t!==null){d=t;do y|=d.lane,d=d.next;while(d!==t)}else p===null&&(d.shared.lanes=0);fu|=y,e.lanes=y,e.memoizedState=D}}function t6(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],d=l.callback;if(d!==null){if(l.callback=null,l=o,typeof d!="function")throw Error(Vt(191,d));d.call(l)}}}var $T=new BS.Component().refs;function cv(e,t,o,l){t=e.memoizedState,o=o(l,t),o=o==null?t:si({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var J0={isMounted:function(e){return(e=e._reactInternals)?wu(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var l=io(),d=Kl(e),p=Ga(l,d);p.payload=t,o!=null&&(p.callback=o),t=Xl(e,p,d),t!==null&&(Gs(t,e,d,l),Hg(t,e,d))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var l=io(),d=Kl(e),p=Ga(l,d);p.tag=1,p.payload=t,o!=null&&(p.callback=o),t=Xl(e,p,d),t!==null&&(Gs(t,e,d,l),Hg(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=io(),l=Kl(e),d=Ga(o,l);d.tag=2,t!=null&&(d.callback=t),t=Xl(e,d,l),t!==null&&(Gs(t,e,l,o),Hg(t,e,l))}};function n6(e,t,o,l,d,p,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,y):t.prototype&&t.prototype.isPureReactComponent?!a1(o,l)||!a1(d,p):!0}function NT(e,t,o){var l=!1,d=tc,p=t.contextType;return typeof p=="object"&&p!==null?p=hs(p):(d=vo(t)?du:Ji.current,l=t.contextTypes,p=(l=l!=null)?uh(e,d):tc),t=new t(o,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=J0,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=p),t}function r6(e,t,o,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,l),t.state!==e&&J0.enqueueReplaceState(t,t.state,null)}function uv(e,t,o,l){var d=e.stateNode;d.props=o,d.state=e.memoizedState,d.refs=$T,bb(e);var p=t.contextType;typeof p=="object"&&p!==null?d.context=hs(p):(p=vo(t)?du:Ji.current,d.context=uh(e,p)),d.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(cv(e,t,p,o),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&J0.enqueueReplaceState(d,d.state,null),T0(e,o,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function mf(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Vt(309));var l=o.stateNode}if(!l)throw Error(Vt(147,e));var d=l,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(y){var a=d.refs;a===$T&&(a=d.refs={}),y===null?delete a[p]:a[p]=y},t._stringRef=p,t)}if(typeof e!="string")throw Error(Vt(284));if(!o._owner)throw Error(Vt(290,e))}return e}function Eg(e,t){throw e=Object.prototype.toString.call(t),Error(Vt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function i6(e){var t=e._init;return t(e._payload)}function jT(e){function t(j,N){if(e){var G=j.deletions;G===null?(j.deletions=[N],j.flags|=16):G.push(N)}}function o(j,N){if(!e)return null;for(;N!==null;)t(j,N),N=N.sibling;return null}function l(j,N){for(j=new Map;N!==null;)N.key!==null?j.set(N.key,N):j.set(N.index,N),N=N.sibling;return j}function d(j,N){return j=Jl(j,N),j.index=0,j.sibling=null,j}function p(j,N,G){return j.index=G,e?(G=j.alternate,G!==null?(G=G.index,G<N?(j.flags|=2,N):G):(j.flags|=2,N)):(j.flags|=1048576,N)}function y(j){return e&&j.alternate===null&&(j.flags|=2),j}function a(j,N,G,Y){return N===null||N.tag!==6?(N=px(G,j.mode,Y),N.return=j,N):(N=d(N,G),N.return=j,N)}function w(j,N,G,Y){var K=G.type;return K===Fd?M(j,N,G.props.children,Y,G.key):N!==null&&(N.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Bl&&i6(K)===N.type)?(Y=d(N,G.props),Y.ref=mf(j,N,G),Y.return=j,Y):(Y=Jg(G.type,G.key,G.props,null,j.mode,Y),Y.ref=mf(j,N,G),Y.return=j,Y)}function C(j,N,G,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==G.containerInfo||N.stateNode.implementation!==G.implementation?(N=fx(G,j.mode,Y),N.return=j,N):(N=d(N,G.children||[]),N.return=j,N)}function M(j,N,G,Y,K){return N===null||N.tag!==7?(N=au(G,j.mode,Y,K),N.return=j,N):(N=d(N,G),N.return=j,N)}function D(j,N,G){if(typeof N=="string"&&N!==""||typeof N=="number")return N=px(""+N,j.mode,G),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case mg:return G=Jg(N.type,N.key,N.props,null,j.mode,G),G.ref=mf(j,null,N),G.return=j,G;case Bd:return N=fx(N,j.mode,G),N.return=j,N;case Bl:var Y=N._init;return D(j,Y(N._payload),G)}if(If(N)||uf(N))return N=au(N,j.mode,G,null),N.return=j,N;Eg(j,N)}return null}function R(j,N,G,Y){var K=N!==null?N.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return K!==null?null:a(j,N,""+G,Y);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case mg:return G.key===K?w(j,N,G,Y):null;case Bd:return G.key===K?C(j,N,G,Y):null;case Bl:return K=G._init,R(j,N,K(G._payload),Y)}if(If(G)||uf(G))return K!==null?null:M(j,N,G,Y,null);Eg(j,G)}return null}function $(j,N,G,Y,K){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return j=j.get(G)||null,a(N,j,""+Y,K);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case mg:return j=j.get(Y.key===null?G:Y.key)||null,w(N,j,Y,K);case Bd:return j=j.get(Y.key===null?G:Y.key)||null,C(N,j,Y,K);case Bl:var oe=Y._init;return $(j,N,G,oe(Y._payload),K)}if(If(Y)||uf(Y))return j=j.get(G)||null,M(N,j,Y,K,null);Eg(N,Y)}return null}function V(j,N,G,Y){for(var K=null,oe=null,ie=N,de=N=0,le=null;ie!==null&&de<G.length;de++){ie.index>de?(le=ie,ie=null):le=ie.sibling;var ye=R(j,ie,G[de],Y);if(ye===null){ie===null&&(ie=le);break}e&&ie&&ye.alternate===null&&t(j,ie),N=p(ye,N,de),oe===null?K=ye:oe.sibling=ye,oe=ye,ie=le}if(de===G.length)return o(j,ie),Xr&&Kc(j,de),K;if(ie===null){for(;de<G.length;de++)ie=D(j,G[de],Y),ie!==null&&(N=p(ie,N,de),oe===null?K=ie:oe.sibling=ie,oe=ie);return Xr&&Kc(j,de),K}for(ie=l(j,ie);de<G.length;de++)le=$(ie,j,de,G[de],Y),le!==null&&(e&&le.alternate!==null&&ie.delete(le.key===null?de:le.key),N=p(le,N,de),oe===null?K=le:oe.sibling=le,oe=le);return e&&ie.forEach(function(Ce){return t(j,Ce)}),Xr&&Kc(j,de),K}function B(j,N,G,Y){var K=uf(G);if(typeof K!="function")throw Error(Vt(150));if(G=K.call(G),G==null)throw Error(Vt(151));for(var oe=K=null,ie=N,de=N=0,le=null,ye=G.next();ie!==null&&!ye.done;de++,ye=G.next()){ie.index>de?(le=ie,ie=null):le=ie.sibling;var Ce=R(j,ie,ye.value,Y);if(Ce===null){ie===null&&(ie=le);break}e&&ie&&Ce.alternate===null&&t(j,ie),N=p(Ce,N,de),oe===null?K=Ce:oe.sibling=Ce,oe=Ce,ie=le}if(ye.done)return o(j,ie),Xr&&Kc(j,de),K;if(ie===null){for(;!ye.done;de++,ye=G.next())ye=D(j,ye.value,Y),ye!==null&&(N=p(ye,N,de),oe===null?K=ye:oe.sibling=ye,oe=ye);return Xr&&Kc(j,de),K}for(ie=l(j,ie);!ye.done;de++,ye=G.next())ye=$(ie,j,de,ye.value,Y),ye!==null&&(e&&ye.alternate!==null&&ie.delete(ye.key===null?de:ye.key),N=p(ye,N,de),oe===null?K=ye:oe.sibling=ye,oe=ye);return e&&ie.forEach(function(Fe){return t(j,Fe)}),Xr&&Kc(j,de),K}function J(j,N,G,Y){if(typeof G=="object"&&G!==null&&G.type===Fd&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case mg:e:{for(var K=G.key,oe=N;oe!==null;){if(oe.key===K){if(K=G.type,K===Fd){if(oe.tag===7){o(j,oe.sibling),N=d(oe,G.props.children),N.return=j,j=N;break e}}else if(oe.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Bl&&i6(K)===oe.type){o(j,oe.sibling),N=d(oe,G.props),N.ref=mf(j,oe,G),N.return=j,j=N;break e}o(j,oe);break}else t(j,oe);oe=oe.sibling}G.type===Fd?(N=au(G.props.children,j.mode,Y,G.key),N.return=j,j=N):(Y=Jg(G.type,G.key,G.props,null,j.mode,Y),Y.ref=mf(j,N,G),Y.return=j,j=Y)}return y(j);case Bd:e:{for(oe=G.key;N!==null;){if(N.key===oe)if(N.tag===4&&N.stateNode.containerInfo===G.containerInfo&&N.stateNode.implementation===G.implementation){o(j,N.sibling),N=d(N,G.children||[]),N.return=j,j=N;break e}else{o(j,N);break}else t(j,N);N=N.sibling}N=fx(G,j.mode,Y),N.return=j,j=N}return y(j);case Bl:return oe=G._init,J(j,N,oe(G._payload),Y)}if(If(G))return V(j,N,G,Y);if(uf(G))return B(j,N,G,Y);Eg(j,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,N!==null&&N.tag===6?(o(j,N.sibling),N=d(N,G),N.return=j,j=N):(o(j,N),N=px(G,j.mode,Y),N.return=j,j=N),y(j)):o(j,N)}return J}var hh=jT(!0),UT=jT(!1),z1={},ya=ic(z1),d1=ic(z1),h1=ic(z1);function iu(e){if(e===z1)throw Error(Vt(174));return e}function wb(e,t){switch(Br(h1,t),Br(d1,e),Br(ya,z1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ux(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ux(t,e)}Wr(ya),Br(ya,t)}function ph(){Wr(ya),Wr(d1),Wr(h1)}function VT(e){iu(h1.current);var t=iu(ya.current),o=Ux(t,e.type);t!==o&&(Br(d1,e),Br(ya,o))}function Sb(e){d1.current===e&&(Wr(ya),Wr(d1))}var ii=ic(0);function C0(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ax=[];function Tb(){for(var e=0;e<ax.length;e++)ax[e]._workInProgressVersionPrimary=null;ax.length=0}var qg=nl.ReactCurrentDispatcher,lx=nl.ReactCurrentBatchConfig,pu=0,oi=null,Si=null,Di=null,E0=!1,jf=!1,p1=0,qI=0;function Zi(){throw Error(Vt(321))}function Cb(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!Hs(e[o],t[o]))return!1;return!0}function Eb(e,t,o,l,d,p){if(pu=p,oi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qg.current=e===null||e.memoizedState===null?KI:JI,e=o(l,d),jf){p=0;do{if(jf=!1,p1=0,25<=p)throw Error(Vt(301));p+=1,Di=Si=null,t.updateQueue=null,qg.current=QI,e=o(l,d)}while(jf)}if(qg.current=k0,t=Si!==null&&Si.next!==null,pu=0,Di=Si=oi=null,E0=!1,t)throw Error(Vt(300));return e}function kb(){var e=p1!==0;return p1=0,e}function aa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?oi.memoizedState=Di=e:Di=Di.next=e,Di}function ps(){if(Si===null){var e=oi.alternate;e=e!==null?e.memoizedState:null}else e=Si.next;var t=Di===null?oi.memoizedState:Di.next;if(t!==null)Di=t,Si=e;else{if(e===null)throw Error(Vt(310));Si=e,e={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},Di===null?oi.memoizedState=Di=e:Di=Di.next=e}return Di}function f1(e,t){return typeof t=="function"?t(e):t}function cx(e){var t=ps(),o=t.queue;if(o===null)throw Error(Vt(311));o.lastRenderedReducer=e;var l=Si,d=l.baseQueue,p=o.pending;if(p!==null){if(d!==null){var y=d.next;d.next=p.next,p.next=y}l.baseQueue=d=p,o.pending=null}if(d!==null){p=d.next,l=l.baseState;var a=y=null,w=null,C=p;do{var M=C.lane;if((pu&M)===M)w!==null&&(w=w.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),l=C.hasEagerState?C.eagerState:e(l,C.action);else{var D={lane:M,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};w===null?(a=w=D,y=l):w=w.next=D,oi.lanes|=M,fu|=M}C=C.next}while(C!==null&&C!==p);w===null?y=l:w.next=a,Hs(l,t.memoizedState)||(_o=!0),t.memoizedState=l,t.baseState=y,t.baseQueue=w,o.lastRenderedState=l}if(e=o.interleaved,e!==null){d=e;do p=d.lane,oi.lanes|=p,fu|=p,d=d.next;while(d!==e)}else d===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function ux(e){var t=ps(),o=t.queue;if(o===null)throw Error(Vt(311));o.lastRenderedReducer=e;var l=o.dispatch,d=o.pending,p=t.memoizedState;if(d!==null){o.pending=null;var y=d=d.next;do p=e(p,y.action),y=y.next;while(y!==d);Hs(p,t.memoizedState)||(_o=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),o.lastRenderedState=p}return[p,l]}function WT(){}function GT(e,t){var o=oi,l=ps(),d=t(),p=!Hs(l.memoizedState,d);if(p&&(l.memoizedState=d,_o=!0),l=l.queue,Pb(ZT.bind(null,o,l,e),[e]),l.getSnapshot!==t||p||Di!==null&&Di.memoizedState.tag&1){if(o.flags|=2048,m1(9,qT.bind(null,o,l,d,t),void 0,null),zi===null)throw Error(Vt(349));pu&30||HT(o,t,d)}return d}function HT(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=oi.updateQueue,t===null?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function qT(e,t,o,l){t.value=o,t.getSnapshot=l,XT(t)&&YT(e)}function ZT(e,t,o){return o(function(){XT(t)&&YT(e)})}function XT(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!Hs(e,o)}catch{return!0}}function YT(e){var t=Xa(e,1);t!==null&&Gs(t,e,1,-1)}function o6(e){var t=aa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f1,lastRenderedState:e},t.queue=e,e=e.dispatch=YI.bind(null,oi,e),[t.memoizedState,e]}function m1(e,t,o,l){return e={tag:e,create:t,destroy:o,deps:l,next:null},t=oi.updateQueue,t===null?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(l=o.next,o.next=e,e.next=l,t.lastEffect=e)),e}function KT(){return ps().memoizedState}function Zg(e,t,o,l){var d=aa();oi.flags|=e,d.memoizedState=m1(1|t,o,void 0,l===void 0?null:l)}function Q0(e,t,o,l){var d=ps();l=l===void 0?null:l;var p=void 0;if(Si!==null){var y=Si.memoizedState;if(p=y.destroy,l!==null&&Cb(l,y.deps)){d.memoizedState=m1(t,o,p,l);return}}oi.flags|=e,d.memoizedState=m1(1|t,o,p,l)}function s6(e,t){return Zg(8390656,8,e,t)}function Pb(e,t){return Q0(2048,8,e,t)}function JT(e,t){return Q0(4,2,e,t)}function QT(e,t){return Q0(4,4,e,t)}function e8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function t8(e,t,o){return o=o!=null?o.concat([e]):null,Q0(4,4,e8.bind(null,t,e),o)}function Mb(){}function n8(e,t){var o=ps();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&Cb(t,l[1])?l[0]:(o.memoizedState=[e,t],e)}function r8(e,t){var o=ps();t=t===void 0?null:t;var l=o.memoizedState;return l!==null&&t!==null&&Cb(t,l[1])?l[0]:(e=e(),o.memoizedState=[e,t],e)}function i8(e,t,o){return pu&21?(Hs(o,t)||(o=aT(),oi.lanes|=o,fu|=o,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_o=!0),e.memoizedState=o)}function ZI(e,t){var o=Pr;Pr=o!==0&&4>o?o:4,e(!0);var l=lx.transition;lx.transition={};try{e(!1),t()}finally{Pr=o,lx.transition=l}}function o8(){return ps().memoizedState}function XI(e,t,o){var l=Kl(e);if(o={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null},s8(e))a8(t,o);else if(o=BT(e,t,o,l),o!==null){var d=io();Gs(o,e,l,d),l8(o,t,l)}}function YI(e,t,o){var l=Kl(e),d={lane:l,action:o,hasEagerState:!1,eagerState:null,next:null};if(s8(e))a8(t,d);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var y=t.lastRenderedState,a=p(y,o);if(d.hasEagerState=!0,d.eagerState=a,Hs(a,y)){var w=t.interleaved;w===null?(d.next=d,vb(t)):(d.next=w.next,w.next=d),t.interleaved=d;return}}catch{}finally{}o=BT(e,t,d,l),o!==null&&(d=io(),Gs(o,e,l,d),l8(o,t,l))}}function s8(e){var t=e.alternate;return e===oi||t!==null&&t===oi}function a8(e,t){jf=E0=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function l8(e,t,o){if(o&4194240){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,sb(e,o)}}var k0={readContext:hs,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useInsertionEffect:Zi,useLayoutEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useMutableSource:Zi,useSyncExternalStore:Zi,useId:Zi,unstable_isNewReconciler:!1},KI={readContext:hs,useCallback:function(e,t){return aa().memoizedState=[e,t===void 0?null:t],e},useContext:hs,useEffect:s6,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,Zg(4194308,4,e8.bind(null,t,e),o)},useLayoutEffect:function(e,t){return Zg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zg(4,2,e,t)},useMemo:function(e,t){var o=aa();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var l=aa();return t=o!==void 0?o(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=XI.bind(null,oi,e),[l.memoizedState,e]},useRef:function(e){var t=aa();return e={current:e},t.memoizedState=e},useState:o6,useDebugValue:Mb,useDeferredValue:function(e){return aa().memoizedState=e},useTransition:function(){var e=o6(!1),t=e[0];return e=ZI.bind(null,e[1]),aa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var l=oi,d=aa();if(Xr){if(o===void 0)throw Error(Vt(407));o=o()}else{if(o=t(),zi===null)throw Error(Vt(349));pu&30||HT(l,t,o)}d.memoizedState=o;var p={value:o,getSnapshot:t};return d.queue=p,s6(ZT.bind(null,l,p,e),[e]),l.flags|=2048,m1(9,qT.bind(null,l,p,o,t),void 0,null),o},useId:function(){var e=aa(),t=zi.identifierPrefix;if(Xr){var o=Wa,l=Va;o=(l&~(1<<32-Ws(l)-1)).toString(32)+o,t=":"+t+"R"+o,o=p1++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=qI++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},JI={readContext:hs,useCallback:n8,useContext:hs,useEffect:Pb,useImperativeHandle:t8,useInsertionEffect:JT,useLayoutEffect:QT,useMemo:r8,useReducer:cx,useRef:KT,useState:function(){return cx(f1)},useDebugValue:Mb,useDeferredValue:function(e){var t=ps();return i8(t,Si.memoizedState,e)},useTransition:function(){var e=cx(f1)[0],t=ps().memoizedState;return[e,t]},useMutableSource:WT,useSyncExternalStore:GT,useId:o8,unstable_isNewReconciler:!1},QI={readContext:hs,useCallback:n8,useContext:hs,useEffect:Pb,useImperativeHandle:t8,useInsertionEffect:JT,useLayoutEffect:QT,useMemo:r8,useReducer:ux,useRef:KT,useState:function(){return ux(f1)},useDebugValue:Mb,useDeferredValue:function(e){var t=ps();return Si===null?t.memoizedState=e:i8(t,Si.memoizedState,e)},useTransition:function(){var e=ux(f1)[0],t=ps().memoizedState;return[e,t]},useMutableSource:WT,useSyncExternalStore:GT,useId:o8,unstable_isNewReconciler:!1};function fh(e,t){try{var o="",l=t;do o+=kM(l),l=l.return;while(l);var d=o}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:d,digest:null}}function dx(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function dv(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var eA=typeof WeakMap=="function"?WeakMap:Map;function c8(e,t,o){o=Ga(-1,o),o.tag=3,o.payload={element:null};var l=t.value;return o.callback=function(){M0||(M0=!0,bv=l),dv(e,t)},o}function u8(e,t,o){o=Ga(-1,o),o.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=t.value;o.payload=function(){return l(d)},o.callback=function(){dv(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){dv(e,t),typeof l!="function"&&(Yl===null?Yl=new Set([this]):Yl.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),o}function a6(e,t,o){var l=e.pingCache;if(l===null){l=e.pingCache=new eA;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(o)||(d.add(o),e=fA.bind(null,e,t,o),t.then(e,e))}function l6(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function c6(e,t,o,l,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=Ga(-1,1),t.tag=2,Xl(o,t,1))),o.lanes|=1),e)}var tA=nl.ReactCurrentOwner,_o=!1;function ro(e,t,o,l){t.child=e===null?UT(t,null,o,l):hh(t,e.child,o,l)}function u6(e,t,o,l,d){o=o.render;var p=t.ref;return eh(t,d),l=Eb(e,t,o,l,p,d),o=kb(),e!==null&&!_o?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Ya(e,t,d)):(Xr&&o&&fb(t),t.flags|=1,ro(e,t,l,d),t.child)}function d6(e,t,o,l,d){if(e===null){var p=o.type;return typeof p=="function"&&!Bb(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=p,d8(e,t,p,l,d)):(e=Jg(o.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&d)){var y=p.memoizedProps;if(o=o.compare,o=o!==null?o:a1,o(y,l)&&e.ref===t.ref)return Ya(e,t,d)}return t.flags|=1,e=Jl(p,l),e.ref=t.ref,e.return=t,t.child=e}function d8(e,t,o,l,d){if(e!==null){var p=e.memoizedProps;if(a1(p,l)&&e.ref===t.ref)if(_o=!1,t.pendingProps=l=p,(e.lanes&d)!==0)e.flags&131072&&(_o=!0);else return t.lanes=e.lanes,Ya(e,t,d)}return hv(e,t,o,l,d)}function h8(e,t,o){var l=t.pendingProps,d=l.children,p=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Br(Zd,Ro),Ro|=o;else{if(!(o&1073741824))return e=p!==null?p.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Br(Zd,Ro),Ro|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=p!==null?p.baseLanes:o,Br(Zd,Ro),Ro|=l}else p!==null?(l=p.baseLanes|o,t.memoizedState=null):l=o,Br(Zd,Ro),Ro|=l;return ro(e,t,d,o),t.child}function p8(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function hv(e,t,o,l,d){var p=vo(o)?du:Ji.current;return p=uh(t,p),eh(t,d),o=Eb(e,t,o,l,p,d),l=kb(),e!==null&&!_o?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Ya(e,t,d)):(Xr&&l&&fb(t),t.flags|=1,ro(e,t,o,d),t.child)}function h6(e,t,o,l,d){if(vo(o)){var p=!0;x0(t)}else p=!1;if(eh(t,d),t.stateNode===null)Xg(e,t),NT(t,o,l),uv(t,o,l,d),l=!0;else if(e===null){var y=t.stateNode,a=t.memoizedProps;y.props=a;var w=y.context,C=o.contextType;typeof C=="object"&&C!==null?C=hs(C):(C=vo(o)?du:Ji.current,C=uh(t,C));var M=o.getDerivedStateFromProps,D=typeof M=="function"||typeof y.getSnapshotBeforeUpdate=="function";D||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(a!==l||w!==C)&&r6(t,y,l,C),Fl=!1;var R=t.memoizedState;y.state=R,T0(t,l,y,d),w=t.memoizedState,a!==l||R!==w||xo.current||Fl?(typeof M=="function"&&(cv(t,o,M,l),w=t.memoizedState),(a=Fl||n6(t,o,a,l,R,w,C))?(D||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=w),y.props=l,y.state=w,y.context=C,l=a):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{y=t.stateNode,FT(e,t),a=t.memoizedProps,C=t.type===t.elementType?a:js(t.type,a),y.props=C,D=t.pendingProps,R=y.context,w=o.contextType,typeof w=="object"&&w!==null?w=hs(w):(w=vo(o)?du:Ji.current,w=uh(t,w));var $=o.getDerivedStateFromProps;(M=typeof $=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(a!==D||R!==w)&&r6(t,y,l,w),Fl=!1,R=t.memoizedState,y.state=R,T0(t,l,y,d);var V=t.memoizedState;a!==D||R!==V||xo.current||Fl?(typeof $=="function"&&(cv(t,o,$,l),V=t.memoizedState),(C=Fl||n6(t,o,C,l,R,V,w)||!1)?(M||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,V,w),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,V,w)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||a===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=V),y.props=l,y.state=V,y.context=w,l=C):(typeof y.componentDidUpdate!="function"||a===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),l=!1)}return pv(e,t,o,l,p,d)}function pv(e,t,o,l,d,p){p8(e,t);var y=(t.flags&128)!==0;if(!l&&!y)return d&&K5(t,o,!1),Ya(e,t,p);l=t.stateNode,tA.current=t;var a=y&&typeof o.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&y?(t.child=hh(t,e.child,null,p),t.child=hh(t,null,a,p)):ro(e,t,a,p),t.memoizedState=l.state,d&&K5(t,o,!0),t.child}function f8(e){var t=e.stateNode;t.pendingContext?Y5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Y5(e,t.context,!1),wb(e,t.containerInfo)}function p6(e,t,o,l,d){return dh(),gb(d),t.flags|=256,ro(e,t,o,l),t.child}var fv={dehydrated:null,treeContext:null,retryLane:0};function mv(e){return{baseLanes:e,cachePool:null,transitions:null}}function m8(e,t,o){var l=t.pendingProps,d=ii.current,p=!1,y=(t.flags&128)!==0,a;if((a=y)||(a=e!==null&&e.memoizedState===null?!1:(d&2)!==0),a?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Br(ii,d&1),e===null)return av(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=l.children,e=l.fallback,p?(l=t.mode,p=t.child,y={mode:"hidden",children:y},!(l&1)&&p!==null?(p.childLanes=0,p.pendingProps=y):p=ny(y,l,0,null),e=au(e,l,o,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=mv(o),t.memoizedState=fv,e):Ib(t,y));if(d=e.memoizedState,d!==null&&(a=d.dehydrated,a!==null))return nA(e,t,y,l,a,d,o);if(p){p=l.fallback,y=t.mode,d=e.child,a=d.sibling;var w={mode:"hidden",children:l.children};return!(y&1)&&t.child!==d?(l=t.child,l.childLanes=0,l.pendingProps=w,t.deletions=null):(l=Jl(d,w),l.subtreeFlags=d.subtreeFlags&14680064),a!==null?p=Jl(a,p):(p=au(p,y,o,null),p.flags|=2),p.return=t,l.return=t,l.sibling=p,t.child=l,l=p,p=t.child,y=e.child.memoizedState,y=y===null?mv(o):{baseLanes:y.baseLanes|o,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=e.childLanes&~o,t.memoizedState=fv,l}return p=e.child,e=p.sibling,l=Jl(p,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=o),l.return=t,l.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=l,t.memoizedState=null,l}function Ib(e,t){return t=ny({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kg(e,t,o,l){return l!==null&&gb(l),hh(t,e.child,null,o),e=Ib(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nA(e,t,o,l,d,p,y){if(o)return t.flags&256?(t.flags&=-257,l=dx(Error(Vt(422))),kg(e,t,y,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=l.fallback,d=t.mode,l=ny({mode:"visible",children:l.children},d,0,null),p=au(p,d,y,null),p.flags|=2,l.return=t,p.return=t,l.sibling=p,t.child=l,t.mode&1&&hh(t,e.child,null,y),t.child.memoizedState=mv(y),t.memoizedState=fv,p);if(!(t.mode&1))return kg(e,t,y,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var a=l.dgst;return l=a,p=Error(Vt(419)),l=dx(p,l,void 0),kg(e,t,y,l)}if(a=(y&e.childLanes)!==0,_o||a){if(l=zi,l!==null){switch(y&-y){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(l.suspendedLanes|y)?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Xa(e,d),Gs(l,e,d,-1))}return Ob(),l=dx(Error(Vt(421))),kg(e,t,y,l)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=mA.bind(null,e),d._reactRetry=t,null):(e=p.treeContext,$o=Zl(d.nextSibling),No=t,Xr=!0,Vs=null,e!==null&&(ss[as++]=Va,ss[as++]=Wa,ss[as++]=hu,Va=e.id,Wa=e.overflow,hu=t),t=Ib(t,l.children),t.flags|=4096,t)}function f6(e,t,o){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),lv(e.return,t,o)}function hx(e,t,o,l,d){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:d}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=o,p.tailMode=d)}function g8(e,t,o){var l=t.pendingProps,d=l.revealOrder,p=l.tail;if(ro(e,t,l.children,o),l=ii.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&f6(e,o,t);else if(e.tag===19)f6(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Br(ii,l),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(o=t.child,d=null;o!==null;)e=o.alternate,e!==null&&C0(e)===null&&(d=o),o=o.sibling;o=d,o===null?(d=t.child,t.child=null):(d=o.sibling,o.sibling=null),hx(t,!1,d,o,p);break;case"backwards":for(o=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&C0(e)===null){t.child=d;break}e=d.sibling,d.sibling=o,o=d,d=e}hx(t,!0,o,null,p);break;case"together":hx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),fu|=t.lanes,!(o&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Vt(153));if(t.child!==null){for(e=t.child,o=Jl(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Jl(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function rA(e,t,o){switch(t.tag){case 3:f8(t),dh();break;case 5:VT(t);break;case 1:vo(t.type)&&x0(t);break;case 4:wb(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,d=t.memoizedProps.value;Br(w0,l._currentValue),l._currentValue=d;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Br(ii,ii.current&1),t.flags|=128,null):o&t.child.childLanes?m8(e,t,o):(Br(ii,ii.current&1),e=Ya(e,t,o),e!==null?e.sibling:null);Br(ii,ii.current&1);break;case 19:if(l=(o&t.childLanes)!==0,e.flags&128){if(l)return g8(e,t,o);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Br(ii,ii.current),l)break;return null;case 22:case 23:return t.lanes=0,h8(e,t,o)}return Ya(e,t,o)}var y8,gv,_8,x8;y8=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};gv=function(){};_8=function(e,t,o,l){var d=e.memoizedProps;if(d!==l){e=t.stateNode,iu(ya.current);var p=null;switch(o){case"input":d=Fx(e,d),l=Fx(e,l),p=[];break;case"select":d=si({},d,{value:void 0}),l=si({},l,{value:void 0}),p=[];break;case"textarea":d=jx(e,d),l=jx(e,l),p=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=y0)}Vx(o,l);var y;o=null;for(C in d)if(!l.hasOwnProperty(C)&&d.hasOwnProperty(C)&&d[C]!=null)if(C==="style"){var a=d[C];for(y in a)a.hasOwnProperty(y)&&(o||(o={}),o[y]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(e1.hasOwnProperty(C)?p||(p=[]):(p=p||[]).push(C,null));for(C in l){var w=l[C];if(a=d!=null?d[C]:void 0,l.hasOwnProperty(C)&&w!==a&&(w!=null||a!=null))if(C==="style")if(a){for(y in a)!a.hasOwnProperty(y)||w&&w.hasOwnProperty(y)||(o||(o={}),o[y]="");for(y in w)w.hasOwnProperty(y)&&a[y]!==w[y]&&(o||(o={}),o[y]=w[y])}else o||(p||(p=[]),p.push(C,o)),o=w;else C==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,a=a?a.__html:void 0,w!=null&&a!==w&&(p=p||[]).push(C,w)):C==="children"?typeof w!="string"&&typeof w!="number"||(p=p||[]).push(C,""+w):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(e1.hasOwnProperty(C)?(w!=null&&C==="onScroll"&&Vr("scroll",e),p||a===w||(p=[])):(p=p||[]).push(C,w))}o&&(p=p||[]).push("style",o);var C=p;(t.updateQueue=C)&&(t.flags|=4)}};x8=function(e,t,o,l){o!==l&&(t.flags|=4)};function gf(e,t){if(!Xr)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xi(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,l=0;if(t)for(var d=e.child;d!==null;)o|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)o|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=o,t}function iA(e,t,o){var l=t.pendingProps;switch(mb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xi(t),null;case 1:return vo(t.type)&&_0(),Xi(t),null;case 3:return l=t.stateNode,ph(),Wr(xo),Wr(Ji),Tb(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Cg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vs!==null&&(Tv(Vs),Vs=null))),gv(e,t),Xi(t),null;case 5:Sb(t);var d=iu(h1.current);if(o=t.type,e!==null&&t.stateNode!=null)_8(e,t,o,l,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(Vt(166));return Xi(t),null}if(e=iu(ya.current),Cg(t)){l=t.stateNode,o=t.type;var p=t.memoizedProps;switch(l[ha]=t,l[u1]=p,e=(t.mode&1)!==0,o){case"dialog":Vr("cancel",l),Vr("close",l);break;case"iframe":case"object":case"embed":Vr("load",l);break;case"video":case"audio":for(d=0;d<Df.length;d++)Vr(Df[d],l);break;case"source":Vr("error",l);break;case"img":case"image":case"link":Vr("error",l),Vr("load",l);break;case"details":Vr("toggle",l);break;case"input":S5(l,p),Vr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!p.multiple},Vr("invalid",l);break;case"textarea":C5(l,p),Vr("invalid",l)}Vx(o,p),d=null;for(var y in p)if(p.hasOwnProperty(y)){var a=p[y];y==="children"?typeof a=="string"?l.textContent!==a&&(p.suppressHydrationWarning!==!0&&Tg(l.textContent,a,e),d=["children",a]):typeof a=="number"&&l.textContent!==""+a&&(p.suppressHydrationWarning!==!0&&Tg(l.textContent,a,e),d=["children",""+a]):e1.hasOwnProperty(y)&&a!=null&&y==="onScroll"&&Vr("scroll",l)}switch(o){case"input":gg(l),T5(l,p,!0);break;case"textarea":gg(l),E5(l);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(l.onclick=y0)}l=d,t.updateQueue=l,l!==null&&(t.flags|=4)}else{y=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=HS(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(o,{is:l.is}):(e=y.createElement(o),o==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,o),e[ha]=t,e[u1]=l,y8(e,t,!1,!1),t.stateNode=e;e:{switch(y=Wx(o,l),o){case"dialog":Vr("cancel",e),Vr("close",e),d=l;break;case"iframe":case"object":case"embed":Vr("load",e),d=l;break;case"video":case"audio":for(d=0;d<Df.length;d++)Vr(Df[d],e);d=l;break;case"source":Vr("error",e),d=l;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),d=l;break;case"details":Vr("toggle",e),d=l;break;case"input":S5(e,l),d=Fx(e,l),Vr("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=si({},l,{value:void 0}),Vr("invalid",e);break;case"textarea":C5(e,l),d=jx(e,l),Vr("invalid",e);break;default:d=l}Vx(o,d),a=d;for(p in a)if(a.hasOwnProperty(p)){var w=a[p];p==="style"?XS(e,w):p==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&qS(e,w)):p==="children"?typeof w=="string"?(o!=="textarea"||w!=="")&&t1(e,w):typeof w=="number"&&t1(e,""+w):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(e1.hasOwnProperty(p)?w!=null&&p==="onScroll"&&Vr("scroll",e):w!=null&&eb(e,p,w,y))}switch(o){case"input":gg(e),T5(e,l,!1);break;case"textarea":gg(e),E5(e);break;case"option":l.value!=null&&e.setAttribute("value",""+ec(l.value));break;case"select":e.multiple=!!l.multiple,p=l.value,p!=null?Yd(e,!!l.multiple,p,!1):l.defaultValue!=null&&Yd(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=y0)}switch(o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xi(t),null;case 6:if(e&&t.stateNode!=null)x8(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(Vt(166));if(o=iu(h1.current),iu(ya.current),Cg(t)){if(l=t.stateNode,o=t.memoizedProps,l[ha]=t,(p=l.nodeValue!==o)&&(e=No,e!==null))switch(e.tag){case 3:Tg(l.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tg(l.nodeValue,o,(e.mode&1)!==0)}p&&(t.flags|=4)}else l=(o.nodeType===9?o:o.ownerDocument).createTextNode(l),l[ha]=t,t.stateNode=l}return Xi(t),null;case 13:if(Wr(ii),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xr&&$o!==null&&t.mode&1&&!(t.flags&128))OT(),dh(),t.flags|=98560,p=!1;else if(p=Cg(t),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(Vt(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(Vt(317));p[ha]=t}else dh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xi(t),p=!1}else Vs!==null&&(Tv(Vs),Vs=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||ii.current&1?Ti===0&&(Ti=3):Ob())),t.updateQueue!==null&&(t.flags|=4),Xi(t),null);case 4:return ph(),gv(e,t),e===null&&l1(t.stateNode.containerInfo),Xi(t),null;case 10:return xb(t.type._context),Xi(t),null;case 17:return vo(t.type)&&_0(),Xi(t),null;case 19:if(Wr(ii),p=t.memoizedState,p===null)return Xi(t),null;if(l=(t.flags&128)!==0,y=p.rendering,y===null)if(l)gf(p,!1);else{if(Ti!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=C0(e),y!==null){for(t.flags|=128,gf(p,!1),l=y.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=o,o=t.child;o!==null;)p=o,e=l,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,e=y.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Br(ii,ii.current&1|2),t.child}e=e.sibling}p.tail!==null&&hi()>mh&&(t.flags|=128,l=!0,gf(p,!1),t.lanes=4194304)}else{if(!l)if(e=C0(y),e!==null){if(t.flags|=128,l=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),gf(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Xr)return Xi(t),null}else 2*hi()-p.renderingStartTime>mh&&o!==1073741824&&(t.flags|=128,l=!0,gf(p,!1),t.lanes=4194304);p.isBackwards?(y.sibling=t.child,t.child=y):(o=p.last,o!==null?o.sibling=y:t.child=y,p.last=y)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=hi(),t.sibling=null,o=ii.current,Br(ii,l?o&1|2:o&1),t):(Xi(t),null);case 22:case 23:return Lb(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?Ro&1073741824&&(Xi(t),t.subtreeFlags&6&&(t.flags|=8192)):Xi(t),null;case 24:return null;case 25:return null}throw Error(Vt(156,t.tag))}function oA(e,t){switch(mb(t),t.tag){case 1:return vo(t.type)&&_0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ph(),Wr(xo),Wr(Ji),Tb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sb(t),null;case 13:if(Wr(ii),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Vt(340));dh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Wr(ii),null;case 4:return ph(),null;case 10:return xb(t.type._context),null;case 22:case 23:return Lb(),null;case 24:return null;default:return null}}var Pg=!1,Ki=!1,sA=typeof WeakSet=="function"?WeakSet:Set,gn=null;function qd(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(l){ui(e,t,l)}else o.current=null}function yv(e,t,o){try{o()}catch(l){ui(e,t,l)}}var m6=!1;function aA(e,t){if(ev=f0,e=ST(),pb(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var d=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var y=0,a=-1,w=-1,C=0,M=0,D=e,R=null;t:for(;;){for(var $;D!==o||d!==0&&D.nodeType!==3||(a=y+d),D!==p||l!==0&&D.nodeType!==3||(w=y+l),D.nodeType===3&&(y+=D.nodeValue.length),($=D.firstChild)!==null;)R=D,D=$;for(;;){if(D===e)break t;if(R===o&&++C===d&&(a=y),R===p&&++M===l&&(w=y),($=D.nextSibling)!==null)break;D=R,R=D.parentNode}D=$}o=a===-1||w===-1?null:{start:a,end:w}}else o=null}o=o||{start:0,end:0}}else o=null;for(tv={focusedElem:e,selectionRange:o},f0=!1,gn=t;gn!==null;)if(t=gn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gn=e;else for(;gn!==null;){t=gn;try{var V=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var B=V.memoizedProps,J=V.memoizedState,j=t.stateNode,N=j.getSnapshotBeforeUpdate(t.elementType===t.type?B:js(t.type,B),J);j.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Vt(163))}}catch(Y){ui(t,t.return,Y)}if(e=t.sibling,e!==null){e.return=t.return,gn=e;break}gn=t.return}return V=m6,m6=!1,V}function Uf(e,t,o){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var p=d.destroy;d.destroy=void 0,p!==void 0&&yv(t,o,p)}d=d.next}while(d!==l)}}function ey(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var l=o.create;o.destroy=l()}o=o.next}while(o!==t)}}function _v(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function v8(e){var t=e.alternate;t!==null&&(e.alternate=null,v8(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ha],delete t[u1],delete t[iv],delete t[VI],delete t[WI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function b8(e){return e.tag===5||e.tag===3||e.tag===4}function g6(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||b8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xv(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=y0));else if(l!==4&&(e=e.child,e!==null))for(xv(e,t,o),e=e.sibling;e!==null;)xv(e,t,o),e=e.sibling}function vv(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(vv(e,t,o),e=e.sibling;e!==null;)vv(e,t,o),e=e.sibling}var Oi=null,Us=!1;function Rl(e,t,o){for(o=o.child;o!==null;)w8(e,t,o),o=o.sibling}function w8(e,t,o){if(ga&&typeof ga.onCommitFiberUnmount=="function")try{ga.onCommitFiberUnmount(H0,o)}catch{}switch(o.tag){case 5:Ki||qd(o,t);case 6:var l=Oi,d=Us;Oi=null,Rl(e,t,o),Oi=l,Us=d,Oi!==null&&(Us?(e=Oi,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Oi.removeChild(o.stateNode));break;case 18:Oi!==null&&(Us?(e=Oi,o=o.stateNode,e.nodeType===8?ox(e.parentNode,o):e.nodeType===1&&ox(e,o),o1(e)):ox(Oi,o.stateNode));break;case 4:l=Oi,d=Us,Oi=o.stateNode.containerInfo,Us=!0,Rl(e,t,o),Oi=l,Us=d;break;case 0:case 11:case 14:case 15:if(!Ki&&(l=o.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var p=d,y=p.destroy;p=p.tag,y!==void 0&&(p&2||p&4)&&yv(o,t,y),d=d.next}while(d!==l)}Rl(e,t,o);break;case 1:if(!Ki&&(qd(o,t),l=o.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=o.memoizedProps,l.state=o.memoizedState,l.componentWillUnmount()}catch(a){ui(o,t,a)}Rl(e,t,o);break;case 21:Rl(e,t,o);break;case 22:o.mode&1?(Ki=(l=Ki)||o.memoizedState!==null,Rl(e,t,o),Ki=l):Rl(e,t,o);break;default:Rl(e,t,o)}}function y6(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new sA),t.forEach(function(l){var d=gA.bind(null,e,l);o.has(l)||(o.add(l),l.then(d,d))})}}function Ns(e,t){var o=t.deletions;if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];try{var p=e,y=t,a=y;e:for(;a!==null;){switch(a.tag){case 5:Oi=a.stateNode,Us=!1;break e;case 3:Oi=a.stateNode.containerInfo,Us=!0;break e;case 4:Oi=a.stateNode.containerInfo,Us=!0;break e}a=a.return}if(Oi===null)throw Error(Vt(160));w8(p,y,d),Oi=null,Us=!1;var w=d.alternate;w!==null&&(w.return=null),d.return=null}catch(C){ui(d,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)S8(t,e),t=t.sibling}function S8(e,t){var o=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ns(t,e),sa(e),l&4){try{Uf(3,e,e.return),ey(3,e)}catch(B){ui(e,e.return,B)}try{Uf(5,e,e.return)}catch(B){ui(e,e.return,B)}}break;case 1:Ns(t,e),sa(e),l&512&&o!==null&&qd(o,o.return);break;case 5:if(Ns(t,e),sa(e),l&512&&o!==null&&qd(o,o.return),e.flags&32){var d=e.stateNode;try{t1(d,"")}catch(B){ui(e,e.return,B)}}if(l&4&&(d=e.stateNode,d!=null)){var p=e.memoizedProps,y=o!==null?o.memoizedProps:p,a=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{a==="input"&&p.type==="radio"&&p.name!=null&&WS(d,p),Wx(a,y);var C=Wx(a,p);for(y=0;y<w.length;y+=2){var M=w[y],D=w[y+1];M==="style"?XS(d,D):M==="dangerouslySetInnerHTML"?qS(d,D):M==="children"?t1(d,D):eb(d,M,D,C)}switch(a){case"input":$x(d,p);break;case"textarea":GS(d,p);break;case"select":var R=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var $=p.value;$!=null?Yd(d,!!p.multiple,$,!1):R!==!!p.multiple&&(p.defaultValue!=null?Yd(d,!!p.multiple,p.defaultValue,!0):Yd(d,!!p.multiple,p.multiple?[]:"",!1))}d[u1]=p}catch(B){ui(e,e.return,B)}}break;case 6:if(Ns(t,e),sa(e),l&4){if(e.stateNode===null)throw Error(Vt(162));d=e.stateNode,p=e.memoizedProps;try{d.nodeValue=p}catch(B){ui(e,e.return,B)}}break;case 3:if(Ns(t,e),sa(e),l&4&&o!==null&&o.memoizedState.isDehydrated)try{o1(t.containerInfo)}catch(B){ui(e,e.return,B)}break;case 4:Ns(t,e),sa(e);break;case 13:Ns(t,e),sa(e),d=e.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(zb=hi())),l&4&&y6(e);break;case 22:if(M=o!==null&&o.memoizedState!==null,e.mode&1?(Ki=(C=Ki)||M,Ns(t,e),Ki=C):Ns(t,e),sa(e),l&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!M&&e.mode&1)for(gn=e,M=e.child;M!==null;){for(D=gn=M;gn!==null;){switch(R=gn,$=R.child,R.tag){case 0:case 11:case 14:case 15:Uf(4,R,R.return);break;case 1:qd(R,R.return);var V=R.stateNode;if(typeof V.componentWillUnmount=="function"){l=R,o=R.return;try{t=l,V.props=t.memoizedProps,V.state=t.memoizedState,V.componentWillUnmount()}catch(B){ui(l,o,B)}}break;case 5:qd(R,R.return);break;case 22:if(R.memoizedState!==null){x6(D);continue}}$!==null?($.return=R,gn=$):x6(D)}M=M.sibling}e:for(M=null,D=e;;){if(D.tag===5){if(M===null){M=D;try{d=D.stateNode,C?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(a=D.stateNode,w=D.memoizedProps.style,y=w!=null&&w.hasOwnProperty("display")?w.display:null,a.style.display=ZS("display",y))}catch(B){ui(e,e.return,B)}}}else if(D.tag===6){if(M===null)try{D.stateNode.nodeValue=C?"":D.memoizedProps}catch(B){ui(e,e.return,B)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;M===D&&(M=null),D=D.return}M===D&&(M=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:Ns(t,e),sa(e),l&4&&y6(e);break;case 21:break;default:Ns(t,e),sa(e)}}function sa(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(b8(o)){var l=o;break e}o=o.return}throw Error(Vt(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&(t1(d,""),l.flags&=-33);var p=g6(e);vv(e,p,d);break;case 3:case 4:var y=l.stateNode.containerInfo,a=g6(e);xv(e,a,y);break;default:throw Error(Vt(161))}}catch(w){ui(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lA(e,t,o){gn=e,T8(e)}function T8(e,t,o){for(var l=(e.mode&1)!==0;gn!==null;){var d=gn,p=d.child;if(d.tag===22&&l){var y=d.memoizedState!==null||Pg;if(!y){var a=d.alternate,w=a!==null&&a.memoizedState!==null||Ki;a=Pg;var C=Ki;if(Pg=y,(Ki=w)&&!C)for(gn=d;gn!==null;)y=gn,w=y.child,y.tag===22&&y.memoizedState!==null?v6(d):w!==null?(w.return=y,gn=w):v6(d);for(;p!==null;)gn=p,T8(p),p=p.sibling;gn=d,Pg=a,Ki=C}_6(e)}else d.subtreeFlags&8772&&p!==null?(p.return=d,gn=p):_6(e)}}function _6(e){for(;gn!==null;){var t=gn;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ki||ey(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Ki)if(o===null)l.componentDidMount();else{var d=t.elementType===t.type?o.memoizedProps:js(t.type,o.memoizedProps);l.componentDidUpdate(d,o.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&t6(t,p,l);break;case 3:var y=t.updateQueue;if(y!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}t6(t,y,o)}break;case 5:var a=t.stateNode;if(o===null&&t.flags&4){o=a;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&o.focus();break;case"img":w.src&&(o.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var M=C.memoizedState;if(M!==null){var D=M.dehydrated;D!==null&&o1(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Vt(163))}Ki||t.flags&512&&_v(t)}catch(R){ui(t,t.return,R)}}if(t===e){gn=null;break}if(o=t.sibling,o!==null){o.return=t.return,gn=o;break}gn=t.return}}function x6(e){for(;gn!==null;){var t=gn;if(t===e){gn=null;break}var o=t.sibling;if(o!==null){o.return=t.return,gn=o;break}gn=t.return}}function v6(e){for(;gn!==null;){var t=gn;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{ey(4,t)}catch(w){ui(t,o,w)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var d=t.return;try{l.componentDidMount()}catch(w){ui(t,d,w)}}var p=t.return;try{_v(t)}catch(w){ui(t,p,w)}break;case 5:var y=t.return;try{_v(t)}catch(w){ui(t,y,w)}}}catch(w){ui(t,t.return,w)}if(t===e){gn=null;break}var a=t.sibling;if(a!==null){a.return=t.return,gn=a;break}gn=t.return}}var cA=Math.ceil,P0=nl.ReactCurrentDispatcher,Ab=nl.ReactCurrentOwner,cs=nl.ReactCurrentBatchConfig,ar=0,zi=null,xi=null,Fi=0,Ro=0,Zd=ic(0),Ti=0,g1=null,fu=0,ty=0,Db=0,Vf=null,yo=null,zb=0,mh=1/0,ja=null,M0=!1,bv=null,Yl=null,Mg=!1,Vl=null,I0=0,Wf=0,wv=null,Yg=-1,Kg=0;function io(){return ar&6?hi():Yg!==-1?Yg:Yg=hi()}function Kl(e){return e.mode&1?ar&2&&Fi!==0?Fi&-Fi:HI.transition!==null?(Kg===0&&(Kg=aT()),Kg):(e=Pr,e!==0||(e=window.event,e=e===void 0?16:fT(e.type)),e):1}function Gs(e,t,o,l){if(50<Wf)throw Wf=0,wv=null,Error(Vt(185));I1(e,o,l),(!(ar&2)||e!==zi)&&(e===zi&&(!(ar&2)&&(ty|=o),Ti===4&&Nl(e,Fi)),bo(e,l),o===1&&ar===0&&!(t.mode&1)&&(mh=hi()+500,K0&&oc()))}function bo(e,t){var o=e.callbackNode;HM(e,t);var l=p0(e,e===zi?Fi:0);if(l===0)o!==null&&M5(o),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(o!=null&&M5(o),t===1)e.tag===0?GI(b6.bind(null,e)):zT(b6.bind(null,e)),jI(function(){!(ar&6)&&oc()}),o=null;else{switch(lT(l)){case 1:o=ob;break;case 4:o=oT;break;case 16:o=h0;break;case 536870912:o=sT;break;default:o=h0}o=D8(o,C8.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function C8(e,t){if(Yg=-1,Kg=0,ar&6)throw Error(Vt(327));var o=e.callbackNode;if(th()&&e.callbackNode!==o)return null;var l=p0(e,e===zi?Fi:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=A0(e,l);else{t=l;var d=ar;ar|=2;var p=k8();(zi!==e||Fi!==t)&&(ja=null,mh=hi()+500,su(e,t));do try{hA();break}catch(a){E8(e,a)}while(1);_b(),P0.current=p,ar=d,xi!==null?t=0:(zi=null,Fi=0,t=Ti)}if(t!==0){if(t===2&&(d=Xx(e),d!==0&&(l=d,t=Sv(e,d))),t===1)throw o=g1,su(e,0),Nl(e,l),bo(e,hi()),o;if(t===6)Nl(e,l);else{if(d=e.current.alternate,!(l&30)&&!uA(d)&&(t=A0(e,l),t===2&&(p=Xx(e),p!==0&&(l=p,t=Sv(e,p))),t===1))throw o=g1,su(e,0),Nl(e,l),bo(e,hi()),o;switch(e.finishedWork=d,e.finishedLanes=l,t){case 0:case 1:throw Error(Vt(345));case 2:Jc(e,yo,ja);break;case 3:if(Nl(e,l),(l&130023424)===l&&(t=zb+500-hi(),10<t)){if(p0(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){io(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=rv(Jc.bind(null,e,yo,ja),t);break}Jc(e,yo,ja);break;case 4:if(Nl(e,l),(l&4194240)===l)break;for(t=e.eventTimes,d=-1;0<l;){var y=31-Ws(l);p=1<<y,y=t[y],y>d&&(d=y),l&=~p}if(l=d,l=hi()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*cA(l/1960))-l,10<l){e.timeoutHandle=rv(Jc.bind(null,e,yo,ja),l);break}Jc(e,yo,ja);break;case 5:Jc(e,yo,ja);break;default:throw Error(Vt(329))}}}return bo(e,hi()),e.callbackNode===o?C8.bind(null,e):null}function Sv(e,t){var o=Vf;return e.current.memoizedState.isDehydrated&&(su(e,t).flags|=256),e=A0(e,t),e!==2&&(t=yo,yo=o,t!==null&&Tv(t)),e}function Tv(e){yo===null?yo=e:yo.push.apply(yo,e)}function uA(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var l=0;l<o.length;l++){var d=o[l],p=d.getSnapshot;d=d.value;try{if(!Hs(p(),d))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nl(e,t){for(t&=~Db,t&=~ty,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-Ws(t),l=1<<o;e[o]=-1,t&=~l}}function b6(e){if(ar&6)throw Error(Vt(327));th();var t=p0(e,0);if(!(t&1))return bo(e,hi()),null;var o=A0(e,t);if(e.tag!==0&&o===2){var l=Xx(e);l!==0&&(t=l,o=Sv(e,l))}if(o===1)throw o=g1,su(e,0),Nl(e,t),bo(e,hi()),o;if(o===6)throw Error(Vt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jc(e,yo,ja),bo(e,hi()),null}function Rb(e,t){var o=ar;ar|=1;try{return e(t)}finally{ar=o,ar===0&&(mh=hi()+500,K0&&oc())}}function mu(e){Vl!==null&&Vl.tag===0&&!(ar&6)&&th();var t=ar;ar|=1;var o=cs.transition,l=Pr;try{if(cs.transition=null,Pr=1,e)return e()}finally{Pr=l,cs.transition=o,ar=t,!(ar&6)&&oc()}}function Lb(){Ro=Zd.current,Wr(Zd)}function su(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,NI(o)),xi!==null)for(o=xi.return;o!==null;){var l=o;switch(mb(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&_0();break;case 3:ph(),Wr(xo),Wr(Ji),Tb();break;case 5:Sb(l);break;case 4:ph();break;case 13:Wr(ii);break;case 19:Wr(ii);break;case 10:xb(l.type._context);break;case 22:case 23:Lb()}o=o.return}if(zi=e,xi=e=Jl(e.current,null),Fi=Ro=t,Ti=0,g1=null,Db=ty=fu=0,yo=Vf=null,ru!==null){for(t=0;t<ru.length;t++)if(o=ru[t],l=o.interleaved,l!==null){o.interleaved=null;var d=l.next,p=o.pending;if(p!==null){var y=p.next;p.next=d,l.next=y}o.pending=l}ru=null}return e}function E8(e,t){do{var o=xi;try{if(_b(),qg.current=k0,E0){for(var l=oi.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}E0=!1}if(pu=0,Di=Si=oi=null,jf=!1,p1=0,Ab.current=null,o===null||o.return===null){Ti=1,g1=t,xi=null;break}e:{var p=e,y=o.return,a=o,w=t;if(t=Fi,a.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var C=w,M=a,D=M.tag;if(!(M.mode&1)&&(D===0||D===11||D===15)){var R=M.alternate;R?(M.updateQueue=R.updateQueue,M.memoizedState=R.memoizedState,M.lanes=R.lanes):(M.updateQueue=null,M.memoizedState=null)}var $=l6(y);if($!==null){$.flags&=-257,c6($,y,a,p,t),$.mode&1&&a6(p,C,t),t=$,w=C;var V=t.updateQueue;if(V===null){var B=new Set;B.add(w),t.updateQueue=B}else V.add(w);break e}else{if(!(t&1)){a6(p,C,t),Ob();break e}w=Error(Vt(426))}}else if(Xr&&a.mode&1){var J=l6(y);if(J!==null){!(J.flags&65536)&&(J.flags|=256),c6(J,y,a,p,t),gb(fh(w,a));break e}}p=w=fh(w,a),Ti!==4&&(Ti=2),Vf===null?Vf=[p]:Vf.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var j=c8(p,w,t);e6(p,j);break e;case 1:a=w;var N=p.type,G=p.stateNode;if(!(p.flags&128)&&(typeof N.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Yl===null||!Yl.has(G)))){p.flags|=65536,t&=-t,p.lanes|=t;var Y=u8(p,a,t);e6(p,Y);break e}}p=p.return}while(p!==null)}M8(o)}catch(K){t=K,xi===o&&o!==null&&(xi=o=o.return);continue}break}while(1)}function k8(){var e=P0.current;return P0.current=k0,e===null?k0:e}function Ob(){(Ti===0||Ti===3||Ti===2)&&(Ti=4),zi===null||!(fu&268435455)&&!(ty&268435455)||Nl(zi,Fi)}function A0(e,t){var o=ar;ar|=2;var l=k8();(zi!==e||Fi!==t)&&(ja=null,su(e,t));do try{dA();break}catch(d){E8(e,d)}while(1);if(_b(),ar=o,P0.current=l,xi!==null)throw Error(Vt(261));return zi=null,Fi=0,Ti}function dA(){for(;xi!==null;)P8(xi)}function hA(){for(;xi!==null&&!BM();)P8(xi)}function P8(e){var t=A8(e.alternate,e,Ro);e.memoizedProps=e.pendingProps,t===null?M8(e):xi=t,Ab.current=null}function M8(e){var t=e;do{var o=t.alternate;if(e=t.return,t.flags&32768){if(o=oA(o,t),o!==null){o.flags&=32767,xi=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ti=6,xi=null;return}}else if(o=iA(o,t,Ro),o!==null){xi=o;return}if(t=t.sibling,t!==null){xi=t;return}xi=t=e}while(t!==null);Ti===0&&(Ti=5)}function Jc(e,t,o){var l=Pr,d=cs.transition;try{cs.transition=null,Pr=1,pA(e,t,o,l)}finally{cs.transition=d,Pr=l}return null}function pA(e,t,o,l){do th();while(Vl!==null);if(ar&6)throw Error(Vt(327));o=e.finishedWork;var d=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(Vt(177));e.callbackNode=null,e.callbackPriority=0;var p=o.lanes|o.childLanes;if(qM(e,p),e===zi&&(xi=zi=null,Fi=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Mg||(Mg=!0,D8(h0,function(){return th(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=cs.transition,cs.transition=null;var y=Pr;Pr=1;var a=ar;ar|=4,Ab.current=null,aA(e,o),S8(o,e),zI(tv),f0=!!ev,tv=ev=null,e.current=o,lA(o),FM(),ar=a,Pr=y,cs.transition=p}else e.current=o;if(Mg&&(Mg=!1,Vl=e,I0=d),p=e.pendingLanes,p===0&&(Yl=null),jM(o.stateNode),bo(e,hi()),t!==null)for(l=e.onRecoverableError,o=0;o<t.length;o++)d=t[o],l(d.value,{componentStack:d.stack,digest:d.digest});if(M0)throw M0=!1,e=bv,bv=null,e;return I0&1&&e.tag!==0&&th(),p=e.pendingLanes,p&1?e===wv?Wf++:(Wf=0,wv=e):Wf=0,oc(),null}function th(){if(Vl!==null){var e=lT(I0),t=cs.transition,o=Pr;try{if(cs.transition=null,Pr=16>e?16:e,Vl===null)var l=!1;else{if(e=Vl,Vl=null,I0=0,ar&6)throw Error(Vt(331));var d=ar;for(ar|=4,gn=e.current;gn!==null;){var p=gn,y=p.child;if(gn.flags&16){var a=p.deletions;if(a!==null){for(var w=0;w<a.length;w++){var C=a[w];for(gn=C;gn!==null;){var M=gn;switch(M.tag){case 0:case 11:case 15:Uf(8,M,p)}var D=M.child;if(D!==null)D.return=M,gn=D;else for(;gn!==null;){M=gn;var R=M.sibling,$=M.return;if(v8(M),M===C){gn=null;break}if(R!==null){R.return=$,gn=R;break}gn=$}}}var V=p.alternate;if(V!==null){var B=V.child;if(B!==null){V.child=null;do{var J=B.sibling;B.sibling=null,B=J}while(B!==null)}}gn=p}}if(p.subtreeFlags&2064&&y!==null)y.return=p,gn=y;else e:for(;gn!==null;){if(p=gn,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Uf(9,p,p.return)}var j=p.sibling;if(j!==null){j.return=p.return,gn=j;break e}gn=p.return}}var N=e.current;for(gn=N;gn!==null;){y=gn;var G=y.child;if(y.subtreeFlags&2064&&G!==null)G.return=y,gn=G;else e:for(y=N;gn!==null;){if(a=gn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ey(9,a)}}catch(K){ui(a,a.return,K)}if(a===y){gn=null;break e}var Y=a.sibling;if(Y!==null){Y.return=a.return,gn=Y;break e}gn=a.return}}if(ar=d,oc(),ga&&typeof ga.onPostCommitFiberRoot=="function")try{ga.onPostCommitFiberRoot(H0,e)}catch{}l=!0}return l}finally{Pr=o,cs.transition=t}}return!1}function w6(e,t,o){t=fh(o,t),t=c8(e,t,1),e=Xl(e,t,1),t=io(),e!==null&&(I1(e,1,t),bo(e,t))}function ui(e,t,o){if(e.tag===3)w6(e,e,o);else for(;t!==null;){if(t.tag===3){w6(t,e,o);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Yl===null||!Yl.has(l))){e=fh(o,e),e=u8(t,e,1),t=Xl(t,e,1),e=io(),t!==null&&(I1(t,1,e),bo(t,e));break}}t=t.return}}function fA(e,t,o){var l=e.pingCache;l!==null&&l.delete(t),t=io(),e.pingedLanes|=e.suspendedLanes&o,zi===e&&(Fi&o)===o&&(Ti===4||Ti===3&&(Fi&130023424)===Fi&&500>hi()-zb?su(e,0):Db|=o),bo(e,t)}function I8(e,t){t===0&&(e.mode&1?(t=xg,xg<<=1,!(xg&130023424)&&(xg=4194304)):t=1);var o=io();e=Xa(e,t),e!==null&&(I1(e,t,o),bo(e,o))}function mA(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),I8(e,o)}function gA(e,t){var o=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(o=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(Vt(314))}l!==null&&l.delete(t),I8(e,o)}var A8;A8=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||xo.current)_o=!0;else{if(!(e.lanes&o)&&!(t.flags&128))return _o=!1,rA(e,t,o);_o=!!(e.flags&131072)}else _o=!1,Xr&&t.flags&1048576&&RT(t,b0,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Xg(e,t),e=t.pendingProps;var d=uh(t,Ji.current);eh(t,o),d=Eb(null,t,l,e,d,o);var p=kb();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vo(l)?(p=!0,x0(t)):p=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,bb(t),d.updater=J0,t.stateNode=d,d._reactInternals=t,uv(t,l,e,o),t=pv(null,t,l,!0,p,o)):(t.tag=0,Xr&&p&&fb(t),ro(null,t,d,o),t=t.child),t;case 16:l=t.elementType;e:{switch(Xg(e,t),e=t.pendingProps,d=l._init,l=d(l._payload),t.type=l,d=t.tag=_A(l),e=js(l,e),d){case 0:t=hv(null,t,l,e,o);break e;case 1:t=h6(null,t,l,e,o);break e;case 11:t=u6(null,t,l,e,o);break e;case 14:t=d6(null,t,l,js(l.type,e),o);break e}throw Error(Vt(306,l,""))}return t;case 0:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:js(l,d),hv(e,t,l,d,o);case 1:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:js(l,d),h6(e,t,l,d,o);case 3:e:{if(f8(t),e===null)throw Error(Vt(387));l=t.pendingProps,p=t.memoizedState,d=p.element,FT(e,t),T0(t,l,null,o);var y=t.memoizedState;if(l=y.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){d=fh(Error(Vt(423)),t),t=p6(e,t,l,o,d);break e}else if(l!==d){d=fh(Error(Vt(424)),t),t=p6(e,t,l,o,d);break e}else for($o=Zl(t.stateNode.containerInfo.firstChild),No=t,Xr=!0,Vs=null,o=UT(t,null,l,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(dh(),l===d){t=Ya(e,t,o);break e}ro(e,t,l,o)}t=t.child}return t;case 5:return VT(t),e===null&&av(t),l=t.type,d=t.pendingProps,p=e!==null?e.memoizedProps:null,y=d.children,nv(l,d)?y=null:p!==null&&nv(l,p)&&(t.flags|=32),p8(e,t),ro(e,t,y,o),t.child;case 6:return e===null&&av(t),null;case 13:return m8(e,t,o);case 4:return wb(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=hh(t,null,l,o):ro(e,t,l,o),t.child;case 11:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:js(l,d),u6(e,t,l,d,o);case 7:return ro(e,t,t.pendingProps,o),t.child;case 8:return ro(e,t,t.pendingProps.children,o),t.child;case 12:return ro(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(l=t.type._context,d=t.pendingProps,p=t.memoizedProps,y=d.value,Br(w0,l._currentValue),l._currentValue=y,p!==null)if(Hs(p.value,y)){if(p.children===d.children&&!xo.current){t=Ya(e,t,o);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var a=p.dependencies;if(a!==null){y=p.child;for(var w=a.firstContext;w!==null;){if(w.context===l){if(p.tag===1){w=Ga(-1,o&-o),w.tag=2;var C=p.updateQueue;if(C!==null){C=C.shared;var M=C.pending;M===null?w.next=w:(w.next=M.next,M.next=w),C.pending=w}}p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),lv(p.return,o,t),a.lanes|=o;break}w=w.next}}else if(p.tag===10)y=p.type===t.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(Vt(341));y.lanes|=o,a=y.alternate,a!==null&&(a.lanes|=o),lv(y,o,t),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===t){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}ro(e,t,d.children,o),t=t.child}return t;case 9:return d=t.type,l=t.pendingProps.children,eh(t,o),d=hs(d),l=l(d),t.flags|=1,ro(e,t,l,o),t.child;case 14:return l=t.type,d=js(l,t.pendingProps),d=js(l.type,d),d6(e,t,l,d,o);case 15:return d8(e,t,t.type,t.pendingProps,o);case 17:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:js(l,d),Xg(e,t),t.tag=1,vo(l)?(e=!0,x0(t)):e=!1,eh(t,o),NT(t,l,d),uv(t,l,d,o),pv(null,t,l,!0,e,o);case 19:return g8(e,t,o);case 22:return h8(e,t,o)}throw Error(Vt(156,t.tag))};function D8(e,t){return iT(e,t)}function yA(e,t,o,l){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(e,t,o,l){return new yA(e,t,o,l)}function Bb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _A(e){if(typeof e=="function")return Bb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nb)return 11;if(e===rb)return 14}return 2}function Jl(e,t){var o=e.alternate;return o===null?(o=ls(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Jg(e,t,o,l,d,p){var y=2;if(l=e,typeof e=="function")Bb(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Fd:return au(o.children,d,p,t);case tb:y=8,d|=8;break;case Rx:return e=ls(12,o,t,d|2),e.elementType=Rx,e.lanes=p,e;case Lx:return e=ls(13,o,t,d),e.elementType=Lx,e.lanes=p,e;case Ox:return e=ls(19,o,t,d),e.elementType=Ox,e.lanes=p,e;case jS:return ny(o,d,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $S:y=10;break e;case NS:y=9;break e;case nb:y=11;break e;case rb:y=14;break e;case Bl:y=16,l=null;break e}throw Error(Vt(130,e==null?e:typeof e,""))}return t=ls(y,o,t,d),t.elementType=e,t.type=l,t.lanes=p,t}function au(e,t,o,l){return e=ls(7,e,l,t),e.lanes=o,e}function ny(e,t,o,l){return e=ls(22,e,l,t),e.elementType=jS,e.lanes=o,e.stateNode={isHidden:!1},e}function px(e,t,o){return e=ls(6,e,null,t),e.lanes=o,e}function fx(e,t,o){return t=ls(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xA(e,t,o,l,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z2(0),this.expirationTimes=Z2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z2(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Fb(e,t,o,l,d,p,y,a,w){return e=new xA(e,t,o,a,w),t===1?(t=1,p===!0&&(t|=8)):t=0,p=ls(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:l,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},bb(p),e}function vA(e,t,o){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bd,key:l==null?null:""+l,children:e,containerInfo:t,implementation:o}}function z8(e){if(!e)return tc;e=e._reactInternals;e:{if(wu(e)!==e||e.tag!==1)throw Error(Vt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Vt(171))}if(e.tag===1){var o=e.type;if(vo(o))return DT(e,o,t)}return t}function R8(e,t,o,l,d,p,y,a,w){return e=Fb(o,l,!0,e,d,p,y,a,w),e.context=z8(null),o=e.current,l=io(),d=Kl(o),p=Ga(l,d),p.callback=t??null,Xl(o,p,d),e.current.lanes=d,I1(e,d,l),bo(e,l),e}function ry(e,t,o,l){var d=t.current,p=io(),y=Kl(d);return o=z8(o),t.context===null?t.context=o:t.pendingContext=o,t=Ga(p,y),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=Xl(d,t,y),e!==null&&(Gs(e,d,y,p),Hg(e,d,y)),y}function D0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function S6(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function $b(e,t){S6(e,t),(e=e.alternate)&&S6(e,t)}function bA(){return null}var L8=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nb(e){this._internalRoot=e}iy.prototype.render=Nb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Vt(409));ry(e,t,null,null)};iy.prototype.unmount=Nb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mu(function(){ry(null,e,null,null)}),t[Za]=null}};function iy(e){this._internalRoot=e}iy.prototype.unstable_scheduleHydration=function(e){if(e){var t=dT();e={blockedOn:null,target:e,priority:t};for(var o=0;o<$l.length&&t!==0&&t<$l[o].priority;o++);$l.splice(o,0,e),o===0&&pT(e)}};function jb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function T6(){}function wA(e,t,o,l,d){if(d){if(typeof l=="function"){var p=l;l=function(){var C=D0(y);p.call(C)}}var y=R8(t,l,e,0,null,!1,!1,"",T6);return e._reactRootContainer=y,e[Za]=y.current,l1(e.nodeType===8?e.parentNode:e),mu(),y}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var a=l;l=function(){var C=D0(w);a.call(C)}}var w=Fb(e,0,!1,null,null,!1,!1,"",T6);return e._reactRootContainer=w,e[Za]=w.current,l1(e.nodeType===8?e.parentNode:e),mu(function(){ry(t,w,o,l)}),w}function sy(e,t,o,l,d){var p=o._reactRootContainer;if(p){var y=p;if(typeof d=="function"){var a=d;d=function(){var w=D0(y);a.call(w)}}ry(t,y,e,d)}else y=wA(o,t,e,d,l);return D0(y)}cT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=Af(t.pendingLanes);o!==0&&(sb(t,o|1),bo(t,hi()),!(ar&6)&&(mh=hi()+500,oc()))}break;case 13:mu(function(){var l=Xa(e,1);if(l!==null){var d=io();Gs(l,e,1,d)}}),$b(e,1)}};ab=function(e){if(e.tag===13){var t=Xa(e,134217728);if(t!==null){var o=io();Gs(t,e,134217728,o)}$b(e,134217728)}};uT=function(e){if(e.tag===13){var t=Kl(e),o=Xa(e,t);if(o!==null){var l=io();Gs(o,e,t,l)}$b(e,t)}};dT=function(){return Pr};hT=function(e,t){var o=Pr;try{return Pr=e,t()}finally{Pr=o}};Hx=function(e,t,o){switch(t){case"input":if($x(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var l=o[t];if(l!==e&&l.form===e.form){var d=Y0(l);if(!d)throw Error(Vt(90));VS(l),$x(l,d)}}}break;case"textarea":GS(e,o);break;case"select":t=o.value,t!=null&&Yd(e,!!o.multiple,t,!1)}};JS=Rb;QS=mu;var SA={usingClientEntryPoint:!1,Events:[D1,Ud,Y0,YS,KS,Rb]},yf={findFiberByHostInstance:nu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},TA={bundleType:yf.bundleType,version:yf.version,rendererPackageName:yf.rendererPackageName,rendererConfig:yf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nT(e),e===null?null:e.stateNode},findFiberByHostInstance:yf.findFiberByHostInstance||bA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ig=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ig.isDisabled&&Ig.supportsFiber)try{H0=Ig.inject(TA),ga=Ig}catch{}}Go.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SA;Go.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jb(t))throw Error(Vt(200));return vA(e,t,null,o)};Go.createRoot=function(e,t){if(!jb(e))throw Error(Vt(299));var o=!1,l="",d=L8;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Fb(e,1,!1,null,null,o,!1,l,d),e[Za]=t.current,l1(e.nodeType===8?e.parentNode:e),new Nb(t)};Go.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Vt(188)):(e=Object.keys(e).join(","),Error(Vt(268,e)));return e=nT(t),e=e===null?null:e.stateNode,e};Go.flushSync=function(e){return mu(e)};Go.hydrate=function(e,t,o){if(!oy(t))throw Error(Vt(200));return sy(null,e,t,!0,o)};Go.hydrateRoot=function(e,t,o){if(!jb(e))throw Error(Vt(405));var l=o!=null&&o.hydratedSources||null,d=!1,p="",y=L8;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),t=R8(t,null,e,1,o??null,d,!1,p,y),e[Za]=t.current,l1(e),l)for(e=0;e<l.length;e++)o=l[e],d=o._getVersion,d=d(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,d]:t.mutableSourceEagerHydrationData.push(o,d);return new iy(t)};Go.render=function(e,t,o){if(!oy(t))throw Error(Vt(200));return sy(null,e,t,!1,o)};Go.unmountComponentAtNode=function(e){if(!oy(e))throw Error(Vt(40));return e._reactRootContainer?(mu(function(){sy(null,null,e,!1,function(){e._reactRootContainer=null,e[Za]=null})}),!0):!1};Go.unstable_batchedUpdates=Rb;Go.unstable_renderSubtreeIntoContainer=function(e,t,o,l){if(!oy(o))throw Error(Vt(200));if(e==null||e._reactInternals===void 0)throw Error(Vt(38));return sy(e,t,o,!1,l)};Go.version="18.2.0-next-9e3b772b8-20220608";function O8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O8)}catch(e){console.error(e)}}O8(),RS.exports=Go;var ay=RS.exports;const Ag=tl(ay);var C6=ay;Dx.createRoot=C6.createRoot,Dx.hydrateRoot=C6.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function z0(){return z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},z0.apply(this,arguments)}var Wl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Wl||(Wl={}));const E6="popstate";function CA(e){e===void 0&&(e={});function t(l,d){let{pathname:p,search:y,hash:a}=l.location;return Cv("",{pathname:p,search:y,hash:a},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function o(l,d){return typeof d=="string"?d:B8(d)}return kA(t,o,null,e)}function Co(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ub(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EA(){return Math.random().toString(36).substr(2,8)}function k6(e,t){return{usr:e.state,key:e.key,idx:t}}function Cv(e,t,o,l){return o===void 0&&(o=null),z0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ly(t):t,{state:o,key:t&&t.key||l||EA()})}function B8(e){let{pathname:t="/",search:o="",hash:l=""}=e;return o&&o!=="?"&&(t+=o.charAt(0)==="?"?o:"?"+o),l&&l!=="#"&&(t+=l.charAt(0)==="#"?l:"#"+l),t}function ly(e){let t={};if(e){let o=e.indexOf("#");o>=0&&(t.hash=e.substr(o),e=e.substr(0,o));let l=e.indexOf("?");l>=0&&(t.search=e.substr(l),e=e.substr(0,l)),e&&(t.pathname=e)}return t}function kA(e,t,o,l){l===void 0&&(l={});let{window:d=document.defaultView,v5Compat:p=!1}=l,y=d.history,a=Wl.Pop,w=null,C=M();C==null&&(C=0,y.replaceState(z0({},y.state,{idx:C}),""));function M(){return(y.state||{idx:null}).idx}function D(){a=Wl.Pop;let J=M(),j=J==null?null:J-C;C=J,w&&w({action:a,location:B.location,delta:j})}function R(J,j){a=Wl.Push;let N=Cv(B.location,J,j);o&&o(N,J),C=M()+1;let G=k6(N,C),Y=B.createHref(N);try{y.pushState(G,"",Y)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;d.location.assign(Y)}p&&w&&w({action:a,location:B.location,delta:1})}function $(J,j){a=Wl.Replace;let N=Cv(B.location,J,j);o&&o(N,J),C=M();let G=k6(N,C),Y=B.createHref(N);y.replaceState(G,"",Y),p&&w&&w({action:a,location:B.location,delta:0})}function V(J){let j=d.location.origin!=="null"?d.location.origin:d.location.href,N=typeof J=="string"?J:B8(J);return Co(j,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,j)}let B={get action(){return a},get location(){return e(d,y)},listen(J){if(w)throw new Error("A history only accepts one active listener");return d.addEventListener(E6,D),w=J,()=>{d.removeEventListener(E6,D),w=null}},createHref(J){return t(d,J)},createURL:V,encodeLocation(J){let j=V(J);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:R,replace:$,go(J){return y.go(J)}};return B}var P6;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(P6||(P6={}));function PA(e,t,o){o===void 0&&(o="/");let l=typeof t=="string"?ly(t):t,d=N8(l.pathname||"/",o);if(d==null)return null;let p=F8(e);MA(p);let y=null;for(let a=0;y==null&&a<p.length;++a)y=FA(p[a],jA(d));return y}function F8(e,t,o,l){t===void 0&&(t=[]),o===void 0&&(o=[]),l===void 0&&(l="");let d=(p,y,a)=>{let w={relativePath:a===void 0?p.path||"":a,caseSensitive:p.caseSensitive===!0,childrenIndex:y,route:p};w.relativePath.startsWith("/")&&(Co(w.relativePath.startsWith(l),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(l.length));let C=nh([l,w.relativePath]),M=o.concat(w);p.children&&p.children.length>0&&(Co(p.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+C+'".')),F8(p.children,t,M,C)),!(p.path==null&&!p.index)&&t.push({path:C,score:OA(C,p.index),routesMeta:M})};return e.forEach((p,y)=>{var a;if(p.path===""||!((a=p.path)!=null&&a.includes("?")))d(p,y);else for(let w of $8(p.path))d(p,y,w)}),t}function $8(e){let t=e.split("/");if(t.length===0)return[];let[o,...l]=t,d=o.endsWith("?"),p=o.replace(/\?$/,"");if(l.length===0)return d?[p,""]:[p];let y=$8(l.join("/")),a=[];return a.push(...y.map(w=>w===""?p:[p,w].join("/"))),d&&a.push(...y),a.map(w=>e.startsWith("/")&&w===""?"/":w)}function MA(e){e.sort((t,o)=>t.score!==o.score?o.score-t.score:BA(t.routesMeta.map(l=>l.childrenIndex),o.routesMeta.map(l=>l.childrenIndex)))}const IA=/^:\w+$/,AA=3,DA=2,zA=1,RA=10,LA=-2,M6=e=>e==="*";function OA(e,t){let o=e.split("/"),l=o.length;return o.some(M6)&&(l+=LA),t&&(l+=DA),o.filter(d=>!M6(d)).reduce((d,p)=>d+(IA.test(p)?AA:p===""?zA:RA),l)}function BA(e,t){return e.length===t.length&&e.slice(0,-1).every((l,d)=>l===t[d])?e[e.length-1]-t[t.length-1]:0}function FA(e,t){let{routesMeta:o}=e,l={},d="/",p=[];for(let y=0;y<o.length;++y){let a=o[y],w=y===o.length-1,C=d==="/"?t:t.slice(d.length)||"/",M=$A({path:a.relativePath,caseSensitive:a.caseSensitive,end:w},C);if(!M)return null;Object.assign(l,M.params);let D=a.route;p.push({params:l,pathname:nh([d,M.pathname]),pathnameBase:VA(nh([d,M.pathnameBase])),route:D}),M.pathnameBase!=="/"&&(d=nh([d,M.pathnameBase]))}return p}function $A(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,l]=NA(e.path,e.caseSensitive,e.end),d=t.match(o);if(!d)return null;let p=d[0],y=p.replace(/(.)\/+$/,"$1"),a=d.slice(1);return{params:l.reduce((C,M,D)=>{if(M==="*"){let R=a[D]||"";y=p.slice(0,p.length-R.length).replace(/(.)\/+$/,"$1")}return C[M]=UA(a[D]||"",M),C},{}),pathname:p,pathnameBase:y,pattern:e}}function NA(e,t,o){t===void 0&&(t=!1),o===void 0&&(o=!0),Ub(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(y,a)=>(l.push(a),"/([^\\/]+)"));return e.endsWith("*")?(l.push("*"),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,t?void 0:"i"),l]}function jA(e){try{return decodeURI(e)}catch(t){return Ub(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function UA(e,t){try{return decodeURIComponent(e)}catch(o){return Ub(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+o+").")),e}}function N8(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let o=t.endsWith("/")?t.length-1:t.length,l=e.charAt(o);return l&&l!=="/"?null:e.slice(o)||"/"}const nh=e=>e.join("/").replace(/\/\/+/g,"/"),VA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function WA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const j8=["post","put","patch","delete"];new Set(j8);const GA=["get",...j8];new Set(GA);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},Ev.apply(this,arguments)}const HA=W.createContext(null),qA=W.createContext(null),U8=W.createContext(null),cy=W.createContext(null),uy=W.createContext({outlet:null,matches:[],isDataRoute:!1}),V8=W.createContext(null);function Vb(){return W.useContext(cy)!=null}function ZA(){return Vb()||Co(!1),W.useContext(cy).location}function XA(e,t){return YA(e,t)}function YA(e,t,o){Vb()||Co(!1);let{navigator:l}=W.useContext(U8),{matches:d}=W.useContext(uy),p=d[d.length-1],y=p?p.params:{};p&&p.pathname;let a=p?p.pathnameBase:"/";p&&p.route;let w=ZA(),C;if(t){var M;let B=typeof t=="string"?ly(t):t;a==="/"||(M=B.pathname)!=null&&M.startsWith(a)||Co(!1),C=B}else C=w;let D=C.pathname||"/",R=a==="/"?D:D.slice(a.length)||"/",$=PA(e,{pathname:R}),V=tD($&&$.map(B=>Object.assign({},B,{params:Object.assign({},y,B.params),pathname:nh([a,l.encodeLocation?l.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?a:nh([a,l.encodeLocation?l.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),d,o);return t&&V?W.createElement(cy.Provider,{value:{location:Ev({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:Wl.Pop}},V):V}function KA(){let e=oD(),t=WA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,d={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},p=null;return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},t),o?W.createElement("pre",{style:d},o):null,p)}const JA=W.createElement(KA,null);class QA extends W.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,o){return o.location!==t.location||o.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||o.error,location:o.location,revalidation:t.revalidation||o.revalidation}}componentDidCatch(t,o){console.error("React Router caught the following error during render",t,o)}render(){return this.state.error?W.createElement(uy.Provider,{value:this.props.routeContext},W.createElement(V8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eD(e){let{routeContext:t,match:o,children:l}=e,d=W.useContext(HA);return d&&d.static&&d.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=o.route.id),W.createElement(uy.Provider,{value:t},l)}function tD(e,t,o){var l;if(t===void 0&&(t=[]),o===void 0&&(o=null),e==null){var d;if((d=o)!=null&&d.errors)e=o.matches;else return null}let p=e,y=(l=o)==null?void 0:l.errors;if(y!=null){let a=p.findIndex(w=>w.route.id&&(y==null?void 0:y[w.route.id]));a>=0||Co(!1),p=p.slice(0,Math.min(p.length,a+1))}return p.reduceRight((a,w,C)=>{let M=w.route.id?y==null?void 0:y[w.route.id]:null,D=null;o&&(D=w.route.errorElement||JA);let R=t.concat(p.slice(0,C+1)),$=()=>{let V;return M?V=D:w.route.Component?V=W.createElement(w.route.Component,null):w.route.element?V=w.route.element:V=a,W.createElement(eD,{match:w,routeContext:{outlet:a,matches:R,isDataRoute:o!=null},children:V})};return o&&(w.route.ErrorBoundary||w.route.errorElement||C===0)?W.createElement(QA,{location:o.location,revalidation:o.revalidation,component:D,error:M,children:$(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):$()},null)}var I6;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(I6||(I6={}));var R0;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(R0||(R0={}));function nD(e){let t=W.useContext(qA);return t||Co(!1),t}function rD(e){let t=W.useContext(uy);return t||Co(!1),t}function iD(e){let t=rD(),o=t.matches[t.matches.length-1];return o.route.id||Co(!1),o.route.id}function oD(){var e;let t=W.useContext(V8),o=nD(R0.UseRouteError),l=iD(R0.UseRouteError);return t||((e=o.errors)==null?void 0:e[l])}function Rd(e){Co(!1)}function sD(e){let{basename:t="/",children:o=null,location:l,navigationType:d=Wl.Pop,navigator:p,static:y=!1}=e;Vb()&&Co(!1);let a=t.replace(/^\/*/,"/"),w=W.useMemo(()=>({basename:a,navigator:p,static:y}),[a,p,y]);typeof l=="string"&&(l=ly(l));let{pathname:C="/",search:M="",hash:D="",state:R=null,key:$="default"}=l,V=W.useMemo(()=>{let B=N8(C,a);return B==null?null:{location:{pathname:B,search:M,hash:D,state:R,key:$},navigationType:d}},[a,C,M,D,R,$,d]);return V==null?null:W.createElement(U8.Provider,{value:w},W.createElement(cy.Provider,{children:o,value:V}))}function aD(e){let{children:t,location:o}=e;return XA(kv(t),o)}var A6;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(A6||(A6={}));new Promise(()=>{});function kv(e,t){t===void 0&&(t=[]);let o=[];return W.Children.forEach(e,(l,d)=>{if(!W.isValidElement(l))return;let p=[...t,d];if(l.type===W.Fragment){o.push.apply(o,kv(l.props.children,p));return}l.type!==Rd&&Co(!1),!l.props.index||!l.props.children||Co(!1);let y={id:l.props.id||p.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(y.children=kv(l.props.children,p)),o.push(y)}),o}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const lD="startTransition",D6=Qf[lD];function cD(e){let{basename:t,children:o,future:l,window:d}=e,p=W.useRef();p.current==null&&(p.current=CA({window:d,v5Compat:!0}));let y=p.current,[a,w]=W.useState({action:y.action,location:y.location}),{v7_startTransition:C}=l||{},M=W.useCallback(D=>{C&&D6?D6(()=>w(D)):w(D)},[w,C]);return W.useLayoutEffect(()=>y.listen(M),[y,M]),W.createElement(sD,{basename:t,children:o,location:a.location,navigationType:a.action,navigator:y})}var z6;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(z6||(z6={}));var R6;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(R6||(R6={}));var W8={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Th,function(){var o,l,d;function p(a,w){if(!o)o=w;else if(!l)l=w;else{var C="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+o+")(sharedChunk); ("+l+")(sharedChunk); self.onerror = null;",M={};o(M),d=w(M),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(d.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}p(["exports"],function(a){var w=typeof self<"u"?self:{},C="2.15.0";let M;const D={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(M==null){const r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{M={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):r}catch{M=r}}return M},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!D.API_URL)return null;try{const r=new URL(D.API_URL);return r.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":r.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},R={supported:!1,testSupport:function(r){!B&&V&&(J?j(r):$=r)}};let $,V,B=!1,J=!1;function j(r){const n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,V),r.isContextLost())return;R.supported=!0}catch{}r.deleteTexture(n),B=!0}w.document&&(V=w.document.createElement("img"),V.onload=function(){$&&j($),$=null,J=!0},V.onerror=function(){B=!0,$=null},V.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const N="01";function G(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Y=K;function K(r,n,i,c){this.cx=3*r,this.bx=3*(i-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=n,this.p2x=i,this.p2y=c}K.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,n){if(n===void 0&&(n=1e-6),r<0)return 0;if(r>1)return 1;for(var i=r,c=0;c<8;c++){var h=this.sampleCurveX(i)-r;if(Math.abs(h)<n)return i;var m=this.sampleCurveDerivativeX(i);if(Math.abs(m)<1e-6)break;i-=h/m}var _=0,v=1;for(i=r,c=0;c<20&&(h=this.sampleCurveX(i),!(Math.abs(h-r)<n));c++)r>h?_=i:v=i,i=.5*(v-_)+_;return i},solve:function(r,n){return this.sampleCurveY(this.solveCurveX(r,n))}};var oe=G(Y),ie=de;function de(r,n){this.x=r,this.y=n}de.prototype={clone:function(){return new de(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,n){return this.clone()._rotateAround(r,n)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var n=r.x-this.x,i=r.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,n){return Math.atan2(this.x*n-this.y*r,this.x*r+this.y*n)},_matMult:function(r){var n=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=n,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var n=Math.cos(r),i=Math.sin(r),c=i*this.x+n*this.y;return this.x=n*this.x-i*this.y,this.y=c,this},_rotateAround:function(r,n){var i=Math.cos(r),c=Math.sin(r),h=n.y+c*(this.x-n.x)+i*(this.y-n.y);return this.x=n.x+i*(this.x-n.x)-c*(this.y-n.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},de.convert=function(r){return r instanceof de?r:Array.isArray(r)?new de(r[0],r[1]):r};var le=G(ie);const ye=Math.PI/180,Ce=180/Math.PI;function Fe(r){return r*ye}function be(r){return r*Ce}const we=[[0,0],[1,0],[1,1],[0,1]];function he(r){if(r<=0)return 0;if(r>=1)return 1;const n=r*r,i=n*r;return 4*(r<.5?i:3*(r-n)+i-.75)}function Be(r,n,i,c){const h=new oe(r,n,i,c);return function(m){return h.solve(m)}}const Ae=Be(.25,.1,.25,1);function Se(r,n,i){return Math.min(i,Math.max(n,r))}function ke(r,n,i){return(i=Se((i-r)/(n-r),0,1))*i*(3-2*i)}function Ne(r,n,i){const c=i-n,h=((r-n)%c+c)%c+n;return h===n?i:h}function nt(r,n,i){if(!r.length)return i(null,[]);let c=r.length;const h=new Array(r.length);let m=null;r.forEach((_,v)=>{n(_,(S,T)=>{S&&(m=S),h[v]=T,--c==0&&i(m,h)})})}function xt(r){const n=[];for(const i in r)n.push(r[i]);return n}function gt(r,...n){for(const i of n)for(const c in i)r[c]=i[c];return r}let rt=1;function vt(){return rt++}function ht(){return function r(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function mt(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Ot(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function $t(r,n){r.forEach(i=>{n[i]&&(n[i]=n[i].bind(n))})}function at(r,n){return r.indexOf(n,r.length-n.length)!==-1}function Je(r,n,i){const c={};for(const h in r)c[h]=n.call(i||this,r[h],h,r);return c}function it(r,n,i){const c={};for(const h in r)n.call(i||this,r[h],h,r)&&(c[h]=r[h]);return c}function St(r){return Array.isArray(r)?r.map(St):typeof r=="object"&&r?Je(r,St):r}const Wt={};function He(r){Wt[r]||(typeof console<"u"&&console.warn(r),Wt[r]=!0)}function jt(r,n,i){return(i.y-r.y)*(n.x-r.x)>(n.y-r.y)*(i.x-r.x)}function lt(r){let n=0;for(let i,c,h=0,m=r.length,_=m-1;h<m;_=h++)i=r[h],c=r[_],n+=(c.x-i.x)*(i.y+c.y);return n}function Ut(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Nt(r){const n={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(i,c,h,m)=>{const _=h||m;return n[c]=!_||_.toLowerCase(),""}),n["max-age"]){const i=parseInt(n["max-age"],10);isNaN(i)?delete n["max-age"]:n["max-age"]=i}return n}let Ft=null;function Lt(r){if(Ft==null){const n=r.navigator?r.navigator.userAgent:null;Ft=!!r.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Ft}function cn(r){try{const n=w[r];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function En(r,n){return[r[4*n],r[4*n+1],r[4*n+2],r[4*n+3]]}const Gn="mapbox-tiles";let un=500,Cn=50,Sn,on;function sn(){try{return w.caches}catch{}}function an(){sn()&&!Sn&&(Sn=w.caches.open(Gn))}function In(r){const n=r.indexOf("?");if(n<0)return r;const i=function(h){const m=h.indexOf("?");return m>0?h.slice(m+1).split("&"):[]}(r),c=i.filter(h=>{const m=h.split("=");return m[0]==="language"||m[0]==="worldview"});return c.length?`${r.slice(0,n)}?${c.join("&")}`:r.slice(0,n)}let Gt=1/0;const tn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(tn);class vn extends Error{constructor(n,i,c){i===401&&We(c)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=i,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Fn=Ut()?()=>self.worker&&self.worker.referrer:()=>(w.location.protocol==="blob:"?w.parent:w).location.href,qn=function(r,n){if(!(/^file:/.test(i=r.url)||/^file:/.test(Fn())&&!/^\w+:/.test(i))){if(w.fetch&&w.Request&&w.AbortController&&w.Request.prototype.hasOwnProperty("signal"))return function(c,h){const m=new w.AbortController,_=new w.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:Fn(),referrerPolicy:c.referrerPolicy,signal:m.signal});let v=!1,S=!1;const T=(P=_.url).indexOf("sku=")>0&&We(P);var P;c.type==="json"&&_.headers.set("Accept","application/json");const A=(F,U,X)=>{if(S)return;if(F&&F.message!=="SecurityError"&&He(F.toString()),U&&X)return z(U);const re=Date.now();w.fetch(_).then(fe=>{if(fe.ok){const Ee=T?fe.clone():null;return z(fe,Ee,re)}return h(new vn(fe.statusText,fe.status,c.url))}).catch(fe=>{fe.name!=="AbortError"&&h(new Error(`${fe.message} ${c.url}`))})},z=(F,U,X)=>{(c.type==="arrayBuffer"?F.arrayBuffer():c.type==="json"?F.json():F.text()).then(re=>{S||(U&&X&&function(fe,Ee,me){if(an(),!Sn)return;const Te={status:Ee.status,statusText:Ee.statusText,headers:new w.Headers};Ee.headers.forEach((Ke,Ze)=>Te.headers.set(Ze,Ke));const Ie=Nt(Ee.headers.get("Cache-Control")||"");if(Ie["no-store"])return;Ie["max-age"]&&Te.headers.set("Expires",new Date(me+1e3*Ie["max-age"]).toUTCString());const Pe=Te.headers.get("Expires");Pe&&(new Date(Pe).getTime()-me<42e4||function(Ke,Ze){if(on===void 0)try{new Response(new ReadableStream),on=!0}catch{on=!1}on?Ze(Ke.body):Ke.blob().then(Ze)}(Ee,Ke=>{const Ze=new w.Response(Ke,Te);an(),Sn&&Sn.then(ut=>ut.put(In(fe.url),Ze)).catch(ut=>He(ut.message))}))}(_,U,X),v=!0,h(null,re,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(re=>{S||h(new Error(re.message))})};return T?function(F,U){if(an(),!Sn)return U(null);const X=In(F.url);Sn.then(re=>{re.match(X).then(fe=>{const Ee=function(me){if(!me)return!1;const Te=new Date(me.headers.get("Expires")||0),Ie=Nt(me.headers.get("Cache-Control")||"");return Te>Date.now()&&!Ie["no-cache"]}(fe);re.delete(X),Ee&&re.put(X,fe.clone()),U(null,fe,Ee)}).catch(U)}).catch(U)}(_,A):A(null,null),{cancel:()=>{S=!0,v||m.abort()}}}(r,n);if(Ut()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,n,void 0,!0)}var i;return function(c,h){const m=new w.XMLHttpRequest;m.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const _ in c.headers)m.setRequestHeader(_,c.headers[_]);return c.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=c.credentials==="include",m.onerror=()=>{h(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let _=m.response;if(c.type==="json")try{_=JSON.parse(m.response)}catch(v){return h(v)}h(null,_,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else h(new vn(m.statusText,m.status,c.url))},m.send(c.body),{cancel:()=>m.abort()}}(r,n)},Ir=function(r,n){return qn(gt(r,{type:"arrayBuffer"}),n)};function $r(r){const n=w.document.createElement("a");return n.href=r,n.protocol===w.document.location.protocol&&n.host===w.document.location.host}const ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Q,te;Q=[],te=0;const _e=function(r,n){if(R.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),te>=D.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:r,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Q.push(m),m}te++;let i=!1;const c=()=>{if(!i)for(i=!0,te--;Q.length&&te<D.MAX_PARALLEL_IMAGE_REQUESTS;){const m=Q.shift(),{requestParameters:_,callback:v,cancelled:S}=m;S||(m.cancel=_e(_,v).cancel)}},h=Ir(r,(m,_,v,S)=>{c(),m?n(m):_&&(w.createImageBitmap?function(T,P){const A=new w.Blob([new Uint8Array(T)],{type:"image/png"});w.createImageBitmap(A).then(z=>{P(null,z)}).catch(z=>{P(new Error(`Could not load image because of ${z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(T,P)=>n(T,P,v,S)):function(T,P){const A=new w.Image,z=w.URL;A.onload=()=>{P(null,A),z.revokeObjectURL(A.src),A.onload=null,w.requestAnimationFrame(()=>{A.src=ge})},A.onerror=()=>P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const F=new w.Blob([new Uint8Array(T)],{type:"image/png"});A.src=T.byteLength?z.createObjectURL(F):ge}(_,(T,P)=>n(T,P,v,S)))});return{cancel:()=>{h.cancel(),c()}}},Me="NO_ACCESS_TOKEN";function Le(r){return r.indexOf("mapbox:")===0}function We(r){return D.API_URL_REGEX.test(r)}function Ve(r){return D.API_CDN_URL_REGEX.test(r)}function Oe(r){return D.API_STYLE_REGEX.test(r)&&!Ge(r)}function Ge(r){return D.API_SPRITE_REGEX.test(r)}const bt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function zt(r){const n=r.match(bt);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function Mt(r){const n=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${n}`}const Pn="mapbox.eventData";function Bn(r){if(!r)return null;const n=r.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(w.atob(n[1]).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class kn{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const i=Bn(D.ACCESS_TOKEN);let c="";return c=i&&i.u?w.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(h,m)=>String.fromCharCode(+("0x"+m)))):D.ACCESS_TOKEN||"",n?`${Pn}.${n}:${c}`:`${Pn}:${c}`}fetchEventData(){const n=cn("localStorage"),i=this.getStorageKey(),c=this.getStorageKey("uuid");if(n)try{const h=w.localStorage.getItem(i);h&&(this.eventData=JSON.parse(h));const m=w.localStorage.getItem(c);m&&(this.anonId=m)}catch{He("Unable to read from LocalStorage")}}saveEventData(){const n=cn("localStorage"),i=this.getStorageKey(),c=this.getStorageKey("uuid");if(n)try{w.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&w.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{He("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,i,c,h){if(!D.EVENTS_URL)return;const m=zt(D.EVENTS_URL);m.params.push(`access_token=${h||D.ACCESS_TOKEN||""}`);const _={event:this.type,created:new Date(n).toISOString()},v=i?gt(_,i):_,S={url:Mt(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([v])};this.pendingRequest=function(T,P){return qn(gt(T,{method:"POST"}),P)}(S,T=>{this.pendingRequest=null,c(T),this.saveEventData(),this.processRequests(h)})}queueRequest(n,i){this.queue.push(n),this.processRequests(i)}}const An=new class extends kn{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,n){D.EVENTS_URL&&D.ACCESS_TOKEN&&Array.isArray(r)&&r.some(i=>Le(i)||We(i))&&this.queueRequest(Date.now(),n)}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Bn(D.ACCESS_TOKEN),i=n?n.u:D.ACCESS_TOKEN;let c=i!==this.eventData.tokenU;Ot(this.anonId)||(this.anonId=ht(),c=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),_=new Date(h),v=(h-this.eventData.lastSuccess)/864e5;c=c||v>=1||v<-1||m.getDate()!==_.getDate()}else c=!0;c?this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:N,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=h,this.eventData.tokenU=i)},r):this.processRequests()}},$n=An.postTurnstileEvent.bind(An),or=new class extends kn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,n,i,c){this.skuToken=n,this.errorCb=c,D.EVENTS_URL&&(i||D.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},i):this.errorCb(new Error(Me)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:i}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),Ot(this.anonId)||(this.anonId=ht()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:N,skuToken:this.skuToken,userId:this.anonId},c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},r))}},yr=or.postMapLoadEvent.bind(or),Nr=new class extends kn{constructor(){super("gljs.performance")}postPerformanceEvent(r,n){D.EVENTS_URL&&(r||D.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},r)}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:i}=this.queue.shift(),c=function(h){const m=w.performance.getEntriesByType("resource"),_=w.performance.getEntriesByType("mark"),v=function(z){const F={};if(z){for(const U in z)if(U!=="other")for(const X of z[U]){const re=`${U}ResolveRangeMin`,fe=`${U}ResolveRangeMax`,Ee=`${U}RequestCount`,me=`${U}RequestCachedCount`;F[re]=Math.min(F[re]||1/0,X.startTime),F[fe]=Math.max(F[fe]||-1/0,X.responseEnd);const Te=Ie=>{F[Ie]===void 0&&(F[Ie]=0),++F[Ie]};X.transferSize!==void 0&&X.transferSize===0&&Te(me),Te(Ee)}}return F}(function(z,F){const U={};if(z)for(const X of z){const re=F(X);U[re]===void 0&&(U[re]=[]),U[re].push(X)}return U}(m,Gr)),S=w.devicePixelRatio,T=w.navigator.connection||w.navigator.mozConnection||w.navigator.webkitConnection,P={counters:[],metadata:[],attributes:[]},A=(z,F,U)=>{U!=null&&z.push({name:F,value:U.toString()})};for(const z in v)A(P.counters,z,v[z]);if(h.interactionRange[0]!==1/0&&h.interactionRange[1]!==-1/0&&(A(P.counters,"interactionRangeMin",h.interactionRange[0]),A(P.counters,"interactionRangeMax",h.interactionRange[1])),_)for(const z of Object.keys(Jn)){const F=Jn[z],U=_.find(X=>X.name===F);U&&A(P.counters,F,U.startTime)}return A(P.counters,"visibilityHidden",h.visibilityHidden),A(P.attributes,"style",function(z){if(z)for(const F of z){const U=F.name.split("?")[0];if(Oe(U)){const X=U.split("/").slice(-2);if(X.length===2)return`mapbox://styles/${X[0]}/${X[1]}`}}}(m)),A(P.attributes,"terrainEnabled",h.terrainEnabled?"true":"false"),A(P.attributes,"fogEnabled",h.fogEnabled?"true":"false"),A(P.attributes,"projection",h.projection),A(P.attributes,"zoom",h.zoom),A(P.metadata,"devicePixelRatio",S),A(P.metadata,"connectionEffectiveType",T?T.effectiveType:void 0),A(P.metadata,"navigatorUserAgent",w.navigator.userAgent),A(P.metadata,"screenWidth",w.screen.width),A(P.metadata,"screenHeight",w.screen.height),A(P.metadata,"windowWidth",w.innerWidth),A(P.metadata,"windowHeight",w.innerHeight),A(P.metadata,"mapWidth",h.width/S),A(P.metadata,"mapHeight",h.height/S),A(P.metadata,"webglRenderer",h.renderer),A(P.metadata,"webglVendor",h.vendor),A(P.metadata,"sdkVersion",C),A(P.metadata,"sdkIdentifier","mapbox-gl-js"),P}(i);for(const h of c.metadata);for(const h of c.counters);for(const h of c.attributes);this.postEvent(n,c,()=>{},r)}},Qe=Nr.postPerformanceEvent.bind(Nr),ot=new class extends kn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,n,i,c){if(!D.API_URL||!D.SESSION_PATH)return;const h=zt(D.API_URL+D.SESSION_PATH);h.params.push(`sku=${n||""}`),h.params.push(`access_token=${c||D.ACCESS_TOKEN||""}`);const m={url:Mt(h),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(_,v){return qn(gt(_,{method:"GET"}),v)}(m,_=>{this.pendingRequest=null,i(_),this.saveEventData(),this.processRequests(c)})}getSessionAPI(r,n,i,c){this.skuToken=n,this.errorCb=c,D.SESSION_PATH&&D.API_URL&&(i||D.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},i):this.errorCb(new Error(Me)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:i}=this.queue.shift();n&&this.success[n]||this.getSession(i,this.skuToken,c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},r)}},Kt=ot.getSessionAPI.bind(ot),dn=new Set,Jn={create:"create",load:"load",fullLoad:"fullLoad"},di={mark(r){w.performance.mark(r)},measure(r,n,i){w.performance.measure(r,n,i)}};function Gr(r){const n=r.name.split("?")[0];return Ve(n)&&n.includes("mapbox-gl.js")?"javascript":Ve(n)&&n.includes("mapbox-gl.css")?"css":function(i){return D.API_FONTS_REGEX.test(i)}(n)?"fontRange":Ge(n)?"sprite":Oe(n)?"style":function(i){return D.API_TILEJSON_REGEX.test(i)}(n)?"tilejson":"other"}const Nn=w.performance;function il(r){const n=r?r.url.toString():void 0;return Nn.getEntriesByName(n)}let ac,zh,Pu,Zo;const vs={now:()=>Pu!==void 0?Pu:w.performance.now(),setNow(r){Pu=r},restoreNow(){Pu=void 0},frame(r){const n=w.requestAnimationFrame(r);return{cancel:()=>w.cancelAnimationFrame(n)}},getImageData(r,n=0){const{width:i,height:c}=r;Zo||(Zo=w.document.createElement("canvas"));const h=Zo.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return(i>Zo.width||c>Zo.height)&&(Zo.width=i,Zo.height=c),h.clearRect(-n,-n,i+2*n,c+2*n),h.drawImage(r,0,0,i,c),h.getImageData(-n,-n,i+2*n,c+2*n)},resolveURL:r=>(ac||(ac=w.document.createElement("a")),ac.href=r,ac.href),get devicePixelRatio(){return w.devicePixelRatio},get prefersReducedMotion(){return!!w.matchMedia&&(zh==null&&(zh=w.matchMedia("(prefers-reduced-motion: reduce)")),zh.matches)}};function Rh(r,n,i){i[r]&&i[r].indexOf(n)!==-1||(i[r]=i[r]||[],i[r].push(n))}function Lh(r,n,i){if(i&&i[r]){const c=i[r].indexOf(n);c!==-1&&i[r].splice(c,1)}}class Sa{constructor(n,i={}){gt(this,i),this.type=n}}class bs extends Sa{constructor(n,i={}){super("error",gt({error:n},i))}}class lc{on(n,i){return this._listeners=this._listeners||{},Rh(n,i,this._listeners),this}off(n,i){return Lh(n,i,this._listeners),Lh(n,i,this._oneTimeListeners),this}once(n,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},Rh(n,i,this._oneTimeListeners),this):new Promise(c=>this.once(n,c))}fire(n,i){typeof n=="string"&&(n=new Sa(n,i||{}));const c=n.type;if(this.listens(c)){n.target=this;const h=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const v of h)v.call(this,n);const m=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const v of m)Lh(c,v,this._oneTimeListeners),v.call(this,n);const _=this._eventedParent;_&&(gt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof bs&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,i){return this._eventedParent=n,this._eventedParentData=i,this}}var ct=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ws(r,...n){for(const i of n)for(const c in i)r[c]=i[c];return r}function Yr(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function pi(r){if(Array.isArray(r))return r.map(pi);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const n={};for(const i in r)n[i]=pi(r[i]);return n}return Yr(r)}class W1 extends Error{constructor(n,i){super(i),this.message=i,this.key=n}}var Xo=W1;class Oh{constructor(n,i=[]){this.parent=n,this.bindings={};for(const[c,h]of i)this.bindings[c]=h}concat(n){return new Oh(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var G1=Oh;const ol={kind:"null"},Yt={kind:"number"},Hn={kind:"string"},Un={kind:"boolean"},Qi={kind:"color"},Po={kind:"object"},Vn={kind:"value"},eo={kind:"collator"},cc={kind:"formatted"},Ta={kind:"resolvedImage"};function ao(r,n){return{kind:"array",itemType:r,N:n}}function Ar(r){if(r.kind==="array"){const n=Ar(r.itemType);return typeof r.N=="number"?`array<${n}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${n}>`}return r.kind}const H1=[ol,Yt,Hn,Un,Qi,cc,Po,ao(Vn),Ta];function Ss(r,n){if(n.kind==="error")return null;if(r.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ss(r.itemType,n.itemType))&&(typeof r.N!="number"||r.N===n.N))return null}else{if(r.kind===n.kind)return null;if(r.kind==="value"){for(const i of H1)if(!Ss(i,n))return null}}return`Expected ${Ar(r)} but found ${Ar(n)} instead.`}function uc(r,n){return n.some(i=>i.kind===r.kind)}function dc(r,n){return n.some(i=>i==="null"?r===null:i==="array"?Array.isArray(r):i==="object"?r&&!Array.isArray(r)&&typeof r=="object":i===typeof r)}var Bh,q1={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function hc(r){return(r=Math.round(r))<0?0:r>255?255:r}function pc(r){return hc(r[r.length-1]==="%"?parseFloat(r)/100*255:parseInt(r))}function Mu(r){return(n=r[r.length-1]==="%"?parseFloat(r)/100:parseFloat(r))<0?0:n>1?1:n;var n}function sl(r,n,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?r+(n-r)*i*6:2*i<1?n:3*i<2?r+(n-r)*(2/3-i)*6:r}try{Bh={}.parseCSSColor=function(r){var n,i=r.replace(/ /g,"").toLowerCase();if(i in q1)return q1[i].slice();if(i[0]==="#")return i.length===4?(n=parseInt(i.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:i.length===7&&(n=parseInt(i.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var c=i.indexOf("("),h=i.indexOf(")");if(c!==-1&&h+1===i.length){var m=i.substr(0,c),_=i.substr(c+1,h-(c+1)).split(","),v=1;switch(m){case"rgba":if(_.length!==4)return null;v=Mu(_.pop());case"rgb":return _.length!==3?null:[pc(_[0]),pc(_[1]),pc(_[2]),v];case"hsla":if(_.length!==4)return null;v=Mu(_.pop());case"hsl":if(_.length!==3)return null;var S=(parseFloat(_[0])%360+360)%360/360,T=Mu(_[1]),P=Mu(_[2]),A=P<=.5?P*(T+1):P+T-P*T,z=2*P-A;return[hc(255*sl(z,A,S+1/3)),hc(255*sl(z,A,S)),hc(255*sl(z,A,S-1/3)),v];default:return null}}return null}}catch{}class Ni{constructor(n,i,c,h=1){this.r=n,this.g=i,this.b=c,this.a=h}static parse(n){if(!n)return;if(n instanceof Ni)return n;if(typeof n!="string")return;const i=Bh(n);return i?new Ni(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}toString(){const[n,i,c,h]=this.toArray();return`rgba(${Math.round(n)},${Math.round(i)},${Math.round(c)},${h})`}toArray(){const{r:n,g:i,b:c,a:h}=this;return h===0?[0,0,0,0]:[255*n/h,255*i/h,255*c/h,h]}toArray01(){const{r:n,g:i,b:c,a:h}=this;return h===0?[0,0,0,0]:[n/h,i/h,c/h,h]}toArray01PremultipliedAlpha(){const{r:n,g:i,b:c,a:h}=this;return[n,i,c,h]}}Ni.black=new Ni(0,0,0,1),Ni.white=new Ni(1,1,1,1),Ni.transparent=new Ni(0,0,0,0),Ni.red=new Ni(1,0,0,1),Ni.blue=new Ni(0,0,1,1);var Hr=Ni;class Fh{constructor(n,i,c){this.sensitivity=n?i?"variant":"case":i?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,i){return this.collator.compare(n,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class $h{constructor(n,i,c,h,m){this.text=n.normalize?n.normalize():n,this.image=i,this.scale=c,this.fontStack=h,this.textColor=m}}class ji{constructor(n){this.sections=n}static fromString(n){return new ji([new $h(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ji?n:ji.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const i of this.sections){if(i.image){n.push(["image",i.image.name]);continue}n.push(i.text);const c={};i.fontStack&&(c["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(c["font-scale"]=i.scale),i.textColor&&(c["text-color"]=["rgba"].concat(i.textColor.toArray())),n.push(c)}return n}}class lo{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new lo({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Z1(r,n,i,c){return typeof r=="number"&&r>=0&&r<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof i=="number"&&i>=0&&i<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[r,n,i,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[r,n,i,c]:[r,n,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fc(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Hr||r instanceof Fh||r instanceof ji||r instanceof lo)return!0;if(Array.isArray(r)){for(const n of r)if(!fc(n))return!1;return!0}if(typeof r=="object"){for(const n in r)if(!fc(r[n]))return!1;return!0}return!1}function jr(r){if(r===null)return ol;if(typeof r=="string")return Hn;if(typeof r=="boolean")return Un;if(typeof r=="number")return Yt;if(r instanceof Hr)return Qi;if(r instanceof Fh)return eo;if(r instanceof ji)return cc;if(r instanceof lo)return Ta;if(Array.isArray(r)){const n=r.length;let i;for(const c of r){const h=jr(c);if(i){if(i===h)continue;i=Vn;break}i=h}return ao(i||Vn,n)}return Po}function mc(r){const n=typeof r;return r===null?"":n==="string"||n==="number"||n==="boolean"?String(r):r instanceof Hr||r instanceof ji||r instanceof lo?r.toString():JSON.stringify(r)}class Nh{constructor(n,i){this.type=n,this.value=i}static parse(n,i){if(n.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!fc(n[1]))return i.error("invalid value");const c=n[1];let h=jr(c);const m=i.expectedType;return h.kind!=="array"||h.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(h=m),new Nh(h,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Hr?["rgba"].concat(this.value.toArray()):this.value instanceof ji?this.value.serialize():this.value}}var Ca=Nh,vi=class{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}};const jh={string:Hn,number:Yt,boolean:Un,object:Po};class Uh{constructor(n,i){this.type=n,this.args=i}static parse(n,i){if(n.length<2)return i.error("Expected at least one argument.");let c,h=1;const m=n[0];if(m==="array"){let v,S;if(n.length>2){const T=n[1];if(typeof T!="string"||!(T in jh)||T==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);v=jh[T],h++}else v=Vn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return i.error('The length argument to "array" must be a positive integer literal',2);S=n[2],h++}c=ao(v,S)}else c=jh[m];const _=[];for(;h<n.length;h++){const v=i.parse(n[h],h,Vn);if(!v)return null;_.push(v)}return new Uh(c,_)}evaluate(n){for(let i=0;i<this.args.length;i++){const c=this.args[i].evaluate(n);if(!Ss(this.type,jr(c)))return c;if(i===this.args.length-1)throw new vi(`Expected value to be of type ${Ar(this.type)}, but found ${Ar(jr(c))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,i=[n.kind];if(n.kind==="array"){const c=n.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){i.push(c.kind);const h=n.N;(typeof h=="number"||this.args.length>1)&&i.push(h)}}return i.concat(this.args.map(c=>c.serialize()))}}var Ts=Uh;class Xs{constructor(n){this.type=cc,this.sections=n}static parse(n,i){if(n.length<2)return i.error("Expected at least one argument.");const c=n[1];if(!Array.isArray(c)&&typeof c=="object")return i.error("First argument must be an image or text section.");const h=[];let m=!1;for(let _=1;_<=n.length-1;++_){const v=n[_];if(m&&typeof v=="object"&&!Array.isArray(v)){m=!1;let S=null;if(v["font-scale"]&&(S=i.parse(v["font-scale"],1,Yt),!S))return null;let T=null;if(v["text-font"]&&(T=i.parse(v["text-font"],1,ao(Hn)),!T))return null;let P=null;if(v["text-color"]&&(P=i.parse(v["text-color"],1,Qi),!P))return null;const A=h[h.length-1];A.scale=S,A.font=T,A.textColor=P}else{const S=i.parse(n[_],1,Vn);if(!S)return null;const T=S.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,h.push({content:S,scale:null,font:null,textColor:null})}}return new Xs(h)}evaluate(n){return new ji(this.sections.map(i=>{const c=i.content.evaluate(n);return jr(c)===Ta?new $h("",c,null,null,null):new $h(mc(c),null,i.scale?i.scale.evaluate(n):null,i.font?i.font.evaluate(n).join(","):null,i.textColor?i.textColor.evaluate(n):null)}))}eachChild(n){for(const i of this.sections)n(i.content),i.scale&&n(i.scale),i.font&&n(i.font),i.textColor&&n(i.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const i of this.sections){n.push(i.content.serialize());const c={};i.scale&&(c["font-scale"]=i.scale.serialize()),i.font&&(c["text-font"]=i.font.serialize()),i.textColor&&(c["text-color"]=i.textColor.serialize()),n.push(c)}return n}}class Iu{constructor(n){this.type=Ta,this.input=n}static parse(n,i){if(n.length!==2)return i.error("Expected two arguments.");const c=i.parse(n[1],1,Hn);return c?new Iu(c):i.error("No image name provided.")}evaluate(n){const i=this.input.evaluate(n),c=lo.fromString(i);return c&&n.availableImages&&(c.available=n.availableImages.indexOf(i)>-1),c}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const d_={"to-boolean":Un,"to-color":Qi,"to-number":Yt,"to-string":Hn};class Vh{constructor(n,i){this.type=n,this.args=i}static parse(n,i){if(n.length<2)return i.error("Expected at least one argument.");const c=n[0];if((c==="to-boolean"||c==="to-string")&&n.length!==2)return i.error("Expected one argument.");const h=d_[c],m=[];for(let _=1;_<n.length;_++){const v=i.parse(n[_],_,Vn);if(!v)return null;m.push(v)}return new Vh(h,m)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let i,c;for(const h of this.args){if(i=h.evaluate(n),c=null,i instanceof Hr)return i;if(typeof i=="string"){const m=n.parseColor(i);if(m)return m}else if(Array.isArray(i)&&(c=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:Z1(i[0],i[1],i[2],i[3]),!c))return new Hr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new vi(c||`Could not parse color from value '${typeof i=="string"?i:String(JSON.stringify(i))}'`)}if(this.type.kind==="number"){let i=null;for(const c of this.args){if(i=c.evaluate(n),i===null)return 0;const h=Number(i);if(!isNaN(h))return h}throw new vi(`Could not convert ${JSON.stringify(i)} to number.`)}return this.type.kind==="formatted"?ji.fromString(mc(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?lo.fromString(mc(this.args[0].evaluate(n))):mc(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Xs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Iu(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(i=>{n.push(i.serialize())}),n}}var al=Vh;const Yo=["Unknown","Point","LineString","Polygon"];var Wh=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Yo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:i,y:c}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(i*n-r[0])+this.featureDistanceData.bearing[1]*(c*n-r[1])}return 0}parseColor(r){let n=this._parseColorCache[r];return n||(n=this._parseColorCache[r]=Hr.parse(r)),n}};class Ea{constructor(n,i,c,h){this.name=n,this.type=i,this._evaluate=c,this.args=h}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,i){const c=n[0],h=Ea.definitions[c];if(!h)return i.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(h)?h[0]:h.type,_=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,v=_.filter(([T])=>!Array.isArray(T)||T.length===n.length-1);let S=null;for(const[T,P]of v){S=new Yh(i.registry,i.path,null,i.scope);const A=[];let z=!1;for(let F=1;F<n.length;F++){const U=n[F],X=Array.isArray(T)?T[F-1]:T.type,re=S.parse(U,1+A.length,X);if(!re){z=!0;break}A.push(re)}if(!z)if(Array.isArray(T)&&T.length!==A.length)S.error(`Expected ${T.length} arguments, but found ${A.length} instead.`);else{for(let F=0;F<A.length;F++){const U=Array.isArray(T)?T[F]:T.type,X=A[F];S.concat(F+1).checkSubtype(U,X.type)}if(S.errors.length===0)return new Ea(c,m,P,A)}}if(v.length===1)i.errors.push(...S.errors);else{const T=(v.length?v:_).map(([A])=>{return z=A,Array.isArray(z)?`(${z.map(Ar).join(", ")})`:`(${Ar(z.type)}...)`;var z}).join(" | "),P=[];for(let A=1;A<n.length;A++){const z=i.parse(n[A],1+P.length);if(!z)return null;P.push(Ar(z.type))}i.error(`Expected arguments of type ${T}, but found (${P.join(", ")}) instead.`)}return null}static register(n,i){Ea.definitions=i;for(const c in i)n[c]=Ea}}var Cs=Ea;class gc{constructor(n,i,c){this.type=eo,this.locale=c,this.caseSensitive=n,this.diacriticSensitive=i}static parse(n,i){if(n.length!==2)return i.error("Expected one argument.");const c=n[1];if(typeof c!="object"||Array.isArray(c))return i.error("Collator options argument must be an object.");const h=i.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,Un);if(!h)return null;const m=i.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,Un);if(!m)return null;let _=null;return c.locale&&(_=i.parse(c.locale,1,Hn),!_)?null:new gc(h,m,_)}evaluate(n){return new Fh(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const Es=8192;function Au(r,n){r[0]=Math.min(r[0],n[0]),r[1]=Math.min(r[1],n[1]),r[2]=Math.max(r[2],n[0]),r[3]=Math.max(r[3],n[1])}function ll(r,n){return!(r[0]<=n[0]||r[2]>=n[2]||r[1]<=n[1]||r[3]>=n[3])}function yc(r,n){const i=(180+r[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,h=Math.pow(2,n.z);return[Math.round(i*h*Es),Math.round(c*h*Es)]}function X1(r,n,i){const c=r[0]-n[0],h=r[1]-n[1],m=r[0]-i[0],_=r[1]-i[1];return c*_-m*h==0&&c*m<=0&&h*_<=0}function Du(r,n){let i=!1;for(let _=0,v=n.length;_<v;_++){const S=n[_];for(let T=0,P=S.length;T<P-1;T++){if(X1(r,S[T],S[T+1]))return!1;(h=S[T])[1]>(c=r)[1]!=(m=S[T+1])[1]>c[1]&&c[0]<(m[0]-h[0])*(c[1]-h[1])/(m[1]-h[1])+h[0]&&(i=!i)}}var c,h,m;return i}function Gh(r,n){for(let i=0;i<n.length;i++)if(Du(r,n[i]))return!0;return!1}function Hh(r,n,i,c){const h=c[0]-i[0],m=c[1]-i[1],_=(r[0]-i[0])*m-h*(r[1]-i[1]),v=(n[0]-i[0])*m-h*(n[1]-i[1]);return _>0&&v<0||_<0&&v>0}function cl(r,n,i){for(const T of i)for(let P=0;P<T.length-1;++P)if((v=[(_=T[P+1])[0]-(m=T[P])[0],_[1]-m[1]])[0]*(S=[(h=n)[0]-(c=r)[0],h[1]-c[1]])[1]-v[1]*S[0]!=0&&Hh(c,h,m,_)&&Hh(m,_,c,h))return!0;var c,h,m,_,v,S;return!1}function nr(r,n){for(let i=0;i<r.length;++i)if(!Du(r[i],n))return!1;for(let i=0;i<r.length-1;++i)if(cl(r[i],r[i+1],n))return!1;return!0}function h_(r,n){for(let i=0;i<n.length;i++)if(nr(r,n[i]))return!0;return!1}function qh(r,n,i){const c=[];for(let h=0;h<r.length;h++){const m=[];for(let _=0;_<r[h].length;_++){const v=yc(r[h][_],i);Au(n,v),m.push(v)}c.push(m)}return c}function Y1(r,n,i){const c=[];for(let h=0;h<r.length;h++){const m=qh(r[h],n,i);c.push(m)}return c}function Zh(r,n,i,c){if(r[0]<i[0]||r[0]>i[2]){const h=.5*c;let m=r[0]-i[0]>h?-c:i[0]-r[0]>h?c:0;m===0&&(m=r[0]-i[2]>h?-c:i[2]-r[0]>h?c:0),r[0]+=m}Au(n,r)}function K1(r,n,i,c){const h=Math.pow(2,c.z)*Es,m=[c.x*Es,c.y*Es],_=[];if(!r)return _;for(const v of r)for(const S of v){const T=[S.x+m[0],S.y+m[1]];Zh(T,n,i,h),_.push(T)}return _}function Xh(r,n,i,c){const h=Math.pow(2,c.z)*Es,m=[c.x*Es,c.y*Es],_=[];if(!r)return _;for(const S of r){const T=[];for(const P of S){const A=[P.x+m[0],P.y+m[1]];Au(n,A),T.push(A)}_.push(T)}if(n[2]-n[0]<=h/2){(v=n)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(const S of _)for(const T of S)Zh(T,n,i,h)}var v;return _}class ul{constructor(n,i){this.type=Un,this.geojson=n,this.geometries=i}static parse(n,i){if(n.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(fc(n[1])){const c=n[1];if(c.type==="FeatureCollection")for(let h=0;h<c.features.length;++h){const m=c.features[h].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ul(c,c.features[h].geometry)}else if(c.type==="Feature"){const h=c.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new ul(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new ul(c,c)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(i,c){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=i.canonicalID();if(!_)return!1;if(c.type==="Polygon"){const v=qh(c.coordinates,m,_),S=K1(i.geometry(),h,m,_);if(!ll(h,m))return!1;for(const T of S)if(!Du(T,v))return!1}if(c.type==="MultiPolygon"){const v=Y1(c.coordinates,m,_),S=K1(i.geometry(),h,m,_);if(!ll(h,m))return!1;for(const T of S)if(!Gh(T,v))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(i,c){const h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=i.canonicalID();if(!_)return!1;if(c.type==="Polygon"){const v=qh(c.coordinates,m,_),S=Xh(i.geometry(),h,m,_);if(!ll(h,m))return!1;for(const T of S)if(!nr(T,v))return!1}if(c.type==="MultiPolygon"){const v=Y1(c.coordinates,m,_),S=Xh(i.geometry(),h,m,_);if(!ll(h,m))return!1;for(const T of S)if(!h_(T,v))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var zu=ul;function dl(r){if(r instanceof Cs&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof zu)return!1;let n=!0;return r.eachChild(i=>{n&&!dl(i)&&(n=!1)}),n}function ks(r){if(r instanceof Cs&&r.name==="feature-state")return!1;let n=!0;return r.eachChild(i=>{n&&!ks(i)&&(n=!1)}),n}function ka(r,n){if(r instanceof Cs&&n.indexOf(r.name)>=0)return!1;let i=!0;return r.eachChild(c=>{i&&!ka(c,n)&&(i=!1)}),i}class Ru{constructor(n,i){this.type=i.type,this.name=n,this.boundExpression=i}static parse(n,i){if(n.length!==2||typeof n[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");const c=n[1];return i.scope.has(c)?new Ru(c,i.scope.get(c)):i.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var J1=Ru;class _c{constructor(n,i=[],c,h=new G1,m=[]){this.registry=n,this.path=i,this.key=i.map(_=>`[${_}]`).join(""),this.scope=h,this.errors=m,this.expectedType=c}parse(n,i,c,h,m={}){return i?this.concat(i,c,h)._parse(n,m):this._parse(n,m)}_parse(n,i){function c(h,m,_){return _==="assert"?new Ts(m,[h]):_==="coerce"?new al(m,[h]):h}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=n[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[h];if(m){let _=m.parse(n,this);if(!_)return null;if(this.expectedType){const v=this.expectedType,S=_.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||S.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(v,S))return null}else _=c(_,v,i.typeAnnotation||"coerce");else _=c(_,v,i.typeAnnotation||"assert")}if(!(_ instanceof Ca)&&_.type.kind!=="resolvedImage"&&Kh(_)){const v=new Wh;try{_=new Ca(_.type,_.evaluate(v))}catch(S){return this.error(S.message),null}}return _}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,i,c){const h=typeof n=="number"?this.path.concat(n):this.path,m=c?this.scope.concat(c):this.scope;return new _c(this.registry,h,i||null,m,this.errors)}error(n,...i){const c=`${this.key}${i.map(h=>`[${h}]`).join("")}`;this.errors.push(new Xo(c,n))}checkSubtype(n,i){const c=Ss(n,i);return c&&this.error(c),c}}var Yh=_c;function Kh(r){if(r instanceof J1)return Kh(r.boundExpression);if(r instanceof Cs&&r.name==="error"||r instanceof gc||r instanceof zu)return!1;const n=r instanceof al||r instanceof Ts;let i=!0;return r.eachChild(c=>{i=n?i&&Kh(c):i&&c instanceof Ca}),!!i&&dl(r)&&ka(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Lu(r,n){const i=r.length-1;let c,h,m=0,_=i,v=0;for(;m<=_;)if(v=Math.floor((m+_)/2),c=r[v],h=r[v+1],c<=n){if(v===i||n<h)return v;m=v+1}else{if(!(c>n))throw new vi("Input is not a number.");_=v-1}return 0}class Ou{constructor(n,i,c){this.type=n,this.input=i,this.labels=[],this.outputs=[];for(const[h,m]of c)this.labels.push(h),this.outputs.push(m)}static parse(n,i){if(n.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return i.error("Expected an even number of arguments.");const c=i.parse(n[1],1,Yt);if(!c)return null;const h=[];let m=null;i.expectedType&&i.expectedType.kind!=="value"&&(m=i.expectedType);for(let _=1;_<n.length;_+=2){const v=_===1?-1/0:n[_],S=n[_+1],T=_,P=_+1;if(typeof v!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(h.length&&h[h.length-1][0]>=v)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const A=i.parse(S,P,m);if(!A)return null;m=m||A.type,h.push([v,A])}return new Ou(m,c,h)}evaluate(n){const i=this.labels,c=this.outputs;if(i.length===1)return c[0].evaluate(n);const h=this.input.evaluate(n);if(h<=i[0])return c[0].evaluate(n);const m=i.length;return h>=i[m-1]?c[m-1].evaluate(n):c[Lu(i,h)].evaluate(n)}eachChild(n){n(this.input);for(const i of this.outputs)n(i)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let i=0;i<this.labels.length;i++)i>0&&n.push(this.labels[i]),n.push(this.outputs[i].serialize());return n}}var Jh=Ou;function Zn(r,n,i){return r*(1-i)+n*i}var xc=Object.freeze({__proto__:null,array:function(r,n,i){return r.map((c,h)=>Zn(c,n[h],i))},color:function(r,n,i){return new Hr(Zn(r.r,n.r,i),Zn(r.g,n.g,i),Zn(r.b,n.b,i),Zn(r.a,n.a,i))},number:Zn});const Q1=.95047,Qh=1.08883,em=4/29,Pa=6/29,ep=3*Pa*Pa,p_=Pa*Pa*Pa,f_=Math.PI/180,m_=180/Math.PI;function tp(r){return r>p_?Math.pow(r,1/3):r/ep+em}function np(r){return r>Pa?r*r*r:ep*(r-em)}function rp(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function Bu(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function tm(r){const n=Bu(r.r),i=Bu(r.g),c=Bu(r.b),h=tp((.4124564*n+.3575761*i+.1804375*c)/Q1),m=tp((.2126729*n+.7151522*i+.072175*c)/1);return{l:116*m-16,a:500*(h-m),b:200*(m-tp((.0193339*n+.119192*i+.9503041*c)/Qh)),alpha:r.a}}function nm(r){let n=(r.l+16)/116,i=isNaN(r.a)?n:n+r.a/500,c=isNaN(r.b)?n:n-r.b/200;return n=1*np(n),i=Q1*np(i),c=Qh*np(c),new Hr(rp(3.2404542*i-1.5371385*n-.4985314*c),rp(-.969266*i+1.8760108*n+.041556*c),rp(.0556434*i-.2040259*n+1.0572252*c),r.alpha)}function g_(r,n,i){const c=n-r;return r+i*(c>180||c<-180?c-360*Math.round(c/360):c)}const vc={forward:tm,reverse:nm,interpolate:function(r,n,i){return{l:Zn(r.l,n.l,i),a:Zn(r.a,n.a,i),b:Zn(r.b,n.b,i),alpha:Zn(r.alpha,n.alpha,i)}}},hl={forward:function(r){const{l:n,a:i,b:c}=tm(r),h=Math.atan2(c,i)*m_;return{h:h<0?h+360:h,c:Math.sqrt(i*i+c*c),l:n,alpha:r.a}},reverse:function(r){const n=r.h*f_,i=r.c;return nm({l:r.l,a:Math.cos(n)*i,b:Math.sin(n)*i,alpha:r.alpha})},interpolate:function(r,n,i){return{h:g_(r.h,n.h,i),c:Zn(r.c,n.c,i),l:Zn(r.l,n.l,i),alpha:Zn(r.alpha,n.alpha,i)}}};var ip=Object.freeze({__proto__:null,hcl:hl,lab:vc});class bc{constructor(n,i,c,h,m){this.type=n,this.operator=i,this.interpolation=c,this.input=h,this.labels=[],this.outputs=[];for(const[_,v]of m)this.labels.push(_),this.outputs.push(v)}static interpolationFactor(n,i,c,h){let m=0;if(n.name==="exponential")m=op(i,n.base,c,h);else if(n.name==="linear")m=op(i,1,c,h);else if(n.name==="cubic-bezier"){const _=n.controlPoints;m=new oe(_[0],_[1],_[2],_[3]).solve(op(i,1,c,h))}return m}static parse(n,i){let[c,h,m,..._]=n;if(!Array.isArray(h)||h.length===0)return i.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const T=h[1];if(typeof T!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:T}}else{if(h[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const T=h.slice(1);if(T.length!==4||T.some(P=>typeof P!="number"||P<0||P>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:T}}}if(n.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(m=i.parse(m,2,Yt),!m)return null;const v=[];let S=null;c==="interpolate-hcl"||c==="interpolate-lab"?S=Qi:i.expectedType&&i.expectedType.kind!=="value"&&(S=i.expectedType);for(let T=0;T<_.length;T+=2){const P=_[T],A=_[T+1],z=T+3,F=T+4;if(typeof P!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(v.length&&v[v.length-1][0]>=P)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',z);const U=i.parse(A,F,S);if(!U)return null;S=S||U.type,v.push([P,U])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new bc(S,c,h,m,v):i.error(`Type ${Ar(S)} is not interpolatable.`)}evaluate(n){const i=this.labels,c=this.outputs;if(i.length===1)return c[0].evaluate(n);const h=this.input.evaluate(n);if(h<=i[0])return c[0].evaluate(n);const m=i.length;if(h>=i[m-1])return c[m-1].evaluate(n);const _=Lu(i,h),v=bc.interpolationFactor(this.interpolation,h,i[_],i[_+1]),S=c[_].evaluate(n),T=c[_+1].evaluate(n);return this.operator==="interpolate"?xc[this.type.kind.toLowerCase()](S,T,v):this.operator==="interpolate-hcl"?hl.reverse(hl.interpolate(hl.forward(S),hl.forward(T),v)):vc.reverse(vc.interpolate(vc.forward(S),vc.forward(T),v))}eachChild(n){n(this.input);for(const i of this.outputs)n(i)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const i=[this.operator,n,this.input.serialize()];for(let c=0;c<this.labels.length;c++)i.push(this.labels[c],this.outputs[c].serialize());return i}}function op(r,n,i,c){const h=c-i,m=r-i;return h===0?0:n===1?m/h:(Math.pow(n,m)-1)/(Math.pow(n,h)-1)}var Ko=bc;class Fu{constructor(n,i){this.type=n,this.args=i}static parse(n,i){if(n.length<2)return i.error("Expectected at least one argument.");let c=null;const h=i.expectedType;h&&h.kind!=="value"&&(c=h);const m=[];for(const v of n.slice(1)){const S=i.parse(v,1+m.length,c,void 0,{typeAnnotation:"omit"});if(!S)return null;c=c||S.type,m.push(S)}const _=h&&m.some(v=>Ss(h,v.type));return new Fu(_?Vn:c,m)}evaluate(n){let i,c=null,h=0;for(const m of this.args){if(h++,c=m.evaluate(n),c&&c instanceof lo&&!c.available&&(i||(i=c),c=null,h===this.args.length))return i;if(c!==null)break}return c}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(i=>{n.push(i.serialize())}),n}}var sp=Fu;class $u{constructor(n,i){this.type=i.type,this.bindings=[].concat(n),this.result=i}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const i of this.bindings)n(i[1]);n(this.result)}static parse(n,i){if(n.length<4)return i.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const c=[];for(let m=1;m<n.length-1;m+=2){const _=n[m];if(typeof _!="string")return i.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return i.error("Variable names must contain only alphanumeric characters or '_'.",m);const v=i.parse(n[m+1],m+1);if(!v)return null;c.push([_,v])}const h=i.parse(n[n.length-1],n.length-1,i.expectedType,c);return h?new $u(c,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[i,c]of this.bindings)n.push(i,c.serialize());return n.push(this.result.serialize()),n}}var rm=$u;class ap{constructor(n,i,c){this.type=n,this.index=i,this.input=c}static parse(n,i){if(n.length!==3)return i.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=i.parse(n[1],1,Yt),h=i.parse(n[2],2,ao(i.expectedType||Vn));return c&&h?new ap(h.type.itemType,c,h):null}evaluate(n){const i=this.index.evaluate(n),c=this.input.evaluate(n);if(i<0)throw new vi(`Array index out of bounds: ${i} < 0.`);if(i>=c.length)throw new vi(`Array index out of bounds: ${i} > ${c.length-1}.`);if(i!==Math.floor(i))throw new vi(`Array index must be an integer, but found ${i} instead.`);return c[i]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var y_=ap;class lp{constructor(n,i){this.type=Un,this.needle=n,this.haystack=i}static parse(n,i){if(n.length!==3)return i.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=i.parse(n[1],1,Vn),h=i.parse(n[2],2,Vn);return c&&h?uc(c.type,[Un,Hn,Yt,ol,Vn])?new lp(c,h):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(c.type)} instead`):null}evaluate(n){const i=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(c==null)return!1;if(!dc(i,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(jr(i))} instead.`);if(!dc(c,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${Ar(jr(c))} instead.`);return c.indexOf(i)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Nu=lp;class wc{constructor(n,i,c){this.type=Yt,this.needle=n,this.haystack=i,this.fromIndex=c}static parse(n,i){if(n.length<=2||n.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=i.parse(n[1],1,Vn),h=i.parse(n[2],2,Vn);if(!c||!h)return null;if(!uc(c.type,[Un,Hn,Yt,ol,Vn]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(c.type)} instead`);if(n.length===4){const m=i.parse(n[3],3,Yt);return m?new wc(c,h,m):null}return new wc(c,h)}evaluate(n){const i=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!dc(i,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(jr(i))} instead.`);if(!dc(c,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${Ar(jr(c))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(n);return c.indexOf(i,h)}return c.indexOf(i)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var im=wc;class cp{constructor(n,i,c,h,m,_){this.inputType=n,this.type=i,this.input=c,this.cases=h,this.outputs=m,this.otherwise=_}static parse(n,i){if(n.length<5)return i.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return i.error("Expected an even number of arguments.");let c,h;i.expectedType&&i.expectedType.kind!=="value"&&(h=i.expectedType);const m={},_=[];for(let T=2;T<n.length-1;T+=2){let P=n[T];const A=n[T+1];Array.isArray(P)||(P=[P]);const z=i.concat(T);if(P.length===0)return z.error("Expected at least one branch label.");for(const U of P){if(typeof U!="number"&&typeof U!="string")return z.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return z.error("Numeric branch labels must be integer values.");if(c){if(z.checkSubtype(c,jr(U)))return null}else c=jr(U);if(m[String(U)]!==void 0)return z.error("Branch labels must be unique.");m[String(U)]=_.length}const F=i.parse(A,T,h);if(!F)return null;h=h||F.type,_.push(F)}const v=i.parse(n[1],1,Vn);if(!v)return null;const S=i.parse(n[n.length-1],n.length-1,h);return S?v.type.kind!=="value"&&i.concat(1).checkSubtype(c,v.type)?null:new cp(c,h,v,m,_,S):null}evaluate(n){const i=this.input.evaluate(n);return(jr(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),c=[],h={};for(const _ of i){const v=h[this.cases[_]];v===void 0?(h[this.cases[_]]=c.length,c.push([this.cases[_],[_]])):c[v][1].push(_)}const m=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,v]of c)n.push(v.length===1?m(v[0]):v.map(m)),n.push(this.outputs[_].serialize());return n.push(this.otherwise.serialize()),n}}var __=cp;class up{constructor(n,i,c){this.type=n,this.branches=i,this.otherwise=c}static parse(n,i){if(n.length<4)return i.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return i.error("Expected an odd number of arguments.");let c;i.expectedType&&i.expectedType.kind!=="value"&&(c=i.expectedType);const h=[];for(let _=1;_<n.length-1;_+=2){const v=i.parse(n[_],_,Un);if(!v)return null;const S=i.parse(n[_+1],_+1,c);if(!S)return null;h.push([v,S]),c=c||S.type}const m=i.parse(n[n.length-1],n.length-1,c);return m?new up(c,h,m):null}evaluate(n){for(const[i,c]of this.branches)if(i.evaluate(n))return c.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[i,c]of this.branches)n(i),n(c);n(this.otherwise)}outputDefined(){return this.branches.every(([n,i])=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(i=>{n.push(i.serialize())}),n}}var om=up;class Sc{constructor(n,i,c,h){this.type=n,this.input=i,this.beginIndex=c,this.endIndex=h}static parse(n,i){if(n.length<=2||n.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=i.parse(n[1],1,Vn),h=i.parse(n[2],2,Yt);if(!c||!h)return null;if(!uc(c.type,[ao(Vn),Hn,Vn]))return i.error(`Expected first argument to be of type array or string, but found ${Ar(c.type)} instead`);if(n.length===4){const m=i.parse(n[3],3,Yt);return m?new Sc(c.type,c,h,m):null}return new Sc(c.type,c,h)}evaluate(n){const i=this.input.evaluate(n),c=this.beginIndex.evaluate(n);if(!dc(i,["string","array"]))throw new vi(`Expected first argument to be of type array or string, but found ${Ar(jr(i))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(n);return i.slice(c,h)}return i.slice(c)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var sm=Sc;function ju(r,n){return r==="=="||r==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function am(r,n,i,c){return c.compare(n,i)===0}function pl(r,n,i){const c=r!=="=="&&r!=="!=";return class G8{constructor(m,_,v){this.type=Un,this.lhs=m,this.rhs=_,this.collator=v,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const v=m[0];let S=_.parse(m[1],1,Vn);if(!S)return null;if(!ju(v,S.type))return _.concat(1).error(`"${v}" comparisons are not supported for type '${Ar(S.type)}'.`);let T=_.parse(m[2],2,Vn);if(!T)return null;if(!ju(v,T.type))return _.concat(2).error(`"${v}" comparisons are not supported for type '${Ar(T.type)}'.`);if(S.type.kind!==T.type.kind&&S.type.kind!=="value"&&T.type.kind!=="value")return _.error(`Cannot compare types '${Ar(S.type)}' and '${Ar(T.type)}'.`);c&&(S.type.kind==="value"&&T.type.kind!=="value"?S=new Ts(T.type,[S]):S.type.kind!=="value"&&T.type.kind==="value"&&(T=new Ts(S.type,[T])));let P=null;if(m.length===4){if(S.type.kind!=="string"&&T.type.kind!=="string"&&S.type.kind!=="value"&&T.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(P=_.parse(m[3],3,eo),!P)return null}return new G8(S,T,P)}evaluate(m){const _=this.lhs.evaluate(m),v=this.rhs.evaluate(m);if(c&&this.hasUntypedArgument){const S=jr(_),T=jr(v);if(S.kind!==T.kind||S.kind!=="string"&&S.kind!=="number")throw new vi(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${S.kind}, ${T.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const S=jr(_),T=jr(v);if(S.kind!=="string"||T.kind!=="string")return n(m,_,v)}return this.collator?i(m,_,v,this.collator.evaluate(m)):n(m,_,v)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[r];return this.eachChild(_=>{m.push(_.serialize())}),m}}}const x_=pl("==",function(r,n,i){return n===i},am),v_=pl("!=",function(r,n,i){return n!==i},function(r,n,i,c){return!am(0,n,i,c)}),b_=pl("<",function(r,n,i){return n<i},function(r,n,i,c){return c.compare(n,i)<0}),w_=pl(">",function(r,n,i){return n>i},function(r,n,i,c){return c.compare(n,i)>0}),S_=pl("<=",function(r,n,i){return n<=i},function(r,n,i,c){return c.compare(n,i)<=0}),lm=pl(">=",function(r,n,i){return n>=i},function(r,n,i,c){return c.compare(n,i)>=0});class Uu{constructor(n,i,c,h,m,_){this.type=Hn,this.number=n,this.locale=i,this.currency=c,this.unit=h,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(n,i){if(n.length!==3)return i.error("Expected two arguments.");const c=i.parse(n[1],1,Yt);if(!c)return null;const h=n[2];if(typeof h!="object"||Array.isArray(h))return i.error("NumberFormat options argument must be an object.");let m=null;if(h.locale&&(m=i.parse(h.locale,1,Hn),!m))return null;let _=null;if(h.currency&&(_=i.parse(h.currency,1,Hn),!_))return null;let v=null;if(h.unit&&(v=i.parse(h.unit,1,Hn),!v))return null;let S=null;if(h["min-fraction-digits"]&&(S=i.parse(h["min-fraction-digits"],1,Yt),!S))return null;let T=null;return h["max-fraction-digits"]&&(T=i.parse(h["max-fraction-digits"],1,Yt),!T)?null:new Uu(c,m,_,v,S,T)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class fl{constructor(n){this.type=Yt,this.input=n}static parse(n,i){if(n.length!==2)return i.error(`Expected 1 argument, but found ${n.length-1} instead.`);const c=i.parse(n[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${Ar(c.type)} instead.`):new fl(c):null}evaluate(n){const i=this.input.evaluate(n);if(typeof i=="string"||Array.isArray(i))return i.length;throw new vi(`Expected value to be of type string or array, but found ${Ar(jr(i))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(i=>{n.push(i.serialize())}),n}}const cm={"==":x_,"!=":v_,">":w_,"<":b_,">=":lm,"<=":S_,array:Ts,at:y_,boolean:Ts,case:om,coalesce:sp,collator:gc,format:Xs,image:Iu,in:Nu,"index-of":im,interpolate:Ko,"interpolate-hcl":Ko,"interpolate-lab":Ko,length:fl,let:rm,literal:Ca,match:__,number:Ts,"number-format":Uu,object:Ts,slice:sm,step:Jh,string:Ts,"to-boolean":al,"to-color":al,"to-number":al,"to-string":al,var:J1,within:zu};function um(r,[n,i,c,h]){n=n.evaluate(r),i=i.evaluate(r),c=c.evaluate(r);const m=h?h.evaluate(r):1,_=Z1(n,i,c,m);if(_)throw new vi(_);return new Hr(n/255*m,i/255*m,c/255*m,m)}function Ps(r,n){return r in n}function Vu(r,n){const i=n[r];return i===void 0?null:i}function co(r){return{type:r}}Cs.register(cm,{error:[{kind:"error"},[Hn],(r,[n])=>{throw new vi(n.evaluate(r))}],typeof:[Hn,[Vn],(r,[n])=>Ar(jr(n.evaluate(r)))],"to-rgba":[ao(Yt,4),[Qi],(r,[n])=>n.evaluate(r).toArray()],rgb:[Qi,[Yt,Yt,Yt],um],rgba:[Qi,[Yt,Yt,Yt,Yt],um],has:{type:Un,overloads:[[[Hn],(r,[n])=>Ps(n.evaluate(r),r.properties())],[[Hn,Po],(r,[n,i])=>Ps(n.evaluate(r),i.evaluate(r))]]},get:{type:Vn,overloads:[[[Hn],(r,[n])=>Vu(n.evaluate(r),r.properties())],[[Hn,Po],(r,[n,i])=>Vu(n.evaluate(r),i.evaluate(r))]]},"feature-state":[Vn,[Hn],(r,[n])=>Vu(n.evaluate(r),r.featureState||{})],properties:[Po,[],r=>r.properties()],"geometry-type":[Hn,[],r=>r.geometryType()],id:[Vn,[],r=>r.id()],zoom:[Yt,[],r=>r.globals.zoom],pitch:[Yt,[],r=>r.globals.pitch||0],"distance-from-center":[Yt,[],r=>r.distanceFromCenter()],"heatmap-density":[Yt,[],r=>r.globals.heatmapDensity||0],"line-progress":[Yt,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[Yt,[],r=>r.globals.skyRadialProgress||0],accumulated:[Vn,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Yt,co(Yt),(r,n)=>{let i=0;for(const c of n)i+=c.evaluate(r);return i}],"*":[Yt,co(Yt),(r,n)=>{let i=1;for(const c of n)i*=c.evaluate(r);return i}],"-":{type:Yt,overloads:[[[Yt,Yt],(r,[n,i])=>n.evaluate(r)-i.evaluate(r)],[[Yt],(r,[n])=>-n.evaluate(r)]]},"/":[Yt,[Yt,Yt],(r,[n,i])=>n.evaluate(r)/i.evaluate(r)],"%":[Yt,[Yt,Yt],(r,[n,i])=>n.evaluate(r)%i.evaluate(r)],ln2:[Yt,[],()=>Math.LN2],pi:[Yt,[],()=>Math.PI],e:[Yt,[],()=>Math.E],"^":[Yt,[Yt,Yt],(r,[n,i])=>Math.pow(n.evaluate(r),i.evaluate(r))],sqrt:[Yt,[Yt],(r,[n])=>Math.sqrt(n.evaluate(r))],log10:[Yt,[Yt],(r,[n])=>Math.log(n.evaluate(r))/Math.LN10],ln:[Yt,[Yt],(r,[n])=>Math.log(n.evaluate(r))],log2:[Yt,[Yt],(r,[n])=>Math.log(n.evaluate(r))/Math.LN2],sin:[Yt,[Yt],(r,[n])=>Math.sin(n.evaluate(r))],cos:[Yt,[Yt],(r,[n])=>Math.cos(n.evaluate(r))],tan:[Yt,[Yt],(r,[n])=>Math.tan(n.evaluate(r))],asin:[Yt,[Yt],(r,[n])=>Math.asin(n.evaluate(r))],acos:[Yt,[Yt],(r,[n])=>Math.acos(n.evaluate(r))],atan:[Yt,[Yt],(r,[n])=>Math.atan(n.evaluate(r))],min:[Yt,co(Yt),(r,n)=>Math.min(...n.map(i=>i.evaluate(r)))],max:[Yt,co(Yt),(r,n)=>Math.max(...n.map(i=>i.evaluate(r)))],abs:[Yt,[Yt],(r,[n])=>Math.abs(n.evaluate(r))],round:[Yt,[Yt],(r,[n])=>{const i=n.evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[Yt,[Yt],(r,[n])=>Math.floor(n.evaluate(r))],ceil:[Yt,[Yt],(r,[n])=>Math.ceil(n.evaluate(r))],"filter-==":[Un,[Hn,Vn],(r,[n,i])=>r.properties()[n.value]===i.value],"filter-id-==":[Un,[Vn],(r,[n])=>r.id()===n.value],"filter-type-==":[Un,[Hn],(r,[n])=>r.geometryType()===n.value],"filter-<":[Un,[Hn,Vn],(r,[n,i])=>{const c=r.properties()[n.value],h=i.value;return typeof c==typeof h&&c<h}],"filter-id-<":[Un,[Vn],(r,[n])=>{const i=r.id(),c=n.value;return typeof i==typeof c&&i<c}],"filter->":[Un,[Hn,Vn],(r,[n,i])=>{const c=r.properties()[n.value],h=i.value;return typeof c==typeof h&&c>h}],"filter-id->":[Un,[Vn],(r,[n])=>{const i=r.id(),c=n.value;return typeof i==typeof c&&i>c}],"filter-<=":[Un,[Hn,Vn],(r,[n,i])=>{const c=r.properties()[n.value],h=i.value;return typeof c==typeof h&&c<=h}],"filter-id-<=":[Un,[Vn],(r,[n])=>{const i=r.id(),c=n.value;return typeof i==typeof c&&i<=c}],"filter->=":[Un,[Hn,Vn],(r,[n,i])=>{const c=r.properties()[n.value],h=i.value;return typeof c==typeof h&&c>=h}],"filter-id->=":[Un,[Vn],(r,[n])=>{const i=r.id(),c=n.value;return typeof i==typeof c&&i>=c}],"filter-has":[Un,[Vn],(r,[n])=>n.value in r.properties()],"filter-has-id":[Un,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Un,[ao(Hn)],(r,[n])=>n.value.indexOf(r.geometryType())>=0],"filter-id-in":[Un,[ao(Vn)],(r,[n])=>n.value.indexOf(r.id())>=0],"filter-in-small":[Un,[Hn,ao(Vn)],(r,[n,i])=>i.value.indexOf(r.properties()[n.value])>=0],"filter-in-large":[Un,[Hn,ao(Vn)],(r,[n,i])=>function(c,h,m,_){for(;m<=_;){const v=m+_>>1;if(h[v]===c)return!0;h[v]>c?_=v-1:m=v+1}return!1}(r.properties()[n.value],i.value,0,i.value.length-1)],all:{type:Un,overloads:[[[Un,Un],(r,[n,i])=>n.evaluate(r)&&i.evaluate(r)],[co(Un),(r,n)=>{for(const i of n)if(!i.evaluate(r))return!1;return!0}]]},any:{type:Un,overloads:[[[Un,Un],(r,[n,i])=>n.evaluate(r)||i.evaluate(r)],[co(Un),(r,n)=>{for(const i of n)if(i.evaluate(r))return!0;return!1}]]},"!":[Un,[Un],(r,[n])=>!n.evaluate(r)],"is-supported-script":[Un,[Hn],(r,[n])=>{const i=r.globals&&r.globals.isSupportedScript;return!i||i(n.evaluate(r))}],upcase:[Hn,[Hn],(r,[n])=>n.evaluate(r).toUpperCase()],downcase:[Hn,[Hn],(r,[n])=>n.evaluate(r).toLowerCase()],concat:[Hn,co(Vn),(r,n)=>n.map(i=>mc(i.evaluate(r))).join("")],"resolved-locale":[Hn,[eo],(r,[n])=>n.evaluate(r).resolvedLocale()]});var Tc=cm;function dm(r){return{result:"success",value:r}}function Ma(r){return{result:"error",value:r}}function ml(r){return r["property-type"]==="data-driven"}function Wu(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Gu(r){return!!r.expression&&r.expression.interpolated}function Xn(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Cc(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function hm(r){return r}function Hu(r,n){const i=n.type==="color",c=r.stops&&typeof r.stops[0][0]=="object",h=c||!(c||r.property!==void 0),m=r.type||(Gu(n)?"exponential":"interval");if(i&&((r=ws({},r)).stops&&(r.stops=r.stops.map(T=>[T[0],Hr.parse(T[1])])),r.default=Hr.parse(r.default?r.default:n.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!ip[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let _,v,S;if(m==="exponential")_=Ms;else if(m==="interval")_=qu;else if(m==="categorical"){_=pm,v=Object.create(null);for(const T of r.stops)v[T[0]]=T[1];S=typeof r.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);_=fm}if(c){const T={},P=[];for(let F=0;F<r.stops.length;F++){const U=r.stops[F],X=U[0].zoom;T[X]===void 0&&(T[X]={zoom:X,type:r.type,property:r.property,default:r.default,stops:[]},P.push(X)),T[X].stops.push([U[0].value,U[1]])}const A=[];for(const F of P)A.push([T[F].zoom,Hu(T[F],n)]);const z={name:"linear"};return{kind:"composite",interpolationType:z,interpolationFactor:Ko.interpolationFactor.bind(void 0,z),zoomStops:A.map(F=>F[0]),evaluate:({zoom:F},U)=>Ms({stops:A,base:r.base},n,F).evaluate(F,U)}}if(h){const T=m==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:Ko.interpolationFactor.bind(void 0,T),zoomStops:r.stops.map(P=>P[0]),evaluate:({zoom:P})=>_(r,n,P,v,S)}}return{kind:"source",evaluate(T,P){const A=P&&P.properties?P.properties[r.property]:void 0;return A===void 0?gl(r.default,n.default):_(r,n,A,v,S)}}}function gl(r,n,i){return r!==void 0?r:n!==void 0?n:i!==void 0?i:void 0}function pm(r,n,i,c,h){return gl(typeof i===h?c[i]:void 0,r.default,n.default)}function qu(r,n,i){if(Xn(i)!=="number")return gl(r.default,n.default);const c=r.stops.length;if(c===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[c-1][0])return r.stops[c-1][1];const h=Lu(r.stops.map(m=>m[0]),i);return r.stops[h][1]}function Ms(r,n,i){const c=r.base!==void 0?r.base:1;if(Xn(i)!=="number")return gl(r.default,n.default);const h=r.stops.length;if(h===1||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[h-1][0])return r.stops[h-1][1];const m=Lu(r.stops.map(P=>P[0]),i),_=function(P,A,z,F){const U=F-z,X=P-z;return U===0?0:A===1?X/U:(Math.pow(A,X)-1)/(Math.pow(A,U)-1)}(i,c,r.stops[m][0],r.stops[m+1][0]),v=r.stops[m][1],S=r.stops[m+1][1];let T=xc[n.type]||hm;if(r.colorSpace&&r.colorSpace!=="rgb"){const P=ip[r.colorSpace];T=(A,z)=>P.reverse(P.interpolate(P.forward(A),P.forward(z),_))}return typeof v.evaluate=="function"?{evaluate(...P){const A=v.evaluate.apply(void 0,P),z=S.evaluate.apply(void 0,P);if(A!==void 0&&z!==void 0)return T(A,z,_)}}:T(v,S,_)}function fm(r,n,i){return n.type==="color"?i=Hr.parse(i):n.type==="formatted"?i=ji.fromString(i.toString()):n.type==="resolvedImage"?i=lo.fromString(i.toString()):Xn(i)===n.type||n.type==="enum"&&n.values[i]||(i=void 0),gl(i,r.default,n.default)}class Zu{constructor(n,i){this.expression=n,this._warningHistory={},this._evaluator=new Wh,this._defaultValue=i?function(c){return c.type==="color"&&(Cc(c.default)||Array.isArray(c.default))?new Hr(0,0,0,0):c.type==="color"?Hr.parse(c.default)||null:c.default===void 0?null:c.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null}evaluateWithoutErrorHandling(n,i,c,h,m,_,v,S){return this._evaluator.globals=n,this._evaluator.feature=i,this._evaluator.featureState=c,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=v||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(n,i,c,h,m,_,v,S){this._evaluator.globals=n,this._evaluator.feature=i||null,this._evaluator.featureState=c||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=v||null,this._evaluator.featureDistanceData=S||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new vi(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function yl(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Tc}function _l(r,n){const i=new Yh(Tc,[],n?function(h){const m={color:Qi,string:Hn,number:Yt,enum:Hn,boolean:Un,formatted:cc,resolvedImage:Ta};return h.type==="array"?ao(m[h.value]||Vn,h.length):m[h.type]}(n):void 0),c=i.parse(r,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?dm(new Zu(c,n)):Ma(i.errors)}class dp{constructor(n,i){this.kind=n,this._styleExpression=i,this.isStateDependent=n!=="constant"&&!ks(i.expression)}evaluateWithoutErrorHandling(n,i,c,h,m,_){return this._styleExpression.evaluateWithoutErrorHandling(n,i,c,h,m,_)}evaluate(n,i,c,h,m,_){return this._styleExpression.evaluate(n,i,c,h,m,_)}}class Ec{constructor(n,i,c,h){this.kind=n,this.zoomStops=c,this._styleExpression=i,this.isStateDependent=n!=="camera"&&!ks(i.expression),this.interpolationType=h}evaluateWithoutErrorHandling(n,i,c,h,m,_){return this._styleExpression.evaluateWithoutErrorHandling(n,i,c,h,m,_)}evaluate(n,i,c,h,m,_){return this._styleExpression.evaluate(n,i,c,h,m,_)}interpolationFactor(n,i,c){return this.interpolationType?Ko.interpolationFactor(this.interpolationType,n,i,c):0}}function kc(r,n){if((r=_l(r,n)).result==="error")return r;const i=r.value.expression,c=dl(i);if(!c&&!ml(n))return Ma([new Xo("","data expressions not supported")]);const h=ka(i,["zoom","pitch","distance-from-center"]);if(!h&&!Wu(n))return Ma([new Xo("","zoom expressions not supported")]);const m=Yu(i);return m||h?m instanceof Xo?Ma([m]):m instanceof Ko&&!Gu(n)?Ma([new Xo("",'"interpolate" expressions cannot be used with this property')]):dm(m?new Ec(c?"camera":"composite",r.value,m.labels,m instanceof Ko?m.interpolation:void 0):new dp(c?"constant":"source",r.value)):Ma([new Xo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xu{constructor(n,i){this._parameters=n,this._specification=i,ws(this,Hu(this._parameters,this._specification))}static deserialize(n){return new Xu(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Yu(r){let n=null;if(r instanceof rm)n=Yu(r.result);else if(r instanceof sp){for(const i of r.args)if(n=Yu(i),n)break}else(r instanceof Jh||r instanceof Ko)&&r.input instanceof Cs&&r.input.name==="zoom"&&(n=r);return n instanceof Xo||r.eachChild(i=>{const c=Yu(i);c instanceof Xo?n=c:!n&&c?n=new Xo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&c&&n!==c&&(n=new Xo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class Jt{constructor(n,i,c,h){this.message=(n?`${n}: `:"")+c,h&&(this.identifier=h),i!=null&&i.__line__&&(this.line=i.__line__)}}function Mo(r){const n=r.key,i=r.value,c=r.valueSpec||{},h=r.objectElementValidators||{},m=r.style,_=r.styleSpec;let v=[];const S=Xn(i);if(S!=="object")return[new Jt(n,i,`object expected, ${S} found`)];for(const T in i){const P=T.split(".")[0];let A;h[P]?A=h[P]:c[P]?A=Pi:h["*"]?A=h["*"]:c["*"]&&(A=Pi),A?v=v.concat(A({key:(n&&`${n}.`)+T,value:i[T],valueSpec:c[P]||c["*"],style:m,styleSpec:_,object:i,objectKey:T},i)):v.push(new Jt(n,i[T],`unknown property "${T}"`))}for(const T in c)h[T]||c[T].required&&c[T].default===void 0&&i[T]===void 0&&v.push(new Jt(n,i,`missing required property "${T}"`));return v}function mm(r){const n=r.value,i=r.valueSpec,c=r.style,h=r.styleSpec,m=r.key,_=r.arrayElementValidator||Pi;if(Xn(n)!=="array")return[new Jt(m,n,`array expected, ${Xn(n)} found`)];if(i.length&&n.length!==i.length)return[new Jt(m,n,`array length ${i.length} expected, length ${n.length} found`)];if(i["min-length"]&&n.length<i["min-length"])return[new Jt(m,n,`array length at least ${i["min-length"]} expected, length ${n.length} found`)];let v={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum,function:void 0};h.$version<7&&(v.function=i.function),Xn(i.value)==="object"&&(v=i.value);let S=[];for(let T=0;T<n.length;T++)S=S.concat(_({array:n,arrayIndex:T,value:n[T],valueSpec:v,style:c,styleSpec:h,key:`${m}[${T}]`}));return S}function Pc(r){const n=r.key,i=r.value,c=r.valueSpec;let h=Xn(i);if(h==="number"&&i!=i&&(h="NaN"),h!=="number")return[new Jt(n,i,`number expected, ${h} found`)];if("minimum"in c){let m=c.minimum;if(Xn(c.minimum)==="array"&&(m=c.minimum[r.arrayIndex]),i<m)return[new Jt(n,i,`${i} is less than the minimum value ${m}`)]}if("maximum"in c){let m=c.maximum;if(Xn(c.maximum)==="array"&&(m=c.maximum[r.arrayIndex]),i>m)return[new Jt(n,i,`${i} is greater than the maximum value ${m}`)]}return[]}function Mc(r){const n=r.valueSpec,i=Yr(r.value.type);let c,h,m,_={};const v=i!=="categorical"&&r.value.property===void 0,S=!v,T=Xn(r.value.stops)==="array"&&Xn(r.value.stops[0])==="array"&&Xn(r.value.stops[0][0])==="object",P=Mo({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(F){if(i==="identity")return[new Jt(F.key,F.value,'identity function may not have a "stops" property')];let U=[];const X=F.value;return U=U.concat(mm({key:F.key,value:X,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:A})),Xn(X)==="array"&&X.length===0&&U.push(new Jt(F.key,X,"array must have at least one stop")),U},default:function(F){return Pi({key:F.key,value:F.value,valueSpec:n,style:F.style,styleSpec:F.styleSpec})}}});return i==="identity"&&v&&P.push(new Jt(r.key,r.value,'missing required property "property"')),i==="identity"||r.value.stops||P.push(new Jt(r.key,r.value,'missing required property "stops"')),i==="exponential"&&r.valueSpec.expression&&!Gu(r.valueSpec)&&P.push(new Jt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(S&&!ml(r.valueSpec)?P.push(new Jt(r.key,r.value,"property functions not supported")):v&&!Wu(r.valueSpec)&&P.push(new Jt(r.key,r.value,"zoom functions not supported"))),i!=="categorical"&&!T||r.value.property!==void 0||P.push(new Jt(r.key,r.value,'"property" property is required')),P;function A(F){let U=[];const X=F.value,re=F.key;if(Xn(X)!=="array")return[new Jt(re,X,`array expected, ${Xn(X)} found`)];if(X.length!==2)return[new Jt(re,X,`array length 2 expected, length ${X.length} found`)];if(T){if(Xn(X[0])!=="object")return[new Jt(re,X,`object expected, ${Xn(X[0])} found`)];if(X[0].zoom===void 0)return[new Jt(re,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Jt(re,X,"object stop key must have value")];const fe=Yr(X[0].zoom);if(typeof fe!="number")return[new Jt(re,X[0].zoom,"stop zoom values must be numbers")];if(m&&m>fe)return[new Jt(re,X[0].zoom,"stop zoom values must appear in ascending order")];fe!==m&&(m=fe,h=void 0,_={}),U=U.concat(Mo({key:`${re}[0]`,value:X[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:Pc,value:z}}))}else U=U.concat(z({key:`${re}[0]`,value:X[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},X));return yl(pi(X[1]))?U.concat([new Jt(`${re}[1]`,X[1],"expressions are not allowed in function stops.")]):U.concat(Pi({key:`${re}[1]`,value:X[1],valueSpec:n,style:F.style,styleSpec:F.styleSpec}))}function z(F,U){const X=Xn(F.value),re=Yr(F.value),fe=F.value!==null?F.value:U;if(c){if(X!==c)return[new Jt(F.key,fe,`${X} stop domain type must match previous stop domain type ${c}`)]}else c=X;if(X!=="number"&&X!=="string"&&X!=="boolean"&&typeof re!="number"&&typeof re!="string"&&typeof re!="boolean")return[new Jt(F.key,fe,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&i!=="categorical"){let Ee=`number expected, ${X} found`;return ml(n)&&i===void 0&&(Ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Jt(F.key,fe,Ee)]}return i!=="categorical"||X!=="number"||typeof re=="number"&&isFinite(re)&&Math.floor(re)===re?i!=="categorical"&&X==="number"&&typeof re=="number"&&typeof h=="number"&&h!==void 0&&re<h?[new Jt(F.key,fe,"stop domain values must appear in ascending order")]:(h=re,i==="categorical"&&re in _?[new Jt(F.key,fe,"stop domain values must be unique")]:(_[re]=!0,[])):[new Jt(F.key,fe,`integer expected, found ${String(re)}`)]}}function fi(r){const n=(r.expressionContext==="property"?kc:_l)(pi(r.value),r.valueSpec);if(n.result==="error")return n.value.map(c=>new Jt(`${r.key}${c.key}`,r.value,c.message));const i=n.value.expression||n.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!i.outputDefined())return[new Jt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!ks(i))return[new Jt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter")return Ic(i,r);if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!ka(i,["zoom","feature-state"]))return[new Jt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!dl(i))return[new Jt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ic(r,n){const i=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const h of n.valueSpec.expression.parameters)i.delete(h);if(i.size===0)return[];const c=[];return r instanceof Cs&&i.has(r.name)?[new Jt(n.key,n.value,`["${r.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(r.eachChild(h=>{c.push(...Ic(h,n))}),c)}function Ku(r){const n=r.key,i=r.value,c=r.valueSpec,h=[];return Array.isArray(c.values)?c.values.indexOf(Yr(i))===-1&&h.push(new Jt(n,i,`expected one of [${c.values.join(", ")}], ${JSON.stringify(i)} found`)):Object.keys(c.values).indexOf(Yr(i))===-1&&h.push(new Jt(n,i,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(i)} found`)),h}function hp(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const n of r.slice(1))if(!hp(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function Ju(r,n="fill"){if(r==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};hp(r)||(r=vl(r));const i=r;let c=!0;try{c=function(T){if(!xl(T))return T;let P=pi(T);return Qu(P),P=gm(P),P}(i)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(i,null,2)}
        `)}const h=ct[`filter_${n}`],m=_l(c,h);let _=null;if(m.result==="error")throw new Error(m.value.map(T=>`${T.key}: ${T.message}`).join(", "));_=(T,P,A)=>m.value.evaluate(T,P,{},A);let v=null,S=null;if(c!==i){const T=_l(i,h);if(T.result==="error")throw new Error(T.value.map(P=>`${P.key}: ${P.message}`).join(", "));v=(P,A,z,F,U)=>T.value.evaluate(P,A,{},z,void 0,void 0,F,U),S=!dl(T.value.expression)}return{filter:_,dynamicFilter:v||void 0,needGeometry:ym(c),needFeature:!!S}}function gm(r){if(!Array.isArray(r))return r;const n=function(i){if(pp.has(i[0])){for(let c=1;c<i.length;c++)if(xl(i[c]))return!0}return i}(r);return n===!0?n:n.map(i=>gm(i))}function Qu(r){let n=!1;const i=[];if(r[0]==="case"){for(let c=1;c<r.length-1;c+=2)n=n||xl(r[c]),i.push(r[c+1]);i.push(r[r.length-1])}else if(r[0]==="match"){n=n||xl(r[1]);for(let c=2;c<r.length-1;c+=2)i.push(r[c+1]);i.push(r[r.length-1])}else if(r[0]==="step"){n=n||xl(r[1]);for(let c=1;c<r.length-1;c+=2)i.push(r[c+1])}n&&(r.length=0,r.push("any",...i));for(let c=1;c<r.length;c++)Qu(r[c])}function xl(r){if(!Array.isArray(r))return!1;if((n=r[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let i=1;i<r.length;i++)if(xl(r[i]))return!0;return!1}const pp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function T_(r,n){return r<n?-1:r>n?1:0}function ym(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let n=1;n<r.length;n++)if(ym(r[n]))return!0;return!1}function vl(r){if(!r)return!0;const n=r[0];return r.length<=1?n!=="any":n==="=="?fp(r[1],r[2],"=="):n==="!="?ed(fp(r[1],r[2],"==")):n==="<"||n===">"||n==="<="||n===">="?fp(r[1],r[2],n):n==="any"?(i=r.slice(1),["any"].concat(i.map(vl))):n==="all"?["all"].concat(r.slice(1).map(vl)):n==="none"?["all"].concat(r.slice(1).map(vl).map(ed)):n==="in"?mp(r[1],r.slice(2)):n==="!in"?ed(mp(r[1],r.slice(2))):n==="has"?gp(r[1]):n==="!has"?ed(gp(r[1])):n!=="within"||r;var i}function fp(r,n,i){switch(r){case"$type":return[`filter-type-${i}`,n];case"$id":return[`filter-id-${i}`,n];default:return[`filter-${i}`,r,n]}}function mp(r,n){if(n.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(i=>typeof i!=typeof n[0])?["filter-in-large",r,["literal",n.sort(T_)]]:["filter-in-small",r,["literal",n]]}}function gp(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function ed(r){return["!",r]}function Ac(r){return hp(pi(r.value))?fi(ws({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${r.layerType||"fill"}`]})):Dc(r)}function Dc(r){const n=r.value,i=r.key;if(Xn(n)!=="array")return[new Jt(i,n,`array expected, ${Xn(n)} found`)];const c=r.styleSpec;let h,m=[];if(n.length<1)return[new Jt(i,n,"filter array must have at least 1 element")];switch(m=m.concat(Ku({key:`${i}[0]`,value:n[0],valueSpec:c.filter_operator,style:r.style,styleSpec:r.styleSpec})),Yr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Yr(n[1])==="$type"&&m.push(new Jt(i,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&m.push(new Jt(i,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(h=Xn(n[1]),h!=="string"&&m.push(new Jt(`${i}[1]`,n[1],`string expected, ${h} found`)));for(let _=2;_<n.length;_++)h=Xn(n[_]),Yr(n[1])==="$type"?m=m.concat(Ku({key:`${i}[${_}]`,value:n[_],valueSpec:c.geometry_type,style:r.style,styleSpec:r.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&m.push(new Jt(`${i}[${_}]`,n[_],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)m=m.concat(Dc({key:`${i}[${_}]`,value:n[_],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":h=Xn(n[1]),n.length!==2?m.push(new Jt(i,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="string"&&m.push(new Jt(`${i}[1]`,n[1],`string expected, ${h} found`));break;case"within":h=Xn(n[1]),n.length!==2?m.push(new Jt(i,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="object"&&m.push(new Jt(`${i}[1]`,n[1],`object expected, ${h} found`))}return m}function yp(r,n){const i=r.key,c=r.style,h=r.styleSpec,m=r.value,_=r.objectKey,v=h[`${n}_${r.layerType}`];if(!v)return[];const S=_.match(/^(.*)-transition$/);if(n==="paint"&&S&&v[S[1]]&&v[S[1]].transition)return Pi({key:i,value:m,valueSpec:h.transition,style:c,styleSpec:h});const T=r.valueSpec||v[_];if(!T)return[new Jt(i,m,`unknown property "${_}"`)];let P;if(Xn(m)==="string"&&ml(T)&&!T.tokens&&(P=/^{([^}]+)}$/.exec(m))){const z=`\`{ "type": "identity", "property": ${P?JSON.stringify(P[1]):'"_"'} }\``;return[new Jt(i,m,`"${_}" does not support interpolation syntax
Use an identity property function instead: ${z}.`)]}const A=[];return r.layerType==="symbol"&&(_==="text-field"&&c&&!c.glyphs&&A.push(new Jt(i,m,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&Cc(pi(m))&&Yr(m.type)==="identity"&&A.push(new Jt(i,m,'"text-font" does not support identity functions'))),A.concat(Pi({key:r.key,value:m,valueSpec:T,style:c,styleSpec:h,expressionContext:"property",propertyType:n,propertyKey:_}))}function _m(r){return yp(r,"paint")}function _p(r){return yp(r,"layout")}function xm(r){let n=[];const i=r.value,c=r.key,h=r.style,m=r.styleSpec;i.type||i.ref||n.push(new Jt(c,i,'either "type" or "ref" is required'));let _=Yr(i.type);const v=Yr(i.ref);if(i.id){const S=Yr(i.id);for(let T=0;T<r.arrayIndex;T++){const P=h.layers[T];Yr(P.id)===S&&n.push(new Jt(c,i.id,`duplicate layer id "${i.id}", previously used at line ${P.id.__line__}`))}}if("ref"in i){let S;["type","source","source-layer","filter","layout"].forEach(T=>{T in i&&n.push(new Jt(c,i[T],`"${T}" is prohibited for ref layers`))}),h.layers.forEach(T=>{Yr(T.id)===v&&(S=T)}),S?S.ref?n.push(new Jt(c,i.ref,"ref cannot reference another ref layer")):_=Yr(S.type):typeof v=="string"&&n.push(new Jt(c,i.ref,`ref layer "${v}" not found`))}else if(_!=="background"&&_!=="sky")if(i.source){const S=h.sources&&h.sources[i.source],T=S&&Yr(S.type);S?T==="vector"&&_==="raster"?n.push(new Jt(c,i.source,`layer "${i.id}" requires a raster source`)):T==="raster"&&_!=="raster"?n.push(new Jt(c,i.source,`layer "${i.id}" requires a vector source`)):T!=="vector"||i["source-layer"]?T==="raster-dem"&&_!=="hillshade"?n.push(new Jt(c,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!i.paint||!i.paint["line-gradient"]&&!i.paint["line-trim-offset"]||T==="geojson"&&S.lineMetrics||n.push(new Jt(c,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Jt(c,i,`layer "${i.id}" must specify a "source-layer"`)):n.push(new Jt(c,i.source,`source "${i.source}" not found`))}else n.push(new Jt(c,i,'missing required property "source"'));return n=n.concat(Mo({key:c,value:i,valueSpec:m.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Pi({key:`${c}.type`,value:i.type,valueSpec:m.layer.type,style:r.style,styleSpec:r.styleSpec,object:i,objectKey:"type"}),filter:S=>Ac(ws({layerType:_},S)),layout:S=>Mo({layer:i,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":T=>_p(ws({layerType:_},T))}}),paint:S=>Mo({layer:i,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":T=>_m(ws({layerType:_},T))}})}})),n}function Ys(r){const n=r.value,i=r.key,c=Xn(n);return c!=="string"?[new Jt(i,n,`string expected, ${c} found`)]:[]}const vm={promoteId:function({key:r,value:n}){if(Xn(n)==="string")return Ys({key:r,value:n});{const i=[];for(const c in n)i.push(...Ys({key:`${r}.${c}`,value:n[c]}));return i}}};function bm(r){const n=r.value,i=r.key,c=r.styleSpec,h=r.style;if(!n.type)return[new Jt(i,n,'"type" is required')];const m=Yr(n.type);let _;switch(m){case"vector":case"raster":case"raster-dem":return _=Mo({key:i,value:n,valueSpec:c[`source_${m.replace("-","_")}`],style:r.style,styleSpec:c,objectElementValidators:vm}),_;case"geojson":if(_=Mo({key:i,value:n,valueSpec:c.source_geojson,style:h,styleSpec:c,objectElementValidators:vm}),n.cluster)for(const v in n.clusterProperties){const[S,T]=n.clusterProperties[v],P=typeof S=="string"?[S,["accumulated"],["get",v]]:S;_.push(...fi({key:`${i}.${v}.map`,value:T,expressionContext:"cluster-map"})),_.push(...fi({key:`${i}.${v}.reduce`,value:P,expressionContext:"cluster-reduce"}))}return _;case"video":return Mo({key:i,value:n,valueSpec:c.source_video,style:h,styleSpec:c});case"image":return Mo({key:i,value:n,valueSpec:c.source_image,style:h,styleSpec:c});case"canvas":return[new Jt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ku({key:`${i}.type`,value:n.type,valueSpec:{values:C_(c)},style:h,styleSpec:c})}}function C_(r){return r.source.reduce((n,i)=>{const c=r[i];return c.type.type==="enum"&&(n=n.concat(Object.keys(c.type.values))),n},[])}function wm(r){const n=r.value,i=r.styleSpec,c=i.light,h=r.style;let m=[];const _=Xn(n);if(n===void 0)return m;if(_!=="object")return m=m.concat([new Jt("light",n,`object expected, ${_} found`)]),m;for(const v in n){const S=v.match(/^(.*)-transition$/);m=m.concat(S&&c[S[1]]&&c[S[1]].transition?Pi({key:v,value:n[v],valueSpec:i.transition,style:h,styleSpec:i}):c[v]?Pi({key:v,value:n[v],valueSpec:c[v],style:h,styleSpec:i}):[new Jt(v,n[v],`unknown property "${v}"`)])}return m}function xp(r){const n=r.value,i=r.key,c=r.style,h=r.styleSpec,m=h.terrain;let _=[];const v=Xn(n);if(n===void 0)return _;if(v!=="object")return _=_.concat([new Jt("terrain",n,`object expected, ${v} found`)]),_;for(const S in n){const T=S.match(/^(.*)-transition$/);_=_.concat(T&&m[T[1]]&&m[T[1]].transition?Pi({key:S,value:n[S],valueSpec:h.transition,style:c,styleSpec:h}):m[S]?Pi({key:S,value:n[S],valueSpec:m[S],style:c,styleSpec:h}):[new Jt(S,n[S],`unknown property "${S}"`)])}if(n.source){const S=c.sources&&c.sources[n.source],T=S&&Yr(S.type);S?T!=="raster-dem"&&_.push(new Jt(i,n.source,`terrain cannot be used with a source of type ${String(T)}, it only be used with a "raster-dem" source type`)):_.push(new Jt(i,n.source,`source "${n.source}" not found`))}else _.push(new Jt(i,n,'terrain is missing required property "source"'));return _}function Sm(r){const n=r.value,i=r.style,c=r.styleSpec,h=c.fog;let m=[];const _=Xn(n);if(n===void 0)return m;if(_!=="object")return m=m.concat([new Jt("fog",n,`object expected, ${_} found`)]),m;for(const v in n){const S=v.match(/^(.*)-transition$/);m=m.concat(S&&h[S[1]]&&h[S[1]].transition?Pi({key:v,value:n[v],valueSpec:c.transition,style:i,styleSpec:c}):h[v]?Pi({key:v,value:n[v],valueSpec:h[v],style:i,styleSpec:c}):[new Jt(v,n[v],`unknown property "${v}"`)])}return m}const Tm={"*":()=>[],array:mm,boolean:function(r){const n=r.value,i=r.key,c=Xn(n);return c!=="boolean"?[new Jt(i,n,`boolean expected, ${c} found`)]:[]},number:Pc,color:function(r){const n=r.key,i=r.value,c=Xn(i);return c!=="string"?[new Jt(n,i,`color expected, ${c} found`)]:Bh(i)===null?[new Jt(n,i,`color expected, "${i}" found`)]:[]},enum:Ku,filter:Ac,function:Mc,layer:xm,object:Mo,source:bm,light:wm,terrain:xp,fog:Sm,string:Ys,formatted:function(r){return Ys(r).length===0?[]:fi(r)},resolvedImage:function(r){return Ys(r).length===0?[]:fi(r)},projection:function(r){const n=r.value,i=r.styleSpec,c=i.projection,h=r.style;let m=[];const _=Xn(n);if(_==="object")for(const v in n)m=m.concat(Pi({key:v,value:n[v],valueSpec:c[v],style:h,styleSpec:i}));else _!=="string"&&(m=m.concat([new Jt("projection",n,`object or string expected, ${_} found`)]));return m}};function Pi(r){const n=r.value,i=r.valueSpec,c=r.styleSpec;return i.expression&&Cc(Yr(n))?Mc(r):i.expression&&yl(pi(n))?fi(r):i.type&&Tm[i.type]?Tm[i.type](r):Mo(ws({},r,{valueSpec:i.type?c[i.type]:i}))}function E_(r){const n=r.value,i=r.key,c=Ys(r);return c.length||(n.indexOf("{fontstack}")===-1&&c.push(new Jt(i,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&c.push(new Jt(i,n,'"glyphs" url must include a "{range}" token'))),c}function Cm(r,n=ct){return uo(Pi({key:"",value:r,valueSpec:n.$root,styleSpec:n,style:r,objectElementValidators:{glyphs:E_,"*":()=>[]}}))}const k_=r=>uo(_m(r)),P_=r=>uo(_p(r));function uo(r){return r.slice().sort((n,i)=>n.line&&i.line?n.line-i.line:0)}function Em(r,n){let i=!1;if(n&&n.length)for(const c of n)r.fire(new bs(new Error(c.message))),i=!0;return i}var M_=Jo,Io=3;function Jo(r,n,i){var c=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var h=new Int32Array(this.arrayBuffer);r=h[0],this.d=(n=h[1])+2*(i=h[2]);for(var m=0;m<this.d*this.d;m++){var _=h[Io+m],v=h[Io+m+1];c.push(_===v?null:h.subarray(_,v))}var S=h[Io+c.length+1];this.keys=h.subarray(h[Io+c.length],S),this.bboxes=h.subarray(S),this.insert=this._insertReadonly}else{this.d=n+2*i;for(var T=0;T<this.d*this.d;T++)c.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=r,this.padding=i,this.scale=n/r,this.uid=0;var P=i/n*r;this.min=-P,this.max=r+P}Jo.prototype.insert=function(r,n,i,c,h){this._forEachCell(n,i,c,h,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(c),this.bboxes.push(h)},Jo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Jo.prototype._insertCell=function(r,n,i,c,h,m){this.cells[h].push(m)},Jo.prototype.query=function(r,n,i,c,h){var m=this.min,_=this.max;if(r<=m&&n<=m&&_<=i&&_<=c&&!h)return Array.prototype.slice.call(this.keys);var v=[];return this._forEachCell(r,n,i,c,this._queryCell,v,{},h),v},Jo.prototype._queryCell=function(r,n,i,c,h,m,_,v){var S=this.cells[h];if(S!==null)for(var T=this.keys,P=this.bboxes,A=0;A<S.length;A++){var z=S[A];if(_[z]===void 0){var F=4*z;(v?v(P[F+0],P[F+1],P[F+2],P[F+3]):r<=P[F+2]&&n<=P[F+3]&&i>=P[F+0]&&c>=P[F+1])?(_[z]=!0,m.push(T[z])):_[z]=!1}}},Jo.prototype._forEachCell=function(r,n,i,c,h,m,_,v){for(var S=this._convertToCellCoord(r),T=this._convertToCellCoord(n),P=this._convertToCellCoord(i),A=this._convertToCellCoord(c),z=S;z<=P;z++)for(var F=T;F<=A;F++){var U=this.d*F+z;if((!v||v(this._convertFromCellCoord(z),this._convertFromCellCoord(F),this._convertFromCellCoord(z+1),this._convertFromCellCoord(F+1)))&&h.call(this,r,n,i,c,U,m,_,v))return}},Jo.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Jo.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Jo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,n=Io+this.cells.length+1+1,i=0,c=0;c<this.cells.length;c++)i+=this.cells[c].length;var h=new Int32Array(n+i+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var m=n,_=0;_<r.length;_++){var v=r[_];h[Io+_]=m,h.set(v,m),m+=v.length}return h[Io+r.length]=m,h.set(this.keys,m),h[Io+r.length+1]=m+=this.keys.length,h.set(this.bboxes,m),m+=this.bboxes.length,h.buffer};var Ia=G(M_);const td={};function Qt(r,n,i={}){Object.defineProperty(r,"_classRegistryKey",{value:n,writeable:!1}),td[n]={klass:r,omit:i.omit||[]}}Qt(Object,"Object"),Ia.serialize=function(r,n){const i=r.toArrayBuffer();return n&&n.push(i),{buffer:i}},Ia.deserialize=function(r){return new Ia(r.buffer)},Object.defineProperty(Ia,"name",{value:"Grid"}),Qt(Ia,"Grid"),Qt(Hr,"Color"),Qt(Error,"Error"),Qt(vn,"AJAXError"),Qt(lo,"ResolvedImage"),Qt(Xu,"StylePropertyFunction"),Qt(Zu,"StyleExpression",{omit:["_evaluator"]}),Qt(Ec,"ZoomDependentExpression"),Qt(dp,"ZoomConstantExpression"),Qt(Cs,"CompoundExpression",{omit:["_evaluate"]});for(const r in Tc)td[Tc[r]._classRegistryKey]||Qt(Tc[r],`Expression${r}`);function vp(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function bp(r){return w.ImageBitmap&&r instanceof w.ImageBitmap}function bl(r,n){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(vp(r)||bp(r))return n&&n.push(r),r;if(ArrayBuffer.isView(r)){const i=r;return n&&n.push(i.buffer),i}if(r instanceof w.ImageData)return n&&n.push(r.data.buffer),r;if(Array.isArray(r)){const i=[];for(const c of r)i.push(bl(c,n));return i}if(typeof r=="object"){const i=r.constructor,c=i._classRegistryKey;if(!c)throw new Error(`can't serialize object of unregistered class ${c}`);const h=i.serialize?i.serialize(r,n):{};if(!i.serialize){for(const m in r)r.hasOwnProperty(m)&&(td[c].omit.indexOf(m)>=0||(h[m]=bl(r[m],n)));r instanceof Error&&(h.message=r.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(h.$name=c),h}throw new Error("can't serialize object of type "+typeof r)}function Aa(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||vp(r)||bp(r)||ArrayBuffer.isView(r)||r instanceof w.ImageData)return r;if(Array.isArray(r))return r.map(Aa);if(typeof r=="object"){const n=r.$name||"Object",{klass:i}=td[n];if(!i)throw new Error(`can't deserialize unregistered class ${n}`);if(i.deserialize)return i.deserialize(r);const c=Object.create(i.prototype);for(const h of Object.keys(r))h!=="$name"&&(c[h]=Aa(r[h]));return c}throw new Error("can't deserialize object of type "+typeof r)}const Xt={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function wp(r){for(const n of r)if(Sp(n.charCodeAt(0)))return!0;return!1}function I_(r){for(const n of r)if(!km(n.charCodeAt(0)))return!1;return!0}function km(r){return!(Xt.Arabic(r)||Xt["Arabic Supplement"](r)||Xt["Arabic Extended-A"](r)||Xt["Arabic Presentation Forms-A"](r)||Xt["Arabic Presentation Forms-B"](r))}function Sp(r){return!(r!==746&&r!==747&&(r<4352||!(Xt["Bopomofo Extended"](r)||Xt.Bopomofo(r)||Xt["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||Xt["CJK Compatibility Ideographs"](r)||Xt["CJK Compatibility"](r)||Xt["CJK Radicals Supplement"](r)||Xt["CJK Strokes"](r)||!(!Xt["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||Xt["CJK Unified Ideographs Extension A"](r)||Xt["CJK Unified Ideographs"](r)||Xt["Enclosed CJK Letters and Months"](r)||Xt["Hangul Compatibility Jamo"](r)||Xt["Hangul Jamo Extended-A"](r)||Xt["Hangul Jamo Extended-B"](r)||Xt["Hangul Jamo"](r)||Xt["Hangul Syllables"](r)||Xt.Hiragana(r)||Xt["Ideographic Description Characters"](r)||Xt.Kanbun(r)||Xt["Kangxi Radicals"](r)||Xt["Katakana Phonetic Extensions"](r)||Xt.Katakana(r)&&r!==12540||!(!Xt["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!Xt["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||Xt["Unified Canadian Aboriginal Syllabics"](r)||Xt["Unified Canadian Aboriginal Syllabics Extended"](r)||Xt["Vertical Forms"](r)||Xt["Yijing Hexagram Symbols"](r)||Xt["Yi Syllables"](r)||Xt["Yi Radicals"](r))))}function Pm(r){return!(Sp(r)||function(n){return!!(Xt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Xt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Xt["Letterlike Symbols"](n)||Xt["Number Forms"](n)||Xt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Xt["Control Pictures"](n)&&n!==9251||Xt["Optical Character Recognition"](n)||Xt["Enclosed Alphanumerics"](n)||Xt["Geometric Shapes"](n)||Xt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Xt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Xt["CJK Symbols and Punctuation"](n)||Xt.Katakana(n)||Xt["Private Use Area"](n)||Xt["CJK Compatibility Forms"](n)||Xt["Small Form Variants"](n)||Xt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(r))}function Mm(r){return r>=1424&&r<=2303||Xt["Arabic Presentation Forms-A"](r)||Xt["Arabic Presentation Forms-B"](r)}function A_(r,n){return!(!n&&Mm(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||Xt.Khmer(r))}function D_(r){for(const n of r)if(Mm(n.charCodeAt(0)))return!0;return!1}const Tp="deferred",Cp="loading",Ep="loaded";let wl=null,f="unavailable",s=null;const u=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(f="error"),wl&&wl(r)};function g(){x.fire(new Sa("pluginStateChange",{pluginStatus:f,pluginURL:s}))}const x=new lc,b=function(){return f},E=function(){if(f!==Tp||!s)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");f=Cp,g(),s&&Ir({url:s},r=>{r?u(r):(f=Ep,g())})},k={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>f===Ep||k.applyArabicShaping!=null,isLoading:()=>f===Cp,setState(r){f=r.pluginStatus,s=r.pluginURL},isParsed:()=>k.applyArabicShaping!=null&&k.processBidirectionalText!=null&&k.processStyledBidirectionalText!=null,getPluginURL:()=>s};class I{constructor(n,i){this.zoom=n,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.transition=i.transition,this.pitch=i.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(i,c){for(const h of i)if(!A_(h.charCodeAt(0),c))return!1;return!0}(n,k.isLoaded())}}class O{constructor(n,i){this.property=n,this.value=i,this.expression=function(c,h){if(Cc(c))return new Xu(c,h);if(yl(c)){const m=kc(c,h);if(m.result==="error")throw new Error(m.value.map(_=>`${_.key}: ${_.message}`).join(", "));return m.value}{let m=c;return typeof c=="string"&&h.type==="color"&&(m=Hr.parse(c)),{kind:"constant",evaluate:()=>m}}}(i===void 0?n.specification.default:i,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,i,c){return this.property.possiblyEvaluate(this,n,i,c)}}class L{constructor(n){this.property=n,this.value=new O(n,void 0)}transitioned(n,i){return new ne(this.property,this.value,i,gt({},n.transition,this.transition),n.now)}untransitioned(){return new ne(this.property,this.value,null,{},0)}}class q{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return St(this._values[n].value.value)}setValue(n,i){this._values.hasOwnProperty(n)||(this._values[n]=new L(this._values[n].property)),this._values[n].value=new O(this._values[n].property,i===null?void 0:St(i))}getTransition(n){return St(this._values[n].transition)}setTransition(n,i){this._values.hasOwnProperty(n)||(this._values[n]=new L(this._values[n].property)),this._values[n].transition=St(i)||void 0}serialize(){const n={};for(const i of Object.keys(this._values)){const c=this.getValue(i);c!==void 0&&(n[i]=c);const h=this.getTransition(i);h!==void 0&&(n[`${i}-transition`]=h)}return n}transitioned(n,i){const c=new ae(this._properties);for(const h of Object.keys(this._values))c._values[h]=this._values[h].transitioned(n,i._values[h]);return c}untransitioned(){const n=new ae(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].untransitioned();return n}}class ne{constructor(n,i,c,h,m){const _=h.delay||0,v=h.duration||0;m=m||0,this.property=n,this.value=i,this.begin=m+_,this.end=this.begin+v,n.specification.transition&&(h.delay||h.duration)&&(this.prior=c)}possiblyEvaluate(n,i,c){const h=n.now||0,m=this.value.possiblyEvaluate(n,i,c),_=this.prior;if(_){if(h>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(h<this.begin)return _.possiblyEvaluate(n,i,c);{const v=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,i,c),m,he(v))}}return m}}class ae{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,i,c){const h=new pe(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(n,i,c);return h}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class ue{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return St(this._values[n].value)}setValue(n,i){this._values[n]=new O(this._values[n].property,i===null?void 0:St(i))}serialize(){const n={};for(const i of Object.keys(this._values)){const c=this.getValue(i);c!==void 0&&(n[i]=c)}return n}possiblyEvaluate(n,i,c){const h=new pe(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].possiblyEvaluate(n,i,c);return h}}class ce{constructor(n,i,c){this.property=n,this.value=i,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,i,c,h){return this.property.evaluate(this.value,this.parameters,n,i,c,h)}}class pe{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Z{constructor(n){this.specification=n}possiblyEvaluate(n,i){return n.expression.evaluate(i)}interpolate(n,i,c){const h=xc[this.specification.type];return h?h(n,i,c):n}}class se{constructor(n,i){this.specification=n,this.overrides=i}possiblyEvaluate(n,i,c,h){return new ce(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(i,null,{},c,h)}:n.expression,i)}interpolate(n,i,c){if(n.value.kind!=="constant"||i.value.kind!=="constant")return n;if(n.value.value===void 0||i.value.value===void 0)return new ce(this,{kind:"constant",value:void 0},n.parameters);const h=xc[this.specification.type];return h?new ce(this,{kind:"constant",value:h(n.value.value,i.value.value,c)},n.parameters):n}evaluate(n,i,c,h,m,_){return n.kind==="constant"?n.value:n.evaluate(i,c,h,m,_)}}class xe{constructor(n){this.specification=n}possiblyEvaluate(n,i,c,h){return!!n.expression.evaluate(i,null,{},c,h)}interpolate(){return!1}}class ve{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const i=new I(0,{});for(const c in n){const h=n[c];h.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new O(h,void 0),_=this.defaultTransitionablePropertyValues[c]=new L(h);this.defaultTransitioningPropertyValues[c]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate(i)}}}function De(r,n){return 256*(r=Se(Math.floor(r),0,255))+Se(Math.floor(n),0,255)}Qt(se,"DataDrivenProperty"),Qt(Z,"DataConstantProperty"),Qt(xe,"ColorRampProperty");const Re={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ze{constructor(n,i){this._structArray=n,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ue{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,i){return n._trim(),i&&(n.isTransferred=!0,i.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const i=Object.create(this.prototype);return i.arrayBuffer=n.arrayBuffer,i.length=n.length,i.capacity=n.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function je(r,n=1){let i=0,c=0;return{members:r.map(h=>{const m=Re[h.type].BYTES_PER_ELEMENT,_=i=Ye(i,Math.max(n,m)),v=h.components||1;return c=Math.max(c,m),i+=m*v,{name:h.name,type:h.type,components:v,offset:_}}),size:Ye(i,Math.max(c,n)),alignment:n}}function Ye(r,n){return Math.ceil(r/n)*n}class kt extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i){const c=this.length;return this.resize(c+1),this.emplace(c,n,i)}emplace(n,i,c){const h=2*n;return this.int16[h+0]=i,this.int16[h+1]=c,n}}kt.prototype.bytesPerElement=4,Qt(kt,"StructArrayLayout2i4");class qe extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c){const h=this.length;return this.resize(h+1),this.emplace(h,n,i,c)}emplace(n,i,c,h){const m=3*n;return this.int16[m+0]=i,this.int16[m+1]=c,this.int16[m+2]=h,n}}qe.prototype.bytesPerElement=6,Qt(qe,"StructArrayLayout3i6");class ft extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,h)}emplace(n,i,c,h,m){const _=4*n;return this.int16[_+0]=i,this.int16[_+1]=c,this.int16[_+2]=h,this.int16[_+3]=m,n}}ft.prototype.bytesPerElement=8,Qt(ft,"StructArrayLayout4i8");class et extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m,_,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,i,c,h,m,_,v)}emplace(n,i,c,h,m,_,v,S){const T=6*n,P=12*n,A=3*n;return this.int16[T+0]=i,this.int16[T+1]=c,this.uint8[P+4]=h,this.uint8[P+5]=m,this.uint8[P+6]=_,this.uint8[P+7]=v,this.float32[A+2]=S,n}}et.prototype.bytesPerElement=12,Qt(et,"StructArrayLayout2i4ub1f12");class Et extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,h)}emplace(n,i,c,h,m){const _=4*n;return this.float32[_+0]=i,this.float32[_+1]=c,this.float32[_+2]=h,this.float32[_+3]=m,n}}Et.prototype.bytesPerElement=16,Qt(Et,"StructArrayLayout4f16");class Xe extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,i,c,h,m)}emplace(n,i,c,h,m,_){const v=6*n,S=3*n;return this.uint16[v+0]=i,this.uint16[v+1]=c,this.uint16[v+2]=h,this.uint16[v+3]=m,this.float32[S+2]=_,n}}Xe.prototype.bytesPerElement=12,Qt(Xe,"StructArrayLayout4ui1f12");class pt extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,h)}emplace(n,i,c,h,m){const _=4*n;return this.uint16[_+0]=i,this.uint16[_+1]=c,this.uint16[_+2]=h,this.uint16[_+3]=m,n}}pt.prototype.bytesPerElement=8,Qt(pt,"StructArrayLayout4ui8");class It extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m,_){const v=this.length;return this.resize(v+1),this.emplace(v,n,i,c,h,m,_)}emplace(n,i,c,h,m,_,v){const S=6*n;return this.int16[S+0]=i,this.int16[S+1]=c,this.int16[S+2]=h,this.int16[S+3]=m,this.int16[S+4]=_,this.int16[S+5]=v,n}}It.prototype.bytesPerElement=12,Qt(It,"StructArrayLayout6i12");class wt extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m,_,v,S,T,P,A,z){const F=this.length;return this.resize(F+1),this.emplace(F,n,i,c,h,m,_,v,S,T,P,A,z)}emplace(n,i,c,h,m,_,v,S,T,P,A,z,F){const U=12*n;return this.int16[U+0]=i,this.int16[U+1]=c,this.int16[U+2]=h,this.int16[U+3]=m,this.uint16[U+4]=_,this.uint16[U+5]=v,this.uint16[U+6]=S,this.uint16[U+7]=T,this.int16[U+8]=P,this.int16[U+9]=A,this.int16[U+10]=z,this.int16[U+11]=F,n}}wt.prototype.bytesPerElement=24,Qt(wt,"StructArrayLayout4i4ui4i24");class At extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m,_){const v=this.length;return this.resize(v+1),this.emplace(v,n,i,c,h,m,_)}emplace(n,i,c,h,m,_,v){const S=10*n,T=5*n;return this.int16[S+0]=i,this.int16[S+1]=c,this.int16[S+2]=h,this.float32[T+2]=m,this.float32[T+3]=_,this.float32[T+4]=v,n}}At.prototype.bytesPerElement=20,Qt(At,"StructArrayLayout3i3f20");class hn extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const i=this.length;return this.resize(i+1),this.emplace(i,n)}emplace(n,i){return this.uint32[1*n+0]=i,n}}hn.prototype.bytesPerElement=4,Qt(hn,"StructArrayLayout1ul4");class Mn extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m,_,v,S,T,P,A,z,F){const U=this.length;return this.resize(U+1),this.emplace(U,n,i,c,h,m,_,v,S,T,P,A,z,F)}emplace(n,i,c,h,m,_,v,S,T,P,A,z,F,U){const X=20*n,re=10*n;return this.int16[X+0]=i,this.int16[X+1]=c,this.int16[X+2]=h,this.int16[X+3]=m,this.int16[X+4]=_,this.float32[re+3]=v,this.float32[re+4]=S,this.float32[re+5]=T,this.float32[re+6]=P,this.int16[X+14]=A,this.uint32[re+8]=z,this.uint16[X+18]=F,this.uint16[X+19]=U,n}}Mn.prototype.bytesPerElement=40,Qt(Mn,"StructArrayLayout5i4f1i1ul2ui40");class nn extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m,_,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,i,c,h,m,_,v)}emplace(n,i,c,h,m,_,v,S){const T=8*n;return this.int16[T+0]=i,this.int16[T+1]=c,this.int16[T+2]=h,this.int16[T+4]=m,this.int16[T+5]=_,this.int16[T+6]=v,this.int16[T+7]=S,n}}nn.prototype.bytesPerElement=16,Qt(nn,"StructArrayLayout3i2i2i16");class bn extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,i,c,h,m)}emplace(n,i,c,h,m,_){const v=4*n,S=8*n;return this.float32[v+0]=i,this.float32[v+1]=c,this.float32[v+2]=h,this.int16[S+6]=m,this.int16[S+7]=_,n}}bn.prototype.bytesPerElement=16,Qt(bn,"StructArrayLayout2f1f2i16");class Wn extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,h)}emplace(n,i,c,h,m){const _=12*n,v=3*n;return this.uint8[_+0]=i,this.uint8[_+1]=c,this.float32[v+1]=h,this.float32[v+2]=m,n}}Wn.prototype.bytesPerElement=12,Qt(Wn,"StructArrayLayout2ub2f12");class jn extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c){const h=this.length;return this.resize(h+1),this.emplace(h,n,i,c)}emplace(n,i,c,h){const m=3*n;return this.float32[m+0]=i,this.float32[m+1]=c,this.float32[m+2]=h,n}}jn.prototype.bytesPerElement=12,Qt(jn,"StructArrayLayout3f12");class ln extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c){const h=this.length;return this.resize(h+1),this.emplace(h,n,i,c)}emplace(n,i,c,h){const m=3*n;return this.uint16[m+0]=i,this.uint16[m+1]=c,this.uint16[m+2]=h,n}}ln.prototype.bytesPerElement=6,Qt(ln,"StructArrayLayout3ui6");class ir extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m,_,v,S,T,P,A,z,F,U,X,re,fe,Ee,me,Te,Ie){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,n,i,c,h,m,_,v,S,T,P,A,z,F,U,X,re,fe,Ee,me,Te,Ie)}emplace(n,i,c,h,m,_,v,S,T,P,A,z,F,U,X,re,fe,Ee,me,Te,Ie,Pe){const Ke=30*n,Ze=15*n,ut=60*n;return this.int16[Ke+0]=i,this.int16[Ke+1]=c,this.int16[Ke+2]=h,this.float32[Ze+2]=m,this.float32[Ze+3]=_,this.uint16[Ke+8]=v,this.uint16[Ke+9]=S,this.uint32[Ze+5]=T,this.uint32[Ze+6]=P,this.uint32[Ze+7]=A,this.uint16[Ke+16]=z,this.uint16[Ke+17]=F,this.uint16[Ke+18]=U,this.float32[Ze+10]=X,this.float32[Ze+11]=re,this.uint8[ut+48]=fe,this.uint8[ut+49]=Ee,this.uint8[ut+50]=me,this.uint32[Ze+13]=Te,this.int16[Ke+28]=Ie,this.uint8[ut+58]=Pe,n}}ir.prototype.bytesPerElement=60,Qt(ir,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class lr extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m,_,v,S,T,P,A,z,F,U,X,re,fe,Ee,me,Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,n,i,c,h,m,_,v,S,T,P,A,z,F,U,X,re,fe,Ee,me,Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt)}emplace(n,i,c,h,m,_,v,S,T,P,A,z,F,U,X,re,fe,Ee,me,Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt,Dt){const st=38*n,Ht=19*n;return this.int16[st+0]=i,this.int16[st+1]=c,this.int16[st+2]=h,this.float32[Ht+2]=m,this.float32[Ht+3]=_,this.int16[st+8]=v,this.int16[st+9]=S,this.int16[st+10]=T,this.int16[st+11]=P,this.int16[st+12]=A,this.int16[st+13]=z,this.uint16[st+14]=F,this.uint16[st+15]=U,this.uint16[st+16]=X,this.uint16[st+17]=re,this.uint16[st+18]=fe,this.uint16[st+19]=Ee,this.uint16[st+20]=me,this.uint16[st+21]=Te,this.uint16[st+22]=Ie,this.uint16[st+23]=Pe,this.uint16[st+24]=Ke,this.uint16[st+25]=Ze,this.uint16[st+26]=ut,this.uint16[st+27]=Pt,this.uint16[st+28]=tt,this.uint32[Ht+15]=yt,this.float32[Ht+16]=_t,this.float32[Ht+17]=Tt,this.float32[Ht+18]=Dt,n}}lr.prototype.bytesPerElement=76,Qt(lr,"StructArrayLayout3i2f6i15ui1ul3f76");class cr extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const i=this.length;return this.resize(i+1),this.emplace(i,n)}emplace(n,i){return this.float32[1*n+0]=i,n}}cr.prototype.bytesPerElement=4,Qt(cr,"StructArrayLayout1f4");class ur extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i,c,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,i,c,h,m)}emplace(n,i,c,h,m,_){const v=5*n;return this.float32[v+0]=i,this.float32[v+1]=c,this.float32[v+2]=h,this.float32[v+3]=m,this.float32[v+4]=_,n}}ur.prototype.bytesPerElement=20,Qt(ur,"StructArrayLayout5f20");class Mi extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i,c,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,i,c,h)}emplace(n,i,c,h,m){const _=6*n;return this.uint32[3*n+0]=i,this.uint16[_+2]=c,this.uint16[_+3]=h,this.uint16[_+4]=m,n}}Mi.prototype.bytesPerElement=12,Qt(Mi,"StructArrayLayout1ul3ui12");class mi extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,i){const c=this.length;return this.resize(c+1),this.emplace(c,n,i)}emplace(n,i,c){const h=2*n;return this.uint16[h+0]=i,this.uint16[h+1]=c,n}}mi.prototype.bytesPerElement=4,Qt(mi,"StructArrayLayout2ui4");class ho extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const i=this.length;return this.resize(i+1),this.emplace(i,n)}emplace(n,i){return this.uint16[1*n+0]=i,n}}ho.prototype.bytesPerElement=2,Qt(ho,"StructArrayLayout1ui2");class Qo extends Ue{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,i){const c=this.length;return this.resize(c+1),this.emplace(c,n,i)}emplace(n,i,c){const h=2*n;return this.float32[h+0]=i,this.float32[h+1]=c,n}}Qo.prototype.bytesPerElement=8,Qt(Qo,"StructArrayLayout2f8");class Dr extends ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Dr.prototype.size=40;class dr extends Mn{get(n){return new Dr(this,n)}}Qt(dr,"CollisionBoxArray");class Qn extends ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}Qn.prototype.size=60;class Kr extends ir{get(n){return new Qn(this,n)}}Qt(Kr,"PlacedSymbolArray");class Li extends ze{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Li.prototype.size=76;class kr extends lr{get(n){return new Li(this,n)}}Qt(kr,"SymbolInstanceArray");class Ui extends cr{getoffsetX(n){return this.float32[1*n+0]}}Qt(Ui,"GlyphOffsetArray");class nd extends kt{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}Qt(nd,"SymbolLineVertexArray");class Da extends ze{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Da.prototype.size=12;class zc extends Mi{get(n){return new Da(this,n)}}Qt(zc,"FeatureIndexArray");class Is extends mi{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}Qt(Is,"FillExtrusionCentroidArray");const Ks=je([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),za=je([{name:"a_dash",components:4,type:"Uint16"}]);var rd={exports:{}},Rc={exports:{}};Rc.exports=function(r,n){var i,c,h,m,_,v,S,T;for(c=r.length-(i=3&r.length),h=n,_=3432918353,v=461845907,T=0;T<c;)S=255&r.charCodeAt(T)|(255&r.charCodeAt(++T))<<8|(255&r.charCodeAt(++T))<<16|(255&r.charCodeAt(++T))<<24,++T,h=27492+(65535&(m=5*(65535&(h=(h^=S=(65535&(S=(S=(65535&S)*_+(((S>>>16)*_&65535)<<16)&4294967295)<<15|S>>>17))*v+(((S>>>16)*v&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(S=0,i){case 3:S^=(255&r.charCodeAt(T+2))<<16;case 2:S^=(255&r.charCodeAt(T+1))<<8;case 1:h^=S=(65535&(S=(S=(65535&(S^=255&r.charCodeAt(T)))*_+(((S>>>16)*_&65535)<<16)&4294967295)<<15|S>>>17))*v+(((S>>>16)*v&65535)<<16)&4294967295}return h^=r.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var kp=Rc.exports,j3={exports:{}};j3.exports=function(r,n){for(var i,c=r.length,h=n^c,m=0;c>=4;)i=1540483477*(65535&(i=255&r.charCodeAt(m)|(255&r.charCodeAt(++m))<<8|(255&r.charCodeAt(++m))<<16|(255&r.charCodeAt(++m))<<24))+((1540483477*(i>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),c-=4,++m;switch(c){case 3:h^=(255&r.charCodeAt(m+2))<<16;case 2:h^=(255&r.charCodeAt(m+1))<<8;case 1:h=1540483477*(65535&(h^=255&r.charCodeAt(m)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var U3=kp,EE=j3.exports;rd.exports=U3,rd.exports.murmur3=U3,rd.exports.murmur2=EE;var z_=G(rd.exports);class Im{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,i,c,h){this.ids.push(V3(n)),this.positions.push(i,c,h)}getPositions(n){const i=V3(n);let c=0,h=this.ids.length-1;for(;c<h;){const _=c+h>>1;this.ids[_]>=i?h=_:c=_+1}const m=[];for(;this.ids[c]===i;)m.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return m}static serialize(n,i){const c=new Float64Array(n.ids),h=new Uint32Array(n.positions);return R_(c,h,0,c.length-1),i&&i.push(c.buffer,h.buffer),{ids:c,positions:h}}static deserialize(n){const i=new Im;return i.ids=n.ids,i.positions=n.positions,i.indexed=!0,i}}function V3(r){const n=+r;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:z_(String(r))}function R_(r,n,i,c){for(;i<c;){const h=r[i+c>>1];let m=i-1,_=c+1;for(;;){do m++;while(r[m]<h);do _--;while(r[_]>h);if(m>=_)break;Am(r,m,_),Am(n,3*m,3*_),Am(n,3*m+1,3*_+1),Am(n,3*m+2,3*_+2)}_-i<c-_?(R_(r,n,i,_),i=_+1):(R_(r,n,_+1,c),c=_)}}function Am(r,n,i){const c=r[n];r[n]=r[i],r[i]=c}Qt(Im,"FeaturePositionMap");class Ra{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,i){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,i),this.initialized=!0),!!this.location}}class Dm extends Ra{constructor(n){super(n),this.current=0}set(n,i,c){this.fetchUniformLocation(n,i)&&this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class W3 extends Ra{constructor(n){super(n),this.current=[0,0,0,0]}set(n,i,c){this.fetchUniformLocation(n,i)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3])))}}class G3 extends Ra{constructor(n){super(n),this.current=Hr.transparent}set(n,i,c){this.fetchUniformLocation(n,i)&&(c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a)))}}const kE=new Float32Array(16),PE=new Float32Array(9),ME=new Float32Array(4);function L_(r){return[De(255*r.r,255*r.g),De(255*r.b,255*r.a)]}class Pp{constructor(n,i,c){this.value=n,this.uniformNames=i.map(h=>`u_${h}`),this.type=c}setUniform(n,i,c,h,m){i.set(n,m,h.constantOr(this.value))}getBinding(n,i){return this.type==="color"?new G3(n):new Dm(n)}}class id{constructor(n,i){this.uniformNames=i.map(c=>`u_${c}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,i,c,h,m){const _=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;_&&i.set(n,m,_)}getBinding(n,i){return i==="u_pattern"||i==="u_dash"?new W3(n):new Dm(n)}}class La{constructor(n,i,c,h){this.expression=n,this.type=c,this.maxValue=0,this.paintVertexAttributes=i.map(m=>({name:`a_${m}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(n,i,c,h,m,_){const v=this.paintVertexArray.length,S=this.expression.evaluate(new I(0),i,{},m,h,_);this.paintVertexArray.resize(n),this._setPaintValue(v,n,S)}updatePaintArray(n,i,c,h,m){const _=this.expression.evaluate({zoom:0},c,h,void 0,m);this._setPaintValue(n,i,_)}_setPaintValue(n,i,c){if(this.type==="color"){const h=L_(c);for(let m=n;m<i;m++)this.paintVertexArray.emplace(m,h[0],h[1])}else{for(let h=n;h<i;h++)this.paintVertexArray.emplace(h,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class As{constructor(n,i,c,h,m,_){this.expression=n,this.uniformNames=i.map(v=>`u_${v}_t`),this.type=c,this.useIntegerZoom=h,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=i.map(v=>({name:`a_${v}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,i,c,h,m,_){const v=this.expression.evaluate(new I(this.zoom),i,{},m,h,_),S=this.expression.evaluate(new I(this.zoom+1),i,{},m,h,_),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,v,S)}updatePaintArray(n,i,c,h,m){const _=this.expression.evaluate({zoom:this.zoom},c,h,void 0,m),v=this.expression.evaluate({zoom:this.zoom+1},c,h,void 0,m);this._setPaintValue(n,i,_,v)}_setPaintValue(n,i,c,h){if(this.type==="color"){const m=L_(c),_=L_(h);for(let v=n;v<i;v++)this.paintVertexArray.emplace(v,m[0],m[1],_[0],_[1])}else{for(let m=n;m<i;m++)this.paintVertexArray.emplace(m,c,h);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,i,c,h,m){const _=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,v=Se(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);i.set(n,m,v)}getBinding(n,i){return new Dm(n)}}class Sl{constructor(n,i,c,h,m){this.expression=n,this.layerId=m,this.paintVertexAttributes=(c==="array"?za:Ks).members;for(let _=0;_<i.length;++_);this.paintVertexArray=new h}populatePaintArray(n,i,c){const h=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(h,n,i.patterns&&i.patterns[this.layerId],c)}updatePaintArray(n,i,c,h,m,_){this._setPaintValues(n,i,c.patterns&&c.patterns[this.layerId],_)}_setPaintValues(n,i,c,h){if(!h||!c)return;const m=h[c];if(!m)return;const{tl:_,br:v,pixelRatio:S}=m;for(let T=n;T<i;T++)this.paintVertexArray.emplace(T,_[0],_[1],v[0],v[1],S)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Tl{constructor(n,i,c=()=>!0){this.binders={},this._buffers=[];const h=[];for(const m in n.paint._values){if(!c(m))continue;const _=n.paint.get(m);if(!(_ instanceof ce&&ml(_.property.specification)))continue;const v=AE(m,n.type),S=_.value,T=_.property.specification.type,P=!!_.property.useIntegerZoom,A=m==="line-dasharray"||m.endsWith("pattern"),z=m==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(S.kind!=="constant"||z)if(S.kind==="source"||z||A){const F=H3(m,T,"source");this.binders[m]=A?new Sl(S,v,T,F,n.id):new La(S,v,T,F),h.push(`/a_${m}`)}else{const F=H3(m,T,"composite");this.binders[m]=new As(S,v,T,P,i,F),h.push(`/z_${m}`)}else this.binders[m]=A?new id(S.value,v):new Pp(S.value,v,T),h.push(`/u_${m}`)}this.cacheKey=h.sort().join("")}getMaxValue(n){const i=this.binders[n];return i instanceof La||i instanceof As?i.maxValue:0}populatePaintArrays(n,i,c,h,m,_){for(const v in this.binders){const S=this.binders[v];(S instanceof La||S instanceof As||S instanceof Sl)&&S.populatePaintArray(n,i,c,h,m,_)}}setConstantPatternPositions(n){for(const i in this.binders){const c=this.binders[i];c instanceof id&&c.setConstantPatternPositions(n)}}updatePaintArrays(n,i,c,h,m,_){let v=!1;for(const S in n){const T=i.getPositions(S);for(const P of T){const A=c.feature(P.index);for(const z in this.binders){const F=this.binders[z];if((F instanceof La||F instanceof As||F instanceof Sl)&&F.expression.isStateDependent===!0){const U=h.paint.get(z);F.expression=U.value,F.updatePaintArray(P.start,P.end,A,n[S],m,_),v=!0}}}}return v}defines(){const n=[];for(const i in this.binders){const c=this.binders[i];(c instanceof Pp||c instanceof id)&&n.push(...c.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return n}getBinderAttributes(){const n=[];for(const i in this.binders){const c=this.binders[i];if(c instanceof La||c instanceof As||c instanceof Sl)for(let h=0;h<c.paintVertexAttributes.length;h++)n.push(c.paintVertexAttributes[h].name)}return n}getBinderUniforms(){const n=[];for(const i in this.binders){const c=this.binders[i];if(c instanceof Pp||c instanceof id||c instanceof As)for(const h of c.uniformNames)n.push(h)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const i=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof Pp||h instanceof id||h instanceof As)for(const m of h.uniformNames)i.push({name:m,property:c,binding:h.getBinding(n,m)})}return i}setUniforms(n,i,c,h,m){for(const{name:_,property:v,binding:S}of c)this.binders[v].setUniform(n,S,m,h.get(v),_)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const i=this.binders[n];(i instanceof La||i instanceof As||i instanceof Sl)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(n){for(const i in this.binders){const c=this.binders[i];(c instanceof La||c instanceof As||c instanceof Sl)&&c.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const i=this.binders[n];(i instanceof La||i instanceof As||i instanceof Sl)&&i.destroy()}}}class Lc{constructor(n,i,c=()=>!0){this.programConfigurations={};for(const h of n)this.programConfigurations[h.id]=new Tl(h,i,c);this.needsUpload=!1,this._featureMap=new Im,this._bufferOffset=0}populatePaintArrays(n,i,c,h,m,_,v){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,i,h,m,_,v);i.id!==void 0&&this._featureMap.add(i.id,c,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,i,c,h,m){for(const _ of c)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,i,_,h,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const i in this.programConfigurations)this.programConfigurations[i].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const IE={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function AE(r,n){return IE[r]||[r.replace(`${n}-`,"").replace(/-/g,"_")]}const DE={"line-pattern":{source:Xe,composite:Xe},"fill-pattern":{source:Xe,composite:Xe},"fill-extrusion-pattern":{source:Xe,composite:Xe},"line-dasharray":{source:pt,composite:pt}},zE={color:{source:Qo,composite:Et},number:{source:cr,composite:Qo}};function H3(r,n,i){const c=DE[r];return c&&c[i]||zE[n][i]}Qt(Pp,"ConstantBinder"),Qt(id,"PatternConstantBinder"),Qt(La,"SourceExpressionBinder"),Qt(Sl,"PatternCompositeBinder"),Qt(As,"CompositeExpressionBinder"),Qt(Tl,"ProgramConfiguration",{omit:["_buffers"]}),Qt(Lc,"ProgramConfigurationSet");const q3="-transition";class Ds extends lc{constructor(n,i){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),i.layout&&(this._unevaluatedLayout=new ue(i.layout)),i.paint)){this._transitionablePaint=new q(i.paint);for(const c in n.paint)this.setPaintProperty(c,n.paint[c],{validate:!1});for(const c in n.layout)this.setLayoutProperty(c,n.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pe(i.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,i,c={}){i!=null&&this._validate(P_,`layers.${this.id}.layout.${n}`,n,i,c)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,i):this.visibility=i)}getPaintProperty(n){return at(n,q3)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,i,c={}){if(i!=null&&this._validate(k_,`layers.${this.id}.paint.${n}`,n,i,c))return!1;if(at(n,q3))return this._transitionablePaint.setTransition(n.slice(0,-11),i||void 0),!1;{const h=this._transitionablePaint._values[n],m=h.value.isDataDriven(),_=h.value;this._transitionablePaint.setValue(n,i),this._handleSpecialPaintPropertyUpdate(n);const v=this._transitionablePaint._values[n].value,S=v.isDataDriven(),T=at(n,"pattern")||n==="line-dasharray";return S||m||T||this._handleOverridablePaintPropertyUpdate(n,_,v)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,i,c){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,i){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,i)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),it(n,(i,c)=>!(i===void 0||c==="layout"&&!Object.keys(i).length||c==="paint"&&!Object.keys(i).length))}_validate(n,i,c,h,m={}){return(!m||m.validate!==!1)&&Em(this,n.call(Cm,{key:i,layerType:this.type,objectKey:c,value:h,styleSpec:ct,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const i=this.paint.get(n);if(i instanceof ce&&ml(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ju(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const RE=je([{name:"a_pos",components:2,type:"Int16"}],4),LE=je([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Jr{constructor(n=[]){this.segments=n}prepareSegment(n,i,c,h){let m=this.segments[this.segments.length-1];return n>Jr.MAX_VERTEX_ARRAY_LENGTH&&He(`Max vertices per segment is ${Jr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!m||m.vertexLength+n>Jr.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==h)&&(m={vertexOffset:i.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},h!==void 0&&(m.sortKey=h),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const n of this.segments)for(const i in n.vaos)n.vaos[i].destroy()}static simpleSegment(n,i,c,h){return new Jr([{vertexOffset:n,primitiveOffset:i,vertexLength:c,primitiveLength:h,vaos:{},sortKey:0}])}}Jr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qt(Jr,"SegmentVector");var _n=8192;class Cl{constructor(n,i){n&&(i?this.setSouthWest(n).setNorthEast(i):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof hr?new hr(n.lng,n.lat):hr.convert(n),this}setSouthWest(n){return this._sw=n instanceof hr?new hr(n.lng,n.lat):hr.convert(n),this}extend(n){const i=this._sw,c=this._ne;let h,m;if(n instanceof hr)h=n,m=n;else{if(!(n instanceof Cl))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Cl.convert(n)):this.extend(hr.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(hr.convert(n)):this;if(h=n._sw,m=n._ne,!h||!m)return this}return i||c?(i.lng=Math.min(h.lng,i.lng),i.lat=Math.min(h.lat,i.lat),c.lng=Math.max(m.lng,c.lng),c.lat=Math.max(m.lat,c.lat)):(this._sw=new hr(h.lng,h.lat),this._ne=new hr(m.lng,m.lat)),this}getCenter(){return new hr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new hr(this.getWest(),this.getNorth())}getSouthEast(){return new hr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:i,lat:c}=hr.convert(n);let h=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&h}static convert(n){return!n||n instanceof Cl?n:new Cl(n)}}var zm=1e-6,po=typeof Float32Array<"u"?Float32Array:Array;function Z3(){var r=new po(9);return po!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function X3(r,n,i){var c=n[0],h=n[1],m=n[2],_=n[3],v=n[4],S=n[5],T=n[6],P=n[7],A=n[8],z=i[0],F=i[1],U=i[2],X=i[3],re=i[4],fe=i[5],Ee=i[6],me=i[7],Te=i[8];return r[0]=z*c+F*_+U*T,r[1]=z*h+F*v+U*P,r[2]=z*m+F*S+U*A,r[3]=X*c+re*_+fe*T,r[4]=X*h+re*v+fe*P,r[5]=X*m+re*S+fe*A,r[6]=Ee*c+me*_+Te*T,r[7]=Ee*h+me*v+Te*P,r[8]=Ee*m+me*S+Te*A,r}function zs(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function O_(r,n){var i=n[0],c=n[1],h=n[2],m=n[3],_=n[4],v=n[5],S=n[6],T=n[7],P=n[8],A=n[9],z=n[10],F=n[11],U=n[12],X=n[13],re=n[14],fe=n[15],Ee=i*v-c*_,me=i*S-h*_,Te=i*T-m*_,Ie=c*S-h*v,Pe=c*T-m*v,Ke=h*T-m*S,Ze=P*X-A*U,ut=P*re-z*U,Pt=P*fe-F*U,tt=A*re-z*X,yt=A*fe-F*X,_t=z*fe-F*re,Tt=Ee*_t-me*yt+Te*tt+Ie*Pt-Pe*ut+Ke*Ze;return Tt?(r[0]=(v*_t-S*yt+T*tt)*(Tt=1/Tt),r[1]=(h*yt-c*_t-m*tt)*Tt,r[2]=(X*Ke-re*Pe+fe*Ie)*Tt,r[3]=(z*Pe-A*Ke-F*Ie)*Tt,r[4]=(S*Pt-_*_t-T*ut)*Tt,r[5]=(i*_t-h*Pt+m*ut)*Tt,r[6]=(re*Te-U*Ke-fe*me)*Tt,r[7]=(P*Ke-z*Te+F*me)*Tt,r[8]=(_*yt-v*Pt+T*Ze)*Tt,r[9]=(c*Pt-i*yt-m*Ze)*Tt,r[10]=(U*Pe-X*Te+fe*Ee)*Tt,r[11]=(A*Te-P*Pe-F*Ee)*Tt,r[12]=(v*ut-_*tt-S*Ze)*Tt,r[13]=(i*tt-c*ut+h*Ze)*Tt,r[14]=(X*me-U*Ie-re*Ee)*Tt,r[15]=(P*Ie-A*me+z*Ee)*Tt,r):null}function Oc(r,n,i){var c=n[0],h=n[1],m=n[2],_=n[3],v=n[4],S=n[5],T=n[6],P=n[7],A=n[8],z=n[9],F=n[10],U=n[11],X=n[12],re=n[13],fe=n[14],Ee=n[15],me=i[0],Te=i[1],Ie=i[2],Pe=i[3];return r[0]=me*c+Te*v+Ie*A+Pe*X,r[1]=me*h+Te*S+Ie*z+Pe*re,r[2]=me*m+Te*T+Ie*F+Pe*fe,r[3]=me*_+Te*P+Ie*U+Pe*Ee,r[4]=(me=i[4])*c+(Te=i[5])*v+(Ie=i[6])*A+(Pe=i[7])*X,r[5]=me*h+Te*S+Ie*z+Pe*re,r[6]=me*m+Te*T+Ie*F+Pe*fe,r[7]=me*_+Te*P+Ie*U+Pe*Ee,r[8]=(me=i[8])*c+(Te=i[9])*v+(Ie=i[10])*A+(Pe=i[11])*X,r[9]=me*h+Te*S+Ie*z+Pe*re,r[10]=me*m+Te*T+Ie*F+Pe*fe,r[11]=me*_+Te*P+Ie*U+Pe*Ee,r[12]=(me=i[12])*c+(Te=i[13])*v+(Ie=i[14])*A+(Pe=i[15])*X,r[13]=me*h+Te*S+Ie*z+Pe*re,r[14]=me*m+Te*T+Ie*F+Pe*fe,r[15]=me*_+Te*P+Ie*U+Pe*Ee,r}function Mp(r,n,i){var c,h,m,_,v,S,T,P,A,z,F,U,X=i[0],re=i[1],fe=i[2];return n===r?(r[12]=n[0]*X+n[4]*re+n[8]*fe+n[12],r[13]=n[1]*X+n[5]*re+n[9]*fe+n[13],r[14]=n[2]*X+n[6]*re+n[10]*fe+n[14],r[15]=n[3]*X+n[7]*re+n[11]*fe+n[15]):(h=n[1],m=n[2],_=n[3],v=n[4],S=n[5],T=n[6],P=n[7],A=n[8],z=n[9],F=n[10],U=n[11],r[0]=c=n[0],r[1]=h,r[2]=m,r[3]=_,r[4]=v,r[5]=S,r[6]=T,r[7]=P,r[8]=A,r[9]=z,r[10]=F,r[11]=U,r[12]=c*X+v*re+A*fe+n[12],r[13]=h*X+S*re+z*fe+n[13],r[14]=m*X+T*re+F*fe+n[14],r[15]=_*X+P*re+U*fe+n[15]),r}function Bc(r,n,i){var c=i[0],h=i[1],m=i[2];return r[0]=n[0]*c,r[1]=n[1]*c,r[2]=n[2]*c,r[3]=n[3]*c,r[4]=n[4]*h,r[5]=n[5]*h,r[6]=n[6]*h,r[7]=n[7]*h,r[8]=n[8]*m,r[9]=n[9]*m,r[10]=n[10]*m,r[11]=n[11]*m,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function B_(r,n,i){var c=Math.sin(i),h=Math.cos(i),m=n[4],_=n[5],v=n[6],S=n[7],T=n[8],P=n[9],A=n[10],z=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=m*h+T*c,r[5]=_*h+P*c,r[6]=v*h+A*c,r[7]=S*h+z*c,r[8]=T*h-m*c,r[9]=P*h-_*c,r[10]=A*h-v*c,r[11]=z*h-S*c,r}function Rm(r,n,i){var c=Math.sin(i),h=Math.cos(i),m=n[0],_=n[1],v=n[2],S=n[3],T=n[8],P=n[9],A=n[10],z=n[11];return n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=m*h-T*c,r[1]=_*h-P*c,r[2]=v*h-A*c,r[3]=S*h-z*c,r[8]=m*c+T*h,r[9]=_*c+P*h,r[10]=v*c+A*h,r[11]=S*c+z*h,r}function Y3(r,n){return r[0]=n[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function K3(r,n,i){var c,h,m,_=i[0],v=i[1],S=i[2],T=Math.hypot(_,v,S);return T<zm?null:(_*=T=1/T,v*=T,S*=T,c=Math.sin(n),h=Math.cos(n),r[0]=_*_*(m=1-h)+h,r[1]=v*_*m+S*c,r[2]=S*_*m-v*c,r[3]=0,r[4]=_*v*m-S*c,r[5]=v*v*m+h,r[6]=S*v*m+_*c,r[7]=0,r[8]=_*S*m+v*c,r[9]=v*S*m-_*c,r[10]=S*S*m+h,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}Math.hypot||(Math.hypot=function(){for(var r=0,n=arguments.length;n--;)r+=arguments[n]*arguments[n];return Math.sqrt(r)});var OE=Oc;function F_(){var r=new po(3);return po!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function J3(r){var n=new po(3);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n}function Ip(r){return Math.hypot(r[0],r[1],r[2])}function od(r,n,i){var c=new po(3);return c[0]=r,c[1]=n,c[2]=i,c}function Oa(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r}function $_(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r}function Q3(r,n,i){return r[0]=n[0]*i[0],r[1]=n[1]*i[1],r[2]=n[2]*i[2],r}function Ap(r,n,i){return r[0]=Math.min(n[0],i[0]),r[1]=Math.min(n[1],i[1]),r[2]=Math.min(n[2],i[2]),r}function Dp(r,n,i){return r[0]=Math.max(n[0],i[0]),r[1]=Math.max(n[1],i[1]),r[2]=Math.max(n[2],i[2]),r}function Ao(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r}function zp(r,n,i,c){return r[0]=n[0]+i[0]*c,r[1]=n[1]+i[1]*c,r[2]=n[2]+i[2]*c,r}function Vi(r,n){var i=n[0],c=n[1],h=n[2],m=i*i+c*c+h*h;return m>0&&(m=1/Math.sqrt(m)),r[0]=n[0]*m,r[1]=n[1]*m,r[2]=n[2]*m,r}function es(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}function N_(r,n,i){var c=n[0],h=n[1],m=n[2],_=i[0],v=i[1],S=i[2];return r[0]=h*S-m*v,r[1]=m*_-c*S,r[2]=c*v-h*_,r}function qr(r,n,i){var c=n[0],h=n[1],m=n[2],_=i[3]*c+i[7]*h+i[11]*m+i[15];return r[0]=(i[0]*c+i[4]*h+i[8]*m+i[12])/(_=_||1),r[1]=(i[1]*c+i[5]*h+i[9]*m+i[13])/_,r[2]=(i[2]*c+i[6]*h+i[10]*m+i[14])/_,r}function ew(r,n,i){var c=i[0],h=i[1],m=i[2],_=n[0],v=n[1],S=n[2],T=h*S-m*v,P=m*_-c*S,A=c*v-h*_,z=h*A-m*P,F=m*T-c*A,U=c*P-h*T,X=2*i[3];return P*=X,A*=X,F*=2,U*=2,r[0]=_+(T*=X)+(z*=2),r[1]=v+P+F,r[2]=S+A+U,r}var Rp,Rs=$_,BE=Q3,FE=Ip;function tw(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=n[3]*i,r}function nw(r,n){var i=n[0],c=n[1],h=n[2],m=n[3],_=i*i+c*c+h*h+m*m;return _>0&&(_=1/Math.sqrt(_)),r[0]=i*_,r[1]=c*_,r[2]=h*_,r[3]=m*_,r}function Fc(r,n,i){var c=n[0],h=n[1],m=n[2],_=n[3];return r[0]=i[0]*c+i[4]*h+i[8]*m+i[12]*_,r[1]=i[1]*c+i[5]*h+i[9]*m+i[13]*_,r[2]=i[2]*c+i[6]*h+i[10]*m+i[14]*_,r[3]=i[3]*c+i[7]*h+i[11]*m+i[15]*_,r}function rw(){var r=new po(4);return po!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function iw(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function ow(r,n,i){i*=.5;var c=n[0],h=n[1],m=n[2],_=n[3],v=Math.sin(i),S=Math.cos(i);return r[0]=c*S+_*v,r[1]=h*S+m*v,r[2]=m*S-h*v,r[3]=_*S-c*v,r}function sw(r,n,i){i*=.5;var c=n[0],h=n[1],m=n[2],_=n[3],v=Math.sin(i),S=Math.cos(i);return r[0]=c*S-m*v,r[1]=h*S+_*v,r[2]=m*S+c*v,r[3]=_*S-h*v,r}F_(),Rp=new po(4),po!=Float32Array&&(Rp[0]=0,Rp[1]=0,Rp[2]=0,Rp[3]=0);var $E=nw;F_(),od(1,0,0),od(0,1,0),rw(),rw(),Z3();const NE=je([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:aw}=NE,lw=je([{name:"a_pos_3",components:3,type:"Int16"}]);var Lp=je([{name:"a_pos",type:"Int16",components:2}]);class j_{constructor(n,i){this.pos=n,this.dir=i}intersectsPlane(n,i,c){const h=es(i,this.dir);if(Math.abs(h)<1e-6)return!1;const m=((n[0]-this.pos[0])*i[0]+(n[1]-this.pos[1])*i[1]+(n[2]-this.pos[2])*i[2])/h;return c[0]=this.pos[0]+this.dir[0]*m,c[1]=this.pos[1]+this.dir[1]*m,c[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(n,i,c){if(function(F,U){var X=F[0],re=F[1],fe=F[2],Ee=U[0],me=U[1],Te=U[2];return Math.abs(X-Ee)<=zm*Math.max(1,Math.abs(X),Math.abs(Ee))&&Math.abs(re-me)<=zm*Math.max(1,Math.abs(re),Math.abs(me))&&Math.abs(fe-Te)<=zm*Math.max(1,Math.abs(fe),Math.abs(Te))}(this.pos,n)||i===0)return c[0]=c[1]=c[2]=0,!1;const[h,m,_]=this.dir,v=this.pos[0]-n[0],S=this.pos[1]-n[1],T=this.pos[2]-n[2],P=h*h+m*m+_*_,A=2*(v*h+S*m+T*_),z=A*A-4*P*(v*v+S*S+T*T-i*i);if(z<0){const F=Math.max(-A/2,0),U=v+h*F,X=S+m*F,re=T+_*F,fe=Math.hypot(U,X,re);return c[0]=U*i/fe,c[1]=X*i/fe,c[2]=re*i/fe,!1}{const F=(-A-Math.sqrt(z))/(2*P);if(F<0){const U=Math.hypot(v,S,T);return c[0]=v*i/U,c[1]=S*i/U,c[2]=T*i/U,!1}return c[0]=v+h*F,c[1]=S+m*F,c[2]=T+_*F,!0}}}class U_{constructor(n,i,c,h,m){this.TL=n,this.TR=i,this.BR=c,this.BL=h,this.horizon=m}static fromInvProjectionMatrix(n,i,c){const h=[-1,1,1],m=[1,1,1],_=[1,-1,1],v=[-1,-1,1],S=qr(h,h,n),T=qr(m,m,n),P=qr(_,_,n),A=qr(v,v,n);return new U_(S,T,P,A,i/c)}}class V_{constructor(n,i){this.points=n,this.planes=i}static fromInvProjectionMatrix(n,i,c,h){const m=Math.pow(2,c),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const T=Fc([],S,n),P=1/T[3]/i*m;return function(A,z,F){return A[0]=z[0]*F[0],A[1]=z[1]*F[1],A[2]=z[2]*F[2],A[3]=z[3]*F[3],A}(T,T,[P,P,h?1/T[3]:P,P])}),v=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const T=Vi([],N_([],Rs([],_[S[0]],_[S[1]]),Rs([],_[S[2]],_[S[1]]))),P=-es(T,_[S[1]]);return T.concat(P)});return new V_(_,v)}}class Wi{static fromPoints(n){const i=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0];for(const h of n)Ap(i,i,h),Dp(c,c,h);return new Wi(i,c)}static applyTransform(n,i){const c=n.getCorners();for(let h=0;h<c.length;++h)qr(c[h],c[h],i);return Wi.fromPoints(c)}constructor(n,i){this.min=n,this.max=i,this.center=Ao([],Oa([],this.min,this.max),.5)}quadrant(n){const i=[n%2==0,n<2],c=J3(this.min),h=J3(this.max);for(let m=0;m<i.length;m++)c[m]=i[m]?this.min[m]:this.center[m],h[m]=i[m]?this.center[m]:this.max[m];return h[2]=this.max[2],new Wi(c,h)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,i=this.max;return[[n[0],n[1],n[2]],[i[0],n[1],n[2]],[i[0],i[1],n[2]],[n[0],i[1],n[2]],[n[0],n[1],i[2]],[i[0],n[1],i[2]],[i[0],i[1],i[2]],[n[0],i[1],i[2]]]}intersects(n){const i=this.getCorners();let c=!0;for(let h=0;h<n.planes.length;h++){const m=n.planes[h];let _=0;for(let v=0;v<i.length;v++)_+=es(m,i[v])+m[3]>=0;if(_===0)return 0;_!==i.length&&(c=!1)}if(c)return 2;for(let h=0;h<3;h++){let m=Number.MAX_VALUE,_=-Number.MAX_VALUE;for(let v=0;v<n.points.length;v++){const S=n.points[v][h]-this.min[h];m=Math.min(m,S),_=Math.max(_,S)}if(_<0||m>this.max[h]-this.min[h])return 0}return 1}}const W_=5,cw=6,Js=_n/Math.PI/2,jE=16383,$c=64,Op=[$c,32,16],ts=-Js,ns=Js,UE=[new Wi([ts,ts,ts],[ns,ns,ns]),new Wi([ts,ts,ts],[0,0,ns]),new Wi([0,ts,ts],[ns,0,ns]),new Wi([ts,0,ts],[0,ns,ns]),new Wi([0,0,ts],[ns,ns,ns])];function Lm(r){return r*Js/$p}function uw(r,n,i,c=!0){const h=Ao([],r._camera.position,r.worldSize),m=[n,i,1,1];Fc(m,m,r.pixelMatrixInverse),tw(m,m,1/m[3]);const _=Vi([],Rs([],m,h)),v=r.globeMatrix,S=[v[12],v[13],v[14]],T=Rs([],S,h),P=Ip(T),A=Vi([],T),z=r.worldSize/(2*Math.PI),F=es(A,_),U=Math.asin(z/P);if(U<Math.acos(F)){if(!c)return null;const Pt=[],tt=[];Ao(Pt,_,P/F),Vi(tt,Rs(tt,Pt,T)),Vi(_,Oa(_,T,Ao(_,tt,Math.tan(U)*P)))}const X=[];new j_(h,_).closestPointOnSphere(S,z,X);const re=Vi([],En(v,0)),fe=Vi([],En(v,1)),Ee=Vi([],En(v,2)),me=es(re,X),Te=es(fe,X),Ie=es(Ee,X),Pe=be(Math.asin(-Te/z));let Ke=be(Math.atan2(me,Ie));Ke=r.center.lng+function(Pt,tt){const yt=(tt-Pt+180)%360-180;return yt<-180?yt+360:yt}(r.center.lng,Ke);const Ze=ea(Ke),ut=Se(ta(Pe),0,1);return new cd(Ze,ut)}class VE{constructor(n,i,c){this.a=Rs([],n,c),this.b=Rs([],i,c),this.center=c;const h=Vi([],this.a),m=Vi([],this.b);this.angle=Math.acos(es(h,m))}}function G_(r,n){if(r.angle===0)return null;let i;return i=r.a[n]===0?1/r.angle*.5*Math.PI:1/r.angle*Math.atan(r.b[n]/r.a[n]/Math.sin(r.angle)-1/Math.tan(r.angle)),i<0||i>1?null:function(c,h,m,_){const v=Math.sin(m);return c*(Math.sin((1-_)*m)/v)+h*(Math.sin(_*m)/v)}(r.a[n],r.b[n],r.angle,Se(i,0,1))+r.center[n]}function Qs(r){if(r.z<=1)return UE[r.z+2*r.y+r.x];const n=H_(Om(r));return Wi.fromPoints(n)}function Nc(r,n,i){return Ao(r,r,1-i),zp(r,r,n,i)}function dw(r,n){const i=ld(n.zoom);if(i===0)return Qs(r);const c=Om(r),h=H_(c),m=ea(c.getWest())*n.worldSize,_=ea(c.getEast())*n.worldSize,v=ta(c.getNorth())*n.worldSize,S=ta(c.getSouth())*n.worldSize,T=[m,v,0],P=[_,v,0],A=[m,S,0],z=[_,S,0],F=O_([],n.globeMatrix);return qr(T,T,F),qr(P,P,F),qr(A,A,F),qr(z,z,F),h[0]=Nc(h[0],A,i),h[1]=Nc(h[1],z,i),h[2]=Nc(h[2],P,i),h[3]=Nc(h[3],T,i),Wi.fromPoints(h)}function hw(r,n,i){for(const c of r)qr(c,c,n),Ao(c,c,i)}function WE(r,n,i){const c=n/r.worldSize,h=r.globeMatrix;if(i.z<=1){const Ze=Qs(i).getCorners();return hw(Ze,h,c),Wi.fromPoints(Ze)}const m=Om(i),_=H_(m);hw(_,h,c);const v=Number.MAX_VALUE,S=[-v,-v,-v],T=[v,v,v];if(m.contains(r.center)){for(const Pt of _)Ap(T,T,Pt),Dp(S,S,Pt);S[2]=0;const Ze=r.point,ut=[Ze.x*c,Ze.y*c,0];return Ap(T,T,ut),Dp(S,S,ut),new Wi(T,S)}const P=[h[12]*c,h[13]*c,h[14]*c],A=m.getCenter(),z=Se(r.center.lat,-Ai,Ai),F=Se(A.lat,-Ai,Ai),U=ea(r.center.lng),X=ta(z);let re=U-ea(A.lng);const fe=X-ta(F);re>.5?re-=1:re<-.5&&(re+=1);let Ee=0;Math.abs(re)>Math.abs(fe)?Ee=re>=0?1:3:(Ee=fe>=0?0:2,zp(P,P,[h[4]*c,h[5]*c,h[6]*c],-Math.sin(Fe(fe>=0?m.getSouth():m.getNorth()))*Js));const me=_[Ee],Te=_[(Ee+1)%4],Ie=new VE(me,Te,P),Pe=[G_(Ie,0)||me[0],G_(Ie,1)||me[1],G_(Ie,2)||me[2]],Ke=ld(r.zoom);if(Ke>0){const Ze=function({x:Pt,y:tt,z:yt},_t,Tt,Dt,st){const Ht=1/(1<<yt);let rn=Pt*Ht,Zt=rn+Ht,Dn=tt*Ht,Rt=Dn+Ht,pn=0;const zn=(rn+Zt)/2-Dt;return zn>.5?pn=-1:zn<-.5&&(pn=1),rn=((rn+pn)*_t-(Dt*=_t))*Tt+Dt,Zt=((Zt+pn)*_t-Dt)*Tt+Dt,Dn=(Dn*_t-(st*=_t))*Tt+st,Rt=(Rt*_t-st)*Tt+st,[[rn,Rt,0],[Zt,Rt,0],[Zt,Dn,0],[rn,Dn,0]]}(i,n,r._pixelsPerMercatorPixel,U,X);for(let Pt=0;Pt<_.length;Pt++)Nc(_[Pt],Ze[Pt],Ke);const ut=Oa([],Ze[Ee],Ze[(Ee+1)%4]);Ao(ut,ut,.5),Nc(Pe,ut,Ke)}for(const Ze of _)Ap(T,T,Ze),Dp(S,S,Ze);return T[2]=Math.min(me[2],Te[2]),Ap(T,T,Pe),Dp(S,S,Pe),new Wi(T,S)}function Om({x:r,y:n,z:i}){const c=1/(1<<i),h=new hr(Do(r*c),Ii((n+1)*c)),m=new hr(Do((r+1)*c),Ii(n*c));return new Cl(h,m)}function H_(r){const n=Fe(r.getNorth()),i=Fe(r.getSouth()),c=Math.cos(n),h=Math.cos(i),m=Math.sin(n),_=Math.sin(i),v=r.getWest(),S=r.getEast();return[sd(h,_,v),sd(h,_,S),sd(c,m,S),sd(c,m,v)]}function sd(r,n,i,c=Js){return i=Fe(i),[r*Math.sin(i)*c,-n*c,r*Math.cos(i)*c]}function ad(r,n,i){return sd(Math.cos(Fe(r)),Math.sin(Fe(r)),n,i)}function Bp(r,n,i,c){const h=1<<i.z,m=(r/_n+i.x)/h;return ad(Ii((n/_n+i.y)/h),Do(m),c)}function Bm({min:r,max:n}){return jE/Math.max(n[0]-r[0],n[1]-r[1],n[2]-r[2])}const pw=new Float64Array(16);function Fp(r){const n=Bm(r),i=Y3(pw,[n,n,n]);return Mp(i,i,((c=[])[0]=-(h=r.min)[0],c[1]=-h[1],c[2]=-h[2],c));var c,h}function q_(r){const n=(c=r.min,(i=pw)[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=c[0],i[13]=c[1],i[14]=c[2],i[15]=1,i);var i,c;const h=1/Bm(r);return Bc(n,n,[h,h,h])}function fw(r,n,i,c,h){const m=function(S){const T=_n/(2*Math.PI);return S/(2*Math.PI)/T}(i),_=[r,n,-i/(2*Math.PI)],v=zs(new Float64Array(16));return Mp(v,v,_),Bc(v,v,[m,m,m]),B_(v,v,Fe(-h)),Rm(v,v,Fe(-c)),v}function ld(r){return ke(W_,cw,r)}function mw(r,n){const i=ad(n.lat,n.lng),c=function(U){const X=ad(U._center.lat,U._center.lng);let re=N_([],od(0,1,0),X);const fe=K3([],-U.angle,X);re=qr(re,re,fe),K3(fe,-U._pitch,re);const Ee=Vi([],X);return Ao(Ee,Ee,Lm(U.cameraToCenterDistance/U.pixelsPerMeter)),qr(Ee,Ee,fe),Oa([],X,Ee)}(r);return _=(h=$_([],c,i))[0],v=h[1],S=h[2],T=(m=i)[0],P=m[1],A=m[2],F=(z=Math.sqrt(_*_+v*v+S*S)*Math.sqrt(T*T+P*P+A*A))&&es(h,m)/z,Math.acos(Math.min(Math.max(F,-1),1));var h,m,_,v,S,T,P,A,z,F}function Z_(r,n){return mw(r,n)>Math.PI/2*1.01}const gw=Fe(85),GE=Math.cos(gw),HE=Math.sin(gw),$p=63710088e-1,yw=2*Math.PI*$p;class El{constructor(n,i){if(isNaN(n)||isNaN(i))throw new Error(`Invalid LngLat object: (${n}, ${i})`);if(this.lng=+n,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new El(Ne(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const i=Math.PI/180,c=this.lat*i,h=n.lat*i,m=Math.sin(c)*Math.sin(h)+Math.cos(c)*Math.cos(h)*Math.cos((n.lng-this.lng)*i);return $p*Math.acos(Math.min(m,1))}toBounds(n=0){const i=360*n/40075017,c=i/Math.cos(Math.PI/180*this.lat);return new Cl(new El(this.lng-c,this.lat-i),new El(this.lng+c,this.lat+i))}toEcef(n){const i=Lm(n);return ad(this.lat,this.lng,Js+i)}static convert(n){if(n instanceof El)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new El(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new El(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var hr=El;function X_(r){return yw*Math.cos(r*Math.PI/180)}function ea(r){return(180+r)/360}function ta(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Ls(r,n){return r/X_(n)}function Do(r){return 360*r-180}function Ii(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function _w(r,n){return r*X_(Ii(n))}const Ai=85.051129;function xw(r){return 1/Math.cos(r*Math.PI/180)}class cd{constructor(n,i,c=0){this.x=+n,this.y=+i,this.z=+c}static fromLngLat(n,i=0){const c=hr.convert(n);return new cd(ea(c.lng),ta(c.lat),Ls(i,c.lat))}toLngLat(){return new hr(Do(this.x),Ii(this.y))}toAltitude(){return _w(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/yw*xw(Ii(this.y))}}function Y_(r,n,i,c,h,m,_,v,S){const T=(n+c)/2,P=(i+h)/2,A=new le(T,P);v(A),function(z,F,U,X,re,fe){const Ee=U-re,me=X-fe;return Math.abs((X-F)*Ee-(U-z)*me)/Math.hypot(Ee,me)}(A.x,A.y,m.x,m.y,_.x,_.y)>=S?(Y_(r,n,i,T,P,m,A,v,S),Y_(r,T,P,c,h,A,_,v,S)):r.push(_)}function vw(r,n,i){let c=r[0],h=c.x,m=c.y;n(c);const _=[c];for(let v=1;v<r.length;v++){const S=r[v],{x:T,y:P}=S;n(S),Y_(_,h,m,T,P,c,S,n,i),h=T,m=P,c=S}return _}function K_(r,n,i,c){if(c(n,i)){const h=n.add(i)._mult(.5);K_(r,n,h,c),K_(r,h,i,c)}else r.push(i)}function qE(r,n){let i=r[0];const c=[i];for(let h=1;h<r.length;h++){const m=r[h];K_(c,i,m,n),i=m}return c}const J_=Math.pow(2,14)-1,bw=-J_-1;function ZE(r,n){const i=Math.round(r.x*n),c=Math.round(r.y*n);return r.x=Se(i,bw,J_),r.y=Se(c,bw,J_),(i<r.x||i>r.x+1||c<r.y||c>r.y+1)&&He("Geometry exceeds allowed extent, reduce your vector tile buffer size"),r}function Ba(r,n,i){const c=r.loadGeometry(),h=r.extent,m=_n/h;if(n&&i&&i.projection.isReprojectedInTileSpace){const _=1<<n.z,{scale:v,x:S,y:T,projection:P}=i,A=z=>{const F=Do((n.x+z.x/h)/_),U=Ii((n.y+z.y/h)/_),X=P.project(F,U);z.x=(X.x*v-S)*h,z.y=(X.y*v-T)*h};for(let z=0;z<c.length;z++)if(r.type!==1)c[z]=vw(c[z],A,1);else{const F=[];for(const U of c[z])U.x<0||U.x>=h||U.y<0||U.y>=h||(A(U),F.push(U));c[z]=F}}for(const _ of c)for(const v of _)ZE(v,m);return c}function jc(r,n){return{type:r.type,id:r.id,properties:r.properties,geometry:n?Ba(r):[]}}function Fm(r,n,i,c,h){r.emplaceBack(2*n+(c+1)/2,2*i+(h+1)/2)}function $m(r,n,i){r.emplaceBack(n.x,n.y,n.z,i[0]*16384,i[1]*16384,i[2]*16384)}class Q_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(i=>i.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new kt,this.indexArray=new ln,this.segments=new Jr,this.programConfigurations=new Lc(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(n,i,c,h){const m=this.layers[0],_=[];let v=null;m.type==="circle"&&(v=m.layout.get("circle-sort-key"));for(const{feature:T,id:P,index:A,sourceLayerIndex:z}of n){const F=this.layers[0]._featureFilter.needGeometry,U=jc(T,F);if(!this.layers[0]._featureFilter.filter(new I(this.zoom),U,c))continue;const X=v?v.evaluate(U,{},c):void 0,re={id:P,properties:T.properties,type:T.type,sourceLayerIndex:z,index:A,geometry:F?U.geometry:Ba(T,c,h),patterns:{},sortKey:X};_.push(re)}v&&_.sort((T,P)=>T.sortKey-P.sortKey);let S=null;h.projection.name==="globe"&&(this.globeExtVertexArray=new It,S=h.projection);for(const T of _){const{geometry:P,index:A,sourceLayerIndex:z}=T,F=n[A].feature;this.addFeature(T,P,A,i.availableImages,c,S),i.featureIndex.insert(F,P,A,z,this.index)}}update(n,i,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,i,this.stateDependentLayers,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,RE.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,LE.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,i,c,h,m,_){for(const v of i)for(const S of v){const T=S.x,P=S.y;if(T<0||T>=_n||P<0||P>=_n)continue;if(_){const F=_.projectTilePoint(T,P,m),U=_.upVector(m,T,P),X=this.globeExtVertexArray;$m(X,F,U),$m(X,F,U),$m(X,F,U),$m(X,F,U)}const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),z=A.vertexLength;Fm(this.layoutVertexArray,T,P,-1,-1),Fm(this.layoutVertexArray,T,P,1,-1),Fm(this.layoutVertexArray,T,P,1,1),Fm(this.layoutVertexArray,T,P,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+2,z+3),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,{},h,m)}}function ww(r,n){for(let i=0;i<r.length;i++)if(Uc(n,r[i]))return!0;for(let i=0;i<n.length;i++)if(Uc(r,n[i]))return!0;return!!e2(r,n)}function XE(r,n,i){return!!Uc(r,n)||!!t2(n,r,i)}function Sw(r,n){if(r.length===1)return Cw(n,r[0]);for(let i=0;i<n.length;i++){const c=n[i];for(let h=0;h<c.length;h++)if(Uc(r,c[h]))return!0}for(let i=0;i<r.length;i++)if(Cw(n,r[i]))return!0;for(let i=0;i<n.length;i++)if(e2(r,n[i]))return!0;return!1}function YE(r,n,i){if(r.length>1){if(e2(r,n))return!0;for(let c=0;c<n.length;c++)if(t2(n[c],r,i))return!0}for(let c=0;c<r.length;c++)if(t2(r[c],n,i))return!0;return!1}function e2(r,n){if(r.length===0||n.length===0)return!1;for(let i=0;i<r.length-1;i++){const c=r[i],h=r[i+1];for(let m=0;m<n.length-1;m++)if(KE(c,h,n[m],n[m+1]))return!0}return!1}function KE(r,n,i,c){return jt(r,i,c)!==jt(n,i,c)&&jt(r,n,i)!==jt(r,n,c)}function t2(r,n,i){const c=i*i;if(n.length===1)return r.distSqr(n[0])<c;for(let h=1;h<n.length;h++)if(Tw(r,n[h-1],n[h])<c)return!0;return!1}function Tw(r,n,i){const c=n.distSqr(i);if(c===0)return r.distSqr(n);const h=((r.x-n.x)*(i.x-n.x)+(r.y-n.y)*(i.y-n.y))/c;return r.distSqr(h<0?n:h>1?i:i.sub(n)._mult(h)._add(n))}function Cw(r,n){let i,c,h,m=!1;for(let _=0;_<r.length;_++){i=r[_];for(let v=0,S=i.length-1;v<i.length;S=v++)c=i[v],h=i[S],c.y>n.y!=h.y>n.y&&n.x<(h.x-c.x)*(n.y-c.y)/(h.y-c.y)+c.x&&(m=!m)}return m}function Uc(r,n){let i=!1;for(let c=0,h=r.length-1;c<r.length;h=c++){const m=r[c],_=r[h];m.y>n.y!=_.y>n.y&&n.x<(_.x-m.x)*(n.y-m.y)/(_.y-m.y)+m.x&&(i=!i)}return i}function Ew(r,n,i,c,h){for(const _ of r)if(n<=_.x&&i<=_.y&&c>=_.x&&h>=_.y)return!0;const m=[new le(n,i),new le(n,h),new le(c,h),new le(c,i)];if(r.length>2){for(const _ of m)if(Uc(r,_))return!0}for(let _=0;_<r.length-1;_++)if(JE(r[_],r[_+1],m))return!0;return!1}function JE(r,n,i){const c=i[0],h=i[2];if(r.x<c.x&&n.x<c.x||r.x>h.x&&n.x>h.x||r.y<c.y&&n.y<c.y||r.y>h.y&&n.y>h.y)return!1;const m=jt(r,n,i[0]);return m!==jt(r,n,i[1])||m!==jt(r,n,i[2])||m!==jt(r,n,i[3])}function ud(r,n,i){const c=n.paint.get(r).value;return c.kind==="constant"?c.value:i.programConfigurations.get(n.id).getMaxValue(r)}function Nm(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function kw(r,n,i,c,h){if(!n[0]&&!n[1])return r;const m=le.convert(n)._mult(h);i==="viewport"&&m._rotate(-c);const _=[];for(let v=0;v<r.length;v++)_.push(r[v].sub(m));return _}function Pw(r,n,i,c){const h=le.convert(r)._mult(c);return n==="viewport"&&h._rotate(-i),h}Qt(Q_,"CircleBucket",{omit:["layers"]});const QE=new ve({"circle-sort-key":new se(ct.layout_circle["circle-sort-key"])});var ek={paint:new ve({"circle-radius":new se(ct.paint_circle["circle-radius"]),"circle-color":new se(ct.paint_circle["circle-color"]),"circle-blur":new se(ct.paint_circle["circle-blur"]),"circle-opacity":new se(ct.paint_circle["circle-opacity"]),"circle-translate":new Z(ct.paint_circle["circle-translate"]),"circle-translate-anchor":new Z(ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Z(ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Z(ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new se(ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new se(ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new se(ct.paint_circle["circle-stroke-opacity"])}),layout:QE};function Mw(r,n,i,c,h,m,_,v,S){if(m&&r.queryGeometry.isAboveHorizon)return!1;m&&(S*=r.pixelToTileUnitsFactor);const T=r.tileID.canonical,P=i.projection.upVectorScale(T,i.center.lat,i.worldSize).metersToTile;for(const A of n)for(const z of A){const F=z.add(v),U=h&&i.elevation?i.elevation.exaggeration()*h.getElevationAt(F.x,F.y,!0):0,X=i.projection.projectTilePoint(F.x,F.y,T);if(U>0){const me=i.projection.upVector(T,F.x,F.y);X.x+=me[0]*P*U,X.y+=me[1]*P*U,X.z+=me[2]*P*U}const re=m?F:tk(X.x,X.y,X.z,c),fe=m?r.tilespaceRays.map(me=>rk(me,U)):r.queryGeometry.screenGeometry,Ee=Fc([],[X.x,X.y,X.z,1],c);if(!_&&m?S*=Ee[3]/i.cameraToCenterDistance:_&&!m&&(S*=i.cameraToCenterDistance/Ee[3]),m){const me=Ii((z.y/_n+T.y)/(1<<T.z));S/=i.projection.pixelsPerMeter(me,1)/Ls(1,me)}if(XE(fe,re,S))return!0}return!1}function tk(r,n,i,c){const h=Fc([],[r,n,i,1],c);return new le(h[0]/h[3],h[1]/h[3])}const Iw=od(0,0,0),nk=od(0,0,1);function rk(r,n){const i=F_();return Iw[2]=n,r.intersectsPlane(Iw,nk,i),new le(i[0],i[1])}class Aw extends Q_{}function Dw(r,{width:n,height:i},c,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==n*i*c)throw new RangeError("mismatched image size")}else h=new Uint8Array(n*i*c);return r.width=n,r.height=i,r.data=h,r}function zw(r,n,i){const{width:c,height:h}=n;c===r.width&&h===r.height||(n2(r,n,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,c),height:Math.min(r.height,h)},i),r.width=c,r.height=h,r.data=n.data)}function n2(r,n,i,c,h,m){if(h.width===0||h.height===0)return n;if(h.width>r.width||h.height>r.height||i.x>r.width-h.width||i.y>r.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>n.width||h.height>n.height||c.x>n.width-h.width||c.y>n.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const _=r.data,v=n.data;for(let S=0;S<h.height;S++){const T=((i.y+S)*r.width+i.x)*m,P=((c.y+S)*n.width+c.x)*m;for(let A=0;A<h.width*m;A++)v[P+A]=_[T+A]}return n}Qt(Aw,"HeatmapBucket",{omit:["layers"]});class Fa{constructor(n,i){Dw(this,n,1,i)}resize(n){zw(this,new Fa(n),1)}clone(){return new Fa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,i,c,h,m){n2(n,i,c,h,m,1)}}class fo{constructor(n,i){Dw(this,n,4,i)}resize(n){zw(this,new fo(n),4)}replace(n,i){i?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new fo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,i,c,h,m){n2(n,i,c,h,m,4)}}Qt(Fa,"AlphaImage"),Qt(fo,"RGBAImage");var ik={paint:new ve({"heatmap-radius":new se(ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new se(ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Z(ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xe(ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Z(ct.paint_heatmap["heatmap-opacity"])})};function r2(r){const n={},i=r.resolution||256,c=r.clips?r.clips.length:1,h=r.image||new fo({width:i,height:c}),m=(_,v,S)=>{n[r.evaluationKey]=S;const T=r.expression.evaluate(n);h.data[_+v+0]=Math.floor(255*T.r/T.a),h.data[_+v+1]=Math.floor(255*T.g/T.a),h.data[_+v+2]=Math.floor(255*T.b/T.a),h.data[_+v+3]=Math.floor(255*T.a)};if(r.clips)for(let _=0,v=0;_<c;++_,v+=4*i)for(let S=0,T=0;S<i;S++,T+=4){const P=S/(i-1),{start:A,end:z}=r.clips[_];m(v,T,A*(1-P)+z*P)}else for(let _=0,v=0;_<i;_++,v+=4)m(0,v,_/(i-1));return h}var ok={paint:new ve({"hillshade-illumination-direction":new Z(ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Z(ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Z(ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Z(ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Z(ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Z(ct.paint_hillshade["hillshade-accent-color"])})};const sk=je([{name:"a_pos",components:2,type:"Int16"}],4),{members:ak}=sk;var i2={exports:{}};function jm(r,n,i){i=i||2;var c,h,m,_,v,S,T,P=n&&n.length,A=P?n[0]*i:r.length,z=Rw(r,0,A,i,!0),F=[];if(!z||z.next===z.prev)return F;if(P&&(z=function(X,re,fe,Ee){var me,Te,Ie,Pe=[];for(me=0,Te=re.length;me<Te;me++)(Ie=Rw(X,re[me]*Ee,me<Te-1?re[me+1]*Ee:X.length,Ee,!1))===Ie.next&&(Ie.steiner=!0),Pe.push(mk(Ie));for(Pe.sort(hk),me=0;me<Pe.length;me++)fe=pk(Pe[me],fe);return fe}(r,n,z,i)),r.length>80*i){c=m=r[0],h=_=r[1];for(var U=i;U<A;U+=i)(v=r[U])<c&&(c=v),(S=r[U+1])<h&&(h=S),v>m&&(m=v),S>_&&(_=S);T=(T=Math.max(m-c,_-h))!==0?32767/T:0}return Np(z,F,i,c,h,T,0),F}function Rw(r,n,i,c,h){var m,_;if(h===a2(r,n,i,c)>0)for(m=n;m<i;m+=c)_=Bw(m,r[m],r[m+1],_);else for(m=i-c;m>=n;m-=c)_=Bw(m,r[m],r[m+1],_);return _&&Um(_,_.next)&&(Up(_),_=_.next),_}function Vc(r,n){if(!r)return r;n||(n=r);var i,c=r;do if(i=!1,c.steiner||!Um(c,c.next)&&Qr(c.prev,c,c.next)!==0)c=c.next;else{if(Up(c),(c=n=c.prev)===c.next)break;i=!0}while(i||c!==n);return n}function Np(r,n,i,c,h,m,_){if(r){!_&&m&&function(P,A,z,F){var U=P;do U.z===0&&(U.z=o2(U.x,U.y,A,z,F)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==P);U.prevZ.nextZ=null,U.prevZ=null,function(X){var re,fe,Ee,me,Te,Ie,Pe,Ke,Ze=1;do{for(fe=X,X=null,Te=null,Ie=0;fe;){for(Ie++,Ee=fe,Pe=0,re=0;re<Ze&&(Pe++,Ee=Ee.nextZ);re++);for(Ke=Ze;Pe>0||Ke>0&&Ee;)Pe!==0&&(Ke===0||!Ee||fe.z<=Ee.z)?(me=fe,fe=fe.nextZ,Pe--):(me=Ee,Ee=Ee.nextZ,Ke--),Te?Te.nextZ=me:X=me,me.prevZ=Te,Te=me;fe=Ee}Te.nextZ=null,Ze*=2}while(Ie>1)}(U)}(r,c,h,m);for(var v,S,T=r;r.prev!==r.next;)if(v=r.prev,S=r.next,m?ck(r,c,h,m):lk(r))n.push(v.i/i|0),n.push(r.i/i|0),n.push(S.i/i|0),Up(r),r=S.next,T=S.next;else if((r=S)===T){_?_===1?Np(r=uk(Vc(r),n,i),n,i,c,h,m,2):_===2&&dk(r,n,i,c,h,m):Np(Vc(r),n,i,c,h,m,1);break}}}function lk(r){var n=r.prev,i=r,c=r.next;if(Qr(n,i,c)>=0)return!1;for(var h=n.x,m=i.x,_=c.x,v=n.y,S=i.y,T=c.y,P=h<m?h<_?h:_:m<_?m:_,A=v<S?v<T?v:T:S<T?S:T,z=h>m?h>_?h:_:m>_?m:_,F=v>S?v>T?v:T:S>T?S:T,U=c.next;U!==n;){if(U.x>=P&&U.x<=z&&U.y>=A&&U.y<=F&&dd(h,v,m,S,_,T,U.x,U.y)&&Qr(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function ck(r,n,i,c){var h=r.prev,m=r,_=r.next;if(Qr(h,m,_)>=0)return!1;for(var v=h.x,S=m.x,T=_.x,P=h.y,A=m.y,z=_.y,F=v<S?v<T?v:T:S<T?S:T,U=P<A?P<z?P:z:A<z?A:z,X=v>S?v>T?v:T:S>T?S:T,re=P>A?P>z?P:z:A>z?A:z,fe=o2(F,U,n,i,c),Ee=o2(X,re,n,i,c),me=r.prevZ,Te=r.nextZ;me&&me.z>=fe&&Te&&Te.z<=Ee;){if(me.x>=F&&me.x<=X&&me.y>=U&&me.y<=re&&me!==h&&me!==_&&dd(v,P,S,A,T,z,me.x,me.y)&&Qr(me.prev,me,me.next)>=0||(me=me.prevZ,Te.x>=F&&Te.x<=X&&Te.y>=U&&Te.y<=re&&Te!==h&&Te!==_&&dd(v,P,S,A,T,z,Te.x,Te.y)&&Qr(Te.prev,Te,Te.next)>=0))return!1;Te=Te.nextZ}for(;me&&me.z>=fe;){if(me.x>=F&&me.x<=X&&me.y>=U&&me.y<=re&&me!==h&&me!==_&&dd(v,P,S,A,T,z,me.x,me.y)&&Qr(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;Te&&Te.z<=Ee;){if(Te.x>=F&&Te.x<=X&&Te.y>=U&&Te.y<=re&&Te!==h&&Te!==_&&dd(v,P,S,A,T,z,Te.x,Te.y)&&Qr(Te.prev,Te,Te.next)>=0)return!1;Te=Te.nextZ}return!0}function uk(r,n,i){var c=r;do{var h=c.prev,m=c.next.next;!Um(h,m)&&Lw(h,c,c.next,m)&&jp(h,m)&&jp(m,h)&&(n.push(h.i/i|0),n.push(c.i/i|0),n.push(m.i/i|0),Up(c),Up(c.next),c=r=m),c=c.next}while(c!==r);return Vc(c)}function dk(r,n,i,c,h,m){var _=r;do{for(var v=_.next.next;v!==_.prev;){if(_.i!==v.i&&gk(_,v)){var S=Ow(_,v);return _=Vc(_,_.next),S=Vc(S,S.next),Np(_,n,i,c,h,m,0),void Np(S,n,i,c,h,m,0)}v=v.next}_=_.next}while(_!==r)}function hk(r,n){return r.x-n.x}function pk(r,n){var i=function(h,m){var _,v=m,S=h.x,T=h.y,P=-1/0;do{if(T<=v.y&&T>=v.next.y&&v.next.y!==v.y){var A=v.x+(T-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(A<=S&&A>P&&(P=A,_=v.x<v.next.x?v:v.next,A===S))return _}v=v.next}while(v!==m);if(!_)return null;var z,F=_,U=_.x,X=_.y,re=1/0;v=_;do S>=v.x&&v.x>=U&&S!==v.x&&dd(T<X?S:P,T,U,X,T<X?P:S,T,v.x,v.y)&&(z=Math.abs(T-v.y)/(S-v.x),jp(v,h)&&(z<re||z===re&&(v.x>_.x||v.x===_.x&&fk(_,v)))&&(_=v,re=z)),v=v.next;while(v!==F);return _}(r,n);if(!i)return n;var c=Ow(i,r);return Vc(c,c.next),Vc(i,i.next)}function fk(r,n){return Qr(r.prev,r,n.prev)<0&&Qr(n.next,r,r.next)<0}function o2(r,n,i,c,h){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-i)*h|0)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-c)*h|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function mk(r){var n=r,i=r;do(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next;while(n!==r);return i}function dd(r,n,i,c,h,m,_,v){return(h-_)*(n-v)>=(r-_)*(m-v)&&(r-_)*(c-v)>=(i-_)*(n-v)&&(i-_)*(m-v)>=(h-_)*(c-v)}function gk(r,n){return r.next.i!==n.i&&r.prev.i!==n.i&&!function(i,c){var h=i;do{if(h.i!==i.i&&h.next.i!==i.i&&h.i!==c.i&&h.next.i!==c.i&&Lw(h,h.next,i,c))return!0;h=h.next}while(h!==i);return!1}(r,n)&&(jp(r,n)&&jp(n,r)&&function(i,c){var h=i,m=!1,_=(i.x+c.x)/2,v=(i.y+c.y)/2;do h.y>v!=h.next.y>v&&h.next.y!==h.y&&_<(h.next.x-h.x)*(v-h.y)/(h.next.y-h.y)+h.x&&(m=!m),h=h.next;while(h!==i);return m}(r,n)&&(Qr(r.prev,r,n.prev)||Qr(r,n.prev,n))||Um(r,n)&&Qr(r.prev,r,r.next)>0&&Qr(n.prev,n,n.next)>0)}function Qr(r,n,i){return(n.y-r.y)*(i.x-n.x)-(n.x-r.x)*(i.y-n.y)}function Um(r,n){return r.x===n.x&&r.y===n.y}function Lw(r,n,i,c){var h=Wm(Qr(r,n,i)),m=Wm(Qr(r,n,c)),_=Wm(Qr(i,c,r)),v=Wm(Qr(i,c,n));return h!==m&&_!==v||!(h!==0||!Vm(r,i,n))||!(m!==0||!Vm(r,c,n))||!(_!==0||!Vm(i,r,c))||!(v!==0||!Vm(i,n,c))}function Vm(r,n,i){return n.x<=Math.max(r.x,i.x)&&n.x>=Math.min(r.x,i.x)&&n.y<=Math.max(r.y,i.y)&&n.y>=Math.min(r.y,i.y)}function Wm(r){return r>0?1:r<0?-1:0}function jp(r,n){return Qr(r.prev,r,r.next)<0?Qr(r,n,r.next)>=0&&Qr(r,r.prev,n)>=0:Qr(r,n,r.prev)<0||Qr(r,r.next,n)<0}function Ow(r,n){var i=new s2(r.i,r.x,r.y),c=new s2(n.i,n.x,n.y),h=r.next,m=n.prev;return r.next=n,n.prev=r,i.next=h,h.prev=i,c.next=i,i.prev=c,m.next=c,c.prev=m,c}function Bw(r,n,i,c){var h=new s2(r,n,i);return c?(h.next=c.next,h.prev=c,c.next.prev=h,c.next=h):(h.prev=h,h.next=h),h}function Up(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function s2(r,n,i){this.i=r,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function a2(r,n,i,c){for(var h=0,m=n,_=i-c;m<i;m+=c)h+=(r[_]-r[m])*(r[m+1]+r[_+1]),_=m;return h}i2.exports=jm,i2.exports.default=jm,jm.deviation=function(r,n,i,c){var h=n&&n.length,m=Math.abs(a2(r,0,h?n[0]*i:r.length,i));if(h)for(var _=0,v=n.length;_<v;_++)m-=Math.abs(a2(r,n[_]*i,_<v-1?n[_+1]*i:r.length,i));var S=0;for(_=0;_<c.length;_+=3){var T=c[_]*i,P=c[_+1]*i,A=c[_+2]*i;S+=Math.abs((r[T]-r[A])*(r[P+1]-r[T+1])-(r[T]-r[P])*(r[A+1]-r[T+1]))}return m===0&&S===0?0:Math.abs((S-m)/m)},jm.flatten=function(r){for(var n=r[0][0].length,i={vertices:[],holes:[],dimensions:n},c=0,h=0;h<r.length;h++){for(var m=0;m<r[h].length;m++)for(var _=0;_<n;_++)i.vertices.push(r[h][m][_]);h>0&&i.holes.push(c+=r[h-1].length)}return i};var l2=G(i2.exports);function yk(r,n,i,c,h){Fw(r,n,i||0,c||r.length-1,h||_k)}function Fw(r,n,i,c,h){for(;c>i;){if(c-i>600){var m=c-i+1,_=n-i+1,v=Math.log(m),S=.5*Math.exp(2*v/3),T=.5*Math.sqrt(v*S*(m-S)/m)*(_-m/2<0?-1:1);Fw(r,n,Math.max(i,Math.floor(n-_*S/m+T)),Math.min(c,Math.floor(n+(m-_)*S/m+T)),h)}var P=r[n],A=i,z=c;for(Vp(r,i,n),h(r[c],P)>0&&Vp(r,i,c);A<z;){for(Vp(r,A,z),A++,z--;h(r[A],P)<0;)A++;for(;h(r[z],P)>0;)z--}h(r[i],P)===0?Vp(r,i,z):Vp(r,++z,c),z<=n&&(i=z+1),n<=z&&(c=z-1)}}function Vp(r,n,i){var c=r[n];r[n]=r[i],r[i]=c}function _k(r,n){return r<n?-1:r>n?1:0}function c2(r,n){const i=r.length;if(i<=1)return[r];const c=[];let h,m;for(let _=0;_<i;_++){const v=lt(r[_]);v!==0&&(r[_].area=Math.abs(v),m===void 0&&(m=v<0),m===v<0?(h&&c.push(h),h=[r[_]]):h.push(r[_]))}if(h&&c.push(h),n>1)for(let _=0;_<c.length;_++)c[_].length<=n||(yk(c[_],n,1,c[_].length-1,xk),c[_]=c[_].slice(0,n));return c}function xk(r,n){return n.area-r.area}function u2(r,n,i){const c=i.patternDependencies;let h=!1;for(const m of n){const _=m.paint.get(`${r}-pattern`);_.isConstant()||(h=!0);const v=_.constantOr(null);v&&(h=!0,c[v]=!0)}return h}function d2(r,n,i,c,h){const m=h.patternDependencies;for(const _ of n){const v=_.paint.get(`${r}-pattern`).value;if(v.kind!=="constant"){let S=v.evaluate({zoom:c},i,{},h.availableImages);S=S&&S.name?S.name:S,m[S]=!0,i.patterns[_.id]=S}}return i}class Gm{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(i=>i.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new kt,this.indexArray=new ln,this.indexArray2=new mi,this.programConfigurations=new Lc(n.layers,n.zoom),this.segments=new Jr,this.segments2=new Jr,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.projection=n.projection}populate(n,i,c,h){this.hasPattern=u2("fill",this.layers,i);const m=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:v,id:S,index:T,sourceLayerIndex:P}of n){const A=this.layers[0]._featureFilter.needGeometry,z=jc(v,A);if(!this.layers[0]._featureFilter.filter(new I(this.zoom),z,c))continue;const F=m?m.evaluate(z,{},c,i.availableImages):void 0,U={id:S,properties:v.properties,type:v.type,sourceLayerIndex:P,index:T,geometry:A?z.geometry:Ba(v,c,h),patterns:{},sortKey:F};_.push(U)}m&&_.sort((v,S)=>v.sortKey-S.sortKey);for(const v of _){const{geometry:S,index:T,sourceLayerIndex:P}=v;if(this.hasPattern){const A=d2("fill",this.layers,v,this.zoom,i);this.patternFeatures.push(A)}else this.addFeature(v,S,T,c,{},i.availableImages);i.featureIndex.insert(n[T].feature,S,T,P,this.index)}}update(n,i,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,i,this.stateDependentLayers,c,h)}addFeatures(n,i,c,h,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,i,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ak),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,i,c,h,m,_=[]){for(const v of c2(i,500)){let S=0;for(const U of v)S+=U.length;const T=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),P=T.vertexLength,A=[],z=[];for(const U of v){if(U.length===0)continue;U!==v[0]&&z.push(A.length/2);const X=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),re=X.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(re+U.length-1,re),A.push(U[0].x),A.push(U[0].y);for(let fe=1;fe<U.length;fe++)this.layoutVertexArray.emplaceBack(U[fe].x,U[fe].y),this.indexArray2.emplaceBack(re+fe-1,re+fe),A.push(U[fe].x),A.push(U[fe].y);X.vertexLength+=U.length,X.primitiveLength+=U.length}const F=l2(A,z);for(let U=0;U<F.length;U+=3)this.indexArray.emplaceBack(P+F[U],P+F[U+1],P+F[U+2]);T.vertexLength+=S,T.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,_,h)}}Qt(Gm,"FillBucket",{omit:["layers","patternFeatures"]});const vk=new ve({"fill-sort-key":new se(ct.layout_fill["fill-sort-key"])});var bk={paint:new ve({"fill-antialias":new Z(ct.paint_fill["fill-antialias"]),"fill-opacity":new se(ct.paint_fill["fill-opacity"]),"fill-color":new se(ct.paint_fill["fill-color"]),"fill-outline-color":new se(ct.paint_fill["fill-outline-color"]),"fill-translate":new Z(ct.paint_fill["fill-translate"]),"fill-translate-anchor":new Z(ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new se(ct.paint_fill["fill-pattern"])}),layout:vk};const wk=je([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Sk=je([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Tk=je([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Ck}=wk;var Hm={},Ek=ie,$w=hd;function hd(r,n,i,c,h){this.properties={},this.extent=i,this.type=0,this._pbf=r,this._geometry=-1,this._keys=c,this._values=h,r.readFields(kk,this,n)}function kk(r,n,i){r==1?n.id=i.readVarint():r==2?function(c,h){for(var m=c.readVarint()+c.pos;c.pos<m;){var _=h._keys[c.readVarint()],v=h._values[c.readVarint()];h.properties[_]=v}}(i,n):r==3?n.type=i.readVarint():r==4&&(n._geometry=i.pos)}function Pk(r){for(var n,i,c=0,h=0,m=r.length,_=m-1;h<m;_=h++)c+=((i=r[_]).x-(n=r[h]).x)*(n.y+i.y);return c}hd.types=["Unknown","Point","LineString","Polygon"],hd.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var n,i=r.readVarint()+r.pos,c=1,h=0,m=0,_=0,v=[];r.pos<i;){if(h<=0){var S=r.readVarint();c=7&S,h=S>>3}if(h--,c===1||c===2)m+=r.readSVarint(),_+=r.readSVarint(),c===1&&(n&&v.push(n),n=[]),n.push(new Ek(m,_));else{if(c!==7)throw new Error("unknown command "+c);n&&n.push(n[0].clone())}}return n&&v.push(n),v},hd.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var n=r.readVarint()+r.pos,i=1,c=0,h=0,m=0,_=1/0,v=-1/0,S=1/0,T=-1/0;r.pos<n;){if(c<=0){var P=r.readVarint();i=7&P,c=P>>3}if(c--,i===1||i===2)(h+=r.readSVarint())<_&&(_=h),h>v&&(v=h),(m+=r.readSVarint())<S&&(S=m),m>T&&(T=m);else if(i!==7)throw new Error("unknown command "+i)}return[_,S,v,T]},hd.prototype.toGeoJSON=function(r,n,i){var c,h,m=this.extent*Math.pow(2,i),_=this.extent*r,v=this.extent*n,S=this.loadGeometry(),T=hd.types[this.type];function P(F){for(var U=0;U<F.length;U++){var X=F[U];F[U]=[360*(X.x+_)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+v)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(c=0;c<S.length;c++)A[c]=S[c][0];P(S=A);break;case 2:for(c=0;c<S.length;c++)P(S[c]);break;case 3:for(S=function(F){var U=F.length;if(U<=1)return[F];for(var X,re,fe=[],Ee=0;Ee<U;Ee++){var me=Pk(F[Ee]);me!==0&&(re===void 0&&(re=me<0),re===me<0?(X&&fe.push(X),X=[F[Ee]]):X.push(F[Ee]))}return X&&fe.push(X),fe}(S),c=0;c<S.length;c++)for(h=0;h<S[c].length;h++)P(S[c][h])}S.length===1?S=S[0]:T="Multi"+T;var z={type:"Feature",geometry:{type:T,coordinates:S},properties:this.properties};return"id"in this&&(z.id=this.id),z};var Mk=$w,Nw=jw;function jw(r,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Ik,this,n),this.length=this._features.length}function Ik(r,n,i){r===15?n.version=i.readVarint():r===1?n.name=i.readString():r===5?n.extent=i.readVarint():r===2?n._features.push(i.pos):r===3?n._keys.push(i.readString()):r===4&&n._values.push(function(c){for(var h=null,m=c.readVarint()+c.pos;c.pos<m;){var _=c.readVarint()>>3;h=_===1?c.readString():_===2?c.readFloat():_===3?c.readDouble():_===4?c.readVarint64():_===5?c.readVarint():_===6?c.readSVarint():_===7?c.readBoolean():null}return h}(i))}jw.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var n=this._pbf.readVarint()+this._pbf.pos;return new Mk(this._pbf,n,this.extent,this._keys,this._values)};var Ak=Nw;function Dk(r,n,i){if(r===3){var c=new Ak(i,i.readVarint()+i.pos);c.length&&(n[c.name]=c)}}var h2=Hm.VectorTile=function(r,n){this.layers=r.readFields(Dk,{},n)},qm=Hm.VectorTileFeature=$w;function Zm(r,n,i,c){const h=[],m=c===0?(_,v,S,T,P,A)=>{_.push(new le(A,S+(A-v)/(T-v)*(P-S)))}:(_,v,S,T,P,A)=>{_.push(new le(v+(A-S)/(P-S)*(T-v),A))};for(const _ of r){const v=[];for(const S of _){if(S.length<=2)continue;const T=[];for(let z=0;z<S.length-1;z++){const F=S[z].x,U=S[z].y,X=S[z+1].x,re=S[z+1].y,fe=c===0?F:U,Ee=c===0?X:re;fe<n?Ee>n&&m(T,F,U,X,re,n):fe>i?Ee<i&&m(T,F,U,X,re,i):T.push(S[z]),Ee<n&&fe>=n&&m(T,F,U,X,re,n),Ee>i&&fe<=i&&m(T,F,U,X,re,i)}let P=S[S.length-1];const A=c===0?P.x:P.y;A>=n&&A<=i&&T.push(P),T.length&&(P=T[T.length-1],T[0].x===P.x&&T[0].y===P.y||T.push(T[0]),v.push(T))}v.length&&h.push(v)}return h}Hm.VectorTileLayer=Nw;const zk=qm.types,Rk=Math.pow(2,13);function Wp(r,n,i,c,h,m,_,v){r.emplaceBack((n<<1)+_,(i<<1)+m,(Math.floor(c*Rk)<<1)+h,Math.round(v))}function Gp(r,n,i){r.emplaceBack(n.x,n.y,n.z,i[0]*16384,i[1]*16384,i[2]*16384)}class Uw{constructor(){this.acc=new le(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new le(n.x,n.y),this.max=new le(n.x,n.y))}append(n,i){this.currentPolyCount.edges++,this.acc._add(n);const c=this.min,h=this.max;n.x<c.x?c.x=n.x:n.x>h.x&&(h.x=n.x),n.y<c.y?c.y=n.y:n.y>h.y&&(h.y=n.y),((n.x===0||n.x===_n)&&n.x===i.x)!=((n.y===0||n.y===_n)&&n.y===i.y)&&this.processBorderOverlap(n,i),i.x<0!=n.x<0&&this.addBorderIntersection(0,Zn(i.y,n.y,(0-i.x)/(n.x-i.x))),i.x>_n!=n.x>_n&&this.addBorderIntersection(1,Zn(i.y,n.y,(_n-i.x)/(n.x-i.x))),i.y<0!=n.y<0&&this.addBorderIntersection(2,Zn(i.x,n.x,(0-i.y)/(n.y-i.y))),i.y>_n!=n.y>_n&&this.addBorderIntersection(3,Zn(i.x,n.x,(_n-i.y)/(n.y-i.y)))}addBorderIntersection(n,i){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[n];i<c[0]&&(c[0]=i),i>c[1]&&(c[1]=i)}processBorderOverlap(n,i){if(n.x===i.x){if(n.y===i.y)return;const c=n.x===0?0:1;this.addBorderIntersection(c,i.y),this.addBorderIntersection(c,n.y)}else{const c=n.y===0?2:3;this.addBorderIntersection(c,i.x),this.addBorderIntersection(c,n.x)}}centroid(){const n=this.polyCount.reduce((i,c)=>i+c.edges,0);return n!==0?this.acc.div(n)._round():new le(0,0)}span(){return new le(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,i)=>n+ +(i[0]!==Number.MAX_VALUE),0)}}class Hp{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(i=>i.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new ft,this.centroidVertexArray=new Is,this.indexArray=new ln,this.programConfigurations=new Lc(n.layers,n.zoom),this.segments=new Jr,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.enableTerrain=n.enableTerrain}populate(n,i,c,h){this.features=[],this.hasPattern=u2("fill-extrusion",this.layers,i),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(m){const _=Math.exp(Math.PI*(1-m.y/(1<<m.z)*2));return 80150034*_/(_*_+1)/_n/(1<<m.z)}(c),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:_,index:v,sourceLayerIndex:S}of n){const T=this.layers[0]._featureFilter.needGeometry,P=jc(m,T);if(!this.layers[0]._featureFilter.filter(new I(this.zoom),P,c))continue;const A={id:_,sourceLayerIndex:S,index:v,geometry:T?P.geometry:Ba(m,c,h),properties:m.properties,type:m.type,patterns:{}},z=this.layoutVertexArray.length;this.hasPattern?this.features.push(d2("fill-extrusion",this.layers,A,this.zoom,i)):this.addFeature(A,A.geometry,v,c,{},i.availableImages,h),i.featureIndex.insert(m,A.geometry,v,S,this.index,z)}this.sortBorders()}addFeatures(n,i,c,h,m){for(const _ of this.features){const{geometry:v}=_;this.addFeature(_,v,_.index,i,c,h,m)}this.sortBorders()}update(n,i,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,i,this.stateDependentLayers,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ck),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,Tk.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Sk.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,i,c,h,m,_,v){const S=[new le(0,0),new le(_n,_n)],T=v.projection,P=T.name==="globe",A=this.enableTerrain&&!P?new Uw:null,z=zk[n.type]==="Polygon";P&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new It);const F=c2(i,500);for(let fe=F.length-1;fe>=0;fe--){const Ee=F[fe];(Ee.length===0||(U=Ee[0]).every(me=>me.x<=0)||U.every(me=>me.x>=_n)||U.every(me=>me.y<=0)||U.every(me=>me.y>=_n))&&F.splice(fe,1)}var U;let X;if(P)X=Xw(F,S,h);else{X=[];for(const fe of F)X.push({polygon:fe,bounds:S})}const re=z?this.edgeRadius:0;for(const{polygon:fe,bounds:Ee}of X){let me=0,Te=0;for(const Pe of fe)z&&!Pe[0].equals(Pe[Pe.length-1])&&Pe.push(Pe[0]),Te+=z?Pe.length-1:Pe.length;const Ie=this.segments.prepareSegment((z?5:4)*Te,this.layoutVertexArray,this.indexArray);if(z){const Pe=[],Ke=[];me=Ie.vertexLength;for(const ut of fe){let Pt,tt;ut.length&&ut!==fe[0]&&Ke.push(Pe.length/2),Pt=ut[1].sub(ut[0])._perp()._unit();for(let yt=1;yt<ut.length;yt++){const _t=ut[yt],Tt=ut[yt===ut.length-1?1:yt+1];let{x:Dt,y:st}=_t;if(re){tt=Tt.sub(_t)._perp()._unit();const Ht=Pt.add(tt)._unit(),rn=re*Math.min(4,1/(Pt.x*Ht.x+Pt.y*Ht.y));Dt+=rn*Ht.x,st+=rn*Ht.y,Pt=tt}Wp(this.layoutVertexArray,Dt,st,0,0,1,1,0),Ie.vertexLength++,Pe.push(_t.x,_t.y),P&&Gp(this.layoutVertexExtArray,T.projectTilePoint(Dt,st,h),T.upVector(h,Dt,st))}}const Ze=l2(Pe,Ke);for(let ut=0;ut<Ze.length;ut+=3)this.indexArray.emplaceBack(me+Ze[ut],me+Ze[ut+2],me+Ze[ut+1]),Ie.primitiveLength++}for(const Pe of fe){A&&Pe.length&&A.startRing(Pe[0]);let Ke,Ze,ut,Pt=Pe.length>4&&Hw(Pe[Pe.length-2],Pe[0],Pe[1]),tt=re?Lk(Pe[Pe.length-2],Pe[0],Pe[1],re):0;Ze=Pe[1].sub(Pe[0])._perp()._unit();let yt=!0;for(let _t=1,Tt=0;_t<Pe.length;_t++){let Dt=Pe[_t-1],st=Pe[_t];const Ht=Pe[_t===Pe.length-1?1:_t+1];if(A&&z&&A.currentPolyCount.top++,Gw(st,Dt,Ee)){re&&(Ze=Ht.sub(st)._perp()._unit(),yt=!yt);continue}A&&A.append(st,Dt);const rn=st.sub(Dt)._perp(),Zt=rn.x/(Math.abs(rn.x)+Math.abs(rn.y)),Dn=rn.y>0?1:0,Rt=Dt.dist(st);if(Tt+Rt>32768&&(Tt=0),re){ut=Ht.sub(st)._perp()._unit();let Rn=Ww(Dt,st,Ht,Vw(Ze,ut),re);isNaN(Rn)&&(Rn=0);const Tn=st.sub(Dt)._unit();Dt=Dt.add(Tn.mult(tt))._round(),st=st.add(Tn.mult(-Rn))._round(),tt=Rn,Ze=ut}const pn=Ie.vertexLength,zn=Pe.length>4&&Hw(Dt,st,Ht);let Yn=qw(Tt,Pt,yt);if(Wp(this.layoutVertexArray,Dt.x,Dt.y,Zt,Dn,0,0,Yn),Wp(this.layoutVertexArray,Dt.x,Dt.y,Zt,Dn,0,1,Yn),Tt+=Rt,Yn=qw(Tt,zn,!yt),Pt=zn,Wp(this.layoutVertexArray,st.x,st.y,Zt,Dn,0,0,Yn),Wp(this.layoutVertexArray,st.x,st.y,Zt,Dn,0,1,Yn),Ie.vertexLength+=4,this.indexArray.emplaceBack(pn+0,pn+1,pn+2),this.indexArray.emplaceBack(pn+1,pn+3,pn+2),Ie.primitiveLength+=2,re){const Rn=me+(_t===1?Pe.length-2:_t-2),Tn=_t===1?me:Rn+1;if(this.indexArray.emplaceBack(pn+1,Rn,pn+3),this.indexArray.emplaceBack(Rn,Tn,pn+3),Ie.primitiveLength+=2,Ke===void 0&&(Ke=pn),!Gw(Ht,Pe[_t],Ee)){const Tr=_t===Pe.length-1?Ke:Ie.vertexLength;this.indexArray.emplaceBack(pn+2,pn+3,Tr),this.indexArray.emplaceBack(pn+3,Tr+1,Tr),this.indexArray.emplaceBack(pn+3,Tn,Tr+1),Ie.primitiveLength+=3}yt=!yt}if(P){const Rn=this.layoutVertexExtArray,Tn=T.projectTilePoint(Dt.x,Dt.y,h),Tr=T.projectTilePoint(st.x,st.y,h),Ln=T.upVector(h,Dt.x,Dt.y),On=T.upVector(h,st.x,st.y);Gp(Rn,Tn,Ln),Gp(Rn,Tn,Ln),Gp(Rn,Tr,On),Gp(Rn,Tr,On)}}z&&(me+=Pe.length-1)}}if(A&&A.polyCount.length>0){if(A.borders){A.vertexArrayOffset=this.centroidVertexArray.length;const fe=A.borders,Ee=this.featuresOnBorder.push(A)-1;for(let me=0;me<4;me++)fe[me][0]!==Number.MAX_VALUE&&this.borders[me].push(Ee)}this.encodeCentroid(A.borders?void 0:A.centroid(),A)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,_,h)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((i,c)=>this.featuresOnBorder[i].borders[n][0]-this.featuresOnBorder[c].borders[n][0])}encodeCentroid(n,i,c=!0){let h,m;if(n)if(n.y!==0){const v=i.span()._mult(this.tileToMeter);h=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(v.x/10)),m=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(v.y/10))}else h=Math.ceil(7*(n.x+450)),m=0;else h=0,m=+c;let _=c?this.centroidVertexArray.length:i.vertexArrayOffset;for(const v of i.polyCount){c&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*v.edges+v.top);for(let S=0;S<v.top;S++)this.centroidVertexArray.emplace(_++,h,m);for(let S=0;S<2*v.edges;S++)this.centroidVertexArray.emplace(_++,0,m),this.centroidVertexArray.emplace(_++,h,m)}}}function Vw(r,n){const i=r.add(n)._unit();return r.x*i.x+r.y*i.y}function Lk(r,n,i,c){const h=n.sub(r)._perp()._unit(),m=i.sub(n)._perp()._unit();return Ww(r,n,i,Vw(h,m),c)}function Ww(r,n,i,c,h){const m=Math.sqrt(1-c*c);return Math.min(r.dist(n)/3,n.dist(i)/3,h*m/c)}function Gw(r,n,i){return r.x<i[0].x&&n.x<i[0].x||r.x>i[1].x&&n.x>i[1].x||r.y<i[0].y&&n.y<i[0].y||r.y>i[1].y&&n.y>i[1].y}function Hw(r,n,i){if(r.x<0||r.x>=_n||n.x<0||n.x>=_n||i.x<0||i.x>=_n)return!1;const c=i.sub(n),h=c.perp(),m=r.sub(n);return(c.x*m.x+c.y*m.y)/Math.sqrt((c.x*c.x+c.y*c.y)*(m.x*m.x+m.y*m.y))>-.866&&h.x*m.x+h.y*m.y<0}function qw(r,n,i){const c=n?2|r:-3&r;return i?1|c:-2&c}function Zw(){const r=Math.PI/32,n=Math.tan(r),i=$p;return i*Math.sqrt(1+2*n*n)-i}function Xw(r,n,i){const c=1<<i.z,h=Do(i.x/c),m=Do((i.x+1)/c),_=Ii(i.y/c),v=Ii((i.y+1)/c);return function(S,T,P,A,z=0,F){const U=[];if(!S.length||!P||!A)return U;const X=(Pe,Ke)=>{for(const Ze of Pe)U.push({polygon:Ze,bounds:Ke})},re=Math.ceil(Math.log2(P)),fe=Math.ceil(Math.log2(A)),Ee=re-fe,me=[];for(let Pe=0;Pe<Math.abs(Ee);Pe++)me.push(Ee>0?0:1);for(let Pe=0;Pe<Math.min(re,fe);Pe++)me.push(0),me.push(1);let Te=S;if(Te=Zm(Te,T[0].y-z,T[1].y+z,1),Te=Zm(Te,T[0].x-z,T[1].x+z,0),!Te.length)return U;const Ie=[];for(me.length?Ie.push({polygons:Te,bounds:T,depth:0}):X(Te,T);Ie.length;){const Pe=Ie.pop(),Ke=Pe.depth,Ze=me[Ke],ut=Pe.bounds[0],Pt=Pe.bounds[1],tt=Ze===0?ut.x:ut.y,yt=Ze===0?Pt.x:Pt.y,_t=F?F(Ze,tt,yt):.5*(tt+yt),Tt=Zm(Pe.polygons,tt-z,_t+z,Ze),Dt=Zm(Pe.polygons,_t-z,yt+z,Ze);if(Tt.length){const st=[ut,new le(Ze===0?_t:Pt.x,Ze===1?_t:Pt.y)];me.length>Ke+1?Ie.push({polygons:Tt,bounds:st,depth:Ke+1}):X(Tt,st)}if(Dt.length){const st=[new le(Ze===0?_t:ut.x,Ze===1?_t:ut.y),Pt];me.length>Ke+1?Ie.push({polygons:Dt,bounds:st,depth:Ke+1}):X(Dt,st)}}return U}(r,n,Math.ceil((m-h)/11.25),Math.ceil((_-v)/11.25),1,(S,T,P)=>{if(S===0)return .5*(T+P);{const A=Ii((i.y+T/_n)/c);return(ta(.5*(Ii((i.y+P/_n)/c)+A))*c-i.y)*_n}})}Qt(Hp,"FillExtrusionBucket",{omit:["layers","features"]}),Qt(Uw,"PartMetadata");const Ok=new ve({"fill-extrusion-edge-radius":new Z(ct["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Bk={paint:new ve({"fill-extrusion-opacity":new Z(ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new se(ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Z(ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Z(ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new se(ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new se(ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new se(ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Z(ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Z(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Z(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Z(ct["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Ok};function Yw(r,n,i){var c=2*Math.PI*6378137/256/Math.pow(2,i);return[r*c-2*Math.PI*6378137/2,n*c-2*Math.PI*6378137/2]}class Xm{constructor(n,i,c){this.z=n,this.x=i,this.y=c,this.key=qp(0,n,n,i,c)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,i){const c=function(m,_,v){var S=Yw(256*m,256*(_=Math.pow(2,v)-_-1),v),T=Yw(256*(m+1),256*(_+1),v);return S[0]+","+S[1]+","+T[0]+","+T[1]}(this.x,this.y,this.z),h=function(m,_,v){let S,T="";for(let P=m;P>0;P--)S=1<<P-1,T+=(_&S?1:0)+(v&S?2:0);return T}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",c)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Kw{constructor(n,i){this.wrap=n,this.canonical=i,this.key=qp(n,i.z,i.z,i.x,i.y)}}class Gi{constructor(n,i,c,h,m){this.overscaledZ=n,this.wrap=i,this.canonical=new Xm(c,+h,+m),this.key=i===0&&n===c?this.canonical.key:qp(i,n,c,h,m)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const i=this.canonical.z-n;return n>this.canonical.z?new Gi(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gi(n,this.wrap,n,this.canonical.x>>i,this.canonical.y>>i)}calculateScaledKey(n,i=!0){if(this.overscaledZ===n&&i)return this.key;if(n>this.canonical.z)return qp(this.wrap*+i,n,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-n;return qp(this.wrap*+i,n,n,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const i=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>i&&n.canonical.y===this.canonical.y>>i}children(n){if(this.overscaledZ>=n)return[new Gi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const i=this.canonical.z+1,c=2*this.canonical.x,h=2*this.canonical.y;return[new Gi(i,this.wrap,i,c,h),new Gi(i,this.wrap,i,c+1,h),new Gi(i,this.wrap,i,c,h+1),new Gi(i,this.wrap,i,c+1,h+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Gi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Gi(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Kw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function qp(r,n,i,c,h){const m=1<<Math.min(i,22);let _=m*(h%m)+c%m;return r&&i<22&&(_+=m*m*((r<0?-2*r-1:2*r)%(1<<2*(22-i)))),16*(32*_+i)+(n-i)}Qt(Xm,"CanonicalTileID"),Qt(Gi,"OverscaledTileID",{omit:["projMatrix"]});class pd extends le{constructor(n,i,c){super(n,i),this.z=c}}function Zp(r,n){return r.x*n.x+r.y*n.y}function Jw(r,n){if(r.length===1){let i=0;const c=n[i++];let h;for(;!h||c.equals(h);)if(h=n[i++],!h)return 1/0;for(;i<n.length;i++){const m=n[i],_=r[0],v=h.sub(c),S=m.sub(c),T=_.sub(c),P=Zp(v,v),A=Zp(v,S),z=Zp(S,S),F=Zp(T,v),U=Zp(T,S),X=P*z-A*A,re=(z*F-A*U)/X,fe=(P*U-A*F)/X,Ee=c.z*(1-re-fe)+h.z*re+m.z*fe;if(isFinite(Ee))return Ee}return 1/0}{let i=1/0;for(const c of n)i=Math.min(i,c.z);return i}}function Qw(r,n,i,c,h,m,_,v){const S=_*h.getElevationAt(r,n,!0,!0),T=m[0]!==0,P=T?m[1]===0?_*(m[0]/7-450):_*function(A,z,F){const U=Math.floor(z[0]/8),X=Math.floor(z[1]/8),re=10*(z[0]-8*U),fe=10*(z[1]-8*X),Ee=A.getElevationAt(U,X,!0,!0),me=A.getMeterToDEM(F),Te=Math.floor(.5*(re*me-1)),Ie=Math.floor(.5*(fe*me-1)),Pe=A.tileCoordToPixel(U,X),Ke=2*Te+1,Ze=2*Ie+1,ut=function(Dt,st,Ht,rn,Zt){return[Dt.getElevationAtPixel(st,Ht,!0),Dt.getElevationAtPixel(st+Zt,Ht,!0),Dt.getElevationAtPixel(st,Ht+Zt,!0),Dt.getElevationAtPixel(st+rn,Ht+Zt,!0)]}(A,Pe.x-Te,Pe.y-Ie,Ke,Ze),Pt=Math.abs(ut[0]-ut[1]),tt=Math.abs(ut[2]-ut[3]),yt=Math.abs(ut[0]-ut[2])+Math.abs(ut[1]-ut[3]),_t=Math.min(.25,.5*me*(Pt+tt)/Ke),Tt=Math.min(.25,.5*me*yt/Ze);return Ee+Math.max(_t*re,Tt*fe)}(h,m,v):S;return{base:S+(i===0)?-1:i,top:T?Math.max(P+c,S+i+2):S+c}}const Fk=je([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:$k}=Fk,Nk=je([{name:"a_packed",components:4,type:"Float32"}]),{members:jk}=Nk,Uk=qm.types,Vk=Math.cos(Math.PI/180*37.5);class Ym{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(i=>i.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(i=>{this.gradients[i.id]={}}),this.layoutVertexArray=new et,this.layoutVertexArray2=new Et,this.indexArray=new ln,this.programConfigurations=new Lc(n.layers,n.zoom),this.segments=new Jr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(n,i,c,h){this.hasPattern=u2("line",this.layers,i);const m=this.layers[0].layout.get("line-sort-key"),_=[];for(const{feature:P,id:A,index:z,sourceLayerIndex:F}of n){const U=this.layers[0]._featureFilter.needGeometry,X=jc(P,U);if(!this.layers[0]._featureFilter.filter(new I(this.zoom),X,c))continue;const re=m?m.evaluate(X,{},c):void 0,fe={id:A,properties:P.properties,type:P.type,sourceLayerIndex:F,index:z,geometry:U?X.geometry:Ba(P,c,h),patterns:{},sortKey:re};_.push(fe)}m&&_.sort((P,A)=>P.sortKey-A.sortKey);const{lineAtlas:v,featureIndex:S}=i,T=this.addConstantDashes(v);for(const P of _){const{geometry:A,index:z,sourceLayerIndex:F}=P;if(T&&this.addFeatureDashes(P,v),this.hasPattern){const U=d2("line",this.layers,P,this.zoom,i);this.patternFeatures.push(U)}else this.addFeature(P,A,z,c,v.positions,i.availableImages);S.insert(n[z].feature,A,z,F,this.index)}}addConstantDashes(n){let i=!1;for(const c of this.layers){const h=c.paint.get("line-dasharray").value,m=c.layout.get("line-cap").value;if(h.kind!=="constant"||m.kind!=="constant")i=!0;else{const _=m.value,v=h.value;if(!v)continue;n.addDash(v,_)}}return i}addFeatureDashes(n,i){const c=this.zoom;for(const h of this.layers){const m=h.paint.get("line-dasharray").value,_=h.layout.get("line-cap").value;if(m.kind==="constant"&&_.kind==="constant")continue;let v,S;if(m.kind==="constant"){if(v=m.value,!v)continue}else v=m.evaluate({zoom:c},n);S=_.kind==="constant"?_.value:_.evaluate({zoom:c},n),i.addDash(v,S),n.patterns[h.id]=i.getKey(v,S)}}update(n,i,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,i,this.stateDependentLayers,c,h)}addFeatures(n,i,c,h,m){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,i,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,jk)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,$k),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,i,c,h,m,_){const v=this.layers[0].layout,S=v.get("line-join").evaluate(n,{}),T=v.get("line-cap").evaluate(n,{}),P=v.get("line-miter-limit"),A=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const z of i)this.addLine(z,n,S,T,P,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,_,h)}addLine(n,i,c,h,m,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<n.length-1;fe++)this.totalDistance+=n[fe].dist(n[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const v=Uk[i.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let T=0;for(;T<S-1&&n[T].equals(n[T+1]);)T++;if(S<(v?3:2))return;c==="bevel"&&(m=1.05);const P=this.overscaling<=16?15*_n/(512*this.overscaling):0,A=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let z,F,U,X,re;this.e1=this.e2=-1,v&&(z=n[S-2],re=n[T].sub(z)._unit()._perp());for(let fe=T;fe<S;fe++){if(U=fe===S-1?v?n[T+1]:void 0:n[fe+1],U&&n[fe].equals(U))continue;re&&(X=re),z&&(F=z),z=n[fe],re=U?U.sub(z)._unit()._perp():X,X=X||re;let Ee=X.add(re);Ee.x===0&&Ee.y===0||Ee._unit();const me=X.x*re.x+X.y*re.y,Te=Ee.x*re.x+Ee.y*re.y,Ie=Te!==0?1/Te:1/0,Pe=2*Math.sqrt(2-2*Te),Ke=Te<Vk&&F&&U,Ze=X.x*re.y-X.y*re.x>0;if(Ke&&fe>T){const tt=z.dist(F);if(tt>2*P){const yt=z.sub(z.sub(F)._mult(P/tt)._round());this.updateDistance(F,yt),this.addCurrentVertex(yt,X,0,0,A),F=yt}}const ut=F&&U;let Pt=ut?c:v?"butt":h;if(ut&&Pt==="round"&&(Ie<_?Pt="miter":Ie<=2&&(Pt="fakeround")),Pt==="miter"&&Ie>m&&(Pt="bevel"),Pt==="bevel"&&(Ie>2&&(Pt="flipbevel"),Ie<m&&(Pt="miter")),F&&this.updateDistance(F,z),Pt==="miter")Ee._mult(Ie),this.addCurrentVertex(z,Ee,0,0,A);else if(Pt==="flipbevel"){if(Ie>100)Ee=re.mult(-1);else{const tt=Ie*X.add(re).mag()/X.sub(re).mag();Ee._perp()._mult(tt*(Ze?-1:1))}this.addCurrentVertex(z,Ee,0,0,A),this.addCurrentVertex(z,Ee.mult(-1),0,0,A)}else if(Pt==="bevel"||Pt==="fakeround"){const tt=-Math.sqrt(Ie*Ie-1),yt=Ze?tt:0,_t=Ze?0:tt;if(F&&this.addCurrentVertex(z,X,yt,_t,A),Pt==="fakeround"){const Tt=Math.round(180*Pe/Math.PI/20);for(let Dt=1;Dt<Tt;Dt++){let st=Dt/Tt;if(st!==.5){const rn=st-.5;st+=st*rn*(st-1)*((1.0904+me*(me*(3.55645-1.43519*me)-3.2452))*rn*rn+(.848013+me*(.215638*me-1.06021)))}const Ht=re.sub(X)._mult(st)._add(X)._unit()._mult(Ze?-1:1);this.addHalfVertex(z,Ht.x,Ht.y,!1,Ze,0,A)}}U&&this.addCurrentVertex(z,re,-yt,-_t,A)}else if(Pt==="butt")this.addCurrentVertex(z,Ee,0,0,A);else if(Pt==="square"){const tt=F?1:-1;F||this.addCurrentVertex(z,Ee,tt,tt,A),this.addCurrentVertex(z,Ee,0,0,A),F&&this.addCurrentVertex(z,Ee,tt,tt,A)}else Pt==="round"&&(F&&(this.addCurrentVertex(z,X,0,0,A),this.addCurrentVertex(z,X,1,1,A,!0)),U&&(this.addCurrentVertex(z,re,-1,-1,A,!0),this.addCurrentVertex(z,re,0,0,A)));if(Ke&&fe<S-1){const tt=z.dist(U);if(tt>2*P){const yt=z.add(U.sub(z)._mult(P/tt)._round());this.updateDistance(z,yt),this.addCurrentVertex(yt,re,0,0,A),z=yt}}}}addCurrentVertex(n,i,c,h,m,_=!1){const v=i.y*h-i.x,S=-i.y-i.x*h;this.addHalfVertex(n,i.x+i.y*c,i.y-i.x*c,_,!1,c,m),this.addHalfVertex(n,v,S,_,!0,-h,m)}addHalfVertex({x:n,y:i},c,h,m,_,v,S){this.layoutVertexArray.emplaceBack((n<<1)+(m?1:0),(i<<1)+(_?1:0),Math.round(63*c)+128,Math.round(63*h)+128,1+(v===0?0:v<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),S.primitiveLength++),_?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,i){this.distance+=n.dist(i),this.updateScaledDistance()}}Qt(Ym,"LineBucket",{omit:["layers","patternFeatures"]});const Wk=new ve({"line-cap":new se(ct.layout_line["line-cap"]),"line-join":new se(ct.layout_line["line-join"]),"line-miter-limit":new Z(ct.layout_line["line-miter-limit"]),"line-round-limit":new Z(ct.layout_line["line-round-limit"]),"line-sort-key":new se(ct.layout_line["line-sort-key"])});var e4={paint:new ve({"line-opacity":new se(ct.paint_line["line-opacity"]),"line-color":new se(ct.paint_line["line-color"]),"line-translate":new Z(ct.paint_line["line-translate"]),"line-translate-anchor":new Z(ct.paint_line["line-translate-anchor"]),"line-width":new se(ct.paint_line["line-width"]),"line-gap-width":new se(ct.paint_line["line-gap-width"]),"line-offset":new se(ct.paint_line["line-offset"]),"line-blur":new se(ct.paint_line["line-blur"]),"line-dasharray":new se(ct.paint_line["line-dasharray"]),"line-pattern":new se(ct.paint_line["line-pattern"]),"line-gradient":new xe(ct.paint_line["line-gradient"]),"line-trim-offset":new Z(ct.paint_line["line-trim-offset"])}),layout:Wk};const t4=new class extends se{possiblyEvaluate(r,n){return n=new I(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(r,n)}evaluate(r,n,i,c){return n=gt({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(r,n,i,c)}}(e4.paint.properties["line-width"].specification);function n4(r,n){return n>0?n+2*r:r}t4.useIntegerZoom=!0;const Gk=je([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hk=je([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),qk=je([{name:"a_projected_pos",components:4,type:"Float32"}],4);je([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Zk=je([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Xk=je([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);je([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const r4=je([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Yk=je([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);je([{name:"triangle",components:3,type:"Uint16"}]),je([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),je([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),je([{type:"Float32",name:"offsetX"}]),je([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var bi=24;const Os=128;function p2(r,n){const{expression:i}=n;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new I(r+1))};if(i.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:h}=i;let m=0;for(;m<c.length&&c[m]<=r;)m++;m=Math.max(0,m-1);let _=m;for(;_<c.length&&c[_]<r+1;)_++;_=Math.min(c.length-1,_);const v=c[m],S=c[_];return i.kind==="composite"?{kind:"composite",minZoom:v,maxZoom:S,interpolationType:h}:{kind:"camera",minZoom:v,maxZoom:S,minSize:i.evaluate(new I(v)),maxSize:i.evaluate(new I(S)),interpolationType:h}}}function Km(r,{uSize:n,uSizeT:i},{lowerSize:c,upperSize:h}){return r.kind==="source"?c/Os:r.kind==="composite"?Zn(c/Os,h/Os,i):n}function fd(r,n){let i=0,c=0;if(r.kind==="constant")c=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:h,minZoom:m,maxZoom:_}=r,v=h?Se(Ko.interpolationFactor(h,n,m,_),0,1):0;r.kind==="camera"?c=Zn(r.minSize,r.maxSize,v):i=v}return{uSizeT:i,uSize:c}}var Kk=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Os,evaluateSizeForFeature:Km,evaluateSizeForZoom:fd,getSizeData:p2});function Jk(r,n,i){return r.sections.forEach(c=>{c.text=function(h,m,_){const v=m.layout.get("text-transform").evaluate(_,{});return v==="uppercase"?h=h.toLocaleUpperCase():v==="lowercase"&&(h=h.toLocaleLowerCase()),k.applyArabicShaping&&(h=k.applyArabicShaping(h)),h}(c.text,n,i)}),r}const Xp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Qk(r){return r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""}function eP(r){return r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""||r===""}var i4=_r,o4=function(r,n,i,c,h){var m,_,v=8*h-c-1,S=(1<<v)-1,T=S>>1,P=-7,A=i?h-1:0,z=i?-1:1,F=r[n+A];for(A+=z,m=F&(1<<-P)-1,F>>=-P,P+=v;P>0;m=256*m+r[n+A],A+=z,P-=8);for(_=m&(1<<-P)-1,m>>=-P,P+=c;P>0;_=256*_+r[n+A],A+=z,P-=8);if(m===0)m=1-T;else{if(m===S)return _?NaN:1/0*(F?-1:1);_+=Math.pow(2,c),m-=T}return(F?-1:1)*_*Math.pow(2,m-c)},s4=function(r,n,i,c,h,m){var _,v,S,T=8*m-h-1,P=(1<<T)-1,A=P>>1,z=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=c?0:m-1,U=c?1:-1,X=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(v=isNaN(n)?1:0,_=P):(_=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-_))<1&&(_--,S*=2),(n+=_+A>=1?z/S:z*Math.pow(2,1-A))*S>=2&&(_++,S/=2),_+A>=P?(v=0,_=P):_+A>=1?(v=(n*S-1)*Math.pow(2,h),_+=A):(v=n*Math.pow(2,A-1)*Math.pow(2,h),_=0));h>=8;r[i+F]=255&v,F+=U,v/=256,h-=8);for(_=_<<h|v,T+=h;T>0;r[i+F]=255&_,F+=U,_/=256,T-=8);r[i+F-U]|=128*X};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function _r(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}_r.Varint=0,_r.Fixed64=1,_r.Bytes=2,_r.Fixed32=5;var f2=4294967296,a4=1/f2,l4=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function $a(r){return r.type===_r.Bytes?r.readVarint()+r.pos:r.pos+1}function md(r,n,i){return i?4294967296*n+(r>>>0):4294967296*(n>>>0)+(r>>>0)}function c4(r,n,i){var c=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(c);for(var h=i.pos-1;h>=r;h--)i.buf[h+c]=i.buf[h]}function tP(r,n){for(var i=0;i<r.length;i++)n.writeVarint(r[i])}function nP(r,n){for(var i=0;i<r.length;i++)n.writeSVarint(r[i])}function rP(r,n){for(var i=0;i<r.length;i++)n.writeFloat(r[i])}function iP(r,n){for(var i=0;i<r.length;i++)n.writeDouble(r[i])}function oP(r,n){for(var i=0;i<r.length;i++)n.writeBoolean(r[i])}function sP(r,n){for(var i=0;i<r.length;i++)n.writeFixed32(r[i])}function aP(r,n){for(var i=0;i<r.length;i++)n.writeSFixed32(r[i])}function lP(r,n){for(var i=0;i<r.length;i++)n.writeFixed64(r[i])}function cP(r,n){for(var i=0;i<r.length;i++)n.writeSFixed64(r[i])}function Jm(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+16777216*r[n+3]}function gd(r,n,i){r[i]=n,r[i+1]=n>>>8,r[i+2]=n>>>16,r[i+3]=n>>>24}function u4(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+(r[n+3]<<24)}_r.prototype={destroy:function(){this.buf=null},readFields:function(r,n,i){for(i=i||this.length;this.pos<i;){var c=this.readVarint(),h=c>>3,m=this.pos;this.type=7&c,r(h,n,this),this.pos===m&&this.skip(c)}return n},readMessage:function(r,n){return this.readFields(r,n,this.readVarint()+this.pos)},readFixed32:function(){var r=Jm(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=u4(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=Jm(this.buf,this.pos)+Jm(this.buf,this.pos+4)*f2;return this.pos+=8,r},readSFixed64:function(){var r=Jm(this.buf,this.pos)+u4(this.buf,this.pos+4)*f2;return this.pos+=8,r},readFloat:function(){var r=o4(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=o4(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var n,i,c=this.buf;return n=127&(i=c[this.pos++]),i<128?n:(n|=(127&(i=c[this.pos++]))<<7,i<128?n:(n|=(127&(i=c[this.pos++]))<<14,i<128?n:(n|=(127&(i=c[this.pos++]))<<21,i<128?n:function(h,m,_){var v,S,T=_.buf;if(v=(112&(S=T[_.pos++]))>>4,S<128||(v|=(127&(S=T[_.pos++]))<<3,S<128)||(v|=(127&(S=T[_.pos++]))<<10,S<128)||(v|=(127&(S=T[_.pos++]))<<17,S<128)||(v|=(127&(S=T[_.pos++]))<<24,S<128)||(v|=(1&(S=T[_.pos++]))<<31,S<128))return md(h,v,m);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(i=c[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,n=this.pos;return this.pos=r,r-n>=12&&l4?function(i,c,h){return l4.decode(i.subarray(c,h))}(this.buf,n,r):function(i,c,h){for(var m="",_=c;_<h;){var v,S,T,P=i[_],A=null,z=P>239?4:P>223?3:P>191?2:1;if(_+z>h)break;z===1?P<128&&(A=P):z===2?(192&(v=i[_+1]))==128&&(A=(31&P)<<6|63&v)<=127&&(A=null):z===3?(S=i[_+2],(192&(v=i[_+1]))==128&&(192&S)==128&&((A=(15&P)<<12|(63&v)<<6|63&S)<=2047||A>=55296&&A<=57343)&&(A=null)):z===4&&(S=i[_+2],T=i[_+3],(192&(v=i[_+1]))==128&&(192&S)==128&&(192&T)==128&&((A=(15&P)<<18|(63&v)<<12|(63&S)<<6|63&T)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,z=1):A>65535&&(A-=65536,m+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),m+=String.fromCharCode(A),_+=z}return m}(this.buf,n,r)},readBytes:function(){var r=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,r);return this.pos=r,n},readPackedVarint:function(r,n){if(this.type!==_r.Bytes)return r.push(this.readVarint(n));var i=$a(this);for(r=r||[];this.pos<i;)r.push(this.readVarint(n));return r},readPackedSVarint:function(r){if(this.type!==_r.Bytes)return r.push(this.readSVarint());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==_r.Bytes)return r.push(this.readBoolean());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==_r.Bytes)return r.push(this.readFloat());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==_r.Bytes)return r.push(this.readDouble());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==_r.Bytes)return r.push(this.readFixed32());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==_r.Bytes)return r.push(this.readSFixed32());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==_r.Bytes)return r.push(this.readFixed64());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==_r.Bytes)return r.push(this.readSFixed64());var n=$a(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed64());return r},skip:function(r){var n=7&r;if(n===_r.Varint)for(;this.buf[this.pos++]>127;);else if(n===_r.Bytes)this.pos=this.readVarint()+this.pos;else if(n===_r.Fixed32)this.pos+=4;else{if(n!==_r.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(r,n){this.writeVarint(r<<3|n)},realloc:function(r){for(var n=this.length||16;n<this.pos+r;)n*=2;if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),gd(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),gd(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),gd(this.buf,-1&r,this.pos),gd(this.buf,Math.floor(r*a4),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),gd(this.buf,-1&r,this.pos),gd(this.buf,Math.floor(r*a4),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(n,i){var c,h;if(n>=0?(c=n%4294967296|0,h=n/4294967296|0):(h=~(-n/4294967296),4294967295^(c=~(-n%4294967296))?c=c+1|0:(c=0,h=h+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(m,_,v){v.buf[v.pos++]=127&m|128,m>>>=7,v.buf[v.pos++]=127&m|128,m>>>=7,v.buf[v.pos++]=127&m|128,m>>>=7,v.buf[v.pos++]=127&m|128,v.buf[v.pos]=127&(m>>>=7)}(c,0,i),function(m,_){var v=(7&m)<<4;_.buf[_.pos++]|=v|((m>>>=3)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m|((m>>>=7)?128:0),m&&(_.buf[_.pos++]=127&m)))))}(h,i)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var n=this.pos;this.pos=function(c,h,m){for(var _,v,S=0;S<h.length;S++){if((_=h.charCodeAt(S))>55295&&_<57344){if(!v){_>56319||S+1===h.length?(c[m++]=239,c[m++]=191,c[m++]=189):v=_;continue}if(_<56320){c[m++]=239,c[m++]=191,c[m++]=189,v=_;continue}_=v-55296<<10|_-56320|65536,v=null}else v&&(c[m++]=239,c[m++]=191,c[m++]=189,v=null);_<128?c[m++]=_:(_<2048?c[m++]=_>>6|192:(_<65536?c[m++]=_>>12|224:(c[m++]=_>>18|240,c[m++]=_>>12&63|128),c[m++]=_>>6&63|128),c[m++]=63&_|128)}return m}(this.buf,r,this.pos);var i=this.pos-n;i>=128&&c4(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeFloat:function(r){this.realloc(4),s4(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),s4(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var n=r.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)this.buf[this.pos++]=r[i]},writeRawMessage:function(r,n){this.pos++;var i=this.pos;r(n,this);var c=this.pos-i;c>=128&&c4(i,c,this),this.pos=i-1,this.writeVarint(c),this.pos+=c},writeMessage:function(r,n,i){this.writeTag(r,_r.Bytes),this.writeRawMessage(n,i)},writePackedVarint:function(r,n){n.length&&this.writeMessage(r,tP,n)},writePackedSVarint:function(r,n){n.length&&this.writeMessage(r,nP,n)},writePackedBoolean:function(r,n){n.length&&this.writeMessage(r,oP,n)},writePackedFloat:function(r,n){n.length&&this.writeMessage(r,rP,n)},writePackedDouble:function(r,n){n.length&&this.writeMessage(r,iP,n)},writePackedFixed32:function(r,n){n.length&&this.writeMessage(r,sP,n)},writePackedSFixed32:function(r,n){n.length&&this.writeMessage(r,aP,n)},writePackedFixed64:function(r,n){n.length&&this.writeMessage(r,lP,n)},writePackedSFixed64:function(r,n){n.length&&this.writeMessage(r,cP,n)},writeBytesField:function(r,n){this.writeTag(r,_r.Bytes),this.writeBytes(n)},writeFixed32Field:function(r,n){this.writeTag(r,_r.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(r,n){this.writeTag(r,_r.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(r,n){this.writeTag(r,_r.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(r,n){this.writeTag(r,_r.Fixed64),this.writeSFixed64(n)},writeVarintField:function(r,n){this.writeTag(r,_r.Varint),this.writeVarint(n)},writeSVarintField:function(r,n){this.writeTag(r,_r.Varint),this.writeSVarint(n)},writeStringField:function(r,n){this.writeTag(r,_r.Bytes),this.writeString(n)},writeFloatField:function(r,n){this.writeTag(r,_r.Fixed32),this.writeFloat(n)},writeDoubleField:function(r,n){this.writeTag(r,_r.Fixed64),this.writeDouble(n)},writeBooleanField:function(r,n){this.writeVarintField(r,!!n)}};var Qm=G(i4);const m2=3;function uP(r,n,i){n.glyphs=[],r===1&&i.readMessage(dP,n)}function dP(r,n,i){if(r===3){const{id:c,bitmap:h,width:m,height:_,left:v,top:S,advance:T}=i.readMessage(hP,{});n.glyphs.push({id:c,bitmap:new Fa({width:m+2*m2,height:_+2*m2},h),metrics:{width:m,height:_,left:v,top:S,advance:T}})}else r===4?n.ascender=i.readSVarint():r===5&&(n.descender=i.readSVarint())}function hP(r,n,i){r===1?n.id=i.readVarint():r===2?n.bitmap=i.readBytes():r===3?n.width=i.readVarint():r===4?n.height=i.readVarint():r===5?n.left=i.readSVarint():r===6?n.top=i.readSVarint():r===7&&(n.advance=i.readVarint())}const d4=m2;function g2(r){let n=0,i=0;for(const _ of r)n+=_.w*_.h,i=Math.max(i,_.w);r.sort((_,v)=>v.h-_.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),i),h:1/0}];let h=0,m=0;for(const _ of r)for(let v=c.length-1;v>=0;v--){const S=c[v];if(!(_.w>S.w||_.h>S.h)){if(_.x=S.x,_.y=S.y,m=Math.max(m,_.y+_.h),h=Math.max(h,_.x+_.w),_.w===S.w&&_.h===S.h){const T=c.pop();v<c.length&&(c[v]=T)}else _.h===S.h?(S.x+=_.w,S.w-=_.w):_.w===S.w?(S.y+=_.h,S.h-=_.h):(c.push({x:S.x+_.w,y:S.y,w:S.w-_.w,h:_.h}),S.y+=_.h,S.h-=_.h);break}}return{w:h,h:m,fill:n/(h*m)||0}}const to=1;class y2{constructor(n,{pixelRatio:i,version:c,stretchX:h,stretchY:m,content:_}){this.paddedRect=n,this.pixelRatio=i,this.stretchX=h,this.stretchY=m,this.content=_,this.version=c}get tl(){return[this.paddedRect.x+to,this.paddedRect.y+to]}get br(){return[this.paddedRect.x+this.paddedRect.w-to,this.paddedRect.y+this.paddedRect.h-to]}get displaySize(){return[(this.paddedRect.w-2*to)/this.pixelRatio,(this.paddedRect.h-2*to)/this.pixelRatio]}}class h4{constructor(n,i){const c={},h={};this.haveRenderCallbacks=[];const m=[];this.addImages(n,c,m),this.addImages(i,h,m);const{w:_,h:v}=g2(m),S=new fo({width:_||1,height:v||1});for(const T in n){const P=n[T],A=c[T].paddedRect;fo.copy(P.data,S,{x:0,y:0},{x:A.x+to,y:A.y+to},P.data)}for(const T in i){const P=i[T],A=h[T].paddedRect,z=A.x+to,F=A.y+to,U=P.data.width,X=P.data.height;fo.copy(P.data,S,{x:0,y:0},{x:z,y:F},P.data),fo.copy(P.data,S,{x:0,y:X-1},{x:z,y:F-1},{width:U,height:1}),fo.copy(P.data,S,{x:0,y:0},{x:z,y:F+X},{width:U,height:1}),fo.copy(P.data,S,{x:U-1,y:0},{x:z-1,y:F},{width:1,height:X}),fo.copy(P.data,S,{x:0,y:0},{x:z+U,y:F},{width:1,height:X})}this.image=S,this.iconPositions=c,this.patternPositions=h}addImages(n,i,c){for(const h in n){const m=n[h],_={x:0,y:0,w:m.data.width+2*to,h:m.data.height+2*to};c.push(_),i[h]=new y2(_,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(n,i){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(c=>n.hasImage(c)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in n.updatedImages)this.patchUpdatedImage(this.iconPositions[c],n.getImage(c),i),this.patchUpdatedImage(this.patternPositions[c],n.getImage(c),i)}patchUpdatedImage(n,i,c){if(!n||!i||n.version===i.version)return;n.version=i.version;const[h,m]=n.tl;c.update(i.data,void 0,{x:h,y:m})}}Qt(y2,"ImagePosition"),Qt(h4,"ImageAtlas");const zo={horizontal:1,vertical:2,horizontalOnly:3},p4=-17;class Yp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,i){const c=new Yp;return c.scale=n||1,c.fontStack=i,c}static forImage(n){const i=new Yp;return i.imageName=n,i}}class yd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,i){const c=new yd;for(let h=0;h<n.sections.length;h++){const m=n.sections[h];m.image?c.addImageSection(m):c.addTextSection(m,i)}return c}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(i,c){let h="";for(let m=0;m<i.length;m++){const _=i.charCodeAt(m+1)||null,v=i.charCodeAt(m-1)||null;h+=!c&&(_&&Pm(_)&&!Xp[i[m+1]]||v&&Pm(v)&&!Xp[i[m-1]])||!Xp[i[m]]?i[m]:Xp[i[m]]}return h}(this.text,n)}trim(){let n=0;for(let c=0;c<this.text.length&&eg[this.text.charCodeAt(c)];c++)n++;let i=this.text.length;for(let c=this.text.length-1;c>=0&&c>=n&&eg[this.text.charCodeAt(c)];c--)i--;this.text=this.text.substring(n,i),this.sectionIndex=this.sectionIndex.slice(n,i)}substring(n,i){const c=new yd;return c.text=this.text.substring(n,i),c.sectionIndex=this.sectionIndex.slice(n,i),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,i)=>Math.max(n,this.sections[i].scale),0)}addTextSection(n,i){this.text+=n.text,this.sections.push(Yp.forText(n.scale,n.fontStack||i));const c=this.sections.length-1;for(let h=0;h<n.text.length;++h)this.sectionIndex.push(c)}addImageSection(n){const i=n.image?n.image.name:"";if(i.length===0)return void He("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(Yp.forImage(i)),this.sectionIndex.push(this.sections.length-1)):He("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _2(r,n,i,c,h,m,_,v,S,T,P,A,z,F,U){const X=yd.fromFeature(r,h);A===zo.vertical&&X.verticalizePunctuation(z);let re=[];const fe=function(Pe,Ke,Ze,ut,Pt,tt){if(!Pe)return[];const yt=[],_t=function(Ht,rn,Zt,Dn,Rt,pn){let zn=0;for(let Yn=0;Yn<Ht.length();Yn++){const Rn=Ht.getSection(Yn);zn+=f4(Ht.getCharCode(Yn),Rn,Dn,Rt,rn,pn)}return zn/Math.max(1,Math.ceil(zn/Zt))}(Pe,Ke,Ze,ut,Pt,tt),Tt=Pe.text.indexOf("")>=0;let Dt=0;for(let Ht=0;Ht<Pe.length();Ht++){const rn=Pe.getSection(Ht),Zt=Pe.getCharCode(Ht);if(eg[Zt]||(Dt+=f4(Zt,rn,ut,Pt,Ke,tt)),Ht<Pe.length()-1){const Dn=!((st=Zt)<11904||!(Xt["Bopomofo Extended"](st)||Xt.Bopomofo(st)||Xt["CJK Compatibility Forms"](st)||Xt["CJK Compatibility Ideographs"](st)||Xt["CJK Compatibility"](st)||Xt["CJK Radicals Supplement"](st)||Xt["CJK Strokes"](st)||Xt["CJK Symbols and Punctuation"](st)||Xt["CJK Unified Ideographs Extension A"](st)||Xt["CJK Unified Ideographs"](st)||Xt["Enclosed CJK Letters and Months"](st)||Xt["Halfwidth and Fullwidth Forms"](st)||Xt.Hiragana(st)||Xt["Ideographic Description Characters"](st)||Xt["Kangxi Radicals"](st)||Xt["Katakana Phonetic Extensions"](st)||Xt.Katakana(st)||Xt["Vertical Forms"](st)||Xt["Yi Radicals"](st)||Xt["Yi Syllables"](st)));(pP[Zt]||Dn||rn.imageName)&&yt.push(g4(Ht+1,Dt,_t,yt,fP(Zt,Pe.getCharCode(Ht+1),Dn&&Tt),!1))}}var st;return y4(g4(Pe.length(),Dt,_t,yt,0,!0))}(X,T,m,n,c,F),{processBidirectionalText:Ee,processStyledBidirectionalText:me}=k;if(Ee&&X.sections.length===1){const Pe=Ee(X.toString(),fe);for(const Ke of Pe){const Ze=new yd;Ze.text=Ke,Ze.sections=X.sections;for(let ut=0;ut<Ke.length;ut++)Ze.sectionIndex.push(0);re.push(Ze)}}else if(me){const Pe=me(X.text,X.sectionIndex,fe);for(const Ke of Pe){const Ze=new yd;Ze.text=Ke[0],Ze.sectionIndex=Ke[1],Ze.sections=X.sections,re.push(Ze)}}else re=function(Pe,Ke){const Ze=[],ut=Pe.text;let Pt=0;for(const tt of Ke)Ze.push(Pe.substring(Pt,tt)),Pt=tt;return Pt<ut.length&&Ze.push(Pe.substring(Pt,ut.length)),Ze}(X,fe);const Te=[],Ie={positionedLines:Te,text:X.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:A,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt,Dt,st,Ht){let rn=0,Zt=0,Dn=0;const Rt=_t==="right"?1:_t==="left"?0:.5;let pn=!1;for(const Ln of Pt){const On=Ln.getSections();for(const pr of On){if(pr.imageName)continue;const xr=Ke[pr.fontStack];if(xr&&(pn=xr.ascender!==void 0&&xr.descender!==void 0,!pn))break}if(!pn)break}let zn=0;for(const Ln of Pt){Ln.trim();const On=Ln.getMaxScale(),pr=(On-1)*bi,xr={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[zn]=xr;const vr=xr.positionedGlyphs;let fr=0;if(!Ln.length()){Zt+=tt,++zn;continue}let Lr=0,Ur=0;for(let mr=0;mr<Ln.length();mr++){const ai=Ln.getSection(mr),ti=Ln.getSectionIndex(mr),Or=Ln.getCharCode(mr);let er=ai.scale,ni=null,br=null,Hi=null,ri=bi,wi=0;const gi=!(Tt===zo.horizontal||!st&&!Sp(Or)||st&&(eg[Or]||(Yn=Or,Xt.Arabic(Yn)||Xt["Arabic Supplement"](Yn)||Xt["Arabic Extended-A"](Yn)||Xt["Arabic Presentation Forms-A"](Yn)||Xt["Arabic Presentation Forms-B"](Yn))));if(ai.imageName){const qi=ut[ai.imageName];if(!qi)continue;Hi=ai.imageName,Pe.iconsInText=Pe.iconsInText||!0,br=qi.paddedRect;const yi=qi.displaySize;er=er*bi/Ht,ni={width:yi[0],height:yi[1],left:to,top:-d4,advance:gi?yi[1]:yi[0],localGlyph:!1},wi=pn?-ni.height*er:p4+On*bi-yi[1]*er,ri=ni.advance;const $s=(gi?yi[0]:yi[1])*er-bi*On;$s>0&&$s>fr&&(fr=$s)}else{const qi=Ze[ai.fontStack];if(!qi)continue;qi[Or]&&(br=qi[Or]);const yi=Ke[ai.fontStack];if(!yi)continue;const $s=yi.glyphs[Or];if(!$s)continue;if(ni=$s.metrics,ri=Or!==8203?bi:0,pn){const Td=yi.ascender!==void 0?Math.abs(yi.ascender):0,af=yi.descender!==void 0?Math.abs(yi.descender):0,lf=(Td+af)*er;Lr<lf&&(Lr=lf,Ur=(Td-af)/2*er),wi=-Td*er}else wi=p4+(On-er)*bi}gi?(Pe.verticalizable=!0,vr.push({glyph:Or,imageName:Hi,x:rn,y:Zt+wi,vertical:gi,scale:er,localGlyph:ni.localGlyph,fontStack:ai.fontStack,sectionIndex:ti,metrics:ni,rect:br}),rn+=ri*er+Dt):(vr.push({glyph:Or,imageName:Hi,x:rn,y:Zt+wi,vertical:gi,scale:er,localGlyph:ni.localGlyph,fontStack:ai.fontStack,sectionIndex:ti,metrics:ni,rect:br}),rn+=ni.advance*er+Dt)}vr.length!==0&&(Dn=Math.max(rn-Dt,Dn),pn?_4(vr,Rt,fr,Ur,tt*On/2):_4(vr,Rt,fr,0,tt/2)),rn=0;const ei=tt*On+fr;xr.lineOffset=Math.max(fr,pr),Zt+=ei,++zn}var Yn;const Rn=Zt,{horizontalAlign:Tn,verticalAlign:Tr}=x2(yt);(function(Ln,On,pr,xr,vr,fr){const Lr=(On-pr)*vr,Ur=-fr*xr;for(const ei of Ln)for(const mr of ei.positionedGlyphs)mr.x+=Lr,mr.y+=Ur})(Pe.positionedLines,Rt,Tn,Tr,Dn,Rn),Pe.top+=-Tr*Rn,Pe.bottom=Pe.top+Rn,Pe.left+=-Tn*Dn,Pe.right=Pe.left+Dn,Pe.hasBaseline=pn}(Ie,n,i,c,re,_,v,S,A,T,z,U),!function(Pe){for(const Ke of Pe)if(Ke.positionedGlyphs.length!==0)return!1;return!0}(Te)&&Ie}const eg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},pP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function f4(r,n,i,c,h,m){if(n.imageName){const _=c[n.imageName];return _?_.displaySize[0]*n.scale*bi/m+h:0}{const _=i[n.fontStack],v=_&&_.glyphs[r];return v?v.metrics.advance*n.scale+h:0}}function m4(r,n,i,c){const h=Math.pow(r-n,2);return c?r<n?h/2:2*h:h+Math.abs(i)*i}function fP(r,n,i){let c=0;return r===10&&(c-=1e4),i&&(c+=150),r!==40&&r!==65288||(c+=50),n!==41&&n!==65289||(c+=50),c}function g4(r,n,i,c,h,m){let _=null,v=m4(n,i,h,m);for(const S of c){const T=m4(n-S.x,i,h,m)+S.badness;T<=v&&(_=S,v=T)}return{index:r,x:n,priorBreak:_,badness:v}}function y4(r){return r?y4(r.priorBreak).concat(r.index):[]}function x2(r){let n=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:n,verticalAlign:i}}function _4(r,n,i,c,h){if(!(n||i||c||h))return;const m=r.length-1,_=r[m],v=(_.x+_.metrics.advance*_.scale)*n;for(let S=0;S<=m;S++)r[S].x-=v,r[S].y+=i+c+h}function mP(r,n,i){const{horizontalAlign:c,verticalAlign:h}=x2(i),m=n[0]-r.displaySize[0]*c,_=n[1]-r.displaySize[1]*h;return{image:r,top:_,bottom:_+r.displaySize[1],left:m,right:m+r.displaySize[0]}}function x4(r,n,i,c,h,m){const _=r.image;let v;if(_.content){const re=_.content,fe=_.pixelRatio||1;v=[re[0]/fe,re[1]/fe,_.displaySize[0]-re[2]/fe,_.displaySize[1]-re[3]/fe]}const S=n.left*m,T=n.right*m;let P,A,z,F;i==="width"||i==="both"?(F=h[0]+S-c[3],A=h[0]+T+c[1]):(F=h[0]+(S+T-_.displaySize[0])/2,A=F+_.displaySize[0]);const U=n.top*m,X=n.bottom*m;return i==="height"||i==="both"?(P=h[1]+U-c[0],z=h[1]+X+c[2]):(P=h[1]+(U+X-_.displaySize[1])/2,z=P+_.displaySize[1]),{image:_,top:P,right:A,bottom:z,left:F,collisionPadding:v}}class Na extends le{constructor(n,i,c,h,m){super(n,i),this.angle=h,this.z=c,m!==void 0&&(this.segment=m)}clone(){return new Na(this.x,this.y,this.z,this.angle,this.segment)}}function v4(r,n,i,c,h){if(n.segment===void 0)return!0;let m=n,_=n.segment+1,v=0;for(;v>-i/2;){if(_--,_<0)return!1;v-=r[_].dist(m),m=r[_]}v+=r[_].dist(r[_+1]),_++;const S=[];let T=0;for(;v<i/2;){const P=r[_],A=r[_+1];if(!A)return!1;let z=r[_-1].angleTo(P)-P.angleTo(A);for(z=Math.abs((z+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:v,angleDelta:z}),T+=z;v-S[0].distance>c;)T-=S.shift().angleDelta;if(T>h)return!1;_++,v+=P.dist(A)}return!0}function b4(r){let n=0;for(let i=0;i<r.length-1;i++)n+=r[i].dist(r[i+1]);return n}function w4(r,n,i){return r?.6*n*i:0}function S4(r,n){return Math.max(r?r.right-r.left:0,n?n.right-n.left:0)}function gP(r,n,i,c,h,m){const _=w4(i,h,m),v=S4(i,c)*m;let S=0;const T=b4(r)/2;for(let P=0;P<r.length-1;P++){const A=r[P],z=r[P+1],F=A.dist(z);if(S+F>T){const U=(T-S)/F,X=Zn(A.x,z.x,U),re=Zn(A.y,z.y,U),fe=new Na(X,re,0,z.angleTo(A),P);return!_||v4(r,fe,v,_,n)?fe:void 0}S+=F}}function yP(r,n,i,c,h,m,_,v,S){const T=w4(c,m,_),P=S4(c,h),A=P*_,z=r[0].x===0||r[0].x===S||r[0].y===0||r[0].y===S;return n-A<n/4&&(n=A+n/4),T4(r,z?n/2*v%n:(P/2+2*m)*_*v%n,n,T,i,A,z,!1,S)}function T4(r,n,i,c,h,m,_,v,S){const T=m/2,P=b4(r);let A=0,z=n-i,F=[];for(let U=0;U<r.length-1;U++){const X=r[U],re=r[U+1],fe=X.dist(re),Ee=re.angleTo(X);for(;z+i<A+fe;){z+=i;const me=(z-A)/fe,Te=Zn(X.x,re.x,me),Ie=Zn(X.y,re.y,me);if(Te>=0&&Te<S&&Ie>=0&&Ie<S&&z-T>=0&&z+T<=P){const Pe=new Na(Te,Ie,0,Ee,U);Pe._round(),c&&!v4(r,Pe,m,c,h)||F.push(Pe)}}A+=fe}return v||F.length||_||(F=T4(r,A/2,i,c,h,m,_,!0,S)),F}function C4(r,n,i,c,h){const m=[];for(let _=0;_<r.length;_++){const v=r[_];let S;for(let T=0;T<v.length-1;T++){let P=v[T],A=v[T+1];P.x<n&&A.x<n||(P.x<n?P=new le(n,P.y+(n-P.x)/(A.x-P.x)*(A.y-P.y))._round():A.x<n&&(A=new le(n,P.y+(n-P.x)/(A.x-P.x)*(A.y-P.y))._round()),P.y<i&&A.y<i||(P.y<i?P=new le(P.x+(i-P.y)/(A.y-P.y)*(A.x-P.x),i)._round():A.y<i&&(A=new le(P.x+(i-P.y)/(A.y-P.y)*(A.x-P.x),i)._round()),P.x>=c&&A.x>=c||(P.x>=c?P=new le(c,P.y+(c-P.x)/(A.x-P.x)*(A.y-P.y))._round():A.x>=c&&(A=new le(c,P.y+(c-P.x)/(A.x-P.x)*(A.y-P.y))._round()),P.y>=h&&A.y>=h||(P.y>=h?P=new le(P.x+(h-P.y)/(A.y-P.y)*(A.x-P.x),h)._round():A.y>=h&&(A=new le(P.x+(h-P.y)/(A.y-P.y)*(A.x-P.x),h)._round()),S&&P.equals(S[S.length-1])||(S=[P],m.push(S)),S.push(A)))))}}return m}Qt(Na,"Anchor");const Kp=1e20;function E4(r,n,i,c,h,m,_,v,S){for(let T=n;T<n+c;T++)k4(r,i*m+T,m,h,_,v,S);for(let T=i;T<i+h;T++)k4(r,T*m+n,1,c,_,v,S)}function k4(r,n,i,c,h,m,_){m[0]=0,_[0]=-Kp,_[1]=Kp,h[0]=r[n];for(let v=1,S=0,T=0;v<c;v++){h[v]=r[n+v*i];const P=v*v;do{const A=m[S];T=(h[v]-h[A]+P-A*A)/(v-A)/2}while(T<=_[S]&&--S>-1);S++,m[S]=v,_[S]=T,_[S+1]=Kp}for(let v=0,S=0;v<c;v++){for(;_[S+1]<v;)S++;const T=m[S],P=v-T;r[n+v*i]=h[T]+P*P}}const Bs=2,v2={none:0,ideographs:1,all:2};class _d{constructor(n,i,c){this.requestManager=n,this.localGlyphMode=i,this.localFontFamily=c,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,i){const c=[];for(const h in n)for(const m of n[h])c.push({stack:h,id:m});nt(c,({stack:h,id:m},_)=>{let v=this.entries[h];v||(v=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=v.glyphs[m];if(S!==void 0)return void _(null,{stack:h,id:m,glyph:S});if(S=this._tinySDF(v,h,m),S)return v.glyphs[m]=S,void _(null,{stack:h,id:m,glyph:S});const T=Math.floor(m/256);if(256*T>65535)return void _(new Error("glyphs > 65535 not supported"));if(v.ranges[T])return void _(null,{stack:h,id:m,glyph:S});let P=v.requests[T];P||(P=v.requests[T]=[],_d.loadGlyphRange(h,T,this.url,this.requestManager,(A,z)=>{if(z){v.ascender=z.ascender,v.descender=z.descender;for(const F in z.glyphs)this._doesCharSupportLocalGlyph(+F)||(v.glyphs[+F]=z.glyphs[+F]);v.ranges[T]=!0}for(const F of P)F(A,z);delete v.requests[T]})),P.push((A,z)=>{A?_(A):z&&_(null,{stack:h,id:m,glyph:z.glyphs[m]||null})})},(h,m)=>{if(h)i(h);else if(m){const _={};for(const{stack:v,id:S,glyph:T}of m)_[v]===void 0&&(_[v]={}),_[v].glyphs===void 0&&(_[v].glyphs={}),_[v].glyphs[S]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},_[v].ascender=this.entries[v].ascender,_[v].descender=this.entries[v].descender;i(null,_)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==v2.none&&(this.localGlyphMode===v2.all?!!this.localFontFamily:!!this.localFontFamily&&(Xt["CJK Unified Ideographs"](n)||Xt["Hangul Syllables"](n)||Xt.Hiragana(n)||Xt.Katakana(n)||Xt["CJK Symbols and Punctuation"](n)))}_tinySDF(n,i,c){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(c))return;let m=n.tinySDF;if(!m){let X="400";/bold/i.test(i)?X="900":/medium/i.test(i)?X="500":/light/i.test(i)&&(X="200"),m=n.tinySDF=new _d.TinySDF({fontFamily:h,fontWeight:X,fontSize:24*Bs,buffer:3*Bs,radius:8*Bs}),m.fontWeight=X}if(this.localGlyphs[m.fontWeight][c])return this.localGlyphs[m.fontWeight][c];const _=String.fromCharCode(c),{data:v,width:S,height:T,glyphWidth:P,glyphHeight:A,glyphLeft:z,glyphTop:F,glyphAdvance:U}=m.draw(_);return this.localGlyphs[m.fontWeight][c]={id:c,bitmap:new Fa({width:S,height:T},v),metrics:{width:P/Bs,height:A/Bs,left:z/Bs,top:F/Bs-27,advance:U/Bs,localGlyph:!0}}}}_d.loadGlyphRange=function(r,n,i,c,h){const m=256*n,_=m+255,v=c.transformRequest(c.normalizeGlyphsURL(i).replace("{fontstack}",r).replace("{range}",`${m}-${_}`),tn.Glyphs);Ir(v,(S,T)=>{if(S)h(S);else if(T){const P={},A=function(z){return new Qm(z).readFields(uP,{})}(T);for(const z of A.glyphs)P[z.id]=z;h(null,{glyphs:P,ascender:A.ascender,descender:A.descender})}})},_d.TinySDF=class{constructor({fontSize:r=24,buffer:n=3,radius:i=8,cutoff:c=.25,fontFamily:h="sans-serif",fontWeight:m="normal",fontStyle:_="normal"}={}){this.buffer=n,this.cutoff=c,this.radius=i;const v=this.size=r+4*n,S=this._createCanvas(v),T=this.ctx=S.getContext("2d",{willReadFrequently:!0});T.font=`${_} ${m} ${r}px ${h}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(v*v),this.gridInner=new Float64Array(v*v),this.f=new Float64Array(v),this.z=new Float64Array(v+1),this.v=new Uint16Array(v)}_createCanvas(r){const n=document.createElement("canvas");return n.width=n.height=r,n}draw(r){const{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:c,actualBoundingBoxLeft:h,actualBoundingBoxRight:m}=this.ctx.measureText(r),_=Math.ceil(i),v=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-h))),S=Math.min(this.size-this.buffer,_+Math.ceil(c)),T=v+2*this.buffer,P=S+2*this.buffer,A=Math.max(T*P,0),z=new Uint8ClampedArray(A),F={data:z,width:T,height:P,glyphWidth:v,glyphHeight:S,glyphTop:_,glyphLeft:0,glyphAdvance:n};if(v===0||S===0)return F;const{ctx:U,buffer:X,gridInner:re,gridOuter:fe}=this;U.clearRect(X,X,v,S),U.fillText(r,X,X+_);const Ee=U.getImageData(X,X,v,S);fe.fill(Kp,0,A),re.fill(0,0,A);for(let me=0;me<S;me++)for(let Te=0;Te<v;Te++){const Ie=Ee.data[4*(me*v+Te)+3]/255;if(Ie===0)continue;const Pe=(me+X)*T+Te+X;if(Ie===1)fe[Pe]=0,re[Pe]=Kp;else{const Ke=.5-Ie;fe[Pe]=Ke>0?Ke*Ke:0,re[Pe]=Ke<0?Ke*Ke:0}}E4(fe,0,0,T,P,T,this.f,this.v,this.z),E4(re,X,X,v,S,T,this.f,this.v,this.z);for(let me=0;me<A;me++){const Te=Math.sqrt(fe[me])-Math.sqrt(re[me]);z[me]=Math.round(255-255*(Te/this.radius+this.cutoff))}return F}};const xd=to;function P4(r,n,i,c){const h=[],m=r.image,_=m.pixelRatio,v=m.paddedRect.w-2*xd,S=m.paddedRect.h-2*xd,T=r.right-r.left,P=r.bottom-r.top,A=m.stretchX||[[0,v]],z=m.stretchY||[[0,S]],F=(tt,yt)=>tt+yt[1]-yt[0],U=A.reduce(F,0),X=z.reduce(F,0),re=v-U,fe=S-X;let Ee=0,me=U,Te=0,Ie=X,Pe=0,Ke=re,Ze=0,ut=fe;if(m.content&&c){const tt=m.content;Ee=tg(A,0,tt[0]),Te=tg(z,0,tt[1]),me=tg(A,tt[0],tt[2]),Ie=tg(z,tt[1],tt[3]),Pe=tt[0]-Ee,Ze=tt[1]-Te,Ke=tt[2]-tt[0]-me,ut=tt[3]-tt[1]-Ie}const Pt=(tt,yt,_t,Tt)=>{const Dt=ng(tt.stretch-Ee,me,T,r.left),st=rg(tt.fixed-Pe,Ke,tt.stretch,U),Ht=ng(yt.stretch-Te,Ie,P,r.top),rn=rg(yt.fixed-Ze,ut,yt.stretch,X),Zt=ng(_t.stretch-Ee,me,T,r.left),Dn=rg(_t.fixed-Pe,Ke,_t.stretch,U),Rt=ng(Tt.stretch-Te,Ie,P,r.top),pn=rg(Tt.fixed-Ze,ut,Tt.stretch,X),zn=new le(Dt,Ht),Yn=new le(Zt,Ht),Rn=new le(Zt,Rt),Tn=new le(Dt,Rt),Tr=new le(st/_,rn/_),Ln=new le(Dn/_,pn/_),On=n*Math.PI/180;if(On){const vr=Math.sin(On),fr=Math.cos(On),Lr=[fr,-vr,vr,fr];zn._matMult(Lr),Yn._matMult(Lr),Tn._matMult(Lr),Rn._matMult(Lr)}const pr=tt.stretch+tt.fixed,xr=yt.stretch+yt.fixed;return{tl:zn,tr:Yn,bl:Tn,br:Rn,tex:{x:m.paddedRect.x+xd+pr,y:m.paddedRect.y+xd+xr,w:_t.stretch+_t.fixed-pr,h:Tt.stretch+Tt.fixed-xr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Tr,pixelOffsetBR:Ln,minFontScaleX:Ke/_/T,minFontScaleY:ut/_/P,isSDF:i}};if(c&&(m.stretchX||m.stretchY)){const tt=M4(A,re,U),yt=M4(z,fe,X);for(let _t=0;_t<tt.length-1;_t++){const Tt=tt[_t],Dt=tt[_t+1];for(let st=0;st<yt.length-1;st++)h.push(Pt(Tt,yt[st],Dt,yt[st+1]))}}else h.push(Pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:v+1},{fixed:0,stretch:S+1}));return h}function tg(r,n,i){let c=0;for(const h of r)c+=Math.max(n,Math.min(i,h[1]))-Math.max(n,Math.min(i,h[0]));return c}function M4(r,n,i){const c=[{fixed:-xd,stretch:0}];for(const[h,m]of r){const _=c[c.length-1];c.push({fixed:h-_.stretch,stretch:_.stretch}),c.push({fixed:h-_.stretch,stretch:_.stretch+(m-h)})}return c.push({fixed:n+xd,stretch:i}),c}function ng(r,n,i,c){return r/n*i+c}function rg(r,n,i,c){return r-n*i/c}function _P(r,n,i,c){const h=n+r.positionedLines[c].lineOffset;return c===0?i+h/2:i+(h+(n+r.positionedLines[c-1].lineOffset))/2}class xP{constructor(n=[],i=vP){if(this.data=n,this.length=this.data.length,this.compare=i,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:i,compare:c}=this,h=i[n];for(;n>0;){const m=n-1>>1,_=i[m];if(c(h,_)>=0)break;i[n]=_,n=m}i[n]=h}_down(n){const{data:i,compare:c}=this,h=this.length>>1,m=i[n];for(;n<h;){let _=1+(n<<1),v=i[_];const S=_+1;if(S<this.length&&c(i[S],v)<0&&(_=S,v=i[S]),c(v,m)>=0)break;i[n]=v,n=_}i[n]=m}}function vP(r,n){return r<n?-1:r>n?1:0}function bP(r,n=1,i=!1){let c=1/0,h=1/0,m=-1/0,_=-1/0;const v=r[0];for(let F=0;F<v.length;F++){const U=v[F];(!F||U.x<c)&&(c=U.x),(!F||U.y<h)&&(h=U.y),(!F||U.x>m)&&(m=U.x),(!F||U.y>_)&&(_=U.y)}const S=Math.min(m-c,_-h);let T=S/2;const P=new xP([],wP);if(S===0)return new le(c,h);for(let F=c;F<m;F+=S)for(let U=h;U<_;U+=S)P.push(new vd(F+T,U+T,T,r));let A=function(F){let U=0,X=0,re=0;const fe=F[0];for(let Ee=0,me=fe.length,Te=me-1;Ee<me;Te=Ee++){const Ie=fe[Ee],Pe=fe[Te],Ke=Ie.x*Pe.y-Pe.x*Ie.y;X+=(Ie.x+Pe.x)*Ke,re+=(Ie.y+Pe.y)*Ke,U+=3*Ke}return new vd(X/U,re/U,0,F)}(r),z=P.length;for(;P.length;){const F=P.pop();(F.d>A.d||!A.d)&&(A=F,i&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,z)),F.max-A.d<=n||(T=F.h/2,P.push(new vd(F.p.x-T,F.p.y-T,T,r)),P.push(new vd(F.p.x+T,F.p.y-T,T,r)),P.push(new vd(F.p.x-T,F.p.y+T,T,r)),P.push(new vd(F.p.x+T,F.p.y+T,T,r)),z+=4)}return i&&(console.log(`num probes: ${z}`),console.log(`best distance: ${A.d}`)),A.p}function wP(r,n){return n.max-r.max}class vd{constructor(n,i,c,h){this.p=new le(n,i),this.h=c,this.d=function(m,_){let v=!1,S=1/0;for(let T=0;T<_.length;T++){const P=_[T];for(let A=0,z=P.length,F=z-1;A<z;F=A++){const U=P[A],X=P[F];U.y>m.y!=X.y>m.y&&m.x<(X.x-U.x)*(m.y-U.y)/(X.y-U.y)+U.x&&(v=!v),S=Math.min(S,Tw(m,U,X))}}return(v?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}}const bd=7,b2=Number.POSITIVE_INFINITY,SP=Math.sqrt(2);function I4(r,[n,i]){let c=0,h=0;if(i===b2){n<0&&(n=0);const m=n/SP;switch(r){case"top-right":case"top-left":h=m-bd;break;case"bottom-right":case"bottom-left":h=-m+bd;break;case"bottom":h=-n+bd;break;case"top":h=n-bd}switch(r){case"top-right":case"bottom-right":c=-m;break;case"top-left":case"bottom-left":c=m;break;case"left":c=n;break;case"right":c=-n}}else{switch(n=Math.abs(n),i=Math.abs(i),r){case"top-right":case"top-left":case"top":h=i-bd;break;case"bottom-right":case"bottom-left":case"bottom":h=-i+bd}switch(r){case"top-right":case"bottom-right":case"right":c=-n;break;case"top-left":case"bottom-left":case"left":c=n}}return[c,h]}function TP(r,n,i,c,h,m,_,v,S,T){r.createArrays(),r.tilePixelRatio=_n/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const P=r.layers[0].layout,A=r.layers[0]._unevaluatedLayout._values,z={};if(r.textSizeData.kind==="composite"){const{minZoom:X,maxZoom:re}=r.textSizeData;z.compositeTextSizes=[A["text-size"].possiblyEvaluate(new I(X),v),A["text-size"].possiblyEvaluate(new I(re),v)]}if(r.iconSizeData.kind==="composite"){const{minZoom:X,maxZoom:re}=r.iconSizeData;z.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new I(X),v),A["icon-size"].possiblyEvaluate(new I(re),v)]}z.layoutTextSize=A["text-size"].possiblyEvaluate(new I(S+1),v),z.layoutIconSize=A["icon-size"].possiblyEvaluate(new I(S+1),v),z.textMaxSize=A["text-size"].possiblyEvaluate(new I(18),v);const F=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point",U=P.get("text-size");for(const X of r.features){const re=P.get("text-font").evaluate(X,{},v).join(","),fe=U.evaluate(X,{},v),Ee=z.layoutTextSize.evaluate(X,{},v),me=(z.layoutIconSize.evaluate(X,{},v),{horizontal:{},vertical:void 0}),Te=X.text;let Ie,Pe=[0,0];if(Te){const ut=Te.toString(),Pt=P.get("text-letter-spacing").evaluate(X,{},v)*bi,tt=P.get("text-line-height").evaluate(X,{},v)*bi,yt=I_(ut)?Pt:0,_t=P.get("text-anchor").evaluate(X,{},v),Tt=P.get("text-variable-anchor");if(!Tt){const Zt=P.get("text-radial-offset").evaluate(X,{},v);Pe=Zt?I4(_t,[Zt*bi,b2]):P.get("text-offset").evaluate(X,{},v).map(Dn=>Dn*bi)}let Dt=F?"center":P.get("text-justify").evaluate(X,{},v);const st=P.get("symbol-placement")==="point",Ht=st?P.get("text-max-width").evaluate(X,{},v)*bi:1/0,rn=Zt=>{r.allowVerticalPlacement&&wp(ut)&&(me.vertical=_2(Te,n,i,h,re,Ht,tt,_t,Zt,yt,Pe,zo.vertical,!0,Ee,fe))};if(!F&&Tt){const Zt=Dt==="auto"?Tt.map(Rt=>w2(Rt)):[Dt];let Dn=!1;for(let Rt=0;Rt<Zt.length;Rt++){const pn=Zt[Rt];if(!me.horizontal[pn])if(Dn)me.horizontal[pn]=me.horizontal[0];else{const zn=_2(Te,n,i,h,re,Ht,tt,"center",pn,yt,Pe,zo.horizontal,!1,Ee,fe);zn&&(me.horizontal[pn]=zn,Dn=zn.positionedLines.length===1)}}rn("left")}else{if(Dt==="auto"&&(Dt=w2(_t)),st||P.get("text-writing-mode").indexOf("horizontal")>=0||!wp(ut)){const Zt=_2(Te,n,i,h,re,Ht,tt,_t,Dt,yt,Pe,zo.horizontal,!1,Ee,fe);Zt&&(me.horizontal[Dt]=Zt)}rn(st?"left":Dt)}}let Ke=!1;if(X.icon&&X.icon.name){const ut=c[X.icon.name];ut&&(Ie=mP(h[X.icon.name],P.get("icon-offset").evaluate(X,{},v),P.get("icon-anchor").evaluate(X,{},v)),Ke=ut.sdf,r.sdfIcons===void 0?r.sdfIcons=ut.sdf:r.sdfIcons!==ut.sdf&&He("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ut.pixelRatio!==r.pixelRatio||P.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const Ze=D4(me.horizontal)||me.vertical;r.iconsInText||(r.iconsInText=!!Ze&&Ze.iconsInText),(Ze||Ie)&&CP(r,X,me,Ie,c,z,Ee,0,Pe,Ke,_,v,T)}m&&r.generateCollisionDebugBuffers(S,r.collisionBoxArray)}function w2(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function CP(r,n,i,c,h,m,_,v,S,T,P,A,z){let F=m.textMaxSize.evaluate(n,{},A);F===void 0&&(F=_);const U=r.layers[0].layout,X=U.get("icon-offset").evaluate(n,{},A),re=D4(i.horizontal)||i.vertical,fe=z.name==="globe",Ee=bi,me=_/Ee,Te=r.tilePixelRatio*F/Ee,Ie=(_t=r.overscaling,r.zoom>18&&_t>2&&(_t>>=1),Math.max(_n/(512*_t),1)*U.get("symbol-spacing")),Pe=U.get("text-padding")*r.tilePixelRatio,Ke=U.get("icon-padding")*r.tilePixelRatio,Ze=Fe(U.get("text-max-angle")),ut=U.get("text-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",Pt=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",tt=U.get("symbol-placement"),yt=Ie/2;var _t;const Tt=U.get("icon-text-fit");let Dt;c&&Tt!=="none"&&(r.allowVerticalPlacement&&i.vertical&&(Dt=x4(c,i.vertical,Tt,U.get("icon-text-fit-padding"),X,me)),re&&(c=x4(c,re,Tt,U.get("icon-text-fit-padding"),X,me)));const st=(Ht,rn,Zt)=>{if(rn.x<0||rn.x>=_n||rn.y<0||rn.y>=_n)return;let Dn=null;if(fe){const{x:Rt,y:pn,z:zn}=z.projectTilePoint(rn.x,rn.y,Zt);Dn={anchor:new Na(Rt,pn,zn,0,void 0),up:z.upVector(Zt,rn.x,rn.y)}}(function(Rt,pn,zn,Yn,Rn,Tn,Tr,Ln,On,pr,xr,vr,fr,Lr,Ur,ei,mr,ai,ti,Or,er,ni,br,Hi,ri){const wi=Rt.addToLineVertexArray(pn,Yn);let gi,qi,yi,$s,Td,af,lf,d5=0,h5=0,p5=0,f5=0,B2=-1,F2=-1;const oa={};let m5=z_("");const Hc=zn?zn.anchor:pn;let $2=0,N2=0;if(On._unevaluatedLayout.getValue("text-radial-offset")===void 0?[$2,N2]=On.layout.get("text-offset").evaluate(er,{},ri).map(mo=>mo*bi):($2=On.layout.get("text-radial-offset").evaluate(er,{},ri)*bi,N2=b2),Rt.allowVerticalPlacement&&Rn.vertical){const mo=Rn.vertical;if(Ur)af=S2(mo),Ln&&(lf=S2(Ln));else{const go=On.layout.get("text-rotate").evaluate(er,{},ri)+90;yi=ig(pr,Hc,pn,xr,vr,fr,mo,Lr,go,ei),Ln&&($s=ig(pr,Hc,pn,xr,vr,fr,Ln,ai,go))}}if(Tn){const mo=On.layout.get("icon-rotate").evaluate(er,{},ri),go=On.layout.get("icon-text-fit")!=="none",cf=P4(Tn,mo,br,go),U2=Ln?P4(Ln,mo,br,go):void 0;qi=ig(pr,Hc,pn,xr,vr,fr,Tn,ai,mo),d5=4*cf.length;const g5=Rt.iconSizeData;let qc=null;g5.kind==="source"?(qc=[Os*On.layout.get("icon-size").evaluate(er,{},ri)],qc[0]>kl&&He(`${Rt.layerIds[0]}: Value for "icon-size" is >= ${Jp}. Reduce your "icon-size".`)):g5.kind==="composite"&&(qc=[Os*ni.compositeIconSizes[0].evaluate(er,{},ri),Os*ni.compositeIconSizes[1].evaluate(er,{},ri)],(qc[0]>kl||qc[1]>kl)&&He(`${Rt.layerIds[0]}: Value for "icon-size" is >= ${Jp}. Reduce your "icon-size".`)),Rt.addSymbols(Rt.icon,cf,qc,Or,ti,er,!1,zn,pn,wi.lineStartIndex,wi.lineLength,-1,Hi,ri),B2=Rt.icon.placedSymbolArray.length-1,U2&&(h5=4*U2.length,Rt.addSymbols(Rt.icon,U2,qc,Or,ti,er,zo.vertical,zn,pn,wi.lineStartIndex,wi.lineLength,-1,Hi,ri),F2=Rt.icon.placedSymbolArray.length-1)}for(const mo in Rn.horizontal){const go=Rn.horizontal[mo];gi||(m5=z_(go.text),Ur?Td=S2(go):gi=ig(pr,Hc,pn,xr,vr,fr,go,Lr,On.layout.get("text-rotate").evaluate(er,{},ri),ei));const cf=go.positionedLines.length===1;if(p5+=A4(Rt,zn,pn,go,Tr,On,Ur,er,ei,wi,Rn.vertical?zo.horizontal:zo.horizontalOnly,cf?Object.keys(Rn.horizontal):[mo],oa,B2,ni,Hi,ri),cf)break}Rn.vertical&&(f5+=A4(Rt,zn,pn,Rn.vertical,Tr,On,Ur,er,ei,wi,zo.vertical,["vertical"],oa,F2,ni,Hi,ri));let zl=-1;const j2=(mo,go)=>mo?Math.max(mo,go):go;zl=j2(Td,zl),zl=j2(af,zl),zl=j2(lf,zl);const QP=zl>-1?1:0;Rt.glyphOffsetArray.length>=Ml.MAX_GLYPHS&&He("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),er.sortKey!==void 0&&Rt.addToSortKeyRanges(Rt.symbolInstances.length,er.sortKey),Rt.symbolInstances.emplaceBack(Hc.x,Hc.y,Hc.z,pn.x,pn.y,oa.right>=0?oa.right:-1,oa.center>=0?oa.center:-1,oa.left>=0?oa.left:-1,oa.vertical>=0?oa.vertical:-1,B2,F2,m5,gi!==void 0?gi:Rt.collisionBoxArray.length,gi!==void 0?gi+1:Rt.collisionBoxArray.length,yi!==void 0?yi:Rt.collisionBoxArray.length,yi!==void 0?yi+1:Rt.collisionBoxArray.length,qi!==void 0?qi:Rt.collisionBoxArray.length,qi!==void 0?qi+1:Rt.collisionBoxArray.length,$s||Rt.collisionBoxArray.length,$s?$s+1:Rt.collisionBoxArray.length,xr,p5,f5,d5,h5,QP,0,$2,N2,zl)})(r,rn,Dn,Ht,i,c,h,Dt,r.layers[0],r.collisionBoxArray,n.index,n.sourceLayerIndex,r.index,Pe,ut,S,0,Ke,Pt,X,n,m,T,P,A)};if(tt==="line")for(const Ht of C4(n.geometry,0,0,_n,_n)){const rn=yP(Ht,Ie,Ze,i.vertical||re,c,Ee,Te,r.overscaling,_n);for(const Zt of rn)re&&EP(r,re.text,yt,Zt)||st(Ht,Zt,A)}else if(tt==="line-center"){for(const Ht of n.geometry)if(Ht.length>1){const rn=gP(Ht,Ze,i.vertical||re,c,Ee,Te);rn&&st(Ht,rn,A)}}else if(n.type==="Polygon")for(const Ht of c2(n.geometry,0)){const rn=bP(Ht,16);st(Ht[0],new Na(rn.x,rn.y,0,0,void 0),A)}else if(n.type==="LineString")for(const Ht of n.geometry)st(Ht,new Na(Ht[0].x,Ht[0].y,0,0,void 0),A);else if(n.type==="Point")for(const Ht of n.geometry)for(const rn of Ht)st([rn],new Na(rn.x,rn.y,0,0,void 0),A)}const Jp=255,kl=Jp*Os;function A4(r,n,i,c,h,m,_,v,S,T,P,A,z,F,U,X,re){const fe=function(Te,Ie,Pe,Ke,Ze,ut,Pt,tt){const yt=[];if(Ie.positionedLines.length===0)return yt;const _t=Ke.layout.get("text-rotate").evaluate(ut,{})*Math.PI/180,Tt=function(Zt){const Dn=Zt[0],Rt=Zt[1],pn=Dn*Rt;return pn>0?[Dn,-Rt]:pn<0?[-Dn,Rt]:Dn===0?[Rt,Dn]:[Rt,-Dn]}(Pe);let Dt=Math.abs(Ie.top-Ie.bottom);for(const Zt of Ie.positionedLines)Dt-=Zt.lineOffset;const st=Ie.positionedLines.length,Ht=Dt/st;let rn=Ie.top-Pe[1];for(let Zt=0;Zt<st;++Zt){const Dn=Ie.positionedLines[Zt];rn=_P(Ie,Ht,rn,Zt);for(const Rt of Dn.positionedGlyphs){if(!Rt.rect)continue;const pn=Rt.rect||{};let zn=d4+1,Yn=!0,Rn=1,Tn=0;if(Rt.imageName){const br=Pt[Rt.imageName];if(!br)continue;if(br.sdf){He("SDF images are not supported in formatted text and will be ignored.");continue}Yn=!1,Rn=br.pixelRatio,zn=to/Rn}const Tr=(Ze||tt)&&Rt.vertical,Ln=Rt.metrics.advance*Rt.scale/2,On=Rt.metrics,pr=Rt.rect;if(pr===null)continue;tt&&Ie.verticalizable&&(Tn=Rt.imageName?Ln-Rt.metrics.width*Rt.scale/2:0);const xr=Ze?[Rt.x+Ln,Rt.y]:[0,0];let vr=[0,0],fr=[0,0],Lr=!1;Ze||(Tr?(fr=[Rt.x+Ln+Tt[0],Rt.y+Tt[1]-Tn],Lr=!0):vr=[Rt.x+Ln+Pe[0],Rt.y+Pe[1]-Tn]);const Ur=pr.w*Rt.scale/(Rn*(Rt.localGlyph?Bs:1)),ei=pr.h*Rt.scale/(Rn*(Rt.localGlyph?Bs:1));let mr,ai,ti,Or;if(Tr){const br=Rt.y-rn,Hi=new le(-Ln,Ln-br),ri=-Math.PI/2,wi=new le(...fr);mr=new le(-Ln+vr[0],vr[1]),mr._rotateAround(ri,Hi)._add(wi),mr.x+=-br+Ln,mr.y-=(On.left-zn)*Rt.scale;const gi=Rt.imageName?On.advance*Rt.scale:bi*Rt.scale,qi=String.fromCharCode(Rt.glyph);Qk(qi)?mr.x+=(1-zn)*Rt.scale:eP(qi)?mr.x+=gi-On.height*Rt.scale+(-zn-1)*Rt.scale:mr.x+=Rt.imageName||On.width+2*zn===pr.w&&On.height+2*zn===pr.h?(gi-ei)/2:(gi-(On.height+2*zn)*Rt.scale)/2,ai=new le(mr.x,mr.y-Ur),ti=new le(mr.x+ei,mr.y),Or=new le(mr.x+ei,mr.y-Ur)}else{const br=(On.left-zn)*Rt.scale-Ln+vr[0],Hi=(-On.top-zn)*Rt.scale+vr[1],ri=br+Ur,wi=Hi+ei;mr=new le(br,Hi),ai=new le(ri,Hi),ti=new le(br,wi),Or=new le(ri,wi)}if(_t){let br;br=Ze?new le(0,0):Lr?new le(Tt[0],Tt[1]):new le(Pe[0],Pe[1]),mr._rotateAround(_t,br),ai._rotateAround(_t,br),ti._rotateAround(_t,br),Or._rotateAround(_t,br)}const er=new le(0,0),ni=new le(0,0);yt.push({tl:mr,tr:ai,bl:ti,br:Or,tex:pn,writingMode:Ie.writingMode,glyphOffset:xr,sectionIndex:Rt.sectionIndex,isSDF:Yn,pixelOffsetTL:er,pixelOffsetBR:ni,minFontScaleX:0,minFontScaleY:0})}}return yt}(0,c,S,m,_,v,h,r.allowVerticalPlacement),Ee=r.textSizeData;let me=null;Ee.kind==="source"?(me=[Os*m.layout.get("text-size").evaluate(v,{},re)],me[0]>kl&&He(`${r.layerIds[0]}: Value for "text-size" is >= ${Jp}. Reduce your "text-size".`)):Ee.kind==="composite"&&(me=[Os*U.compositeTextSizes[0].evaluate(v,{},re),Os*U.compositeTextSizes[1].evaluate(v,{},re)],(me[0]>kl||me[1]>kl)&&He(`${r.layerIds[0]}: Value for "text-size" is >= ${Jp}. Reduce your "text-size".`)),r.addSymbols(r.text,fe,me,S,_,v,P,n,i,T.lineStartIndex,T.lineLength,F,X,re);for(const Te of A)z[Te]=r.text.placedSymbolArray.length-1;return 4*fe.length}function D4(r){for(const n in r)return r[n];return null}function ig(r,n,i,c,h,m,_,v,S,T){let P=_.top,A=_.bottom,z=_.left,F=_.right;const U=_.collisionPadding;if(U&&(z-=U[0],P-=U[1],F+=U[2],A+=U[3]),S){const X=new le(z,P),re=new le(F,P),fe=new le(z,A),Ee=new le(F,A),me=Fe(S);let Te=new le(0,0);T&&(Te=new le(T[0],T[1])),X._rotateAround(me,Te),re._rotateAround(me,Te),fe._rotateAround(me,Te),Ee._rotateAround(me,Te),z=Math.min(X.x,re.x,fe.x,Ee.x),F=Math.max(X.x,re.x,fe.x,Ee.x),P=Math.min(X.y,re.y,fe.y,Ee.y),A=Math.max(X.y,re.y,fe.y,Ee.y)}return r.emplaceBack(n.x,n.y,n.z,i.x,i.y,z,P,F,A,v,c,h,m),r.length-1}function S2(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);const n=r.bottom-r.top;return n>0?Math.max(10,n):null}function EP(r,n,i,c){const h=r.compareText;if(n in h){const m=h[n];for(let _=m.length-1;_>=0;_--)if(c.dist(m[_])<i)return!0}else h[n]=[];return h[n].push(c),!1}function z4(r,n){const i=r.fovAboveCenter,c=r.elevation?r.elevation.getMinElevationBelowMSL()*n:0,h=(r._camera.position[2]*r.worldSize-c)/Math.cos(r._pitch),m=Math.sin(i)*h/Math.sin(Math.max(Math.PI/2-r._pitch-i,.01)),_=Math.sin(r._pitch)*m+h;return Math.min(1.01*_,h*(1/r._horizonShift))}function Wc(r,n){if(!n.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:n};const i=Math.pow(2,-r.z),c=r.x*i,h=(r.x+1)*i,m=r.y*i,_=(r.y+1)*i,v=Do(c),S=Do(h),T=Ii(m),P=Ii(_),A=n.project(v,T),z=n.project(S,T),F=n.project(S,P),U=n.project(v,P);let X=Math.min(A.x,z.x,F.x,U.x),re=Math.min(A.y,z.y,F.y,U.y),fe=Math.max(A.x,z.x,F.x,U.x),Ee=Math.max(A.y,z.y,F.y,U.y);const me=i/16;function Te(Pe,Ke,Ze,ut,Pt,tt){const yt=(Ze+Pt)/2,_t=(ut+tt)/2,Tt=n.project(Do(yt),Ii(_t)),Dt=Math.max(0,X-Tt.x,re-Tt.y,Tt.x-fe,Tt.y-Ee);X=Math.min(X,Tt.x),fe=Math.max(fe,Tt.x),re=Math.min(re,Tt.y),Ee=Math.max(Ee,Tt.y),Dt>me&&(Te(Pe,Tt,Ze,ut,yt,_t),Te(Tt,Ke,yt,_t,Pt,tt))}Te(A,z,c,m,h,m),Te(z,F,h,m,h,_),Te(F,U,h,_,c,_),Te(U,A,c,_,c,m),X-=me,re-=me,fe+=me,Ee+=me;const Ie=1/Math.max(fe-X,Ee-re);return{scale:Ie,x:X*Ie,y:re*Ie,x2:fe*Ie,y2:Ee*Ie,projection:n}}const kP=zs(new Float32Array(16));class Pl{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,i){return{x:0,y:0,z:0}}unproject(n,i){return new hr(0,0)}projectTilePoint(n,i,c){return{x:n,y:i,z:0}}locationPoint(n,i,c=!0){return n._coordinatePoint(n.locationCoordinate(i),c)}pixelsPerMeter(n,i){return Ls(1,n)*i}pixelSpaceConversion(n,i,c){return 1}farthestPixelDistance(n){return z4(n,n.pixelsPerMeter)}pointCoordinate(n,i,c,h){const m=n.horizonLineFromTop(!1),_=new le(i,Math.max(m,c));return n.rayIntersectionCoordinate(n.pointRayIntersection(_,h))}pointCoordinate3D(n,i,c){const h=new le(i,c);if(n.elevation)return n.elevation.pointCoordinate(h);{const m=this.pointCoordinate(n,h.x,h.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(n,i){if(n.elevation)return!this.pointCoordinate3D(n,i.x,i.y);const c=n.horizonLineFromTop();return i.y<c}createInversionMatrix(n,i){return kP}createTileMatrix(n,i,c){let h,m,_;const v=c.canonical,S=zs(new Float64Array(16));if(this.isReprojectedInTileSpace){const T=Wc(v,this);h=1,m=T.x+c.wrap*T.scale,_=T.y,Bc(S,S,[h/T.scale,h/T.scale,n.pixelsPerMeter/i])}else h=i/n.zoomScale(v.z),m=(v.x+Math.pow(2,v.z)*c.wrap)*h,_=v.y*h;return Mp(S,S,[m,_,0]),Bc(S,S,[h/_n,h/_n,1]),S}upVector(n,i,c){return[0,0,1]}upVectorScale(n,i,c){return{metersToTile:1}}}class PP extends Pl{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[i,c]=this.parallels=n.parallels||[29.5,45.5],h=Math.sin(Fe(i));this.n=(h+Math.sin(Fe(c)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(n,i){const{n:c,c:h,r0:m}=this,_=Fe(n-this.center[0]),v=Fe(i),S=Math.sqrt(h-2*c*Math.sin(v))/c;return{x:S*Math.sin(_*c),y:S*Math.cos(_*c)-m,z:0}}unproject(n,i){const{n:c,c:h,r0:m}=this,_=m+i;let v=Math.atan2(n,Math.abs(_))*Math.sign(_);_*c<0&&(v-=Math.PI*Math.sign(n)*Math.sign(_));const S=Fe(this.center[0])*c;v=Ne(v,-Math.PI-S,Math.PI-S);const T=Se(be(v/c)+this.center[0],-180,180),P=Math.asin(Se((h-(n*n+_*_)*c*c)/(2*c),-1,1)),A=Se(be(P),-Ai,Ai);return new hr(T,A)}}const Qp=1.340264,ef=-.081106,tf=893e-6,nf=.003796,og=Math.sqrt(3)/2;class MP extends Pl{project(n,i){i=i/180*Math.PI,n=n/180*Math.PI;const c=Math.asin(og*Math.sin(i)),h=c*c,m=h*h*h;return{x:.5*(n*Math.cos(c)/(og*(Qp+3*ef*h+m*(7*tf+9*nf*h)))/Math.PI+.5),y:1-.5*(c*(Qp+ef*h+m*(tf+nf*h))/Math.PI+1),z:0}}unproject(n,i){n=(2*n-.5)*Math.PI;let c=i=(2*(1-i)-1)*Math.PI,h=c*c,m=h*h*h;for(let P,A,z,F=0;F<12&&(A=c*(Qp+ef*h+m*(tf+nf*h))-i,z=Qp+3*ef*h+m*(7*tf+9*nf*h),P=A/z,c=Se(c-P,-Math.PI/3,Math.PI/3),h=c*c,m=h*h*h,!(Math.abs(P)<1e-12));++F);const _=og*n*(Qp+3*ef*h+m*(7*tf+9*nf*h))/Math.cos(c),v=Math.asin(Math.sin(c)/og),S=Se(180*_/Math.PI,-180,180),T=Se(180*v/Math.PI,-Ai,Ai);return new hr(S,T)}}class IP extends Pl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,i){return{x:.5+n/360,y:.5-i/360,z:0}}unproject(n,i){const c=360*(n-.5),h=Se(360*(.5-i),-Ai,Ai);return new hr(c,h)}}const wd=Math.PI/2;function sg(r){return Math.tan((wd+r)/2)}class AP extends Pl{constructor(n){super(n),this.center=n.center||[0,30];const[i,c]=this.parallels=n.parallels||[30,30];let h=Fe(i),m=Fe(c);this.southernCenter=h+m<0,this.southernCenter&&(h=-h,m=-m);const _=Math.cos(h),v=sg(h);this.n=h===m?Math.sin(h):Math.log(_/Math.cos(m))/Math.log(sg(m)/v),this.f=_*Math.pow(sg(h),this.n)/this.n}project(n,i){i=Fe(i),this.southernCenter&&(i=-i),n=Fe(n-this.center[0]);const c=1e-6,{n:h,f:m}=this;m>0?i<-wd+c&&(i=-wd+c):i>wd-c&&(i=wd-c);const _=m/Math.pow(sg(i),h);let v=_*Math.sin(h*n),S=m-_*Math.cos(h*n);return v=.5*(v/Math.PI+.5),S=.5*(S/Math.PI+.5),{x:v,y:this.southernCenter?S:1-S,z:0}}unproject(n,i){n=(2*n-.5)*Math.PI,this.southernCenter&&(i=1-i),i=(2*(1-i)-.5)*Math.PI;const{n:c,f:h}=this,m=h-i,_=Math.sign(m),v=Math.sign(c)*Math.sqrt(n*n+m*m);let S=Math.atan2(n,Math.abs(m))*_;m*c<0&&(S-=Math.PI*Math.sign(n)*_);const T=Se(be(S/c)+this.center[0],-180,180),P=Se(be(2*Math.atan(Math.pow(h/v,1/c))-wd),-Ai,Ai);return new hr(T,this.southernCenter?-P:P)}}class R4 extends Pl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,i){return{x:ea(n),y:ta(i),z:0}}unproject(n,i){const c=Do(n),h=Ii(i);return new hr(c,h)}}const L4=Fe(Ai);class DP extends Pl{project(n,i){const c=(i=Fe(i))*i,h=c*c;return{x:.5*((n=Fe(n))*(.8707-.131979*c+h*(h*(.003971*c-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(i*(1.007226+c*(.015085+h*(.028874*c-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(n,i){n=(2*n-.5)*Math.PI;let c=i=(2*(1-i)-1)*Math.PI,h=25,m=0,_=c*c;do{_=c*c;const T=_*_;m=(c*(1.007226+_*(.015085+T*(.028874*_-.044475-.005916*T)))-i)/(1.007226+_*(.045255+T*(.259866*_-.311325-.005916*11*T))),c=Se(c-m,-L4,L4)}while(Math.abs(m)>1e-6&&--h>0);_=c*c;const v=Se(be(n/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),S=be(c);return new hr(v,S)}}const O4=Fe(Ai);class zP extends Pl{project(n,i){i=Fe(i),n=Fe(n);const c=Math.cos(i),h=2/Math.PI,m=Math.acos(c*Math.cos(n/2)),_=Math.sin(m)/m,v=.5*(n*h+2*c*Math.sin(n/2)/_)||0,S=.5*(i+Math.sin(i)/_)||0;return{x:.5*(v/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(n,i){let c=n=(2*n-.5)*Math.PI,h=i=(2*(1-i)-1)*Math.PI,m=25;const _=1e-6;let v=0,S=0;do{const T=Math.cos(h),P=Math.sin(h),A=2*P*T,z=P*P,F=T*T,U=Math.cos(c/2),X=Math.sin(c/2),re=2*U*X,fe=X*X,Ee=1-F*U*U,me=Ee?1/Ee:0,Te=Ee?Math.acos(T*U)*Math.sqrt(1/Ee):0,Ie=.5*(2*Te*T*X+2*c/Math.PI)-n,Pe=.5*(Te*P+h)-i,Ke=.5*me*(F*fe+Te*T*U*z)+1/Math.PI,Ze=me*(re*A/4-Te*P*X),ut=.125*me*(A*X-Te*P*F*re),Pt=.5*me*(z*U+Te*fe*T)+.5,tt=Ze*ut-Pt*Ke;v=(Pe*Ze-Ie*Pt)/tt,S=(Ie*ut-Pe*Ke)/tt,c=Se(c-v,-Math.PI,Math.PI),h=Se(h-S,-O4,O4)}while((Math.abs(v)>_||Math.abs(S)>_)&&--m>0);return new hr(be(c),be(h))}}class B4 extends Pl{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Fe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,i){const{scale:c,cosPhi:h}=this;return{x:Fe(n)*h*c+.5,y:-Math.sin(Fe(i))/h*c+.5,z:0}}unproject(n,i){const{scale:c,cosPhi:h}=this,m=-(i-.5)/c,_=Se(be((n-.5)/c)/h,-180,180),v=Math.asin(Se(m*h,-1,1)),S=Se(be(v),-Ai,Ai);return new hr(_,S)}}class RP extends R4{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,i,c){const h=Bp(n,i,c);return qr(h,h,Fp(Qs(c))),{x:h[0],y:h[1],z:h[2]}}locationPoint(n,i){const c=ad(i.lat,i.lng),h=Vi([],c),m=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(i),n._centerAltitude):n._centerAltitude;zp(c,c,h,Ls(1,0)*_n*m);const _=zs(new Float64Array(16));return Oc(_,n.pixelMatrix,n.globeMatrix),qr(c,c,_),new le(c[0],c[1])}pixelsPerMeter(n,i){return Ls(1,0)*i}pixelSpaceConversion(n,i,c){const h=Ls(1,n)*i,m=Zn(Ls(1,45)*i,h,c);return this.pixelsPerMeter(n,i)/m}createTileMatrix(n,i,c){const h=q_(Qs(c.canonical));return Oc(new Float64Array(16),n.globeMatrix,h)}createInversionMatrix(n,i){const{center:c}=n,h=Fp(Qs(i));return Rm(h,h,Fe(c.lng)),B_(h,h,Fe(c.lat)),Bc(h,h,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(n,i,c,h){return uw(n,i,c,!0)||new cd(0,0)}pointCoordinate3D(n,i,c){const h=this.pointCoordinate(n,i,c,0);return[h.x,h.y,h.z]}isPointAboveHorizon(n,i){return!uw(n,i.x,i.y,!1)}farthestPixelDistance(n){const i=function(h,m){const _=h.cameraToCenterDistance,v=h._centerAltitude*m,S=h._camera,T=h._camera.forward(),P=Oa([],Ao([],T,-_),[0,0,v]),A=h.worldSize/(2*Math.PI),z=[0,0,-A],F=h.width/h.height,U=Math.tan(h.fovAboveCenter),X=Ao([],S.up(),U),re=Ao([],S.right(),U*F),fe=Vi([],Oa([],Oa([],T,X),re)),Ee=[];let me;if(new j_(P,fe).closestPointOnSphere(z,A,Ee)){const Te=Oa([],Ee,z),Ie=Rs([],Te,P);me=Math.cos(h.fovAboveCenter)*Ip(Ie)}else{const Te=Rs([],P,z),Ie=Rs([],z,P);Vi(Ie,Ie);const Pe=Ip(Te)-A;me=Math.sqrt(Pe*(Pe+2*A));const Ke=Math.acos(me/(A+Pe))-Math.acos(es(T,Ie));me*=Math.cos(Ke)}return 1.01*me}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),c=ld(n.zoom);if(c>0){const h=z4(n,Ls(1,n.center.lat)*n.worldSize),m=n.worldSize/(2*Math.PI),_=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Zn(i,h+m*(1-Math.cos(_)),Math.pow(c,10))}return i}upVector(n,i,c){return Bp(i,c,n,1)}upVectorScale(n){return{metersToTile:Lm(Bm(Qs(n)))}}}function F4(r){const n=r.parallels,i=!!n&&Math.abs(n[0]+n[1])<.01;switch(r.name){case"mercator":return new R4(r);case"equirectangular":return new IP(r);case"naturalEarth":return new DP(r);case"equalEarth":return new MP(r);case"winkelTripel":return new zP(r);case"albers":return i?new B4(r):new PP(r);case"lambertConformalConic":return i?new B4(r):new AP(r);case"globe":return new RP(r)}throw new Error(`Invalid projection name: ${r.name}`)}const LP=qm.types,OP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ag(r,n,i,c,h,m,_,v,S,T,P,A,z){const F=v?Math.min(kl,Math.round(v[0])):0,U=v?Math.min(kl,Math.round(v[1])):0;r.emplaceBack(n,i,Math.round(32*c),Math.round(32*h),m,_,(F<<1)+(S?1:0),U,16*T,16*P,256*A,256*z)}function lg(r,n,i,c,h,m,_){r.emplaceBack(n,i,c,h,m,_)}function cg(r,n,i,c,h){r.emplaceBack(n,i,c,h),r.emplaceBack(n,i,c,h),r.emplaceBack(n,i,c,h),r.emplaceBack(n,i,c,h)}function BP(r){for(const n of r.sections)if(D_(n.text))return!0;return!1}class T2{constructor(n){this.layoutVertexArray=new wt,this.indexArray=new ln,this.programConfigurations=n,this.segments=new Jr,this.dynamicLayoutVertexArray=new Et,this.opacityVertexArray=new hn,this.placedSymbolArray=new Kr,this.globeExtVertexArray=new At}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,i,c,h){this.isEmpty()||(c&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Gk.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,qk.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,OP,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,Hk.members,!0)),this.opacityVertexBuffer.itemSize=1),(c||h)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Qt(T2,"SymbolBuffers");class C2{constructor(n,i,c){this.layoutVertexArray=new n,this.layoutAttributes=i,this.indexArray=new c,this.segments=new Jr,this.collisionVertexArray=new Wn,this.collisionVertexArrayExt=new jn}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Zk.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,Xk.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Qt(C2,"CollisionBuffers");class Ml{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=zs([]),this.placementViewportMatrix=zs([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=p2(this.zoom,i["text-size"]),this.iconSizeData=p2(this.zoom,i["icon-size"]);const c=this.layers[0].layout,h=c.get("symbol-sort-key"),m=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=c.get("text-writing-mode").map(_=>zo[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new T2(new Lc(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new T2(new Lc(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ui,this.lineVertexArray=new nd,this.symbolInstances=new kr}calculateGlyphDependencies(n,i,c,h,m){for(let _=0;_<n.length;_++)if(i[n.charCodeAt(_)]=!0,h&&m){const v=Xp[n.charAt(_)];v&&(i[v.charCodeAt(0)]=!0)}}populate(n,i,c,h){const m=this.layers[0],_=m.layout,v=this.projection.name==="globe",S=_.get("text-font"),T=_.get("text-field"),P=_.get("icon-image"),A=(T.value.kind!=="constant"||T.value.value instanceof ji&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),z=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,F=_.get("symbol-sort-key");if(this.features=[],!A&&!z)return;const U=i.iconDependencies,X=i.glyphDependencies,re=i.availableImages,fe=new I(this.zoom);for(const{feature:Ee,id:me,index:Te,sourceLayerIndex:Ie}of n){const Pe=m._featureFilter.needGeometry,Ke=jc(Ee,Pe);if(!m._featureFilter.filter(fe,Ke,c))continue;if(Pe||(Ke.geometry=Ba(Ee,c,h)),v&&Ee.type!==1&&c.z<=5){const tt=Ke.geometry,yt=.98078528056,_t=(Tt,Dt)=>es(Bp(Tt.x,Tt.y,c,1),Bp(Dt.x,Dt.y,c,1))<yt;for(let Tt=0;Tt<tt.length;Tt++)tt[Tt]=qE(tt[Tt],_t)}let Ze,ut;if(A){const tt=m.getValueAndResolveTokens("text-field",Ke,c,re),yt=ji.factory(tt);BP(yt)&&(this.hasRTLText=!0),(!this.hasRTLText||b()==="unavailable"||this.hasRTLText&&k.isParsed())&&(Ze=Jk(yt,m,Ke))}if(z){const tt=m.getValueAndResolveTokens("icon-image",Ke,c,re);ut=tt instanceof lo?tt:lo.fromString(tt)}if(!Ze&&!ut)continue;const Pt=this.sortFeaturesByKey?F.evaluate(Ke,{},c):void 0;if(this.features.push({id:me,text:Ze,icon:ut,index:Te,sourceLayerIndex:Ie,geometry:Ke.geometry,properties:Ee.properties,type:LP[Ee.type],sortKey:Pt}),ut&&(U[ut.name]=!0),Ze){const tt=S.evaluate(Ke,{},c).join(","),yt=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(zo.vertical)>=0;for(const _t of Ze.sections)if(_t.image)U[_t.image.name]=!0;else{const Tt=wp(Ze.toString()),Dt=_t.fontStack||tt,st=X[Dt]=X[Dt]||{};this.calculateGlyphDependencies(_t.text,st,yt,this.allowVerticalPlacement,Tt)}}}_.get("symbol-placement")==="line"&&(this.features=function(Ee){const me={},Te={},Ie=[];let Pe=0;function Ke(tt){Ie.push(Ee[tt]),Pe++}function Ze(tt,yt,_t){const Tt=Te[tt];return delete Te[tt],Te[yt]=Tt,Ie[Tt].geometry[0].pop(),Ie[Tt].geometry[0]=Ie[Tt].geometry[0].concat(_t[0]),Tt}function ut(tt,yt,_t){const Tt=me[yt];return delete me[yt],me[tt]=Tt,Ie[Tt].geometry[0].shift(),Ie[Tt].geometry[0]=_t[0].concat(Ie[Tt].geometry[0]),Tt}function Pt(tt,yt,_t){const Tt=_t?yt[0][yt[0].length-1]:yt[0][0];return`${tt}:${Tt.x}:${Tt.y}`}for(let tt=0;tt<Ee.length;tt++){const yt=Ee[tt],_t=yt.geometry,Tt=yt.text?yt.text.toString():null;if(!Tt){Ke(tt);continue}const Dt=Pt(Tt,_t),st=Pt(Tt,_t,!0);if(Dt in Te&&st in me&&Te[Dt]!==me[st]){const Ht=ut(Dt,st,_t),rn=Ze(Dt,st,Ie[Ht].geometry);delete me[Dt],delete Te[st],Te[Pt(Tt,Ie[rn].geometry,!0)]=rn,Ie[Ht].geometry=null}else Dt in Te?Ze(Dt,st,_t):st in me?ut(Dt,st,_t):(Ke(tt),me[Dt]=Pe-1,Te[st]=Pe-1)}return Ie.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ee,me)=>Ee.sortKey-me.sortKey)}update(n,i,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,i,this.layers,c,h),this.icon.programConfigurations.updatePaintArrays(n,i,this.layers,c,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=F4(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,i){const c=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:h,y:m}of i)this.lineVertexArray.emplaceBack(h,m);return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(n,i,c,h,m,_,v,S,T,P,A,z,F,U){const X=n.indexArray,re=n.layoutVertexArray,fe=n.globeExtVertexArray,Ee=n.segments.prepareSegment(4*i.length,re,X,this.canOverlap?_.sortKey:void 0),me=this.glyphOffsetArray.length,Te=Ee.vertexLength,Ie=this.allowVerticalPlacement&&v===zo.vertical?Math.PI/2:0,Pe=_.text&&_.text.sections;for(let Ze=0;Ze<i.length;Ze++){const{tl:ut,tr:Pt,bl:tt,br:yt,tex:_t,pixelOffsetTL:Tt,pixelOffsetBR:Dt,minFontScaleX:st,minFontScaleY:Ht,glyphOffset:rn,isSDF:Zt,sectionIndex:Dn}=i[Ze],Rt=Ee.vertexLength,pn=rn[1];if(ag(re,T.x,T.y,ut.x,pn+ut.y,_t.x,_t.y,c,Zt,Tt.x,Tt.y,st,Ht),ag(re,T.x,T.y,Pt.x,pn+Pt.y,_t.x+_t.w,_t.y,c,Zt,Dt.x,Tt.y,st,Ht),ag(re,T.x,T.y,tt.x,pn+tt.y,_t.x,_t.y+_t.h,c,Zt,Tt.x,Dt.y,st,Ht),ag(re,T.x,T.y,yt.x,pn+yt.y,_t.x+_t.w,_t.y+_t.h,c,Zt,Dt.x,Dt.y,st,Ht),S){const{x:zn,y:Yn,z:Rn}=S.anchor,[Tn,Tr,Ln]=S.up;lg(fe,zn,Yn,Rn,Tn,Tr,Ln),lg(fe,zn,Yn,Rn,Tn,Tr,Ln),lg(fe,zn,Yn,Rn,Tn,Tr,Ln),lg(fe,zn,Yn,Rn,Tn,Tr,Ln),cg(n.dynamicLayoutVertexArray,zn,Yn,Rn,Ie)}else cg(n.dynamicLayoutVertexArray,T.x,T.y,T.z,Ie);X.emplaceBack(Rt,Rt+1,Rt+2),X.emplaceBack(Rt+1,Rt+2,Rt+3),Ee.vertexLength+=4,Ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rn[0]),Ze!==i.length-1&&Dn===i[Ze+1].sectionIndex||n.programConfigurations.populatePaintArrays(re.length,_,_.index,{},F,U,Pe&&Pe[Dn])}const Ke=S?S.anchor:T;n.placedSymbolArray.emplaceBack(Ke.x,Ke.y,Ke.z,T.x,T.y,me,this.glyphOffsetArray.length-me,Te,P,A,T.segment,c?c[0]:0,c?c[1]:0,h[0],h[1],v,0,!1,0,z,0)}_commitLayoutVertex(n,i,c,h,m,_,v){n.emplaceBack(i,c,h,m,_,Math.round(v.x),Math.round(v.y))}_addCollisionDebugVertices(n,i,c,h,m,_,v){const S=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),T=S.vertexLength,P=v.tileAnchorX,A=v.tileAnchorY;for(let F=0;F<4;F++)c.collisionVertexArray.emplaceBack(0,0,0,0);c.collisionVertexArrayExt.emplaceBack(i,-n.padding,-n.padding),c.collisionVertexArrayExt.emplaceBack(i,n.padding,-n.padding),c.collisionVertexArrayExt.emplaceBack(i,n.padding,n.padding),c.collisionVertexArrayExt.emplaceBack(i,-n.padding,n.padding),this._commitLayoutVertex(c.layoutVertexArray,h,m,_,P,A,new le(n.x1,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,h,m,_,P,A,new le(n.x2,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,h,m,_,P,A,new le(n.x2,n.y2)),this._commitLayoutVertex(c.layoutVertexArray,h,m,_,P,A,new le(n.x1,n.y2)),S.vertexLength+=4;const z=c.indexArray;z.emplaceBack(T,T+1),z.emplaceBack(T+1,T+2),z.emplaceBack(T+2,T+3),z.emplaceBack(T+3,T),S.primitiveLength+=4}_addTextDebugCollisionBoxes(n,i,c,h,m,_){for(let v=h;v<m;v++){const S=c.get(v),T=this.getSymbolInstanceTextSize(n,_,i,v);this._addCollisionDebugVertices(S,T,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(n,i,c,h,m,_){for(let v=h;v<m;v++){const S=c.get(v),T=this.getSymbolInstanceIconSize(n,i,_.placedIconSymbolIndex);this._addCollisionDebugVertices(S,T,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,_)}}generateCollisionDebugBuffers(n,i){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new C2(nn,r4.members,mi),this.iconCollisionBox=new C2(nn,r4.members,mi);const c=fd(this.iconSizeData,n),h=fd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(h,n,i,_.textBoxStartIndex,_.textBoxEndIndex,_),this._addTextDebugCollisionBoxes(h,n,i,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._addIconDebugCollisionBoxes(c,n,i,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._addIconDebugCollisionBoxes(c,n,i,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}}getSymbolInstanceTextSize(n,i,c,h){const m=this.text.placedSymbolArray.get(i.rightJustifiedTextSymbolIndex>=0?i.rightJustifiedTextSymbolIndex:i.centerJustifiedTextSymbolIndex>=0?i.centerJustifiedTextSymbolIndex:i.leftJustifiedTextSymbolIndex>=0?i.leftJustifiedTextSymbolIndex:i.verticalPlacedTextSymbolIndex>=0?i.verticalPlacedTextSymbolIndex:h),_=Km(this.textSizeData,n,m)/bi;return this.tilePixelRatio*_}getSymbolInstanceIconSize(n,i,c){const h=this.icon.placedSymbolArray.get(c),m=Km(this.iconSizeData,n,h);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(n,i,c){n.emplaceBack(i,-c,-c),n.emplaceBack(i,c,-c),n.emplaceBack(i,c,c),n.emplaceBack(i,-c,c)}_updateTextDebugCollisionBoxes(n,i,c,h,m,_){for(let v=h;v<m;v++){const S=c.get(v),T=this.getSymbolInstanceTextSize(n,_,i,v);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,S.padding)}}_updateIconDebugCollisionBoxes(n,i,c,h,m,_){for(let v=h;v<m;v++){const S=c.get(v),T=this.getSymbolInstanceIconSize(n,i,_);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,T,S.padding)}}updateCollisionDebugBuffers(n,i){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const c=fd(this.iconSizeData,n),h=fd(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(h,n,i,_.textBoxStartIndex,_.textBoxEndIndex,_),this._updateTextDebugCollisionBoxes(h,n,i,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._updateIconDebugCollisionBoxes(c,n,i,_.iconBoxStartIndex,_.iconBoxEndIndex,_.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(c,n,i,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,i,c,h,m,_,v,S,T){const P={};if(i<c){const{x1:A,y1:z,x2:F,y2:U,padding:X,projectedAnchorX:re,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te,featureIndex:Ie}=n.get(i);P.textBox={x1:A,y1:z,x2:F,y2:U,padding:X,projectedAnchorX:re,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te},P.textFeatureIndex=Ie}if(h<m){const{x1:A,y1:z,x2:F,y2:U,padding:X,projectedAnchorX:re,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te,featureIndex:Ie}=n.get(h);P.verticalTextBox={x1:A,y1:z,x2:F,y2:U,padding:X,projectedAnchorX:re,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te},P.verticalTextFeatureIndex=Ie}if(_<v){const{x1:A,y1:z,x2:F,y2:U,padding:X,projectedAnchorX:re,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te,featureIndex:Ie}=n.get(_);P.iconBox={x1:A,y1:z,x2:F,y2:U,padding:X,projectedAnchorX:re,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te},P.iconFeatureIndex=Ie}if(S<T){const{x1:A,y1:z,x2:F,y2:U,padding:X,projectedAnchorX:re,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te,featureIndex:Ie}=n.get(S);P.verticalIconBox={x1:A,y1:z,x2:F,y2:U,padding:X,projectedAnchorX:re,projectedAnchorY:fe,projectedAnchorZ:Ee,tileAnchorX:me,tileAnchorY:Te},P.verticalIconFeatureIndex=Ie}return P}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){const c=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,i){const c=n.placedSymbolArray.get(i),h=c.vertexStartIndex+4*c.numGlyphs;for(let m=c.vertexStartIndex;m<h;m+=4)n.indexArray.emplaceBack(m,m+1,m+2),n.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const i=Math.sin(n),c=Math.cos(n),h=[],m=[],_=[];for(let v=0;v<this.symbolInstances.length;++v){_.push(v);const S=this.symbolInstances.get(v);h.push(0|Math.round(i*S.tileAnchorX+c*S.tileAnchorY)),m.push(S.featureIndex)}return _.sort((v,S)=>h[v]-h[S]||m[S]-m[v]),_}addToSortKeyRanges(n,i){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===i?c.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const i of this.symbolInstanceIndexes){const c=this.symbolInstances.get(i);this.featureSortOrder.push(c.featureIndex);const{rightJustifiedTextSymbolIndex:h,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:v,placedIconSymbolIndex:S,verticalPlacedIconSymbolIndex:T}=c;h>=0&&this.addIndicesForPlacedSymbol(this.text,h),m>=0&&m!==h&&this.addIndicesForPlacedSymbol(this.text,m),_>=0&&_!==m&&_!==h&&this.addIndicesForPlacedSymbol(this.text,_),v>=0&&this.addIndicesForPlacedSymbol(this.text,v),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Qt(Ml,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Ml.MAX_GLYPHS=65535,Ml.addDynamicAttributes=cg;const FP=new ve({"symbol-placement":new Z(ct.layout_symbol["symbol-placement"]),"symbol-spacing":new Z(ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Z(ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new se(ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Z(ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Z(ct.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Z(ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new Z(ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Z(ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new se(ct.layout_symbol["icon-size"]),"icon-text-fit":new Z(ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Z(ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new se(ct.layout_symbol["icon-image"]),"icon-rotate":new se(ct.layout_symbol["icon-rotate"]),"icon-padding":new Z(ct.layout_symbol["icon-padding"]),"icon-keep-upright":new Z(ct.layout_symbol["icon-keep-upright"]),"icon-offset":new se(ct.layout_symbol["icon-offset"]),"icon-anchor":new se(ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Z(ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Z(ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Z(ct.layout_symbol["text-rotation-alignment"]),"text-field":new se(ct.layout_symbol["text-field"]),"text-font":new se(ct.layout_symbol["text-font"]),"text-size":new se(ct.layout_symbol["text-size"]),"text-max-width":new se(ct.layout_symbol["text-max-width"]),"text-line-height":new se(ct.layout_symbol["text-line-height"]),"text-letter-spacing":new se(ct.layout_symbol["text-letter-spacing"]),"text-justify":new se(ct.layout_symbol["text-justify"]),"text-radial-offset":new se(ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Z(ct.layout_symbol["text-variable-anchor"]),"text-anchor":new se(ct.layout_symbol["text-anchor"]),"text-max-angle":new Z(ct.layout_symbol["text-max-angle"]),"text-writing-mode":new Z(ct.layout_symbol["text-writing-mode"]),"text-rotate":new se(ct.layout_symbol["text-rotate"]),"text-padding":new Z(ct.layout_symbol["text-padding"]),"text-keep-upright":new Z(ct.layout_symbol["text-keep-upright"]),"text-transform":new se(ct.layout_symbol["text-transform"]),"text-offset":new se(ct.layout_symbol["text-offset"]),"text-allow-overlap":new Z(ct.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Z(ct.layout_symbol["text-ignore-placement"]),"text-optional":new Z(ct.layout_symbol["text-optional"])});var E2={paint:new ve({"icon-opacity":new se(ct.paint_symbol["icon-opacity"]),"icon-color":new se(ct.paint_symbol["icon-color"]),"icon-halo-color":new se(ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new se(ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new se(ct.paint_symbol["icon-halo-blur"]),"icon-translate":new Z(ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new Z(ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new se(ct.paint_symbol["text-opacity"]),"text-color":new se(ct.paint_symbol["text-color"],{runtimeType:Qi,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new se(ct.paint_symbol["text-halo-color"]),"text-halo-width":new se(ct.paint_symbol["text-halo-width"]),"text-halo-blur":new se(ct.paint_symbol["text-halo-blur"]),"text-translate":new Z(ct.paint_symbol["text-translate"]),"text-translate-anchor":new Z(ct.paint_symbol["text-translate-anchor"])}),layout:FP};class $4{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:ol,this.defaultValue=n}evaluate(n){if(n.formattedSection){const i=this.defaultValue.property.overrides;if(i&&i.hasOverride(n.formattedSection))return i.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qt($4,"FormatSectionOverride",{omit:["defaultValue"]});class ug extends Ds{constructor(n){super(n,E2)}recalculate(n,i){super.recalculate(n,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const c=this.layout.get("text-writing-mode");if(c){const h=[];for(const m of c)h.indexOf(m)<0&&h.push(m);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,i,c,h){const m=this.layout.get(n).evaluate(i,{},c,h),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||yl(_.value)||!m?m:function(v,S){return S.replace(/{([^{}]+)}/g,(T,P)=>P in v?String(v[P]):"")}(i.properties,m)}createBucket(n){return new Ml(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of E2.paint.overridableProperties){if(!ug.hasPaintOverride(this.layout,n))continue;const i=this.paint.get(n),c=new $4(i),h=new Zu(c,i.property.specification);let m=null;m=i.value.kind==="constant"||i.value.kind==="source"?new dp("source",h):new Ec("composite",h,i.value.zoomStops,i.value._interpolationType),this.paint._values[n]=new ce(i.property,m,i.parameters)}}_handleOverridablePaintPropertyUpdate(n,i,c){return!(!this.layout||i.isDataDriven()||c.isDataDriven())&&ug.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,i){const c=n.get("text-field"),h=E2.paint.properties[i];let m=!1;const _=v=>{for(const S of v)if(h.overrides&&h.overrides.hasOverride(S))return void(m=!0)};if(c.value.kind==="constant"&&c.value.value instanceof ji)_(c.value.value.sections);else if(c.value.kind==="source"){const v=T=>{m||(T instanceof Ca&&jr(T.value)===cc?_(T.value.sections):T instanceof Xs?_(T.sections):T.eachChild(v))},S=c.value;S._styleExpression&&v(S._styleExpression.expression)}return m}getProgramConfiguration(n){return new Tl(this,n)}}var $P={paint:new ve({"background-color":new Z(ct.paint_background["background-color"]),"background-pattern":new Z(ct.paint_background["background-pattern"]),"background-opacity":new Z(ct.paint_background["background-opacity"])})},NP={paint:new ve({"raster-opacity":new Z(ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new Z(ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Z(ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Z(ct.paint_raster["raster-brightness-max"]),"raster-saturation":new Z(ct.paint_raster["raster-saturation"]),"raster-contrast":new Z(ct.paint_raster["raster-contrast"]),"raster-resampling":new Z(ct.paint_raster["raster-resampling"]),"raster-fade-duration":new Z(ct.paint_raster["raster-fade-duration"])})};class jP extends Ds{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var UP={paint:new ve({"sky-type":new Z(ct.paint_sky["sky-type"]),"sky-atmosphere-sun":new Z(ct.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Z(ct.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Z(ct.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Z(ct.paint_sky["sky-gradient-radius"]),"sky-gradient":new xe(ct.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Z(ct.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Z(ct.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Z(ct.paint_sky["sky-opacity"])})};function k2(r,n,i){const c=[0,0,1],h=iw([]);return sw(h,h,i?-Fe(r)+Math.PI:Fe(r)),ow(h,h,-Fe(n)),ew(c,c,h),Vi(c,c)}const VP={circle:class extends Ds{constructor(r){super(r,ek)}createBucket(r){return new Q_(r)}queryRadius(r){const n=r;return ud("circle-radius",this,n)+ud("circle-stroke-width",this,n)+Nm(this.paint.get("circle-translate"))}queryIntersectsFeature(r,n,i,c,h,m,_,v){const S=Pw(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,r.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(n,i)+this.paint.get("circle-stroke-width").evaluate(n,i);return Mw(r,c,m,_,v,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,T)}getProgramIds(){return["circle"]}getProgramConfiguration(r){return new Tl(this,r)}},heatmap:class extends Ds{createBucket(r){return new Aw(r)}constructor(r){super(r,ik),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=r2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return ud("heatmap-radius",this,r)}queryIntersectsFeature(r,n,i,c,h,m,_,v){const S=this.paint.get("heatmap-radius").evaluate(n,i);return Mw(r,c,m,_,v,!0,!0,new le(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(r){return new Tl(this,r)}},hillshade:class extends Ds{constructor(r){super(r,ok)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ds{constructor(r){super(r,bk)}getProgramIds(){const r=this.paint.get("fill-pattern"),n=r&&r.constantOr(1),i=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(r){return new Tl(this,r)}recalculate(r,n){super.recalculate(r,n);const i=this.paint._values["fill-outline-color"];i.value.kind==="constant"&&i.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Gm(r)}queryRadius(){return Nm(this.paint.get("fill-translate"))}queryIntersectsFeature(r,n,i,c,h,m){return!r.queryGeometry.isAboveHorizon&&Sw(kw(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,r.pixelToTileUnitsFactor),c)}isTileClipped(){return!0}},"fill-extrusion":class extends Ds{constructor(r){super(r,Bk)}createBucket(r){return new Hp(r)}queryRadius(){return Nm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(r){return new Tl(this,r)}queryIntersectsFeature(r,n,i,c,h,m,_,v,S){const T=Pw(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,r.pixelToTileUnitsFactor),P=this.paint.get("fill-extrusion-height").evaluate(n,i),A=this.paint.get("fill-extrusion-base").evaluate(n,i),z=[0,0],F=v&&m.elevation,U=m.elevation?m.elevation.exaggeration():1,X=r.tile.getBucket(this);if(F&&X instanceof Hp){const Te=X.centroidVertexArray,Ie=S+1;Ie<Te.length&&(z[0]=Te.geta_centroid_pos0(Ie),z[1]=Te.geta_centroid_pos1(Ie))}if(z[0]===0&&z[1]===1)return!1;m.projection.name==="globe"&&(c=Xw([c],[new le(0,0),new le(_n,_n)],r.tileID.canonical).map(Te=>Te.polygon).flat());const re=F?v:null,[fe,Ee]=function(Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt){return Te.projection.name==="globe"?function(Dt,st,Ht,rn,Zt,Dn,Rt,pn,zn,Yn,Rn){const Tn=[],Tr=[],Ln=Dt.projection.upVectorScale(Rn,Dt.center.lat,Dt.worldSize).metersToTile,On=[0,0,0,1],pr=[0,0,0,1],xr=(fr,Lr,Ur,ei)=>{fr[0]=Lr,fr[1]=Ur,fr[2]=ei,fr[3]=1},vr=Zw();Ht>0&&(Ht+=vr),rn+=vr;for(const fr of st){const Lr=[],Ur=[];for(const ei of fr){const mr=ei.x+Zt.x,ai=ei.y+Zt.y,ti=Dt.projection.projectTilePoint(mr,ai,Rn),Or=Dt.projection.upVector(Rn,ei.x,ei.y);let er=Ht,ni=rn;if(Rt){const br=Qw(mr,ai,Ht,rn,Rt,pn,zn,Yn);er+=br.base,ni+=br.top}Ht!==0?xr(On,ti.x+Or[0]*Ln*er,ti.y+Or[1]*Ln*er,ti.z+Or[2]*Ln*er):xr(On,ti.x,ti.y,ti.z),xr(pr,ti.x+Or[0]*Ln*ni,ti.y+Or[1]*Ln*ni,ti.z+Or[2]*Ln*ni),qr(On,On,Dn),qr(pr,pr,Dn),Lr.push(new pd(On[0],On[1],On[2])),Ur.push(new pd(pr[0],pr[1],pr[2]))}Tn.push(Lr),Tr.push(Ur)}return[Tn,Tr]}(Te,Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t,Tt):Pt?function(Dt,st,Ht,rn,Zt,Dn,Rt,pn,zn){const Yn=[],Rn=[],Tn=[0,0,0,1];for(const Tr of Dt){const Ln=[],On=[];for(const pr of Tr){const xr=pr.x+rn.x,vr=pr.y+rn.y,fr=Qw(xr,vr,st,Ht,Dn,Rt,pn,zn);Tn[0]=xr,Tn[1]=vr,Tn[2]=fr.base,Tn[3]=1,Fc(Tn,Tn,Zt),Tn[3]=Math.max(Tn[3],1e-5);const Lr=new pd(Tn[0]/Tn[3],Tn[1]/Tn[3],Tn[2]/Tn[3]);Tn[0]=xr,Tn[1]=vr,Tn[2]=fr.top,Tn[3]=1,Fc(Tn,Tn,Zt),Tn[3]=Math.max(Tn[3],1e-5);const Ur=new pd(Tn[0]/Tn[3],Tn[1]/Tn[3],Tn[2]/Tn[3]);Ln.push(Lr),On.push(Ur)}Yn.push(Ln),Rn.push(On)}return[Yn,Rn]}(Ie,Pe,Ke,Ze,ut,Pt,tt,yt,_t):function(Dt,st,Ht,rn,Zt){const Dn=[],Rt=[],pn=Zt[8]*st,zn=Zt[9]*st,Yn=Zt[10]*st,Rn=Zt[11]*st,Tn=Zt[8]*Ht,Tr=Zt[9]*Ht,Ln=Zt[10]*Ht,On=Zt[11]*Ht;for(const pr of Dt){const xr=[],vr=[];for(const fr of pr){const Lr=fr.x+rn.x,Ur=fr.y+rn.y,ei=Zt[0]*Lr+Zt[4]*Ur+Zt[12],mr=Zt[1]*Lr+Zt[5]*Ur+Zt[13],ai=Zt[2]*Lr+Zt[6]*Ur+Zt[14],ti=Zt[3]*Lr+Zt[7]*Ur+Zt[15],Or=ei+pn,er=mr+zn,ni=ai+Yn,br=Math.max(ti+Rn,1e-5),Hi=ei+Tn,ri=mr+Tr,wi=ai+Ln,gi=Math.max(ti+On,1e-5);xr.push(new pd(Or/br,er/br,ni/br)),vr.push(new pd(Hi/gi,ri/gi,wi/gi))}Dn.push(xr),Rt.push(vr)}return[Dn,Rt]}(Ie,Pe,Ke,Ze,ut)}(m,c,A,P,T,_,re,z,U,m.center.lat,r.tileID.canonical),me=r.queryGeometry;return function(Te,Ie,Pe){let Ke=1/0;Sw(Pe,Ie)&&(Ke=Jw(Pe,Ie[0]));for(let Ze=0;Ze<Ie.length;Ze++){const ut=Ie[Ze],Pt=Te[Ze];for(let tt=0;tt<ut.length-1;tt++){const yt=ut[tt],_t=[yt,ut[tt+1],Pt[tt+1],Pt[tt],yt];ww(Pe,_t)&&(Ke=Math.min(Ke,Jw(Pe,_t)))}}return Ke!==1/0&&Ke}(fe,Ee,me.isPointQuery()?me.screenBounds:me.screenGeometry)}},line:class extends Ds{constructor(r){super(r,e4),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof Jh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(r,n){super.recalculate(r,n),this.paint._values["line-floorwidth"]=t4.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Ym(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(r){return new Tl(this,r)}queryRadius(r){const n=r,i=n4(ud("line-width",this,n),ud("line-gap-width",this,n)),c=ud("line-offset",this,n);return i/2+Math.abs(c)+Nm(this.paint.get("line-translate"))}queryIntersectsFeature(r,n,i,c,h,m){if(r.queryGeometry.isAboveHorizon)return!1;const _=kw(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,r.pixelToTileUnitsFactor),v=r.pixelToTileUnitsFactor/2*n4(this.paint.get("line-width").evaluate(n,i),this.paint.get("line-gap-width").evaluate(n,i)),S=this.paint.get("line-offset").evaluate(n,i);return S&&(c=function(T,P){const A=[],z=new le(0,0);for(let F=0;F<T.length;F++){const U=T[F],X=[];for(let re=0;re<U.length;re++){const fe=U[re],Ee=U[re+1],me=re===0?z:fe.sub(U[re-1])._unit()._perp(),Te=re===U.length-1?z:Ee.sub(fe)._unit()._perp(),Ie=me._add(Te)._unit();Ie._mult(1/(Ie.x*Te.x+Ie.y*Te.y)),X.push(Ie._mult(P)._add(fe))}A.push(X)}return A}(c,S*r.pixelToTileUnitsFactor)),function(T,P,A){for(let z=0;z<P.length;z++){const F=P[z];if(T.length>=3){for(let U=0;U<F.length;U++)if(Uc(T,F[U]))return!0}if(YE(T,F,A))return!0}return!1}(_,c,v)}isTileClipped(){return!0}},symbol:ug,background:class extends Ds{constructor(r){super(r,$P)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ds{constructor(r){super(r,NP)}getProgramIds(){return["raster"]}},sky:class extends Ds{constructor(r){super(r,UP),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="sky-gradient"?this._updateColorRamp():r!=="sky-atmosphere-sun"&&r!=="sky-atmosphere-halo-color"&&r!=="sky-atmosphere-color"&&r!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=r2({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(r,n){if(this.paint.get("sky-type")==="atmosphere"){const c=this.paint.get("sky-atmosphere-sun"),h=!c,m=r.style.light,_=m.properties.get("position");return h&&m.properties.get("anchor")==="viewport"&&He("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?k2(_.azimuthal,90-_.polar,n):k2(c[0],90-c[1],n)}const i=this.paint.get("sky-gradient-center");return k2(i[0],90-i[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const r=this.paint.get("sky-type");return r==="atmosphere"?["skyboxCapture","skybox"]:r==="gradient"?["skyboxGradient"]:null}}};class rf{constructor(n,i,c,h){this.context=n,this.format=c,this.texture=n.gl.createTexture(),this.update(i,h)}update(n,i,c){const{width:h,height:m}=n,{context:_}=this,{gl:v}=_,{HTMLImageElement:S,HTMLCanvasElement:T,HTMLVideoElement:P,ImageData:A,ImageBitmap:z}=w;if(v.bindTexture(v.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===v.RGBA&&(!i||i.premultiply!==!1)),c||this.size&&this.size[0]===h&&this.size[1]===m){const{x:F,y:U}=c||{x:0,y:0};n instanceof S||n instanceof T||n instanceof P||n instanceof A||z&&n instanceof z?v.texSubImage2D(v.TEXTURE_2D,0,F,U,v.RGBA,v.UNSIGNED_BYTE,n):v.texSubImage2D(v.TEXTURE_2D,0,F,U,h,m,v.RGBA,v.UNSIGNED_BYTE,n.data)}else this.size=[h,m],n instanceof S||n instanceof T||n instanceof P||n instanceof A||z&&n instanceof z?v.texImage2D(v.TEXTURE_2D,0,this.format,this.format,v.UNSIGNED_BYTE,n):v.texImage2D(v.TEXTURE_2D,0,this.format,h,m,0,this.format,v.UNSIGNED_BYTE,n.data);this.useMipmap=!!(i&&i.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&v.generateMipmap(v.TEXTURE_2D)}bind(n,i){const{context:c}=this,{gl:h}=c;h.bindTexture(h.TEXTURE_2D,this.texture),n!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,n),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?n===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:n),this.filter=n),i!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,i),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,i),this.wrap=i)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class WP{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class GP{constructor(){this.tasks={},this.taskQueue=[],$t(["process"],this),this.invoker=new WP(this.process),this.nextId=0}add(n,i){const c=this.nextId++,h=function({type:m,isSymbolTile:_,zoom:v}){return v=v||0,m==="message"?0:m!=="maybePrepare"||_?m!=="parseTile"||_?m==="parseTile"&&_?300-v:m==="maybePrepare"&&_?400-v:500:200-v:100-v}(i);if(h===0){Ut();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[c]={fn:n,metadata:i,priority:h,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){Ut();try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const i=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!i)return;i.fn()}finally{}}pick(){let n=null,i=1/0;for(let h=0;h<this.taskQueue.length;h++){const m=this.tasks[this.taskQueue[h]];m.priority<i&&(i=m.priority,n=h)}if(n===null)return null;const c=this.taskQueue[n];return this.taskQueue.splice(n,1),c}remove(){this.invoker.remove()}}class N4{constructor(n){this._stringToNumber={},this._numberToString=[];for(let i=0;i<n.length;i++){const c=n[i];this._stringToNumber[c]=i,this._numberToString[i]=c}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const HP=["tile","layer","source","sourceLayer","state"];class j4{constructor(n,i,c,h,m){this.type="Feature",this._vectorTileFeature=n,this._z=i,this._x=c,this._y=h,this.properties=n.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const i of HP)this[i]!==void 0&&(n[i]=this[i]);return n}}const rs=32,na=33,Il=new Uint16Array(8184);for(let r=0;r<2046;r++){let n=r+2,i=0,c=0,h=0,m=0,_=0,v=0;for(1&n?h=m=_=rs:i=c=v=rs;(n>>=1)>1;){const T=i+h>>1,P=c+m>>1;1&n?(h=i,m=c,i=_,c=v):(i=h,c=m,h=_,m=v),_=T,v=P}const S=4*r;Il[S+0]=i,Il[S+1]=c,Il[S+2]=h,Il[S+3]=m}const ra=new Uint16Array(2178),Al=new Uint8Array(1089),dg=new Uint16Array(1089);function U4(r){return r===0?-.03125:r===32?.03125:0}var V4=je([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const W4={type:2,extent:_n,loadGeometry:()=>[[new le(0,0),new le(_n+1,0),new le(_n+1,_n+1),new le(0,_n+1),new le(0,0)]]};class P2{constructor(n,i,c,h,m){this.tileID=n,this.uid=vt(),this.uses=0,this.tileSize=i,this.tileZoom=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(n){const i=n+this.timeAdded;i<vs.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Wc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,i,c){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(h,m){const _={};if(!m)return _;for(const v of h){const S=v.layerIds.map(T=>m.getLayer(T)).filter(Boolean);if(S.length!==0){v.layers=S,v.stateDependentLayerIds&&(v.stateDependentLayers=v.stateDependentLayerIds.map(T=>S.filter(P=>P.id===T)[0]));for(const T of S)_[T.id]=v}}return _}(n.buckets,i.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const m=this.buckets[h];if(m instanceof Ml){if(this.hasSymbolBuckets=!0,!c)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const m=this.buckets[h];if(m instanceof Ml&&m.hasRTLText){this.hasRTLText=!0,k.isLoading()||k.isLoaded()||b()!=="deferred"||E();break}}this.queryPadding=0;for(const h in this.buckets){const m=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(h).queryRadius(m))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new dr}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const c in this.buckets){const h=this.buckets[c];h.uploadPending()&&h.upload(n)}const i=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new rf(n,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new rf(n,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new rf(n,this.lineAtlas.image,i.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,i,c,h,m,_,v,S){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:v,transform:_,params:m,tileTransform:this.tileTransform},n,i,c):{}}querySourceFeatures(n,i){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const h=c.loadVTLayers(),m=i?i.sourceLayer:"",_=h._geojsonTileLayer||h[m];if(!_)return;const v=Ju(i&&i.filter),{z:S,x:T,y:P}=this.tileID.canonical,A={z:S,x:T,y:P};for(let z=0;z<_.length;z++){const F=_.feature(z);if(v.needGeometry){const re=jc(F,!0);if(!v.filter(new I(this.tileID.overscaledZ),re,this.tileID.canonical))continue}else if(!v.filter(new I(this.tileID.overscaledZ),F))continue;const U=c.getId(F,m),X=new j4(F,S,T,P,U);X.tile=A,n.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const i=this.expirationTime;if(n.cacheControl){const c=Nt(n.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const c=Date.now();let h=!1;if(this.expirationTime>c)h=!1;else if(i)if(this.expirationTime<i)h=!0;else{const m=this.expirationTime-i;m?this.expirationTime=c+Math.max(m,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,i){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!i)return;const c=this.latestFeatureIndex.loadVTLayers(),h=i.style.listImages();for(const m in this.buckets){if(!i.style.hasLayer(m))continue;const _=this.buckets[m],v=_.layers[0].sourceLayer||"_geojsonTileLayer",S=c[v],T=n[v];if(!S||!T||Object.keys(T).length===0)continue;if(_.update(T,S,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),_ instanceof Ym||_ instanceof Gm){const A=i.style._getSourceCache(_.layers[0].source);i._terrain&&i._terrain.enabled&&A&&_.programConfigurations.needsUpload&&i._terrain._clearRenderCacheForTile(A.id,this.tileID)}const P=i&&i.style&&i.style.getLayer(m);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<vs.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=vs.now()+n}setTexture(n,i){const c=i.context,h=c.gl;this.texture=this.texture||i.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new rf(c,n,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE))}setDependencies(n,i){const c={};for(const h of i)c[h]=!0;this.dependencies[n]=c}hasDependency(n,i){for(const c of n){const h=this.dependencies[c];if(h){for(const m of i)if(h[m])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,i){if(!i||i.name==="mercator"||this._tileDebugBuffer)return;const c=Ba(W4,this.tileID.canonical,this.tileTransform)[0],h=new kt,m=new ho;for(let _=0;_<c.length;_++){const{x:v,y:S}=c[_];h.emplaceBack(v,S),m.emplaceBack(_)}m.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(m),this._tileDebugBuffer=n.createVertexBuffer(h,Lp.members),this._tileDebugSegments=Jr.simpleSegment(0,0,h.length,m.length)}_makeTileBoundsBuffers(n,i){if(this._tileBoundsBuffer||!i||i.name==="mercator")return;const c=Ba(W4,this.tileID.canonical,this.tileTransform)[0];let h,m;if(this.isRaster){const _=function(v,S){const T=Wc(v,S),P=Math.pow(2,v.z);for(let re=0;re<na;re++)for(let fe=0;fe<na;fe++){const Ee=Do((v.x+(fe+U4(fe))/rs)/P),me=Ii((v.y+(re+U4(re))/rs)/P),Te=S.project(Ee,me),Ie=re*na+fe;ra[2*Ie+0]=Math.round((Te.x*T.scale-T.x)*_n),ra[2*Ie+1]=Math.round((Te.y*T.scale-T.y)*_n)}Al.fill(0),dg.fill(0);for(let re=2045;re>=0;re--){const fe=4*re,Ee=Il[fe+0],me=Il[fe+1],Te=Il[fe+2],Ie=Il[fe+3],Pe=Ee+Te>>1,Ke=me+Ie>>1,Ze=Pe+Ke-me,ut=Ke+Ee-Pe,Pt=me*na+Ee,tt=Ie*na+Te,yt=Ke*na+Pe,_t=Math.hypot((ra[2*Pt+0]+ra[2*tt+0])/2-ra[2*yt+0],(ra[2*Pt+1]+ra[2*tt+1])/2-ra[2*yt+1])>=16;Al[yt]=Al[yt]||(_t?1:0),re<1022&&(Al[yt]=Al[yt]||Al[(me+ut>>1)*na+(Ee+Ze>>1)]||Al[(Ie+ut>>1)*na+(Te+Ze>>1)])}const A=new ft,z=new ln;let F=0;function U(re,fe){const Ee=fe*na+re;return dg[Ee]===0&&(A.emplaceBack(ra[2*Ee+0],ra[2*Ee+1],re*_n/rs,fe*_n/rs),dg[Ee]=++F),dg[Ee]-1}function X(re,fe,Ee,me,Te,Ie){const Pe=re+Ee>>1,Ke=fe+me>>1;if(Math.abs(re-Te)+Math.abs(fe-Ie)>1&&Al[Ke*na+Pe])X(Te,Ie,re,fe,Pe,Ke),X(Ee,me,Te,Ie,Pe,Ke);else{const Ze=U(re,fe),ut=U(Ee,me),Pt=U(Te,Ie);z.emplaceBack(Ze,ut,Pt)}}return X(0,0,rs,rs,rs,0),X(rs,rs,0,0,0,rs),{vertices:A,indices:z}}(this.tileID.canonical,i);h=_.vertices,m=_.indices}else{h=new ft,m=new ln;for(const{x:v,y:S}of c)h.emplaceBack(v,S,0,0);const _=l2(h.int16,void 0,4);for(let v=0;v<_.length;v+=3)m.emplaceBack(_[v],_[v+1],_[v+2])}this._tileBoundsBuffer=n.createVertexBuffer(h,V4.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(m),this._tileBoundsSegments=Jr.simpleSegment(0,0,h.length,m.length)}_makeGlobeTileDebugBuffers(n,i){const c=i.projection;if(!c||c.name!=="globe"||i.freezeTileCoverage)return;const h=this.tileID.canonical,m=Fp(dw(h,i)),_=ld(i.zoom);let v;_>0&&(v=O_(new Float64Array(16),i.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,h,i,m,v,_),this._makeGlobeTileDebugTextBuffer(n,h,i,m,v,_)}_globePoint(n,i,c,h,m,_,v){let S=Bp(n,i,c);if(_){const T=1<<c.z,P=ea(h.center.lng),A=ta(h.center.lat),z=(c.x+.5)/T-P;let F=0;z>.5?F=-1:z<-.5&&(F=1);let U=(n/_n+c.x)/T+F,X=(i/_n+c.y)/T;U=(U-P)*h._pixelsPerMercatorPixel+P,X=(X-A)*h._pixelsPerMercatorPixel+A;const re=[U*h.worldSize,X*h.worldSize,0];qr(re,re,_),S=Nc(S,re,v)}return qr(S,S,m)}_makeGlobeTileDebugBorderBuffer(n,i,c,h,m,_){const v=new kt,S=new ho,T=new qe,P=(z,F,U,X,re)=>{const fe=(U-z)/(re-1),Ee=(X-F)/(re-1),me=v.length;for(let Te=0;Te<re;Te++){const Ie=z+Te*fe,Pe=F+Te*Ee;v.emplaceBack(Ie,Pe);const Ke=this._globePoint(Ie,Pe,i,c,h,m,_);T.emplaceBack(Ke[0],Ke[1],Ke[2]),S.emplaceBack(me+Te)}},A=_n;P(0,0,A,0,16),P(A,0,A,A,16),P(A,A,0,A,16),P(0,A,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(S),this._tileDebugBuffer=n.createVertexBuffer(v,Lp.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(T,lw.members),this._tileDebugSegments=Jr.simpleSegment(0,0,v.length,S.length)}_makeGlobeTileDebugTextBuffer(n,i,c,h,m,_){const v=_n/4,S=new kt,T=new ln,P=new qe,A=25;T.reserve(32),S.reserve(A),P.reserve(A);const z=(F,U)=>A*F+U;for(let F=0;F<A;F++){const U=F*v;for(let X=0;X<A;X++){const re=X*v;S.emplaceBack(re,U);const fe=this._globePoint(re,U,i,c,h,m,_);P.emplaceBack(fe[0],fe[1],fe[2])}}for(let F=0;F<4;F++)for(let U=0;U<4;U++){const X=z(F,U),re=z(F,U+1),fe=z(F+1,U),Ee=z(F+1,U+1);T.emplaceBack(X,re,fe),T.emplaceBack(fe,re,Ee)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(T),this._tileDebugTextBuffer=n.createVertexBuffer(S,Lp.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(P,lw.members),this._tileDebugTextSegments=Jr.simpleSegment(0,0,A,32)}}class qP{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,i,c){const h=String(i);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][h]=this.stateChanges[n][h]||{},gt(this.stateChanges[n][h],c),this.deletedStates[n]===null){this.deletedStates[n]={};for(const m in this.state[n])m!==h&&(this.deletedStates[n][m]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][h]===null){this.deletedStates[n][h]={};for(const m in this.state[n][h])c[m]||(this.deletedStates[n][h][m]=null)}else for(const m in c)this.deletedStates[n]&&this.deletedStates[n][h]&&this.deletedStates[n][h][m]===null&&delete this.deletedStates[n][h][m]}removeFeatureState(n,i,c){if(this.deletedStates[n]===null)return;const h=String(i);if(this.deletedStates[n]=this.deletedStates[n]||{},c&&i!==void 0)this.deletedStates[n][h]!==null&&(this.deletedStates[n][h]=this.deletedStates[n][h]||{},this.deletedStates[n][h][c]=null);else if(i!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][h])for(c in this.deletedStates[n][h]={},this.stateChanges[n][h])this.deletedStates[n][h][c]=null;else this.deletedStates[n][h]=null;else this.deletedStates[n]=null}getState(n,i){const c=String(i),h=gt({},(this.state[n]||{})[c],(this.stateChanges[n]||{})[c]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const m=this.deletedStates[n][i];if(m===null)return{};for(const _ in m)delete h[_]}return h}initializeTileState(n,i){n.setFeatureState(this.state,i)}coalesceChanges(n,i){const c={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const m={};for(const _ in this.stateChanges[h])this.state[h][_]||(this.state[h][_]={}),gt(this.state[h][_],this.stateChanges[h][_]),m[_]=this.state[h][_];c[h]=m}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const m={};if(this.deletedStates[h]===null)for(const _ in this.state[h])m[_]={},this.state[h][_]={};else for(const _ in this.deletedStates[h]){if(this.deletedStates[h][_]===null)this.state[h][_]={};else if(this.state[h][_])for(const v of Object.keys(this.deletedStates[h][_]))delete this.state[h][_][v];m[_]=this.state[h][_]}c[h]=c[h]||{},gt(c[h],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const h in n)n[h].setFeatureState(c,i)}}class G4{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,i){const c=this.toIdx(n,i);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(n,i){return this.leaves[this.toIdx(n,i)]}toIdx(n,i){return i*this.size+n}}function H4(r,n,i,c){let h=0,m=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(c[_])<1e-15){if(i[_]<r[_]||i[_]>n[_])return null}else{const v=1/c[_];let S=(r[_]-i[_])*v,T=(n[_]-i[_])*v;if(S>T){const P=S;S=T,T=P}if(S>h&&(h=S),T<m&&(m=T),h>m)return null}return h}function q4(r,n,i,c,h,m,_,v,S,T,P){const A=c-r,z=h-n,F=m-i,U=_-r,X=v-n,re=S-i,fe=P[1]*re-P[2]*X,Ee=P[2]*U-P[0]*re,me=P[0]*X-P[1]*U,Te=A*fe+z*Ee+F*me;if(Math.abs(Te)<1e-15)return null;const Ie=1/Te,Pe=T[0]-r,Ke=T[1]-n,Ze=T[2]-i,ut=(Pe*fe+Ke*Ee+Ze*me)*Ie;if(ut<0||ut>1)return null;const Pt=Ke*F-Ze*z,tt=Ze*A-Pe*F,yt=Pe*z-Ke*A,_t=(P[0]*Pt+P[1]*tt+P[2]*yt)*Ie;return _t<0||ut+_t>1?null:(U*Pt+X*tt+re*yt)*Ie}function Z4(r,n,i){return(r-n)/(i-n)}function X4(r,n,i,c,h,m,_,v,S){const T=1<<i,P=m-c,A=_-h,z=(r+1)/T*P+c,F=(n+0)/T*A+h,U=(n+1)/T*A+h;v[0]=(r+0)/T*P+c,v[1]=F,S[0]=z,S[1]=U}class Y4{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const i=function(m){const _=Math.ceil(Math.log2(m.dim/8)),v=[];let S=Math.ceil(Math.pow(2,_));const T=1/S,P=(F,U,X,re,fe)=>{const Ee=re?1:0,me=(F+1)*X-Ee,Te=U*X,Ie=(U+1)*X-Ee;fe[0]=F*X,fe[1]=Te,fe[2]=me,fe[3]=Ie};let A=new G4(S);const z=[];for(let F=0;F<S*S;F++){P(F%S,Math.floor(F/S),T,!1,z);const U=Dl(z[0],z[1],m),X=Dl(z[2],z[1],m),re=Dl(z[2],z[3],m),fe=Dl(z[0],z[3],m);A.minimums.push(Math.min(U,X,re,fe)),A.maximums.push(Math.max(U,X,re,fe)),A.leaves.push(1)}for(v.push(A),S/=2;S>=1;S/=2){const F=v[v.length-1];A=new G4(S);for(let U=0;U<S*S;U++){P(U%S,Math.floor(U/S),2,!0,z);const X=F.getElevation(z[0],z[1]),re=F.getElevation(z[2],z[1]),fe=F.getElevation(z[2],z[3]),Ee=F.getElevation(z[0],z[3]),me=F.isLeaf(z[0],z[1]),Te=F.isLeaf(z[2],z[1]),Ie=F.isLeaf(z[2],z[3]),Pe=F.isLeaf(z[0],z[3]),Ke=Math.min(X.min,re.min,fe.min,Ee.min),Ze=Math.max(X.max,re.max,fe.max,Ee.max),ut=me&&Te&&Ie&&Pe;A.maximums.push(Ze),A.minimums.push(Ke),A.leaves.push(Ze-Ke<=5&&ut?1:0)}v.push(A)}return v}(this.dem),c=i.length-1,h=i[c];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(i,0,0,c,0)}raycastRoot(n,i,c,h,m,_,v=1){return H4([n,i,-100],[c,h,this.maximums[0]*v],m,_)}raycast(n,i,c,h,m,_,v=1){if(!this.nodeCount)return null;const S=this.raycastRoot(n,i,c,h,m,_,v);if(S==null)return null;const T=[],P=[],A=[],z=[],F=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;F.length>0;){const{idx:U,t:X,nodex:re,nodey:fe,depth:Ee}=F.pop();if(this.leaves[U]){X4(re,fe,Ee,n,i,c,h,A,z);const Te=1<<Ee,Ie=(re+0)/Te,Pe=(re+1)/Te,Ke=(fe+0)/Te,Ze=(fe+1)/Te,ut=Dl(Ie,Ke,this.dem)*v,Pt=Dl(Pe,Ke,this.dem)*v,tt=Dl(Pe,Ze,this.dem)*v,yt=Dl(Ie,Ze,this.dem)*v,_t=q4(A[0],A[1],ut,z[0],A[1],Pt,z[0],z[1],tt,m,_),Tt=q4(z[0],z[1],tt,A[0],z[1],yt,A[0],A[1],ut,m,_),Dt=Math.min(_t!==null?_t:Number.MAX_VALUE,Tt!==null?Tt:Number.MAX_VALUE);if(Dt!==Number.MAX_VALUE)return Dt;{const st=zp([],m,_,X);if(K4(ut,Pt,yt,tt,Z4(st[0],A[0],z[0]),Z4(st[1],A[1],z[1]))>=st[2])return X}continue}let me=0;for(let Te=0;Te<this._siblingOffset.length;Te++){X4((re<<1)+this._siblingOffset[Te][0],(fe<<1)+this._siblingOffset[Te][1],Ee+1,n,i,c,h,A,z),A[2]=-100,z[2]=this.maximums[this.childOffsets[U]+Te]*v;const Ie=H4(A,z,m,_);if(Ie!=null){const Pe=Ie;T[Te]=Pe;let Ke=!1;for(let Ze=0;Ze<me&&!Ke;Ze++)Pe>=T[P[Ze]]&&(P.splice(Ze,0,Te),Ke=!0);Ke||(P[me]=Te),me++}}for(let Te=0;Te<me;Te++){const Ie=P[Te];F.push({idx:this.childOffsets[U]+Ie,t:T[Ie],nodex:(re<<1)+this._siblingOffset[Ie][0],nodey:(fe<<1)+this._siblingOffset[Ie][1],depth:Ee+1})}}return null}_addNode(n,i,c){return this.minimums.push(n),this.maximums.push(i),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(n,i,c,h,m){if(n[h].isLeaf(i,c)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const _=h-1,v=n[_];let S=0,T=0;for(let P=0;P<this._siblingOffset.length;P++){const A=2*i+this._siblingOffset[P][0],z=2*c+this._siblingOffset[P][1],F=v.getElevation(A,z),U=v.isLeaf(A,z),X=this._addNode(F.min,F.max,U);U&&(S|=1<<P),T||(T=X)}for(let P=0;P<this._siblingOffset.length;P++)S&1<<P||this._construct(n,2*i+this._siblingOffset[P][0],2*c+this._siblingOffset[P][1],_,T+P)}}function K4(r,n,i,c,h,m){return Zn(Zn(r,i,m),Zn(n,c,m),h)}function Dl(r,n,i){const c=i.dim,h=Se(r*c-.5,0,c-1),m=Se(n*c-.5,0,c-1),_=Math.floor(h),v=Math.floor(m),S=Math.min(_+1,c-1),T=Math.min(v+1,c-1);return K4(i.get(_,v),i.get(S,v),i.get(_,T),i.get(S,T),h-_,m-v)}const J4={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function ZP(r,n,i){return(256*r*256+256*n+i)/10-1e4}function XP(r,n,i){return 256*r+n+i/256-32768}class hg{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,i,c,h=!1,m=!1){if(this.uid=n,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return He(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=i.height;const _=this.dim=i.height-2,v=new Uint32Array(i.data.buffer);if(this.pixels=new Uint8Array(i.data.buffer),this.encoding=c||"mapbox",this.borderReady=h,!h){for(let S=0;S<_;S++)v[this._idx(-1,S)]=v[this._idx(0,S)],v[this._idx(_,S)]=v[this._idx(_-1,S)],v[this._idx(S,-1)]=v[this._idx(S,0)],v[this._idx(S,_)]=v[this._idx(S,_-1)];v[this._idx(-1,-1)]=v[this._idx(0,0)],v[this._idx(_,-1)]=v[this._idx(_-1,0)],v[this._idx(-1,_)]=v[this._idx(0,_-1)],v[this._idx(_,_)]=v[this._idx(_-1,_-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Y4(this)}get(n,i,c=!1){c&&(n=Se(n,-1,this.dim),i=Se(i,-1,this.dim));const h=4*this._idx(n,i);return(this.encoding==="terrarium"?XP:ZP)(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}static getUnpackVector(n){return J4[n]}get unpackVector(){return J4[this.encoding]}_idx(n,i){if(n<-1||n>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(n+1)}static pack(n,i){const c=[0,0,0,0],h=hg.getUnpackVector(i);let m=Math.floor((n+h[3])/h[2]);return c[2]=m%256,m=Math.floor(m/256),c[1]=m%256,m=Math.floor(m/256),c[0]=m,c}getPixels(){return new fo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,i,c){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let h=i*this.dim,m=i*this.dim+this.dim,_=c*this.dim,v=c*this.dim+this.dim;switch(i){case-1:h=m-1;break;case 1:m=h+1}switch(c){case-1:_=v-1;break;case 1:v=_+1}const S=-i*this.dim,T=-c*this.dim;for(let P=_;P<v;P++)for(let A=h;A<m;A++){const z=4*this._idx(A,P),F=4*this._idx(A+S,P+T);this.pixels[z+0]=n.pixels[F+0],this.pixels[z+1]=n.pixels[F+1],this.pixels[z+2]=n.pixels[F+2],this.pixels[z+3]=n.pixels[F+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Qt(hg,"DEMData"),Qt(Y4,"DemMinMaxQuadTree",{omit:["dem"]});class YP{constructor(n,i){this.max=n,this.onRemove=i,this.reset()}reset(){for(const n in this.data)for(const i of this.data[n])i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value);return this.data={},this.order=[],this}add(n,i,c){const h=n.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const m={value:i,timeout:void 0};if(c!==void 0&&(m.timeout=setTimeout(()=>{this.remove(n,m)},c)),this.data[h].push(m),this.order.push(h),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const i=this.data[n].shift();return i.timeout&&clearTimeout(i.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),i.value}getByKey(n){const i=this.data[n];return i?i[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,i){if(!this.has(n))return this;const c=n.wrapped().key,h=i===void 0?0:this.data[c].indexOf(i),m=this.data[c][h];return this.data[c].splice(h,1),m.timeout&&clearTimeout(m.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(m.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const i=this._getAndRemoveByKey(this.order[0]);i&&this.onRemove(i)}return this}filter(n){const i=[];for(const c in this.data)for(const h of this.data[c])n(h.value)||i.push(h);for(const c of i)this.remove(c.value.tileID,c)}}class Sd{constructor(n,i,c){this.func=n,this.mask=i,this.range=c}}Sd.ReadOnly=!1,Sd.ReadWrite=!0,Sd.disabled=new Sd(519,Sd.ReadOnly,[0,1]);const M2=7680;class I2{constructor(n,i,c,h,m,_){this.test=n,this.ref=i,this.mask=c,this.fail=h,this.depthFail=m,this.pass=_}}I2.disabled=new I2({func:519,mask:0},0,0,M2,M2,M2);class ia{constructor(n,i,c){this.blendFunction=n,this.blendColor=i,this.mask=c}}ia.Replace=[1,0],ia.disabled=new ia(ia.Replace,Hr.transparent,[!1,!1,!1,!1]),ia.unblended=new ia(ia.Replace,Hr.transparent,[!0,!0,!0,!0]),ia.alphaBlended=new ia([1,771],Hr.transparent,[!0,!0,!0,!0]);const A2=1029,D2=2305;class Fs{constructor(n,i,c){this.enable=n,this.mode=i,this.frontFace=c}}Fs.disabled=new Fs(!1,A2,D2),Fs.backCCW=new Fs(!0,A2,D2),Fs.backCW=new Fs(!0,A2,2304),Fs.frontCW=new Fs(!0,1028,2304),Fs.frontCCW=new Fs(!0,1028,D2);class Gc extends lc{constructor(n,i,c){super(),this.id=n,this._onlySymbols=c,i.on("data",h=>{h.dataType==="source"&&h.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&h.dataType==="source"&&h.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),i.on("error",()=>{this._sourceErrored=!0}),this._source=i,this._tiles={},this._cache=new YP(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=i.minTileCacheSize,this._maxTileCacheSize=i.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new qP,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const i=this._tiles[n];if(i.state!=="loaded"&&i.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,i){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,i)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const i in this._tiles){const c=this._tiles[i];c.upload(n),c.prepare(this.map.style.imageManager)}}getIds(){return xt(this._tiles).map(n=>n.tileID).sort(Q4).map(n=>n.key)}getRenderableIds(n){const i=[];for(const c in this._tiles)this._isIdRenderable(+c,n)&&i.push(this._tiles[c]);return n?i.sort((c,h)=>{const m=c.tileID,_=h.tileID,v=new le(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),S=new le(_.canonical.x,_.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-_.overscaledZ||S.y-v.y||S.x-v.x}).map(c=>c.tileID.key):i.map(c=>c.tileID).sort(Q4).map(c=>c.key)}hasRenderableParent(n){const i=this.findLoadedParent(n,0);return!!i&&this._isIdRenderable(i.tileID.key)}_isIdRenderable(n,i){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(i||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,i){const c=this._tiles[n];c&&(c.state!=="loading"&&(c.state=i),this._loadTile(c,this._tileLoaded.bind(this,c,n,i)))}_tileLoaded(n,i,c,h){if(h)if(n.state="errored",h.status!==404)this._source.fire(new bs(h,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=vs.now(),c==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(i,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new Sa("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const i=this.getRenderableIds();for(let h=0;h<i.length;h++){const m=i[h];if(n.neighboringTiles&&n.neighboringTiles[m]){const _=this.getTileByID(m);c(n,_),c(_,n)}}function c(h,m){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let _=m.tileID.canonical.x-h.tileID.canonical.x;const v=m.tileID.canonical.y-h.tileID.canonical.y,S=Math.pow(2,h.tileID.canonical.z),T=m.tileID.key;_===0&&v===0||Math.abs(v)>1||(Math.abs(_)>1&&(Math.abs(_+S)===1?_+=S:Math.abs(_-S)===1&&(_-=S)),m.dem&&h.dem&&(h.dem.backfillBorder(m.dem,_,v),h.neighboringTiles&&h.neighboringTiles[T]&&(h.neighboringTiles[T].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,i,c,h){for(const m in this._tiles){let _=this._tiles[m];if(h[m]||!_.hasData()||_.tileID.overscaledZ<=i||_.tileID.overscaledZ>c)continue;let v=_.tileID;for(;_&&_.tileID.overscaledZ>i+1;){const T=_.tileID.scaledTo(_.tileID.overscaledZ-1);_=this._tiles[T.key],_&&_.hasData()&&(v=T)}let S=v;for(;S.overscaledZ>i;)if(S=S.scaledTo(S.overscaledZ-1),n[S.key]){h[v.key]=v;break}}}findLoadedParent(n,i){if(n.key in this._loadedParentTiles){const c=this._loadedParentTiles[n.key];return c&&c.tileID.overscaledZ>=i?c:null}for(let c=n.overscaledZ-1;c>=i;c--){const h=n.scaledTo(c),m=this._getLoadedTile(h);if(m)return m}}_getLoadedTile(n){const i=this._tiles[n.key];return i&&i.hasData()?i:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,i){i=i||this._source.tileSize;const c=Math.ceil(n.width/i)+1,h=Math.ceil(n.height/i)+1,m=Math.floor(c*h*5),_=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,m):m,v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(v)}handleWrapJump(n){const i=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,i){const c={};for(const h in this._tiles){const m=this._tiles[h];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+i),c[m.tileID.key]=m}this._tiles=c;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(n,i,c){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!c)return;let h;this.updateCacheSize(n,i),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(v=>new Gi(v.canonical.z,v.wrap,v.canonical.z,v.canonical.x,v.canonical.y)):(h=n.coveringTiles({tileSize:i||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!c,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(v=>this._source.hasTile(v)))):h=[];const m=this._updateRetainedTiles(h);if(e5(this._source.type)&&h.length!==0){const v={},S={},T=Object.keys(m);for(const A of T){const z=m[A],F=this._tiles[A];if(!F||F.fadeEndTime&&F.fadeEndTime<=vs.now())continue;const U=this.findLoadedParent(z,Math.max(z.overscaledZ-Gc.maxOverzooming,this._source.minzoom));U&&(this._addTile(U.tileID),v[U.tileID.key]=U.tileID),S[A]=z}const P=h[h.length-1].overscaledZ;for(const A in this._tiles){const z=this._tiles[A];if(m[A]||!z.hasData())continue;let F=z.tileID;for(;F.overscaledZ>P;){F=F.scaledTo(F.overscaledZ-1);const U=this._tiles[F.key];if(U&&U.hasData()&&S[F.key]){m[A]=z.tileID;break}}}for(const A in v)m[A]||(this._coveredTiles[A]=!0,m[A]=v[A])}for(const v in m)this._tiles[v].clearFadeHold();const _=function(v,S){const T=[];for(const P in v)P in S||T.push(P);return T}(this._tiles,m);for(const v of _){const S=this._tiles[v];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+v)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const i={};if(n.length===0)return i;const c={},h=n.reduce((T,P)=>Math.min(T,P.overscaledZ),1/0),m=n[0].overscaledZ,_=Math.max(m-Gc.maxOverzooming,this._source.minzoom),v=Math.max(m+Gc.maxUnderzooming,this._source.minzoom),S={};for(const T of n){const P=this._addTile(T);i[T.key]=T,P.hasData()||h<this._source.maxzoom&&(S[T.key]=T)}this._retainLoadedChildren(S,h,v,i);for(const T of n){let P=this._tiles[T.key];if(P.hasData())continue;if(T.canonical.z>=this._source.maxzoom){const z=T.children(this._source.maxzoom)[0],F=this.getTile(z);if(F&&F.hasData()){i[z.key]=z;continue}}else{const z=T.children(this._source.maxzoom);if(i[z[0].key]&&i[z[1].key]&&i[z[2].key]&&i[z[3].key])continue}let A=P.wasRequested();for(let z=T.overscaledZ-1;z>=_;--z){const F=T.scaledTo(z);if(c[F.key]||(c[F.key]=!0,P=this.getTile(F),!P&&A&&(P=this._addTile(F)),P&&(i[F.key]=F,A=P.wasRequested(),P.hasData())))break}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const i=[];let c,h=this._tiles[n].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){c=this._loadedParentTiles[h.key];break}i.push(h.key);const m=h.scaledTo(h.overscaledZ-1);if(c=this._getLoadedTile(m),c)break;h=m}for(const m of i)this._loadedParentTiles[m]=c}}_addTile(n){let i=this._tiles[n.key];if(i)return i;i=this._cache.getAndRemove(n),i&&(this._setTileReloadTimer(n.key,i),i.tileID=n,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,i)));const c=!!i;if(!c){const h=this.map?this.map.painter:null;i=new P2(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,h,this._isRaster),this._loadTile(i,this._tileLoaded.bind(this,i,n.key,i.state))}return i?(i.uses++,this._tiles[n.key]=i,c||this._source.fire(new Sa("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null}_setTileReloadTimer(n,i){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const c=i.getExpiryTimeout();c&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},c))}_removeTile(n){const i=this._tiles[n];i&&(i.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),i.uses>0||(i.hasData()&&i.state!=="reloading"?this._cache.add(i.tileID,i,i.getExpiryTimeout()):(i.aborted=!0,this._abortTile(i),this._unloadTile(i))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,i,c){const h=[],m=this.transform;if(!m)return h;const _=m.projection.name==="globe",v=ea(m.center.lng);for(const S in this._tiles){const T=this._tiles[S];if(c&&T.clearQueryDebugViz(),T.holdingForFade())continue;let P;if(_){const A=T.tileID.canonical;if(A.z===0){const z=[Math.abs(Se(v,...of(A,-1))-v),Math.abs(Se(v,...of(A,1))-v)];P=[0,2*z.indexOf(Math.min(...z))-1]}else{const z=[Math.abs(Se(v,...of(A,-1))-v),Math.abs(Se(v,...of(A,0))-v),Math.abs(Se(v,...of(A,1))-v)];P=[z.indexOf(Math.min(...z))-1]}}else P=[0];for(const A of P){const z=n.containsTile(T,m,i,A);z&&h.push(z)}}return h}getVisibleCoordinates(n){const i=this.getRenderableIds(n).map(c=>this._tiles[c].tileID);for(const c of i)c.projMatrix=this.transform.calculateProjMatrix(c.toUnwrapped());return i}hasTransition(){if(this._source.hasTransition())return!0;if(e5(this._source.type))for(const n in this._tiles){const i=this._tiles[n];if(i.fadeEndTime!==void 0&&i.fadeEndTime>=vs.now())return!0}return!1}setFeatureState(n,i,c){this._state.updateState(n=n||"_geojsonTileLayer",i,c)}removeFeatureState(n,i,c){this._state.removeFeatureState(n=n||"_geojsonTileLayer",i,c)}getFeatureState(n,i){return this._state.getState(n=n||"_geojsonTileLayer",i)}setDependencies(n,i,c){const h=this._tiles[n];h&&h.setDependencies(i,c)}reloadTilesForDependencies(n,i){for(const c in this._tiles)this._tiles[c].hasDependency(n,i)&&this._reloadTile(+c,"reloading");this._cache.filter(c=>!c.hasDependency(n,i))}_preloadTiles(n,i){if(!this._sourceLoaded){const v=()=>{this._sourceLoaded&&(this._source.off("data",v),this._preloadTiles(n,i))};return void this._source.on("data",v)}const c=new Map,h=Array.isArray(n)?n:[n],m=this.map.painter.terrain,_=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const v of h){const S=v.coveringTiles({tileSize:_,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const T of S)c.set(T.key,T);this.usedForTerrain&&v.updateElevation(!1)}nt(Array.from(c.values()),(v,S)=>{const T=new P2(v,this._source.tileSize*v.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(T,P=>{this._source.type==="raster-dem"&&T.dem&&this._backfillDEM(T),S(P,T)})},i)}}function Q4(r,n){const i=Math.abs(2*r.wrap)-+(r.wrap<0),c=Math.abs(2*n.wrap)-+(n.wrap<0);return r.overscaledZ-n.overscaledZ||c-i||n.canonical.y-r.canonical.y||n.canonical.x-r.canonical.x}function e5(r){return r==="raster"||r==="image"||r==="video"||r==="custom"}function of(r,n){const i=1<<r.z;return[r.x/i+n,(r.x+1)/i+n]}Gc.maxOverzooming=10,Gc.maxUnderzooming=3;class pg{constructor(n,i,c){this._demTile=n,this._dem=this._demTile.dem,this._scale=i,this._offset=c}static create(n,i,c){const h=c||n.findDEMTileFor(i);if(!h||!h.dem)return;const m=h.dem,_=h.tileID,v=1<<i.canonical.z-_.canonical.z;return new pg(h,h.tileSize/_n/v,[(i.canonical.x/v-_.canonical.x)*m.dim,(i.canonical.y/v-_.canonical.y)*m.dim])}tileCoordToPixel(n,i){const c=i*this._scale+this._offset[1],h=Math.floor(n*this._scale+this._offset[0]),m=Math.floor(c);return new le(h,m)}getElevationAt(n,i,c,h){const m=n*this._scale+this._offset[0],_=i*this._scale+this._offset[1],v=Math.floor(m),S=Math.floor(_),T=this._dem;return h=!!h,c?Zn(Zn(T.get(v,S,h),T.get(v,S+1,h),_-S),Zn(T.get(v+1,S,h),T.get(v+1,S+1,h),_-S),m-v):T.get(v,S,h)}getElevationAtPixel(n,i,c){return this._dem.get(n,i,!!c)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Ls(1,n)*this._dem.stride}}class t5{constructor(n,i){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ia(_n,16,0),this.featureIndexArray=new zc,this.promoteId=i}insert(n,i,c,h,m,_=0){const v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,h,m,_);const S=this.grid;for(let T=0;T<i.length;T++){const P=i[T],A=[1/0,1/0,-1/0,-1/0];for(let z=0;z<P.length;z++){const F=P[z];A[0]=Math.min(A[0],F.x),A[1]=Math.min(A[1],F.y),A[2]=Math.max(A[2],F.x),A[3]=Math.max(A[3],F.y)}A[0]<_n&&A[1]<_n&&A[2]>=0&&A[3]>=0&&S.insert(v,A[0],A[1],A[2],A[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new h2(new Qm(this.rawTileData)).layers,this.sourceLayerCoder=new N4(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,i,c,h){this.loadVTLayers();const m=n.params||{},_=Ju(m.filter),v=n.tileResult,S=n.transform,T=v.bufferedTilespaceBounds,P=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(U,X,re,fe)=>Ew(v.bufferedTilespaceGeometry,U,X,re,fe));P.sort(KP);let A=null;S.elevation&&P.length>0&&(A=pg.create(S.elevation,this.tileID));const z={};let F;for(let U=0;U<P.length;U++){const X=P[U];if(X===F)continue;F=X;const re=this.featureIndexArray.get(X);let fe=null;this.loadMatchingFeature(z,re,_,m.layers,m.availableImages,i,c,h,(Ee,me,Te,Ie=0)=>(fe||(fe=Ba(Ee,this.tileID.canonical,n.tileTransform)),me.queryIntersectsFeature(v,Ee,Te,fe,this.z,n.transform,n.pixelPosMatrix,A,Ie)))}return z}loadMatchingFeature(n,i,c,h,m,_,v,S,T){const{featureIndex:P,bucketIndex:A,sourceLayerIndex:z,layoutVertexArrayOffset:F}=i,U=this.bucketLayerIDs[A];if(h&&!function(Ee,me){for(let Te=0;Te<Ee.length;Te++)if(me.indexOf(Ee[Te])>=0)return!0;return!1}(h,U))return;const X=this.sourceLayerCoder.decode(z),re=this.vtLayers[X].feature(P);if(c.needGeometry){const Ee=jc(re,!0);if(!c.filter(new I(this.tileID.overscaledZ),Ee,this.tileID.canonical))return}else if(!c.filter(new I(this.tileID.overscaledZ),re))return;const fe=this.getId(re,X);for(let Ee=0;Ee<U.length;Ee++){const me=U[Ee];if(h&&h.indexOf(me)<0)continue;const Te=_[me];if(!Te)continue;let Ie={};fe!==void 0&&S&&(Ie=S.getState(Te.sourceLayer||"_geojsonTileLayer",fe));const Pe=gt({},v[me]);Pe.paint=n5(Pe.paint,Te.paint,re,Ie,m),Pe.layout=n5(Pe.layout,Te.layout,re,Ie,m);const Ke=!T||T(re,Te,Ie,F);if(!Ke)continue;const Ze=new j4(re,this.z,this.x,this.y,fe);Ze.layer=Pe;let ut=n[me];ut===void 0&&(ut=n[me]=[]),ut.push({featureIndex:P,feature:Ze,intersectionZ:Ke})}}lookupSymbolFeatures(n,i,c,h,m,_,v,S){const T={};this.loadVTLayers();const P=Ju(m);for(const A of n)this.loadMatchingFeature(T,{bucketIndex:c,sourceLayerIndex:h,featureIndex:A,layoutVertexArrayOffset:0},P,_,v,S,i);return T}loadFeature(n){const{featureIndex:i,sourceLayerIndex:c}=n;this.loadVTLayers();const h=this.sourceLayerCoder.decode(c),m=this.vtFeatures[h];if(m[i])return m[i];const _=this.vtLayers[h].feature(i);return m[i]=_,_}hasLayer(n){for(const i of this.bucketLayerIDs)for(const c of i)if(n===c)return!0;return!1}getId(n,i){let c=n.id;if(this.promoteId){const h=typeof this.promoteId=="string"?this.promoteId:this.promoteId[i];h!=null&&(c=n.properties[h]),typeof c=="boolean"&&(c=Number(c))}return c}}function n5(r,n,i,c,h){return Je(r,(m,_)=>{const v=n instanceof pe?n.get(_):null;return v&&v.evaluate?v.evaluate(i,c,h):v})}function KP(r,n){return n-r}Qt(t5,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class r5{constructor(n,i){this.width=n,this.height=i,this.nextRow=0,this.image=new Fa({width:n,height:i}),this.positions={},this.uploaded=!1}getDash(n,i){const c=this.getKey(n,i);return this.positions[c]}trim(){const n=this.width,i=this.height=mt(this.nextRow);this.image.resize({width:n,height:i})}getKey(n,i){return n.join(",")+i}getDashRanges(n,i,c){const h=[];let m=n.length%2==1?-n[n.length-1]*c:0,_=n[0]*c,v=!0;h.push({left:m,right:_,isDash:v,zeroLength:n[0]===0});let S=n[0];for(let T=1;T<n.length;T++){v=!v;const P=n[T];m=S*c,S+=P,_=S*c,h.push({left:m,right:_,isDash:v,zeroLength:P===0})}return h}addRoundDash(n,i,c){const h=i/2;for(let m=-c;m<=c;m++){const _=this.width*(this.nextRow+c+m);let v=0,S=n[v];for(let T=0;T<this.width;T++){T/S.right>1&&(S=n[++v]);const P=Math.abs(T-S.left),A=Math.abs(T-S.right),z=Math.min(P,A);let F;const U=m/c*(h+1);if(S.isDash){const X=h-Math.abs(U);F=Math.sqrt(z*z+X*X)}else F=h-Math.sqrt(z*z+U*U);this.image.data[_+T]=Math.max(0,Math.min(255,F+128))}}}addRegularDash(n,i){for(let S=n.length-1;S>=0;--S){const T=n[S],P=n[S+1];T.zeroLength?n.splice(S,1):P&&P.isDash===T.isDash&&(P.left=T.left,n.splice(S,1))}const c=n[0],h=n[n.length-1];c.isDash===h.isDash&&(c.left=h.left-this.width,h.right=c.right+this.width);const m=this.width*this.nextRow;let _=0,v=n[_];for(let S=0;S<this.width;S++){S/v.right>1&&(v=n[++_]);const T=Math.abs(S-v.left),P=Math.abs(S-v.right),A=Math.min(T,P);this.image.data[m+S]=Math.max(0,Math.min(255,(v.isDash?A:-A)+i+128))}}addDash(n,i){const c=this.getKey(n,i);if(this.positions[c])return this.positions[c];const h=i==="round",m=h?7:0,_=2*m+1;if(this.nextRow+_>this.height)return He("LineAtlas out of space"),null;n.length===0&&n.push(1);let v=0;for(let P=0;P<n.length;P++)n[P]<0&&(He("Negative value is found in line dasharray, replacing values with 0"),n[P]=0),v+=n[P];if(v!==0){const P=this.width/v,A=this.getDashRanges(n,this.width,P);h?this.addRoundDash(A,P,m):this.addRegularDash(A,i==="square"?.5*P:0)}const S=this.nextRow+m;this.nextRow+=_;const T={tl:[S,m],br:[v,0]};return this.positions[c]=T,T}}Qt(r5,"LineAtlas");const i5=1*Bs;class o5{constructor(n){const i={},c=[];for(const v in n){const S=n[v],T=i[v]={};for(const P in S.glyphs){const A=S.glyphs[+P];if(!A||A.bitmap.width===0||A.bitmap.height===0)continue;const z=A.metrics.localGlyph?i5:1,F={x:0,y:0,w:A.bitmap.width+2*z,h:A.bitmap.height+2*z};c.push(F),T[P]=F}}const{w:h,h:m}=g2(c),_=new Fa({width:h||1,height:m||1});for(const v in n){const S=n[v];for(const T in S.glyphs){const P=S.glyphs[+T];if(!P||P.bitmap.width===0||P.bitmap.height===0)continue;const A=i[v][T],z=P.metrics.localGlyph?i5:1;Fa.copy(P.bitmap,_,{x:0,y:0},{x:A.x+z,y:A.y+z},P.bitmap)}}this.image=_,this.positions=i}}Qt(o5,"GlyphAtlas");class JP{constructor(n){this.tileID=new Gi(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Wc(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,i,c,h,m){this.status="parsing",this.data=n,this.collisionBoxArray=new dr;const _=new N4(Object.keys(n.layers).sort()),v=new t5(this.tileID,this.promoteId);v.bucketLayerIDs=[];const S={},T=new r5(256,256),P={featureIndex:v,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:T,availableImages:c},A=i.familiesBySource[this.source];for(const Ie in A){const Pe=n.layers[Ie];if(!Pe)continue;let Ke=!1,Ze=!1;for(const tt of A[Ie])tt[0].type==="symbol"?Ke=!0:Ze=!0;if(this.isSymbolTile===!0&&!Ke||this.isSymbolTile===!1&&!Ze)continue;Pe.version===1&&He(`Vector tile source "${this.source}" layer "${Ie}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ut=_.encode(Ie),Pt=[];for(let tt=0;tt<Pe.length;tt++){const yt=Pe.feature(tt),_t=v.getId(yt,Ie);Pt.push({feature:yt,id:_t,index:tt,sourceLayerIndex:ut})}for(const tt of A[Ie]){const yt=tt[0];this.isSymbolTile!==void 0&&yt.type==="symbol"!==this.isSymbolTile||yt.minzoom&&this.zoom<Math.floor(yt.minzoom)||yt.maxzoom&&this.zoom>=yt.maxzoom||yt.visibility!=="none"&&(z2(tt,this.zoom,c),(S[yt.id]=yt.createBucket({index:v.bucketLayerIDs.length,layers:tt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ut,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:c})).populate(Pt,P,this.tileID.canonical,this.tileTransform),v.bucketLayerIDs.push(tt.map(_t=>_t.id)))}}let z,F,U,X;T.trim();const re={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},fe=()=>{if(z)return m(z);if(F&&U&&X){const Ie=new o5(F),Pe=new h4(U,X);for(const Ke in S){const Ze=S[Ke];Ze instanceof Ml?(z2(Ze.layers,this.zoom,c),TP(Ze,F,Ie.positions,U,Pe.iconPositions,this.showCollisionBoxes,c,this.tileID.canonical,this.tileZoom,this.projection)):Ze.hasPattern&&(Ze instanceof Ym||Ze instanceof Gm||Ze instanceof Hp)&&(z2(Ze.layers,this.zoom,c),Ze.addFeatures(P,this.tileID.canonical,Pe.patternPositions,c,this.tileTransform))}this.status="done",m(null,{buckets:xt(S).filter(Ke=>!Ke.isEmpty()),featureIndex:v,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ie.image,lineAtlas:T,imageAtlas:Pe,glyphMap:this.returnDependencies?F:null,iconMap:this.returnDependencies?U:null,glyphPositions:this.returnDependencies?Ie.positions:null})}},Ee=Je(P.glyphDependencies,Ie=>Object.keys(Ie).map(Number));Object.keys(Ee).length?h.send("getGlyphs",{uid:this.uid,stacks:Ee},(Ie,Pe)=>{z||(z=Ie,F=Pe,fe())},void 0,!1,re):F={};const me=Object.keys(P.iconDependencies);me.length?h.send("getImages",{icons:me,source:this.source,tileID:this.tileID,type:"icons"},(Ie,Pe)=>{z||(z=Ie,U=Pe,fe())},void 0,!1,re):U={};const Te=Object.keys(P.patternDependencies);Te.length?h.send("getImages",{icons:Te,source:this.source,tileID:this.tileID,type:"patterns"},(Ie,Pe)=>{z||(z=Ie,X=Pe,fe())},void 0,!1,re):X={},fe()}}function z2(r,n,i){const c=new I(n);for(const h of r)h.recalculate(c,i)}class s5{constructor(n){this.entries={},this.scheduler=n}request(n,i,c,h){const m=this.entries[n]=this.entries[n]||{callbacks:[]};if(m.result){const[_,v]=m.result;return this.scheduler?this.scheduler.add(()=>{h(_,v)},i):h(_,v),()=>{}}return m.callbacks.push(h),m.cancel||(m.cancel=c((_,v)=>{m.result=[_,v];for(const S of m.callbacks)this.scheduler?this.scheduler.add(()=>{S(_,v)},i):S(_,v);setTimeout(()=>delete this.entries[n],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(_=>_!==h),m.callbacks.length||(m.cancel(),delete this.entries[n]))}}}function a5(r,n,i){const c=JSON.stringify(r.request);return r.data&&(this.deduped.entries[c]={result:[null,r.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},h=>{const m=Ir(r.request,(_,v,S,T)=>{_?h(_):v&&h(null,{vectorTile:i?void 0:new h2(new Qm(v)),rawData:v,cacheControl:S,expires:T})});return()=>{m.cancel(),h()}},n)}const l5=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class R2{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,c]=new Uint8Array(n,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=c>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const m=l5[15&c];if(!m)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(n,2,1),[v]=new Uint32Array(n,4,1);return new R2(v,_,m,n)}constructor(n,i=64,c=Float64Array,h){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=c,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const m=l5.indexOf(this.ArrayType),_=2*n*this.ArrayType.BYTES_PER_ELEMENT,v=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-v%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${c}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+v+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+_+v+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+v+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=n)}add(n,i){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=n,this.coords[this._pos++]=i,c}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return L2(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,i,c,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:v}=this,S=[0,m.length-1,0],T=[];for(;S.length;){const P=S.pop()||0,A=S.pop()||0,z=S.pop()||0;if(A-z<=v){for(let re=z;re<=A;re++){const fe=_[2*re],Ee=_[2*re+1];fe>=n&&fe<=c&&Ee>=i&&Ee<=h&&T.push(m[re])}continue}const F=z+A>>1,U=_[2*F],X=_[2*F+1];U>=n&&U<=c&&X>=i&&X<=h&&T.push(m[F]),(P===0?n<=U:i<=X)&&(S.push(z),S.push(F-1),S.push(1-P)),(P===0?c>=U:h>=X)&&(S.push(F+1),S.push(A),S.push(1-P))}return T}within(n,i,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:m,nodeSize:_}=this,v=[0,h.length-1,0],S=[],T=c*c;for(;v.length;){const P=v.pop()||0,A=v.pop()||0,z=v.pop()||0;if(A-z<=_){for(let re=z;re<=A;re++)u5(m[2*re],m[2*re+1],n,i)<=T&&S.push(h[re]);continue}const F=z+A>>1,U=m[2*F],X=m[2*F+1];u5(U,X,n,i)<=T&&S.push(h[F]),(P===0?n-c<=U:i-c<=X)&&(v.push(z),v.push(F-1),v.push(1-P)),(P===0?n+c>=U:i+c>=X)&&(v.push(F+1),v.push(A),v.push(1-P))}return S}}function L2(r,n,i,c,h,m){if(h-c<=i)return;const _=c+h>>1;c5(r,n,_,c,h,m),L2(r,n,i,c,_-1,1-m),L2(r,n,i,_+1,h,1-m)}function c5(r,n,i,c,h,m){for(;h>c;){if(h-c>600){const T=h-c+1,P=i-c+1,A=Math.log(T),z=.5*Math.exp(2*A/3),F=.5*Math.sqrt(A*z*(T-z)/T)*(P-T/2<0?-1:1);c5(r,n,i,Math.max(c,Math.floor(i-P*z/T+F)),Math.min(h,Math.floor(i+(T-P)*z/T+F)),m)}const _=n[2*i+m];let v=c,S=h;for(sf(r,n,c,i),n[2*h+m]>_&&sf(r,n,c,h);v<S;){for(sf(r,n,v,S),v++,S--;n[2*v+m]<_;)v++;for(;n[2*S+m]>_;)S--}n[2*c+m]===_?sf(r,n,c,S):(S++,sf(r,n,S,h)),S<=i&&(c=S+1),i<=S&&(h=S-1)}}function sf(r,n,i,c){O2(r,i,c),O2(n,2*i,2*c),O2(n,2*i+1,2*c+1)}function O2(r,n,i){const c=r[n];r[n]=r[i],r[i]=c}function u5(r,n,i,c){const h=r-i,m=n-c;return h*h+m*m}a.ARRAY_TYPE=po,a.AUTH_ERR_MSG=Me,a.Aabb=Wi,a.Actor=class{constructor(r,n,i){this.target=r,this.parent=n,this.mapId=i,this.callbacks={},this.cancelCallbacks={},$t(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ut()?r:w,this.scheduler=new GP}send(r,n,i,c,h=!1,m){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=m,this.callbacks[_]=i);const v=Lt(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:r,hasCallback:!!i,targetMapId:c,mustQueue:h,sourceMapId:this.mapId,data:bl(n,v)},v),{cancel:()=>{i&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(r){const n=r.data,i=n.id;if(i&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const c=this.cancelCallbacks[i];delete this.cancelCallbacks[i],c&&c.cancel()}else if(n.mustQueue||Ut()){const c=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add(()=>this.processTask(i,n),c&&c.metadata||{type:"message"})}else this.processTask(i,n)}processTask(r,n){if(n.type==="<response>"){const i=this.callbacks[r];delete this.callbacks[r],i&&(n.error?i(Aa(n.error)):i(null,Aa(n.data)))}else{const i=Lt(this.globalScope)?void 0:[],c=n.hasCallback?(m,_)=>{delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:m?bl(m):null,data:bl(_,i)},i)}:m=>{},h=Aa(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,h,c);else if(this.parent.getWorkerSource){const m=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,m[0],h.source)[m[1]](h,c)}else c(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.CanonicalTileID=Xm,a.Color=Hr,a.ColorMode=ia,a.CullFaceMode=Fs,a.DEMData=hg,a.DataConstantProperty=Z,a.DedupedRequest=s5,a.DepthMode=Sd,a.EXTENT=_n,a.Elevation=class{isDataAvailableAtPoint(r){const n=this._source();if(this.isUsingMockSource()||!n||r.y<0||r.y>1)return!1;const i=n.getSource().maxzoom,c=1<<i,h=Math.floor(r.x),m=Math.floor((r.x-h)*c),_=Math.floor(r.y*c),v=this.findDEMTileFor(new Gi(i,h,i,m,_));return!(!v||!v.dem)}getAtPointOrZero(r,n=0){return this.getAtPoint(r,n)||0}getAtPoint(r,n,i=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const c=this._source();if(!c||r.y<0||r.y>1)return n;const h=c.getSource().maxzoom,m=1<<h,_=Math.floor(r.x),v=r.x-_,S=new Gi(h,_,h,Math.floor(v*m),Math.floor(r.y*m)),T=this.findDEMTileFor(S);if(!T||!T.dem)return n;const P=T.dem,A=1<<T.tileID.canonical.z,z=(v*A-T.tileID.canonical.x)*P.dim,F=(r.y*A-T.tileID.canonical.y)*P.dim,U=Math.floor(z),X=Math.floor(F);return(i?this.exaggeration():1)*Zn(Zn(P.get(U,X),P.get(U,X+1),F-X),Zn(P.get(U+1,X),P.get(U+1,X+1),F-X),z-U)}getAtTileOffset(r,n,i){const c=1<<r.canonical.z;return this.getAtPointOrZero(new cd(r.wrap+(r.canonical.x+n/_n)/c,(r.canonical.y+i/_n)/c))}getAtTileOffsetFunc(r,n,i,c){return h=>{const m=this.getAtTileOffset(r,h.x,h.y),_=c.upVector(r.canonical,h.x,h.y);return Ao(_,_,m*c.upVectorScale(r.canonical,n,i).metersToTile),_}}getForTilePoints(r,n,i,c){if(this.isUsingMockSource())return!1;const h=pg.create(this,r,c);return!!h&&(n.forEach(m=>{m[2]=this.exaggeration()*h.getElevationAt(m[0],m[1],i)}),!0)}getMinMaxForTile(r){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(r);if(!n||!n.dem)return null;const i=n.dem.tree,c=n.tileID,h=1<<r.canonical.z-c.canonical.z;let m=r.canonical.x/h-c.canonical.x,_=r.canonical.y/h-c.canonical.y,v=0;for(let S=0;S<r.canonical.z-c.canonical.z&&!i.leaves[v];S++){m*=2,_*=2;const T=2*Math.floor(_)+Math.floor(m);v=i.childOffsets[v]+T,m%=1,_%=1}return{min:this.exaggeration()*i.minimums[v],max:this.exaggeration()*i.maximums[v]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(r,n,i){throw new Error("Pure virtual method called.")}pointCoordinate(r){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(r){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},a.ErrorEvent=bs,a.EvaluationParameters=I,a.Event=Sa,a.Evented=lc,a.FillExtrusionBucket=Hp,a.Frustum=V_,a.FrustumCorners=U_,a.GLOBE_RADIUS=Js,a.GLOBE_SCALE_MATCH_LATITUDE=45,a.GLOBE_ZOOM_THRESHOLD_MAX=cw,a.GLOBE_ZOOM_THRESHOLD_MIN=W_,a.GlobeSharedBuffers=class{constructor(r){this._createGrid(r),this._createPoles(r)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const r of this._poleSegments)r.destroy();for(const r of this._gridSegments)r.withSkirts.destroy(),r.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const r of this._wireframeSegments)r.destroy()}}_fillGridMeshWithLods(r,n){const i=new kt,c=new ln,h=[],m=r+1+2,_=n[0]+1,v=n[0]+1+(1+n.length),S=(T,P,A)=>{let z=T===m-1?T-2:T===0?T:T-1;return z+=A?24575:0,[z,P]};for(let T=0;T<m;++T)i.emplaceBack(...S(T,0,!0));for(let T=0;T<_;++T)for(let P=0;P<m;++P)i.emplaceBack(...S(P,T,(P===0||P===m-1)&&!0));for(let T=0;T<n.length;++T){const P=n[T];for(let A=0;A<m;++A)i.emplaceBack(...S(A,P,!0))}for(let T=0;T<n.length;++T){const P=c.length,A=n[T]+1+2,z=new ln;for(let X=0;X<A-1;X++){const re=X===A-2,fe=re?m*(v-n.length+T-X):m;for(let Ee=0;Ee<m-1;Ee++){const me=X*m+Ee;X===0||re||Ee===0||Ee===m-2?(z.emplaceBack(me+1,me,me+fe),z.emplaceBack(me+fe,me+fe+1,me+1)):(c.emplaceBack(me+1,me,me+fe),c.emplaceBack(me+fe,me+fe+1,me+1))}}const F=Jr.simpleSegment(0,P,i.length,c.length-P);for(let X=0;X<z.uint16.length;X+=3)c.emplaceBack(z.uint16[X],z.uint16[X+1],z.uint16[X+2]);const U=Jr.simpleSegment(0,P,i.length,c.length-P);h.push({withoutSkirts:F,withSkirts:U})}return{vertices:i,indices:c,segments:h}}_createGrid(r){const n=this._fillGridMeshWithLods($c,Op);this._gridSegments=n.segments,this._gridBuffer=r.createVertexBuffer(n.vertices,Lp.members),this._gridIndexBuffer=r.createIndexBuffer(n.indices,!0)}_createPoles(r){const n=new ln;for(let h=0;h<=$c;h++)n.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=r.createIndexBuffer(n,!0);const i=new ur,c=new ur;this._poleSegments=[];for(let h=0,m=0;h<W_;h++){const _=360/(1<<h);i.emplaceBack(0,-Js,0,.5,0),c.emplaceBack(0,-Js,0,.5,1);for(let v=0;v<=$c;v++){const S=v/$c,T=Zn(0,_,S),[P,A,z]=sd(GE,HE,T,Js);i.emplaceBack(P,A,z,S,0),c.emplaceBack(P,A,z,S,1)}this._poleSegments.push(Jr.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=r.createVertexBuffer(i,aw,!1),this._poleSouthVertexBuffer=r.createVertexBuffer(c,aw,!1)}getGridBuffers(r,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[r].withSkirts:this._gridSegments[r].withoutSkirts]}getPoleBuffers(r){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[r]]}getWirefameBuffers(r,n){if(!this._wireframeSegments){const i=new mi,c=$c,h=c+1+2,m=1;this._wireframeSegments=[];for(let _=0,v=0;_<Op.length;_++){const S=Op[_];for(let P=m;P<S+m;P++)for(let A=m;A<c+m;A++){const z=P*h+A;i.emplaceBack(z,z+1),i.emplaceBack(z,z+h),i.emplaceBack(z,z+h+1)}const T=S*c*3;this._wireframeSegments.push(Jr.simpleSegment(0,v,(S+1)*h,T)),v+=T}this._wireframeIndexBuffer=r.createIndexBuffer(i)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},a.GlyphManager=_d,a.ImagePosition=y2,a.KDBush=R2,a.LivePerformanceUtils=di,a.LngLat=hr,a.LngLatBounds=Cl,a.LocalGlyphMode=v2,a.MAX_MERCATOR_LATITUDE=Ai,a.MercatorCoordinate=cd,a.ONE_EM=bi,a.OverscaledTileID=Gi,a.PerformanceMarkers=Jn,a.Point=le,a.Properties=ve,a.RGBAImage=fo,a.Ray=j_,a.RequestManager=class{constructor(r,n,i){this._transformRequestFn=r,this._customAccessToken=n,this._silenceAuthErrors=!!i,this._createSkuToken()}_createSkuToken(){const r=function(){let n="";for(let i=0;i<10;i++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",N,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(r,n){return this._transformRequestFn&&this._transformRequestFn(r,n)||{url:r}}normalizeStyleURL(r,n){if(!Le(r))return r;const i=zt(r);return i.path=`/styles/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||n)}normalizeGlyphsURL(r,n){if(!Le(r))return r;const i=zt(r);return i.path=`/fonts/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||n)}normalizeSourceURL(r,n,i,c){if(!Le(r))return r;const h=zt(r);return h.path=`/v4/${h.authority}.json`,h.params.push("secure"),i&&h.params.push(`language=${i}`),c&&h.params.push(`worldview=${c}`),this._makeAPIURL(h,this._customAccessToken||n)}normalizeSpriteURL(r,n,i,c){const h=zt(r);return Le(r)?(h.path=`/styles/v1${h.path}/sprite${n}${i}`,this._makeAPIURL(h,this._customAccessToken||c)):(h.path+=`${n}${i}`,Mt(h))}normalizeTileURL(r,n,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Le(r))return r;const c=zt(r);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||i&&c.authority!=="raster"&&i===512?"@2x":""}${R.supported?".webp":"$1"}`),c.authority==="raster"?c.path=`/${D.RASTER_URL_PREFIX}${c.path}`:(c.path=c.path.replace(/^.+\/v4\//,"/"),c.path=`/${D.TILE_URL_VERSION}${c.path}`);const h=this._customAccessToken||function(m){for(const _ of m){const v=_.match(/^access_token=(.*)$/);if(v)return v[1]}return null}(c.params)||D.ACCESS_TOKEN;return D.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&c.params.push(`sku=${this._skuToken}`),this._makeAPIURL(c,h)}canonicalizeTileURL(r,n){const i=zt(r);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return r;let c="mapbox://";i.path.match(/^\/raster\/v1\//)?c+=`raster/${i.path.replace(`/${D.RASTER_URL_PREFIX}/`,"")}`:c+=`tiles/${i.path.replace(`/${D.TILE_URL_VERSION}/`,"")}`;let h=i.params;return n&&(h=h.filter(m=>!m.match(/^access_token=/))),h.length&&(c+=`?${h.join("&")}`),c}canonicalizeTileset(r,n){const i=!!n&&Le(n),c=[];for(const h of r.tiles||[])We(h)?c.push(this.canonicalizeTileURL(h,i)):c.push(h);return c}_makeAPIURL(r,n){const i="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",c=zt(D.API_URL);if(r.protocol=c.protocol,r.authority=c.authority,r.protocol==="http"){const h=r.params.indexOf("secure");h>=0&&r.params.splice(h,1)}if(c.path!=="/"&&(r.path=`${c.path}${r.path}`),!D.REQUIRE_ACCESS_TOKEN)return Mt(r);if(n=n||D.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${i}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${i}`)}return r.params=r.params.filter(h=>h.indexOf("access_token")===-1),r.params.push(`access_token=${n||""}`),Mt(r)}},a.ResourceType=tn,a.SegmentVector=Jr,a.SourceCache=Gc,a.StencilMode=I2,a.StructArrayLayout1ui2=ho,a.StructArrayLayout2f1f2i16=bn,a.StructArrayLayout2i4=kt,a.StructArrayLayout2ui4=mi,a.StructArrayLayout3f12=jn,a.StructArrayLayout3ui6=ln,a.StructArrayLayout4i8=ft,a.StructArrayLayout5f20=ur,a.Texture=rf,a.Tile=P2,a.Transitionable=q,a.Uniform1f=Dm,a.Uniform1i=class extends Ra{constructor(r){super(r),this.current=0}set(r,n,i){this.fetchUniformLocation(r,n)&&this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},a.Uniform2f=class extends Ra{constructor(r){super(r),this.current=[0,0]}set(r,n,i){this.fetchUniformLocation(r,n)&&(i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1])))}},a.Uniform3f=class extends Ra{constructor(r){super(r),this.current=[0,0,0]}set(r,n,i){this.fetchUniformLocation(r,n)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2])))}},a.Uniform4f=W3,a.UniformColor=G3,a.UniformMatrix2f=class extends Ra{constructor(r){super(r),this.current=ME}set(r,n,i){if(this.fetchUniformLocation(r,n)){for(let c=0;c<4;c++)if(i[c]!==this.current[c]){this.current=i,this.gl.uniformMatrix2fv(this.location,!1,i);break}}}},a.UniformMatrix3f=class extends Ra{constructor(r){super(r),this.current=PE}set(r,n,i){if(this.fetchUniformLocation(r,n)){for(let c=0;c<9;c++)if(i[c]!==this.current[c]){this.current=i,this.gl.uniformMatrix3fv(this.location,!1,i);break}}}},a.UniformMatrix4f=class extends Ra{constructor(r){super(r),this.current=kE}set(r,n,i){if(this.fetchUniformLocation(r,n)){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let c=1;c<16;c++)if(i[c]!==this.current[c]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}}},a.UnwrappedTileID=Kw,a.ValidationError=Jt,a.VectorTileFeature=qm,a.VectorTileWorkerSource=class extends lc{constructor(r,n,i,c,h){super(),this.actor=r,this.layerIndex=n,this.availableImages=i,this.loadVectorData=h||a5,this.loading={},this.loaded={},this.deduped=new s5(r.scheduler),this.isSpriteLoaded=c,this.scheduler=r.scheduler}loadTile(r,n){const i=r.uid,c=r&&r.request,h=c&&c.collectResourceTiming,m=this.loading[i]=new JP(r);m.abort=this.loadVectorData(r,(_,v)=>{const S=!this.loading[i];if(delete this.loading[i],S||_||!v)return m.status="done",S||(this.loaded[i]=m),n(_);const T=v.rawData,P={};v.expires&&(P.expires=v.expires),v.cacheControl&&(P.cacheControl=v.cacheControl),m.vectorTile=v.vectorTile||new h2(new Qm(T));const A=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(z,F)=>{if(z||!F)return n(z);const U={};if(h){const X=il(c);X.length>0&&(U.resourceTiming=JSON.parse(JSON.stringify(X)))}n(null,gt({rawTileData:T.slice(0)},F,P,U))})};this.isSpriteLoaded?A():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(A,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):A()}),this.loaded=this.loaded||{},this.loaded[i]=m})}reloadTile(r,n){const i=this.loaded,c=r.uid,h=this;if(i&&i[c]){const m=i[c];m.showCollisionBoxes=r.showCollisionBoxes,m.enableTerrain=!!r.enableTerrain,m.projection=r.projection,m.tileTransform=Wc(r.tileID.canonical,r.projection);const _=(v,S)=>{const T=m.reloadCallback;T&&(delete m.reloadCallback,m.parse(m.vectorTile,h.layerIndex,this.availableImages,h.actor,T)),n(v,S)};m.status==="parsing"?m.reloadCallback=_:m.status==="done"&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,_):_())}}abortTile(r,n){const i=r.uid,c=this.loading[i];c&&(c.abort&&c.abort(),delete this.loading[i]),n()}removeTile(r,n){const i=this.loaded,c=r.uid;i&&i[c]&&delete i[c],n()}},a.WritingMode=zo,a.ZoomDependentExpression=Ec,a.add=Oa,a.addDynamicAttributes=cg,a.adjoint=function(r,n){var i=n[0],c=n[1],h=n[2],m=n[3],_=n[4],v=n[5],S=n[6],T=n[7],P=n[8];return r[0]=_*P-v*T,r[1]=h*T-c*P,r[2]=c*v-h*_,r[3]=v*S-m*P,r[4]=i*P-h*S,r[5]=h*m-i*v,r[6]=m*T-_*S,r[7]=c*S-i*T,r[8]=i*_-c*m,r},a.asyncAll=nt,a.bezier=Be,a.bindAll=$t,a.boundsAttributes=V4,a.bufferConvexPolygon=function(r,n){const i=[];for(let c=0;c<r.length;c++){const h=Ne(c-1,-1,r.length-1),m=Ne(c+1,-1,r.length-1),_=r[c],v=r[m],S=r[h].sub(_).unit(),T=v.sub(_).unit(),P=T.angleWithSep(S.x,S.y),A=S.add(T).unit().mult(-1*n/Math.sin(P/2));i.push(_.add(A))}return i},a.cacheEntryPossiblyAdded=function(r){Gt++,Gt>Cn&&(r.getActor().send("enforceCacheSizeLimit",un),Gt=0)},a.calculateGlobeLabelMatrix=function(r,n){const{x:i,y:c}=r.point,h=fw(i,c,r.worldSize/r._pixelsPerMercatorPixel,0,0);return Oc(h,h,q_(Qs(n)))},a.calculateGlobeMatrix=function(r){const{x:n,y:i}=r.point,{lng:c,lat:h}=r._center;return fw(n,i,r.worldSize,c,h)},a.calculateGlobeMercatorMatrix=function(r){const n=r.pixelsPerMeter,i=n/Ls(1,r.center.lat),c=zs(new Float64Array(16));return Mp(c,c,[r.point.x,r.point.y,0]),Bc(c,c,[i,i,n]),Float32Array.from(c)},a.circumferenceAtLatitude=X_,a.clamp=Se,a.clearTileCache=function(r){if(!sn())return;const n=w.caches.delete(Gn);r&&n.catch(r).then(()=>r())},a.clipLine=C4,a.clone=function(r){var n=new po(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n},a.clone$1=St,a.collisionCircleLayout=Yk,a.config=D,a.conjugate=function(r,n){return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[3]=n[3],r},a.create=function(){var r=new po(16);return po!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},a.create$1=Z3,a.createExpression=_l,a.createLayout=je,a.createStyleLayer=function(r){return r.type==="custom"?new jP(r):new VP[r.type](r)},a.cross=N_,a.degToRad=Fe,a.distance=function(r,n){return Math.hypot(n[0]-r[0],n[1]-r[1],n[2]-r[2])},a.div=function(r,n,i){return r[0]=n[0]/i[0],r[1]=n[1]/i[1],r[2]=n[2]/i[2],r},a.dot=es,a.earthRadius=$p,a.ease=Ae,a.easeCubicInOut=he,a.ecefToLatLng=function([r,n,i]){const c=Math.hypot(r,n,i),h=Math.atan2(r,i),m=.5*Math.PI-Math.acos(-n/c);return new hr(be(h),be(m))},a.emitValidationErrors=Em,a.endsWith=at,a.enforceCacheSizeLimit=function(r){an(),Sn&&Sn.then(n=>{n.keys().then(i=>{for(let c=0;c<i.length-r;c++)n.delete(i[c])})})},a.evaluateSizeForFeature=Km,a.evaluateSizeForZoom=fd,a.evaluateVariableOffset=I4,a.evented=x,a.exactEquals=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]},a.exactEquals$1=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]},a.exported=vs,a.exported$1=R,a.extend=gt,a.extend$1=ws,a.fillExtrusionHeightLift=Zw,a.filterObject=it,a.fromMat4=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[4],r[4]=n[5],r[5]=n[6],r[6]=n[8],r[7]=n[9],r[8]=n[10],r},a.fromQuat=function(r,n){var i=n[0],c=n[1],h=n[2],m=n[3],_=i+i,v=c+c,S=h+h,T=i*_,P=c*_,A=c*v,z=h*_,F=h*v,U=h*S,X=m*_,re=m*v,fe=m*S;return r[0]=1-A-U,r[1]=P+fe,r[2]=z-re,r[3]=0,r[4]=P-fe,r[5]=1-T-U,r[6]=F+X,r[7]=0,r[8]=z+re,r[9]=F-X,r[10]=1-T-A,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},a.fromRotation=function(r,n){var i=Math.sin(n),c=Math.cos(n);return r[0]=c,r[1]=i,r[2]=0,r[3]=-i,r[4]=c,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},a.fromScaling=Y3,a.furthestTileCorner=function(r){const n=Math.round((r+45+360)%360/90)%4;return we[n]},a.getAABBPointSquareDist=function(r,n,i){let c=0;for(let h=0;h<2;++h){const m=i?i[h]:0;r[h]>m&&(c+=(r[h]-m)*(r[h]-m)),n[h]<m&&(c+=(m-n[h])*(m-n[h]))}return c},a.getAnchorAlignment=x2,a.getAnchorJustification=w2,a.getBounds=function(r){let n=1/0,i=1/0,c=-1/0,h=-1/0;for(const m of r)n=Math.min(n,m.x),i=Math.min(i,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y);return{min:new le(n,i),max:new le(c,h)}},a.getColumn=En,a.getDefaultExportFromCjs=G,a.getGridMatrix=function(r,n,i,c){const h=n.getNorth(),m=n.getSouth(),_=n.getWest(),v=n.getEast(),S=1<<r.z,T=v-_,P=h-m,A=T/$c,z=-P/Op[i],F=[0,A,0,z,0,0,h,_,0];if(r.z>0){const U=180/c;X3(F,F,[U/T+1,0,0,0,U/P+1,0,-.5*U/A,.5*U/z,1])}return F[2]=S,F[5]=r.x,F[8]=r.y,F},a.getImage=_e,a.getJSON=function(r,n){return qn(gt(r,{type:"json"}),n)},a.getLatitudinalLod=function(r){const n=Ai-5;r=Se(r,-n,n)/n*90;const i=Math.pow(Math.abs(Math.sin(Fe(r))),3);return Math.round(i*(Op.length-1))},a.getMapSessionAPI=Kt,a.getPerformanceMeasurement=il,a.getProjection=F4,a.getRTLTextPluginStatus=b,a.getReferrer=Fn,a.getTilePoint=function(r,{x:n,y:i},c=0){return new le(((n-c)*r.scale-r.x)*_n,(i*r.scale-r.y)*_n)},a.getTileVec3=function(r,n,i=0){return od(((n.x-i)*r.scale-r.x)*_n,(n.y*r.scale-r.y)*_n,_w(n.z,n.y))},a.getVideo=function(r,n){const i=w.document.createElement("video");i.muted=!0,i.onloadstart=function(){n(null,i)};for(let c=0;c<r.length;c++){const h=w.document.createElement("source");$r(r[c])||(i.crossOrigin="Anonymous"),h.src=r[c],i.appendChild(h)}return{cancel:()=>{}}},a.globeCenterToScreenPoint=function(r){const n=[0,0,0],i=zs(new Float64Array(16));return Oc(i,r.pixelMatrix,r.globeMatrix),qr(n,n,i),new le(n[0],n[1])},a.globeDenormalizeECEF=q_,a.globeECEFOrigin=function(r,n){const i=[0,0,0];return qr(i,i,Fp(Qs(n.canonical))),qr(i,i,r),i},a.globeMetersToEcef=Lm,a.globeNormalizeECEF=Fp,a.globePixelsToTileUnits=function(r,n){return _n/(512*Math.pow(2,r))*Bm(Qs(n))},a.globePoleMatrixForTile=function(r,n,i){const c=zs(new Float64Array(16)),h=(n/(1<<r)-.5)*Math.PI*2;return Rm(c,i.globeMatrix,h),Float32Array.from(c)},a.globeTileBounds=Qs,a.globeTiltAtLngLat=mw,a.globeToMercatorTransition=ld,a.globeUseCustomAntiAliasing=function(r,n,i){const c=ld(i.zoom),h=r.style.map._antialias,m=!!n.extStandardDerivatives,_=n.extStandardDerivativesForceOff||r.terrain&&r.terrain.exaggeration()>0;return c===0&&!h&&!_&&m},a.identity=zs,a.identity$1=iw,a.invert=O_,a.isFullscreen=function(){return!!w.document.fullscreenElement||!!w.document.webkitFullscreenElement},a.isLngLatBehindGlobe=Z_,a.isMapAuthenticated=function(r){return dn.has(r)},a.isMapboxURL=Le,a.isSafariWithAntialiasingBug=function(r){const n=r.navigator?r.navigator.userAgent:null;return!!Lt(r)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.latFromMercatorY=Ii,a.latLngToECEF=ad,a.len=FE,a.length=Ip,a.length$1=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},a.lngFromMercatorX=Do,a.loadVectorTile=a5,a.makeRequest=qn,a.mapValue=function(r,n,i,c,h){return Se((r-n)/(i-n)*(h-c)+c,c,h)},a.mercatorScale=xw,a.mercatorXfromLng=ea,a.mercatorYfromLat=ta,a.mercatorZfromAltitude=Ls,a.mul=OE,a.mul$1=BE,a.multiply=Oc,a.multiply$1=X3,a.multiply$2=Q3,a.nextPowerOfTwo=mt,a.normalize=Vi,a.normalize$1=$E,a.normalize$2=nw,a.number=Zn,a.ortho=function(r,n,i,c,h,m,_){var v=1/(n-i),S=1/(c-h),T=1/(m-_);return r[0]=-2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*S,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*T,r[11]=0,r[12]=(n+i)*v,r[13]=(h+c)*S,r[14]=(_+m)*T,r[15]=1,r},a.pbf=i4,a.perspective=function(r,n,i,c,h){var m,_=1/Math.tan(n/2);return r[0]=_/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=_,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,h!=null&&h!==1/0?(r[10]=(h+c)*(m=1/(c-h)),r[14]=2*h*c*m):(r[10]=-1,r[14]=-2*c),r},a.pick=function(r,n){const i={};for(let c=0;c<n.length;c++){const h=n[c];h in r&&(i[h]=r[h])}return i},a.plugin=k,a.pointGeometry=ie,a.polesInViewport=function(r){const n=zs(new Float64Array(16));Oc(n,r.pixelMatrix,r.globeMatrix);const i=[0,ts,0],c=[0,ns,0];return qr(i,i,n),qr(c,c,n),[i[0]>0&&i[0]<=r.width&&i[1]>0&&i[1]<=r.height&&!Z_(r,new hr(r.center.lat,90)),c[0]>0&&c[0]<=r.width&&c[1]>0&&c[1]<=r.height&&!Z_(r,new hr(r.center.lat,-90))]},a.polygonContainsPoint=Uc,a.polygonIntersectsBox=Ew,a.polygonIntersectsPolygon=ww,a.polygonizeBounds=function(r,n,i=0,c=!0){const h=new le(i,i),m=r.sub(h),_=n.add(h),v=[m,new le(_.x,m.y),_,new le(m.x,_.y)];return c&&v.push(m.clone()),v},a.posAttributes=Lp,a.postMapLoadEvent=yr,a.postPerformanceEvent=Qe,a.postTurnstileEvent=$n,a.potpack=g2,a.prevPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},a.radToDeg=be,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.registerForPluginStateChange=function(r){return r({pluginStatus:f,pluginURL:s}),x.on("pluginStateChange",r),r},a.removeAuthState=function(r){dn.delete(r)},a.renderColorRamp=r2,a.resample=vw,a.rotateX=B_,a.rotateX$1=ow,a.rotateY=Rm,a.rotateY$1=sw,a.rotateZ=function(r,n,i){var c=Math.sin(i),h=Math.cos(i),m=n[0],_=n[1],v=n[2],S=n[3],T=n[4],P=n[5],A=n[6],z=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=m*h+T*c,r[1]=_*h+P*c,r[2]=v*h+A*c,r[3]=S*h+z*c,r[4]=T*h-m*c,r[5]=P*h-_*c,r[6]=A*h-v*c,r[7]=z*h-S*c,r},a.rotateZ$1=function(r,n,i){i*=.5;var c=n[0],h=n[1],m=n[2],_=n[3],v=Math.sin(i),S=Math.cos(i);return r[0]=c*S+h*v,r[1]=h*S-c*v,r[2]=m*S+_*v,r[3]=_*S-m*v,r},a.scale=Bc,a.scale$1=tw,a.scale$2=Ao,a.scaleAndAdd=zp,a.set=function(r,n,i,c){return r[0]=n,r[1]=i,r[2]=c,r},a.setCacheLimits=function(r,n){un=r,Cn=n},a.setColumn=function(r,n,i){r[4*n+0]=i[0],r[4*n+1]=i[1],r[4*n+2]=i[2],r[4*n+3]=i[3]},a.setRTLTextPlugin=function(r,n,i=!1){if(f===Tp||f===Cp||f===Ep)throw new Error("setRTLTextPlugin cannot be called multiple times.");s=vs.resolveURL(r),f=Tp,wl=n,g(),i||E()},a.smoothstep=ke,a.spec=ct,a.squaredLength=function(r){var n=r[0],i=r[1],c=r[2];return n*n+i*i+c*c},a.storeAuthState=function(r,n){n?dn.add(r):dn.delete(r)},a.sub=Rs,a.subtract=$_,a.symbolSize=Kk,a.tileAABB=function(r,n,i,c,h,m,_,v,S){if(S.name==="globe")return WE(r,n,new Xm(i,c,h));const T=Wc({z:i,x:c,y:h},S);return new Wi([(m+T.x/T.scale)*n,n*(T.y/T.scale),_],[(m+T.x2/T.scale)*n,n*(T.y2/T.scale),v])},a.tileCornersToBounds=Om,a.tileTransform=Wc,a.transformMat3=function(r,n,i){var c=n[0],h=n[1],m=n[2];return r[0]=c*i[0]+h*i[3]+m*i[6],r[1]=c*i[1]+h*i[4]+m*i[7],r[2]=c*i[2]+h*i[5]+m*i[8],r},a.transformMat4=qr,a.transformMat4$1=Fc,a.transformQuat=ew,a.transitionTileAABBinECEF=dw,a.translate=Mp,a.transpose=function(r,n){if(r===n){var i=n[1],c=n[2],h=n[5];r[1]=n[3],r[2]=n[6],r[3]=i,r[5]=n[7],r[6]=c,r[7]=h}else r[0]=n[0],r[1]=n[3],r[2]=n[6],r[3]=n[1],r[4]=n[4],r[5]=n[7],r[6]=n[2],r[7]=n[5],r[8]=n[8];return r},a.triggerPluginCompletionEvent=u,a.uniqueId=vt,a.updateGlobeVertexNormal=function(r,n,i,c,h){const m=5*n+2;r.float32[m+0]=i,r.float32[m+1]=c,r.float32[m+2]=h},a.validateCustomStyleLayer=function(r){const n=[],i=r.id;return i===void 0&&n.push({message:`layers.${i}: missing required property "id"`}),r.render===void 0&&n.push({message:`layers.${i}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&n.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),n},a.validateFilter=r=>uo(Ac(r)),a.validateFog=r=>uo(Sm(r)),a.validateLayer=r=>uo(xm(r)),a.validateLight=r=>uo(wm(r)),a.validateSource=r=>uo(bm(r)),a.validateStyle=Cm,a.validateTerrain=r=>uo(xp(r)),a.values=xt,a.vectorTile=Hm,a.version=C,a.warnOnce=He,a.window=w,a.wrap=Ne}),p(["./shared"],function(a){function w(ge){if(typeof ge=="number"||typeof ge=="boolean"||typeof ge=="string"||ge==null)return JSON.stringify(ge);if(Array.isArray(ge)){let te="[";for(const _e of ge)te+=`${w(_e)},`;return`${te}]`}let Q="{";for(const te of Object.keys(ge).sort())Q+=`${te}:${w(ge[te])},`;return`${Q}}`}function C(ge){let Q="";for(const te of a.refProperties)Q+=`/${w(ge[te])}`;return Q}class M{constructor(Q){this.keyCache={},Q&&this.replace(Q)}replace(Q){this._layerConfigs={},this._layers={},this.update(Q,[])}update(Q,te){for(const Me of Q)this._layerConfigs[Me.id]=Me,(this._layers[Me.id]=a.createStyleLayer(Me)).compileFilter(),this.keyCache[Me.id]&&delete this.keyCache[Me.id];for(const Me of te)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const _e=function(Me,Le){const We={};for(let Oe=0;Oe<Me.length;Oe++){const Ge=Le&&Le[Me[Oe].id]||C(Me[Oe]);Le&&(Le[Me[Oe].id]=Ge);let bt=We[Ge];bt||(bt=We[Ge]=[]),bt.push(Me[Oe])}const Ve=[];for(const Oe in We)Ve.push(We[Oe]);return Ve}(a.values(this._layerConfigs),this.keyCache);for(const Me of _e){const Le=Me.map(zt=>this._layers[zt.id]),We=Le[0];if(We.visibility==="none")continue;const Ve=We.source||"";let Oe=this.familiesBySource[Ve];Oe||(Oe=this.familiesBySource[Ve]={});const Ge=We.sourceLayer||"_geojsonTileLayer";let bt=Oe[Ge];bt||(bt=Oe[Ge]=[]),bt.push(Le)}}}class D{loadTile(Q,te){const{uid:_e,encoding:Me,rawImageData:Le,padding:We,buildQuadTree:Ve}=Q,Oe=a.window.ImageBitmap&&Le instanceof a.window.ImageBitmap?this.getImageData(Le,We):Le;te(null,new a.DEMData(_e,Oe,Me,We<1,Ve))}getImageData(Q,te){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Q.width,Q.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Q.width,this.offscreenCanvas.height=Q.height,this.offscreenCanvasContext.drawImage(Q,0,0,Q.width,Q.height);const _e=this.offscreenCanvasContext.getImageData(-te,-te,Q.width+2*te,Q.height+2*te);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),_e}}function R(ge,Q){if(ge.length!==0){$(ge[0],Q);for(var te=1;te<ge.length;te++)$(ge[te],!Q)}}function $(ge,Q){for(var te=0,_e=0,Me=0,Le=ge.length,We=Le-1;Me<Le;We=Me++){var Ve=(ge[Me][0]-ge[We][0])*(ge[We][1]+ge[Me][1]),Oe=te+Ve;_e+=Math.abs(te)>=Math.abs(Ve)?te-Oe+Ve:Ve-Oe+te,te=Oe}te+_e>=0!=!!Q&&ge.reverse()}var V=a.getDefaultExportFromCjs(function ge(Q,te){var _e,Me=Q&&Q.type;if(Me==="FeatureCollection")for(_e=0;_e<Q.features.length;_e++)ge(Q.features[_e],te);else if(Me==="GeometryCollection")for(_e=0;_e<Q.geometries.length;_e++)ge(Q.geometries[_e],te);else if(Me==="Feature")ge(Q.geometry,te);else if(Me==="Polygon")R(Q.coordinates,te);else if(Me==="MultiPolygon")for(_e=0;_e<Q.coordinates.length;_e++)R(Q.coordinates[_e],te);return Q});const B=a.VectorTileFeature.prototype.toGeoJSON;var J={exports:{}},j=a.pointGeometry,N=a.vectorTile.VectorTileFeature,G=Y;function Y(ge,Q){this.options=Q||{},this.features=ge,this.length=ge.length}function K(ge,Q){this.id=typeof ge.id=="number"?ge.id:void 0,this.type=ge.type,this.rawGeometry=ge.type===1?[ge.geometry]:ge.geometry,this.properties=ge.tags,this.extent=Q||4096}Y.prototype.feature=function(ge){return new K(this.features[ge],this.options.extent)},K.prototype.loadGeometry=function(){var ge=this.rawGeometry;this.geometry=[];for(var Q=0;Q<ge.length;Q++){for(var te=ge[Q],_e=[],Me=0;Me<te.length;Me++)_e.push(new j(te[Me][0],te[Me][1]));this.geometry.push(_e)}return this.geometry},K.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ge=this.geometry,Q=1/0,te=-1/0,_e=1/0,Me=-1/0,Le=0;Le<ge.length;Le++)for(var We=ge[Le],Ve=0;Ve<We.length;Ve++){var Oe=We[Ve];Q=Math.min(Q,Oe.x),te=Math.max(te,Oe.x),_e=Math.min(_e,Oe.y),Me=Math.max(Me,Oe.y)}return[Q,_e,te,Me]},K.prototype.toGeoJSON=N.prototype.toGeoJSON;var oe=a.pbf,ie=G;function de(ge){var Q=new oe;return function(te,_e){for(var Me in te.layers)_e.writeMessage(3,le,te.layers[Me])}(ge,Q),Q.finish()}function le(ge,Q){var te;Q.writeVarintField(15,ge.version||1),Q.writeStringField(1,ge.name||""),Q.writeVarintField(5,ge.extent||4096);var _e={keys:[],values:[],keycache:{},valuecache:{}};for(te=0;te<ge.length;te++)_e.feature=ge.feature(te),Q.writeMessage(2,ye,_e);var Me=_e.keys;for(te=0;te<Me.length;te++)Q.writeStringField(3,Me[te]);var Le=_e.values;for(te=0;te<Le.length;te++)Q.writeMessage(4,he,Le[te])}function ye(ge,Q){var te=ge.feature;te.id!==void 0&&Q.writeVarintField(1,te.id),Q.writeMessage(2,Ce,ge),Q.writeVarintField(3,te.type),Q.writeMessage(4,we,te)}function Ce(ge,Q){var te=ge.feature,_e=ge.keys,Me=ge.values,Le=ge.keycache,We=ge.valuecache;for(var Ve in te.properties){var Oe=te.properties[Ve],Ge=Le[Ve];if(Oe!==null){Ge===void 0&&(_e.push(Ve),Le[Ve]=Ge=_e.length-1),Q.writeVarint(Ge);var bt=typeof Oe;bt!=="string"&&bt!=="boolean"&&bt!=="number"&&(Oe=JSON.stringify(Oe));var zt=bt+":"+Oe,Mt=We[zt];Mt===void 0&&(Me.push(Oe),We[zt]=Mt=Me.length-1),Q.writeVarint(Mt)}}}function Fe(ge,Q){return(Q<<3)+(7&ge)}function be(ge){return ge<<1^ge>>31}function we(ge,Q){for(var te=ge.loadGeometry(),_e=ge.type,Me=0,Le=0,We=te.length,Ve=0;Ve<We;Ve++){var Oe=te[Ve],Ge=1;_e===1&&(Ge=Oe.length),Q.writeVarint(Fe(1,Ge));for(var bt=_e===3?Oe.length-1:Oe.length,zt=0;zt<bt;zt++){zt===1&&_e!==1&&Q.writeVarint(Fe(2,bt-1));var Mt=Oe[zt].x-Me,Pn=Oe[zt].y-Le;Q.writeVarint(be(Mt)),Q.writeVarint(be(Pn)),Me+=Mt,Le+=Pn}_e===3&&Q.writeVarint(Fe(7,1))}}function he(ge,Q){var te=typeof ge;te==="string"?Q.writeStringField(1,ge):te==="boolean"?Q.writeBooleanField(7,ge):te==="number"&&(ge%1!=0?Q.writeDoubleField(3,ge):ge<0?Q.writeSVarintField(6,ge):Q.writeVarintField(5,ge))}J.exports=de,J.exports.fromVectorTileJs=de,J.exports.fromGeojsonVt=function(ge,Q){Q=Q||{};var te={};for(var _e in ge)te[_e]=new ie(ge[_e].features,Q),te[_e].name=_e,te[_e].version=Q.version,te[_e].extent=Q.extent;return de({layers:te})},J.exports.GeoJSONWrapper=ie;var Be=a.getDefaultExportFromCjs(J.exports);const Ae={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ge=>ge},Se=Math.fround||(ke=new Float32Array(1),ge=>(ke[0]=+ge,ke[0]));var ke;const Ne=3,nt=5,xt=6;class gt{constructor(Q){this.options=Object.assign(Object.create(Ae),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){const{log:te,minZoom:_e,maxZoom:Me}=this.options;te&&console.time("total time");const Le=`prepare ${Q.length} points`;te&&console.time(Le),this.points=Q;const We=[];for(let Oe=0;Oe<Q.length;Oe++){const Ge=Q[Oe];if(!Ge.geometry)continue;const[bt,zt]=Ge.geometry.coordinates,Mt=Se(ht(bt)),Pn=Se(mt(zt));We.push(Mt,Pn,1/0,Oe,-1,1),this.options.reduce&&We.push(0)}let Ve=this.trees[Me+1]=this._createTree(We);te&&console.timeEnd(Le);for(let Oe=Me;Oe>=_e;Oe--){const Ge=+Date.now();Ve=this.trees[Oe]=this._createTree(this._cluster(Ve,Oe)),te&&console.log("z%d: %d clusters in %dms",Oe,Ve.numItems,+Date.now()-Ge)}return te&&console.timeEnd("total time"),this}getClusters(Q,te){let _e=((Q[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,Q[1]));let Le=Q[2]===180?180:((Q[2]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)_e=-180,Le=180;else if(_e>Le){const zt=this.getClusters([_e,Me,180,We],te),Mt=this.getClusters([-180,Me,Le,We],te);return zt.concat(Mt)}const Ve=this.trees[this._limitZoom(te)],Oe=Ve.range(ht(_e),mt(We),ht(Le),mt(Me)),Ge=Ve.data,bt=[];for(const zt of Oe){const Mt=this.stride*zt;bt.push(Ge[Mt+nt]>1?rt(Ge,Mt,this.clusterProps):this.points[Ge[Mt+Ne]])}return bt}getChildren(Q){const te=this._getOriginId(Q),_e=this._getOriginZoom(Q),Me="No cluster with the specified id.",Le=this.trees[_e];if(!Le)throw new Error(Me);const We=Le.data;if(te*this.stride>=We.length)throw new Error(Me);const Ve=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),Oe=Le.within(We[te*this.stride],We[te*this.stride+1],Ve),Ge=[];for(const bt of Oe){const zt=bt*this.stride;We[zt+4]===Q&&Ge.push(We[zt+nt]>1?rt(We,zt,this.clusterProps):this.points[We[zt+Ne]])}if(Ge.length===0)throw new Error(Me);return Ge}getLeaves(Q,te,_e){const Me=[];return this._appendLeaves(Me,Q,te=te||10,_e=_e||0,0),Me}getTile(Q,te,_e){const Me=this.trees[this._limitZoom(Q)],Le=Math.pow(2,Q),{extent:We,radius:Ve}=this.options,Oe=Ve/We,Ge=(_e-Oe)/Le,bt=(_e+1+Oe)/Le,zt={features:[]};return this._addTileFeatures(Me.range((te-Oe)/Le,Ge,(te+1+Oe)/Le,bt),Me.data,te,_e,Le,zt),te===0&&this._addTileFeatures(Me.range(1-Oe/Le,Ge,1,bt),Me.data,Le,_e,Le,zt),te===Le-1&&this._addTileFeatures(Me.range(0,Ge,Oe/Le,bt),Me.data,-1,_e,Le,zt),zt.features.length?zt:null}getClusterExpansionZoom(Q){let te=this._getOriginZoom(Q)-1;for(;te<=this.options.maxZoom;){const _e=this.getChildren(Q);if(te++,_e.length!==1)break;Q=_e[0].properties.cluster_id}return te}_appendLeaves(Q,te,_e,Me,Le){const We=this.getChildren(te);for(const Ve of We){const Oe=Ve.properties;if(Oe&&Oe.cluster?Le+Oe.point_count<=Me?Le+=Oe.point_count:Le=this._appendLeaves(Q,Oe.cluster_id,_e,Me,Le):Le<Me?Le++:Q.push(Ve),Q.length===_e)break}return Le}_createTree(Q){const te=new a.KDBush(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<Q.length;_e+=this.stride)te.add(Q[_e],Q[_e+1]);return te.finish(),te.data=Q,te}_addTileFeatures(Q,te,_e,Me,Le,We){for(const Ve of Q){const Oe=Ve*this.stride,Ge=te[Oe+nt]>1;let bt,zt,Mt;if(Ge)bt=vt(te,Oe,this.clusterProps),zt=te[Oe],Mt=te[Oe+1];else{const kn=this.points[te[Oe+Ne]];bt=kn.properties;const[An,$n]=kn.geometry.coordinates;zt=ht(An),Mt=mt($n)}const Pn={type:1,geometry:[[Math.round(this.options.extent*(zt*Le-_e)),Math.round(this.options.extent*(Mt*Le-Me))]],tags:bt};let Bn;Bn=Ge||this.options.generateId?te[Oe+Ne]:this.points[te[Oe+Ne]].id,Bn!==void 0&&(Pn.id=Bn),We.features.push(Pn)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,te){const{radius:_e,extent:Me,reduce:Le,minPoints:We}=this.options,Ve=_e/(Me*Math.pow(2,te)),Oe=Q.data,Ge=[],bt=this.stride;for(let zt=0;zt<Oe.length;zt+=bt){if(Oe[zt+2]<=te)continue;Oe[zt+2]=te;const Mt=Oe[zt],Pn=Oe[zt+1],Bn=Q.within(Oe[zt],Oe[zt+1],Ve),kn=Oe[zt+nt];let An=kn;for(const $n of Bn){const or=$n*bt;Oe[or+2]>te&&(An+=Oe[or+nt])}if(An>kn&&An>=We){let $n,or=Mt*kn,yr=Pn*kn,Nr=-1;const Qe=((zt/bt|0)<<5)+(te+1)+this.points.length;for(const ot of Bn){const Kt=ot*bt;if(Oe[Kt+2]<=te)continue;Oe[Kt+2]=te;const dn=Oe[Kt+nt];or+=Oe[Kt]*dn,yr+=Oe[Kt+1]*dn,Oe[Kt+4]=Qe,Le&&($n||($n=this._map(Oe,zt,!0),Nr=this.clusterProps.length,this.clusterProps.push($n)),Le($n,this._map(Oe,Kt)))}Oe[zt+4]=Qe,Ge.push(or/An,yr/An,1/0,Qe,-1,An),Le&&Ge.push(Nr)}else{for(let $n=0;$n<bt;$n++)Ge.push(Oe[zt+$n]);if(An>1)for(const $n of Bn){const or=$n*bt;if(!(Oe[or+2]<=te)){Oe[or+2]=te;for(let yr=0;yr<bt;yr++)Ge.push(Oe[or+yr])}}}}return Ge}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,te,_e){if(Q[te+nt]>1){const We=this.clusterProps[Q[te+xt]];return _e?Object.assign({},We):We}const Me=this.points[Q[te+Ne]].properties,Le=this.options.map(Me);return _e&&Le===Me?Object.assign({},Le):Le}}function rt(ge,Q,te){return{type:"Feature",id:ge[Q+Ne],properties:vt(ge,Q,te),geometry:{type:"Point",coordinates:[(_e=ge[Q],360*(_e-.5)),Ot(ge[Q+1])]}};var _e}function vt(ge,Q,te){const _e=ge[Q+nt],Me=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,Le=ge[Q+xt],We=Le===-1?{}:Object.assign({},te[Le]);return Object.assign(We,{cluster:!0,cluster_id:ge[Q+Ne],point_count:_e,point_count_abbreviated:Me})}function ht(ge){return ge/360+.5}function mt(ge){const Q=Math.sin(ge*Math.PI/180),te=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return te<0?0:te>1?1:te}function Ot(ge){const Q=(180-360*ge)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}function $t(ge,Q,te,_e){for(var Me,Le=_e,We=te-Q>>1,Ve=te-Q,Oe=ge[Q],Ge=ge[Q+1],bt=ge[te],zt=ge[te+1],Mt=Q+3;Mt<te;Mt+=3){var Pn=at(ge[Mt],ge[Mt+1],Oe,Ge,bt,zt);if(Pn>Le)Me=Mt,Le=Pn;else if(Pn===Le){var Bn=Math.abs(Mt-We);Bn<Ve&&(Me=Mt,Ve=Bn)}}Le>_e&&(Me-Q>3&&$t(ge,Q,Me,_e),ge[Me+2]=Le,te-Me>3&&$t(ge,Me,te,_e))}function at(ge,Q,te,_e,Me,Le){var We=Me-te,Ve=Le-_e;if(We!==0||Ve!==0){var Oe=((ge-te)*We+(Q-_e)*Ve)/(We*We+Ve*Ve);Oe>1?(te=Me,_e=Le):Oe>0&&(te+=We*Oe,_e+=Ve*Oe)}return(We=ge-te)*We+(Ve=Q-_e)*Ve}function Je(ge,Q,te,_e){var Me={id:ge===void 0?null:ge,type:Q,geometry:te,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Le){var We=Le.geometry,Ve=Le.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")it(Le,We);else if(Ve==="Polygon"||Ve==="MultiLineString")for(var Oe=0;Oe<We.length;Oe++)it(Le,We[Oe]);else if(Ve==="MultiPolygon")for(Oe=0;Oe<We.length;Oe++)for(var Ge=0;Ge<We[Oe].length;Ge++)it(Le,We[Oe][Ge])}(Me),Me}function it(ge,Q){for(var te=0;te<Q.length;te+=3)ge.minX=Math.min(ge.minX,Q[te]),ge.minY=Math.min(ge.minY,Q[te+1]),ge.maxX=Math.max(ge.maxX,Q[te]),ge.maxY=Math.max(ge.maxY,Q[te+1])}function St(ge,Q,te,_e){if(Q.geometry){var Me=Q.geometry.coordinates,Le=Q.geometry.type,We=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),Ve=[],Oe=Q.id;if(te.promoteId?Oe=Q.properties[te.promoteId]:te.generateId&&(Oe=_e||0),Le==="Point")Wt(Me,Ve);else if(Le==="MultiPoint")for(var Ge=0;Ge<Me.length;Ge++)Wt(Me[Ge],Ve);else if(Le==="LineString")He(Me,Ve,We,!1);else if(Le==="MultiLineString"){if(te.lineMetrics){for(Ge=0;Ge<Me.length;Ge++)He(Me[Ge],Ve=[],We,!1),ge.push(Je(Oe,"LineString",Ve,Q.properties));return}jt(Me,Ve,We,!1)}else if(Le==="Polygon")jt(Me,Ve,We,!0);else{if(Le!=="MultiPolygon"){if(Le==="GeometryCollection"){for(Ge=0;Ge<Q.geometry.geometries.length;Ge++)St(ge,{id:Oe,geometry:Q.geometry.geometries[Ge],properties:Q.properties},te,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ge=0;Ge<Me.length;Ge++){var bt=[];jt(Me[Ge],bt,We,!0),Ve.push(bt)}}ge.push(Je(Oe,Le,Ve,Q.properties))}}function Wt(ge,Q){Q.push(lt(ge[0])),Q.push(Ut(ge[1])),Q.push(0)}function He(ge,Q,te,_e){for(var Me,Le,We=0,Ve=0;Ve<ge.length;Ve++){var Oe=lt(ge[Ve][0]),Ge=Ut(ge[Ve][1]);Q.push(Oe),Q.push(Ge),Q.push(0),Ve>0&&(We+=_e?(Me*Ge-Oe*Le)/2:Math.sqrt(Math.pow(Oe-Me,2)+Math.pow(Ge-Le,2))),Me=Oe,Le=Ge}var bt=Q.length-3;Q[2]=1,$t(Q,0,bt,te),Q[bt+2]=1,Q.size=Math.abs(We),Q.start=0,Q.end=Q.size}function jt(ge,Q,te,_e){for(var Me=0;Me<ge.length;Me++){var Le=[];He(ge[Me],Le,te,_e),Q.push(Le)}}function lt(ge){return ge/360+.5}function Ut(ge){var Q=Math.sin(ge*Math.PI/180),te=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return te<0?0:te>1?1:te}function Nt(ge,Q,te,_e,Me,Le,We,Ve){if(_e/=Q,Le>=(te/=Q)&&We<_e)return ge;if(We<te||Le>=_e)return null;for(var Oe=[],Ge=0;Ge<ge.length;Ge++){var bt=ge[Ge],zt=bt.geometry,Mt=bt.type,Pn=Me===0?bt.minX:bt.minY,Bn=Me===0?bt.maxX:bt.maxY;if(Pn>=te&&Bn<_e)Oe.push(bt);else if(!(Bn<te||Pn>=_e)){var kn=[];if(Mt==="Point"||Mt==="MultiPoint")Ft(zt,kn,te,_e,Me);else if(Mt==="LineString")Lt(zt,kn,te,_e,Me,!1,Ve.lineMetrics);else if(Mt==="MultiLineString")En(zt,kn,te,_e,Me,!1);else if(Mt==="Polygon")En(zt,kn,te,_e,Me,!0);else if(Mt==="MultiPolygon")for(var An=0;An<zt.length;An++){var $n=[];En(zt[An],$n,te,_e,Me,!0),$n.length&&kn.push($n)}if(kn.length){if(Ve.lineMetrics&&Mt==="LineString"){for(An=0;An<kn.length;An++)Oe.push(Je(bt.id,Mt,kn[An],bt.tags));continue}Mt!=="LineString"&&Mt!=="MultiLineString"||(kn.length===1?(Mt="LineString",kn=kn[0]):Mt="MultiLineString"),Mt!=="Point"&&Mt!=="MultiPoint"||(Mt=kn.length===3?"Point":"MultiPoint"),Oe.push(Je(bt.id,Mt,kn,bt.tags))}}}return Oe.length?Oe:null}function Ft(ge,Q,te,_e,Me){for(var Le=0;Le<ge.length;Le+=3){var We=ge[Le+Me];We>=te&&We<=_e&&(Q.push(ge[Le]),Q.push(ge[Le+1]),Q.push(ge[Le+2]))}}function Lt(ge,Q,te,_e,Me,Le,We){for(var Ve,Oe,Ge=cn(ge),bt=Me===0?un:Cn,zt=ge.start,Mt=0;Mt<ge.length-3;Mt+=3){var Pn=ge[Mt],Bn=ge[Mt+1],kn=ge[Mt+2],An=ge[Mt+3],$n=ge[Mt+4],or=Me===0?Pn:Bn,yr=Me===0?An:$n,Nr=!1;We&&(Ve=Math.sqrt(Math.pow(Pn-An,2)+Math.pow(Bn-$n,2))),or<te?yr>te&&(Oe=bt(Ge,Pn,Bn,An,$n,te),We&&(Ge.start=zt+Ve*Oe)):or>_e?yr<_e&&(Oe=bt(Ge,Pn,Bn,An,$n,_e),We&&(Ge.start=zt+Ve*Oe)):Gn(Ge,Pn,Bn,kn),yr<te&&or>=te&&(Oe=bt(Ge,Pn,Bn,An,$n,te),Nr=!0),yr>_e&&or<=_e&&(Oe=bt(Ge,Pn,Bn,An,$n,_e),Nr=!0),!Le&&Nr&&(We&&(Ge.end=zt+Ve*Oe),Q.push(Ge),Ge=cn(ge)),We&&(zt+=Ve)}var Qe=ge.length-3;Pn=ge[Qe],Bn=ge[Qe+1],kn=ge[Qe+2],(or=Me===0?Pn:Bn)>=te&&or<=_e&&Gn(Ge,Pn,Bn,kn),Qe=Ge.length-3,Le&&Qe>=3&&(Ge[Qe]!==Ge[0]||Ge[Qe+1]!==Ge[1])&&Gn(Ge,Ge[0],Ge[1],Ge[2]),Ge.length&&Q.push(Ge)}function cn(ge){var Q=[];return Q.size=ge.size,Q.start=ge.start,Q.end=ge.end,Q}function En(ge,Q,te,_e,Me,Le){for(var We=0;We<ge.length;We++)Lt(ge[We],Q,te,_e,Me,Le,!1)}function Gn(ge,Q,te,_e){ge.push(Q),ge.push(te),ge.push(_e)}function un(ge,Q,te,_e,Me,Le){var We=(Le-Q)/(_e-Q);return ge.push(Le),ge.push(te+(Me-te)*We),ge.push(1),We}function Cn(ge,Q,te,_e,Me,Le){var We=(Le-te)/(Me-te);return ge.push(Q+(_e-Q)*We),ge.push(Le),ge.push(1),We}function Sn(ge,Q){for(var te=[],_e=0;_e<ge.length;_e++){var Me,Le=ge[_e],We=Le.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")Me=on(Le.geometry,Q);else if(We==="MultiLineString"||We==="Polygon"){Me=[];for(var Ve=0;Ve<Le.geometry.length;Ve++)Me.push(on(Le.geometry[Ve],Q))}else if(We==="MultiPolygon")for(Me=[],Ve=0;Ve<Le.geometry.length;Ve++){for(var Oe=[],Ge=0;Ge<Le.geometry[Ve].length;Ge++)Oe.push(on(Le.geometry[Ve][Ge],Q));Me.push(Oe)}te.push(Je(Le.id,We,Me,Le.tags))}return te}function on(ge,Q){var te=[];te.size=ge.size,ge.start!==void 0&&(te.start=ge.start,te.end=ge.end);for(var _e=0;_e<ge.length;_e+=3)te.push(ge[_e]+Q,ge[_e+1],ge[_e+2]);return te}function sn(ge,Q){if(ge.transformed)return ge;var te,_e,Me,Le=1<<ge.z,We=ge.x,Ve=ge.y;for(te=0;te<ge.features.length;te++){var Oe=ge.features[te],Ge=Oe.geometry,bt=Oe.type;if(Oe.geometry=[],bt===1)for(_e=0;_e<Ge.length;_e+=2)Oe.geometry.push(an(Ge[_e],Ge[_e+1],Q,Le,We,Ve));else for(_e=0;_e<Ge.length;_e++){var zt=[];for(Me=0;Me<Ge[_e].length;Me+=2)zt.push(an(Ge[_e][Me],Ge[_e][Me+1],Q,Le,We,Ve));Oe.geometry.push(zt)}}return ge.transformed=!0,ge}function an(ge,Q,te,_e,Me,Le){return[Math.round(te*(ge*_e-Me)),Math.round(te*(Q*_e-Le))]}function In(ge,Q,te,_e,Me){for(var Le=Q===Me.maxZoom?0:Me.tolerance/((1<<Q)*Me.extent),We={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:te,y:_e,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ve=0;Ve<ge.length;Ve++){We.numFeatures++,Gt(We,ge[Ve],Le,Me);var Oe=ge[Ve].minX,Ge=ge[Ve].minY,bt=ge[Ve].maxX,zt=ge[Ve].maxY;Oe<We.minX&&(We.minX=Oe),Ge<We.minY&&(We.minY=Ge),bt>We.maxX&&(We.maxX=bt),zt>We.maxY&&(We.maxY=zt)}return We}function Gt(ge,Q,te,_e){var Me=Q.geometry,Le=Q.type,We=[];if(Le==="Point"||Le==="MultiPoint")for(var Ve=0;Ve<Me.length;Ve+=3)We.push(Me[Ve]),We.push(Me[Ve+1]),ge.numPoints++,ge.numSimplified++;else if(Le==="LineString")tn(We,Me,ge,te,!1,!1);else if(Le==="MultiLineString"||Le==="Polygon")for(Ve=0;Ve<Me.length;Ve++)tn(We,Me[Ve],ge,te,Le==="Polygon",Ve===0);else if(Le==="MultiPolygon")for(var Oe=0;Oe<Me.length;Oe++){var Ge=Me[Oe];for(Ve=0;Ve<Ge.length;Ve++)tn(We,Ge[Ve],ge,te,!0,Ve===0)}if(We.length){var bt=Q.tags||null;if(Le==="LineString"&&_e.lineMetrics){for(var zt in bt={},Q.tags)bt[zt]=Q.tags[zt];bt.mapbox_clip_start=Me.start/Me.size,bt.mapbox_clip_end=Me.end/Me.size}var Mt={geometry:We,type:Le==="Polygon"||Le==="MultiPolygon"?3:Le==="LineString"||Le==="MultiLineString"?2:1,tags:bt};Q.id!==null&&(Mt.id=Q.id),ge.features.push(Mt)}}function tn(ge,Q,te,_e,Me,Le){var We=_e*_e;if(_e>0&&Q.size<(Me?We:_e))te.numPoints+=Q.length/3;else{for(var Ve=[],Oe=0;Oe<Q.length;Oe+=3)(_e===0||Q[Oe+2]>We)&&(te.numSimplified++,Ve.push(Q[Oe]),Ve.push(Q[Oe+1])),te.numPoints++;Me&&function(Ge,bt){for(var zt=0,Mt=0,Pn=Ge.length,Bn=Pn-2;Mt<Pn;Bn=Mt,Mt+=2)zt+=(Ge[Mt]-Ge[Bn])*(Ge[Mt+1]+Ge[Bn+1]);if(zt>0===bt)for(Mt=0,Pn=Ge.length;Mt<Pn/2;Mt+=2){var kn=Ge[Mt],An=Ge[Mt+1];Ge[Mt]=Ge[Pn-2-Mt],Ge[Mt+1]=Ge[Pn-1-Mt],Ge[Pn-2-Mt]=kn,Ge[Pn-1-Mt]=An}}(Ve,Le),ge.push(Ve)}}function vn(ge,Q){var te=(Q=this.options=function(Me,Le){for(var We in Le)Me[We]=Le[We];return Me}(Object.create(this.options),Q)).debug;if(te&&console.time("preprocess data"),Q.maxZoom<0||Q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Q.promoteId&&Q.generateId)throw new Error("promoteId and generateId cannot be used together.");var _e=function(Me,Le){var We=[];if(Me.type==="FeatureCollection")for(var Ve=0;Ve<Me.features.length;Ve++)St(We,Me.features[Ve],Le,Ve);else St(We,Me.type==="Feature"?Me:{geometry:Me},Le);return We}(ge,Q);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Q.indexMaxZoom,Q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=function(Me,Le){var We=Le.buffer/Le.extent,Ve=Me,Oe=Nt(Me,1,-1-We,We,0,-1,2,Le),Ge=Nt(Me,1,1-We,2+We,0,-1,2,Le);return(Oe||Ge)&&(Ve=Nt(Me,1,-We,1+We,0,-1,2,Le)||[],Oe&&(Ve=Sn(Oe,1).concat(Ve)),Ge&&(Ve=Ve.concat(Sn(Ge,-1)))),Ve}(_e,Q),_e.length&&this.splitTile(_e,0,0,0),te&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Fn(ge,Q,te){return 32*((1<<ge)*te+Q)+ge}function qn(ge,Q){const te=ge.tileID.canonical;if(!this._geoJSONIndex)return Q(null,null);const _e=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!_e)return Q(null,null);const Me=new class{constructor(We){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=We.length,this._features=We}feature(We){return new class{constructor(Ve){this._feature=Ve,this.extent=a.EXTENT,this.type=Ve.type,this.properties=Ve.tags,"id"in Ve&&!isNaN(Ve.id)&&(this.id=parseInt(Ve.id,10))}loadGeometry(){if(this._feature.type===1){const Ve=[];for(const Oe of this._feature.geometry)Ve.push([new a.Point(Oe[0],Oe[1])]);return Ve}{const Ve=[];for(const Oe of this._feature.geometry){const Ge=[];for(const bt of Oe)Ge.push(new a.Point(bt[0],bt[1]));Ve.push(Ge)}return Ve}}toGeoJSON(Ve,Oe,Ge){return B.call(this,Ve,Oe,Ge)}}(this._features[We])}}(_e.features);let Le=Be(Me);Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),Q(null,{vectorTile:Me,rawData:Le.buffer})}vn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vn.prototype.splitTile=function(ge,Q,te,_e,Me,Le,We){for(var Ve=[ge,Q,te,_e],Oe=this.options,Ge=Oe.debug;Ve.length;){_e=Ve.pop(),te=Ve.pop(),Q=Ve.pop(),ge=Ve.pop();var bt=1<<Q,zt=Fn(Q,te,_e),Mt=this.tiles[zt];if(!Mt&&(Ge>1&&console.time("creation"),Mt=this.tiles[zt]=In(ge,Q,te,_e,Oe),this.tileCoords.push({z:Q,x:te,y:_e}),Ge)){Ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Q,te,_e,Mt.numFeatures,Mt.numPoints,Mt.numSimplified),console.timeEnd("creation"));var Pn="z"+Q;this.stats[Pn]=(this.stats[Pn]||0)+1,this.total++}if(Mt.source=ge,Me){if(Q===Oe.maxZoom||Q===Me)continue;var Bn=1<<Me-Q;if(te!==Math.floor(Le/Bn)||_e!==Math.floor(We/Bn))continue}else if(Q===Oe.indexMaxZoom||Mt.numPoints<=Oe.indexMaxPoints)continue;if(Mt.source=null,ge.length!==0){Ge>1&&console.time("clipping");var kn,An,$n,or,yr,Nr,Qe=.5*Oe.buffer/Oe.extent,ot=.5-Qe,Kt=.5+Qe,dn=1+Qe;kn=An=$n=or=null,yr=Nt(ge,bt,te-Qe,te+Kt,0,Mt.minX,Mt.maxX,Oe),Nr=Nt(ge,bt,te+ot,te+dn,0,Mt.minX,Mt.maxX,Oe),ge=null,yr&&(kn=Nt(yr,bt,_e-Qe,_e+Kt,1,Mt.minY,Mt.maxY,Oe),An=Nt(yr,bt,_e+ot,_e+dn,1,Mt.minY,Mt.maxY,Oe),yr=null),Nr&&($n=Nt(Nr,bt,_e-Qe,_e+Kt,1,Mt.minY,Mt.maxY,Oe),or=Nt(Nr,bt,_e+ot,_e+dn,1,Mt.minY,Mt.maxY,Oe),Nr=null),Ge>1&&console.timeEnd("clipping"),Ve.push(kn||[],Q+1,2*te,2*_e),Ve.push(An||[],Q+1,2*te,2*_e+1),Ve.push($n||[],Q+1,2*te+1,2*_e),Ve.push(or||[],Q+1,2*te+1,2*_e+1)}}},vn.prototype.getTile=function(ge,Q,te){var _e=this.options,Me=_e.extent,Le=_e.debug;if(ge<0||ge>24)return null;var We=1<<ge,Ve=Fn(ge,Q=(Q%We+We)%We,te);if(this.tiles[Ve])return sn(this.tiles[Ve],Me);Le>1&&console.log("drilling down to z%d-%d-%d",ge,Q,te);for(var Oe,Ge=ge,bt=Q,zt=te;!Oe&&Ge>0;)Ge--,bt=Math.floor(bt/2),zt=Math.floor(zt/2),Oe=this.tiles[Fn(Ge,bt,zt)];return Oe&&Oe.source?(Le>1&&console.log("found parent tile z%d-%d-%d",Ge,bt,zt),Le>1&&console.time("drilling down"),this.splitTile(Oe.source,Ge,bt,zt,ge,Q,te),Le>1&&console.timeEnd("drilling down"),this.tiles[Ve]?sn(this.tiles[Ve],Me):null):null};class Ir extends a.VectorTileWorkerSource{constructor(Q,te,_e,Me,Le){super(Q,te,_e,Me,qn),Le&&(this.loadGeoJSON=Le)}loadData(Q,te){const _e=Q&&Q.request,Me=_e&&_e.collectResourceTiming;this.loadGeoJSON(Q,(Le,We)=>{if(Le||!We)return te(Le);if(typeof We!="object")return te(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`));{V(We,!0);try{if(Q.filter){const Oe=a.createExpression(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(bt=>`${bt.key}: ${bt.message}`).join(", "));We={type:"FeatureCollection",features:We.features.filter(bt=>Oe.value.evaluate({zoom:0},bt))}}this._geoJSONIndex=Q.cluster?new gt(function({superclusterOptions:Oe,clusterProperties:Ge}){if(!Ge||!Oe)return Oe;const bt={},zt={},Mt={accumulated:null,zoom:0},Pn={properties:null},Bn=Object.keys(Ge);for(const kn of Bn){const[An,$n]=Ge[kn],or=a.createExpression($n),yr=a.createExpression(typeof An=="string"?[An,["accumulated"],["get",kn]]:An);bt[kn]=or.value,zt[kn]=yr.value}return Oe.map=kn=>{Pn.properties=kn;const An={};for(const $n of Bn)An[$n]=bt[$n].evaluate(Mt,Pn);return An},Oe.reduce=(kn,An)=>{Pn.properties=An;for(const $n of Bn)Mt.accumulated=kn[$n],kn[$n]=zt[$n].evaluate(Mt,Pn)},Oe}(Q)).load(We.features):function(Oe,Ge){return new vn(Oe,Ge)}(We,Q.geojsonVtOptions)}catch(Oe){return te(Oe)}this.loaded={};const Ve={};if(Me){const Oe=a.getPerformanceMeasurement(_e);Oe&&(Ve.resourceTiming={},Ve.resourceTiming[Q.source]=JSON.parse(JSON.stringify(Oe)))}te(null,Ve)}})}reloadTile(Q,te){const _e=this.loaded;return _e&&_e[Q.uid]?super.reloadTile(Q,te):this.loadTile(Q,te)}loadGeoJSON(Q,te){if(Q.request)a.getJSON(Q.request,te);else{if(typeof Q.data!="string")return te(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`));try{return te(null,JSON.parse(Q.data))}catch{return te(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Q,te){try{te(null,this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId))}catch(_e){te(_e)}}getClusterChildren(Q,te){try{te(null,this._geoJSONIndex.getChildren(Q.clusterId))}catch(_e){te(_e)}}getClusterLeaves(Q,te){try{te(null,this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset))}catch(_e){te(_e)}}}class $r{constructor(Q){this.self=Q,this.actor=new a.Actor(Q,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=a.getProjection({name:"mercator"}),this.workerSourceTypes={vector:a.VectorTileWorkerSource,geojson:Ir},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(te,_e)=>{if(this.workerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.workerSourceTypes[te]=_e},this.self.registerRTLTextPlugin=te=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=te.applyArabicShaping,a.plugin.processBidirectionalText=te.processBidirectionalText,a.plugin.processStyledBidirectionalText=te.processStyledBidirectionalText}}clearCaches(Q,te,_e){delete this.layerIndexes[Q],delete this.availableImages[Q],delete this.workerSources[Q],delete this.demWorkerSources[Q],_e()}checkIfReady(Q,te,_e){_e()}setReferrer(Q,te){this.referrer=te}spriteLoaded(Q,te){this.isSpriteLoaded[Q]=te;for(const _e in this.workerSources[Q]){const Me=this.workerSources[Q][_e];for(const Le in Me)Me[Le]instanceof a.VectorTileWorkerSource&&(Me[Le].isSpriteLoaded=te,Me[Le].fire(new a.Event("isSpriteLoaded")))}}setImages(Q,te,_e){this.availableImages[Q]=te;for(const Me in this.workerSources[Q]){const Le=this.workerSources[Q][Me];for(const We in Le)Le[We].availableImages=te}_e()}enableTerrain(Q,te,_e){this.terrain=te,_e()}setProjection(Q,te){this.projections[Q]=a.getProjection(te)}setLayers(Q,te,_e){this.getLayerIndex(Q).replace(te),_e()}updateLayers(Q,te,_e){this.getLayerIndex(Q).update(te.layers,te.removedIds),_e()}loadTile(Q,te,_e){const Me=this.enableTerrain?a.extend({enableTerrain:this.terrain},te):te;Me.projection=this.projections[Q]||this.defaultProjection,this.getWorkerSource(Q,te.type,te.source).loadTile(Me,_e)}loadDEMTile(Q,te,_e){const Me=this.enableTerrain?a.extend({buildQuadTree:this.terrain},te):te;this.getDEMWorkerSource(Q,te.source).loadTile(Me,_e)}reloadTile(Q,te,_e){const Me=this.enableTerrain?a.extend({enableTerrain:this.terrain},te):te;Me.projection=this.projections[Q]||this.defaultProjection,this.getWorkerSource(Q,te.type,te.source).reloadTile(Me,_e)}abortTile(Q,te,_e){this.getWorkerSource(Q,te.type,te.source).abortTile(te,_e)}removeTile(Q,te,_e){this.getWorkerSource(Q,te.type,te.source).removeTile(te,_e)}removeSource(Q,te,_e){if(!this.workerSources[Q]||!this.workerSources[Q][te.type]||!this.workerSources[Q][te.type][te.source])return;const Me=this.workerSources[Q][te.type][te.source];delete this.workerSources[Q][te.type][te.source],Me.removeSource!==void 0?Me.removeSource(te,_e):_e()}loadWorkerSource(Q,te,_e){try{this.self.importScripts(te.url),_e()}catch(Me){_e(Me.toString())}}syncRTLPluginState(Q,te,_e){try{a.plugin.setState(te);const Me=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Me!=null){this.self.importScripts(Me);const Le=a.plugin.isParsed();_e(Le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Me}`),Le)}}catch(Me){_e(Me.toString())}}getAvailableImages(Q){let te=this.availableImages[Q];return te||(te=[]),te}getLayerIndex(Q){let te=this.layerIndexes[Q];return te||(te=this.layerIndexes[Q]=new M),te}getWorkerSource(Q,te,_e){if(this.workerSources[Q]||(this.workerSources[Q]={}),this.workerSources[Q][te]||(this.workerSources[Q][te]={}),!this.workerSources[Q][te][_e]){const Me={send:(Le,We,Ve,Oe,Ge,bt)=>{this.actor.send(Le,We,Ve,Q,Ge,bt)},scheduler:this.actor.scheduler};this.workerSources[Q][te][_e]=new this.workerSourceTypes[te](Me,this.getLayerIndex(Q),this.getAvailableImages(Q),this.isSpriteLoaded[Q])}return this.workerSources[Q][te][_e]}getDEMWorkerSource(Q,te){return this.demWorkerSources[Q]||(this.demWorkerSources[Q]={}),this.demWorkerSources[Q][te]||(this.demWorkerSources[Q][te]=new D),this.demWorkerSources[Q][te]}enforceCacheSizeLimit(Q,te){a.enforceCacheSizeLimit(te)}getWorkerPerformanceMetrics(Q,te,_e){_e(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new $r(self)),$r}),p(["./shared"],function(a){function w(f,s){if(Array.isArray(f)){if(!Array.isArray(s)||f.length!==s.length)return!1;for(let u=0;u<f.length;u++)if(!w(f[u],s[u]))return!1;return!0}if(typeof f=="object"&&f!==null&&s!==null){if(typeof s!="object"||Object.keys(f).length!==Object.keys(s).length)return!1;for(const u in f)if(!w(f[u],s[u]))return!1;return!0}return f===s}var C=M;function M(f){return!function(s){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,x,b=new Blob([""],{type:"text/javascript"}),E=URL.createObjectURL(b);try{x=new Worker(E),g=!0}catch{g=!1}return x&&x.terminate(),URL.revokeObjectURL(E),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var x=g.getContext("2d");if(!x)return!1;var b=x.getImageData(0,0,1,1);return b&&b.width===g.width}()?(D[u=s&&s.failIfMajorPerformanceCaveat]===void 0&&(D[u]=function(g){var x,b=function(E){var k=document.createElement("canvas"),I=Object.create(M.webGLContextAttributes);return I.failIfMajorPerformanceCaveat=E,k.getContext("webgl",I)||k.getContext("experimental-webgl",I)}(g);if(!b)return!1;try{x=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!x||b.isContextLost())&&(b.shaderSource(x,"void main() {}"),b.compileShader(x),b.getShaderParameter(x,b.COMPILE_STATUS)===!0)}(u)),D[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(f)}var D={};function R(f,s,u){const g=a.window.document.createElement(f);return s!==void 0&&(g.className=s),u&&u.appendChild(g),g}function $(f,s,u){const g=a.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const x of Object.keys(s))g.setAttributeNS(null,x,s[x]);return u&&u.appendChild(g),g}M.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const V=a.window.document&&a.window.document.documentElement.style,B=V&&V.userSelect!==void 0?"userSelect":"WebkitUserSelect";let J;function j(){V&&B&&(J=V[B],V[B]="none")}function N(){V&&B&&(V[B]=J)}function G(f){f.preventDefault(),f.stopPropagation(),a.window.removeEventListener("click",G,!0)}function Y(){a.window.addEventListener("click",G,!0),a.window.setTimeout(()=>{a.window.removeEventListener("click",G,!0)},0)}function K(f,s){const u=f.getBoundingClientRect();return de(f,u,s)}function oe(f,s){const u=f.getBoundingClientRect(),g=[];for(let x=0;x<s.length;x++)g.push(de(f,u,s[x]));return g}function ie(f){return a.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function de(f,s,u){const g=f.offsetWidth===s.width?1:f.offsetWidth/s.width;return new a.Point((u.clientX-s.left)*g,(u.clientY-s.top)*g)}function le(f,s){var u=s[0],g=s[1],x=s[2],b=s[3],E=u*b-x*g;return E?(f[0]=b*(E=1/E),f[1]=-g*E,f[2]=-x*E,f[3]=u*E,f):null}function ye(f){const{userImage:s}=f;return!!(s&&s.render&&s.render())&&(f.data.replace(new Uint8Array(s.data.buffer)),!0)}class Ce extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:u,callback:g}of this.requestors)this._notify(u,g);this.requestors=[]}}hasImage(s){return!!this.getImage(s)}getImage(s){return this.images[s]}addImage(s,u){this._validate(s,u)&&(this.images[s]=u)}_validate(s,u){let g=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),g=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),g=!1),this._validateContent(u.content,u)||(this.fire(new a.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),g=!1),g}_validateStretch(s,u){if(!s)return!0;let g=0;for(const x of s){if(x[0]<g||x[1]<x[0]||u<x[1])return!1;g=x[1]}return!0}_validateContent(s,u){return!(s&&(s.length!==4||s[0]<0||u.data.width<s[0]||s[1]<0||u.data.height<s[1]||s[2]<0||u.data.width<s[2]||s[3]<0||u.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,u){u.version=this.images[s].version+1,this.images[s]=u,this.updatedImages[s]=!0}removeImage(s){const u=this.images[s];delete this.images[s],delete this.patterns[s],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,u){let g=!0;if(!this.isLoaded())for(const x of s)this.images[x]||(g=!1);this.isLoaded()||g?this._notify(s,u):this.requestors.push({ids:s,callback:u})}_notify(s,u){const g={};for(const x of s){this.images[x]||this.fire(new a.Event("styleimagemissing",{id:x}));const b=this.images[x];b?g[x]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:a.warnOnce(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,g)}getPixelSize(){const{width:s,height:u}=this.atlasImage;return{width:s,height:u}}getPattern(s){const u=this.patterns[s],g=this.getImage(s);if(!g)return null;if(u&&u.position.version===g.version)return u.position;if(u)u.position.version=g.version;else{const x={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new a.ImagePosition(x,g);this.patterns[s]={bin:x,position:b}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const u=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(s,this.atlasImage,u.RGBA),this.atlasTexture&&this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const b in this.patterns)s.push(this.patterns[b].bin);const{w:u,h:g}=a.potpack(s),x=this.atlasImage;x.resize({width:u||1,height:g||1});for(const b in this.patterns){const{bin:E}=this.patterns[b],k=E.x+1,I=E.y+1,O=this.images[b].data,L=O.width,q=O.height;a.RGBAImage.copy(O,x,{x:0,y:0},{x:k,y:I},{width:L,height:q}),a.RGBAImage.copy(O,x,{x:0,y:q-1},{x:k,y:I-1},{width:L,height:1}),a.RGBAImage.copy(O,x,{x:0,y:0},{x:k,y:I+q},{width:L,height:1}),a.RGBAImage.copy(O,x,{x:L-1,y:0},{x:k-1,y:I},{width:1,height:q}),a.RGBAImage.copy(O,x,{x:0,y:0},{x:k+L,y:I},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const u of s){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const g=this.images[u];ye(g)&&this.updateImage(u,g)}}}const Fe=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(f,s){return function([u,g,x]){const b=a.degToRad(g+90),E=a.degToRad(x);return{x:u*Math.cos(b)*Math.sin(E),y:u*Math.sin(b)*Math.sin(E),z:u*Math.cos(E),azimuthal:g,polar:x}}(f.expression.evaluate(s))}interpolate(f,s,u){return{x:a.number(f.x,s.x,u),y:a.number(f.y,s.y,u),z:a.number(f.z,s.z,u),azimuthal:a.number(f.azimuthal,s.azimuthal,u),polar:a.number(f.polar,s.polar,u)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)});class be extends a.Evented{constructor(s){super(),this._transitionable=new a.Transitionable(Fe),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,u={}){if(!this._validate(a.validateLight,s,u))for(const g in s){const x=s[g];a.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),x):this._transitionable.setValue(g,x)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,u,g){return(!g||g.validate!==!1)&&a.emitValidationErrors(this,s.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}const we=new a.Properties({source:new a.DataConstantProperty(a.spec.terrain.source),exaggeration:new a.DataConstantProperty(a.spec.terrain.exaggeration)});let he=class extends a.Evented{constructor(f,s){super(),this._transitionable=new a.Transitionable(we),this.set(f),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=s}get(){return this._transitionable.serialize()}set(f){for(const s in f){const u=f[s];a.endsWith(s,"-transition")?this._transitionable.setTransition(s.slice(0,-11),u):this._transitionable.setValue(s,u)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}};function Be(f,s,u,g){const x=a.smoothstep(45,65,u),[b,E]=Ae(f,g),k=a.length(s);let I=1-Math.min(1,Math.exp((k-b)/(E-b)*-6));return I*=I*I,I=Math.min(1,1.00747*I),I*x*f.alpha}function Ae(f,s){const u=.5/Math.tan(.5*s);return[f.range[0]+u,f.range[1]+u]}const Se=new a.Properties({range:new a.DataConstantProperty(a.spec.fog.range),color:new a.DataConstantProperty(a.spec.fog.color),"high-color":new a.DataConstantProperty(a.spec.fog["high-color"]),"space-color":new a.DataConstantProperty(a.spec.fog["space-color"]),"horizon-blend":new a.DataConstantProperty(a.spec.fog["horizon-blend"]),"star-intensity":new a.DataConstantProperty(a.spec.fog["star-intensity"])});class ke extends a.Evented{constructor(s,u){super(),this._transitionable=new a.Transitionable(Se),this.set(s),this._transitioning=this._transitionable.untransitioned(),this._transform=u}get state(){const s=this._transform,u=s.projection.name==="globe",g=a.globeToMercatorTransition(s.zoom),x=this.properties.get("range"),b=[.5,3];return{range:u?[a.number(b[0],x[0],g),a.number(b[1],x[1],g)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(s,u={}){if(!this._validate(a.validateFog,s,u)){for(const g of Object.keys(a.spec.fog))s&&s[g]===void 0&&(s[g]=a.spec.fog[g].default);for(const g in s){const x=s[g];a.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),x):this._transitionable.setValue(g,x)}}}getOpacity(s){if(!this._transform.projection.supportsFog)return 0;const u=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.smoothstep(45,65,s))*u.a}getOpacityAtLatLng(s,u){return this._transform.projection.supportsFog?function(g,x,b){const E=a.MercatorCoordinate.fromLngLat(x),k=b.elevation?b.elevation.getAtPointOrZero(E):0,I=[E.x,E.y,k];return a.transformMat4(I,I,b.mercatorFogMatrix),Be(g,I,b.pitch,b._fov)}(this.state,s,u):0}getFovAdjustedRange(s){return this._transform.projection.supportsFog?Ae(this.state,s):[0,1]}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,u,g){return(!g||g.validate!==!1)&&a.emitValidationErrors(this,s.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class Ne{constructor(s,u){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const g=this.workerPool.acquire(this.id);for(let x=0;x<g.length;x++){const b=new Ne.Actor(g[x],u,this.id);b.name=`Worker ${x}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,u,g){a.asyncAll(this.actors,(x,b)=>{x.send(s,u,b)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}function nt(f,s,u){return s*(a.EXTENT/(f.tileSize*Math.pow(2,u-f.tileID.overscaledZ)))}Ne.Actor=a.Actor;class xt{constructor(s,u,g,x){this.screenBounds=s,this.cameraPoint=u,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(s,u){let g,x;if(s instanceof a.Point||typeof s[0]=="number"){const b=a.Point.convert(s);g=[b],x=u.isPointAboveHorizon(b)}else{const b=a.Point.convert(s[0]),E=a.Point.convert(s[1]);g=[b,E],x=a.polygonizeBounds(b,E).every(k=>u.isPointAboveHorizon(k))}return new xt(g,u.getCameraPoint(),x,u)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(s){return a.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],s)}bufferedCameraGeometry(s){const u=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new a.Point(1,1)):this.screenBounds[1],x=a.polygonizeBounds(u,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>u.x&&this.cameraPoint.x<g.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?x[2]=this.cameraPoint:this.cameraPoint.x<=u.x&&(x[3]=this.cameraPoint)),a.bufferConvexPolygon(x,s)}bufferedCameraGeometryGlobe(s){const u=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new a.Point(1,1)):this.screenBounds[1],x=a.polygonizeBounds(u,g,s),b=this.cameraPoint.clone();switch(3*((b.y>u.y)+(b.y>g.y))+((b.x>u.x)+(b.x>g.x))){case 0:x[0]=b,x[4]=b.clone();break;case 1:x.splice(1,0,b);break;case 2:x[1]=b;break;case 3:x.splice(4,0,b);break;case 5:x.splice(2,0,b);break;case 6:x[3]=b;break;case 7:x.splice(3,0,b);break;case 8:x[2]=b}return x}containsTile(s,u,g,x=0){const b=s.queryPadding/u._pixelsPerMercatorPixel+1,E=g?this._bufferedCameraMercator(b,u):this._bufferedScreenMercator(b,u);let k=s.tileID.wrap+(E.unwrapped?x:0);const I=E.polygon.map(pe=>a.getTilePoint(s.tileTransform,pe,k));if(!a.polygonIntersectsBox(I,0,0,a.EXTENT,a.EXTENT))return;k=s.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const O=this.screenGeometryMercator.polygon.map(pe=>a.getTileVec3(s.tileTransform,pe,k)),L=O.map(pe=>new a.Point(pe[0],pe[1])),q=u.getFreeCameraOptions().position||new a.MercatorCoordinate(0,0,0),ne=a.getTileVec3(s.tileTransform,q,k),ae=O.map(pe=>{const Z=a.sub(pe,pe,ne);return a.normalize(Z,Z),new a.Ray(ne,Z)}),ue=nt(s,1,u.zoom)*u._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:L,tilespaceRays:ae,bufferedTilespaceGeometry:I,bufferedTilespaceBounds:(ce=a.getBounds(I),ce.min.x=a.clamp(ce.min.x,0,a.EXTENT),ce.min.y=a.clamp(ce.min.y,0,a.EXTENT),ce.max.x=a.clamp(ce.max.x,0,a.EXTENT),ce.max.y=a.clamp(ce.max.y,0,a.EXTENT),ce),tile:s,tileID:s.tileID,pixelToTileUnitsFactor:ue};var ce}_bufferedScreenMercator(s,u){const g=vt(s);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let x;return x=u.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(s),u):{polygon:this.bufferedScreenGeometry(s).map(b=>u.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[g]=x,x}}_bufferedCameraMercator(s,u){const g=vt(s);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let x;return x=u.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(s),u):{polygon:this.bufferedCameraGeometry(s).map(b=>u.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[g]=x,x}}_projectAndResample(s,u){const g=function(b,E){const k=a.multiply([],E.pixelMatrix,E.globeMatrix),I=[0,-a.GLOBE_RADIUS,0,1],O=[0,a.GLOBE_RADIUS,0,1],L=[0,0,0,1];a.transformMat4$1(I,I,k),a.transformMat4$1(O,O,k),a.transformMat4$1(L,L,k);const q=new a.Point(I[0]/I[3],I[1]/I[3]),ne=new a.Point(O[0]/O[3],O[1]/O[3]),ae=a.polygonContainsPoint(b,q)&&I[3]<L[3],ue=a.polygonContainsPoint(b,ne)&&O[3]<L[3];if(!ae&&!ue)return null;const ce=function(ze,Ue,je){for(let Ye=1;Ye<ze.length;Ye++){const kt=rt(Ue.pointCoordinate3D(ze[Ye-1]).x),qe=rt(Ue.pointCoordinate3D(ze[Ye]).x);if(je<0){if(kt<qe)return{idx:Ye,t:-kt/(qe-1-kt)}}else if(qe<kt)return{idx:Ye,t:(1-kt)/(qe+1-kt)}}return null}(b,E,ae?-1:1);if(!ce)return null;const{idx:pe,t:Z}=ce;let se=pe>1?gt(b.slice(0,pe),E):[],xe=pe<b.length?gt(b.slice(pe),E):[];se=se.map(ze=>new a.Point(rt(ze.x),ze.y)),xe=xe.map(ze=>new a.Point(rt(ze.x),ze.y));const ve=[...se];ve.length===0&&ve.push(xe[xe.length-1]);const De=a.number(ve[ve.length-1].y,(xe.length===0?se[0]:xe[0]).y,Z);let Re;return Re=ae?[new a.Point(0,De),new a.Point(0,0),new a.Point(1,0),new a.Point(1,De)]:[new a.Point(1,De),new a.Point(1,1),new a.Point(0,1),new a.Point(0,De)],ve.push(...Re),xe.length===0?ve.push(se[0]):ve.push(...xe),{polygon:ve.map(ze=>new a.MercatorCoordinate(ze.x,ze.y)),unwrapped:!1}}(s,u);if(g)return g;const x=function(b,E){let k=!1,I=-1/0,O=0;for(let q=0;q<b.length-1;q++)b[q].x>I&&(I=b[q].x,O=q);for(let q=0;q<b.length-1;q++){const ne=(O+q)%(b.length-1),ae=b[ne],ue=b[ne+1];Math.abs(ae.x-ue.x)>.5&&(ae.x<ue.x?(ae.x+=1,ne===0&&(b[b.length-1].x+=1)):(ue.x+=1,ne+1===b.length-1&&(b[0].x+=1)),k=!0)}const L=a.mercatorXfromLng(E.center.lng);return k&&L<Math.abs(L-1)&&b.forEach(q=>{q.x-=1}),{polygon:b,unwrapped:k}}(gt(s,u).map(b=>new a.Point(rt(b.x),b.y)),u);return{polygon:x.polygon.map(b=>new a.MercatorCoordinate(b.x,b.y)),unwrapped:x.unwrapped}}}function gt(f,s){return a.resample(f,u=>{const g=s.pointCoordinate3D(u);u.x=g.x,u.y=g.y},1/256)}function rt(f){return f<0?1+f%1:f%1}function vt(f){return 100*f|0}function ht(f,s,u,g,x){const b=function(E,k){if(E)return x(E);if(k){f.url&&k.tiles&&f.tiles&&delete f.tiles;const I=a.pick(a.extend(k,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);k.vector_layers&&(I.vectorLayers=k.vector_layers,I.vectorLayerIds=I.vectorLayers.map(O=>O.id)),I.tiles=s.canonicalizeTileset(I,f.url),x(null,I)}};return f.url?a.getJSON(s.transformRequest(s.normalizeSourceURL(f.url,null,u,g),a.ResourceType.Source),b):a.exported.frame(()=>b(null,f))}class mt{constructor(s,u,g){this.bounds=a.LngLatBounds.convert(this.validateBounds(s)),this.minzoom=u||0,this.maxzoom=g||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const u=Math.pow(2,s.z),g=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*u),x=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*u),b=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*u),E=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*u);return s.x>=g&&s.x<b&&s.y>=x&&s.y<E}}class Ot{constructor(s,u,g){this.context=s;const x=s.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||u.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $t={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class at{constructor(s,u,g,x){this.length=u.length,this.attributes=g,this.itemSize=u.bytesPerElement,this.dynamicDraw=x,this.context=s;const b=s.gl;this.buffer=b.createBuffer(),s.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||u.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,u){for(let g=0;g<this.attributes.length;g++){const x=u.attributes[this.attributes[g].name];x!==void 0&&s.enableVertexAttribArray(x)}}setVertexAttribPointers(s,u,g){for(let x=0;x<this.attributes.length;x++){const b=this.attributes[x],E=u.attributes[b.name];E!==void 0&&s.vertexAttribPointer(E,b.components,s[$t[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Je{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class it extends Je{getDefault(){return a.Color.transparent}set(s){const u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class St extends Je{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Wt extends Je{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class He extends Je{getDefault(){return[!0,!0,!0,!0]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class jt extends Je{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class lt extends Je{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Ut extends Je{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const u=this.current;(s.func!==u.func||s.ref!==u.ref||s.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Nt extends Je{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class Ft extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=s,this.dirty=!1}}class Lt extends Je{getDefault(){return[0,1]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class cn extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=s,this.dirty=!1}}class En extends Je{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Gn extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.BLEND):u.disable(u.BLEND),this.current=s,this.dirty=!1}}class un extends Je{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Cn extends Je{getDefault(){return a.Color.transparent}set(s){const u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Sn extends Je{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class on extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=s,this.dirty=!1}}class sn extends Je{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class an extends Je{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}let In,Gt=class extends Je{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}};class tn extends Je{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class vn extends Je{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Fn extends Je{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class qn extends Je{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Ir extends Je{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class $r extends Je{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class ge extends Je{getDefault(){return null}set(s){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Q extends Je{constructor(s){super(s),this.vao=s.extVertexArrayObject}getDefault(){return null}set(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)}}class te extends Je{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class _e extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Me extends Je{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Le extends Je{constructor(s,u){super(s),this.context=s,this.parent=u}getDefault(){return null}}class We extends Le{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Ve extends Le{attachment(){return this.gl.DEPTH_ATTACHMENT}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,this.attachment(),u.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Oe extends Ve{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ge{constructor(s,u,g,x){this.context=s,this.width=u,this.height=g;const b=this.framebuffer=s.gl.createFramebuffer();this.colorAttachment=new We(s,b),x&&(this.depthAttachment=new Ve(s,b))}destroy(){const s=this.context.gl,u=this.colorAttachment.get();if(u&&s.deleteTexture(u),this.depthAttachment){const g=this.depthAttachment.get();g&&s.deleteRenderbuffer(g)}s.deleteFramebuffer(this.framebuffer)}}class bt{constructor(s,u=!1){if(this.gl=s,this.isWebGL2=u,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),u){const g=s;this.extVertexArrayObject={createVertexArrayOES:g.createVertexArray.bind(s),deleteVertexArrayOES:g.deleteVertexArray.bind(s),bindVertexArrayOES:g.bindVertexArray.bind(s)}}this.clearColor=new it(this),this.clearDepth=new St(this),this.clearStencil=new Wt(this),this.colorMask=new He(this),this.depthMask=new jt(this),this.stencilMask=new lt(this),this.stencilFunc=new Ut(this),this.stencilOp=new Nt(this),this.stencilTest=new Ft(this),this.depthRange=new Lt(this),this.depthTest=new cn(this),this.depthFunc=new En(this),this.blend=new Gn(this),this.blendFunc=new un(this),this.blendColor=new Cn(this),this.blendEquation=new Sn(this),this.cullFace=new on(this),this.cullFaceSide=new sn(this),this.frontFace=new an(this),this.program=new Gt(this),this.activeTexture=new tn(this),this.viewport=new vn(this),this.bindFramebuffer=new Fn(this),this.bindRenderbuffer=new qn(this),this.bindTexture=new Ir(this),this.bindVertexBuffer=new $r(this),this.bindElementBuffer=new ge(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Q(this),this.pixelStoreUnpack=new te(this),this.pixelStoreUnpackPremultiplyAlpha=new _e(this),this.pixelStoreUnpackFlipY=new Me(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=s.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=s.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=s.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),u||(this.extTextureHalfFloat=s.getExtension("OES_texture_half_float")),(u||this.extTextureHalfFloat&&s.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=u||s.getExtension("OES_standard_derivatives"),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,u){return new Ot(this,s,u)}createVertexBuffer(s,u,g){return new at(this,s,u,g)}createRenderbuffer(s,u,g){const x=this.gl,b=x.createRenderbuffer();return this.bindRenderbuffer.set(b),x.renderbufferStorage(x.RENDERBUFFER,s,u,g),this.bindRenderbuffer.set(null),b}createFramebuffer(s,u,g){return new Ge(this,s,u,g)}clear({color:s,depth:u,stencil:g}){const x=this.gl;let b=0;s&&(b|=x.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(b|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),g!==void 0&&(b|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),x.clear(b)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){w(s.blendFunction,a.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class zt extends a.Evented{constructor(s,u,g,x){if(super(),this.id=s,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(u,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new a.DedupedRequest}load(s){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"}));const u=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map._worldview;this._tileJSONRequest=ht(this._options,this.map._requestManager,u,g,(x,b)=>{this._tileJSONRequest=null,this._loaded=!0,x?(u&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${u}`),g&&g.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new a.ErrorEvent(x))):b&&(a.extend(this,b),b.bounds&&(this.tileBounds=new mt(b.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(x)})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}loadTile(s,u){const g=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(g,a.ResourceType.Tile),data:void 0,uid:s.uid,tileID:s.tileID,tileZoom:s.tileZoom,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:s.isSymbolTile};if(x.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired")s.state==="loading"?s.reloadCallback=u:s.request=s.actor.send("reloadTile",x,b.bind(this));else if(s.actor=this._tileWorkers[g]=this._tileWorkers[g]||this.dispatcher.getActor(),this.dispatcher.ready)s.request=s.actor.send("loadTile",x,b.bind(this),void 0,!0);else{const E=a.loadVectorTile.call({deduped:this._deduped},x,(k,I)=>{k||!I?b.call(this,k):(x.data={cacheControl:I.cacheControl,expires:I.expires,rawData:I.rawData.slice(0)},s.actor&&s.actor.send("loadTile",x,b.bind(this),void 0,!0))},!0);s.request={cancel:E}}function b(E,k){return delete s.request,s.aborted?u(null):E&&E.status!==404?u(E):(k&&k.resourceTiming&&(s.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&s.setExpiryData(k),s.loadVectorData(k,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id})}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Mt extends a.Evented{constructor(s,u,g,x){super(),this.id=s,this.dispatcher=g,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},u),a.extend(this,a.pick(u,["url","scheme","tileSize"]))}load(s){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ht(this._options,this.map._requestManager,null,null,(u,g)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new a.ErrorEvent(u)):g&&(a.extend(this,g),g.bounds&&(this.tileBounds=new mt(g.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(g.tiles),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),s&&s(u)})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,u){const g=a.exported.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);s.request=a.getImage(this.map._requestManager.transformRequest(x,a.ResourceType.Tile),(b,E,k,I)=>(delete s.request,s.aborted?(s.state="unloaded",u(null)):b?(s.state="errored",u(b)):E?(this.map._refreshExpiredTiles&&s.setExpiryData({cacheControl:k,expires:I}),s.setTexture(E,this.map.painter),s.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),void u(null)):u(null)))}static loadTileData(s,u,g){s.setTexture(u,g)}static unloadTileData(s,u){s.texture&&u.saveTileTexture(s.texture)}abortTile(s,u){s.request&&(s.request.cancel(),delete s.request),u()}unloadTile(s,u){s.texture&&this.map.painter.saveTileTexture(s.texture),u()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Pn(f,s,u,g,x,b,E,k){const I=[f,u,x,s,g,b,1,1,1],O=[E,k,1],L=a.adjoint([],I),[q,ne,ae]=a.transformMat3(O,O,a.transpose(L,L));return a.multiply$1(I,[q,0,0,0,ne,0,0,0,ae],I)}class Bn extends a.Evented{constructor(s,u,g,x){super(),this.id=s,this.dispatcher=g,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=u,this._dirty=!1}load(s,u){this._loaded=u||!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(g,x)=>{if(this._imageRequest=null,this._loaded=!0,g)this.fire(new a.ErrorEvent(g));else if(x){const{HTMLImageElement:b}=a.window;this.image=x instanceof b?a.exported.getImageData(x):x,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading()}})}loaded(){return this._loaded}updateImage(s){return this.image&&s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(s){this.coordinates=s,this._boundsArray=void 0;const u=s.map(a.MercatorCoordinate.fromLngLat);return this.tileID=function(g){let x=1/0,b=1/0,E=-1/0,k=-1/0;for(const q of g)x=Math.min(x,q.x),b=Math.min(b,q.y),E=Math.max(E,q.x),k=Math.max(k,q.y);const I=Math.max(E-x,k-b),O=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),L=Math.pow(2,O);return new a.CanonicalTileID(O,Math.floor((x+E)/2*L),Math.floor((b+k)/2*L))}(u),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(s){for(const I in this.tiles){const O=this.tiles[I];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture)}if(this._boundsArray)return;const u=a.tileTransform(this.tileID,this.map.transform.projection),[g,x,b,E]=this.coordinates.map(I=>{const O=u.projection.project(I[0],I[1]);return a.getTilePoint(u,O)._round()});this.perspectiveTransform=function(I,O,L,q,ne,ae,ue,ce,pe,Z){const se=Pn(0,0,I,0,0,O,I,O),xe=Pn(L,q,ne,ae,ue,ce,pe,Z);return a.multiply$1(xe,a.adjoint(se,se),xe),[xe[6]/xe[8]*I/a.EXTENT,xe[7]/xe[8]*O/a.EXTENT]}(this.width,this.height,g.x,g.y,x.x,x.y,E.x,E.y,b.x,b.y);const k=this._boundsArray=new a.StructArrayLayout4i8;k.emplaceBack(g.x,g.y,0,0),k.emplaceBack(x.x,x.y,a.EXTENT,0),k.emplaceBack(E.x,E.y,0,a.EXTENT),k.emplaceBack(b.x,b.y,a.EXTENT,a.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=s.createVertexBuffer(k,a.boundsAttributes.members),this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,u=s.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new a.Texture(s,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(s)}loadTile(s,u){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},u(null)):(s.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const kn={vector:zt,raster:Mt,"raster-dem":class extends Mt{constructor(f,s,u,g){super(f,s,u,g),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}loadTile(f,s){const u=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(x,b){x&&(f.state="errored",s(x)),b&&(f.dem=b,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",s(null))}f.request=a.getImage(this.map._requestManager.transformRequest(u,a.ResourceType.Tile),function(x,b,E,k){if(delete f.request,f.aborted)f.state="unloaded",s(null);else if(x)f.state="errored",s(x);else if(b){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:E,expires:k});const I=a.window.ImageBitmap&&b instanceof a.window.ImageBitmap&&(In==null&&(In=a.window.OffscreenCanvas&&new a.window.OffscreenCanvas(1,1).getContext("2d")&&typeof a.window.createImageBitmap=="function"),In),O=1-(b.width-a.prevPowerOfTwo(b.width))/2;O<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const L=I?b:a.exported.getImageData(b,O),q={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:L,encoding:this.encoding,padding:O};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",q,g.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const s=f.canonical,u=Math.pow(2,s.z),g=(s.x-1+u)%u,x=s.x===0?f.wrap-1:f.wrap,b=(s.x+1+u)%u,E=s.x+1===u?f.wrap+1:f.wrap,k={};return k[new a.OverscaledTileID(f.overscaledZ,x,s.z,g,s.y).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,E,s.z,b,s.y).key]={backfilled:!1},s.y>0&&(k[new a.OverscaledTileID(f.overscaledZ,x,s.z,g,s.y-1).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,f.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,E,s.z,b,s.y-1).key]={backfilled:!1}),s.y+1<u&&(k[new a.OverscaledTileID(f.overscaledZ,x,s.z,g,s.y+1).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,f.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},k[new a.OverscaledTileID(f.overscaledZ,E,s.z,b,s.y+1).key]={backfilled:!1}),k}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends a.Evented{constructor(f,s,u,g){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=u.getActor(),this.setEventedParent(g),this._data=s.data,this._options=a.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const x=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*x,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*x,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:a.EXTENT,radius:(s.clusterRadius!==void 0?s.clusterRadius:50)*x,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},s),this}getClusterChildren(f,s){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},s),this}getClusterLeaves(f,s,u,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:s,offset:u},g),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=a.extend({},this.workerOptions),s=this._data;typeof s=="string"?(f.request=this.map._requestManager.transformRequest(a.exported.resolveURL(s),a.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(s),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(u,g)=>{if(this._loaded=!0,this._pendingLoad=null,u)this.fire(new a.ErrorEvent(u));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x.resourceTiming=g.resourceTiming[this.id]),this.fire(new a.Event("data",x)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,s){const u=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(u,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(g,x)=>(delete f.request,f.unloadVectorData(),f.aborted?s(null):g?s(g):(f.loadVectorData(x,this.map.painter,u==="reloadTile"),s(null))),void 0,u==="loadTile")}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Bn{constructor(f,s,u,g){super(f,s,u,g),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const s of f.urls)this.urls.push(this.map._requestManager.transformRequest(s,a.ResourceType.Source).url);a.getVideo(this.urls,(s,u)=>{this._loaded=!0,s?this.fire(new a.ErrorEvent(s)):u&&(this.video=u,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const s=this.video.seekable;f<s.start(0)||f>s.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,s=f.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(f,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Bn,canvas:class extends Bn{constructor(f,s,u,g){super(f,s,u,g),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(b=>typeof b!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(s,this.canvas,s.gl.RGBA,{premultiply:!0}),this._prepareData(s)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends a.Evented{constructor(f,s,u,g){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=u,this._implementation=s,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new mt(this._implementation.bounds,this.minzoom,this.maxzoom)),s.update=this._update.bind(this),s.clearTiles=this._clearTiles.bind(this),s.coveringTiles=this._coveringTiles.bind(this),a.extend(this,a.pick(s,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:s,y:u,z:g}=f.canonical;return this._implementation.hasTile({x:s,y:u,z:g})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,s){const{x:u,y:g,z:x}=f.tileID.canonical,b=new a.window.AbortController;f.request=Promise.resolve(this._implementation.loadTile({x:u,y:g,z:x},{signal:b.signal})).then(function(E){return delete f.request,f.aborted?(f.state="unloaded",s(null)):E===void 0?(f.state="errored",s(null)):E===null?(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",s(null)):function(k){return k instanceof a.window.ImageData||k instanceof a.window.HTMLCanvasElement||k instanceof a.window.ImageBitmap||k instanceof a.window.HTMLImageElement}(E)?(this.loadTileData(f,E),f.state="loaded",void s(null)):(f.state="errored",s(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(E=>{E.code!==20&&(f.state="errored",s(E))}),f.request.cancel=()=>b.abort()}loadTileData(f,s){Mt.loadTileData(f,s,this._map.painter)}unloadTileData(f){Mt.unloadTileData(f,this._map.painter)}unloadTile(f,s){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:u,y:g,z:x}=f.tileID.canonical;this._implementation.unloadTile({x:u,y:g,z:x})}s()}abortTile(f,s){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),s()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}}},An=function(f,s,u,g){const x=new kn[s.type](f,s,u,g);if(x.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${x.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],x),x};function $n(f,s){const u=a.identity([]);return a.scale(u,u,[.5*f.width,.5*-f.height,1]),a.translate(u,u,[1,-1,0]),a.multiply(u,u,f.calculateProjMatrix(s.toUnwrapped())),Float32Array.from(u)}function or(f,s,u,g,x,b,E,k=!1){const I=f.tilesIn(g,E,k);I.sort(Nr);const O=[];for(const q of I)O.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(s,u,f._state,q,x,b,$n(f.transform,q.tile.tileID),k)});const L=function(q){const ne={},ae={};for(const ue of q){const ce=ue.queryResults,pe=ue.wrappedTileID,Z=ae[pe]=ae[pe]||{};for(const se in ce){const xe=ce[se],ve=Z[se]=Z[se]||{},De=ne[se]=ne[se]||[];for(const Re of xe)ve[Re.featureIndex]||(ve[Re.featureIndex]=!0,De.push(Re))}}return ne}(O);for(const q in L)L[q].forEach(ne=>{const ae=ne.feature,ue=ae.layer;ue&&ue.type!=="background"&&ue.type!=="sky"&&(ae.source=ue.source,ue["source-layer"]&&(ae.sourceLayer=ue["source-layer"]),ae.state=ae.id!==void 0?f.getFeatureState(ue["source-layer"],ae.id):{})});return L}function yr(f,s){const u=f.getRenderableIds().map(b=>f.getTileByID(b)),g=[],x={};for(let b=0;b<u.length;b++){const E=u[b],k=E.tileID.canonical.key;x[k]||(x[k]=!0,E.querySourceFeatures(g,s))}return g}function Nr(f,s){const u=f.tileID,g=s.tileID;return u.overscaledZ-g.overscaledZ||u.canonical.y-g.canonical.y||u.wrap-g.wrap||u.canonical.x-g.canonical.x}function Qe(){return wl.workerClass!=null?new wl.workerClass:new a.window.Worker(wl.workerUrl)}const ot="mapboxgl_preloaded_worker_pool";class Kt{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Kt.workerCount;)this.workers.push(new Qe);return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ot]}numActive(){return Object.keys(this.active).length}}let dn;function Jn(){return dn||(dn=new Kt),dn}function di(f,s){const u={};for(const g in f)g!=="ref"&&(u[g]=f[g]);return a.refProperties.forEach(g=>{g in s&&(u[g]=s[g])}),u}function Gr(f){f=f.slice();const s=Object.create(null);for(let u=0;u<f.length;u++)s[f[u].id]=f[u];for(let u=0;u<f.length;u++)"ref"in f[u]&&(f[u]=di(f[u],s[f[u].ref]));return f}Kt.workerCount=2;const Nn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function il(f,s,u){u.push({command:Nn.addSource,args:[f,s[f]]})}function ac(f,s,u){s.push({command:Nn.removeSource,args:[f]}),u[f]=!0}function zh(f,s,u,g){ac(f,u,g),il(f,s,u)}function Pu(f,s,u){let g;for(g in f[u])if(f[u].hasOwnProperty(g)&&g!=="data"&&!w(f[u][g],s[u][g]))return!1;for(g in s[u])if(s[u].hasOwnProperty(g)&&g!=="data"&&!w(f[u][g],s[u][g]))return!1;return!0}function Zo(f,s,u,g,x,b){let E;for(E in s=s||{},f=f||{})f.hasOwnProperty(E)&&(w(f[E],s[E])||u.push({command:b,args:[g,E,s[E],x]}));for(E in s)s.hasOwnProperty(E)&&!f.hasOwnProperty(E)&&(w(f[E],s[E])||u.push({command:b,args:[g,E,s[E],x]}))}function vs(f){return f.id}function Rh(f,s){return f[s.id]=s,f}class Lh{constructor(s,u){this.reset(s,u)}reset(s,u){this.points=s||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.clamp(s,0,1);let u=1,g=this._distances[u];const x=s*this.paddedLength+this.padding;for(;g<x&&u<this._distances.length;)g=this._distances[++u];const b=u-1,E=this._distances[b],k=g-E,I=k>0?(x-E)/k:0;return this.points[b].mult(1-I).add(this.points[u].mult(I))}}class Sa{constructor(s,u,g){const x=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(s/g),this.yCellCount=Math.ceil(u/g);for(let E=0;E<this.xCellCount*this.yCellCount;E++)x.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=u,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,u,g,x,b){this._forEachCell(u,g,x,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(x),this.bboxes.push(b)}insertCircle(s,u,g,x){this._forEachCell(u-x,g-x,u+x,g+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(u),this.circles.push(g),this.circles.push(x)}_insertBoxCell(s,u,g,x,b,E){this.boxCells[b].push(E)}_insertCircleCell(s,u,g,x,b,E){this.circleCells[b].push(E)}_query(s,u,g,x,b,E){if(g<0||s>this.width||x<0||u>this.height)return!b&&[];const k=[];if(s<=0&&u<=0&&this.width<=g&&this.height<=x){if(b)return!0;for(let I=0;I<this.boxKeys.length;I++)k.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(let I=0;I<this.circleKeys.length;I++){const O=this.circles[3*I],L=this.circles[3*I+1],q=this.circles[3*I+2];k.push({key:this.circleKeys[I],x1:O-q,y1:L-q,x2:O+q,y2:L+q})}return E?k.filter(E):k}return this._forEachCell(s,u,g,x,this._queryCell,k,{hitTest:b,seenUids:{box:{},circle:{}}},E),b?k.length>0:k}_queryCircle(s,u,g,x,b){const E=s-g,k=s+g,I=u-g,O=u+g;if(k<0||E>this.width||O<0||I>this.height)return!x&&[];const L=[];return this._forEachCell(E,I,k,O,this._queryCellCircle,L,{hitTest:x,circle:{x:s,y:u,radius:g},seenUids:{box:{},circle:{}}},b),x?L.length>0:L}query(s,u,g,x,b){return this._query(s,u,g,x,!1,b)}hitTest(s,u,g,x,b){return this._query(s,u,g,x,!0,b)}hitTestCircle(s,u,g,x){return this._queryCircle(s,u,g,!0,x)}_queryCell(s,u,g,x,b,E,k,I){const O=k.seenUids,L=this.boxCells[b];if(L!==null){const ne=this.bboxes;for(const ae of L)if(!O.box[ae]){O.box[ae]=!0;const ue=4*ae;if(s<=ne[ue+2]&&u<=ne[ue+3]&&g>=ne[ue+0]&&x>=ne[ue+1]&&(!I||I(this.boxKeys[ae]))){if(k.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[ae],x1:ne[ue],y1:ne[ue+1],x2:ne[ue+2],y2:ne[ue+3]})}}}const q=this.circleCells[b];if(q!==null){const ne=this.circles;for(const ae of q)if(!O.circle[ae]){O.circle[ae]=!0;const ue=3*ae;if(this._circleAndRectCollide(ne[ue],ne[ue+1],ne[ue+2],s,u,g,x)&&(!I||I(this.circleKeys[ae]))){if(k.hitTest)return E.push(!0),!0;{const ce=ne[ue],pe=ne[ue+1],Z=ne[ue+2];E.push({key:this.circleKeys[ae],x1:ce-Z,y1:pe-Z,x2:ce+Z,y2:pe+Z})}}}}}_queryCellCircle(s,u,g,x,b,E,k,I){const O=k.circle,L=k.seenUids,q=this.boxCells[b];if(q!==null){const ae=this.bboxes;for(const ue of q)if(!L.box[ue]){L.box[ue]=!0;const ce=4*ue;if(this._circleAndRectCollide(O.x,O.y,O.radius,ae[ce+0],ae[ce+1],ae[ce+2],ae[ce+3])&&(!I||I(this.boxKeys[ue])))return E.push(!0),!0}}const ne=this.circleCells[b];if(ne!==null){const ae=this.circles;for(const ue of ne)if(!L.circle[ue]){L.circle[ue]=!0;const ce=3*ue;if(this._circlesCollide(ae[ce],ae[ce+1],ae[ce+2],O.x,O.y,O.radius)&&(!I||I(this.circleKeys[ue])))return E.push(!0),!0}}}_forEachCell(s,u,g,x,b,E,k,I){const O=this._convertToXCellCoord(s),L=this._convertToYCellCoord(u),q=this._convertToXCellCoord(g),ne=this._convertToYCellCoord(x);for(let ae=O;ae<=q;ae++)for(let ue=L;ue<=ne;ue++)if(b.call(this,s,u,g,x,this.xCellCount*ue+ae,E,k,I))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,u,g,x,b,E){const k=x-s,I=b-u,O=g+E;return O*O>k*k+I*I}_circleAndRectCollide(s,u,g,x,b,E,k){const I=(E-x)/2,O=Math.abs(s-(x+I));if(O>I+g)return!1;const L=(k-b)/2,q=Math.abs(u-(b+L));if(q>L+g)return!1;if(O<=I||q<=L)return!0;const ne=O-I,ae=q-L;return ne*ne+ae*ae<=g*g}}const bs={unknown:0,flipRequired:1,flipNotRequired:2},lc=Math.tan(85*Math.PI/180);function ct(f,s,u,g,x,b,E){const k=a.create();if(u)if(b.name==="globe"){const I=a.calculateGlobeLabelMatrix(x,s);a.multiply(k,k,I)}else{const I=le([],E);k[0]=I[0],k[1]=I[1],k[4]=I[2],k[5]=I[3],g||a.rotateZ(k,k,x.angle)}else a.multiply(k,x.labelPlaneMatrix,f);return k}function ws(f,s,u,g,x,b,E){const k=ct(f,s,u,g,x,b,E);return b.name==="globe"&&u||(k[2]=k[6]=k[10]=k[14]=0),k}function Yr(f,s,u,g,x,b,E){if(u){if(b.name==="globe"){const k=ct(f,s,u,g,x,b,E);return a.invert(k,k),a.multiply(k,f,k),k}{const k=a.clone(f),I=a.identity([]);return I[0]=E[0],I[1]=E[1],I[4]=E[2],I[5]=E[3],a.multiply(k,k,I),g||a.rotateZ(k,k,-x.angle),k}}return x.glCoordMatrix}function pi(f,s,u,g){const x=[f,s,u,1];u?a.transformMat4$1(x,x,g):Vn(x,x,g);const b=x[3];return x[0]/=b,x[1]/=b,x[2]/=b,x}function W1(f,s){return Math.min(.5+f/s*.5,1.5)}function Xo(f,s){const u=f[0]/f[3],g=f[1]/f[3];return u>=-s[0]&&u<=s[0]&&g>=-s[1]&&g<=s[1]}function Oh(f,s,u,g,x,b,E,k,I,O){const L=u.transform,q=g?f.textSizeData:f.iconSizeData,ne=a.evaluateSizeForZoom(q,u.transform.zoom),ae=L.projection.name==="globe",ue=[256/u.width*2+1,256/u.height*2+1],ce=g?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;ce.clear();let pe=null;ae&&(pe=g?f.text.globeExtVertexArray:f.icon.globeExtVertexArray);const Z=f.lineVertexArray,se=g?f.text.placedSymbolArray:f.icon.placedSymbolArray,xe=u.transform.width/u.transform.height;let ve,De=!1;for(let Re=0;Re<se.length;Re++){const ze=se.get(Re),{numGlyphs:Ue,writingMode:je}=ze;if(je!==a.WritingMode.vertical||De||ve===a.WritingMode.horizontal||(De=!0),ve=je,(ze.hidden||je===a.WritingMode.vertical)&&!De){Po(Ue,ce);continue}De=!1;const Ye=new a.Point(ze.tileAnchorX,ze.tileAnchorY);let{x:kt,y:qe,z:ft}=L.projection.projectTilePoint(Ye.x,Ye.y,O.canonical);if(I){const[Mn,nn,bn]=I(Ye);kt+=Mn,qe+=nn,ft+=bn}const et=[kt,qe,ft,1];if(a.transformMat4$1(et,et,s),!Xo(et,ue)){Po(Ue,ce);continue}const Et=W1(u.transform.cameraToCenterDistance,et[3]),Xe=a.evaluateSizeForFeature(q,ne,ze),pt=E?Xe/Et:Xe*Et,It=pi(kt,qe,ft,x);if(It[3]<=0){Po(Ue,ce);continue}let wt={};const At=E?null:I,hn=Yt(ze,pt,!1,k,s,x,b,f.glyphOffsetArray,Z,ce,pe,It,Ye,wt,xe,At,L.projection,O,E);De=hn.useVertical,At&&hn.needsFlipping&&(wt={}),(hn.notEnoughRoom||De||hn.needsFlipping&&Yt(ze,pt,!0,k,s,x,b,f.glyphOffsetArray,Z,ce,pe,It,Ye,wt,xe,At,L.projection,O,E).notEnoughRoom)&&Po(Ue,ce)}g?(f.text.dynamicLayoutVertexBuffer.updateData(ce),pe&&f.text.globeExtVertexBuffer.updateData(pe)):(f.icon.dynamicLayoutVertexBuffer.updateData(ce),pe&&f.icon.globeExtVertexBuffer.updateData(pe))}function G1(f,s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue,ce){const{lineStartIndex:pe,glyphStartIndex:Z,segment:se}=k,xe=Z+k.numGlyphs,ve=pe+k.lineLength,De=s.getoffsetX(Z),Re=s.getoffsetX(xe-1),ze=Qi(f*De,u,g,x,b,E,se,pe,ve,I,O,L,q,ne,!0,ae,ue,ce);if(!ze)return null;const Ue=Qi(f*Re,u,g,x,b,E,se,pe,ve,I,O,L,q,ne,!0,ae,ue,ce);return Ue?{first:ze,last:Ue}:null}function ol(f,s,u,g){return f===a.WritingMode.horizontal&&Math.abs(g)>Math.abs(u)?{useVertical:!0}:f===a.WritingMode.vertical?g>0?{needsFlipping:!0}:null:s!==bs.unknown&&function(x,b){return x===0||Math.abs(b/x)>lc}(u,g)?s===bs.flipRequired?{needsFlipping:!0}:null:u<0?{needsFlipping:!0}:null}function Yt(f,s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue,ce,pe,Z,se){const xe=s/24,ve=f.lineOffsetX*xe,De=f.lineOffsetY*xe,{lineStartIndex:Re,glyphStartIndex:ze,numGlyphs:Ue,segment:je,writingMode:Ye,flipState:kt}=f,qe=Re+f.lineLength,ft=et=>{if(L){const[It,wt,At]=et.up,hn=O.length;a.updateGlobeVertexNormal(L,hn+0,It,wt,At),a.updateGlobeVertexNormal(L,hn+1,It,wt,At),a.updateGlobeVertexNormal(L,hn+2,It,wt,At),a.updateGlobeVertexNormal(L,hn+3,It,wt,At)}const[Et,Xe,pt]=et.point;a.addDynamicAttributes(O,Et,Xe,pt,et.angle)};if(Ue>1){const et=G1(xe,k,ve,De,u,q,ne,f,I,b,ae,ce,!1,pe,Z,se);if(!et)return{notEnoughRoom:!0};if(g&&!u){let[Et,Xe,pt]=et.first.point,[It,wt,At]=et.last.point;[Et,Xe]=pi(Et,Xe,pt,E),[It,wt]=pi(It,wt,At,E);const hn=ol(Ye,kt,(It-Et)*ue,wt-Xe);if(f.flipState=hn&&hn.needsFlipping?bs.flipRequired:bs.flipNotRequired,hn)return hn}ft(et.first);for(let Et=ze+1;Et<ze+Ue-1;Et++){const Xe=Qi(xe*k.getoffsetX(Et),ve,De,u,q,ne,je,Re,qe,I,b,ae,ce,!1,!1,pe,Z,se);if(!Xe)return O.length-=4*(Et-ze),{notEnoughRoom:!0};ft(Xe)}ft(et.last)}else{if(g&&!u){const Et=pi(ne.x,ne.y,0,x),Xe=Re+je+1,pt=new a.Point(I.getx(Xe),I.gety(Xe)),It=pi(pt.x,pt.y,0,x),wt=It[3]>0?It:Un(ne,pt,Et,1,x,void 0,pe,Z.canonical),At=ol(Ye,kt,(wt[0]-Et[0])*ue,wt[1]-Et[1]);if(f.flipState=At&&At.needsFlipping?bs.flipRequired:bs.flipNotRequired,At)return At}const et=Qi(xe*k.getoffsetX(ze),ve,De,u,q,ne,je,Re,qe,I,b,ae,ce,!1,!1,pe,Z,se);if(!et)return{notEnoughRoom:!0};ft(et)}return{}}function Hn(f,s,u,g,x){const{x:b,y:E,z:k}=g.projectTilePoint(f.x,f.y,s);if(!x)return pi(b,E,k,u);const[I,O,L]=x(f);return pi(b+I,E+O,k+L,u)}function Un(f,s,u,g,x,b,E,k){const I=Hn(f.sub(s)._unit()._add(f),k,x,E,b);return a.sub(I,u,I),a.normalize(I,I),a.scaleAndAdd(I,u,I,g)}function Qi(f,s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue,ce,pe,Z){const se=g?f-s:f+s;let xe=se>0?1:-1,ve=0;g&&(xe*=-1,ve=Math.PI),xe<0&&(ve+=Math.PI);let De=k+E+(xe>0?0:1)|0,Re=x,ze=x,Ue=0,je=0;const Ye=Math.abs(se),kt=[],qe=[];let ft=b,et=ft;const Et=()=>Un(et,ft,ze,Ye-Ue+1,L,ne,ce,pe.canonical);for(;Ue+je<=Ye;){if(De+=xe,De<k||De>=I)return null;if(ze=Re,et=ft,kt.push(ze),ae&&qe.push(et),ft=new a.Point(O.getx(De),O.gety(De)),Re=q[De],!Re){const bn=Hn(ft,pe.canonical,L,ce,ne);Re=bn[3]>0?q[De]=bn:Et()}Ue+=je,je=a.distance(ze,Re)}ue&&ne&&(q[De]&&(Re=Et(),je=a.distance(ze,Re)),q[De]=Re);const Xe=(Ye-Ue)/je,pt=ft.sub(et)._mult(Xe)._add(et),It=a.sub([],Re,ze),wt=a.scaleAndAdd([],ze,It,Xe);let At=[0,0,1],hn=It[0],Mn=It[1];if(Z&&(At=ce.upVector(pe.canonical,pt.x,pt.y),At[0]!==0||At[1]!==0||At[2]!==1)){const bn=[At[2],0,-At[0]],Wn=a.cross([],At,bn);a.normalize(bn,bn),a.normalize(Wn,Wn),hn=a.dot(It,bn),Mn=a.dot(It,Wn)}if(u){const bn=a.cross([],At,It);a.normalize(bn,bn),a.scaleAndAdd(wt,wt,bn,u*xe)}const nn=ve+Math.atan2(Mn,hn);return kt.push(wt),ae&&qe.push(pt),{point:wt,angle:nn,path:kt,tilePath:qe,up:At}}function Po(f,s){const u=s.length,g=u+4*f;s.resize(g),s.float32.fill(-1/0,4*u,4*g)}function Vn(f,s,u){const g=s[0],x=s[1];return f[0]=u[0]*g+u[4]*x+u[12],f[1]=u[1]*g+u[5]*x+u[13],f[3]=u[3]*g+u[7]*x+u[15],f}const eo=100;class cc{constructor(s,u,g=new Sa(s.width+200,s.height+200,25),x=new Sa(s.width+200,s.height+200,25)){this.transform=s,this.grid=g,this.ignoredGrid=x,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+eo,this.screenBottomBoundary=s.height+eo,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.fogState=u}placeCollisionBox(s,u,g,x,b,E,k,I){let O=g.projectedAnchorX,L=g.projectedAnchorY,q=g.projectedAnchorZ;const ne=g.elevation,ae=g.tileID,ue=s.getProjection();if(ne&&ae){const[Re,ze,Ue]=ue.upVector(ae.canonical,g.tileAnchorX,g.tileAnchorY),je=ue.upVectorScale(ae.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;O+=Re*ne*je,L+=ze*ne*je,q+=Ue*ne*je}const ce=this.projectAndGetPerspectiveRatio(k,O,L,q,g.tileID,ue.name==="globe"||!!ne||this.transform.pitch>0,ue),pe=E*ce.perspectiveRatio,Z=(g.x1*u+x.x-g.padding)*pe+ce.point.x,se=(g.y1*u+x.y-g.padding)*pe+ce.point.y,xe=(g.x2*u+x.x+g.padding)*pe+ce.point.x,ve=(g.y2*u+x.y+g.padding)*pe+ce.point.y,De=ce.perspectiveRatio<=.55||ce.occluded;return!this.isInsideGrid(Z,se,xe,ve)||!b&&this.grid.hitTest(Z,se,xe,ve,I)||De?{box:[],offscreen:!1,occluded:ce.occluded}:{box:[Z,se,xe,ve],offscreen:this.isOffscreen(Z,se,xe,ve),occluded:!1}}placeCollisionCircles(s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue,ce){const pe=[],Z=this.transform.elevation,se=s.getProjection(),xe=Z?Z.getAtTileOffsetFunc(ce,this.transform.center.lat,this.transform.worldSize,se):null,ve=new a.Point(g.tileAnchorX,g.tileAnchorY);let{x:De,y:Re,z:ze}=se.projectTilePoint(ve.x,ve.y,ce.canonical);if(xe){const[pt,It,wt]=xe(ve);De+=pt,Re+=It,ze+=wt}const Ue=se.name==="globe",je=this.projectAndGetPerspectiveRatio(k,De,Re,ze,ce,Ue||!!Z||this.transform.pitch>0,se),{perspectiveRatio:Ye}=je,kt=(q?E/Ye:E*Ye)/a.ONE_EM,qe=pi(De,Re,ze,I),ft=je.signedDistanceFromCamera>0?G1(kt,b,g.lineOffsetX*kt,g.lineOffsetY*kt,!1,qe,ve,g,x,I,{},Z&&!q?xe:null,q&&!!Z,se,ce,q):null;let et=!1,Et=!1,Xe=!0;if(ft&&!je.occluded){const pt=.5*ae*Ye+ue,It=new a.Point(-100,-100),wt=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),At=new Lh,{first:hn,last:Mn}=ft,nn=hn.path.length;let bn=[];for(let ln=nn-1;ln>=1;ln--)bn.push(hn.path[ln]);for(let ln=1;ln<Mn.path.length;ln++)bn.push(Mn.path[ln]);const Wn=2.5*pt;O&&(bn=bn.map(([ln,ir,lr],cr)=>(xe&&!Ue&&(lr=xe(cr<nn-1?hn.tilePath[nn-1-cr]:Mn.tilePath[cr-nn+2])[2]),pi(ln,ir,lr,O))),bn.some(ln=>ln[3]<=0)&&(bn=[]));let jn=[];if(bn.length>0){let ln=1/0,ir=-1/0,lr=1/0,cr=-1/0;for(const ur of bn)ln=Math.min(ln,ur[0]),lr=Math.min(lr,ur[1]),ir=Math.max(ir,ur[0]),cr=Math.max(cr,ur[1]);ir>=It.x&&ln<=wt.x&&cr>=It.y&&lr<=wt.y&&(jn=[bn.map(ur=>new a.Point(ur[0],ur[1]))],(ln<It.x||ir>wt.x||lr<It.y||cr>wt.y)&&(jn=a.clipLine(jn,It.x,It.y,wt.x,wt.y)))}for(const ln of jn){At.reset(ln,.25*pt);let ir=0;ir=At.length<=.5*pt?1:Math.ceil(At.paddedLength/Wn)+1;for(let lr=0;lr<ir;lr++){const cr=lr/Math.max(ir-1,1),ur=At.lerp(cr),Mi=ur.x+eo,mi=ur.y+eo;pe.push(Mi,mi,pt,0);const ho=Mi-pt,Qo=mi-pt,Dr=Mi+pt,dr=mi+pt;if(Xe=Xe&&this.isOffscreen(ho,Qo,Dr,dr),Et=Et||this.isInsideGrid(ho,Qo,Dr,dr),!u&&this.grid.hitTestCircle(Mi,mi,pt,ne)&&(et=!0,!L))return{circles:[],offscreen:!1,collisionDetected:et,occluded:!1}}}}return{circles:!L&&et||!Et?[]:pe,offscreen:Xe,collisionDetected:et,occluded:je.occluded}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let g=1/0,x=1/0,b=-1/0,E=-1/0;for(const L of s){const q=new a.Point(L.x+eo,L.y+eo);g=Math.min(g,q.x),x=Math.min(x,q.y),b=Math.max(b,q.x),E=Math.max(E,q.y),u.push(q)}const k=this.grid.query(g,x,b,E).concat(this.ignoredGrid.query(g,x,b,E)),I={},O={};for(const L of k){const q=L.key;if(I[q.bucketInstanceId]===void 0&&(I[q.bucketInstanceId]={}),I[q.bucketInstanceId][q.featureIndex])continue;const ne=[new a.Point(L.x1,L.y1),new a.Point(L.x2,L.y1),new a.Point(L.x2,L.y2),new a.Point(L.x1,L.y2)];a.polygonIntersectsPolygon(u,ne)&&(I[q.bucketInstanceId][q.featureIndex]=!0,O[q.bucketInstanceId]===void 0&&(O[q.bucketInstanceId]=[]),O[q.bucketInstanceId].push(q.featureIndex))}return O}insertCollisionBox(s,u,g,x,b){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:b},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,u,g,x,b){const E=u?this.ignoredGrid:this.grid,k={bucketInstanceId:g,featureIndex:x,collisionGroupID:b};for(let I=0;I<s.length;I+=4)E.insertCircle(k,s[I],s[I+1],s[I+2])}projectAndGetPerspectiveRatio(s,u,g,x,b,E,k){const I=[u,g,x,1];let O=!1;x||this.transform.pitch>0?(a.transformMat4$1(I,I,s),this.fogState&&b&&k.name!=="globe"&&(O=function(ne,ae,ue,ce,pe,Z){const se=Z.calculateFogTileMatrix(pe),xe=[ae,ue,ce];return a.transformMat4(xe,xe,se),Be(ne,xe,Z.pitch,Z._fov)}(this.fogState,u,g,x,b.toUnwrapped(),this.transform)>.9)):Vn(I,I,s);const L=I[3];return{point:new a.Point((I[0]/L+1)/2*this.transform.width+eo,(-I[1]/L+1)/2*this.transform.height+eo),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/L*.5,1.5),signedDistanceFromCamera:L,occluded:E&&I[2]>L||O}}isOffscreen(s,u,g,x){return g<eo||s>=this.screenRightBoundary||x<eo||u>this.screenBottomBoundary}isInsideGrid(s,u,g,x){return g>=0&&s<this.gridRightBoundary&&x>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const s=a.identity([]);return a.translate(s,s,[-100,-100,0]),s}}function Ta(f,s,u){const g=s.createTileMatrix(f,f.worldSize,u.toUnwrapped());return a.multiply(new Float32Array(16),f.projMatrix,g)}function ao(f,s,u){if(s.projection.name===u.projection.name)return f.projMatrix;const g=u.clone();return g.setProjection(s.projection),Ta(g,s.getProjection(),f)}function Ar(f,s,u){return s.name===u.projection.name?f.projMatrix:Ta(u,s,f)}class H1{constructor(s,u,g,x){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?u:-u))):x&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Ss{constructor(s,u,g,x,b,E=!1){this.text=new H1(s?s.text:null,u,g,b),this.icon=new H1(s?s.icon:null,u,x,b),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class uc{constructor(s,u,g,x=!1){this.text=s,this.icon=u,this.skipFade=g,this.clipped=x}}class dc{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Bh{constructor(s,u,g,x,b){this.bucketInstanceId=s,this.featureIndex=u,this.sourceLayerIndex=g,this.bucketIndex=x,this.tileID=b}}class q1{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const u=++this.maxGroupID;this.collisionGroups[s]={ID:u,predicate:g=>g.collisionGroupID===u}}return this.collisionGroups[s]}}function hc(f,s,u,g,x){const{horizontalAlign:b,verticalAlign:E}=a.getAnchorAlignment(f),k=-(b-.5)*s,I=-(E-.5)*u,O=a.evaluateVariableOffset(f,g);return new a.Point(k+O[0]*x,I+O[1]*x)}function pc(f,s,u,g,x){const b=new a.Point(f,s);return u&&b._rotate(g?x:-x),b}class Mu{constructor(s,u,g,x,b){this.transform=s.clone(),this.projection=s.projection.name,this.collisionIndex=new cc(this.transform,b),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new q1(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,u,g,x){const b=g.getBucket(u),E=g.latestFeatureIndex;if(!b||!E||u.id!==b.layerIds[0])return;const k=b.layers[0].layout,I=g.collisionBoxArray,O=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),L=g.tileSize/a.EXTENT,q=g.tileID.toUnwrapped();this.transform.setProjection(b.projection);const ne=(ae=g.tileID,ue=b.getProjection(),ce=this.transform,ue.name===this.projection?ce.calculateProjMatrix(ae.toUnwrapped()):Ta(ce,ue,ae));var ae,ue,ce;const pe=k.get("text-pitch-alignment")==="map",Z=k.get("text-rotation-alignment")==="map";u.compileFilter();const se=u.dynamicFilter(),xe=u.dynamicFilterNeedsFeature(),ve=this.transform.calculatePixelsToTileUnitsMatrix(g),De=ws(ne,g.tileID.canonical,pe,Z,this.transform,b.getProjection(),ve);let Re=null;if(pe){const je=Yr(ne,g.tileID.canonical,pe,Z,this.transform,b.getProjection(),ve);Re=a.multiply([],this.transform.labelPlaneMatrix,je)}let ze=null;se&&g.latestFeatureIndex&&(ze={unwrappedTileID:q,dynamicFilter:se,dynamicFilterNeedsFeature:xe,featureIndex:g.latestFeatureIndex}),this.retainedQueryData[b.bucketInstanceId]=new Bh(b.bucketInstanceId,E,b.sourceLayerIndex,b.index,g.tileID);const Ue={bucket:b,layout:k,posMatrix:ne,textLabelPlaneMatrix:De,labelToScreenMatrix:Re,clippingData:ze,scale:O,textPixelRatio:L,holdingForFade:g.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:a.evaluateSizeForZoom(b.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(x)for(const je of b.sortKeyRanges){const{sortKey:Ye,symbolInstanceStart:kt,symbolInstanceEnd:qe}=je;s.push({sortKey:Ye,symbolInstanceStart:kt,symbolInstanceEnd:qe,parameters:Ue})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ue})}attemptAnchorPlacement(s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue,ce,pe,Z,se){const{textOffset0:xe,textOffset1:ve,crossTileID:De}=ne,Re=[xe,ve],ze=hc(s,g,x,Re,b),Ue=this.collisionIndex.placeCollisionBox(ue,b,u,pc(ze.x,ze.y,E,k,this.transform.angle),q,I,O,L.predicate);if(pe){const je=ue.getSymbolInstanceIconSize(se,this.transform.zoom,ne.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ue,je,pe,pc(ze.x,ze.y,E,k,this.transform.angle),q,I,O,L.predicate).box.length===0)return}if(Ue.box.length>0){let je;return this.prevPlacement&&this.prevPlacement.variableOffsets[De]&&this.prevPlacement.placements[De]&&this.prevPlacement.placements[De].text&&(je=this.prevPlacement.variableOffsets[De].anchor),this.variableOffsets[De]={textOffset:Re,width:g,height:x,anchor:s,textScale:b,prevAnchor:je},this.markUsedJustification(ue,s,ne,ce),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,ce,ne),this.placedOrientations[De]=ce),{shift:ze,placedGlyphBoxes:Ue}}}placeLayerBucketPart(s,u,g,x){const{bucket:b,layout:E,posMatrix:k,textLabelPlaneMatrix:I,labelToScreenMatrix:O,clippingData:L,textPixelRatio:q,holdingForFade:ne,collisionBoxArray:ae,partiallyEvaluatedTextSize:ue,partiallyEvaluatedIconSize:ce,collisionGroup:pe}=s.parameters,Z=E.get("text-optional"),se=E.get("icon-optional"),xe=E.get("text-allow-overlap"),ve=E.get("icon-allow-overlap"),De=E.get("text-rotation-alignment")==="map",Re=E.get("text-pitch-alignment")==="map",ze=E.get("icon-text-fit")!=="none",Ue=E.get("symbol-z-order")==="viewport-y";this.transform.setProjection(b.projection);let je=xe&&(ve||!b.hasIconData()||se),Ye=ve&&(xe||!b.hasTextData()||Z);!b.collisionArrays&&ae&&b.deserializeCollisionBoxes(ae),g&&x&&b.updateCollisionDebugBuffers(this.transform.zoom,ae);const kt=(qe,ft,et)=>{const{crossTileID:Et,numVerticalGlyphVertices:Xe}=qe;if(L){const Dr={zoom:this.transform.zoom,pitch:this.transform.pitch};let dr=null;if(L.dynamicFilterNeedsFeature){const Qn=this.retainedQueryData[b.bucketInstanceId];dr=L.featureIndex.loadFeature({featureIndex:qe.featureIndex,bucketIndex:Qn.bucketIndex,sourceLayerIndex:Qn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,L.dynamicFilter)(Dr,dr,this.retainedQueryData[b.bucketInstanceId].tileID.canonical,new a.Point(qe.tileAnchorX,qe.tileAnchorY),this.transform.calculateDistanceTileData(L.unwrappedTileID)))return this.placements[Et]=new uc(!1,!1,!1,!0),void u.add(Et)}if(u.has(Et))return;if(ne)return void(this.placements[Et]=new uc(!1,!1,!1));let pt=!1,It=!1,wt=!0,At=!1,hn=!1,Mn=null,nn={box:null,offscreen:null,occluded:null},bn={box:null,offscreen:null,occluded:null},Wn=null,jn=null,ln=null,ir=0,lr=0,cr=0;et.textFeatureIndex?ir=et.textFeatureIndex:qe.useRuntimeCollisionCircles&&(ir=qe.featureIndex),et.verticalTextFeatureIndex&&(lr=et.verticalTextFeatureIndex);const ur=Dr=>{Dr.tileID=this.retainedQueryData[b.bucketInstanceId].tileID;const dr=this.transform.elevation;(dr||Dr.elevation)&&(Dr.elevation=dr?dr.getAtTileOffset(Dr.tileID,Dr.tileAnchorX,Dr.tileAnchorY):0)},Mi=et.textBox;if(Mi){ur(Mi);const Dr=Qn=>{let Kr=a.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Qn&&this.prevPlacement){const Li=this.prevPlacement.placedOrientations[Et];Li&&(this.placedOrientations[Et]=Li,Kr=Li,this.markUsedOrientation(b,Kr,qe))}return Kr},dr=(Qn,Kr)=>{if(b.allowVerticalPlacement&&Xe>0&&et.verticalTextBox){for(const Li of b.writingModes)if(Li===a.WritingMode.vertical?(nn=Kr(),bn=nn):nn=Qn(),nn&&nn.box&&nn.box.length)break}else nn=Qn()};if(E.get("text-variable-anchor")){let Qn=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Et]){const kr=this.prevPlacement.variableOffsets[Et];Qn.indexOf(kr.anchor)>0&&(Qn=Qn.filter(Ui=>Ui!==kr.anchor),Qn.unshift(kr.anchor))}const Kr=(kr,Ui,nd)=>{const Da=b.getSymbolInstanceTextSize(ue,qe,this.transform.zoom,ft),zc=(kr.x2-kr.x1)*Da+2*kr.padding,Is=(kr.y2-kr.y1)*Da+2*kr.padding,Ks=ze&&!ve?Ui:null;Ks&&ur(Ks);let za={box:[],offscreen:!1,occluded:!1};const rd=xe?2*Qn.length:Qn.length;for(let Rc=0;Rc<rd;++Rc){const kp=this.attemptAnchorPlacement(Qn[Rc%Qn.length],kr,zc,Is,Da,De,Re,q,k,pe,Rc>=Qn.length,qe,ft,b,nd,Ks,ue,ce);if(kp&&(za=kp.placedGlyphBoxes,za&&za.box&&za.box.length)){pt=!0,Mn=kp.shift;break}}return za};dr(()=>Kr(Mi,et.iconBox,a.WritingMode.horizontal),()=>{const kr=et.verticalTextBox;return kr&&ur(kr),b.allowVerticalPlacement&&!(nn&&nn.box&&nn.box.length)&&Xe>0&&kr?Kr(kr,et.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),nn&&(pt=nn.box,wt=nn.offscreen,At=nn.occluded);const Li=Dr(!(!nn||!nn.box));if(!pt&&this.prevPlacement){const kr=this.prevPlacement.variableOffsets[Et];kr&&(this.variableOffsets[Et]=kr,this.markUsedJustification(b,kr.anchor,qe,Li))}}else{const Qn=(Kr,Li)=>{const kr=b.getSymbolInstanceTextSize(ue,qe,this.transform.zoom,ft),Ui=this.collisionIndex.placeCollisionBox(b,kr,Kr,new a.Point(0,0),xe,q,k,pe.predicate);return Ui&&Ui.box&&Ui.box.length&&(this.markUsedOrientation(b,Li,qe),this.placedOrientations[Et]=Li),Ui};dr(()=>Qn(Mi,a.WritingMode.horizontal),()=>{const Kr=et.verticalTextBox;return b.allowVerticalPlacement&&Xe>0&&Kr?(ur(Kr),Qn(Kr,a.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Dr(!!(nn&&nn.box&&nn.box.length))}}if(Wn=nn,pt=Wn&&Wn.box&&Wn.box.length>0,wt=Wn&&Wn.offscreen,At=Wn&&Wn.occluded,qe.useRuntimeCollisionCircles){const Dr=b.text.placedSymbolArray.get(qe.centerJustifiedTextSymbolIndex>=0?qe.centerJustifiedTextSymbolIndex:qe.verticalPlacedTextSymbolIndex),dr=a.evaluateSizeForFeature(b.textSizeData,ue,Dr),Qn=E.get("text-padding");jn=this.collisionIndex.placeCollisionCircles(b,xe,Dr,b.lineVertexArray,b.glyphOffsetArray,dr,k,I,O,g,Re,pe.predicate,qe.collisionCircleDiameter*dr/a.ONE_EM,Qn,this.retainedQueryData[b.bucketInstanceId].tileID),pt=xe||jn.circles.length>0&&!jn.collisionDetected,wt=wt&&jn.offscreen,At=jn.occluded}if(et.iconFeatureIndex&&(cr=et.iconFeatureIndex),et.iconBox){const Dr=dr=>{ur(dr);const Qn=ze&&Mn?pc(Mn.x,Mn.y,De,Re,this.transform.angle):new a.Point(0,0),Kr=b.getSymbolInstanceIconSize(ce,this.transform.zoom,qe.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(b,Kr,dr,Qn,ve,q,k,pe.predicate)};bn&&bn.box&&bn.box.length&&et.verticalIconBox?(ln=Dr(et.verticalIconBox),It=ln.box.length>0):(ln=Dr(et.iconBox),It=ln.box.length>0),wt=wt&&ln.offscreen,hn=ln.occluded}const mi=Z||qe.numHorizontalGlyphVertices===0&&Xe===0,ho=se||qe.numIconVertices===0;if(mi||ho?ho?mi||(It=It&&pt):pt=It&&pt:It=pt=It&&pt,pt&&Wn&&Wn.box&&this.collisionIndex.insertCollisionBox(Wn.box,E.get("text-ignore-placement"),b.bucketInstanceId,bn&&bn.box&&lr?lr:ir,pe.ID),It&&ln&&this.collisionIndex.insertCollisionBox(ln.box,E.get("icon-ignore-placement"),b.bucketInstanceId,cr,pe.ID),jn&&(pt&&this.collisionIndex.insertCollisionCircles(jn.circles,E.get("text-ignore-placement"),b.bucketInstanceId,ir,pe.ID),g)){const Dr=b.bucketInstanceId;let dr=this.collisionCircleArrays[Dr];dr===void 0&&(dr=this.collisionCircleArrays[Dr]=new dc);for(let Qn=0;Qn<jn.circles.length;Qn+=4)dr.circles.push(jn.circles[Qn+0]),dr.circles.push(jn.circles[Qn+1]),dr.circles.push(jn.circles[Qn+2]),dr.circles.push(jn.collisionDetected?1:0)}const Qo=b.projection.name!=="globe";je=je&&(Qo||!At),Ye=Ye&&(Qo||!hn),this.placements[Et]=new uc(pt||je,It||Ye,wt||b.justReloaded),u.add(Et)};if(Ue){const qe=b.getSortedSymbolIndexes(this.transform.angle);for(let ft=qe.length-1;ft>=0;--ft){const et=qe[ft];kt(b.symbolInstances.get(et),et,b.collisionArrays[et])}}else for(let qe=s.symbolInstanceStart;qe<s.symbolInstanceEnd;qe++)kt(b.symbolInstances.get(qe),qe,b.collisionArrays[qe]);if(g&&b.bucketInstanceId in this.collisionCircleArrays){const qe=this.collisionCircleArrays[b.bucketInstanceId];a.invert(qe.invProjMatrix,k),qe.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(s,u,g,x){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:E,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:I,crossTileID:O}=g,L=a.getAnchorJustification(u),q=x===a.WritingMode.vertical?I:L==="left"?b:L==="center"?E:L==="right"?k:-1;b>=0&&(s.text.placedSymbolArray.get(b).crossTileID=q>=0&&b!==q?0:O),E>=0&&(s.text.placedSymbolArray.get(E).crossTileID=q>=0&&E!==q?0:O),k>=0&&(s.text.placedSymbolArray.get(k).crossTileID=q>=0&&k!==q?0:O),I>=0&&(s.text.placedSymbolArray.get(I).crossTileID=q>=0&&I!==q?0:O)}markUsedOrientation(s,u,g){const x=u===a.WritingMode.horizontal||u===a.WritingMode.horizontalOnly?u:0,b=u===a.WritingMode.vertical?u:0,{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:O}=g,L=s.text.placedSymbolArray;E>=0&&(L.get(E).placedOrientation=x),k>=0&&(L.get(k).placedOrientation=x),I>=0&&(L.get(I).placedOrientation=x),O>=0&&(L.get(O).placedOrientation=b)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let g=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const x=u?u.symbolFadeChange(s):1,b=u?u.opacities:{},E=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const I in this.placements){const O=this.placements[I],L=b[I];L?(this.opacities[I]=new Ss(L,x,O.text,O.icon,null,O.clipped),g=g||O.text!==L.text.placed||O.icon!==L.icon.placed):(this.opacities[I]=new Ss(null,x,O.text,O.icon,O.skipFade,O.clipped),g=g||O.text||O.icon)}for(const I in b){const O=b[I];if(!this.opacities[I]){const L=new Ss(O,x,!1,!1);L.isHidden()||(this.opacities[I]=L,g=g||O.text.placed||O.icon.placed)}}for(const I in E)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=E[I]);for(const I in k)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=k[I]);g?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:s)}updateLayerOpacities(s,u){const g=new Set;for(const x of u){const b=x.getBucket(s);b&&x.latestFeatureIndex&&s.id===b.layerIds[0]&&this.updateBucketOpacities(b,g,x.collisionBoxArray)}}updateBucketOpacities(s,u,g){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const x=s.layers[0].layout,b=!!s.layers[0].dynamicFilter(),E=new Ss(null,0,!1,!1,!0),k=x.get("text-allow-overlap"),I=x.get("icon-allow-overlap"),O=x.get("text-variable-anchor"),L=x.get("text-rotation-alignment")==="map",q=x.get("text-pitch-alignment")==="map",ne=x.get("icon-text-fit")!=="none",ae=new Ss(null,0,k&&(I||!s.hasIconData()||x.get("icon-optional")),I&&(k||!s.hasTextData()||x.get("text-optional")),!0);!s.collisionArrays&&g&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(g);const ue=(pe,Z,se)=>{for(let xe=0;xe<Z/4;xe++)pe.opacityVertexArray.emplaceBack(se)};let ce=0;for(let pe=0;pe<s.symbolInstances.length;pe++){const Z=s.symbolInstances.get(pe),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:xe,crossTileID:ve,numIconVertices:De}=Z,Re=u.has(ve);let ze=this.opacities[ve];Re?ze=E:ze||(ze=ae,this.opacities[ve]=ze),u.add(ve);const Ue=se>0||xe>0,je=De>0,Ye=this.placedOrientations[ve],kt=Ye===a.WritingMode.vertical,qe=Ye===a.WritingMode.horizontal||Ye===a.WritingMode.horizontalOnly;if(!Ue&&!je||ze.isHidden()||ce++,Ue){const ft=fc(ze.text);ue(s.text,se,kt?jr:ft),ue(s.text,xe,qe?jr:ft);const et=ze.text.isHidden(),{leftJustifiedTextSymbolIndex:Et,centerJustifiedTextSymbolIndex:Xe,rightJustifiedTextSymbolIndex:pt,verticalPlacedTextSymbolIndex:It}=Z,wt=s.text.placedSymbolArray,At=et||kt?1:0;Et>=0&&(wt.get(Et).hidden=At),Xe>=0&&(wt.get(Xe).hidden=At),pt>=0&&(wt.get(pt).hidden=At),It>=0&&(wt.get(It).hidden=et||qe?1:0);const hn=this.variableOffsets[ve];hn&&this.markUsedJustification(s,hn.anchor,Z,Ye);const Mn=this.placedOrientations[ve];Mn&&(this.markUsedJustification(s,"left",Z,Mn),this.markUsedOrientation(s,Mn,Z))}if(je){const ft=fc(ze.icon),{placedIconSymbolIndex:et,verticalPlacedIconSymbolIndex:Et}=Z,Xe=s.icon.placedSymbolArray,pt=ze.icon.isHidden()?1:0;et>=0&&(ue(s.icon,De,kt?jr:ft),Xe.get(et).hidden=pt),Et>=0&&(ue(s.icon,Z.numVerticalIconVertices,qe?jr:ft),Xe.get(Et).hidden=pt)}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const ft=s.collisionArrays[pe];if(ft){let et=new a.Point(0,0),Et=!0;if(ft.textBox||ft.verticalTextBox){if(O){const pt=this.variableOffsets[ve];pt?(et=hc(pt.anchor,pt.width,pt.height,pt.textOffset,pt.textScale),L&&et._rotate(q?this.transform.angle:-this.transform.angle)):Et=!1}b&&(Et=!ze.clipped),ft.textBox&&sl(s.textCollisionBox.collisionVertexArray,ze.text.placed,!Et||kt,et.x,et.y),ft.verticalTextBox&&sl(s.textCollisionBox.collisionVertexArray,ze.text.placed,!Et||qe,et.x,et.y)}const Xe=Et&&!!(!qe&&ft.verticalIconBox);ft.iconBox&&sl(s.iconCollisionBox.collisionVertexArray,ze.icon.placed,Xe,ne?et.x:0,ne?et.y:0),ft.verticalIconBox&&sl(s.iconCollisionBox.collisionVertexArray,ze.icon.placed,!Xe,ne?et.x:0,ne?et.y:0)}}}if(s.fullyClipped=ce===0,s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=pe.invProjMatrix,s.placementViewportMatrix=pe.viewportMatrix,s.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,u){const g=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*g>s}setStale(){this.stale=!0}}function sl(f,s,u,g,x){f.emplaceBack(s?1:0,u?1:0,g||0,x||0),f.emplaceBack(s?1:0,u?1:0,g||0,x||0),f.emplaceBack(s?1:0,u?1:0,g||0,x||0),f.emplaceBack(s?1:0,u?1:0,g||0,x||0)}const Ni=Math.pow(2,25),Hr=Math.pow(2,24),Fh=Math.pow(2,17),$h=Math.pow(2,16),ji=Math.pow(2,9),lo=Math.pow(2,8),Z1=Math.pow(2,1);function fc(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const s=f.placed?1:0,u=Math.floor(127*f.opacity);return u*Ni+s*Hr+u*Fh+s*$h+u*ji+s*lo+u*Z1+s}const jr=0;class mc{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&s.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(s,u,g,x,b){const E=this._bucketParts;for(;this._currentTileIndex<s.length;)if(u.getBucketParts(E,x,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((k,I)=>k.sortKey-I.sortKey));this._currentPartIndex<E.length;){const k=E[this._currentPartIndex];if(u.placeLayerBucketPart(k,this._seenCrossTileIDs,g,k.symbolInstanceStart===0),this._currentPartIndex++,b())return!0}return!1}}class Nh{constructor(s,u,g,x,b,E,k,I){this.placement=new Mu(s,b,E,k,I),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(s,u,g){const x=a.exported.now(),b=()=>{const E=a.exported.now()-x;return!this._forceFullPlacement&&E>2};for(;this._currentPlacementIndex>=0;){const E=u[s[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=k)&&(!E.maxzoom||E.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new mc(E)),this._inProgressLayer.continuePlacement(g[E.source],this.placement,this._showCollisionBoxes,E,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Ca=512/a.EXTENT/2;class vi{constructor(s,u,g){this.tileID=s,this.bucketInstanceId=g,this.index=new a.KDBush(u.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const x=s.canonical.x*a.EXTENT,b=s.canonical.y*a.EXTENT;for(let E=0;E<u.length;E++){const{key:k,crossTileID:I,tileAnchorX:O,tileAnchorY:L}=u.get(E),q=Math.floor((x+O)*Ca),ne=Math.floor((b+L)*Ca);this.index.add(q,ne),this.keys.push(k),this.crossTileIDs.push(I)}this.index.finish()}findMatches(s,u,g){const x=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z),b=Ca/Math.pow(2,u.canonical.z-this.tileID.canonical.z),E=u.canonical.x*a.EXTENT,k=u.canonical.y*a.EXTENT;for(let I=0;I<s.length;I++){const O=s.get(I);if(O.crossTileID)continue;const{key:L,tileAnchorX:q,tileAnchorY:ne}=O,ae=Math.floor((E+q)*b),ue=Math.floor((k+ne)*b),ce=this.index.range(ae-x,ue-x,ae+x,ue+x);for(const pe of ce){const Z=this.crossTileIDs[pe];if(this.keys[pe]===L&&!g.has(Z)){g.add(Z),O.crossTileID=Z;break}}}}}class jh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Uh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const u=Math.round((s-this.lng)/360);if(u!==0)for(const g in this.indexes){const x=this.indexes[g],b={};for(const E in x){const k=x[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),b[k.tileID.key]=k}this.indexes[g]=b}this.lng=s}addBucket(s,u,g){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let b=0;b<u.symbolInstances.length;b++)u.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]=new Set);const x=this.usedCrossTileIDs[s.overscaledZ];for(const b in this.indexes){const E=this.indexes[b];if(Number(b)>s.overscaledZ)for(const k in E){const I=E[k];I.tileID.isChildOf(s)&&I.findMatches(u.symbolInstances,s,x)}else{const k=E[s.scaledTo(Number(b)).key];k&&k.findMatches(u.symbolInstances,s,x)}}for(let b=0;b<u.symbolInstances.length;b++){const E=u.symbolInstances.get(b);E.crossTileID||(E.crossTileID=g.generate(),x.add(E.crossTileID))}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new vi(s,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(s,u){for(const g of u.crossTileIDs)this.usedCrossTileIDs[s].delete(g)}removeStaleBuckets(s){let u=!1;for(const g in this.indexes){const x=this.indexes[g];for(const b in x)s[x[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,x[b]),delete x[b],u=!0)}return u}}class Ts{constructor(){this.layerIndexes={},this.crossTileIDs=new jh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,u,g,x){let b=this.layerIndexes[s.id];b===void 0&&(b=this.layerIndexes[s.id]=new Uh);let E=!1;const k={};x.name!=="globe"&&b.handleWrapJump(g);for(const I of u){const O=I.getBucket(s);O&&s.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(I.tileID,O,this.crossTileIDs)&&(E=!0),k[O.bucketInstanceId]=!0)}return b.removeStaleBuckets(k)&&(E=!0),E}pruneUnusedLayers(s){const u={};s.forEach(g=>{u[g]=!0});for(const g in this.layerIndexes)u[g]||delete this.layerIndexes[g]}}const Xs=(f,s)=>a.emitValidationErrors(f,s&&s.filter(u=>u.identifier!=="source.canvas")),Iu=a.pick(Nn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),d_=a.pick(Nn,["setCenter","setZoom","setBearing","setPitch"]),Vh={version:8,layers:[],sources:{}},al={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Yo extends a.Evented{constructor(s,u={}){super(),this.map=s,this.dispatcher=new Ne(Jn(),this),this.imageManager=new Ce,this.imageManager.setEventedParent(this),this.glyphManager=new a.GlyphManager(s._requestManager,u.localFontFamily?a.LocalGlyphMode.all:u.localIdeographFontFamily?a.LocalGlyphMode.ideographs:a.LocalGlyphMode.none,u.localFontFamily||u.localIdeographFontFamily),this.crossTileSymbolIndex=new Ts,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const g=this;this._rtlTextPluginCallback=Yo.registerForPluginStateChange(x=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(b,E)=>{if(a.triggerPluginCompletionEvent(b),E&&E.every(k=>k))for(const k in g._sourceCaches){const I=g._sourceCaches[k],O=I.getSource().type;O!=="vector"&&O!=="geojson"||I.reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const b=this.getSource(x.sourceId);if(b&&b.vectorLayerIds)for(const E in this._layers){const k=this._layers[E];k.source===b.id&&this._validateLayer(k)}})}loadURL(s,u={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const g=typeof u.validate=="boolean"?u.validate:!a.isMapboxURL(s);s=this.map._requestManager.normalizeStyleURL(s,u.accessToken);const x=this.map._requestManager.transformRequest(s,a.ResourceType.Style);this._request=a.getJSON(x,(b,E)=>{this._request=null,b?this.fire(new a.ErrorEvent(b)):E&&this._load(E,g)})}loadJSON(s,u={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(s,u.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Vh,!1)}_updateLayerCount(s,u){const g=u?1:-1;s.is3D()&&(this._num3DLayers+=g),s.type==="circle"&&(this._numCircleLayers+=g),s.type==="symbol"&&(this._numSymbolLayers+=g)}_load(s,u){if(u&&Xs(this,a.validateStyle(s)))return;this._loaded=!0,this.stylesheet=a.clone$1(s),this._updateMapProjection();for(const x in s.sources)this.addSource(x,s.sources[x],{validate:!1});this._changed=!1,s.sprite?this._loadSprite(s.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(s.glyphs);const g=Gr(this.stylesheet.layers);this._order=g.map(x=>x.id),this._layers={},this._serializedLayers={};for(const x of g){const b=a.createStyleLayer(x);b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new be(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(s){s?this.stylesheet.projection=s:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(s){this._spriteRequest=function(u,g,x){let b,E,k;const I=a.exported.devicePixelRatio>1?"@2x":"";let O=a.getJSON(g.transformRequest(g.normalizeSpriteURL(u,I,".json"),a.ResourceType.SpriteJSON),(ne,ae)=>{O=null,k||(k=ne,b=ae,q())}),L=a.getImage(g.transformRequest(g.normalizeSpriteURL(u,I,".png"),a.ResourceType.SpriteImage),(ne,ae)=>{L=null,k||(k=ne,E=ae,q())});function q(){if(k)x(k);else if(b&&E){const ne=a.exported.getImageData(E),ae={};for(const ue in b){const{width:ce,height:pe,x:Z,y:se,sdf:xe,pixelRatio:ve,stretchX:De,stretchY:Re,content:ze}=b[ue],Ue=new a.RGBAImage({width:ce,height:pe});a.RGBAImage.copy(ne,Ue,{x:Z,y:se},{x:0,y:0},{width:ce,height:pe}),ae[ue]={data:Ue,pixelRatio:ve,sdf:xe,stretchX:De,stretchY:Re,content:ze}}x(null,ae)}}return{cancel(){O&&(O.cancel(),O=null),L&&(L.cancel(),L=null)}}}(s,this.map._requestManager,(u,g)=>{if(this._spriteRequest=null,u)this.fire(new a.ErrorEvent(u));else if(g)for(const x in g)this.imageManager.addImage(x,g[x]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(s){const u=this.getSource(s.source);if(!u)return;const g=s.sourceLayer;g&&(u.type==="geojson"||u.vectorLayerIds&&u.vectorLayerIds.indexOf(g)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${u.id}" as specified by style layer "${s.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this._sourceCaches)if(!this._sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(s){const u=[];for(const g of s){const x=this._layers[g];x.type!=="custom"&&u.push(x.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const s in this._sourceCaches)if(this._sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(s){return!!this.terrain&&(typeof s.isLayerDraped=="function"?s.isLayerDraped():al[s.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(s){if(!this._loaded)return;const u=this._changed;if(this._changed){const x=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(x.length||b.length)&&this._updateWorkerLayers(x,b);for(const E in this._updatedSources){const k=this._updatedSources[E];k==="reload"?this._reloadSource(E):k==="clear"&&this._clearSource(E)}this._updateTilesForChangedImages();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(s);this.light.updateTransitions(s),this.fog&&this.fog.updateTransitions(s),this._resetUpdates()}const g={};for(const x in this._sourceCaches){const b=this._sourceCaches[x];g[x]=b.used,b.used=!1}for(const x of this._order){const b=this._layers[x];if(b.recalculate(s,this._availableImages),!b.isHidden(s.zoom)){const k=this._getLayerSourceCache(b);k&&(k.used=!0)}const E=this.map.painter;if(E){const k=b.getProgramIds();if(!k)continue;const I=b.getProgramConfiguration(s.zoom);for(const O of k)E.useProgram(O,I)}}for(const x in g){const b=this._sourceCaches[x];g[x]!==b.used&&b.getSource().fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b.getSource().id}))}this.light.recalculate(s),this.terrain&&this.terrain.recalculate(s),this.fog&&this.fog.recalculate(s),this.z=s.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),u&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const u in this._sourceCaches)this._sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateWorkerLayers(s,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(s){if(this._checkLoaded(),Xs(this,a.validateStyle(s)))return!1;(s=a.clone$1(s)).layers=Gr(s.layers);const u=function(x,b){if(!x)return[{command:Nn.setStyle,args:[b]}];let E=[];try{if(!w(x.version,b.version))return[{command:Nn.setStyle,args:[b]}];w(x.center,b.center)||E.push({command:Nn.setCenter,args:[b.center]}),w(x.zoom,b.zoom)||E.push({command:Nn.setZoom,args:[b.zoom]}),w(x.bearing,b.bearing)||E.push({command:Nn.setBearing,args:[b.bearing]}),w(x.pitch,b.pitch)||E.push({command:Nn.setPitch,args:[b.pitch]}),w(x.sprite,b.sprite)||E.push({command:Nn.setSprite,args:[b.sprite]}),w(x.glyphs,b.glyphs)||E.push({command:Nn.setGlyphs,args:[b.glyphs]}),w(x.transition,b.transition)||E.push({command:Nn.setTransition,args:[b.transition]}),w(x.light,b.light)||E.push({command:Nn.setLight,args:[b.light]}),w(x.fog,b.fog)||E.push({command:Nn.setFog,args:[b.fog]}),w(x.projection,b.projection)||E.push({command:Nn.setProjection,args:[b.projection]});const k={},I=[];(function(q,ne,ae,ue){let ce;for(ce in ne=ne||{},q=q||{})q.hasOwnProperty(ce)&&(ne.hasOwnProperty(ce)||ac(ce,ae,ue));for(ce in ne){if(!ne.hasOwnProperty(ce))continue;const pe=ne[ce];q.hasOwnProperty(ce)?w(q[ce],pe)||(q[ce].type==="geojson"&&pe.type==="geojson"&&Pu(q,ne,ce)?ae.push({command:Nn.setGeoJSONSourceData,args:[ce,pe.data]}):zh(ce,ne,ae,ue)):il(ce,ne,ae)}})(x.sources,b.sources,I,k);const O=[];x.layers&&x.layers.forEach(q=>{q.source&&k[q.source]?E.push({command:Nn.removeLayer,args:[q.id]}):O.push(q)});let L=x.terrain;L&&k[L.source]&&(E.push({command:Nn.setTerrain,args:[void 0]}),L=void 0),E=E.concat(I),w(L,b.terrain)||E.push({command:Nn.setTerrain,args:[b.terrain]}),function(q,ne,ae){ne=ne||[];const ue=(q=q||[]).map(vs),ce=ne.map(vs),pe=q.reduce(Rh,{}),Z=ne.reduce(Rh,{}),se=ue.slice(),xe=Object.create(null);let ve,De,Re,ze,Ue,je,Ye;for(ve=0,De=0;ve<ue.length;ve++)Re=ue[ve],Z.hasOwnProperty(Re)?De++:(ae.push({command:Nn.removeLayer,args:[Re]}),se.splice(se.indexOf(Re,De),1));for(ve=0,De=0;ve<ce.length;ve++)Re=ce[ce.length-1-ve],se[se.length-1-ve]!==Re&&(pe.hasOwnProperty(Re)?(ae.push({command:Nn.removeLayer,args:[Re]}),se.splice(se.lastIndexOf(Re,se.length-De),1)):De++,je=se[se.length-ve],ae.push({command:Nn.addLayer,args:[Z[Re],je]}),se.splice(se.length-ve,0,Re),xe[Re]=!0);for(ve=0;ve<ce.length;ve++)if(Re=ce[ve],ze=pe[Re],Ue=Z[Re],!xe[Re]&&!w(ze,Ue))if(w(ze.source,Ue.source)&&w(ze["source-layer"],Ue["source-layer"])&&w(ze.type,Ue.type)){for(Ye in Zo(ze.layout,Ue.layout,ae,Re,null,Nn.setLayoutProperty),Zo(ze.paint,Ue.paint,ae,Re,null,Nn.setPaintProperty),w(ze.filter,Ue.filter)||ae.push({command:Nn.setFilter,args:[Re,Ue.filter]}),w(ze.minzoom,Ue.minzoom)&&w(ze.maxzoom,Ue.maxzoom)||ae.push({command:Nn.setLayerZoomRange,args:[Re,Ue.minzoom,Ue.maxzoom]}),ze)ze.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?Zo(ze[Ye],Ue[Ye],ae,Re,Ye.slice(6),Nn.setPaintProperty):w(ze[Ye],Ue[Ye])||ae.push({command:Nn.setLayerProperty,args:[Re,Ye,Ue[Ye]]}));for(Ye in Ue)Ue.hasOwnProperty(Ye)&&!ze.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?Zo(ze[Ye],Ue[Ye],ae,Re,Ye.slice(6),Nn.setPaintProperty):w(ze[Ye],Ue[Ye])||ae.push({command:Nn.setLayerProperty,args:[Re,Ye,Ue[Ye]]}))}else ae.push({command:Nn.removeLayer,args:[Re]}),je=se[se.lastIndexOf(Re)+1],ae.push({command:Nn.addLayer,args:[Ue,je]})}(O,b.layers,E)}catch(k){console.warn("Unable to compute style diff:",k),E=[{command:Nn.setStyle,args:[b]}]}return E}(this.serialize(),s).filter(x=>!(x.command in d_));if(u.length===0)return!1;const g=u.filter(x=>!(x.command in Iu));if(g.length>0)throw new Error(`Unimplemented: ${g.map(x=>x.command).join(", ")}.`);return u.forEach(x=>{x.command!=="setTransition"&&x.command!=="setProjection"&&this[x.command].apply(this,x.args)}),this.stylesheet=s,this._updateMapProjection(),!0}addImage(s,u){return this.getImage(s)?this.fire(new a.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(s,u),this._afterImageUpdated(s),this)}updateImage(s,u){this.imageManager.updateImage(s,u)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){return this.getImage(s)?(this.imageManager.removeImage(s),this._afterImageUpdated(s),this):this.fire(new a.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(s,u,g={}){if(this._checkLoaded(),this.getSource(s)!==void 0)throw new Error("There is already a source with this ID");if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.validateSource,`sources.${s}`,u,null,g))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const x=An(s,u,this.dispatcher,this);x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(s),source:x.serialize(),sourceId:s}));const b=E=>{const k=(E?"symbol:":"other:")+s,I=this._sourceCaches[k]=new a.SourceCache(k,x,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[s]=I,I.style=this,I.onAdd(this.map)};b(!1),u.type!=="vector"&&u.type!=="geojson"||b(!0),x.onAdd&&x.onAdd(this.map),this._changed=!0}removeSource(s){this._checkLoaded();const u=this.getSource(s);if(!u)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===s)return this.fire(new a.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.get().source===s)return this.fire(new a.ErrorEvent(new Error(`Source "${s}" cannot be removed while terrain is using it.`)));const g=this._getSourceCaches(s);for(const x of g)delete this._sourceCaches[x.id],delete this._updatedSources[x.id],x.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles();return delete this._otherSourceCaches[s],delete this._symbolSourceCaches[s],u.setEventedParent(null),u.onRemove&&u.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(s,u){this._checkLoaded(),this.getSource(s).setData(u),this._changed=!0}getSource(s){const u=this._getSourceCache(s);return u&&u.getSource()}_getSources(){const s=[];for(const u in this._otherSourceCaches){const g=this._getSourceCache(u);g&&s.push(g.getSource())}return s}addLayer(s,u,g={}){this._checkLoaded();const x=s.id;if(this.getLayer(x))return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${x}" already exists on this map`)));let b;if(s.type==="custom"){if(Xs(this,a.validateCustomStyleLayer(s)))return;b=a.createStyleLayer(s)}else{if(typeof s.source=="object"&&(this.addSource(x,s.source),s=a.clone$1(s),s=a.extend(s,{source:x})),this._validate(a.validateLayer,`layers.${x}`,s,{arrayIndex:-1},g))return;b=a.createStyleLayer(s),this._validateLayer(b),b.setEventedParent(this,{layer:{id:x}}),this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}const E=u?this._order.indexOf(u):this._order.length;if(u&&E===-1)return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`)));this._order.splice(E,0,x),this._layerOrderChanged=!0,this._layers[x]=b;const k=this._getLayerSourceCache(b);if(this._removedLayers[x]&&b.source&&k&&b.type!=="custom"){const I=this._removedLayers[x];delete this._removedLayers[x],I.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",k.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(s,u){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===u)return;const g=this._order.indexOf(s);this._order.splice(g,1);const x=u?this._order.indexOf(u):this._order.length;u&&x===-1?this.fire(new a.ErrorEvent(new Error(`Layer with id "${u}" does not exist on this map.`))):(this._order.splice(x,0,s),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(s){this._checkLoaded();const u=this._layers[s];if(!u)return void this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be removed.`)));u.setEventedParent(null),this._updateLayerCount(u,!1);const g=this._order.indexOf(s);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=u,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],u.onRemove&&u.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}hasLayerType(s){for(const u in this._layers)if(this._layers[u].type===s)return!0;return!1}setLayerZoomRange(s,u,g){this._checkLoaded();const x=this.getLayer(s);x?x.minzoom===u&&x.maxzoom===g||(u!=null&&(x.minzoom=u),g!=null&&(x.maxzoom=g),this._updateLayer(x)):this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(s,u,g={}){this._checkLoaded();const x=this.getLayer(s);if(x){if(!w(x.filter,u))return u==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(a.validateFilter,`layers.${x.id}.filter`,u,{layerType:x.type},g)||(x.filter=a.clone$1(u),this._updateLayer(x)))}else this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be filtered.`)))}getFilter(s){const u=this.getLayer(s);return u&&a.clone$1(u.filter)}setLayoutProperty(s,u,g,x={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getLayoutProperty(u),g)||(b.setLayoutProperty(u,g,x),this._updateLayer(b)):this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(s,u){const g=this.getLayer(s);if(g)return g.getLayoutProperty(u);this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style.`)))}setPaintProperty(s,u,g,x={}){this._checkLoaded();const b=this.getLayer(s);b?w(b.getPaintProperty(u),g)||(b.setPaintProperty(u,g,x)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new a.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(s,u){const g=this.getLayer(s);return g&&g.getPaintProperty(u)}setFeatureState(s,u){this._checkLoaded();const g=s.source,x=s.sourceLayer,b=this.getSource(g);if(!b)return void this.fire(new a.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const E=b.type;if(E==="geojson"&&x)return void this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!x)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));s.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided.")));const k=this._getSourceCaches(g);for(const I of k)I.setFeatureState(x,s.id,u)}removeFeatureState(s,u){this._checkLoaded();const g=s.source,x=this.getSource(g);if(!x)return void this.fire(new a.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const b=x.type,E=b==="vector"?s.sourceLayer:void 0;if(b==="vector"&&!E)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(u&&typeof s.id!="string"&&typeof s.id!="number")return void this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const k=this._getSourceCaches(g);for(const I of k)I.removeFeatureState(E,s.id,u)}getFeatureState(s){this._checkLoaded();const u=s.source,g=s.sourceLayer,x=this.getSource(u);if(x){if(x.type!=="vector"||g)return s.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(u)[0].getFeatureState(g,s.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const s={};for(const u in this._sourceCaches){const g=this._sourceCaches[u].getSource();s[g.id]||(s[g.id]=g.serialize())}return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:s,layers:this._serializeLayers(this._order)},u=>u!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0;const u=this._getLayerSourceCache(s);s.source&&!this._updatedSources[s.source]&&u&&u.getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",u.pause()),this._changed=!0,s.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(s){const u=E=>this._layers[E].type==="fill-extrusion",g={},x=[];for(let E=this._order.length-1;E>=0;E--){const k=this._order[E];if(u(k)){g[k]=E;for(const I of s){const O=I[k];if(O)for(const L of O)x.push(L)}}}x.sort((E,k)=>k.intersectionZ-E.intersectionZ);const b=[];for(let E=this._order.length-1;E>=0;E--){const k=this._order[E];if(u(k))for(let I=x.length-1;I>=0;I--){const O=x[I].feature;if(g[O.layer.id]<E)break;b.push(O),x.pop()}else for(const I of s){const O=I[k];if(O)for(const L of O)b.push(L.feature)}}return b}queryRenderedFeatures(s,u,g){u&&u.filter&&this._validate(a.validateFilter,"queryRenderedFeatures.filter",u.filter,null,u);const x={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const I of u.layers){const O=this._layers[I];if(!O)return this.fire(new a.ErrorEvent(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];x[O.source]=!0}}const b=[];u.availableImages=this._availableImages;const E=u&&u.layers?u.layers.some(I=>{const O=this.getLayer(I);return O&&O.is3D()}):this.has3DLayers(),k=xt.createFromScreenPoints(s,g);for(const I in this._sourceCaches){const O=this._sourceCaches[I].getSource().id;u.layers&&!x[O]||b.push(or(this._sourceCaches[I],this._layers,this._serializedLayers,k,u,g,E,!!this.map._showQueryGeometry))}return this.placement&&b.push(function(I,O,L,q,ne,ae,ue){const ce={},pe=ae.queryRenderedSymbols(q),Z=[];for(const se of Object.keys(pe).map(Number))Z.push(ue[se]);Z.sort(Nr);for(const se of Z){const xe=se.featureIndex.lookupSymbolFeatures(pe[se.bucketInstanceId],O,se.bucketIndex,se.sourceLayerIndex,ne.filter,ne.layers,ne.availableImages,I);for(const ve in xe){const De=ce[ve]=ce[ve]||[],Re=xe[ve];Re.sort((ze,Ue)=>{const je=se.featureSortOrder;if(je){const Ye=je.indexOf(ze.featureIndex);return je.indexOf(Ue.featureIndex)-Ye}return Ue.featureIndex-ze.featureIndex});for(const ze of Re)De.push(ze)}}for(const se in ce)ce[se].forEach(xe=>{const ve=xe.feature,De=L(I[se]);if(!De)return;const Re=De.getFeatureState(ve.layer["source-layer"],ve.id);ve.source=ve.layer.source,ve.layer["source-layer"]&&(ve.sourceLayer=ve.layer["source-layer"]),ve.state=Re});return ce}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),k.screenGeometry,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(s,u){u&&u.filter&&this._validate(a.validateFilter,"querySourceFeatures.filter",u.filter,null,u);const g=this._getSourceCaches(s);let x=[];for(const b of g)x=x.concat(yr(b,u));return x}addSourceType(s,u,g){return Yo.getSourceType(s)?g(new Error(`A source type called "${s}" already exists.`)):(Yo.setSourceType(s,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:u.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(s,u={}){this._checkLoaded();const g=this.light.getLight();let x=!1;for(const E in s)if(!w(s[E],g[E])){x=!0;break}if(!x)return;const b=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(s,u),this.light.updateTransitions(b)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(s,u=1){if(this._checkLoaded(),!s)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let g=s;if(u===1){if(typeof g.source=="object"){const x="terrain-dem-src";this.addSource(x,g.source),g=a.clone$1(g),g=a.extend(g,{source:x})}if(this._validate(a.validateTerrain,"terrain",g))return}if(!this.terrain||this.terrain&&u!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,u)}else{const x=this.terrain,b=x.get();for(const E of Object.keys(a.spec.terrain))!g.hasOwnProperty(E)&&a.spec.terrain[E].default&&(g[E]=a.spec.terrain[E].default);for(const E in g)if(!w(g[E],b[E])){x.set(g),this.stylesheet.terrain=g;const k=this._setTransitionParameters({duration:0});x.updateTransitions(k);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(s){const u=this.fog=new ke(s,this.map.transform);this.stylesheet.fog=s;const g=this._setTransitionParameters({duration:0});u.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const s of this.map._markers)s._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(s){if(this._checkLoaded(),!s)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const u=this.fog,g=u.get();Object.keys(s).length===0&&u.set(s);for(const x in s)if(!w(s[x],g[x])){u.set(s),this.stylesheet.fog=s;const b=this._setTransitionParameters({duration:0});u.updateTransitions(b);break}}else this._createFog(s);this._markersNeedUpdate=!0}_setTransitionParameters(s){return{now:a.exported.now(),transition:a.extend(s,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const s=this._order.filter(g=>this.isLayerDraped(this._layers[g])),u=this._order.filter(g=>!this.isLayerDraped(this._layers[g]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...s),this._drapedFirstOrder.push(...u)}_createTerrain(s,u){const g=this.terrain=new he(s,u);this.stylesheet.terrain=s,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const x=this._setTransitionParameters({duration:0});g.updateTransitions(x)}_force3DLayerUpdate(){for(const s in this._layers){const u=this._layers[s];u.type==="fill-extrusion"&&this._updateLayer(u)}}_forceSymbolLayerUpdate(){for(const s in this._layers){const u=this._layers[s];u.type==="symbol"&&this._updateLayer(u)}}_validate(s,u,g,x,b={}){return(!b||b.validate!==!1)&&Xs(this,s.call(a.validateStyle,a.extend({key:u,style:this.serialize(),value:g,styleSpec:a.spec},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this._sourceCaches)this._sourceCaches[s].clearTiles(),this._sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(s){const u=this._getSourceCaches(s);for(const g of u)g.clearTiles()}_reloadSource(s){const u=this._getSourceCaches(s);for(const g of u)g.resume(),g.reload()}_reloadSources(){for(const s of this._getSources())s.reload&&s.reload()}_updateSources(s){for(const u in this._sourceCaches)this._sourceCaches[u].update(s)}_generateCollisionBoxes(){for(const s in this._sourceCaches){const u=this._sourceCaches[s];u.resume(),u.reload()}}_updatePlacement(s,u,g,x,b=!1){let E=!1,k=!1;const I={};for(const O of this._order){const L=this._layers[O];if(L.type!=="symbol")continue;if(!I[L.source]){const ne=this._getLayerSourceCache(L);if(!ne)continue;I[L.source]=ne.getRenderableIds(!0).map(ae=>ne.getTileByID(ae)).sort((ae,ue)=>ue.tileID.overscaledZ-ae.tileID.overscaledZ||(ae.tileID.isLessThan(ue.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(L,I[L.source],s.center.lng,s.projection);E=E||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),b=b||this._layerOrderChanged||g===0,this._layerOrderChanged&&this.fire(new a.Event("neworder")),(b||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),s.zoom))&&(this.pauseablePlacement=new Nh(s,this._order,b,u,g,x,this.placement,this.fog&&s.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),k=!0),E&&this.pauseablePlacement.placement.setStale()),k||E)for(const O of this._order){const L=this._layers[O];L.type==="symbol"&&this.placement.updateLayerOpacities(L,I[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const s in this._sourceCaches)this._sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,u,g){this.imageManager.getImages(u.icons,g),this._updateTilesForChangedImages();const x=b=>{b&&b.setDependencies(u.tileID.key,u.type,u.icons)};x(this._otherSourceCaches[u.source]),x(this._symbolSourceCaches[u.source])}getGlyphs(s,u,g){this.glyphManager.getGlyphs(u.stacks,g)}getResource(s,u,g){return a.makeRequest(u,g)}_getSourceCache(s){return this._otherSourceCaches[s]}_getLayerSourceCache(s){return s.type==="symbol"?this._symbolSourceCaches[s.source]:this._otherSourceCaches[s.source]}_getSourceCaches(s){const u=[];return this._otherSourceCaches[s]&&u.push(this._otherSourceCaches[s]),this._symbolSourceCaches[s]&&u.push(this._symbolSourceCaches[s]),u}_isSourceCacheLoaded(s){const u=this._getSourceCaches(s);return u.length===0?(this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${s}'`))),!1):u.every(g=>g.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Yo.getSourceType=function(f){return kn[f]},Yo.setSourceType=function(f,s){kn[f]=s},Yo.registerForPluginStateChange=a.registerForPluginStateChange;var Wh=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Ea="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Cs=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,gc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Es=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Au={},ll={};const yc=[];cl(Wh,yc),cl(Cs,yc),cl(gc,yc),cl(Es,yc),Au=nr("",Cs),ll=nr(Es,gc);const X1=nr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Du=Wh,Gh=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Hh={background:nr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:nr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:nr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:nr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:nr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:nr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:nr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:nr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:nr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:nr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:nr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:nr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:nr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:nr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:nr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:nr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:nr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:nr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:nr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:nr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:nr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:nr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:nr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:nr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:nr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ea),skyboxGradient:nr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ea),skyboxCapture:nr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:nr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:nr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function cl(f,s){const u=f.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of u)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=g.split(" ");for(const b of x)s.includes(b)||s.push(b)}}function nr(f,s){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=s.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),x={},b=[...yc];return cl(f,b),cl(s,b),{fragmentSource:f=f.replace(u,(E,k,I,O,L)=>(x[L]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${L}
varying ${I} ${O} ${L};
#else
uniform ${I} ${O} u_${L};
#endif
`:`
#ifdef HAS_UNIFORM_u_${L}
    ${I} ${O} ${L} = u_${L};
#endif
`)),vertexSource:s=s.replace(u,(E,k,I,O,L)=>{const q=O==="float"?"vec2":"vec4",ne=L.match(/color/)?"color":q;return x[L]?k==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
attribute ${I} ${q} a_${L};
varying ${I} ${O} ${L};
#else
uniform ${I} ${O} u_${L};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = a_${L};
#else
    ${I} ${O} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = unpack_mix_${ne}(a_${L}, u_${L}_t);
#else
    ${I} ${O} ${L} = u_${L};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
attribute ${I} ${q} a_${L};
#else
uniform ${I} ${O} u_${L};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${I} ${O} ${L} = a_${L};
#else
    ${I} ${O} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${I} ${O} ${L} = unpack_mix_${ne}(a_${L}, u_${L}_t);
#else
    ${I} ${O} ${L} = u_${L};
#endif
`}),staticAttributes:g,usedDefines:b}}class h_{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(s,u,g,x,b,E,k){this.context=s;let I=this.boundPaintVertexBuffers.length!==x.length;for(let L=0;!I&&L<x.length;L++)this.boundPaintVertexBuffers[L]!==x[L]&&(I=!0);let O=this.boundDynamicVertexBuffers.length!==k.length;for(let L=0;!O&&L<k.length;L++)this.boundDynamicVertexBuffers[L]!==k[L]&&(O=!0);if(!s.extVertexArrayObject||!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==g||I||O||this.boundIndexBuffer!==b||this.boundVertexOffset!==E)this.freshBind(u,g,x,b,E,k);else{s.bindVertexArrayOES.set(this.vao);for(const L of k)L&&L.bind();b&&b.dynamicDraw&&b.bind()}}freshBind(s,u,g,x,b,E){let k;const I=s.numAttributes,O=this.context,L=O.gl;if(O.extVertexArrayObject)this.vao&&this.destroy(),this.vao=O.extVertexArrayObject.createVertexArrayOES(),O.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=s,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=x,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=E;else{k=O.currentNumAttributes||0;for(let q=I;q<k;q++)L.disableVertexAttribArray(q)}u.enableAttributes(L,s),u.bind(),u.setVertexAttribPointers(L,s,b);for(const q of g)q.enableAttributes(L,s),q.bind(),q.setVertexAttribPointers(L,s,b);for(const q of E)q&&(q.enableAttributes(L,s),q.bind(),q.setVertexAttribPointers(L,s,b));x&&x.bind(),O.currentNumAttributes=I}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function qh(f,s){const u=Math.pow(2,s.canonical.z),g=s.canonical.y;return[new a.MercatorCoordinate(0,g/u).toLngLat().lat,new a.MercatorCoordinate(0,(g+1)/u).toLngLat().lat]}function Y1(f,s,u,g,x,b,E){const k=f.context,I=k.gl,O=u.fbo;if(!O)return;f.prepareDrawTile();const L=f.useProgram("hillshade");k.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,O.colorAttachment.get());const q=((ce,pe,Z,se)=>{const xe=Z.paint.get("hillshade-shadow-color"),ve=Z.paint.get("hillshade-highlight-color"),De=Z.paint.get("hillshade-accent-color");let Re=Z.paint.get("hillshade-illumination-direction")*(Math.PI/180);Z.paint.get("hillshade-illumination-anchor")==="viewport"&&(Re-=ce.transform.angle);const ze=!ce.options.moving;return{u_matrix:se||ce.transform.calculateProjMatrix(pe.tileID.toUnwrapped(),ze),u_image:0,u_latrange:qh(0,pe.tileID),u_light:[Z.paint.get("hillshade-exaggeration"),Re],u_shadow:xe,u_highlight:ve,u_accent:De}})(f,u,g,f.terrain?s.projMatrix:null);f.prepareDrawProgram(k,L,s.toUnwrapped());const{tileBoundsBuffer:ne,tileBoundsIndexBuffer:ae,tileBoundsSegments:ue}=f.getTileBoundsBuffers(u);L.draw(k,I.TRIANGLES,x,b,E,a.CullFaceMode.disabled,q,g.id,ne,ae,ue)}function Zh(f,s,u){if(!s.needsDEMTextureUpload)return;const g=f.context,x=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||f.getTileTexture(u.stride);const b=u.getPixels();s.demTexture?s.demTexture.update(b,{premultiply:!1}):s.demTexture=new a.Texture(g,b,x.RGBA,{premultiply:!1}),s.needsDEMTextureUpload=!1}function K1(f,s,u,g,x,b){const E=f.context,k=E.gl;if(!s.dem)return;const I=s.dem;if(E.activeTexture.set(k.TEXTURE1),Zh(f,s,I),!s.demTexture)return;s.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);const O=I.dim;E.activeTexture.set(k.TEXTURE0);let L=s.fbo;if(!L){const ue=new a.Texture(E,{width:O,height:O,data:null},k.RGBA);ue.bind(k.LINEAR,k.CLAMP_TO_EDGE),L=s.fbo=E.createFramebuffer(O,O,!0),L.colorAttachment.set(ue.texture)}E.bindFramebuffer.set(L.framebuffer),E.viewport.set([0,0,O,O]);const{tileBoundsBuffer:q,tileBoundsIndexBuffer:ne,tileBoundsSegments:ae}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(E,k.TRIANGLES,g,x,b,a.CullFaceMode.disabled,((ue,ce)=>{const pe=ce.stride,Z=a.create();return a.ortho(Z,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Z,Z,[0,-a.EXTENT,0]),{u_matrix:Z,u_image:1,u_dimension:[pe,pe],u_zoom:ue.overscaledZ,u_unpack:ce.unpackVector}})(s.tileID,I),u.id,q,ne,ae),s.needsHillshadePrepare=!1}const Xh=f=>({u_matrix:new a.UniformMatrix4f(f),u_image0:new a.Uniform1i(f),u_skirt_height:new a.Uniform1f(f)}),ul=(f,s)=>({u_matrix:f,u_image0:0,u_skirt_height:s}),zu=(f,s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:s,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:u,u_zoom_transition:x,u_merc_center:b,u_image0:0,u_frustum_tl:E,u_frustum_tr:k,u_frustum_br:I,u_frustum_bl:O,u_globe_pos:L,u_globe_radius:q,u_viewport:ne,u_grid_matrix:ue?Float32Array.from(ue):new Float32Array(9),u_skirt_height:ae});function dl(f,s){return f!=null&&s!=null&&!(!f.hasData()||!s.hasData())&&f.demTexture!=null&&s.demTexture!=null&&f.tileID.key!==s.tileID.key}const ks=new class{constructor(){this.operations={}}newMorphing(f,s,u,g,x){if(f in this.operations){const b=this.operations[f];b.to.tileID.key!==u.tileID.key&&(b.queued=u)}else this.operations[f]={startTime:g,phase:0,duration:x,from:s,to:u,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const s=this.operations[f];return{from:s.from,to:s.to,phase:s.phase}}update(f){for(const s in this.operations){const u=this.operations[s];for(u.phase=(f-u.startTime)/u.duration;u.phase>=1||!this._validOp(u);)if(!this._nextOp(u,f)){delete this.operations[s];break}}}_nextOp(f,s){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=s,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},ka={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ru(f){return 6*Math.pow(1.5,22-f)}function J1(f,s){const u=1<<f.z;return!s&&(f.x===0||f.x===u-1)||f.y===0||f.y===u-1}const _c=f=>({u_matrix:f});function Yh(f,s,u,g,x){if(x>0){const b=a.exported.now(),E=(b-f.timeAdded)/x,k=s?(b-s.timeAdded)/x:-1,I=u.getSource(),O=g.coveringZoomLevel({tileSize:I.tileSize,roundZoom:I.roundZoom}),L=!s||Math.abs(s.tileID.overscaledZ-O)>Math.abs(f.tileID.overscaledZ-O),q=L&&f.refreshedUponExpiration?1:a.clamp(L?E:1-k,0,1);return f.refreshedUponExpiration&&E>=1&&(f.refreshedUponExpiration=!1),s?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}class Kh extends a.SourceCache{constructor(s){const u={type:"raster-dem",maxzoom:s.transform.maxZoom},g=new Ne(Jn(),null),x=An("mock-dem",u,g,s.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(s,u){s.state="loaded",u(null)}}class Lu extends a.SourceCache{constructor(s){const u=An("proxy",{type:"geojson",maxzoom:s.transform.maxZoom},new Ne(Jn(),null),s.style);super("proxy",u,!1),u.setEventedParent(this),this.map=this.getSource().map=s,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(s,u,g){if(s.freezeTileCoverage)return;this.transform=s;const x=s.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,E)=>{if(b[E.key]="",!this._tiles[E.key]){const k=new a.Tile(E,this._source.tileSize*E.overscaleFactor(),s.tileZoom);k.state="loaded",this._tiles[E.key]=k}return b},{});for(const b in this._tiles)b in x||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(s){const u=this.proxyCachedFBO[s];if(u!==void 0){const g=Object.values(u);this.renderCachePool.push(...g),delete this.proxyCachedFBO[s]}}deallocRenderCache(){this.renderCache.forEach(s=>s.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ou extends a.OverscaledTileID{constructor(s,u,g){super(s.overscaledZ,s.wrap,s.canonical.z,s.canonical.x,s.canonical.y),this.proxyTileKey=u,this.projMatrix=g}}class Jh extends a.Elevation{constructor(s,u){super(),this.painter=s,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,x,b]=function(I){const O=new a.StructArrayLayout2i4,L=new a.StructArrayLayout3ui6,q=131;O.reserve(17161),L.reserve(33800);const ne=a.EXTENT/128,ae=a.EXTENT+ne/2,ue=ae+ne;for(let pe=-ne;pe<ue;pe+=ne)for(let Z=-ne;Z<ue;Z+=ne){const se=Z<0||Z>ae||pe<0||pe>ae?24575:0,xe=a.clamp(Math.round(Z),0,a.EXTENT),ve=a.clamp(Math.round(pe),0,a.EXTENT);O.emplaceBack(xe+se,ve)}const ce=(pe,Z)=>{const se=Z*q+pe;L.emplaceBack(se+1,se,se+q),L.emplaceBack(se+q,se+q+1,se+1)};for(let pe=1;pe<129;pe++)for(let Z=1;Z<129;Z++)ce(Z,pe);return[0,129].forEach(pe=>{for(let Z=0;Z<130;Z++)ce(Z,pe),ce(pe,Z)}),[O,L,32768]}(),E=s.context;this.gridBuffer=E.createVertexBuffer(g,a.posAttributes.members),this.gridIndexBuffer=E.createIndexBuffer(x),this.gridSegments=a.SegmentVector.simpleSegment(0,0,g.length,x.length),this.gridNoSkirtSegments=a.SegmentVector.simpleSegment(0,0,g.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Lu(u.map),this.orthoMatrix=a.create(),a.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.EXTENT,0,a.EXTENT,0,1);const k=E.gl;this._overlapStencilMode=new a.StencilMode({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=s.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=u,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Kh(u.map)}set style(s){s.on("data",this._onStyleDataEvent.bind(this)),s.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=s,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(s,u,g){if(s&&s.terrain){this._style!==s&&(this.style=s),this.enabled=!0;const x=s.terrain.properties;this.sourceCache=s.terrain.drapeRenderMode===0?this._mockSourceCache:s._getSourceCache(x.get("source")),this._exaggeration=x.get("exaggeration");const b=()=>{this.sourceCache.used&&a.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const E=this.getScaledDemTileSize();this.sourceCache.update(u,E,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,b(),this._initializing=!0),b(),u.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(u),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(s){this._findCoveringTileCache[s]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const s=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||s.efficiency!==100&&a.warnOnce(`Terrain render cache efficiency is not optimal (${s.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${s.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(s){s.coord&&s.dataType==="source"?this._clearRenderCacheForTile(s.sourceCacheId,s.coord):s.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const s in this._style._sourceCaches)this._style._sourceCaches[s].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(s=>s.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const s=2*this.proxySourceCache.getSource().tileSize;return[s,s]}set useVertexMorphing(s){this._useVertexMorphing=s}updateTileBinding(s){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const u=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=u.getIds().map(I=>{const O=u.getTileByID(I).tileID;return O.projMatrix=g.calculateProjMatrix(O.toUnwrapped()),O});(function(I,O){const L=O.transform.pointCoordinate(O.transform.getCameraPoint()),q=new a.Point(L.x,L.y);I.sort((ne,ae)=>{if(ae.overscaledZ-ne.overscaledZ)return ae.overscaledZ-ne.overscaledZ;const ue=new a.Point(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),ce=new a.Point(ae.canonical.x+(1<<ae.canonical.z)*ae.wrap,ae.canonical.y),pe=q.mult(1<<ne.canonical.z);return pe.x-=.5,pe.y-=.5,pe.distSqr(ue)-pe.distSqr(ce)})})(x,this.painter),this._previousZoom=g.zoom;const b=this.proxyToSource||{};this.proxyToSource={},x.forEach(I=>{this.proxyToSource[I.key]={}}),this.terrainTileForTile={};const E=this._style._sourceCaches;for(const I in E){const O=E[I];if(!O.used||(O!==this.sourceCache&&this.resetTileLookupCache(O.id),this._setupProxiedCoordsForOrtho(O,s[I],b),O.usedForTerrain))continue;const L=s[I];O.getSource().reparseOverscaled&&this._assignTerrainTiles(L)}this.proxiedCoords[u.id]=x.map(I=>new Ou(I,I.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1,this._updateTimestamp=a.exported.now();const k={};this._visibleDemTiles=[];for(const I of this.proxyCoords){const O=this.terrainTileForTile[I.key];if(!O)continue;const L=O.tileID.key;L in k||(this._visibleDemTiles.push(O),k[L]=L)}}_assignTerrainTiles(s){this._initializing||s.forEach(u=>{if(this.terrainTileForTile[u.key])return;const g=this._findTileCoveringTileID(u,this.sourceCache);g&&(this.terrainTileForTile[u.key]=g)})}_prepareDEMTextures(){const s=this.painter.context,u=s.gl;for(const g in this.terrainTileForTile){const x=this.terrainTileForTile[g],b=x.dem;!b||x.demTexture&&!x.needsDEMTextureUpload||(s.activeTexture.set(u.TEXTURE1),Zh(this.painter,x,b))}}_prepareDemTileUniforms(s,u,g,x){if(!u||u.demTexture==null)return!1;const b=s.tileID.canonical,E=Math.pow(2,u.tileID.canonical.z-b.z),k=x||"";return g[`u_dem_tl${k}`]=[b.x*E%1,b.y*E%1],g[`u_dem_scale${k}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const s=this.painter.context,u=s.gl;if(!this._emptyDepthBufferTexture){const g=new a.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new a.Texture(s,g,u.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let s=0;const u=this._visibleDemTiles.reduce((g,x)=>{if(!x.dem)return g;const b=x.dem.tree.minimums[0];return b>0&&s++,g+b},0);return s?u/s:0}_updateEmptyDEMTexture(){const s=this.painter.context,u=s.gl;s.activeTexture.set(u.TEXTURE2);const g=this._getLoadedAreaMinimum(),x=new a.RGBAImage({width:1,height:1},new Uint8Array(a.DEMData.pack(g,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(x,{premultiply:!1}):b=this._emptyDEMTexture=new a.Texture(s,x,u.RGBA,{premultiply:!1}),b}setupElevationDraw(s,u,g){const x=this.painter.context,b=x.gl,E=(k=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:a.DEMData.getUnpackVector(k),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var k;E.u_dem_size=this.sourceCache.getSource().tileSize,E.u_exaggeration=this.exaggeration();let I=null,O=null,L=1;if(g&&g.morphing&&this._useVertexMorphing){const q=g.morphing.srcDemTile,ne=g.morphing.dstDemTile;L=g.morphing.phase,q&&ne&&(this._prepareDemTileUniforms(s,q,E,"_prev")&&(O=q),this._prepareDemTileUniforms(s,ne,E)&&(I=ne))}if(O&&I?(x.activeTexture.set(b.TEXTURE2),I.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),x.activeTexture.set(b.TEXTURE4),O.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),E.u_dem_lerp=L):(I=this.terrainTileForTile[s.tileID.key],x.activeTexture.set(b.TEXTURE2),(this._prepareDemTileUniforms(s,I,E)?I.demTexture:this.emptyDEMTexture).bind(b.NEAREST,b.CLAMP_TO_EDGE)),x.activeTexture.set(b.TEXTURE3),g&&g.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),this._depthFBO&&(E.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),E.u_depth_size_inv=[1,1]),g&&g.useMeterToDem&&I){const q=(1<<I.tileID.canonical.z)*a.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=q}if(g&&g.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),u.setTerrainUniformValues(x,E),this.painter.transform.projection.name==="globe"){const q=this.globeUniformValues(this.painter.transform,s.tileID.canonical,g&&g.useDenormalizedUpVectorScale);u.setGlobeUniformValues(x,q)}}globeUniformValues(s,u,g){const x=s.projection;return{u_tile_tl_up:x.upVector(u,0,0),u_tile_tr_up:x.upVector(u,a.EXTENT,0),u_tile_br_up:x.upVector(u,a.EXTENT,a.EXTENT),u_tile_bl_up:x.upVector(u,0,a.EXTENT),u_tile_up_scale:g?a.globeMetersToEcef(1):x.upVectorScale(u,s.center.lat,s.worldSize).metersToTile}}renderToBackBuffer(s){const u=this.painter,g=this.painter.context;s.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),u.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,b,E,k,I){if(x.transform.projection.name==="globe")(function(O,L,q,ne,ae){const ue=O.context,ce=ue.gl;let pe,Z;const se=O.options.showTerrainWireframe?2:0,xe=O.transform,ve=a.globeUseCustomAntiAliasing(O,ue,xe),De=(Et,Xe)=>{if(Z===Et)return;const pt=[ka[Et],"PROJECTION_GLOBE_VIEW"];ve&&pt.push("CUSTOM_ANTIALIASING"),Xe&&pt.push(ka[se]),pe=O.useProgram("globeRaster",null,pt),Z=Et},Re=O.colorModeForRenderPass(),ze=new a.DepthMode(ce.LEQUAL,a.DepthMode.ReadWrite,O.depthRangeFor3D);ks.update(ae);const Ue=a.calculateGlobeMercatorMatrix(xe),je=[a.mercatorXfromLng(xe.center.lng),a.mercatorYfromLat(xe.center.lat)],Ye=se?[!1,!0]:[!1],kt=O.globeSharedBuffers,qe=[xe.width*a.exported.devicePixelRatio,xe.height*a.exported.devicePixelRatio],ft=Float32Array.from(xe.globeMatrix),et={useDenormalizedUpVectorScale:!0};if(Ye.forEach(Et=>{const Xe=O.transform,pt=Ru(Xe.zoom)*L.exaggeration();Z=-1;const It=Et?ce.LINES:ce.TRIANGLES;for(const wt of ne){const At=q.getTile(wt),hn=a.StencilMode.disabled,Mn=L.prevTerrainTileForTile[wt.key],nn=L.terrainTileForTile[wt.key];dl(Mn,nn)&&ks.newMorphing(wt.key,Mn,nn,ae,250),ue.activeTexture.set(ce.TEXTURE0),At.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const bn=ks.getMorphValuesForProxy(wt.key),Wn=bn?1:0;bn&&a.extend$1(et,{morphing:{srcDemTile:bn.from,dstDemTile:bn.to,phase:a.easeCubicInOut(bn.phase)}});const jn=a.tileCornersToBounds(wt.canonical),ln=a.getLatitudinalLod(jn.getCenter().lat),ir=a.getGridMatrix(wt.canonical,jn,ln,Xe.worldSize/Xe._pixelsPerMercatorPixel),lr=a.globeNormalizeECEF(a.globeTileBounds(wt.canonical)),cr=zu(Xe.projMatrix,ft,Ue,lr,a.globeToMercatorTransition(Xe.zoom),je,Xe.frustumCorners.TL,Xe.frustumCorners.TR,Xe.frustumCorners.BR,Xe.frustumCorners.BL,Xe.globeCenterInViewSpace,Xe.globeRadius,qe,pt,ir);if(De(Wn,Et),L.setupElevationDraw(At,pe,et),O.prepareDrawProgram(ue,pe,wt.toUnwrapped()),kt){const[ur,Mi,mi]=Et?kt.getWirefameBuffers(O.context,ln):kt.getGridBuffers(ln,pt!==0);pe.draw(ue,It,ze,hn,Re,a.CullFaceMode.backCCW,cr,"globe_raster",ur,Mi,mi)}}}),kt){const Et=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ve&&Et.push("CUSTOM_ANTIALIASING"),pe=O.useProgram("globeRaster",null,Et);for(const Xe of ne){const{x:pt,y:It,z:wt}=Xe.canonical,At=It===0,hn=It===(1<<wt)-1,[Mn,nn,bn,Wn]=kt.getPoleBuffers(wt);if(Wn&&(At||hn)){const jn=q.getTile(Xe);ue.activeTexture.set(ce.TEXTURE0),jn.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);let ln=a.globePoleMatrixForTile(wt,pt,xe);const ir=a.globeNormalizeECEF(a.globeTileBounds(Xe.canonical)),lr=(cr,ur)=>cr.draw(ue,ce.TRIANGLES,ze,a.StencilMode.disabled,Re,a.CullFaceMode.disabled,zu(xe.projMatrix,ln,ln,ir,0,je,xe.frustumCorners.TL,xe.frustumCorners.TR,xe.frustumCorners.BR,xe.frustumCorners.BL,xe.globeCenterInViewSpace,xe.globeRadius,qe,0),"globe_pole_raster",ur,bn,Wn);L.setupElevationDraw(jn,pe,et),O.prepareDrawProgram(ue,pe,Xe.toUnwrapped()),At&&lr(pe,Mn),hn&&(ln=a.scale(a.create(),ln,[1,-1,1]),lr(pe,nn))}}}})(x,b,E,k,I);else{const O=x.context,L=O.gl;let q,ne;const ae=x.options.showTerrainWireframe?2:0,ue=(xe,ve)=>{if(ne===xe)return;const De=[ka[xe]];ve&&De.push(ka[ae]),q=x.useProgram("terrainRaster",null,De),ne=xe},ce=x.colorModeForRenderPass(),pe=new a.DepthMode(L.LEQUAL,a.DepthMode.ReadWrite,x.depthRangeFor3D);ks.update(I);const Z=x.transform,se=Ru(Z.zoom)*b.exaggeration();(ae?[!1,!0]:[!1]).forEach(xe=>{ne=-1;const ve=xe?L.LINES:L.TRIANGLES,[De,Re]=xe?b.getWirefameBuffer():[b.gridIndexBuffer,b.gridSegments];for(const ze of k){const Ue=E.getTile(ze),je=a.StencilMode.disabled,Ye=b.prevTerrainTileForTile[ze.key],kt=b.terrainTileForTile[ze.key];dl(Ye,kt)&&ks.newMorphing(ze.key,Ye,kt,I,250),O.activeTexture.set(L.TEXTURE0),Ue.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST);const qe=ks.getMorphValuesForProxy(ze.key),ft=qe?1:0;let et;qe&&(et={morphing:{srcDemTile:qe.from,dstDemTile:qe.to,phase:a.easeCubicInOut(qe.phase)}});const Et=ul(ze.projMatrix,J1(ze.canonical,Z.renderWorldCopies)?se/10:se);ue(ft,xe),b.setupElevationDraw(Ue,q,et),x.prepareDrawProgram(O,q,ze.toUnwrapped()),q.draw(O,ve,pe,je,ce,a.CullFaceMode.backCCW,Et,"terrain_raster",b.gridBuffer,De,Re)}})}}(u,this,this.proxySourceCache,s,this._updateTimestamp),this.renderingToTexture=!0,u.gpuTimingDeferredRenderEnd(),s.splice(0,s.length))}renderBatch(s){if(this._drapedRenderBatches.length===0)return s+1;this.renderingToTexture=!0;const u=this.painter,g=this.painter.context,x=this.proxySourceCache,b=this.proxiedCoords[x.id],E=this._drapedRenderBatches.shift(),k=[],I=u.style.order;let O=0;for(const L of b){const q=x.getTileByID(L.proxyTileKey),ne=x.proxyCachedFBO[L.key]?x.proxyCachedFBO[L.key][s]:void 0,ae=ne!==void 0?x.renderCache[ne]:this.pool[O++],ue=ne!==void 0;if(q.texture=ae.tex,ue&&!ae.dirty){k.push(q.tileID);continue}let ce;g.bindFramebuffer.set(ae.fb.framebuffer),this.renderedToTile=!1,ae.dirty&&(g.clear({color:a.Color.transparent,stencil:0}),ae.dirty=!1);for(let pe=E.start;pe<=E.end;++pe){const Z=u.style._layers[I[pe]];if(Z.isHidden(u.transform.zoom))continue;const se=u.style._getLayerSourceCache(Z),xe=se?this.proxyToSource[L.key][se.id]:[L];if(!xe)continue;const ve=xe;g.viewport.set([0,0,ae.fb.width,ae.fb.height]),ce!==(se?se.id:null)&&(this._setupStencil(ae,xe,Z,se),ce=se?se.id:null),u.renderLayer(u,se,Z,ve)}this.renderedToTile?(ae.dirty=!0,k.push(q.tileID)):ue||--O,O===5&&(O=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),E.end+1}postRender(){}renderCacheEfficiency(s){const u=s.order.length;if(u===0)return{efficiency:100};let g,x=0,b=0,E=!1;for(let k=0;k<u;++k){const I=s._layers[s.order[k]];this._style.isLayerDraped(I)?(E&&++x,++b):E||(E=!0,g=I.id)}return b===0?{efficiency:100}:{efficiency:100*(1-x/b),firstUndrapedLayer:g}}getMinElevationBelowMSL(){let s=0;return this._visibleDemTiles.filter(u=>u.dem).forEach(u=>{s=Math.min(s,u.dem.tree.minimums[0])}),s===0?s:(s-30)*this._exaggeration}raycast(s,u,g){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const E=b.tileID,k=1<<E.overscaledZ,{x:I,y:O}=E.canonical,L=I/k,q=(I+1)/k,ne=O/k,ae=(O+1)/k;return{minx:L,miny:ne,maxx:q,maxy:ae,t:b.dem.tree.raycastRoot(L,ne,q,ae,s,u,g),tile:b}});x.sort((b,E)=>(b.t!==null?b.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const b of x){if(b.t==null)return null;const E=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,s,u,g);if(E!=null)return E}return null}_createFBO(){const s=this.painter.context,u=s.gl,g=this.drapeBufferSize;s.activeTexture.set(u.TEXTURE0);const x=new a.Texture(s,{width:g[0],height:g[1],data:null},u.RGBA);x.bind(u.LINEAR,u.CLAMP_TO_EDGE);const b=s.createFramebuffer(g[0],g[1],!1);return b.colorAttachment.set(x.texture),b.depthAttachment=new Oe(s,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=s.createRenderbuffer(s.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),s.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),s.extTextureFilterAnisotropic&&!s.extTextureFilterAnisotropicForceOff&&u.texParameterf(u.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax),{fb:b,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const s in this._style._sourceCaches)if(this._style._sourceCaches[s].hasTransition())return!0;return this._style.order.some(s=>{const u=this._style._layers[s],g=u.isHidden(this.painter.transform.zoom);return u.type==="custom"?!g&&u.shouldRedrape():!g&&u.hasTransition()})}_clearLineLayersFromRenderCache(){let s=!1;for(const g of this._style._getSources())if(g instanceof zt){s=!0;break}if(!s)return;const u={};for(let g=0;g<this._style.order.length;++g){const x=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(x);if(b&&!u[b.id]&&!x.isHidden(this.painter.transform.zoom)&&x.type==="line"&&x.widthExpression()instanceof a.ZoomDependentExpression){u[b.id]=!0;for(const E of this.proxyCoords){const k=this.proxyToSource[E.key][b.id];if(k)for(const I of k)this._clearRenderCacheForTile(b.id,I)}}}}_clearRasterLayersFromRenderCache(){let s=!1;for(const g in this._style._sourceCaches)if(this._style._sourceCaches[g]._source instanceof Mt){s=!0;break}if(!s)return;const u={};for(let g=0;g<this._style.order.length;++g){const x=this._style._layers[this._style.order[g]],b=this._style._getLayerSourceCache(x);if(!b||u[b.id]||x.isHidden(this.painter.transform.zoom)||x.type!=="raster")continue;const E=x.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const I=this.proxyToSource[k.key][b.id];if(I)for(const O of I){const L=Yh(b.getTile(O),b.findLoadedParent(O,0),b,this.painter.transform,E);(L.opacity!==1||L.mix!==0)&&this._clearRenderCacheForTile(b.id,O)}}}}_setupDrapedRenderBatches(){const s=this._style.order,u=s.length;if(u===0)return;const g=[];let x,b=0,E=this._style._layers[s[b]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++b<u;)E=this._style._layers[s[b]];for(;b<u;++b){const k=this._style._layers[s[b]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?x===void 0&&(x=b):x!==void 0&&(g.push({start:x,end:b-1}),x=void 0))}x!==void 0&&g.push({start:x,end:b-1}),this._drapedRenderBatches=g}_setupRenderCache(s){const u=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,u.renderCache.length>u.renderCachePool.length){const E=Object.values(u.proxyCachedFBO);u.proxyCachedFBO={};for(let k=0;k<E.length;++k){const I=Object.values(E[k]);u.renderCachePool.push(...I)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,x=this._tilesDirty;for(let E=g.length-1;E>=0;E--){const k=g[E];if(u.getTileByID(k.key),u.proxyCachedFBO[k.key]!==void 0){const I=s[k.key],O=this.proxyToSource[k.key];let L=0;for(const q in O){const ne=O[q],ae=I[q];if(!ae||ae.length!==ne.length||ne.some((ue,ce)=>ue!==ae[ce]||x[q]&&x[q].hasOwnProperty(ue.key))){L=-1;break}++L}for(const q in u.proxyCachedFBO[k.key])u.renderCache[u.proxyCachedFBO[k.key][q]].dirty=L<0||L!==Object.values(I).length}}const b=[...this._drapedRenderBatches];b.sort((E,k)=>k.end-k.start-(E.end-E.start));for(const E of b)for(const k of g){if(u.proxyCachedFBO[k.key])continue;let I=u.renderCachePool.pop();I===void 0&&u.renderCache.length<50&&(I=u.renderCache.length,u.renderCache.push(this._createFBO())),I!==void 0&&(u.proxyCachedFBO[k.key]={},u.proxyCachedFBO[k.key][E.start]=I,u.renderCache[I].dirty=!0)}this._tilesDirty={}}_setupStencil(s,u,g,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,E=b.gl;if(u.length<=1)return void(this._overlapStencilType=!1);let k;if(g.isTileClipped())k=u.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(u[0].overscaledZ>u[u.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(u,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(s){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[s.key]),this._overlapStencilMode):a.StencilMode.disabled}_renderTileClippingMasks(s,u){const g=this.painter,x=this.painter.context,b=x.gl;g._tileClippingMaskIDs={},x.setColorMode(a.ColorMode.disabled),x.setDepthMode(a.DepthMode.disabled);const E=g.useProgram("clippingMask");for(const k of s){const I=g._tileClippingMaskIDs[k.key]=--u;E.draw(x,b.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:b.ALWAYS,mask:0},I,255,b.KEEP,b.KEEP,b.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,_c(k.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(s){const u=this.painter.transform;if(s.x<0||s.x>u.width||s.y<0||s.y>u.height)return null;const g=[s.x,s.y,1,1];a.transformMat4$1(g,g,u.pixelMatrixInverse),a.scale$1(g,g,1/g[3]),g[0]/=u.worldSize,g[1]/=u.worldSize;const x=u._camera.position,b=a.mercatorZfromAltitude(1,u.center.lat),E=[x[0],x[1],x[2]/b,0],k=a.subtract([],g.slice(0,3),E);a.normalize(k,k);const I=this.raycast(E,k,this._exaggeration);return I!==null&&I?(a.scaleAndAdd(E,E,k,I),E[3]=E[2],E[2]*=b,E):null}drawDepth(){const s=this.painter,u=s.context,g=this.proxySourceCache,x=Math.ceil(s.width),b=Math.ceil(s.height);if(!this._depthFBO||this._depthFBO.width===x&&this._depthFBO.height===b||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const E=u.gl,k=u.createFramebuffer(x,b,!0);u.activeTexture.set(E.TEXTURE0);const I=new a.Texture(u,{width:x,height:b,data:null},E.RGBA);I.bind(E.NEAREST,E.CLAMP_TO_EDGE),k.colorAttachment.set(I.texture);const O=u.createRenderbuffer(u.gl.DEPTH_COMPONENT16,x,b);k.depthAttachment.set(O),this._depthFBO=k,this._depthTexture=I}u.bindFramebuffer.set(this._depthFBO.framebuffer),u.viewport.set([0,0,x,b]),function(E,k,I,O){if(E.transform.projection.name==="globe")return;const L=E.context,q=L.gl;L.clear({depth:1});const ne=E.useProgram("terrainDepth"),ae=new a.DepthMode(q.LESS,a.DepthMode.ReadWrite,E.depthRangeFor3D);for(const ue of O){const ce=I.getTile(ue),pe=ul(ue.projMatrix,0);k.setupElevationDraw(ce,ne),ne.draw(L,q.TRIANGLES,ae,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.backCCW,pe,"terrain_depth",k.gridBuffer,k.gridIndexBuffer,k.gridNoSkirtSegments)}}(s,this,g,this.proxyCoords)}_setupProxiedCoordsForOrtho(s,u,g){if(s.getSource()instanceof Bn)return this._setupProxiedCoordsForImageSource(s,u,g);this._findCoveringTileCache[s.id]=this._findCoveringTileCache[s.id]||{};const x=this.proxiedCoords[s.id]=[],b=this.proxyCoords;for(let k=0;k<b.length;k++){const I=b[k],O=this._findTileCoveringTileID(I,s);if(O){const L=this._createProxiedId(I,O,g[I.key]&&g[I.key][s.id]);x.push(L),this.proxyToSource[I.key][s.id]=[L]}}let E=!1;for(let k=0;k<u.length;k++){const I=s.getTile(u[k]);if(!I||!I.hasData())continue;const O=this._findTileCoveringTileID(I.tileID,this.proxySourceCache);if(O&&O.tileID.canonical.z!==I.tileID.canonical.z){const L=this.proxyToSource[O.tileID.key][s.id],q=this._createProxiedId(O.tileID,I,g[O.tileID.key]&&g[O.tileID.key][s.id]);L?L.splice(L.length-1,0,q):this.proxyToSource[O.tileID.key][s.id]=[q],x.push(q),E=!0}}this._sourceTilesOverlap[s.id]=E}_setupProxiedCoordsForImageSource(s,u,g){if(!s.getSource().loaded())return;const x=this.proxiedCoords[s.id]=[],b=this.proxyCoords,E=s.getSource(),k=new a.Point(E.tileID.x,E.tileID.y)._div(1<<E.tileID.z),I=E.coordinates.map(a.MercatorCoordinate.fromLngLat).reduce((L,q)=>(L.min.x=Math.min(L.min.x,q.x-k.x),L.min.y=Math.min(L.min.y,q.y-k.y),L.max.x=Math.max(L.max.x,q.x-k.x),L.max.y=Math.max(L.max.y,q.y-k.y),L),{min:new a.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),O=(L,q)=>{const ne=L.wrap+L.canonical.x/(1<<L.canonical.z),ae=L.canonical.y/(1<<L.canonical.z),ue=a.EXTENT/(1<<L.canonical.z),ce=q.wrap+q.canonical.x/(1<<q.canonical.z),pe=q.canonical.y/(1<<q.canonical.z);return ne+ue<ce+I.min.x||ne>ce+I.max.x||ae+ue<pe+I.min.y||ae>pe+I.max.y};for(let L=0;L<b.length;L++){const q=b[L];for(let ne=0;ne<u.length;ne++){const ae=s.getTile(u[ne]);if(!ae||!ae.hasData()||O(q,ae.tileID))continue;const ue=this._createProxiedId(q,ae,g[q.key]&&g[q.key][s.id]),ce=this.proxyToSource[q.key][s.id];ce?ce.push(ue):this.proxyToSource[q.key][s.id]=[ue],x.push(ue)}}}_createProxiedId(s,u,g){let x=this.orthoMatrix;if(g){const b=g.find(E=>E.key===u.tileID.key);if(b)return b}if(u.tileID.key!==s.key){const b=s.canonical.z-u.tileID.canonical.z;let E,k,I;x=a.create();const O=u.tileID.wrap-s.wrap<<s.overscaledZ;b>0?(E=a.EXTENT>>b,k=E*((u.tileID.canonical.x<<b)-s.canonical.x+O),I=E*((u.tileID.canonical.y<<b)-s.canonical.y)):(E=a.EXTENT<<-b,k=a.EXTENT*(u.tileID.canonical.x-(s.canonical.x+O<<-b)),I=a.EXTENT*(u.tileID.canonical.y-(s.canonical.y<<-b))),a.ortho(x,0,E,0,E,0,1),a.translate(x,x,[k,I,0])}return new Ou(u.tileID,s.key,x)}_findTileCoveringTileID(s,u){let g=u.getTile(s);if(g&&g.hasData())return g;const x=this._findCoveringTileCache[u.id],b=x[s.key];if(g=b?u.getTileByID(b):null,g&&g.hasData()||b===null)return g;let E=g?g.tileID:s,k=E.overscaledZ;const I=u.getSource().minzoom,O=[];if(!b){const q=u.getSource().maxzoom;if(s.canonical.z>=q){const ne=s.canonical.z-q;u.getSource().reparseOverscaled?(k=Math.max(s.canonical.z+2,u.transform.tileZoom),E=new a.OverscaledTileID(k,s.wrap,q,s.canonical.x>>ne,s.canonical.y>>ne)):ne!==0&&(k=q,E=new a.OverscaledTileID(k,s.wrap,q,s.canonical.x>>ne,s.canonical.y>>ne))}E.key!==s.key&&(O.push(E.key),g=u.getTile(E))}const L=q=>{O.forEach(ne=>{x[ne]=q}),O.length=0};for(k-=1;k>=I&&(!g||!g.hasData());k--){g&&L(g.tileID.key);const q=E.calculateScaledKey(k);if(g=u.getTileByID(q),g&&g.hasData())break;const ne=x[q];if(ne===null)break;ne===void 0?O.push(q):g=u.getTileByID(ne)}return L(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(s){return this.enabled?this._findTileCoveringTileID(s,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(s,u){let g=this._tilesDirty[s];g||(g=this._tilesDirty[s]={}),g[u.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const s=function(u){let g=0;const x=new a.StructArrayLayout2ui4,b=131;for(let E=1;E<129;E++){for(let k=1;k<129;k++)g=E*b+k,x.emplaceBack(g,g+1),x.emplaceBack(g,g+b),x.emplaceBack(g+1,g+b),E===128&&x.emplaceBack(g+b,g+b+1);x.emplaceBack(g+1,g+1+b)}return x}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(s),this.wireframeSegments=a.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,s.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Zn{static cacheKey(s,u,g,x){let b=`${u}${x?x.cacheKey:""}`;for(const E of g)s.usedDefines.includes(E)&&(b+=`/${E}`);return b}constructor(s,u,g,x,b,E){const k=s.gl;this.program=k.createProgram();const I=function(Z){const se=[];for(let xe=0;xe<Z.length;xe++){if(Z[xe]===null)continue;const ve=Z[xe].split(" ");se.push(ve.pop())}return se}(g.staticAttributes),O=x?x.getBinderAttributes():[],L=I.concat(O);let q=x?x.defines():[];q=q.concat(E.map(Z=>`#define ${Z}`));const ne=s.isWebGL2?`#version 300 es
`:"",ae=ne+q.concat(s.extStandardDerivatives&&ne.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Gh):Gh,Gh,Du,X1.fragmentSource,ll.fragmentSource,g.fragmentSource).join(`
`),ue=ne+q.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Du,X1.vertexSource,ll.vertexSource,Au.vertexSource,g.vertexSource).join(`
`),ce=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(ce,ae),k.compileShader(ce),k.attachShader(this.program,ce);const pe=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(pe,ue),k.compileShader(pe),k.attachShader(this.program,pe),this.attributes={},this.numAttributes=L.length;for(let Z=0;Z<this.numAttributes;Z++)L[Z]&&(k.bindAttribLocation(this.program,Z,L[Z]),this.attributes[L[Z]]=Z);k.linkProgram(this.program),k.deleteShader(pe),k.deleteShader(ce),this.fixedUniforms=b(s),this.binderUniforms=x?x.getUniforms(s):[],E.includes("TERRAIN")&&(this.terrainUniforms=(Z=>({u_dem:new a.Uniform1i(Z),u_dem_prev:new a.Uniform1i(Z),u_dem_unpack:new a.Uniform4f(Z),u_dem_tl:new a.Uniform2f(Z),u_dem_scale:new a.Uniform1f(Z),u_dem_tl_prev:new a.Uniform2f(Z),u_dem_scale_prev:new a.Uniform1f(Z),u_dem_size:new a.Uniform1f(Z),u_dem_lerp:new a.Uniform1f(Z),u_exaggeration:new a.Uniform1f(Z),u_depth:new a.Uniform1i(Z),u_depth_size_inv:new a.Uniform2f(Z),u_meter_to_dem:new a.Uniform1f(Z),u_label_plane_matrix_inv:new a.UniformMatrix4f(Z)}))(s)),E.includes("GLOBE")&&(this.globeUniforms=(Z=>({u_tile_tl_up:new a.Uniform3f(Z),u_tile_tr_up:new a.Uniform3f(Z),u_tile_br_up:new a.Uniform3f(Z),u_tile_bl_up:new a.Uniform3f(Z),u_tile_up_scale:new a.Uniform1f(Z)}))(s)),E.includes("FOG")&&(this.fogUniforms=(Z=>({u_fog_matrix:new a.UniformMatrix4f(Z),u_fog_range:new a.Uniform2f(Z),u_fog_color:new a.Uniform4f(Z),u_fog_horizon_blend:new a.Uniform1f(Z),u_fog_temporal_offset:new a.Uniform1f(Z),u_frustum_tl:new a.Uniform3f(Z),u_frustum_tr:new a.Uniform3f(Z),u_frustum_br:new a.Uniform3f(Z),u_frustum_bl:new a.Uniform3f(Z),u_globe_pos:new a.Uniform3f(Z),u_globe_radius:new a.Uniform1f(Z),u_globe_transition:new a.Uniform1f(Z),u_is_globe:new a.Uniform1i(Z),u_viewport:new a.Uniform2f(Z)}))(s))}}setTerrainUniformValues(s,u){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const x in u)g[x]&&g[x].set(this.program,x,u[x])}}setGlobeUniformValues(s,u){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const x in u)g[x]&&g[x].set(this.program,x,u[x])}}setFogUniformValues(s,u){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const x in u)g[x].set(this.program,x,u[x])}}draw(s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue,ce){const pe=s.gl;if(this.failedToCreate)return;s.program.set(this.program),s.setDepthMode(g),s.setStencilMode(x),s.setColorMode(b),s.setCullFace(E);for(const se of Object.keys(this.fixedUniforms))this.fixedUniforms[se].set(this.program,se,k[se]);ue&&ue.setUniforms(this.program,s,this.binderUniforms,ne,{zoom:ae});const Z={[pe.LINES]:2,[pe.TRIANGLES]:3,[pe.LINE_STRIP]:1}[u];for(const se of q.get()){const xe=se.vaos||(se.vaos={});(xe[I]||(xe[I]=new h_)).bind(s,this,O,ue?ue.getPaintVertexBuffers():[],L,se.vertexOffset,ce||[]),pe.drawElements(u,se.primitiveLength*Z,pe.UNSIGNED_SHORT,se.primitiveOffset*Z*2)}}}function xc(f,s){const u=Math.pow(2,s.tileID.overscaledZ),g=s.tileSize*Math.pow(2,f.transform.tileZoom)/u,x=g*(s.tileID.canonical.x+s.tileID.wrap*u),b=g*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_tile_units_to_pixels:1/nt(s,1,f.transform.tileZoom),u_pixel_coord_upper:[x>>16,b>>16],u_pixel_coord_lower:[65535&x,65535&b]}}const Q1=a.create(),Qh=(f,s,u,g,x,b,E,k,I,O,L)=>{const q=s.style.light,ne=q.properties.get("position"),ae=[ne.x,ne.y,ne.z],ue=a.create$1();q.properties.get("anchor")==="viewport"&&(a.fromRotation(ue,-s.transform.angle),a.transformMat3(ae,ae,ue));const ce=q.properties.get("color"),pe=s.transform,Z={u_matrix:f,u_lightpos:ae,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[ce.r,ce.g,ce.b],u_vertical_gradient:+u,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Q1,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:x,u_edge_radius:b};return pe.projection.name==="globe"&&(Z.u_tile_id=[E.canonical.x,E.canonical.y,1<<E.canonical.z],Z.u_zoom_transition=I,Z.u_inv_rot_matrix=L,Z.u_merc_center=O,Z.u_up_dir=pe.projection.upVector(new a.CanonicalTileID(0,0,0),O[0]*a.EXTENT,O[1]*a.EXTENT),Z.u_height_lift=k),Z},em=(f,s,u,g,x,b,E,k,I,O,L,q)=>{const ne=Qh(f,s,u,g,x,b,E,I,O,L,q),ae={u_height_factor:-Math.pow(2,E.overscaledZ)/k.tileSize/8};return a.extend(ne,xc(s,k),ae)},Pa=f=>({u_matrix:f}),ep=(f,s,u)=>a.extend(Pa(f),xc(s,u)),p_=(f,s)=>({u_matrix:f,u_world:s}),f_=(f,s,u,g)=>a.extend(ep(f,s,u),{u_world:g}),m_=a.create(),tp=(f,s,u,g,x,b)=>{const E=f.transform,k=E.projection.name==="globe";let I;if(b.paint.get("circle-pitch-alignment")==="map")if(k){const L=a.globePixelsToTileUnits(E.zoom,s.canonical)*E._pixelsPerMercatorPixel;I=Float32Array.from([L,0,0,L])}else I=E.calculatePixelsToTileUnitsMatrix(u);else I=new Float32Array([E.pixelsToGLUnits[0],0,0,E.pixelsToGLUnits[1]]);const O={u_camera_to_center_distance:E.cameraToCenterDistance,u_matrix:f.translatePosMatrix(s.projMatrix,u,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:a.exported.devicePixelRatio,u_extrude_scale:I,u_inv_rot_matrix:m_,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){O.u_inv_rot_matrix=g,O.u_merc_center=x,O.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],O.u_zoom_transition=a.globeToMercatorTransition(E.zoom);const L=x[0]*a.EXTENT,q=x[1]*a.EXTENT;O.u_up_dir=E.projection.upVector(new a.CanonicalTileID(0,0,0),L,q)}return O},np=f=>{const s=[];return f.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s},rp=(f,s,u,g)=>{const x=a.EXTENT/u.tileSize;return{u_matrix:f,u_camera_to_center_distance:s.getCameraToCenterDistance(g),u_extrude_scale:[s.pixelsToGLUnits[0]/x,s.pixelsToGLUnits[1]/x]}},Bu=(f,s,u=1)=>({u_matrix:f,u_color:s,u_overlay:0,u_overlay_scale:u}),tm=a.create(),nm=(f,s,u,g,x,b,E)=>{const k=f.transform,I=k.projection.name==="globe",O=I?a.globePixelsToTileUnits(k.zoom,s.canonical)*k._pixelsPerMercatorPixel:nt(u,1,b),L={u_matrix:s.projMatrix,u_extrude_scale:O,u_intensity:E,u_inv_rot_matrix:tm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(I){L.u_inv_rot_matrix=g,L.u_merc_center=x,L.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],L.u_zoom_transition=a.globeToMercatorTransition(k.zoom);const q=x[0]*a.EXTENT,ne=x[1]*a.EXTENT;L.u_up_dir=k.projection.upVector(new a.CanonicalTileID(0,0,0),q,ne)}return L},g_=(f,s,u,g,x,b,E)=>{const k=f.transform,I=k.calculatePixelsToTileUnitsMatrix(s);return{u_matrix:ip(f,s,u,g),u_pixels_to_tile_units:I,u_device_pixel_ratio:b,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:bc(u)?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:hl(s,f.transform),u_alpha_discard_threshold:0,u_trim_offset:E}},vc=(f,s,u,g,x)=>{const b=f.transform;return{u_matrix:ip(f,s,u,g),u_texsize:s.imageAtlasTexture.size,u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:x,u_image:0,u_tile_units_to_pixels:hl(s,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function hl(f,s){return 1/nt(f,1,s.tileZoom)}function ip(f,s,u,g){return f.translatePosMatrix(g||s.tileID.projMatrix,s,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}function bc(f){const s=f.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}const op=(f,s,u,g,x,b)=>{return{u_matrix:f,u_tl_parent:s,u_scale_parent:u,u_fade_t:g.mix,u_opacity:g.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(k=x.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(E=x.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Ko(x.paint.get("raster-hue-rotate")),u_perspective_transform:b};var E,k};function Ko(f){f*=Math.PI/180;const s=Math.sin(f),u=Math.cos(f);return[(2*u+1)/3,(-Math.sqrt(3)*s-u+1)/3,(Math.sqrt(3)*s-u+1)/3]}const Fu=a.create(),sp=(f,s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue,ce)=>{const pe=x.transform,Z={u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:pe.cameraToCenterDistance,u_rotate_symbol:+u,u_aspect_ratio:pe.width/pe.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:E,u_coord_matrix:k,u_is_text:+I,u_pitch_with_map:+g,u_texsize:O,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Fu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Fu,u_up_vector:[0,-1,0]};return ce.name==="globe"&&(Z.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],Z.u_zoom_transition=q,Z.u_inv_rot_matrix=ae,Z.u_merc_center=ne,Z.u_camera_forward=pe._camera.forward(),Z.u_ecef_origin=a.globeECEFOrigin(pe.globeMatrix,L.toUnwrapped()),Z.u_tile_matrix=Float32Array.from(pe.globeMatrix),Z.u_up_vector=ue),Z},$u=(f,s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue,ce,pe)=>a.extend(sp(f,s,u,g,x,b,E,k,I,O,q,ne,ae,ue,ce,pe),{u_gamma_scale:g?x.transform.cameraToCenterDistance*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:a.exported.devicePixelRatio,u_is_halo:+L}),rm=(f,s,u,g,x,b,E,k,I,O,L,q,ne,ae,ue,ce)=>a.extend($u(f,s,u,g,x,b,E,k,!0,I,!0,L,q,ne,ae,ue,ce),{u_texsize_icon:O,u_texture_icon:1}),ap=(f,s,u)=>({u_matrix:f,u_opacity:s,u_color:u}),y_=(f,s,u,g,x)=>a.extend(function(b,E,k){const I=E.imageManager.getPattern(b.toString()),{width:O,height:L}=E.imageManager.getPixelSize(),q=Math.pow(2,k.tileID.overscaledZ),ne=k.tileSize*Math.pow(2,E.transform.tileZoom)/q,ae=ne*(k.tileID.canonical.x+k.tileID.wrap*q),ue=ne*k.tileID.canonical.y;return{u_image:0,u_pattern_tl:I.tl,u_pattern_br:I.br,u_texsize:[O,L],u_pattern_size:I.displaySize,u_tile_units_to_pixels:1/nt(k,1,E.transform.tileZoom),u_pixel_coord_upper:[ae>>16,ue>>16],u_pixel_coord_lower:[65535&ae,65535&ue]}}(g,u,x),{u_matrix:f,u_opacity:s}),lp={fillExtrusion:f=>({u_matrix:new a.UniformMatrix4f(f),u_lightpos:new a.Uniform3f(f),u_lightintensity:new a.Uniform1f(f),u_lightcolor:new a.Uniform3f(f),u_vertical_gradient:new a.Uniform1f(f),u_opacity:new a.Uniform1f(f),u_edge_radius:new a.Uniform1f(f),u_ao:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_up_dir:new a.Uniform3f(f),u_height_lift:new a.Uniform1f(f)}),fillExtrusionPattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_lightpos:new a.Uniform3f(f),u_lightintensity:new a.Uniform1f(f),u_lightcolor:new a.Uniform3f(f),u_vertical_gradient:new a.Uniform1f(f),u_height_factor:new a.Uniform1f(f),u_edge_radius:new a.Uniform1f(f),u_ao:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_up_dir:new a.Uniform3f(f),u_height_lift:new a.Uniform1f(f),u_image:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_pixel_coord_upper:new a.Uniform2f(f),u_pixel_coord_lower:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f),u_opacity:new a.Uniform1f(f)}),fill:f=>({u_matrix:new a.UniformMatrix4f(f)}),fillPattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_image:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_pixel_coord_upper:new a.Uniform2f(f),u_pixel_coord_lower:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f)}),fillOutline:f=>({u_matrix:new a.UniformMatrix4f(f),u_world:new a.Uniform2f(f)}),fillOutlinePattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_world:new a.Uniform2f(f),u_image:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_pixel_coord_upper:new a.Uniform2f(f),u_pixel_coord_lower:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f)}),circle:f=>({u_camera_to_center_distance:new a.Uniform1f(f),u_extrude_scale:new a.UniformMatrix2f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_up_dir:new a.Uniform3f(f)}),collisionBox:f=>({u_matrix:new a.UniformMatrix4f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_extrude_scale:new a.Uniform2f(f)}),collisionCircle:f=>({u_matrix:new a.UniformMatrix4f(f),u_inv_matrix:new a.UniformMatrix4f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_viewport_size:new a.Uniform2f(f)}),debug:f=>({u_color:new a.UniformColor(f),u_matrix:new a.UniformMatrix4f(f),u_overlay:new a.Uniform1i(f),u_overlay_scale:new a.Uniform1f(f)}),clippingMask:f=>({u_matrix:new a.UniformMatrix4f(f)}),heatmap:f=>({u_extrude_scale:new a.Uniform1f(f),u_intensity:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_up_dir:new a.Uniform3f(f)}),heatmapTexture:f=>({u_image:new a.Uniform1i(f),u_color_ramp:new a.Uniform1i(f),u_opacity:new a.Uniform1f(f)}),hillshade:f=>({u_matrix:new a.UniformMatrix4f(f),u_image:new a.Uniform1i(f),u_latrange:new a.Uniform2f(f),u_light:new a.Uniform2f(f),u_shadow:new a.UniformColor(f),u_highlight:new a.UniformColor(f),u_accent:new a.UniformColor(f)}),hillshadePrepare:f=>({u_matrix:new a.UniformMatrix4f(f),u_image:new a.Uniform1i(f),u_dimension:new a.Uniform2f(f),u_zoom:new a.Uniform1f(f),u_unpack:new a.Uniform4f(f)}),line:f=>({u_matrix:new a.UniformMatrix4f(f),u_pixels_to_tile_units:new a.UniformMatrix2f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_units_to_pixels:new a.Uniform2f(f),u_dash_image:new a.Uniform1i(f),u_gradient_image:new a.Uniform1i(f),u_image_height:new a.Uniform1f(f),u_texsize:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f),u_alpha_discard_threshold:new a.Uniform1f(f),u_trim_offset:new a.Uniform2f(f)}),linePattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_texsize:new a.Uniform2f(f),u_pixels_to_tile_units:new a.UniformMatrix2f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_image:new a.Uniform1i(f),u_units_to_pixels:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f),u_alpha_discard_threshold:new a.Uniform1f(f)}),raster:f=>({u_matrix:new a.UniformMatrix4f(f),u_tl_parent:new a.Uniform2f(f),u_scale_parent:new a.Uniform1f(f),u_fade_t:new a.Uniform1f(f),u_opacity:new a.Uniform1f(f),u_image0:new a.Uniform1i(f),u_image1:new a.Uniform1i(f),u_brightness_low:new a.Uniform1f(f),u_brightness_high:new a.Uniform1f(f),u_saturation_factor:new a.Uniform1f(f),u_contrast_factor:new a.Uniform1f(f),u_spin_weights:new a.Uniform3f(f),u_perspective_transform:new a.Uniform2f(f)}),symbolIcon:f=>({u_is_size_zoom_constant:new a.Uniform1i(f),u_is_size_feature_constant:new a.Uniform1i(f),u_size_t:new a.Uniform1f(f),u_size:new a.Uniform1f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_rotate_symbol:new a.Uniform1i(f),u_aspect_ratio:new a.Uniform1f(f),u_fade_change:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_label_plane_matrix:new a.UniformMatrix4f(f),u_coord_matrix:new a.UniformMatrix4f(f),u_is_text:new a.Uniform1i(f),u_pitch_with_map:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_camera_forward:new a.Uniform3f(f),u_tile_matrix:new a.UniformMatrix4f(f),u_up_vector:new a.Uniform3f(f),u_ecef_origin:new a.Uniform3f(f),u_texture:new a.Uniform1i(f)}),symbolSDF:f=>({u_is_size_zoom_constant:new a.Uniform1i(f),u_is_size_feature_constant:new a.Uniform1i(f),u_size_t:new a.Uniform1f(f),u_size:new a.Uniform1f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_rotate_symbol:new a.Uniform1i(f),u_aspect_ratio:new a.Uniform1f(f),u_fade_change:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_label_plane_matrix:new a.UniformMatrix4f(f),u_coord_matrix:new a.UniformMatrix4f(f),u_is_text:new a.Uniform1i(f),u_pitch_with_map:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_texture:new a.Uniform1i(f),u_gamma_scale:new a.Uniform1f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_tile_id:new a.Uniform3f(f),u_zoom_transition:new a.Uniform1f(f),u_inv_rot_matrix:new a.UniformMatrix4f(f),u_merc_center:new a.Uniform2f(f),u_camera_forward:new a.Uniform3f(f),u_tile_matrix:new a.UniformMatrix4f(f),u_up_vector:new a.Uniform3f(f),u_ecef_origin:new a.Uniform3f(f),u_is_halo:new a.Uniform1i(f)}),symbolTextAndIcon:f=>({u_is_size_zoom_constant:new a.Uniform1i(f),u_is_size_feature_constant:new a.Uniform1i(f),u_size_t:new a.Uniform1f(f),u_size:new a.Uniform1f(f),u_camera_to_center_distance:new a.Uniform1f(f),u_rotate_symbol:new a.Uniform1i(f),u_aspect_ratio:new a.Uniform1f(f),u_fade_change:new a.Uniform1f(f),u_matrix:new a.UniformMatrix4f(f),u_label_plane_matrix:new a.UniformMatrix4f(f),u_coord_matrix:new a.UniformMatrix4f(f),u_is_text:new a.Uniform1i(f),u_pitch_with_map:new a.Uniform1i(f),u_texsize:new a.Uniform2f(f),u_texsize_icon:new a.Uniform2f(f),u_texture:new a.Uniform1i(f),u_texture_icon:new a.Uniform1i(f),u_gamma_scale:new a.Uniform1f(f),u_device_pixel_ratio:new a.Uniform1f(f),u_is_halo:new a.Uniform1i(f)}),background:f=>({u_matrix:new a.UniformMatrix4f(f),u_opacity:new a.Uniform1f(f),u_color:new a.UniformColor(f)}),backgroundPattern:f=>({u_matrix:new a.UniformMatrix4f(f),u_opacity:new a.Uniform1f(f),u_image:new a.Uniform1i(f),u_pattern_tl:new a.Uniform2f(f),u_pattern_br:new a.Uniform2f(f),u_texsize:new a.Uniform2f(f),u_pattern_size:new a.Uniform2f(f),u_pixel_coord_upper:new a.Uniform2f(f),u_pixel_coord_lower:new a.Uniform2f(f),u_tile_units_to_pixels:new a.Uniform1f(f)}),terrainRaster:Xh,terrainDepth:Xh,skybox:f=>({u_matrix:new a.UniformMatrix4f(f),u_sun_direction:new a.Uniform3f(f),u_cubemap:new a.Uniform1i(f),u_opacity:new a.Uniform1f(f),u_temporal_offset:new a.Uniform1f(f)}),skyboxGradient:f=>({u_matrix:new a.UniformMatrix4f(f),u_color_ramp:new a.Uniform1i(f),u_center_direction:new a.Uniform3f(f),u_radius:new a.Uniform1f(f),u_opacity:new a.Uniform1f(f),u_temporal_offset:new a.Uniform1f(f)}),skyboxCapture:f=>({u_matrix_3f:new a.UniformMatrix3f(f),u_sun_direction:new a.Uniform3f(f),u_sun_intensity:new a.Uniform1f(f),u_color_tint_r:new a.Uniform4f(f),u_color_tint_m:new a.Uniform4f(f),u_luminance:new a.Uniform1f(f)}),globeRaster:f=>({u_proj_matrix:new a.UniformMatrix4f(f),u_globe_matrix:new a.UniformMatrix4f(f),u_normalize_matrix:new a.UniformMatrix4f(f),u_merc_matrix:new a.UniformMatrix4f(f),u_zoom_transition:new a.Uniform1f(f),u_merc_center:new a.Uniform2f(f),u_image0:new a.Uniform1i(f),u_grid_matrix:new a.UniformMatrix3f(f),u_skirt_height:new a.Uniform1f(f),u_frustum_tl:new a.Uniform3f(f),u_frustum_tr:new a.Uniform3f(f),u_frustum_br:new a.Uniform3f(f),u_frustum_bl:new a.Uniform3f(f),u_globe_pos:new a.Uniform3f(f),u_globe_radius:new a.Uniform1f(f),u_viewport:new a.Uniform2f(f)}),globeAtmosphere:f=>({u_frustum_tl:new a.Uniform3f(f),u_frustum_tr:new a.Uniform3f(f),u_frustum_br:new a.Uniform3f(f),u_frustum_bl:new a.Uniform3f(f),u_horizon:new a.Uniform1f(f),u_transition:new a.Uniform1f(f),u_fadeout_range:new a.Uniform1f(f),u_color:new a.Uniform4f(f),u_high_color:new a.Uniform4f(f),u_space_color:new a.Uniform4f(f),u_star_intensity:new a.Uniform1f(f),u_star_density:new a.Uniform1f(f),u_star_size:new a.Uniform1f(f),u_temporal_offset:new a.Uniform1f(f),u_horizon_angle:new a.Uniform1f(f),u_rotation_matrix:new a.UniformMatrix4f(f)})};let Nu;function wc(f,s,u,g,x,b,E){const k=f.context,I=k.gl,O=f.transform,L=f.useProgram("collisionBox"),q=[];let ne=0,ae=0;for(let ve=0;ve<g.length;ve++){const De=g[ve],Re=s.getTile(De),ze=Re.getBucket(u);if(!ze)continue;const Ue=ao(De,ze,O);let je=Ue;x[0]===0&&x[1]===0||(je=f.translatePosMatrix(Ue,Re,x,b));const Ye=E?ze.textCollisionBox:ze.iconCollisionBox,kt=ze.collisionCircleArray;if(kt.length>0){const qe=a.create(),ft=je;a.mul(qe,ze.placementInvProjMatrix,O.glCoordMatrix),a.mul(qe,qe,ze.placementViewportMatrix),q.push({circleArray:kt,circleOffset:ae,transform:ft,invTransform:qe,projection:ze.getProjection()}),ne+=kt.length/4,ae=ne}Ye&&(f.terrain&&f.terrain.setupElevationDraw(Re,L),L.draw(k,I.LINES,a.DepthMode.disabled,a.StencilMode.disabled,f.colorModeForRenderPass(),a.CullFaceMode.disabled,rp(je,O,Re,ze.getProjection()),u.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,null,O.zoom,null,[Ye.collisionVertexBuffer,Ye.collisionVertexBufferExt]))}if(!E||!q.length)return;const ue=f.useProgram("collisionCircle"),ce=new a.StructArrayLayout2f1f2i16;ce.resize(4*ne),ce._trim();let pe=0;for(const ve of q)for(let De=0;De<ve.circleArray.length/4;De++){const Re=4*De,ze=ve.circleArray[Re+0],Ue=ve.circleArray[Re+1],je=ve.circleArray[Re+2],Ye=ve.circleArray[Re+3];ce.emplace(pe++,ze,Ue,je,Ye,0),ce.emplace(pe++,ze,Ue,je,Ye,1),ce.emplace(pe++,ze,Ue,je,Ye,2),ce.emplace(pe++,ze,Ue,je,Ye,3)}(!Nu||Nu.length<2*ne)&&(Nu=function(ve){const De=2*ve,Re=new a.StructArrayLayout3ui6;Re.resize(De),Re._trim();for(let ze=0;ze<De;ze++){const Ue=6*ze;Re.uint16[Ue+0]=4*ze+0,Re.uint16[Ue+1]=4*ze+1,Re.uint16[Ue+2]=4*ze+2,Re.uint16[Ue+3]=4*ze+2,Re.uint16[Ue+4]=4*ze+3,Re.uint16[Ue+5]=4*ze+0}return Re}(ne));const Z=k.createIndexBuffer(Nu,!0),se=k.createVertexBuffer(ce,a.collisionCircleLayout.members,!0);for(const ve of q){const De={u_matrix:ve.transform,u_inv_matrix:ve.invTransform,u_camera_to_center_distance:(xe=O).getCameraToCenterDistance(ve.projection),u_viewport_size:[xe.width,xe.height]};ue.draw(k,I.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,f.colorModeForRenderPass(),a.CullFaceMode.disabled,De,u.id,se,Z,a.SegmentVector.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,O.zoom)}var xe;se.destroy(),Z.destroy()}const im=a.create();function cp({width:f,height:s,anchor:u,textOffset:g,textScale:x},b){const{horizontalAlign:E,verticalAlign:k}=a.getAnchorAlignment(u),I=-(E-.5)*f,O=-(k-.5)*s,L=a.evaluateVariableOffset(u,g);return new a.Point((I/x+L[0])*b,(O/x+L[1])*b)}function __(f,s,u,g,x,b,E,k,I,O,L){const q=f.text.placedSymbolArray,ne=f.text.dynamicLayoutVertexArray,ae=f.icon.dynamicLayoutVertexArray,ue={},ce=f.getProjection(),pe=Ar(k,ce,b),Z=b.elevation,se=ce.upVectorScale(k.canonical,b.center.lat,b.worldSize).metersToTile;ne.clear();for(let xe=0;xe<q.length;xe++){const ve=q.get(xe),{tileAnchorX:De,tileAnchorY:Re,numGlyphs:ze}=ve,Ue=ve.hidden||!ve.crossTileID||f.allowVerticalPlacement&&!ve.placedOrientation?null:g[ve.crossTileID];if(Ue){let je=0,Ye=0,kt=0;if(Z){const At=Z?Z.getAtTileOffset(k,De,Re):0,[hn,Mn,nn]=ce.upVector(k.canonical,De,Re);je=At*hn*se,Ye=At*Mn*se,kt=At*nn*se}let[qe,ft,et,Et]=pi(ve.projectedAnchorX+je,ve.projectedAnchorY+Ye,ve.projectedAnchorZ+kt,u?pe:E);const Xe=W1(b.getCameraToCenterDistance(ce),Et);let pt=x.evaluateSizeForFeature(f.textSizeData,O,ve)*Xe/a.ONE_EM;u&&(pt*=f.tilePixelRatio/I);const It=cp(Ue,pt);u?({x:qe,y:ft,z:et}=ce.projectTilePoint(De+It.x,Re+It.y,k.canonical),[qe,ft,et]=pi(qe+je,ft+Ye,et+kt,E)):(s&&It._rotate(-b.angle),qe+=It.x,ft+=It.y,et=0);const wt=f.allowVerticalPlacement&&ve.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let At=0;At<ze;At++)a.addDynamicAttributes(ne,qe,ft,et,wt);L&&ve.associatedIconIndex>=0&&(ue[ve.associatedIconIndex]={x:qe,y:ft,z:et,angle:wt})}else Po(ze,ne)}if(L){ae.clear();const xe=f.icon.placedSymbolArray;for(let ve=0;ve<xe.length;ve++){const De=xe.get(ve),{numGlyphs:Re}=De,ze=ue[ve];if(De.hidden||!ze)Po(Re,ae);else{const{x:Ue,y:je,z:Ye,angle:kt}=ze;for(let qe=0;qe<Re;qe++)a.addDynamicAttributes(ae,Ue,je,Ye,kt)}}f.icon.dynamicLayoutVertexBuffer.updateData(ae)}f.text.dynamicLayoutVertexBuffer.updateData(ne)}function up(f,s,u){return u.iconsInText&&s?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function om(f,s,u,g,x,b,E,k,I,O,L,q){const ne=f.context,ae=ne.gl,ue=f.transform,ce=k==="map",pe=I==="map",Z=ce&&u.layout.get("symbol-placement")!=="point",se=ce&&!pe&&!Z,xe=u.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ve=!1;const De=f.depthModeForSublayer(0,a.DepthMode.ReadOnly),Re=[a.mercatorXfromLng(ue.center.lng),a.mercatorYfromLat(ue.center.lat)],ze=u.layout.get("text-variable-anchor"),Ue=ue.projection.name==="globe",je=[],Ye=[0,-1,0];let kt=Ye;!Ue&&!ue.mercatorFromTransition||ce||(kt=function(qe){const ft=qe._camera.getWorldToCamera(qe.worldSize,1),et=a.multiply([],ft,qe.globeMatrix);a.invert(et,et);const Et=[0,0,0],Xe=[0,1,0,0];return a.transformMat4$1(Xe,Xe,et),Et[0]=Xe[0],Et[1]=Xe[1],Et[2]=Xe[2],a.normalize(Et,Et),Et}(ue));for(const qe of g){const ft=s.getTile(qe),et=ft.getBucket(u);if(!et||et.projection.name==="mercator"&&Ue)continue;const Et=x?et.text:et.icon;if(!Et||et.fullyClipped||!Et.segments.get().length)continue;const Xe=Et.programConfigurations.get(u.id),pt=x||et.sdfIcons,It=x?et.textSizeData:et.iconSizeData,wt=pe||ue.pitch!==0,At=a.evaluateSizeForZoom(It,ue.zoom);let hn,Mn,nn,bn,Wn=[0,0],jn=null;if(x)Mn=ft.glyphAtlasTexture,nn=ae.LINEAR,hn=ft.glyphAtlasTexture.size,et.iconsInText&&(Wn=ft.imageAtlasTexture.size,jn=ft.imageAtlasTexture,bn=wt||f.options.rotating||f.options.zooming||It.kind==="composite"||It.kind==="camera"?ae.LINEAR:ae.NEAREST);else{const Is=u.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;Mn=ft.imageAtlasTexture,nn=pt||f.options.rotating||f.options.zooming||Is||wt?ae.LINEAR:ae.NEAREST,hn=ft.imageAtlasTexture.size}const ln=et.projection.name==="globe",ir=ln?kt:Ye,lr=ln?a.globeToMercatorTransition(ue.zoom):0,cr=Ar(qe,et.getProjection(),ue),ur=ue.calculatePixelsToTileUnitsMatrix(ft),Mi=ct(cr,ft.tileID.canonical,pe,ce,ue,et.getProjection(),ur),mi=f.terrain&&pe&&Z?a.invert(a.create(),Mi):im,ho=Yr(cr,ft.tileID.canonical,pe,ce,ue,et.getProjection(),ur),Qo=ze&&et.hasTextData(),Dr=u.layout.get("icon-text-fit")!=="none"&&Qo&&et.hasIconData();if(Z){const Is=ue.elevation,Ks=Is?Is.getAtTileOffsetFunc(qe,ue.center.lat,ue.worldSize,et.getProjection()):null,za=ws(cr,ft.tileID.canonical,pe,ce,ue,et.getProjection(),ur);Oh(et,cr,f,x,za,ho,pe,O,Ks,qe)}const dr=Z||x&&ze||Dr,Qn=f.translatePosMatrix(cr,ft,b,E),Kr=dr?im:Mi,Li=f.translatePosMatrix(ho,ft,b,E,!0),kr=et.getProjection().createInversionMatrix(ue,qe.canonical),Ui=[];f.terrainRenderModeElevated()&&pe&&Ui.push("PITCH_WITH_MAP_TERRAIN"),ln&&Ui.push("PROJECTION_GLOBE_VIEW"),dr&&Ui.push("PROJECTED_POS_ON_VIEWPORT");const nd=pt&&u.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Da;Da=pt?et.iconsInText?rm(It.kind,At,se,pe,f,Qn,Kr,Li,hn,Wn,qe,lr,Re,kr,ir,et.getProjection()):$u(It.kind,At,se,pe,f,Qn,Kr,Li,x,hn,!0,qe,lr,Re,kr,ir,et.getProjection()):sp(It.kind,At,se,pe,f,Qn,Kr,Li,x,hn,qe,lr,Re,kr,ir,et.getProjection());const zc={program:f.useProgram(up(pt,x,et),Xe,Ui),buffers:Et,uniformValues:Da,atlasTexture:Mn,atlasTextureIcon:jn,atlasInterpolation:nn,atlasInterpolationIcon:bn,isSDF:pt,hasHalo:nd,tile:ft,labelPlaneMatrixInv:mi};if(xe&&et.canOverlap){ve=!0;const Is=Et.segments.get();for(const Ks of Is)je.push({segments:new a.SegmentVector([Ks]),sortKey:Ks.sortKey,state:zc})}else je.push({segments:Et.segments,sortKey:0,state:zc})}ve&&je.sort((qe,ft)=>qe.sortKey-ft.sortKey);for(const qe of je){const ft=qe.state;if(f.terrain&&f.terrain.setupElevationDraw(ft.tile,ft.program,{useDepthForOcclusion:!Ue,labelPlaneMatrixInv:ft.labelPlaneMatrixInv}),ne.activeTexture.set(ae.TEXTURE0),ft.atlasTexture.bind(ft.atlasInterpolation,ae.CLAMP_TO_EDGE),ft.atlasTextureIcon&&(ne.activeTexture.set(ae.TEXTURE1),ft.atlasTextureIcon&&ft.atlasTextureIcon.bind(ft.atlasInterpolationIcon,ae.CLAMP_TO_EDGE)),ft.isSDF){const et=ft.uniformValues;ft.hasHalo&&(et.u_is_halo=1,Sc(ft.buffers,qe.segments,u,f,ft.program,De,L,q,et)),et.u_is_halo=0}Sc(ft.buffers,qe.segments,u,f,ft.program,De,L,q,ft.uniformValues)}}function Sc(f,s,u,g,x,b,E,k,I){const O=g.context,L=[f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer,f.globeExtVertexBuffer];x.draw(O,O.gl.TRIANGLES,b,E,k,a.CullFaceMode.disabled,I,u.id,f.layoutVertexBuffer,f.indexBuffer,s,u.paint,g.transform.zoom,f.programConfigurations.get(u.id),L)}function sm(f,s,u,g,x,b,E){const k=f.context.gl,I=u.paint.get("fill-pattern"),O=I&&I.constantOr(1);let L,q,ne,ae,ue;E?(q=O&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",L=k.LINES):(q=O?"fillPattern":"fill",L=k.TRIANGLES);for(const ce of g){const pe=s.getTile(ce);if(O&&!pe.patternsLoaded())continue;const Z=pe.getBucket(u);if(!Z)continue;f.prepareDrawTile();const se=Z.programConfigurations.get(u.id),xe=f.useProgram(q,se);O&&(f.context.activeTexture.set(k.TEXTURE0),pe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),se.updatePaintBuffers());const ve=I.constantOr(null);if(ve&&pe.imageAtlas){const Re=pe.imageAtlas.patternPositions[ve.toString()];Re&&se.setConstantPatternPositions(Re)}const De=f.translatePosMatrix(ce.projMatrix,pe,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(E){ae=Z.indexBuffer2,ue=Z.segments2;const Re=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];ne=q==="fillOutlinePattern"&&O?f_(De,f,pe,Re):p_(De,Re)}else ae=Z.indexBuffer,ue=Z.segments,ne=O?ep(De,f,pe):Pa(De);f.prepareDrawProgram(f.context,xe,ce.toUnwrapped()),xe.draw(f.context,L,x,f.stencilModeForClipping(ce),b,a.CullFaceMode.disabled,ne,u.id,Z.layoutVertexBuffer,ae,ue,u.paint,f.transform.zoom,se)}}function ju(f,s,u,g,x,b,E){const k=f.context,I=k.gl,O=f.transform,L=u.paint.get("fill-extrusion-pattern"),q=L.constantOr(1),ne=u.paint.get("fill-extrusion-opacity"),ae=[u.paint.get("fill-extrusion-ambient-occlusion-intensity"),u.paint.get("fill-extrusion-ambient-occlusion-radius")],ue=u.layout.get("fill-extrusion-edge-radius"),ce=ue>0&&!u.paint.get("fill-extrusion-rounded-roof"),pe=ce?0:ue,Z=O.projection.name==="globe"?a.fillExtrusionHeightLift():0,se=O.projection.name==="globe",xe=se?a.globeToMercatorTransition(O.zoom):0,ve=[a.mercatorXfromLng(O.center.lng),a.mercatorYfromLat(O.center.lat)],De=[];se&&De.push("PROJECTION_GLOBE_VIEW"),ae[0]>0&&De.push("FAUX_AO"),ce&&De.push("ZERO_ROOF_RADIUS");for(const Re of g){const ze=s.getTile(Re),Ue=ze.getBucket(u);if(!Ue||Ue.projection.name!==O.projection.name)continue;const je=Ue.programConfigurations.get(u.id),Ye=f.useProgram(q?"fillExtrusionPattern":"fillExtrusion",je,De);if(f.terrain){const pt=f.terrain;if(f.style.terrainSetForDrapingOnly())pt.setupElevationDraw(ze,Ye,{useMeterToDem:!0});else{if(!Ue.enableTerrain)continue;if(pt.setupElevationDraw(ze,Ye,{useMeterToDem:!0}),am(k,s,Re,Ue,u,pt),!Ue.centroidVertexBuffer){const It=Ye.attributes.a_centroid_pos;It!==void 0&&I.vertexAttrib2f(It,0,0)}}}q&&(f.context.activeTexture.set(I.TEXTURE0),ze.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),je.updatePaintBuffers());const kt=L.constantOr(null);if(kt&&ze.imageAtlas){const pt=ze.imageAtlas.patternPositions[kt.toString()];pt&&je.setConstantPatternPositions(pt)}const qe=f.translatePosMatrix(Re.projMatrix,ze,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),ft=O.projection.createInversionMatrix(O,Re.canonical),et=u.paint.get("fill-extrusion-vertical-gradient"),Et=q?em(qe,f,et,ne,ae,pe,Re,ze,Z,xe,ve,ft):Qh(qe,f,et,ne,ae,pe,Re,Z,xe,ve,ft);f.prepareDrawProgram(k,Ye,Re.toUnwrapped());const Xe=[];f.terrain&&Xe.push(Ue.centroidVertexBuffer),se&&Xe.push(Ue.layoutVertexExtBuffer),Ye.draw(k,k.gl.TRIANGLES,x,b,E,a.CullFaceMode.backCCW,Et,u.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,u.paint,f.transform.zoom,je,Xe)}}function am(f,s,u,g,x,b){const E=[Z=>{let se=Z.canonical.x-1,xe=Z.wrap;return se<0&&(se=(1<<Z.canonical.z)-1,xe--),new a.OverscaledTileID(Z.overscaledZ,xe,Z.canonical.z,se,Z.canonical.y)},Z=>{let se=Z.canonical.x+1,xe=Z.wrap;return se===1<<Z.canonical.z&&(se=0,xe++),new a.OverscaledTileID(Z.overscaledZ,xe,Z.canonical.z,se,Z.canonical.y)},Z=>new a.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,(Z.canonical.y===0?1<<Z.canonical.z:Z.canonical.y)-1),Z=>new a.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y===(1<<Z.canonical.z)-1?0:Z.canonical.y+1)],k=Z=>{const se=s.getSource().minzoom,xe=De=>{const Re=s.getTileByID(De);if(Re&&Re.hasData())return Re.getBucket(x)},ve=[0,-1,1];for(const De of ve){if(Z.overscaledZ+De<se)continue;const Re=xe(Z.calculateScaledKey(Z.overscaledZ+De));if(Re)return Re}},I=[0,0,0],O=(Z,se)=>(I[0]=Math.min(Z.min.y,se.min.y),I[1]=Math.max(Z.max.y,se.max.y),I[2]=a.EXTENT-se.min.x>Z.max.x?se.min.x-a.EXTENT:Z.max.x,I),L=(Z,se)=>(I[0]=Math.min(Z.min.x,se.min.x),I[1]=Math.max(Z.max.x,se.max.x),I[2]=a.EXTENT-se.min.y>Z.max.y?se.min.y-a.EXTENT:Z.max.y,I),q=[(Z,se)=>O(Z,se),(Z,se)=>O(se,Z),(Z,se)=>L(Z,se),(Z,se)=>L(se,Z)],ne=new a.Point(0,0);let ae,ue,ce;const pe=(Z,se,xe,ve,De)=>{const Re=[[ve?xe:Z,ve?Z:xe,0],[ve?xe:se,ve?se:xe,0]],ze=De<0?a.EXTENT+De:De,Ue=[ve?ze:(Z+se)/2,ve?(Z+se)/2:ze,0];return xe===0&&De<0||xe!==0&&De>0?b.getForTilePoints(ce,[Ue],!0,ue):Re.push(Ue),b.getForTilePoints(u,Re,!0,ae),Math.max(Re[0][2],Re[1][2],Ue[2])/b.exaggeration()};for(let Z=0;Z<4;Z++){const se=(Z<2?1:5)-Z,xe=g.borders[Z];if(xe.length===0)continue;const ve=ce=E[Z](u),De=k(ve);if(!(De&&De instanceof a.FillExtrusionBucket&&De.enableTerrain)||g.borderDoneWithNeighborZ[Z]===De.canonical.z&&De.borderDoneWithNeighborZ[se]===g.canonical.z||(ue=b.findDEMTileFor(ve),!ue||!ue.dem))continue;if(!ae){const je=b.findDEMTileFor(u);if(!je||!je.dem)return;ae=je}const Re=De.borders[se];let ze=0;const Ue=De.borderDoneWithNeighborZ[se]!==g.canonical.z;if(g.canonical.z===De.canonical.z){for(let je=0;je<xe.length;je++){const Ye=g.featuresOnBorder[xe[je]],kt=Ye.borders[Z];let qe;for(;ze<Re.length&&(qe=De.featuresOnBorder[Re[ze]],!(qe.borders[se][1]>kt[0]+3));)Ue&&De.encodeCentroid(void 0,qe,!1),ze++;if(qe&&ze<Re.length){const ft=ze;let et=0;for(;!(qe.borders[se][0]>kt[1]-3)&&(et++,++ze!==Re.length);)qe=De.featuresOnBorder[Re[ze]];if(qe=De.featuresOnBorder[Re[ft]],Ye.intersectsCount()>1||qe.intersectsCount()>1||et!==1){et!==1&&(ze=ft),g.encodeCentroid(void 0,Ye,!1),Ue&&De.encodeCentroid(void 0,qe,!1);continue}const Et=q[Z](Ye,qe),Xe=Z%2?a.EXTENT-1:0;ne.x=pe(Et[0],Math.min(a.EXTENT-1,Et[1]),Xe,Z<2,Et[2]),ne.y=0,g.encodeCentroid(ne,Ye,!1),Ue&&De.encodeCentroid(ne,qe,!1)}else g.encodeCentroid(void 0,Ye,!1)}g.borderDoneWithNeighborZ[Z]=De.canonical.z,g.needsCentroidUpdate=!0,Ue&&(De.borderDoneWithNeighborZ[se]=g.canonical.z,De.needsCentroidUpdate=!0)}else{for(const je of xe)g.encodeCentroid(void 0,g.featuresOnBorder[je],!1);if(Ue){for(const je of Re)De.encodeCentroid(void 0,De.featuresOnBorder[je],!1);De.borderDoneWithNeighborZ[se]=g.canonical.z,De.needsCentroidUpdate=!0}g.borderDoneWithNeighborZ[Z]=De.canonical.z,g.needsCentroidUpdate=!0}}(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(f)}const pl=new a.Color(1,0,0,1),x_=new a.Color(0,1,0,1),v_=new a.Color(0,0,1,1),b_=new a.Color(1,0,1,1),w_=new a.Color(0,1,1,1);function S_(f,s,u){const g=f.context,x=f.transform,b=g.gl,E=x.projection.name==="globe",k=E?["PROJECTION_GLOBE_VIEW"]:null;let I=u.projMatrix;if(E&&a.globeToMercatorTransition(x.zoom)>0){const Ye=a.transitionTileAABBinECEF(u.canonical,x),kt=a.globeDenormalizeECEF(Ye);I=a.multiply(new Float32Array(16),x.globeMatrix,kt),a.multiply(I,x.projMatrix,I)}const O=f.useProgram("debug",null,k),L=s.getTileByID(u.key);f.terrain&&f.terrain.setupElevationDraw(L,O);const q=a.DepthMode.disabled,ne=a.StencilMode.disabled,ae=f.colorModeForRenderPass(),ue="$debug";g.activeTexture.set(b.TEXTURE0),f.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),E?L._makeGlobeTileDebugBuffers(f.context,x):L._makeDebugTileBoundsBuffers(f.context,x.projection);const ce=L._tileDebugBuffer||f.debugBuffer,pe=L._tileDebugIndexBuffer||f.debugIndexBuffer,Z=L._tileDebugSegments||f.debugSegments;O.draw(g,b.LINE_STRIP,q,ne,ae,a.CullFaceMode.disabled,Bu(I,a.Color.red),ue,ce,pe,Z,null,null,null,[L._globeTileDebugBorderBuffer]);const se=L.latestRawTileData,xe=Math.floor((se&&se.byteLength||0)/1024),ve=s.getTile(u).tileSize,De=512/Math.min(ve,512)*(u.overscaledZ/x.zoom)*.5;let Re=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Re+=` => ${u.overscaledZ}`),Re+=` ${xe}kb`,function(Ye,kt){Ye.initDebugOverlayCanvas();const qe=Ye.debugOverlayCanvas,ft=Ye.context.gl,et=Ye.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,qe.width,qe.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText(kt,5,5),et.strokeText(kt,5,5),Ye.debugOverlayTexture.update(qe),Ye.debugOverlayTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE)}(f,Re);const ze=L._tileDebugTextBuffer||f.debugBuffer,Ue=L._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,je=L._tileDebugTextSegments||f.debugSegments;O.draw(g,b.TRIANGLES,q,ne,a.ColorMode.alphaBlended,a.CullFaceMode.disabled,Bu(I,a.Color.transparent,De),ue,ze,Ue,je,null,null,null,[L._globeTileDebugTextBuffer])}function lm(f,s,u,g){fl(f,0,s+u/2,f.transform.width,u,g)}function Uu(f,s,u,g){fl(f,s-u/2,0,u,f.transform.height,g)}function fl(f,s,u,g,x,b){const E=f.context,k=E.gl;k.enable(k.SCISSOR_TEST),k.scissor(s*a.exported.devicePixelRatio,u*a.exported.devicePixelRatio,g*a.exported.devicePixelRatio,x*a.exported.devicePixelRatio),E.clear({color:b}),k.disable(k.SCISSOR_TEST)}const cm=a.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:um}=cm;function Ps(f,s,u,g){f.emplaceBack(s,u,g)}class Vu{constructor(s){this.vertexArray=new a.StructArrayLayout3f12,this.indices=new a.StructArrayLayout3ui6,Ps(this.vertexArray,-1,-1,1),Ps(this.vertexArray,1,-1,1),Ps(this.vertexArray,-1,1,1),Ps(this.vertexArray,1,1,1),Ps(this.vertexArray,-1,-1,-1),Ps(this.vertexArray,1,-1,-1),Ps(this.vertexArray,-1,1,-1),Ps(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=s.createVertexBuffer(this.vertexArray,um),this.indexBuffer=s.createIndexBuffer(this.indices),this.segment=a.SegmentVector.simpleSegment(0,0,36,12)}}function co(f,s,u,g,x,b){const E=f.gl,k=s.paint.get("sky-atmosphere-color"),I=s.paint.get("sky-atmosphere-halo-color"),O=s.paint.get("sky-atmosphere-sun-intensity"),L=((q,ne,ae,ue,ce)=>({u_matrix_3f:q,u_sun_direction:ne,u_sun_intensity:ae,u_color_tint_r:[ue.r,ue.g,ue.b,ue.a],u_color_tint_m:[ce.r,ce.g,ce.b,ce.a],u_luminance:5e-5}))(a.fromMat4(a.create$1(),g),x,O,k,I);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+b,s.skyboxTexture,0),u.draw(f,E.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.frontCW,L,"skyboxCapture",s.skyboxGeometry.vertexBuffer,s.skyboxGeometry.indexBuffer,s.skyboxGeometry.segment)}const Tc=a.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class dm{constructor(s){const u=new a.StructArrayLayout5f20;u.emplaceBack(-1,1,1,0,0),u.emplaceBack(1,1,1,1,0),u.emplaceBack(1,-1,1,1,1),u.emplaceBack(-1,-1,1,0,1);const g=new a.StructArrayLayout3ui6;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=s.createVertexBuffer(u,Tc.members),this.indexBuffer=s.createIndexBuffer(g),this.segments=a.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ma={symbol:function(f,s,u,g,x){if(f.renderPass!=="translucent")return;const b=a.StencilMode.disabled,E=f.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(k,I,O,L,q,ne,ae){const ue=I.transform,ce=q==="map",pe=ne==="map";for(const Z of k){const se=L.getTile(Z),xe=se.getBucket(O);if(!xe||!xe.text||!xe.text.segments.get().length)continue;const ve=a.evaluateSizeForZoom(xe.textSizeData,ue.zoom),De=Ar(Z,xe.getProjection(),ue),Re=ue.calculatePixelsToTileUnitsMatrix(se),ze=ct(De,se.tileID.canonical,pe,ce,ue,xe.getProjection(),Re),Ue=O.layout.get("icon-text-fit")!=="none"&&xe.hasIconData();if(ve){const je=Math.pow(2,ue.zoom-se.tileID.overscaledZ);__(xe,ce,pe,ae,a.symbolSize,ue,ze,Z,je,ve,Ue)}}}(g,f,u,s,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),x),u.paint.get("icon-opacity").constantOr(1)!==0&&om(f,s,u,g,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),b,E),u.paint.get("text-opacity").constantOr(1)!==0&&om(f,s,u,g,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),b,E),s.map.showCollisionBoxes&&(wc(f,s,u,g,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),wc(f,s,u,g,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(f,s,u,g){if(f.renderPass!=="translucent")return;const x=u.paint.get("circle-opacity"),b=u.paint.get("circle-stroke-width"),E=u.paint.get("circle-stroke-opacity"),k=u.layout.get("circle-sort-key").constantOr(1)!==void 0;if(x.constantOr(1)===0&&(b.constantOr(1)===0||E.constantOr(1)===0))return;const I=f.context,O=I.gl,L=f.transform,q=f.depthModeForSublayer(0,a.DepthMode.ReadOnly),ne=a.StencilMode.disabled,ae=f.colorModeForRenderPass(),ue=L.projection.name==="globe",ce=[a.mercatorXfromLng(L.center.lng),a.mercatorYfromLat(L.center.lat)],pe=[];for(let se=0;se<g.length;se++){const xe=g[se],ve=s.getTile(xe),De=ve.getBucket(u);if(!De||De.projection.name!==L.projection.name)continue;const Re=De.programConfigurations.get(u.id),ze=np(u);ue&&ze.push("PROJECTION_GLOBE_VIEW");const Ue=f.useProgram("circle",Re,ze),je=De.layoutVertexBuffer,Ye=De.globeExtVertexBuffer,kt=De.indexBuffer,qe=L.projection.createInversionMatrix(L,xe.canonical),ft={programConfiguration:Re,program:Ue,layoutVertexBuffer:je,globeExtVertexBuffer:Ye,indexBuffer:kt,uniformValues:tp(f,xe,ve,qe,ce,u),tile:ve};if(k){const et=De.segments.get();for(const Et of et)pe.push({segments:new a.SegmentVector([Et]),sortKey:Et.sortKey,state:ft})}else pe.push({segments:De.segments,sortKey:0,state:ft})}k&&pe.sort((se,xe)=>se.sortKey-xe.sortKey);const Z={useDepthForOcclusion:!ue};for(const se of pe){const{programConfiguration:xe,program:ve,layoutVertexBuffer:De,globeExtVertexBuffer:Re,indexBuffer:ze,uniformValues:Ue,tile:je}=se.state,Ye=se.segments;f.terrain&&f.terrain.setupElevationDraw(je,ve,Z),f.prepareDrawProgram(I,ve,je.tileID.toUnwrapped()),ve.draw(I,O.TRIANGLES,q,ne,ae,a.CullFaceMode.disabled,Ue,u.id,De,ze,Ye,u.paint,L.zoom,xe,[Re])}},heatmap:function(f,s,u,g){if(u.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const x=f.context,b=x.gl,E=a.StencilMode.disabled,k=new a.ColorMode([b.ONE,b.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(ae,ue,ce,pe){const Z=ae.gl,se=ue.width*pe,xe=ue.height*pe;ae.activeTexture.set(Z.TEXTURE1),ae.viewport.set([0,0,se,xe]);let ve=ce.heatmapFbo;if(!ve||ve&&(ve.width!==se||ve.height!==xe)){ve&&ve.destroy();const De=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,De),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),ve=ce.heatmapFbo=ae.createFramebuffer(se,xe,!1),function(Re,ze,Ue,je,Ye,kt){const qe=Re.gl;qe.texImage2D(qe.TEXTURE_2D,0,Re.isWebGL2&&Re.extRenderToTextureHalfFloat?qe.RGBA16F:qe.RGBA,Ye,kt,0,qe.RGBA,Re.extRenderToTextureHalfFloat?Re.isWebGL2?qe.HALF_FLOAT:Re.extTextureHalfFloat.HALF_FLOAT_OES:qe.UNSIGNED_BYTE,null),je.colorAttachment.set(Ue)}(ae,0,De,ve,se,xe)}else Z.bindTexture(Z.TEXTURE_2D,ve.colorAttachment.get()),ae.bindFramebuffer.set(ve.framebuffer)})(x,f,u,f.transform.projection.name==="globe"?.5:.25),x.clear({color:a.Color.transparent});const I=f.transform,O=I.projection.name==="globe",L=O?["PROJECTION_GLOBE_VIEW"]:null,q=O?a.CullFaceMode.frontCCW:a.CullFaceMode.disabled,ne=[a.mercatorXfromLng(I.center.lng),a.mercatorYfromLat(I.center.lat)];for(let ae=0;ae<g.length;ae++){const ue=g[ae];if(s.hasRenderableParent(ue))continue;const ce=s.getTile(ue),pe=ce.getBucket(u);if(!pe||pe.projection.name!==I.projection.name)continue;const Z=pe.programConfigurations.get(u.id),se=f.useProgram("heatmap",Z,L),{zoom:xe}=f.transform;f.terrain&&f.terrain.setupElevationDraw(ce,se),f.prepareDrawProgram(x,se,ue.toUnwrapped());const ve=I.projection.createInversionMatrix(I,ue.canonical);se.draw(x,b.TRIANGLES,a.DepthMode.disabled,E,k,q,nm(f,ue,ce,ve,ne,xe,u.paint.get("heatmap-intensity")),u.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,u.paint,f.transform.zoom,Z,O?[pe.globeExtVertexBuffer]:null)}x.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(x,b){const E=x.context,k=E.gl,I=b.heatmapFbo;if(!I)return;E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,I.colorAttachment.get()),E.activeTexture.set(k.TEXTURE1);let O=b.colorRampTexture;O||(O=b.colorRampTexture=new a.Texture(E,b.colorRamp,k.RGBA)),O.bind(k.LINEAR,k.CLAMP_TO_EDGE),x.useProgram("heatmapTexture").draw(E,k.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,x.colorModeForRenderPass(),a.CullFaceMode.disabled,((L,q,ne,ae)=>({u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}))(0,b),b.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,b.paint,x.transform.zoom)}(f,u))},line:function(f,s,u,g){if(f.renderPass!=="translucent")return;const x=u.paint.get("line-opacity"),b=u.paint.get("line-width");if(x.constantOr(1)===0||b.constantOr(1)===0)return;const E=f.depthModeForSublayer(0,a.DepthMode.ReadOnly),k=f.colorModeForRenderPass(),I=f.terrain&&f.terrain.renderingToTexture?1:a.exported.devicePixelRatio,O=u.paint.get("line-dasharray"),L=O.constantOr(1),q=u.layout.get("line-cap"),ne=u.paint.get("line-pattern"),ae=ne.constantOr(1),ue=u.paint.get("line-gradient"),ce=ae?"linePattern":"line",pe=f.context,Z=pe.gl,se=(ve=>{const De=[];bc(ve)&&De.push("RENDER_LINE_DASH"),ve.paint.get("line-gradient")&&De.push("RENDER_LINE_GRADIENT");const Re=ve.paint.get("line-trim-offset");Re[0]===0&&Re[1]===0||De.push("RENDER_LINE_TRIM_OFFSET");const ze=ve.paint.get("line-pattern").constantOr(1),Ue=ve.paint.get("line-opacity").constantOr(1)!==1;return!ze&&Ue&&De.push("RENDER_LINE_ALPHA_DISCARD"),De})(u);let xe=se.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(xe=!1);for(const ve of g){const De=s.getTile(ve);if(ae&&!De.patternsLoaded())continue;const Re=De.getBucket(u);if(!Re)continue;f.prepareDrawTile();const ze=Re.programConfigurations.get(u.id),Ue=f.useProgram(ce,ze,se),je=ne.constantOr(null);if(je&&De.imageAtlas){const pt=De.imageAtlas.patternPositions[je.toString()];pt&&ze.setConstantPatternPositions(pt)}const Ye=O.constantOr(null),kt=q.constantOr(null);if(!ae&&Ye&&kt&&De.lineAtlas){const pt=De.lineAtlas.getDash(Ye,kt);pt&&ze.setConstantPatternPositions(pt)}let[qe,ft]=u.paint.get("line-trim-offset");(kt==="round"||kt==="square")&&qe!==ft&&(qe===0&&(qe-=1),ft===1&&(ft+=1));const et=f.terrain?ve.projMatrix:null,Et=ae?vc(f,De,u,et,I):g_(f,De,u,et,Re.lineClipsArray.length,I,[qe,ft]);if(ue){const pt=Re.gradients[u.id];let It=pt.texture;if(u.gradientVersion!==pt.version){let wt=256;if(u.stepInterpolant){const At=s.getSource().maxzoom,hn=ve.canonical.z===At?Math.ceil(1<<f.transform.maxZoom-ve.canonical.z):1;wt=a.clamp(a.nextPowerOfTwo(Re.maxLineLength/a.EXTENT*1024*hn),256,pe.maxTextureSize)}pt.gradient=a.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:wt,image:pt.gradient||void 0,clips:Re.lineClipsArray}),pt.texture?pt.texture.update(pt.gradient):pt.texture=new a.Texture(pe,pt.gradient,Z.RGBA),pt.version=u.gradientVersion,It=pt.texture}pe.activeTexture.set(Z.TEXTURE1),It.bind(u.stepInterpolant?Z.NEAREST:Z.LINEAR,Z.CLAMP_TO_EDGE)}L&&(pe.activeTexture.set(Z.TEXTURE0),De.lineAtlasTexture.bind(Z.LINEAR,Z.REPEAT),ze.updatePaintBuffers()),ae&&(pe.activeTexture.set(Z.TEXTURE0),De.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),ze.updatePaintBuffers()),f.prepareDrawProgram(pe,Ue,ve.toUnwrapped());const Xe=pt=>{Ue.draw(pe,Z.TRIANGLES,E,pt,k,a.CullFaceMode.disabled,Et,u.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,u.paint,f.transform.zoom,ze,[Re.layoutVertexBuffer2])};if(xe){const pt=f.stencilModeForClipping(ve).ref;pt===0&&f.terrain&&pe.clear({stencil:0});const It={func:Z.EQUAL,mask:255};Et.u_alpha_discard_threshold=.8,Xe(new a.StencilMode(It,pt,255,Z.KEEP,Z.KEEP,Z.INVERT)),Et.u_alpha_discard_threshold=0,Xe(new a.StencilMode(It,pt,255,Z.KEEP,Z.KEEP,Z.KEEP))}else Xe(f.stencilModeForClipping(ve))}xe&&(f.resetStencilClippingMasks(),f.terrain&&pe.clear({stencil:0}))},fill:function(f,s,u,g){const x=u.paint.get("fill-color"),b=u.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const E=f.colorModeForRenderPass(),k=u.paint.get("fill-pattern"),I=f.opaquePassEnabledForLayer()&&!k.constantOr(1)&&x.constantOr(a.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===I){const O=f.depthModeForSublayer(1,f.renderPass==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly);sm(f,s,u,g,O,E,!1)}if(f.renderPass==="translucent"&&u.paint.get("fill-antialias")){const O=f.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,a.DepthMode.ReadOnly);sm(f,s,u,g,O,E,!0)}},"fill-extrusion":function(f,s,u,g){const x=u.paint.get("fill-extrusion-opacity");if(x!==0&&f.renderPass==="translucent"){const b=new a.DepthMode(f.context.gl.LEQUAL,a.DepthMode.ReadWrite,f.depthRangeFor3D);if(x!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))ju(f,s,u,g,b,a.StencilMode.disabled,a.ColorMode.disabled),ju(f,s,u,g,b,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const E=f.colorModeForRenderPass();ju(f,s,u,g,b,a.StencilMode.disabled,E)}}},hillshade:function(f,s,u,g){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const x=f.context,b=f.depthModeForSublayer(0,a.DepthMode.ReadOnly),E=f.colorModeForRenderPass(),k=f.terrain&&f.terrain.renderingToTexture,[I,O]=f.renderPass!=="translucent"||k?[{},g]:f.stencilConfigForOverlap(g);for(const L of O){const q=s.getTile(L);if(q.needsHillshadePrepare&&f.renderPass==="offscreen")K1(f,q,u,b,a.StencilMode.disabled,E);else if(f.renderPass==="translucent"){const ne=k&&f.terrain?f.terrain.stencilModeForRTTOverlap(L):I[L.overscaledZ];Y1(f,L,q,u,b,ne,E)}}x.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,s,u,g,x,b){if(f.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!g.length)return;const E=f.context,k=E.gl,I=s.getSource(),O=f.useProgram("raster"),L=f.colorModeForRenderPass(),q=f.terrain&&f.terrain.renderingToTexture,[ne,ae]=I instanceof Bn||q?[{},g]:f.stencilConfigForOverlap(g),ue=ae[ae.length-1].overscaledZ,ce=!f.options.moving;for(const pe of ae){const Z=q?a.DepthMode.disabled:f.depthModeForSublayer(pe.overscaledZ-ue,u.paint.get("raster-opacity")===1?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly,k.LESS),se=pe.toUnwrapped(),xe=s.getTile(pe);if(q&&(!xe||!xe.hasData()))continue;const ve=q?pe.projMatrix:f.transform.calculateProjMatrix(se,ce),De=f.terrain&&q?f.terrain.stencilModeForRTTOverlap(pe):ne[pe.overscaledZ],Re=b?0:u.paint.get("raster-fade-duration");xe.registerFadeDuration(Re);const ze=s.findLoadedParent(pe,0),Ue=Yh(xe,ze,s,f.transform,Re);let je,Ye;f.terrain&&f.terrain.prepareDrawTile();const kt=u.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;E.activeTexture.set(k.TEXTURE0),xe.texture.bind(kt,k.CLAMP_TO_EDGE),E.activeTexture.set(k.TEXTURE1),ze?(ze.texture.bind(kt,k.CLAMP_TO_EDGE),je=Math.pow(2,ze.tileID.overscaledZ-xe.tileID.overscaledZ),Ye=[xe.tileID.canonical.x*je%1,xe.tileID.canonical.y*je%1]):xe.texture.bind(kt,k.CLAMP_TO_EDGE),xe.texture.useMipmap&&E.extTextureFilterAnisotropic&&f.transform.pitch>20&&k.texParameterf(k.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax);const qe=op(ve,Ye||[0,0],je||1,Ue,u,I instanceof Bn?I.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(E,O,se),I instanceof Bn)I.boundsBuffer&&I.boundsSegments&&O.draw(E,k.TRIANGLES,Z,a.StencilMode.disabled,L,a.CullFaceMode.disabled,qe,u.id,I.boundsBuffer,f.quadTriangleIndexBuffer,I.boundsSegments);else{const{tileBoundsBuffer:ft,tileBoundsIndexBuffer:et,tileBoundsSegments:Et}=f.getTileBoundsBuffers(xe);O.draw(E,k.TRIANGLES,Z,De,L,a.CullFaceMode.disabled,qe,u.id,ft,et,Et)}}f.resetStencilClippingMasks()},background:function(f,s,u,g){const x=u.paint.get("background-color"),b=u.paint.get("background-opacity");if(b===0)return;const E=f.context,k=E.gl,I=f.transform,O=I.tileSize,L=u.paint.get("background-pattern");if(f.isPatternMissing(L))return;const q=!L&&x.a===1&&b===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==q)return;const ne=a.StencilMode.disabled,ae=f.depthModeForSublayer(0,q==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly),ue=f.colorModeForRenderPass(),ce=f.useProgram(L?"backgroundPattern":"background");let pe,Z=g;Z||(pe=f.getBackgroundTiles(),Z=Object.values(pe).map(se=>se.tileID)),L&&(E.activeTexture.set(k.TEXTURE0),f.imageManager.bind(f.context));for(const se of Z){const xe=se.toUnwrapped(),ve=g?se.projMatrix:f.transform.calculateProjMatrix(xe);f.prepareDrawTile();const De=s?s.getTile(se):pe?pe[se.key]:new a.Tile(se,O,I.zoom,f),Re=L?y_(ve,b,f,L,{tileID:se,tileSize:O}):ap(ve,b,x);f.prepareDrawProgram(E,ce,xe);const{tileBoundsBuffer:ze,tileBoundsIndexBuffer:Ue,tileBoundsSegments:je}=f.getTileBoundsBuffers(De);ce.draw(E,k.TRIANGLES,ae,ne,ue,a.CullFaceMode.disabled,Re,u.id,ze,Ue,je)}},sky:function(f,s,u){const g=f.transform,x=g.projection.name==="mercator"||g.projection.name==="globe"?1:a.smoothstep(7,8,g.zoom),b=u.paint.get("sky-opacity")*x;if(b===0)return;const E=f.context,k=u.paint.get("sky-type"),I=new a.DepthMode(E.gl.LEQUAL,a.DepthMode.ReadOnly,[0,1]),O=f.frameCounter/1e3%1;k==="atmosphere"?f.renderPass==="offscreen"?u.needsSkyboxCapture(f)&&(function(L,q,ne,ae){const ue=L.context,ce=ue.gl;let pe=q.skyboxFbo;if(!pe){pe=q.skyboxFbo=ue.createFramebuffer(32,32,!1),q.skyboxGeometry=new Vu(ue),q.skyboxTexture=ue.gl.createTexture(),ce.bindTexture(ce.TEXTURE_CUBE_MAP,q.skyboxTexture),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MAG_FILTER,ce.LINEAR);for(let ve=0;ve<6;++ve)ce.texImage2D(ce.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,ce.RGBA,32,32,0,ce.RGBA,ce.UNSIGNED_BYTE,null)}ue.bindFramebuffer.set(pe.framebuffer),ue.viewport.set([0,0,32,32]);const Z=q.getCenter(L,!0),se=L.useProgram("skyboxCapture"),xe=new Float64Array(16);a.identity(xe),a.rotateY(xe,xe,.5*-Math.PI),co(ue,q,se,xe,Z,0),a.identity(xe),a.rotateY(xe,xe,.5*Math.PI),co(ue,q,se,xe,Z,1),a.identity(xe),a.rotateX(xe,xe,.5*-Math.PI),co(ue,q,se,xe,Z,2),a.identity(xe),a.rotateX(xe,xe,.5*Math.PI),co(ue,q,se,xe,Z,3),a.identity(xe),co(ue,q,se,xe,Z,4),a.identity(xe),a.rotateY(xe,xe,Math.PI),co(ue,q,se,xe,Z,5),ue.viewport.set([0,0,L.width,L.height])}(f,u),u.markSkyboxValid(f)):f.renderPass==="sky"&&function(L,q,ne,ae,ue){const ce=L.context,pe=ce.gl,Z=L.transform,se=L.useProgram("skybox");ce.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_CUBE_MAP,q.skyboxTexture);const xe=((ve,De,Re,ze,Ue)=>({u_matrix:ve,u_sun_direction:De,u_cubemap:0,u_opacity:ze,u_temporal_offset:Ue}))(Z.skyboxMatrix,q.getCenter(L,!1),0,ae,ue);L.prepareDrawProgram(ce,se),se.draw(ce,pe.TRIANGLES,ne,a.StencilMode.disabled,L.colorModeForRenderPass(),a.CullFaceMode.backCW,xe,"skybox",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(f,u,I,b,O):k==="gradient"&&f.renderPass==="sky"&&function(L,q,ne,ae,ue){const ce=L.context,pe=ce.gl,Z=L.transform,se=L.useProgram("skyboxGradient");q.skyboxGeometry||(q.skyboxGeometry=new Vu(ce)),ce.activeTexture.set(pe.TEXTURE0);let xe=q.colorRampTexture;xe||(xe=q.colorRampTexture=new a.Texture(ce,q.colorRamp,pe.RGBA)),xe.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);const ve=((De,Re,ze,Ue,je)=>({u_matrix:De,u_color_ramp:0,u_center_direction:Re,u_radius:a.degToRad(ze),u_opacity:Ue,u_temporal_offset:je}))(Z.skyboxMatrix,q.getCenter(L,!1),q.paint.get("sky-gradient-radius"),ae,ue);L.prepareDrawProgram(ce,se),se.draw(ce,pe.TRIANGLES,ne,a.StencilMode.disabled,L.colorModeForRenderPass(),a.CullFaceMode.backCW,ve,"skyboxGradient",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(f,u,I,b,O)},debug:function(f,s,u){for(let g=0;g<u.length;g++)S_(f,s,u[g])},custom:function(f,s,u,g){const x=f.context,b=u.implementation;if(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes("custom")||f.terrain&&(f.terrain.renderingToTexture||f.renderPass==="offscreen")&&u.isLayerDraped()){if(f.renderPass==="offscreen"){const E=b.prerender;if(E){if(f.setCustomLayerDefaults(),x.setColorMode(f.colorModeForRenderPass()),f.transform.projection.name==="globe"){const k=f.transform.pointMerc;E.call(b,x.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(f.transform.zoom),[k.x,k.y],f.transform.pixelsPerMeterRatio)}else E.call(b,x.gl,f.transform.customLayerMatrix());x.setDirty(),f.setBaseState()}}else if(f.renderPass==="translucent"){if(f.terrain&&f.terrain.renderingToTexture){const k=b.renderToTile;if(k){const I=g[0].canonical,O=new a.MercatorCoordinate(I.x+g[0].wrap*(1<<I.z),I.y,I.z);x.setDepthMode(a.DepthMode.disabled),x.setStencilMode(a.StencilMode.disabled),x.setColorMode(f.colorModeForRenderPass()),f.setCustomLayerDefaults(),k.call(b,x.gl,O),x.setDirty(),f.setBaseState()}return}f.setCustomLayerDefaults(),x.setColorMode(f.colorModeForRenderPass()),x.setStencilMode(a.StencilMode.disabled);const E=b.renderingMode==="3d"?new a.DepthMode(f.context.gl.LEQUAL,a.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,a.DepthMode.ReadOnly);if(x.setDepthMode(E),f.transform.projection.name==="globe"){const k=f.transform.pointMerc;b.render(x.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(f.transform.zoom),[k.x,k.y],f.transform.pixelsPerMeterRatio)}else b.render(x.gl,f.transform.customLayerMatrix());x.setDirty(),f.setBaseState(),x.bindFramebuffer.set(null)}}else a.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class ml{constructor(s,u,g=!1){this.context=new bt(s,g),this.transform=u,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=a.SourceCache.maxUnderzooming+a.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(s,u){const g=!!s&&!!s.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Jh(this,s));const x=this._terrain;this.transform.elevation=g?x:null,x.update(s,this.transform,u)}_updateFog(s){const u=s.fog;if(!u||this.transform.projection.name==="globe"||u.getOpacity(this.transform.pitch)<1||u.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,x]=u.getFovAdjustedRange(this.transform._fov);if(g>x)return void(this.transform.fogCullDistSq=null);const b=g+.78*(x-g);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(s,u){if(this.width=s*a.exported.devicePixelRatio,this.height=u*a.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._layers[g].resize()}setup(){const s=this.context,u=new a.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(a.EXTENT,0),u.emplaceBack(0,a.EXTENT),u.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(u,a.posAttributes.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const g=new a.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(a.EXTENT,0),g.emplaceBack(0,a.EXTENT),g.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=s.createVertexBuffer(g,a.posAttributes.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const x=new a.StructArrayLayout2i4;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(x,a.posAttributes.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const b=new a.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(a.EXTENT,0,a.EXTENT,0),b.emplaceBack(0,a.EXTENT,0,a.EXTENT),b.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.mercatorBoundsBuffer=s.createVertexBuffer(b,a.boundsAttributes.members),this.mercatorBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const E=new a.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(E);const k=new a.StructArrayLayout1ui2;for(const O of[0,1,3,2,0])k.emplaceBack(O);this.debugIndexBuffer=s.createIndexBuffer(k),this.emptyTexture=new a.Texture(s,new a.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),s.gl.RGBA),this.identityMat=a.create();const I=this.context.gl;this.stencilClearMode=new a.StencilMode({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO),this.loadTimeStamps.push(a.window.performance.now()),this.atmosphereBuffer=new dm(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(s){return s._makeTileBoundsBuffers(this.context,this.transform.projection),s._tileBoundsBuffer?{tileBoundsBuffer:s._tileBoundsBuffer,tileBoundsIndexBuffer:s._tileBoundsIndexBuffer,tileBoundsSegments:s._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const s=this.context,u=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(s,u.TRIANGLES,a.DepthMode.disabled,this.stencilClearMode,a.ColorMode.disabled,a.CullFaceMode.disabled,_c(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(s,u,g){if(!u||this.currentStencilSource===u.id||!s.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const I of g)if(this._tileClippingMaskIDs[I.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=u.id;const x=this.context,b=x.gl;this.nextStencilID+g.length>256&&this.clearStencil(),x.setColorMode(a.ColorMode.disabled),x.setDepthMode(a.DepthMode.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of g){const I=u.getTile(k),O=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:L,tileBoundsIndexBuffer:q,tileBoundsSegments:ne}=this.getTileBoundsBuffers(I);E.draw(x,b.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:b.ALWAYS,mask:0},O,255,b.KEEP,b.KEEP,b.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,_c(k.projMatrix),"$clipping",L,q,ne)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,u=this.context.gl;return new a.StencilMode({func:u.NOTEQUAL,mask:255},s,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(s){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(s);const u=this.context.gl;return new a.StencilMode({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(s){const u=this.context.gl,g=s.sort((E,k)=>k.overscaledZ-E.overscaledZ),x=g[g.length-1].overscaledZ,b=g[0].overscaledZ-x+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const E={};for(let k=0;k<b;k++)E[k+x]=new a.StencilMode({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=b,[E,g]}return[{[x]:a.StencilMode.disabled},g]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new a.ColorMode([s.CONSTANT_COLOR,s.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?a.ColorMode.unblended:a.ColorMode.alphaBlended}depthModeForSublayer(s,u,g){if(!this.opaquePassEnabledForLayer())return a.DepthMode.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new a.DepthMode(g||this.context.gl.LEQUAL,u,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,u){this.style=s,this.options=u,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const g=this.style.order,x=this.style._sourceCaches;for(const O in x){const L=x[O];L.used&&L.prepare(this.context)}const b={},E={},k={};for(const O in x){const L=x[O];b[O]=L.getVisibleCoordinates(),E[O]=b[O].slice().reverse(),k[O]=L.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<g.length;O++)if(this.style._layers[g[O]].is3D()){this.opaquePassCutoff=O;break}if(this.terrain&&(this.terrain.updateTileBinding(k),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.GlobeSharedBuffers(this.context)),!a.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const O of g){const L=this.style._layers[O],q=s._getLayerSourceCache(L);if(!L.hasOffscreenPass()||L.isHidden(this.transform.zoom))continue;const ne=q?E[q.id]:void 0;(L.type==="custom"||L.isSky()||ne&&ne.length)&&this.renderLayer(this,q,L,ne)}this.depthRangeFor3D=[0,1-(s.order.length+2)*this.numSublayers*this.depthEpsilon];const I=this.terrain;if(I&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&I.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:u.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[g[this.currentLayer]],L=s._getLayerSourceCache(O);if(O.isSky())continue;const q=L?E[L.id]:void 0;this._renderTileClippingMasks(O,L,q),this.renderLayer(this,L,O,q)}if(this.style.fog&&this.transform.projection.supportsFog&&function(O,L){const q=O.context,ne=q.gl,ae=O.transform,ue=new a.DepthMode(ne.LEQUAL,a.DepthMode.ReadOnly,[0,1]),ce=O.useProgram("globeAtmosphere",null,ae.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),pe=a.globeToMercatorTransition(ae.zoom),Z=L.properties.get("color").toArray01(),se=L.properties.get("high-color").toArray01(),xe=L.properties.get("space-color").toArray01PremultipliedAlpha(),ve=a.identity$1([]);a.rotateY$1(ve,ve,-a.degToRad(ae._center.lng)),a.rotateX$1(ve,ve,a.degToRad(ae._center.lat)),a.rotateZ$1(ve,ve,ae.angle),a.rotateX$1(ve,ve,-ae._pitch);const De=a.fromQuat(new Float32Array(16),ve),Re=a.mapValue(L.properties.get("star-intensity"),0,1,0,.25),ze=5e-4,Ue=a.mapValue(L.properties.get("horizon-blend"),0,1,ze,.25),je=a.globeUseCustomAntiAliasing(O,q,ae)&&Ue===ze?ae.worldSize/(2*Math.PI*1.025)-1:ae.globeRadius,Ye=O.frameCounter/1e3%1,kt=a.length(ae.globeCenterInViewSpace),qe=Math.sqrt(Math.pow(kt,2)-Math.pow(je,2)),ft=Math.acos(qe/kt),et=((Xe,pt,It,wt,At,hn,Mn,nn,bn,Wn,jn,ln,ir,lr)=>({u_frustum_tl:Xe,u_frustum_tr:pt,u_frustum_br:It,u_frustum_bl:wt,u_horizon:At,u_transition:hn,u_fadeout_range:Mn,u_color:nn,u_high_color:bn,u_space_color:Wn,u_star_intensity:jn,u_star_size:5*a.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:ln,u_horizon_angle:ir,u_rotation_matrix:lr}))(ae.frustumCorners.TL,ae.frustumCorners.TR,ae.frustumCorners.BR,ae.frustumCorners.BL,ae.frustumCorners.horizon,pe,Ue,Z,se,xe,Re,Ye,ft,De);O.prepareDrawProgram(q,ce);const Et=O.atmosphereBuffer;Et&&ce.draw(q,ne.TRIANGLES,ue,a.StencilMode.disabled,a.ColorMode.alphaBlended,a.CullFaceMode.backCW,et,"skybox",Et.vertexBuffer,Et.indexBuffer,Et.segments)}(this,this.style.fog),this.renderPass="sky",(a.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const O=this.style._layers[g[this.currentLayer]],L=s._getLayerSourceCache(O);O.isSky()&&this.renderLayer(this,L,O,L?E[L.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;){const O=this.style._layers[g[this.currentLayer]],L=s._getLayerSourceCache(O);if(O.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(O)){if(O.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const q=L?(O.type==="symbol"?k:E)[L.id]:void 0;this._renderTileClippingMasks(O,L,L?b[L.id]:void 0),this.renderLayer(this,L,O,q),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let O=null;a.values(this.style._layers).forEach(L=>{const q=s._getLayerSourceCache(L);q&&!L.isHidden(this.transform.zoom)&&(!O||O.getSource().maxzoom<q.getSource().maxzoom)&&(O=q)}),O&&this.options.showTileBoundaries&&Ma.debug(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const L=O.transform.padding;lm(O,O.transform.height-(L.top||0),3,pl),lm(O,L.bottom||0,3,x_),Uu(O,L.left||0,3,v_),Uu(O,O.transform.width-(L.right||0),3,b_);const q=O.transform.centerPoint;(function(ne,ae,ue,ce){fl(ne,ae-1,ue-10,2,20,ce),fl(ne,ae-10,ue-1,20,2,ce)})(O,q.x,O.transform.height-q.y,w_)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(a.window.performance.now()),this.saveCanvasCopy())}renderLayer(s,u,g,x){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||x&&x.length)&&(this.id=g.id,this.gpuTimingStart(g),(!s.transform.projection.unsupportedLayers||!s.transform.projection.unsupportedLayers.includes(g.type)||s.terrain&&g.type==="custom")&&Ma[g.type](s,u,g,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let g=this.gpuTimers[s.id];g||(g=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),g.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,g.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const s=this.context.extTimerQuery,u=s.createQueryEXT();this.deferredRenderGpuTimeQueries.push(u),s.beginQueryEXT(s.TIME_ELAPSED_EXT,u)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}collectDeferredRenderGpuQueries(){const s=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],s}queryGpuTimers(s){const u={};for(const g in s){const x=s[g],b=this.context.extTimerQuery,E=b.getQueryObjectEXT(x.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(x.query),u[g]=E}return u}queryGpuTimeDeferredRender(s){if(!this.options.gpuTimingDeferredRender)return 0;const u=this.context.extTimerQuery;let g=0;for(const x of s)g+=u.getQueryObjectEXT(x,u.QUERY_RESULT_EXT)/1e6,u.deleteQueryEXT(x);return g}translatePosMatrix(s,u,g,x,b){if(!g[0]&&!g[1])return s;const E=b?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(E){const O=Math.sin(E),L=Math.cos(E);g=[g[0]*L-g[1]*O,g[0]*O+g[1]*L]}const k=[b?g[0]:nt(u,g[0],this.transform.zoom),b?g[1]:nt(u,g[1],this.transform.zoom),0],I=new Float32Array(16);return a.translate(I,s,k),I}saveTileTexture(s){const u=this._tileTextures[s.size[0]];u?u.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const u=this._tileTextures[s];return u&&u.length>0?u.pop():null}isPatternMissing(s){return s===null||s!==void 0&&!this.imageManager.getPattern(s.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const s=this.terrain&&this.terrain.renderingToTexture,u=this.terrain&&this.terrain.exaggeration()===0,g=this.style&&this.style.fog,x=[];return this.terrainRenderModeElevated()&&x.push("TERRAIN"),this.transform.projection.name==="globe"&&x.push("GLOBE"),u&&x.push("ZERO_EXAGGERATION"),g&&!s&&g.getOpacity(this.transform.pitch)!==0&&x.push("FOG"),s&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}useProgram(s,u,g){this.cache=this.cache||{};const x=g||[],b=this.currentGlobalDefines().concat(x),E=Zn.cacheKey(Hh[s],s,b,u);return this.cache[E]||(this.cache[E]=new Zn(this.context,s,Hh[s],u,lp[s],b)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(s,u,g){if(this.terrain&&this.terrain.renderingToTexture)return;const x=this.style.fog;if(x){const b=x.getOpacity(this.transform.pitch),E=((k,I,O,L,q,ne,ae,ue,ce,pe,Z)=>{const se=k.transform,xe=I.properties.get("color").toArray01();xe[3]=L;const ve=k.frameCounter/1e3%1;return{u_fog_matrix:O?se.calculateFogTileMatrix(O):k.identityMat,u_fog_range:I.getFovAdjustedRange(se._fov),u_fog_color:xe,u_fog_horizon_blend:I.properties.get("horizon-blend"),u_fog_temporal_offset:ve,u_frustum_tl:q,u_frustum_tr:ne,u_frustum_br:ae,u_frustum_bl:ue,u_globe_pos:ce,u_globe_radius:pe,u_viewport:Z,u_globe_transition:a.globeToMercatorTransition(se.zoom),u_is_globe:+(se.projection.name==="globe")}})(this,x,g,b,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.exported.devicePixelRatio,this.transform.height*a.exported.devicePixelRatio]);u.setFogUniformValues(s,E)}}setTileLoadedFlag(s){this.tileLoaded=s}saveCanvasCopy(){const s=this.canvasCopy();s&&(this.frameCopies.push(s),this.tileLoaded=!1)}canvasCopy(){const s=this.context.gl,u=s.createTexture();return s.bindTexture(s.TEXTURE_2D,u),s.copyTexImage2D(s.TEXTURE_2D,0,s.RGBA,0,0,s.drawingBufferWidth,s.drawingBufferHeight,0),u}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const s=this.style&&this.style.fog;return!!s&&s.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const s=this._backgroundTiles,u=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const x of g)u[x.key]=s[x.key]||new a.Tile(x,512,this.transform.tileZoom,this);return u}clearBackgroundTiles(){this._backgroundTiles={}}}class Wu{constructor(s=0,u=0,g=0,x=0){if(isNaN(s)||s<0||isNaN(u)||u<0||isNaN(g)||g<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=u,this.left=g,this.right=x}interpolate(s,u,g){return u.top!=null&&s.top!=null&&(this.top=a.number(s.top,u.top,g)),u.bottom!=null&&s.bottom!=null&&(this.bottom=a.number(s.bottom,u.bottom,g)),u.left!=null&&s.left!=null&&(this.left=a.number(s.left,u.left,g)),u.right!=null&&s.right!=null&&(this.right=a.number(s.right,u.right,g)),this}getCenter(s,u){const g=a.clamp((this.left+s-this.right)/2,0,s),x=a.clamp((this.top+u-this.bottom)/2,0,u);return new a.Point(g,x)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Wu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Gu(f,s){const u=a.getColumn(f,3);a.fromQuat(f,s),a.setColumn(f,3,u)}function Xn(f,s){const u=a.identity$1([]);return a.rotateZ$1(u,u,-s),a.rotateX$1(u,u,-f),u}function Cc(f,s){const u=[f[0],f[1],0],g=[s[0],s[1],0];if(a.length(u)>=1e-15){const E=a.normalize([],u);a.scale$2(g,E,a.dot(g,E)),s[0]=g[0],s[1]=g[1]}const x=a.cross([],s,f);if(a.len(x)<1e-15)return null;const b=Math.atan2(-x[1],x[0]);return Xn(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),b)}class hm{constructor(s,u){this.position=s,this.orientation=u}get position(){return this._position}set position(s){if(s){const u=s instanceof a.MercatorCoordinate?s:new a.MercatorCoordinate(s[0],s[1],s[2]);this._renderWorldCopies&&(u.x=a.wrap(u.x,0,1)),this._position=u}else this._position=null}lookAtPoint(s,u){if(this.orientation=null,!this.position)return;const g=this.position,x=this._elevation?this._elevation.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(s)):0,b=a.MercatorCoordinate.fromLngLat(s,x),E=[b.x-g.x,b.y-g.y,b.z-g.z];u||(u=[0,0,1]),u[2]=Math.abs(u[2]),this.orientation=Cc(E,u)}setPitchBearing(s,u){this.orientation=Xn(a.degToRad(s),a.degToRad(-u))}}class Hu{constructor(s,u){this._transform=a.identity([]),this.orientation=u,this.position=s}get mercatorPosition(){const s=this.position;return new a.MercatorCoordinate(s[0],s[1],s[2])}get position(){const s=a.getColumn(this._transform,3);return[s[0],s[1],s[2]]}set position(s){var u;s&&a.setColumn(this._transform,3,[(u=s)[0],u[1],u[2],1])}get orientation(){return this._orientation}set orientation(s){this._orientation=s||a.identity$1([]),s&&Gu(this._transform,this._orientation)}getPitchBearing(){const s=this.forward(),u=this.right();return{bearing:Math.atan2(-u[1],u[0]),pitch:Math.atan2(Math.sqrt(s[0]*s[0]+s[1]*s[1]),-s[2])}}setPitchBearing(s,u){this._orientation=Xn(s,u),Gu(this._transform,this._orientation)}forward(){const s=a.getColumn(this._transform,2);return[-s[0],-s[1],-s[2]]}up(){const s=a.getColumn(this._transform,1);return[-s[0],-s[1],-s[2]]}right(){const s=a.getColumn(this._transform,0);return[s[0],s[1],s[2]]}getCameraToWorld(s,u){const g=new Float64Array(16);return a.invert(g,this.getWorldToCamera(s,u)),g}getWorldToCameraPosition(s,u,g){const x=this.position;a.scale$2(x,x,-s);const b=new Float64Array(16);return a.fromScaling(b,[g,g,g]),a.translate(b,b,x),b[10]*=u,b}getWorldToCamera(s,u){const g=new Float64Array(16),x=new Float64Array(4),b=this.position;return a.conjugate(x,this._orientation),a.scale$2(b,b,-s),a.fromQuat(g,x),a.translate(g,g,b),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=u,g[9]*=u,g[10]*=u,g[11]*=u,g}getCameraToClipPerspective(s,u,g,x){const b=new Float64Array(16);return a.perspective(b,s,u,g,x),b}getDistanceToElevation(s,u=!1){const g=s===0?0:a.mercatorZfromAltitude(s,u?a.latFromMercatorY(this.position[1]):this.position[1]),x=this.forward();return(g-this.position[2])/x[2]}clone(){return new Hu([...this.position],[...this.orientation])}}function gl(f,s){const u=qu(f.projection,f.zoom,f.width,f.height),g=function(b,E,k,I,O){const L=new a.LngLat(k.lng-180*Ms,k.lat),q=new a.LngLat(k.lng+180*Ms,k.lat),ne=b.project(L.lng,L.lat),ae=b.project(q.lng,q.lat),ue=-Math.atan2(ae.y-ne.y,ae.x-ne.x),ce=a.MercatorCoordinate.fromLngLat(k);ce.y=a.clamp(ce.y,-1+Ms,1-Ms);const pe=ce.toLngLat(),Z=b.project(pe.lng,pe.lat),se=a.MercatorCoordinate.fromLngLat(pe);se.x+=Ms;const xe=se.toLngLat(),ve=b.project(xe.lng,xe.lat),De=Zu(ve.x-Z.x,ve.y-Z.y,ue),Re=a.MercatorCoordinate.fromLngLat(pe);Re.y+=Ms;const ze=Re.toLngLat(),Ue=b.project(ze.lng,ze.lat),je=Zu(Ue.x-Z.x,Ue.y-Z.y,ue),Ye=Math.abs(De.x)/Math.abs(je.y),kt=a.identity([]);a.rotateZ(kt,kt,-ue*(1-(O?0:I)));const qe=a.identity([]);return a.scale(qe,qe,[1,1-(1-Ye)*I,1]),qe[4]=-je.x/je.y*I,a.rotateZ(qe,qe,ue),a.multiply(qe,kt,qe),qe}(f.projection,0,f.center,u,s),x=pm(f);return a.scale(g,g,[x,x,1]),g}function pm(f){const s=f.projection,u=qu(f.projection,f.zoom,f.width,f.height),g=fm(s,f.center),x=fm(s,a.LngLat.convert(s.center));return Math.pow(2,g*u+(1-u)*x)}function qu(f,s,u,g,x=1/0){const b=f.range;if(!b)return 0;const E=Math.min(x,Math.max(u,g)),k=Math.log(E/1024)/Math.LN2;return a.smoothstep(b[0]+k,b[1]+k,s)}const Ms=1/4e4;function fm(f,s){const u=a.clamp(s.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),g=new a.LngLat(s.lng-180*Ms,u),x=new a.LngLat(s.lng+180*Ms,u),b=f.project(g.lng,u),E=f.project(x.lng,u),k=a.MercatorCoordinate.fromLngLat(g),I=a.MercatorCoordinate.fromLngLat(x),O=E.x-b.x,L=E.y-b.y,q=I.x-k.x,ne=I.y-k.y,ae=Math.sqrt((q*q+ne*ne)/(O*O+L*L));return Math.log(ae)/Math.LN2}function Zu(f,s,u){const g=Math.cos(u),x=Math.sin(u);return{x:f*g-s*x,y:f*x+s*g}}class yl{constructor(s,u,g,x,b,E,k){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=s||0,this._maxZoom=u||22,this._minPitch=g??0,this._maxPitch=x??60,this.setProjection(E),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Wu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Hu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const s=new yl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return s._elevation=this._elevation,s._centerAltitude=this._centerAltitude,s._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,s.tileSize=this.tileSize,s.mercatorFromTransition=this.mercatorFromTransition,s.width=this.width,s.height=this.height,s.cameraElevationReference=this.cameraElevationReference,s._center=this._center,s._setZoom(this.zoom),s._seaLevelZoom=this._seaLevelZoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._nearZ=this._nearZ,s._farZ=this._farZ,s._averageElevation=this._averageElevation,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._camera=this._camera.clone(),s._calcMatrices(),s.freezeTileCoverage=this.freezeTileCoverage,s.frustumCorners=this.frustumCorners,s}get elevation(){return this._elevation}set elevation(s){this._elevation!==s&&(this._elevation=s,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(s,u=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(s||g)&&this._constrainCamera(u),this._calcMatrices()}getProjection(){return a.pick(this.projection,["name","center","parallels"])}setProjection(s){this.projectionOptions=s||{name:"mercator"};const u=this.projection?this.getProjection():void 0;this.projection=a.getProjection(this.projectionOptions);const g=!w(u,this.getProjection());return g&&this._calcMatrices(),this.mercatorFromTransition=!1,g}setMercatorFromTransition(){const s=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.getProjection({name:"mercator"});const u=s!==this.projection.name;return u&&this._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get cameraWorldSize(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.Point(this.width,this.height)}get bearing(){return a.wrap(this.rotation,-180,180)}set bearing(s){this.rotation=s}get rotation(){return-this.angle/Math.PI*180}set rotation(s){const u=-s*Math.PI/180;var g;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(g=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(x,b,E){var k=b[0],I=b[1],O=b[2],L=b[3],q=Math.sin(E),ne=Math.cos(E);x[0]=k*ne+O*q,x[1]=I*ne+L*q,x[2]=k*-q+O*ne,x[3]=I*-q+L*ne}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const u=a.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const s=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/s)}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=a.degToRad(s),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(s){this._averageElevation=s,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(s){const u=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._setZoom(u),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(s){this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const s=this._elevation;this._centerAltitude=s.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=s.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const s=this._elevation,u=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let x=0,b=0;for(let E=0;E<u.length;E++){const k=new a.Point(u[E][0]*this.width,g+u[E][1]*(this.height-g)),I=s.pointCoordinate(k);if(!I)continue;const O=1/Math.hypot(I[0]-this._camera.position[0],I[1]-this._camera.position[1]);x+=I[3]*O,b+=O}return b===0?NaN:x/b}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const s=this._seaLevelZoom,u=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*u,x=this._mercatorZfromZoom(s),b=this._mercatorZfromZoom(this._maxZoom),E=Math.max(x-g,b);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}computeZoomRelativeTo(s){const u=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,s.toAltitude()));let g;g=s.z<this._camera.position[2]?[u.x,u.y,u.z]:[s.x,s.y,s.z];const x=a.length(a.sub([],this._camera.position,g));return a.clamp(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(s){if(!this.height||!s.position&&!s.orientation)return;this._updateCameraState();let u=!1;if(s.orientation&&!a.exactEquals(s.orientation,this._camera.orientation)&&(u=this._setCameraOrientation(s.orientation)),s.position){const g=[s.position.x,s.position.y,s.position.z];a.exactEquals$1(g,this._camera.position)||(this._setCameraPosition(g),u=!0)}u&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const s=this._camera.position,u=new hm;return u.position=new a.MercatorCoordinate(s[0],s[1],s[2]),u.orientation=this._camera.orientation,u._elevation=this.elevation,u._renderWorldCopies=this.renderWorldCopies,u}_setCameraOrientation(s){if(!a.length$1(s))return!1;a.normalize$1(s,s);const u=a.transformQuat([],[0,0,-1],s),g=a.transformQuat([],[0,-1,0],s);if(g[2]<0)return!1;const x=Cc(u,g);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(s){const u=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;s[2]=a.clamp(s[2],x/g,x/u),this._camera.position=s}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,u,g){this._unmodified=!1,this._edgeInsets.interpolate(s,u,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const u=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(s){const u=[new a.UnwrappedTileID(0,s)];if(this.renderWorldCopies){const g=this.pointCoordinate(new a.Point(0,0)),x=this.pointCoordinate(new a.Point(this.width,0)),b=this.pointCoordinate(new a.Point(this.width,this.height)),E=this.pointCoordinate(new a.Point(0,this.height)),k=Math.floor(Math.min(g.x,x.x,b.x,E.x)),I=Math.floor(Math.max(g.x,x.x,b.x,E.x)),O=1;for(let L=k-O;L<=I+O;L++)L!==0&&u.push(new a.UnwrappedTileID(L,s))}return u}coveringTiles(s){let u=this.coveringZoomLevel(s);const g=u,x=this.elevation&&!s.isTerrainDEM,b=this.projection.name==="mercator";if(s.minzoom!==void 0&&u<s.minzoom)return[];s.maxzoom!==void 0&&u>s.maxzoom&&(u=s.maxzoom);const E=this.locationCoordinate(this.center),k=this.center.lat,I=1<<u,O=[I*E.x,I*E.y,0],L=this.projection.name==="globe",q=!L,ne=a.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u,q),ae=L?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ue=I*a.mercatorZfromAltitude(1,this.center.lat),ce=this._camera.position[2]/a.mercatorZfromAltitude(1,this.center.lat),pe=[I*ae.x,I*ae.y,ce*(q?1:ue)],Z=this.cameraToCenterDistance/s.tileSize*(s.roundZoom?1:.502),se=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?u:0,xe=s.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ve=s.isTerrainDEM?-xe:this._elevation?this._elevation.getMinElevationBelowMSL():0,De=this.projection.isReprojectedInTileSpace?pm(this):1,Re=Xe=>{const It=new a.MercatorCoordinate(Xe.x+25e-6,Xe.y,Xe.z),wt=new a.MercatorCoordinate(Xe.x,Xe.y+25e-6,Xe.z),At=Xe.toLngLat(),hn=It.toLngLat(),Mn=wt.toLngLat(),nn=this.locationCoordinate(At),bn=this.locationCoordinate(hn),Wn=this.locationCoordinate(Mn),jn=Math.hypot(bn.x-nn.x,bn.y-nn.y),ln=Math.hypot(Wn.x-nn.x,Wn.y-nn.y);return Math.sqrt(jn*ln)*De/25e-6},ze=Xe=>{const pt=xe,It=ve;return{aabb:a.tileAABB(this,I,0,0,0,Xe,It,pt,this.projection),zoom:0,x:0,y:0,minZ:It,maxZ:pt,wrap:Xe,fullyVisible:!1}},Ue=[];let je=[];const Ye=u,kt=s.reparseOverscaled?g:u,qe=Xe=>Xe*Xe,ft=qe((ce-this._centerAltitude)*ue),et=Xe=>{if(!this._elevation||!Xe.tileID||!b)return;const pt=this._elevation.getMinMaxForTile(Xe.tileID),It=Xe.aabb;pt?(It.min[2]=pt.min,It.max[2]=pt.max,It.center[2]=(It.min[2]+It.max[2])/2):(Xe.shouldSplit=Et(Xe),Xe.shouldSplit||(It.min[2]=It.max[2]=It.center[2]=this._centerAltitude))},Et=Xe=>{if(Xe.zoom<se)return!0;if(Xe.zoom===Ye)return!1;if(Xe.shouldSplit!=null)return Xe.shouldSplit;const pt=Xe.aabb.distanceX(pe),It=Xe.aabb.distanceY(pe);let wt=ft,At=1;if(L){wt=qe(Xe.aabb.distanceZ(pe));const nn=Math.pow(2,Xe.zoom),bn=a.latFromMercatorY((Xe.y+1)/nn),Wn=a.latFromMercatorY(Xe.y/nn),jn=Math.min(Math.max(k,bn),Wn),ln=a.circumferenceAtLatitude(jn)/a.circumferenceAtLatitude(k);if(At=jn===k?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,ln/this._mercatorScaleRatio),this.zoom<=a.GLOBE_ZOOM_THRESHOLD_MIN&&Xe.zoom===Ye-1&&ln>=.9)return!0}else if(x&&(wt=qe(Xe.aabb.distanceZ(pe)*ue)),this.projection.isReprojectedInTileSpace&&g<=5){const nn=Math.pow(2,Xe.zoom),bn=Re(new a.MercatorCoordinate((Xe.x+.5)/nn,(Xe.y+.5)/nn));At=bn>.85?1:bn}const hn=pt*pt+It*It+wt,Mn=qe((1<<Ye-Xe.zoom)*Z*At*((nn,bn)=>{if(bn*qe(.707)<nn)return 1;const Wn=Math.sqrt(bn/nn);return Wn/(1.4144271570014144+(Math.pow(1.1,Wn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(wt,ft),hn));return hn<Mn};if(this.renderWorldCopies)for(let Xe=1;Xe<=3;Xe++)Ue.push(ze(-Xe)),Ue.push(ze(Xe));for(Ue.push(ze(0));Ue.length>0;){const Xe=Ue.pop(),pt=Xe.x,It=Xe.y;let wt=Xe.fullyVisible;if(!wt){const At=Xe.aabb.intersects(ne);if(At===0)continue;wt=At===2}if(Xe.zoom!==Ye&&Et(Xe))for(let At=0;At<4;At++){const hn=(pt<<1)+At%2,Mn=(It<<1)+(At>>1),nn={aabb:b?Xe.aabb.quadrant(At):a.tileAABB(this,I,Xe.zoom+1,hn,Mn,Xe.wrap,Xe.minZ,Xe.maxZ,this.projection),zoom:Xe.zoom+1,x:hn,y:Mn,wrap:Xe.wrap,fullyVisible:wt,tileID:void 0,shouldSplit:void 0,minZ:Xe.minZ,maxZ:Xe.maxZ};x&&!L&&(nn.tileID=new a.OverscaledTileID(Xe.zoom+1===Ye?kt:Xe.zoom+1,Xe.wrap,Xe.zoom+1,hn,Mn),et(nn)),Ue.push(nn)}else{const At=Xe.zoom===Ye?kt:Xe.zoom;if(s.minzoom&&s.minzoom>At)continue;const hn=O[0]-(.5+pt+(Xe.wrap<<Xe.zoom))*(1<<u-Xe.zoom),Mn=O[1]-.5-It,nn=Xe.tileID?Xe.tileID:new a.OverscaledTileID(At,Xe.wrap,Xe.zoom,pt,It);je.push({tileID:nn,distanceSq:hn*hn+Mn*Mn})}}if(this.fogCullDistSq){const Xe=this.fogCullDistSq,pt=this.horizonLineFromTop();je=je.filter(It=>{const wt=[0,0,0,1],At=[a.EXTENT,a.EXTENT,0,1],hn=this.calculateFogTileMatrix(It.tileID.toUnwrapped());a.transformMat4$1(wt,wt,hn),a.transformMat4$1(At,At,hn);const Mn=a.getAABBPointSquareDist(wt,At);if(Mn===0)return!0;let nn=!1;const bn=this._elevation;if(bn&&Mn>Xe&&pt!==0){const Wn=this.calculateProjMatrix(It.tileID.toUnwrapped());let jn;s.isTerrainDEM||(jn=bn.getMinMaxForTile(It.tileID)),jn||(jn={min:ve,max:xe});const ln=a.furthestTileCorner(this.rotation),ir=[ln[0]*a.EXTENT,ln[1]*a.EXTENT,jn.max];a.transformMat4(ir,ir,Wn),nn=(1-ir[1])*this.height*.5<pt}return Mn<Xe||nn})}return je.sort((Xe,pt)=>Xe.distanceSq-pt.distanceSq).map(Xe=>Xe.tileID)}resize(s,u){this.width=s,this.height=u,this.pixelsToGLUnits=[2/s,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const u=a.clamp(s.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),g=this.projection.project(s.lng,u);return new a.Point(g.x*this.worldSize,g.y*this.worldSize)}unproject(s){return this.projection.unproject(s.x/this.worldSize,s.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(s,u){let g,x;const b=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;g=(u.x-b.x)/k,x=(u.y-b.y)/k}else{const k=this.pointCoordinate(u),I=this.pointCoordinate(b);g=k.x-I.x,x=k.y-I.y}const E=this.locationCoordinate(s);this.setLocation(new a.MercatorCoordinate(E.x-g,E.y-x))}setLocation(s){this.center=this.coordinateLocation(s),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(s){return this.projection.locationPoint(this,s)}locationPoint3D(s){return this.projection.locationPoint(this,s,!0)}pointLocation(s){return this.coordinateLocation(this.pointCoordinate(s))}pointLocation3D(s){return this.coordinateLocation(this.pointCoordinate3D(s))}locationCoordinate(s,u){const g=u?a.mercatorZfromAltitude(u,s.lat):void 0,x=this.projection.project(s.lng,s.lat);return new a.MercatorCoordinate(x.x,x.y,g)}coordinateLocation(s){return this.projection.unproject(s.x,s.y)}pointRayIntersection(s,u){const g=u??this._centerAltitude,x=[s.x,s.y,0,1],b=[s.x,s.y,1,1];a.transformMat4$1(x,x,this.pixelMatrixInverse),a.transformMat4$1(b,b,this.pixelMatrixInverse);const E=b[3];a.scale$1(x,x,1/x[3]),a.scale$1(b,b,1/E);const k=x[2],I=b[2];return{p0:x,p1:b,t:k===I?0:(g-k)/(I-k)}}screenPointToMercatorRay(s){const u=[s.x,s.y,0,1],g=[s.x,s.y,1,1];return a.transformMat4$1(u,u,this.pixelMatrixInverse),a.transformMat4$1(g,g,this.pixelMatrixInverse),a.scale$1(u,u,1/u[3]),a.scale$1(g,g,1/g[3]),u[2]=a.mercatorZfromAltitude(u[2],this._center.lat)*this.worldSize,g[2]=a.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,a.scale$1(u,u,1/this.worldSize),a.scale$1(g,g,1/this.worldSize),new a.Ray([u[0],u[1],u[2]],a.normalize([],a.sub([],g,u)))}rayIntersectionCoordinate(s){const{p0:u,p1:g,t:x}=s,b=a.mercatorZfromAltitude(u[2],this._center.lat),E=a.mercatorZfromAltitude(g[2],this._center.lat);return new a.MercatorCoordinate(a.number(u[0],g[0],x)/this.worldSize,a.number(u[1],g[1],x)/this.worldSize,a.number(b,E,x))}pointCoordinate(s,u=this._centerAltitude){return this.projection.pointCoordinate(this,s.x,s.y,u)}pointCoordinate3D(s){if(!this.elevation)return this.pointCoordinate(s);let u=this.projection.pointCoordinate3D(this,s.x,s.y);if(u)return new a.MercatorCoordinate(u[0],u[1],u[2]);let g=0,x=this.horizonLineFromTop();if(s.y>x)return this.pointCoordinate(s);const b=.02*x,E=s.clone();for(let k=0;k<10&&x-g>b;k++){E.y=a.number(g,x,.66);const I=this.projection.pointCoordinate3D(this,E.x,E.y);I?(x=E.y,u=I):g=E.y}return u?new a.MercatorCoordinate(u[0],u[1],u[2]):this.pointCoordinate(s)}isPointAboveHorizon(s){return this.projection.isPointAboveHorizon(this,s)}isPointOnSurface(s){if(s.y<0||s.y>this.height||s.x<0||s.x>this.width)return!1;if(this.elevation||this.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(s);const u=this.pointCoordinate(s);return u.y>=0&&u.y<=1}_coordinatePoint(s,u){const g=u&&this.elevation?this.elevation.getAtPointOrZero(s,this._centerAltitude):this._centerAltitude,x=[s.x*this.worldSize,s.y*this.worldSize,g+s.toAltitude(),1];return a.transformMat4$1(x,x,this.pixelMatrix),x[3]>0?new a.Point(x[0]/x[3],x[1]/x[3]):new a.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:s,left:u}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,b=this.pointLocation3D(new a.Point(u,s)),E=this.pointLocation3D(new a.Point(x,s)),k=this.pointLocation3D(new a.Point(x,g)),I=this.pointLocation3D(new a.Point(u,g));let O=Math.min(b.lng,E.lng,k.lng,I.lng),L=Math.max(b.lng,E.lng,k.lng,I.lng),q=Math.min(b.lat,E.lat,k.lat,I.lat),ne=Math.max(b.lat,E.lat,k.lat,I.lat);const ae=Math.pow(2,-this.zoom)/16*270,ue=this.projection.name==="globe"?1:4,ce=(pe,Z,se,xe,ve)=>{const De=(pe+se)/2,Re=(Z+xe)/2,ze=new a.Point(De,Re),{lng:Ue,lat:je}=this.pointLocation3D(ze),Ye=Math.max(0,O-Ue,q-je,Ue-L,je-ne);O=Math.min(O,Ue),L=Math.max(L,Ue),q=Math.min(q,je),ne=Math.max(ne,je),(ve<ue||Ye>ae)&&(ce(pe,Z,De,Re,ve+1),ce(De,Re,se,xe,ve+1))};if(ce(u,s,x,s,1),ce(x,s,x,g,1),ce(x,g,u,g,1),ce(u,g,u,s,1),this.projection.name==="globe"){const[pe,Z]=a.polesInViewport(this);pe?(ne=90,L=180,O=-180):Z&&(q=-90,L=180,O=-180)}return new a.LngLatBounds(new a.LngLat(O,q),new a.LngLat(L,ne))}_getBoundsRectangular(s,u){const{top:g,left:x}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,k=new a.Point(x,g),I=new a.Point(E,g),O=new a.Point(E,b),L=new a.Point(x,b);let q=this.pointCoordinate(k,s),ne=this.pointCoordinate(I,s);const ae=this.pointCoordinate(O,u),ue=this.pointCoordinate(L,u),ce=(pe,Z)=>(Z.y-pe.y)/(Z.x-pe.x);return q.y>1&&ne.y>=0?q=new a.MercatorCoordinate((1-ue.y)/ce(ue,q)+ue.x,1):q.y<0&&ne.y<=1&&(q=new a.MercatorCoordinate(-ue.y/ce(ue,q)+ue.x,0)),ne.y>1&&q.y>=0?ne=new a.MercatorCoordinate((1-ae.y)/ce(ae,ne)+ae.x,1):ne.y<0&&q.y<=1&&(ne=new a.MercatorCoordinate(-ae.y/ce(ae,ne)+ae.x,0)),new a.LngLatBounds().extend(this.coordinateLocation(q)).extend(this.coordinateLocation(ne)).extend(this.coordinateLocation(ue)).extend(this.coordinateLocation(ae))}_getBoundsRectangularTerrain(){const s=this.elevation;if(!s.visibleDemTiles.length||s.isUsingMockSource())return this._getBoundsRectangular(0,0);const u=s.visibleDemTiles.reduce((g,x)=>{if(x.dem){const b=x.dem.tree;g.min=Math.min(g.min,b.minimums[0]),g.max=Math.max(g.max,b.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(u.min*s.exaggeration(),u.max*s.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(s=!0){const u=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,g=this.height/2-u*(1-this._horizonShift);return s?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(s){this.maxBounds=s,this.minLat=-a.MAX_MERCATOR_LATITUDE,this.maxLat=a.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,s&&(this.minLat=s.getSouth(),this.maxLat=s.getNorth(),this.minLng=s.getWest(),this.maxLng=s.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=a.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=a.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=a.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(s,u){return this.projection.createTileMatrix(this,u,s)}calculateDistanceTileData(s){const u=s.key,g=this._distanceTileDataCache;if(g[u])return g[u];const x=s.canonical,b=1/this.height,E=this.cameraWorldSize,k=E/this.zoomScale(x.z),I=(x.x+Math.pow(2,x.z)*s.wrap)*k,O=x.y*k,L=this.point;L.x*=E/this.worldSize,L.y*=E/this.worldSize;const q=this.angle,ne=Math.sin(-q),ae=-Math.cos(-q);return g[u]={bearing:[ne,ae],center:[(L.x-I)*b,(L.y-O)*b],scale:k/a.EXTENT*b},g[u]}calculateFogTileMatrix(s){const u=s.key,g=this._fogTileMatrixCache;if(g[u])return g[u];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,s);return a.multiply(x,this.worldToFogMatrix,x),g[u]=new Float32Array(x),g[u]}calculateProjMatrix(s,u=!1){const g=s.key,x=u?this._alignedProjMatrixCache:this._projMatrixCache;if(x[g])return x[g];const b=this.calculatePosMatrix(s,this.worldSize);return a.multiply(b,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:u?this.alignedProjMatrix:this.projMatrix,b),x[g]=new Float32Array(b),x[g]}calculatePixelsToTileUnitsMatrix(s){const u=s.tileID.key,g=this._pixelsToTileUnitsCache;if(g[u])return g[u];const x=function(b,E){const{scale:k}=b.tileTransform,I=k*a.EXTENT/(b.tileSize*Math.pow(2,E.zoom-b.tileID.overscaledZ+b.tileID.canonical.z));return O=new Float32Array(4),ne=(L=E.inverseAdjustmentMatrix)[1],ae=L[2],ue=L[3],pe=(q=[I,I])[1],O[0]=L[0]*(ce=q[0]),O[1]=ne*ce,O[2]=ae*pe,O[3]=ue*pe,O;var O,L,q,ne,ae,ue,ce,pe}(s,this);return g[u]=x,g[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const s=1/this.worldSize,u=a.fromScaling([],[s,s,s]);return a.multiply(u,u,this.globeMatrix),u}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const s=this._elevation;this._updateCameraState();const u=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(u),x=this._camera.forward(),b=a.mercatorZfromAltitude(1,this._center.lat);g[2]/=b,x[2]/=b,a.normalize(x,x);const E=s.raycast(g,x,s.exaggeration());if(E){const k=a.scaleAndAdd([],g,x,E),I=new a.MercatorCoordinate(k[0],k[1],a.mercatorZfromAltitude(k[2],a.latFromMercatorY(k[1]))),O=(I.z+a.length([I.x-g[0],I.y-g[1],I.z-g[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(O),this._centerAltitude=I.toAltitude(),this._center=this.coordinateLocation(I),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(s=!1){if(!this._elevation)return;const u=this._elevation,g=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(g),b=u.getAtPointOrZero(new a.MercatorCoordinate(...x)),E=this.pixelsPerMeter/this.worldSize*b,k=this._minimumHeightOverTerrain(),I=x[2]-E;if(I<=k)if(I<0||s){const O=this.locationCoordinate(this._center,this._centerAltitude),L=[x[0],x[1],O.z-x[2]],q=a.length(L);L[2]-=(k-I)/this._pixelsPerMercatorPixel;const ne=a.length(L);if(ne===0)return;a.scale$2(L,L,q/ne*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],O.z*this._pixelsPerMercatorPixel-L[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||s){const ne=this.center;return ne.lat=a.clamp(ne.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!s)&&(ne.lng=a.clamp(ne.lng,this.minLng,this.maxLng)),this.center=ne,void(this._constraining=!1)}const u=this._unmodified,{x:g,y:x}=this.point;let b=0,E=g,k=x;const I=this.width/2,O=this.height/2,L=this.worldMinY*this.scale,q=this.worldMaxY*this.scale;if(x-O<L&&(k=L+O),x+O>q&&(k=q-O),q-L<this.height&&(b=Math.max(b,this.height/(q-L)),k=(q+L)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ne=this.worldMinX*this.scale,ae=this.worldMaxX*this.scale,ue=this.worldSize/2-(ne+ae)/2;E=(g+ue+this.worldSize)%this.worldSize-ue,E-I<ne&&(E=ne+I),E+I>ae&&(E=ae-I),ae-ne<this.width&&(b=Math.max(b,this.width/(ae-ne)),E=(ae+ne)/2)}E===g&&k===x||(this.center=this.unproject(new a.Point(E,k))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){let s=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(s=Math.max(s,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),s}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,u=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.mercatorZfromAltitude(1,this.center.lat)/a.mercatorZfromAltitude(1,a.GLOBE_SCALE_MATCH_LATITUDE));const g=qu(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,g),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x=this.projection.zAxisUnit==="meters"?u:1,b=this._camera.getWorldToCamera(this.worldSize,x),E=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);E[8]=2*-s.x/this.width,E[9]=2*s.y/this.height;let k=a.mul([],E,b);if(this.projection.isReprojectedInTileSpace){const Re=this.locationCoordinate(this.center),ze=a.identity([]);a.translate(ze,ze,[Re.x*this.worldSize,Re.y*this.worldSize,0]),a.multiply(ze,ze,gl(this)),a.translate(ze,ze,[-Re.x*this.worldSize,-Re.y*this.worldSize,0]),a.multiply(k,k,ze),this.inverseAdjustmentMatrix=function(Ue){const je=gl(Ue,!0);return le([],[je[0],je[1],je[4],je[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=a.scale([],k,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=k,this.invProjMatrix=a.invert(new Float64Array(16),this.projMatrix);const I=a.invert([],E);this.frustumCorners=a.FrustumCorners.fromInvProjectionMatrix(I,this.horizonLineFromTop(),this.height);const O=new Float32Array(16);a.identity(O),a.scale(O,O,[1,-1,1]),a.rotateX(O,O,this._pitch),a.rotateZ(O,O,this.angle);const L=a.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),q=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;L[8]=2*-s.x/this.width,L[9]=2*(s.y+q)/this.height,this.skyboxMatrix=a.multiply(O,L,O);const ne=this.point,ae=ne.x,ue=ne.y,ce=this.width%2/2,pe=this.height%2/2,Z=Math.cos(this.angle),se=Math.sin(this.angle),xe=ae-Math.round(ae)+Z*ce+se*pe,ve=ue-Math.round(ue)+Z*pe+se*ce,De=new Float64Array(k);if(a.translate(De,De,[xe>.5?xe-1:xe,ve>.5?ve-1:ve,0]),this.alignedProjMatrix=De,k=a.create(),a.scale(k,k,[this.width/2,-this.height/2,1]),a.translate(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=a.create(),a.scale(k,k,[1,-1,1]),a.translate(k,k,[-1,-1,0]),a.scale(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},k=a.invert(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=k,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.calculateGlobeMatrix(this);const Re=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.transformMat4(Re,Re,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=k;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const s=this.cameraWorldSizeForFog,u=this.cameraPixelsPerMeter,g=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,b=[s,s,u];a.scale$2(b,b,x),a.scale$2(g,g,-1),a.multiply$2(g,g,b);const E=a.create();a.translate(E,E,g),a.scale(E,E,b),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(s,u,x)}_computeCameraPosition(s){const u=(s=s||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),x=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*u-s/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-g[0]*b,x.y/this.worldSize-g[1]*b,s/this.worldSize*this._centerAltitude-g[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(s){const u=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],x=s[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(b=Math.min((u-g)/x,1)),this._camera.position=a.scaleAndAdd([],this._camera.position,s,b),this._updateStateFromCamera()}_updateStateFromCamera(){const s=this._camera.position,u=this._camera.forward(),{pitch:g,bearing:x}=this._camera.getPitchBearing(),b=a.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.degToRad(this._maxPitch)),k=Math.max((s[2]-b)/Math.cos(g),E),I=this._zoomFromMercatorZ(k);a.scaleAndAdd(s,s,u,k),this._pitch=a.clamp(g,a.degToRad(this.minPitch),a.degToRad(this.maxPitch)),this.angle=a.wrap(x,-Math.PI,Math.PI),this._setZoom(a.clamp(I,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.MercatorCoordinate(s[0],s[1],s[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(s){return Math.pow(2,s)*this.tileSize}_mercatorZfromZoom(s){return this.cameraToCenterDistance/this._worldSizeFromZoom(s)}_minimumHeightOverTerrain(){const s=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(s)}_zoomFromMercatorZ(s){return this.scaleZoom(this.cameraToCenterDistance/(s*this.tileSize))}zoomFromMercatorZAdjusted(s){let u=0,g=a.GLOBE_ZOOM_THRESHOLD_MAX,x=0,b=1/0;for(;g-u>1e-6&&g>u;){const E=u+.5*(g-u),k=this.tileSize*Math.pow(2,E),I=this.getCameraToCenterDistance(this.projection,E,k),O=this.scaleZoom(I/(s*this.tileSize)),L=Math.abs(E-O);L<b&&(b=L,x=E),E<O?u=E:g=E}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(s,u){const g=Math.min(s.x,u.x),x=Math.max(s.x,u.x),b=Math.min(s.y,u.y),E=Math.max(s.y,u.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new a.Point(g,b),new a.Point(x,E),new a.Point(g,E),new a.Point(x,b)],I=this.renderWorldCopies?-3:0,O=this.renderWorldCopies?4:1;for(const L of k){const q=this.pointRayIntersection(L);if(q.t<0)return!0;const ne=this.rayIntersectionCoordinate(q);if(ne.x<I||ne.y<0||ne.x>O||ne.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.Point(0,0),new a.Point(this.width,this.height))}zoomDeltaToMovement(s,u){const g=a.length(a.sub([],this._camera.position,s)),x=this._zoomFromMercatorZ(g)+u;return g-this._mercatorZfromZoom(x)}getCameraPoint(){if(this.projection.name==="globe"){const s=function([u,g,x],b){const E=[u,g,x,1];a.transformMat4$1(E,E,b);const k=E[3]=Math.max(E[3],1e-6);return E[0]/=k,E[1]/=k,E[2]/=k,E}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.Point(s[0],s[1])}{const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,s))}}getCameraToCenterDistance(s,u=this.zoom,g=this.worldSize){const x=qu(s,u,this.width,this.height,1024),b=s.pixelSpaceConversion(this.center.lat,g,x);return .5/Math.tan(.5*this._fov)*this.height*b}getWorldToCameraMatrix(){const s=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.multiply(s,s,this.globeMatrix),s}}function _l(f,s){let u=!1,g=null;const x=()=>{g=null,u&&(f(),g=setTimeout(x,s),u=!1)};return()=>(u=!0,g||x(),g)}class dp{constructor(s){this._hashName=s&&encodeURIComponent(s),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=_l(this._updateHashUnthrottled.bind(this),300)}addTo(s){return this._map=s,a.window.addEventListener("hashchange",this._onHashChange,!1),s.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),a.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const s=this._map;if(!s)return"";const u=Ec(s);if(this._hashName){const g=this._hashName;let x=!1;const b=a.window.location.hash.slice(1).split("&").map(E=>{const k=E.split("=")[0];return k===g?(x=!0,`${k}=${u}`):E}).filter(E=>E);return x||b.push(`${g}=${u}`),`#${b.join("&")}`}return`#${u}`}_getCurrentHash(){const s=a.window.location.hash.replace("#","");if(this._hashName){let u;return s.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(u=g)}),(u&&u[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._map;if(!s)return!1;const u=this._getCurrentHash();if(u.length>=3&&!u.some(g=>isNaN(g))){const g=s.dragRotate.isEnabled()&&s.touchZoomRotate.isEnabled()?+(u[3]||0):s.getBearing();return s.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:g,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){const s=a.window.location.href.replace(/(#.+)?$/,this.getHashString());a.window.history.replaceState(a.window.history.state,null,s)}}function Ec(f,s){const u=f.getCenter(),g=Math.round(100*f.getZoom())/100,x=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,x),E=Math.round(u.lng*b)/b,k=Math.round(u.lat*b)/b,I=f.getBearing(),O=f.getPitch();let L=s?`/${E}/${k}/${g}`:`${g}/${k}/${E}`;return(I||O)&&(L+="/"+Math.round(10*I)/10),O&&(L+=`/${Math.round(O)}`),L}const kc={linearity:.3,easing:a.bezier(0,0,.3,1)},Xu=a.extend({deceleration:2500,maxSpeed:1400},kc),Yu=a.extend({deceleration:20,maxSpeed:1400},kc),Jt=a.extend({deceleration:1e3,maxSpeed:360},kc),Mo=a.extend({deceleration:1e3,maxSpeed:90},kc);class mm{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,u=a.exported.now();for(;s.length>0&&u-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const u={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)u.zoom+=b.zoomDelta||0,u.bearing+=b.bearingDelta||0,u.pitch+=b.pitchDelta||0,b.panDelta&&u.pan._add(b.panDelta),b.around&&(u.around=b.around),b.pinchAround&&(u.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(u.pan.mag()){const b=Mc(u.pan.mag(),g,a.extend({},Xu,s||{}));x.offset=u.pan.mult(b.amount/u.pan.mag()),x.center=this._map.transform.center,Pc(x,b)}if(u.zoom){const b=Mc(u.zoom,g,Yu);x.zoom=this._map.transform.zoom+b.amount,Pc(x,b)}if(u.bearing){const b=Mc(u.bearing,g,Jt);x.bearing=this._map.transform.bearing+a.clamp(b.amount,-179,179),Pc(x,b)}if(u.pitch){const b=Mc(u.pitch,g,Mo);x.pitch=this._map.transform.pitch+b.amount,Pc(x,b)}if(x.zoom||x.bearing){const b=u.pinchAround===void 0?u.around:u.pinchAround;x.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function Pc(f,s){(!f.duration||f.duration<s.duration)&&(f.duration=s.duration,f.easing=s.easing)}function Mc(f,s,u){const{maxSpeed:g,linearity:x,deceleration:b}=u,E=a.clamp(f*x/(s/1e3),-g,g),k=Math.abs(E)/(b*x);return{easing:u.easing,duration:1e3*k,amount:E*(k/2)}}class fi extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,g,x={}){const b=K(u.getCanvasContainer(),g),E=u.unproject(b);super(s,a.extend({point:b,lngLat:E,originalEvent:g},x)),this._defaultPrevented=!1,this.target=u}}class Ic extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,g){const x=s==="touchend"?g.changedTouches:g.touches,b=oe(u.getCanvasContainer(),x),E=b.map(I=>u.unproject(I)),k=b.reduce((I,O,L,q)=>I.add(O.div(q.length)),new a.Point(0,0));super(s,{points:b,point:k,lngLats:E,lngLat:u.unproject(k),originalEvent:g}),this._defaultPrevented=!1}}class Ku extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,g){super(s,{originalEvent:g}),this._defaultPrevented=!1}}class hp{constructor(s,u){this._map=s,this._clickTolerance=u.clickTolerance}reset(){this._mousedownPos=void 0}wheel(s){return this._firePreventable(new Ku(s.type,this._map,s))}mousedown(s,u){return this._mousedownPos=u,this._firePreventable(new fi(s.type,this._map,s))}mouseup(s){this._map.fire(new fi(s.type,this._map,s))}preclick(s){const u=a.extend({},s);u.type="preclick",this._map.fire(new fi(u.type,this._map,u))}click(s,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||(this.preclick(s),this._map.fire(new fi(s.type,this._map,s)))}dblclick(s){return this._firePreventable(new fi(s.type,this._map,s))}mouseover(s){this._map.fire(new fi(s.type,this._map,s))}mouseout(s){this._map.fire(new fi(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Ic(s.type,this._map,s))}touchmove(s){this._map.fire(new Ic(s.type,this._map,s))}touchend(s){this._map.fire(new Ic(s.type,this._map,s))}touchcancel(s){this._map.fire(new Ic(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ju{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(s){this._map.fire(new fi(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._map.fire(new fi(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gm{constructor(s,u){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,u){this.isEnabled()&&s.shiftKey&&s.button===0&&(j(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(s,u){if(!this._active)return;const g=u,x=this._startPos,b=this._lastPos;if(!x||!b||b.equals(g)||!this._box&&g.dist(x)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=R("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const E=Math.min(x.x,g.x),k=Math.max(x.x,g.x),I=Math.min(x.y,g.y),O=Math.max(x.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${E}px,${I}px)`,this._box.style.width=k-E+"px",this._box.style.height=O-I+"px")})}mouseupWindow(s,u){if(!this._active)return;const g=this._startPos,x=u;if(g&&s.button===0){if(this.reset(),Y(),g.x!==x.x||g.y!==x.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:b=>b.fitScreenCoordinates(g,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",s)}}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),N(),delete this._startPos,delete this._lastPos}_fireEvent(s,u){return this._map.fire(new a.Event(s,{originalEvent:u}))}}function Qu(f,s){const u={};for(let g=0;g<f.length;g++)u[f[g].identifier]=s[g];return u}class xl{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(s,u,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=s.timeStamp),g.length===this.numTouches&&(this.centroid=function(x){const b=new a.Point(0,0);for(const E of x)b._add(E);return b.div(x.length)}(u),this.touches=Qu(g,u)))}touchmove(s,u,g){if(this.aborted||!this.centroid)return;const x=Qu(g,u);for(const b in this.touches){const E=x[b];(!E||E.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(s,u,g){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class pp{constructor(s){this.singleTap=new xl(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(s,u,g){this.singleTap.touchstart(s,u,g)}touchmove(s,u,g){this.singleTap.touchmove(s,u,g)}touchend(s,u,g){const x=this.singleTap.touchend(s,u,g);if(x){const b=s.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(x)<30;if(b&&E||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class T_{constructor(){this._zoomIn=new pp({numTouches:1,numTaps:2}),this._zoomOut=new pp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,u,g){this._zoomIn.touchstart(s,u,g),this._zoomOut.touchstart(s,u,g)}touchmove(s,u,g){this._zoomIn.touchmove(s,u,g),this._zoomOut.touchmove(s,u,g)}touchend(s,u,g){const x=this._zoomIn.touchend(s,u,g),b=this._zoomOut.touchend(s,u,g);return x?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(x)},{originalEvent:s})}):b?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(b)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ym={0:1,2:2};class vl{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(s,u){return!1}_move(s,u){return{}}mousedown(s,u){if(this._lastPoint)return;const g=ie(s);this._correctButton(s,g)&&(this._lastPoint=u,this._eventButton=g)}mousemoveWindow(s,u){const g=this._lastPoint;if(g){if(s.preventDefault(),this._eventButton!=null&&function(x,b){const E=ym[b];return x.buttons===void 0||(x.buttons&E)!==E}(s,this._eventButton))this.reset();else if(this._moved||!(u.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(g,u)}}mouseupWindow(s){this._lastPoint&&ie(s)===this._eventButton&&(this._moved&&Y(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fp extends vl{mousedown(s,u){super.mousedown(s,u),this._lastPoint&&(this._active=!0)}_correctButton(s,u){return u===0&&!s.ctrlKey}_move(s,u){return{around:u,panDelta:u.sub(s)}}}class mp extends vl{_correctButton(s,u){return u===0&&s.ctrlKey||u===2}_move(s,u){const g=.8*(u.x-s.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(s){s.preventDefault()}}class gp extends vl{_correctButton(s,u){return u===0&&s.ctrlKey||u===2}_move(s,u){const g=-.5*(u.y-s.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(s){s.preventDefault()}}class ed{constructor(s,u){this._map=s,this._el=s.getCanvasContainer(),this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset(),a.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)}touchstart(s,u,g){return this._calculateTransform(s,u,g)}touchmove(s,u,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!a.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return s.cancelable&&s.preventDefault(),this._calculateTransform(s,u,g)}}touchend(s,u,g){this._calculateTransform(s,u,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,u,g){g.length>0&&(this._active=!0);const x=Qu(g,u),b=new a.Point(0,0),E=new a.Point(0,0);let k=0;for(const O in x){const L=x[O],q=this._touches[O];q&&(b._add(L),E._add(L.sub(q)),k++,x[O]=L)}if(this._touches=x,k<this._minTouches||!E.mag())return;const I=E.div(k);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(k),panDelta:I}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=R("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Ac{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(s){}_move(s,u,g){return{}}touchstart(s,u,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([u[0],u[1]]))}touchmove(s,u,g){const x=this._firstTwoTouches;if(!x)return;s.preventDefault();const[b,E]=x,k=Dc(g,u,b),I=Dc(g,u,E);if(!k||!I)return;const O=this._aroundCenter?null:k.add(I).div(2);return this._move([k,I],O,s)}touchend(s,u,g){if(!this._firstTwoTouches)return;const[x,b]=this._firstTwoTouches,E=Dc(g,u,x),k=Dc(g,u,b);E&&k||(this._active&&Y(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Dc(f,s,u){for(let g=0;g<f.length;g++)if(f[g].identifier===u)return s[g]}function yp(f,s){return Math.log(f/s)/Math.LN2}class _m extends Ac{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,u){const g=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(yp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:yp(this._distance,g),pinchAround:u}}}function _p(f,s){return 180*f.angleWith(s)/Math.PI}class xm extends Ac{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,u){const g=this._vector;if(this._vector=s[0].sub(s[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:_p(this._vector,g),pinchAround:u}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const u=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const x=_p(s,g);return Math.abs(x)<u}}function Ys(f){return Math.abs(f.y)>Math.abs(f.x)}class vm extends Ac{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(s){this._lastPoints=s,Ys(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,u,g){const x=this._lastPoints;if(!x)return;const b=s[0].sub(x[0]),E=s[1].sub(x[1]);return this._map._cooperativeGestures&&!a.isFullscreen()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(b,E,g.timeStamp),!this._valid)?void 0:(this._lastPoints=s,this._active=!0,{pitchDelta:(b.y+E.y)/2*-.5})}gestureBeginsVertically(s,u,g){if(this._valid!==void 0)return this._valid;const x=s.mag()>=2,b=u.mag()>=2;if(!x&&!b)return;if(!x||!b)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const E=s.y>0==u.y>0;return Ys(s)&&Ys(u)&&E}}const bm={panStep:100,bearingStep:15,pitchStep:10};class C_{constructor(){const s=bm;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let u=0,g=0,x=0,b=0,E=0;switch(s.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:s.shiftKey?g=-1:(s.preventDefault(),b=-1);break;case 39:s.shiftKey?g=1:(s.preventDefault(),b=1);break;case 38:s.shiftKey?x=1:(s.preventDefault(),E=-1);break;case 40:s.shiftKey?x=-1:(s.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(g=0,x=0),{cameraAnimation:k=>{const I=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:wm,zoom:u?Math.round(I)+u*(s.shiftKey?2:1):I,bearing:k.getBearing()+g*this._bearingStep,pitch:k.getPitch()+x*this._pitchStep,offset:[-b*this._panStep,-E*this._panStep],center:k.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function wm(f){return f*(2-f)}const xp=4.000244140625;class Sm{constructor(s,u){this._map=s,this._el=s.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(s.ctrlKey||s.metaKey||this.isZooming()||a.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let u=s.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const g=a.exported.now(),x=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,u!==0&&u%xp==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(x*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),s.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=s,this._delta-=u,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=K(this._el,s);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:u,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;this._type==="wheel"&&s.projection.wrap&&(s._center.lng>=180||s._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const u=()=>s._terrainEnabled()&&this._aroundCoord?s.computeZoomRelativeTo(this._aroundCoord):s.zoom;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>xp?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&O!==0&&(O=1/O);const L=u(),q=Math.pow(2,L),ne=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(ne*O))),this._type==="wheel"&&(this._startZoom=L,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:u(),x=this._startZoom,b=this._easing;let E,k=!1;if(this._type==="wheel"&&x&&b){const I=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),O=b(I);E=a.number(x,g,O),I<1?this._frameId||(this._frameId=!0):k=!0}else E=g,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:E-u(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let u=a.ease;if(this._prevEase){const g=this._prevEase,x=(a.exported.now()-g.start)/g.duration,b=g.easing(x+.01)-g.easing(x),E=.27/Math.sqrt(b*b+1e-4)*.01,k=Math.sqrt(.0729-E*E);u=a.bezier(E,k,.25,1)}return this._prevEase={start:a.exported.now(),duration:s,easing:u},u}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=R("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(a.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Tm{constructor(s,u){this._clickZoom=s,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Pi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(s,u){return s.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(s.shiftKey?-1:1),around:g.unproject(u)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class E_{constructor(){this._tap=new pp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(s,u,g){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=u[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(s,u,g))}touchmove(s,u,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const x=u[0],b=x.y-this._swipePoint.y;return this._swipePoint=x,s.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(s,u,g)}touchend(s,u,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(s,u,g)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cm{constructor(s,u,g){this._el=s,this._mousePan=u,this._touchPan=g}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class k_{constructor(s,u,g){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=u,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class P_{constructor(s,u,g,x){this._el=s,this._touchZoom=u,this._touchRotate=g,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const uo=f=>f.zoom||f.drag||f.pitch||f.rotate;class Em extends a.Event{}class M_{constructor(){this.constants=[1,1,.01],this.radius=0}setup(s,u){const g=a.sub([],u,s);this.radius=a.length(g[2]<0?a.div([],g,this.constants):[g[0],g[1],0])}projectRay(s){a.div(s,s,this.constants),a.normalize(s,s),a.mul$1(s,s,this.constants);const u=a.scale$2([],s,this.radius);if(u[2]>0){const g=a.scale$2([],[0,0,1],a.dot(u,[0,0,1])),x=a.scale$2([],a.normalize([],[u[0],u[1],0]),this.radius),b=a.add([],u,a.scale$2([],a.sub([],a.add([],x,g),u),2));u[0]=b[0],u[1]=b[1]}return u}}function Io(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class Jo{constructor(s,u){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new mm(s),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new M_,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(u),a.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[a.window,"blur",void 0]];for(const[x,b,E]of this._listeners)x.addEventListener(b,x===a.window.document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[s,u,g]of this._listeners)s.removeEventListener(u,s===a.window.document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(s){const u=this._map,g=u.getCanvasContainer();this._add("mapEvent",new hp(u,s));const x=u.boxZoom=new gm(u,s);this._add("boxZoom",x);const b=new T_,E=new Pi;u.doubleClickZoom=new Tm(E,b),this._add("tapZoom",b),this._add("clickZoom",E);const k=new E_;this._add("tapDragZoom",k);const I=u.touchPitch=new vm(u);this._add("touchPitch",I);const O=new mp(s),L=new gp(s);u.dragRotate=new k_(s,O,L),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);const q=new fp(s),ne=new ed(u,s);u.dragPan=new Cm(g,q,ne),this._add("mousePan",q),this._add("touchPan",ne,["touchZoom","touchRotate"]);const ae=new xm,ue=new _m;u.touchZoomRotate=new P_(g,ue,ae,k),this._add("touchRotate",ae,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ju(u));const ce=u.scrollZoom=new Sm(u,this);this._add("scrollZoom",ce,["mousePan"]);const pe=u.keyboard=new C_;this._add("keyboard",pe);for(const Z of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[Z]&&u[Z].enable(s[Z])}_add(s,u,g){this._handlers.push({handlerName:s,handler:u,allowed:g}),this._handlersById[s]=u}stop(s){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!uo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(s,u,g){for(const x in s)if(x!==g&&(!u||u.indexOf(x)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const u=[];for(const g of s)this._el.contains(g.target)&&u.push(g);return u}handleEvent(s,u){this._updatingCamera=!0;const g=s.type==="renderFrame",x=g?void 0:s,b={needsRenderFrame:!1},E={},k={},I=s.touches?this._getMapTouches(s.touches):void 0,O=I?oe(this._el,I):g?void 0:K(this._el,s);for(const{handlerName:ne,handler:ae,allowed:ue}of this._handlers){if(!ae.isEnabled())continue;let ce;this._blockedByActive(k,ue,ne)?ae.reset():ae[u||s.type]&&(ce=ae[u||s.type](s,O,I),this.mergeHandlerResult(b,E,ce,ne,x),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()),(ce||ae.isActive())&&(k[ne]=ae)}const L={};for(const ne in this._previousActiveHandlers)k[ne]||(L[ne]=x);this._previousActiveHandlers=k,(Object.keys(L).length||Io(b))&&(this._changes.push([b,E,L]),this._triggerRenderFrame()),(Object.keys(k).length||Io(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=b;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(s,u,g,x,b){if(!g)return;a.extend(s,g);const E={handlerName:x,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(u.zoom=E),g.panDelta!==void 0&&(u.drag=E),g.pitchDelta!==void 0&&(u.pitch=E),g.bearingDelta!==void 0&&(u.rotate=E)}_applyChanges(){const s={},u={},g={};for(const[x,b,E]of this._changes)x.panDelta&&(s.panDelta=(s.panDelta||new a.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(s.around=x.around),x.aroundCoord!==void 0&&(s.aroundCoord=x.aroundCoord),x.pinchAround!==void 0&&(s.pinchAround=x.pinchAround),x.noInertia&&(s.noInertia=x.noInertia),a.extend(u,b),a.extend(g,E);this._updateMapTransform(s,u,g),this._changes=[]}_updateMapTransform(s,u,g){const x=this._map,b=x.transform,E=se=>[se.x,se.y,se.z];if((se=>{const xe=this._eventsInProgress.drag;return xe&&!this._handlersById[xe.handlerName].isActive()})()&&!Io(s)){const se=b.zoom;b.cameraElevationReference="sea",b.recenterOnTerrain(),b.cameraElevationReference="ground",se!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&x._stop(!0),!Io(s))return void this._fireEvents(u,g,!0);let{panDelta:k,zoomDelta:I,bearingDelta:O,pitchDelta:L,around:q,aroundCoord:ne,pinchAround:ae}=s;b._isCameraConstrained&&(I>0&&(I=0),b._isCameraConstrained=!1),ae!==void 0&&(q=ae),(I||(se=>u[se]&&!this._eventsInProgress[se])("drag"))&&q&&(this._dragOrigin=E(b.pointCoordinate3D(q)),this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",x._stop(!0),q=q||x.transform.centerPoint,O&&(b.bearing+=O),L&&(b.pitch+=L),b._updateCameraState();const ue=[0,0,0];if(k)if(b.projection.name==="mercator"){const se=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q).dir),xe=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q.sub(k)).dir);ue[0]=xe[0]-se[0],ue[1]=xe[1]-se[1]}else{const se=b.pointCoordinate(q);if(b.projection.name==="globe"){k=k.rotate(-b.angle);const xe=b._pixelsPerMercatorPixel/b.worldSize;ue[0]=-k.x*a.mercatorScale(a.latFromMercatorY(se.y))*xe,ue[1]=-k.y*a.mercatorScale(b.center.lat)*xe}else{const xe=b.pointCoordinate(q.sub(k));se&&xe&&(ue[0]=xe.x-se.x,ue[1]=xe.y-se.y)}}const ce=b.zoom,pe=[0,0,0];if(I){const se=E(ne||b.pointCoordinate3D(q)),xe={dir:a.normalize([],a.sub([],se,b._camera.position))};if(xe.dir[2]<0){const ve=b.zoomDeltaToMovement(se,I);a.scale$2(pe,xe.dir,ve)}}const Z=a.add(ue,ue,pe);b._translateCameraConstrained(Z),I&&Math.abs(b.zoom-ce)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(u,g,!0)}_fireEvents(s,u,g){const x=uo(this._eventsInProgress),b=uo(s),E={};for(const L in s){const{originalEvent:q}=s[L];this._eventsInProgress[L]||(E[`${L}start`]=q),this._eventsInProgress[L]=s[L]}!x&&b&&this._fireEvent("movestart",b.originalEvent);for(const L in E)this._fireEvent(L,E[L]);b&&this._fireEvent("move",b.originalEvent);for(const L in s){const{originalEvent:q}=s[L];this._fireEvent(L,q)}const k={};let I;for(const L in this._eventsInProgress){const{handlerName:q,originalEvent:ne}=this._eventsInProgress[L];this._handlersById[q].isActive()||(delete this._eventsInProgress[L],I=u[q]||ne,k[`${L}end`]=I)}for(const L in k)this._fireEvent(L,k[L]);const O=uo(this._eventsInProgress);if(g&&(x||b)&&!O){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;L?(q(L.bearing||this._map.getBearing())&&(L.bearing=0),this._map.easeTo(L,{originalEvent:I})):(this._map.fire(new a.Event("moveend",{originalEvent:I})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,u){this._map.fire(new a.Event(s,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{this._frameId=void 0,this.handleEvent(new Em("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ia="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class td extends a.Evented{constructor(s,u){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=u.bearingSnap,this._respectPrefersReducedMotion=u.respectPrefersReducedMotion!==!1,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,u){return this.jumpTo({center:s},u)}panBy(s,u,g){return s=a.Point.convert(s).mult(-1),this.panTo(this.transform.center,a.extend({offset:s},u),g)}panTo(s,u,g){return this.easeTo(a.extend({center:s},u),g)}getZoom(){return this.transform.zoom}setZoom(s,u){return this.jumpTo({zoom:s},u),this}zoomTo(s,u,g){return this.easeTo(a.extend({zoom:s},u),g)}zoomIn(s,u){return this.zoomTo(this.getZoom()+1,s,u),this}zoomOut(s,u){return this.zoomTo(this.getZoom()-1,s,u),this}getBearing(){return this.transform.bearing}setBearing(s,u){return this.jumpTo({bearing:s},u),this}getPadding(){return this.transform.padding}setPadding(s,u){return this.jumpTo({padding:s},u),this}rotateTo(s,u,g){return this.easeTo(a.extend({bearing:s},u),g)}resetNorth(s,u){return this.rotateTo(0,a.extend({duration:1e3},s),u),this}resetNorthPitch(s,u){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},s),u),this}snapToNorth(s,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,u):this}getPitch(){return this.transform.pitch}setPitch(s,u){return this.jumpTo({pitch:s},u),this}cameraForBounds(s,u){s=a.LngLatBounds.convert(s);const g=u&&u.bearing||0,x=u&&u.pitch||0,b=s.getNorthWest(),E=s.getSouthEast();return this._cameraForBounds(this.transform,b,E,g,x,u)}_extendCameraOptions(s){const u={top:0,bottom:0,right:0,left:0};if(typeof(s=a.extend({padding:u,offset:[0,0],maxZoom:this.transform.maxZoom},s)).padding=="number"){const g=s.padding;s.padding={top:g,bottom:g,right:g,left:g}}return s.padding=a.extend(u,s.padding),s}_minimumAABBFrustumDistance(s,u){const g=u.max[0]-u.min[0],x=u.max[1]-u.min[1];return g/x>s.aspect?g/(2*Math.tan(.5*s.fovX)*s.aspect):x/(2*Math.tan(.5*s.fovY)*s.aspect)}_cameraForBoundsOnGlobe(s,u,g,x,b,E){const k=s.clone(),I=this._extendCameraOptions(E);k.bearing=x,k.pitch=b;const O=a.LngLat.convert(u),L=a.LngLat.convert(g),q=.5*(O.lat+L.lat),ne=.5*(O.lng+L.lng),ae=a.latLngToECEF(q,ne),ue=a.normalize([],ae),ce=a.normalize([],a.cross([],ue,[0,1,0])),pe=a.cross([],ce,ue),Z=[ce[0],ce[1],ce[2],0,pe[0],pe[1],pe[2],0,ue[0],ue[1],ue[2],0,0,0,0,1],se=[ae,a.latLngToECEF(O.lat,O.lng),a.latLngToECEF(L.lat,O.lng),a.latLngToECEF(L.lat,L.lng),a.latLngToECEF(O.lat,L.lng),a.latLngToECEF(q,O.lng),a.latLngToECEF(q,L.lng),a.latLngToECEF(O.lat,ne),a.latLngToECEF(L.lat,ne)];let xe=a.Aabb.fromPoints(se.map(wt=>[a.dot(ce,wt),a.dot(pe,wt),a.dot(ue,wt)]));const ve=a.transformMat4([],xe.center,Z);a.squaredLength(ve)===0&&a.set(ve,0,0,1),a.normalize(ve,ve),a.scale$2(ve,ve,a.GLOBE_RADIUS),k.center=a.ecefToLatLng(ve);const De=k.getWorldToCameraMatrix(),Re=a.invert(new Float64Array(16),De);xe=a.Aabb.applyTransform(xe,a.multiply([],De,Z)),a.transformMat4(ve,ve,De);const ze=.5*(xe.max[2]-xe.min[2]),Ue=this._minimumAABBFrustumDistance(k,xe),je=a.scale$2([],[0,0,1],ze),Ye=a.add(je,ve,je),kt=Ue+(k.pitch===0?0:a.distance(ve,Ye)),qe=k.globeCenterInViewSpace,ft=a.sub([],ve,[qe[0],qe[1],qe[2]]);a.normalize(ft,ft),a.scale$2(ft,ft,kt);const et=a.add([],ve,ft);a.transformMat4(et,et,Re);const Et=a.earthRadius/a.GLOBE_RADIUS,Xe=a.length(et),pt=a.mercatorZfromAltitude(Math.max(Xe*Et-a.earthRadius,Number.EPSILON),0),It=Math.min(k.zoomFromMercatorZAdjusted(pt),I.maxZoom);return It>.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"mercator"}),k.zoom=It,this._cameraForBounds(k,u,g,x,b,E)):{center:k.center,zoom:It,bearing:x,pitch:b}}queryTerrainElevation(s,u){const g=this.transform.elevation;return g?(u=a.extend({},{exaggerated:!0},u),g.getAtPoint(a.MercatorCoordinate.fromLngLat(s),null,u.exaggerated)):null}_cameraForBounds(s,u,g,x,b,E){if(s.projection.name==="globe")return this._cameraForBoundsOnGlobe(s,u,g,x,b,E);const k=s.clone(),I=this._extendCameraOptions(E),O=k.padding;k.bearing=x,k.pitch=b;const L=a.LngLat.convert(u),q=a.LngLat.convert(g),ne=new a.LngLat(L.lng,q.lat),ae=new a.LngLat(q.lng,L.lat),ue=k.project(L),ce=k.project(q),pe=this.queryTerrainElevation(L),Z=this.queryTerrainElevation(q),se=this.queryTerrainElevation(ne),xe=this.queryTerrainElevation(ae),ve=[[ue.x,ue.y,Math.min(pe||0,Z||0,se||0,xe||0)],[ce.x,ce.y,Math.max(pe||0,Z||0,se||0,xe||0)]];let De=a.Aabb.fromPoints(ve);const Re=k.getWorldToCameraMatrix(),ze=a.invert(new Float64Array(16),Re);De=a.Aabb.applyTransform(De,Re);const Ue=a.sub([],De.max,De.min),je=O.left||0,Ye=O.right||0,kt=O.bottom||0,qe=O.top||0,{left:ft,right:et,top:Et,bottom:Xe}=I.padding,pt=.5*(je+Ye),It=.5*(qe+kt),wt=Math.min(k.scaleZoom(k.scale*Math.min((k.width-(je+Ye+ft+et))/Ue[0],(k.height-(kt+qe+Xe+Et))/Ue[1])),I.maxZoom),At=k.scale/k.zoomScale(wt);De=new a.Aabb([De.min[0]-(ft+pt)*At,De.min[1]-(Xe+It)*At,De.min[2]],[De.max[0]+(et+pt)*At,De.max[1]+(Et+It)*At,De.max[2]]);const hn=.5*Ue[2],Mn=this._minimumAABBFrustumDistance(k,De),nn=[0,0,1,0];a.transformMat4$1(nn,nn,Re),a.normalize$2(nn,nn);const bn=a.scale$2([],nn,Mn+hn),Wn=a.add([],De.center,bn),jn=(typeof I.offset.x=="number"&&typeof I.offset.y=="number"?new a.Point(I.offset.x,I.offset.y):a.Point.convert(I.offset)).rotate(-a.degToRad(x));De.center[0]-=jn.x*At,De.center[1]+=jn.y*At,a.transformMat4(De.center,De.center,ze),a.transformMat4(Wn,Wn,ze);const ln=[De.center[0],De.center[1],Wn[2]*k.pixelsPerMeter];a.scale$2(ln,ln,1/k.worldSize);const ir=a.lngFromMercatorX(ln[0]),lr=a.latFromMercatorY(ln[1]),cr=Math.min(k._zoomFromMercatorZ(ln[2]),I.maxZoom),ur=new a.LngLat(ir,lr);return k.mercatorFromTransition&&cr<.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(k.setProjection({name:"globe"}),k.zoom=cr,this._cameraForBounds(k,u,g,x,b,E)):{center:ur,zoom:cr,bearing:x,pitch:b}}fitBounds(s,u,g){const x=this.cameraForBounds(s,u);return this._fitInternal(x,u,g)}fitScreenCoordinates(s,u,g,x,b){const E=a.Point.convert(s),k=a.Point.convert(u),I=new a.Point(Math.min(E.x,k.x),Math.min(E.y,k.y)),O=new a.Point(Math.max(E.x,k.x),Math.max(E.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(E,k))return this;const L=this.transform.pointLocation3D(I),q=this.transform.pointLocation3D(O),ne=this.transform.pointLocation3D(new a.Point(I.x,O.y)),ae=this.transform.pointLocation3D(new a.Point(O.x,I.y)),ue=[Math.min(L.lng,q.lng,ne.lng,ae.lng),Math.min(L.lat,q.lat,ne.lat,ae.lat)],ce=[Math.max(L.lng,q.lng,ne.lng,ae.lng),Math.max(L.lat,q.lat,ne.lat,ae.lat)],pe=x&&x.pitch?x.pitch:this.getPitch(),Z=this._cameraForBounds(this.transform,ue,ce,g,pe,x);return this._fitInternal(Z,x,b)}_fitInternal(s,u,g){return s?(delete(u=a.extend(s,u)).padding,u.linear?this.easeTo(u,g):this.flyTo(u,g)):this}jumpTo(s,u){this.stop();const g=s.preloadOnly?this.transform.clone():this.transform;let x=!1,b=!1,E=!1;return"zoom"in s&&g.zoom!==+s.zoom&&(x=!0,g.zoom=+s.zoom),s.center!==void 0&&(g.center=a.LngLat.convert(s.center)),"bearing"in s&&g.bearing!==+s.bearing&&(b=!0,g.bearing=+s.bearing),"pitch"in s&&g.pitch!==+s.pitch&&(E=!0,g.pitch=+s.pitch),s.padding==null||g.isPaddingEqual(s.padding)||(g.padding=s.padding),s.preloadOnly?(this._preloadTiles(g),this):(this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),x&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),b&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),E&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.warnOnce(Ia),this.transform.getFreeCameraOptions()}setFreeCameraOptions(s,u){const g=this.transform;if(!g.projection.supportsFreeCamera)return a.warnOnce(Ia),this;this.stop();const x=g.zoom,b=g.pitch,E=g.bearing;g.setFreeCameraOptions(s);const k=x!==g.zoom,I=b!==g.pitch,O=E!==g.bearing;return this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),k&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),O&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),I&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u)),this}easeTo(s,u){this._stop(!1,s.easeId),((s=a.extend({offset:[0,0],duration:500,easing:a.ease},s)).animate===!1||this._prefersReducedMotion(s))&&(s.duration=0);const g=this.transform,x=this.getZoom(),b=this.getBearing(),E=this.getPitch(),k=this.getPadding(),I="zoom"in s?+s.zoom:x,O="bearing"in s?this._normalizeBearing(s.bearing,b):b,L="pitch"in s?+s.pitch:E,q="padding"in s?s.padding:g.padding,ne=a.Point.convert(s.offset);let ae,ue,ce;if(g.projection.name==="globe"){const je=a.MercatorCoordinate.fromLngLat(g.center),Ye=ne.rotate(-g.angle);je.x+=Ye.x/g.worldSize,je.y+=Ye.y/g.worldSize;const kt=je.toLngLat(),qe=a.LngLat.convert(s.center||kt);this._normalizeCenter(qe),ae=g.centerPoint.add(Ye),ue=new a.Point(je.x,je.y).mult(g.worldSize),ce=new a.Point(a.mercatorXfromLng(qe.lng),a.mercatorYfromLat(qe.lat)).mult(g.worldSize).sub(ue)}else{ae=g.centerPoint.add(ne);const je=g.pointLocation(ae),Ye=a.LngLat.convert(s.center||je);this._normalizeCenter(Ye),ue=g.project(je),ce=g.project(Ye).sub(ue)}const pe=g.zoomScale(I-x);let Z,se;s.around&&(Z=a.LngLat.convert(s.around),se=g.locationPoint(Z));const xe=this._zooming||I!==x,ve=this._rotating||b!==O,De=this._pitching||L!==E,Re=!g.isPaddingEqual(q),ze=je=>Ye=>{if(xe&&(je.zoom=a.number(x,I,Ye)),ve&&(je.bearing=a.number(b,O,Ye)),De&&(je.pitch=a.number(E,L,Ye)),Re&&(je.interpolatePadding(k,q,Ye),ae=je.centerPoint.add(ne)),Z)je.setLocationAtPoint(Z,se);else{const kt=je.zoomScale(je.zoom-x),qe=I>x?Math.min(2,pe):Math.max(.5,pe),ft=Math.pow(qe,1-Ye),et=je.unproject(ue.add(ce.mult(Ye*ft)).mult(kt));je.setLocationAtPoint(je.renderWorldCopies?et.wrap():et,ae)}return s.preloadOnly||this._fireMoveEvents(u),je};if(s.preloadOnly){const je=this._emulate(ze,s.duration,g);return this._preloadTiles(je),this}const Ue={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=xe,this._rotating=ve,this._pitching=De,this._padding=Re,this._easeId=s.easeId,this._prepareEase(u,s.noMoveStart,Ue),this._ease(ze(g),je=>{g.recenterOnTerrain(),this._afterEase(u,je)},s),this}_prepareEase(s,u,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",u||g.moving||this.fire(new a.Event("movestart",s)),this._zooming&&!g.zooming&&this.fire(new a.Event("zoomstart",s)),this._rotating&&!g.rotating&&this.fire(new a.Event("rotatestart",s)),this._pitching&&!g.pitching&&this.fire(new a.Event("pitchstart",s))}_fireMoveEvents(s){this.fire(new a.Event("move",s)),this._zooming&&this.fire(new a.Event("zoom",s)),this._rotating&&this.fire(new a.Event("rotate",s)),this._pitching&&this.fire(new a.Event("pitch",s))}_afterEase(s,u){if(this._easeId&&u&&this._easeId===u)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,x=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new a.Event("zoomend",s)),x&&this.fire(new a.Event("rotateend",s)),b&&this.fire(new a.Event("pitchend",s)),this.fire(new a.Event("moveend",s))}flyTo(s,u){if(this._prefersReducedMotion(s)){const wt=a.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(wt,u)}this.stop(),s=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},s);const g=this.transform,x=this.getZoom(),b=this.getBearing(),E=this.getPitch(),k=this.getPadding(),I="zoom"in s?a.clamp(+s.zoom,g.minZoom,g.maxZoom):x,O="bearing"in s?this._normalizeBearing(s.bearing,b):b,L="pitch"in s?+s.pitch:E,q="padding"in s?s.padding:g.padding,ne=g.zoomScale(I-x),ae=a.Point.convert(s.offset);let ue=g.centerPoint.add(ae);const ce=g.pointLocation(ue),pe=a.LngLat.convert(s.center||ce);this._normalizeCenter(pe);const Z=g.project(ce),se=g.project(pe).sub(Z);let xe=s.curve;const ve=Math.max(g.width,g.height),De=ve/ne,Re=se.mag();if("minZoom"in s){const wt=a.clamp(Math.min(s.minZoom,x,I),g.minZoom,g.maxZoom),At=ve/g.zoomScale(wt-x);xe=Math.sqrt(At/Re*2)}const ze=xe*xe;function Ue(wt){const At=(De*De-ve*ve+(wt?-1:1)*ze*ze*Re*Re)/(2*(wt?De:ve)*ze*Re);return Math.log(Math.sqrt(At*At+1)-At)}function je(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function Ye(wt){return(Math.exp(wt)+Math.exp(-wt))/2}const kt=Ue(0);let qe=function(wt){return Ye(kt)/Ye(kt+xe*wt)},ft=function(wt){return ve*((Ye(kt)*(je(At=kt+xe*wt)/Ye(At))-je(kt))/ze)/Re;var At},et=(Ue(1)-kt)/xe;if(Math.abs(Re)<1e-6||!isFinite(et)){if(Math.abs(ve-De)<1e-6)return this.easeTo(s,u);const wt=De<ve?-1:1;et=Math.abs(Math.log(De/ve))/xe,ft=function(){return 0},qe=function(At){return Math.exp(wt*xe*At)}}s.duration="duration"in s?+s.duration:1e3*et/("screenSpeed"in s?+s.screenSpeed/xe:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0);const Et=b!==O,Xe=L!==E,pt=!g.isPaddingEqual(q),It=wt=>At=>{const hn=At*et,Mn=1/qe(hn);wt.zoom=At===1?I:x+wt.scaleZoom(Mn),Et&&(wt.bearing=a.number(b,O,At)),Xe&&(wt.pitch=a.number(E,L,At)),pt&&(wt.interpolatePadding(k,q,At),ue=wt.centerPoint.add(ae));const nn=At===1?pe:wt.unproject(Z.add(se.mult(ft(hn))).mult(Mn));return wt.setLocationAtPoint(wt.renderWorldCopies?nn.wrap():nn,ue),wt._updateCameraOnTerrain(),s.preloadOnly||this._fireMoveEvents(u),wt};if(s.preloadOnly){const wt=this._emulate(It,s.duration,g);return this._preloadTiles(wt),this}return this._zooming=!0,this._rotating=Et,this._pitching=Xe,this._padding=pt,this._prepareEase(u,!1),this._ease(It(g),()=>this._afterEase(u),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,u)}if(!s){const g=this.handlers;g&&g.stop(!1)}return this}_ease(s,u,g){g.animate===!1||g.duration===0?(s(1),u()):(this._easeStart=a.exported.now(),this._easeOptions=g,this._onEaseFrame=s,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1),u=this._onEaseFrame;u&&u(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,u){s=a.wrap(s,-180,180);const g=Math.abs(s-u);return Math.abs(s-360-u)<g&&(s-=360),Math.abs(s+360-u)<g&&(s+=360),s}_normalizeCenter(s){const u=this.transform;if(!u.renderWorldCopies||u.maxBounds)return;const g=s.lng-u.center.lng;s.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(s){return this._respectPrefersReducedMotion&&a.exported.prefersReducedMotion&&!(s&&s.essential)}_emulate(s,u,g){const x=Math.ceil(15*u/1e3),b=[],E=s(g.clone());for(let k=0;k<=x;k++){const I=E(k/x);b.push(I.clone())}return b}}class Qt{constructor(s={}){this.options=s,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){const u=this.options&&this.options.compact;return this._map=s,this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=R("button","mapboxgl-ctrl-attrib-button",this._container),R("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),u===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(s,u){const g=this._map._getUIString(`AttributionControl.${u}`);s.setAttribute("aria-label",g),s.removeAttribute("title"),s.firstElementChild&&s.firstElementChild.setAttribute("title",g)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let s=this._editLink;s||(s=this._editLink=this._container.querySelector(".mapbox-improve-map"));const u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(s){const g=u.reduce((x,b,E)=>(b.value&&(x+=`${b.key}=${b.value}${E<u.length-1?"&":""}`),x),"?");s.href=`${a.config.FEEDBACK_URL}/${g}#${Ec(this._map,!0)}`,s.rel="noopener nofollow",this._setElementTitle(s,"MapFeedback")}}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let s=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const u=this._map.style._sourceCaches;for(const x in u){const b=u[x];if(b.used){const E=b.getSource();E.attribution&&s.indexOf(E.attribution)<0&&s.push(E.attribution)}}s.sort((x,b)=>x.length-b.length),s=s.filter((x,b)=>{for(let E=b+1;E<s.length;E++)if(s[E].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=[...this.options.customAttribution,...s]:s.unshift(this.options.customAttribution));const g=s.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,s.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class vp{constructor(){a.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(s){this._map=s,this._container=R("div","mapboxgl-ctrl");const u=R("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(s){s&&s.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const s=this._map.style._sourceCaches;if(Object.entries(s).length===0)return!0;for(const u in s){const g=s[u].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const s=this._container.children;if(s.length){const u=s[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}}}class bp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const u=++this._id;return this._queue.push({callback:s,id:u,cancelled:!1}),u}remove(s){const u=this._currentlyRunning,g=u?this._queue.concat(u):this._queue;for(const x of g)if(x.id===s)return void(x.cancelled=!0)}run(s=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const g of u)if(!g.cancelled&&(g.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function bl(f,s,u){if(f=new a.LngLat(f.lng,f.lat),s){const g=new a.LngLat(f.lng-360,f.lat),x=new a.LngLat(f.lng+360,f.lat),b=360*Math.ceil(Math.abs(f.lng-u.center.lng)/360),E=u.locationPoint(f).distSqr(s),k=s.x<0||s.y<0||s.x>u.width||s.y>u.height;u.locationPoint(g).distSqr(s)<E&&(k||Math.abs(g.lng-u.center.lng)<b)?f=g:u.locationPoint(x).distSqr(s)<E&&(k||Math.abs(x.lng-u.center.lng)<b)&&(f=x)}for(;Math.abs(f.lng-u.center.lng)>180;){const g=u.locationPoint(f);if(g.x>=0&&g.y>=0&&g.x<=u.width&&g.y<=u.height)break;f.lng>u.center.lng?f.lng-=360:f.lng+=360}return f}const Aa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Xt extends a.Evented{constructor(s,u){if(super(),(s instanceof a.window.HTMLElement||u)&&(s=a.extend({element:s},u)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=s&&s.occludedOpacity||.2,s&&s.element)this._element=s.element,this._offset=a.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=R("div");const x=41,b=27,E=$("svg",{display:"block",height:x*this._scale+"px",width:b*this._scale+"px",viewBox:`0 0 ${b} ${x}`},this._element),k=$("radialGradient",{id:"shadowGradient"},$("defs",{},E));$("stop",{offset:"10%","stop-opacity":.4},k),$("stop",{offset:"100%","stop-opacity":.05},k),$("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},E),$("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},E),$("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},E),$("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},E),this._offset=a.Point.convert(s&&s.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const g=this._element.classList;for(const x in Aa)g.remove(`mapboxgl-marker-anchor-${x}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(s){return s===this._map||(this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._updateMoving),s.on("moveend",this._update),s.on("remove",this._clearFadeTimer),s._addMarker(this),this.setDraggable(this._draggable),this._update(),s.on("click",this._onMapClick)),this}remove(){const s=this._map;return s&&(s.off("click",this._onMapClick),s.off("move",this._updateMoving),s.off("moveend",this._update),s.off("mousedown",this._addDragHandler),s.off("touchstart",this._addDragHandler),s.off("mouseup",this._onUp),s.off("touchend",this._onUp),s.off("mousemove",this._onMove),s.off("touchmove",this._onMove),s.off("remove",this._clearFadeTimer),s._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,s._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(s){const u=s.code,g=s.charCode||s.keyCode;u!=="Space"&&u!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(s){const u=s.originalEvent.target,g=this._element;this._popup&&(u===g||g.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?(s.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(s.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const s=this._map,u=this._pos;if(!s||!u)return!1;const g=s.unproject(u),x=s.getFreeCameraOptions();if(!x.position)return!1;const b=x.position.toLngLat();return b.distanceTo(g)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const s=this._map;if(!s)return;const u=this._pos;if(!u||u.x<0||u.x>s.transform.width||u.y<0||u.y>s.transform.height)return void this._clearFadeTimer();const g=s.unproject(u);let x;s._showingGlobe()&&a.isLngLatBehindGlobe(s.transform,this._lngLat)?x=0:(x=1-s._queryFogOpacity(g),s.transform._terrainEnabled()&&s.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const s=this._pos;if(!s||!this._map)return;const u=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${s.x}px,${s.y}px)
            ${Aa[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${u.x}px,${u.y}px)
        `}_calculateXYTransform(){const s=this._pos,u=this._map,g=this.getPitchAlignment();if(!u||!s||g!=="map")return"";if(!u._showingGlobe()){const I=u.getPitch();return I?`rotateX(${I}deg)`:""}const x=a.radToDeg(a.globeTiltAtLngLat(u.transform,this._lngLat)),b=s.sub(a.globeCenterToScreenPoint(u.transform)),E=Math.abs(b.x)+Math.abs(b.y);if(E===0)return"";const k=x/E;return`rotateX(${-b.y*k}deg) rotateY(${b.x*k}deg)`}_calculateZTransform(){const s=this._pos,u=this._map;if(!u||!s)return"";let g=0;const x=this.getRotationAlignment();if(x==="map")if(u._showingGlobe()){const b=u.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),E=u.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);g=a.radToDeg(Math.atan2(E.y,E.x))-90}else g=-u.getBearing();else if(x==="horizon"){const b=a.smoothstep(4,6,u.getZoom()),E=a.globeCenterToScreenPoint(u.transform);E.y+=b*u.transform.height;const k=s.sub(E),I=a.radToDeg(Math.atan2(k.y,k.x));g=(I>90?I-270:I+90)*(1-b)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(s){a.window.cancelAnimationFrame(this._updateFrameId);const u=this._map;u&&(u.transform.renderWorldCopies&&(this._lngLat=bl(this._lngLat,this._pos,u.transform)),this._pos=u.project(this._lngLat),s===!0?this._updateFrameId=a.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),u._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(u._showingGlobe()||u.getTerrain()||u.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(s){return this._offset=a.Point.convert(s),this._update(),this}_onMove(s){const u=this._map;if(!u)return;const g=this._pointerdownPos,x=this._positionDelta;if(g&&x){if(!this._isDragging){const b=this._clickTolerance||u._clickTolerance;if(s.point.dist(g)<b)return;this._isDragging=!0}this._pos=s.point.sub(x),this._lngLat=u.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const s=this._map;s&&(s.off("mousemove",this._onMove),s.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(s){const u=this._map,g=this._pos;u&&g&&this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(g),this._pointerdownPos=s.point,this._state="pending",u.on("mousemove",this._onMove),u.on("touchmove",this._onMove),u.once("mouseup",this._onUp),u.once("touchend",this._onUp))}setDraggable(s){this._draggable=!!s;const u=this._map;return u&&(s?(u.on("mousedown",this._addDragHandler),u.on("touchstart",this._addDragHandler)):(u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(s){return this._occludedOpacity=s||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const wp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},I_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function km(f=new a.Point(0,0),s="bottom"){if(typeof f=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(s){case"top":return new a.Point(0,f);case"top-left":return new a.Point(u,u);case"top-right":return new a.Point(-u,u);case"bottom":return new a.Point(0,-f);case"bottom-left":return new a.Point(u,-u);case"bottom-right":return new a.Point(-u,-u);case"left":return new a.Point(f,0);case"right":return new a.Point(-f,0)}return new a.Point(0,0)}return f instanceof a.Point||Array.isArray(f)?a.Point.convert(f):a.Point.convert(f[s]||[0,0])}class Sp{constructor(s){this.jumpTo(s)}getValue(s){if(s<=this._startTime)return this._start;if(s>=this._endTime)return this._end;const u=a.easeCubicInOut((s-this._startTime)/(this._endTime-this._startTime));return this._start*(1-u)+this._end*u}isEasing(s){return s>=this._startTime&&s<=this._endTime}jumpTo(s){this._startTime=-1/0,this._endTime=-1/0,this._start=s,this._end=s}easeTo(s,u,g){this._start=this.getValue(u),this._end=s,this._startTime=u,this._endTime=u+g}}const Pm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Mm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},A_={showCompass:!0,showZoom:!0,visualizePitch:!1};class D_{constructor(s,u,g=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new mp({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,g&&(this.mousePitch=new gp({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener("mousedown",this.mousedown),u.addEventListener("touchstart",this.touchstart,{passive:!1}),u.addEventListener("touchmove",this.touchmove),u.addEventListener("touchend",this.touchend),u.addEventListener("touchcancel",this.reset)}down(s,u){this.mouseRotate.mousedown(s,u),this.mousePitch&&this.mousePitch.mousedown(s,u),j()}move(s,u){const g=this.map,x=this.mouseRotate.mousemoveWindow(s,u),b=x&&x.bearingDelta;if(b&&g.setBearing(g.getBearing()+b),this.mousePitch){const E=this.mousePitch.mousemoveWindow(s,u),k=E&&E.pitchDelta;k&&g.setPitch(g.getPitch()+k)}}off(){const s=this.element;s.removeEventListener("mousedown",this.mousedown),s.removeEventListener("touchstart",this.touchstart,{passive:!1}),s.removeEventListener("touchmove",this.touchmove),s.removeEventListener("touchend",this.touchend),s.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){N(),a.window.removeEventListener("mousemove",this.mousemove),a.window.removeEventListener("mouseup",this.mouseup)}mousedown(s){this.down(a.extend({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),K(this.element,s)),a.window.addEventListener("mousemove",this.mousemove),a.window.addEventListener("mouseup",this.mouseup)}mousemove(s){this.move(s,K(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=oe(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=oe(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Tp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Cp={maxWidth:100,unit:"metric"},Ep={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},wl={version:a.version,supported:C,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends td{constructor(f){if(a.LivePerformanceUtils.mark(a.PerformanceMarkers.create),(f=a.extend({},Mm,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&a.isSafariWithAntialiasingBug(a.window)&&(f.antialias=!1,a.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new yl(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._useWebGL2=f.useWebGL2,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._language=this._parseLanguage(f.language),this._worldview=f.worldview,this._renderTaskQueue=new bp,this._domRenderTaskQueue=new bp,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Pm,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._performanceMetricsCollection=f.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Sp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new a.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,typeof f.container=="string"){if(this._container=a.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof a.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&a.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1),a.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Jo(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new dp(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,a.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new Qt({customAttribution:f.customAttribution})),this._logoControl=new vp,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new a.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new a.Event(`${s.dataType}dataloading`,s))})}_getMapId(){return this._mapId}addControl(f,s){if(s===void 0&&(s=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=f.onAdd(this);this._controls.push(f);const g=this._controlPositions[s];return s.indexOf("bottom")!==-1?g.insertBefore(u,g.firstChild):g.appendChild(u),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(f);return s>-1&&this._controls.splice(s,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const s=!this._moving;return s&&this.fire(new a.Event("movestart",f)).fire(new a.Event("move",f)),this.fire(new a.Event("resize",f)),s&&this.fire(new a.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(a.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(f){return f==="auto"?a.window.navigator.language:Array.isArray(f)?f.length===0?void 0:f.map(s=>s==="auto"?a.window.navigator.language:s):f}setLanguage(f){const s=this._parseLanguage(f);if(!this.style||s===this._language)return this;this._language=s,this.style._reloadSources();for(const u of this._controls)u._setLanguage&&u._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(f){return this.style&&f!==this._worldview?(this._worldview=f,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(f){return this._lazyInitEmptyStyle(),f?typeof f=="string"&&(f={name:f}):f=null,this._useExplicitProjection=!!f,this._prioritizeAndUpdateProjection(f,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const f=this.transform,s=f.projection.name;let u;s==="globe"&&f.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?(f.setMercatorFromTransition(),u=!0):s==="mercator"&&f.zoom<a.GLOBE_ZOOM_THRESHOLD_MAX&&(f.setProjection({name:"globe"}),u=!0),u&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(f,s){return this._updateProjection(f||s||{name:"mercator"})}_updateProjection(f){let s;if(s=f.name==="globe"&&this.transform.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(f),this.style.applyProjectionUpdate(),s){this.painter.clearBackgroundTiles();for(const u in this.style._sourceCaches)this.style._sourceCaches[u].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(f){return this.transform.locationPoint3D(a.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(a.Point.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(f,s,u){if(f==="mouseenter"||f==="mouseover"){let g=!1;const x=E=>{const k=s.filter(O=>this.getLayer(O)),I=k.length?this.queryRenderedFeatures(E.point,{layers:k}):[];I.length?g||(g=!0,u.call(this,new fi(f,this,E.originalEvent,{features:I}))):g=!1},b=()=>{g=!1};return{layers:new Set(s),listener:u,delegates:{mousemove:x,mouseout:b}}}if(f==="mouseleave"||f==="mouseout"){let g=!1;const x=E=>{const k=s.filter(I=>this.getLayer(I));(k.length?this.queryRenderedFeatures(E.point,{layers:k}):[]).length?g=!0:g&&(g=!1,u.call(this,new fi(f,this,E.originalEvent)))},b=E=>{g&&(g=!1,u.call(this,new fi(f,this,E.originalEvent)))};return{layers:new Set(s),listener:u,delegates:{mousemove:x,mouseout:b}}}{const g=x=>{const b=s.filter(k=>this.getLayer(k)),E=b.length?this.queryRenderedFeatures(x.point,{layers:b}):[];E.length&&(x.features=E,u.call(this,x),delete x.features)};return{layers:new Set(s),listener:u,delegates:{[f]:g}}}}on(f,s,u){if(u===void 0)return super.on(f,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(f,s,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(g);for(const x in g.delegates)this.on(x,g.delegates[x]);return this}once(f,s,u){if(u===void 0)return super.once(f,s);Array.isArray(s)||(s=[s]);const g=this._createDelegatedListener(f,s,u);for(const x in g.delegates)this.once(x,g.delegates[x]);return this}off(f,s,u){if(u===void 0)return super.off(f,s);s=new Set(Array.isArray(s)?s:[s]);const g=(b,E)=>{if(b.size!==E.size)return!1;for(const k of b)if(!E.has(k))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[f]:void 0;return x&&(b=>{for(let E=0;E<b.length;E++){const k=b[E];if(k.listener===u&&g(k.layers,s)){for(const I in k.delegates)this.off(I,k.delegates[I]);return b.splice(E,1),this}}})(x),this}queryRenderedFeatures(f,s){return this.style?(s!==void 0||f===void 0||f instanceof a.Point||Array.isArray(f)||(s=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],s=s||{},this.transform)):[]}querySourceFeatures(f,s){return this.style.querySourceFeatures(f,s)}isPointOnSurface(f){const{name:s}=this.transform.projection;return s!=="globe"&&s!=="mercator"&&a.warnOnce(`${s} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.Point.convert(f))}setStyle(f,s){return(s=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&s.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._localFontFamily=s.localFontFamily,this._updateStyle(f,s))}_getUIString(f){const s=this._locale[f];if(s==null)throw new Error(`Missing UI string '${f}'`);return s}_updateStyle(f,s){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new Yo(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Yo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,s){if(typeof f=="string"){const u=this._requestManager.normalizeStyleURL(f),g=this._requestManager.transformRequest(u,a.ResourceType.Style);a.getJSON(g,(x,b)=>{x?this.fire(new a.ErrorEvent(x)):b&&this._updateDiff(b,s)})}else typeof f=="object"&&this._updateDiff(f,s)}_updateDiff(f,s){try{this.style.setState(f)&&this._update(!0)}catch(u){a.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(f,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.warnOnce("There is no style added to the map."),!1)}addSource(f,s){return this._lazyInitEmptyStyle(),this.style.addSource(f,s),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const s in f){const u=f[s]._tiles;for(const g in u){const x=u[g];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}addSourceType(f,s,u){this._lazyInitEmptyStyle(),this.style.addSourceType(f,s,u)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,s,{pixelRatio:u=1,sdf:g=!1,stretchX:x,stretchY:b,content:E}={}){if(this._lazyInitEmptyStyle(),s instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&s instanceof a.window.ImageBitmap){const{width:k,height:I,data:O}=a.exported.getImageData(s);this.style.addImage(f,{data:new a.RGBAImage({width:k,height:I},O),pixelRatio:u,stretchX:x,stretchY:b,content:E,sdf:g,version:0})}else if(s.width===void 0||s.height===void 0)this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:k,height:I}=s,O=s;this.style.addImage(f,{data:new a.RGBAImage({width:k,height:I},new Uint8Array(O.data)),pixelRatio:u,stretchX:x,stretchY:b,content:E,sdf:g,version:0,userImage:O}),O.onAdd&&O.onAdd(this,f)}}updateImage(f,s){const u=this.style.getImage(f);if(!u)return void this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=s instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&s instanceof a.window.ImageBitmap?a.exported.getImageData(s):s,{width:x,height:b}=g;x!==void 0&&b!==void 0?x===u.data.width&&b===u.data.height?(u.data.replace(g.data,!(s instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&s instanceof a.window.ImageBitmap)),this.style.updateImage(f,u)):this.fire(new a.ErrorEvent(new Error(`The width and height of the updated image (${x}, ${b})
                must be that same as the previous version of the image
                (${u.data.width}, ${u.data.height})`))):this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,s){a.getImage(this._requestManager.transformRequest(f,a.ResourceType.Image),(u,g)=>{s(u,g instanceof a.window.HTMLImageElement?a.exported.getImageData(g):g)})}listImages(){return this.style.listImages()}addLayer(f,s){return this._lazyInitEmptyStyle(),this.style.addLayer(f,s),this._update(!0)}moveLayer(f,s){return this.style.moveLayer(f,s),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,s,u){return this.style.setLayerZoomRange(f,s,u),this._update(!0)}setFilter(f,s,u={}){return this.style.setFilter(f,s,u),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,s,u,g={}){return this.style.setPaintProperty(f,s,u,g),this._update(!0)}getPaintProperty(f,s){return this.style.getPaintProperty(f,s)}setLayoutProperty(f,s,u,g={}){return this.style.setLayoutProperty(f,s,u,g),this._update(!0)}getLayoutProperty(f,s){return this.style.getLayoutProperty(f,s)}setLight(f,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,s),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.LngLat.convert(f),this.transform):0}setFeatureState(f,s){return this.style.setFeatureState(f,s),this._update()}removeFeatureState(f,s){return this.style.removeFeatureState(f,s),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,s=this._container.getBoundingClientRect().height||300;let u,g,x,b=this._container;for(;b&&(!g||!x);){const E=a.window.getComputedStyle(b).transform;E&&E!=="none"&&(u=E.match(/matrix.*\((.+)\)/)[1].split(", "),u[0]&&u[0]!=="0"&&u[0]!=="1"&&(g=u[0]),u[3]&&u[3]!=="0"&&u[3]!=="1"&&(x=u[3])),b=b.parentElement}this._containerWidth=g?Math.abs(f/g):f,this._containerHeight=x?Math.abs(s/x):s}_detectMissingCSS(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=R("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const s=this._canvasContainer=R("div","mapboxgl-canvas-container",f);this._interactive&&s.classList.add("mapboxgl-interactive"),this._canvas=R("canvas","mapboxgl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const u=this._controlContainer=R("div","mapboxgl-control-container",f),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{g[x]=R("div",`mapboxgl-ctrl-${x}`,u)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,s){const u=a.exported.devicePixelRatio||1;this._canvas.width=u*Math.ceil(f),this._canvas.height=u*Math.ceil(s),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${s}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const s=this._markers.indexOf(f);s!==-1&&this._markers.splice(s,1)}_addPopup(f){this._popups.push(f)}_removePopup(f){const s=this._popups.indexOf(f);s!==-1&&this._popups.splice(s,1)}_setupPainter(){const f=a.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._useWebGL2&&this._canvas.getContext("webgl2",f),u=s||this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);u?(this._useWebGL2&&!s&&a.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),a.storeAuthState(u,!0),this.painter=new ml(u,this.transform,!!s),this.on("data",g=>{g.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),a.exported$1.testSupport(u)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let s;const u=this.painter.context.extTimerQuery,g=a.exported.now();if(this.listens("gpu-timing-frame")&&(s=u.createQueryEXT(),u.beginQueryEXT(u.TIME_ELAPSED_EXT,s)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],a.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],a.window.performance.now())),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,I=this.transform.pitch,O=a.exported.now(),L=new a.EvaluationParameters(k,{now:O,fadeDuration:x,pitch:I,transition:this.style.getTransition()});this.style.update(L)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let b=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),b=this._updateAverageElevation(g),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):b=this._updateAverageElevation(g),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),s){const k=a.exported.now()-g;u.endQueryEXT(u.TIME_ELAPSED_EXT,s),setTimeout(()=>{const I=u.getQueryObjectEXT(s,u.QUERY_RESULT_EXT)/1e6;u.deleteQueryEXT(s),this.fire(new a.Event("gpu-timing-frame",{cpuTime:k,gpuTime:I})),a.window.performance.mark("frame-gpu",{startTime:g,detail:{gpuTime:I}})},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const I=this.painter.queryGpuTimers(k);this.fire(new a.Event("gpu-timing-layer",{layerTimes:I}))},50)}if(this.listens("gpu-timing-deferred-render")){const k=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const I=this.painter.queryGpuTimeDeferredRender(k);this.fire(new a.Event("gpu-timing-deferred-render",{gpuTime:I}))},50)}const E=this._sourcesDirty||this._styleDirty||this._placementDirty||b;if(E||this._repaint)this.triggerRepaint();else{const k=!this.isMoving()&&this.loaded();if(k&&(b=this._updateAverageElevation(g,!0)),b)this.triggerRepaint();else if(this._triggerFrame(!1),k&&(this.fire(new a.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const I=this._calculateSpeedIndex();this.fire(new a.Event("speedindexcompleted",{speedIndex:I})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||E||(this._fullyLoaded=!0,a.LivePerformanceUtils.mark(a.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&a.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(f){for(const s of this._markers)f&&!this.getRenderWorldCopies()&&(s._lngLat=s._lngLat.wrap()),s._update();for(const s of this._popups)!f||this.getRenderWorldCopies()||s._trackPointer||(s._lngLat=s._lngLat.wrap()),s._update()}_updateAverageElevation(f,s=!1){const u=g=>(this.transform.averageElevation=g,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&u(0);if((s||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const g=this.transform.averageElevation;let x=this.transform.sampleAverageElevation(),b=!1;this.transform.elevation&&(b=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=f;const E=Math.abs(g-x);if(E>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(x),u(x);this._averageElevation.easeTo(x,f,300)}else if(E>1e-4)return this._averageElevation.jumpTo(x),u(x)}return!!this._averageElevation.isEasing(f)&&u(this._averageElevation.getValue(f))}_authenticate(){a.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===a.AUTH_ERR_MSG||f.status===401)){const s=this.painter.context.gl;a.storeAuthState(s,!1),this._logoControl instanceof vp&&this._logoControl._updateLogo(),s&&s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),a.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const f=this._isDragging();this.painter.updateTerrain(this.style,f)}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),s=this.painter.getCanvasCopiesAndTimestamps();s.timeStamps.push(performance.now());const u=this.painter.context.gl,g=u.createFramebuffer();function x(b){u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,b,0);const E=new Uint8Array(u.drawingBufferWidth*u.drawingBufferHeight*4);return u.readPixels(0,0,u.drawingBufferWidth,u.drawingBufferHeight,u.RGBA,u.UNSIGNED_BYTE,E),E}return u.bindFramebuffer(u.FRAMEBUFFER,g),this._canvasPixelComparison(x(f),s.canvasCopies.map(x),s.timeStamps)}_canvasPixelComparison(f,s,u){let g=u[1]-u[0];const x=f.length/4;for(let b=0;b<s.length;b++){const E=s[b];let k=0;for(let I=0;I<E.length;I+=4)E[I]===f[I]&&E[I+1]===f[I+1]&&E[I+2]===f[I+2]&&E[I+3]===f[I+3]&&(k+=1);g+=(u[b+2]-u[b+1])*(1-k/x)}return g}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1),a.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),a.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=a.exported.frame(s=>{const u=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,u&&this._render(s)}))}_preloadTiles(f){const s=this.style?Object.values(this.style._sourceCaches):[];return a.asyncAll(s,(u,g)=>u._preloadTiles(f,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}_onVisibilityChange(){a.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(f){this._showTileAABBs!==f&&(this._showTileAABBs=f,f&&this._update())}_setCacheLimits(f,s){a.setCacheLimits(f,s)}get version(){return a.version}},NavigationControl:class{constructor(f){this.options=a.extend({},A_,f),this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",s=>{this._map&&this._map.zoomIn({},{originalEvent:s})}),R("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",s=>{this._map&&this._map.zoomOut({},{originalEvent:s})}),R("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",s=>{const u=this._map;u&&(this.options.visualizePitch?u.resetNorthPitch({},{originalEvent:s}):u.resetNorth({},{originalEvent:s}))}),this._compassIcon=R("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const s=f.getZoom(),u=s===f.getMaxZoom(),g=s===f.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=s)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new D_(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,s){const u=R("button",f,this._container);return u.type="button",u.addEventListener("click",s),u}_setButtonTitle(f,s){if(!this._map)return;const u=this._map._getUIString(`NavigationControl.${s}`);f.setAttribute("aria-label",u),f.firstElementChild&&f.firstElementChild.setAttribute("title",u)}},GeolocateControl:class extends a.Evented{constructor(f){super(),this.options=a.extend({geolocation:a.window.navigator.geolocation},Tp,f),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=_l(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(f){return this._map=f,this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(f){const s=(u=!!this.options.geolocation)=>{this._supportsGeolocation=u,f(u)};this._supportsGeolocation!==void 0?f(this._supportsGeolocation):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(u=>s(u.state!=="denied")).catch(()=>s()):s()}_isOutOfMapMaxBounds(f){const s=this._map.getMaxBounds(),u=f.coords;return!!s&&(u.longitude<s.getWest()||u.longitude>s.getEast()||u.latitude<s.getSouth()||u.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",f)),this._finish()}}_updateCamera(f){const s=new a.LngLat(f.coords.longitude,f.coords.latitude),u=f.coords.accuracy,g=this._map.getBearing(),x=a.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(u),x,{geolocateSource:!0})}_updateMarker(f){if(f){const s=new a.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.transform,s=a.mercatorZfromAltitude(1,f._center.lat)*f.worldSize,u=Math.ceil(2*this._accuracy*s);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=R("button","mapboxgl-ctrl-geolocate",this._container),R("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R("div","mapboxgl-user-location"),this._dotElement.appendChild(R("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(R("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Xt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=R("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:f.absolute===!0&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(f={maximumAge:6e5,timeout:0},this._noTimeout=!0):(f=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{a.window.addEventListener("ondeviceorientationabsolute"in a.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};a.window.DeviceMotionEvent!==void 0&&typeof a.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(s=>{s==="granted"&&f()}).catch(console.error):f()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),a.window.removeEventListener("deviceorientation",this._onDeviceOrientation),a.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Qt,ScaleControl:class{constructor(f){this.options=a.extend({},Cp,f),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),a.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const f=this.options.maxWidth||100,s=this._map,u=s._containerHeight/2,g=s._containerWidth/2-f/2,x=s.unproject([g,u]),b=s.unproject([g+f,u]),E=x.distanceTo(b);if(this.options.unit==="imperial"){const k=3.2808*E;k>5280?this._setScale(f,k/5280,"mile"):this._setScale(f,k,"foot")}else this.options.unit==="nautical"?this._setScale(f,E/1852,"nautical-mile"):E>=1e3?this._setScale(f,E/1e3,"kilometer"):this._setScale(f,E,"meter")}_setScale(f,s,u){this._map._requestDomTask(()=>{const g=function(b){const E=Math.pow(10,`${Math.floor(b)}`.length-1);let k=b/E;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(I){const O=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*O)/O}(k),E*k}(s),x=g/s;this._container.innerHTML=this._isNumberFormatSupported&&u!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:u}).format(g):`${g}&nbsp;${Ep[u]}`,this._container.style.width=f*x+"px"})}onAdd(f){return this._map=f,this._language=f.getLanguage(),this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(f){this._language=f,this._update()}setUnit(f){this.options.unit=f,this._update()}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof a.window.HTMLElement?this._container=f.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in a.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!a.window.document.fullscreenEnabled&&!a.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=R("button","mapboxgl-ctrl-fullscreen",this._controlContainer);R("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(a.window.document.fullscreenElement||a.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.Evented{constructor(f){super(),this.options=a.extend(Object.create(wp),f),a.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),f._addPopup(this),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),f._canvasContainer&&f._canvasContainer.classList.remove("mapboxgl-track-pointer"),f._removePopup(this),this._map=void 0),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=a.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const s=this._map;return s&&(s.on("move",this._update),s.off("mousemove",this._onMouseEvent),s._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(a.window.document.createTextNode(f))}setHTML(f){const s=a.window.document.createDocumentFragment(),u=a.window.document.createElement("body");let g;for(u.innerHTML=f;g=u.firstChild,g;)s.appendChild(g);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let s=this._content;if(s)for(;s.hasChildNodes();)s.firstChild&&s.removeChild(s.firstChild);else s=this._content=R("div","mapboxgl-popup-content",this._container||void 0);if(s.appendChild(f),this.options.closeButton){const u=this._closeButton=R("button","mapboxgl-popup-close-button",s);u.type="button",u.setAttribute("aria-label","Close popup"),u.setAttribute("aria-hidden","true"),u.innerHTML="&#215;",u.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let s;return this._classList.delete(f)?s=!1:(this._classList.add(f),s=!0),this._updateClassList(),s}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const s=this._map,u=this._container,g=this._pos;if(!s||!u||!g)return"bottom";const x=u.offsetWidth,b=u.offsetHeight,E=g.x<x/2,k=g.x>s.transform.width-x/2;if(g.y+f<b)return E?"top-left":k?"top-right":"top";if(g.y>s.transform.height-b){if(E)return"bottom-left";if(k)return"bottom-right"}return E?"left":k?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const s=[...this._classList];s.push("mapboxgl-popup"),this._anchor&&s.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&s.push("mapboxgl-popup-track-pointer"),f.className=s.join(" ")}_update(f){const s=this._map,u=this._content;if(!s||!this._lngLat&&!this._trackPointer||!u)return;let g=this._container;if(g||(g=this._container=R("div","mapboxgl-popup",s.getContainer()),this._tip=R("div","mapboxgl-popup-tip",g),g.appendChild(u)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),s.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=bl(this._lngLat,this._pos,s.transform)),!this._trackPointer||f){const x=this._pos=this._trackPointer&&f?f:s.project(this._lngLat),b=km(this.options.offset),E=this._anchor=this._getAnchor(b.y),k=km(this.options.offset,E),I=x.add(k).round();s._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${Aa[E]} translate(${I.x}px,${I.y}px)`)})}if(!this._marker&&s._showingGlobe()){const x=a.isLngLatBehindGlobe(s.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(I_);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._container&&(this._container.style.opacity=`${f}`),this._content&&(this._content.style.pointerEvents=f?"auto":"none")}},Marker:Xt,Style:Yo,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,FreeCameraOptions:hm,Evented:a.Evented,config:a.config,prewarm:function(){Jn().acquire(ot)},clearPrewarmedResources:function(){const f=dn;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(ot),dn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(f){a.config.ACCESS_TOKEN=f},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(f){a.config.API_URL=f},get workerCount(){return Kt.workerCount},set workerCount(f){Kt.workerCount=f},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){a.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){a.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:a.exported.setNow,restoreNow:a.exported.restoreNow};return wl});var y=d;return y})})(W8);var uD=W8.exports;const gu=tl(uD);const dD=(e,t)=>{const[o,l]=W.useState([]);return{route:o,displayRoute:async()=>{if(!(!e||!t))try{const p=t.waypoints.map(R=>`${R[1]},${R[0]}`).join(";"),y=`https://api.mapbox.com/directions/v5/mapbox/walking/${t.longitude},${t.latitude};${p},?geometries=geojson&access_token=${gu.accessToken}`,C=(await(await fetch(y)).json()).routes[0].geometry.coordinates,M={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:C}};e.getSource("route")&&(e.removeLayer("route"),e.removeSource("route")),e.addSource("route",{type:"geojson",data:M}),e.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3b9ddd","line-width":4}});const D=new gu.LngLatBounds;C.forEach(R=>D.extend(R)),e.fitBounds(D,{padding:400}),l(C)}catch(p){console.error("Error:",p)}}}},hD=(e,t,o)=>{const[l,d]=W.useState({lat:null,lng:null,address:""});return W.useEffect(()=>{e&&e.on("click",p=>{t&&(o(!1),fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${p.lngLat.lng},${p.lngLat.lat}.json?access_token=${gu.accessToken}`).then(y=>y.json()).then(y=>{var w;const a=((w=y.features[0])==null?void 0:w.place_name)||"Unknown location";d({lat:p.lngLat.lat,lng:p.lngLat.lng,address:a})}).catch(y=>console.error("Error:",y)),console.log("Selected location:",p.lngLat.lat,p.lngLat.lng))})},[e,t]),{location:l,setLocation:d}},pD=[{id:5029111,name:"Battery Park",location:{latitude:40.7028143,longitude:-74.015775},taxizone:"12",busi:{0:119,1:95,2:53,3:29,4:26,5:12,6:25,7:39,8:62,9:114,10:125,11:137,12:166,13:167,14:177,15:156,16:136,17:146,18:144,19:152,20:158,21:149,22:151,23:150}},{id:22727025,name:"Bryant Park",location:{latitude:40.7537508,longitude:-73.9835384},taxizone:"164",busi:{0:43,1:23,2:17,3:18,4:17,5:13,6:4,7:10,8:10,9:10,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:14,18:16,19:29,20:36,21:34,22:46,23:51}},{id:22899286,name:"Madison Square Park",location:{latitude:40.7421868,longitude:-73.987872},taxizone:"234",busi:{0:749,1:355,2:247,3:149,4:141,5:254,6:514,7:855,8:1037,9:1056,10:1806,11:1825,12:1826,13:1857,14:1894,15:1742,16:1549,17:1932,18:1825,19:1805,20:1545,21:1415,22:1338,23:1196}},{id:22899302,name:"Washington Square Park",location:{latitude:40.730896,longitude:-73.9975857},taxizone:"114",busi:{0:203,1:118,2:74,3:42,4:40,5:70,6:175,7:251,8:383,9:502,10:627,11:628,12:624,13:648,14:651,15:464,16:417,17:445,18:434,19:389,20:348,21:347,22:327,23:234}},{id:22900913,name:"Dr. Gertrude B. Kelly Playground",location:{latitude:40.7416557,longitude:-74.0020105},taxizone:"68",busi:{0:642,1:392,2:220,3:129,4:122,5:159,6:228,7:407,8:784,9:802,10:809,11:899,12:979,13:985,14:908,15:917,16:907,17:1122,18:1284,19:1278,20:1139,21:1143,22:1077,23:940}},{id:22900959,name:"Chelsea Park",location:{latitude:40.7499194,longitude:-74.0006702},taxizone:"68",busi:{0:642,1:392,2:220,3:129,4:122,5:159,6:228,7:407,8:784,9:802,10:809,11:899,12:979,13:985,14:908,15:917,16:907,17:1122,18:1284,19:1278,20:1139,21:1143,22:1077,23:940}},{id:22901074,name:"Gramercy Park",location:{latitude:40.737939,longitude:-73.9859225},taxizone:"107",busi:{0:129,1:71,2:50,3:29,4:23,5:27,6:46,7:81,8:85,9:148,10:149,11:147,12:152,13:155,14:168,15:182,16:179,17:199,18:194,19:191,20:166,21:156,22:154,23:168}},{id:22903972,name:"Chelsea Waterside Park",location:{latitude:40.7492535,longitude:-74.0074571},taxizone:"246",busi:{0:358,1:245,2:139,3:88,4:47,5:39,6:28,7:74,8:144,9:212,10:429,11:501,12:539,13:589,14:615,15:613,16:473,17:460,18:560,19:568,20:497,21:449,22:435,23:411}},{id:22904239,name:"14th Street Park",location:{latitude:40.742717,longitude:-74.0082549},taxizone:"246",busi:{0:358,1:245,2:139,3:88,4:47,5:39,6:28,7:74,8:144,9:212,10:429,11:501,12:539,13:589,14:615,15:613,16:473,17:460,18:560,19:568,20:497,21:449,22:435,23:411}},{id:22926662,name:"Liberty Park",location:{latitude:40.7102299,longitude:-74.0135844},taxizone:"261",busi:{0:538,1:396,2:234,3:122,4:112,5:124,6:201,7:464,8:746,9:748,10:783,11:815,12:827,13:817,14:836,15:800,16:775,17:952,18:1089,19:1031,20:981,21:976,22:829,23:823}},{id:22926980,name:"Washington Market Park",location:{latitude:40.7170293,longitude:-74.0116375},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:22941918,name:"DeWitt Clinton Park",location:{latitude:40.7682011,longitude:-73.9942676},taxizone:"50",busi:{0:537,1:247,2:144,3:119,4:122,5:160,6:210,7:394,8:491,9:682,10:863,11:924,12:945,13:949,14:1259,15:1296,16:1178,17:1365,18:1374,19:1293,20:956,21:884,22:921,23:724}},{id:22961817,name:"Jackson Square Park",location:{latitude:40.7390049,longitude:-74.0028822},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:22961821,name:"Corporal John A. Seravalli Playground",location:{latitude:40.7390844,longitude:-74.0048187},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:22961904,name:"Clement Clarke Moore Park",location:{latitude:40.746629,longitude:-74.0043038},taxizone:"68",busi:{0:642,1:392,2:220,3:129,4:122,5:159,6:228,7:407,8:784,9:802,10:809,11:899,12:979,13:985,14:908,15:917,16:907,17:1122,18:1284,19:1278,20:1139,21:1143,22:1077,23:940}},{id:23048485,name:"Tudor City Greens - North Park",location:{latitude:40.7495583,longitude:-73.9705138},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:23048493,name:"Tudor City Greens - South Park",location:{latitude:40.7488541,longitude:-73.9710191},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:25026338,name:"Zuccotti Park",location:{latitude:40.7092314,longitude:-74.0112539},taxizone:"261",busi:{0:538,1:396,2:234,3:122,4:112,5:124,6:201,7:464,8:746,9:748,10:783,11:815,12:827,13:817,14:836,15:800,16:775,17:952,18:1089,19:1031,20:981,21:976,22:829,23:823}},{id:25162896,name:"Tompkins Square Park",location:{latitude:40.7264724,longitude:-73.9816871},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:30657456,name:"Christopher Park",location:{latitude:40.7335833,longitude:-74.0022513},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:30657462,name:"Sheridan Square Garden",location:{latitude:40.7330286,longitude:-74.0021296},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:31009822,name:"Stuyvesant Cove Park",location:{latitude:40.7330953,longitude:-73.9739823},taxizone:"224",busi:{0:88,1:55,2:33,3:24,4:21,5:19,6:28,7:53,8:52,9:43,10:44,11:43,12:48,13:50,14:49,15:50,16:55,17:80,18:80,19:78,20:83,21:79,22:84,23:85}},{id:33804388,name:"East River Esplanade",location:{latitude:40.7449845,longitude:-73.9704672},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:33804405,name:"Asser Levy Playground",location:{latitude:40.7364296,longitude:-73.9756472},taxizone:"137",busi:{0:1837,1:1293,2:814,3:462,4:337,5:158,6:240,7:456,8:415,9:568,10:653,11:672,12:724,13:752,14:887,15:892,16:897,17:1103,18:1527,19:1756,20:1765,21:1927,22:2055,23:2253}},{id:36185652,name:"Bellevue Society Garden",location:{latitude:40.7380949,longitude:-73.9745264},taxizone:"137",busi:{0:1837,1:1293,2:814,3:462,4:337,5:158,6:240,7:456,8:415,9:568,10:653,11:672,12:724,13:752,14:887,15:892,16:897,17:1103,18:1527,19:1756,20:1765,21:1927,22:2055,23:2253}},{id:36865288,name:"Desalvio Playground",location:{latitude:40.7216408,longitude:-73.9961097},taxizone:"144",busi:{0:673,1:426,2:296,3:215,4:142,5:144,6:189,7:353,8:456,9:548,10:570,11:587,12:703,13:764,14:791,15:794,16:729,17:774,18:714,19:710,20:692,21:692,22:695,23:753}},{id:37003318,name:"Riverside Park",location:{latitude:40.7880268,longitude:-73.982186},taxizone:"239",busi:{0:165,1:116,2:76,3:51,4:46,5:54,6:99,7:156,8:163,9:189,10:291,11:298,12:304,13:311,14:313,15:312,16:328,17:333,18:315,19:312,20:309,21:313,22:292,23:285}},{id:39243853,name:"Morningside Park",location:{latitude:40.8060522,longitude:-73.9580625},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:44225581,name:"Petrosino Square",location:{latitude:40.7217802,longitude:-73.9974692},taxizone:"144",busi:{0:673,1:426,2:296,3:215,4:142,5:144,6:189,7:353,8:456,9:548,10:570,11:587,12:703,13:764,14:791,15:794,16:729,17:774,18:714,19:710,20:692,21:692,22:695,23:753}},{id:53189828,name:"DeLury Square",location:{latitude:40.7091073,longitude:-74.0050236},taxizone:"209",busi:{0:597,1:438,2:280,3:183,4:177,5:148,6:341,7:742,8:819,9:990,10:996,11:1027,12:1037,13:1069,14:1187,15:1188,16:1132,17:1410,18:1481,19:1455,20:1295,21:1180,22:1054,23:990}},{id:66374787,name:"Columbus Park",location:{latitude:40.7151001,longitude:-74.0000509},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:75311774,name:"Battery Park City Ball Fields",location:{latitude:40.7160843,longitude:-74.0140082},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:75364733,name:"Bogardus Garden",location:{latitude:40.7158736,longitude:-74.0090666},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:86144190,name:"Abingdon Square",location:{latitude:40.7372675,longitude:-74.0053868},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:86144198,name:"Unknown Park",location:{latitude:40.736377,longitude:-74.0054892},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:86256760,name:"Arthur Strickler Triangle",location:{latitude:40.7368584,longitude:-74.0058066},taxizone:"158",busi:{0:452,1:281,2:171,3:98,4:82,5:102,6:111,7:214,8:387,9:434,10:531,11:575,12:734,13:742,14:730,15:722,16:699,17:754,18:737,19:724,20:686,21:677,22:649,23:746}},{id:86336886,name:"Sherman Square",location:{latitude:40.7773648,longitude:-73.9823502},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:86338375,name:"Greenacre Park",location:{latitude:40.7562735,longitude:-73.9692846},taxizone:"229",busi:{0:218,1:131,2:84,3:47,4:37,5:85,6:169,7:286,8:266,9:447,10:487,11:532,12:569,13:580,14:717,15:723,16:709,17:763,18:881,19:871,20:756,21:614,22:597,23:418}},{id:86714429,name:"Kimlau Square",location:{latitude:40.713421,longitude:-73.9979986},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:95833119,name:"Cooper Triangle",location:{latitude:40.7288189,longitude:-73.9907764},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:104077634,name:"Gorman Memorial Park",location:{latitude:40.8556942,longitude:-73.9324027},taxizone:"243",busi:{0:18,1:14,2:7,3:13,4:11,5:9,6:4,7:7,8:7,9:7,10:9,11:8,12:11,13:11,14:12,15:12,16:11,17:14,18:16,19:16,20:26,21:23,22:23,23:23}},{id:104078386,name:"Bennett Park",location:{latitude:40.8528398,longitude:-73.938113},taxizone:"243",busi:{0:18,1:14,2:7,3:13,4:11,5:9,6:4,7:7,8:7,9:7,10:9,11:8,12:11,13:11,14:12,15:12,16:11,17:14,18:16,19:16,20:26,21:23,22:23,23:23}},{id:104169861,name:"Isham Park",location:{latitude:40.8696523,longitude:-73.9190761},taxizone:"127",busi:{0:1372,1:957,2:553,3:458,4:366,5:377,6:920,7:891,8:900,9:957,10:1051,11:1130,12:1345,13:1487,14:1483,15:1489,16:1471,17:1525,18:1743,19:1886,20:1811,21:1665,22:1710,23:1749}},{id:105715154,name:"Fort Washington Park",location:{latitude:40.8531632,longitude:-73.9398863},taxizone:"243",busi:{0:18,1:14,2:7,3:13,4:11,5:9,6:4,7:7,8:7,9:7,10:9,11:8,12:11,13:11,14:12,15:12,16:11,17:14,18:16,19:16,20:26,21:23,22:23,23:23}},{id:108153375,name:"Collect Pond Park",location:{latitude:40.716328,longitude:-74.0018252},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:108153676,name:"Duarte Square",location:{latitude:40.7225449,longitude:-74.0055296},taxizone:"125",busi:{0:187,1:86,2:54,3:22,4:36,5:93,6:187,7:505,8:531,9:662,10:939,11:970,12:1145,13:1224,14:1299,15:1291,16:953,17:867,18:835,19:707,20:582,21:539,22:432,23:325}},{id:108159406,name:"Carl Schurz Park",location:{latitude:40.7752127,longitude:-73.9437574},taxizone:"262",busi:{0:1169,1:799,2:500,3:310,4:300,5:310,6:814,7:1165,8:1234,9:1379,10:1424,11:1109,12:1083,13:1081,14:1086,15:1099,16:1087,17:1856,18:2144,19:2395,20:1659,21:1898,22:2121,23:2003}},{id:108159407,name:"Thomas Jefferson Park",location:{latitude:40.7932541,longitude:-73.9353945},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:108199253,name:"Robert Moses Plaza",location:{latitude:40.7707338,longitude:-73.9847792},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:108199260,name:"St. Peter's Garden",location:{latitude:40.7711578,longitude:-73.9854676},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:108201933,name:"Mill Rock Park",location:{latitude:40.7804689,longitude:-73.9385927},taxizone:"262",busi:{0:1169,1:799,2:500,3:310,4:300,5:310,6:814,7:1165,8:1234,9:1379,10:1424,11:1109,12:1083,13:1081,14:1086,15:1099,16:1087,17:1856,18:2144,19:2395,20:1659,21:1898,22:2121,23:2003}},{id:108220705,name:"Unknown Park",location:{latitude:40.7630623,longitude:-73.9481835},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:108235832,name:"Corlears Hook Park",location:{latitude:40.7117122,longitude:-73.9792669},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:108235833,name:"Rector Park",location:{latitude:40.709189,longitude:-74.016925},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:108235836,name:"Seward Park",location:{latitude:40.7148304,longitude:-73.9891502},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:108235837,name:"Vietnam Veterans Plaza",location:{latitude:40.7027051,longitude:-74.0097651},taxizone:"88",busi:{0:190,1:120,2:84,3:57,4:36,5:42,6:63,7:138,8:190,9:383,10:421,11:504,12:510,13:511,14:515,15:516,16:436,17:409,18:436,19:388,20:321,21:317,22:306,23:274}},{id:108235842,name:"John V. Lindsay East River Park",location:{latitude:40.7185542,longitude:-73.976023},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:108236534,name:"Wards Island Park",location:{latitude:40.7861499,longitude:-73.9296327},taxizone:"194",busi:{}},{id:108237827,name:"Wallenberg Playground",location:{latitude:40.8529616,longitude:-73.9267854},taxizone:"120",busi:{0:165,1:109,2:77,3:67,4:44,5:43,6:53,7:107,8:103,9:108,10:111,11:92,12:89,13:92,14:124,15:129,16:121,17:152,18:157,19:158,20:184,21:190,22:179,23:195}},{id:108237828,name:"Jackie Robinson Park",location:{latitude:40.8267343,longitude:-73.9412148},taxizone:"116",busi:{0:182,1:123,2:83,3:72,4:69,5:71,6:94,7:121,8:128,9:150,10:151,11:162,12:241,13:246,14:251,15:249,16:255,17:291,18:293,19:287,20:280,21:275,22:271,23:273}},{id:108239585,name:"Jacob H. Schiff Playground",location:{latitude:40.8205186,longitude:-73.9520188},taxizone:"152",busi:{0:1098,1:653,2:340,3:213,4:162,5:179,6:333,7:342,8:383,9:503,10:587,11:774,12:884,13:917,14:909,15:923,16:916,17:1074,18:1032,19:1014,20:992,21:970,22:954,23:959}},{id:108239586,name:"Montefiore Park",location:{latitude:40.8214533,longitude:-73.9535643},taxizone:"152",busi:{0:1098,1:653,2:340,3:213,4:162,5:179,6:333,7:342,8:383,9:503,10:587,11:774,12:884,13:917,14:909,15:923,16:916,17:1074,18:1032,19:1014,20:992,21:970,22:954,23:959}},{id:108239588,name:"Alexander Hamilton Playground",location:{latitude:40.8230955,longitude:-73.9512438},taxizone:"116",busi:{0:182,1:123,2:83,3:72,4:69,5:71,6:94,7:121,8:128,9:150,10:151,11:162,12:241,13:246,14:251,15:249,16:255,17:291,18:293,19:287,20:280,21:275,22:271,23:273}},{id:108239589,name:"Saint Nicholas Park",location:{latitude:40.8172175,longitude:-73.9489593},taxizone:"152",busi:{0:1098,1:653,2:340,3:213,4:162,5:179,6:333,7:342,8:383,9:503,10:587,11:774,12:884,13:917,14:909,15:923,16:916,17:1074,18:1032,19:1014,20:992,21:970,22:954,23:959}},{id:108295732,name:"Unknown Park",location:{latitude:40.7657936,longitude:-73.9476698},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:108295735,name:"Unknown Park",location:{latitude:40.7664493,longitude:-73.9468825},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:108295739,name:"Manhattan Park Parcel A",location:{latitude:40.7654725,longitude:-73.946894},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:108296005,name:"Unknown Park",location:{latitude:40.760694,longitude:-73.9517296},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:108315458,name:"FDR Four Freedoms State Park",location:{latitude:40.7506326,longitude:-73.9603839},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:109267278,name:"Coenties Slip",location:{latitude:40.7034804,longitude:-74.01053},taxizone:"88",busi:{0:190,1:120,2:84,3:57,4:36,5:42,6:63,7:138,8:190,9:383,10:421,11:504,12:510,13:511,14:515,15:516,16:436,17:409,18:436,19:388,20:321,21:317,22:306,23:274}},{id:109269750,name:"Grand Army Plaza",location:{latitude:40.764415,longitude:-73.9733608},taxizone:"163",busi:{0:62,1:113,2:24,3:15,4:19,5:27,6:7,7:4,8:3,9:3,10:3,11:4,12:4,13:5,14:5,15:5,16:5,17:4,18:4,19:4,20:4,21:5,22:4,23:4}},{id:109328312,name:"Joseph C. Sauer Park",location:{latitude:40.7281595,longitude:-73.9797195},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:109330342,name:"James Madison Plaza",location:{latitude:40.7114325,longitude:-74.0003718},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:109441961,name:"Titanic Memorial Park",location:{latitude:40.7075392,longitude:-74.0036904},taxizone:"209",busi:{0:597,1:438,2:280,3:183,4:177,5:148,6:341,7:742,8:819,9:990,10:996,11:1027,12:1037,13:1069,14:1187,15:1188,16:1132,17:1410,18:1481,19:1455,20:1295,21:1180,22:1054,23:990}},{id:109447376,name:"Louise Nevelson Plaza",location:{latitude:40.7076565,longitude:-74.0079164},taxizone:"87",busi:{0:1092,1:860,2:538,3:307,4:198,5:121,6:148,7:142,8:290,9:387,10:466,11:583,12:672,13:667,14:689,15:695,16:652,17:822,18:1172,19:1235,20:1209,21:1233,22:1386,23:1466}},{id:111563947,name:"Peretz Square",location:{latitude:40.7229342,longitude:-73.9878534},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:112692313,name:"Bowling Green",location:{latitude:40.7050354,longitude:-74.0136629},taxizone:"261",busi:{0:538,1:396,2:234,3:122,4:112,5:124,6:201,7:464,8:746,9:748,10:783,11:815,12:827,13:817,14:836,15:800,16:775,17:952,18:1089,19:1031,20:981,21:976,22:829,23:823}},{id:113690621,name:"Marsh & McLennan Public Space",location:{latitude:40.75669,longitude:-73.9815898},taxizone:"161",busi:{0:901,1:699,2:453,3:224,4:143,5:73,6:70,7:91,8:138,9:195,10:246,11:380,12:473,13:479,14:509,15:518,16:513,17:660,18:783,19:817,20:814,21:835,22:858,23:1102}},{id:113723738,name:"Straus Park",location:{latitude:40.8018962,longitude:-73.9682115},taxizone:"24",busi:{0:1081,1:558,2:410,3:230,4:276,5:260,6:1323,7:1151,8:1176,9:1306,10:1285,11:1356,12:1366,13:1346,14:1362,15:1368,16:1412,17:1439,18:1729,19:1774,20:1582,21:1513,22:1513,23:1641}},{id:117994215,name:"Samuel N. Bennerson 2nd Playground",location:{latitude:40.7738043,longitude:-73.9869758},taxizone:"143",busi:{0:156,1:110,2:60,3:43,4:36,5:40,6:48,7:88,8:261,9:270,10:249,11:250,12:241,13:248,14:259,15:204,16:180,17:203,18:198,19:195,20:201,21:197,22:187,23:178}},{id:117994217,name:"Damrosch Park",location:{latitude:40.7723209,longitude:-73.9850051},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:118116798,name:"Pier 84",location:{latitude:40.7637561,longitude:-74.0013936},taxizone:"50",busi:{0:537,1:247,2:144,3:119,4:122,5:160,6:210,7:394,8:491,9:682,10:863,11:924,12:945,13:949,14:1259,15:1296,16:1178,17:1365,18:1374,19:1293,20:956,21:884,22:921,23:724}},{id:118116802,name:"Unknown Park",location:{latitude:40.7746717,longitude:-73.9889625},taxizone:"143",busi:{0:156,1:110,2:60,3:43,4:36,5:40,6:48,7:88,8:261,9:270,10:249,11:250,12:241,13:248,14:259,15:204,16:180,17:203,18:198,19:195,20:201,21:197,22:187,23:178}},{id:118505053,name:"Clinton Cove",location:{latitude:40.7706616,longitude:-73.9954545},taxizone:"50",busi:{0:537,1:247,2:144,3:119,4:122,5:160,6:210,7:394,8:491,9:682,10:863,11:924,12:945,13:949,14:1259,15:1296,16:1178,17:1365,18:1374,19:1293,20:956,21:884,22:921,23:724}},{id:118524658,name:"Johnny Hartman Plaza",location:{latitude:40.8241497,longitude:-73.9486126},taxizone:"116",busi:{0:182,1:123,2:83,3:72,4:69,5:71,6:94,7:121,8:128,9:150,10:151,11:162,12:241,13:246,14:251,15:249,16:255,17:291,18:293,19:287,20:280,21:275,22:271,23:273}},{id:118524659,name:"Courtney Callender Playground",location:{latitude:40.8100335,longitude:-73.9400997},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524660,name:"Alice Kornegay Triangle",location:{latitude:40.8064189,longitude:-73.9353004},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:118524662,name:"Colonel Charles Young Triangle",location:{latitude:40.8272244,longitude:-73.9358637},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524664,name:"Renaissance Playground",location:{latitude:40.8212878,longitude:-73.9413653},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524667,name:"Harlem Lane Playground",location:{latitude:40.8259868,longitude:-73.9349482},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524668,name:"Howard Bennett Playground",location:{latitude:40.8136382,longitude:-73.9386348},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524669,name:"Moore Playground",location:{latitude:40.8094037,longitude:-73.938501},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524671,name:"Colonel Charles Young Playground",location:{latitude:40.8191237,longitude:-73.935624},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524675,name:"Riverside Park",location:{latitude:40.8290212,longitude:-73.953451},taxizone:"116",busi:{0:182,1:123,2:83,3:72,4:69,5:71,6:94,7:121,8:128,9:150,10:151,11:162,12:241,13:246,14:251,15:249,16:255,17:291,18:293,19:287,20:280,21:275,22:271,23:273}},{id:118524677,name:"Frederick Johnson Park",location:{latitude:40.8247169,longitude:-73.9355292},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524678,name:"Abraham Lincoln Playground",location:{latitude:40.812198,longitude:-73.9371517},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:118524689,name:"Holcombe Rucker Park",location:{latitude:40.829198,longitude:-73.9361184},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524694,name:"Riverbank State Park",location:{latitude:40.8254269,longitude:-73.9565197},taxizone:"116",busi:{0:182,1:123,2:83,3:72,4:69,5:71,6:94,7:121,8:128,9:150,10:151,11:162,12:241,13:246,14:251,15:249,16:255,17:291,18:293,19:287,20:280,21:275,22:271,23:273}},{id:118524697,name:"Crack Is Wack Playground",location:{latitude:40.8044855,longitude:-73.9317785},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:118524700,name:"Harlem River Park",location:{latitude:40.8059758,longitude:-73.9336626},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:118524701,name:"Bradhurst Urban Renewal Park",location:{latitude:40.8226795,longitude:-73.9400884},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:118524706,name:"Convent Garden",location:{latitude:40.828365,longitude:-73.9427004},taxizone:"116",busi:{0:182,1:123,2:83,3:72,4:69,5:71,6:94,7:121,8:128,9:150,10:151,11:162,12:241,13:246,14:251,15:249,16:255,17:291,18:293,19:287,20:280,21:275,22:271,23:273}},{id:118528233,name:"Sakura Park",location:{latitude:40.8130779,longitude:-73.962112},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:118528235,name:"West Harlem Piers Park",location:{latitude:40.8191647,longitude:-73.9611293},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:118528587,name:"Unknown Park",location:{latitude:40.7972777,longitude:-73.9768346},taxizone:"238",busi:{0:1069,1:737,2:396,3:193,4:169,5:270,6:449,7:1016,8:1282,9:1358,10:1482,11:1618,12:1657,13:1659,14:1696,15:1600,16:1552,17:1699,18:1568,19:1554,20:1434,21:1420,22:1489,23:1722}},{id:118529212,name:"Inwood Hill Park",location:{latitude:40.8722547,longitude:-73.9253479},taxizone:"128",busi:{0:410,1:292,2:187,3:127,4:106,5:105,6:283,7:240,8:425,9:474,10:494,11:494,12:479,13:492,14:489,15:485,16:490,17:491,18:494,19:486,20:459,21:434,22:443,23:458}},{id:124814434,name:"Bogardus Plaza",location:{latitude:40.7159015,longitude:-74.0092316},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:129700421,name:"Wagner Park",location:{latitude:40.705538,longitude:-74.0183661},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:129700423,name:"South Cove Park",location:{latitude:40.7073325,longitude:-74.0184369},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:129700430,name:"The Esplanade",location:{latitude:40.711556,longitude:-74.0171986},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:144333814,name:"Joseph Slifka Park",location:{latitude:40.743948,longitude:-73.9729184},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:147035202,name:"Duane Park",location:{latitude:40.7171562,longitude:-74.0094215},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:147475917,name:"Hamilton Fish Park",location:{latitude:40.7197929,longitude:-73.9808332},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:154416663,name:"Dante Park",location:{latitude:40.77192,longitude:-73.9825711},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:154416666,name:"Richard Tucker Square",location:{latitude:40.7734422,longitude:-73.9818886},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:159028631,name:"Channel Gardens",location:{latitude:40.758446,longitude:-73.9779564},taxizone:"161",busi:{0:901,1:699,2:453,3:224,4:143,5:73,6:70,7:91,8:138,9:195,10:246,11:380,12:473,13:479,14:509,15:518,16:513,17:660,18:783,19:817,20:814,21:835,22:858,23:1102}},{id:160903868,name:"McKinley Playground",location:{latitude:40.7242531,longitude:-73.9857747},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:161768219,name:"Hudson River Park",location:{latitude:40.7194932,longitude:-74.0144394},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:169483357,name:"Unknown Park",location:{latitude:40.7572689,longitude:-73.9947724},taxizone:"48",busi:{0:623,1:262,2:141,3:93,4:96,5:199,6:487,7:1049,8:1075,9:1398,10:1859,11:2466,12:2502,13:2496,14:2593,15:2652,16:2472,17:2823,18:2796,19:2724,20:1602,21:1525,22:1327,23:937}},{id:171562481,name:"Father Demo Square",location:{latitude:40.7302244,longitude:-74.0021376},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:171805412,name:"Luther Gulick Playground",location:{latitude:40.7158754,longitude:-73.9818757},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:177068788,name:"Laurie M. Tisch Illumination Lawn",location:{latitude:40.7733857,longitude:-73.9835496},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:178575123,name:"Riverside Park",location:{latitude:40.8068603,longitude:-73.9680684},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:194212578,name:"Tecumseh Playground",location:{latitude:40.7818184,longitude:-73.9785715},taxizone:"239",busi:{0:165,1:116,2:76,3:51,4:46,5:54,6:99,7:156,8:163,9:189,10:291,11:298,12:304,13:311,14:313,15:312,16:328,17:333,18:315,19:312,20:309,21:313,22:292,23:285}},{id:197064614,name:"James J Walker Park",location:{latitude:40.7298088,longitude:-74.0061054},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:197066133,name:"Pier 45",location:{latitude:40.7331785,longitude:-74.0124101},taxizone:"158",busi:{0:452,1:281,2:171,3:98,4:82,5:102,6:111,7:214,8:387,9:434,10:531,11:575,12:734,13:742,14:730,15:722,16:699,17:754,18:737,19:724,20:686,21:677,22:649,23:746}},{id:199925533,name:"Marcus Garvey Memorial Park",location:{latitude:40.8044864,longitude:-73.9436727},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:201158183,name:"Irish Hunger Memorial",location:{latitude:40.7151544,longitude:-74.0165528},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:208360494,name:"The Queen Elizabeth II September 11th Garden",location:{latitude:40.704797,longitude:-74.0093346},taxizone:"87",busi:{0:1092,1:860,2:538,3:307,4:198,5:121,6:148,7:142,8:290,9:387,10:466,11:583,12:672,13:667,14:689,15:695,16:652,17:822,18:1172,19:1235,20:1209,21:1233,22:1386,23:1466}},{id:217722093,name:"J. Hood Wright Park",location:{latitude:40.8464722,longitude:-73.941255},taxizone:"244",busi:{0:122,1:71,2:67,3:20,4:20,5:13,6:34,7:46,8:71,9:76,10:83,11:96,12:104,13:118,14:121,15:105,16:108,17:127,18:111,19:92,20:90,21:89,22:90,23:88}},{id:218327131,name:"Verizon Plaza",location:{latitude:40.7548157,longitude:-73.9851583},taxizone:"100",busi:{0:197,1:147,2:117,3:79,4:41,5:41,6:45,7:59,8:92,9:88,10:87,11:97,12:121,13:123,14:153,15:152,16:154,17:214,18:247,19:268,20:264,21:267,22:292,23:401}},{id:219612698,name:"Finn Square",location:{latitude:40.7186426,longitude:-74.0068689},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:221922459,name:"Chelsea Waterside Park",location:{latitude:40.7511887,longitude:-74.0093436},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:221922480,name:"Riverside Park South",location:{latitude:40.7772231,longitude:-73.9905567},taxizone:"143",busi:{0:156,1:110,2:60,3:43,4:36,5:40,6:48,7:88,8:261,9:270,10:249,11:250,12:241,13:248,14:259,15:204,16:180,17:203,18:198,19:195,20:201,21:197,22:187,23:178}},{id:224028029,name:"132nd Street Block Association Park",location:{latitude:40.8123187,longitude:-73.943153},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:224029303,name:"Rev. Linnette C Williamson Memorial Park",location:{latitude:40.8094612,longitude:-73.9429209},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:224031776,name:"Collyer Brothers Park",location:{latitude:40.8085313,longitude:-73.9410487},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:224034804,name:"A Philip Randolph Square",location:{latitude:40.8038286,longitude:-73.952422},taxizone:"41",busi:{0:163,1:120,2:89,3:65,4:34,5:25,6:51,7:47,8:72,9:79,10:90,11:100,12:118,13:130,14:151,15:147,16:138,17:157,18:181,19:180,20:181,21:181,22:184,23:204}},{id:225132539,name:"Dr. Ronald E. McNair Playground",location:{latitude:40.8025387,longitude:-73.9381332},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:225134048,name:"Dream Street Park",location:{latitude:40.8027407,longitude:-73.9350402},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:225134049,name:"Harlem Art Park",location:{latitude:40.8010442,longitude:-73.9388073},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:225135028,name:"Wagner Houses Pool",location:{latitude:40.8016837,longitude:-73.9325907},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:225143097,name:"Martin Luther King Playground",location:{latitude:40.8002087,longitude:-73.9503857},taxizone:"41",busi:{0:163,1:120,2:89,3:65,4:34,5:25,6:51,7:47,8:72,9:79,10:90,11:100,12:118,13:130,14:151,15:147,16:138,17:157,18:181,19:180,20:181,21:181,22:184,23:204}},{id:225159200,name:"Hancock Park",location:{latitude:40.8095436,longitude:-73.9532979},taxizone:"41",busi:{0:163,1:120,2:89,3:65,4:34,5:25,6:51,7:47,8:72,9:79,10:90,11:100,12:118,13:130,14:151,15:147,16:138,17:157,18:181,19:180,20:181,21:181,22:184,23:204}},{id:225171034,name:"Peter Minuit Playground",location:{latitude:40.7947722,longitude:-73.9472299},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225173496,name:"Unknown Park",location:{latitude:40.8063252,longitude:-73.9344249},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:225173571,name:"Unknown Park",location:{latitude:40.8078192,longitude:-73.9346167},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:225173572,name:"Unknown Park",location:{latitude:40.8069688,longitude:-73.9353248},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:225173799,name:"Each One Teach One",location:{latitude:40.8071736,longitude:-73.9345657},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:225188061,name:"Mae Grant Playground",location:{latitude:40.7924257,longitude:-73.9494365},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225188879,name:"Sunshine Playground",location:{latitude:40.7884898,longitude:-73.9478109},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225188968,name:"Cherry Tree Park",location:{latitude:40.7872445,longitude:-73.9471949},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225189359,name:"White Playground",location:{latitude:40.7916462,longitude:-73.9458897},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225189391,name:"103rd Street Community Garden",location:{latitude:40.7909291,longitude:-73.9486547},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225189513,name:"Poor Richard's Playground",location:{latitude:40.7926185,longitude:-73.9426331},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225190178,name:"Marx Brothers Playground",location:{latitude:40.7842492,longitude:-73.9459882},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225190195,name:"Stanley Isaacs Courts",location:{latitude:40.7834698,longitude:-73.9441011},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225190397,name:"Unknown Park",location:{latitude:40.7853549,longitude:-73.9427366},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225190636,name:"Playground 103",location:{latitude:40.7869524,longitude:-73.9390245},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225190643,name:"Unknown Park",location:{latitude:40.7893497,longitude:-73.9382443},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:225191605,name:"Harlem River Drive Park",location:{latitude:40.8148592,longitude:-73.9343099},taxizone:"74",busi:{0:96,1:52,2:40,3:27,4:22,5:15,6:9,7:17,8:17,9:18,10:25,11:24,12:30,13:37,14:42,15:38,16:35,17:33,18:35,19:59,20:65,21:89,22:91,23:98}},{id:225336126,name:"Randalls Island Park",location:{latitude:40.7938563,longitude:-73.9217786},taxizone:"194",busi:{}},{id:226010200,name:"Jacob K. Javits Playground",location:{latitude:40.8589557,longitude:-73.9349368},taxizone:"243",busi:{0:18,1:14,2:7,3:13,4:11,5:9,6:4,7:7,8:7,9:7,10:9,11:8,12:11,13:11,14:12,15:12,16:11,17:14,18:16,19:16,20:26,21:23,22:23,23:23}},{id:237054245,name:"Plaza de las Americas",location:{latitude:40.8460987,longitude:-73.9381037},taxizone:"244",busi:{0:122,1:71,2:67,3:20,4:20,5:13,6:34,7:46,8:71,9:76,10:83,11:96,12:104,13:118,14:121,15:105,16:108,17:127,18:111,19:92,20:90,21:89,22:90,23:88}},{id:237393267,name:"Southpoint Park",location:{latitude:40.7523609,longitude:-73.9587446},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:237397736,name:"Unknown Park",location:{latitude:40.7145611,longitude:-73.9910703},taxizone:"148",busi:{0:206,1:204,2:159,3:109,4:80,5:37,6:46,7:70,8:92,9:129,10:162,11:168,12:174,13:166,14:170,15:171,16:157,17:161,18:170,19:168,20:167,21:183,22:190,23:178}},{id:239982768,name:"LentSpace",location:{latitude:40.7227168,longitude:-74.0057708},taxizone:"125",busi:{0:187,1:86,2:54,3:22,4:36,5:93,6:187,7:505,8:531,9:662,10:939,11:970,12:1145,13:1224,14:1299,15:1291,16:953,17:867,18:835,19:707,20:582,21:539,22:432,23:325}},{id:239988106,name:"Spring Street Park",location:{latitude:40.724913,longitude:-74.0044414},taxizone:"125",busi:{0:187,1:86,2:54,3:22,4:36,5:93,6:187,7:505,8:531,9:662,10:939,11:970,12:1145,13:1224,14:1299,15:1291,16:953,17:867,18:835,19:707,20:582,21:539,22:432,23:325}},{id:239988114,name:"Minetta Triangle",location:{latitude:40.7298853,longitude:-74.0018589},taxizone:"114",busi:{0:203,1:118,2:74,3:42,4:40,5:70,6:175,7:251,8:383,9:502,10:627,11:628,12:624,13:648,14:651,15:464,16:417,17:445,18:434,19:389,20:348,21:347,22:327,23:234}},{id:239988118,name:"Father Fagan Park",location:{latitude:40.7267003,longitude:-74.0033094},taxizone:"125",busi:{0:187,1:86,2:54,3:22,4:36,5:93,6:187,7:505,8:531,9:662,10:939,11:970,12:1145,13:1224,14:1299,15:1291,16:953,17:867,18:835,19:707,20:582,21:539,22:432,23:325}},{id:239988120,name:"Jefferson Market Garden",location:{latitude:40.7344325,longitude:-73.9995026},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:241883186,name:"Unknown Park",location:{latitude:40.7954341,longitude:-73.9721055},taxizone:"238",busi:{0:1069,1:737,2:396,3:193,4:169,5:270,6:449,7:1016,8:1282,9:1358,10:1482,11:1618,12:1657,13:1659,14:1696,15:1600,16:1552,17:1699,18:1568,19:1554,20:1434,21:1420,22:1489,23:1722}},{id:242113355,name:"Playground One",location:{latitude:40.7122529,longitude:-73.9974005},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:244977216,name:"William E. Passannante Ballfield",location:{latitude:40.728579,longitude:-74.0022425},taxizone:"114",busi:{0:203,1:118,2:74,3:42,4:40,5:70,6:175,7:251,8:383,9:502,10:627,11:628,12:624,13:648,14:651,15:464,16:417,17:445,18:434,19:389,20:348,21:347,22:327,23:234}},{id:244978444,name:"Winston Churchill Square",location:{latitude:40.7298571,longitude:-74.0024499},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:246964616,name:"Booker T Washington Playground",location:{latitude:40.8009598,longitude:-73.9637796},taxizone:"24",busi:{0:1081,1:558,2:410,3:230,4:276,5:260,6:1323,7:1151,8:1176,9:1306,10:1285,11:1356,12:1366,13:1346,14:1362,15:1368,16:1412,17:1439,18:1729,19:1774,20:1582,21:1513,22:1513,23:1641}},{id:249665058,name:"Playground of the Americas",location:{latitude:40.728006,longitude:-74.0026728},taxizone:"125",busi:{0:187,1:86,2:54,3:22,4:36,5:93,6:187,7:505,8:531,9:662,10:939,11:970,12:1145,13:1224,14:1299,15:1291,16:953,17:867,18:835,19:707,20:582,21:539,22:432,23:325}},{id:250049345,name:"Unknown Park",location:{latitude:40.7195161,longitude:-74.0109504},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:250051493,name:"Unknown Park",location:{latitude:40.7178178,longitude:-74.0112569},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:250265505,name:"Hartman Triangle",location:{latitude:40.7207559,longitude:-73.9806992},taxizone:"4",busi:{0:535,1:251,2:149,3:82,4:73,5:130,6:161,7:461,8:974,9:1002,10:1154,11:1220,12:1306,13:1304,14:1496,15:1569,16:1519,17:1839,18:1885,19:1851,20:1352,21:1274,22:1414,23:1405}},{id:252823151,name:"Straus Square",location:{latitude:40.7142374,longitude:-73.9899111},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:254594895,name:"Audubon Playground",location:{latitude:40.8416095,longitude:-73.9381178},taxizone:"244",busi:{0:122,1:71,2:67,3:20,4:20,5:13,6:34,7:46,8:71,9:76,10:83,11:96,12:104,13:118,14:121,15:105,16:108,17:127,18:111,19:92,20:90,21:89,22:90,23:88}},{id:257389723,name:"Twentyfour Sycamores Park",location:{latitude:40.7594475,longitude:-73.9586677},taxizone:"140",busi:{0:191,1:133,2:111,3:71,4:71,5:82,6:121,7:301,8:287,9:268,10:280,11:276,12:280,13:282,14:323,15:327,16:329,17:351,18:347,19:322,20:309,21:310,22:300,23:314}},{id:257671578,name:"Penn South Playground",location:{latitude:40.7474929,longitude:-73.9987079},taxizone:"68",busi:{0:642,1:392,2:220,3:129,4:122,5:159,6:228,7:407,8:784,9:802,10:809,11:899,12:979,13:985,14:908,15:917,16:907,17:1122,18:1284,19:1278,20:1139,21:1143,22:1077,23:940}},{id:264003876,name:"Paley Park",location:{latitude:40.7603437,longitude:-73.9750748},taxizone:"161",busi:{0:901,1:699,2:453,3:224,4:143,5:73,6:70,7:91,8:138,9:195,10:246,11:380,12:473,13:479,14:509,15:518,16:513,17:660,18:783,19:817,20:814,21:835,22:858,23:1102}},{id:264851981,name:"Big Screen Plaza1",location:{latitude:40.7472248,longitude:-73.990373},taxizone:"186",busi:{0:308,1:187,2:92,3:78,4:81,5:193,6:526,7:574,8:703,9:688,10:852,11:860,12:869,13:848,14:853,15:845,16:800,17:862,18:830,19:818,20:752,21:615,22:568,23:523}},{id:266077859,name:"Hells Kitchen Park",location:{latitude:40.7629731,longitude:-73.9925633},taxizone:"48",busi:{0:623,1:262,2:141,3:93,4:96,5:199,6:487,7:1049,8:1075,9:1398,10:1859,11:2466,12:2502,13:2496,14:2593,15:2652,16:2472,17:2823,18:2796,19:2724,20:1602,21:1525,22:1327,23:937}},{id:266097823,name:"Matthews-Palmer Playground",location:{latitude:40.7613978,longitude:-73.9927341},taxizone:"48",busi:{0:623,1:262,2:141,3:93,4:96,5:199,6:487,7:1049,8:1075,9:1398,10:1859,11:2466,12:2502,13:2496,14:2593,15:2652,16:2472,17:2823,18:2796,19:2724,20:1602,21:1525,22:1327,23:937}},{id:266113539,name:"Ramone Aponte Park",location:{latitude:40.7614489,longitude:-73.9893455},taxizone:"48",busi:{0:623,1:262,2:141,3:93,4:96,5:199,6:487,7:1049,8:1075,9:1398,10:1859,11:2466,12:2502,13:2496,14:2593,15:2652,16:2472,17:2823,18:2796,19:2724,20:1602,21:1525,22:1327,23:937}},{id:270791455,name:"Freeman Plaza West",location:{latitude:40.7242344,longitude:-74.0074749},taxizone:"125",busi:{0:187,1:86,2:54,3:22,4:36,5:93,6:187,7:505,8:531,9:662,10:939,11:970,12:1145,13:1224,14:1299,15:1291,16:953,17:867,18:835,19:707,20:582,21:539,22:432,23:325}},{id:281499420,name:"Lower East Side Playground",location:{latitude:40.7293823,longitude:-73.9829156},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:287462475,name:"Bellevue South Park",location:{latitude:40.7400387,longitude:-73.9780496},taxizone:"137",busi:{0:1837,1:1293,2:814,3:462,4:337,5:158,6:240,7:456,8:415,9:568,10:653,11:672,12:724,13:752,14:887,15:892,16:897,17:1103,18:1527,19:1756,20:1765,21:1927,22:2055,23:2253}},{id:292727035,name:"Unknown Park",location:{latitude:40.7111594,longitude:-74.0058691},taxizone:"209",busi:{0:597,1:438,2:280,3:183,4:177,5:148,6:341,7:742,8:819,9:990,10:996,11:1027,12:1037,13:1069,14:1187,15:1188,16:1132,17:1410,18:1481,19:1455,20:1295,21:1180,22:1054,23:990}},{id:293720019,name:"Balsley Park",location:{latitude:40.7674642,longitude:-73.9856951},taxizone:"48",busi:{0:623,1:262,2:141,3:93,4:96,5:199,6:487,7:1049,8:1075,9:1398,10:1859,11:2466,12:2502,13:2496,14:2593,15:2652,16:2472,17:2823,18:2796,19:2724,20:1602,21:1525,22:1327,23:937}},{id:295969929,name:"St. Catherine's Park",location:{latitude:40.7652136,longitude:-73.9587494},taxizone:"141",busi:{0:236,1:174,2:114,3:92,4:91,5:109,6:343,7:328,8:337,9:386,10:390,11:392,12:395,13:427,14:468,15:464,16:459,17:448,18:440,19:432,20:368,21:358,22:351,23:370}},{id:304129981,name:"Montgomery Triangle Park",location:{latitude:40.7142248,longitude:-73.9851113},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:317355661,name:"Henry M. Jackson Playground",location:{latitude:40.7139646,longitude:-73.981496},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:318328998,name:"Unknown Park",location:{latitude:40.8005903,longitude:-73.9581806},taxizone:"41",busi:{0:163,1:120,2:89,3:65,4:34,5:25,6:51,7:47,8:72,9:79,10:90,11:100,12:118,13:130,14:151,15:147,16:138,17:157,18:181,19:180,20:181,21:181,22:184,23:204}},{id:318329003,name:"Roosevelt Triangle",location:{latitude:40.8113293,longitude:-73.9544008},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:319615856,name:"Unknown Park",location:{latitude:40.7601079,longitude:-73.9505807},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:321905068,name:"Riverwalk Commons",location:{latitude:40.7589617,longitude:-73.9528666},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:324750157,name:"First Park",location:{latitude:40.7234173,longitude:-73.9892626},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:324975287,name:"Unknown Park",location:{latitude:40.714787,longitude:-74.001878},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:324975291,name:"Canal Park",location:{latitude:40.7254013,longitude:-74.0105312},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:325008929,name:"Alfred E. Smith Playground",location:{latitude:40.710613,longitude:-73.9974893},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:325008930,name:"Tanahey Playground",location:{latitude:40.7101263,longitude:-73.9953543},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:329041506,name:"Freeman Plaza East",location:{latitude:40.7240917,longitude:-74.0065116},taxizone:"125",busi:{0:187,1:86,2:54,3:22,4:36,5:93,6:187,7:505,8:531,9:662,10:939,11:970,12:1145,13:1224,14:1299,15:1291,16:953,17:867,18:835,19:707,20:582,21:539,22:432,23:325}},{id:329041537,name:"Freeman Plaza North",location:{latitude:40.7243541,longitude:-74.0065666},taxizone:"125",busi:{0:187,1:86,2:54,3:22,4:36,5:93,6:187,7:505,8:531,9:662,10:939,11:970,12:1145,13:1224,14:1299,15:1291,16:953,17:867,18:835,19:707,20:582,21:539,22:432,23:325}},{id:329988114,name:"Verdi Square",location:{latitude:40.7791313,longitude:-73.9816274},taxizone:"143",busi:{0:156,1:110,2:60,3:43,4:36,5:40,6:48,7:88,8:261,9:270,10:249,11:250,12:241,13:248,14:259,15:204,16:180,17:203,18:198,19:195,20:201,21:197,22:187,23:178}},{id:334715965,name:"Poses Park",location:{latitude:40.7674465,longitude:-73.9635001},taxizone:"237",busi:{0:903,1:734,2:435,3:282,4:228,5:182,6:236,7:489,8:766,9:837,10:943,11:1325,12:1386,13:1405,14:1424,15:1419,16:1152,17:1272,18:1175,19:1184,20:1163,21:1155,22:1160,23:1135}},{id:343765233,name:"Peter Detmold Park",location:{latitude:40.7536627,longitude:-73.9635157},taxizone:"229",busi:{0:218,1:131,2:84,3:47,4:37,5:85,6:169,7:286,8:266,9:447,10:487,11:532,12:569,13:580,14:717,15:723,16:709,17:763,18:881,19:871,20:756,21:614,22:597,23:418}},{id:351201923,name:"Tramway Plaza",location:{latitude:40.7609599,longitude:-73.9644278},taxizone:"141",busi:{0:236,1:174,2:114,3:92,4:91,5:109,6:343,7:328,8:337,9:386,10:390,11:392,12:395,13:427,14:468,15:464,16:459,17:448,18:440,19:432,20:368,21:358,22:351,23:370}},{id:353000933,name:"Ruppert Park",location:{latitude:40.7809662,longitude:-73.9501489},taxizone:"263",busi:{0:653,1:457,2:324,3:178,4:109,5:110,6:267,7:201,8:236,9:295,10:449,11:593,12:606,13:613,14:614,15:618,16:601,17:604,18:613,19:593,20:530,21:523,22:514,23:613}},{id:353133685,name:"Park Avenue Malls",location:{latitude:40.7869307,longitude:-73.9522659},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:357523569,name:"Unknown Park",location:{latitude:40.8339778,longitude:-73.9452121},taxizone:"244",busi:{0:122,1:71,2:67,3:20,4:20,5:13,6:34,7:46,8:71,9:76,10:83,11:96,12:104,13:118,14:121,15:105,16:108,17:127,18:111,19:92,20:90,21:89,22:90,23:88}},{id:362684406,name:"Unknown Park",location:{latitude:40.8033166,longitude:-73.954381},taxizone:"41",busi:{0:163,1:120,2:89,3:65,4:34,5:25,6:51,7:47,8:72,9:79,10:90,11:100,12:118,13:130,14:151,15:147,16:138,17:157,18:181,19:180,20:181,21:181,22:184,23:204}},{id:362826160,name:"Harlem Valley Garden",location:{latitude:40.8145685,longitude:-73.9435785},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:362827398,name:"Mandela Garden",location:{latitude:40.8107974,longitude:-73.9499718},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:371120098,name:"Chealsea Green",location:{latitude:40.7415933,longitude:-73.9960607},taxizone:"90",busi:{0:235,1:144,2:90,3:41,4:45,5:114,6:156,7:524,8:553,9:566,10:581,11:593,12:606,13:604,14:690,15:702,16:669,17:792,18:790,19:787,20:651,21:591,22:493,23:425}},{id:372721441,name:"Teardrop Park",location:{latitude:40.7167736,longitude:-74.0156166},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:375369088,name:"Unknown Park",location:{latitude:40.7090264,longitude:-74.0080705},taxizone:"87",busi:{0:1092,1:860,2:538,3:307,4:198,5:121,6:148,7:142,8:290,9:387,10:466,11:583,12:672,13:667,14:689,15:695,16:652,17:822,18:1172,19:1235,20:1209,21:1233,22:1386,23:1466}},{id:375369089,name:"Unknown Park",location:{latitude:40.7091468,longitude:-74.0082314},taxizone:"87",busi:{0:1092,1:860,2:538,3:307,4:198,5:121,6:148,7:142,8:290,9:387,10:466,11:583,12:672,13:667,14:689,15:695,16:652,17:822,18:1172,19:1235,20:1209,21:1233,22:1386,23:1466}},{id:376015439,name:"CU SIPA Commons",location:{latitude:40.807298,longitude:-73.9599478},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:376015442,name:"CU SE Field",location:{latitude:40.806367,longitude:-73.9623446},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:378359193,name:"Vincent F. Albano Jr. Playground",location:{latitude:40.7419438,longitude:-73.9783848},taxizone:"137",busi:{0:1837,1:1293,2:814,3:462,4:337,5:158,6:240,7:456,8:415,9:568,10:653,11:672,12:724,13:752,14:887,15:892,16:897,17:1103,18:1527,19:1756,20:1765,21:1927,22:2055,23:2253}},{id:378364365,name:"Peter's Field",location:{latitude:40.7361158,longitude:-73.9815688},taxizone:"107",busi:{0:129,1:71,2:50,3:29,4:23,5:27,6:46,7:81,8:85,9:148,10:149,11:147,12:152,13:155,14:168,15:182,16:179,17:199,18:194,19:191,20:166,21:156,22:154,23:168}},{id:379634622,name:"Unknown Park",location:{latitude:40.736497,longitude:-74.0103959},taxizone:"158",busi:{0:452,1:281,2:171,3:98,4:82,5:102,6:111,7:214,8:387,9:434,10:531,11:575,12:734,13:742,14:730,15:722,16:699,17:754,18:737,19:724,20:686,21:677,22:649,23:746}},{id:379634625,name:"Unknown Park",location:{latitude:40.7346149,longitude:-74.0105573},taxizone:"158",busi:{0:452,1:281,2:171,3:98,4:82,5:102,6:111,7:214,8:387,9:434,10:531,11:575,12:734,13:742,14:730,15:722,16:699,17:754,18:737,19:724,20:686,21:677,22:649,23:746}},{id:379657566,name:"Unknown Park",location:{latitude:40.7526667,longitude:-73.9704924},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:379747570,name:"Unknown Park",location:{latitude:40.7515363,longitude:-73.9697087},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:379749111,name:"Unknown Park",location:{latitude:40.7535038,longitude:-73.9704538},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:379758354,name:"Unknown Park",location:{latitude:40.7495206,longitude:-73.9760712},taxizone:"170",busi:{0:191,1:112,2:75,3:53,4:56,5:74,6:98,7:227,8:219,9:373,10:379,11:373,12:383,13:400,14:442,15:468,16:476,17:606,18:615,19:568,20:475,21:442,22:422,23:351}},{id:380425199,name:"Unknown Park",location:{latitude:40.7516246,longitude:-73.9730606},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:385106972,name:"Ralph Bunche Park",location:{latitude:40.7493256,longitude:-73.969745},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:395678163,name:"Unknown Park",location:{latitude:40.7445517,longitude:-73.9862513},taxizone:"164",busi:{0:43,1:23,2:17,3:18,4:17,5:13,6:4,7:10,8:10,9:10,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:14,18:16,19:29,20:36,21:34,22:46,23:51}},{id:400780940,name:"Teardrop Park South",location:{latitude:40.7157927,longitude:-74.0160302},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:400782867,name:"Unknown Park",location:{latitude:40.714576,longitude:-74.0139461},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:400782868,name:"Unknown Park",location:{latitude:40.7063887,longitude:-74.0165613},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:400782869,name:"Vesey Green",location:{latitude:40.7149552,longitude:-74.0166948},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:400782871,name:"Unknown Park",location:{latitude:40.71596,longitude:-74.0135378},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:400782872,name:"West Thames Park",location:{latitude:40.7088371,longitude:-74.0157564},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:410310399,name:"Coleman Playground",location:{latitude:40.7111652,longitude:-73.9933311},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:413055246,name:"City Hall Park",location:{latitude:40.7128841,longitude:-74.0060845},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:427818536,name:"Central Park",location:{latitude:40.7825293,longitude:-73.9655068},taxizone:"43",busi:{0:924,1:607,2:331,3:199,4:139,5:177,6:232,7:400,8:754,9:984,10:1079,11:1154,12:1416,13:1444,14:1499,15:1533,16:1479,17:1299,18:1127,19:1102,20:1043,21:1057,22:1377,23:1266}},{id:440055119,name:"Minetta Green",location:{latitude:40.7303446,longitude:-74.0016029},taxizone:"114",busi:{0:203,1:118,2:74,3:42,4:40,5:70,6:175,7:251,8:383,9:502,10:627,11:628,12:624,13:648,14:651,15:464,16:417,17:445,18:434,19:389,20:348,21:347,22:327,23:234}},{id:440055120,name:"West Fourth Street Courts",location:{latitude:40.7312486,longitude:-74.0009604},taxizone:"114",busi:{0:203,1:118,2:74,3:42,4:40,5:70,6:175,7:251,8:383,9:502,10:627,11:628,12:624,13:648,14:651,15:464,16:417,17:445,18:434,19:389,20:348,21:347,22:327,23:234}},{id:449139914,name:"Urban Park",location:{latitude:40.7235239,longitude:-74.0034678},taxizone:"211",busi:{0:623,1:332,2:146,3:114,4:107,5:141,6:245,7:362,8:868,9:969,10:1187,11:1446,12:1739,13:1763,14:1708,15:1738,16:1721,17:2197,18:2394,19:2393,20:1658,21:1658,22:1853,23:1449}},{id:453456965,name:"Unknown Park",location:{latitude:40.7157919,longitude:-74.006181},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:453461400,name:"Elizabeth Street Garden",location:{latitude:40.7221953,longitude:-73.9947837},taxizone:"144",busi:{0:673,1:426,2:296,3:215,4:142,5:144,6:189,7:353,8:456,9:548,10:570,11:587,12:703,13:764,14:791,15:794,16:729,17:774,18:714,19:710,20:692,21:692,22:695,23:753}},{id:453528989,name:"Dry Dock Playground",location:{latitude:40.7254397,longitude:-73.9754832},taxizone:"4",busi:{0:535,1:251,2:149,3:82,4:73,5:130,6:161,7:461,8:974,9:1002,10:1154,11:1220,12:1306,13:1304,14:1496,15:1569,16:1519,17:1839,18:1885,19:1851,20:1352,21:1274,22:1414,23:1405}},{id:455314804,name:"Trygve Lie Plaza",location:{latitude:40.7484918,longitude:-73.9704129},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:458511171,name:"Unknown Park",location:{latitude:40.7603632,longitude:-73.9823986},taxizone:"230",busi:{0:626,1:438,2:289,3:178,4:76,5:40,6:35,7:80,8:196,9:269,10:356,11:528,12:616,13:653,14:639,15:646,16:640,17:640,18:697,19:697,20:687,21:618,22:583,23:586}},{id:458642434,name:"Unknown Park",location:{latitude:40.7647609,longitude:-73.9828725},taxizone:"163",busi:{0:62,1:113,2:24,3:15,4:19,5:27,6:7,7:4,8:3,9:3,10:3,11:4,12:4,13:5,14:5,15:5,16:5,17:4,18:4,19:4,20:4,21:5,22:4,23:4}},{id:458642435,name:"Unknown Park",location:{latitude:40.7661451,longitude:-73.9830132},taxizone:"163",busi:{0:62,1:113,2:24,3:15,4:19,5:27,6:7,7:4,8:3,9:3,10:3,11:4,12:4,13:5,14:5,15:5,16:5,17:4,18:4,19:4,20:4,21:5,22:4,23:4}},{id:462302471,name:"Manuel Plaza",location:{latitude:40.7276683,longitude:-73.9921173},taxizone:"113",busi:{0:14,1:7,2:8,3:8,4:8,5:10,6:9,7:26,8:52,9:50,10:52,11:60,12:61,13:58,14:57,15:57,16:34,17:31,18:31,19:29,20:29,21:19,22:20,23:17}},{id:468472672,name:"Unknown Park",location:{latitude:40.7610842,longitude:-73.9783735},taxizone:"161",busi:{0:901,1:699,2:453,3:224,4:143,5:73,6:70,7:91,8:138,9:195,10:246,11:380,12:473,13:479,14:509,15:518,16:513,17:660,18:783,19:817,20:814,21:835,22:858,23:1102}},{id:468485719,name:"Unknown Park",location:{latitude:40.7305654,longitude:-73.9748081},taxizone:"224",busi:{0:88,1:55,2:33,3:24,4:21,5:19,6:28,7:53,8:52,9:43,10:44,11:43,12:48,13:50,14:49,15:50,16:55,17:80,18:80,19:78,20:83,21:79,22:84,23:85}},{id:468548548,name:"West 111th Street People's Garden",location:{latitude:40.803897,longitude:-73.9635414},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:468555499,name:"Unknown Park",location:{latitude:40.81501,longitude:-73.9622763},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:468591558,name:"West 104th Street Garden",location:{latitude:40.7968848,longitude:-73.9619463},taxizone:"151",busi:{0:644,1:470,2:271,3:155,4:157,5:332,6:793,7:656,8:771,9:804,10:949,11:941,12:932,13:933,14:985,15:1e3,16:978,17:979,18:1012,19:1014,20:995,21:941,22:920,23:926}},{id:469101347,name:"Tenzer Garden",location:{latitude:40.8498324,longitude:-73.9291411},taxizone:"243",busi:{0:18,1:14,2:7,3:13,4:11,5:9,6:4,7:7,8:7,9:7,10:9,11:8,12:11,13:11,14:12,15:12,16:11,17:14,18:16,19:16,20:26,21:23,22:23,23:23}},{id:469101348,name:"Danciger Quadrangle",location:{latitude:40.850316,longitude:-73.928956},taxizone:"243",busi:{0:18,1:14,2:7,3:13,4:11,5:9,6:4,7:7,8:7,9:7,10:9,11:8,12:11,13:11,14:12,15:12,16:11,17:14,18:16,19:16,20:26,21:23,22:23,23:23}},{id:471549306,name:"NYC AIDS Memorial Park at St. Vincent's Triangle",location:{latitude:40.7371836,longitude:-74.0011967},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:473565702,name:"Rapkin-Gayle Plaza",location:{latitude:40.7204001,longitude:-73.9991398},taxizone:"144",busi:{0:673,1:426,2:296,3:215,4:142,5:144,6:189,7:353,8:456,9:548,10:570,11:587,12:703,13:764,14:791,15:794,16:729,17:774,18:714,19:710,20:692,21:692,22:695,23:753}},{id:474169900,name:"Lieutenant William Tighe Triangle",location:{latitude:40.8658571,longitude:-73.9279994},taxizone:"243",busi:{0:18,1:14,2:7,3:13,4:11,5:9,6:4,7:7,8:7,9:7,10:9,11:8,12:11,13:11,14:12,15:12,16:11,17:14,18:16,19:16,20:26,21:23,22:23,23:23}},{id:474173970,name:"Sherman Creek",location:{latitude:40.8608411,longitude:-73.9182038},taxizone:"127",busi:{0:1372,1:957,2:553,3:458,4:366,5:377,6:920,7:891,8:900,9:957,10:1051,11:1130,12:1345,13:1487,14:1483,15:1489,16:1471,17:1525,18:1743,19:1886,20:1811,21:1665,22:1710,23:1749}},{id:474175699,name:"Unknown Park",location:{latitude:40.8601542,longitude:-73.9185091},taxizone:"127",busi:{0:1372,1:957,2:553,3:458,4:366,5:377,6:920,7:891,8:900,9:957,10:1051,11:1130,12:1345,13:1487,14:1483,15:1489,16:1471,17:1525,18:1743,19:1886,20:1811,21:1665,22:1710,23:1749}},{id:474199302,name:"Monsignor Kett Playground",location:{latitude:40.8625304,longitude:-73.9209396},taxizone:"127",busi:{0:1372,1:957,2:553,3:458,4:366,5:377,6:920,7:891,8:900,9:957,10:1051,11:1130,12:1345,13:1487,14:1483,15:1489,16:1471,17:1525,18:1743,19:1886,20:1811,21:1665,22:1710,23:1749}},{id:476650290,name:"Unknown Park",location:{latitude:40.8379833,longitude:-73.9459572},taxizone:"244",busi:{0:122,1:71,2:67,3:20,4:20,5:13,6:34,7:46,8:71,9:76,10:83,11:96,12:104,13:118,14:121,15:105,16:108,17:127,18:111,19:92,20:90,21:89,22:90,23:88}},{id:479358564,name:"Rooftop Park",location:{latitude:40.7576241,longitude:-73.9686533},taxizone:"229",busi:{0:218,1:131,2:84,3:47,4:37,5:85,6:169,7:286,8:266,9:447,10:487,11:532,12:569,13:580,14:717,15:723,16:709,17:763,18:881,19:871,20:756,21:614,22:597,23:418}},{id:480966277,name:"148th Street Block Association Park",location:{latitude:40.8243789,longitude:-73.9389915},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:483509921,name:"Poinsettia Community Garden",location:{latitude:40.808972,longitude:-73.9588785},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:483509926,name:"Ruggles Commons",location:{latitude:40.8056356,longitude:-73.9628429},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:483702983,name:"Augustus Saint-Gaudens Playground",location:{latitude:40.7355499,longitude:-73.9821423},taxizone:"107",busi:{0:129,1:71,2:50,3:29,4:23,5:27,6:46,7:81,8:85,9:148,10:149,11:147,12:152,13:155,14:168,15:182,16:179,17:199,18:194,19:191,20:166,21:156,22:154,23:168}},{id:497484756,name:"Albert Capsouto Park",location:{latitude:40.7220549,longitude:-74.0059139},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:498671779,name:"Drumgoole Plaza",location:{latitude:40.7110399,longitude:-74.0041141},taxizone:"209",busi:{0:597,1:438,2:280,3:183,4:177,5:148,6:341,7:742,8:819,9:990,10:996,11:1027,12:1037,13:1069,14:1187,15:1188,16:1132,17:1410,18:1481,19:1455,20:1295,21:1180,22:1054,23:990}},{id:504045549,name:"Unknown Park",location:{latitude:40.7072581,longitude:-74.0083037},taxizone:"87",busi:{0:1092,1:860,2:538,3:307,4:198,5:121,6:148,7:142,8:290,9:387,10:466,11:583,12:672,13:667,14:689,15:695,16:652,17:822,18:1172,19:1235,20:1209,21:1233,22:1386,23:1466}},{id:531272222,name:"CS Garden",location:{latitude:40.8091383,longitude:-73.9599533},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:531580782,name:"Robert Moses Playground",location:{latitude:40.7481156,longitude:-73.9692894},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:538080002,name:"Elizabeth H. Berger Plaza",location:{latitude:40.7066764,longitude:-74.0140208},taxizone:"261",busi:{0:538,1:396,2:234,3:122,4:112,5:124,6:201,7:464,8:746,9:748,10:783,11:815,12:827,13:817,14:836,15:800,16:775,17:952,18:1089,19:1031,20:981,21:976,22:829,23:823}},{id:539005582,name:"Unknown Park",location:{latitude:40.7156052,longitude:-74.0150931},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:544675664,name:"Mitchell Park",location:{latitude:40.8401868,longitude:-73.9400483},taxizone:"244",busi:{0:122,1:71,2:67,3:20,4:20,5:13,6:34,7:46,8:71,9:76,10:83,11:96,12:104,13:118,14:121,15:105,16:108,17:127,18:111,19:92,20:90,21:89,22:90,23:88}},{id:580123906,name:"Mulry Square",location:{latitude:40.7362506,longitude:-74.0010873},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:581666857,name:"Jane Street Garden",location:{latitude:40.738004,longitude:-74.0045481},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:585788256,name:"Central Park Carousel",location:{latitude:40.7699426,longitude:-73.9752476},taxizone:"43",busi:{0:924,1:607,2:331,3:199,4:139,5:177,6:232,7:400,8:754,9:984,10:1079,11:1154,12:1416,13:1444,14:1499,15:1533,16:1479,17:1299,18:1127,19:1102,20:1043,21:1057,22:1377,23:1266}},{id:588483880,name:"Unknown Park",location:{latitude:40.8446978,longitude:-73.9329917},taxizone:"120",busi:{0:165,1:109,2:77,3:67,4:44,5:43,6:53,7:107,8:103,9:108,10:111,11:92,12:89,13:92,14:124,15:129,16:121,17:152,18:157,19:158,20:184,21:190,22:179,23:195}},{id:613509792,name:"Tribeca Park",location:{latitude:40.7202027,longitude:-74.0056402},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:664153164,name:'Bill "Bojangles" Robinson Playground',location:{latitude:40.8252699,longitude:-73.9372963},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:664153165,name:"LaGuardia Corner Garden",location:{latitude:40.7279235,longitude:-73.9988616},taxizone:"114",busi:{0:203,1:118,2:74,3:42,4:40,5:70,6:175,7:251,8:383,9:502,10:627,11:628,12:624,13:648,14:651,15:464,16:417,17:445,18:434,19:389,20:348,21:347,22:327,23:234}},{id:664697032,name:"Monterey Public Garden",location:{latitude:40.785788,longitude:-73.949994},taxizone:"75",busi:{0:142,1:104,2:72,3:55,4:45,5:41,6:80,7:65,8:68,9:83,10:65,11:69,12:75,13:75,14:75,15:86,16:67,17:74,18:92,19:101,20:106,21:114,22:140,23:148}},{id:672251427,name:"Abe Lebewohl Park",location:{latitude:40.7300001,longitude:-73.9870591},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:675913161,name:"Unknown Park",location:{latitude:40.7123128,longitude:-73.9916567},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:675935774,name:"Unknown Park",location:{latitude:40.7147518,longitude:-73.9926339},taxizone:"148",busi:{0:206,1:204,2:159,3:109,4:80,5:37,6:46,7:70,8:92,9:129,10:162,11:168,12:174,13:166,14:170,15:171,16:157,17:161,18:170,19:168,20:167,21:183,22:190,23:178}},{id:675935775,name:"Unknown Park",location:{latitude:40.7187024,longitude:-73.9906477},taxizone:"148",busi:{0:206,1:204,2:159,3:109,4:80,5:37,6:46,7:70,8:92,9:129,10:162,11:168,12:174,13:166,14:170,15:171,16:157,17:161,18:170,19:168,20:167,21:183,22:190,23:178}},{id:675935776,name:"Unknown Park",location:{latitude:40.7178532,longitude:-73.9910848},taxizone:"148",busi:{0:206,1:204,2:159,3:109,4:80,5:37,6:46,7:70,8:92,9:129,10:162,11:168,12:174,13:166,14:170,15:171,16:157,17:161,18:170,19:168,20:167,21:183,22:190,23:178}},{id:675935777,name:"Unknown Park",location:{latitude:40.7167999,longitude:-73.9916173},taxizone:"148",busi:{0:206,1:204,2:159,3:109,4:80,5:37,6:46,7:70,8:92,9:129,10:162,11:168,12:174,13:166,14:170,15:171,16:157,17:161,18:170,19:168,20:167,21:183,22:190,23:178}},{id:675935778,name:"Unknown Park",location:{latitude:40.715654,longitude:-73.9922088},taxizone:"148",busi:{0:206,1:204,2:159,3:109,4:80,5:37,6:46,7:70,8:92,9:129,10:162,11:168,12:174,13:166,14:170,15:171,16:157,17:161,18:170,19:168,20:167,21:183,22:190,23:178}},{id:675935779,name:"Unknown Park",location:{latitude:40.7113496,longitude:-73.9922318},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:675935780,name:"Unknown Park",location:{latitude:40.7120492,longitude:-73.9923541},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:675937259,name:"Unknown Park",location:{latitude:40.7142311,longitude:-73.9970905},taxizone:"148",busi:{0:206,1:204,2:159,3:109,4:80,5:37,6:46,7:70,8:92,9:129,10:162,11:168,12:174,13:166,14:170,15:171,16:157,17:161,18:170,19:168,20:167,21:183,22:190,23:178}},{id:675962287,name:"Sophie Irene Loeb Playground",location:{latitude:40.7133595,longitude:-73.9943004},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:684670439,name:"Unknown Park",location:{latitude:40.7426586,longitude:-73.9756162},taxizone:"137",busi:{0:1837,1:1293,2:814,3:462,4:337,5:158,6:240,7:456,8:415,9:568,10:653,11:672,12:724,13:752,14:887,15:892,16:897,17:1103,18:1527,19:1756,20:1765,21:1927,22:2055,23:2253}},{id:687661469,name:"First Street Green Cultural Park",location:{latitude:40.723751,longitude:-73.9903251},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:702078581,name:"McMahon Lawn",location:{latitude:40.7713558,longitude:-73.9865241},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:705304809,name:"30 Lincoln Plaza",location:{latitude:40.7707961,longitude:-73.9814012},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:718438725,name:"Murphy Brothers Playground",location:{latitude:40.7302393,longitude:-73.973219},taxizone:"224",busi:{0:88,1:55,2:33,3:24,4:21,5:19,6:28,7:53,8:52,9:43,10:44,11:43,12:48,13:50,14:49,15:50,16:55,17:80,18:80,19:78,20:83,21:79,22:84,23:85}},{id:718471254,name:"Unknown Park",location:{latitude:40.7640426,longitude:-73.9544696},taxizone:"140",busi:{0:191,1:133,2:111,3:71,4:71,5:82,6:121,7:301,8:287,9:268,10:280,11:276,12:280,13:282,14:323,15:327,16:329,17:351,18:347,19:322,20:309,21:310,22:300,23:314}},{id:727964618,name:"Lafayette Square",location:{latitude:40.8035524,longitude:-73.9580337},taxizone:"41",busi:{0:163,1:120,2:89,3:65,4:34,5:25,6:51,7:47,8:72,9:79,10:90,11:100,12:118,13:130,14:151,15:147,16:138,17:157,18:181,19:180,20:181,21:181,22:184,23:204}},{id:743395860,name:"The Elevated Acre",location:{latitude:40.7032051,longitude:-74.0087006},taxizone:"88",busi:{0:190,1:120,2:84,3:57,4:36,5:42,6:63,7:138,8:190,9:383,10:421,11:504,12:510,13:511,14:515,15:516,16:436,17:409,18:436,19:388,20:321,21:317,22:306,23:274}},{id:759460622,name:"Minerva Bernadino Green Street",location:{latitude:40.8028294,longitude:-73.9640762},taxizone:"24",busi:{0:1081,1:558,2:410,3:230,4:276,5:260,6:1323,7:1151,8:1176,9:1306,10:1285,11:1356,12:1366,13:1346,14:1362,15:1368,16:1412,17:1439,18:1729,19:1774,20:1582,21:1513,22:1513,23:1641}},{id:765274333,name:"Playground 11",location:{latitude:40.7310982,longitude:-73.9763847},taxizone:"224",busi:{0:88,1:55,2:33,3:24,4:21,5:19,6:28,7:53,8:52,9:43,10:44,11:43,12:48,13:50,14:49,15:50,16:55,17:80,18:80,19:78,20:83,21:79,22:84,23:85}},{id:765274338,name:"Unknown Park",location:{latitude:40.7324171,longitude:-73.9792686},taxizone:"224",busi:{0:88,1:55,2:33,3:24,4:21,5:19,6:28,7:53,8:52,9:43,10:44,11:43,12:48,13:50,14:49,15:50,16:55,17:80,18:80,19:78,20:83,21:79,22:84,23:85}},{id:769716502,name:"Hillman Park",location:{latitude:40.7151983,longitude:-73.982351},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:769716504,name:"Sol Lain Playground",location:{latitude:40.7142341,longitude:-73.9838951},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:793720073,name:"Unknown Park",location:{latitude:40.7444405,longitude:-73.9717305},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:800212158,name:"Community Island Pond",location:{latitude:40.702575,longitude:-74.0054638},taxizone:"87",busi:{0:1092,1:860,2:538,3:307,4:198,5:121,6:148,7:142,8:290,9:387,10:466,11:583,12:672,13:667,14:689,15:695,16:652,17:822,18:1172,19:1235,20:1209,21:1233,22:1386,23:1466}},{id:800212164,name:"Catherine Slip Malls",location:{latitude:40.7095081,longitude:-73.9961565},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:821278619,name:"Small Square",location:{latitude:40.8170021,longitude:-73.9588657},taxizone:"152",busi:{0:1098,1:653,2:340,3:213,4:162,5:179,6:333,7:342,8:383,9:503,10:587,11:774,12:884,13:917,14:909,15:923,16:916,17:1074,18:1032,19:1014,20:992,21:970,22:954,23:959}},{id:833335529,name:"Little Island",location:{latitude:40.7420048,longitude:-74.0106097},taxizone:"152",busi:{0:1098,1:653,2:340,3:213,4:162,5:179,6:333,7:342,8:383,9:503,10:587,11:774,12:884,13:917,14:909,15:923,16:916,17:1074,18:1032,19:1014,20:992,21:970,22:954,23:959}},{id:837603512,name:"Pier 26",location:{latitude:40.7212402,longitude:-74.0146496},taxizone:"152",busi:{0:1098,1:653,2:340,3:213,4:162,5:179,6:333,7:342,8:383,9:503,10:587,11:774,12:884,13:917,14:909,15:923,16:916,17:1074,18:1032,19:1014,20:992,21:970,22:954,23:959}},{id:889019981,name:"Lighthouse Park",location:{latitude:40.7719982,longitude:-73.9409857},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:889906332,name:"Unknown Park",location:{latitude:40.7575423,longitude:-73.9528616},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:889906443,name:"Unknown Park",location:{latitude:40.7674104,longitude:-73.9451183},taxizone:"202",busi:{0:557,1:377,2:223,3:121,4:109,5:153,6:428,7:539,8:540,9:596,10:529,11:519,12:530,13:528,14:543,15:541,16:535,17:562,18:656,19:653,20:613,21:606,22:610,23:587}},{id:890862707,name:"Unknown Park",location:{latitude:40.7127252,longitude:-73.9985494},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:890862858,name:"Fishbridge Park Garden",location:{latitude:40.7090621,longitude:-74.0013335},taxizone:"209",busi:{0:597,1:438,2:280,3:183,4:177,5:148,6:341,7:742,8:819,9:990,10:996,11:1027,12:1037,13:1069,14:1187,15:1188,16:1132,17:1410,18:1481,19:1455,20:1295,21:1180,22:1054,23:990}},{id:890862859,name:"Pearl Street Playground",location:{latitude:40.7079571,longitude:-74.003871},taxizone:"209",busi:{0:597,1:438,2:280,3:183,4:177,5:148,6:341,7:742,8:819,9:990,10:996,11:1027,12:1037,13:1069,14:1187,15:1188,16:1132,17:1410,18:1481,19:1455,20:1295,21:1180,22:1054,23:990}},{id:891074490,name:"Unknown Park",location:{latitude:40.7104212,longitude:-74.0058293},taxizone:"209",busi:{0:597,1:438,2:280,3:183,4:177,5:148,6:341,7:742,8:819,9:990,10:996,11:1027,12:1037,13:1069,14:1187,15:1188,16:1132,17:1410,18:1481,19:1455,20:1295,21:1180,22:1054,23:990}},{id:891134387,name:"Unknown Park",location:{latitude:40.7165399,longitude:-74.0148155},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:891134388,name:"Unknown Park",location:{latitude:40.7173682,longitude:-74.014168},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:893841834,name:"Unknown Park",location:{latitude:40.7352313,longitude:-74.0017222},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:893841889,name:"Washington Commons",location:{latitude:40.7384531,longitude:-74.0083015},taxizone:"158",busi:{0:452,1:281,2:171,3:98,4:82,5:102,6:111,7:214,8:387,9:434,10:531,11:575,12:734,13:742,14:730,15:722,16:699,17:754,18:737,19:724,20:686,21:677,22:649,23:746}},{id:894035808,name:"Unknown Park",location:{latitude:40.7298816,longitude:-74.002776},taxizone:"249",busi:{0:127,1:90,2:53,3:40,4:36,5:41,6:93,7:121,8:129,9:132,10:142,11:144,12:138,13:135,14:158,15:157,16:150,17:200,18:190,19:189,20:188,21:186,22:176,23:181}},{id:895611180,name:"West 87th Street Garden",location:{latitude:40.787094,longitude:-73.9709212},taxizone:"238",busi:{0:1069,1:737,2:396,3:193,4:169,5:270,6:449,7:1016,8:1282,9:1358,10:1482,11:1618,12:1657,13:1659,14:1696,15:1600,16:1552,17:1699,18:1568,19:1554,20:1434,21:1420,22:1489,23:1722}},{id:895757747,name:"Joan of Arc Park",location:{latitude:40.7942118,longitude:-73.976389},taxizone:"238",busi:{0:1069,1:737,2:396,3:193,4:169,5:270,6:449,7:1016,8:1282,9:1358,10:1482,11:1618,12:1657,13:1659,14:1696,15:1600,16:1552,17:1699,18:1568,19:1554,20:1434,21:1420,22:1489,23:1722}},{id:904714816,name:"Happy Warrior Playground",location:{latitude:40.7954197,longitude:-73.9684305},taxizone:"151",busi:{0:644,1:470,2:271,3:155,4:157,5:332,6:793,7:656,8:771,9:804,10:949,11:941,12:932,13:933,14:985,15:1e3,16:978,17:979,18:1012,19:1014,20:995,21:941,22:920,23:926}},{id:918302837,name:"Unknown Park",location:{latitude:40.7777983,longitude:-73.9873252},taxizone:"143",busi:{0:156,1:110,2:60,3:43,4:36,5:40,6:48,7:88,8:261,9:270,10:249,11:250,12:241,13:248,14:259,15:204,16:180,17:203,18:198,19:195,20:201,21:197,22:187,23:178}},{id:943557523,name:"Dorrence Brook Square",location:{latitude:40.8181963,longitude:-73.9472809},taxizone:"42",busi:{0:436,1:293,2:160,3:98,4:83,5:101,6:201,7:357,8:515,9:520,10:656,11:651,12:659,13:662,14:670,15:654,16:666,17:734,18:699,19:680,20:656,21:645,22:660,23:662}},{id:954250916,name:"Dekovats Park",location:{latitude:40.7793517,longitude:-73.9442344},taxizone:"262",busi:{0:1169,1:799,2:500,3:310,4:300,5:310,6:814,7:1165,8:1234,9:1379,10:1424,11:1109,12:1083,13:1081,14:1086,15:1099,16:1087,17:1856,18:2144,19:2395,20:1659,21:1898,22:2121,23:2003}},{id:954250919,name:"Samuel Marx Triangle",location:{latitude:40.802576,longitude:-73.9527698},taxizone:"41",busi:{0:163,1:120,2:89,3:65,4:34,5:25,6:51,7:47,8:72,9:79,10:90,11:100,12:118,13:130,14:151,15:147,16:138,17:157,18:181,19:180,20:181,21:181,22:184,23:204}},{id:959894788,name:"Roger Morris Park",location:{latitude:40.8345035,longitude:-73.9385228},taxizone:"244",busi:{0:122,1:71,2:67,3:20,4:20,5:13,6:34,7:46,8:71,9:76,10:83,11:96,12:104,13:118,14:121,15:105,16:108,17:127,18:111,19:92,20:90,21:89,22:90,23:88}},{id:959895071,name:"McKenna Square Park",location:{latitude:40.8383487,longitude:-73.9391569},taxizone:"244",busi:{0:122,1:71,2:67,3:20,4:20,5:13,6:34,7:46,8:71,9:76,10:83,11:96,12:104,13:118,14:121,15:105,16:108,17:127,18:111,19:92,20:90,21:89,22:90,23:88}},{id:964819132,name:"Seward Park Extension Park",location:{latitude:40.7171165,longitude:-73.9884804},taxizone:"148",busi:{0:206,1:204,2:159,3:109,4:80,5:37,6:46,7:70,8:92,9:129,10:162,11:168,12:174,13:166,14:170,15:171,16:157,17:161,18:170,19:168,20:167,21:183,22:190,23:178}},{id:964822654,name:"Seward Park Extension Park",location:{latitude:40.7168088,longitude:-73.9848922},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:973521995,name:"Ahearn Park",location:{latitude:40.7148022,longitude:-73.9834508},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:976724943,name:"Unknown Park",location:{latitude:40.7294006,longitude:-73.9911035},taxizone:"113",busi:{0:14,1:7,2:8,3:8,4:8,5:10,6:9,7:26,8:52,9:50,10:52,11:60,12:61,13:58,14:57,15:57,16:34,17:31,18:31,19:29,20:29,21:19,22:20,23:17}},{id:985281628,name:"Seward Park High School - Community Playground",location:{latitude:40.7158595,longitude:-73.9891313},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:990936691,name:"Pier 42 Upland Park",location:{latitude:40.7105384,longitude:-73.981794},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:997819338,name:"Andrew Haswell Green Park",location:{latitude:40.7594825,longitude:-73.9575866},taxizone:"140",busi:{0:191,1:133,2:111,3:71,4:71,5:82,6:121,7:301,8:287,9:268,10:280,11:276,12:280,13:282,14:323,15:327,16:329,17:351,18:347,19:322,20:309,21:310,22:300,23:314}},{id:1015980340,name:"Unknown Park",location:{latitude:40.7168628,longitude:-73.9867292},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:1016487162,name:"Queensborough Oval",location:{latitude:40.7592353,longitude:-73.9600741},taxizone:"140",busi:{0:191,1:133,2:111,3:71,4:71,5:82,6:121,7:301,8:287,9:268,10:280,11:276,12:280,13:282,14:323,15:327,16:329,17:351,18:347,19:322,20:309,21:310,22:300,23:314}},{id:1018935492,name:"Vladeck Park",location:{latitude:40.7123997,longitude:-73.9820519},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:1021760821,name:"Unknown Park",location:{latitude:40.7562014,longitude:-74.0035176},taxizone:"246",busi:{0:358,1:245,2:139,3:88,4:47,5:39,6:28,7:74,8:144,9:212,10:429,11:501,12:539,13:589,14:615,15:613,16:473,17:460,18:560,19:568,20:497,21:449,22:435,23:411}},{id:1023817153,name:"Pier 76",location:{latitude:40.7591506,longitude:-74.005364},taxizone:"246",busi:{0:358,1:245,2:139,3:88,4:47,5:39,6:28,7:74,8:144,9:212,10:429,11:501,12:539,13:589,14:615,15:613,16:473,17:460,18:560,19:568,20:497,21:449,22:435,23:411}},{id:1025959315,name:"The Square",location:{latitude:40.8180211,longitude:-73.9589542},taxizone:"152",busi:{0:1098,1:653,2:340,3:213,4:162,5:179,6:333,7:342,8:383,9:503,10:587,11:774,12:884,13:917,14:909,15:923,16:916,17:1074,18:1032,19:1014,20:992,21:970,22:954,23:959}},{id:1059903962,name:"Unknown Park",location:{latitude:40.7500032,longitude:-73.9756477},taxizone:"170",busi:{0:191,1:112,2:75,3:53,4:56,5:74,6:98,7:227,8:219,9:373,10:379,11:373,12:383,13:400,14:442,15:468,16:476,17:606,18:615,19:568,20:475,21:442,22:422,23:351}},{id:1068258666,name:"Unknown Park",location:{latitude:40.7443685,longitude:-73.9781439},taxizone:"137",busi:{0:1837,1:1293,2:814,3:462,4:337,5:158,6:240,7:456,8:415,9:568,10:653,11:672,12:724,13:752,14:887,15:892,16:897,17:1103,18:1527,19:1756,20:1765,21:1927,22:2055,23:2253}},{id:1068603579,name:"Unknown Park",location:{latitude:40.7474521,longitude:-73.9837467},taxizone:"164",busi:{0:43,1:23,2:17,3:18,4:17,5:13,6:4,7:10,8:10,9:10,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:14,18:16,19:29,20:36,21:34,22:46,23:51}},{id:1077518596,name:"Hester Street Park",location:{latitude:40.7154087,longitude:-73.9893119},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:1082729243,name:"Saint Vartan Park",location:{latitude:40.7456086,longitude:-73.9748201},taxizone:"170",busi:{0:191,1:112,2:75,3:53,4:56,5:74,6:98,7:227,8:219,9:373,10:379,11:373,12:383,13:400,14:442,15:468,16:476,17:606,18:615,19:568,20:475,21:442,22:422,23:351}},{id:1083911850,name:"Unknown Park",location:{latitude:40.7231734,longitude:-73.987557},taxizone:"79",busi:{0:389,1:299,2:213,3:216,4:132,5:135,6:355,7:211,8:260,9:384,10:505,11:575,12:590,13:616,14:635,15:632,16:631,17:641,18:633,19:601,20:552,21:442,22:479,23:567}},{id:1087523912,name:"Unknown Park",location:{latitude:40.7408339,longitude:-73.9794828},taxizone:"137",busi:{0:1837,1:1293,2:814,3:462,4:337,5:158,6:240,7:456,8:415,9:568,10:653,11:672,12:724,13:752,14:887,15:892,16:897,17:1103,18:1527,19:1756,20:1765,21:1927,22:2055,23:2253}},{id:1090764362,name:"Unknown Park",location:{latitude:40.7801006,longitude:-73.9524877},taxizone:"263",busi:{0:653,1:457,2:324,3:178,4:109,5:110,6:267,7:201,8:236,9:295,10:449,11:593,12:606,13:613,14:614,15:618,16:601,17:604,18:613,19:593,20:530,21:523,22:514,23:613}},{id:1095508395,name:"Unknown Park",location:{latitude:40.8674781,longitude:-73.9228727},taxizone:"127",busi:{0:1372,1:957,2:553,3:458,4:366,5:377,6:920,7:891,8:900,9:957,10:1051,11:1130,12:1345,13:1487,14:1483,15:1489,16:1471,17:1525,18:1743,19:1886,20:1811,21:1665,22:1710,23:1749}},{id:1107165183,name:"Anibal Aviles Playground",location:{latitude:40.801159,longitude:-73.9627985},taxizone:"24",busi:{0:1081,1:558,2:410,3:230,4:276,5:260,6:1323,7:1151,8:1176,9:1306,10:1285,11:1356,12:1366,13:1346,14:1362,15:1368,16:1412,17:1439,18:1729,19:1774,20:1582,21:1513,22:1513,23:1641}},{id:1121582607,name:"Herald Square",location:{latitude:40.750256,longitude:-73.987625},taxizone:"100",busi:{0:197,1:147,2:117,3:79,4:41,5:41,6:45,7:59,8:92,9:88,10:87,11:97,12:121,13:123,14:153,15:152,16:154,17:214,18:247,19:268,20:264,21:267,22:292,23:401}},{id:1121932385,name:"Greeley Square Park",location:{latitude:40.7487036,longitude:-73.9883472},taxizone:"164",busi:{0:43,1:23,2:17,3:18,4:17,5:13,6:4,7:10,8:10,9:10,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:14,18:16,19:29,20:36,21:34,22:46,23:51}},{id:1127559545,name:"Peck Slip",location:{latitude:40.7078001,longitude:-74.0015491},taxizone:"209",busi:{0:597,1:438,2:280,3:183,4:177,5:148,6:341,7:742,8:819,9:990,10:996,11:1027,12:1037,13:1069,14:1187,15:1188,16:1132,17:1410,18:1481,19:1455,20:1295,21:1180,22:1054,23:990}},{id:1127851294,name:"Imagination Playground",location:{latitude:40.7061989,longitude:-74.0040983},taxizone:"87",busi:{0:1092,1:860,2:538,3:307,4:198,5:121,6:148,7:142,8:290,9:387,10:466,11:583,12:672,13:667,14:689,15:695,16:652,17:822,18:1172,19:1235,20:1209,21:1233,22:1386,23:1466}},{id:1135559125,name:"Unknown Park",location:{latitude:40.8505811,longitude:-73.9407742},taxizone:"244",busi:{0:122,1:71,2:67,3:20,4:20,5:13,6:34,7:46,8:71,9:76,10:83,11:96,12:104,13:118,14:121,15:105,16:108,17:127,18:111,19:92,20:90,21:89,22:90,23:88}},{id:1141662701,name:"Unknown Park",location:{latitude:40.7569158,longitude:-73.9662011},taxizone:"229",busi:{0:218,1:131,2:84,3:47,4:37,5:85,6:169,7:286,8:266,9:447,10:487,11:532,12:569,13:580,14:717,15:723,16:709,17:763,18:881,19:871,20:756,21:614,22:597,23:418}},{id:1173199006,name:"Unknown Park",location:{latitude:40.7825984,longitude:-73.949957},taxizone:"263",busi:{0:653,1:457,2:324,3:178,4:109,5:110,6:267,7:201,8:236,9:295,10:449,11:593,12:606,13:613,14:614,15:618,16:601,17:604,18:613,19:593,20:530,21:523,22:514,23:613}},{id:1173199007,name:"Unknown Park",location:{latitude:40.7826106,longitude:-73.9501576},taxizone:"263",busi:{0:653,1:457,2:324,3:178,4:109,5:110,6:267,7:201,8:236,9:295,10:449,11:593,12:606,13:613,14:614,15:618,16:601,17:604,18:613,19:593,20:530,21:523,22:514,23:613}},{id:1183761752,name:"Clara Coffey Park",location:{latitude:40.755163,longitude:-73.9621444},taxizone:"229",busi:{0:218,1:131,2:84,3:47,4:37,5:85,6:169,7:286,8:266,9:447,10:487,11:532,12:569,13:580,14:717,15:723,16:709,17:763,18:881,19:871,20:756,21:614,22:597,23:418}},{id:1183958467,name:"MacArthur Playground",location:{latitude:40.752273,longitude:-73.9651557},taxizone:"229",busi:{0:218,1:131,2:84,3:47,4:37,5:85,6:169,7:286,8:266,9:447,10:487,11:532,12:569,13:580,14:717,15:723,16:709,17:763,18:881,19:871,20:756,21:614,22:597,23:418}},{id:1188665117,name:"Pier 42 Deck",location:{latitude:40.7099785,longitude:-73.9823839},taxizone:"232",busi:{0:675,1:570,2:379,3:230,4:74,5:34,6:111,7:102,8:172,9:206,10:306,11:364,12:398,13:421,14:487,15:492,16:470,17:553,18:578,19:573,20:569,21:568,22:585,23:641}},{id:1751075,name:"John Jay Park",location:{latitude:40.7692516,longitude:-73.9496384},taxizone:"140",busi:{0:191,1:133,2:111,3:71,4:71,5:82,6:121,7:301,8:287,9:268,10:280,11:276,12:280,13:282,14:323,15:327,16:329,17:351,18:347,19:322,20:309,21:310,22:300,23:314}},{id:3690816,name:"Highbridge Park",location:{latitude:40.8460051,longitude:-73.9319502},taxizone:"120",busi:{0:165,1:109,2:77,3:67,4:44,5:43,6:53,7:107,8:103,9:108,10:111,11:92,12:89,13:92,14:124,15:129,16:121,17:152,18:157,19:158,20:184,21:190,22:179,23:195}},{id:4099553,name:"Sara D. Roosevelt Park",location:{latitude:40.7196275,longitude:-73.9925973},taxizone:"148",busi:{0:206,1:204,2:159,3:109,4:80,5:37,6:46,7:70,8:92,9:129,10:162,11:168,12:174,13:166,14:170,15:171,16:157,17:161,18:170,19:168,20:167,21:183,22:190,23:178}},{id:5625630,name:"Fort Tryon Park",location:{latitude:40.8619781,longitude:-73.9326365},taxizone:"243",busi:{0:18,1:14,2:7,3:13,4:11,5:9,6:4,7:7,8:7,9:7,10:9,11:8,12:11,13:11,14:12,15:12,16:11,17:14,18:16,19:16,20:26,21:23,22:23,23:23}},{id:6802606,name:"Mannahatta Park",location:{latitude:40.7047848,longitude:-74.006686},taxizone:"87",busi:{0:1092,1:860,2:538,3:307,4:198,5:121,6:148,7:142,8:290,9:387,10:466,11:583,12:672,13:667,14:689,15:695,16:652,17:822,18:1172,19:1235,20:1209,21:1233,22:1386,23:1466}},{id:6992452,name:"Dag Hammarskjold Plaza",location:{latitude:40.7523203,longitude:-73.9688866},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:7095444,name:"Union Square Park",location:{latitude:40.7358088,longitude:-73.9904565},taxizone:"234",busi:{0:749,1:355,2:247,3:149,4:141,5:254,6:514,7:855,8:1037,9:1056,10:1806,11:1825,12:1826,13:1857,14:1894,15:1742,16:1549,17:1932,18:1825,19:1805,20:1545,21:1415,22:1338,23:1196}},{id:7095669,name:"Stuyvesant Square",location:{latitude:40.7336501,longitude:-73.9839997},taxizone:"107",busi:{0:129,1:71,2:50,3:29,4:23,5:27,6:46,7:81,8:85,9:148,10:149,11:147,12:152,13:155,14:168,15:182,16:179,17:199,18:194,19:191,20:166,21:156,22:154,23:168}},{id:7109446,name:"Theodore Roosevelt Park",location:{latitude:40.7813637,longitude:-73.9740819},taxizone:"239",busi:{0:165,1:116,2:76,3:51,4:46,5:54,6:99,7:156,8:163,9:189,10:291,11:298,12:304,13:311,14:313,15:312,16:328,17:333,18:315,19:312,20:309,21:313,22:292,23:285}},{id:7141751,name:"The High Line",location:{latitude:40.7479527,longitude:-74.0039779},taxizone:"246",busi:{0:358,1:245,2:139,3:88,4:47,5:39,6:28,7:74,8:144,9:212,10:429,11:501,12:539,13:589,14:615,15:613,16:473,17:460,18:560,19:568,20:497,21:449,22:435,23:411}},{id:8176996,name:"Old Slip Park",location:{latitude:40.7038707,longitude:-74.0085649},taxizone:"87",busi:{0:1092,1:860,2:538,3:307,4:198,5:121,6:148,7:142,8:290,9:387,10:466,11:583,12:672,13:667,14:689,15:695,16:652,17:822,18:1172,19:1235,20:1209,21:1233,22:1386,23:1466}},{id:8456861,name:"Columbia University Well Garden",location:{latitude:40.8081586,longitude:-73.9607078},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:9340888,name:"United Nations Garden",location:{latitude:40.7509687,longitude:-73.9664023},taxizone:"233",busi:{0:861,1:558,2:237,3:168,4:197,5:312,6:751,7:1838,8:1865,9:2239,10:2269,11:2384,12:2390,13:2381,14:2394,15:2361,16:1942,17:1952,18:2136,19:2144,20:1960,21:1764,22:1554,23:1600}},{id:9643461,name:"Nelson A. Rockefeller Park",location:{latitude:40.716889,longitude:-74.0152879},taxizone:"13",busi:{0:799,1:808,2:571,3:390,4:242,5:197,6:445,7:571,8:489,9:767,10:847,11:949,12:1110,13:1124,14:1139,15:1123,16:961,17:1233,18:1263,19:1256,20:995,21:983,22:988,23:997}},{id:10025591,name:"West 59th Street Recreation Center",location:{latitude:40.7712414,longitude:-73.988724},taxizone:"143",busi:{0:156,1:110,2:60,3:43,4:36,5:40,6:48,7:88,8:261,9:270,10:249,11:250,12:241,13:248,14:259,15:204,16:180,17:203,18:198,19:195,20:201,21:197,22:187,23:178}},{id:10170445,name:"Low Plaza",location:{latitude:40.8076784,longitude:-73.9622466},taxizone:"166",busi:{0:37,1:105,2:67,3:53,4:41,5:39,6:11,7:5,8:6,9:5,10:5,11:6,12:5,13:5,14:6,15:6,16:7,17:4,18:4,19:4,20:4,21:5,22:7,23:6}},{id:10571875,name:"Duke Ellington Circle",location:{latitude:40.7968563,longitude:-73.949257},taxizone:"43",busi:{0:924,1:607,2:331,3:199,4:139,5:177,6:232,7:400,8:754,9:984,10:1079,11:1154,12:1416,13:1444,14:1499,15:1533,16:1479,17:1299,18:1127,19:1102,20:1043,21:1057,22:1377,23:1266}},{id:11037505,name:"Charles B. Benenson Grove",location:{latitude:40.7714021,longitude:-73.9835705},taxizone:"142",busi:{0:405,1:253,2:135,3:93,4:62,5:65,6:78,7:110,8:172,9:221,10:279,11:295,12:298,13:300,14:303,15:295,16:283,17:314,18:274,19:275,20:272,21:270,22:273,23:281}},{id:11077079,name:"African Burial Ground National Monument",location:{latitude:40.7145261,longitude:-74.004464},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:11225305,name:"Honey Locust Park",location:{latitude:40.7601599,longitude:-73.9628992},taxizone:"141",busi:{0:236,1:174,2:114,3:92,4:91,5:109,6:343,7:328,8:337,9:386,10:390,11:392,12:395,13:427,14:468,15:464,16:459,17:448,18:440,19:432,20:368,21:358,22:351,23:370}},{id:13613032,name:"Thomas Paine Park",location:{latitude:40.714782,longitude:-74.0027707},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:13678220,name:"Bella Abzug Park",location:{latitude:40.7558415,longitude:-74.0003803},taxizone:"246",busi:{0:358,1:245,2:139,3:88,4:47,5:39,6:28,7:74,8:144,9:212,10:429,11:501,12:539,13:589,14:615,15:613,16:473,17:460,18:560,19:568,20:497,21:449,22:435,23:411}},{id:14374901,name:"Sherman Creek",location:{latitude:40.8585719,longitude:-73.9216107},taxizone:"127",busi:{0:1372,1:957,2:553,3:458,4:366,5:377,6:920,7:891,8:900,9:957,10:1051,11:1130,12:1345,13:1487,14:1483,15:1489,16:1471,17:1525,18:1743,19:1886,20:1811,21:1665,22:1710,23:1749}},{id:14425097,name:"Saint Vartan Park",location:{latitude:40.7452795,longitude:-73.9740145},taxizone:"170",busi:{0:191,1:112,2:75,3:53,4:56,5:74,6:98,7:227,8:219,9:373,10:379,11:373,12:383,13:400,14:442,15:468,16:476,17:606,18:615,19:568,20:475,21:442,22:422,23:351}},{id:15039698,name:"Silverstein Family Park",location:{latitude:40.7131852,longitude:-74.0114448},taxizone:"231",busi:{0:1420,1:1191,2:751,3:428,4:254,5:101,6:69,7:105,8:157,9:231,10:241,11:403,12:403,13:426,14:455,15:450,16:444,17:419,18:640,19:726,20:761,21:826,22:884,23:1126}},{id:15902634,name:"Brooklyn Banks",location:{latitude:40.7114732,longitude:-74.0027148},taxizone:"45",busi:{0:434,1:251,2:152,3:71,4:87,5:184,6:519,7:2065,8:2117,9:2033,10:2035,11:2137,12:2187,13:2181,14:2543,15:2561,16:2444,17:2608,18:2641,19:2460,20:1592,21:1437,22:1380,23:952}},{id:16000824,name:"Sutton Parks",location:{latitude:40.7565069,longitude:-73.9605051},taxizone:"229",busi:{0:218,1:131,2:84,3:47,4:37,5:85,6:169,7:286,8:266,9:447,10:487,11:532,12:569,13:580,14:717,15:723,16:709,17:763,18:881,19:871,20:756,21:614,22:597,23:418}},{id:16066428,name:"East River Waterfront Esplanade",location:{latitude:40.7058354,longitude:-73.9996935},taxizone:"229",busi:{0:218,1:131,2:84,3:47,4:37,5:85,6:169,7:286,8:266,9:447,10:487,11:532,12:569,13:580,14:717,15:723,16:709,17:763,18:881,19:871,20:756,21:614,22:597,23:418}}],fD={data:pD},mD=(e,t,o,l)=>{const d=W.useRef(null),[p,y]=W.useState([]);return W.useEffect(()=>{if(d.current)return;d.current=new gu.Map({container:e.current,style:"mapbox://styles/mapbox/light-v11",center:[o,t],zoom:l});const a=fD.data.map(w=>({id:w.id,name:w.name,latitude:w.location.latitude,longitude:w.location.longitude}));y(a),d.current.on("load",()=>{d.current.loadImage("/static/tree.png",(w,C)=>{if(w)throw w;d.current.addImage("cat",C),d.current.addSource("markers",{type:"geojson",data:{type:"FeatureCollection",features:a.map(M=>({type:"Feature",geometry:{type:"Point",coordinates:[M.longitude,M.latitude]},properties:{id:M.id,name:M.name}}))}}),d.current.addLayer({id:"markers",type:"symbol",source:"markers",layout:{"icon-image":"cat","icon-size":.25},paint:{"icon-opacity":.8}}),d.current.on("mouseenter","markers",()=>{d.current.getCanvas().style.cursor="pointer"}),d.current.on("mouseleave","markers",()=>{d.current.getCanvas().style.cursor=""})}),d.current.on("click",w=>{const C=d.current.queryRenderedFeatures(w.point,{layers:["markers"]});if(C.length>0){const M=C[0].geometry.coordinates.slice(),D=C[0].properties.name,R=C[0].properties.id;new gu.Popup({className:"custom-popup"}).setLngLat(M).setHTML(`<div class="popup-content">${D}<br>${R}<br>${M}</div>`).addTo(d.current)}})})},[]),{map:d,markers:p}},gD="pk.eyJ1IjoiZmluYmFyYWxsYW4iLCJhIjoiY2xqY3NtYWN6MjV0ODNqcXhhaTY4aGQxdSJ9.VeVQzxCCtpyP_MeT1CkjOg";gu.accessToken=gD;const yD=({inputValues:e})=>{const t=W.useRef(null),[o,l]=W.useState(40.727872),[d,p]=W.useState(-73.993157),[y,a]=W.useState(12.4),[w,C]=W.useState(!1),[M,D]=W.useState(""),[R,$]=W.useState([]),{map:V,markers:B}=mD(t,o,d,y),{route:J,displayRoute:j}=dD(V.current,e),{location:N,setLocation:G}=hD(V.current,w,C),Y=async K=>{D(K.target.value);const ie=await(await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(M)}.json?access_token=${gu.accessToken}`)).json();if(ie.features.length>0){const de=ie.features[0].center,le=ie.features[0].place_name;console.log(`Place: ${le}, Latitude: ${de[1]}, Longitude: ${de[0]}`),$(ie.features.map(ye=>ye.place_name))}};return ee.jsxs("div",{children:[ee.jsx("button",{type:"submit",onClick:()=>{j()},children:"Go!"}),ee.jsx("button",{onClick:()=>C(!w),children:w?"Selecting location...":"Select location"}),ee.jsx("input",{type:"text",value:M,onChange:Y,placeholder:"Enter a place name"}),R.length>0&&ee.jsx("div",{className:"suggestions-dropdown",children:R.map(K=>ee.jsx("div",{onClick:()=>D(K),children:K},K))}),ee.jsx("span",{children:N.address}),ee.jsx("div",{ref:t,className:"map-container"})]})};function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},H.apply(this,arguments)}function tu(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function H8(e){if(!tu(e))return e;const t={};return Object.keys(e).forEach(o=>{t[o]=H8(e[o])}),t}function wo(e,t,o={clone:!0}){const l=o.clone?H({},e):e;return tu(e)&&tu(t)&&Object.keys(t).forEach(d=>{d!=="__proto__"&&(tu(t[d])&&d in e&&tu(e[d])?l[d]=wo(e[d],t[d],o):o.clone?l[d]=tu(t[d])?H8(t[d]):t[d]:l[d]=t[d])}),l}var q8={exports:{}},_D="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xD=_D,vD=xD;function Z8(){}function X8(){}X8.resetWarningCache=Z8;var bD=function(){function e(l,d,p,y,a,w){if(w!==vD){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:X8,resetWarningCache:Z8};return o.PropTypes=o,o};q8.exports=bD();var wD=q8.exports;const $e=tl(wD);function nc(e){let t="https://mui.com/production-error/?code="+e;for(let o=1;o<arguments.length;o+=1)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function en(e){if(typeof e!="string")throw new Error(nc(7));return e.charAt(0).toUpperCase()+e.slice(1)}function L6(...e){return e.reduce((t,o)=>o==null?t:function(...d){t.apply(this,d),o.apply(this,d)},()=>{})}function y1(e,t=166){let o;function l(...d){const p=()=>{e.apply(this,d)};clearTimeout(o),o=setTimeout(p,t)}return l.clear=()=>{clearTimeout(o)},l}function Qg(e,t){return W.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function Ci(e){return e&&e.ownerDocument||document}function Ka(e){return Ci(e).defaultView||window}function L0(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const SD=typeof window<"u"?W.useLayoutEffect:W.useEffect,Ei=SD;let O6=0;function TD(e){const[t,o]=W.useState(e),l=e||t;return W.useEffect(()=>{t==null&&(O6+=1,o(`mui-${O6}`))},[t]),l}const B6=Qf["useId".toString()];function Su(e){if(B6!==void 0){const t=B6();return e??t}return TD(e)}function jo({controlled:e,default:t,name:o,state:l="value"}){const{current:d}=W.useRef(e!==void 0),[p,y]=W.useState(t),a=d?e:p,w=W.useCallback(C=>{d||y(C)},[]);return[a,w]}function fn(e){const t=W.useRef(e);return Ei(()=>{t.current=e}),W.useCallback((...o)=>(0,t.current)(...o),[])}function zr(...e){return W.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(o=>{L0(o,t)})},e)}let dy=!0,Pv=!1,F6;const CD={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ED(e){const{type:t,tagName:o}=e;return!!(o==="INPUT"&&CD[t]&&!e.readOnly||o==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function kD(e){e.metaKey||e.altKey||e.ctrlKey||(dy=!0)}function mx(){dy=!1}function PD(){this.visibilityState==="hidden"&&Pv&&(dy=!0)}function MD(e){e.addEventListener("keydown",kD,!0),e.addEventListener("mousedown",mx,!0),e.addEventListener("pointerdown",mx,!0),e.addEventListener("touchstart",mx,!0),e.addEventListener("visibilitychange",PD,!0)}function ID(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return dy||ED(t)}function AD(){const e=W.useCallback(d=>{d!=null&&MD(d.ownerDocument)},[]),t=W.useRef(!1);function o(){return t.current?(Pv=!0,window.clearTimeout(F6),F6=window.setTimeout(()=>{Pv=!1},100),t.current=!1,!0):!1}function l(d){return ID(d)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:l,onBlur:o,ref:e}}function Y8(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let Ed;function K8(){if(Ed)return Ed;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),Ed="reverse",e.scrollLeft>0?Ed="default":(e.scrollLeft=1,e.scrollLeft===0&&(Ed="negative")),document.body.removeChild(e),Ed}function $6(e,t){const o=e.scrollLeft;if(t!=="rtl")return o;switch(K8()){case"negative":return e.scrollWidth-e.clientWidth+o;case"reverse":return e.scrollWidth-e.clientWidth-o;default:return o}}const DD=e=>{const t=W.useRef({});return W.useEffect(()=>{t.current=e}),t.current},zD=DD;function Wb(e,t){const o=H({},t);return Object.keys(e).forEach(l=>{if(l.toString().match(/^(components|slots)$/))o[l]=H({},e[l],o[l]);else if(l.toString().match(/^(componentsProps|slotProps)$/)){const d=e[l]||{},p=t[l];o[l]={},!p||!Object.keys(p)?o[l]=d:!d||!Object.keys(d)?o[l]=p:(o[l]=H({},p),Object.keys(d).forEach(y=>{o[l][y]=Wb(d[y],p[y])}))}else o[l]===void 0&&(o[l]=e[l])}),o}function xn(e,t,o=void 0){const l={};return Object.keys(e).forEach(d=>{l[d]=e[d].reduce((p,y)=>{if(y){const a=t(y);a!==""&&p.push(a),o&&o[y]&&p.push(o[y])}return p},[]).join(" ")}),l}const N6=e=>e,RD=()=>{let e=N6;return{configure(t){e=t},generate(t){return e(t)},reset(){e=N6}}},LD=RD(),J8=LD,OD={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function wn(e,t,o="Mui"){const l=OD[t];return l?`${o}-${l}`:`${J8.generate(e)}-${t}`}function yn(e,t,o="Mui"){const l={};return t.forEach(d=>{l[d]=wn(e,d,o)}),l}const R1="$$material";function Bt(e,t){if(e==null)return{};var o={},l=Object.keys(e),d,p;for(p=0;p<l.length;p++)d=l[p],!(t.indexOf(d)>=0)&&(o[d]=e[d]);return o}function Q8(e){var t=Object.create(null);return function(o){return t[o]===void 0&&(t[o]=e(o)),t[o]}}var BD=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,FD=Q8(function(e){return BD.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function $D(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function ND(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var jD=function(){function e(o){var l=this;this._insertTag=function(d){var p;l.tags.length===0?l.insertionPoint?p=l.insertionPoint.nextSibling:l.prepend?p=l.container.firstChild:p=l.before:p=l.tags[l.tags.length-1].nextSibling,l.container.insertBefore(d,p),l.tags.push(d)},this.isSpeedy=o.speedy===void 0?!0:o.speedy,this.tags=[],this.ctr=0,this.nonce=o.nonce,this.key=o.key,this.container=o.container,this.prepend=o.prepend,this.insertionPoint=o.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(l){l.forEach(this._insertTag)},t.insert=function(l){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ND(this));var d=this.tags[this.tags.length-1];if(this.isSpeedy){var p=$D(d);try{p.insertRule(l,p.cssRules.length)}catch{}}else d.appendChild(document.createTextNode(l));this.ctr++},t.flush=function(){this.tags.forEach(function(l){return l.parentNode&&l.parentNode.removeChild(l)}),this.tags=[],this.ctr=0},e}(),Yi="-ms-",O0="-moz-",wr="-webkit-",e9="comm",Gb="rule",Hb="decl",UD="@import",t9="@keyframes",VD="@layer",WD=Math.abs,hy=String.fromCharCode,GD=Object.assign;function HD(e,t){return Bi(e,0)^45?(((t<<2^Bi(e,0))<<2^Bi(e,1))<<2^Bi(e,2))<<2^Bi(e,3):0}function n9(e){return e.trim()}function qD(e,t){return(e=t.exec(e))?e[0]:e}function Sr(e,t,o){return e.replace(t,o)}function Mv(e,t){return e.indexOf(t)}function Bi(e,t){return e.charCodeAt(t)|0}function _1(e,t,o){return e.slice(t,o)}function ca(e){return e.length}function qb(e){return e.length}function Dg(e,t){return t.push(e),e}function ZD(e,t){return e.map(t).join("")}var py=1,gh=1,r9=0,Eo=0,_i=0,Ph="";function fy(e,t,o,l,d,p,y){return{value:e,root:t,parent:o,type:l,props:d,children:p,line:py,column:gh,length:y,return:""}}function _f(e,t){return GD(fy("",null,null,"",null,null,0),e,{length:-e.length},t)}function XD(){return _i}function YD(){return _i=Eo>0?Bi(Ph,--Eo):0,gh--,_i===10&&(gh=1,py--),_i}function Uo(){return _i=Eo<r9?Bi(Ph,Eo++):0,gh++,_i===10&&(gh=1,py++),_i}function _a(){return Bi(Ph,Eo)}function e0(){return Eo}function L1(e,t){return _1(Ph,e,t)}function x1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function i9(e){return py=gh=1,r9=ca(Ph=e),Eo=0,[]}function o9(e){return Ph="",e}function t0(e){return n9(L1(Eo-1,Iv(e===91?e+2:e===40?e+1:e)))}function KD(e){for(;(_i=_a())&&_i<33;)Uo();return x1(e)>2||x1(_i)>3?"":" "}function JD(e,t){for(;--t&&Uo()&&!(_i<48||_i>102||_i>57&&_i<65||_i>70&&_i<97););return L1(e,e0()+(t<6&&_a()==32&&Uo()==32))}function Iv(e){for(;Uo();)switch(_i){case e:return Eo;case 34:case 39:e!==34&&e!==39&&Iv(_i);break;case 40:e===41&&Iv(e);break;case 92:Uo();break}return Eo}function QD(e,t){for(;Uo()&&e+_i!==47+10;)if(e+_i===42+42&&_a()===47)break;return"/*"+L1(t,Eo-1)+"*"+hy(e===47?e:Uo())}function ez(e){for(;!x1(_a());)Uo();return L1(e,Eo)}function tz(e){return o9(n0("",null,null,null,[""],e=i9(e),0,[0],e))}function n0(e,t,o,l,d,p,y,a,w){for(var C=0,M=0,D=y,R=0,$=0,V=0,B=1,J=1,j=1,N=0,G="",Y=d,K=p,oe=l,ie=G;J;)switch(V=N,N=Uo()){case 40:if(V!=108&&Bi(ie,D-1)==58){Mv(ie+=Sr(t0(N),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:ie+=t0(N);break;case 9:case 10:case 13:case 32:ie+=KD(V);break;case 92:ie+=JD(e0()-1,7);continue;case 47:switch(_a()){case 42:case 47:Dg(nz(QD(Uo(),e0()),t,o),w);break;default:ie+="/"}break;case 123*B:a[C++]=ca(ie)*j;case 125*B:case 59:case 0:switch(N){case 0:case 125:J=0;case 59+M:j==-1&&(ie=Sr(ie,/\f/g,"")),$>0&&ca(ie)-D&&Dg($>32?U6(ie+";",l,o,D-1):U6(Sr(ie," ","")+";",l,o,D-2),w);break;case 59:ie+=";";default:if(Dg(oe=j6(ie,t,o,C,M,d,a,G,Y=[],K=[],D),p),N===123)if(M===0)n0(ie,t,oe,oe,Y,p,D,a,K);else switch(R===99&&Bi(ie,3)===110?100:R){case 100:case 108:case 109:case 115:n0(e,oe,oe,l&&Dg(j6(e,oe,oe,0,0,d,a,G,d,Y=[],D),K),d,K,D,a,l?Y:K);break;default:n0(ie,oe,oe,oe,[""],K,0,a,K)}}C=M=$=0,B=j=1,G=ie="",D=y;break;case 58:D=1+ca(ie),$=V;default:if(B<1){if(N==123)--B;else if(N==125&&B++==0&&YD()==125)continue}switch(ie+=hy(N),N*B){case 38:j=M>0?1:(ie+="\f",-1);break;case 44:a[C++]=(ca(ie)-1)*j,j=1;break;case 64:_a()===45&&(ie+=t0(Uo())),R=_a(),M=D=ca(G=ie+=ez(e0())),N++;break;case 45:V===45&&ca(ie)==2&&(B=0)}}return p}function j6(e,t,o,l,d,p,y,a,w,C,M){for(var D=d-1,R=d===0?p:[""],$=qb(R),V=0,B=0,J=0;V<l;++V)for(var j=0,N=_1(e,D+1,D=WD(B=y[V])),G=e;j<$;++j)(G=n9(B>0?R[j]+" "+N:Sr(N,/&\f/g,R[j])))&&(w[J++]=G);return fy(e,t,o,d===0?Gb:a,w,C,M)}function nz(e,t,o){return fy(e,t,o,e9,hy(XD()),_1(e,2,-2),0)}function U6(e,t,o,l){return fy(e,t,o,Hb,_1(e,0,l),_1(e,l+1,-1),l)}function rh(e,t){for(var o="",l=qb(e),d=0;d<l;d++)o+=t(e[d],d,e,t)||"";return o}function rz(e,t,o,l){switch(e.type){case VD:if(e.children.length)break;case UD:case Hb:return e.return=e.return||e.value;case e9:return"";case t9:return e.return=e.value+"{"+rh(e.children,l)+"}";case Gb:e.value=e.props.join(",")}return ca(o=rh(e.children,l))?e.return=e.value+"{"+o+"}":""}function iz(e){var t=qb(e);return function(o,l,d,p){for(var y="",a=0;a<t;a++)y+=e[a](o,l,d,p)||"";return y}}function oz(e){return function(t){t.root||(t=t.return)&&e(t)}}var sz=function(t,o,l){for(var d=0,p=0;d=p,p=_a(),d===38&&p===12&&(o[l]=1),!x1(p);)Uo();return L1(t,Eo)},az=function(t,o){var l=-1,d=44;do switch(x1(d)){case 0:d===38&&_a()===12&&(o[l]=1),t[l]+=sz(Eo-1,o,l);break;case 2:t[l]+=t0(d);break;case 4:if(d===44){t[++l]=_a()===58?"&\f":"",o[l]=t[l].length;break}default:t[l]+=hy(d)}while(d=Uo());return t},lz=function(t,o){return o9(az(i9(t),o))},V6=new WeakMap,cz=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var o=t.value,l=t.parent,d=t.column===l.column&&t.line===l.line;l.type!=="rule";)if(l=l.parent,!l)return;if(!(t.props.length===1&&o.charCodeAt(0)!==58&&!V6.get(l))&&!d){V6.set(t,!0);for(var p=[],y=lz(o,p),a=l.props,w=0,C=0;w<y.length;w++)for(var M=0;M<a.length;M++,C++)t.props[C]=p[w]?y[w].replace(/&\f/g,a[M]):a[M]+" "+y[w]}}},uz=function(t){if(t.type==="decl"){var o=t.value;o.charCodeAt(0)===108&&o.charCodeAt(2)===98&&(t.return="",t.value="")}};function s9(e,t){switch(HD(e,t)){case 5103:return wr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return wr+e+O0+e+Yi+e+e;case 6828:case 4268:return wr+e+Yi+e+e;case 6165:return wr+e+Yi+"flex-"+e+e;case 5187:return wr+e+Sr(e,/(\w+).+(:[^]+)/,wr+"box-$1$2"+Yi+"flex-$1$2")+e;case 5443:return wr+e+Yi+"flex-item-"+Sr(e,/flex-|-self/,"")+e;case 4675:return wr+e+Yi+"flex-line-pack"+Sr(e,/align-content|flex-|-self/,"")+e;case 5548:return wr+e+Yi+Sr(e,"shrink","negative")+e;case 5292:return wr+e+Yi+Sr(e,"basis","preferred-size")+e;case 6060:return wr+"box-"+Sr(e,"-grow","")+wr+e+Yi+Sr(e,"grow","positive")+e;case 4554:return wr+Sr(e,/([^-])(transform)/g,"$1"+wr+"$2")+e;case 6187:return Sr(Sr(Sr(e,/(zoom-|grab)/,wr+"$1"),/(image-set)/,wr+"$1"),e,"")+e;case 5495:case 3959:return Sr(e,/(image-set\([^]*)/,wr+"$1$`$1");case 4968:return Sr(Sr(e,/(.+:)(flex-)?(.*)/,wr+"box-pack:$3"+Yi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wr+e+e;case 4095:case 3583:case 4068:case 2532:return Sr(e,/(.+)-inline(.+)/,wr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ca(e)-1-t>6)switch(Bi(e,t+1)){case 109:if(Bi(e,t+4)!==45)break;case 102:return Sr(e,/(.+:)(.+)-([^]+)/,"$1"+wr+"$2-$3$1"+O0+(Bi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Mv(e,"stretch")?s9(Sr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Bi(e,t+1)!==115)break;case 6444:switch(Bi(e,ca(e)-3-(~Mv(e,"!important")&&10))){case 107:return Sr(e,":",":"+wr)+e;case 101:return Sr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wr+(Bi(e,14)===45?"inline-":"")+"box$3$1"+wr+"$2$3$1"+Yi+"$2box$3")+e}break;case 5936:switch(Bi(e,t+11)){case 114:return wr+e+Yi+Sr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return wr+e+Yi+Sr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return wr+e+Yi+Sr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return wr+e+Yi+e+e}return e}var dz=function(t,o,l,d){if(t.length>-1&&!t.return)switch(t.type){case Hb:t.return=s9(t.value,t.length);break;case t9:return rh([_f(t,{value:Sr(t.value,"@","@"+wr)})],d);case Gb:if(t.length)return ZD(t.props,function(p){switch(qD(p,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return rh([_f(t,{props:[Sr(p,/:(read-\w+)/,":"+O0+"$1")]})],d);case"::placeholder":return rh([_f(t,{props:[Sr(p,/:(plac\w+)/,":"+wr+"input-$1")]}),_f(t,{props:[Sr(p,/:(plac\w+)/,":"+O0+"$1")]}),_f(t,{props:[Sr(p,/:(plac\w+)/,Yi+"input-$1")]})],d)}return""})}},hz=[dz],pz=function(t){var o=t.key;if(o==="css"){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,function(B){var J=B.getAttribute("data-emotion");J.indexOf(" ")!==-1&&(document.head.appendChild(B),B.setAttribute("data-s",""))})}var d=t.stylisPlugins||hz,p={},y,a=[];y=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+o+' "]'),function(B){for(var J=B.getAttribute("data-emotion").split(" "),j=1;j<J.length;j++)p[J[j]]=!0;a.push(B)});var w,C=[cz,uz];{var M,D=[rz,oz(function(B){M.insert(B)})],R=iz(C.concat(d,D)),$=function(J){return rh(tz(J),R)};w=function(J,j,N,G){M=N,$(J?J+"{"+j.styles+"}":j.styles),G&&(V.inserted[j.name]=!0)}}var V={key:o,sheet:new jD({key:o,container:y,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:p,registered:{},insert:w};return V.sheet.hydrate(a),V},a9={exports:{}},Mr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ri=typeof Symbol=="function"&&Symbol.for,Zb=Ri?Symbol.for("react.element"):60103,Xb=Ri?Symbol.for("react.portal"):60106,my=Ri?Symbol.for("react.fragment"):60107,gy=Ri?Symbol.for("react.strict_mode"):60108,yy=Ri?Symbol.for("react.profiler"):60114,_y=Ri?Symbol.for("react.provider"):60109,xy=Ri?Symbol.for("react.context"):60110,Yb=Ri?Symbol.for("react.async_mode"):60111,vy=Ri?Symbol.for("react.concurrent_mode"):60111,by=Ri?Symbol.for("react.forward_ref"):60112,wy=Ri?Symbol.for("react.suspense"):60113,fz=Ri?Symbol.for("react.suspense_list"):60120,Sy=Ri?Symbol.for("react.memo"):60115,Ty=Ri?Symbol.for("react.lazy"):60116,mz=Ri?Symbol.for("react.block"):60121,gz=Ri?Symbol.for("react.fundamental"):60117,yz=Ri?Symbol.for("react.responder"):60118,_z=Ri?Symbol.for("react.scope"):60119;function qo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Zb:switch(e=e.type,e){case Yb:case vy:case my:case yy:case gy:case wy:return e;default:switch(e=e&&e.$$typeof,e){case xy:case by:case Ty:case Sy:case _y:return e;default:return t}}case Xb:return t}}}function l9(e){return qo(e)===vy}Mr.AsyncMode=Yb;Mr.ConcurrentMode=vy;Mr.ContextConsumer=xy;Mr.ContextProvider=_y;Mr.Element=Zb;Mr.ForwardRef=by;Mr.Fragment=my;Mr.Lazy=Ty;Mr.Memo=Sy;Mr.Portal=Xb;Mr.Profiler=yy;Mr.StrictMode=gy;Mr.Suspense=wy;Mr.isAsyncMode=function(e){return l9(e)||qo(e)===Yb};Mr.isConcurrentMode=l9;Mr.isContextConsumer=function(e){return qo(e)===xy};Mr.isContextProvider=function(e){return qo(e)===_y};Mr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zb};Mr.isForwardRef=function(e){return qo(e)===by};Mr.isFragment=function(e){return qo(e)===my};Mr.isLazy=function(e){return qo(e)===Ty};Mr.isMemo=function(e){return qo(e)===Sy};Mr.isPortal=function(e){return qo(e)===Xb};Mr.isProfiler=function(e){return qo(e)===yy};Mr.isStrictMode=function(e){return qo(e)===gy};Mr.isSuspense=function(e){return qo(e)===wy};Mr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===my||e===vy||e===yy||e===gy||e===wy||e===fz||typeof e=="object"&&e!==null&&(e.$$typeof===Ty||e.$$typeof===Sy||e.$$typeof===_y||e.$$typeof===xy||e.$$typeof===by||e.$$typeof===gz||e.$$typeof===yz||e.$$typeof===_z||e.$$typeof===mz)};Mr.typeOf=qo;a9.exports=Mr;var xz=a9.exports,c9=xz,vz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},bz={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u9={};u9[c9.ForwardRef]=vz;u9[c9.Memo]=bz;var wz=!0;function Sz(e,t,o){var l="";return o.split(" ").forEach(function(d){e[d]!==void 0?t.push(e[d]+";"):l+=d+" "}),l}var d9=function(t,o,l){var d=t.key+"-"+o.name;(l===!1||wz===!1)&&t.registered[d]===void 0&&(t.registered[d]=o.styles)},h9=function(t,o,l){d9(t,o,l);var d=t.key+"-"+o.name;if(t.inserted[o.name]===void 0){var p=o;do t.insert(o===p?"."+d:"",p,t.sheet,!0),p=p.next;while(p!==void 0)}};function Tz(e){for(var t=0,o,l=0,d=e.length;d>=4;++l,d-=4)o=e.charCodeAt(l)&255|(e.charCodeAt(++l)&255)<<8|(e.charCodeAt(++l)&255)<<16|(e.charCodeAt(++l)&255)<<24,o=(o&65535)*1540483477+((o>>>16)*59797<<16),o^=o>>>24,t=(o&65535)*1540483477+((o>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(d){case 3:t^=(e.charCodeAt(l+2)&255)<<16;case 2:t^=(e.charCodeAt(l+1)&255)<<8;case 1:t^=e.charCodeAt(l)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Cz={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ez=/[A-Z]|^ms/g,kz=/_EMO_([^_]+?)_([^]*?)_EMO_/g,p9=function(t){return t.charCodeAt(1)===45},W6=function(t){return t!=null&&typeof t!="boolean"},gx=Q8(function(e){return p9(e)?e:e.replace(Ez,"-$&").toLowerCase()}),G6=function(t,o){switch(t){case"animation":case"animationName":if(typeof o=="string")return o.replace(kz,function(l,d,p){return ua={name:d,styles:p,next:ua},d})}return Cz[t]!==1&&!p9(t)&&typeof o=="number"&&o!==0?o+"px":o};function v1(e,t,o){if(o==null)return"";if(o.__emotion_styles!==void 0)return o;switch(typeof o){case"boolean":return"";case"object":{if(o.anim===1)return ua={name:o.name,styles:o.styles,next:ua},o.name;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)ua={name:l.name,styles:l.styles,next:ua},l=l.next;var d=o.styles+";";return d}return Pz(e,t,o)}case"function":{if(e!==void 0){var p=ua,y=o(e);return ua=p,v1(e,t,y)}break}}if(t==null)return o;var a=t[o];return a!==void 0?a:o}function Pz(e,t,o){var l="";if(Array.isArray(o))for(var d=0;d<o.length;d++)l+=v1(e,t,o[d])+";";else for(var p in o){var y=o[p];if(typeof y!="object")t!=null&&t[y]!==void 0?l+=p+"{"+t[y]+"}":W6(y)&&(l+=gx(p)+":"+G6(p,y)+";");else if(Array.isArray(y)&&typeof y[0]=="string"&&(t==null||t[y[0]]===void 0))for(var a=0;a<y.length;a++)W6(y[a])&&(l+=gx(p)+":"+G6(p,y[a])+";");else{var w=v1(e,t,y);switch(p){case"animation":case"animationName":{l+=gx(p)+":"+w+";";break}default:l+=p+"{"+w+"}"}}}return l}var H6=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ua,Kb=function(t,o,l){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var d=!0,p="";ua=void 0;var y=t[0];y==null||y.raw===void 0?(d=!1,p+=v1(l,o,y)):p+=y[0];for(var a=1;a<t.length;a++)p+=v1(l,o,t[a]),d&&(p+=y[a]);H6.lastIndex=0;for(var w="",C;(C=H6.exec(p))!==null;)w+="-"+C[1];var M=Tz(p)+w;return{name:M,styles:p,next:ua}},Mz=function(t){return t()},f9=Qf["useInsertionEffect"]?Qf["useInsertionEffect"]:!1,Iz=f9||Mz,q6=f9||W.useLayoutEffect,m9=W.createContext(typeof HTMLElement<"u"?pz({key:"css"}):null);m9.Provider;var g9=function(t){return W.forwardRef(function(o,l){var d=W.useContext(m9);return t(o,d,l)})},Jb=W.createContext({}),Az=g9(function(e,t){var o=e.styles,l=Kb([o],void 0,W.useContext(Jb)),d=W.useRef();return q6(function(){var p=t.key+"-global",y=new t.sheet.constructor({key:p,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,w=document.querySelector('style[data-emotion="'+p+" "+l.name+'"]');return t.sheet.tags.length&&(y.before=t.sheet.tags[0]),w!==null&&(a=!0,w.setAttribute("data-emotion",p),y.hydrate([w])),d.current=[y,a],function(){y.flush()}},[t]),q6(function(){var p=d.current,y=p[0],a=p[1];if(a){p[1]=!1;return}if(l.next!==void 0&&h9(t,l.next,!0),y.tags.length){var w=y.tags[y.tags.length-1].nextElementSibling;y.before=w,y.flush()}t.insert("",l,y,!1)},[t,l.name]),null});function Dz(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return Kb(t)}var Qb=function(){var t=Dz.apply(void 0,arguments),o="animation-"+t.name;return{name:o,styles:"@keyframes "+o+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},zz=FD,Rz=function(t){return t!=="theme"},Z6=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?zz:Rz},X6=function(t,o,l){var d;if(o){var p=o.shouldForwardProp;d=t.__emotion_forwardProp&&p?function(y){return t.__emotion_forwardProp(y)&&p(y)}:p}return typeof d!="function"&&l&&(d=t.__emotion_forwardProp),d},Lz=function(t){var o=t.cache,l=t.serialized,d=t.isStringTag;return d9(o,l,d),Iz(function(){return h9(o,l,d)}),null},Oz=function e(t,o){var l=t.__emotion_real===t,d=l&&t.__emotion_base||t,p,y;o!==void 0&&(p=o.label,y=o.target);var a=X6(t,o,l),w=a||Z6(d),C=!w("as");return function(){var M=arguments,D=l&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(p!==void 0&&D.push("label:"+p+";"),M[0]==null||M[0].raw===void 0)D.push.apply(D,M);else{D.push(M[0][0]);for(var R=M.length,$=1;$<R;$++)D.push(M[$],M[0][$])}var V=g9(function(B,J,j){var N=C&&B.as||d,G="",Y=[],K=B;if(B.theme==null){K={};for(var oe in B)K[oe]=B[oe];K.theme=W.useContext(Jb)}typeof B.className=="string"?G=Sz(J.registered,Y,B.className):B.className!=null&&(G=B.className+" ");var ie=Kb(D.concat(Y),J.registered,K);G+=J.key+"-"+ie.name,y!==void 0&&(G+=" "+y);var de=C&&a===void 0?Z6(N):w,le={};for(var ye in B)C&&ye==="as"||de(ye)&&(le[ye]=B[ye]);return le.className=G,le.ref=j,W.createElement(W.Fragment,null,W.createElement(Lz,{cache:J,serialized:ie,isStringTag:typeof N=="string"}),W.createElement(N,le))});return V.displayName=p!==void 0?p:"Styled("+(typeof d=="string"?d:d.displayName||d.name||"Component")+")",V.defaultProps=t.defaultProps,V.__emotion_real=V,V.__emotion_base=d,V.__emotion_styles=D,V.__emotion_forwardProp=a,Object.defineProperty(V,"toString",{value:function(){return"."+y}}),V.withComponent=function(B,J){return e(B,H({},o,J,{shouldForwardProp:X6(V,J,!0)})).apply(void 0,D)},V}},Bz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Av=Oz.bind();Bz.forEach(function(e){Av[e]=Av(e)});function Fz(e){return e==null||Object.keys(e).length===0}function $z(e){const{styles:t,defaultTheme:o={}}=e,l=typeof t=="function"?d=>t(Fz(d)?o:d):t;return ee.jsx(Az,{styles:l})}/**
 * @mui/styled-engine v5.13.2
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function y9(e,t){return Av(e,t)}const Nz=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},jz=["values","unit","step"],Uz=e=>{const t=Object.keys(e).map(o=>({key:o,val:e[o]}))||[];return t.sort((o,l)=>o.val-l.val),t.reduce((o,l)=>H({},o,{[l.key]:l.val}),{})};function Vz(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:o="px",step:l=5}=e,d=Bt(e,jz),p=Uz(t),y=Object.keys(p);function a(R){return`@media (min-width:${typeof t[R]=="number"?t[R]:R}${o})`}function w(R){return`@media (max-width:${(typeof t[R]=="number"?t[R]:R)-l/100}${o})`}function C(R,$){const V=y.indexOf($);return`@media (min-width:${typeof t[R]=="number"?t[R]:R}${o}) and (max-width:${(V!==-1&&typeof t[y[V]]=="number"?t[y[V]]:$)-l/100}${o})`}function M(R){return y.indexOf(R)+1<y.length?C(R,y[y.indexOf(R)+1]):a(R)}function D(R){const $=y.indexOf(R);return $===0?a(y[1]):$===y.length-1?w(y[$]):C(R,y[y.indexOf(R)+1]).replace("@media","@media not all and")}return H({keys:y,values:p,up:a,down:w,between:C,only:M,not:D,unit:o},d)}const Wz={borderRadius:4},Gz=Wz;function Gf(e,t){return t?wo(e,t,{clone:!1}):e}const e3={xs:0,sm:600,md:900,lg:1200,xl:1536},Y6={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${e3[e]}px)`};function ko(e,t,o){const l=e.theme||{};if(Array.isArray(t)){const p=l.breakpoints||Y6;return t.reduce((y,a,w)=>(y[p.up(p.keys[w])]=o(t[w]),y),{})}if(typeof t=="object"){const p=l.breakpoints||Y6;return Object.keys(t).reduce((y,a)=>{if(Object.keys(p.values||e3).indexOf(a)!==-1){const w=p.up(a);y[w]=o(t[a],a)}else{const w=a;y[w]=t[w]}return y},{})}return o(t)}function _9(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((l,d)=>{const p=e.up(d);return l[p]={},l},{}))||{}}function x9(e,t){return e.reduce((o,l)=>{const d=o[l];return(!d||Object.keys(d).length===0)&&delete o[l],o},t)}function Hz(e,...t){const o=_9(e),l=[o,...t].reduce((d,p)=>wo(d,p),{});return x9(Object.keys(o),l)}function qz(e,t){if(typeof e!="object")return{};const o={},l=Object.keys(t);return Array.isArray(e)?l.forEach((d,p)=>{p<e.length&&(o[d]=!0)}):l.forEach(d=>{e[d]!=null&&(o[d]=!0)}),o}function lu({values:e,breakpoints:t,base:o}){const l=o||qz(e,t),d=Object.keys(l);if(d.length===0)return e;let p;return d.reduce((y,a,w)=>(Array.isArray(e)?(y[a]=e[w]!=null?e[w]:e[p],p=w):typeof e=="object"?(y[a]=e[a]!=null?e[a]:e[p],p=a):y[a]=e,y),{})}function Cy(e,t,o=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&o){const l=`vars.${t}`.split(".").reduce((d,p)=>d&&d[p]?d[p]:null,e);if(l!=null)return l}return t.split(".").reduce((l,d)=>l&&l[d]!=null?l[d]:null,e)}function B0(e,t,o,l=o){let d;return typeof e=="function"?d=e(o):Array.isArray(e)?d=e[o]||l:d=Cy(e,o)||l,t&&(d=t(d,l,e)),d}function Cr(e){const{prop:t,cssProperty:o=e.prop,themeKey:l,transform:d}=e,p=y=>{if(y[t]==null)return null;const a=y[t],w=y.theme,C=Cy(w,l)||{};return ko(y,a,D=>{let R=B0(C,d,D);return D===R&&typeof D=="string"&&(R=B0(C,d,`${t}${D==="default"?"":en(D)}`,D)),o===!1?R:{[o]:R}})};return p.propTypes={},p.filterProps=[t],p}function Zz(e){const t={};return o=>(t[o]===void 0&&(t[o]=e(o)),t[o])}const Xz={m:"margin",p:"padding"},Yz={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},K6={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Kz=Zz(e=>{if(e.length>2)if(K6[e])e=K6[e];else return[e];const[t,o]=e.split(""),l=Xz[t],d=Yz[o]||"";return Array.isArray(d)?d.map(p=>l+p):[l+d]}),t3=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],n3=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...t3,...n3];function O1(e,t,o,l){var d;const p=(d=Cy(e,t,!1))!=null?d:o;return typeof p=="number"?y=>typeof y=="string"?y:p*y:Array.isArray(p)?y=>typeof y=="string"?y:p[y]:typeof p=="function"?p:()=>{}}function r3(e){return O1(e,"spacing",8)}function yu(e,t){if(typeof t=="string"||t==null)return t;const o=Math.abs(t),l=e(o);return t>=0?l:typeof l=="number"?-l:`-${l}`}function Jz(e,t){return o=>e.reduce((l,d)=>(l[d]=yu(t,o),l),{})}function Qz(e,t,o,l){if(t.indexOf(o)===-1)return null;const d=Kz(o),p=Jz(d,l),y=e[o];return ko(e,y,p)}function v9(e,t){const o=r3(e.theme);return Object.keys(e).map(l=>Qz(e,t,l,o)).reduce(Gf,{})}function li(e){return v9(e,t3)}li.propTypes={};li.filterProps=t3;function ci(e){return v9(e,n3)}ci.propTypes={};ci.filterProps=n3;function eR(e=8){if(e.mui)return e;const t=r3({spacing:e}),o=(...l)=>(l.length===0?[1]:l).map(p=>{const y=t(p);return typeof y=="number"?`${y}px`:y}).join(" ");return o.mui=!0,o}function Ey(...e){const t=e.reduce((l,d)=>(d.filterProps.forEach(p=>{l[p]=d}),l),{}),o=l=>Object.keys(l).reduce((d,p)=>t[p]?Gf(d,t[p](l)):d,{});return o.propTypes={},o.filterProps=e.reduce((l,d)=>l.concat(d.filterProps),[]),o}function pa(e){return typeof e!="number"?e:`${e}px solid`}const tR=Cr({prop:"border",themeKey:"borders",transform:pa}),nR=Cr({prop:"borderTop",themeKey:"borders",transform:pa}),rR=Cr({prop:"borderRight",themeKey:"borders",transform:pa}),iR=Cr({prop:"borderBottom",themeKey:"borders",transform:pa}),oR=Cr({prop:"borderLeft",themeKey:"borders",transform:pa}),sR=Cr({prop:"borderColor",themeKey:"palette"}),aR=Cr({prop:"borderTopColor",themeKey:"palette"}),lR=Cr({prop:"borderRightColor",themeKey:"palette"}),cR=Cr({prop:"borderBottomColor",themeKey:"palette"}),uR=Cr({prop:"borderLeftColor",themeKey:"palette"}),ky=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=O1(e.theme,"shape.borderRadius",4),o=l=>({borderRadius:yu(t,l)});return ko(e,e.borderRadius,o)}return null};ky.propTypes={};ky.filterProps=["borderRadius"];Ey(tR,nR,rR,iR,oR,sR,aR,lR,cR,uR,ky);const Py=e=>{if(e.gap!==void 0&&e.gap!==null){const t=O1(e.theme,"spacing",8),o=l=>({gap:yu(t,l)});return ko(e,e.gap,o)}return null};Py.propTypes={};Py.filterProps=["gap"];const My=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=O1(e.theme,"spacing",8),o=l=>({columnGap:yu(t,l)});return ko(e,e.columnGap,o)}return null};My.propTypes={};My.filterProps=["columnGap"];const Iy=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=O1(e.theme,"spacing",8),o=l=>({rowGap:yu(t,l)});return ko(e,e.rowGap,o)}return null};Iy.propTypes={};Iy.filterProps=["rowGap"];const dR=Cr({prop:"gridColumn"}),hR=Cr({prop:"gridRow"}),pR=Cr({prop:"gridAutoFlow"}),fR=Cr({prop:"gridAutoColumns"}),mR=Cr({prop:"gridAutoRows"}),gR=Cr({prop:"gridTemplateColumns"}),yR=Cr({prop:"gridTemplateRows"}),_R=Cr({prop:"gridTemplateAreas"}),xR=Cr({prop:"gridArea"});Ey(Py,My,Iy,dR,hR,pR,fR,mR,gR,yR,_R,xR);function ih(e,t){return t==="grey"?t:e}const vR=Cr({prop:"color",themeKey:"palette",transform:ih}),bR=Cr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ih}),wR=Cr({prop:"backgroundColor",themeKey:"palette",transform:ih});Ey(vR,bR,wR);function Bo(e){return e<=1&&e!==0?`${e*100}%`:e}const SR=Cr({prop:"width",transform:Bo}),i3=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=o=>{var l,d,p;return{maxWidth:((l=e.theme)==null||(d=l.breakpoints)==null||(p=d.values)==null?void 0:p[o])||e3[o]||Bo(o)}};return ko(e,e.maxWidth,t)}return null};i3.filterProps=["maxWidth"];const TR=Cr({prop:"minWidth",transform:Bo}),CR=Cr({prop:"height",transform:Bo}),ER=Cr({prop:"maxHeight",transform:Bo}),kR=Cr({prop:"minHeight",transform:Bo});Cr({prop:"size",cssProperty:"width",transform:Bo});Cr({prop:"size",cssProperty:"height",transform:Bo});const PR=Cr({prop:"boxSizing"});Ey(SR,i3,TR,CR,ER,kR,PR);const MR={border:{themeKey:"borders",transform:pa},borderTop:{themeKey:"borders",transform:pa},borderRight:{themeKey:"borders",transform:pa},borderBottom:{themeKey:"borders",transform:pa},borderLeft:{themeKey:"borders",transform:pa},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ky},color:{themeKey:"palette",transform:ih},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ih},backgroundColor:{themeKey:"palette",transform:ih},p:{style:ci},pt:{style:ci},pr:{style:ci},pb:{style:ci},pl:{style:ci},px:{style:ci},py:{style:ci},padding:{style:ci},paddingTop:{style:ci},paddingRight:{style:ci},paddingBottom:{style:ci},paddingLeft:{style:ci},paddingX:{style:ci},paddingY:{style:ci},paddingInline:{style:ci},paddingInlineStart:{style:ci},paddingInlineEnd:{style:ci},paddingBlock:{style:ci},paddingBlockStart:{style:ci},paddingBlockEnd:{style:ci},m:{style:li},mt:{style:li},mr:{style:li},mb:{style:li},ml:{style:li},mx:{style:li},my:{style:li},margin:{style:li},marginTop:{style:li},marginRight:{style:li},marginBottom:{style:li},marginLeft:{style:li},marginX:{style:li},marginY:{style:li},marginInline:{style:li},marginInlineStart:{style:li},marginInlineEnd:{style:li},marginBlock:{style:li},marginBlockStart:{style:li},marginBlockEnd:{style:li},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Py},rowGap:{style:Iy},columnGap:{style:My},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Bo},maxWidth:{style:i3},minWidth:{transform:Bo},height:{transform:Bo},maxHeight:{transform:Bo},minHeight:{transform:Bo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Ay=MR;function IR(...e){const t=e.reduce((l,d)=>l.concat(Object.keys(d)),[]),o=new Set(t);return e.every(l=>o.size===Object.keys(l).length)}function AR(e,t){return typeof e=="function"?e(t):e}function DR(){function e(o,l,d,p){const y={[o]:l,theme:d},a=p[o];if(!a)return{[o]:l};const{cssProperty:w=o,themeKey:C,transform:M,style:D}=a;if(l==null)return null;if(C==="typography"&&l==="inherit")return{[o]:l};const R=Cy(d,C)||{};return D?D(y):ko(y,l,V=>{let B=B0(R,M,V);return V===B&&typeof V=="string"&&(B=B0(R,M,`${o}${V==="default"?"":en(V)}`,V)),w===!1?B:{[w]:B}})}function t(o){var l;const{sx:d,theme:p={}}=o||{};if(!d)return null;const y=(l=p.unstable_sxConfig)!=null?l:Ay;function a(w){let C=w;if(typeof w=="function")C=w(p);else if(typeof w!="object")return w;if(!C)return null;const M=_9(p.breakpoints),D=Object.keys(M);let R=M;return Object.keys(C).forEach($=>{const V=AR(C[$],p);if(V!=null)if(typeof V=="object")if(y[$])R=Gf(R,e($,V,p,y));else{const B=ko({theme:p},V,J=>({[$]:J}));IR(B,V)?R[$]=t({sx:V,theme:p}):R=Gf(R,B)}else R=Gf(R,e($,V,p,y))}),x9(D,R)}return Array.isArray(d)?d.map(a):a(d)}return t}const b9=DR();b9.filterProps=["sx"];const Dy=b9,zR=["breakpoints","palette","spacing","shape"];function zy(e={},...t){const{breakpoints:o={},palette:l={},spacing:d,shape:p={}}=e,y=Bt(e,zR),a=Vz(o),w=eR(d);let C=wo({breakpoints:a,direction:"ltr",components:{},palette:H({mode:"light"},l),spacing:w,shape:H({},Gz,p)},y);return C=t.reduce((M,D)=>wo(M,D),C),C.unstable_sxConfig=H({},Ay,y==null?void 0:y.unstable_sxConfig),C.unstable_sx=function(D){return Dy({sx:D,theme:this})},C}function RR(e){return Object.keys(e).length===0}function o3(e=null){const t=W.useContext(Jb);return!t||RR(t)?e:t}const LR=zy();function Mh(e=LR){return o3(e)}function OR({styles:e,themeId:t,defaultTheme:o={}}){const l=Mh(o),d=typeof e=="function"?e(t&&l[t]||l):e;return ee.jsx($z,{styles:d})}const BR=["sx"],FR=e=>{var t,o;const l={systemProps:{},otherProps:{}},d=(t=e==null||(o=e.theme)==null?void 0:o.unstable_sxConfig)!=null?t:Ay;return Object.keys(e).forEach(p=>{d[p]?l.systemProps[p]=e[p]:l.otherProps[p]=e[p]}),l};function Ry(e){const{sx:t}=e,o=Bt(e,BR),{systemProps:l,otherProps:d}=FR(o);let p;return Array.isArray(t)?p=[l,...t]:typeof t=="function"?p=(...y)=>{const a=t(...y);return tu(a)?H({},l,a):l}:p=H({},l,t),H({},d,{sx:p})}function w9(e){var t,o,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=w9(e[t]))&&(l&&(l+=" "),l+=o);else for(t in e)e[t]&&(l&&(l+=" "),l+=t);return l}function qt(){for(var e,t,o=0,l="";o<arguments.length;)(e=arguments[o++])&&(t=w9(e))&&(l&&(l+=" "),l+=t);return l}const $R=["className","component"];function NR(e={}){const{themeId:t,defaultTheme:o,defaultClassName:l="MuiBox-root",generateClassName:d}=e,p=y9("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Dy);return W.forwardRef(function(w,C){const M=Mh(o),D=Ry(w),{className:R,component:$="div"}=D,V=Bt(D,$R);return ee.jsx(p,H({as:$,ref:C,className:qt(R,d?d(l):l),theme:t&&M[t]||M},V))})}const jR=["variant"];function J6(e){return e.length===0}function S9(e){const{variant:t}=e,o=Bt(e,jR);let l=t||"";return Object.keys(o).sort().forEach(d=>{d==="color"?l+=J6(l)?e[d]:en(e[d]):l+=`${J6(l)?d:en(d)}${en(e[d].toString())}`}),l}const UR=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function VR(e){return Object.keys(e).length===0}function WR(e){return typeof e=="string"&&e.charCodeAt(0)>96}const GR=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,HR=(e,t)=>{let o=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(o=t.components[e].variants);const l={};return o.forEach(d=>{const p=S9(d.props);l[p]=d.style}),l},qR=(e,t,o,l)=>{var d,p;const{ownerState:y={}}=e,a=[],w=o==null||(d=o.components)==null||(p=d[l])==null?void 0:p.variants;return w&&w.forEach(C=>{let M=!0;Object.keys(C.props).forEach(D=>{y[D]!==C.props[D]&&e[D]!==C.props[D]&&(M=!1)}),M&&a.push(t[S9(C.props)])}),a};function Hf(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const ZR=zy();function xf({defaultTheme:e,theme:t,themeId:o}){return VR(t)?e:t[o]||t}function T9(e={}){const{themeId:t,defaultTheme:o=ZR,rootShouldForwardProp:l=Hf,slotShouldForwardProp:d=Hf}=e,p=y=>Dy(H({},y,{theme:xf(H({},y,{defaultTheme:o,themeId:t}))}));return p.__mui_systemSx=!0,(y,a={})=>{Nz(y,Y=>Y.filter(K=>!(K!=null&&K.__mui_systemSx)));const{name:w,slot:C,skipVariantsResolver:M,skipSx:D,overridesResolver:R}=a,$=Bt(a,UR),V=M!==void 0?M:C&&C!=="Root"||!1,B=D||!1;let J,j=Hf;C==="Root"?j=l:C?j=d:WR(y)&&(j=void 0);const N=y9(y,H({shouldForwardProp:j,label:J},$)),G=(Y,...K)=>{const oe=K?K.map(ye=>typeof ye=="function"&&ye.__emotion_real!==ye?Ce=>ye(H({},Ce,{theme:xf(H({},Ce,{defaultTheme:o,themeId:t}))})):ye):[];let ie=Y;w&&R&&oe.push(ye=>{const Ce=xf(H({},ye,{defaultTheme:o,themeId:t})),Fe=GR(w,Ce);if(Fe){const be={};return Object.entries(Fe).forEach(([we,he])=>{be[we]=typeof he=="function"?he(H({},ye,{theme:Ce})):he}),R(ye,be)}return null}),w&&!V&&oe.push(ye=>{const Ce=xf(H({},ye,{defaultTheme:o,themeId:t}));return qR(ye,HR(w,Ce),Ce,w)}),B||oe.push(p);const de=oe.length-K.length;if(Array.isArray(Y)&&de>0){const ye=new Array(de).fill("");ie=[...Y,...ye],ie.raw=[...Y.raw,...ye]}else typeof Y=="function"&&Y.__emotion_real!==Y&&(ie=ye=>Y(H({},ye,{theme:xf(H({},ye,{defaultTheme:o,themeId:t}))})));const le=N(ie,...oe);return y.muiName&&(le.muiName=y.muiName),le};return N.withConfig&&(G.withConfig=N.withConfig),G}}const XR=T9(),YR=XR;function C9(e){const{theme:t,name:o,props:l}=e;return!t||!t.components||!t.components[o]||!t.components[o].defaultProps?l:Wb(t.components[o].defaultProps,l)}function E9({props:e,name:t,defaultTheme:o,themeId:l}){let d=Mh(o);return l&&(d=d[l]||d),C9({theme:d,name:t,props:e})}function s3(e,t=0,o=1){return Math.min(Math.max(t,e),o)}function KR(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let o=e.match(t);return o&&o[0].length===1&&(o=o.map(l=>l+l)),o?`rgb${o.length===4?"a":""}(${o.map((l,d)=>d<3?parseInt(l,16):Math.round(parseInt(l,16)/255*1e3)/1e3).join(", ")})`:""}function _u(e){if(e.type)return e;if(e.charAt(0)==="#")return _u(KR(e));const t=e.indexOf("("),o=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(o)===-1)throw new Error(nc(9,e));let l=e.substring(t+1,e.length-1),d;if(o==="color"){if(l=l.split(" "),d=l.shift(),l.length===4&&l[3].charAt(0)==="/"&&(l[3]=l[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(d)===-1)throw new Error(nc(10,d))}else l=l.split(",");return l=l.map(p=>parseFloat(p)),{type:o,values:l,colorSpace:d}}function Ly(e){const{type:t,colorSpace:o}=e;let{values:l}=e;return t.indexOf("rgb")!==-1?l=l.map((d,p)=>p<3?parseInt(d,10):d):t.indexOf("hsl")!==-1&&(l[1]=`${l[1]}%`,l[2]=`${l[2]}%`),t.indexOf("color")!==-1?l=`${o} ${l.join(" ")}`:l=`${l.join(", ")}`,`${t}(${l})`}function JR(e){e=_u(e);const{values:t}=e,o=t[0],l=t[1]/100,d=t[2]/100,p=l*Math.min(d,1-d),y=(C,M=(C+o/30)%12)=>d-p*Math.max(Math.min(M-3,9-M,1),-1);let a="rgb";const w=[Math.round(y(0)*255),Math.round(y(8)*255),Math.round(y(4)*255)];return e.type==="hsla"&&(a+="a",w.push(t[3])),Ly({type:a,values:w})}function Q6(e){e=_u(e);let t=e.type==="hsl"||e.type==="hsla"?_u(JR(e)).values:e.values;return t=t.map(o=>(e.type!=="color"&&(o/=255),o<=.03928?o/12.92:((o+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function QR(e,t){const o=Q6(e),l=Q6(t);return(Math.max(o,l)+.05)/(Math.min(o,l)+.05)}function Kn(e,t){return e=_u(e),t=s3(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Ly(e)}function eL(e,t){if(e=_u(e),t=s3(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let o=0;o<3;o+=1)e.values[o]*=1-t;return Ly(e)}function tL(e,t){if(e=_u(e),t=s3(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let o=0;o<3;o+=1)e.values[o]+=(255-e.values[o])*t;else if(e.type.indexOf("color")!==-1)for(let o=0;o<3;o+=1)e.values[o]+=(1-e.values[o])*t;return Ly(e)}const nL=["component","direction","spacing","divider","children","className","useFlexGap"],rL=zy(),iL=YR("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function oL(e){return E9({props:e,name:"MuiStack",defaultTheme:rL})}function sL(e,t){const o=W.Children.toArray(e).filter(Boolean);return o.reduce((l,d,p)=>(l.push(d),p<o.length-1&&l.push(W.cloneElement(t,{key:`separator-${p}`})),l),[])}const aL=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],lL=({ownerState:e,theme:t})=>{let o=H({display:"flex",flexDirection:"column"},ko({theme:t},lu({values:e.direction,breakpoints:t.breakpoints.values}),l=>({flexDirection:l})));if(e.spacing){const l=r3(t),d=Object.keys(t.breakpoints.values).reduce((w,C)=>((typeof e.spacing=="object"&&e.spacing[C]!=null||typeof e.direction=="object"&&e.direction[C]!=null)&&(w[C]=!0),w),{}),p=lu({values:e.direction,base:d}),y=lu({values:e.spacing,base:d});typeof p=="object"&&Object.keys(p).forEach((w,C,M)=>{if(!p[w]){const R=C>0?p[M[C-1]]:"column";p[w]=R}}),o=wo(o,ko({theme:t},y,(w,C)=>e.useFlexGap?{gap:yu(l,w)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${aL(C?p[C]:e.direction)}`]:yu(l,w)}}))}return o=Hz(t.breakpoints,o),o};function cL(e={}){const{createStyledComponent:t=iL,useThemeProps:o=oL,componentName:l="MuiStack"}=e,d=()=>xn({root:["root"]},w=>wn(l,w),{}),p=t(lL);return W.forwardRef(function(w,C){const M=o(w),D=Ry(M),{component:R="div",direction:$="column",spacing:V=0,divider:B,children:J,className:j,useFlexGap:N=!1}=D,G=Bt(D,nL),Y={direction:$,spacing:V,useFlexGap:N},K=d();return ee.jsx(p,H({as:R,ownerState:Y,ref:C,className:qt(K.root,j)},G,{children:B?sL(J,B):J}))})}function uL(e,t){return H({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const dL={black:"#000",white:"#fff"},b1=dL,hL={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},pL=hL,fL={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},kd=fL,mL={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Pd=mL,gL={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},vf=gL,yL={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Md=yL,_L={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Id=_L,xL={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Ad=xL,vL=["mode","contrastThreshold","tonalOffset"],e7={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:b1.white,default:b1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},yx={text:{primary:b1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:b1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function t7(e,t,o,l){const d=l.light||l,p=l.dark||l*1.5;e[t]||(e.hasOwnProperty(o)?e[t]=e[o]:t==="light"?e.light=tL(e.main,d):t==="dark"&&(e.dark=eL(e.main,p)))}function bL(e="light"){return e==="dark"?{main:Md[200],light:Md[50],dark:Md[400]}:{main:Md[700],light:Md[400],dark:Md[800]}}function wL(e="light"){return e==="dark"?{main:kd[200],light:kd[50],dark:kd[400]}:{main:kd[500],light:kd[300],dark:kd[700]}}function SL(e="light"){return e==="dark"?{main:Pd[500],light:Pd[300],dark:Pd[700]}:{main:Pd[700],light:Pd[400],dark:Pd[800]}}function TL(e="light"){return e==="dark"?{main:Id[400],light:Id[300],dark:Id[700]}:{main:Id[700],light:Id[500],dark:Id[900]}}function CL(e="light"){return e==="dark"?{main:Ad[400],light:Ad[300],dark:Ad[700]}:{main:Ad[800],light:Ad[500],dark:Ad[900]}}function EL(e="light"){return e==="dark"?{main:vf[400],light:vf[300],dark:vf[700]}:{main:"#ed6c02",light:vf[500],dark:vf[900]}}function kL(e){const{mode:t="light",contrastThreshold:o=3,tonalOffset:l=.2}=e,d=Bt(e,vL),p=e.primary||bL(t),y=e.secondary||wL(t),a=e.error||SL(t),w=e.info||TL(t),C=e.success||CL(t),M=e.warning||EL(t);function D(B){return QR(B,yx.text.primary)>=o?yx.text.primary:e7.text.primary}const R=({color:B,name:J,mainShade:j=500,lightShade:N=300,darkShade:G=700})=>{if(B=H({},B),!B.main&&B[j]&&(B.main=B[j]),!B.hasOwnProperty("main"))throw new Error(nc(11,J?` (${J})`:"",j));if(typeof B.main!="string")throw new Error(nc(12,J?` (${J})`:"",JSON.stringify(B.main)));return t7(B,"light",N,l),t7(B,"dark",G,l),B.contrastText||(B.contrastText=D(B.main)),B},$={dark:yx,light:e7};return wo(H({common:H({},b1),mode:t,primary:R({color:p,name:"primary"}),secondary:R({color:y,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:a,name:"error"}),warning:R({color:M,name:"warning"}),info:R({color:w,name:"info"}),success:R({color:C,name:"success"}),grey:pL,contrastThreshold:o,getContrastText:D,augmentColor:R,tonalOffset:l},$[t]),d)}const PL=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function ML(e){return Math.round(e*1e5)/1e5}const n7={textTransform:"uppercase"},r7='"Roboto", "Helvetica", "Arial", sans-serif';function IL(e,t){const o=typeof t=="function"?t(e):t,{fontFamily:l=r7,fontSize:d=14,fontWeightLight:p=300,fontWeightRegular:y=400,fontWeightMedium:a=500,fontWeightBold:w=700,htmlFontSize:C=16,allVariants:M,pxToRem:D}=o,R=Bt(o,PL),$=d/14,V=D||(j=>`${j/C*$}rem`),B=(j,N,G,Y,K)=>H({fontFamily:l,fontWeight:j,fontSize:V(N),lineHeight:G},l===r7?{letterSpacing:`${ML(Y/N)}em`}:{},K,M),J={h1:B(p,96,1.167,-1.5),h2:B(p,60,1.2,-.5),h3:B(y,48,1.167,0),h4:B(y,34,1.235,.25),h5:B(y,24,1.334,0),h6:B(a,20,1.6,.15),subtitle1:B(y,16,1.75,.15),subtitle2:B(a,14,1.57,.1),body1:B(y,16,1.5,.15),body2:B(y,14,1.43,.15),button:B(a,14,1.75,.4,n7),caption:B(y,12,1.66,.4),overline:B(y,12,2.66,1,n7),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return wo(H({htmlFontSize:C,pxToRem:V,fontFamily:l,fontSize:d,fontWeightLight:p,fontWeightRegular:y,fontWeightMedium:a,fontWeightBold:w},J),R,{clone:!1})}const AL=.2,DL=.14,zL=.12;function Zr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${AL})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${DL})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${zL})`].join(",")}const RL=["none",Zr(0,2,1,-1,0,1,1,0,0,1,3,0),Zr(0,3,1,-2,0,2,2,0,0,1,5,0),Zr(0,3,3,-2,0,3,4,0,0,1,8,0),Zr(0,2,4,-1,0,4,5,0,0,1,10,0),Zr(0,3,5,-1,0,5,8,0,0,1,14,0),Zr(0,3,5,-1,0,6,10,0,0,1,18,0),Zr(0,4,5,-2,0,7,10,1,0,2,16,1),Zr(0,5,5,-3,0,8,10,1,0,3,14,2),Zr(0,5,6,-3,0,9,12,1,0,3,16,2),Zr(0,6,6,-3,0,10,14,1,0,4,18,3),Zr(0,6,7,-4,0,11,15,1,0,4,20,3),Zr(0,7,8,-4,0,12,17,2,0,5,22,4),Zr(0,7,8,-4,0,13,19,2,0,5,24,4),Zr(0,7,9,-4,0,14,21,2,0,5,26,4),Zr(0,8,9,-5,0,15,22,2,0,6,28,5),Zr(0,8,10,-5,0,16,24,2,0,6,30,5),Zr(0,8,11,-5,0,17,26,2,0,6,32,5),Zr(0,9,11,-5,0,18,28,2,0,7,34,6),Zr(0,9,12,-6,0,19,29,2,0,7,36,6),Zr(0,10,13,-6,0,20,31,3,0,8,38,7),Zr(0,10,13,-6,0,21,33,3,0,8,40,7),Zr(0,10,14,-6,0,22,35,3,0,8,42,7),Zr(0,11,14,-7,0,23,36,3,0,9,44,8),Zr(0,11,15,-7,0,24,38,3,0,9,46,8)],LL=RL,OL=["duration","easing","delay"],BL={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},FL={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function i7(e){return`${Math.round(e)}ms`}function $L(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function NL(e){const t=H({},BL,e.easing),o=H({},FL,e.duration);return H({getAutoHeightDuration:$L,create:(d=["all"],p={})=>{const{duration:y=o.standard,easing:a=t.easeInOut,delay:w=0}=p;return Bt(p,OL),(Array.isArray(d)?d:[d]).map(C=>`${C} ${typeof y=="string"?y:i7(y)} ${a} ${typeof w=="string"?w:i7(w)}`).join(",")}},e,{easing:t,duration:o})}const jL={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},UL=jL,VL=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function k9(e={},...t){const{mixins:o={},palette:l={},transitions:d={},typography:p={}}=e,y=Bt(e,VL);if(e.vars)throw new Error(nc(18));const a=kL(l),w=zy(e);let C=wo(w,{mixins:uL(w.breakpoints,o),palette:a,shadows:LL.slice(),typography:IL(a,p),transitions:NL(d),zIndex:H({},UL)});return C=wo(C,y),C=t.reduce((M,D)=>wo(M,D),C),C.unstable_sxConfig=H({},Ay,y==null?void 0:y.unstable_sxConfig),C.unstable_sx=function(D){return Dy({sx:D,theme:this})},C}const WL=k9(),Oy=WL;function ys(){const e=Mh(Oy);return e[R1]||e}function mn({props:e,name:t}){return E9({props:e,name:t,defaultTheme:Oy,themeId:R1})}const ba=e=>Hf(e)&&e!=="classes",GL=Hf,HL=T9({themeId:R1,defaultTheme:Oy,rootShouldForwardProp:ba}),dt=HL,qL=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},o7=qL;function P9(e,t){return function(){return e.apply(t,arguments)}}const{toString:ZL}=Object.prototype,{getPrototypeOf:a3}=Object,By=(e=>t=>{const o=ZL.call(t);return e[o]||(e[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),wa=e=>(e=e.toLowerCase(),t=>By(t)===e),Fy=e=>t=>typeof t===e,{isArray:Ih}=Array,w1=Fy("undefined");function XL(e){return e!==null&&!w1(e)&&e.constructor!==null&&!w1(e.constructor)&&us(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const M9=wa("ArrayBuffer");function YL(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&M9(e.buffer),t}const KL=Fy("string"),us=Fy("function"),I9=Fy("number"),$y=e=>e!==null&&typeof e=="object",JL=e=>e===!0||e===!1,r0=e=>{if(By(e)!=="object")return!1;const t=a3(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},QL=wa("Date"),eO=wa("File"),tO=wa("Blob"),nO=wa("FileList"),rO=e=>$y(e)&&us(e.pipe),iO=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||us(e.append)&&((t=By(e))==="formdata"||t==="object"&&us(e.toString)&&e.toString()==="[object FormData]"))},oO=wa("URLSearchParams"),sO=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function B1(e,t,{allOwnKeys:o=!1}={}){if(e===null||typeof e>"u")return;let l,d;if(typeof e!="object"&&(e=[e]),Ih(e))for(l=0,d=e.length;l<d;l++)t.call(null,e[l],l,e);else{const p=o?Object.getOwnPropertyNames(e):Object.keys(e),y=p.length;let a;for(l=0;l<y;l++)a=p[l],t.call(null,e[a],a,e)}}function A9(e,t){t=t.toLowerCase();const o=Object.keys(e);let l=o.length,d;for(;l-- >0;)if(d=o[l],t===d.toLowerCase())return d;return null}const D9=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),z9=e=>!w1(e)&&e!==D9;function Dv(){const{caseless:e}=z9(this)&&this||{},t={},o=(l,d)=>{const p=e&&A9(t,d)||d;r0(t[p])&&r0(l)?t[p]=Dv(t[p],l):r0(l)?t[p]=Dv({},l):Ih(l)?t[p]=l.slice():t[p]=l};for(let l=0,d=arguments.length;l<d;l++)arguments[l]&&B1(arguments[l],o);return t}const aO=(e,t,o,{allOwnKeys:l}={})=>(B1(t,(d,p)=>{o&&us(d)?e[p]=P9(d,o):e[p]=d},{allOwnKeys:l}),e),lO=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),cO=(e,t,o,l)=>{e.prototype=Object.create(t.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),o&&Object.assign(e.prototype,o)},uO=(e,t,o,l)=>{let d,p,y;const a={};if(t=t||{},e==null)return t;do{for(d=Object.getOwnPropertyNames(e),p=d.length;p-- >0;)y=d[p],(!l||l(y,e,t))&&!a[y]&&(t[y]=e[y],a[y]=!0);e=o!==!1&&a3(e)}while(e&&(!o||o(e,t))&&e!==Object.prototype);return t},dO=(e,t,o)=>{e=String(e),(o===void 0||o>e.length)&&(o=e.length),o-=t.length;const l=e.indexOf(t,o);return l!==-1&&l===o},hO=e=>{if(!e)return null;if(Ih(e))return e;let t=e.length;if(!I9(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=e[t];return o},pO=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&a3(Uint8Array)),fO=(e,t)=>{const l=(e&&e[Symbol.iterator]).call(e);let d;for(;(d=l.next())&&!d.done;){const p=d.value;t.call(e,p[0],p[1])}},mO=(e,t)=>{let o;const l=[];for(;(o=e.exec(t))!==null;)l.push(o);return l},gO=wa("HTMLFormElement"),yO=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,l,d){return l.toUpperCase()+d}),s7=(({hasOwnProperty:e})=>(t,o)=>e.call(t,o))(Object.prototype),_O=wa("RegExp"),R9=(e,t)=>{const o=Object.getOwnPropertyDescriptors(e),l={};B1(o,(d,p)=>{t(d,p,e)!==!1&&(l[p]=d)}),Object.defineProperties(e,l)},xO=e=>{R9(e,(t,o)=>{if(us(e)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const l=e[o];if(us(l)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},vO=(e,t)=>{const o={},l=d=>{d.forEach(p=>{o[p]=!0})};return Ih(e)?l(e):l(String(e).split(t)),o},bO=()=>{},wO=(e,t)=>(e=+e,Number.isFinite(e)?e:t),_x="abcdefghijklmnopqrstuvwxyz",a7="0123456789",L9={DIGIT:a7,ALPHA:_x,ALPHA_DIGIT:_x+_x.toUpperCase()+a7},SO=(e=16,t=L9.ALPHA_DIGIT)=>{let o="";const{length:l}=t;for(;e--;)o+=t[Math.random()*l|0];return o};function TO(e){return!!(e&&us(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const CO=e=>{const t=new Array(10),o=(l,d)=>{if($y(l)){if(t.indexOf(l)>=0)return;if(!("toJSON"in l)){t[d]=l;const p=Ih(l)?[]:{};return B1(l,(y,a)=>{const w=o(y,d+1);!w1(w)&&(p[a]=w)}),t[d]=void 0,p}}return l};return o(e,0)},EO=wa("AsyncFunction"),kO=e=>e&&($y(e)||us(e))&&us(e.then)&&us(e.catch),Ct={isArray:Ih,isArrayBuffer:M9,isBuffer:XL,isFormData:iO,isArrayBufferView:YL,isString:KL,isNumber:I9,isBoolean:JL,isObject:$y,isPlainObject:r0,isUndefined:w1,isDate:QL,isFile:eO,isBlob:tO,isRegExp:_O,isFunction:us,isStream:rO,isURLSearchParams:oO,isTypedArray:pO,isFileList:nO,forEach:B1,merge:Dv,extend:aO,trim:sO,stripBOM:lO,inherits:cO,toFlatObject:uO,kindOf:By,kindOfTest:wa,endsWith:dO,toArray:hO,forEachEntry:fO,matchAll:mO,isHTMLForm:gO,hasOwnProperty:s7,hasOwnProp:s7,reduceDescriptors:R9,freezeMethods:xO,toObjectSet:vO,toCamelCase:yO,noop:bO,toFiniteNumber:wO,findKey:A9,global:D9,isContextDefined:z9,ALPHABET:L9,generateString:SO,isSpecCompliantForm:TO,toJSONObject:CO,isAsyncFn:EO,isThenable:kO};function sr(e,t,o,l,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),l&&(this.request=l),d&&(this.response=d)}Ct.inherits(sr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ct.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const O9=sr.prototype,B9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{B9[e]={value:e}});Object.defineProperties(sr,B9);Object.defineProperty(O9,"isAxiosError",{value:!0});sr.from=(e,t,o,l,d,p)=>{const y=Object.create(O9);return Ct.toFlatObject(e,y,function(w){return w!==Error.prototype},a=>a!=="isAxiosError"),sr.call(y,e.message,t,o,l,d),y.cause=e,y.name=e.name,p&&Object.assign(y,p),y};const PO=null;function zv(e){return Ct.isPlainObject(e)||Ct.isArray(e)}function F9(e){return Ct.endsWith(e,"[]")?e.slice(0,-2):e}function l7(e,t,o){return e?e.concat(t).map(function(d,p){return d=F9(d),!o&&p?"["+d+"]":d}).join(o?".":""):t}function MO(e){return Ct.isArray(e)&&!e.some(zv)}const IO=Ct.toFlatObject(Ct,{},null,function(t){return/^is[A-Z]/.test(t)});function Ny(e,t,o){if(!Ct.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,o=Ct.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,J){return!Ct.isUndefined(J[B])});const l=o.metaTokens,d=o.visitor||M,p=o.dots,y=o.indexes,w=(o.Blob||typeof Blob<"u"&&Blob)&&Ct.isSpecCompliantForm(t);if(!Ct.isFunction(d))throw new TypeError("visitor must be a function");function C(V){if(V===null)return"";if(Ct.isDate(V))return V.toISOString();if(!w&&Ct.isBlob(V))throw new sr("Blob is not supported. Use a Buffer instead.");return Ct.isArrayBuffer(V)||Ct.isTypedArray(V)?w&&typeof Blob=="function"?new Blob([V]):Buffer.from(V):V}function M(V,B,J){let j=V;if(V&&!J&&typeof V=="object"){if(Ct.endsWith(B,"{}"))B=l?B:B.slice(0,-2),V=JSON.stringify(V);else if(Ct.isArray(V)&&MO(V)||(Ct.isFileList(V)||Ct.endsWith(B,"[]"))&&(j=Ct.toArray(V)))return B=F9(B),j.forEach(function(G,Y){!(Ct.isUndefined(G)||G===null)&&t.append(y===!0?l7([B],Y,p):y===null?B:B+"[]",C(G))}),!1}return zv(V)?!0:(t.append(l7(J,B,p),C(V)),!1)}const D=[],R=Object.assign(IO,{defaultVisitor:M,convertValue:C,isVisitable:zv});function $(V,B){if(!Ct.isUndefined(V)){if(D.indexOf(V)!==-1)throw Error("Circular reference detected in "+B.join("."));D.push(V),Ct.forEach(V,function(j,N){(!(Ct.isUndefined(j)||j===null)&&d.call(t,j,Ct.isString(N)?N.trim():N,B,R))===!0&&$(j,B?B.concat(N):[N])}),D.pop()}}if(!Ct.isObject(e))throw new TypeError("data must be an object");return $(e),t}function c7(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return t[l]})}function l3(e,t){this._pairs=[],e&&Ny(e,this,t)}const $9=l3.prototype;$9.append=function(t,o){this._pairs.push([t,o])};$9.toString=function(t){const o=t?function(l){return t.call(this,l,c7)}:c7;return this._pairs.map(function(d){return o(d[0])+"="+o(d[1])},"").join("&")};function AO(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function N9(e,t,o){if(!t)return e;const l=o&&o.encode||AO,d=o&&o.serialize;let p;if(d?p=d(t,o):p=Ct.isURLSearchParams(t)?t.toString():new l3(t,o).toString(l),p){const y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+p}return e}class DO{constructor(){this.handlers=[]}use(t,o,l){return this.handlers.push({fulfilled:t,rejected:o,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ct.forEach(this.handlers,function(l){l!==null&&t(l)})}}const u7=DO,j9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zO=typeof URLSearchParams<"u"?URLSearchParams:l3,RO=typeof FormData<"u"?FormData:null,LO=typeof Blob<"u"?Blob:null,OO=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),BO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ma={isBrowser:!0,classes:{URLSearchParams:zO,FormData:RO,Blob:LO},isStandardBrowserEnv:OO,isStandardBrowserWebWorkerEnv:BO,protocols:["http","https","file","blob","url","data"]};function FO(e,t){return Ny(e,new ma.classes.URLSearchParams,Object.assign({visitor:function(o,l,d,p){return ma.isNode&&Ct.isBuffer(o)?(this.append(l,o.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},t))}function $O(e){return Ct.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function NO(e){const t={},o=Object.keys(e);let l;const d=o.length;let p;for(l=0;l<d;l++)p=o[l],t[p]=e[p];return t}function U9(e){function t(o,l,d,p){let y=o[p++];const a=Number.isFinite(+y),w=p>=o.length;return y=!y&&Ct.isArray(d)?d.length:y,w?(Ct.hasOwnProp(d,y)?d[y]=[d[y],l]:d[y]=l,!a):((!d[y]||!Ct.isObject(d[y]))&&(d[y]=[]),t(o,l,d[y],p)&&Ct.isArray(d[y])&&(d[y]=NO(d[y])),!a)}if(Ct.isFormData(e)&&Ct.isFunction(e.entries)){const o={};return Ct.forEachEntry(e,(l,d)=>{t($O(l),d,o,0)}),o}return null}const jO={"Content-Type":void 0};function UO(e,t,o){if(Ct.isString(e))try{return(t||JSON.parse)(e),Ct.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(o||JSON.stringify)(e)}const jy={transitional:j9,adapter:["xhr","http"],transformRequest:[function(t,o){const l=o.getContentType()||"",d=l.indexOf("application/json")>-1,p=Ct.isObject(t);if(p&&Ct.isHTMLForm(t)&&(t=new FormData(t)),Ct.isFormData(t))return d&&d?JSON.stringify(U9(t)):t;if(Ct.isArrayBuffer(t)||Ct.isBuffer(t)||Ct.isStream(t)||Ct.isFile(t)||Ct.isBlob(t))return t;if(Ct.isArrayBufferView(t))return t.buffer;if(Ct.isURLSearchParams(t))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return FO(t,this.formSerializer).toString();if((a=Ct.isFileList(t))||l.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return Ny(a?{"files[]":t}:t,w&&new w,this.formSerializer)}}return p||d?(o.setContentType("application/json",!1),UO(t)):t}],transformResponse:[function(t){const o=this.transitional||jy.transitional,l=o&&o.forcedJSONParsing,d=this.responseType==="json";if(t&&Ct.isString(t)&&(l&&!this.responseType||d)){const y=!(o&&o.silentJSONParsing)&&d;try{return JSON.parse(t)}catch(a){if(y)throw a.name==="SyntaxError"?sr.from(a,sr.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ma.classes.FormData,Blob:ma.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ct.forEach(["delete","get","head"],function(t){jy.headers[t]={}});Ct.forEach(["post","put","patch"],function(t){jy.headers[t]=Ct.merge(jO)});const c3=jy,VO=Ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),WO=e=>{const t={};let o,l,d;return e&&e.split(`
`).forEach(function(y){d=y.indexOf(":"),o=y.substring(0,d).trim().toLowerCase(),l=y.substring(d+1).trim(),!(!o||t[o]&&VO[o])&&(o==="set-cookie"?t[o]?t[o].push(l):t[o]=[l]:t[o]=t[o]?t[o]+", "+l:l)}),t},d7=Symbol("internals");function bf(e){return e&&String(e).trim().toLowerCase()}function i0(e){return e===!1||e==null?e:Ct.isArray(e)?e.map(i0):String(e)}function GO(e){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=o.exec(e);)t[l[1]]=l[2];return t}const HO=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function xx(e,t,o,l,d){if(Ct.isFunction(l))return l.call(this,t,o);if(d&&(t=o),!!Ct.isString(t)){if(Ct.isString(l))return t.indexOf(l)!==-1;if(Ct.isRegExp(l))return l.test(t)}}function qO(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,l)=>o.toUpperCase()+l)}function ZO(e,t){const o=Ct.toCamelCase(" "+t);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+o,{value:function(d,p,y){return this[l].call(this,t,d,p,y)},configurable:!0})})}class Uy{constructor(t){t&&this.set(t)}set(t,o,l){const d=this;function p(a,w,C){const M=bf(w);if(!M)throw new Error("header name must be a non-empty string");const D=Ct.findKey(d,M);(!D||d[D]===void 0||C===!0||C===void 0&&d[D]!==!1)&&(d[D||w]=i0(a))}const y=(a,w)=>Ct.forEach(a,(C,M)=>p(C,M,w));return Ct.isPlainObject(t)||t instanceof this.constructor?y(t,o):Ct.isString(t)&&(t=t.trim())&&!HO(t)?y(WO(t),o):t!=null&&p(o,t,l),this}get(t,o){if(t=bf(t),t){const l=Ct.findKey(this,t);if(l){const d=this[l];if(!o)return d;if(o===!0)return GO(d);if(Ct.isFunction(o))return o.call(this,d,l);if(Ct.isRegExp(o))return o.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,o){if(t=bf(t),t){const l=Ct.findKey(this,t);return!!(l&&this[l]!==void 0&&(!o||xx(this,this[l],l,o)))}return!1}delete(t,o){const l=this;let d=!1;function p(y){if(y=bf(y),y){const a=Ct.findKey(l,y);a&&(!o||xx(l,l[a],a,o))&&(delete l[a],d=!0)}}return Ct.isArray(t)?t.forEach(p):p(t),d}clear(t){const o=Object.keys(this);let l=o.length,d=!1;for(;l--;){const p=o[l];(!t||xx(this,this[p],p,t,!0))&&(delete this[p],d=!0)}return d}normalize(t){const o=this,l={};return Ct.forEach(this,(d,p)=>{const y=Ct.findKey(l,p);if(y){o[y]=i0(d),delete o[p];return}const a=t?qO(p):String(p).trim();a!==p&&delete o[p],o[a]=i0(d),l[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const o=Object.create(null);return Ct.forEach(this,(l,d)=>{l!=null&&l!==!1&&(o[d]=t&&Ct.isArray(l)?l.join(", "):l)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,o])=>t+": "+o).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...o){const l=new this(t);return o.forEach(d=>l.set(d)),l}static accessor(t){const l=(this[d7]=this[d7]={accessors:{}}).accessors,d=this.prototype;function p(y){const a=bf(y);l[a]||(ZO(d,y),l[a]=!0)}return Ct.isArray(t)?t.forEach(p):p(t),this}}Uy.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ct.freezeMethods(Uy.prototype);Ct.freezeMethods(Uy);const Ha=Uy;function vx(e,t){const o=this||c3,l=t||o,d=Ha.from(l.headers);let p=l.data;return Ct.forEach(e,function(a){p=a.call(o,p,d.normalize(),t?t.status:void 0)}),d.normalize(),p}function V9(e){return!!(e&&e.__CANCEL__)}function F1(e,t,o){sr.call(this,e??"canceled",sr.ERR_CANCELED,t,o),this.name="CanceledError"}Ct.inherits(F1,sr,{__CANCEL__:!0});function XO(e,t,o){const l=o.config.validateStatus;!o.status||!l||l(o.status)?e(o):t(new sr("Request failed with status code "+o.status,[sr.ERR_BAD_REQUEST,sr.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}const YO=ma.isStandardBrowserEnv?function(){return{write:function(o,l,d,p,y,a){const w=[];w.push(o+"="+encodeURIComponent(l)),Ct.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),Ct.isString(p)&&w.push("path="+p),Ct.isString(y)&&w.push("domain="+y),a===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(o){const l=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function KO(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function JO(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function W9(e,t){return e&&!KO(t)?JO(e,t):t}const QO=ma.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");let l;function d(p){let y=p;return t&&(o.setAttribute("href",y),y=o.href),o.setAttribute("href",y),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return l=d(window.location.href),function(y){const a=Ct.isString(y)?d(y):y;return a.protocol===l.protocol&&a.host===l.host}}():function(){return function(){return!0}}();function eB(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function tB(e,t){e=e||10;const o=new Array(e),l=new Array(e);let d=0,p=0,y;return t=t!==void 0?t:1e3,function(w){const C=Date.now(),M=l[p];y||(y=C),o[d]=w,l[d]=C;let D=p,R=0;for(;D!==d;)R+=o[D++],D=D%e;if(d=(d+1)%e,d===p&&(p=(p+1)%e),C-y<t)return;const $=M&&C-M;return $?Math.round(R*1e3/$):void 0}}function h7(e,t){let o=0;const l=tB(50,250);return d=>{const p=d.loaded,y=d.lengthComputable?d.total:void 0,a=p-o,w=l(a),C=p<=y;o=p;const M={loaded:p,total:y,progress:y?p/y:void 0,bytes:a,rate:w||void 0,estimated:w&&y&&C?(y-p)/w:void 0,event:d};M[t?"download":"upload"]=!0,e(M)}}const nB=typeof XMLHttpRequest<"u",rB=nB&&function(e){return new Promise(function(o,l){let d=e.data;const p=Ha.from(e.headers).normalize(),y=e.responseType;let a;function w(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}Ct.isFormData(d)&&(ma.isStandardBrowserEnv||ma.isStandardBrowserWebWorkerEnv?p.setContentType(!1):p.setContentType("multipart/form-data;",!1));let C=new XMLHttpRequest;if(e.auth){const $=e.auth.username||"",V=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.set("Authorization","Basic "+btoa($+":"+V))}const M=W9(e.baseURL,e.url);C.open(e.method.toUpperCase(),N9(M,e.params,e.paramsSerializer),!0),C.timeout=e.timeout;function D(){if(!C)return;const $=Ha.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),B={data:!y||y==="text"||y==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:$,config:e,request:C};XO(function(j){o(j),w()},function(j){l(j),w()},B),C=null}if("onloadend"in C?C.onloadend=D:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(D)},C.onabort=function(){C&&(l(new sr("Request aborted",sr.ECONNABORTED,e,C)),C=null)},C.onerror=function(){l(new sr("Network Error",sr.ERR_NETWORK,e,C)),C=null},C.ontimeout=function(){let V=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const B=e.transitional||j9;e.timeoutErrorMessage&&(V=e.timeoutErrorMessage),l(new sr(V,B.clarifyTimeoutError?sr.ETIMEDOUT:sr.ECONNABORTED,e,C)),C=null},ma.isStandardBrowserEnv){const $=(e.withCredentials||QO(M))&&e.xsrfCookieName&&YO.read(e.xsrfCookieName);$&&p.set(e.xsrfHeaderName,$)}d===void 0&&p.setContentType(null),"setRequestHeader"in C&&Ct.forEach(p.toJSON(),function(V,B){C.setRequestHeader(B,V)}),Ct.isUndefined(e.withCredentials)||(C.withCredentials=!!e.withCredentials),y&&y!=="json"&&(C.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&C.addEventListener("progress",h7(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",h7(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=$=>{C&&(l(!$||$.type?new F1(null,e,C):$),C.abort(),C=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const R=eB(M);if(R&&ma.protocols.indexOf(R)===-1){l(new sr("Unsupported protocol "+R+":",sr.ERR_BAD_REQUEST,e));return}C.send(d||null)})},o0={http:PO,xhr:rB};Ct.forEach(o0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const iB={getAdapter:e=>{e=Ct.isArray(e)?e:[e];const{length:t}=e;let o,l;for(let d=0;d<t&&(o=e[d],!(l=Ct.isString(o)?o0[o.toLowerCase()]:o));d++);if(!l)throw l===!1?new sr(`Adapter ${o} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Ct.hasOwnProp(o0,o)?`Adapter '${o}' is not available in the build`:`Unknown adapter '${o}'`);if(!Ct.isFunction(l))throw new TypeError("adapter is not a function");return l},adapters:o0};function bx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new F1(null,e)}function p7(e){return bx(e),e.headers=Ha.from(e.headers),e.data=vx.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),iB.getAdapter(e.adapter||c3.adapter)(e).then(function(l){return bx(e),l.data=vx.call(e,e.transformResponse,l),l.headers=Ha.from(l.headers),l},function(l){return V9(l)||(bx(e),l&&l.response&&(l.response.data=vx.call(e,e.transformResponse,l.response),l.response.headers=Ha.from(l.response.headers))),Promise.reject(l)})}const f7=e=>e instanceof Ha?e.toJSON():e;function yh(e,t){t=t||{};const o={};function l(C,M,D){return Ct.isPlainObject(C)&&Ct.isPlainObject(M)?Ct.merge.call({caseless:D},C,M):Ct.isPlainObject(M)?Ct.merge({},M):Ct.isArray(M)?M.slice():M}function d(C,M,D){if(Ct.isUndefined(M)){if(!Ct.isUndefined(C))return l(void 0,C,D)}else return l(C,M,D)}function p(C,M){if(!Ct.isUndefined(M))return l(void 0,M)}function y(C,M){if(Ct.isUndefined(M)){if(!Ct.isUndefined(C))return l(void 0,C)}else return l(void 0,M)}function a(C,M,D){if(D in t)return l(C,M);if(D in e)return l(void 0,C)}const w={url:p,method:p,data:p,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:a,headers:(C,M)=>d(f7(C),f7(M),!0)};return Ct.forEach(Object.keys(Object.assign({},e,t)),function(M){const D=w[M]||d,R=D(e[M],t[M],M);Ct.isUndefined(R)&&D!==a||(o[M]=R)}),o}const G9="1.4.0",u3={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{u3[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});const m7={};u3.transitional=function(t,o,l){function d(p,y){return"[Axios v"+G9+"] Transitional option '"+p+"'"+y+(l?". "+l:"")}return(p,y,a)=>{if(t===!1)throw new sr(d(y," has been removed"+(o?" in "+o:"")),sr.ERR_DEPRECATED);return o&&!m7[y]&&(m7[y]=!0,console.warn(d(y," has been deprecated since v"+o+" and will be removed in the near future"))),t?t(p,y,a):!0}};function oB(e,t,o){if(typeof e!="object")throw new sr("options must be an object",sr.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let d=l.length;for(;d-- >0;){const p=l[d],y=t[p];if(y){const a=e[p],w=a===void 0||y(a,p,e);if(w!==!0)throw new sr("option "+p+" must be "+w,sr.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new sr("Unknown option "+p,sr.ERR_BAD_OPTION)}}const Rv={assertOptions:oB,validators:u3},Ll=Rv.validators;class F0{constructor(t){this.defaults=t,this.interceptors={request:new u7,response:new u7}}request(t,o){typeof t=="string"?(o=o||{},o.url=t):o=t||{},o=yh(this.defaults,o);const{transitional:l,paramsSerializer:d,headers:p}=o;l!==void 0&&Rv.assertOptions(l,{silentJSONParsing:Ll.transitional(Ll.boolean),forcedJSONParsing:Ll.transitional(Ll.boolean),clarifyTimeoutError:Ll.transitional(Ll.boolean)},!1),d!=null&&(Ct.isFunction(d)?o.paramsSerializer={serialize:d}:Rv.assertOptions(d,{encode:Ll.function,serialize:Ll.function},!0)),o.method=(o.method||this.defaults.method||"get").toLowerCase();let y;y=p&&Ct.merge(p.common,p[o.method]),y&&Ct.forEach(["delete","get","head","post","put","patch","common"],V=>{delete p[V]}),o.headers=Ha.concat(y,p);const a=[];let w=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(o)===!1||(w=w&&B.synchronous,a.unshift(B.fulfilled,B.rejected))});const C=[];this.interceptors.response.forEach(function(B){C.push(B.fulfilled,B.rejected)});let M,D=0,R;if(!w){const V=[p7.bind(this),void 0];for(V.unshift.apply(V,a),V.push.apply(V,C),R=V.length,M=Promise.resolve(o);D<R;)M=M.then(V[D++],V[D++]);return M}R=a.length;let $=o;for(D=0;D<R;){const V=a[D++],B=a[D++];try{$=V($)}catch(J){B.call(this,J);break}}try{M=p7.call(this,$)}catch(V){return Promise.reject(V)}for(D=0,R=C.length;D<R;)M=M.then(C[D++],C[D++]);return M}getUri(t){t=yh(this.defaults,t);const o=W9(t.baseURL,t.url);return N9(o,t.params,t.paramsSerializer)}}Ct.forEach(["delete","get","head","options"],function(t){F0.prototype[t]=function(o,l){return this.request(yh(l||{},{method:t,url:o,data:(l||{}).data}))}});Ct.forEach(["post","put","patch"],function(t){function o(l){return function(p,y,a){return this.request(yh(a||{},{method:t,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:y}))}}F0.prototype[t]=o(),F0.prototype[t+"Form"]=o(!0)});const s0=F0;class d3{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(p){o=p});const l=this;this.promise.then(d=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](d);l._listeners=null}),this.promise.then=d=>{let p;const y=new Promise(a=>{l.subscribe(a),p=a}).then(d);return y.cancel=function(){l.unsubscribe(p)},y},t(function(p,y,a){l.reason||(l.reason=new F1(p,y,a),o(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}static source(){let t;return{token:new d3(function(d){t=d}),cancel:t}}}const sB=d3;function aB(e){return function(o){return e.apply(null,o)}}function lB(e){return Ct.isObject(e)&&e.isAxiosError===!0}const Lv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lv).forEach(([e,t])=>{Lv[t]=e});const cB=Lv;function H9(e){const t=new s0(e),o=P9(s0.prototype.request,t);return Ct.extend(o,s0.prototype,t,{allOwnKeys:!0}),Ct.extend(o,t,null,{allOwnKeys:!0}),o.create=function(d){return H9(yh(e,d))},o}const ki=H9(c3);ki.Axios=s0;ki.CanceledError=F1;ki.CancelToken=sB;ki.isCancel=V9;ki.VERSION=G9;ki.toFormData=Ny;ki.AxiosError=sr;ki.Cancel=ki.CanceledError;ki.all=function(t){return Promise.all(t)};ki.spread=aB;ki.isAxiosError=lB;ki.mergeConfig=yh;ki.AxiosHeaders=Ha;ki.formToJSON=e=>U9(Ct.isHTMLForm(e)?new FormData(e):e);ki.HttpStatusCode=cB;ki.default=ki;const Vy=ki;const uB=({inputValues:e,setInputValues:t})=>{const o=d=>{t({...e,[d.target.name]:d.target.value}),console.log("handleInputChange",e)},l=d=>{d.preventDefault(),console.log("handleInputSubmit",e),Vy.post("/users",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(p=>{console.log("errorless:",p.data);const y=p.data.waypoints;console.log("waypoints:",y),t({...e,waypoints:y}),console.log("handleInputSubmit",e)}).catch(p=>{p.response?(console.log(p.response),console.log("server responded with error")):p.request?console.log("network error"):console.log(p)})};return ee.jsx("div",{className:"comms",children:ee.jsxs("form",{onSubmit:l,children:[ee.jsx("label",{htmlFor:"latitude",children:"Latitude:"}),ee.jsx("input",{type:"text",name:"latitude",value:e.latitude,onChange:o}),ee.jsx("label",{htmlFor:"longitude",children:"Longitude:"}),ee.jsx("input",{type:"text",name:"longitude",value:e.longitude,onChange:o}),ee.jsx("label",{htmlFor:"hour",children:"Longitude:"}),ee.jsx("input",{type:"text",name:"hour",value:e.hour,onChange:o}),ee.jsx("button",{type:"submit",children:"Submit"})]})})},dB=cL({createStyledComponent:dt("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>mn({props:e,name:"MuiStack"})}),hB=dB;function xu(e){return typeof e=="string"}function pB(e,t,o){return e===void 0||xu(e)?t:H({},t,{ownerState:H({},t.ownerState,o)})}const fB={disableDefaultClasses:!1},mB=W.createContext(fB);function q9(e){const{disableDefaultClasses:t}=W.useContext(mB);return o=>t?"":e(o)}function gB(e,t=[]){if(e===void 0)return{};const o={};return Object.keys(e).filter(l=>l.match(/^on[A-Z]/)&&typeof e[l]=="function"&&!t.includes(l)).forEach(l=>{o[l]=e[l]}),o}function _h(e,t){return typeof e=="function"?e(t):e}function g7(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(o=>!(o.match(/^on[A-Z]/)&&typeof e[o]=="function")).forEach(o=>{t[o]=e[o]}),t}function yB(e){const{getSlotProps:t,additionalProps:o,externalSlotProps:l,externalForwardedProps:d,className:p}=e;if(!t){const $=qt(d==null?void 0:d.className,l==null?void 0:l.className,p,o==null?void 0:o.className),V=H({},o==null?void 0:o.style,d==null?void 0:d.style,l==null?void 0:l.style),B=H({},o,d,l);return $.length>0&&(B.className=$),Object.keys(V).length>0&&(B.style=V),{props:B,internalRef:void 0}}const y=gB(H({},d,l)),a=g7(l),w=g7(d),C=t(y),M=qt(C==null?void 0:C.className,o==null?void 0:o.className,p,d==null?void 0:d.className,l==null?void 0:l.className),D=H({},C==null?void 0:C.style,o==null?void 0:o.style,d==null?void 0:d.style,l==null?void 0:l.style),R=H({},C,o,w,a);return M.length>0&&(R.className=M),Object.keys(D).length>0&&(R.style=D),{props:R,internalRef:C.ref}}const _B=["elementType","externalSlotProps","ownerState"];function Fr(e){var t;const{elementType:o,externalSlotProps:l,ownerState:d}=e,p=Bt(e,_B),y=_h(l,d),{props:a,internalRef:w}=yB(H({},p,{externalSlotProps:y})),C=zr(w,y==null?void 0:y.ref,(t=e.additionalProps)==null?void 0:t.ref);return pB(o,H({},a,{ref:C}),d)}const xB=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function vB(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function bB(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=l=>e.ownerDocument.querySelector(`input[type="radio"]${l}`);let o=t(`[name="${e.name}"]:checked`);return o||(o=t(`[name="${e.name}"]`)),o!==e}function wB(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||bB(e))}function SB(e){const t=[],o=[];return Array.from(e.querySelectorAll(xB)).forEach((l,d)=>{const p=vB(l);p===-1||!wB(l)||(p===0?t.push(l):o.push({documentOrder:d,tabIndex:p,node:l}))}),o.sort((l,d)=>l.tabIndex===d.tabIndex?l.documentOrder-d.documentOrder:l.tabIndex-d.tabIndex).map(l=>l.node).concat(t)}function TB(){return!0}function Z9(e){const{children:t,disableAutoFocus:o=!1,disableEnforceFocus:l=!1,disableRestoreFocus:d=!1,getTabbable:p=SB,isEnabled:y=TB,open:a}=e,w=W.useRef(!1),C=W.useRef(null),M=W.useRef(null),D=W.useRef(null),R=W.useRef(null),$=W.useRef(!1),V=W.useRef(null),B=zr(t.ref,V),J=W.useRef(null);W.useEffect(()=>{!a||!V.current||($.current=!o)},[o,a]),W.useEffect(()=>{if(!a||!V.current)return;const G=Ci(V.current);return V.current.contains(G.activeElement)||(V.current.hasAttribute("tabIndex")||V.current.setAttribute("tabIndex","-1"),$.current&&V.current.focus()),()=>{d||(D.current&&D.current.focus&&(w.current=!0,D.current.focus()),D.current=null)}},[a]),W.useEffect(()=>{if(!a||!V.current)return;const G=Ci(V.current),Y=ie=>{const{current:de}=V;if(de!==null){if(!G.hasFocus()||l||!y()||w.current){w.current=!1;return}if(!de.contains(G.activeElement)){if(ie&&R.current!==ie.target||G.activeElement!==R.current)R.current=null;else if(R.current!==null)return;if(!$.current)return;let Ce=[];if((G.activeElement===C.current||G.activeElement===M.current)&&(Ce=p(V.current)),Ce.length>0){var le,ye;const Fe=!!((le=J.current)!=null&&le.shiftKey&&((ye=J.current)==null?void 0:ye.key)==="Tab"),be=Ce[0],we=Ce[Ce.length-1];typeof be!="string"&&typeof we!="string"&&(Fe?we.focus():be.focus())}else de.focus()}}},K=ie=>{J.current=ie,!(l||!y()||ie.key!=="Tab")&&G.activeElement===V.current&&ie.shiftKey&&(w.current=!0,M.current&&M.current.focus())};G.addEventListener("focusin",Y),G.addEventListener("keydown",K,!0);const oe=setInterval(()=>{G.activeElement&&G.activeElement.tagName==="BODY"&&Y(null)},50);return()=>{clearInterval(oe),G.removeEventListener("focusin",Y),G.removeEventListener("keydown",K,!0)}},[o,l,d,y,a,p]);const j=G=>{D.current===null&&(D.current=G.relatedTarget),$.current=!0,R.current=G.target;const Y=t.props.onFocus;Y&&Y(G)},N=G=>{D.current===null&&(D.current=G.relatedTarget),$.current=!0};return ee.jsxs(W.Fragment,{children:[ee.jsx("div",{tabIndex:a?0:-1,onFocus:N,ref:C,"data-testid":"sentinelStart"}),W.cloneElement(t,{ref:B,onFocus:j}),ee.jsx("div",{tabIndex:a?0:-1,onFocus:N,ref:M,"data-testid":"sentinelEnd"})]})}var So="top",fs="bottom",ms="right",To="left",h3="auto",$1=[So,fs,ms,To],xh="start",S1="end",CB="clippingParents",X9="viewport",wf="popper",EB="reference",y7=$1.reduce(function(e,t){return e.concat([t+"-"+xh,t+"-"+S1])},[]),Y9=[].concat($1,[h3]).reduce(function(e,t){return e.concat([t,t+"-"+xh,t+"-"+S1])},[]),kB="beforeRead",PB="read",MB="afterRead",IB="beforeMain",AB="main",DB="afterMain",zB="beforeWrite",RB="write",LB="afterWrite",OB=[kB,PB,MB,IB,AB,DB,zB,RB,LB];function va(e){return e?(e.nodeName||"").toLowerCase():null}function Wo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function vu(e){var t=Wo(e).Element;return e instanceof t||e instanceof Element}function ds(e){var t=Wo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function p3(e){if(typeof ShadowRoot>"u")return!1;var t=Wo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function BB(e){var t=e.state;Object.keys(t.elements).forEach(function(o){var l=t.styles[o]||{},d=t.attributes[o]||{},p=t.elements[o];!ds(p)||!va(p)||(Object.assign(p.style,l),Object.keys(d).forEach(function(y){var a=d[y];a===!1?p.removeAttribute(y):p.setAttribute(y,a===!0?"":a)}))})}function FB(e){var t=e.state,o={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,o.popper),t.styles=o,t.elements.arrow&&Object.assign(t.elements.arrow.style,o.arrow),function(){Object.keys(t.elements).forEach(function(l){var d=t.elements[l],p=t.attributes[l]||{},y=Object.keys(t.styles.hasOwnProperty(l)?t.styles[l]:o[l]),a=y.reduce(function(w,C){return w[C]="",w},{});!ds(d)||!va(d)||(Object.assign(d.style,a),Object.keys(p).forEach(function(w){d.removeAttribute(w)}))})}}const $B={name:"applyStyles",enabled:!0,phase:"write",fn:BB,effect:FB,requires:["computeStyles"]};function xa(e){return e.split("-")[0]}var cu=Math.max,$0=Math.min,vh=Math.round;function Ov(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function K9(){return!/^((?!chrome|android).)*safari/i.test(Ov())}function bh(e,t,o){t===void 0&&(t=!1),o===void 0&&(o=!1);var l=e.getBoundingClientRect(),d=1,p=1;t&&ds(e)&&(d=e.offsetWidth>0&&vh(l.width)/e.offsetWidth||1,p=e.offsetHeight>0&&vh(l.height)/e.offsetHeight||1);var y=vu(e)?Wo(e):window,a=y.visualViewport,w=!K9()&&o,C=(l.left+(w&&a?a.offsetLeft:0))/d,M=(l.top+(w&&a?a.offsetTop:0))/p,D=l.width/d,R=l.height/p;return{width:D,height:R,top:M,right:C+D,bottom:M+R,left:C,x:C,y:M}}function f3(e){var t=bh(e),o=e.offsetWidth,l=e.offsetHeight;return Math.abs(t.width-o)<=1&&(o=t.width),Math.abs(t.height-l)<=1&&(l=t.height),{x:e.offsetLeft,y:e.offsetTop,width:o,height:l}}function J9(e,t){var o=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(o&&p3(o)){var l=t;do{if(l&&e.isSameNode(l))return!0;l=l.parentNode||l.host}while(l)}return!1}function Ja(e){return Wo(e).getComputedStyle(e)}function NB(e){return["table","td","th"].indexOf(va(e))>=0}function sc(e){return((vu(e)?e.ownerDocument:e.document)||window.document).documentElement}function Wy(e){return va(e)==="html"?e:e.assignedSlot||e.parentNode||(p3(e)?e.host:null)||sc(e)}function _7(e){return!ds(e)||Ja(e).position==="fixed"?null:e.offsetParent}function jB(e){var t=/firefox/i.test(Ov()),o=/Trident/i.test(Ov());if(o&&ds(e)){var l=Ja(e);if(l.position==="fixed")return null}var d=Wy(e);for(p3(d)&&(d=d.host);ds(d)&&["html","body"].indexOf(va(d))<0;){var p=Ja(d);if(p.transform!=="none"||p.perspective!=="none"||p.contain==="paint"||["transform","perspective"].indexOf(p.willChange)!==-1||t&&p.willChange==="filter"||t&&p.filter&&p.filter!=="none")return d;d=d.parentNode}return null}function N1(e){for(var t=Wo(e),o=_7(e);o&&NB(o)&&Ja(o).position==="static";)o=_7(o);return o&&(va(o)==="html"||va(o)==="body"&&Ja(o).position==="static")?t:o||jB(e)||t}function m3(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function qf(e,t,o){return cu(e,$0(t,o))}function UB(e,t,o){var l=qf(e,t,o);return l>o?o:l}function Q9(){return{top:0,right:0,bottom:0,left:0}}function eC(e){return Object.assign({},Q9(),e)}function tC(e,t){return t.reduce(function(o,l){return o[l]=e,o},{})}var VB=function(t,o){return t=typeof t=="function"?t(Object.assign({},o.rects,{placement:o.placement})):t,eC(typeof t!="number"?t:tC(t,$1))};function WB(e){var t,o=e.state,l=e.name,d=e.options,p=o.elements.arrow,y=o.modifiersData.popperOffsets,a=xa(o.placement),w=m3(a),C=[To,ms].indexOf(a)>=0,M=C?"height":"width";if(!(!p||!y)){var D=VB(d.padding,o),R=f3(p),$=w==="y"?So:To,V=w==="y"?fs:ms,B=o.rects.reference[M]+o.rects.reference[w]-y[w]-o.rects.popper[M],J=y[w]-o.rects.reference[w],j=N1(p),N=j?w==="y"?j.clientHeight||0:j.clientWidth||0:0,G=B/2-J/2,Y=D[$],K=N-R[M]-D[V],oe=N/2-R[M]/2+G,ie=qf(Y,oe,K),de=w;o.modifiersData[l]=(t={},t[de]=ie,t.centerOffset=ie-oe,t)}}function GB(e){var t=e.state,o=e.options,l=o.element,d=l===void 0?"[data-popper-arrow]":l;d!=null&&(typeof d=="string"&&(d=t.elements.popper.querySelector(d),!d)||J9(t.elements.popper,d)&&(t.elements.arrow=d))}const HB={name:"arrow",enabled:!0,phase:"main",fn:WB,effect:GB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wh(e){return e.split("-")[1]}var qB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ZB(e,t){var o=e.x,l=e.y,d=t.devicePixelRatio||1;return{x:vh(o*d)/d||0,y:vh(l*d)/d||0}}function x7(e){var t,o=e.popper,l=e.popperRect,d=e.placement,p=e.variation,y=e.offsets,a=e.position,w=e.gpuAcceleration,C=e.adaptive,M=e.roundOffsets,D=e.isFixed,R=y.x,$=R===void 0?0:R,V=y.y,B=V===void 0?0:V,J=typeof M=="function"?M({x:$,y:B}):{x:$,y:B};$=J.x,B=J.y;var j=y.hasOwnProperty("x"),N=y.hasOwnProperty("y"),G=To,Y=So,K=window;if(C){var oe=N1(o),ie="clientHeight",de="clientWidth";if(oe===Wo(o)&&(oe=sc(o),Ja(oe).position!=="static"&&a==="absolute"&&(ie="scrollHeight",de="scrollWidth")),oe=oe,d===So||(d===To||d===ms)&&p===S1){Y=fs;var le=D&&oe===K&&K.visualViewport?K.visualViewport.height:oe[ie];B-=le-l.height,B*=w?1:-1}if(d===To||(d===So||d===fs)&&p===S1){G=ms;var ye=D&&oe===K&&K.visualViewport?K.visualViewport.width:oe[de];$-=ye-l.width,$*=w?1:-1}}var Ce=Object.assign({position:a},C&&qB),Fe=M===!0?ZB({x:$,y:B},Wo(o)):{x:$,y:B};if($=Fe.x,B=Fe.y,w){var be;return Object.assign({},Ce,(be={},be[Y]=N?"0":"",be[G]=j?"0":"",be.transform=(K.devicePixelRatio||1)<=1?"translate("+$+"px, "+B+"px)":"translate3d("+$+"px, "+B+"px, 0)",be))}return Object.assign({},Ce,(t={},t[Y]=N?B+"px":"",t[G]=j?$+"px":"",t.transform="",t))}function XB(e){var t=e.state,o=e.options,l=o.gpuAcceleration,d=l===void 0?!0:l,p=o.adaptive,y=p===void 0?!0:p,a=o.roundOffsets,w=a===void 0?!0:a,C={placement:xa(t.placement),variation:wh(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:d,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,x7(Object.assign({},C,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:y,roundOffsets:w})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,x7(Object.assign({},C,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:w})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const YB={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:XB,data:{}};var zg={passive:!0};function KB(e){var t=e.state,o=e.instance,l=e.options,d=l.scroll,p=d===void 0?!0:d,y=l.resize,a=y===void 0?!0:y,w=Wo(t.elements.popper),C=[].concat(t.scrollParents.reference,t.scrollParents.popper);return p&&C.forEach(function(M){M.addEventListener("scroll",o.update,zg)}),a&&w.addEventListener("resize",o.update,zg),function(){p&&C.forEach(function(M){M.removeEventListener("scroll",o.update,zg)}),a&&w.removeEventListener("resize",o.update,zg)}}const JB={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:KB,data:{}};var QB={left:"right",right:"left",bottom:"top",top:"bottom"};function a0(e){return e.replace(/left|right|bottom|top/g,function(t){return QB[t]})}var eF={start:"end",end:"start"};function v7(e){return e.replace(/start|end/g,function(t){return eF[t]})}function g3(e){var t=Wo(e),o=t.pageXOffset,l=t.pageYOffset;return{scrollLeft:o,scrollTop:l}}function y3(e){return bh(sc(e)).left+g3(e).scrollLeft}function tF(e,t){var o=Wo(e),l=sc(e),d=o.visualViewport,p=l.clientWidth,y=l.clientHeight,a=0,w=0;if(d){p=d.width,y=d.height;var C=K9();(C||!C&&t==="fixed")&&(a=d.offsetLeft,w=d.offsetTop)}return{width:p,height:y,x:a+y3(e),y:w}}function nF(e){var t,o=sc(e),l=g3(e),d=(t=e.ownerDocument)==null?void 0:t.body,p=cu(o.scrollWidth,o.clientWidth,d?d.scrollWidth:0,d?d.clientWidth:0),y=cu(o.scrollHeight,o.clientHeight,d?d.scrollHeight:0,d?d.clientHeight:0),a=-l.scrollLeft+y3(e),w=-l.scrollTop;return Ja(d||o).direction==="rtl"&&(a+=cu(o.clientWidth,d?d.clientWidth:0)-p),{width:p,height:y,x:a,y:w}}function _3(e){var t=Ja(e),o=t.overflow,l=t.overflowX,d=t.overflowY;return/auto|scroll|overlay|hidden/.test(o+d+l)}function nC(e){return["html","body","#document"].indexOf(va(e))>=0?e.ownerDocument.body:ds(e)&&_3(e)?e:nC(Wy(e))}function Zf(e,t){var o;t===void 0&&(t=[]);var l=nC(e),d=l===((o=e.ownerDocument)==null?void 0:o.body),p=Wo(l),y=d?[p].concat(p.visualViewport||[],_3(l)?l:[]):l,a=t.concat(y);return d?a:a.concat(Zf(Wy(y)))}function Bv(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function rF(e,t){var o=bh(e,!1,t==="fixed");return o.top=o.top+e.clientTop,o.left=o.left+e.clientLeft,o.bottom=o.top+e.clientHeight,o.right=o.left+e.clientWidth,o.width=e.clientWidth,o.height=e.clientHeight,o.x=o.left,o.y=o.top,o}function b7(e,t,o){return t===X9?Bv(tF(e,o)):vu(t)?rF(t,o):Bv(nF(sc(e)))}function iF(e){var t=Zf(Wy(e)),o=["absolute","fixed"].indexOf(Ja(e).position)>=0,l=o&&ds(e)?N1(e):e;return vu(l)?t.filter(function(d){return vu(d)&&J9(d,l)&&va(d)!=="body"}):[]}function oF(e,t,o,l){var d=t==="clippingParents"?iF(e):[].concat(t),p=[].concat(d,[o]),y=p[0],a=p.reduce(function(w,C){var M=b7(e,C,l);return w.top=cu(M.top,w.top),w.right=$0(M.right,w.right),w.bottom=$0(M.bottom,w.bottom),w.left=cu(M.left,w.left),w},b7(e,y,l));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function rC(e){var t=e.reference,o=e.element,l=e.placement,d=l?xa(l):null,p=l?wh(l):null,y=t.x+t.width/2-o.width/2,a=t.y+t.height/2-o.height/2,w;switch(d){case So:w={x:y,y:t.y-o.height};break;case fs:w={x:y,y:t.y+t.height};break;case ms:w={x:t.x+t.width,y:a};break;case To:w={x:t.x-o.width,y:a};break;default:w={x:t.x,y:t.y}}var C=d?m3(d):null;if(C!=null){var M=C==="y"?"height":"width";switch(p){case xh:w[C]=w[C]-(t[M]/2-o[M]/2);break;case S1:w[C]=w[C]+(t[M]/2-o[M]/2);break}}return w}function T1(e,t){t===void 0&&(t={});var o=t,l=o.placement,d=l===void 0?e.placement:l,p=o.strategy,y=p===void 0?e.strategy:p,a=o.boundary,w=a===void 0?CB:a,C=o.rootBoundary,M=C===void 0?X9:C,D=o.elementContext,R=D===void 0?wf:D,$=o.altBoundary,V=$===void 0?!1:$,B=o.padding,J=B===void 0?0:B,j=eC(typeof J!="number"?J:tC(J,$1)),N=R===wf?EB:wf,G=e.rects.popper,Y=e.elements[V?N:R],K=oF(vu(Y)?Y:Y.contextElement||sc(e.elements.popper),w,M,y),oe=bh(e.elements.reference),ie=rC({reference:oe,element:G,strategy:"absolute",placement:d}),de=Bv(Object.assign({},G,ie)),le=R===wf?de:oe,ye={top:K.top-le.top+j.top,bottom:le.bottom-K.bottom+j.bottom,left:K.left-le.left+j.left,right:le.right-K.right+j.right},Ce=e.modifiersData.offset;if(R===wf&&Ce){var Fe=Ce[d];Object.keys(ye).forEach(function(be){var we=[ms,fs].indexOf(be)>=0?1:-1,he=[So,fs].indexOf(be)>=0?"y":"x";ye[be]+=Fe[he]*we})}return ye}function sF(e,t){t===void 0&&(t={});var o=t,l=o.placement,d=o.boundary,p=o.rootBoundary,y=o.padding,a=o.flipVariations,w=o.allowedAutoPlacements,C=w===void 0?Y9:w,M=wh(l),D=M?a?y7:y7.filter(function(V){return wh(V)===M}):$1,R=D.filter(function(V){return C.indexOf(V)>=0});R.length===0&&(R=D);var $=R.reduce(function(V,B){return V[B]=T1(e,{placement:B,boundary:d,rootBoundary:p,padding:y})[xa(B)],V},{});return Object.keys($).sort(function(V,B){return $[V]-$[B]})}function aF(e){if(xa(e)===h3)return[];var t=a0(e);return[v7(e),t,v7(t)]}function lF(e){var t=e.state,o=e.options,l=e.name;if(!t.modifiersData[l]._skip){for(var d=o.mainAxis,p=d===void 0?!0:d,y=o.altAxis,a=y===void 0?!0:y,w=o.fallbackPlacements,C=o.padding,M=o.boundary,D=o.rootBoundary,R=o.altBoundary,$=o.flipVariations,V=$===void 0?!0:$,B=o.allowedAutoPlacements,J=t.options.placement,j=xa(J),N=j===J,G=w||(N||!V?[a0(J)]:aF(J)),Y=[J].concat(G).reduce(function(rt,vt){return rt.concat(xa(vt)===h3?sF(t,{placement:vt,boundary:M,rootBoundary:D,padding:C,flipVariations:V,allowedAutoPlacements:B}):vt)},[]),K=t.rects.reference,oe=t.rects.popper,ie=new Map,de=!0,le=Y[0],ye=0;ye<Y.length;ye++){var Ce=Y[ye],Fe=xa(Ce),be=wh(Ce)===xh,we=[So,fs].indexOf(Fe)>=0,he=we?"width":"height",Be=T1(t,{placement:Ce,boundary:M,rootBoundary:D,altBoundary:R,padding:C}),Ae=we?be?ms:To:be?fs:So;K[he]>oe[he]&&(Ae=a0(Ae));var Se=a0(Ae),ke=[];if(p&&ke.push(Be[Fe]<=0),a&&ke.push(Be[Ae]<=0,Be[Se]<=0),ke.every(function(rt){return rt})){le=Ce,de=!1;break}ie.set(Ce,ke)}if(de)for(var Ne=V?3:1,nt=function(vt){var ht=Y.find(function(mt){var Ot=ie.get(mt);if(Ot)return Ot.slice(0,vt).every(function($t){return $t})});if(ht)return le=ht,"break"},xt=Ne;xt>0;xt--){var gt=nt(xt);if(gt==="break")break}t.placement!==le&&(t.modifiersData[l]._skip=!0,t.placement=le,t.reset=!0)}}const cF={name:"flip",enabled:!0,phase:"main",fn:lF,requiresIfExists:["offset"],data:{_skip:!1}};function w7(e,t,o){return o===void 0&&(o={x:0,y:0}),{top:e.top-t.height-o.y,right:e.right-t.width+o.x,bottom:e.bottom-t.height+o.y,left:e.left-t.width-o.x}}function S7(e){return[So,ms,fs,To].some(function(t){return e[t]>=0})}function uF(e){var t=e.state,o=e.name,l=t.rects.reference,d=t.rects.popper,p=t.modifiersData.preventOverflow,y=T1(t,{elementContext:"reference"}),a=T1(t,{altBoundary:!0}),w=w7(y,l),C=w7(a,d,p),M=S7(w),D=S7(C);t.modifiersData[o]={referenceClippingOffsets:w,popperEscapeOffsets:C,isReferenceHidden:M,hasPopperEscaped:D},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":M,"data-popper-escaped":D})}const dF={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:uF};function hF(e,t,o){var l=xa(e),d=[To,So].indexOf(l)>=0?-1:1,p=typeof o=="function"?o(Object.assign({},t,{placement:e})):o,y=p[0],a=p[1];return y=y||0,a=(a||0)*d,[To,ms].indexOf(l)>=0?{x:a,y}:{x:y,y:a}}function pF(e){var t=e.state,o=e.options,l=e.name,d=o.offset,p=d===void 0?[0,0]:d,y=Y9.reduce(function(M,D){return M[D]=hF(D,t.rects,p),M},{}),a=y[t.placement],w=a.x,C=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=w,t.modifiersData.popperOffsets.y+=C),t.modifiersData[l]=y}const fF={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pF};function mF(e){var t=e.state,o=e.name;t.modifiersData[o]=rC({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const gF={name:"popperOffsets",enabled:!0,phase:"read",fn:mF,data:{}};function yF(e){return e==="x"?"y":"x"}function _F(e){var t=e.state,o=e.options,l=e.name,d=o.mainAxis,p=d===void 0?!0:d,y=o.altAxis,a=y===void 0?!1:y,w=o.boundary,C=o.rootBoundary,M=o.altBoundary,D=o.padding,R=o.tether,$=R===void 0?!0:R,V=o.tetherOffset,B=V===void 0?0:V,J=T1(t,{boundary:w,rootBoundary:C,padding:D,altBoundary:M}),j=xa(t.placement),N=wh(t.placement),G=!N,Y=m3(j),K=yF(Y),oe=t.modifiersData.popperOffsets,ie=t.rects.reference,de=t.rects.popper,le=typeof B=="function"?B(Object.assign({},t.rects,{placement:t.placement})):B,ye=typeof le=="number"?{mainAxis:le,altAxis:le}:Object.assign({mainAxis:0,altAxis:0},le),Ce=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Fe={x:0,y:0};if(oe){if(p){var be,we=Y==="y"?So:To,he=Y==="y"?fs:ms,Be=Y==="y"?"height":"width",Ae=oe[Y],Se=Ae+J[we],ke=Ae-J[he],Ne=$?-de[Be]/2:0,nt=N===xh?ie[Be]:de[Be],xt=N===xh?-de[Be]:-ie[Be],gt=t.elements.arrow,rt=$&&gt?f3(gt):{width:0,height:0},vt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Q9(),ht=vt[we],mt=vt[he],Ot=qf(0,ie[Be],rt[Be]),$t=G?ie[Be]/2-Ne-Ot-ht-ye.mainAxis:nt-Ot-ht-ye.mainAxis,at=G?-ie[Be]/2+Ne+Ot+mt+ye.mainAxis:xt+Ot+mt+ye.mainAxis,Je=t.elements.arrow&&N1(t.elements.arrow),it=Je?Y==="y"?Je.clientTop||0:Je.clientLeft||0:0,St=(be=Ce==null?void 0:Ce[Y])!=null?be:0,Wt=Ae+$t-St-it,He=Ae+at-St,jt=qf($?$0(Se,Wt):Se,Ae,$?cu(ke,He):ke);oe[Y]=jt,Fe[Y]=jt-Ae}if(a){var lt,Ut=Y==="x"?So:To,Nt=Y==="x"?fs:ms,Ft=oe[K],Lt=K==="y"?"height":"width",cn=Ft+J[Ut],En=Ft-J[Nt],Gn=[So,To].indexOf(j)!==-1,un=(lt=Ce==null?void 0:Ce[K])!=null?lt:0,Cn=Gn?cn:Ft-ie[Lt]-de[Lt]-un+ye.altAxis,Sn=Gn?Ft+ie[Lt]+de[Lt]-un-ye.altAxis:En,on=$&&Gn?UB(Cn,Ft,Sn):qf($?Cn:cn,Ft,$?Sn:En);oe[K]=on,Fe[K]=on-Ft}t.modifiersData[l]=Fe}}const xF={name:"preventOverflow",enabled:!0,phase:"main",fn:_F,requiresIfExists:["offset"]};function vF(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function bF(e){return e===Wo(e)||!ds(e)?g3(e):vF(e)}function wF(e){var t=e.getBoundingClientRect(),o=vh(t.width)/e.offsetWidth||1,l=vh(t.height)/e.offsetHeight||1;return o!==1||l!==1}function SF(e,t,o){o===void 0&&(o=!1);var l=ds(t),d=ds(t)&&wF(t),p=sc(t),y=bh(e,d,o),a={scrollLeft:0,scrollTop:0},w={x:0,y:0};return(l||!l&&!o)&&((va(t)!=="body"||_3(p))&&(a=bF(t)),ds(t)?(w=bh(t,!0),w.x+=t.clientLeft,w.y+=t.clientTop):p&&(w.x=y3(p))),{x:y.left+a.scrollLeft-w.x,y:y.top+a.scrollTop-w.y,width:y.width,height:y.height}}function TF(e){var t=new Map,o=new Set,l=[];e.forEach(function(p){t.set(p.name,p)});function d(p){o.add(p.name);var y=[].concat(p.requires||[],p.requiresIfExists||[]);y.forEach(function(a){if(!o.has(a)){var w=t.get(a);w&&d(w)}}),l.push(p)}return e.forEach(function(p){o.has(p.name)||d(p)}),l}function CF(e){var t=TF(e);return OB.reduce(function(o,l){return o.concat(t.filter(function(d){return d.phase===l}))},[])}function EF(e){var t;return function(){return t||(t=new Promise(function(o){Promise.resolve().then(function(){t=void 0,o(e())})})),t}}function kF(e){var t=e.reduce(function(o,l){var d=o[l.name];return o[l.name]=d?Object.assign({},d,l,{options:Object.assign({},d.options,l.options),data:Object.assign({},d.data,l.data)}):l,o},{});return Object.keys(t).map(function(o){return t[o]})}var T7={placement:"bottom",modifiers:[],strategy:"absolute"};function C7(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return!t.some(function(l){return!(l&&typeof l.getBoundingClientRect=="function")})}function PF(e){e===void 0&&(e={});var t=e,o=t.defaultModifiers,l=o===void 0?[]:o,d=t.defaultOptions,p=d===void 0?T7:d;return function(a,w,C){C===void 0&&(C=p);var M={placement:"bottom",orderedModifiers:[],options:Object.assign({},T7,p),modifiersData:{},elements:{reference:a,popper:w},attributes:{},styles:{}},D=[],R=!1,$={state:M,setOptions:function(j){var N=typeof j=="function"?j(M.options):j;B(),M.options=Object.assign({},p,M.options,N),M.scrollParents={reference:vu(a)?Zf(a):a.contextElement?Zf(a.contextElement):[],popper:Zf(w)};var G=CF(kF([].concat(l,M.options.modifiers)));return M.orderedModifiers=G.filter(function(Y){return Y.enabled}),V(),$.update()},forceUpdate:function(){if(!R){var j=M.elements,N=j.reference,G=j.popper;if(C7(N,G)){M.rects={reference:SF(N,N1(G),M.options.strategy==="fixed"),popper:f3(G)},M.reset=!1,M.placement=M.options.placement,M.orderedModifiers.forEach(function(ye){return M.modifiersData[ye.name]=Object.assign({},ye.data)});for(var Y=0;Y<M.orderedModifiers.length;Y++){if(M.reset===!0){M.reset=!1,Y=-1;continue}var K=M.orderedModifiers[Y],oe=K.fn,ie=K.options,de=ie===void 0?{}:ie,le=K.name;typeof oe=="function"&&(M=oe({state:M,options:de,name:le,instance:$})||M)}}}},update:EF(function(){return new Promise(function(J){$.forceUpdate(),J(M)})}),destroy:function(){B(),R=!0}};if(!C7(a,w))return $;$.setOptions(C).then(function(J){!R&&C.onFirstUpdate&&C.onFirstUpdate(J)});function V(){M.orderedModifiers.forEach(function(J){var j=J.name,N=J.options,G=N===void 0?{}:N,Y=J.effect;if(typeof Y=="function"){var K=Y({state:M,name:j,instance:$,options:G}),oe=function(){};D.push(K||oe)}})}function B(){D.forEach(function(J){return J()}),D=[]}return $}}var MF=[JB,gF,YB,$B,fF,cF,xF,HB,dF],IF=PF({defaultModifiers:MF});function AF(e){return typeof e=="function"?e():e}const DF=W.forwardRef(function(t,o){const{children:l,container:d,disablePortal:p=!1}=t,[y,a]=W.useState(null),w=zr(W.isValidElement(l)?l.ref:null,o);if(Ei(()=>{p||a(AF(d)||document.body)},[d,p]),Ei(()=>{if(y&&!p)return L0(o,y),()=>{L0(o,null)}},[o,y,p]),p){if(W.isValidElement(l)){const C={ref:w};return W.cloneElement(l,C)}return ee.jsx(W.Fragment,{children:l})}return ee.jsx(W.Fragment,{children:y&&ay.createPortal(l,y)})}),iC=DF;function zF(e){return wn("MuiPopper",e)}yn("MuiPopper",["root"]);const RF=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],LF=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function OF(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function Fv(e){return typeof e=="function"?e():e}function BF(e){return e.nodeType!==void 0}const FF=()=>xn({root:["root"]},q9(zF)),$F={},NF=W.forwardRef(function(t,o){var l;const{anchorEl:d,children:p,direction:y,disablePortal:a,modifiers:w,open:C,placement:M,popperOptions:D,popperRef:R,slotProps:$={},slots:V={},TransitionProps:B}=t,J=Bt(t,RF),j=W.useRef(null),N=zr(j,o),G=W.useRef(null),Y=zr(G,R),K=W.useRef(Y);Ei(()=>{K.current=Y},[Y]),W.useImperativeHandle(R,()=>G.current,[]);const oe=OF(M,y),[ie,de]=W.useState(oe),[le,ye]=W.useState(Fv(d));W.useEffect(()=>{G.current&&G.current.forceUpdate()}),W.useEffect(()=>{d&&ye(Fv(d))},[d]),Ei(()=>{if(!le||!C)return;const he=Se=>{de(Se.placement)};let Be=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Se})=>{he(Se)}}];w!=null&&(Be=Be.concat(w)),D&&D.modifiers!=null&&(Be=Be.concat(D.modifiers));const Ae=IF(le,j.current,H({placement:oe},D,{modifiers:Be}));return K.current(Ae),()=>{Ae.destroy(),K.current(null)}},[le,a,w,C,D,oe]);const Ce={placement:ie};B!==null&&(Ce.TransitionProps=B);const Fe=FF(),be=(l=V.root)!=null?l:"div",we=Fr({elementType:be,externalSlotProps:$.root,externalForwardedProps:J,additionalProps:{role:"tooltip",ref:N},ownerState:t,className:Fe.root});return ee.jsx(be,H({},we,{children:typeof p=="function"?p(Ce):p}))}),jF=W.forwardRef(function(t,o){const{anchorEl:l,children:d,container:p,direction:y="ltr",disablePortal:a=!1,keepMounted:w=!1,modifiers:C,open:M,placement:D="bottom",popperOptions:R=$F,popperRef:$,style:V,transition:B=!1,slotProps:J={},slots:j={}}=t,N=Bt(t,LF),[G,Y]=W.useState(!0),K=()=>{Y(!1)},oe=()=>{Y(!0)};if(!w&&!M&&(!B||G))return null;let ie;if(p)ie=p;else if(l){const ye=Fv(l);ie=ye&&BF(ye)?Ci(ye).body:Ci(null).body}const de=!M&&w&&(!B||G)?"none":void 0,le=B?{in:M,onEnter:K,onExited:oe}:void 0;return ee.jsx(iC,{disablePortal:a,container:ie,children:ee.jsx(NF,H({anchorEl:l,direction:y,disablePortal:a,modifiers:C,ref:o,open:B?!G:M,placement:D,popperOptions:R,popperRef:$,slotProps:J,slots:j},N,{style:H({position:"fixed",top:0,left:0,display:de},V),TransitionProps:le,children:d}))})}),UF=jF;function VF(e){const t=Ci(e);return t.body===e?Ka(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Xf(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function E7(e){return parseInt(Ka(e).getComputedStyle(e).paddingRight,10)||0}function WF(e){const o=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,l=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return o||l}function k7(e,t,o,l,d){const p=[t,o,...l];[].forEach.call(e.children,y=>{const a=p.indexOf(y)===-1,w=!WF(y);a&&w&&Xf(y,d)})}function wx(e,t){let o=-1;return e.some((l,d)=>t(l)?(o=d,!0):!1),o}function GF(e,t){const o=[],l=e.container;if(!t.disableScrollLock){if(VF(l)){const y=Y8(Ci(l));o.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${E7(l)+y}px`;const a=Ci(l).querySelectorAll(".mui-fixed");[].forEach.call(a,w=>{o.push({value:w.style.paddingRight,property:"padding-right",el:w}),w.style.paddingRight=`${E7(w)+y}px`})}let p;if(l.parentNode instanceof DocumentFragment)p=Ci(l).body;else{const y=l.parentElement,a=Ka(l);p=(y==null?void 0:y.nodeName)==="HTML"&&a.getComputedStyle(y).overflowY==="scroll"?y:l}o.push({value:p.style.overflow,property:"overflow",el:p},{value:p.style.overflowX,property:"overflow-x",el:p},{value:p.style.overflowY,property:"overflow-y",el:p}),p.style.overflow="hidden"}return()=>{o.forEach(({value:p,el:y,property:a})=>{p?y.style.setProperty(a,p):y.style.removeProperty(a)})}}function HF(e){const t=[];return[].forEach.call(e.children,o=>{o.getAttribute("aria-hidden")==="true"&&t.push(o)}),t}class qF{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,o){let l=this.modals.indexOf(t);if(l!==-1)return l;l=this.modals.length,this.modals.push(t),t.modalRef&&Xf(t.modalRef,!1);const d=HF(o);k7(o,t.mount,t.modalRef,d,!0);const p=wx(this.containers,y=>y.container===o);return p!==-1?(this.containers[p].modals.push(t),l):(this.containers.push({modals:[t],container:o,restore:null,hiddenSiblings:d}),l)}mount(t,o){const l=wx(this.containers,p=>p.modals.indexOf(t)!==-1),d=this.containers[l];d.restore||(d.restore=GF(d,o))}remove(t,o=!0){const l=this.modals.indexOf(t);if(l===-1)return l;const d=wx(this.containers,y=>y.modals.indexOf(t)!==-1),p=this.containers[d];if(p.modals.splice(p.modals.indexOf(t),1),this.modals.splice(l,1),p.modals.length===0)p.restore&&p.restore(),t.modalRef&&Xf(t.modalRef,o),k7(p.container,t.mount,t.modalRef,p.hiddenSiblings,!1),this.containers.splice(d,1);else{const y=p.modals[p.modals.length-1];y.modalRef&&Xf(y.modalRef,!1)}return l}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function ZF(e){return wn("MuiModal",e)}yn("MuiModal",["root","hidden","backdrop"]);const XF=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],YF=e=>{const{open:t,exited:o}=e;return xn({root:["root",!t&&o&&"hidden"],backdrop:["backdrop"]},q9(ZF))};function KF(e){return typeof e=="function"?e():e}function JF(e){return e?e.props.hasOwnProperty("in"):!1}const QF=new qF,e$=W.forwardRef(function(t,o){var l,d;const{children:p,closeAfterTransition:y=!1,container:a,disableAutoFocus:w=!1,disableEnforceFocus:C=!1,disableEscapeKeyDown:M=!1,disablePortal:D=!1,disableRestoreFocus:R=!1,disableScrollLock:$=!1,hideBackdrop:V=!1,keepMounted:B=!1,manager:J=QF,onBackdropClick:j,onClose:N,onKeyDown:G,open:Y,onTransitionEnter:K,onTransitionExited:oe,slotProps:ie={},slots:de={}}=t,le=Bt(t,XF),ye=J,[Ce,Fe]=W.useState(!Y),be=W.useRef({}),we=W.useRef(null),he=W.useRef(null),Be=zr(he,o),Ae=JF(p),Se=(l=t["aria-hidden"])!=null?l:!0,ke=()=>Ci(we.current),Ne=()=>(be.current.modalRef=he.current,be.current.mountNode=we.current,be.current),nt=()=>{ye.mount(Ne(),{disableScrollLock:$}),he.current&&(he.current.scrollTop=0)},xt=fn(()=>{const lt=KF(a)||ke().body;ye.add(Ne(),lt),he.current&&nt()}),gt=W.useCallback(()=>ye.isTopModal(Ne()),[ye]),rt=fn(lt=>{we.current=lt,!(!lt||!he.current)&&(Y&&gt()?nt():Xf(he.current,Se))}),vt=W.useCallback(()=>{ye.remove(Ne(),Se)},[ye,Se]);W.useEffect(()=>()=>{vt()},[vt]),W.useEffect(()=>{Y?xt():(!Ae||!y)&&vt()},[Y,vt,Ae,y,xt]);const ht=H({},t,{closeAfterTransition:y,disableAutoFocus:w,disableEnforceFocus:C,disableEscapeKeyDown:M,disablePortal:D,disableRestoreFocus:R,disableScrollLock:$,exited:Ce,hideBackdrop:V,keepMounted:B}),mt=YF(ht),Ot=()=>{Fe(!1),K&&K()},$t=()=>{Fe(!0),oe&&oe(),y&&vt()},at=lt=>{lt.target===lt.currentTarget&&(j&&j(lt),N&&N(lt,"backdropClick"))},Je=lt=>{G&&G(lt),!(lt.key!=="Escape"||!gt())&&(M||(lt.stopPropagation(),N&&N(lt,"escapeKeyDown")))},it={};p.props.tabIndex===void 0&&(it.tabIndex="-1"),Ae&&(it.onEnter=L6(Ot,p.props.onEnter),it.onExited=L6($t,p.props.onExited));const St=(d=de.root)!=null?d:"div",Wt=Fr({elementType:St,externalSlotProps:ie.root,externalForwardedProps:le,additionalProps:{ref:Be,role:"presentation",onKeyDown:Je},className:mt.root,ownerState:ht}),He=de.backdrop,jt=Fr({elementType:He,externalSlotProps:ie.backdrop,additionalProps:{"aria-hidden":!0,onClick:at,open:Y},className:mt.backdrop,ownerState:ht});return!B&&!Y&&(!Ae||Ce)?null:ee.jsx(iC,{ref:rt,container:a,disablePortal:D,children:ee.jsxs(St,H({},Wt,{children:[!V&&He?ee.jsx(He,H({},jt)):null,ee.jsx(Z9,{disableEnforceFocus:C,disableAutoFocus:w,disableRestoreFocus:R,isEnabled:gt,open:Y,children:W.cloneElement(p,it)})]}))})}),t$=e$,n$=["onChange","maxRows","minRows","style","value"];function Rg(e){return parseInt(e,10)||0}const r$={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function P7(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const i$=W.forwardRef(function(t,o){const{onChange:l,maxRows:d,minRows:p=1,style:y,value:a}=t,w=Bt(t,n$),{current:C}=W.useRef(a!=null),M=W.useRef(null),D=zr(o,M),R=W.useRef(null),$=W.useRef(0),[V,B]=W.useState({outerHeightStyle:0}),J=W.useCallback(()=>{const K=M.current,ie=Ka(K).getComputedStyle(K);if(ie.width==="0px")return{outerHeightStyle:0};const de=R.current;de.style.width=ie.width,de.value=K.value||t.placeholder||"x",de.value.slice(-1)===`
`&&(de.value+=" ");const le=ie.boxSizing,ye=Rg(ie.paddingBottom)+Rg(ie.paddingTop),Ce=Rg(ie.borderBottomWidth)+Rg(ie.borderTopWidth),Fe=de.scrollHeight;de.value="x";const be=de.scrollHeight;let we=Fe;p&&(we=Math.max(Number(p)*be,we)),d&&(we=Math.min(Number(d)*be,we)),we=Math.max(we,be);const he=we+(le==="border-box"?ye+Ce:0),Be=Math.abs(we-Fe)<=1;return{outerHeightStyle:he,overflow:Be}},[d,p,t.placeholder]),j=(K,oe)=>{const{outerHeightStyle:ie,overflow:de}=oe;return $.current<20&&(ie>0&&Math.abs((K.outerHeightStyle||0)-ie)>1||K.overflow!==de)?($.current+=1,{overflow:de,outerHeightStyle:ie}):K},N=W.useCallback(()=>{const K=J();P7(K)||B(oe=>j(oe,K))},[J]),G=()=>{const K=J();P7(K)||ay.flushSync(()=>{B(oe=>j(oe,K))})};W.useEffect(()=>{const K=y1(()=>{$.current=0,M.current&&G()});let oe;const ie=M.current,de=Ka(ie);return de.addEventListener("resize",K),typeof ResizeObserver<"u"&&(oe=new ResizeObserver(K),oe.observe(ie)),()=>{K.clear(),de.removeEventListener("resize",K),oe&&oe.disconnect()}}),Ei(()=>{N()}),W.useEffect(()=>{$.current=0},[a]);const Y=K=>{$.current=0,C||N(),l&&l(K)};return ee.jsxs(W.Fragment,{children:[ee.jsx("textarea",H({value:a,onChange:Y,ref:D,rows:p,style:H({height:V.outerHeightStyle,overflow:V.overflow?"hidden":void 0},y)},w)),ee.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:R,tabIndex:-1,style:H({},r$.shadow,y,{padding:0})})]})}),o$=i$;function M7(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function s$(e={}){const{ignoreAccents:t=!0,ignoreCase:o=!0,limit:l,matchFrom:d="any",stringify:p,trim:y=!1}=e;return(a,{inputValue:w,getOptionLabel:C})=>{let M=y?w.trim():w;o&&(M=M.toLowerCase()),t&&(M=M7(M));const D=M?a.filter(R=>{let $=(p||C)(R);return o&&($=$.toLowerCase()),t&&($=M7($)),d==="start"?$.indexOf(M)===0:$.indexOf(M)>-1}):a;return typeof l=="number"?D.slice(0,l):D}}function Sx(e,t){for(let o=0;o<e.length;o+=1)if(t(e[o]))return o;return-1}const a$=s$(),I7=5,l$=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function c$(e){const{unstable_isActiveElementInListbox:t=l$,unstable_classNamePrefix:o="Mui",autoComplete:l=!1,autoHighlight:d=!1,autoSelect:p=!1,blurOnSelect:y=!1,clearOnBlur:a=!e.freeSolo,clearOnEscape:w=!1,componentName:C="useAutocomplete",defaultValue:M=e.multiple?[]:null,disableClearable:D=!1,disableCloseOnSelect:R=!1,disabled:$,disabledItemsFocusable:V=!1,disableListWrap:B=!1,filterOptions:J=a$,filterSelectedOptions:j=!1,freeSolo:N=!1,getOptionDisabled:G,getOptionLabel:Y=Qe=>{var ot;return(ot=Qe.label)!=null?ot:Qe},groupBy:K,handleHomeEndKeys:oe=!e.freeSolo,id:ie,includeInputInList:de=!1,inputValue:le,isOptionEqualToValue:ye=(Qe,ot)=>Qe===ot,multiple:Ce=!1,onChange:Fe,onClose:be,onHighlightChange:we,onInputChange:he,onOpen:Be,open:Ae,openOnFocus:Se=!1,options:ke,readOnly:Ne=!1,selectOnFocus:nt=!e.freeSolo,value:xt}=e,gt=Su(ie);let rt=Y;rt=Qe=>{const ot=Y(Qe);return typeof ot!="string"?String(ot):ot};const vt=W.useRef(!1),ht=W.useRef(!0),mt=W.useRef(null),Ot=W.useRef(null),[$t,at]=W.useState(null),[Je,it]=W.useState(-1),St=d?0:-1,Wt=W.useRef(St),[He,jt]=jo({controlled:xt,default:M,name:C}),[lt,Ut]=jo({controlled:le,default:"",name:C,state:"inputValue"}),[Nt,Ft]=W.useState(!1),Lt=W.useCallback((Qe,ot)=>{if(!(Ce?He.length<ot.length:ot!==null)&&!a)return;let dn;if(Ce)dn="";else if(ot==null)dn="";else{const Jn=rt(ot);dn=typeof Jn=="string"?Jn:""}lt!==dn&&(Ut(dn),he&&he(Qe,dn,"reset"))},[rt,lt,Ce,he,Ut,a,He]),[cn,En]=jo({controlled:Ae,default:!1,name:C,state:"open"}),[Gn,un]=W.useState(!0),Cn=!Ce&&He!=null&&lt===rt(He),Sn=cn&&!Ne,on=Sn?J(ke.filter(Qe=>!(j&&(Ce?He:[He]).some(ot=>ot!==null&&ye(Qe,ot)))),{inputValue:Cn&&Gn?"":lt,getOptionLabel:rt}):[],sn=zD({filteredOptions:on,value:He,inputValue:lt});W.useEffect(()=>{const Qe=He!==sn.value;Nt&&!Qe||N&&!Qe||Lt(null,He)},[He,Lt,Nt,sn.value,N]);const an=cn&&on.length>0&&!Ne,In=fn(Qe=>{Qe===-1?mt.current.focus():$t.querySelector(`[data-tag-index="${Qe}"]`).focus()});W.useEffect(()=>{Ce&&Je>He.length-1&&(it(-1),In(-1))},[He,Ce,Je,In]);function Gt(Qe,ot){if(!Ot.current||Qe===-1)return-1;let Kt=Qe;for(;;){if(ot==="next"&&Kt===on.length||ot==="previous"&&Kt===-1)return-1;const dn=Ot.current.querySelector(`[data-option-index="${Kt}"]`),Jn=V?!1:!dn||dn.disabled||dn.getAttribute("aria-disabled")==="true";if(dn&&!dn.hasAttribute("tabindex")||Jn)Kt+=ot==="next"?1:-1;else return Kt}}const tn=fn(({event:Qe,index:ot,reason:Kt="auto"})=>{if(Wt.current=ot,ot===-1?mt.current.removeAttribute("aria-activedescendant"):mt.current.setAttribute("aria-activedescendant",`${gt}-option-${ot}`),we&&we(Qe,ot===-1?null:on[ot],Kt),!Ot.current)return;const dn=Ot.current.querySelector(`[role="option"].${o}-focused`);dn&&(dn.classList.remove(`${o}-focused`),dn.classList.remove(`${o}-focusVisible`));let Jn=Ot.current;if(Ot.current.getAttribute("role")!=="listbox"&&(Jn=Ot.current.parentElement.querySelector('[role="listbox"]')),!Jn)return;if(ot===-1){Jn.scrollTop=0;return}const di=Ot.current.querySelector(`[data-option-index="${ot}"]`);if(di&&(di.classList.add(`${o}-focused`),Kt==="keyboard"&&di.classList.add(`${o}-focusVisible`),Jn.scrollHeight>Jn.clientHeight&&Kt!=="mouse")){const Gr=di,Nn=Jn.clientHeight+Jn.scrollTop,il=Gr.offsetTop+Gr.offsetHeight;il>Nn?Jn.scrollTop=il-Jn.clientHeight:Gr.offsetTop-Gr.offsetHeight*(K?1.3:0)<Jn.scrollTop&&(Jn.scrollTop=Gr.offsetTop-Gr.offsetHeight*(K?1.3:0))}}),vn=fn(({event:Qe,diff:ot,direction:Kt="next",reason:dn="auto"})=>{if(!Sn)return;const di=Gt((()=>{const Gr=on.length-1;if(ot==="reset")return St;if(ot==="start")return 0;if(ot==="end")return Gr;const Nn=Wt.current+ot;return Nn<0?Nn===-1&&de?-1:B&&Wt.current!==-1||Math.abs(ot)>1?0:Gr:Nn>Gr?Nn===Gr+1&&de?-1:B||Math.abs(ot)>1?Gr:0:Nn})(),Kt);if(tn({index:di,reason:dn,event:Qe}),l&&ot!=="reset")if(di===-1)mt.current.value=lt;else{const Gr=rt(on[di]);mt.current.value=Gr,Gr.toLowerCase().indexOf(lt.toLowerCase())===0&&lt.length>0&&mt.current.setSelectionRange(lt.length,Gr.length)}}),Fn=()=>{const Qe=(ot,Kt)=>{const dn=ot?rt(ot):"",Jn=Kt?rt(Kt):"";return dn===Jn};if(Wt.current!==-1&&sn.filteredOptions&&sn.filteredOptions.length!==on.length&&sn.inputValue===lt&&(Ce?He.length===sn.value.length&&sn.value.every((ot,Kt)=>rt(He[Kt])===rt(ot)):Qe(sn.value,He))){const ot=sn.filteredOptions[Wt.current];if(ot&&on.some(dn=>rt(dn)===rt(ot)))return!0}return!1},qn=W.useCallback(()=>{if(!Sn||Fn())return;const Qe=Ce?He[0]:He;if(on.length===0||Qe==null){vn({diff:"reset"});return}if(Ot.current){if(Qe!=null){const ot=on[Wt.current];if(Ce&&ot&&Sx(He,dn=>ye(ot,dn))!==-1)return;const Kt=Sx(on,dn=>ye(dn,Qe));Kt===-1?vn({diff:"reset"}):tn({index:Kt});return}if(Wt.current>=on.length-1){tn({index:on.length-1});return}tn({index:Wt.current})}},[on.length,Ce?!1:He,j,vn,tn,Sn,lt,Ce]),Ir=fn(Qe=>{L0(Ot,Qe),Qe&&qn()});W.useEffect(()=>{qn()},[qn]);const $r=Qe=>{cn||(En(!0),un(!0),Be&&Be(Qe))},ge=(Qe,ot)=>{cn&&(En(!1),be&&be(Qe,ot))},Q=(Qe,ot,Kt,dn)=>{if(Ce){if(He.length===ot.length&&He.every((Jn,di)=>Jn===ot[di]))return}else if(He===ot)return;Fe&&Fe(Qe,ot,Kt,dn),jt(ot)},te=W.useRef(!1),_e=(Qe,ot,Kt="selectOption",dn="options")=>{let Jn=Kt,di=ot;if(Ce){di=Array.isArray(He)?He.slice():[];const Gr=Sx(di,Nn=>ye(ot,Nn));Gr===-1?di.push(ot):dn!=="freeSolo"&&(di.splice(Gr,1),Jn="removeOption")}Lt(Qe,di),Q(Qe,di,Jn,{option:ot}),!R&&(!Qe||!Qe.ctrlKey&&!Qe.metaKey)&&ge(Qe,Jn),(y===!0||y==="touch"&&te.current||y==="mouse"&&!te.current)&&mt.current.blur()};function Me(Qe,ot){if(Qe===-1)return-1;let Kt=Qe;for(;;){if(ot==="next"&&Kt===He.length||ot==="previous"&&Kt===-1)return-1;const dn=$t.querySelector(`[data-tag-index="${Kt}"]`);if(!dn||!dn.hasAttribute("tabindex")||dn.disabled||dn.getAttribute("aria-disabled")==="true")Kt+=ot==="next"?1:-1;else return Kt}}const Le=(Qe,ot)=>{if(!Ce)return;lt===""&&ge(Qe,"toggleInput");let Kt=Je;Je===-1?lt===""&&ot==="previous"&&(Kt=He.length-1):(Kt+=ot==="next"?1:-1,Kt<0&&(Kt=0),Kt===He.length&&(Kt=-1)),Kt=Me(Kt,ot),it(Kt),In(Kt)},We=Qe=>{vt.current=!0,Ut(""),he&&he(Qe,"","clear"),Q(Qe,Ce?[]:null,"clear")},Ve=Qe=>ot=>{if(Qe.onKeyDown&&Qe.onKeyDown(ot),!ot.defaultMuiPrevented&&(Je!==-1&&["ArrowLeft","ArrowRight"].indexOf(ot.key)===-1&&(it(-1),In(-1)),ot.which!==229))switch(ot.key){case"Home":Sn&&oe&&(ot.preventDefault(),vn({diff:"start",direction:"next",reason:"keyboard",event:ot}));break;case"End":Sn&&oe&&(ot.preventDefault(),vn({diff:"end",direction:"previous",reason:"keyboard",event:ot}));break;case"PageUp":ot.preventDefault(),vn({diff:-I7,direction:"previous",reason:"keyboard",event:ot}),$r(ot);break;case"PageDown":ot.preventDefault(),vn({diff:I7,direction:"next",reason:"keyboard",event:ot}),$r(ot);break;case"ArrowDown":ot.preventDefault(),vn({diff:1,direction:"next",reason:"keyboard",event:ot}),$r(ot);break;case"ArrowUp":ot.preventDefault(),vn({diff:-1,direction:"previous",reason:"keyboard",event:ot}),$r(ot);break;case"ArrowLeft":Le(ot,"previous");break;case"ArrowRight":Le(ot,"next");break;case"Enter":if(Wt.current!==-1&&Sn){const Kt=on[Wt.current],dn=G?G(Kt):!1;if(ot.preventDefault(),dn)return;_e(ot,Kt,"selectOption"),l&&mt.current.setSelectionRange(mt.current.value.length,mt.current.value.length)}else N&&lt!==""&&Cn===!1&&(Ce&&ot.preventDefault(),_e(ot,lt,"createOption","freeSolo"));break;case"Escape":Sn?(ot.preventDefault(),ot.stopPropagation(),ge(ot,"escape")):w&&(lt!==""||Ce&&He.length>0)&&(ot.preventDefault(),ot.stopPropagation(),We(ot));break;case"Backspace":if(Ce&&!Ne&&lt===""&&He.length>0){const Kt=Je===-1?He.length-1:Je,dn=He.slice();dn.splice(Kt,1),Q(ot,dn,"removeOption",{option:He[Kt]})}break;case"Delete":if(Ce&&!Ne&&lt===""&&He.length>0&&Je!==-1){const Kt=Je,dn=He.slice();dn.splice(Kt,1),Q(ot,dn,"removeOption",{option:He[Kt]})}break}},Oe=Qe=>{Ft(!0),Se&&!vt.current&&$r(Qe)},Ge=Qe=>{if(t(Ot)){mt.current.focus();return}Ft(!1),ht.current=!0,vt.current=!1,p&&Wt.current!==-1&&Sn?_e(Qe,on[Wt.current],"blur"):p&&N&&lt!==""?_e(Qe,lt,"blur","freeSolo"):a&&Lt(Qe,He),ge(Qe,"blur")},bt=Qe=>{const ot=Qe.target.value;lt!==ot&&(Ut(ot),un(!1),he&&he(Qe,ot,"input")),ot===""?!D&&!Ce&&Q(Qe,null,"clear"):$r(Qe)},zt=Qe=>{const ot=Number(Qe.currentTarget.getAttribute("data-option-index"));Wt.current!==ot&&tn({event:Qe,index:ot,reason:"mouse"})},Mt=Qe=>{tn({event:Qe,index:Number(Qe.currentTarget.getAttribute("data-option-index")),reason:"touch"}),te.current=!0},Pn=Qe=>{const ot=Number(Qe.currentTarget.getAttribute("data-option-index"));_e(Qe,on[ot],"selectOption"),te.current=!1},Bn=Qe=>ot=>{const Kt=He.slice();Kt.splice(Qe,1),Q(ot,Kt,"removeOption",{option:He[Qe]})},kn=Qe=>{cn?ge(Qe,"toggleInput"):$r(Qe)},An=Qe=>{Qe.currentTarget.contains(Qe.target)&&Qe.target.getAttribute("id")!==gt&&Qe.preventDefault()},$n=Qe=>{Qe.currentTarget.contains(Qe.target)&&(mt.current.focus(),nt&&ht.current&&mt.current.selectionEnd-mt.current.selectionStart===0&&mt.current.select(),ht.current=!1)},or=Qe=>{(lt===""||!cn)&&kn(Qe)};let yr=N&&lt.length>0;yr=yr||(Ce?He.length>0:He!==null);let Nr=on;return K&&(Nr=on.reduce((Qe,ot,Kt)=>{const dn=K(ot);return Qe.length>0&&Qe[Qe.length-1].group===dn?Qe[Qe.length-1].options.push(ot):Qe.push({key:Kt,index:Kt,group:dn,options:[ot]}),Qe},[])),$&&Nt&&Ge(),{getRootProps:(Qe={})=>H({"aria-owns":an?`${gt}-listbox`:null},Qe,{onKeyDown:Ve(Qe),onMouseDown:An,onClick:$n}),getInputLabelProps:()=>({id:`${gt}-label`,htmlFor:gt}),getInputProps:()=>({id:gt,value:lt,onBlur:Ge,onFocus:Oe,onChange:bt,onMouseDown:or,"aria-activedescendant":Sn?"":null,"aria-autocomplete":l?"both":"list","aria-controls":an?`${gt}-listbox`:void 0,"aria-expanded":an,autoComplete:"off",ref:mt,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:$}),getClearProps:()=>({tabIndex:-1,onClick:We}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:kn}),getTagProps:({index:Qe})=>H({key:Qe,"data-tag-index":Qe,tabIndex:-1},!Ne&&{onDelete:Bn(Qe)}),getListboxProps:()=>({role:"listbox",id:`${gt}-listbox`,"aria-labelledby":`${gt}-label`,ref:Ir,onMouseDown:Qe=>{Qe.preventDefault()}}),getOptionProps:({index:Qe,option:ot})=>{const Kt=(Ce?He:[He]).some(Jn=>Jn!=null&&ye(ot,Jn)),dn=G?G(ot):!1;return{key:rt(ot),tabIndex:-1,role:"option",id:`${gt}-option-${Qe}`,onMouseMove:zt,onClick:Pn,onTouchStart:Mt,"data-option-index":Qe,"aria-disabled":dn,"aria-selected":Kt}},id:gt,inputValue:lt,value:He,dirty:yr,expanded:Sn&&$t,popupOpen:Sn,focused:Nt||Je!==-1,anchorEl:$t,setAnchorEl:at,focusedTag:Je,groupedOptions:Nr}}function u$(e){return wn("MuiTypography",e)}yn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const d$=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],h$=e=>{const{align:t,gutterBottom:o,noWrap:l,paragraph:d,variant:p,classes:y}=e,a={root:["root",p,e.align!=="inherit"&&`align${en(t)}`,o&&"gutterBottom",l&&"noWrap",d&&"paragraph"]};return xn(a,u$,y)},p$=dt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.variant&&t[o.variant],o.align!=="inherit"&&t[`align${en(o.align)}`],o.noWrap&&t.noWrap,o.gutterBottom&&t.gutterBottom,o.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>H({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),A7={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},f$={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},m$=e=>f$[e]||e,g$=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiTypography"}),d=m$(l.color),p=Ry(H({},l,{color:d})),{align:y="inherit",className:a,component:w,gutterBottom:C=!1,noWrap:M=!1,paragraph:D=!1,variant:R="body1",variantMapping:$=A7}=p,V=Bt(p,d$),B=H({},p,{align:y,color:d,className:a,component:w,gutterBottom:C,noWrap:M,paragraph:D,variant:R,variantMapping:$}),J=w||(D?"p":$[R]||A7[R])||"span",j=h$(B);return ee.jsx(p$,H({as:J,ref:o,ownerState:B,className:qt(j.root,a)},V))}),Qa=g$;function Ah({props:e,states:t,muiFormControl:o}){return t.reduce((l,d)=>(l[d]=e[d],o&&typeof e[d]>"u"&&(l[d]=o[d]),l),{})}const y$=W.createContext(void 0),Gy=y$;function Tu(){return W.useContext(Gy)}function _$(e){return ee.jsx(OR,H({},e,{defaultTheme:Oy,themeId:R1}))}function D7(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function N0(e,t=!1){return e&&(D7(e.value)&&e.value!==""||t&&D7(e.defaultValue)&&e.defaultValue!=="")}function x$(e){return e.startAdornment}function v$(e){return wn("MuiInputBase",e)}const b$=yn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Lo=b$,w$=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Hy=(e,t)=>{const{ownerState:o}=e;return[t.root,o.formControl&&t.formControl,o.startAdornment&&t.adornedStart,o.endAdornment&&t.adornedEnd,o.error&&t.error,o.size==="small"&&t.sizeSmall,o.multiline&&t.multiline,o.color&&t[`color${en(o.color)}`],o.fullWidth&&t.fullWidth,o.hiddenLabel&&t.hiddenLabel]},qy=(e,t)=>{const{ownerState:o}=e;return[t.input,o.size==="small"&&t.inputSizeSmall,o.multiline&&t.inputMultiline,o.type==="search"&&t.inputTypeSearch,o.startAdornment&&t.inputAdornedStart,o.endAdornment&&t.inputAdornedEnd,o.hiddenLabel&&t.inputHiddenLabel]},S$=e=>{const{classes:t,color:o,disabled:l,error:d,endAdornment:p,focused:y,formControl:a,fullWidth:w,hiddenLabel:C,multiline:M,readOnly:D,size:R,startAdornment:$,type:V}=e,B={root:["root",`color${en(o)}`,l&&"disabled",d&&"error",w&&"fullWidth",y&&"focused",a&&"formControl",R==="small"&&"sizeSmall",M&&"multiline",$&&"adornedStart",p&&"adornedEnd",C&&"hiddenLabel",D&&"readOnly"],input:["input",l&&"disabled",V==="search"&&"inputTypeSearch",M&&"inputMultiline",R==="small"&&"inputSizeSmall",C&&"inputHiddenLabel",$&&"inputAdornedStart",p&&"inputAdornedEnd",D&&"readOnly"]};return xn(B,v$,t)},Zy=dt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Hy})(({theme:e,ownerState:t})=>H({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Lo.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&H({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),Xy=dt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:qy})(({theme:e,ownerState:t})=>{const o=e.palette.mode==="light",l=H({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:o?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),d={opacity:"0 !important"},p=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:o?.42:.5};return H({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Lo.formControl} &`]:{"&::-webkit-input-placeholder":d,"&::-moz-placeholder":d,"&:-ms-input-placeholder":d,"&::-ms-input-placeholder":d,"&:focus::-webkit-input-placeholder":p,"&:focus::-moz-placeholder":p,"&:focus:-ms-input-placeholder":p,"&:focus::-ms-input-placeholder":p},[`&.${Lo.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),T$=ee.jsx(_$,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),C$=W.forwardRef(function(t,o){var l;const d=mn({props:t,name:"MuiInputBase"}),{"aria-describedby":p,autoComplete:y,autoFocus:a,className:w,components:C={},componentsProps:M={},defaultValue:D,disabled:R,disableInjectingGlobalStyles:$,endAdornment:V,fullWidth:B=!1,id:J,inputComponent:j="input",inputProps:N={},inputRef:G,maxRows:Y,minRows:K,multiline:oe=!1,name:ie,onBlur:de,onChange:le,onClick:ye,onFocus:Ce,onKeyDown:Fe,onKeyUp:be,placeholder:we,readOnly:he,renderSuffix:Be,rows:Ae,slotProps:Se={},slots:ke={},startAdornment:Ne,type:nt="text",value:xt}=d,gt=Bt(d,w$),rt=N.value!=null?N.value:xt,{current:vt}=W.useRef(rt!=null),ht=W.useRef(),mt=W.useCallback(on=>{},[]),Ot=zr(ht,G,N.ref,mt),[$t,at]=W.useState(!1),Je=Tu(),it=Ah({props:d,muiFormControl:Je,states:["color","disabled","error","hiddenLabel","size","required","filled"]});it.focused=Je?Je.focused:$t,W.useEffect(()=>{!Je&&R&&$t&&(at(!1),de&&de())},[Je,R,$t,de]);const St=Je&&Je.onFilled,Wt=Je&&Je.onEmpty,He=W.useCallback(on=>{N0(on)?St&&St():Wt&&Wt()},[St,Wt]);Ei(()=>{vt&&He({value:rt})},[rt,He,vt]);const jt=on=>{if(it.disabled){on.stopPropagation();return}Ce&&Ce(on),N.onFocus&&N.onFocus(on),Je&&Je.onFocus?Je.onFocus(on):at(!0)},lt=on=>{de&&de(on),N.onBlur&&N.onBlur(on),Je&&Je.onBlur?Je.onBlur(on):at(!1)},Ut=(on,...sn)=>{if(!vt){const an=on.target||ht.current;if(an==null)throw new Error(nc(1));He({value:an.value})}N.onChange&&N.onChange(on,...sn),le&&le(on,...sn)};W.useEffect(()=>{He(ht.current)},[]);const Nt=on=>{ht.current&&on.currentTarget===on.target&&ht.current.focus(),ye&&!it.disabled&&ye(on)};let Ft=j,Lt=N;oe&&Ft==="input"&&(Ae?Lt=H({type:void 0,minRows:Ae,maxRows:Ae},Lt):Lt=H({type:void 0,maxRows:Y,minRows:K},Lt),Ft=o$);const cn=on=>{He(on.animationName==="mui-auto-fill-cancel"?ht.current:{value:"x"})};W.useEffect(()=>{Je&&Je.setAdornedStart(!!Ne)},[Je,Ne]);const En=H({},d,{color:it.color||"primary",disabled:it.disabled,endAdornment:V,error:it.error,focused:it.focused,formControl:Je,fullWidth:B,hiddenLabel:it.hiddenLabel,multiline:oe,size:it.size,startAdornment:Ne,type:nt}),Gn=S$(En),un=ke.root||C.Root||Zy,Cn=Se.root||M.root||{},Sn=ke.input||C.Input||Xy;return Lt=H({},Lt,(l=Se.input)!=null?l:M.input),ee.jsxs(W.Fragment,{children:[!$&&T$,ee.jsxs(un,H({},Cn,!xu(un)&&{ownerState:H({},En,Cn.ownerState)},{ref:o,onClick:Nt},gt,{className:qt(Gn.root,Cn.className,w,he&&"MuiInputBase-readOnly"),children:[Ne,ee.jsx(Gy.Provider,{value:null,children:ee.jsx(Sn,H({ownerState:En,"aria-invalid":it.error,"aria-describedby":p,autoComplete:y,autoFocus:a,defaultValue:D,disabled:it.disabled,id:J,onAnimationStart:cn,name:ie,placeholder:we,readOnly:he,required:it.required,rows:Ae,value:rt,onKeyDown:Fe,onKeyUp:be,type:nt},Lt,!xu(Sn)&&{as:Ft,ownerState:H({},En,Lt.ownerState)},{ref:Ot,className:qt(Gn.input,Lt.className,he&&"MuiInputBase-readOnly"),onBlur:lt,onChange:Ut,onFocus:jt}))}),V,Be?Be(H({},it,{startAdornment:Ne})):null]}))]})}),x3=C$;function E$(e){return wn("MuiInput",e)}const k$=H({},Lo,yn("MuiInput",["root","underline","input"])),jl=k$,P$=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],M$=e=>{const{classes:t,disableUnderline:o}=e,d=xn({root:["root",!o&&"underline"],input:["input"]},E$,t);return H({},t,d)},I$=dt(Zy,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...Hy(e,t),!o.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let l=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(l=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),H({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${jl.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${jl.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${l}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${jl.disabled}, .${jl.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${l}`}},[`&.${jl.disabled}:before`]:{borderBottomStyle:"dotted"}})}),A$=dt(Xy,{name:"MuiInput",slot:"Input",overridesResolver:qy})({}),oC=W.forwardRef(function(t,o){var l,d,p,y;const a=mn({props:t,name:"MuiInput"}),{disableUnderline:w,components:C={},componentsProps:M,fullWidth:D=!1,inputComponent:R="input",multiline:$=!1,slotProps:V,slots:B={},type:J="text"}=a,j=Bt(a,P$),N=M$(a),Y={root:{ownerState:{disableUnderline:w}}},K=V??M?wo(V??M,Y):Y,oe=(l=(d=B.root)!=null?d:C.Root)!=null?l:I$,ie=(p=(y=B.input)!=null?y:C.Input)!=null?p:A$;return ee.jsx(x3,H({slots:{root:oe,input:ie},slotProps:K,fullWidth:D,inputComponent:R,multiline:$,ref:o,type:J},j,{classes:N}))});oC.muiName="Input";const sC=oC;function D$(e){return wn("MuiFilledInput",e)}const z$=H({},Lo,yn("MuiFilledInput",["root","underline","input"])),Oo=z$,R$=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],L$=e=>{const{classes:t,disableUnderline:o}=e,d=xn({root:["root",!o&&"underline"],input:["input"]},D$,t);return H({},t,d)},O$=dt(Zy,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[...Hy(e,t),!o.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var o;const l=e.palette.mode==="light",d=l?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",p=l?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",y=l?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=l?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return H({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:p,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:y,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:p}},[`&.${Oo.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:p},[`&.${Oo.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:a}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(o=(e.vars||e).palette[t.color||"primary"])==null?void 0:o.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Oo.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Oo.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:d}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Oo.disabled}, .${Oo.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Oo.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&H({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),B$=dt(Xy,{name:"MuiFilledInput",slot:"Input",overridesResolver:qy})(({theme:e,ownerState:t})=>H({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),aC=W.forwardRef(function(t,o){var l,d,p,y;const a=mn({props:t,name:"MuiFilledInput"}),{components:w={},componentsProps:C,fullWidth:M=!1,inputComponent:D="input",multiline:R=!1,slotProps:$,slots:V={},type:B="text"}=a,J=Bt(a,R$),j=H({},a,{fullWidth:M,inputComponent:D,multiline:R,type:B}),N=L$(a),G={root:{ownerState:j},input:{ownerState:j}},Y=$??C?wo($??C,G):G,K=(l=(d=V.root)!=null?d:w.Root)!=null?l:O$,oe=(p=(y=V.input)!=null?y:w.Input)!=null?p:B$;return ee.jsx(x3,H({slots:{root:K,input:oe},componentsProps:Y,fullWidth:M,inputComponent:D,multiline:R,ref:o,type:B},J,{classes:N}))});aC.muiName="Input";const lC=aC;var z7;const F$=["children","classes","className","label","notched"],$$=dt("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),N$=dt("legend")(({ownerState:e,theme:t})=>H({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&H({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function j$(e){const{className:t,label:o,notched:l}=e,d=Bt(e,F$),p=o!=null&&o!=="",y=H({},e,{notched:l,withLabel:p});return ee.jsx($$,H({"aria-hidden":!0,className:t,ownerState:y},d,{children:ee.jsx(N$,{ownerState:y,children:p?ee.jsx("span",{children:o}):z7||(z7=ee.jsx("span",{className:"notranslate",children:""}))})}))}function U$(e){return wn("MuiOutlinedInput",e)}const V$=H({},Lo,yn("MuiOutlinedInput",["root","notchedOutline","input"])),la=V$,W$=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],G$=e=>{const{classes:t}=e,l=xn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},U$,t);return H({},t,l)},H$=dt(Zy,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Hy})(({theme:e,ownerState:t})=>{const o=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return H({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${la.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${la.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:o}},[`&.${la.focused} .${la.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${la.error} .${la.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${la.disabled} .${la.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&H({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),q$=dt(j$,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),Z$=dt(Xy,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:qy})(({theme:e,ownerState:t})=>H({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),cC=W.forwardRef(function(t,o){var l,d,p,y,a;const w=mn({props:t,name:"MuiOutlinedInput"}),{components:C={},fullWidth:M=!1,inputComponent:D="input",label:R,multiline:$=!1,notched:V,slots:B={},type:J="text"}=w,j=Bt(w,W$),N=G$(w),G=Tu(),Y=Ah({props:w,muiFormControl:G,states:["required"]}),K=H({},w,{color:Y.color||"primary",disabled:Y.disabled,error:Y.error,focused:Y.focused,formControl:G,fullWidth:M,hiddenLabel:Y.hiddenLabel,multiline:$,size:Y.size,type:J}),oe=(l=(d=B.root)!=null?d:C.Root)!=null?l:H$,ie=(p=(y=B.input)!=null?y:C.Input)!=null?p:Z$;return ee.jsx(x3,H({slots:{root:oe,input:ie},renderSuffix:de=>ee.jsx(q$,{ownerState:K,className:N.notchedOutline,label:R!=null&&R!==""&&Y.required?a||(a=ee.jsxs(W.Fragment,{children:[R,"","*"]})):R,notched:typeof V<"u"?V:!!(de.startAdornment||de.filled||de.focused)}),fullWidth:M,inputComponent:D,multiline:$,ref:o,type:J},j,{classes:H({},N,{notchedOutline:null})}))});cC.muiName="Input";const v3=cC;function X$(e){return wn("MuiFormLabel",e)}const Y$=yn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Yf=Y$,K$=["children","className","color","component","disabled","error","filled","focused","required"],J$=e=>{const{classes:t,color:o,focused:l,disabled:d,error:p,filled:y,required:a}=e,w={root:["root",`color${en(o)}`,d&&"disabled",p&&"error",y&&"filled",l&&"focused",a&&"required"],asterisk:["asterisk",p&&"error"]};return xn(w,X$,t)},Q$=dt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>H({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>H({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Yf.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Yf.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Yf.error}`]:{color:(e.vars||e).palette.error.main}})),eN=dt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Yf.error}`]:{color:(e.vars||e).palette.error.main}})),tN=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiFormLabel"}),{children:d,className:p,component:y="label"}=l,a=Bt(l,K$),w=Tu(),C=Ah({props:l,muiFormControl:w,states:["color","required","focused","disabled","error","filled"]}),M=H({},l,{color:C.color||"primary",component:y,disabled:C.disabled,error:C.error,filled:C.filled,focused:C.focused,required:C.required}),D=J$(M);return ee.jsxs(Q$,H({as:y,ownerState:M,className:qt(D.root,p),ref:o},a,{children:[d,C.required&&ee.jsxs(eN,{ownerState:M,"aria-hidden":!0,className:D.asterisk,children:["","*"]})]}))}),nN=tN;function rN(e){return wn("MuiInputLabel",e)}yn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const iN=["disableAnimation","margin","shrink","variant","className"],oN=e=>{const{classes:t,formControl:o,size:l,shrink:d,disableAnimation:p,variant:y,required:a}=e,C=xn({root:["root",o&&"formControl",!p&&"animated",d&&"shrink",l==="small"&&"sizeSmall",y],asterisk:[a&&"asterisk"]},rN,t);return H({},t,C)},sN=dt(nN,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${Yf.asterisk}`]:t.asterisk},t.root,o.formControl&&t.formControl,o.size==="small"&&t.sizeSmall,o.shrink&&t.shrink,!o.disableAnimation&&t.animated,t[o.variant]]}})(({theme:e,ownerState:t})=>H({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&H({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&H({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&H({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),aN=W.forwardRef(function(t,o){const l=mn({name:"MuiInputLabel",props:t}),{disableAnimation:d=!1,shrink:p,className:y}=l,a=Bt(l,iN),w=Tu();let C=p;typeof C>"u"&&w&&(C=w.filled||w.focused||w.adornedStart);const M=Ah({props:l,muiFormControl:w,states:["size","variant","required"]}),D=H({},l,{disableAnimation:d,formControl:w,shrink:C,size:M.size,variant:M.variant,required:M.required}),R=oN(D);return ee.jsx(sN,H({"data-shrink":C,ownerState:D,ref:o,className:qt(R.root,y)},a,{classes:R}))}),lN=aN;function cN(e){return wn("MuiFormControl",e)}yn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const uN=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],dN=e=>{const{classes:t,margin:o,fullWidth:l}=e,d={root:["root",o!=="none"&&`margin${en(o)}`,l&&"fullWidth"]};return xn(d,cN,t)},hN=dt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>H({},t.root,t[`margin${en(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>H({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),pN=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiFormControl"}),{children:d,className:p,color:y="primary",component:a="div",disabled:w=!1,error:C=!1,focused:M,fullWidth:D=!1,hiddenLabel:R=!1,margin:$="none",required:V=!1,size:B="medium",variant:J="outlined"}=l,j=Bt(l,uN),N=H({},l,{color:y,component:a,disabled:w,error:C,fullWidth:D,hiddenLabel:R,margin:$,required:V,size:B,variant:J}),G=dN(N),[Y,K]=W.useState(()=>{let be=!1;return d&&W.Children.forEach(d,we=>{if(!Qg(we,["Input","Select"]))return;const he=Qg(we,["Select"])?we.props.input:we;he&&x$(he.props)&&(be=!0)}),be}),[oe,ie]=W.useState(()=>{let be=!1;return d&&W.Children.forEach(d,we=>{Qg(we,["Input","Select"])&&(N0(we.props,!0)||N0(we.props.inputProps,!0))&&(be=!0)}),be}),[de,le]=W.useState(!1);w&&de&&le(!1);const ye=M!==void 0&&!w?M:de;let Ce;const Fe=W.useMemo(()=>({adornedStart:Y,setAdornedStart:K,color:y,disabled:w,error:C,filled:oe,focused:ye,fullWidth:D,hiddenLabel:R,size:B,onBlur:()=>{le(!1)},onEmpty:()=>{ie(!1)},onFilled:()=>{ie(!0)},onFocus:()=>{le(!0)},registerEffect:Ce,required:V,variant:J}),[Y,y,w,C,oe,ye,D,R,Ce,V,B,J]);return ee.jsx(Gy.Provider,{value:Fe,children:ee.jsx(hN,H({as:a,ownerState:N,className:qt(G.root,p),ref:o},j,{children:d}))})}),uC=pN;function fN(e){return wn("MuiFormHelperText",e)}const mN=yn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),R7=mN;var L7;const gN=["children","className","component","disabled","error","filled","focused","margin","required","variant"],yN=e=>{const{classes:t,contained:o,size:l,disabled:d,error:p,filled:y,focused:a,required:w}=e,C={root:["root",d&&"disabled",p&&"error",l&&`size${en(l)}`,o&&"contained",a&&"focused",y&&"filled",w&&"required"]};return xn(C,fN,t)},_N=dt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.size&&t[`size${en(o.size)}`],o.contained&&t.contained,o.filled&&t.filled]}})(({theme:e,ownerState:t})=>H({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${R7.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${R7.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),xN=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiFormHelperText"}),{children:d,className:p,component:y="p"}=l,a=Bt(l,gN),w=Tu(),C=Ah({props:l,muiFormControl:w,states:["variant","size","disabled","error","filled","focused","required"]}),M=H({},l,{component:y,contained:C.variant==="filled"||C.variant==="outlined",variant:C.variant,size:C.size,disabled:C.disabled,error:C.error,filled:C.filled,focused:C.focused,required:C.required}),D=yN(M);return ee.jsx(_N,H({as:y,ownerState:M,className:qt(D.root,p),ref:o},a,{children:d===" "?L7||(L7=ee.jsx("span",{className:"notranslate",children:""})):d}))}),vN=xN;var Rr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b3=Symbol.for("react.element"),w3=Symbol.for("react.portal"),Yy=Symbol.for("react.fragment"),Ky=Symbol.for("react.strict_mode"),Jy=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),e_=Symbol.for("react.context"),bN=Symbol.for("react.server_context"),t_=Symbol.for("react.forward_ref"),n_=Symbol.for("react.suspense"),r_=Symbol.for("react.suspense_list"),i_=Symbol.for("react.memo"),o_=Symbol.for("react.lazy"),wN=Symbol.for("react.offscreen"),dC;dC=Symbol.for("react.module.reference");function _s(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case b3:switch(e=e.type,e){case Yy:case Jy:case Ky:case n_:case r_:return e;default:switch(e=e&&e.$$typeof,e){case bN:case e_:case t_:case o_:case i_:case Qy:return e;default:return t}}case w3:return t}}}Rr.ContextConsumer=e_;Rr.ContextProvider=Qy;Rr.Element=b3;Rr.ForwardRef=t_;Rr.Fragment=Yy;Rr.Lazy=o_;Rr.Memo=i_;Rr.Portal=w3;Rr.Profiler=Jy;Rr.StrictMode=Ky;Rr.Suspense=n_;Rr.SuspenseList=r_;Rr.isAsyncMode=function(){return!1};Rr.isConcurrentMode=function(){return!1};Rr.isContextConsumer=function(e){return _s(e)===e_};Rr.isContextProvider=function(e){return _s(e)===Qy};Rr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===b3};Rr.isForwardRef=function(e){return _s(e)===t_};Rr.isFragment=function(e){return _s(e)===Yy};Rr.isLazy=function(e){return _s(e)===o_};Rr.isMemo=function(e){return _s(e)===i_};Rr.isPortal=function(e){return _s(e)===w3};Rr.isProfiler=function(e){return _s(e)===Jy};Rr.isStrictMode=function(e){return _s(e)===Ky};Rr.isSuspense=function(e){return _s(e)===n_};Rr.isSuspenseList=function(e){return _s(e)===r_};Rr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Yy||e===Jy||e===Ky||e===n_||e===r_||e===wN||typeof e=="object"&&e!==null&&(e.$$typeof===o_||e.$$typeof===i_||e.$$typeof===Qy||e.$$typeof===e_||e.$$typeof===t_||e.$$typeof===dC||e.getModuleId!==void 0)};Rr.typeOf=_s;const SN=W.createContext({}),uu=SN;function TN(e){return wn("MuiList",e)}yn("MuiList",["root","padding","dense","subheader"]);const CN=["children","className","component","dense","disablePadding","subheader"],EN=e=>{const{classes:t,disablePadding:o,dense:l,subheader:d}=e;return xn({root:["root",!o&&"padding",l&&"dense",d&&"subheader"]},TN,t)},kN=dt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disablePadding&&t.padding,o.dense&&t.dense,o.subheader&&t.subheader]}})(({ownerState:e})=>H({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),PN=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiList"}),{children:d,className:p,component:y="ul",dense:a=!1,disablePadding:w=!1,subheader:C}=l,M=Bt(l,CN),D=W.useMemo(()=>({dense:a}),[a]),R=H({},l,{component:y,dense:a,disablePadding:w}),$=EN(R);return ee.jsx(uu.Provider,{value:D,children:ee.jsxs(kN,H({as:y,className:qt($.root,p),ref:o,ownerState:R},M,{children:[C,d]}))})}),hC=PN,MN=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Tx(e,t,o){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:o?null:e.firstChild}function O7(e,t,o){return e===t?o?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:o?null:e.lastChild}function pC(e,t){if(t===void 0)return!0;let o=e.innerText;return o===void 0&&(o=e.textContent),o=o.trim().toLowerCase(),o.length===0?!1:t.repeating?o[0]===t.keys[0]:o.indexOf(t.keys.join(""))===0}function Sf(e,t,o,l,d,p){let y=!1,a=d(e,t,t?o:!1);for(;a;){if(a===e.firstChild){if(y)return!1;y=!0}const w=l?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!pC(a,p)||w)a=d(e,a,o);else return a.focus(),!0}return!1}const IN=W.forwardRef(function(t,o){const{actions:l,autoFocus:d=!1,autoFocusItem:p=!1,children:y,className:a,disabledItemsFocusable:w=!1,disableListWrap:C=!1,onKeyDown:M,variant:D="selectedMenu"}=t,R=Bt(t,MN),$=W.useRef(null),V=W.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ei(()=>{d&&$.current.focus()},[d]),W.useImperativeHandle(l,()=>({adjustStyleForScrollbar:(G,Y)=>{const K=!$.current.style.width;if(G.clientHeight<$.current.clientHeight&&K){const oe=`${Y8(Ci(G))}px`;$.current.style[Y.direction==="rtl"?"paddingLeft":"paddingRight"]=oe,$.current.style.width=`calc(100% + ${oe})`}return $.current}}),[]);const B=G=>{const Y=$.current,K=G.key,oe=Ci(Y).activeElement;if(K==="ArrowDown")G.preventDefault(),Sf(Y,oe,C,w,Tx);else if(K==="ArrowUp")G.preventDefault(),Sf(Y,oe,C,w,O7);else if(K==="Home")G.preventDefault(),Sf(Y,null,C,w,Tx);else if(K==="End")G.preventDefault(),Sf(Y,null,C,w,O7);else if(K.length===1){const ie=V.current,de=K.toLowerCase(),le=performance.now();ie.keys.length>0&&(le-ie.lastTime>500?(ie.keys=[],ie.repeating=!0,ie.previousKeyMatched=!0):ie.repeating&&de!==ie.keys[0]&&(ie.repeating=!1)),ie.lastTime=le,ie.keys.push(de);const ye=oe&&!ie.repeating&&pC(oe,ie);ie.previousKeyMatched&&(ye||Sf(Y,oe,!1,w,Tx,ie))?G.preventDefault():ie.previousKeyMatched=!1}M&&M(G)},J=zr($,o);let j=-1;W.Children.forEach(y,(G,Y)=>{if(!W.isValidElement(G)){j===Y&&(j+=1,j>=y.length&&(j=-1));return}G.props.disabled||(D==="selectedMenu"&&G.props.selected||j===-1)&&(j=Y),j===Y&&(G.props.disabled||G.props.muiSkipListHighlight||G.type.muiSkipListHighlight)&&(j+=1,j>=y.length&&(j=-1))});const N=W.Children.map(y,(G,Y)=>{if(Y===j){const K={};return p&&(K.autoFocus=!0),G.props.tabIndex===void 0&&D==="selectedMenu"&&(K.tabIndex=0),W.cloneElement(G,K)}return G});return ee.jsx(hC,H({role:"menu",ref:J,className:a,onKeyDown:B,tabIndex:d?0:-1},R,{children:N}))}),fC=IN;function $v(e,t){return $v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,d){return l.__proto__=d,l},$v(e,t)}function S3(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$v(e,t)}function AN(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function DN(e,t){e.classList?e.classList.add(t):AN(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function B7(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function zN(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=B7(e.className,t):e.setAttribute("class",B7(e.className&&e.className.baseVal||"",t))}const F7={disabled:!1},j0=Fo.createContext(null);var mC=function(t){return t.scrollTop},zf="unmounted",Qc="exited",eu="entering",Ld="entered",Nv="exiting",rl=function(e){S3(t,e);function t(l,d){var p;p=e.call(this,l,d)||this;var y=d,a=y&&!y.isMounting?l.enter:l.appear,w;return p.appearStatus=null,l.in?a?(w=Qc,p.appearStatus=eu):w=Ld:l.unmountOnExit||l.mountOnEnter?w=zf:w=Qc,p.state={status:w},p.nextCallback=null,p}t.getDerivedStateFromProps=function(d,p){var y=d.in;return y&&p.status===zf?{status:Qc}:null};var o=t.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(d){var p=null;if(d!==this.props){var y=this.state.status;this.props.in?y!==eu&&y!==Ld&&(p=eu):(y===eu||y===Ld)&&(p=Nv)}this.updateStatus(!1,p)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var d=this.props.timeout,p,y,a;return p=y=a=d,d!=null&&typeof d!="number"&&(p=d.exit,y=d.enter,a=d.appear!==void 0?d.appear:y),{exit:p,enter:y,appear:a}},o.updateStatus=function(d,p){if(d===void 0&&(d=!1),p!==null)if(this.cancelNextCallback(),p===eu){if(this.props.unmountOnExit||this.props.mountOnEnter){var y=this.props.nodeRef?this.props.nodeRef.current:Ag.findDOMNode(this);y&&mC(y)}this.performEnter(d)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qc&&this.setState({status:zf})},o.performEnter=function(d){var p=this,y=this.props.enter,a=this.context?this.context.isMounting:d,w=this.props.nodeRef?[a]:[Ag.findDOMNode(this),a],C=w[0],M=w[1],D=this.getTimeouts(),R=a?D.appear:D.enter;if(!d&&!y||F7.disabled){this.safeSetState({status:Ld},function(){p.props.onEntered(C)});return}this.props.onEnter(C,M),this.safeSetState({status:eu},function(){p.props.onEntering(C,M),p.onTransitionEnd(R,function(){p.safeSetState({status:Ld},function(){p.props.onEntered(C,M)})})})},o.performExit=function(){var d=this,p=this.props.exit,y=this.getTimeouts(),a=this.props.nodeRef?void 0:Ag.findDOMNode(this);if(!p||F7.disabled){this.safeSetState({status:Qc},function(){d.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Nv},function(){d.props.onExiting(a),d.onTransitionEnd(y.exit,function(){d.safeSetState({status:Qc},function(){d.props.onExited(a)})})})},o.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(d,p){p=this.setNextCallback(p),this.setState(d,p)},o.setNextCallback=function(d){var p=this,y=!0;return this.nextCallback=function(a){y&&(y=!1,p.nextCallback=null,d(a))},this.nextCallback.cancel=function(){y=!1},this.nextCallback},o.onTransitionEnd=function(d,p){this.setNextCallback(p);var y=this.props.nodeRef?this.props.nodeRef.current:Ag.findDOMNode(this),a=d==null&&!this.props.addEndListener;if(!y||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var w=this.props.nodeRef?[this.nextCallback]:[y,this.nextCallback],C=w[0],M=w[1];this.props.addEndListener(C,M)}d!=null&&setTimeout(this.nextCallback,d)},o.render=function(){var d=this.state.status;if(d===zf)return null;var p=this.props,y=p.children;p.in,p.mountOnEnter,p.unmountOnExit,p.appear,p.enter,p.exit,p.timeout,p.addEndListener,p.onEnter,p.onEntering,p.onEntered,p.onExit,p.onExiting,p.onExited,p.nodeRef;var a=Bt(p,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Fo.createElement(j0.Provider,{value:null},typeof y=="function"?y(d,a):Fo.cloneElement(Fo.Children.only(y),a))},t}(Fo.Component);rl.contextType=j0;rl.propTypes={};function Dd(){}rl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Dd,onEntering:Dd,onEntered:Dd,onExit:Dd,onExiting:Dd,onExited:Dd};rl.UNMOUNTED=zf;rl.EXITED=Qc;rl.ENTERING=eu;rl.ENTERED=Ld;rl.EXITING=Nv;const T3=rl;var RN=function(t,o){return t&&o&&o.split(" ").forEach(function(l){return DN(t,l)})},Cx=function(t,o){return t&&o&&o.split(" ").forEach(function(l){return zN(t,l)})},C3=function(e){S3(t,e);function t(){for(var l,d=arguments.length,p=new Array(d),y=0;y<d;y++)p[y]=arguments[y];return l=e.call.apply(e,[this].concat(p))||this,l.appliedClasses={appear:{},enter:{},exit:{}},l.onEnter=function(a,w){var C=l.resolveArguments(a,w),M=C[0],D=C[1];l.removeClasses(M,"exit"),l.addClass(M,D?"appear":"enter","base"),l.props.onEnter&&l.props.onEnter(a,w)},l.onEntering=function(a,w){var C=l.resolveArguments(a,w),M=C[0],D=C[1],R=D?"appear":"enter";l.addClass(M,R,"active"),l.props.onEntering&&l.props.onEntering(a,w)},l.onEntered=function(a,w){var C=l.resolveArguments(a,w),M=C[0],D=C[1],R=D?"appear":"enter";l.removeClasses(M,R),l.addClass(M,R,"done"),l.props.onEntered&&l.props.onEntered(a,w)},l.onExit=function(a){var w=l.resolveArguments(a),C=w[0];l.removeClasses(C,"appear"),l.removeClasses(C,"enter"),l.addClass(C,"exit","base"),l.props.onExit&&l.props.onExit(a)},l.onExiting=function(a){var w=l.resolveArguments(a),C=w[0];l.addClass(C,"exit","active"),l.props.onExiting&&l.props.onExiting(a)},l.onExited=function(a){var w=l.resolveArguments(a),C=w[0];l.removeClasses(C,"exit"),l.addClass(C,"exit","done"),l.props.onExited&&l.props.onExited(a)},l.resolveArguments=function(a,w){return l.props.nodeRef?[l.props.nodeRef.current,a]:[a,w]},l.getClassNames=function(a){var w=l.props.classNames,C=typeof w=="string",M=C&&w?w+"-":"",D=C?""+M+a:w[a],R=C?D+"-active":w[a+"Active"],$=C?D+"-done":w[a+"Done"];return{baseClassName:D,activeClassName:R,doneClassName:$}},l}var o=t.prototype;return o.addClass=function(d,p,y){var a=this.getClassNames(p)[y+"ClassName"],w=this.getClassNames("enter"),C=w.doneClassName;p==="appear"&&y==="done"&&C&&(a+=" "+C),y==="active"&&d&&mC(d),a&&(this.appliedClasses[p][y]=a,RN(d,a))},o.removeClasses=function(d,p){var y=this.appliedClasses[p],a=y.base,w=y.active,C=y.done;this.appliedClasses[p]={},a&&Cx(d,a),w&&Cx(d,w),C&&Cx(d,C)},o.render=function(){var d=this.props;d.classNames;var p=Bt(d,["classNames"]);return Fo.createElement(T3,H({},p,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(Fo.Component);C3.defaultProps={classNames:""};C3.propTypes={};const LN=C3;function ON(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E3(e,t){var o=function(p){return t&&W.isValidElement(p)?t(p):p},l=Object.create(null);return e&&W.Children.map(e,function(d){return d}).forEach(function(d){l[d.key]=o(d)}),l}function BN(e,t){e=e||{},t=t||{};function o(M){return M in t?t[M]:e[M]}var l=Object.create(null),d=[];for(var p in e)p in t?d.length&&(l[p]=d,d=[]):d.push(p);var y,a={};for(var w in t){if(l[w])for(y=0;y<l[w].length;y++){var C=l[w][y];a[l[w][y]]=o(C)}a[w]=o(w)}for(y=0;y<d.length;y++)a[d[y]]=o(d[y]);return a}function ou(e,t,o){return o[t]!=null?o[t]:e.props[t]}function FN(e,t){return E3(e.children,function(o){return W.cloneElement(o,{onExited:t.bind(null,o),in:!0,appear:ou(o,"appear",e),enter:ou(o,"enter",e),exit:ou(o,"exit",e)})})}function $N(e,t,o){var l=E3(e.children),d=BN(t,l);return Object.keys(d).forEach(function(p){var y=d[p];if(W.isValidElement(y)){var a=p in t,w=p in l,C=t[p],M=W.isValidElement(C)&&!C.props.in;w&&(!a||M)?d[p]=W.cloneElement(y,{onExited:o.bind(null,y),in:!0,exit:ou(y,"exit",e),enter:ou(y,"enter",e)}):!w&&a&&!M?d[p]=W.cloneElement(y,{in:!1}):w&&a&&W.isValidElement(C)&&(d[p]=W.cloneElement(y,{onExited:o.bind(null,y),in:C.props.in,exit:ou(y,"exit",e),enter:ou(y,"enter",e)}))}}),d}var NN=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},jN={component:"div",childFactory:function(t){return t}},k3=function(e){S3(t,e);function t(l,d){var p;p=e.call(this,l,d)||this;var y=p.handleExited.bind(ON(p));return p.state={contextValue:{isMounting:!0},handleExited:y,firstRender:!0},p}var o=t.prototype;return o.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},o.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(d,p){var y=p.children,a=p.handleExited,w=p.firstRender;return{children:w?FN(d,a):$N(d,y,a),firstRender:!1}},o.handleExited=function(d,p){var y=E3(this.props.children);d.key in y||(d.props.onExited&&d.props.onExited(p),this.mounted&&this.setState(function(a){var w=H({},a.children);return delete w[d.key],{children:w}}))},o.render=function(){var d=this.props,p=d.component,y=d.childFactory,a=Bt(d,["component","childFactory"]),w=this.state.contextValue,C=NN(this.state.children).map(y);return delete a.appear,delete a.enter,delete a.exit,p===null?Fo.createElement(j0.Provider,{value:w},C):Fo.createElement(j0.Provider,{value:w},Fo.createElement(p,a,C))},t}(Fo.Component);k3.propTypes={};k3.defaultProps=jN;const P3=k3,gC=e=>e.scrollTop;function U0(e,t){var o,l;const{timeout:d,easing:p,style:y={}}=e;return{duration:(o=y.transitionDuration)!=null?o:typeof d=="number"?d:d[t.mode]||0,easing:(l=y.transitionTimingFunction)!=null?l:typeof p=="object"?p[t.mode]:p,delay:y.transitionDelay}}const UN=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function jv(e){return`scale(${e}, ${e**2})`}const VN={entering:{opacity:1,transform:jv(1)},entered:{opacity:1,transform:"none"}},Ex=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),yC=W.forwardRef(function(t,o){const{addEndListener:l,appear:d=!0,children:p,easing:y,in:a,onEnter:w,onEntered:C,onEntering:M,onExit:D,onExited:R,onExiting:$,style:V,timeout:B="auto",TransitionComponent:J=T3}=t,j=Bt(t,UN),N=W.useRef(),G=W.useRef(),Y=ys(),K=W.useRef(null),oe=zr(K,p.ref,o),ie=he=>Be=>{if(he){const Ae=K.current;Be===void 0?he(Ae):he(Ae,Be)}},de=ie(M),le=ie((he,Be)=>{gC(he);const{duration:Ae,delay:Se,easing:ke}=U0({style:V,timeout:B,easing:y},{mode:"enter"});let Ne;B==="auto"?(Ne=Y.transitions.getAutoHeightDuration(he.clientHeight),G.current=Ne):Ne=Ae,he.style.transition=[Y.transitions.create("opacity",{duration:Ne,delay:Se}),Y.transitions.create("transform",{duration:Ex?Ne:Ne*.666,delay:Se,easing:ke})].join(","),w&&w(he,Be)}),ye=ie(C),Ce=ie($),Fe=ie(he=>{const{duration:Be,delay:Ae,easing:Se}=U0({style:V,timeout:B,easing:y},{mode:"exit"});let ke;B==="auto"?(ke=Y.transitions.getAutoHeightDuration(he.clientHeight),G.current=ke):ke=Be,he.style.transition=[Y.transitions.create("opacity",{duration:ke,delay:Ae}),Y.transitions.create("transform",{duration:Ex?ke:ke*.666,delay:Ex?Ae:Ae||ke*.333,easing:Se})].join(","),he.style.opacity=0,he.style.transform=jv(.75),D&&D(he)}),be=ie(R),we=he=>{B==="auto"&&(N.current=setTimeout(he,G.current||0)),l&&l(K.current,he)};return W.useEffect(()=>()=>{clearTimeout(N.current)},[]),ee.jsx(J,H({appear:d,in:a,nodeRef:K,onEnter:le,onEntered:ye,onEntering:de,onExit:Fe,onExited:be,onExiting:Ce,addEndListener:we,timeout:B==="auto"?null:B},j,{children:(he,Be)=>W.cloneElement(p,H({style:H({opacity:0,transform:jv(.75),visibility:he==="exited"&&!a?"hidden":void 0},VN[he],V,p.props.style),ref:oe},Be))}))});yC.muiSupportAuto=!0;const _C=yC,WN=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],GN={entering:{opacity:1},entered:{opacity:1}},HN=W.forwardRef(function(t,o){const l=ys(),d={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:p,appear:y=!0,children:a,easing:w,in:C,onEnter:M,onEntered:D,onEntering:R,onExit:$,onExited:V,onExiting:B,style:J,timeout:j=d,TransitionComponent:N=T3}=t,G=Bt(t,WN),Y=W.useRef(null),K=zr(Y,a.ref,o),oe=we=>he=>{if(we){const Be=Y.current;he===void 0?we(Be):we(Be,he)}},ie=oe(R),de=oe((we,he)=>{gC(we);const Be=U0({style:J,timeout:j,easing:w},{mode:"enter"});we.style.webkitTransition=l.transitions.create("opacity",Be),we.style.transition=l.transitions.create("opacity",Be),M&&M(we,he)}),le=oe(D),ye=oe(B),Ce=oe(we=>{const he=U0({style:J,timeout:j,easing:w},{mode:"exit"});we.style.webkitTransition=l.transitions.create("opacity",he),we.style.transition=l.transitions.create("opacity",he),$&&$(we)}),Fe=oe(V),be=we=>{p&&p(Y.current,we)};return ee.jsx(N,H({appear:y,in:C,nodeRef:Y,onEnter:de,onEntered:le,onEntering:ie,onExit:Ce,onExited:Fe,onExiting:ye,addEndListener:be,timeout:j},G,{children:(we,he)=>W.cloneElement(a,H({style:H({opacity:0,visibility:we==="exited"&&!C?"hidden":void 0},GN[we],J,a.props.style),ref:K},he))}))}),j1=HN;function qN(e){return wn("MuiBackdrop",e)}yn("MuiBackdrop",["root","invisible"]);const ZN=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],XN=e=>{const{classes:t,invisible:o}=e;return xn({root:["root",o&&"invisible"]},qN,t)},YN=dt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.invisible&&t.invisible]}})(({ownerState:e})=>H({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),KN=W.forwardRef(function(t,o){var l,d,p;const y=mn({props:t,name:"MuiBackdrop"}),{children:a,className:w,component:C="div",components:M={},componentsProps:D={},invisible:R=!1,open:$,slotProps:V={},slots:B={},TransitionComponent:J=j1,transitionDuration:j}=y,N=Bt(y,ZN),G=H({},y,{component:C,invisible:R}),Y=XN(G),K=(l=V.root)!=null?l:D.root;return ee.jsx(J,H({in:$,timeout:j},N,{children:ee.jsx(YN,H({"aria-hidden":!0},K,{as:(d=(p=B.root)!=null?p:M.Root)!=null?d:C,className:qt(Y.root,w,K==null?void 0:K.className),ownerState:H({},G,K==null?void 0:K.ownerState),classes:Y,ref:o,children:a}))}))}),xC=KN,JN=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],QN=dt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.open&&o.exited&&t.hidden]}})(({theme:e,ownerState:t})=>H({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),ej=dt(xC,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),tj=W.forwardRef(function(t,o){var l,d,p,y,a,w;const C=mn({name:"MuiModal",props:t}),{BackdropComponent:M=ej,BackdropProps:D,classes:R,className:$,closeAfterTransition:V=!1,children:B,container:J,component:j,components:N={},componentsProps:G={},disableAutoFocus:Y=!1,disableEnforceFocus:K=!1,disableEscapeKeyDown:oe=!1,disablePortal:ie=!1,disableRestoreFocus:de=!1,disableScrollLock:le=!1,hideBackdrop:ye=!1,keepMounted:Ce=!1,onBackdropClick:Fe,onClose:be,open:we,slotProps:he,slots:Be,theme:Ae}=C,Se=Bt(C,JN),[ke,Ne]=W.useState(!0),nt={container:J,closeAfterTransition:V,disableAutoFocus:Y,disableEnforceFocus:K,disableEscapeKeyDown:oe,disablePortal:ie,disableRestoreFocus:de,disableScrollLock:le,hideBackdrop:ye,keepMounted:Ce,onBackdropClick:Fe,onClose:be,open:we},xt=H({},C,nt,{exited:ke}),gt=(l=(d=Be==null?void 0:Be.root)!=null?d:N.Root)!=null?l:QN,rt=(p=(y=Be==null?void 0:Be.backdrop)!=null?y:N.Backdrop)!=null?p:M,vt=(a=he==null?void 0:he.root)!=null?a:G.root,ht=(w=he==null?void 0:he.backdrop)!=null?w:G.backdrop;return ee.jsx(t$,H({slots:{root:gt,backdrop:rt},slotProps:{root:()=>H({},_h(vt,xt),!xu(gt)&&{as:j,theme:Ae},{className:qt($,vt==null?void 0:vt.className,R==null?void 0:R.root,!xt.open&&xt.exited&&(R==null?void 0:R.hidden))}),backdrop:()=>H({},D,_h(ht,xt),{className:qt(ht==null?void 0:ht.className,D==null?void 0:D.className,R==null?void 0:R.backdrop)})},onTransitionEnter:()=>Ne(!1),onTransitionExited:()=>Ne(!0),ref:o},Se,nt,{children:B}))}),vC=tj;function nj(e){return wn("MuiPaper",e)}yn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const rj=["className","component","elevation","square","variant"],ij=e=>{const{square:t,elevation:o,variant:l,classes:d}=e,p={root:["root",l,!t&&"rounded",l==="elevation"&&`elevation${o}`]};return xn(p,nj,d)},oj=dt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],!o.square&&t.rounded,o.variant==="elevation"&&t[`elevation${o.elevation}`]]}})(({theme:e,ownerState:t})=>{var o;return H({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&H({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Kn("#fff",o7(t.elevation))}, ${Kn("#fff",o7(t.elevation))})`},e.vars&&{backgroundImage:(o=e.vars.overlays)==null?void 0:o[t.elevation]}))}),sj=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiPaper"}),{className:d,component:p="div",elevation:y=1,square:a=!1,variant:w="elevation"}=l,C=Bt(l,rj),M=H({},l,{component:p,elevation:y,square:a,variant:w}),D=ij(M);return ee.jsx(oj,H({as:p,ownerState:M,className:qt(D.root,d),ref:o},C))}),Dh=sj;function aj(e){return wn("MuiPopover",e)}yn("MuiPopover",["root","paper"]);const lj=["onEntering"],cj=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"],uj=["slotProps"];function $7(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.height/2:t==="bottom"&&(o=e.height),o}function N7(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.width/2:t==="right"&&(o=e.width),o}function j7(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function kx(e){return typeof e=="function"?e():e}const dj=e=>{const{classes:t}=e;return xn({root:["root"],paper:["paper"]},aj,t)},hj=dt(vC,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),bC=dt(Dh,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),pj=W.forwardRef(function(t,o){var l,d,p;const y=mn({props:t,name:"MuiPopover"}),{action:a,anchorEl:w,anchorOrigin:C={vertical:"top",horizontal:"left"},anchorPosition:M,anchorReference:D="anchorEl",children:R,className:$,container:V,elevation:B=8,marginThreshold:J=16,open:j,PaperProps:N={},slots:G,slotProps:Y,transformOrigin:K={vertical:"top",horizontal:"left"},TransitionComponent:oe=_C,transitionDuration:ie="auto",TransitionProps:{onEntering:de}={}}=y,le=Bt(y.TransitionProps,lj),ye=Bt(y,cj),Ce=(l=Y==null?void 0:Y.paper)!=null?l:N,Fe=W.useRef(),be=zr(Fe,Ce.ref),we=H({},y,{anchorOrigin:C,anchorReference:D,elevation:B,marginThreshold:J,externalPaperSlotProps:Ce,transformOrigin:K,TransitionComponent:oe,transitionDuration:ie,TransitionProps:le}),he=dj(we),Be=W.useCallback(()=>{if(D==="anchorPosition")return M;const it=kx(w),Wt=(it&&it.nodeType===1?it:Ci(Fe.current).body).getBoundingClientRect();return{top:Wt.top+$7(Wt,C.vertical),left:Wt.left+N7(Wt,C.horizontal)}},[w,C.horizontal,C.vertical,M,D]),Ae=W.useCallback(it=>({vertical:$7(it,K.vertical),horizontal:N7(it,K.horizontal)}),[K.horizontal,K.vertical]),Se=W.useCallback(it=>{const St={width:it.offsetWidth,height:it.offsetHeight},Wt=Ae(St);if(D==="none")return{top:null,left:null,transformOrigin:j7(Wt)};const He=Be();let jt=He.top-Wt.vertical,lt=He.left-Wt.horizontal;const Ut=jt+St.height,Nt=lt+St.width,Ft=Ka(kx(w)),Lt=Ft.innerHeight-J,cn=Ft.innerWidth-J;if(jt<J){const En=jt-J;jt-=En,Wt.vertical+=En}else if(Ut>Lt){const En=Ut-Lt;jt-=En,Wt.vertical+=En}if(lt<J){const En=lt-J;lt-=En,Wt.horizontal+=En}else if(Nt>cn){const En=Nt-cn;lt-=En,Wt.horizontal+=En}return{top:`${Math.round(jt)}px`,left:`${Math.round(lt)}px`,transformOrigin:j7(Wt)}},[w,D,Be,Ae,J]),[ke,Ne]=W.useState(j),nt=W.useCallback(()=>{const it=Fe.current;if(!it)return;const St=Se(it);St.top!==null&&(it.style.top=St.top),St.left!==null&&(it.style.left=St.left),it.style.transformOrigin=St.transformOrigin,Ne(!0)},[Se]),xt=(it,St)=>{de&&de(it,St),nt()},gt=()=>{Ne(!1)};W.useEffect(()=>{j&&nt()}),W.useImperativeHandle(a,()=>j?{updatePosition:()=>{nt()}}:null,[j,nt]),W.useEffect(()=>{if(!j)return;const it=y1(()=>{nt()}),St=Ka(w);return St.addEventListener("resize",it),()=>{it.clear(),St.removeEventListener("resize",it)}},[w,j,nt]);let rt=ie;ie==="auto"&&!oe.muiSupportAuto&&(rt=void 0);const vt=V||(w?Ci(kx(w)).body:void 0),ht=(d=G==null?void 0:G.root)!=null?d:hj,mt=(p=G==null?void 0:G.paper)!=null?p:bC,Ot=Fr({elementType:mt,externalSlotProps:H({},Ce,{style:ke?Ce.style:H({},Ce.style,{opacity:0})}),additionalProps:{elevation:B,ref:be},ownerState:we,className:qt(he.paper,Ce==null?void 0:Ce.className)}),$t=Fr({elementType:ht,externalSlotProps:(Y==null?void 0:Y.root)||{},externalForwardedProps:ye,additionalProps:{ref:o,slotProps:{backdrop:{invisible:!0}},container:vt,open:j},ownerState:we,className:qt(he.root,$)}),{slotProps:at}=$t,Je=Bt($t,uj);return ee.jsx(ht,H({},Je,!xu(ht)&&{slotProps:at},{children:ee.jsx(oe,H({appear:!0,in:j,onEntering:xt,onExited:gt,timeout:rt},le,{children:ee.jsx(mt,H({},Ot,{children:R}))}))}))}),fj=pj;function mj(e){return wn("MuiMenu",e)}yn("MuiMenu",["root","paper","list"]);const gj=["onEntering"],yj=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],_j={vertical:"top",horizontal:"right"},xj={vertical:"top",horizontal:"left"},vj=e=>{const{classes:t}=e;return xn({root:["root"],paper:["paper"],list:["list"]},mj,t)},bj=dt(fj,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),wj=dt(bC,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Sj=dt(fC,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Tj=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiMenu"}),{autoFocus:d=!0,children:p,disableAutoFocusItem:y=!1,MenuListProps:a={},onClose:w,open:C,PaperProps:M={},PopoverClasses:D,transitionDuration:R="auto",TransitionProps:{onEntering:$}={},variant:V="selectedMenu"}=l,B=Bt(l.TransitionProps,gj),J=Bt(l,yj),j=ys(),N=j.direction==="rtl",G=H({},l,{autoFocus:d,disableAutoFocusItem:y,MenuListProps:a,onEntering:$,PaperProps:M,transitionDuration:R,TransitionProps:B,variant:V}),Y=vj(G),K=d&&!y&&C,oe=W.useRef(null),ie=(ye,Ce)=>{oe.current&&oe.current.adjustStyleForScrollbar(ye,j),$&&$(ye,Ce)},de=ye=>{ye.key==="Tab"&&(ye.preventDefault(),w&&w(ye,"tabKeyDown"))};let le=-1;return W.Children.map(p,(ye,Ce)=>{W.isValidElement(ye)&&(ye.props.disabled||(V==="selectedMenu"&&ye.props.selected||le===-1)&&(le=Ce))}),ee.jsx(bj,H({onClose:w,anchorOrigin:{vertical:"bottom",horizontal:N?"right":"left"},transformOrigin:N?_j:xj,slots:{paper:wj},slotProps:{paper:H({},M,{classes:H({},M.classes,{root:Y.paper})})},className:Y.root,open:C,ref:o,transitionDuration:R,TransitionProps:H({onEntering:ie},B),ownerState:G},J,{classes:D,children:ee.jsx(Sj,H({onKeyDown:de,actions:oe,autoFocus:d&&(le===-1||y),autoFocusItem:K,variant:V},a,{className:qt(Y.list,a.className),children:p}))}))}),Cj=Tj;function Ej(e){return wn("MuiNativeSelect",e)}const kj=yn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),M3=kj,Pj=["className","disabled","error","IconComponent","inputRef","variant"],Mj=e=>{const{classes:t,variant:o,disabled:l,multiple:d,open:p,error:y}=e,a={select:["select",o,l&&"disabled",d&&"multiple",y&&"error"],icon:["icon",`icon${en(o)}`,p&&"iconOpen",l&&"disabled"]};return xn(a,Ej,t)},wC=({ownerState:e,theme:t})=>H({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":H({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${M3.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),Ij=dt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ba,overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.select,t[o.variant],o.error&&t.error,{[`&.${M3.multiple}`]:t.multiple}]}})(wC),SC=({ownerState:e,theme:t})=>H({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${M3.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),Aj=dt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${en(o.variant)}`],o.open&&t.iconOpen]}})(SC),Dj=W.forwardRef(function(t,o){const{className:l,disabled:d,error:p,IconComponent:y,inputRef:a,variant:w="standard"}=t,C=Bt(t,Pj),M=H({},t,{disabled:d,variant:w,error:p}),D=Mj(M);return ee.jsxs(W.Fragment,{children:[ee.jsx(Ij,H({ownerState:M,className:qt(D.select,l),disabled:d,ref:a||o},C)),t.multiple?null:ee.jsx(Aj,{as:y,ownerState:M,className:D.icon})]})}),zj=Dj;function Rj(e){return wn("MuiSelect",e)}const Lj=yn("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Tf=Lj;var U7;const Oj=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Bj=dt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`&.${Tf.select}`]:t.select},{[`&.${Tf.select}`]:t[o.variant]},{[`&.${Tf.error}`]:t.error},{[`&.${Tf.multiple}`]:t.multiple}]}})(wC,{[`&.${Tf.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Fj=dt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.icon,o.variant&&t[`icon${en(o.variant)}`],o.open&&t.iconOpen]}})(SC),$j=dt("input",{shouldForwardProp:e=>GL(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function V7(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Nj(e){return e==null||typeof e=="string"&&!e.trim()}const jj=e=>{const{classes:t,variant:o,disabled:l,multiple:d,open:p,error:y}=e,a={select:["select",o,l&&"disabled",d&&"multiple",y&&"error"],icon:["icon",`icon${en(o)}`,p&&"iconOpen",l&&"disabled"],nativeInput:["nativeInput"]};return xn(a,Rj,t)},Uj=W.forwardRef(function(t,o){const{"aria-describedby":l,"aria-label":d,autoFocus:p,autoWidth:y,children:a,className:w,defaultOpen:C,defaultValue:M,disabled:D,displayEmpty:R,error:$=!1,IconComponent:V,inputRef:B,labelId:J,MenuProps:j={},multiple:N,name:G,onBlur:Y,onChange:K,onClose:oe,onFocus:ie,onOpen:de,open:le,readOnly:ye,renderValue:Ce,SelectDisplayProps:Fe={},tabIndex:be,value:we,variant:he="standard"}=t,Be=Bt(t,Oj),[Ae,Se]=jo({controlled:we,default:M,name:"Select"}),[ke,Ne]=jo({controlled:le,default:C,name:"Select"}),nt=W.useRef(null),xt=W.useRef(null),[gt,rt]=W.useState(null),{current:vt}=W.useRef(le!=null),[ht,mt]=W.useState(),Ot=zr(o,B),$t=W.useCallback(an=>{xt.current=an,an&&rt(an)},[]),at=gt==null?void 0:gt.parentNode;W.useImperativeHandle(Ot,()=>({focus:()=>{xt.current.focus()},node:nt.current,value:Ae}),[Ae]),W.useEffect(()=>{C&&ke&&gt&&!vt&&(mt(y?null:at.clientWidth),xt.current.focus())},[gt,y]),W.useEffect(()=>{p&&xt.current.focus()},[p]),W.useEffect(()=>{if(!J)return;const an=Ci(xt.current).getElementById(J);if(an){const In=()=>{getSelection().isCollapsed&&xt.current.focus()};return an.addEventListener("click",In),()=>{an.removeEventListener("click",In)}}},[J]);const Je=(an,In)=>{an?de&&de(In):oe&&oe(In),vt||(mt(y?null:at.clientWidth),Ne(an))},it=an=>{an.button===0&&(an.preventDefault(),xt.current.focus(),Je(!0,an))},St=an=>{Je(!1,an)},Wt=W.Children.toArray(a),He=an=>{const In=Wt.find(Gt=>Gt.props.value===an.target.value);In!==void 0&&(Se(In.props.value),K&&K(an,In))},jt=an=>In=>{let Gt;if(In.currentTarget.hasAttribute("tabindex")){if(N){Gt=Array.isArray(Ae)?Ae.slice():[];const tn=Ae.indexOf(an.props.value);tn===-1?Gt.push(an.props.value):Gt.splice(tn,1)}else Gt=an.props.value;if(an.props.onClick&&an.props.onClick(In),Ae!==Gt&&(Se(Gt),K)){const tn=In.nativeEvent||In,vn=new tn.constructor(tn.type,tn);Object.defineProperty(vn,"target",{writable:!0,value:{value:Gt,name:G}}),K(vn,an)}N||Je(!1,In)}},lt=an=>{ye||[" ","ArrowUp","ArrowDown","Enter"].indexOf(an.key)!==-1&&(an.preventDefault(),Je(!0,an))},Ut=gt!==null&&ke,Nt=an=>{!Ut&&Y&&(Object.defineProperty(an,"target",{writable:!0,value:{value:Ae,name:G}}),Y(an))};delete Be["aria-invalid"];let Ft,Lt;const cn=[];let En=!1;(N0({value:Ae})||R)&&(Ce?Ft=Ce(Ae):En=!0);const Gn=Wt.map(an=>{if(!W.isValidElement(an))return null;let In;if(N){if(!Array.isArray(Ae))throw new Error(nc(2));In=Ae.some(Gt=>V7(Gt,an.props.value)),In&&En&&cn.push(an.props.children)}else In=V7(Ae,an.props.value),In&&En&&(Lt=an.props.children);return W.cloneElement(an,{"aria-selected":In?"true":"false",onClick:jt(an),onKeyUp:Gt=>{Gt.key===" "&&Gt.preventDefault(),an.props.onKeyUp&&an.props.onKeyUp(Gt)},role:"option",selected:In,value:void 0,"data-value":an.props.value})});En&&(N?cn.length===0?Ft=null:Ft=cn.reduce((an,In,Gt)=>(an.push(In),Gt<cn.length-1&&an.push(", "),an),[]):Ft=Lt);let un=ht;!y&&vt&&gt&&(un=at.clientWidth);let Cn;typeof be<"u"?Cn=be:Cn=D?null:0;const Sn=Fe.id||(G?`mui-component-select-${G}`:void 0),on=H({},t,{variant:he,value:Ae,open:Ut,error:$}),sn=jj(on);return ee.jsxs(W.Fragment,{children:[ee.jsx(Bj,H({ref:$t,tabIndex:Cn,role:"button","aria-disabled":D?"true":void 0,"aria-expanded":Ut?"true":"false","aria-haspopup":"listbox","aria-label":d,"aria-labelledby":[J,Sn].filter(Boolean).join(" ")||void 0,"aria-describedby":l,onKeyDown:lt,onMouseDown:D||ye?null:it,onBlur:Nt,onFocus:ie},Fe,{ownerState:on,className:qt(Fe.className,sn.select,w),id:Sn,children:Nj(Ft)?U7||(U7=ee.jsx("span",{className:"notranslate",children:""})):Ft})),ee.jsx($j,H({"aria-invalid":$,value:Array.isArray(Ae)?Ae.join(","):Ae,name:G,ref:nt,"aria-hidden":!0,onChange:He,tabIndex:-1,disabled:D,className:sn.nativeInput,autoFocus:p,ownerState:on},Be)),ee.jsx(Fj,{as:V,className:sn.icon,ownerState:on}),ee.jsx(Cj,H({id:`menu-${G||""}`,anchorEl:at,open:Ut,onClose:St,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},j,{MenuListProps:H({"aria-labelledby":J,role:"listbox",disableListWrap:!0},j.MenuListProps),PaperProps:H({},j.PaperProps,{style:H({minWidth:un},j.PaperProps!=null?j.PaperProps.style:null)}),children:Gn}))]})}),Vj=Uj;function Wj(e){return wn("MuiSvgIcon",e)}yn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Gj=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Hj=e=>{const{color:t,fontSize:o,classes:l}=e,d={root:["root",t!=="inherit"&&`color${en(t)}`,`fontSize${en(o)}`]};return xn(d,Wj,l)},qj=dt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="inherit"&&t[`color${en(o.color)}`],t[`fontSize${en(o.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var o,l,d,p,y,a,w,C,M,D,R,$,V,B,J,j,N;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(o=e.transitions)==null||(l=o.create)==null?void 0:l.call(o,"fill",{duration:(d=e.transitions)==null||(p=d.duration)==null?void 0:p.shorter}),fontSize:{inherit:"inherit",small:((y=e.typography)==null||(a=y.pxToRem)==null?void 0:a.call(y,20))||"1.25rem",medium:((w=e.typography)==null||(C=w.pxToRem)==null?void 0:C.call(w,24))||"1.5rem",large:((M=e.typography)==null||(D=M.pxToRem)==null?void 0:D.call(M,35))||"2.1875rem"}[t.fontSize],color:(R=($=(e.vars||e).palette)==null||(V=$[t.color])==null?void 0:V.main)!=null?R:{action:(B=(e.vars||e).palette)==null||(J=B.action)==null?void 0:J.active,disabled:(j=(e.vars||e).palette)==null||(N=j.action)==null?void 0:N.disabled,inherit:void 0}[t.color]}}),TC=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiSvgIcon"}),{children:d,className:p,color:y="inherit",component:a="svg",fontSize:w="medium",htmlColor:C,inheritViewBox:M=!1,titleAccess:D,viewBox:R="0 0 24 24"}=l,$=Bt(l,Gj),V=W.isValidElement(d)&&d.type==="svg",B=H({},l,{color:y,component:a,fontSize:w,instanceFontSize:t.fontSize,inheritViewBox:M,viewBox:R,hasSvgAsChild:V}),J={};M||(J.viewBox=R);const j=Hj(B);return ee.jsxs(qj,H({as:a,className:qt(j.root,p),focusable:"false",color:C,"aria-hidden":D?void 0:!0,role:D?"img":void 0,ref:o},J,$,V&&d.props,{ownerState:B,children:[V?d.props.children:d,D?ee.jsx("title",{children:D}):null]}))});TC.muiName="SvgIcon";const W7=TC;function xs(e,t){function o(l,d){return ee.jsx(W7,H({"data-testid":`${t}Icon`,ref:d},l,{children:e}))}return o.muiName=W7.muiName,W.memo(W.forwardRef(o))}const CC=xs(ee.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Zj=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Xj=e=>{const{classes:t}=e;return t},I3={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>ba(e)&&e!=="variant",slot:"Root"},Yj=dt(sC,I3)(""),Kj=dt(v3,I3)(""),Jj=dt(lC,I3)(""),EC=W.forwardRef(function(t,o){const l=mn({name:"MuiSelect",props:t}),{autoWidth:d=!1,children:p,classes:y={},className:a,defaultOpen:w=!1,displayEmpty:C=!1,IconComponent:M=CC,id:D,input:R,inputProps:$,label:V,labelId:B,MenuProps:J,multiple:j=!1,native:N=!1,onClose:G,onOpen:Y,open:K,renderValue:oe,SelectDisplayProps:ie,variant:de="outlined"}=l,le=Bt(l,Zj),ye=N?zj:Vj,Ce=Tu(),Fe=Ah({props:l,muiFormControl:Ce,states:["variant","error"]}),be=Fe.variant||de,we=H({},l,{variant:be,classes:y}),he=Xj(we),Be=R||{standard:ee.jsx(Yj,{ownerState:we}),outlined:ee.jsx(Kj,{label:V,ownerState:we}),filled:ee.jsx(Jj,{ownerState:we})}[be],Ae=zr(o,Be.ref);return ee.jsx(W.Fragment,{children:W.cloneElement(Be,H({inputComponent:ye,inputProps:H({children:p,error:Fe.error,IconComponent:M,variant:be,type:void 0,multiple:j},N?{id:D}:{autoWidth:d,defaultOpen:w,displayEmpty:C,labelId:B,MenuProps:J,onClose:G,onOpen:Y,open:K,renderValue:oe,SelectDisplayProps:H({id:D},ie)},$,{classes:$?wo(he,$.classes):he},R?R.props.inputProps:{})},j&&N&&be==="outlined"?{notched:!0}:{},{ref:Ae,className:qt(Be.props.className,a)},!R&&{variant:be},le))})});EC.muiName="Select";const Qj=EC;function eU(e){return wn("MuiTextField",e)}const tU=yn("MuiTextField",["root"]),Lg=tU,nU=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],rU={standard:sC,filled:lC,outlined:v3},iU=e=>{const{classes:t}=e;return xn({root:["root"]},eU,t)},oU=dt(uC,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),sU=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiTextField"}),{autoComplete:d,autoFocus:p=!1,children:y,className:a,color:w="primary",defaultValue:C,disabled:M=!1,error:D=!1,FormHelperTextProps:R,fullWidth:$=!1,helperText:V,id:B,InputLabelProps:J,inputProps:j,InputProps:N,inputRef:G,label:Y,maxRows:K,minRows:oe,multiline:ie=!1,name:de,onBlur:le,onChange:ye,onClick:Ce,onFocus:Fe,placeholder:be,required:we=!1,rows:he,select:Be=!1,SelectProps:Ae,type:Se,value:ke,variant:Ne="outlined"}=l,nt=Bt(l,nU),xt=H({},l,{autoFocus:p,color:w,disabled:M,error:D,fullWidth:$,multiline:ie,required:we,select:Be,variant:Ne}),gt=iU(xt),rt={};Ne==="outlined"&&(J&&typeof J.shrink<"u"&&(rt.notched=J.shrink),rt.label=Y),Be&&((!Ae||!Ae.native)&&(rt.id=void 0),rt["aria-describedby"]=void 0);const vt=Su(B),ht=V&&vt?`${vt}-helper-text`:void 0,mt=Y&&vt?`${vt}-label`:void 0,Ot=rU[Ne],$t=ee.jsx(Ot,H({"aria-describedby":ht,autoComplete:d,autoFocus:p,defaultValue:C,fullWidth:$,multiline:ie,name:de,rows:he,maxRows:K,minRows:oe,type:Se,value:ke,id:vt,inputRef:G,onBlur:le,onChange:ye,onFocus:Fe,onClick:Ce,placeholder:be,inputProps:j},rt,N));return ee.jsxs(oU,H({className:qt(gt.root,a),disabled:M,error:D,fullWidth:$,ref:o,required:we,color:w,variant:Ne,ownerState:xt},nt,{children:[Y!=null&&Y!==""&&ee.jsx(lN,H({htmlFor:vt,id:mt},J,{children:Y})),Be?ee.jsx(Qj,H({"aria-describedby":ht,id:vt,labelId:mt,value:ke,input:$t},Ae,{children:y})):$t,V&&ee.jsx(vN,H({id:ht},R,{children:V}))]}))}),kC=sU,aU=e=>e.match(/^([A-Za-z]+)Range(Calendar|Clock)$/)?"multi-panel-UI-view":e.match(/^([A-Za-z]*)(DigitalClock)$/)?"Tall-UI-view":e.match(/^Static([A-Za-z]+)/)||e.match(/^([A-Za-z]+)(Calendar|Clock)$/)?"UI-view":e.match(/^MultiInput([A-Za-z]+)RangeField$/)||e.match(/^([A-Za-z]+)RangePicker$/)?"multi-input-range-field":e.match(/^SingleInput([A-Za-z]+)RangeField$/)?"single-input-range-field":"single-input-field",lU=e=>e.includes("DateTime")?"date-time":e.includes("Date")?"date":"time";function cU(e){const{children:t,components:o,sx:l}=e,d=new Set,p=new Set;o.forEach(M=>{d.add(aU(M)),p.add(lU(M))});const y=M=>M==="row"?d.has("UI-view")||d.has("Tall-UI-view")?3:2:d.has("UI-view")?4:3;let a,w,C=H({overflow:"auto",pt:1},l);return o.length>2||d.has("multi-input-range-field")||d.has("single-input-range-field")||d.has("multi-panel-UI-view")||d.has("UI-view")||p.has("date-time")?(a="column",w=y("column")):(a={xs:"column",lg:"row"},w={xs:y("column"),lg:y("row")}),d.has("UI-view")||(d.has("single-input-range-field")?p.has("date-time")?C=H({},C,{[`& > .${Lg.root}`]:{minWidth:{xs:300,md:400}}}):C=H({},C,{[`& > .${Lg.root}`]:{minWidth:300}}):p.has("date-time")?C=H({},C,{[`& > .${Lg.root}`]:{minWidth:270}}):C=H({},C,{[`& > .${Lg.root}`]:{minWidth:200}})),ee.jsx(hB,{direction:a,spacing:w,sx:C,children:t})}var PC={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Th,function(){var o=1e3,l=6e4,d=36e5,p="millisecond",y="second",a="minute",w="hour",C="day",M="week",D="month",R="quarter",$="year",V="date",B="Invalid Date",J=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,j=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(be){var we=["th","st","nd","rd"],he=be%100;return"["+be+(we[(he-20)%10]||we[he]||we[0])+"]"}},G=function(be,we,he){var Be=String(be);return!Be||Be.length>=we?be:""+Array(we+1-Be.length).join(he)+be},Y={s:G,z:function(be){var we=-be.utcOffset(),he=Math.abs(we),Be=Math.floor(he/60),Ae=he%60;return(we<=0?"+":"-")+G(Be,2,"0")+":"+G(Ae,2,"0")},m:function be(we,he){if(we.date()<he.date())return-be(he,we);var Be=12*(he.year()-we.year())+(he.month()-we.month()),Ae=we.clone().add(Be,D),Se=he-Ae<0,ke=we.clone().add(Be+(Se?-1:1),D);return+(-(Be+(he-Ae)/(Se?Ae-ke:ke-Ae))||0)},a:function(be){return be<0?Math.ceil(be)||0:Math.floor(be)},p:function(be){return{M:D,y:$,w:M,d:C,D:V,h:w,m:a,s:y,ms:p,Q:R}[be]||String(be||"").toLowerCase().replace(/s$/,"")},u:function(be){return be===void 0}},K="en",oe={};oe[K]=N;var ie=function(be){return be instanceof Ce},de=function be(we,he,Be){var Ae;if(!we)return K;if(typeof we=="string"){var Se=we.toLowerCase();oe[Se]&&(Ae=Se),he&&(oe[Se]=he,Ae=Se);var ke=we.split("-");if(!Ae&&ke.length>1)return be(ke[0])}else{var Ne=we.name;oe[Ne]=we,Ae=Ne}return!Be&&Ae&&(K=Ae),Ae||!Be&&K},le=function(be,we){if(ie(be))return be.clone();var he=typeof we=="object"?we:{};return he.date=be,he.args=arguments,new Ce(he)},ye=Y;ye.l=de,ye.i=ie,ye.w=function(be,we){return le(be,{locale:we.$L,utc:we.$u,x:we.$x,$offset:we.$offset})};var Ce=function(){function be(he){this.$L=de(he.locale,null,!0),this.parse(he)}var we=be.prototype;return we.parse=function(he){this.$d=function(Be){var Ae=Be.date,Se=Be.utc;if(Ae===null)return new Date(NaN);if(ye.u(Ae))return new Date;if(Ae instanceof Date)return new Date(Ae);if(typeof Ae=="string"&&!/Z$/i.test(Ae)){var ke=Ae.match(J);if(ke){var Ne=ke[2]-1||0,nt=(ke[7]||"0").substring(0,3);return Se?new Date(Date.UTC(ke[1],Ne,ke[3]||1,ke[4]||0,ke[5]||0,ke[6]||0,nt)):new Date(ke[1],Ne,ke[3]||1,ke[4]||0,ke[5]||0,ke[6]||0,nt)}}return new Date(Ae)}(he),this.$x=he.x||{},this.init()},we.init=function(){var he=this.$d;this.$y=he.getFullYear(),this.$M=he.getMonth(),this.$D=he.getDate(),this.$W=he.getDay(),this.$H=he.getHours(),this.$m=he.getMinutes(),this.$s=he.getSeconds(),this.$ms=he.getMilliseconds()},we.$utils=function(){return ye},we.isValid=function(){return this.$d.toString()!==B},we.isSame=function(he,Be){var Ae=le(he);return this.startOf(Be)<=Ae&&Ae<=this.endOf(Be)},we.isAfter=function(he,Be){return le(he)<this.startOf(Be)},we.isBefore=function(he,Be){return this.endOf(Be)<le(he)},we.$g=function(he,Be,Ae){return ye.u(he)?this[Be]:this.set(Ae,he)},we.unix=function(){return Math.floor(this.valueOf()/1e3)},we.valueOf=function(){return this.$d.getTime()},we.startOf=function(he,Be){var Ae=this,Se=!!ye.u(Be)||Be,ke=ye.p(he),Ne=function(Ot,$t){var at=ye.w(Ae.$u?Date.UTC(Ae.$y,$t,Ot):new Date(Ae.$y,$t,Ot),Ae);return Se?at:at.endOf(C)},nt=function(Ot,$t){return ye.w(Ae.toDate()[Ot].apply(Ae.toDate("s"),(Se?[0,0,0,0]:[23,59,59,999]).slice($t)),Ae)},xt=this.$W,gt=this.$M,rt=this.$D,vt="set"+(this.$u?"UTC":"");switch(ke){case $:return Se?Ne(1,0):Ne(31,11);case D:return Se?Ne(1,gt):Ne(0,gt+1);case M:var ht=this.$locale().weekStart||0,mt=(xt<ht?xt+7:xt)-ht;return Ne(Se?rt-mt:rt+(6-mt),gt);case C:case V:return nt(vt+"Hours",0);case w:return nt(vt+"Minutes",1);case a:return nt(vt+"Seconds",2);case y:return nt(vt+"Milliseconds",3);default:return this.clone()}},we.endOf=function(he){return this.startOf(he,!1)},we.$set=function(he,Be){var Ae,Se=ye.p(he),ke="set"+(this.$u?"UTC":""),Ne=(Ae={},Ae[C]=ke+"Date",Ae[V]=ke+"Date",Ae[D]=ke+"Month",Ae[$]=ke+"FullYear",Ae[w]=ke+"Hours",Ae[a]=ke+"Minutes",Ae[y]=ke+"Seconds",Ae[p]=ke+"Milliseconds",Ae)[Se],nt=Se===C?this.$D+(Be-this.$W):Be;if(Se===D||Se===$){var xt=this.clone().set(V,1);xt.$d[Ne](nt),xt.init(),this.$d=xt.set(V,Math.min(this.$D,xt.daysInMonth())).$d}else Ne&&this.$d[Ne](nt);return this.init(),this},we.set=function(he,Be){return this.clone().$set(he,Be)},we.get=function(he){return this[ye.p(he)]()},we.add=function(he,Be){var Ae,Se=this;he=Number(he);var ke=ye.p(Be),Ne=function(gt){var rt=le(Se);return ye.w(rt.date(rt.date()+Math.round(gt*he)),Se)};if(ke===D)return this.set(D,this.$M+he);if(ke===$)return this.set($,this.$y+he);if(ke===C)return Ne(1);if(ke===M)return Ne(7);var nt=(Ae={},Ae[a]=l,Ae[w]=d,Ae[y]=o,Ae)[ke]||1,xt=this.$d.getTime()+he*nt;return ye.w(xt,this)},we.subtract=function(he,Be){return this.add(-1*he,Be)},we.format=function(he){var Be=this,Ae=this.$locale();if(!this.isValid())return Ae.invalidDate||B;var Se=he||"YYYY-MM-DDTHH:mm:ssZ",ke=ye.z(this),Ne=this.$H,nt=this.$m,xt=this.$M,gt=Ae.weekdays,rt=Ae.months,vt=function($t,at,Je,it){return $t&&($t[at]||$t(Be,Se))||Je[at].slice(0,it)},ht=function($t){return ye.s(Ne%12||12,$t,"0")},mt=Ae.meridiem||function($t,at,Je){var it=$t<12?"AM":"PM";return Je?it.toLowerCase():it},Ot={YY:String(this.$y).slice(-2),YYYY:ye.s(this.$y,4,"0"),M:xt+1,MM:ye.s(xt+1,2,"0"),MMM:vt(Ae.monthsShort,xt,rt,3),MMMM:vt(rt,xt),D:this.$D,DD:ye.s(this.$D,2,"0"),d:String(this.$W),dd:vt(Ae.weekdaysMin,this.$W,gt,2),ddd:vt(Ae.weekdaysShort,this.$W,gt,3),dddd:gt[this.$W],H:String(Ne),HH:ye.s(Ne,2,"0"),h:ht(1),hh:ht(2),a:mt(Ne,nt,!0),A:mt(Ne,nt,!1),m:String(nt),mm:ye.s(nt,2,"0"),s:String(this.$s),ss:ye.s(this.$s,2,"0"),SSS:ye.s(this.$ms,3,"0"),Z:ke};return Se.replace(j,function($t,at){return at||Ot[$t]||ke.replace(":","")})},we.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},we.diff=function(he,Be,Ae){var Se,ke=ye.p(Be),Ne=le(he),nt=(Ne.utcOffset()-this.utcOffset())*l,xt=this-Ne,gt=ye.m(this,Ne);return gt=(Se={},Se[$]=gt/12,Se[D]=gt,Se[R]=gt/3,Se[M]=(xt-nt)/6048e5,Se[C]=(xt-nt)/864e5,Se[w]=xt/d,Se[a]=xt/l,Se[y]=xt/o,Se)[ke]||xt,Ae?gt:ye.a(gt)},we.daysInMonth=function(){return this.endOf(D).$D},we.$locale=function(){return oe[this.$L]},we.locale=function(he,Be){if(!he)return this.$L;var Ae=this.clone(),Se=de(he,Be,!0);return Se&&(Ae.$L=Se),Ae},we.clone=function(){return ye.w(this.$d,this)},we.toDate=function(){return new Date(this.valueOf())},we.toJSON=function(){return this.isValid()?this.toISOString():null},we.toISOString=function(){return this.$d.toISOString()},we.toString=function(){return this.$d.toUTCString()},be}(),Fe=Ce.prototype;return le.prototype=Fe,[["$ms",p],["$s",y],["$m",a],["$H",w],["$W",C],["$M",D],["$y",$],["$D",V]].forEach(function(be){Fe[be[1]]=function(we){return this.$g(we,be[0],be[1])}}),le.extend=function(be,we){return be.$i||(be(we,Ce,le),be.$i=!0),le},le.locale=de,le.isDayjs=ie,le.unix=function(be){return le(1e3*be)},le.en=oe[K],le.Ls=oe,le.p={},le})})(PC);var uU=PC.exports;const no=tl(uU);var MC={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Th,function(){var o="week",l="year";return function(d,p,y){var a=p.prototype;a.week=function(w){if(w===void 0&&(w=null),w!==null)return this.add(7*(w-this.week()),"day");var C=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var M=y(this).startOf(l).add(1,l).date(C),D=y(this).endOf(o);if(M.isBefore(D))return 1}var R=y(this).startOf(l).date(C).startOf(o).subtract(1,"millisecond"),$=this.diff(R,o,!0);return $<0?y(this).startOf("week").week():Math.ceil($)},a.weeks=function(w){return w===void 0&&(w=null),this.week(w)}}})})(MC);var dU=MC.exports;const hU=tl(dU);var IC={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Th,function(){var o={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},l=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,d=/\d\d/,p=/\d\d?/,y=/\d*[^-_:/,()\s\d]+/,a={},w=function(B){return(B=+B)+(B>68?1900:2e3)},C=function(B){return function(J){this[B]=+J}},M=[/[+-]\d\d:?(\d\d)?|Z/,function(B){(this.zone||(this.zone={})).offset=function(J){if(!J||J==="Z")return 0;var j=J.match(/([+-]|\d\d)/g),N=60*j[1]+(+j[2]||0);return N===0?0:j[0]==="+"?-N:N}(B)}],D=function(B){var J=a[B];return J&&(J.indexOf?J:J.s.concat(J.f))},R=function(B,J){var j,N=a.meridiem;if(N){for(var G=1;G<=24;G+=1)if(B.indexOf(N(G,0,J))>-1){j=G>12;break}}else j=B===(J?"pm":"PM");return j},$={A:[y,function(B){this.afternoon=R(B,!1)}],a:[y,function(B){this.afternoon=R(B,!0)}],S:[/\d/,function(B){this.milliseconds=100*+B}],SS:[d,function(B){this.milliseconds=10*+B}],SSS:[/\d{3}/,function(B){this.milliseconds=+B}],s:[p,C("seconds")],ss:[p,C("seconds")],m:[p,C("minutes")],mm:[p,C("minutes")],H:[p,C("hours")],h:[p,C("hours")],HH:[p,C("hours")],hh:[p,C("hours")],D:[p,C("day")],DD:[d,C("day")],Do:[y,function(B){var J=a.ordinal,j=B.match(/\d+/);if(this.day=j[0],J)for(var N=1;N<=31;N+=1)J(N).replace(/\[|\]/g,"")===B&&(this.day=N)}],M:[p,C("month")],MM:[d,C("month")],MMM:[y,function(B){var J=D("months"),j=(D("monthsShort")||J.map(function(N){return N.slice(0,3)})).indexOf(B)+1;if(j<1)throw new Error;this.month=j%12||j}],MMMM:[y,function(B){var J=D("months").indexOf(B)+1;if(J<1)throw new Error;this.month=J%12||J}],Y:[/[+-]?\d+/,C("year")],YY:[d,function(B){this.year=w(B)}],YYYY:[/\d{4}/,C("year")],Z:M,ZZ:M};function V(B){var J,j;J=B,j=a&&a.formats;for(var N=(B=J.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(le,ye,Ce){var Fe=Ce&&Ce.toUpperCase();return ye||j[Ce]||o[Ce]||j[Fe].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(be,we,he){return we||he.slice(1)})})).match(l),G=N.length,Y=0;Y<G;Y+=1){var K=N[Y],oe=$[K],ie=oe&&oe[0],de=oe&&oe[1];N[Y]=de?{regex:ie,parser:de}:K.replace(/^\[|\]$/g,"")}return function(le){for(var ye={},Ce=0,Fe=0;Ce<G;Ce+=1){var be=N[Ce];if(typeof be=="string")Fe+=be.length;else{var we=be.regex,he=be.parser,Be=le.slice(Fe),Ae=we.exec(Be)[0];he.call(ye,Ae),le=le.replace(Ae,"")}}return function(Se){var ke=Se.afternoon;if(ke!==void 0){var Ne=Se.hours;ke?Ne<12&&(Se.hours+=12):Ne===12&&(Se.hours=0),delete Se.afternoon}}(ye),ye}}return function(B,J,j){j.p.customParseFormat=!0,B&&B.parseTwoDigitYear&&(w=B.parseTwoDigitYear);var N=J.prototype,G=N.parse;N.parse=function(Y){var K=Y.date,oe=Y.utc,ie=Y.args;this.$u=oe;var de=ie[1];if(typeof de=="string"){var le=ie[2]===!0,ye=ie[3]===!0,Ce=le||ye,Fe=ie[2];ye&&(Fe=ie[2]),a=this.$locale(),!le&&Fe&&(a=j.Ls[Fe]),this.$d=function(Be,Ae,Se){try{if(["x","X"].indexOf(Ae)>-1)return new Date((Ae==="X"?1e3:1)*Be);var ke=V(Ae)(Be),Ne=ke.year,nt=ke.month,xt=ke.day,gt=ke.hours,rt=ke.minutes,vt=ke.seconds,ht=ke.milliseconds,mt=ke.zone,Ot=new Date,$t=xt||(Ne||nt?1:Ot.getDate()),at=Ne||Ot.getFullYear(),Je=0;Ne&&!nt||(Je=nt>0?nt-1:Ot.getMonth());var it=gt||0,St=rt||0,Wt=vt||0,He=ht||0;return mt?new Date(Date.UTC(at,Je,$t,it,St,Wt,He+60*mt.offset*1e3)):Se?new Date(Date.UTC(at,Je,$t,it,St,Wt,He)):new Date(at,Je,$t,it,St,Wt,He)}catch{return new Date("")}}(K,de,oe),this.init(),Fe&&Fe!==!0&&(this.$L=this.locale(Fe).$L),Ce&&K!=this.format(de)&&(this.$d=new Date("")),a={}}else if(de instanceof Array)for(var be=de.length,we=1;we<=be;we+=1){ie[1]=de[we-1];var he=j.apply(this,ie);if(he.isValid()){this.$d=he.$d,this.$L=he.$L,this.init();break}we===be&&(this.$d=new Date(""))}else G.call(this,Y)}}})})(IC);var pU=IC.exports;const fU=tl(pU);var AC={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Th,function(){var o={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(l,d,p){var y=d.prototype,a=y.format;p.en.formats=o,y.format=function(w){w===void 0&&(w="YYYY-MM-DDTHH:mm:ssZ");var C=this.$locale().formats,M=function(D,R){return D.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function($,V,B){var J=B&&B.toUpperCase();return V||R[B]||o[B]||R[J].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(j,N,G){return N||G.slice(1)})})}(w,C===void 0?{}:C);return a.call(this,M)}}})})(AC);var mU=AC.exports;const gU=tl(mU);var DC={exports:{}};(function(e,t){(function(o,l){e.exports=l()})(Th,function(){return function(o,l,d){l.prototype.isBetween=function(p,y,a,w){var C=d(p),M=d(y),D=(w=w||"()")[0]==="(",R=w[1]===")";return(D?this.isAfter(C,a):!this.isBefore(C,a))&&(R?this.isBefore(M,a):!this.isAfter(M,a))||(D?this.isBefore(C,a):!this.isAfter(C,a))&&(R?this.isAfter(M,a):!this.isBefore(M,a))}}})})(DC);var yU=DC.exports;const _U=tl(yU),zC=(e,t="warning")=>{let o=!1;const l=Array.isArray(e)?e.join(`
`):e;return()=>{o||(o=!0,t==="error"?console.error(l):console.warn(l))}};no.extend(fU);no.extend(gU);no.extend(_U);const xU=zC(["Your locale has not been found.","Either the locale key is not a supported one. Locales supported by dayjs are available here: https://github.com/iamkun/dayjs/tree/dev/src/locale","Or you forget to import the locale with `require('dayjs/locale/{localeUsed}')`","fallback on English locale"]),vU={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},bU={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",weekday:"dddd",weekdayShort:"ddd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",fullDateWithWeekday:"dddd, LL",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",monthAndYear:"MMMM YYYY",monthAndDate:"MMMM D",fullTime:"LT",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",fullDateTime:"lll",fullDateTime12h:"ll hh:mm A",fullDateTime24h:"ll HH:mm",keyboardDateTime:"L LT",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},Px=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join(`
`),G7=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join(`
`),wU=(e,t)=>t?(...o)=>e(...o).locale(t):e;class SU{constructor({locale:t,formats:o,instance:l}={}){var d;this.isMUIAdapter=!0,this.isTimezoneCompatible=!0,this.lib="dayjs",this.rawDayJsInstance=void 0,this.dayjs=void 0,this.locale=void 0,this.formats=void 0,this.escapedCharacters={start:"[",end:"]"},this.formatTokenMap=vU,this.setLocaleToValue=p=>{const y=this.getCurrentLocaleCode();return y===p.locale()?p:p.locale(y)},this.hasUTCPlugin=()=>typeof no.utc<"u",this.hasTimezonePlugin=()=>typeof no.tz<"u",this.isSame=(p,y,a)=>{const w=this.setTimezone(y,this.getTimezone(p));return p.format(a)===w.format(a)},this.cleanTimezone=p=>p==="default"?void 0:p,this.createSystemDate=p=>{if(this.rawDayJsInstance)return this.rawDayJsInstance(p);if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const y=no.tz.guess();return y!=="UTC"?no.tz(p,y):no(p)}return no(p)},this.createUTCDate=p=>{if(!this.hasUTCPlugin())throw new Error(Px);return no.utc(p)},this.createTZDate=(p,y)=>{if(!this.hasUTCPlugin())throw new Error(Px);if(!this.hasTimezonePlugin())throw new Error(G7);const a=p!==void 0&&!p.endsWith("Z");return no(p).tz(this.cleanTimezone(y),a)},this.getLocaleFormats=()=>{const p=no.Ls,y=this.locale||"en";let a=p[y];return a===void 0&&(xU(),a=p.en),a.formats},this.date=p=>p===null?null:this.dayjs(p),this.dateWithTimezone=(p,y)=>{if(p===null)return null;let a;return y==="UTC"?a=this.createUTCDate(p):y==="system"||y==="default"&&!this.hasTimezonePlugin()?a=this.createSystemDate(p):a=this.createTZDate(p,y),this.locale===void 0?a:a.locale(this.locale)},this.getTimezone=p=>{if(this.hasUTCPlugin()&&p.isUTC())return"UTC";if(this.hasTimezonePlugin()){var y;const a=(y=p.$x)==null?void 0:y.$timezone;return a??"system"}return"system"},this.setTimezone=(p,y)=>{if(this.getTimezone(p)===y)return p;if(y==="UTC"){if(!this.hasUTCPlugin())throw new Error(Px);return p.utc()}if(y==="system")return p.local();if(!this.hasTimezonePlugin()){if(y==="default")return p;throw new Error(G7)}return no.tz(p,this.cleanTimezone(y))},this.toJsDate=p=>p.toDate(),this.parseISO=p=>this.dayjs(p),this.toISO=p=>p.toISOString(),this.parse=(p,y)=>p===""?null:this.dayjs(p,y,this.locale,!0),this.getCurrentLocaleCode=()=>this.locale||"en",this.is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||""),this.expandFormat=p=>{const y=this.getLocaleFormats(),a=w=>w.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(C,M,D)=>M||D.slice(1));return p.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(w,C,M)=>{const D=M&&M.toUpperCase();return C||y[M]||a(y[D])})},this.getFormatHelperText=p=>this.expandFormat(p).replace(/a/gi,"(a|p)m").toLocaleLowerCase(),this.isNull=p=>p===null,this.isValid=p=>this.dayjs(p).isValid(),this.format=(p,y)=>this.formatByString(p,this.formats[y]),this.formatByString=(p,y)=>this.dayjs(p).format(y),this.formatNumber=p=>p,this.getDiff=(p,y,a)=>p.diff(y,a),this.isEqual=(p,y)=>p===null&&y===null?!0:this.dayjs(p).toDate().getTime()===this.dayjs(y).toDate().getTime(),this.isSameYear=(p,y)=>this.isSame(p,y,"YYYY"),this.isSameMonth=(p,y)=>this.isSame(p,y,"YYYY-MM"),this.isSameDay=(p,y)=>this.isSame(p,y,"YYYY-MM-DD"),this.isSameHour=(p,y)=>p.isSame(y,"hour"),this.isAfter=(p,y)=>p>y,this.isAfterYear=(p,y)=>this.hasUTCPlugin()?!this.isSameYear(p,y)&&p.utc()>y.utc():p.isAfter(y,"year"),this.isAfterDay=(p,y)=>this.hasUTCPlugin()?!this.isSameDay(p,y)&&p.utc()>y.utc():p.isAfter(y,"day"),this.isBefore=(p,y)=>p<y,this.isBeforeYear=(p,y)=>this.hasUTCPlugin()?!this.isSameYear(p,y)&&p.utc()<y.utc():p.isBefore(y,"year"),this.isBeforeDay=(p,y)=>this.hasUTCPlugin()?!this.isSameDay(p,y)&&p.utc()<y.utc():p.isBefore(y,"day"),this.isWithinRange=(p,[y,a])=>p>=y&&p<=a,this.startOfYear=p=>p.startOf("year"),this.startOfMonth=p=>p.startOf("month"),this.startOfWeek=p=>p.startOf("week"),this.startOfDay=p=>p.startOf("day"),this.endOfYear=p=>p.endOf("year"),this.endOfMonth=p=>p.endOf("month"),this.endOfWeek=p=>p.endOf("week"),this.endOfDay=p=>p.endOf("day"),this.addYears=(p,y)=>y<0?p.subtract(Math.abs(y),"year"):p.add(y,"year"),this.addMonths=(p,y)=>y<0?p.subtract(Math.abs(y),"month"):p.add(y,"month"),this.addWeeks=(p,y)=>y<0?p.subtract(Math.abs(y),"week"):p.add(y,"week"),this.addDays=(p,y)=>y<0?p.subtract(Math.abs(y),"day"):p.add(y,"day"),this.addHours=(p,y)=>y<0?p.subtract(Math.abs(y),"hour"):p.add(y,"hour"),this.addMinutes=(p,y)=>y<0?p.subtract(Math.abs(y),"minute"):p.add(y,"minute"),this.addSeconds=(p,y)=>y<0?p.subtract(Math.abs(y),"second"):p.add(y,"second"),this.getYear=p=>p.year(),this.getMonth=p=>p.month(),this.getDate=p=>p.date(),this.getHours=p=>p.hour(),this.getMinutes=p=>p.minute(),this.getSeconds=p=>p.second(),this.getMilliseconds=p=>p.millisecond(),this.setYear=(p,y)=>p.set("year",y),this.setMonth=(p,y)=>p.set("month",y),this.setDate=(p,y)=>p.set("date",y),this.setHours=(p,y)=>p.set("hour",y),this.setMinutes=(p,y)=>p.set("minute",y),this.setSeconds=(p,y)=>p.set("second",y),this.setMilliseconds=(p,y)=>p.set("millisecond",y),this.getDaysInMonth=p=>p.daysInMonth(),this.getNextMonth=p=>p.add(1,"month"),this.getPreviousMonth=p=>p.subtract(1,"month"),this.getMonthArray=p=>{const a=[p.startOf("year")];for(;a.length<12;){const w=a[a.length-1];a.push(this.addMonths(w,1))}return a},this.mergeDateAndTime=(p,y)=>p.hour(y.hour()).minute(y.minute()).second(y.second()),this.getWeekdays=()=>{const p=this.dayjs().startOf("week");return[0,1,2,3,4,5,6].map(y=>this.formatByString(p.add(y,"day"),"dd"))},this.getWeekArray=p=>{const y=this.getTimezone(p),a=this.setLocaleToValue(p),w=a.startOf("month").startOf("week"),C=a.endOf("month").endOf("week");let M=0,D=w;const R=[];for(;D<C;){const $=Math.floor(M/7);R[$]=R[$]||[],R[$].push(D),D=D.add(1,"day"),this.hasTimezonePlugin()&&y!=="UTC"&&y!=="system"&&(D=D.tz(this.cleanTimezone(y),!0)),M+=1}return R},this.getWeekNumber=p=>p.week(),this.getYearRange=(p,y)=>{const a=p.startOf("year"),w=y.endOf("year"),C=[];let M=a;for(;M<w;)C.push(M),M=M.add(1,"year");return C},this.getMeridiemText=p=>p==="am"?"AM":"PM",this.rawDayJsInstance=l,this.dayjs=wU((d=this.rawDayJsInstance)!=null?d:no,t),this.locale=t,this.formats=H({},bU,o),no.extend(hU)}}const TU=["localeText"],Uv=W.createContext(null),A3=function(t){var o;const{localeText:l}=t,d=Bt(t,TU),{utils:p,localeText:y}=(o=W.useContext(Uv))!=null?o:{utils:void 0,localeText:void 0},a=mn({props:d,name:"MuiLocalizationProvider"}),{children:w,dateAdapter:C,dateFormats:M,dateLibInstance:D,adapterLocale:R,localeText:$}=a,V=W.useMemo(()=>H({},$,y,l),[$,y,l]),B=W.useMemo(()=>{if(!C)return p||null;const N=new C({locale:R,formats:M,instance:D});if(!N.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return N},[C,R,M,D,p]),J=W.useMemo(()=>B?{minDate:B.date("1900-01-01T00:00:00.000"),maxDate:B.date("2099-12-31T00:00:00.000")}:null,[B]),j=W.useMemo(()=>({utils:B,defaultDates:J,localeText:V}),[J,B,V]);return ee.jsx(Uv.Provider,{value:j,children:w})};function CU(e,t,o,l,d){const[p,y]=W.useState(()=>d&&o?o(e).matches:l?l(e).matches:t);return Ei(()=>{let a=!0;if(!o)return;const w=o(e),C=()=>{a&&y(w.matches)};return C(),w.addListener(C),()=>{a=!1,w.removeListener(C)}},[e,o]),p}const RC=Qf["useSyncExternalStore"];function EU(e,t,o,l,d){const p=W.useCallback(()=>t,[t]),y=W.useMemo(()=>{if(d&&o)return()=>o(e).matches;if(l!==null){const{matches:M}=l(e);return()=>M}return p},[p,e,l,d,o]),[a,w]=W.useMemo(()=>{if(o===null)return[p,()=>()=>{}];const M=o(e);return[()=>M.matches,D=>(M.addListener(D),()=>{M.removeListener(D)})]},[p,o,e]);return RC(w,a,y)}function kU(e,t={}){const o=o3(),l=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:d=!1,matchMedia:p=l?window.matchMedia:null,ssrMatchMedia:y=null,noSsr:a=!1}=C9({name:"MuiUseMediaQuery",props:t,theme:o});let w=typeof e=="function"?e(o):e;return w=w.replace(/^@media( ?)/m,""),(RC!==void 0?EU:CU)(w,d,p,y,a)}const fa=(e,t)=>e.length!==t.length?!1:t.every(o=>e.includes(o)),PU=({openTo:e,defaultOpenTo:t,views:o,defaultViews:l})=>{const d=o??l;let p;if(e!=null)p=e;else if(d.includes(t))p=t;else if(d.length>0)p=d[0];else throw new Error("MUI: The `views` prop must contain at least one view");return{views:d,openTo:p}},Kf=({date:e,disableFuture:t,disablePast:o,maxDate:l,minDate:d,isDateDisabled:p,utils:y,timezone:a})=>{const w=y.startOfDay(y.dateWithTimezone(void 0,a));o&&y.isBefore(d,w)&&(d=w),t&&y.isAfter(l,w)&&(l=w);let C=e,M=e;for(y.isBefore(e,d)&&(C=d,M=null),y.isAfter(e,l)&&(M&&(M=l),C=null);C||M;){if(C&&y.isAfter(C,l)&&(C=null),M&&y.isBefore(M,d)&&(M=null),C){if(!p(C))return C;C=y.addDays(C,1)}if(M){if(!p(M))return M;M=y.addDays(M,-1)}}return null},MU=(e,t)=>t==null||!e.isValid(t)?null:t,gs=(e,t,o)=>t==null||!e.isValid(t)?o:t,IU=(e,t,o)=>!e.isValid(t)&&t!=null&&!e.isValid(o)&&o!=null?!0:e.isEqual(t,o),D3=(e,t)=>{const l=[e.startOfYear(t)];for(;l.length<12;){const d=l[l.length-1];l.push(e.addMonths(d,1))}return l},Vv=(e,t,o)=>{let l=t;return l=e.setHours(l,e.getHours(o)),l=e.setMinutes(l,e.getMinutes(o)),l=e.setSeconds(l,e.getSeconds(o)),l},LC=(e,t,o)=>o==="date"?e.startOfDay(e.dateWithTimezone(void 0,t)):e.dateWithTimezone(void 0,t),AU=["year","month","day"],oh=e=>AU.includes(e),H7=(e,{format:t,views:o},l)=>{if(t!=null)return t;const d=e.formats;return fa(o,["year"])?d.year:fa(o,["month"])?d.month:fa(o,["day"])?d.dayOfMonth:fa(o,["month","year"])?`${d.month} ${d.year}`:fa(o,["day","month"])?`${d.month} ${d.dayOfMonth}`:l?/en/.test(e.getCurrentLocaleCode())?d.normalDateWithWeekday:d.normalDate:d.keyboardDate},OC=["hours","minutes","seconds"],V0=e=>OC.includes(e),Mx=e=>OC.includes(e)||e==="meridiem",DU=(e,t)=>e?t.getHours(e)>=12?"pm":"am":null,C1=(e,t,o)=>o&&(e>=12?"pm":"am")!==t?t==="am"?e-12:e+12:e,zU=(e,t,o,l)=>{const d=C1(l.getHours(e),t,o);return l.setHours(e,d)},q7=(e,t)=>t.getHours(e)*3600+t.getMinutes(e)*60+t.getSeconds(e),s_=(e,t)=>(o,l)=>e?t.isAfter(o,l):q7(o,t)>q7(l,t),Z7=(e,{format:t,views:o,ampm:l})=>{if(t!=null)return t;const d=e.formats;return fa(o,["hours"])?l?`${d.hours12h} ${d.meridiem}`:d.hours24h:fa(o,["minutes"])?d.minutes:fa(o,["seconds"])?d.seconds:fa(o,["minutes","seconds"])?`${d.minutes}:${d.seconds}`:fa(o,["hours","minutes","seconds"])?l?`${d.hours12h}:${d.minutes}:${d.seconds} ${d.meridiem}`:`${d.hours24h}:${d.minutes}:${d.seconds}`:l?`${d.hours12h}:${d.minutes} ${d.meridiem}`:`${d.hours24h}:${d.minutes}`},da={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},RU=e=>Math.max(...e.map(t=>{var o;return(o=da[t.type])!=null?o:1})),Cf=(e,t,o)=>{if(t===da.year)return e.startOfYear(o);if(t===da.month)return e.startOfMonth(o);if(t===da.day)return e.startOfDay(o);let l=o;return t<da.minutes&&(l=e.setMinutes(l,0)),t<da.seconds&&(l=e.setSeconds(l,0)),t<da.milliseconds&&(l=e.setMilliseconds(l,0)),l},LU=({props:e,utils:t,granularity:o,timezone:l})=>{var d;let p=Cf(t,o,LC(t,l));e.minDate!=null&&t.isAfterDay(e.minDate,p)&&(p=Cf(t,o,e.minDate)),e.maxDate!=null&&t.isBeforeDay(e.maxDate,p)&&(p=Cf(t,o,e.maxDate));const y=s_((d=e.disableIgnoringDatePartForTimeValidation)!=null?d:!1,t);return e.minTime!=null&&y(e.minTime,p)&&(p=Cf(t,o,e.disableIgnoringDatePartForTimeValidation?e.minTime:Vv(t,p,e.minTime))),e.maxTime!=null&&y(p,e.maxTime)&&(p=Cf(t,o,e.disableIgnoringDatePartForTimeValidation?e.maxTime:Vv(t,p,e.maxTime))),p},BC=(e,t)=>{const o=e.formatTokenMap[t];if(o==null)throw new Error([`MUI: The token "${t}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof o=="string"?{type:o,contentType:o==="meridiem"?"letter":"digit",maxLength:void 0}:{type:o.sectionType,contentType:o.contentType,maxLength:o.maxLength}},OU=e=>{switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},a_=(e,t,o)=>{const l=[],d=e.dateWithTimezone(void 0,t),p=e.startOfWeek(d),y=e.endOfWeek(d);let a=p;for(;e.isBefore(a,y);)l.push(a),a=e.addDays(a,1);return l.map(w=>e.formatByString(w,o))},FC=(e,t,o,l)=>{switch(o){case"month":return D3(e,e.dateWithTimezone(void 0,t)).map(d=>e.formatByString(d,l));case"weekDay":return a_(e,t,l);case"meridiem":{const d=e.dateWithTimezone(void 0,t);return[e.startOfDay(d),e.endOfDay(d)].map(p=>e.formatByString(p,l))}default:return[]}},$C=(e,t,o)=>{let l=t;for(l=Number(l).toString();l.length<o;)l=`0${l}`;return l},z3=(e,t,o,l,d)=>{if(d.type==="day"&&d.contentType==="digit-with-letter"){const y=e.setDate(l.longestMonth,o);return e.formatByString(y,d.format)}const p=o.toString();return d.hasLeadingZerosInInput?$C(e,p,d.maxLength):p},BU=(e,t,o,l,d,p,y)=>{const a=OU(l),w=l==="Home",C=l==="End",M=o.value===""||w||C,D=()=>{const $=d[o.type]({currentDate:p,format:o.format,contentType:o.contentType}),V=N=>z3(e,t,N,$,o),B=o.type==="minutes"&&y!=null&&y.minutesStep?y.minutesStep:1;let j=parseInt(o.value,10)+a*B;if(M){if(o.type==="year"&&!C&&!w)return e.formatByString(e.dateWithTimezone(void 0,t),o.format);a>0||w?j=$.minimum:j=$.maximum}return j%B!==0&&((a<0||w)&&(j+=B-(B+j)%B),(a>0||C)&&(j-=j%B)),j>$.maximum?V($.minimum+(j-$.maximum-1)%($.maximum-$.minimum+1)):j<$.minimum?V($.maximum-($.minimum-j-1)%($.maximum-$.minimum+1)):V(j)},R=()=>{const $=FC(e,t,o.type,o.format);if($.length===0)return o.value;if(M)return a>0||w?$[0]:$[$.length-1];const B=($.indexOf(o.value)+$.length+a)%$.length;return $[B]};return o.contentType==="digit"||o.contentType==="digit-with-letter"?D():R()},R3=(e,t)=>{let o=e.value||e.placeholder;const l=t==="non-input"?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;return t==="non-input"&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(o=Number(o).toString()),["input-rtl","input-ltr"].includes(t)&&e.contentType==="digit"&&!l&&o.length===1&&(o=`${o}`),t==="input-rtl"&&(o=`${o}`),o},Xd=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),NC=(e,t)=>{let o=0,l=t?1:0;const d=[];for(let p=0;p<e.length;p+=1){const y=e[p],a=R3(y,t?"input-rtl":"input-ltr"),w=`${y.startSeparator}${a}${y.endSeparator}`,C=Xd(w).length,M=w.length,D=Xd(a),R=l+a.indexOf(D[0])+y.startSeparator.length,$=R+D.length;d.push(H({},y,{start:o,end:o+C,startInInput:R,endInInput:$})),o+=C,l+=M}return d},FU=(e,t,o,l,d)=>{switch(l.type){case"year":return o.fieldYearPlaceholder({digitAmount:e.formatByString(e.dateWithTimezone(void 0,t),d).length});case"month":return o.fieldMonthPlaceholder({contentType:l.contentType});case"day":return o.fieldDayPlaceholder();case"weekDay":return o.fieldWeekDayPlaceholder({contentType:l.contentType});case"hours":return o.fieldHoursPlaceholder();case"minutes":return o.fieldMinutesPlaceholder();case"seconds":return o.fieldSecondsPlaceholder();case"meridiem":return o.fieldMeridiemPlaceholder();default:return d}},X7=(e,t,o,l)=>e.formatByString(e.parse(t,o),l),jC=(e,t,o)=>e.formatByString(e.dateWithTimezone(void 0,t),o).length===4,UC=(e,t,o,l,d)=>{if(o!=="digit")return!1;const p=e.dateWithTimezone(void 0,t);switch(l){case"year":return jC(e,t,d)?e.formatByString(e.setYear(p,1),d)==="0001":e.formatByString(e.setYear(p,2001),d)==="01";case"month":return e.formatByString(e.startOfYear(p),d).length>1;case"day":return e.formatByString(e.startOfMonth(p),d).length>1;case"weekDay":return e.formatByString(e.startOfWeek(p),d).length>1;case"hours":return e.formatByString(e.setHours(p,1),d).length>1;case"minutes":return e.formatByString(e.setMinutes(p,1),d).length>1;case"seconds":return e.formatByString(e.setMinutes(p,1),d).length>1;default:throw new Error("Invalid section type")}},$U=(e,t)=>{const o=[],{start:l,end:d}=e.escapedCharacters,p=new RegExp(`(\\${l}[^\\${d}]*\\${d})+`,"g");let y=null;for(;y=p.exec(t);)o.push({start:y.index,end:p.lastIndex-1});return o},Y7=(e,t,o,l,d,p,y,a)=>{let w="";const C=[],M=e.date(),D=G=>{if(G==="")return null;const Y=BC(e,G),K=UC(e,t,Y.contentType,Y.type,G),oe=y?K:Y.contentType==="digit",ie=d!=null&&e.isValid(d);let de=ie?e.formatByString(d,G):"",le=null;if(oe)if(K)le=de===""?e.formatByString(M,G).length:de.length;else{if(Y.maxLength==null)throw new Error(`MUI: The token ${G} should have a 'maxDigitNumber' property on it's adapter`);le=Y.maxLength,ie&&(de=$C(e,de,le))}return C.push(H({},Y,{format:G,maxLength:le,value:de,placeholder:FU(e,t,o,Y,G),hasLeadingZeros:K,hasLeadingZerosInFormat:K,hasLeadingZerosInInput:oe,startSeparator:C.length===0?w:"",endSeparator:"",modified:!1})),null};let R=10,$=l,V=e.expandFormat(l);for(;V!==$;)if($=V,V=e.expandFormat($),R-=1,R<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const B=V,J=$U(e,B),j=new RegExp(`^(${Object.keys(e.formatTokenMap).join("|")})`);let N="";for(let G=0;G<B.length;G+=1){const Y=J.find(de=>de.start<=G&&de.end>=G),K=B[G],oe=Y!=null,ie=`${N}${B.slice(G)}`;!oe&&K.match(/([A-Za-z]+)/)&&j.test(ie)?N+=K:oe&&(Y==null?void 0:Y.start)===G||(Y==null?void 0:Y.end)===G||(D(N),N="",C.length===0?w+=K:C[C.length-1].endSeparator+=K)}return D(N),C.map(G=>{const Y=K=>{let oe=K;return a&&oe!==null&&oe.includes(" ")&&(oe=`${oe}`),p==="spacious"&&["/",".","-"].includes(oe)&&(oe=` ${oe} `),oe};return G.startSeparator=Y(G.startSeparator),G.endSeparator=Y(G.endSeparator),G})},Wv=(e,t)=>{const o=t.some(a=>a.type==="day"),l=[],d=[];for(let a=0;a<t.length;a+=1){const w=t[a];o&&w.type==="weekDay"||(l.push(w.format),d.push(R3(w,"non-input")))}const p=l.join(" "),y=d.join(" ");return e.parse(y,p)},NU=(e,t)=>{const l=e.map(d=>{const p=R3(d,t?"input-rtl":"input-ltr");return`${d.startSeparator}${p}${d.endSeparator}`}).join("");return t?`${l}`:l},jU=(e,t)=>{const o=e.dateWithTimezone(void 0,t),l=e.endOfYear(o),{maxDaysInMonth:d,longestMonth:p}=D3(e,o).reduce((y,a)=>{const w=e.getDaysInMonth(a);return w>y.maxDaysInMonth?{maxDaysInMonth:w,longestMonth:a}:y},{maxDaysInMonth:0,longestMonth:null});return{year:({format:y})=>({minimum:0,maximum:jC(e,t,y)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(l)+1}),day:({currentDate:y})=>({minimum:1,maximum:y!=null&&e.isValid(y)?e.getDaysInMonth(y):d,longestMonth:p}),weekDay:({format:y,contentType:a})=>{if(a==="digit"){const w=a_(e,t,y).map(Number);return{minimum:Math.min(...w),maximum:Math.max(...w)}}return{minimum:1,maximum:7}},hours:({format:y})=>{const a=e.getHours(l);return e.formatByString(e.endOfDay(o),y)!==a.toString()?{minimum:1,maximum:Number(e.formatByString(e.startOfDay(o),y))}:{minimum:0,maximum:a}},minutes:()=>({minimum:0,maximum:e.getMinutes(l)}),seconds:()=>({minimum:0,maximum:e.getSeconds(l)}),meridiem:()=>({minimum:0,maximum:0})}},UU=(e,t,o,l,d)=>{switch(o.type){case"year":return e.setYear(d,e.getYear(l));case"month":return e.setMonth(d,e.getMonth(l));case"weekDay":{const p=a_(e,t,o.format),y=e.formatByString(l,o.format),a=p.indexOf(y),C=p.indexOf(o.value)-a;return e.addDays(l,C)}case"day":return e.setDate(d,e.getDate(l));case"meridiem":{const p=e.getHours(l)<12,y=e.getHours(d);return p&&y>=12?e.addHours(d,-12):!p&&y<12?e.addHours(d,12):d}case"hours":return e.setHours(d,e.getHours(l));case"minutes":return e.setMinutes(d,e.getMinutes(l));case"seconds":return e.setSeconds(d,e.getSeconds(l));default:return d}},K7={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},J7=(e,t,o,l,d,p)=>[...l].sort((y,a)=>K7[y.type]-K7[a.type]).reduce((y,a)=>!p||a.modified?UU(e,t,a,o,y):y,d),VU=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,WU=(e,t,o,l)=>{if(!(o.every(a=>a.type==="weekDay"||a.value!=="")&&o.some(a=>a.type==="day")))return null;const p=o.map(a=>{if(a.type!=="day")return a;const w=l.day({currentDate:null,format:a.format,contentType:a.contentType});return H({},a,{value:z3(e,t,w.minimum,w,a)})}),y=Wv(e,p);return y==null||!e.isValid(y)?null:o.map(a=>{if(a.type!=="day")return a;const w=l.day({currentDate:y,format:a.format,contentType:a.contentType});return Number(a.value)<=w.maximum?a:H({},a,{value:w.maximum.toString()})})},GU=(e,t)=>{const o={};if(!t)return e.forEach((w,C)=>{const M=C===0?null:C-1,D=C===e.length-1?null:C+1;o[C]={leftIndex:M,rightIndex:D}}),{neighbors:o,startIndex:0,endIndex:e.length-1};const l={},d={};let p=0,y=0,a=e.length-1;for(;a>=0;){y=e.findIndex((w,C)=>{var M;return C>=p&&((M=w.endSeparator)==null?void 0:M.includes(" "))&&w.endSeparator!==" / "}),y===-1&&(y=e.length-1);for(let w=y;w>=p;w-=1)d[w]=a,l[a]=w,a-=1;p=y+1}return e.forEach((w,C)=>{const M=d[C],D=M===0?null:l[M-1],R=M===e.length-1?null:l[M+1];o[C]={leftIndex:D,rightIndex:R}}),{neighbors:o,startIndex:l[0],endIndex:l[e.length-1]}},HU=["value","referenceDate"],qs={emptyValue:null,getTodayValue:LC,getInitialReferenceValue:e=>{let{value:t,referenceDate:o}=e,l=Bt(e,HU);return t!=null&&l.utils.isValid(t)?t:o??LU(l)},cleanValue:MU,areValuesEqual:IU,isSameError:(e,t)=>e===t,hasError:e=>e!=null,defaultErrorState:null,getTimezone:(e,t)=>t==null?null:e.getTimezone(t),setTimezone:(e,t,o)=>o==null?null:e.setTimezone(o,t)},qU={updateReferenceValue:(e,t,o)=>t==null||!e.isValid(t)?o:t,getSectionsFromValue:(e,t,o,l,d)=>!e.isValid(t)&&!!o?o:NC(d(t),l),getValueStrFromSections:NU,getActiveDateManager:(e,t)=>({date:t.value,referenceDate:t.referenceValue,getSections:o=>o,getNewValuesFromNewActiveDate:o=>({value:o,referenceValue:o==null||!e.isValid(o)?t.referenceValue:o})}),parseValueStr:(e,t,o)=>o(e.trim(),t)},ZU=e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:H({},e)}}}}),VC={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:e=>e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,t,o)=>`Select ${e}. ${t===null?"No time selected":`Selected time is ${o.format(t,"fullTime")}`}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,t)=>e!==null&&t.isValid(e)?`Choose date, selected date is ${t.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,t)=>e!==null&&t.isValid(e)?`Choose time, selected time is ${t.format(e,"fullTime")}`:"Choose time",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>e.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>e.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},XU=VC;ZU(VC);const Cu=()=>{const e=W.useContext(Uv);if(e===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(e.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const t=W.useMemo(()=>H({},XU,e.localeText),[e.localeText]);return W.useMemo(()=>H({},e,{localeText:t}),[e,t])},Er=()=>Cu().utils,U1=()=>Cu().defaultDates,Zs=()=>Cu().localeText,Eu=e=>{const t=Er(),o=W.useRef();return o.current===void 0&&(o.current=t.dateWithTimezone(void 0,e)),o.current};function WC(e,t,o,l){const{value:d,onError:p}=e,y=Cu(),a=W.useRef(l),w=t({adapter:y,value:d,props:e});return W.useEffect(()=>{p&&!o(w,a.current)&&p(w,d),a.current=w},[o,p,a,w,d]),w}const L3=({timezone:e,value:t,defaultValue:o,onChange:l,valueManager:d})=>{var p,y;const a=Er(),w=W.useRef(o),C=(p=t??w.current)!=null?p:d.emptyValue,M=W.useMemo(()=>d.getTimezone(a,C),[a,d,C]),D=fn(B=>M==null?B:d.setTimezone(a,M,B)),R=(y=e??M)!=null?y:"default",$=W.useMemo(()=>d.setTimezone(a,R,C),[d,a,R,C]),V=fn((B,...J)=>{const j=D(B);l==null||l(j,...J)});return{value:$,handleValueChange:V,timezone:R}},V1=({name:e,timezone:t,value:o,defaultValue:l,onChange:d,valueManager:p})=>{const[y,a]=jo({name:e,state:"value",controlled:o,default:l??p.emptyValue}),w=fn((C,...M)=>{a(C),d==null||d(C,...M)});return L3({timezone:t,value:y,defaultValue:void 0,onChange:w,valueManager:p})},YU=e=>{const t=Er(),o=Zs(),l=Cu(),p=ys().direction==="rtl",{valueManager:y,fieldValueManager:a,valueType:w,validator:C,internalProps:M,internalProps:{value:D,defaultValue:R,referenceDate:$,onChange:V,format:B,formatDensity:J="dense",selectedSections:j,onSelectedSectionsChange:N,shouldRespectLeadingZeros:G=!1,timezone:Y}}=e,{timezone:K,value:oe,handleValueChange:ie}=L3({timezone:Y,value:D,defaultValue:R,onChange:V,valueManager:y}),de=W.useMemo(()=>jU(t,K),[t,K]),le=W.useCallback((rt,vt=null)=>a.getSectionsFromValue(t,rt,vt,p,ht=>Y7(t,K,o,B,ht,J,G,p)),[a,B,o,p,G,t,J,K]),ye=W.useMemo(()=>a.getValueStrFromSections(le(y.emptyValue),p),[a,le,y.emptyValue,p]),[Ce,Fe]=W.useState(()=>{const rt=le(oe),vt={sections:rt,value:oe,referenceValue:y.emptyValue,tempValueStrAndroid:null},ht=RU(rt),mt=y.getInitialReferenceValue({referenceDate:$,value:oe,utils:t,props:M,granularity:ht,timezone:K});return H({},vt,{referenceValue:mt})}),[be,we]=jo({controlled:j,default:null,name:"useField",state:"selectedSectionIndexes"}),he=rt=>{we(rt),N==null||N(rt),Fe(vt=>H({},vt,{selectedSectionQuery:null}))},Be=W.useMemo(()=>{if(be==null)return null;if(be==="all")return{startIndex:0,endIndex:Ce.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof be=="number")return{startIndex:be,endIndex:be};if(typeof be=="string"){const rt=Ce.sections.findIndex(vt=>vt.type===be);return{startIndex:rt,endIndex:rt}}return be},[be,Ce.sections]),Ae=({value:rt,referenceValue:vt,sections:ht})=>{Fe(Ot=>H({},Ot,{sections:ht,value:rt,referenceValue:vt,tempValueStrAndroid:null}));const mt={validationError:C({adapter:l,value:rt,props:H({},M,{value:rt,timezone:K})})};ie(rt,mt)},Se=(rt,vt)=>{const ht=[...Ce.sections];return ht[rt]=H({},ht[rt],{value:vt,modified:!0}),NC(ht,p)},ke=()=>{y.areValuesEqual(t,Ce.value,y.emptyValue)||Ae({value:y.emptyValue,referenceValue:Ce.referenceValue,sections:le(y.emptyValue)})},Ne=()=>{if(Be==null)return;const rt=Ce.sections[Be.startIndex];if(rt.value==="")return;const vt=a.getActiveDateManager(t,Ce,rt),mt=vt.getSections(Ce.sections).filter(Je=>Je.value!=="").length===1,Ot=Se(Be.startIndex,""),$t=mt?null:t.date(new Date("")),at=vt.getNewValuesFromNewActiveDate($t);($t!=null&&!t.isValid($t))!=(vt.date!=null&&!t.isValid(vt.date))?Ae(H({},at,{sections:Ot})):Fe(Je=>H({},Je,at,{sections:Ot,tempValueStrAndroid:null}))},nt=rt=>{const vt=(Ot,$t)=>{const at=t.parse(Ot,B);if(at==null||!t.isValid(at))return null;const Je=Y7(t,K,o,B,at,J,G,p);return J7(t,K,at,Je,$t,!1)},ht=a.parseValueStr(rt,Ce.referenceValue,vt),mt=a.updateReferenceValue(t,ht,Ce.referenceValue);Ae({value:ht,referenceValue:mt,sections:le(ht,Ce.sections)})},xt=({activeSection:rt,newSectionValue:vt,shouldGoToNextSection:ht})=>{ht&&Be&&Be.startIndex<Ce.sections.length-1?he(Be.startIndex+1):Be&&Be.startIndex!==Be.endIndex&&he(Be.startIndex);const mt=a.getActiveDateManager(t,Ce,rt),Ot=Se(Be.startIndex,vt),$t=mt.getSections(Ot);let at=Wv(t,$t),Je=!1;if(!t.isValid(at)){const He=WU(t,K,$t,de);He!=null&&(Je=!0,at=Wv(t,He))}let it,St;if(at!=null&&t.isValid(at)){const He=J7(t,K,at,$t,mt.referenceDate,!0);it=mt.getNewValuesFromNewActiveDate(He),St=!0}else it=mt.getNewValuesFromNewActiveDate(at),St=(at!=null&&!t.isValid(at))!=(mt.date!=null&&!t.isValid(mt.date));const Wt=Je?le(it.value,Ce.sections):Ot;return St?Ae(H({},it,{sections:Wt})):Fe(He=>H({},He,it,{sections:Wt,tempValueStrAndroid:null}))},gt=rt=>Fe(vt=>H({},vt,{tempValueStrAndroid:rt}));return W.useEffect(()=>{let rt=!1;y.areValuesEqual(t,Ce.value,oe)?rt=y.getTimezone(t,Ce.value)!==y.getTimezone(t,oe):rt=!0,rt&&Fe(vt=>H({},vt,{value:oe,referenceValue:a.updateReferenceValue(t,oe,vt.referenceValue),sections:le(oe)}))},[oe]),W.useEffect(()=>{const rt=le(Ce.value);Fe(vt=>H({},vt,{sections:rt}))},[B,t.locale]),{state:Ce,selectedSectionIndexes:Be,setSelectedSections:he,clearValue:ke,clearActiveSection:Ne,updateSectionValue:xt,updateValueFromValueStr:nt,setTempAndroidValueStr:gt,sectionsValueBoundaries:de,placeholder:ye,timezone:K}},KU=5e3,zd=e=>e.saveQuery!=null,JU=({sections:e,updateSectionValue:t,sectionsValueBoundaries:o,setTempAndroidValueStr:l,timezone:d})=>{const p=Er(),[y,a]=W.useState(null),w=fn(()=>a(null));W.useEffect(()=>{var $;y!=null&&(($=e[y.sectionIndex])==null?void 0:$.type)!==y.sectionType&&w()},[e,y,w]),W.useEffect(()=>{if(y!=null){const $=setTimeout(()=>w(),KU);return()=>{window.clearTimeout($)}}return()=>{}},[y,w]);const C=({keyPressed:$,sectionIndex:V},B,J)=>{const j=$.toLowerCase(),N=e[V];if(y!=null&&(!J||J(y.value))&&y.sectionIndex===V){const Y=`${y.value}${j}`,K=B(Y,N);if(!zd(K))return a({sectionIndex:V,value:Y,sectionType:N.type}),K}const G=B(j,N);return zd(G)&&!G.saveQuery?(w(),null):(a({sectionIndex:V,value:j,sectionType:N.type}),zd(G)?null:G)},M=$=>{const V=(j,N,G)=>{const Y=N.filter(K=>K.toLowerCase().startsWith(G));return Y.length===0?{saveQuery:!1}:{sectionValue:Y[0],shouldGoToNextSection:Y.length===1}},B=(j,N,G,Y)=>{const K=oe=>FC(p,d,N.type,oe);if(N.contentType==="letter")return V(N.format,K(N.format),j);if(G&&Y!=null&&BC(p,G).contentType==="letter"){const oe=K(G),ie=V(G,oe,j);return zd(ie)?{saveQuery:!1}:H({},ie,{sectionValue:Y(ie.sectionValue,oe)})}return{saveQuery:!1}};return C($,(j,N)=>{switch(N.type){case"month":{const G=Y=>X7(p,Y,p.formats.month,N.format);return B(j,N,p.formats.month,G)}case"weekDay":{const G=(Y,K)=>K.indexOf(Y).toString();return B(j,N,p.formats.weekday,G)}case"meridiem":return B(j,N);default:return{saveQuery:!1}}})},D=$=>{const V=(J,j)=>{const N=+`${J}`,G=o[j.type]({currentDate:null,format:j.format,contentType:j.contentType});if(N>G.maximum)return{saveQuery:!1};if(N<G.minimum)return{saveQuery:!0};const Y=+`${J}0`>G.maximum||J.length===G.maximum.toString().length;return{sectionValue:z3(p,d,N,G,j),shouldGoToNextSection:Y}};return C($,(J,j)=>{if(j.contentType==="digit"||j.contentType==="digit-with-letter")return V(J,j);if(j.type==="month"){const N=UC(p,d,"digit","month","MM"),G=V(J,{type:j.type,format:"MM",hasLeadingZerosInFormat:N,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(zd(G))return G;const Y=X7(p,G.sectionValue,"MM",j.format);return H({},G,{sectionValue:Y})}if(j.type==="weekDay"){const N=V(J,j);if(zd(N))return N;const G=a_(p,d,j.format)[Number(N.sectionValue)-1];return H({},N,{sectionValue:G})}return{saveQuery:!1}},J=>!Number.isNaN(Number(J)))};return{applyCharacterEditing:fn($=>{const V=e[$.sectionIndex],J=!Number.isNaN(Number($.keyPressed))?D($):M($);J==null?l(null):t({activeSection:V,newSectionValue:J.sectionValue,shouldGoToNextSection:J.shouldGoToNextSection})}),resetCharacterQuery:w}};function QU(e,t){return Array.isArray(t)?t.every(o=>e.indexOf(o)!==-1):e.indexOf(t)!==-1}const eV=(e,t)=>o=>{(o.key==="Enter"||o.key===" ")&&(e(o),o.preventDefault(),o.stopPropagation()),t&&t(o)},W0=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?W0(t.shadowRoot):t:null},tV="@media (pointer: fine)",nV=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error"],rV=e=>{const t=Er(),{state:o,selectedSectionIndexes:l,setSelectedSections:d,clearValue:p,clearActiveSection:y,updateSectionValue:a,updateValueFromValueStr:w,setTempAndroidValueStr:C,sectionsValueBoundaries:M,placeholder:D,timezone:R}=YU(e),{inputRef:$,internalProps:V,internalProps:{readOnly:B=!1,unstableFieldRef:J,minutesStep:j},forwardedProps:{onClick:N,onKeyDown:G,onFocus:Y,onBlur:K,onMouseUp:oe,onPaste:ie,error:de},fieldValueManager:le,valueManager:ye,validator:Ce}=e,Fe=Bt(e.forwardedProps,nV),{applyCharacterEditing:be,resetCharacterQuery:we}=JU({sections:o.sections,updateSectionValue:a,sectionsValueBoundaries:M,setTempAndroidValueStr:C,timezone:R}),he=W.useRef(null),Be=zr($,he),Ae=W.useRef(void 0),ke=ys().direction==="rtl",Ne=W.useMemo(()=>GU(o.sections,ke),[o.sections,ke]),nt=()=>{var He;if(B){d(null);return}const jt=(He=he.current.selectionStart)!=null?He:0;let lt;jt<=o.sections[0].startInInput||jt>=o.sections[o.sections.length-1].endInInput?lt=1:lt=o.sections.findIndex(Nt=>Nt.startInInput-Nt.startSeparator.length>jt);const Ut=lt===-1?o.sections.length-1:lt-1;d(Ut)},xt=fn((...He)=>{N==null||N(...He),nt()}),gt=fn(He=>{oe==null||oe(He),He.preventDefault()}),rt=fn((...He)=>{Y==null||Y(...He);const jt=he.current;window.clearTimeout(Ae.current),Ae.current=setTimeout(()=>{!jt||jt!==he.current||l!=null||B||(jt.value.length&&Number(jt.selectionEnd)-Number(jt.selectionStart)===jt.value.length?d("all"):nt())})}),vt=fn((...He)=>{K==null||K(...He),d(null)}),ht=fn(He=>{if(ie==null||ie(He),B){He.preventDefault();return}const jt=He.clipboardData.getData("text");if(l&&l.startIndex===l.endIndex){const lt=o.sections[l.startIndex],Ut=/^[a-zA-Z]+$/.test(jt),Nt=/^[0-9]+$/.test(jt),Ft=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(jt);if(lt.contentType==="letter"&&Ut||lt.contentType==="digit"&&Nt||lt.contentType==="digit-with-letter"&&Ft)return;if(Ut||Nt){He.preventDefault();return}}He.preventDefault(),we(),w(jt)}),mt=fn(He=>{if(B)return;const jt=He.target.value,lt=Xd(jt);if(l==null){w(lt);return}let Ut;if(l.startIndex===0&&l.endIndex===o.sections.length-1&&lt.length===1)Ut=lt;else{const Nt=Xd(le.getValueStrFromSections(o.sections,ke));let Ft=-1,Lt=-1;for(let un=0;un<Nt.length;un+=1)Ft===-1&&Nt[un]!==lt[un]&&(Ft=un),Lt===-1&&Nt[Nt.length-un-1]!==lt[lt.length-un-1]&&(Lt=un);const cn=o.sections[l.startIndex];if(Ft<cn.start||Nt.length-Lt-1>cn.end)return;const Gn=lt.length-Nt.length+cn.end-Xd(cn.endSeparator||"").length;Ut=lt.slice(cn.start+Xd(cn.startSeparator||"").length,Gn)}if(VU()&&Ut.length===0){C(jt);return}be({keyPressed:Ut,sectionIndex:l.startIndex})}),Ot=fn(He=>{switch(G==null||G(He),!0){case(He.key==="a"&&(He.ctrlKey||He.metaKey)):{He.preventDefault(),d("all");break}case He.key==="ArrowRight":{if(He.preventDefault(),l==null)d(Ne.startIndex);else if(l.startIndex!==l.endIndex)d(l.endIndex);else{const jt=Ne.neighbors[l.startIndex].rightIndex;jt!==null&&d(jt)}break}case He.key==="ArrowLeft":{if(He.preventDefault(),l==null)d(Ne.endIndex);else if(l.startIndex!==l.endIndex)d(l.startIndex);else{const jt=Ne.neighbors[l.startIndex].leftIndex;jt!==null&&d(jt)}break}case["Backspace","Delete"].includes(He.key):{if(He.preventDefault(),B)break;l==null||l.startIndex===0&&l.endIndex===o.sections.length-1?p():y(),we();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(He.key):{if(He.preventDefault(),B||l==null)break;const jt=o.sections[l.startIndex],lt=le.getActiveDateManager(t,o,jt),Ut=BU(t,R,jt,He.key,M,lt.date,{minutesStep:j});a({activeSection:jt,newSectionValue:Ut,shouldGoToNextSection:!1});break}}});Ei(()=>{if(!he.current)return;if(l==null){he.current.scrollLeft&&(he.current.scrollLeft=0);return}const He=o.sections[l.startIndex],jt=o.sections[l.endIndex];let lt=He.startInInput,Ut=jt.endInInput;if(l.shouldSelectBoundarySelectors&&(lt-=He.startSeparator.length,Ut+=jt.endSeparator.length),lt!==he.current.selectionStart||Ut!==he.current.selectionEnd){const Nt=he.current.scrollTop;he.current===W0(document)&&he.current.setSelectionRange(lt,Ut),he.current.scrollTop=Nt}});const $t=WC(H({},V,{value:o.value,timezone:R}),Ce,ye.isSameError,ye.defaultErrorState),at=W.useMemo(()=>de!==void 0?de:ye.hasError($t),[ye,$t,de]);W.useEffect(()=>{!at&&!l&&we()},[o.referenceValue,l,at]),W.useEffect(()=>(he.current&&he.current===document.activeElement&&d("all"),()=>window.clearTimeout(Ae.current)),[]),W.useEffect(()=>{o.tempValueStrAndroid!=null&&l!=null&&(we(),y())},[o.tempValueStrAndroid]);const Je=W.useMemo(()=>{var He;return(He=o.tempValueStrAndroid)!=null?He:le.getValueStrFromSections(o.sections,ke)},[o.sections,le,o.tempValueStrAndroid,ke]),it=W.useMemo(()=>l==null||o.sections[l.startIndex].contentType==="letter"?"text":"tel",[l,o.sections]),Wt=!(he.current&&he.current===W0(document))&&ye.areValuesEqual(t,o.value,ye.emptyValue);return W.useImperativeHandle(J,()=>({getSections:()=>o.sections,getActiveSectionIndex:()=>{var He,jt;const lt=(He=he.current.selectionStart)!=null?He:0,Ut=(jt=he.current.selectionEnd)!=null?jt:0;if(lt===0&&Ut===0)return null;const Nt=lt<=o.sections[0].startInInput?1:o.sections.findIndex(Ft=>Ft.startInInput-Ft.startSeparator.length>lt);return Nt===-1?o.sections.length-1:Nt-1},setSelectedSections:He=>d(He)})),H({placeholder:D,autoComplete:"off"},Fe,{value:Wt?"":Je,inputMode:it,readOnly:B,onClick:xt,onFocus:rt,onBlur:vt,onPaste:ht,onChange:mt,onKeyDown:Ot,onMouseUp:gt,error:at,ref:Be})},GC=({props:e,value:t,adapter:o})=>{if(t===null)return null;const{shouldDisableDate:l,shouldDisableMonth:d,shouldDisableYear:p,disablePast:y,disableFuture:a,timezone:w}=e,C=o.utils.dateWithTimezone(void 0,w),M=gs(o.utils,e.minDate,o.defaultDates.minDate),D=gs(o.utils,e.maxDate,o.defaultDates.maxDate);switch(!0){case!o.utils.isValid(t):return"invalidDate";case!!(l&&l(t)):return"shouldDisableDate";case!!(d&&d(t)):return"shouldDisableMonth";case!!(p&&p(t)):return"shouldDisableYear";case!!(a&&o.utils.isAfterDay(t,C)):return"disableFuture";case!!(y&&o.utils.isBeforeDay(t,C)):return"disablePast";case!!(M&&o.utils.isBeforeDay(t,M)):return"minDate";case!!(D&&o.utils.isAfterDay(t,D)):return"maxDate";default:return null}},iV=({adapter:e,value:t,props:o})=>{if(t===null)return null;const{minTime:l,maxTime:d,minutesStep:p,shouldDisableClock:y,shouldDisableTime:a,disableIgnoringDatePartForTimeValidation:w=!1,disablePast:C,disableFuture:M,timezone:D}=o,R=e.utils.dateWithTimezone(void 0,D),$=s_(w,e.utils);switch(!0){case!e.utils.isValid(t):return"invalidDate";case!!(l&&$(l,t)):return"minTime";case!!(d&&$(t,d)):return"maxTime";case!!(M&&e.utils.isAfter(t,R)):return"disableFuture";case!!(C&&e.utils.isBefore(t,R)):return"disablePast";case!!(a&&a(t,"hours")):return"shouldDisableTime-hours";case!!(a&&a(t,"minutes")):return"shouldDisableTime-minutes";case!!(a&&a(t,"seconds")):return"shouldDisableTime-seconds";case!!(y&&y(e.utils.getHours(t),"hours")):return"shouldDisableClock-hours";case!!(y&&y(e.utils.getMinutes(t),"minutes")):return"shouldDisableClock-minutes";case!!(y&&y(e.utils.getSeconds(t),"seconds")):return"shouldDisableClock-seconds";case!!(p&&e.utils.getMinutes(t)%p!==0):return"minutesStep";default:return null}},O3=({props:e,value:t,adapter:o})=>{const l=GC({adapter:o,value:t,props:e});return l!==null?l:iV({adapter:o,value:t,props:e})},Gv=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],Hv=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],HC=["minDateTime","maxDateTime"],oV=[...Gv,...Hv,...HC],qC=e=>oV.reduce((t,o)=>(e.hasOwnProperty(o)&&(t[o]=e[o]),t),{}),sV=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],aV=(e,t)=>{const o=H({},e),l={},d=p=>{o.hasOwnProperty(p)&&(l[p]=o[p],delete o[p])};return sV.forEach(d),t==="date"?Gv.forEach(d):t==="time"?Hv.forEach(d):t==="date-time"&&(Gv.forEach(d),Hv.forEach(d),HC.forEach(d)),{forwardedProps:o,internalProps:l}},lV=e=>{var t,o,l,d,p,y,a,w;const C=Er(),M=U1(),R=((t=e.ampm)!=null?t:C.is12HourCycleInCurrentLocale())?C.formats.keyboardDateTime12h:C.formats.keyboardDateTime24h;return H({},e,{disablePast:(o=e.disablePast)!=null?o:!1,disableFuture:(l=e.disableFuture)!=null?l:!1,format:(d=e.format)!=null?d:R,disableIgnoringDatePartForTimeValidation:!!(e.minDateTime||e.maxDateTime),minDate:gs(C,(p=e.minDateTime)!=null?p:e.minDate,M.minDate),maxDate:gs(C,(y=e.maxDateTime)!=null?y:e.maxDate,M.maxDate),minTime:(a=e.minDateTime)!=null?a:e.minTime,maxTime:(w=e.maxDateTime)!=null?w:e.maxTime})},cV=({props:e,inputRef:t})=>{const o=lV(e),{forwardedProps:l,internalProps:d}=aV(o,"date-time");return rV({inputRef:t,forwardedProps:l,internalProps:d,valueManager:qs,fieldValueManager:qU,validator:O3,valueType:"date-time"})},uV=["components","componentsProps","slots","slotProps","InputProps","inputProps"],dV=["inputRef"],hV=["ref","onPaste","inputMode","readOnly"],ZC=W.forwardRef(function(t,o){var l,d,p;const y=mn({props:t,name:"MuiDateTimeField"}),{components:a,componentsProps:w,slots:C,slotProps:M,InputProps:D,inputProps:R}=y,$=Bt(y,uV),V=y,B=(l=(d=C==null?void 0:C.textField)!=null?d:a==null?void 0:a.TextField)!=null?l:kC,J=Fr({elementType:B,externalSlotProps:(p=M==null?void 0:M.textField)!=null?p:w==null?void 0:w.textField,externalForwardedProps:$,ownerState:V}),{inputRef:j}=J,N=Bt(J,dV);N.inputProps=H({},N.inputProps,R),N.InputProps=H({},N.InputProps,D);const G=cV({props:N,inputRef:j}),{ref:Y,onPaste:K,inputMode:oe,readOnly:ie}=G,de=Bt(G,hV);return ee.jsx(B,H({ref:o},de,{InputProps:H({},de.InputProps,{readOnly:ie}),inputProps:H({},de.inputProps,{inputMode:oe,onPaste:K,ref:Y})}))});function pV(e){const{className:t,classes:o,pulsate:l=!1,rippleX:d,rippleY:p,rippleSize:y,in:a,onExited:w,timeout:C}=e,[M,D]=W.useState(!1),R=qt(t,o.ripple,o.rippleVisible,l&&o.ripplePulsate),$={width:y,height:y,top:-(y/2)+p,left:-(y/2)+d},V=qt(o.child,M&&o.childLeaving,l&&o.childPulsate);return!a&&!M&&D(!0),W.useEffect(()=>{if(!a&&w!=null){const B=setTimeout(w,C);return()=>{clearTimeout(B)}}},[w,a,C]),ee.jsx("span",{className:R,style:$,children:ee.jsx("span",{className:V})})}const fV=yn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),os=fV,mV=["center","classes","className"];let l_=e=>e,Q7,eS,tS,nS;const qv=550,gV=80,yV=Qb(Q7||(Q7=l_`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),_V=Qb(eS||(eS=l_`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),xV=Qb(tS||(tS=l_`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),vV=dt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),bV=dt(pV,{name:"MuiTouchRipple",slot:"Ripple"})(nS||(nS=l_`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),os.rippleVisible,yV,qv,({theme:e})=>e.transitions.easing.easeInOut,os.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,os.child,os.childLeaving,_V,qv,({theme:e})=>e.transitions.easing.easeInOut,os.childPulsate,xV,({theme:e})=>e.transitions.easing.easeInOut),wV=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiTouchRipple"}),{center:d=!1,classes:p={},className:y}=l,a=Bt(l,mV),[w,C]=W.useState([]),M=W.useRef(0),D=W.useRef(null);W.useEffect(()=>{D.current&&(D.current(),D.current=null)},[w]);const R=W.useRef(!1),$=W.useRef(0),V=W.useRef(null),B=W.useRef(null);W.useEffect(()=>()=>{$.current&&clearTimeout($.current)},[]);const J=W.useCallback(Y=>{const{pulsate:K,rippleX:oe,rippleY:ie,rippleSize:de,cb:le}=Y;C(ye=>[...ye,ee.jsx(bV,{classes:{ripple:qt(p.ripple,os.ripple),rippleVisible:qt(p.rippleVisible,os.rippleVisible),ripplePulsate:qt(p.ripplePulsate,os.ripplePulsate),child:qt(p.child,os.child),childLeaving:qt(p.childLeaving,os.childLeaving),childPulsate:qt(p.childPulsate,os.childPulsate)},timeout:qv,pulsate:K,rippleX:oe,rippleY:ie,rippleSize:de},M.current)]),M.current+=1,D.current=le},[p]),j=W.useCallback((Y={},K={},oe=()=>{})=>{const{pulsate:ie=!1,center:de=d||K.pulsate,fakeElement:le=!1}=K;if((Y==null?void 0:Y.type)==="mousedown"&&R.current){R.current=!1;return}(Y==null?void 0:Y.type)==="touchstart"&&(R.current=!0);const ye=le?null:B.current,Ce=ye?ye.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Fe,be,we;if(de||Y===void 0||Y.clientX===0&&Y.clientY===0||!Y.clientX&&!Y.touches)Fe=Math.round(Ce.width/2),be=Math.round(Ce.height/2);else{const{clientX:he,clientY:Be}=Y.touches&&Y.touches.length>0?Y.touches[0]:Y;Fe=Math.round(he-Ce.left),be=Math.round(Be-Ce.top)}if(de)we=Math.sqrt((2*Ce.width**2+Ce.height**2)/3),we%2===0&&(we+=1);else{const he=Math.max(Math.abs((ye?ye.clientWidth:0)-Fe),Fe)*2+2,Be=Math.max(Math.abs((ye?ye.clientHeight:0)-be),be)*2+2;we=Math.sqrt(he**2+Be**2)}Y!=null&&Y.touches?V.current===null&&(V.current=()=>{J({pulsate:ie,rippleX:Fe,rippleY:be,rippleSize:we,cb:oe})},$.current=setTimeout(()=>{V.current&&(V.current(),V.current=null)},gV)):J({pulsate:ie,rippleX:Fe,rippleY:be,rippleSize:we,cb:oe})},[d,J]),N=W.useCallback(()=>{j({},{pulsate:!0})},[j]),G=W.useCallback((Y,K)=>{if(clearTimeout($.current),(Y==null?void 0:Y.type)==="touchend"&&V.current){V.current(),V.current=null,$.current=setTimeout(()=>{G(Y,K)});return}V.current=null,C(oe=>oe.length>0?oe.slice(1):oe),D.current=K},[]);return W.useImperativeHandle(o,()=>({pulsate:N,start:j,stop:G}),[N,j,G]),ee.jsx(vV,H({className:qt(os.root,p.root,y),ref:B},a,{children:ee.jsx(P3,{component:null,exit:!0,children:w})}))}),SV=wV;function TV(e){return wn("MuiButtonBase",e)}const CV=yn("MuiButtonBase",["root","disabled","focusVisible"]),EV=CV,kV=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],PV=e=>{const{disabled:t,focusVisible:o,focusVisibleClassName:l,classes:d}=e,y=xn({root:["root",t&&"disabled",o&&"focusVisible"]},TV,d);return o&&l&&(y.root+=` ${l}`),y},MV=dt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${EV.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),IV=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiButtonBase"}),{action:d,centerRipple:p=!1,children:y,className:a,component:w="button",disabled:C=!1,disableRipple:M=!1,disableTouchRipple:D=!1,focusRipple:R=!1,LinkComponent:$="a",onBlur:V,onClick:B,onContextMenu:J,onDragLeave:j,onFocus:N,onFocusVisible:G,onKeyDown:Y,onKeyUp:K,onMouseDown:oe,onMouseLeave:ie,onMouseUp:de,onTouchEnd:le,onTouchMove:ye,onTouchStart:Ce,tabIndex:Fe=0,TouchRippleProps:be,touchRippleRef:we,type:he}=l,Be=Bt(l,kV),Ae=W.useRef(null),Se=W.useRef(null),ke=zr(Se,we),{isFocusVisibleRef:Ne,onFocus:nt,onBlur:xt,ref:gt}=AD(),[rt,vt]=W.useState(!1);C&&rt&&vt(!1),W.useImperativeHandle(d,()=>({focusVisible:()=>{vt(!0),Ae.current.focus()}}),[]);const[ht,mt]=W.useState(!1);W.useEffect(()=>{mt(!0)},[]);const Ot=ht&&!M&&!C;W.useEffect(()=>{rt&&R&&!M&&ht&&Se.current.pulsate()},[M,R,rt,ht]);function $t(sn,an,In=D){return fn(Gt=>(an&&an(Gt),!In&&Se.current&&Se.current[sn](Gt),!0))}const at=$t("start",oe),Je=$t("stop",J),it=$t("stop",j),St=$t("stop",de),Wt=$t("stop",sn=>{rt&&sn.preventDefault(),ie&&ie(sn)}),He=$t("start",Ce),jt=$t("stop",le),lt=$t("stop",ye),Ut=$t("stop",sn=>{xt(sn),Ne.current===!1&&vt(!1),V&&V(sn)},!1),Nt=fn(sn=>{Ae.current||(Ae.current=sn.currentTarget),nt(sn),Ne.current===!0&&(vt(!0),G&&G(sn)),N&&N(sn)}),Ft=()=>{const sn=Ae.current;return w&&w!=="button"&&!(sn.tagName==="A"&&sn.href)},Lt=W.useRef(!1),cn=fn(sn=>{R&&!Lt.current&&rt&&Se.current&&sn.key===" "&&(Lt.current=!0,Se.current.stop(sn,()=>{Se.current.start(sn)})),sn.target===sn.currentTarget&&Ft()&&sn.key===" "&&sn.preventDefault(),Y&&Y(sn),sn.target===sn.currentTarget&&Ft()&&sn.key==="Enter"&&!C&&(sn.preventDefault(),B&&B(sn))}),En=fn(sn=>{R&&sn.key===" "&&Se.current&&rt&&!sn.defaultPrevented&&(Lt.current=!1,Se.current.stop(sn,()=>{Se.current.pulsate(sn)})),K&&K(sn),B&&sn.target===sn.currentTarget&&Ft()&&sn.key===" "&&!sn.defaultPrevented&&B(sn)});let Gn=w;Gn==="button"&&(Be.href||Be.to)&&(Gn=$);const un={};Gn==="button"?(un.type=he===void 0?"button":he,un.disabled=C):(!Be.href&&!Be.to&&(un.role="button"),C&&(un["aria-disabled"]=C));const Cn=zr(o,gt,Ae),Sn=H({},l,{centerRipple:p,component:w,disabled:C,disableRipple:M,disableTouchRipple:D,focusRipple:R,tabIndex:Fe,focusVisible:rt}),on=PV(Sn);return ee.jsxs(MV,H({as:Gn,className:qt(on.root,a),ownerState:Sn,onBlur:Ut,onClick:B,onContextMenu:Je,onFocus:Nt,onKeyDown:cn,onKeyUp:En,onMouseDown:at,onMouseLeave:Wt,onMouseUp:St,onDragLeave:it,onTouchEnd:jt,onTouchMove:lt,onTouchStart:He,ref:Cn,tabIndex:C?-1:Fe,type:he},un,Be,{children:[y,Ot?ee.jsx(SV,H({ref:ke,center:p},be)):null]}))}),el=IV;function AV(e){return wn("MuiTab",e)}const DV=yn("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Zc=DV,zV=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],RV=e=>{const{classes:t,textColor:o,fullWidth:l,wrapped:d,icon:p,label:y,selected:a,disabled:w}=e,C={root:["root",p&&y&&"labelIcon",`textColor${en(o)}`,l&&"fullWidth",d&&"wrapped",a&&"selected",w&&"disabled"],iconWrapper:["iconWrapper"]};return xn(C,AV,t)},LV=dt(el,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.label&&o.icon&&t.labelIcon,t[`textColor${en(o.textColor)}`],o.fullWidth&&t.fullWidth,o.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>H({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Zc.iconWrapper}`]:H({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${Zc.selected}`]:{opacity:1},[`&.${Zc.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${Zc.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${Zc.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${Zc.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${Zc.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),OV=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiTab"}),{className:d,disabled:p=!1,disableFocusRipple:y=!1,fullWidth:a,icon:w,iconPosition:C="top",indicator:M,label:D,onChange:R,onClick:$,onFocus:V,selected:B,selectionFollowsFocus:J,textColor:j="inherit",value:N,wrapped:G=!1}=l,Y=Bt(l,zV),K=H({},l,{disabled:p,disableFocusRipple:y,selected:B,icon:!!w,iconPosition:C,label:!!D,fullWidth:a,textColor:j,wrapped:G}),oe=RV(K),ie=w&&D&&W.isValidElement(w)?W.cloneElement(w,{className:qt(oe.iconWrapper,w.props.className)}):w,de=ye=>{!B&&R&&R(ye,N),$&&$(ye)},le=ye=>{J&&!B&&R&&R(ye,N),V&&V(ye)};return ee.jsxs(LV,H({focusRipple:!y,className:qt(oe.root,d),ref:o,role:"tab","aria-selected":B,disabled:p,onClick:de,onFocus:le,ownerState:K,tabIndex:B?0:-1},Y,{children:[C==="top"||C==="start"?ee.jsxs(W.Fragment,{children:[ie,D]}):ee.jsxs(W.Fragment,{children:[D,ie]}),M]}))}),rS=OV;function BV(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function FV(e,t,o,l={},d=()=>{}){const{ease:p=BV,duration:y=300}=l;let a=null;const w=t[e];let C=!1;const M=()=>{C=!0},D=R=>{if(C){d(new Error("Animation cancelled"));return}a===null&&(a=R);const $=Math.min(1,(R-a)/y);if(t[e]=p($)*(o-w)+w,$>=1){requestAnimationFrame(()=>{d(null)});return}requestAnimationFrame(D)};return w===o?(d(new Error("Element already at target position")),M):(requestAnimationFrame(D),M)}const $V=["onChange"],NV={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function jV(e){const{onChange:t}=e,o=Bt(e,$V),l=W.useRef(),d=W.useRef(null),p=()=>{l.current=d.current.offsetHeight-d.current.clientHeight};return Ei(()=>{const y=y1(()=>{const w=l.current;p(),w!==l.current&&t(l.current)}),a=Ka(d.current);return a.addEventListener("resize",y),()=>{y.clear(),a.removeEventListener("resize",y)}},[t]),W.useEffect(()=>{p(),t(l.current)},[t]),ee.jsx("div",H({style:NV,ref:d},o))}const UV=xs(ee.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),VV=xs(ee.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function WV(e){return wn("MuiTabScrollButton",e)}const GV=yn("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),HV=GV,qV=["className","slots","slotProps","direction","orientation","disabled"],ZV=e=>{const{classes:t,orientation:o,disabled:l}=e;return xn({root:["root",o,l&&"disabled"]},WV,t)},XV=dt(el,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.orientation&&t[o.orientation]]}})(({ownerState:e})=>H({width:40,flexShrink:0,opacity:.8,[`&.${HV.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),YV=W.forwardRef(function(t,o){var l,d;const p=mn({props:t,name:"MuiTabScrollButton"}),{className:y,slots:a={},slotProps:w={},direction:C}=p,M=Bt(p,qV),R=ys().direction==="rtl",$=H({isRtl:R},p),V=ZV($),B=(l=a.StartScrollButtonIcon)!=null?l:UV,J=(d=a.EndScrollButtonIcon)!=null?d:VV,j=Fr({elementType:B,externalSlotProps:w.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:$}),N=Fr({elementType:J,externalSlotProps:w.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:$});return ee.jsx(XV,H({component:"div",className:qt(V.root,y),ref:o,role:null,ownerState:$,tabIndex:null},M,{children:C==="left"?ee.jsx(B,H({},j)):ee.jsx(J,H({},N))}))}),KV=YV;function JV(e){return wn("MuiTabs",e)}const QV=yn("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),l0=QV,eW=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],iS=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,oS=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Og=(e,t,o)=>{let l=!1,d=o(e,t);for(;d;){if(d===e.firstChild){if(l)return;l=!0}const p=d.disabled||d.getAttribute("aria-disabled")==="true";if(!d.hasAttribute("tabindex")||p)d=o(e,d);else{d.focus();return}}},tW=e=>{const{vertical:t,fixed:o,hideScrollbar:l,scrollableX:d,scrollableY:p,centered:y,scrollButtonsHideMobile:a,classes:w}=e;return xn({root:["root",t&&"vertical"],scroller:["scroller",o&&"fixed",l&&"hideScrollbar",d&&"scrollableX",p&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",y&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[d&&"scrollableX"],hideScrollbar:[l&&"hideScrollbar"]},JV,w)},nW=dt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${l0.scrollButtons}`]:t.scrollButtons},{[`& .${l0.scrollButtons}`]:o.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,o.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>H({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${l0.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),rW=dt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.scroller,o.fixed&&t.fixed,o.hideScrollbar&&t.hideScrollbar,o.scrollableX&&t.scrollableX,o.scrollableY&&t.scrollableY]}})(({ownerState:e})=>H({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),iW=dt("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.flexContainer,o.vertical&&t.flexContainerVertical,o.centered&&t.centered]}})(({ownerState:e})=>H({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),oW=dt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>H({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),sW=dt(jV,{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),sS={},aW=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiTabs"}),d=ys(),p=d.direction==="rtl",{"aria-label":y,"aria-labelledby":a,action:w,centered:C=!1,children:M,className:D,component:R="div",allowScrollButtonsMobile:$=!1,indicatorColor:V="primary",onChange:B,orientation:J="horizontal",ScrollButtonComponent:j=KV,scrollButtons:N="auto",selectionFollowsFocus:G,slots:Y={},slotProps:K={},TabIndicatorProps:oe={},TabScrollButtonProps:ie={},textColor:de="primary",value:le,variant:ye="standard",visibleScrollbar:Ce=!1}=l,Fe=Bt(l,eW),be=ye==="scrollable",we=J==="vertical",he=we?"scrollTop":"scrollLeft",Be=we?"top":"left",Ae=we?"bottom":"right",Se=we?"clientHeight":"clientWidth",ke=we?"height":"width",Ne=H({},l,{component:R,allowScrollButtonsMobile:$,indicatorColor:V,orientation:J,vertical:we,scrollButtons:N,textColor:de,variant:ye,visibleScrollbar:Ce,fixed:!be,hideScrollbar:be&&!Ce,scrollableX:be&&!we,scrollableY:be&&we,centered:C&&!be,scrollButtonsHideMobile:!$}),nt=tW(Ne),xt=Fr({elementType:Y.StartScrollButtonIcon,externalSlotProps:K.startScrollButtonIcon,ownerState:Ne}),gt=Fr({elementType:Y.EndScrollButtonIcon,externalSlotProps:K.endScrollButtonIcon,ownerState:Ne}),[rt,vt]=W.useState(!1),[ht,mt]=W.useState(sS),[Ot,$t]=W.useState({start:!1,end:!1}),[at,Je]=W.useState({overflow:"hidden",scrollbarWidth:0}),it=new Map,St=W.useRef(null),Wt=W.useRef(null),He=()=>{const Gt=St.current;let tn;if(Gt){const Fn=Gt.getBoundingClientRect();tn={clientWidth:Gt.clientWidth,scrollLeft:Gt.scrollLeft,scrollTop:Gt.scrollTop,scrollLeftNormalized:$6(Gt,d.direction),scrollWidth:Gt.scrollWidth,top:Fn.top,bottom:Fn.bottom,left:Fn.left,right:Fn.right}}let vn;if(Gt&&le!==!1){const Fn=Wt.current.children;if(Fn.length>0){const qn=Fn[it.get(le)];vn=qn?qn.getBoundingClientRect():null}}return{tabsMeta:tn,tabMeta:vn}},jt=fn(()=>{const{tabsMeta:Gt,tabMeta:tn}=He();let vn=0,Fn;if(we)Fn="top",tn&&Gt&&(vn=tn.top-Gt.top+Gt.scrollTop);else if(Fn=p?"right":"left",tn&&Gt){const Ir=p?Gt.scrollLeftNormalized+Gt.clientWidth-Gt.scrollWidth:Gt.scrollLeft;vn=(p?-1:1)*(tn[Fn]-Gt[Fn]+Ir)}const qn={[Fn]:vn,[ke]:tn?tn[ke]:0};if(isNaN(ht[Fn])||isNaN(ht[ke]))mt(qn);else{const Ir=Math.abs(ht[Fn]-qn[Fn]),$r=Math.abs(ht[ke]-qn[ke]);(Ir>=1||$r>=1)&&mt(qn)}}),lt=(Gt,{animation:tn=!0}={})=>{tn?FV(he,St.current,Gt,{duration:d.transitions.duration.standard}):St.current[he]=Gt},Ut=Gt=>{let tn=St.current[he];we?tn+=Gt:(tn+=Gt*(p?-1:1),tn*=p&&K8()==="reverse"?-1:1),lt(tn)},Nt=()=>{const Gt=St.current[Se];let tn=0;const vn=Array.from(Wt.current.children);for(let Fn=0;Fn<vn.length;Fn+=1){const qn=vn[Fn];if(tn+qn[Se]>Gt){Fn===0&&(tn=Gt);break}tn+=qn[Se]}return tn},Ft=()=>{Ut(-1*Nt())},Lt=()=>{Ut(Nt())},cn=W.useCallback(Gt=>{Je({overflow:null,scrollbarWidth:Gt})},[]),En=()=>{const Gt={};Gt.scrollbarSizeListener=be?ee.jsx(sW,{onChange:cn,className:qt(nt.scrollableX,nt.hideScrollbar)}):null;const tn=Ot.start||Ot.end,vn=be&&(N==="auto"&&tn||N===!0);return Gt.scrollButtonStart=vn?ee.jsx(j,H({slots:{StartScrollButtonIcon:Y.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:xt},orientation:J,direction:p?"right":"left",onClick:Ft,disabled:!Ot.start},ie,{className:qt(nt.scrollButtons,ie.className)})):null,Gt.scrollButtonEnd=vn?ee.jsx(j,H({slots:{EndScrollButtonIcon:Y.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:gt},orientation:J,direction:p?"left":"right",onClick:Lt,disabled:!Ot.end},ie,{className:qt(nt.scrollButtons,ie.className)})):null,Gt},Gn=fn(Gt=>{const{tabsMeta:tn,tabMeta:vn}=He();if(!(!vn||!tn)){if(vn[Be]<tn[Be]){const Fn=tn[he]+(vn[Be]-tn[Be]);lt(Fn,{animation:Gt})}else if(vn[Ae]>tn[Ae]){const Fn=tn[he]+(vn[Ae]-tn[Ae]);lt(Fn,{animation:Gt})}}}),un=fn(()=>{if(be&&N!==!1){const{scrollTop:Gt,scrollHeight:tn,clientHeight:vn,scrollWidth:Fn,clientWidth:qn}=St.current;let Ir,$r;if(we)Ir=Gt>1,$r=Gt<tn-vn-1;else{const ge=$6(St.current,d.direction);Ir=p?ge<Fn-qn-1:ge>1,$r=p?ge>1:ge<Fn-qn-1}(Ir!==Ot.start||$r!==Ot.end)&&$t({start:Ir,end:$r})}});W.useEffect(()=>{const Gt=y1(()=>{St.current&&(jt(),un())}),tn=Ka(St.current);tn.addEventListener("resize",Gt);let vn;return typeof ResizeObserver<"u"&&(vn=new ResizeObserver(Gt),Array.from(Wt.current.children).forEach(Fn=>{vn.observe(Fn)})),()=>{Gt.clear(),tn.removeEventListener("resize",Gt),vn&&vn.disconnect()}},[jt,un]);const Cn=W.useMemo(()=>y1(()=>{un()}),[un]);W.useEffect(()=>()=>{Cn.clear()},[Cn]),W.useEffect(()=>{vt(!0)},[]),W.useEffect(()=>{jt(),un()}),W.useEffect(()=>{Gn(sS!==ht)},[Gn,ht]),W.useImperativeHandle(w,()=>({updateIndicator:jt,updateScrollButtons:un}),[jt,un]);const Sn=ee.jsx(oW,H({},oe,{className:qt(nt.indicator,oe.className),ownerState:Ne,style:H({},ht,oe.style)}));let on=0;const sn=W.Children.map(M,Gt=>{if(!W.isValidElement(Gt))return null;const tn=Gt.props.value===void 0?on:Gt.props.value;it.set(tn,on);const vn=tn===le;return on+=1,W.cloneElement(Gt,H({fullWidth:ye==="fullWidth",indicator:vn&&!rt&&Sn,selected:vn,selectionFollowsFocus:G,onChange:B,textColor:de,value:tn},on===1&&le===!1&&!Gt.props.tabIndex?{tabIndex:0}:{}))}),an=Gt=>{const tn=Wt.current,vn=Ci(tn).activeElement;if(vn.getAttribute("role")!=="tab")return;let qn=J==="horizontal"?"ArrowLeft":"ArrowUp",Ir=J==="horizontal"?"ArrowRight":"ArrowDown";switch(J==="horizontal"&&p&&(qn="ArrowRight",Ir="ArrowLeft"),Gt.key){case qn:Gt.preventDefault(),Og(tn,vn,oS);break;case Ir:Gt.preventDefault(),Og(tn,vn,iS);break;case"Home":Gt.preventDefault(),Og(tn,null,iS);break;case"End":Gt.preventDefault(),Og(tn,null,oS);break}},In=En();return ee.jsxs(nW,H({className:qt(nt.root,D),ownerState:Ne,ref:o,as:R},Fe,{children:[In.scrollButtonStart,In.scrollbarSizeListener,ee.jsxs(rW,{className:nt.scroller,ownerState:Ne,style:{overflow:at.overflow,[we?`margin${p?"Left":"Right"}`:"marginBottom"]:Ce?void 0:-at.scrollbarWidth},ref:St,onScroll:Cn,children:[ee.jsx(iW,{"aria-label":y,"aria-labelledby":a,"aria-orientation":J==="vertical"?"vertical":null,className:nt.flexContainer,ownerState:Ne,onKeyDown:an,ref:Wt,role:"tablist",children:sn}),rt&&Sn]}),In.scrollButtonEnd]}))}),lW=aW,cW=xs(ee.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),uW=xs(ee.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),dW=xs(ee.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),hW=xs(ee.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");xs(ee.jsxs(W.Fragment,{children:[ee.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),ee.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");const pW=xs(ee.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),fW=xs(ee.jsxs(W.Fragment,{children:[ee.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),ee.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");function mW(e){return wn("MuiDateTimePickerTabs",e)}yn("MuiDateTimePickerTabs",["root"]);const gW=e=>oh(e)?"date":"time",yW=e=>e==="date"?"day":"hours",_W=e=>{const{classes:t}=e;return xn({root:["root"]},mW,t)},xW=dt(lW,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({boxShadow:`0 -1px 0 0 inset ${(e.vars||e).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(e.vars||e).palette.divider}`,[`& .${l0.indicator}`]:{bottom:"auto",top:0}}})),vW=function(t){const o=mn({props:t,name:"MuiDateTimePickerTabs"}),{dateIcon:l=ee.jsx(pW,{}),onViewChange:d,timeIcon:p=ee.jsx(fW,{}),view:y,hidden:a=typeof window>"u"||window.innerHeight<667}=o,w=Zs(),C=_W(o),M=(D,R)=>{d(yW(R))};return a?null:ee.jsxs(xW,{ownerState:o,variant:"fullWidth",value:gW(y),onChange:M,className:C.root,children:[ee.jsx(rS,{value:"date","aria-label":w.dateTableLabel,icon:ee.jsx(W.Fragment,{children:l})}),ee.jsx(rS,{value:"time","aria-label":w.timeTableLabel,icon:ee.jsx(W.Fragment,{children:p})})]})};function bW(e){return wn("MuiPickersToolbarText",e)}const aS=yn("MuiPickersToolbarText",["root","selected"]),wW=["className","selected","value"],SW=e=>{const{classes:t,selected:o}=e;return xn({root:["root",o&&"selected"]},bW,t)},TW=dt(Qa,{name:"MuiPickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${aS.selected}`]:t.selected}]})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,[`&.${aS.selected}`]:{color:(e.vars||e).palette.text.primary}})),XC=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiPickersToolbarText"}),{className:d,value:p}=l,y=Bt(l,wW),a=SW(l);return ee.jsx(TW,H({ref:o,className:qt(d,a.root),component:"span"},y,{children:p}))}),CW=W.createContext(),lS=CW;function EW(e){return wn("MuiGrid",e)}const kW=[0,1,2,3,4,5,6,7,8,9,10],PW=["column-reverse","column","row-reverse","row"],MW=["nowrap","wrap-reverse","wrap"],Ef=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],IW=yn("MuiGrid",["root","container","item","zeroMinWidth",...kW.map(e=>`spacing-xs-${e}`),...PW.map(e=>`direction-xs-${e}`),...MW.map(e=>`wrap-xs-${e}`),...Ef.map(e=>`grid-xs-${e}`),...Ef.map(e=>`grid-sm-${e}`),...Ef.map(e=>`grid-md-${e}`),...Ef.map(e=>`grid-lg-${e}`),...Ef.map(e=>`grid-xl-${e}`)]),E1=IW,AW=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function sh(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function DW({theme:e,ownerState:t}){let o;return e.breakpoints.keys.reduce((l,d)=>{let p={};if(t[d]&&(o=t[d]),!o)return l;if(o===!0)p={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(o==="auto")p={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const y=lu({values:t.columns,breakpoints:e.breakpoints.values}),a=typeof y=="object"?y[d]:y;if(a==null)return l;const w=`${Math.round(o/a*1e8)/1e6}%`;let C={};if(t.container&&t.item&&t.columnSpacing!==0){const M=e.spacing(t.columnSpacing);if(M!=="0px"){const D=`calc(${w} + ${sh(M)})`;C={flexBasis:D,maxWidth:D}}}p=H({flexBasis:w,flexGrow:0,maxWidth:w},C)}return e.breakpoints.values[d]===0?Object.assign(l,p):l[e.breakpoints.up(d)]=p,l},{})}function zW({theme:e,ownerState:t}){const o=lu({values:t.direction,breakpoints:e.breakpoints.values});return ko({theme:e},o,l=>{const d={flexDirection:l};return l.indexOf("column")===0&&(d[`& > .${E1.item}`]={maxWidth:"none"}),d})}function YC({breakpoints:e,values:t}){let o="";Object.keys(t).forEach(d=>{o===""&&t[d]!==0&&(o=d)});const l=Object.keys(e).sort((d,p)=>e[d]-e[p]);return l.slice(0,l.indexOf(o))}function RW({theme:e,ownerState:t}){const{container:o,rowSpacing:l}=t;let d={};if(o&&l!==0){const p=lu({values:l,breakpoints:e.breakpoints.values});let y;typeof p=="object"&&(y=YC({breakpoints:e.breakpoints.values,values:p})),d=ko({theme:e},p,(a,w)=>{var C;const M=e.spacing(a);return M!=="0px"?{marginTop:`-${sh(M)}`,[`& > .${E1.item}`]:{paddingTop:sh(M)}}:(C=y)!=null&&C.includes(w)?{}:{marginTop:0,[`& > .${E1.item}`]:{paddingTop:0}}})}return d}function LW({theme:e,ownerState:t}){const{container:o,columnSpacing:l}=t;let d={};if(o&&l!==0){const p=lu({values:l,breakpoints:e.breakpoints.values});let y;typeof p=="object"&&(y=YC({breakpoints:e.breakpoints.values,values:p})),d=ko({theme:e},p,(a,w)=>{var C;const M=e.spacing(a);return M!=="0px"?{width:`calc(100% + ${sh(M)})`,marginLeft:`-${sh(M)}`,[`& > .${E1.item}`]:{paddingLeft:sh(M)}}:(C=y)!=null&&C.includes(w)?{}:{width:"100%",marginLeft:0,[`& > .${E1.item}`]:{paddingLeft:0}}})}return d}function OW(e,t,o={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[o[`spacing-xs-${String(e)}`]];const l=[];return t.forEach(d=>{const p=e[d];Number(p)>0&&l.push(o[`spacing-${d}-${String(p)}`])}),l}const BW=dt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e,{container:l,direction:d,item:p,spacing:y,wrap:a,zeroMinWidth:w,breakpoints:C}=o;let M=[];l&&(M=OW(y,C,t));const D=[];return C.forEach(R=>{const $=o[R];$&&D.push(t[`grid-${R}-${String($)}`])}),[t.root,l&&t.container,p&&t.item,w&&t.zeroMinWidth,...M,d!=="row"&&t[`direction-xs-${String(d)}`],a!=="wrap"&&t[`wrap-xs-${String(a)}`],...D]}})(({ownerState:e})=>H({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),zW,RW,LW,DW);function FW(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const o=[];return t.forEach(l=>{const d=e[l];if(Number(d)>0){const p=`spacing-${l}-${String(d)}`;o.push(p)}}),o}const $W=e=>{const{classes:t,container:o,direction:l,item:d,spacing:p,wrap:y,zeroMinWidth:a,breakpoints:w}=e;let C=[];o&&(C=FW(p,w));const M=[];w.forEach(R=>{const $=e[R];$&&M.push(`grid-${R}-${String($)}`)});const D={root:["root",o&&"container",d&&"item",a&&"zeroMinWidth",...C,l!=="row"&&`direction-xs-${String(l)}`,y!=="wrap"&&`wrap-xs-${String(y)}`,...M]};return xn(D,EW,t)},NW=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiGrid"}),{breakpoints:d}=ys(),p=Ry(l),{className:y,columns:a,columnSpacing:w,component:C="div",container:M=!1,direction:D="row",item:R=!1,rowSpacing:$,spacing:V=0,wrap:B="wrap",zeroMinWidth:J=!1}=p,j=Bt(p,AW),N=$||V,G=w||V,Y=W.useContext(lS),K=M?a||12:Y,oe={},ie=H({},j);d.keys.forEach(ye=>{j[ye]!=null&&(oe[ye]=j[ye],delete ie[ye])});const de=H({},p,{columns:K,container:M,direction:D,item:R,rowSpacing:N,columnSpacing:G,wrap:B,zeroMinWidth:J,spacing:V},oe,{breakpoints:d.keys}),le=$W(de);return ee.jsx(lS.Provider,{value:K,children:ee.jsx(BW,H({ownerState:de,className:qt(le.root,y),as:C,ref:o},ie))})}),jW=NW;function KC(e){return wn("MuiPickersToolbar",e)}const UW=yn("MuiPickersToolbar",["root","content","penIconButton","penIconButtonLandscape"]),VW=e=>{const{classes:t,isLandscape:o}=e;return xn({root:["root"],content:["content"],penIconButton:["penIconButton",o&&"penIconButtonLandscape"]},KC,t)},WW=dt("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>H({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3)},t.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})),GW=dt(jW,{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})(({ownerState:e})=>H({flex:1},!e.isLandscape&&{alignItems:"center"})),HW=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiPickersToolbar"}),{children:d,className:p,isLandscape:y,landscapeDirection:a="column",toolbarTitle:w,hidden:C,titleId:M}=l,D=l,R=VW(D);return C?null:ee.jsxs(WW,{ref:o,className:qt(R.root,p),ownerState:D,children:[ee.jsx(Qa,{color:"text.secondary",variant:"overline",id:M,children:w}),ee.jsx(GW,{container:!0,justifyContent:y?"flex-start":"space-between",className:R.content,ownerState:D,direction:y?a:"row",alignItems:y?"flex-start":"flex-end",children:d})]})});function qW(e){return wn("MuiButton",e)}const ZW=yn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Bg=ZW,XW=W.createContext({}),YW=XW,KW=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],JW=e=>{const{color:t,disableElevation:o,fullWidth:l,size:d,variant:p,classes:y}=e,a={root:["root",p,`${p}${en(t)}`,`size${en(d)}`,`${p}Size${en(d)}`,t==="inherit"&&"colorInherit",o&&"disableElevation",l&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${en(d)}`],endIcon:["endIcon",`iconSize${en(d)}`]},w=xn(a,qW,y);return H({},y,w)},JC=e=>H({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),QW=dt(el,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`${o.variant}${en(o.color)}`],t[`size${en(o.size)}`],t[`${o.variant}Size${en(o.size)}`],o.color==="inherit"&&t.colorInherit,o.disableElevation&&t.disableElevation,o.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var o,l;const d=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],p=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return H({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":H({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:p,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":H({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${Bg.focusVisible}`]:H({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${Bg.disabled}`]:H({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${Kn(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(o=(l=e.palette).getContrastText)==null?void 0:o.call(l,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:d,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Bg.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Bg.disabled}`]:{boxShadow:"none"}}),eG=dt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.startIcon,t[`iconSize${en(o.size)}`]]}})(({ownerState:e})=>H({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},JC(e))),tG=dt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.endIcon,t[`iconSize${en(o.size)}`]]}})(({ownerState:e})=>H({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},JC(e))),nG=W.forwardRef(function(t,o){const l=W.useContext(YW),d=Wb(l,t),p=mn({props:d,name:"MuiButton"}),{children:y,color:a="primary",component:w="button",className:C,disabled:M=!1,disableElevation:D=!1,disableFocusRipple:R=!1,endIcon:$,focusVisibleClassName:V,fullWidth:B=!1,size:J="medium",startIcon:j,type:N,variant:G="text"}=p,Y=Bt(p,KW),K=H({},p,{color:a,component:w,disabled:M,disableElevation:D,disableFocusRipple:R,fullWidth:B,size:J,type:N,variant:G}),oe=JW(K),ie=j&&ee.jsx(eG,{className:oe.startIcon,ownerState:K,children:j}),de=$&&ee.jsx(tG,{className:oe.endIcon,ownerState:K,children:$});return ee.jsxs(QW,H({ownerState:K,className:qt(l.className,oe.root,C),component:w,disabled:M,focusRipple:!R,focusVisibleClassName:qt(oe.focusVisible,V),ref:o,type:N},Y,{classes:oe,children:[ie,y,de]}))}),Rf=nG,rG=["align","className","selected","typographyClassName","value","variant","width"],iG=e=>{const{classes:t}=e;return xn({root:["root"]},KC,t)},oG=dt(Rf,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),Ol=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiPickersToolbarButton"}),{align:d,className:p,selected:y,typographyClassName:a,value:w,variant:C,width:M}=l,D=Bt(l,rG),R=iG(l);return ee.jsx(oG,H({variant:"text",ref:o,className:qt(p,R.root)},M?{sx:{width:M}}:{},D,{children:ee.jsx(XC,{align:d,className:a,variant:C,value:w,selected:y})}))});function sG(e){return wn("MuiDateTimePickerToolbar",e)}const Ix=yn("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]);function aG(e,{disableFuture:t,maxDate:o,timezone:l}){const d=Er();return W.useMemo(()=>{const p=d.dateWithTimezone(void 0,l),y=d.startOfMonth(t&&d.isBefore(p,o)?p:o);return!d.isAfter(y,e)},[t,o,e,d,l])}function lG(e,{disablePast:t,minDate:o,timezone:l}){const d=Er();return W.useMemo(()=>{const p=d.dateWithTimezone(void 0,l),y=d.startOfMonth(t&&d.isAfter(p,o)?p:o);return!d.isBefore(y,e)},[t,o,e,d,l])}function B3(e,t,o,l){const d=Er(),p=DU(e,d),y=W.useCallback(a=>{const w=e==null?null:zU(e,a,!!t,d);o(w,l??"partial")},[t,e,o,l,d]);return{meridiemMode:p,handleMeridiemChange:y}}const k1=36,c_=2,QC=320,eE=358,cG=232,Lf=48,uG=["ampm","ampmInClock","value","onChange","view","isLandscape","onViewChange","toolbarFormat","toolbarPlaceholder","views","disabled","readOnly","toolbarVariant"],dG=e=>{const{classes:t,theme:o,isLandscape:l}=e,d={root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",o.direction==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",o.direction==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",l&&"ampmLandscape"],ampmLabel:["ampmLabel"]};return xn(d,sG,t)},tE=dt(HW,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>({paddingLeft:t.toolbarVariant==="desktop"&&!t.isLandscape?24:16,paddingRight:t.toolbarVariant==="desktop"&&!t.isLandscape?0:16,borderBottom:t.toolbarVariant==="desktop"?`1px solid ${(e.vars||e).palette.divider}`:void 0,borderRight:t.toolbarVariant==="desktop"&&t.isLandscape?`1px solid ${(e.vars||e).palette.divider}`:void 0,justifyContent:"space-around",position:"relative",[`& .${UW.penIconButton}`]:H({position:"absolute",top:8},e.direction==="rtl"?{left:8}:{right:8})}));tE.propTypes={as:$e.elementType,classes:$e.object,className:$e.string,isLandscape:$e.bool.isRequired,isMobileKeyboardViewOpen:$e.bool,landscapeDirection:$e.oneOf(["column","row"]),ownerState:$e.object.isRequired,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object]),toggleMobileKeyboardView:$e.func,toolbarTitle:$e.node,viewType:$e.oneOf(["date","time"])};const hG=dt("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(e,t)=>t.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),nE=dt("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(e,t)=>t.timeContainer})(({theme:e,ownerState:t})=>{const o=t.isLandscape&&t.toolbarVariant!=="desktop"?"column":"row";return H({display:"flex",flexDirection:o},t.toolbarVariant==="desktop"&&H({},!t.isLandscape&&{gap:9,marginRight:4,alignSelf:"flex-end"}),e.direction==="rtl"&&{flexDirection:`${o}-reverse`})}),pG=dt("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",overridesResolver:(e,t)=>t.timeDigitsContainer})(({theme:e,ownerState:t})=>H({display:"flex"},t.toolbarVariant==="desktop"&&{gap:1.5},e.direction==="rtl"&&{flexDirection:"row-reverse"}));nE.propTypes={as:$e.elementType,ownerState:$e.object.isRequired,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object])};const cS=dt(XC,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})(({ownerState:e})=>({margin:e.toolbarVariant==="desktop"?0:"0 4px 0 2px",cursor:"default"})),fG=dt("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,t)=>[{[`.${Ix.ampmLabel}`]:t.ampmLabel},{[`&.${Ix.ampmLandscape}`]:t.ampmLandscape},t.ampmSelection]})(({ownerState:e})=>H({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12},e.isLandscape&&{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"},{[`& .${Ix.ampmLabel}`]:{fontSize:17}}));function mG(e){const t=mn({props:e,name:"MuiDateTimePickerToolbar"}),{ampm:o,ampmInClock:l,value:d,onChange:p,view:y,isLandscape:a,onViewChange:w,toolbarFormat:C,toolbarPlaceholder:M="",views:D,disabled:R,readOnly:$,toolbarVariant:V="mobile"}=t,B=Bt(t,uG),J=t,j=Er(),{meridiemMode:N,handleMeridiemChange:G}=B3(d,o,p),Y=!!(o&&!l),K=V==="desktop",oe=Zs(),ie=ys(),de=dG(H({},J,{theme:ie})),le=Ce=>o?j.format(Ce,"hours12h"):j.format(Ce,"hours24h"),ye=W.useMemo(()=>d?C?j.formatByString(d,C):j.format(d,"shortDate"):M,[d,C,M,j]);return ee.jsxs(tE,H({toolbarTitle:oe.dateTimePickerToolbarTitle,isLandscape:a,className:de.root},B,{ownerState:J,children:[ee.jsxs(hG,{className:de.dateContainer,ownerState:J,children:[D.includes("year")&&ee.jsx(Ol,{tabIndex:-1,variant:"subtitle1",onClick:()=>w("year"),selected:y==="year",value:d?j.format(d,"year"):""}),D.includes("day")&&ee.jsx(Ol,{tabIndex:-1,variant:K?"h5":"h4",onClick:()=>w("day"),selected:y==="day",value:ye})]}),ee.jsxs(nE,{className:de.timeContainer,ownerState:J,children:[ee.jsxs(pG,{className:de.timeDigitsContainer,ownerState:J,children:[D.includes("hours")&&ee.jsx(Ol,{variant:K?"h5":"h3",width:K&&!a?Lf:void 0,onClick:()=>w("hours"),selected:y==="hours",value:d?le(d):"--"}),D.includes("minutes")&&ee.jsxs(W.Fragment,{children:[ee.jsx(cS,{variant:K?"h5":"h3",value:":",className:de.separator,ownerState:J}),ee.jsx(Ol,{variant:K?"h5":"h3",width:K&&!a?Lf:void 0,onClick:()=>w("minutes"),selected:y==="minutes",value:d?j.format(d,"minutes"):"--"})]}),D.includes("seconds")&&ee.jsxs(W.Fragment,{children:[ee.jsx(cS,{variant:K?"h5":"h3",value:":",className:de.separator,ownerState:J}),ee.jsx(Ol,{variant:K?"h5":"h3",width:K&&!a?Lf:void 0,onClick:()=>w("seconds"),selected:y==="seconds",value:d?j.format(d,"seconds"):"--"})]})]}),Y&&!K&&ee.jsxs(fG,{className:de.ampmSelection,ownerState:J,children:[ee.jsx(Ol,{variant:"subtitle2",selected:N==="am",typographyClassName:de.ampmLabel,value:j.getMeridiemText("am"),onClick:$?void 0:()=>G("am"),disabled:R}),ee.jsx(Ol,{variant:"subtitle2",selected:N==="pm",typographyClassName:de.ampmLabel,value:j.getMeridiemText("pm"),onClick:$?void 0:()=>G("pm"),disabled:R})]}),o&&K&&ee.jsx(Ol,{variant:"h5",onClick:()=>w("meridiem"),selected:y==="meridiem",value:d&&N?j.getMeridiemText(N):"--",width:Lf})]})]}))}const F3=e=>{if(e!==void 0)return Object.keys(e).reduce((t,o)=>H({},t,{[`${o.slice(0,1).toLowerCase()}${o.slice(1)}`]:e[o]}),{})};function rE(e,t){var o,l,d,p,y,a,w,C,M,D,R;const $=Er(),V=U1(),B=mn({props:e,name:t}),J=(o=B.ampm)!=null?o:$.is12HourCycleInCurrentLocale(),j=W.useMemo(()=>{var Y;return((Y=B.localeText)==null?void 0:Y.toolbarTitle)==null?B.localeText:H({},B.localeText,{dateTimePickerToolbarTitle:B.localeText.toolbarTitle})},[B.localeText]),N=(l=B.slots)!=null?l:F3(B.components),G=(d=B.slotProps)!=null?d:B.componentsProps;return H({},B,PU({views:B.views,openTo:B.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{ampm:J,localeText:j,orientation:(p=B.orientation)!=null?p:"portrait",disableIgnoringDatePartForTimeValidation:(y=B.disableIgnoringDatePartForTimeValidation)!=null?y:!!(B.minDateTime||B.maxDateTime||B.disablePast||B.disableFuture),disableFuture:(a=B.disableFuture)!=null?a:!1,disablePast:(w=B.disablePast)!=null?w:!1,minDate:gs($,(C=B.minDateTime)!=null?C:B.minDate,V.minDate),maxDate:gs($,(M=B.maxDateTime)!=null?M:B.maxDate,V.maxDate),minTime:(D=B.minDateTime)!=null?D:B.minTime,maxTime:(R=B.maxDateTime)!=null?R:B.maxTime,slots:H({toolbar:mG,tabs:vW},N),slotProps:H({},G,{toolbar:H({ampm:J},G==null?void 0:G.toolbar)})})}const iE=({shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:o,minDate:l,maxDate:d,disableFuture:p,disablePast:y,timezone:a})=>{const w=Cu();return W.useCallback(C=>GC({adapter:w,value:C,props:{shouldDisableDate:e,shouldDisableMonth:t,shouldDisableYear:o,minDate:l,maxDate:d,disableFuture:p,disablePast:y,timezone:a}})!==null,[w,e,t,o,l,d,p,y,a])},gG=(e,t,o)=>(l,d)=>{switch(d.type){case"changeMonth":return H({},l,{slideDirection:d.direction,currentMonth:d.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return H({},l,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(l.focusedDay!=null&&d.focusedDay!=null&&o.isSameDay(d.focusedDay,l.focusedDay))return l;const p=d.focusedDay!=null&&!t&&!o.isSameMonth(l.currentMonth,d.focusedDay);return H({},l,{focusedDay:d.focusedDay,isMonthSwitchingAnimating:p&&!e&&!d.withoutMonthSwitchingAnimation,currentMonth:p?o.startOfMonth(d.focusedDay):l.currentMonth,slideDirection:d.focusedDay!=null&&o.isAfterDay(d.focusedDay,l.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},yG=e=>{const{value:t,referenceDate:o,defaultCalendarMonth:l,disableFuture:d,disablePast:p,disableSwitchToMonthOnDayFocus:y=!1,maxDate:a,minDate:w,onMonthChange:C,reduceAnimations:M,shouldDisableDate:D,timezone:R}=e,$=Eu(R),V=Er(),B=W.useRef(gG(!!M,y,V)).current,J=W.useMemo(()=>{let de=null;return o?de=o:l&&(de=V.startOfMonth(l)),qs.getInitialReferenceValue({value:t,utils:V,timezone:R,props:e,referenceDate:de,granularity:da.day})},[]),[j,N]=W.useReducer(B,{isMonthSwitchingAnimating:!1,focusedDay:t||$,currentMonth:V.startOfMonth(J),slideDirection:"left"}),G=W.useCallback(de=>{N(H({type:"changeMonth"},de)),C&&C(de.newMonth)},[C]),Y=W.useCallback(de=>{const le=de;V.isSameMonth(le,j.currentMonth)||G({newMonth:V.startOfMonth(le),direction:V.isAfterDay(le,j.currentMonth)?"left":"right"})},[j.currentMonth,G,V]),K=iE({shouldDisableDate:D,minDate:w,maxDate:a,disableFuture:d,disablePast:p,timezone:R}),oe=W.useCallback(()=>{N({type:"finishMonthSwitchingAnimation"})},[]),ie=fn((de,le)=>{K(de)||N({type:"changeFocusedDay",focusedDay:de,withoutMonthSwitchingAnimation:le})});return{referenceDate:J,calendarState:j,changeMonth:Y,changeFocusedDay:ie,isDateDisabled:K,onMonthSwitchingAnimationEnd:oe,handleChangeMonth:G}},_G=e=>wn("MuiPickersFadeTransitionGroup",e);yn("MuiPickersFadeTransitionGroup",["root"]);const xG=e=>{const{classes:t}=e;return xn({root:["root"]},_G,t)},uS=500,vG=dt(P3,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"block",position:"relative"});function oE(e){const t=mn({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:o,className:l,reduceAnimations:d,transKey:p}=t,y=xG(t);return d?o:ee.jsx(vG,{className:qt(y.root,l),children:ee.jsx(j1,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:uS,enter:uS/2,exit:0},children:o},p)})}function bG(e){return wn("MuiPickersDay",e)}const Xc=yn("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),wG=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],SG=e=>{const{selected:t,disableMargin:o,disableHighlightToday:l,today:d,disabled:p,outsideCurrentMonth:y,showDaysOutsideCurrentMonth:a,classes:w}=e;return xn({root:["root",t&&"selected",p&&"disabled",!o&&"dayWithMargin",!l&&d&&"today",y&&a&&"dayOutsideMonth",y&&!a&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},bG,w)},sE=({theme:e,ownerState:t})=>H({},e.typography.caption,{width:k1,height:k1,borderRadius:"50%",padding:0,backgroundColor:"transparent",color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:Kn(e.palette.primary.main,e.palette.action.focusOpacity),[`&.${Xc.selected}`]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${Xc.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${Xc.disabled}:not(.${Xc.selected})`]:{color:(e.vars||e).palette.text.disabled},[`&.${Xc.disabled}&.${Xc.selected}`]:{opacity:.6}},!t.disableMargin&&{margin:`0 ${c_}px`},t.outsideCurrentMonth&&t.showDaysOutsideCurrentMonth&&{color:(e.vars||e).palette.text.secondary},!t.disableHighlightToday&&t.today&&{[`&:not(.${Xc.selected})`]:{border:`1px solid ${(e.vars||e).palette.text.secondary}`}}),aE=(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableMargin&&t.dayWithMargin,!o.disableHighlightToday&&o.today&&t.today,!o.outsideCurrentMonth&&o.showDaysOutsideCurrentMonth&&t.dayOutsideMonth,o.outsideCurrentMonth&&!o.showDaysOutsideCurrentMonth&&t.hiddenDaySpacingFiller]},TG=dt(el,{name:"MuiPickersDay",slot:"Root",overridesResolver:aE})(sE),CG=dt("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:aE})(({theme:e,ownerState:t})=>H({},sE({theme:e,ownerState:t}),{opacity:0,pointerEvents:"none"})),kf=()=>{},EG=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiPickersDay"}),{autoFocus:d=!1,className:p,day:y,disabled:a=!1,disableHighlightToday:w=!1,disableMargin:C=!1,isAnimating:M,onClick:D,onDaySelect:R,onFocus:$=kf,onBlur:V=kf,onKeyDown:B=kf,onMouseDown:J=kf,onMouseEnter:j=kf,outsideCurrentMonth:N,selected:G=!1,showDaysOutsideCurrentMonth:Y=!1,children:K,today:oe=!1}=l,ie=Bt(l,wG),de=H({},l,{autoFocus:d,disabled:a,disableHighlightToday:w,disableMargin:C,selected:G,showDaysOutsideCurrentMonth:Y,today:oe}),le=SG(de),ye=Er(),Ce=W.useRef(null),Fe=zr(Ce,o);Ei(()=>{d&&!a&&!M&&!N&&Ce.current.focus()},[d,a,M,N]);const be=he=>{J(he),N&&he.preventDefault()},we=he=>{a||R(y),N&&he.currentTarget.focus(),D&&D(he)};return N&&!Y?ee.jsx(CG,{className:qt(le.root,le.hiddenDaySpacingFiller,p),ownerState:de,role:ie.role}):ee.jsx(TG,H({className:qt(le.root,p),ref:Fe,centerRipple:!0,disabled:a,tabIndex:G?0:-1,onKeyDown:he=>B(he,y),onFocus:he=>$(he,y),onBlur:he=>V(he,y),onMouseEnter:he=>j(he,y),onClick:we,onMouseDown:be},ie,{ownerState:de,children:K||ye.format(y,"dayOfMonth")}))}),kG=W.memo(EG),PG=e=>wn("MuiPickersSlideTransition",e),is=yn("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),MG=["children","className","reduceAnimations","slideDirection","transKey","classes"],IG=e=>{const{classes:t,slideDirection:o}=e,l={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${o}`],exitActive:[`slideExitActiveLeft-${o}`]};return xn(l,PG,t)},lE=350,AG=dt(P3,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`.${is["slideEnter-left"]}`]:t["slideEnter-left"]},{[`.${is["slideEnter-right"]}`]:t["slideEnter-right"]},{[`.${is.slideEnterActive}`]:t.slideEnterActive},{[`.${is.slideExit}`]:t.slideExit},{[`.${is["slideExitActiveLeft-left"]}`]:t["slideExitActiveLeft-left"]},{[`.${is["slideExitActiveLeft-right"]}`]:t["slideExitActiveLeft-right"]}]})(({theme:e})=>{const t=e.transitions.create("transform",{duration:lE,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${is["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${is["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${is.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${is.slideExit}`]:{transform:"translate(0%)"},[`& .${is["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${is["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}});function DG(e){const t=mn({props:e,name:"MuiPickersSlideTransition"}),{children:o,className:l,reduceAnimations:d,transKey:p}=t,y=Bt(t,MG),a=IG(t);if(d)return ee.jsx("div",{className:qt(a.root,l),children:o});const w={exit:a.exit,enterActive:a.enterActive,enter:a.enter,exitActive:a.exitActive};return ee.jsx(AG,{className:qt(a.root,l),childFactory:C=>W.cloneElement(C,{classNames:w}),role:"presentation",children:ee.jsx(LN,H({mountOnEnter:!0,unmountOnExit:!0,timeout:lE,classNames:w},y,{children:o}),p)})}const zG=e=>wn("MuiDayCalendar",e);yn("MuiDayCalendar",["header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const RG=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],LG=["ownerState"],OG=e=>{const{classes:t}=e;return xn({header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},zG,t)},BG=e=>e.charAt(0).toUpperCase(),cE=(k1+c_*2)*6,FG=dt("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,t)=>t.header})({display:"flex",justifyContent:"center",alignItems:"center"}),$G=dt(Qa,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,t)=>t.weekDayLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),NG=dt(Qa,{name:"MuiDayPicker",slot:"WeekNumberLabel",overridesResolver:(e,t)=>t.weekNumberLabel})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.disabled})),jG=dt(Qa,{name:"MuiDayPicker",slot:"WeekNumber",overridesResolver:(e,t)=>t.weekNumber})(({theme:e})=>H({},e.typography.caption,{width:k1,height:k1,padding:0,margin:`0 ${c_}px`,color:e.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),UG=dt("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,t)=>t.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:cE}),VG=dt(DG,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,t)=>t.slideTransition})({minHeight:cE}),WG=dt("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,t)=>t.monthContainer})({overflow:"hidden"}),GG=dt("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,t)=>t.weekContainer})({margin:`${c_}px 0`,display:"flex",justifyContent:"center"});function HG(e){var t,o,l;let{parentProps:d,day:p,focusableDay:y,selectedDays:a,isDateDisabled:w,currentMonthNumber:C,isViewFocused:M}=e,D=Bt(e,RG);const{disabled:R,disableHighlightToday:$,isMonthSwitchingAnimating:V,showDaysOutsideCurrentMonth:B,components:J,componentsProps:j,slots:N,slotProps:G,timezone:Y}=d,K=Er(),oe=Eu(Y),ie=y!==null&&K.isSameDay(p,y),de=a.some(Ae=>K.isSameDay(Ae,p)),le=K.isSameDay(p,oe),ye=(t=(o=N==null?void 0:N.day)!=null?o:J==null?void 0:J.Day)!=null?t:kG,Ce=Fr({elementType:ye,externalSlotProps:(l=G==null?void 0:G.day)!=null?l:j==null?void 0:j.day,additionalProps:H({disableHighlightToday:$,showDaysOutsideCurrentMonth:B,role:"gridcell",isAnimating:V,"data-timestamp":K.toJsDate(p).valueOf()},D),ownerState:H({},d,{day:p,selected:de})}),Fe=Bt(Ce,LG),be=W.useMemo(()=>R||w(p),[R,w,p]),we=W.useMemo(()=>K.getMonth(p)!==C,[K,p,C]),he=W.useMemo(()=>{const Ae=K.startOfMonth(K.setMonth(p,C));return B?K.isSameDay(p,K.startOfWeek(Ae)):K.isSameDay(p,Ae)},[C,p,B,K]),Be=W.useMemo(()=>{const Ae=K.endOfMonth(K.setMonth(p,C));return B?K.isSameDay(p,K.endOfWeek(Ae)):K.isSameDay(p,Ae)},[C,p,B,K]);return ee.jsx(ye,H({},Fe,{day:p,disabled:be,autoFocus:M&&ie,today:le,outsideCurrentMonth:we,isFirstVisibleCell:he,isLastVisibleCell:Be,selected:de,tabIndex:ie?0:-1,"aria-selected":de,"aria-current":le?"date":void 0}))}function qG(e){const t=mn({props:e,name:"MuiDayCalendar"}),{onFocusedDayChange:o,className:l,currentMonth:d,selectedDays:p,focusedDay:y,loading:a,onSelectedDaysChange:w,onMonthSwitchingAnimationEnd:C,readOnly:M,reduceAnimations:D,renderLoading:R=()=>ee.jsx("span",{children:"..."}),slideDirection:$,TransitionProps:V,disablePast:B,disableFuture:J,minDate:j,maxDate:N,shouldDisableDate:G,shouldDisableMonth:Y,shouldDisableYear:K,dayOfWeekFormatter:oe=BG,hasFocus:ie,onFocusedViewChange:de,gridLabelId:le,displayWeekNumber:ye,fixedWeekNumber:Ce,autoFocus:Fe,timezone:be}=t,we=Eu(be),he=Er(),Be=OG(t),Se=ys().direction==="rtl",ke=iE({shouldDisableDate:G,shouldDisableMonth:Y,shouldDisableYear:K,minDate:j,maxDate:N,disablePast:B,disableFuture:J,timezone:be}),Ne=Zs(),[nt,xt]=jo({name:"DayCalendar",state:"hasFocus",controlled:ie,default:Fe??!1}),[gt,rt]=W.useState(()=>y||we),vt=fn(lt=>{M||w(lt)}),ht=lt=>{ke(lt)||(o(lt),rt(lt),de==null||de(!0),xt(!0))},mt=fn((lt,Ut)=>{switch(lt.key){case"ArrowUp":ht(he.addDays(Ut,-7)),lt.preventDefault();break;case"ArrowDown":ht(he.addDays(Ut,7)),lt.preventDefault();break;case"ArrowLeft":{const Nt=he.addDays(Ut,Se?1:-1),Ft=he.addMonths(Ut,Se?1:-1),Lt=Kf({utils:he,date:Nt,minDate:Se?Nt:he.startOfMonth(Ft),maxDate:Se?he.endOfMonth(Ft):Nt,isDateDisabled:ke,timezone:be});ht(Lt||Nt),lt.preventDefault();break}case"ArrowRight":{const Nt=he.addDays(Ut,Se?-1:1),Ft=he.addMonths(Ut,Se?-1:1),Lt=Kf({utils:he,date:Nt,minDate:Se?he.startOfMonth(Ft):Nt,maxDate:Se?Nt:he.endOfMonth(Ft),isDateDisabled:ke,timezone:be});ht(Lt||Nt),lt.preventDefault();break}case"Home":ht(he.startOfWeek(Ut)),lt.preventDefault();break;case"End":ht(he.endOfWeek(Ut)),lt.preventDefault();break;case"PageUp":ht(he.addMonths(Ut,1)),lt.preventDefault();break;case"PageDown":ht(he.addMonths(Ut,-1)),lt.preventDefault();break}}),Ot=fn((lt,Ut)=>ht(Ut)),$t=fn((lt,Ut)=>{nt&&he.isSameDay(gt,Ut)&&(de==null||de(!1))}),at=he.getMonth(d),Je=W.useMemo(()=>p.filter(lt=>!!lt).map(lt=>he.startOfDay(lt)),[he,p]),it=at,St=W.useMemo(()=>W.createRef(),[it]),Wt=he.startOfWeek(we),He=W.useMemo(()=>{const lt=he.startOfMonth(d),Ut=he.endOfMonth(d);return ke(gt)||he.isAfterDay(gt,Ut)||he.isBeforeDay(gt,lt)?Kf({utils:he,date:gt,minDate:lt,maxDate:Ut,disablePast:B,disableFuture:J,isDateDisabled:ke,timezone:be}):gt},[d,J,B,gt,ke,he,be]),jt=W.useMemo(()=>{const lt=he.setTimezone(d,be),Ut=he.getWeekArray(lt);let Nt=he.addMonths(lt,1);for(;Ce&&Ut.length<Ce;){const Ft=he.getWeekArray(Nt),Lt=he.isSameDay(Ut[Ut.length-1][0],Ft[0][0]);Ft.slice(Lt?1:0).forEach(cn=>{Ut.length<Ce&&Ut.push(cn)}),Nt=he.addMonths(Nt,1)}return Ut},[d,Ce,he,be]);return ee.jsxs("div",{role:"grid","aria-labelledby":le,children:[ee.jsxs(FG,{role:"row",className:Be.header,children:[ye&&ee.jsx(NG,{variant:"caption",role:"columnheader","aria-label":Ne.calendarWeekNumberHeaderLabel,className:Be.weekNumberLabel,children:Ne.calendarWeekNumberHeaderText}),he.getWeekdays().map((lt,Ut)=>{var Nt;return ee.jsx($G,{variant:"caption",role:"columnheader","aria-label":he.format(he.addDays(Wt,Ut),"weekday"),className:Be.weekDayLabel,children:(Nt=oe==null?void 0:oe(lt))!=null?Nt:lt},lt+Ut.toString())})]}),a?ee.jsx(UG,{className:Be.loadingContainer,children:R()}):ee.jsx(VG,H({transKey:it,onExited:C,reduceAnimations:D,slideDirection:$,className:qt(l,Be.slideTransition)},V,{nodeRef:St,children:ee.jsx(WG,{ref:St,role:"rowgroup",className:Be.monthContainer,children:jt.map((lt,Ut)=>ee.jsxs(GG,{role:"row",className:Be.weekContainer,"aria-rowindex":Ut+1,children:[ye&&ee.jsx(jG,{className:Be.weekNumber,role:"rowheader","aria-label":Ne.calendarWeekNumberAriaLabelText(he.getWeekNumber(lt[0])),children:Ne.calendarWeekNumberText(he.getWeekNumber(lt[0]))}),lt.map((Nt,Ft)=>ee.jsx(HG,{parentProps:t,day:Nt,selectedDays:Je,focusableDay:He,onKeyDown:mt,onFocus:Ot,onBlur:$t,onDaySelect:vt,isDateDisabled:ke,currentMonthNumber:at,isViewFocused:nt,"aria-colindex":Ft+1},Nt.toString()))]},`week-${lt[0]}`))})}))]})}function ZG(e){return wn("MuiPickersMonth",e)}const Fg=yn("MuiPickersMonth",["root","monthButton","disabled","selected"]),XG=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","monthsPerRow"],YG=e=>{const{disabled:t,selected:o,classes:l}=e;return xn({root:["root"],monthButton:["monthButton",t&&"disabled",o&&"selected"]},ZG,l)},KG=dt("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,t)=>[t.root]})(({ownerState:e})=>({flexBasis:e.monthsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),JG=dt("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,t)=>[t.monthButton,{[`&.${Fg.disabled}`]:t.disabled},{[`&.${Fg.selected}`]:t.selected}]})(({theme:e})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Fg.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${Fg.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),QG=W.memo(function(t){const o=mn({props:t,name:"MuiPickersMonth"}),{autoFocus:l,children:d,disabled:p,value:y,tabIndex:a,onClick:w,onKeyDown:C,onFocus:M,onBlur:D,"aria-current":R}=o,$=Bt(o,XG),V=W.useRef(null),B=YG(o);return Ei(()=>{if(l){var J;(J=V.current)==null||J.focus()}},[l]),ee.jsx(KG,H({className:B.root,ownerState:o},$,{children:ee.jsx(JG,{ref:V,disabled:p,type:"button",tabIndex:p?-1:a,"aria-current":R,onClick:J=>w(J,y),onKeyDown:J=>C(J,y),onFocus:J=>M(J,y),onBlur:J=>D(J,y),className:B.monthButton,ownerState:o,children:d})}))});function eH(e){return wn("MuiMonthCalendar",e)}yn("MuiMonthCalendar",["root"]);const tH=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone"],nH=e=>{const{classes:t}=e;return xn({root:["root"]},eH,t)};function rH(e,t){const o=Er(),l=U1(),d=mn({props:e,name:t});return H({disableFuture:!1,disablePast:!1},d,{minDate:gs(o,d.minDate,l.minDate),maxDate:gs(o,d.maxDate,l.maxDate)})}const iH=dt("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:320}),oH=W.forwardRef(function(t,o){const l=rH(t,"MuiMonthCalendar"),{className:d,value:p,defaultValue:y,referenceDate:a,disabled:w,disableFuture:C,disablePast:M,maxDate:D,minDate:R,onChange:$,shouldDisableMonth:V,readOnly:B,disableHighlightToday:J,autoFocus:j=!1,onMonthFocus:N,hasFocus:G,onFocusedViewChange:Y,monthsPerRow:K=3,timezone:oe}=l,ie=Bt(l,tH),{value:de,handleValueChange:le,timezone:ye}=V1({name:"MonthCalendar",timezone:oe,value:p,defaultValue:y,onChange:$,valueManager:qs}),Ce=Eu(ye),Fe=Mh(),be=Er(),we=W.useMemo(()=>qs.getInitialReferenceValue({value:de,utils:be,props:l,timezone:ye,referenceDate:a,granularity:da.month}),[]),he=l,Be=nH(he),Ae=W.useMemo(()=>be.getMonth(Ce),[be,Ce]),Se=W.useMemo(()=>de!=null?be.getMonth(de):J?null:be.getMonth(we),[de,be,J,we]),[ke,Ne]=W.useState(()=>Se||Ae),[nt,xt]=jo({name:"MonthCalendar",state:"hasFocus",controlled:G,default:j??!1}),gt=fn(at=>{xt(at),Y&&Y(at)}),rt=W.useCallback(at=>{const Je=be.startOfMonth(M&&be.isAfter(Ce,R)?Ce:R),it=be.startOfMonth(C&&be.isBefore(Ce,D)?Ce:D),St=be.startOfMonth(at);return be.isBefore(St,Je)||be.isAfter(St,it)?!0:V?V(St):!1},[C,M,D,R,Ce,V,be]),vt=fn((at,Je)=>{if(B)return;const it=be.setMonth(de??we,Je);le(it)}),ht=fn(at=>{rt(be.setMonth(de??we,at))||(Ne(at),gt(!0),N&&N(at))});W.useEffect(()=>{Ne(at=>Se!==null&&at!==Se?Se:at)},[Se]);const mt=fn((at,Je)=>{switch(at.key){case"ArrowUp":ht((12+Je-3)%12),at.preventDefault();break;case"ArrowDown":ht((12+Je+3)%12),at.preventDefault();break;case"ArrowLeft":ht((12+Je+(Fe.direction==="ltr"?-1:1))%12),at.preventDefault();break;case"ArrowRight":ht((12+Je+(Fe.direction==="ltr"?1:-1))%12),at.preventDefault();break}}),Ot=fn((at,Je)=>{ht(Je)}),$t=fn((at,Je)=>{ke===Je&&gt(!1)});return ee.jsx(iH,H({ref:o,className:qt(Be.root,d),ownerState:he},ie,{children:D3(be,de??we).map(at=>{const Je=be.getMonth(at),it=be.format(at,"monthShort"),St=Je===Se,Wt=w||rt(at);return ee.jsx(QG,{selected:St,value:Je,onClick:vt,onKeyDown:mt,autoFocus:nt&&Je===ke,disabled:Wt,tabIndex:Je===ke?0:-1,onFocus:Ot,onBlur:$t,"aria-current":Ae===Je?"date":void 0,monthsPerRow:K,children:it},it)})}))});function sH(e){return wn("MuiPickersYear",e)}const $g=yn("MuiPickersYear",["root","yearButton","selected","disabled"]),aH=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],lH=e=>{const{disabled:t,selected:o,classes:l}=e;return xn({root:["root"],yearButton:["yearButton",t&&"disabled",o&&"selected"]},sH,l)},cH=dt("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,t)=>[t.root]})(({ownerState:e})=>({flexBasis:e.yearsPerRow===3?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"})),uH=dt("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,t)=>[t.yearButton,{[`&.${$g.disabled}`]:t.disabled},{[`&.${$g.selected}`]:t.selected}]})(({theme:e})=>H({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.focusOpacity})`:Kn(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${$g.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${$g.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),dH=W.memo(function(t){const o=mn({props:t,name:"MuiPickersYear"}),{autoFocus:l,className:d,children:p,disabled:y,value:a,tabIndex:w,onClick:C,onKeyDown:M,onFocus:D,onBlur:R,"aria-current":$}=o,V=Bt(o,aH),B=W.useRef(null),J=lH(o);return W.useEffect(()=>{l&&B.current.focus()},[l]),ee.jsx(cH,H({className:qt(J.root,d),ownerState:o},V,{children:ee.jsx(uH,{ref:B,disabled:y,type:"button",tabIndex:y?-1:w,"aria-current":$,onClick:j=>C(j,a),onKeyDown:j=>M(j,a),onFocus:j=>D(j,a),onBlur:j=>R(j,a),className:J.yearButton,ownerState:o,children:p})}))});function hH(e){return wn("MuiYearCalendar",e)}yn("MuiYearCalendar",["root"]);const pH=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone"],fH=e=>{const{classes:t}=e;return xn({root:["root"]},hH,t)};function mH(e,t){const o=Er(),l=U1(),d=mn({props:e,name:t});return H({disablePast:!1,disableFuture:!1},d,{minDate:gs(o,d.minDate,l.minDate),maxDate:gs(o,d.maxDate,l.maxDate)})}const gH=dt("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:320,maxHeight:304}),yH=W.forwardRef(function(t,o){const l=mH(t,"MuiYearCalendar"),{autoFocus:d,className:p,value:y,defaultValue:a,referenceDate:w,disabled:C,disableFuture:M,disablePast:D,maxDate:R,minDate:$,onChange:V,readOnly:B,shouldDisableYear:J,disableHighlightToday:j,onYearFocus:N,hasFocus:G,onFocusedViewChange:Y,yearsPerRow:K=3,timezone:oe}=l,ie=Bt(l,pH),{value:de,handleValueChange:le,timezone:ye}=V1({name:"YearCalendar",timezone:oe,value:y,defaultValue:a,onChange:V,valueManager:qs}),Ce=Eu(ye),Fe=Mh(),be=Er(),we=W.useMemo(()=>qs.getInitialReferenceValue({value:de,utils:be,props:l,timezone:ye,referenceDate:w,granularity:da.year}),[]),he=l,Be=fH(he),Ae=W.useMemo(()=>be.getYear(Ce),[be,Ce]),Se=W.useMemo(()=>de!=null?be.getYear(de):j?null:be.getYear(we),[de,be,j,we]),[ke,Ne]=W.useState(()=>Se||Ae),[nt,xt]=jo({name:"YearCalendar",state:"hasFocus",controlled:G,default:d??!1}),gt=fn(it=>{xt(it),Y&&Y(it)}),rt=W.useCallback(it=>{if(D&&be.isBeforeYear(it,Ce)||M&&be.isAfterYear(it,Ce)||$&&be.isBeforeYear(it,$)||R&&be.isAfterYear(it,R))return!0;if(!J)return!1;const St=be.startOfYear(it);return J(St)},[M,D,R,$,Ce,J,be]),vt=fn((it,St)=>{if(B)return;const Wt=be.setYear(de??we,St);le(Wt)}),ht=fn(it=>{rt(be.setYear(de??we,it))||(Ne(it),gt(!0),N==null||N(it))});W.useEffect(()=>{Ne(it=>Se!==null&&it!==Se?Se:it)},[Se]);const mt=fn((it,St)=>{switch(it.key){case"ArrowUp":ht(St-K),it.preventDefault();break;case"ArrowDown":ht(St+K),it.preventDefault();break;case"ArrowLeft":ht(St+(Fe.direction==="ltr"?-1:1)),it.preventDefault();break;case"ArrowRight":ht(St+(Fe.direction==="ltr"?1:-1)),it.preventDefault();break}}),Ot=fn((it,St)=>{ht(St)}),$t=fn((it,St)=>{ke===St&&gt(!1)}),at=W.useRef(null),Je=zr(o,at);return W.useEffect(()=>{if(d||at.current===null)return;const it=at.current.querySelector('[tabindex="0"]');if(!it)return;const St=it.offsetHeight,Wt=it.offsetTop,He=at.current.clientHeight,jt=at.current.scrollTop,lt=Wt+St;St>He||Wt<jt||(at.current.scrollTop=lt-He/2-St/2)},[d]),ee.jsx(gH,H({ref:Je,className:qt(Be.root,p),ownerState:he},ie,{children:be.getYearRange($,R).map(it=>{const St=be.getYear(it),Wt=St===Se,He=C||rt(it);return ee.jsx(dH,{selected:Wt,value:St,onClick:vt,onKeyDown:mt,autoFocus:nt&&St===ke,disabled:He,tabIndex:St===ke?0:-1,onFocus:Ot,onBlur:$t,"aria-current":Ae===St?"date":void 0,yearsPerRow:K,children:be.format(it,"year")},be.format(it,"year"))})}))});function u_({onChange:e,onViewChange:t,openTo:o,view:l,views:d,autoFocus:p,focusedView:y,onFocusedViewChange:a}){var w,C;const M=W.useRef(o),D=W.useRef(d),R=W.useRef(d.includes(o)?o:d[0]),[$,V]=jo({name:"useViews",state:"view",controlled:l,default:R.current}),B=W.useRef(p?$:null),[J,j]=jo({name:"useViews",state:"focusedView",controlled:y,default:B.current});W.useEffect(()=>{(M.current&&M.current!==o||D.current&&D.current.some(ye=>!d.includes(ye)))&&(V(d.includes(o)?o:d[0]),D.current=d,M.current=o)},[o,V,$,d]);const N=d.indexOf($),G=(w=d[N-1])!=null?w:null,Y=(C=d[N+1])!=null?C:null,K=fn((ye,Ce)=>{j(Ce?ye:Fe=>ye===Fe?null:Fe),a==null||a(ye,Ce)}),oe=fn(ye=>{ye!==$&&(V(ye),K(ye,!0),t&&t(ye))}),ie=fn(()=>{Y&&oe(Y),K(Y,!0)}),de=fn((ye,Ce,Fe)=>{const be=Ce==="finish",we=Fe?d.indexOf(Fe)<d.length-1:!!Y;e(ye,be&&we?"partial":Ce),be&&ie()}),le=fn((ye,Ce,Fe)=>{e(ye,Ce?"partial":"finish",Fe),Ce&&(oe(Ce),K(Ce,!0))});return{view:$,setView:oe,focusedView:J,setFocusedView:K,nextView:Y,previousView:G,defaultView:R.current,goToNextView:ie,setValueAndGoToNextView:de,setValueAndGoToView:le}}function _H(e){return wn("MuiIconButton",e)}const xH=yn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),vH=xH,bH=["edge","children","className","color","disabled","disableFocusRipple","size"],wH=e=>{const{classes:t,disabled:o,color:l,edge:d,size:p}=e,y={root:["root",o&&"disabled",l!=="default"&&`color${en(l)}`,d&&`edge${en(d)}`,`size${en(p)}`]};return xn(y,_H,t)},SH=dt(el,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="default"&&t[`color${en(o.color)}`],o.edge&&t[`edge${en(o.edge)}`],t[`size${en(o.size)}`]]}})(({theme:e,ownerState:t})=>H({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var o;const l=(o=(e.vars||e).palette)==null?void 0:o[t.color];return H({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&H({color:l==null?void 0:l.main},!t.disableRipple&&{"&:hover":H({},l&&{backgroundColor:e.vars?`rgba(${l.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(l.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${vH.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),TH=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiIconButton"}),{edge:d=!1,children:p,className:y,color:a="default",disabled:w=!1,disableFocusRipple:C=!1,size:M="medium"}=l,D=Bt(l,bH),R=H({},l,{edge:d,color:a,disabled:w,disableFocusRipple:C,size:M}),$=wH(R);return ee.jsx(SH,H({className:qt($.root,y),centerRipple:!0,focusRipple:!C,disabled:w,ref:o,ownerState:R},D,{children:p}))}),ku=TH;function CH(e){return wn("MuiPickersArrowSwitcher",e)}yn("MuiPickersArrowSwitcher",["root","spacer","button"]);const EH=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],kH=["ownerState"],PH=["ownerState"],MH=dt("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),IH=dt("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})(({theme:e})=>({width:e.spacing(3)})),dS=dt(ku,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>H({},e.hidden&&{visibility:"hidden"})),AH=e=>{const{classes:t}=e;return xn({root:["root"],spacer:["spacer"],button:["button"]},CH,t)},uE=W.forwardRef(function(t,o){var l,d,p,y;const w=ys().direction==="rtl",C=mn({props:t,name:"MuiPickersArrowSwitcher"}),{children:M,className:D,slots:R,slotProps:$,isNextDisabled:V,isNextHidden:B,onGoToNext:J,nextLabel:j,isPreviousDisabled:N,isPreviousHidden:G,onGoToPrevious:Y,previousLabel:K}=C,oe=Bt(C,EH),ie=C,de=AH(ie),le={isDisabled:V,isHidden:B,goTo:J,label:j},ye={isDisabled:N,isHidden:G,goTo:Y,label:K},[Ce,Fe]=w?[le,ye]:[ye,le],be=(l=R==null?void 0:R.previousIconButton)!=null?l:dS,we=Fr({elementType:be,externalSlotProps:$==null?void 0:$.previousIconButton,additionalProps:{size:"medium",title:Ce.label,"aria-label":Ce.label,disabled:Ce.isDisabled,edge:"end",onClick:Ce.goTo},ownerState:H({},ie,{hidden:Ce.isHidden}),className:de.button}),he=(d=R==null?void 0:R.nextIconButton)!=null?d:dS,Be=Fr({elementType:he,externalSlotProps:$==null?void 0:$.nextIconButton,additionalProps:{size:"medium",title:Fe.label,"aria-label":Fe.label,disabled:Fe.isDisabled,edge:"start",onClick:Fe.goTo},ownerState:H({},ie,{hidden:Fe.isHidden}),className:de.button}),Ae=(p=R==null?void 0:R.leftArrowIcon)!=null?p:uW,Se=Fr({elementType:Ae,externalSlotProps:$==null?void 0:$.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),ke=Bt(Se,kH),Ne=(y=R==null?void 0:R.rightArrowIcon)!=null?y:dW,nt=Fr({elementType:Ne,externalSlotProps:$==null?void 0:$.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),xt=Bt(nt,PH);return ee.jsxs(MH,H({ref:o,className:qt(de.root,D),ownerState:ie},oe,{children:[ee.jsx(be,H({},we,{children:w?ee.jsx(Ne,H({},xt)):ee.jsx(Ae,H({},ke))})),M?ee.jsx(Qa,{variant:"subtitle1",component:"span",children:M}):ee.jsx(IH,{className:de.spacer,ownerState:ie}),ee.jsx(he,H({},Be,{children:w?ee.jsx(Ae,H({},ke)):ee.jsx(Ne,H({},xt))}))]}))}),DH=e=>wn("MuiPickersCalendarHeader",e),zH=yn("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),RH=["ownerState"],LH=e=>{const{classes:t}=e;return xn({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},DH,t)},OH=dt("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),BH=dt("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>H({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),FH=dt("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,t)=>t.label})({marginRight:6}),$H=dt(ku,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,t)=>t.switchViewButton})(({ownerState:e})=>H({marginRight:"auto"},e.view==="year"&&{[`.${zH.switchViewIcon}`]:{transform:"rotate(180deg)"}})),NH=dt(cW,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,t)=>t.switchViewIcon})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"}));function jH(e){var t,o;const l=Zs(),d=Er(),p=mn({props:e,name:"MuiPickersCalendarHeader"}),{slots:y,slotProps:a,currentMonth:w,disabled:C,disableFuture:M,disablePast:D,maxDate:R,minDate:$,onMonthChange:V,onViewChange:B,view:J,reduceAnimations:j,views:N,labelId:G,timezone:Y}=p,K=p,oe=LH(p),ie=(t=y==null?void 0:y.switchViewButton)!=null?t:$H,de=Fr({elementType:ie,externalSlotProps:a==null?void 0:a.switchViewButton,additionalProps:{size:"small","aria-label":l.calendarViewSwitchingButtonAriaLabel(J)},ownerState:K,className:oe.switchViewButton}),le=(o=y==null?void 0:y.switchViewIcon)!=null?o:NH,ye=Fr({elementType:le,externalSlotProps:a==null?void 0:a.switchViewIcon,ownerState:void 0,className:oe.switchViewIcon}),Ce=Bt(ye,RH),Fe=()=>V(d.addMonths(w,1),"left"),be=()=>V(d.addMonths(w,-1),"right"),we=aG(w,{disableFuture:M,maxDate:R,timezone:Y}),he=lG(w,{disablePast:D,minDate:$,timezone:Y}),Be=()=>{if(!(N.length===1||!B||C))if(N.length===2)B(N.find(Ae=>Ae!==J)||N[0]);else{const Ae=N.indexOf(J)!==0?0:1;B(N[Ae])}};return N.length===1&&N[0]==="year"?null:ee.jsxs(OH,{ownerState:K,className:oe.root,children:[ee.jsxs(BH,{role:"presentation",onClick:Be,ownerState:K,"aria-live":"polite",className:oe.labelContainer,children:[ee.jsx(oE,{reduceAnimations:j,transKey:d.format(w,"monthAndYear"),children:ee.jsx(FH,{id:G,ownerState:K,className:oe.label,children:d.format(w,"monthAndYear")})}),N.length>1&&!C&&ee.jsx(ie,H({},de,{children:ee.jsx(le,H({},Ce))}))]}),ee.jsx(j1,{in:J==="day",children:ee.jsx(uE,{slots:y,slotProps:a,onGoToPrevious:be,isPreviousDisabled:he,previousLabel:l.previousMonth,onGoToNext:Fe,isNextDisabled:we,nextLabel:l.nextMonth})})]})}const $3=dt("div")({overflow:"hidden",width:QC,maxHeight:eE,display:"flex",flexDirection:"column",margin:"0 auto"}),UH=typeof navigator<"u"&&/(android)/i.test(navigator.userAgent),VH=e=>wn("MuiDateCalendar",e);yn("MuiDateCalendar",["root","viewTransitionContainer"]);const WH=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"],GH=e=>{const{classes:t}=e;return xn({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},VH,t)};function HH(e,t){const o=Er(),l=U1(),d=mn({props:e,name:t});return H({loading:!1,disablePast:!1,disableFuture:!1,openTo:"day",views:["year","day"],reduceAnimations:UH,renderLoading:()=>ee.jsx("span",{children:"..."})},d,{minDate:gs(o,d.minDate,l.minDate),maxDate:gs(o,d.maxDate,l.maxDate)})}const qH=dt($3,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column"}),ZH=dt(oE,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,t)=>t.viewTransitionContainer})({}),dE=W.forwardRef(function(t,o){const l=Er(),d=Su(),p=HH(t,"MuiDateCalendar"),{autoFocus:y,onViewChange:a,value:w,defaultValue:C,referenceDate:M,disableFuture:D,disablePast:R,defaultCalendarMonth:$,onChange:V,onYearChange:B,onMonthChange:J,reduceAnimations:j,shouldDisableDate:N,shouldDisableMonth:G,shouldDisableYear:Y,view:K,views:oe,openTo:ie,className:de,disabled:le,readOnly:ye,minDate:Ce,maxDate:Fe,disableHighlightToday:be,focusedView:we,onFocusedViewChange:he,showDaysOutsideCurrentMonth:Be,fixedWeekNumber:Ae,dayOfWeekFormatter:Se,components:ke,componentsProps:Ne,slots:nt,slotProps:xt,loading:gt,renderLoading:rt,displayWeekNumber:vt,yearsPerRow:ht,monthsPerRow:mt,timezone:Ot}=p,$t=Bt(p,WH),{value:at,handleValueChange:Je,timezone:it}=V1({name:"DateCalendar",timezone:Ot,value:w,defaultValue:C,onChange:V,valueManager:qs}),{view:St,setView:Wt,focusedView:He,setFocusedView:jt,goToNextView:lt,setValueAndGoToNextView:Ut}=u_({view:K,views:oe,openTo:ie,onChange:Je,onViewChange:a,autoFocus:y,focusedView:we,onFocusedViewChange:he}),{referenceDate:Nt,calendarState:Ft,changeFocusedDay:Lt,changeMonth:cn,handleChangeMonth:En,isDateDisabled:Gn,onMonthSwitchingAnimationEnd:un}=yG({value:at,defaultCalendarMonth:$,referenceDate:M,reduceAnimations:j,onMonthChange:J,minDate:Ce,maxDate:Fe,shouldDisableDate:N,disablePast:R,disableFuture:D,timezone:it}),Cn=fn(ge=>{const Q=l.startOfMonth(ge),te=l.endOfMonth(ge),_e=Gn(ge)?Kf({utils:l,date:ge,minDate:l.isBefore(Ce,Q)?Q:Ce,maxDate:l.isAfter(Fe,te)?te:Fe,disablePast:R,disableFuture:D,isDateDisabled:Gn,timezone:it}):ge;_e?(Ut(_e,"finish"),J==null||J(Q)):(lt(),cn(Q)),Lt(_e,!0)}),Sn=fn(ge=>{const Q=l.startOfYear(ge),te=l.endOfYear(ge),_e=Gn(ge)?Kf({utils:l,date:ge,minDate:l.isBefore(Ce,Q)?Q:Ce,maxDate:l.isAfter(Fe,te)?te:Fe,disablePast:R,disableFuture:D,isDateDisabled:Gn,timezone:it}):ge;_e?(Ut(_e,"finish"),B==null||B(_e)):(lt(),cn(Q)),Lt(_e,!0)}),on=fn(ge=>Je(ge&&Vv(l,ge,at??Nt),"finish"));W.useEffect(()=>{at!=null&&l.isValid(at)&&cn(at)},[at]);const sn=p,an=GH(sn),In={disablePast:R,disableFuture:D,maxDate:Fe,minDate:Ce},Gt=le&&at||Ce,tn=le&&at||Fe,vn={disableHighlightToday:be,readOnly:ye,disabled:le,timezone:it},Fn=`${d}-grid-label`,qn=He!==null,Ir=W.useRef(St);W.useEffect(()=>{Ir.current!==St&&(He===Ir.current&&jt(St,!0),Ir.current=St)},[He,jt,St]);const $r=W.useMemo(()=>[at],[at]);return ee.jsxs(qH,H({ref:o,className:qt(an.root,de),ownerState:sn},$t,{children:[ee.jsx(jH,{views:oe,view:St,currentMonth:Ft.currentMonth,onViewChange:Wt,onMonthChange:(ge,Q)=>En({newMonth:ge,direction:Q}),minDate:Gt,maxDate:tn,disabled:le,disablePast:R,disableFuture:D,reduceAnimations:j,labelId:Fn,slots:nt,slotProps:xt,timezone:it}),ee.jsx(ZH,{reduceAnimations:j,className:an.viewTransitionContainer,transKey:St,ownerState:sn,children:ee.jsxs("div",{children:[St==="year"&&ee.jsx(yH,H({},In,vn,{value:at,onChange:Sn,shouldDisableYear:Y,hasFocus:qn,onFocusedViewChange:ge=>jt("year",ge),yearsPerRow:ht,referenceDate:Nt})),St==="month"&&ee.jsx(oH,H({},In,vn,{hasFocus:qn,className:de,value:at,onChange:Cn,shouldDisableMonth:G,onFocusedViewChange:ge=>jt("month",ge),monthsPerRow:mt,referenceDate:Nt})),St==="day"&&ee.jsx(qG,H({},Ft,In,vn,{onMonthSwitchingAnimationEnd:un,onFocusedDayChange:Lt,reduceAnimations:j,selectedDays:$r,onSelectedDaysChange:on,shouldDisableDate:N,shouldDisableMonth:G,shouldDisableYear:Y,hasFocus:qn,onFocusedViewChange:ge=>jt("day",ge),gridLabelId:Fn,showDaysOutsideCurrentMonth:Be,fixedWeekNumber:Ae,dayOfWeekFormatter:Se,displayWeekNumber:vt,components:ke,componentsProps:Ne,slots:nt,slotProps:xt,loading:gt,renderLoading:rt}))]})})]}))}),ah=({view:e,onViewChange:t,views:o,focusedView:l,onFocusedViewChange:d,value:p,defaultValue:y,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minDate:R,maxDate:$,shouldDisableDate:V,shouldDisableMonth:B,shouldDisableYear:J,reduceAnimations:j,onMonthChange:N,monthsPerRow:G,onYearChange:Y,yearsPerRow:K,defaultCalendarMonth:oe,components:ie,componentsProps:de,slots:le,slotProps:ye,loading:Ce,renderLoading:Fe,disableHighlightToday:be,readOnly:we,disabled:he,showDaysOutsideCurrentMonth:Be,dayOfWeekFormatter:Ae,sx:Se,autoFocus:ke,fixedWeekNumber:Ne,displayWeekNumber:nt,timezone:xt})=>ee.jsx(dE,{view:e,onViewChange:t,views:o.filter(oh),focusedView:l&&oh(l)?l:null,onFocusedViewChange:d,value:p,defaultValue:y,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minDate:R,maxDate:$,shouldDisableDate:V,shouldDisableMonth:B,shouldDisableYear:J,reduceAnimations:j,onMonthChange:N,monthsPerRow:G,onYearChange:Y,yearsPerRow:K,defaultCalendarMonth:oe,components:ie,componentsProps:de,slots:le,slotProps:ye,loading:Ce,renderLoading:Fe,disableHighlightToday:be,readOnly:we,disabled:he,showDaysOutsideCurrentMonth:Be,dayOfWeekFormatter:Ae,sx:Se,autoFocus:ke,fixedWeekNumber:Ne,displayWeekNumber:nt,timezone:xt});function XH(e){return wn("MuiDivider",e)}const hS=yn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),YH=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],KH=e=>{const{absolute:t,children:o,classes:l,flexItem:d,light:p,orientation:y,textAlign:a,variant:w}=e;return xn({root:["root",t&&"absolute",w,p&&"light",y==="vertical"&&"vertical",d&&"flexItem",o&&"withChildren",o&&y==="vertical"&&"withChildrenVertical",a==="right"&&y!=="vertical"&&"textAlignRight",a==="left"&&y!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",y==="vertical"&&"wrapperVertical"]},XH,l)},JH=dt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.absolute&&t.absolute,t[o.variant],o.light&&t.light,o.orientation==="vertical"&&t.vertical,o.flexItem&&t.flexItem,o.children&&t.withChildren,o.children&&o.orientation==="vertical"&&t.withChildrenVertical,o.textAlign==="right"&&o.orientation!=="vertical"&&t.textAlignRight,o.textAlign==="left"&&o.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>H({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Kn(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>H({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>H({},t.children&&t.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}}),({theme:e,ownerState:t})=>H({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}}),({ownerState:e})=>H({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),QH=dt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.wrapper,o.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>H({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),eq=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiDivider"}),{absolute:d=!1,children:p,className:y,component:a=p?"div":"hr",flexItem:w=!1,light:C=!1,orientation:M="horizontal",role:D=a!=="hr"?"separator":void 0,textAlign:R="center",variant:$="fullWidth"}=l,V=Bt(l,YH),B=H({},l,{absolute:d,component:a,flexItem:w,light:C,orientation:M,role:D,textAlign:R,variant:$}),J=KH(B);return ee.jsx(JH,H({as:a,className:qt(J.root,y),role:D,ref:o,ownerState:B},V,{children:p?ee.jsx(QH,{className:J.wrapper,ownerState:B,children:p}):null}))}),pS=eq;function tq(e){return wn("MuiMultiSectionDigitalClock",e)}yn("MuiMultiSectionDigitalClock",["root"]);const nq=yn("MuiListItemIcon",["root","alignItemsFlexStart"]),fS=nq,rq=yn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),mS=rq;function iq(e){return wn("MuiMenuItem",e)}const oq=yn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Pf=oq,sq=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],aq=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.divider&&t.divider,!o.disableGutters&&t.gutters]},lq=e=>{const{disabled:t,dense:o,divider:l,disableGutters:d,selected:p,classes:y}=e,w=xn({root:["root",o&&"dense",t&&"disabled",!d&&"gutters",l&&"divider",p&&"selected"]},iq,y);return H({},y,w)},cq=dt(el,{shouldForwardProp:e=>ba(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:aq})(({theme:e,ownerState:t})=>H({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Pf.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Pf.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Pf.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Pf.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Pf.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${hS.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${hS.inset}`]:{marginLeft:52},[`& .${mS.root}`]:{marginTop:0,marginBottom:0},[`& .${mS.inset}`]:{paddingLeft:36},[`& .${fS.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&H({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${fS.root} svg`]:{fontSize:"1.25rem"}}))),uq=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiMenuItem"}),{autoFocus:d=!1,component:p="li",dense:y=!1,divider:a=!1,disableGutters:w=!1,focusVisibleClassName:C,role:M="menuitem",tabIndex:D,className:R}=l,$=Bt(l,sq),V=W.useContext(uu),B=W.useMemo(()=>({dense:y||V.dense||!1,disableGutters:w}),[V.dense,y,w]),J=W.useRef(null);Ei(()=>{d&&J.current&&J.current.focus()},[d]);const j=H({},l,{dense:B.dense,divider:a,disableGutters:w}),N=lq(l),G=zr(J,o);let Y;return l.disabled||(Y=D!==void 0?D:-1),ee.jsx(uu.Provider,{value:B,children:ee.jsx(cq,H({ref:G,role:M,tabIndex:Y,component:p,focusVisibleClassName:qt(N.focusVisible,C),className:qt(N.root,R)},$,{ownerState:j,classes:N}))})}),dq=uq;function hq(e){return wn("MuiMultiSectionDigitalClock",e)}const pq=yn("MuiMultiSectionDigitalClock",["root","item"]),fq=["autoFocus","onChange","className","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],mq=e=>{const{classes:t}=e;return xn({root:["root"],item:["item"]},hq,t)},gq=dt(fC,{name:"MuiMultiSectionDigitalClockSection",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>({maxHeight:cG,width:56,padding:0,overflow:"hidden",scrollBehavior:t.alreadyRendered?"smooth":"auto","&:hover":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},"&:after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"}})),yq=dt(dq,{name:"MuiMultiSectionDigitalClockSection",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:8,margin:"2px 4px",width:Lf,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:Kn(e.palette.primary.main,e.palette.action.focusOpacity)}})),_q=W.forwardRef(function(t,o){var l;const d=W.useRef(null),p=zr(o,d),y=mn({props:t,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:a,onChange:w,className:C,disabled:M,readOnly:D,items:R,active:$,slots:V,slotProps:B,skipDisabled:J}=y,j=Bt(y,fq),N=W.useMemo(()=>H({},y,{alreadyRendered:!!d.current}),[y]),G=mq(N),Y=(l=V==null?void 0:V.digitalClockSectionItem)!=null?l:yq;return W.useEffect(()=>{if(d.current===null)return;const K=d.current.querySelector('[role="option"][aria-selected="true"]');if(!K)return;$&&a&&K.focus();const oe=K.offsetTop;d.current.scrollTop=oe-4}),ee.jsx(gq,H({ref:p,className:qt(G.root,C),ownerState:N,autoFocusItem:a&&$,role:"listbox"},j,{children:R.map(K=>{var oe,ie;if(J&&(oe=K.isDisabled)!=null&&oe.call(K,K.value))return null;const de=K.isSelected(K.value);return ee.jsx(Y,H({onClick:()=>!D&&w(K.value),selected:de,disabled:M||((ie=K.isDisabled)==null?void 0:ie.call(K,K.value)),disableRipple:D,role:"option","aria-disabled":D,"aria-label":K.ariaLabel,"aria-selected":de},B==null?void 0:B.digitalClockSectionItem,{children:K.label}),K.label)})}))}),xq=({now:e,value:t,utils:o,ampm:l,isDisabled:d,resolveAriaLabel:p,timeStep:y})=>{const a=t?o.getHours(t):null,w=[],C=D=>a===null?!1:l?D===12?a===12||a===0:a===D||a-12===D:a===D,M=l?11:23;for(let D=0;D<=M;D+=y){let R=o.format(o.setHours(e,D),l?"hours12h":"hours24h");const $=p(parseInt(R,10).toString());R=o.formatNumber(R),w.push({value:D,label:R,isSelected:C,isDisabled:d,ariaLabel:$})}return w},gS=({value:e,isDisabled:t,timeStep:o,resolveLabel:l,resolveAriaLabel:d,hasValue:p=!0})=>{const y=a=>e===null?!1:p&&e===a;return[...Array.from({length:Math.ceil(60/o)},(a,w)=>{const C=o*w;return{value:C,label:l(C),isDisabled:t,isSelected:y,ariaLabel:d(C.toString())}})]},vq=["ampm","timeSteps","autoFocus","components","componentsProps","slots","slotProps","value","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableClock","shouldDisableTime","onChange","defaultValue","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","skipDisabled","timezone"],bq=e=>{const{classes:t}=e;return xn({root:["root"]},tq,t)},wq=dt($3,{name:"MuiMultiSectionDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",flexDirection:"row",width:"100%",borderBottom:`1px solid ${(e.vars||e).palette.divider}`})),Sq=W.forwardRef(function(t,o){const l=Er(),d=mn({props:t,name:"MuiMultiSectionDigitalClock"}),{ampm:p=l.is12HourCycleInCurrentLocale(),timeSteps:y,autoFocus:a,components:w,componentsProps:C,slots:M,slotProps:D,value:R,disableIgnoringDatePartForTimeValidation:$=!1,maxTime:V,minTime:B,disableFuture:J,disablePast:j,minutesStep:N=1,shouldDisableClock:G,shouldDisableTime:Y,onChange:K,defaultValue:oe,view:ie,views:de=["hours","minutes"],openTo:le,onViewChange:ye,focusedView:Ce,onFocusedViewChange:Fe,className:be,disabled:we,readOnly:he,skipDisabled:Be=!1,timezone:Ae}=d,Se=Bt(d,vq),{value:ke,handleValueChange:Ne,timezone:nt}=V1({name:"MultiSectionDigitalClock",timezone:Ae,value:R,defaultValue:oe,onChange:K,valueManager:qs}),xt=Zs(),gt=Eu(nt),rt=W.useMemo(()=>H({hours:1,minutes:5,seconds:5},y),[y]),vt=fn((Ft,Lt,cn)=>Ne(Ft,Lt,cn)),ht=W.useMemo(()=>!p||!de.includes("hours")||de.includes("meridiem")?de:[...de,"meridiem"],[p,de]),{view:mt,setValueAndGoToView:Ot,focusedView:$t}=u_({view:ie,views:ht,openTo:le,onViewChange:ye,onChange:vt,focusedView:Ce,onFocusedViewChange:Fe}),at=W.useMemo(()=>ke||l.setSeconds(l.setMinutes(l.setHours(gt,0),0),0),[ke,gt,l]),Je=fn(Ft=>{Ot(Ft,null,"meridiem")}),{meridiemMode:it,handleMeridiemChange:St}=B3(at,p,Je,"finish"),Wt=W.useCallback((Ft,Lt)=>{const cn=s_($,l),En=Lt==="hours"||Lt==="minutes"&&ht.includes("seconds"),Gn=({start:Cn,end:Sn})=>!(B&&cn(B,Sn)||V&&cn(Cn,V)||J&&cn(Cn,gt)||j&&cn(gt,En?Sn:Cn)),un=(Cn,Sn=1)=>{if(Cn%Sn!==0||G!=null&&G(Cn,Lt))return!1;if(Y)switch(Lt){case"hours":return!Y(l.setHours(at,Cn),"hours");case"minutes":return!Y(l.setMinutes(at,Cn),"minutes");case"seconds":return!Y(l.setSeconds(at,Cn),"seconds");default:return!1}return!0};switch(Lt){case"hours":{const Cn=C1(Ft,it,p),Sn=l.setHours(at,Cn),on=l.setSeconds(l.setMinutes(Sn,0),0),sn=l.setSeconds(l.setMinutes(Sn,59),59);return!Gn({start:on,end:sn})||!un(Cn)}case"minutes":{const Cn=l.setMinutes(at,Ft),Sn=l.setSeconds(Cn,0),on=l.setSeconds(Cn,59);return!Gn({start:Sn,end:on})||!un(Ft,N)}case"seconds":{const Cn=l.setSeconds(at,Ft);return!Gn({start:Cn,end:Cn})||!un(Ft)}default:throw new Error("not supported")}},[p,at,$,V,it,B,N,G,Y,l,J,j,gt,ht]),He=fn((Ft,Lt)=>{const cn=ht.indexOf(Ft),En=ht[cn+1];Ot(Lt,En,Ft)}),jt=W.useCallback(Ft=>{switch(Ft){case"hours":return{onChange:Lt=>{const cn=C1(Lt,it,p);He("hours",l.setHours(at,cn))},items:xq({now:gt,value:ke,ampm:p,utils:l,isDisabled:Lt=>we||Wt(Lt,"hours"),timeStep:rt.hours,resolveAriaLabel:xt.hoursClockNumberText})};case"minutes":return{onChange:Lt=>{He("minutes",l.setMinutes(at,Lt))},items:gS({value:l.getMinutes(at),isDisabled:Lt=>we||Wt(Lt,"minutes"),resolveLabel:Lt=>l.format(l.setMinutes(gt,Lt),"minutes"),timeStep:rt.minutes,hasValue:!!ke,resolveAriaLabel:xt.minutesClockNumberText})};case"seconds":return{onChange:Lt=>{He("seconds",l.setSeconds(at,Lt))},items:gS({value:l.getSeconds(at),isDisabled:Lt=>we||Wt(Lt,"seconds"),resolveLabel:Lt=>l.format(l.setSeconds(gt,Lt),"seconds"),timeStep:rt.seconds,hasValue:!!ke,resolveAriaLabel:xt.secondsClockNumberText})};case"meridiem":{const Lt=l.getMeridiemText("am"),cn=l.getMeridiemText("pm");return{onChange:St,items:[{value:"am",label:Lt,isSelected:()=>!!ke&&it==="am",ariaLabel:Lt},{value:"pm",label:cn,isSelected:()=>!!ke&&it==="pm",ariaLabel:cn}]}}default:throw new Error(`Unknown view: ${Ft} found.`)}},[gt,ke,p,l,rt.hours,rt.minutes,rt.seconds,xt.hoursClockNumberText,xt.minutesClockNumberText,xt.secondsClockNumberText,it,He,at,we,Wt,St]),lt=W.useMemo(()=>ht.reduce((Ft,Lt)=>H({},Ft,{[Lt]:jt(Lt)}),{}),[ht,jt]),Ut=d,Nt=bq(Ut);return ee.jsx(wq,H({ref:o,className:qt(Nt.root,be),ownerState:Ut,role:"group"},Se,{children:Object.entries(lt).map(([Ft,Lt])=>ee.jsx(_q,{items:Lt.items,onChange:Lt.onChange,active:mt===Ft,autoFocus:a??$t===Ft,disabled:we,readOnly:he,slots:M??w,slotProps:D??C,skipDisabled:Be,"aria-label":xt.selectViewText(Ft)},Ft))}))}),Tq=dt("div")({display:"flex",margin:"0 auto"}),Yc=({view:e,onViewChange:t,views:o,focusedView:l,onFocusedViewChange:d,value:p,defaultValue:y,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minDate:R,minTime:$,maxDate:V,maxTime:B,shouldDisableDate:J,shouldDisableMonth:j,shouldDisableYear:N,shouldDisableTime:G,shouldDisableClock:Y,reduceAnimations:K,minutesStep:oe,ampm:ie,onMonthChange:de,monthsPerRow:le,onYearChange:ye,yearsPerRow:Ce,defaultCalendarMonth:Fe,components:be,componentsProps:we,slots:he,slotProps:Be,loading:Ae,renderLoading:Se,disableHighlightToday:ke,readOnly:Ne,disabled:nt,showDaysOutsideCurrentMonth:xt,dayOfWeekFormatter:gt,sx:rt,autoFocus:vt,fixedWeekNumber:ht,displayWeekNumber:mt,timezone:Ot,disableIgnoringDatePartForTimeValidation:$t,timeSteps:at,skipDisabled:Je,timeViewsCount:it})=>{var St,Wt,He;const jt=!!((St=_h((He=Be==null?void 0:Be.actionBar)!=null?He:we==null?void 0:we.actionBar,{}))!=null&&(Wt=St.actions)!=null&&Wt.length);return ee.jsxs(W.Fragment,{children:[ee.jsxs(Tq,{children:[ee.jsx(dE,{view:oh(e)?e:"day",onViewChange:t,views:o.filter(oh),focusedView:l&&oh(l)?l:null,onFocusedViewChange:d,value:p,defaultValue:y,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minDate:R,maxDate:V,shouldDisableDate:J,shouldDisableMonth:j,shouldDisableYear:N,reduceAnimations:K,onMonthChange:de,monthsPerRow:le,onYearChange:ye,yearsPerRow:Ce,defaultCalendarMonth:Fe,components:be,componentsProps:we,slots:he,slotProps:Be,loading:Ae,renderLoading:Se,disableHighlightToday:ke,readOnly:Ne,disabled:nt,showDaysOutsideCurrentMonth:xt,dayOfWeekFormatter:gt,sx:rt,autoFocus:vt,fixedWeekNumber:ht,displayWeekNumber:mt,timezone:Ot}),it>0&&ee.jsxs(W.Fragment,{children:[ee.jsx(pS,{orientation:"vertical"}),ee.jsx(Sq,{view:Mx(e)?e:"hours",onViewChange:t,focusedView:l&&Mx(l)?l:null,onFocusedViewChange:d,views:o.filter(Mx),value:p,defaultValue:y,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minTime:$,maxTime:B,shouldDisableTime:G,shouldDisableClock:Y,minutesStep:oe,ampm:ie,components:be,componentsProps:we,slots:he,slotProps:Be,readOnly:Ne,disabled:nt,sx:H({borderBottom:0,width:"auto",[`.${pq.root}`]:{maxHeight:"100%"}},Array.isArray(rt)?rt:[rt]),autoFocus:vt,disableIgnoringDatePartForTimeValidation:$t,timeSteps:at,skipDisabled:Je,timezone:Ot})]})]}),jt&&ee.jsx(pS,{})]})};function Cq(e){return wn("MuiInputAdornment",e)}const Eq=yn("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),yS=Eq;var _S;const kq=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Pq=(e,t)=>{const{ownerState:o}=e;return[t.root,t[`position${en(o.position)}`],o.disablePointerEvents===!0&&t.disablePointerEvents,t[o.variant]]},Mq=e=>{const{classes:t,disablePointerEvents:o,hiddenLabel:l,position:d,size:p,variant:y}=e,a={root:["root",o&&"disablePointerEvents",d&&`position${en(d)}`,y,l&&"hiddenLabel",p&&`size${en(p)}`]};return xn(a,Cq,t)},Iq=dt("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Pq})(({theme:e,ownerState:t})=>H({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${yS.positionStart}&:not(.${yS.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),Aq=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiInputAdornment"}),{children:d,className:p,component:y="div",disablePointerEvents:a=!1,disableTypography:w=!1,position:C,variant:M}=l,D=Bt(l,kq),R=Tu()||{};let $=M;M&&R.variant,R&&!$&&($=R.variant);const V=H({},l,{hiddenLabel:R.hiddenLabel,size:R.size,disablePointerEvents:a,position:C,variant:$}),B=Mq(V);return ee.jsx(Gy.Provider,{value:null,children:ee.jsx(Iq,H({as:y,ownerState:V,className:qt(B.root,p),ref:o},D,{children:typeof d=="string"&&!w?ee.jsx(Qa,{color:"text.secondary",children:d}):ee.jsxs(W.Fragment,{children:[C==="start"?_S||(_S=ee.jsx("span",{className:"notranslate",children:""})):null,d]})}))})}),hE=Aq,Dq=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],zq=dt(UF,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Rq=W.forwardRef(function(t,o){var l;const d=o3(),p=mn({props:t,name:"MuiPopper"}),{anchorEl:y,component:a,components:w,componentsProps:C,container:M,disablePortal:D,keepMounted:R,modifiers:$,open:V,placement:B,popperOptions:J,popperRef:j,transition:N,slots:G,slotProps:Y}=p,K=Bt(p,Dq),oe=(l=G==null?void 0:G.root)!=null?l:w==null?void 0:w.Root,ie=H({anchorEl:y,container:M,disablePortal:D,keepMounted:R,modifiers:$,open:V,placement:B,popperOptions:J,popperRef:j,transition:N},K);return ee.jsx(zq,H({as:a,direction:d==null?void 0:d.direction,slots:{root:oe},slotProps:Y??C},ie,{ref:o}))}),N3=Rq;function Lq(e){return wn("MuiPickersPopper",e)}yn("MuiPickersPopper",["root","paper"]);const Oq=e=>{const{classes:t}=e;return xn({root:["root"],paper:["paper"]},Lq,t)},Bq=dt(N3,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({zIndex:e.zIndex.modal})),Fq=dt(Dh,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({ownerState:e})=>H({transformOrigin:"top center",outline:0},e.placement==="top"&&{transformOrigin:"bottom center"}));function $q(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Nq(e,t){const o=W.useRef(!1),l=W.useRef(!1),d=W.useRef(null),p=W.useRef(!1);W.useEffect(()=>{if(!e)return;function w(){p.current=!0}return document.addEventListener("mousedown",w,!0),document.addEventListener("touchstart",w,!0),()=>{document.removeEventListener("mousedown",w,!0),document.removeEventListener("touchstart",w,!0),p.current=!1}},[e]);const y=fn(w=>{if(!p.current)return;const C=l.current;l.current=!1;const M=Ci(d.current);if(!d.current||"clientX"in w&&$q(w,M))return;if(o.current){o.current=!1;return}let D;w.composedPath?D=w.composedPath().indexOf(d.current)>-1:D=!M.documentElement.contains(w.target)||d.current.contains(w.target),!D&&!C&&t(w)}),a=()=>{l.current=!0};return W.useEffect(()=>{if(e){const w=Ci(d.current),C=()=>{o.current=!0};return w.addEventListener("touchstart",y),w.addEventListener("touchmove",C),()=>{w.removeEventListener("touchstart",y),w.removeEventListener("touchmove",C)}}},[e,y]),W.useEffect(()=>{if(e){const w=Ci(d.current);return w.addEventListener("click",y),()=>{w.removeEventListener("click",y),l.current=!1}}},[e,y]),[d,a,a]}function jq(e){var t,o,l,d;const p=mn({props:e,name:"MuiPickersPopper"}),{anchorEl:y,children:a,containerRef:w=null,shouldRestoreFocus:C,onBlur:M,onDismiss:D,open:R,role:$,placement:V,slots:B,slotProps:J}=p;W.useEffect(()=>{function Ae(Se){R&&(Se.key==="Escape"||Se.key==="Esc")&&D()}return document.addEventListener("keydown",Ae),()=>{document.removeEventListener("keydown",Ae)}},[D,R]);const j=W.useRef(null);W.useEffect(()=>{$==="tooltip"||C&&!C()||(R?j.current=W0(document):j.current&&j.current instanceof HTMLElement&&setTimeout(()=>{j.current instanceof HTMLElement&&j.current.focus()}))},[R,$,C]);const[N,G,Y]=Nq(R,M??D),K=W.useRef(null),oe=zr(K,w),ie=zr(oe,N),de=p,le=Oq(de),ye=Ae=>{Ae.key==="Escape"&&(Ae.stopPropagation(),D())},Ce=(t=B==null?void 0:B.desktopTransition)!=null?t:_C,Fe=(o=B==null?void 0:B.desktopTrapFocus)!=null?o:Z9,be=(l=B==null?void 0:B.desktopPaper)!=null?l:Fq,we=Fr({elementType:be,externalSlotProps:J==null?void 0:J.desktopPaper,additionalProps:{tabIndex:-1,elevation:8,ref:ie},className:le.paper,ownerState:{}}),he=(d=B==null?void 0:B.popper)!=null?d:Bq,Be=Fr({elementType:he,externalSlotProps:J==null?void 0:J.popper,additionalProps:{transition:!0,role:$,open:R,anchorEl:y,placement:V,onKeyDown:ye},className:le.root,ownerState:p});return ee.jsx(he,H({},Be,{children:({TransitionProps:Ae,placement:Se})=>ee.jsx(Fe,H({open:R,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:$==="tooltip",isEnabled:()=>!0},J==null?void 0:J.desktopTrapFocus,{children:ee.jsx(Ce,H({},Ae,J==null?void 0:J.desktopTransition,{children:ee.jsx(be,H({},we,{onClick:ke=>{var Ne;G(ke),(Ne=we.onClick)==null||Ne.call(we,ke)},onTouchStart:ke=>{var Ne;Y(ke),(Ne=we.onTouchStart)==null||Ne.call(we,ke)},ownerState:H({},de,{placement:Se}),children:a}))}))}))}))}const Uq=({open:e,onOpen:t,onClose:o})=>{const l=W.useRef(typeof e=="boolean").current,[d,p]=W.useState(!1);W.useEffect(()=>{if(l){if(typeof e!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");p(e)}},[l,e]);const y=W.useCallback(a=>{l||p(a),a&&t&&t(),!a&&o&&o()},[l,t,o]);return{isOpen:d,setIsOpen:y}},Vq=e=>{const{action:t,hasChanged:o,dateState:l,isControlled:d}=e,p=!d&&!l.hasBeenModifiedSinceMount;return t.name==="setValueFromField"?!0:t.name==="setValueFromAction"?p&&["accept","today","clear"].includes(t.pickerAction)?!0:o(l.lastPublishedValue):t.name==="setValueFromView"&&t.selectionState!=="shallow"||t.name==="setValueFromShortcut"&&t.changeImportance==="accept"?p?!0:o(l.lastPublishedValue):!1},Wq=e=>{const{action:t,hasChanged:o,dateState:l,isControlled:d,closeOnSelect:p}=e,y=!d&&!l.hasBeenModifiedSinceMount;return t.name==="setValueFromAction"?y&&["accept","today","clear"].includes(t.pickerAction)?!0:o(l.lastCommittedValue):t.name==="setValueFromView"&&t.selectionState==="finish"&&p?y?!0:o(l.lastCommittedValue):t.name==="setValueFromShortcut"?t.changeImportance==="accept"&&o(l.lastCommittedValue):!1},Gq=e=>{const{action:t,closeOnSelect:o}=e;return t.name==="setValueFromAction"?!0:t.name==="setValueFromView"?t.selectionState==="finish"&&o:t.name==="setValueFromShortcut"?t.changeImportance==="accept":!1},Hq=({props:e,valueManager:t,valueType:o,wrapperVariant:l,validator:d})=>{const{onAccept:p,onChange:y,value:a,defaultValue:w,closeOnSelect:C=l==="desktop",selectedSections:M,onSelectedSectionsChange:D,timezone:R}=e,{current:$}=W.useRef(w),{current:V}=W.useRef(a!==void 0),B=Er(),J=Cu(),[j,N]=jo({controlled:M,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:G,setIsOpen:Y}=Uq(e),[K,oe]=W.useState(()=>{let mt;return a!==void 0?mt=a:$!==void 0?mt=$:mt=t.emptyValue,{draft:mt,lastPublishedValue:mt,lastCommittedValue:mt,lastControlledValue:a,hasBeenModifiedSinceMount:!1}}),{timezone:ie,handleValueChange:de}=L3({timezone:R,value:a,defaultValue:$,onChange:y,valueManager:t});WC(H({},e,{value:K.draft,timezone:ie}),d,t.isSameError,t.defaultErrorState);const le=fn(mt=>{const Ot={action:mt,dateState:K,hasChanged:it=>!t.areValuesEqual(B,mt.value,it),isControlled:V,closeOnSelect:C},$t=Vq(Ot),at=Wq(Ot),Je=Gq(Ot);if(oe(it=>H({},it,{draft:mt.value,lastPublishedValue:$t?mt.value:it.lastPublishedValue,lastCommittedValue:at?mt.value:it.lastCommittedValue,hasBeenModifiedSinceMount:!0})),$t){const St={validationError:mt.name==="setValueFromField"?mt.context.validationError:d({adapter:J,value:mt.value,props:H({},e,{value:mt.value,timezone:ie})})};de(mt.value,St)}at&&p&&p(mt.value),Je&&Y(!1)});if(a!==void 0&&(K.lastControlledValue===void 0||!t.areValuesEqual(B,K.lastControlledValue,a))){const mt=t.areValuesEqual(B,K.draft,a);oe(Ot=>H({},Ot,{lastControlledValue:a},mt?{}:{lastCommittedValue:a,lastPublishedValue:a,draft:a,hasBeenModifiedSinceMount:!0}))}const ye=fn(()=>{le({value:t.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),Ce=fn(()=>{le({value:K.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),Fe=fn(()=>{le({value:K.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),be=fn(()=>{le({value:K.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),we=fn(()=>{le({value:t.getTodayValue(B,ie,o),name:"setValueFromAction",pickerAction:"today"})}),he=fn(()=>Y(!0)),Be=fn(()=>Y(!1)),Ae=fn((mt,Ot="partial")=>le({name:"setValueFromView",value:mt,selectionState:Ot})),Se=fn((mt,Ot)=>le({name:"setValueFromShortcut",value:mt,changeImportance:Ot??"accept"})),ke=fn((mt,Ot)=>le({name:"setValueFromField",value:mt,context:Ot})),Ne=fn(mt=>{N(mt),D==null||D(mt)}),nt={onClear:ye,onAccept:Ce,onDismiss:Fe,onCancel:be,onSetToday:we,onOpen:he,onClose:Be},xt={value:K.draft,onChange:ke,selectedSections:j,onSelectedSectionsChange:Ne},gt=W.useMemo(()=>t.cleanValue(B,K.draft),[B,t,K.draft]),rt={value:gt,onChange:Ae,onClose:Be,open:G,onSelectedSectionsChange:Ne},ht=H({},nt,{value:gt,onChange:Ae,onSelectShortcut:Se,isValid:mt=>{const Ot=d({adapter:J,value:mt,props:H({},e,{value:mt,timezone:ie})});return!t.hasError(Ot)}});return{open:G,fieldProps:xt,viewProps:rt,layoutProps:ht,actions:nt}},qq=["className","sx"],Zq=({props:e,propsFromPickerValue:t,additionalViewProps:o,inputRef:l,autoFocusView:d})=>{const{onChange:p,open:y,onSelectedSectionsChange:a,onClose:w}=t,{views:C,openTo:M,onViewChange:D,disableOpenPicker:R,viewRenderers:$,timezone:V}=e,B=Bt(e,qq),{view:J,setView:j,defaultView:N,focusedView:G,setFocusedView:Y,setValueAndGoToNextView:K}=u_({view:void 0,views:C,openTo:M,onChange:p,onViewChange:D,autoFocus:d}),{hasUIView:oe,viewModeLookup:ie}=W.useMemo(()=>C.reduce((we,he)=>{let Be;return R?Be="field":$[he]!=null?Be="UI":Be="field",we.viewModeLookup[he]=Be,Be==="UI"&&(we.hasUIView=!0),we},{hasUIView:!1,viewModeLookup:{}}),[R,$,C]),de=W.useMemo(()=>C.reduce((we,he)=>$[he]!=null&&V0(he)?we+1:we,0),[$,C]),le=ie[J],ye=fn(()=>le==="UI"),[Ce,Fe]=W.useState(le==="UI"?J:null);return Ce!==J&&ie[J]==="UI"&&Fe(J),Ei(()=>{le==="field"&&y&&(w(),setTimeout(()=>{l==null||l.current.focus(),a(J)}))},[J]),Ei(()=>{if(!y)return;let we=J;le==="field"&&Ce!=null&&(we=Ce),we!==N&&ie[we]==="UI"&&ie[N]==="UI"&&(we=N),we!==J&&j(we),Y(we,!0)},[y]),{hasUIView:oe,shouldRestoreFocus:ye,layoutProps:{views:C,view:Ce,onViewChange:j},renderCurrentView:()=>{if(Ce==null)return null;const we=$[Ce];return we==null?null:we(H({},B,o,t,{views:C,timezone:V,onChange:K,view:Ce,onViewChange:j,focusedView:G,onFocusedViewChange:Y,showViewSwitcher:de>1,timeViewsCount:de}))}}};function xS(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const Xq=(e,t)=>{const[o,l]=W.useState(xS);return Ei(()=>{const p=()=>{l(xS())};return window.addEventListener("orientationchange",p),()=>{window.removeEventListener("orientationchange",p)}},[]),QU(e,["hours","minutes","seconds"])?!1:(t||o)==="landscape"},Yq=({props:e,propsFromPickerValue:t,propsFromPickerViews:o,wrapperVariant:l})=>{const{orientation:d}=e,p=Xq(o.views,d);return{layoutProps:H({},o,t,{isLandscape:p,wrapperVariant:l,disabled:e.disabled,readOnly:e.readOnly})}};zC(["The `renderInput` prop has been removed in version 6.0 of the Date and Time Pickers.","You can replace it with the `textField` component slot in most cases.","For more information, please have a look at the migration guide (https://mui.com/x/migration/migration-pickers-v5/#input-renderer-required-in-v5)."]);const pE=({props:e,valueManager:t,valueType:o,wrapperVariant:l,inputRef:d,additionalViewProps:p,validator:y,autoFocusView:a})=>{const w=Hq({props:e,valueManager:t,valueType:o,wrapperVariant:l,validator:y}),C=Zq({props:e,inputRef:d,additionalViewProps:p,autoFocusView:a,propsFromPickerValue:w.viewProps}),M=Yq({props:e,wrapperVariant:l,propsFromPickerValue:w.layoutProps,propsFromPickerViews:C.layoutProps});return{open:w.open,actions:w.actions,fieldProps:w.fieldProps,renderCurrentView:C.renderCurrentView,hasUIView:C.hasUIView,shouldRestoreFocus:C.shouldRestoreFocus,layoutProps:M.layoutProps}};function fE(e){return wn("MuiPickersLayout",e)}const Ax=yn("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","shortcuts"]);function Kq(e){return wn("MuiDialogActions",e)}yn("MuiDialogActions",["root","spacing"]);const Jq=["className","disableSpacing"],Qq=e=>{const{classes:t,disableSpacing:o}=e;return xn({root:["root",!o&&"spacing"]},Kq,t)},eZ=dt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableSpacing&&t.spacing]}})(({ownerState:e})=>H({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),tZ=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiDialogActions"}),{className:d,disableSpacing:p=!1}=l,y=Bt(l,Jq),a=H({},l,{disableSpacing:p}),w=Qq(a);return ee.jsx(eZ,H({className:qt(w.root,d),ownerState:a,ref:o},y))}),nZ=tZ,rZ=["onAccept","onClear","onCancel","onSetToday","actions"];function iZ(e){const{onAccept:t,onClear:o,onCancel:l,onSetToday:d,actions:p}=e,y=Bt(e,rZ),a=Zs();if(p==null||p.length===0)return null;const w=p==null?void 0:p.map(C=>{switch(C){case"clear":return ee.jsx(Rf,{onClick:o,children:a.clearButtonLabel},C);case"cancel":return ee.jsx(Rf,{onClick:l,children:a.cancelButtonLabel},C);case"accept":return ee.jsx(Rf,{onClick:t,children:a.okButtonLabel},C);case"today":return ee.jsx(Rf,{onClick:d,children:a.todayButtonLabel},C);default:return null}});return ee.jsx(nZ,H({},y,{children:w}))}function oZ(e){return wn("MuiListItem",e)}const sZ=yn("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),Od=sZ,aZ=yn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),lZ=aZ;function cZ(e){return wn("MuiListItemSecondaryAction",e)}yn("MuiListItemSecondaryAction",["root","disableGutters"]);const uZ=["className"],dZ=e=>{const{disableGutters:t,classes:o}=e;return xn({root:["root",t&&"disableGutters"]},cZ,o)},hZ=dt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.disableGutters&&t.disableGutters]}})(({ownerState:e})=>H({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),mE=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiListItemSecondaryAction"}),{className:d}=l,p=Bt(l,uZ),y=W.useContext(uu),a=H({},l,{disableGutters:y.disableGutters}),w=dZ(a);return ee.jsx(hZ,H({className:qt(w.root,d),ownerState:a,ref:o},p))});mE.muiName="ListItemSecondaryAction";const pZ=mE,fZ=["className"],mZ=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],gZ=(e,t)=>{const{ownerState:o}=e;return[t.root,o.dense&&t.dense,o.alignItems==="flex-start"&&t.alignItemsFlexStart,o.divider&&t.divider,!o.disableGutters&&t.gutters,!o.disablePadding&&t.padding,o.button&&t.button,o.hasSecondaryAction&&t.secondaryAction]},yZ=e=>{const{alignItems:t,button:o,classes:l,dense:d,disabled:p,disableGutters:y,disablePadding:a,divider:w,hasSecondaryAction:C,selected:M}=e;return xn({root:["root",d&&"dense",!y&&"gutters",!a&&"padding",w&&"divider",p&&"disabled",o&&"button",t==="flex-start"&&"alignItemsFlexStart",C&&"secondaryAction",M&&"selected"],container:["container"]},oZ,l)},_Z=dt("div",{name:"MuiListItem",slot:"Root",overridesResolver:gZ})(({theme:e,ownerState:t})=>H({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&H({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${lZ.root}`]:{paddingRight:48}},{[`&.${Od.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Od.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Od.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Od.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Od.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),xZ=dt("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),vZ=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiListItem"}),{alignItems:d="center",autoFocus:p=!1,button:y=!1,children:a,className:w,component:C,components:M={},componentsProps:D={},ContainerComponent:R="li",ContainerProps:{className:$}={},dense:V=!1,disabled:B=!1,disableGutters:J=!1,disablePadding:j=!1,divider:N=!1,focusVisibleClassName:G,secondaryAction:Y,selected:K=!1,slotProps:oe={},slots:ie={}}=l,de=Bt(l.ContainerProps,fZ),le=Bt(l,mZ),ye=W.useContext(uu),Ce=W.useMemo(()=>({dense:V||ye.dense||!1,alignItems:d,disableGutters:J}),[d,ye.dense,V,J]),Fe=W.useRef(null);Ei(()=>{p&&Fe.current&&Fe.current.focus()},[p]);const be=W.Children.toArray(a),we=be.length&&Qg(be[be.length-1],["ListItemSecondaryAction"]),he=H({},l,{alignItems:d,autoFocus:p,button:y,dense:Ce.dense,disabled:B,disableGutters:J,disablePadding:j,divider:N,hasSecondaryAction:we,selected:K}),Be=yZ(he),Ae=zr(Fe,o),Se=ie.root||M.Root||_Z,ke=oe.root||D.root||{},Ne=H({className:qt(Be.root,ke.className,w),disabled:B},le);let nt=C||"li";return y&&(Ne.component=C||"div",Ne.focusVisibleClassName=qt(Od.focusVisible,G),nt=el),we?(nt=!Ne.component&&!C?"div":nt,R==="li"&&(nt==="li"?nt="div":Ne.component==="li"&&(Ne.component="div")),ee.jsx(uu.Provider,{value:Ce,children:ee.jsxs(xZ,H({as:R,className:qt(Be.container,$),ref:Ae,ownerState:he},de,{children:[ee.jsx(Se,H({},ke,!xu(Se)&&{as:nt,ownerState:H({},he,ke.ownerState)},Ne,{children:be})),be.pop()]}))})):ee.jsx(uu.Provider,{value:Ce,children:ee.jsxs(Se,H({},ke,{as:nt,ref:Ae},!xu(Se)&&{ownerState:H({},he,ke.ownerState)},Ne,{children:[be,Y&&ee.jsx(pZ,{children:Y})]}))})}),bZ=vZ,wZ=xs(ee.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function SZ(e){return wn("MuiChip",e)}const TZ=yn("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),gr=TZ,CZ=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],EZ=e=>{const{classes:t,disabled:o,size:l,color:d,iconColor:p,onDelete:y,clickable:a,variant:w}=e,C={root:["root",w,o&&"disabled",`size${en(l)}`,`color${en(d)}`,a&&"clickable",a&&`clickableColor${en(d)}`,y&&"deletable",y&&`deletableColor${en(d)}`,`${w}${en(d)}`],label:["label",`label${en(l)}`],avatar:["avatar",`avatar${en(l)}`,`avatarColor${en(d)}`],icon:["icon",`icon${en(l)}`,`iconColor${en(p)}`],deleteIcon:["deleteIcon",`deleteIcon${en(l)}`,`deleteIconColor${en(d)}`,`deleteIcon${en(w)}Color${en(d)}`]};return xn(C,SZ,t)},kZ=dt("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e,{color:l,iconColor:d,clickable:p,onDelete:y,size:a,variant:w}=o;return[{[`& .${gr.avatar}`]:t.avatar},{[`& .${gr.avatar}`]:t[`avatar${en(a)}`]},{[`& .${gr.avatar}`]:t[`avatarColor${en(l)}`]},{[`& .${gr.icon}`]:t.icon},{[`& .${gr.icon}`]:t[`icon${en(a)}`]},{[`& .${gr.icon}`]:t[`iconColor${en(d)}`]},{[`& .${gr.deleteIcon}`]:t.deleteIcon},{[`& .${gr.deleteIcon}`]:t[`deleteIcon${en(a)}`]},{[`& .${gr.deleteIcon}`]:t[`deleteIconColor${en(l)}`]},{[`& .${gr.deleteIcon}`]:t[`deleteIcon${en(w)}Color${en(l)}`]},t.root,t[`size${en(a)}`],t[`color${en(l)}`],p&&t.clickable,p&&l!=="default"&&t[`clickableColor${en(l)})`],y&&t.deletable,y&&l!=="default"&&t[`deletableColor${en(l)}`],t[w],t[`${w}${en(l)}`]]}})(({theme:e,ownerState:t})=>{const o=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return H({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${gr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${gr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:o,fontSize:e.typography.pxToRem(12)},[`& .${gr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${gr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${gr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${gr.icon}`]:H({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&H({color:e.vars?e.vars.palette.Chip.defaultIconColor:o},t.color!=="default"&&{color:"inherit"})),[`& .${gr.deleteIcon}`]:H({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:Kn(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Kn(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:Kn(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${gr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Kn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${gr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>H({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Kn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${gr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Kn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${gr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>H({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${gr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${gr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${gr.avatar}`]:{marginLeft:4},[`& .${gr.avatarSmall}`]:{marginLeft:2},[`& .${gr.icon}`]:{marginLeft:4},[`& .${gr.iconSmall}`]:{marginLeft:2},[`& .${gr.deleteIcon}`]:{marginRight:5},[`& .${gr.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Kn(e.palette[t.color].main,.7)}`,[`&.${gr.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Kn(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${gr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Kn(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${gr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Kn(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),PZ=dt("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:o}=e,{size:l}=o;return[t.label,t[`label${en(l)}`]]}})(({ownerState:e})=>H({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function vS(e){return e.key==="Backspace"||e.key==="Delete"}const MZ=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiChip"}),{avatar:d,className:p,clickable:y,color:a="default",component:w,deleteIcon:C,disabled:M=!1,icon:D,label:R,onClick:$,onDelete:V,onKeyDown:B,onKeyUp:J,size:j="medium",variant:N="filled",tabIndex:G,skipFocusWhenDisabled:Y=!1}=l,K=Bt(l,CZ),oe=W.useRef(null),ie=zr(oe,o),de=ke=>{ke.stopPropagation(),V&&V(ke)},le=ke=>{ke.currentTarget===ke.target&&vS(ke)&&ke.preventDefault(),B&&B(ke)},ye=ke=>{ke.currentTarget===ke.target&&(V&&vS(ke)?V(ke):ke.key==="Escape"&&oe.current&&oe.current.blur()),J&&J(ke)},Ce=y!==!1&&$?!0:y,Fe=Ce||V?el:w||"div",be=H({},l,{component:Fe,disabled:M,size:j,color:a,iconColor:W.isValidElement(D)&&D.props.color||a,onDelete:!!V,clickable:Ce,variant:N}),we=EZ(be),he=Fe===el?H({component:w||"div",focusVisibleClassName:we.focusVisible},V&&{disableRipple:!0}):{};let Be=null;V&&(Be=C&&W.isValidElement(C)?W.cloneElement(C,{className:qt(C.props.className,we.deleteIcon),onClick:de}):ee.jsx(wZ,{className:qt(we.deleteIcon),onClick:de}));let Ae=null;d&&W.isValidElement(d)&&(Ae=W.cloneElement(d,{className:qt(we.avatar,d.props.className)}));let Se=null;return D&&W.isValidElement(D)&&(Se=W.cloneElement(D,{className:qt(we.icon,D.props.className)})),ee.jsxs(kZ,H({as:Fe,className:qt(we.root,p),disabled:Ce&&M?!0:void 0,onClick:$,onKeyDown:le,onKeyUp:ye,ref:ie,tabIndex:Y&&M?-1:G,ownerState:be},he,K,{children:[Ae||Se,ee.jsx(PZ,{className:qt(we.label),ownerState:be,children:R}),Be]}))}),gE=MZ,IZ=["items","changeImportance","isLandscape","onChange","isValid"];function AZ(e){const{items:t,changeImportance:o,onChange:l,isValid:d}=e,p=Bt(e,IZ);if(t==null||t.length===0)return null;const y=t.map(a=>{const w=a.getValue({isValid:d});return{label:a.label,onClick:()=>{l(w,o)},disabled:!d(w)}});return ee.jsx(hC,H({dense:!0,sx:[{maxHeight:eE,maxWidth:200,overflow:"auto"},...Array.isArray(p.sx)?p.sx:[p.sx]]},p,{children:y.map(a=>ee.jsx(bZ,{children:ee.jsx(gE,H({},a))},a.label))}))}function DZ(e){return e.view!==null}const zZ=e=>{const{classes:t,isLandscape:o}=e;return xn({root:["root",o&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},fE,t)},RZ=e=>{var t,o;const{wrapperVariant:l,onAccept:d,onClear:p,onCancel:y,onSetToday:a,view:w,views:C,onViewChange:M,value:D,onChange:R,onSelectShortcut:$,isValid:V,isLandscape:B,disabled:J,readOnly:j,children:N,components:G,componentsProps:Y,slots:K,slotProps:oe}=e,ie=K??F3(G),de=oe??Y,le=zZ(e),ye=(t=ie==null?void 0:ie.actionBar)!=null?t:iZ,Ce=Fr({elementType:ye,externalSlotProps:de==null?void 0:de.actionBar,additionalProps:{onAccept:d,onClear:p,onCancel:y,onSetToday:a,actions:l==="desktop"?[]:["cancel","accept"],className:le.actionBar},ownerState:H({},e,{wrapperVariant:l})}),Fe=ee.jsx(ye,H({},Ce)),be=ie==null?void 0:ie.toolbar,we=Fr({elementType:be,externalSlotProps:de==null?void 0:de.toolbar,additionalProps:{isLandscape:B,onChange:R,value:D,view:w,onViewChange:M,views:C,disabled:J,readOnly:j,className:le.toolbar},ownerState:H({},e,{wrapperVariant:l})}),he=DZ(we)&&be?ee.jsx(be,H({},we)):null,Be=N,Ae=ie==null?void 0:ie.tabs,Se=w&&Ae?ee.jsx(Ae,H({view:w,onViewChange:M},de==null?void 0:de.tabs)):null,ke=(o=ie==null?void 0:ie.shortcuts)!=null?o:AZ,Ne=Fr({elementType:ke,externalSlotProps:de==null?void 0:de.shortcuts,additionalProps:{isValid:V,isLandscape:B,onChange:$,className:le.shortcuts},ownerState:{isValid:V,isLandscape:B,onChange:$,className:le.shortcuts,wrapperVariant:l}}),nt=w&&ke?ee.jsx(ke,H({},Ne)):null;return{toolbar:he,content:Be,tabs:Se,actionBar:Fe,shortcuts:nt}},LZ=RZ,OZ=e=>{const{isLandscape:t,classes:o}=e;return xn({root:["root",t&&"landscape"],contentWrapper:["contentWrapper"]},fE,o)},yE=dt("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Ax.toolbar}`]:t.isLandscape?{gridColumn:e.direction==="rtl"?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${Ax.shortcuts}`]:t.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:e.direction==="rtl"?3:1,gridRow:"2 / 3"},[`& .${Ax.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}));yE.propTypes={as:$e.elementType,ownerState:$e.shape({isLandscape:$e.bool.isRequired}).isRequired,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object])};const BZ=dt("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,t)=>t.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),_E=function(t){const o=mn({props:t,name:"MuiPickersLayout"}),{toolbar:l,content:d,tabs:p,actionBar:y,shortcuts:a}=LZ(o),{sx:w,className:C,isLandscape:M,ref:D,wrapperVariant:R}=o,$=o,V=OZ($);return ee.jsxs(yE,{ref:D,sx:w,className:qt(C,V.root),ownerState:$,children:[M?a:l,M?l:a,ee.jsx(BZ,{className:V.contentWrapper,children:R==="desktop"?ee.jsxs(W.Fragment,{children:[d,p]}):ee.jsxs(W.Fragment,{children:[p,d]})}),y]})},FZ=["props","getOpenDialogAriaText"],$Z=["ownerState"],NZ=["ownerState"],jZ=e=>{var t,o,l,d,p;let{props:y,getOpenDialogAriaText:a}=e,w=Bt(e,FZ);const{slots:C,slotProps:M,className:D,sx:R,format:$,formatDensity:V,timezone:B,label:J,inputRef:j,readOnly:N,disabled:G,autoFocus:Y,localeText:K}=y,oe=Er(),ie=W.useRef(null),de=W.useRef(null),le=Su(),ye=(t=M==null||(o=M.toolbar)==null?void 0:o.hidden)!=null?t:!1,{open:Ce,actions:Fe,hasUIView:be,layoutProps:we,renderCurrentView:he,shouldRestoreFocus:Be,fieldProps:Ae}=pE(H({},w,{props:y,inputRef:ie,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),Se=(l=C.inputAdornment)!=null?l:hE,ke=Fr({elementType:Se,externalSlotProps:M==null?void 0:M.inputAdornment,additionalProps:{position:"end"},ownerState:y}),Ne=Bt(ke,$Z),nt=(d=C.openPickerButton)!=null?d:ku,xt=Fr({elementType:nt,externalSlotProps:M==null?void 0:M.openPickerButton,additionalProps:{disabled:G||N,onClick:Fe.onOpen,"aria-label":a(Ae.value,oe),edge:Ne.position},ownerState:y}),gt=Bt(xt,NZ),rt=C.openPickerIcon,vt=C.field,ht=Fr({elementType:vt,externalSlotProps:M==null?void 0:M.field,additionalProps:H({},Ae,ye&&{id:le},{readOnly:N,disabled:G,className:D,sx:R,format:$,formatDensity:V,timezone:B,label:J,autoFocus:Y&&!y.open,focused:Ce?!0:void 0}),ownerState:y});be&&(ht.InputProps=H({},ht.InputProps,{ref:de,[`${Ne.position}Adornment`]:ee.jsx(Se,H({},Ne,{children:ee.jsx(nt,H({},gt,{children:ee.jsx(rt,H({},M==null?void 0:M.openPickerIcon))}))}))}));const mt=H({textField:C.textField},ht.slots),Ot=(p=C.layout)!=null?p:_E,$t=zr(ie,ht.inputRef,j);let at=le;ye&&(J?at=`${le}-label`:at=void 0);const Je=H({},M,{toolbar:H({},M==null?void 0:M.toolbar,{titleId:le}),popper:H({"aria-labelledby":at},M==null?void 0:M.popper)});return{renderPicker:()=>ee.jsxs(A3,{localeText:K,children:[ee.jsx(vt,H({},ht,{slots:mt,slotProps:Je,inputRef:$t})),ee.jsx(jq,H({role:"dialog",placement:"bottom-start",anchorEl:de.current},Fe,{open:Ce,slots:C,slotProps:Je,shouldRestoreFocus:Be,children:ee.jsx(Ot,H({},we,Je==null?void 0:Je.layout,{slots:C,slotProps:Je,children:he()}))}))]})}},UZ=["views","format"],xE=(e,t)=>{let{views:o,format:l}=t,d=Bt(t,UZ);if(l)return l;const p=[],y=[];if(o.forEach(C=>{V0(C)?y.push(C):p.push(C)}),y.length===0)return H7(e,H({views:p},d),!1);if(p.length===0)return Z7(e,H({views:y},d));const a=Z7(e,H({views:y},d));return`${H7(e,H({views:p},d),!1)} ${a}`},vE=W.forwardRef(function(t,o){var l,d,p,y,a;const w=Zs(),C=Er(),M=rE(t,"MuiDesktopDateTimePicker"),D=H({hours:1,minutes:5,seconds:5},M.timeSteps),R=!M.viewRenderers||Object.keys(M.viewRenderers).length===0,$=R?{day:Yc,month:Yc,year:Yc,hours:Yc,minutes:Yc,seconds:Yc,meridiem:Yc}:H({day:ah,month:ah,year:ah,hours:null,minutes:null,seconds:null,meridiem:null},M.viewRenderers),V=(l=M.ampmInClock)!=null?l:!0,B=R?["accept"]:[],J=H({},M,{viewRenderers:$,format:xE(C,M),views:M.ampm?[...M.views,"meridiem"]:M.views,yearsPerRow:(d=M.yearsPerRow)!=null?d:4,ampmInClock:V,timeSteps:D,slots:H({field:ZC,openPickerIcon:hW},M.slots),slotProps:H({},M.slotProps,{field:N=>{var G;return H({},_h((G=M.slotProps)==null?void 0:G.field,N),qC(M),{ref:o})},toolbar:H({hidden:!0,ampmInClock:V,toolbarVariant:R?"desktop":"mobile"},(p=M.slotProps)==null?void 0:p.toolbar),tabs:H({hidden:!0},(y=M.slotProps)==null?void 0:y.tabs),actionBar:H({actions:B},(a=M.slotProps)==null?void 0:a.actionBar)})}),{renderPicker:j}=jZ({props:J,valueManager:qs,valueType:"date-time",getOpenDialogAriaText:w.openDatePickerDialogue,validator:O3});return j()});vE.propTypes={ampm:$e.bool,ampmInClock:$e.bool,autoFocus:$e.bool,className:$e.string,closeOnSelect:$e.bool,components:$e.object,componentsProps:$e.object,dayOfWeekFormatter:$e.func,defaultCalendarMonth:$e.any,defaultValue:$e.any,disabled:$e.bool,disableFuture:$e.bool,disableHighlightToday:$e.bool,disableIgnoringDatePartForTimeValidation:$e.bool,disableOpenPicker:$e.bool,disablePast:$e.bool,displayWeekNumber:$e.bool,fixedWeekNumber:$e.number,format:$e.string,formatDensity:$e.oneOf(["dense","spacious"]),inputRef:$e.oneOfType([$e.func,$e.shape({current:$e.object})]),label:$e.node,loading:$e.bool,localeText:$e.object,maxDate:$e.any,maxDateTime:$e.any,maxTime:$e.any,minDate:$e.any,minDateTime:$e.any,minTime:$e.any,minutesStep:$e.number,monthsPerRow:$e.oneOf([3,4]),onAccept:$e.func,onChange:$e.func,onClose:$e.func,onError:$e.func,onMonthChange:$e.func,onOpen:$e.func,onSelectedSectionsChange:$e.func,onViewChange:$e.func,onYearChange:$e.func,open:$e.bool,openTo:$e.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:$e.oneOf(["landscape","portrait"]),readOnly:$e.bool,reduceAnimations:$e.bool,renderLoading:$e.func,selectedSections:$e.oneOfType([$e.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),$e.number,$e.shape({endIndex:$e.number.isRequired,startIndex:$e.number.isRequired})]),shouldDisableClock:$e.func,shouldDisableDate:$e.func,shouldDisableMonth:$e.func,shouldDisableTime:$e.func,shouldDisableYear:$e.func,showDaysOutsideCurrentMonth:$e.bool,skipDisabled:$e.bool,slotProps:$e.object,slots:$e.object,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object]),timeSteps:$e.shape({hours:$e.number,minutes:$e.number,seconds:$e.number}),timezone:$e.string,value:$e.any,view:$e.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:$e.shape({day:$e.func,hours:$e.func,meridiem:$e.func,minutes:$e.func,month:$e.func,seconds:$e.func,year:$e.func}),views:$e.arrayOf($e.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsPerRow:$e.oneOf([3,4])};function VZ(e){return wn("MuiDialogContent",e)}yn("MuiDialogContent",["root","dividers"]);const WZ=yn("MuiDialogTitle",["root"]),GZ=WZ,HZ=["className","dividers"],qZ=e=>{const{classes:t,dividers:o}=e;return xn({root:["root",o&&"dividers"]},VZ,t)},ZZ=dt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>H({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${GZ.root} + &`]:{paddingTop:0}})),XZ=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiDialogContent"}),{className:d,dividers:p=!1}=l,y=Bt(l,HZ),a=H({},l,{dividers:p}),w=qZ(a);return ee.jsx(ZZ,H({className:qt(w.root,d),ownerState:a,ref:o},y))}),YZ=XZ;function KZ(e){return wn("MuiDialog",e)}const JZ=yn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Jf=JZ,QZ=W.createContext({}),eX=QZ,tX=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],nX=dt(xC,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),rX=e=>{const{classes:t,scroll:o,maxWidth:l,fullWidth:d,fullScreen:p}=e,y={root:["root"],container:["container",`scroll${en(o)}`],paper:["paper",`paperScroll${en(o)}`,`paperWidth${en(String(l))}`,d&&"paperFullWidth",p&&"paperFullScreen"]};return xn(y,KZ,t)},iX=dt(vC,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),oX=dt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.container,t[`scroll${en(o.scroll)}`]]}})(({ownerState:e})=>H({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),sX=dt(Dh,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`scrollPaper${en(o.scroll)}`],t[`paperWidth${en(String(o.maxWidth))}`],o.fullWidth&&t.paperFullWidth,o.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>H({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${Jf.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${Jf.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Jf.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),aX=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiDialog"}),d=ys(),p={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{"aria-describedby":y,"aria-labelledby":a,BackdropComponent:w,BackdropProps:C,children:M,className:D,disableEscapeKeyDown:R=!1,fullScreen:$=!1,fullWidth:V=!1,maxWidth:B="sm",onBackdropClick:J,onClose:j,open:N,PaperComponent:G=Dh,PaperProps:Y={},scroll:K="paper",TransitionComponent:oe=j1,transitionDuration:ie=p,TransitionProps:de}=l,le=Bt(l,tX),ye=H({},l,{disableEscapeKeyDown:R,fullScreen:$,fullWidth:V,maxWidth:B,scroll:K}),Ce=rX(ye),Fe=W.useRef(),be=Ae=>{Fe.current=Ae.target===Ae.currentTarget},we=Ae=>{Fe.current&&(Fe.current=null,J&&J(Ae),j&&j(Ae,"backdropClick"))},he=Su(a),Be=W.useMemo(()=>({titleId:he}),[he]);return ee.jsx(iX,H({className:qt(Ce.root,D),closeAfterTransition:!0,components:{Backdrop:nX},componentsProps:{backdrop:H({transitionDuration:ie,as:w},C)},disableEscapeKeyDown:R,onClose:j,open:N,ref:o,onClick:we,ownerState:ye},le,{children:ee.jsx(oe,H({appear:!0,in:N,timeout:ie,role:"presentation"},de,{children:ee.jsx(oX,{className:qt(Ce.container),onMouseDown:be,ownerState:ye,children:ee.jsx(sX,H({as:G,elevation:24,role:"dialog","aria-describedby":y,"aria-labelledby":he},Y,{className:qt(Ce.paper,Y.className),ownerState:ye,children:ee.jsx(eX.Provider,{value:Be,children:M})}))})}))}))}),lX=aX,cX=dt(lX)({[`& .${Jf.container}`]:{outline:0},[`& .${Jf.paper}`]:{outline:0,minWidth:QC}}),uX=dt(YZ)({"&:first-of-type":{padding:0}});function dX(e){var t,o;const{children:l,onDismiss:d,open:p,slots:y,slotProps:a}=e,w=(t=y==null?void 0:y.dialog)!=null?t:cX,C=(o=y==null?void 0:y.mobileTransition)!=null?o:j1;return ee.jsx(w,H({open:p,onClose:d},a==null?void 0:a.dialog,{TransitionComponent:C,TransitionProps:a==null?void 0:a.mobileTransition,PaperComponent:y==null?void 0:y.mobilePaper,PaperProps:a==null?void 0:a.mobilePaper,children:ee.jsx(uX,{children:l})}))}const hX=["props","getOpenDialogAriaText"],pX=e=>{var t,o,l;let{props:d,getOpenDialogAriaText:p}=e,y=Bt(e,hX);const{slots:a,slotProps:w,className:C,sx:M,format:D,formatDensity:R,timezone:$,label:V,inputRef:B,readOnly:J,disabled:j,localeText:N}=d,G=Er(),Y=W.useRef(null),K=Su(),oe=(t=w==null||(o=w.toolbar)==null?void 0:o.hidden)!=null?t:!1,{open:ie,actions:de,layoutProps:le,renderCurrentView:ye,fieldProps:Ce}=pE(H({},y,{props:d,inputRef:Y,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),Fe=a.field,be=Fr({elementType:Fe,externalSlotProps:w==null?void 0:w.field,additionalProps:H({},Ce,oe&&{id:K},!(j||J)&&{onClick:de.onOpen,onKeyDown:eV(de.onOpen)},{readOnly:J??!0,disabled:j,className:C,sx:M,format:D,formatDensity:R,timezone:$,label:V}),ownerState:d});be.inputProps=H({},be.inputProps,{"aria-label":p(Ce.value,G)});const we=H({textField:a.textField},be.slots),he=(l=a.layout)!=null?l:_E,Be=zr(Y,be.inputRef,B);let Ae=K;oe&&(V?Ae=`${K}-label`:Ae=void 0);const Se=H({},w,{toolbar:H({},w==null?void 0:w.toolbar,{titleId:K}),mobilePaper:H({"aria-labelledby":Ae},w==null?void 0:w.mobilePaper)});return{renderPicker:()=>ee.jsxs(A3,{localeText:N,children:[ee.jsx(Fe,H({},be,{slots:we,slotProps:Se,inputRef:Be})),ee.jsx(dX,H({},de,{open:ie,slots:a,slotProps:Se,children:ee.jsx(he,H({},le,Se==null?void 0:Se.layout,{slots:a,slotProps:Se,children:ye()}))}))]})}};function fX(e){return wn("MuiTimeClock",e)}yn("MuiTimeClock",["root","arrowSwitcher"]);const Sh=220,Ql=36,P1={x:Sh/2,y:Sh/2},bE={x:P1.x,y:0},mX=bE.x-P1.x,gX=bE.y-P1.y,yX=e=>e*(180/Math.PI),wE=(e,t,o)=>{const l=t-P1.x,d=o-P1.y,p=Math.atan2(mX,gX)-Math.atan2(l,d);let y=yX(p);y=Math.round(y/e)*e,y%=360;const a=Math.floor(y/e)||0,w=l**2+d**2,C=Math.sqrt(w);return{value:a,distance:C}},_X=(e,t,o=1)=>{const l=o*6;let{value:d}=wE(l,e,t);return d=d*o%60,d},xX=(e,t,o)=>{const{value:l,distance:d}=wE(30,e,t);let p=l||12;return o?p%=12:d<Sh/2-Ql&&(p+=12,p%=24),p};function vX(e){return wn("MuiClockPointer",e)}yn("MuiClockPointer",["root","thumb"]);const bX=["className","hasSelected","isInner","type","viewValue"],wX=e=>{const{classes:t}=e;return xn({root:["root"],thumb:["thumb"]},vX,t)},SX=dt("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>H({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},t.shouldAnimate&&{transition:e.transitions.create(["transform","height"])})),TX=dt("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e,ownerState:t})=>H({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:`calc(50% - ${Ql/2}px)`,border:`${(Ql-4)/2}px solid ${(e.vars||e).palette.primary.main}`,boxSizing:"content-box"},t.hasSelected&&{backgroundColor:(e.vars||e).palette.primary.main}));function CX(e){const t=mn({props:e,name:"MuiClockPointer"}),{className:o,isInner:l,type:d,viewValue:p}=t,y=Bt(t,bX),a=W.useRef(d);W.useEffect(()=>{a.current=d},[d]);const w=H({},t,{shouldAnimate:a.current!==d}),C=wX(w),M=()=>{let R=360/(d==="hours"?12:60)*p;return d==="hours"&&p>12&&(R-=360),{height:Math.round((l?.26:.4)*Sh),transform:`rotateZ(${R}deg)`}};return ee.jsx(SX,H({style:M(),className:qt(o,C.root),ownerState:w},y,{children:ee.jsx(TX,{ownerState:w,className:C.thumb})}))}function EX(e){return wn("MuiClock",e)}yn("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton"]);const kX=e=>{const{classes:t}=e;return xn({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton"],pmButton:["pmButton"]},EX,t)},PX=dt("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),MX=dt("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),IX=dt("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),AX=dt("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})(({ownerState:e})=>H({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none"},e.disabled?{}:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}})),DX=dt("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),zX=dt(ku,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})(({theme:e,ownerState:t})=>H({zIndex:1,position:"absolute",bottom:8,left:8},t.meridiemMode==="am"&&{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}})),RX=dt(ku,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})(({theme:e,ownerState:t})=>H({zIndex:1,position:"absolute",bottom:8,right:8},t.meridiemMode==="pm"&&{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}));function LX(e){const t=mn({props:e,name:"MuiClock"}),{ampm:o,ampmInClock:l,autoFocus:d,children:p,value:y,handleMeridiemChange:a,isTimeDisabled:w,meridiemMode:C,minutesStep:M=1,onChange:D,selectedId:R,type:$,viewValue:V,disabled:B,readOnly:J,className:j}=t,N=t,G=Er(),Y=Zs(),K=W.useRef(!1),oe=kX(N),ie=w(V,$),de=!o&&$==="hours"&&(V<1||V>12),le=(ke,Ne)=>{B||J||w(ke,$)||D(ke,Ne)},ye=(ke,Ne)=>{let{offsetX:nt,offsetY:xt}=ke;if(nt===void 0){const rt=ke.target.getBoundingClientRect();nt=ke.changedTouches[0].clientX-rt.left,xt=ke.changedTouches[0].clientY-rt.top}const gt=$==="seconds"||$==="minutes"?_X(nt,xt,M):xX(nt,xt,!!o);le(gt,Ne)},Ce=ke=>{K.current=!0,ye(ke,"shallow")},Fe=ke=>{K.current&&(ye(ke,"finish"),K.current=!1)},be=ke=>{ke.buttons>0&&ye(ke.nativeEvent,"shallow")},we=ke=>{K.current&&(K.current=!1),ye(ke.nativeEvent,"finish")},he=W.useMemo(()=>$==="hours"?!0:V%5===0,[$,V]),Be=$==="minutes"?M:1,Ae=W.useRef(null);Ei(()=>{d&&Ae.current.focus()},[d]);const Se=ke=>{if(!K.current)switch(ke.key){case"Home":le(0,"partial"),ke.preventDefault();break;case"End":le($==="minutes"?59:23,"partial"),ke.preventDefault();break;case"ArrowUp":le(V+Be,"partial"),ke.preventDefault();break;case"ArrowDown":le(V-Be,"partial"),ke.preventDefault();break}};return ee.jsxs(PX,{className:qt(j,oe.root),children:[ee.jsxs(MX,{className:oe.clock,children:[ee.jsx(AX,{onTouchMove:Ce,onTouchEnd:Fe,onMouseUp:we,onMouseMove:be,ownerState:{disabled:B},className:oe.squareMask}),!ie&&ee.jsxs(W.Fragment,{children:[ee.jsx(DX,{className:oe.pin}),y!=null&&ee.jsx(CX,{type:$,viewValue:V,isInner:de,hasSelected:he})]}),ee.jsx(IX,{"aria-activedescendant":R,"aria-label":Y.clockLabelText($,y,G),ref:Ae,role:"listbox",onKeyDown:Se,tabIndex:0,className:oe.wrapper,children:p})]}),o&&l&&ee.jsxs(W.Fragment,{children:[ee.jsx(zX,{onClick:J?void 0:()=>a("am"),disabled:B||C===null,ownerState:N,className:oe.amButton,children:ee.jsx(Qa,{variant:"caption",children:"AM"})}),ee.jsx(RX,{disabled:B||C===null,onClick:J?void 0:()=>a("pm"),ownerState:N,className:oe.pmButton,children:ee.jsx(Qa,{variant:"caption",children:"PM"})})]})]})}function OX(e){return wn("MuiClockNumber",e)}const Ng=yn("MuiClockNumber",["root","selected","disabled"]),BX=["className","disabled","index","inner","label","selected"],FX=e=>{const{classes:t,selected:o,disabled:l}=e;return xn({root:["root",o&&"selected",l&&"disabled"]},OX,t)},$X=dt("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${Ng.disabled}`]:t.disabled},{[`&.${Ng.selected}`]:t.selected}]})(({theme:e,ownerState:t})=>H({height:Ql,width:Ql,position:"absolute",left:`calc((100% - ${Ql}px) / 2)`,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},[`&.${Ng.selected}`]:{color:(e.vars||e).palette.primary.contrastText},[`&.${Ng.disabled}`]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled}},t.inner&&H({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})));function SE(e){const t=mn({props:e,name:"MuiClockNumber"}),{className:o,disabled:l,index:d,inner:p,label:y,selected:a}=t,w=Bt(t,BX),C=t,M=FX(C),D=d%12/12*Math.PI*2-Math.PI/2,R=(Sh-Ql-2)/2*(p?.65:1),$=Math.round(Math.cos(D)*R),V=Math.round(Math.sin(D)*R);return ee.jsx($X,H({className:qt(o,M.root),"aria-disabled":l?!0:void 0,"aria-selected":a?!0:void 0,role:"option",style:{transform:`translate(${$}px, ${V+(Sh-Ql)/2}px`},ownerState:C},w,{children:y}))}const NX=({ampm:e,value:t,getClockNumberText:o,isDisabled:l,selectedId:d,utils:p})=>{const y=t?p.getHours(t):null,a=[],w=e?1:0,C=e?12:23,M=D=>y===null?!1:e?D===12?y===12||y===0:y===D||y-12===D:y===D;for(let D=w;D<=C;D+=1){let R=D.toString();D===0&&(R="00");const $=!e&&(D===0||D>12);R=p.formatNumber(R);const V=M(D);a.push(ee.jsx(SE,{id:V?d:void 0,index:D,inner:$,selected:V,disabled:l(D),label:R,"aria-label":o(R)},D))}return a},bS=({utils:e,value:t,isDisabled:o,getClockNumberText:l,selectedId:d})=>{const p=e.formatNumber;return[[5,p("05")],[10,p("10")],[15,p("15")],[20,p("20")],[25,p("25")],[30,p("30")],[35,p("35")],[40,p("40")],[45,p("45")],[50,p("50")],[55,p("55")],[0,p("00")]].map(([y,a],w)=>{const C=y===t;return ee.jsx(SE,{label:a,id:C?d:void 0,index:w+1,inner:!1,disabled:o(y),selected:C,"aria-label":l(a)},y)})},jX=["ampm","ampmInClock","autoFocus","components","componentsProps","slots","slotProps","value","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableClock","shouldDisableTime","showViewSwitcher","onChange","defaultValue","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","timezone"],UX=e=>{const{classes:t}=e;return xn({root:["root"],arrowSwitcher:["arrowSwitcher"]},fX,t)},VX=dt($3,{name:"MuiTimeClock",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",position:"relative"}),WX=dt(uE,{name:"MuiTimeClock",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),GX=W.forwardRef(function(t,o){const l=Er(),d=mn({props:t,name:"MuiTimeClock"}),{ampm:p=l.is12HourCycleInCurrentLocale(),ampmInClock:y=!1,autoFocus:a,components:w,componentsProps:C,slots:M,slotProps:D,value:R,disableIgnoringDatePartForTimeValidation:$=!1,maxTime:V,minTime:B,disableFuture:J,disablePast:j,minutesStep:N=1,shouldDisableClock:G,shouldDisableTime:Y,showViewSwitcher:K,onChange:oe,defaultValue:ie,view:de,views:le=["hours","minutes"],openTo:ye,onViewChange:Ce,focusedView:Fe,onFocusedViewChange:be,className:we,disabled:he,readOnly:Be,timezone:Ae}=d,Se=Bt(d,jX),ke=M??F3(w),Ne=D??C,{value:nt,handleValueChange:xt,timezone:gt}=V1({name:"TimeClock",timezone:Ae,value:R,defaultValue:ie,onChange:oe,valueManager:qs}),rt=Zs(),vt=Eu(gt),{view:ht,setView:mt,previousView:Ot,nextView:$t,setValueAndGoToNextView:at}=u_({view:de,views:le,openTo:ye,onViewChange:Ce,onChange:xt,focusedView:Fe,onFocusedViewChange:be}),Je=W.useMemo(()=>nt||l.setSeconds(l.setMinutes(l.setHours(vt,0),0),0),[nt,vt,l]),{meridiemMode:it,handleMeridiemChange:St}=B3(Je,p,at),Wt=W.useCallback((Nt,Ft)=>{const Lt=s_($,l),cn=Ft==="hours"||Ft==="minutes"&&le.includes("seconds"),En=({start:un,end:Cn})=>!(B&&Lt(B,Cn)||V&&Lt(un,V)||J&&Lt(un,vt)||j&&Lt(vt,cn?Cn:un)),Gn=(un,Cn=1)=>{if(un%Cn!==0||G!=null&&G(un,Ft))return!1;if(Y)switch(Ft){case"hours":return!Y(l.setHours(Je,un),"hours");case"minutes":return!Y(l.setMinutes(Je,un),"minutes");case"seconds":return!Y(l.setSeconds(Je,un),"seconds");default:return!1}return!0};switch(Ft){case"hours":{const un=C1(Nt,it,p),Cn=l.setHours(Je,un),Sn=l.setSeconds(l.setMinutes(Cn,0),0),on=l.setSeconds(l.setMinutes(Cn,59),59);return!En({start:Sn,end:on})||!Gn(un)}case"minutes":{const un=l.setMinutes(Je,Nt),Cn=l.setSeconds(un,0),Sn=l.setSeconds(un,59);return!En({start:Cn,end:Sn})||!Gn(Nt,N)}case"seconds":{const un=l.setSeconds(Je,Nt);return!En({start:un,end:un})||!Gn(Nt)}default:throw new Error("not supported")}},[p,Je,$,V,it,B,N,G,Y,l,J,j,vt,le]),He=Su(),jt=W.useMemo(()=>{switch(ht){case"hours":{const Nt=(Ft,Lt)=>{const cn=C1(Ft,it,p);at(l.setHours(Je,cn),Lt)};return{onChange:Nt,viewValue:l.getHours(Je),children:NX({value:nt,utils:l,ampm:p,onChange:Nt,getClockNumberText:rt.hoursClockNumberText,isDisabled:Ft=>he||Wt(Ft,"hours"),selectedId:He})}}case"minutes":{const Nt=l.getMinutes(Je),Ft=(Lt,cn)=>{at(l.setMinutes(Je,Lt),cn)};return{viewValue:Nt,onChange:Ft,children:bS({utils:l,value:Nt,onChange:Ft,getClockNumberText:rt.minutesClockNumberText,isDisabled:Lt=>he||Wt(Lt,"minutes"),selectedId:He})}}case"seconds":{const Nt=l.getSeconds(Je),Ft=(Lt,cn)=>{at(l.setSeconds(Je,Lt),cn)};return{viewValue:Nt,onChange:Ft,children:bS({utils:l,value:Nt,onChange:Ft,getClockNumberText:rt.secondsClockNumberText,isDisabled:Lt=>he||Wt(Lt,"seconds"),selectedId:He})}}default:throw new Error("You must provide the type for ClockView")}},[ht,l,nt,p,rt.hoursClockNumberText,rt.minutesClockNumberText,rt.secondsClockNumberText,it,at,Je,Wt,He,he]),lt=d,Ut=UX(lt);return ee.jsxs(VX,H({ref:o,className:qt(Ut.root,we),ownerState:lt},Se,{children:[ee.jsx(LX,H({autoFocus:a??!!Fe,ampmInClock:y&&le.includes("hours"),value:nt,type:ht,ampm:p,minutesStep:N,isTimeDisabled:Wt,meridiemMode:it,handleMeridiemChange:St,selectedId:He,disabled:he,readOnly:Be},jt)),K&&ee.jsx(WX,{className:Ut.arrowSwitcher,slots:ke,slotProps:Ne,onGoToPrevious:()=>mt(Ot),isPreviousDisabled:!Ot,previousLabel:rt.openPreviousView,onGoToNext:()=>mt($t),isNextDisabled:!$t,nextLabel:rt.openNextView,ownerState:lt})]}))}),lh=({view:e,onViewChange:t,focusedView:o,onFocusedViewChange:l,views:d,value:p,defaultValue:y,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minTime:R,maxTime:$,shouldDisableTime:V,shouldDisableClock:B,minutesStep:J,ampm:j,ampmInClock:N,components:G,componentsProps:Y,slots:K,slotProps:oe,readOnly:ie,disabled:de,sx:le,autoFocus:ye,showViewSwitcher:Ce,disableIgnoringDatePartForTimeValidation:Fe,timezone:be})=>ee.jsx(GX,{view:e,onViewChange:t,focusedView:o&&V0(o)?o:null,onFocusedViewChange:l,views:d.filter(V0),value:p,defaultValue:y,onChange:a,className:w,classes:C,disableFuture:M,disablePast:D,minTime:R,maxTime:$,shouldDisableTime:V,shouldDisableClock:B,minutesStep:J,ampm:j,ampmInClock:N,components:G,componentsProps:Y,slots:K,slotProps:oe,readOnly:ie,disabled:de,sx:le,autoFocus:ye,showViewSwitcher:Ce,disableIgnoringDatePartForTimeValidation:Fe,timezone:be}),TE=W.forwardRef(function(t,o){var l,d,p;const y=Zs(),a=Er(),w=rE(t,"MuiMobileDateTimePicker"),C=H({day:ah,month:ah,year:ah,hours:lh,minutes:lh,seconds:lh},w.viewRenderers),M=(l=w.ampmInClock)!=null?l:!1,D=H({},w,{viewRenderers:C,format:xE(a,w),ampmInClock:M,slots:H({field:ZC},w.slots),slotProps:H({},w.slotProps,{field:$=>{var V;return H({},_h((V=w.slotProps)==null?void 0:V.field,$),qC(w),{ref:o})},toolbar:H({hidden:!1,ampmInClock:M},(d=w.slotProps)==null?void 0:d.toolbar),tabs:H({hidden:!1},(p=w.slotProps)==null?void 0:p.tabs)})}),{renderPicker:R}=pX({props:D,valueManager:qs,valueType:"date-time",getOpenDialogAriaText:y.openDatePickerDialogue,validator:O3});return R()});TE.propTypes={ampm:$e.bool,ampmInClock:$e.bool,autoFocus:$e.bool,className:$e.string,closeOnSelect:$e.bool,components:$e.object,componentsProps:$e.object,dayOfWeekFormatter:$e.func,defaultCalendarMonth:$e.any,defaultValue:$e.any,disabled:$e.bool,disableFuture:$e.bool,disableHighlightToday:$e.bool,disableIgnoringDatePartForTimeValidation:$e.bool,disableOpenPicker:$e.bool,disablePast:$e.bool,displayWeekNumber:$e.bool,fixedWeekNumber:$e.number,format:$e.string,formatDensity:$e.oneOf(["dense","spacious"]),inputRef:$e.oneOfType([$e.func,$e.shape({current:$e.object})]),label:$e.node,loading:$e.bool,localeText:$e.object,maxDate:$e.any,maxDateTime:$e.any,maxTime:$e.any,minDate:$e.any,minDateTime:$e.any,minTime:$e.any,minutesStep:$e.number,monthsPerRow:$e.oneOf([3,4]),onAccept:$e.func,onChange:$e.func,onClose:$e.func,onError:$e.func,onMonthChange:$e.func,onOpen:$e.func,onSelectedSectionsChange:$e.func,onViewChange:$e.func,onYearChange:$e.func,open:$e.bool,openTo:$e.oneOf(["day","hours","minutes","month","seconds","year"]),orientation:$e.oneOf(["landscape","portrait"]),readOnly:$e.bool,reduceAnimations:$e.bool,renderLoading:$e.func,selectedSections:$e.oneOfType([$e.oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),$e.number,$e.shape({endIndex:$e.number.isRequired,startIndex:$e.number.isRequired})]),shouldDisableClock:$e.func,shouldDisableDate:$e.func,shouldDisableMonth:$e.func,shouldDisableTime:$e.func,shouldDisableYear:$e.func,showDaysOutsideCurrentMonth:$e.bool,slotProps:$e.object,slots:$e.object,sx:$e.oneOfType([$e.arrayOf($e.oneOfType([$e.func,$e.object,$e.bool])),$e.func,$e.object]),timezone:$e.string,value:$e.any,view:$e.oneOf(["day","hours","minutes","month","seconds","year"]),viewRenderers:$e.shape({day:$e.func,hours:$e.func,minutes:$e.func,month:$e.func,seconds:$e.func,year:$e.func}),views:$e.arrayOf($e.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsPerRow:$e.oneOf([3,4])};const HX=["desktopModeMediaQuery"],qX=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:d=tV}=l,p=Bt(l,HX);return kU(d,{defaultMatches:!0})?ee.jsx(vE,H({ref:o},p)):ee.jsx(TE,H({ref:o},p))});function ZX(){return ee.jsx(A3,{dateAdapter:SU,children:ee.jsx(cU,{sx:{width:270},components:["DateTimePicker"],children:ee.jsx(qX,{label:"Choose Time",viewRenderers:{hours:lh,minutes:lh,seconds:lh}})})})}function XX(e){return wn("MuiListSubheader",e)}yn("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const YX=["className","color","component","disableGutters","disableSticky","inset"],KX=e=>{const{classes:t,color:o,disableGutters:l,inset:d,disableSticky:p}=e,y={root:["root",o!=="default"&&`color${en(o)}`,!l&&"gutters",d&&"inset",!p&&"sticky"]};return xn(y,XX,t)},JX=dt("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.color!=="default"&&t[`color${en(o.color)}`],!o.disableGutters&&t.gutters,o.inset&&t.inset,!o.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>H({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),CE=W.forwardRef(function(t,o){const l=mn({props:t,name:"MuiListSubheader"}),{className:d,color:p="default",component:y="li",disableGutters:a=!1,disableSticky:w=!1,inset:C=!1}=l,M=Bt(l,YX),D=H({},l,{color:p,component:y,disableGutters:a,disableSticky:w,inset:C}),R=KX(D);return ee.jsx(JX,H({as:y,className:qt(R.root,d),ref:o,ownerState:D},M))});CE.muiSkipListHighlight=!0;const QX=CE,eY=xs(ee.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function tY(e){return wn("MuiAutocomplete",e)}const nY=yn("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),tr=nY;var wS,SS;const rY=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],iY=["ref"],oY=e=>{const{classes:t,disablePortal:o,expanded:l,focused:d,fullWidth:p,hasClearIcon:y,hasPopupIcon:a,inputFocused:w,popupOpen:C,size:M}=e,D={root:["root",l&&"expanded",d&&"focused",p&&"fullWidth",y&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",w&&"inputFocused"],tag:["tag",`tagSize${en(M)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",C&&"popupIndicatorOpen"],popper:["popper",o&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return xn(D,tY,t)},sY=dt("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e,{fullWidth:l,hasClearIcon:d,hasPopupIcon:p,inputFocused:y,size:a}=o;return[{[`& .${tr.tag}`]:t.tag},{[`& .${tr.tag}`]:t[`tagSize${en(a)}`]},{[`& .${tr.inputRoot}`]:t.inputRoot},{[`& .${tr.input}`]:t.input},{[`& .${tr.input}`]:y&&t.inputFocused},t.root,l&&t.fullWidth,p&&t.hasPopupIcon,d&&t.hasClearIcon]}})(({ownerState:e})=>H({[`&.${tr.focused} .${tr.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${tr.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${tr.tag}`]:H({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${tr.inputRoot}`]:{flexWrap:"wrap",[`.${tr.hasPopupIcon}&, .${tr.hasClearIcon}&`]:{paddingRight:26+4},[`.${tr.hasPopupIcon}.${tr.hasClearIcon}&`]:{paddingRight:52+4},[`& .${tr.input}`]:{width:0,minWidth:30}},[`& .${jl.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${jl.root}.${Lo.sizeSmall}`]:{[`& .${jl.input}`]:{padding:"2px 4px 3px 0"}},[`& .${la.root}`]:{padding:9,[`.${tr.hasPopupIcon}&, .${tr.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${tr.hasPopupIcon}.${tr.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${tr.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${tr.endAdornment}`]:{right:9}},[`& .${la.root}.${Lo.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${tr.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Oo.root}`]:{paddingTop:19,paddingLeft:8,[`.${tr.hasPopupIcon}&, .${tr.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${tr.hasPopupIcon}.${tr.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${Oo.input}`]:{padding:"7px 4px"},[`& .${tr.endAdornment}`]:{right:9}},[`& .${Oo.root}.${Lo.sizeSmall}`]:{paddingBottom:1,[`& .${Oo.input}`]:{padding:"2.5px 4px"}},[`& .${Lo.hiddenLabel}`]:{paddingTop:8},[`& .${Oo.root}.${Lo.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${tr.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Oo.root}.${Lo.hiddenLabel}.${Lo.sizeSmall}`]:{[`& .${tr.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${tr.input}`]:H({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),aY=dt("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),lY=dt(ku,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),cY=dt(ku,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>H({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>H({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),uY=dt(N3,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${tr.option}`]:t.option},t.popper,o.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>H({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),dY=dt(Dh,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>H({},e.typography.body1,{overflow:"auto"})),hY=dt("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),pY=dt("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),fY=dt("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${tr.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${tr.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${tr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${tr.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${tr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Kn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),mY=dt(QX,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),gY=dt("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${tr.option}`]:{paddingLeft:24}}),yY=W.forwardRef(function(t,o){var l,d,p,y;const a=mn({props:t,name:"MuiAutocomplete"}),{autoComplete:w=!1,autoHighlight:C=!1,autoSelect:M=!1,blurOnSelect:D=!1,ChipProps:R,className:$,clearIcon:V=wS||(wS=ee.jsx(eY,{fontSize:"small"})),clearOnBlur:B=!a.freeSolo,clearOnEscape:J=!1,clearText:j="Clear",closeText:N="Close",componentsProps:G={},defaultValue:Y=a.multiple?[]:null,disableClearable:K=!1,disableCloseOnSelect:oe=!1,disabled:ie=!1,disabledItemsFocusable:de=!1,disableListWrap:le=!1,disablePortal:ye=!1,filterSelectedOptions:Ce=!1,forcePopupIcon:Fe="auto",freeSolo:be=!1,fullWidth:we=!1,getLimitTagsText:he=Qe=>`+${Qe}`,getOptionLabel:Be=Qe=>{var ot;return(ot=Qe.label)!=null?ot:Qe},groupBy:Ae,handleHomeEndKeys:Se=!a.freeSolo,includeInputInList:ke=!1,limitTags:Ne=-1,ListboxComponent:nt="ul",ListboxProps:xt,loading:gt=!1,loadingText:rt="Loading",multiple:vt=!1,noOptionsText:ht="No options",openOnFocus:mt=!1,openText:Ot="Open",PaperComponent:$t=Dh,PopperComponent:at=N3,popupIcon:Je=SS||(SS=ee.jsx(CC,{})),readOnly:it=!1,renderGroup:St,renderInput:Wt,renderOption:He,renderTags:jt,selectOnFocus:lt=!a.freeSolo,size:Ut="medium",slotProps:Nt={}}=a,Ft=Bt(a,rY),{getRootProps:Lt,getInputProps:cn,getInputLabelProps:En,getPopupIndicatorProps:Gn,getClearProps:un,getTagProps:Cn,getListboxProps:Sn,getOptionProps:on,value:sn,dirty:an,expanded:In,id:Gt,popupOpen:tn,focused:vn,focusedTag:Fn,anchorEl:qn,setAnchorEl:Ir,inputValue:$r,groupedOptions:ge}=c$(H({},a,{componentName:"Autocomplete"})),Q=!K&&!ie&&an&&!it,te=(!be||Fe===!0)&&Fe!==!1,{onMouseDown:_e}=cn(),{ref:Me}=xt??{},Le=Sn(),{ref:We}=Le,Ve=Bt(Le,iY),Oe=zr(We,Me),Ge=H({},a,{disablePortal:ye,expanded:In,focused:vn,fullWidth:we,hasClearIcon:Q,hasPopupIcon:te,inputFocused:Fn===-1,popupOpen:tn,size:Ut}),bt=oY(Ge);let zt;if(vt&&sn.length>0){const Qe=ot=>H({className:bt.tag,disabled:ie},Cn(ot));jt?zt=jt(sn,Qe,Ge):zt=sn.map((ot,Kt)=>ee.jsx(gE,H({label:Be(ot),size:Ut},Qe({index:Kt}),R)))}if(Ne>-1&&Array.isArray(zt)){const Qe=zt.length-Ne;!vn&&Qe>0&&(zt=zt.splice(0,Ne),zt.push(ee.jsx("span",{className:bt.tag,children:he(Qe)},zt.length)))}const Pn=St||(Qe=>ee.jsxs("li",{children:[ee.jsx(mY,{className:bt.groupLabel,ownerState:Ge,component:"div",children:Qe.group}),ee.jsx(gY,{className:bt.groupUl,ownerState:Ge,children:Qe.children})]},Qe.key)),kn=He||((Qe,ot)=>ee.jsx("li",H({},Qe,{children:Be(ot)}))),An=(Qe,ot)=>{const Kt=on({option:Qe,index:ot});return kn(H({},Kt,{className:bt.option}),Qe,{selected:Kt["aria-selected"],index:ot,inputValue:$r})},$n=(l=Nt.clearIndicator)!=null?l:G.clearIndicator,or=(d=Nt.paper)!=null?d:G.paper,yr=(p=Nt.popper)!=null?p:G.popper,Nr=(y=Nt.popupIndicator)!=null?y:G.popupIndicator;return ee.jsxs(W.Fragment,{children:[ee.jsx(sY,H({ref:o,className:qt(bt.root,$),ownerState:Ge},Lt(Ft),{children:Wt({id:Gt,disabled:ie,fullWidth:!0,size:Ut==="small"?"small":void 0,InputLabelProps:En(),InputProps:H({ref:Ir,className:bt.inputRoot,startAdornment:zt,onClick:Qe=>{Qe.target===Qe.currentTarget&&_e(Qe)}},(Q||te)&&{endAdornment:ee.jsxs(aY,{className:bt.endAdornment,ownerState:Ge,children:[Q?ee.jsx(lY,H({},un(),{"aria-label":j,title:j,ownerState:Ge},$n,{className:qt(bt.clearIndicator,$n==null?void 0:$n.className),children:V})):null,te?ee.jsx(cY,H({},Gn(),{disabled:ie,"aria-label":tn?N:Ot,title:tn?N:Ot,ownerState:Ge},Nr,{className:qt(bt.popupIndicator,Nr==null?void 0:Nr.className),children:Je})):null]})}),inputProps:H({className:bt.input,disabled:ie,readOnly:it},cn())})})),qn?ee.jsx(uY,H({as:at,disablePortal:ye,style:{width:qn?qn.clientWidth:null},ownerState:Ge,role:"presentation",anchorEl:qn,open:tn},yr,{className:qt(bt.popper,yr==null?void 0:yr.className),children:ee.jsxs(dY,H({ownerState:Ge,as:$t},or,{className:qt(bt.paper,or==null?void 0:or.className),children:[gt&&ge.length===0?ee.jsx(hY,{className:bt.loading,ownerState:Ge,children:rt}):null,ge.length===0&&!be&&!gt?ee.jsx(pY,{className:bt.noOptions,ownerState:Ge,role:"presentation",onMouseDown:Qe=>{Qe.preventDefault()},children:ht}):null,ge.length>0?ee.jsx(fY,H({as:nt,className:bt.listbox,ownerState:Ge},Ve,xt,{ref:Oe,children:ge.map((Qe,ot)=>Ae?Pn({key:Qe.key,group:Qe.group,children:Qe.options.map((Kt,dn)=>An(Kt,Qe.index+dn))}):An(Qe,ot))})):null]}))})):null]})}),_Y=yY;function xY(){return ee.jsx(_Y,{multiple:!0,limitTags:2,id:"multiple-limit-tags",options:vY,getOptionLabel:e=>e.title,renderInput:e=>ee.jsx(kC,{...e,label:"Preference",placeholder:"Favorites"}),sx:{width:"270px"}})}const vY=[{title:"Parks"},{title:"WIFI"},{title:"Bench"},{title:"Cafe"},{title:"Canteen"},{title:"Library"},{title:"Landscape"}],bY=k9(),wY=NR({themeId:R1,defaultTheme:bY,defaultClassName:"MuiBox-root",generateClassName:J8.generate}),SY=wY;function TY(){const[e,t]=W.useState(""),o=l=>{const d=l.target.value.replace(/\D/g,"");t(d)};return ee.jsx(SY,{sx:{display:"flex",flexWrap:"wrap"},children:ee.jsx("div",{children:ee.jsx(uC,{sx:{m:1,width:270},variant:"outlined",children:ee.jsx(v3,{id:"outlined-adornment-weight",value:e,onChange:o,endAdornment:ee.jsx(hE,{position:"end",children:"meter"}),"aria-describedby":"outlined-weight-helper-text",inputProps:{"aria-label":"meter"}})})})})}function CY({inputValues:e,setInputValues:t}){return ee.jsxs("div",{children:[ee.jsx("img",{src:"/static/images/menu.png",className:"menu-button",alt:"Menu button"}),ee.jsxs("div",{className:"PlanWin",children:[ee.jsxs("div",{className:"PlanSet",children:[ee.jsx("div",{className:"green-bar",children:ee.jsx("span",{className:"text_bar",children:"Walking Setting"})}),ee.jsxs("div",{className:"start-place",children:[ee.jsx("span",{className:"text_bar_3",children:"Start Place:"}),ee.jsx(uB,{inputValues:e,setInputValues:t})]}),ee.jsxs("div",{className:"start-time",children:[ee.jsx("span",{className:"text_bar_3",children:"Start Time:"}),ee.jsx(ZX,{})]}),ee.jsxs("div",{className:"walk-duration",children:[ee.jsx("span",{className:"text_bar_3",children:"Distance:"}),ee.jsx("span",{className:"spacer1",children:""}),ee.jsx(TY,{})]}),ee.jsxs("div",{className:"preference",children:[ee.jsx("span",{className:"text_bar_3",children:"Preference:"}),ee.jsx(xY,{})]}),ee.jsx("div",{className:"gain-route",children:ee.jsx("button",{className:"gainroute-button",children:"Gain a Route"})})]}),ee.jsxs("div",{className:"PlanMap",children:[ee.jsxs("div",{className:"additional-blocks",children:[ee.jsx("div",{className:"additional-block-text",children:ee.jsx("span",{className:"text_bar_2",children:"Choose Position"})}),ee.jsx("div",{className:"additional-block-close",children:ee.jsx("img",{src:"/static/images/close.png",className:"close-button",alt:"Mclose button"})})]}),ee.jsx(yD,{inputValues:e})]})]})]})}const EY=()=>{const[e,t]=W.useState({first_name:"",last_name:"",email:"",address:"",password:""}),o=d=>{t({...e,[d.target.name]:d.target.value})},l=async d=>{d.preventDefault(),Vy.post("/users",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(p=>{console.log(p)}).catch(p=>{p.response?(console.log(p.response),console.log("server responded")):p.request?console.log("network error"):console.log(p)})};return ee.jsxs("div",{className:"login-area",children:[ee.jsx("h3",{children:"Registration Form"}),ee.jsxs("form",{onSubmit:l,children:[ee.jsxs("div",{children:[ee.jsx("label",{htmlFor:"first_name",children:"First Name:"}),ee.jsx("input",{type:"text",name:"first_name",id:"first_name",onChange:o})]}),ee.jsxs("div",{children:[ee.jsx("label",{htmlFor:"last_name",children:"Last Name:"}),ee.jsx("input",{type:"text",name:"last_name",onChange:o})]}),ee.jsxs("div",{children:[ee.jsx("label",{htmlFor:"email",children:"Email:"}),ee.jsx("input",{type:"text",name:"email",id:"email",onChange:o})]}),ee.jsxs("div",{children:[ee.jsx("label",{htmlFor:"address",children:"Address:"}),ee.jsx("input",{type:"text",name:"address",id:"address",onChange:o})]}),ee.jsxs("div",{children:[ee.jsx("label",{htmlFor:"password",children:"Password:"}),ee.jsx("input",{type:"text",name:"password",id:"password",onChange:o})]}),ee.jsx("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})};function kY(){const[e,t]=W.useState({latitude:"",longitude:""}),o=d=>{t({...e,[d.target.name]:d.target.value})},l=d=>{d.preventDefault(),Vy.post("/users",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(p=>{console.log(p.data)}).catch(p=>{p.response?(console.log(p.response),console.log("server responded with error")):p.request?console.log("network error"):console.log(p)})};return ee.jsx("div",{className:"comms",children:ee.jsxs("form",{onSubmit:l,children:[ee.jsx("label",{htmlFor:"latitude",children:"Latitude:"}),ee.jsx("input",{type:"text",name:"latitude",onChange:o}),ee.jsx("label",{htmlFor:"longitude",children:"Longitude:"}),ee.jsx("input",{type:"text",name:"longitude",onChange:o}),ee.jsx("button",{type:"submit",children:"Submit"})]})})}const PY=()=>{const[e,t]=W.useState({latitude:"",longitude:"",distance:"",hour:""}),o=d=>{t({...e,[d.target.name]:d.target.value})},l=d=>{d.preventDefault(),Vy.post("/users",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(p=>{console.log(p.data)}).catch(p=>{p.response?(console.log(p.response),console.log("server responded")):p.request?console.log("network error"):console.log(p)})};return ee.jsxs("div",{className:"latlondis-area",children:[ee.jsx("h3",{children:"Route Planner Inputs"}),ee.jsxs("form",{onSubmit:l,children:[ee.jsxs("div",{children:[ee.jsx("label",{htmlFor:"latitude",children:"Starting Latitude:"}),ee.jsx("input",{type:"text",name:"latitude",onChange:o})]}),ee.jsxs("div",{children:[ee.jsx("label",{htmlFor:"longitude",children:"Starting Longitude:"}),ee.jsx("input",{type:"text",name:"longitude",onChange:o})]}),ee.jsxs("div",{children:[ee.jsx("label",{htmlFor:"distance",children:"Distance to walk:"}),ee.jsx("input",{type:"text",name:"distance",onChange:o})]}),ee.jsxs("div",{children:[ee.jsx("label",{htmlFor:"distance",children:"Hour (to start walk):"}),ee.jsx("input",{type:"text",name:"hour",onChange:o})]}),ee.jsx("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})};function MY(){return ee.jsx("h2",{children:"The requested page does not exist"})}function IY(){const[e,t]=W.useState({latitude:40.74218481889335,longitude:-73.98786664009094,hour:0,waypoints:[]});return ee.jsx("div",{children:ee.jsx(cD,{children:ee.jsxs(aD,{children:[ee.jsx(Rd,{exact:!0,path:"/",element:ee.jsx(CY,{inputValues:e,setInputValues:t})}),ee.jsx(Rd,{path:"/login",element:ee.jsx(EY,{})}),ee.jsx(Rd,{path:"/comms",element:ee.jsx(kY,{})}),ee.jsx(Rd,{path:"/latlondis",element:ee.jsx(PY,{})}),ee.jsx(Rd,{path:"*",element:ee.jsx(MY,{})})]})})})}Dx.createRoot(document.getElementById("root")).render(ee.jsx(Fo.StrictMode,{children:ee.jsx(IY,{})}));
