function hj(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(i,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function V6(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var c=[null];c.push.apply(c,arguments);var d=Function.bind.apply(t,c);return new d}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var c=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,c.get?c:{enumerable:!0,get:function(){return e[i]}})}),n}var $I={exports:{}},rx={},UI={exports:{}},Nr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_=Symbol.for("react.element"),pj=Symbol.for("react.portal"),fj=Symbol.for("react.fragment"),mj=Symbol.for("react.strict_mode"),gj=Symbol.for("react.profiler"),_j=Symbol.for("react.provider"),yj=Symbol.for("react.context"),vj=Symbol.for("react.forward_ref"),xj=Symbol.for("react.suspense"),bj=Symbol.for("react.memo"),wj=Symbol.for("react.lazy"),C9=Symbol.iterator;function Ej(e){return e===null||typeof e!="object"?null:(e=C9&&e[C9]||e["@@iterator"],typeof e=="function"?e:null)}var VI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WI=Object.assign,HI={};function L1(e,t,n){this.props=e,this.context=t,this.refs=HI,this.updater=n||VI}L1.prototype.isReactComponent={};L1.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};L1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qI(){}qI.prototype=L1.prototype;function W6(e,t,n){this.props=e,this.context=t,this.refs=HI,this.updater=n||VI}var H6=W6.prototype=new qI;H6.constructor=W6;WI(H6,L1.prototype);H6.isPureReactComponent=!0;var P9=Array.isArray,GI=Object.prototype.hasOwnProperty,q6={current:null},ZI={key:!0,ref:!0,__self:!0,__source:!0};function XI(e,t,n){var i,c={},d=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(d=""+t.key),t)GI.call(t,i)&&!ZI.hasOwnProperty(i)&&(c[i]=t[i]);var a=arguments.length-2;if(a===1)c.children=n;else if(1<a){for(var v=Array(a),S=0;S<a;S++)v[S]=arguments[S+2];c.children=v}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)c[i]===void 0&&(c[i]=a[i]);return{$$typeof:e_,type:e,key:d,ref:f,props:c,_owner:q6.current}}function Tj(e,t){return{$$typeof:e_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function G6(e){return typeof e=="object"&&e!==null&&e.$$typeof===e_}function Sj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var I9=/\/+/g;function i3(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sj(""+e.key):t.toString(36)}function xv(e,t,n,i,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case e_:case pj:f=!0}}if(f)return f=e,c=c(f),e=i===""?"."+i3(f,0):i,P9(c)?(n="",e!=null&&(n=e.replace(I9,"$&/")+"/"),xv(c,t,n,"",function(S){return S})):c!=null&&(G6(c)&&(c=Tj(c,n+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(I9,"$&/")+"/")+e)),t.push(c)),1;if(f=0,i=i===""?".":i+":",P9(e))for(var a=0;a<e.length;a++){d=e[a];var v=i+i3(d,a);f+=xv(d,t,n,v,c)}else if(v=Ej(e),typeof v=="function")for(e=v.call(e),a=0;!(d=e.next()).done;)d=d.value,v=i+i3(d,a++),f+=xv(d,t,n,v,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function Ry(e,t,n){if(e==null)return e;var i=[],c=0;return xv(e,i,"","",function(d){return t.call(n,d,c++)}),i}function kj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Za={current:null},bv={transition:null},Cj={ReactCurrentDispatcher:Za,ReactCurrentBatchConfig:bv,ReactCurrentOwner:q6};Nr.Children={map:Ry,forEach:function(e,t,n){Ry(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ry(e,function(){t++}),t},toArray:function(e){return Ry(e,function(t){return t})||[]},only:function(e){if(!G6(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nr.Component=L1;Nr.Fragment=fj;Nr.Profiler=gj;Nr.PureComponent=W6;Nr.StrictMode=mj;Nr.Suspense=xj;Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cj;Nr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=WI({},e.props),c=e.key,d=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,f=q6.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(v in t)GI.call(t,v)&&!ZI.hasOwnProperty(v)&&(i[v]=t[v]===void 0&&a!==void 0?a[v]:t[v])}var v=arguments.length-2;if(v===1)i.children=n;else if(1<v){a=Array(v);for(var S=0;S<v;S++)a[S]=arguments[S+2];i.children=a}return{$$typeof:e_,type:e.type,key:c,ref:d,props:i,_owner:f}};Nr.createContext=function(e){return e={$$typeof:yj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_j,_context:e},e.Consumer=e};Nr.createElement=XI;Nr.createFactory=function(e){var t=XI.bind(null,e);return t.type=e,t};Nr.createRef=function(){return{current:null}};Nr.forwardRef=function(e){return{$$typeof:vj,render:e}};Nr.isValidElement=G6;Nr.lazy=function(e){return{$$typeof:wj,_payload:{_status:-1,_result:e},_init:kj}};Nr.memo=function(e,t){return{$$typeof:bj,type:e,compare:t===void 0?null:t}};Nr.startTransition=function(e){var t=bv.transition;bv.transition={};try{e()}finally{bv.transition=t}};Nr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Nr.useCallback=function(e,t){return Za.current.useCallback(e,t)};Nr.useContext=function(e){return Za.current.useContext(e)};Nr.useDebugValue=function(){};Nr.useDeferredValue=function(e){return Za.current.useDeferredValue(e)};Nr.useEffect=function(e,t){return Za.current.useEffect(e,t)};Nr.useId=function(){return Za.current.useId()};Nr.useImperativeHandle=function(e,t,n){return Za.current.useImperativeHandle(e,t,n)};Nr.useInsertionEffect=function(e,t){return Za.current.useInsertionEffect(e,t)};Nr.useLayoutEffect=function(e,t){return Za.current.useLayoutEffect(e,t)};Nr.useMemo=function(e,t){return Za.current.useMemo(e,t)};Nr.useReducer=function(e,t,n){return Za.current.useReducer(e,t,n)};Nr.useRef=function(e){return Za.current.useRef(e)};Nr.useState=function(e){return Za.current.useState(e)};Nr.useSyncExternalStore=function(e,t,n){return Za.current.useSyncExternalStore(e,t,n)};Nr.useTransition=function(){return Za.current.useTransition()};Nr.version="18.2.0";UI.exports=Nr;var K=UI.exports;const $t=O1(K),Xv=hj({__proto__:null,default:$t},[K]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pj=K,Ij=Symbol.for("react.element"),Aj=Symbol.for("react.fragment"),Mj=Object.prototype.hasOwnProperty,Dj=Pj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rj={key:!0,ref:!0,__self:!0,__source:!0};function KI(e,t,n){var i,c={},d=null,f=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)Mj.call(t,i)&&!Rj.hasOwnProperty(i)&&(c[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)c[i]===void 0&&(c[i]=t[i]);return{$$typeof:Ij,type:e,key:d,ref:f,props:c,_owner:Dj.current}}rx.Fragment=Aj;rx.jsx=KI;rx.jsxs=KI;$I.exports=rx;var Z=$I.exports,z4={},YI={exports:{}},Vs={},JI={exports:{}},QI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ne,et){var it=Ne.length;Ne.push(et);e:for(;0<it;){var Dt=it-1>>>1,Tt=Ne[Dt];if(0<c(Tt,et))Ne[Dt]=et,Ne[it]=Tt,it=Dt;else break e}}function n(Ne){return Ne.length===0?null:Ne[0]}function i(Ne){if(Ne.length===0)return null;var et=Ne[0],it=Ne.pop();if(it!==et){Ne[0]=it;e:for(var Dt=0,Tt=Ne.length,Rt=Tt>>>1;Dt<Rt;){var Yt=2*(Dt+1)-1,tn=Ne[Yt],dn=Yt+1,_n=Ne[dn];if(0>c(tn,it))dn<Tt&&0>c(_n,tn)?(Ne[Dt]=_n,Ne[dn]=it,Dt=dn):(Ne[Dt]=tn,Ne[Yt]=it,Dt=Yt);else if(dn<Tt&&0>c(_n,it))Ne[Dt]=_n,Ne[dn]=it,Dt=dn;else break e}}return et}function c(Ne,et){var it=Ne.sortIndex-et.sortIndex;return it!==0?it:Ne.id-et.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,a=f.now();e.unstable_now=function(){return f.now()-a}}var v=[],S=[],M=1,R=null,N=3,W=!1,V=!1,H=!1,le=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Ne){for(var et=n(S);et!==null;){if(et.callback===null)i(S);else if(et.startTime<=Ne)i(S),et.sortIndex=et.expirationTime,t(v,et);else break;et=n(S)}}function oe(Ne){if(H=!1,Q(Ne),!V)if(n(v)!==null)V=!0,rt(he);else{var et=n(S);et!==null&&tt(oe,et.startTime-Ne)}}function he(Ne,et){V=!1,H&&(H=!1,G(Re),Re=-1),W=!0;var it=N;try{for(Q(et),R=n(v);R!==null&&(!(R.expirationTime>et)||Ne&&!ot());){var Dt=R.callback;if(typeof Dt=="function"){R.callback=null,N=R.priorityLevel;var Tt=Dt(R.expirationTime<=et);et=e.unstable_now(),typeof Tt=="function"?R.callback=Tt:R===n(v)&&i(v),Q(et)}else i(v);R=n(v)}if(R!==null)var Rt=!0;else{var Yt=n(S);Yt!==null&&tt(oe,Yt.startTime-et),Rt=!1}return Rt}finally{R=null,N=it,W=!1}}var be=!1,A=null,Re=-1,_e=5,ze=-1;function ot(){return!(e.unstable_now()-ze<_e)}function gt(){if(A!==null){var Ne=e.unstable_now();ze=Ne;var et=!0;try{et=A(!0,Ne)}finally{et?Ze():(be=!1,A=null)}}else be=!1}var Ze;if(typeof X=="function")Ze=function(){X(gt)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,He=We.port2;We.port1.onmessage=gt,Ze=function(){He.postMessage(null)}}else Ze=function(){le(gt,0)};function rt(Ne){A=Ne,be||(be=!0,Ze())}function tt(Ne,et){Re=le(function(){Ne(e.unstable_now())},et)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){V||W||(V=!0,rt(he))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(Ne){switch(N){case 1:case 2:case 3:var et=3;break;default:et=N}var it=N;N=et;try{return Ne()}finally{N=it}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,et){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var it=N;N=Ne;try{return et()}finally{N=it}},e.unstable_scheduleCallback=function(Ne,et,it){var Dt=e.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?Dt+it:Dt):it=Dt,Ne){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=it+Tt,Ne={id:M++,callback:et,priorityLevel:Ne,startTime:it,expirationTime:Tt,sortIndex:-1},it>Dt?(Ne.sortIndex=it,t(S,Ne),n(v)===null&&Ne===n(S)&&(H?(G(Re),Re=-1):H=!0,tt(oe,it-Dt))):(Ne.sortIndex=Tt,t(v,Ne),V||W||(V=!0,rt(he))),Ne},e.unstable_shouldYield=ot,e.unstable_wrapCallback=function(Ne){var et=N;return function(){var it=N;N=et;try{return Ne.apply(this,arguments)}finally{N=it}}}})(QI);JI.exports=QI;var Oj=JI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA=K,js=Oj;function sn(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tA=new Set,i0={};function kp(e,t){h1(e,t),h1(e+"Capture",t)}function h1(e,t){for(i0[e]=t,e=0;e<t.length;e++)tA.add(t[e])}var zu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N4=Object.prototype.hasOwnProperty,Lj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A9={},M9={};function zj(e){return N4.call(M9,e)?!0:N4.call(A9,e)?!1:Lj.test(e)?M9[e]=!0:(A9[e]=!0,!1)}function Nj(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Fj(e,t,n,i){if(t===null||typeof t>"u"||Nj(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xa(e,t,n,i,c,d,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=f}var ua={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ua[e]=new Xa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ua[t]=new Xa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ua[e]=new Xa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ua[e]=new Xa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ua[e]=new Xa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ua[e]=new Xa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ua[e]=new Xa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ua[e]=new Xa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ua[e]=new Xa(e,5,!1,e.toLowerCase(),null,!1,!1)});var Z6=/[\-:]([a-z])/g;function X6(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Z6,X6);ua[t]=new Xa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Z6,X6);ua[t]=new Xa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Z6,X6);ua[t]=new Xa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ua[e]=new Xa(e,1,!1,e.toLowerCase(),null,!1,!1)});ua.xlinkHref=new Xa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ua[e]=new Xa(e,1,!1,e.toLowerCase(),null,!0,!0)});function K6(e,t,n,i){var c=ua.hasOwnProperty(t)?ua[t]:null;(c!==null?c.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Fj(t,n,c,i)&&(n=null),i||c===null?zj(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,i=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Vu=eA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oy=Symbol.for("react.element"),Af=Symbol.for("react.portal"),Mf=Symbol.for("react.fragment"),Y6=Symbol.for("react.strict_mode"),F4=Symbol.for("react.profiler"),nA=Symbol.for("react.provider"),rA=Symbol.for("react.context"),J6=Symbol.for("react.forward_ref"),B4=Symbol.for("react.suspense"),j4=Symbol.for("react.suspense_list"),Q6=Symbol.for("react.memo"),wd=Symbol.for("react.lazy"),iA=Symbol.for("react.offscreen"),D9=Symbol.iterator;function sg(e){return e===null||typeof e!="object"?null:(e=D9&&e[D9]||e["@@iterator"],typeof e=="function"?e:null)}var io=Object.assign,o3;function Sg(e){if(o3===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);o3=t&&t[1]||""}return`
`+o3+e}var a3=!1;function s3(e,t){if(!e||a3)return"";a3=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(S){var i=S}Reflect.construct(e,[],t)}else{try{t.call()}catch(S){i=S}e.call(t.prototype)}else{try{throw Error()}catch(S){i=S}e()}}catch(S){if(S&&i&&typeof S.stack=="string"){for(var c=S.stack.split(`
`),d=i.stack.split(`
`),f=c.length-1,a=d.length-1;1<=f&&0<=a&&c[f]!==d[a];)a--;for(;1<=f&&0<=a;f--,a--)if(c[f]!==d[a]){if(f!==1||a!==1)do if(f--,a--,0>a||c[f]!==d[a]){var v=`
`+c[f].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=f&&0<=a);break}}}finally{a3=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Sg(e):""}function Bj(e){switch(e.tag){case 5:return Sg(e.type);case 16:return Sg("Lazy");case 13:return Sg("Suspense");case 19:return Sg("SuspenseList");case 0:case 2:case 15:return e=s3(e.type,!1),e;case 11:return e=s3(e.type.render,!1),e;case 1:return e=s3(e.type,!0),e;default:return""}}function $4(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mf:return"Fragment";case Af:return"Portal";case F4:return"Profiler";case Y6:return"StrictMode";case B4:return"Suspense";case j4:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rA:return(e.displayName||"Context")+".Consumer";case nA:return(e._context.displayName||"Context")+".Provider";case J6:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q6:return t=e.displayName||null,t!==null?t:$4(e.type)||"Memo";case wd:t=e._payload,e=e._init;try{return $4(e(t))}catch{}}return null}function jj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $4(t);case 8:return t===Y6?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $j(e){var t=oA(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(f){i=""+f,d.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ly(e){e._valueTracker||(e._valueTracker=$j(e))}function aA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=oA(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Kv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function U4(e,t){var n=t.checked;return io({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function R9(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=Kd(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sA(e,t){t=t.checked,t!=null&&K6(e,"checked",t,!1)}function V4(e,t){sA(e,t);var n=Kd(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?W4(e,t.type,n):t.hasOwnProperty("defaultValue")&&W4(e,t.type,Kd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function O9(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function W4(e,t,n){(t!=="number"||Kv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var kg=Array.isArray;function Yf(e,t,n,i){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Kd(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function H4(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(sn(91));return io({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function L9(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(sn(92));if(kg(n)){if(1<n.length)throw Error(sn(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Kd(n)}}function lA(e,t){var n=Kd(t.value),i=Kd(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function z9(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q4(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zy,uA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zy=zy||document.createElement("div"),zy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function o0(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Lg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uj=["Webkit","ms","Moz","O"];Object.keys(Lg).forEach(function(e){Uj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lg[t]=Lg[e]})});function dA(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Lg.hasOwnProperty(e)&&Lg[e]?(""+t).trim():t+"px"}function hA(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,c=dA(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,c):e[n]=c}}var Vj=io({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function G4(e,t){if(t){if(Vj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(sn(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(sn(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(sn(61))}if(t.style!=null&&typeof t.style!="object")throw Error(sn(62))}}function Z4(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X4=null;function e7(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var K4=null,Jf=null,Qf=null;function N9(e){if(e=r_(e)){if(typeof K4!="function")throw Error(sn(280));var t=e.stateNode;t&&(t=lx(t),K4(e.stateNode,e.type,t))}}function pA(e){Jf?Qf?Qf.push(e):Qf=[e]:Jf=e}function fA(){if(Jf){var e=Jf,t=Qf;if(Qf=Jf=null,N9(e),t)for(e=0;e<t.length;e++)N9(t[e])}}function mA(e,t){return e(t)}function gA(){}var l3=!1;function _A(e,t,n){if(l3)return e(t,n);l3=!0;try{return mA(e,t,n)}finally{l3=!1,(Jf!==null||Qf!==null)&&(gA(),fA())}}function a0(e,t){var n=e.stateNode;if(n===null)return null;var i=lx(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(sn(231,t,typeof n));return n}var Y4=!1;if(zu)try{var lg={};Object.defineProperty(lg,"passive",{get:function(){Y4=!0}}),window.addEventListener("test",lg,lg),window.removeEventListener("test",lg,lg)}catch{Y4=!1}function Wj(e,t,n,i,c,d,f,a,v){var S=Array.prototype.slice.call(arguments,3);try{t.apply(n,S)}catch(M){this.onError(M)}}var zg=!1,Yv=null,Jv=!1,J4=null,Hj={onError:function(e){zg=!0,Yv=e}};function qj(e,t,n,i,c,d,f,a,v){zg=!1,Yv=null,Wj.apply(Hj,arguments)}function Gj(e,t,n,i,c,d,f,a,v){if(qj.apply(this,arguments),zg){if(zg){var S=Yv;zg=!1,Yv=null}else throw Error(sn(198));Jv||(Jv=!0,J4=S)}}function Cp(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function F9(e){if(Cp(e)!==e)throw Error(sn(188))}function Zj(e){var t=e.alternate;if(!t){if(t=Cp(e),t===null)throw Error(sn(188));return t!==e?null:e}for(var n=e,i=t;;){var c=n.return;if(c===null)break;var d=c.alternate;if(d===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===n)return F9(c),e;if(d===i)return F9(c),t;d=d.sibling}throw Error(sn(188))}if(n.return!==i.return)n=c,i=d;else{for(var f=!1,a=c.child;a;){if(a===n){f=!0,n=c,i=d;break}if(a===i){f=!0,i=c,n=d;break}a=a.sibling}if(!f){for(a=d.child;a;){if(a===n){f=!0,n=d,i=c;break}if(a===i){f=!0,i=d,n=c;break}a=a.sibling}if(!f)throw Error(sn(189))}}if(n.alternate!==i)throw Error(sn(190))}if(n.tag!==3)throw Error(sn(188));return n.stateNode.current===n?e:t}function vA(e){return e=Zj(e),e!==null?xA(e):null}function xA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xA(e);if(t!==null)return t;e=e.sibling}return null}var bA=js.unstable_scheduleCallback,B9=js.unstable_cancelCallback,Xj=js.unstable_shouldYield,Kj=js.unstable_requestPaint,_o=js.unstable_now,Yj=js.unstable_getCurrentPriorityLevel,t7=js.unstable_ImmediatePriority,wA=js.unstable_UserBlockingPriority,Qv=js.unstable_NormalPriority,Jj=js.unstable_LowPriority,EA=js.unstable_IdlePriority,ix=null,$c=null;function Qj(e){if($c&&typeof $c.onCommitFiberRoot=="function")try{$c.onCommitFiberRoot(ix,e,void 0,(e.current.flags&128)===128)}catch{}}var nc=Math.clz32?Math.clz32:n$,e$=Math.log,t$=Math.LN2;function n$(e){return e>>>=0,e===0?32:31-(e$(e)/t$|0)|0}var Ny=64,Fy=4194304;function Cg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function e2(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,c=e.suspendedLanes,d=e.pingedLanes,f=n&268435455;if(f!==0){var a=f&~c;a!==0?i=Cg(a):(d&=f,d!==0&&(i=Cg(d)))}else f=n&~c,f!==0?i=Cg(f):d!==0&&(i=Cg(d));if(i===0)return 0;if(t!==0&&t!==i&&!(t&c)&&(c=i&-i,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-nc(t),c=1<<n,i|=e[n],t&=~c;return i}function r$(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i$(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-nc(d),a=1<<f,v=c[f];v===-1?(!(a&n)||a&i)&&(c[f]=r$(a,t)):v<=t&&(e.expiredLanes|=a),d&=~a}}function Q4(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TA(){var e=Ny;return Ny<<=1,!(Ny&4194240)&&(Ny=64),e}function c3(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function t_(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nc(t),e[t]=n}function o$(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-nc(n),d=1<<c;t[c]=0,i[c]=-1,e[c]=-1,n&=~d}}function n7(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-nc(n),c=1<<i;c&t|e[i]&t&&(e[i]|=t),n&=~c}}var pi=0;function SA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var kA,r7,CA,PA,IA,e5=!1,By=[],Nd=null,Fd=null,Bd=null,s0=new Map,l0=new Map,Td=[],a$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j9(e,t){switch(e){case"focusin":case"focusout":Nd=null;break;case"dragenter":case"dragleave":Fd=null;break;case"mouseover":case"mouseout":Bd=null;break;case"pointerover":case"pointerout":s0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":l0.delete(t.pointerId)}}function cg(e,t,n,i,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:d,targetContainers:[c]},t!==null&&(t=r_(t),t!==null&&r7(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function s$(e,t,n,i,c){switch(t){case"focusin":return Nd=cg(Nd,e,t,n,i,c),!0;case"dragenter":return Fd=cg(Fd,e,t,n,i,c),!0;case"mouseover":return Bd=cg(Bd,e,t,n,i,c),!0;case"pointerover":var d=c.pointerId;return s0.set(d,cg(s0.get(d)||null,e,t,n,i,c)),!0;case"gotpointercapture":return d=c.pointerId,l0.set(d,cg(l0.get(d)||null,e,t,n,i,c)),!0}return!1}function AA(e){var t=Kh(e.target);if(t!==null){var n=Cp(t);if(n!==null){if(t=n.tag,t===13){if(t=yA(n),t!==null){e.blockedOn=t,IA(e.priority,function(){CA(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=t5(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);X4=i,n.target.dispatchEvent(i),X4=null}else return t=r_(n),t!==null&&r7(t),e.blockedOn=n,!1;t.shift()}return!0}function $9(e,t,n){wv(e)&&n.delete(t)}function l$(){e5=!1,Nd!==null&&wv(Nd)&&(Nd=null),Fd!==null&&wv(Fd)&&(Fd=null),Bd!==null&&wv(Bd)&&(Bd=null),s0.forEach($9),l0.forEach($9)}function ug(e,t){e.blockedOn===t&&(e.blockedOn=null,e5||(e5=!0,js.unstable_scheduleCallback(js.unstable_NormalPriority,l$)))}function c0(e){function t(c){return ug(c,e)}if(0<By.length){ug(By[0],e);for(var n=1;n<By.length;n++){var i=By[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Nd!==null&&ug(Nd,e),Fd!==null&&ug(Fd,e),Bd!==null&&ug(Bd,e),s0.forEach(t),l0.forEach(t),n=0;n<Td.length;n++)i=Td[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Td.length&&(n=Td[0],n.blockedOn===null);)AA(n),n.blockedOn===null&&Td.shift()}var e1=Vu.ReactCurrentBatchConfig,t2=!0;function c$(e,t,n,i){var c=pi,d=e1.transition;e1.transition=null;try{pi=1,i7(e,t,n,i)}finally{pi=c,e1.transition=d}}function u$(e,t,n,i){var c=pi,d=e1.transition;e1.transition=null;try{pi=4,i7(e,t,n,i)}finally{pi=c,e1.transition=d}}function i7(e,t,n,i){if(t2){var c=t5(e,t,n,i);if(c===null)v3(e,t,i,n2,n),j9(e,i);else if(s$(c,e,t,n,i))i.stopPropagation();else if(j9(e,i),t&4&&-1<a$.indexOf(e)){for(;c!==null;){var d=r_(c);if(d!==null&&kA(d),d=t5(e,t,n,i),d===null&&v3(e,t,i,n2,n),d===c)break;c=d}c!==null&&i.stopPropagation()}else v3(e,t,i,null,n)}}var n2=null;function t5(e,t,n,i){if(n2=null,e=e7(i),e=Kh(e),e!==null)if(t=Cp(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yA(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return n2=e,null}function MA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yj()){case t7:return 1;case wA:return 4;case Qv:case Jj:return 16;case EA:return 536870912;default:return 16}default:return 16}}var Md=null,o7=null,Ev=null;function DA(){if(Ev)return Ev;var e,t=o7,n=t.length,i,c="value"in Md?Md.value:Md.textContent,d=c.length;for(e=0;e<n&&t[e]===c[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===c[d-i];i++);return Ev=c.slice(e,1<i?1-i:void 0)}function Tv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jy(){return!0}function U9(){return!1}function Ws(e){function t(n,i,c,d,f){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(d):d[a]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?jy:U9,this.isPropagationStopped=U9,this}return io(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jy)},persist:function(){},isPersistent:jy}),t}var z1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},a7=Ws(z1),n_=io({},z1,{view:0,detail:0}),d$=Ws(n_),u3,d3,dg,ox=io({},n_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s7,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dg&&(dg&&e.type==="mousemove"?(u3=e.screenX-dg.screenX,d3=e.screenY-dg.screenY):d3=u3=0,dg=e),u3)},movementY:function(e){return"movementY"in e?e.movementY:d3}}),V9=Ws(ox),h$=io({},ox,{dataTransfer:0}),p$=Ws(h$),f$=io({},n_,{relatedTarget:0}),h3=Ws(f$),m$=io({},z1,{animationName:0,elapsedTime:0,pseudoElement:0}),g$=Ws(m$),_$=io({},z1,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),y$=Ws(_$),v$=io({},z1,{data:0}),W9=Ws(v$),x$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E$(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=w$[e])?!!t[e]:!1}function s7(){return E$}var T$=io({},n_,{key:function(e){if(e.key){var t=x$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Tv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?b$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s7,charCode:function(e){return e.type==="keypress"?Tv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),S$=Ws(T$),k$=io({},ox,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H9=Ws(k$),C$=io({},n_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s7}),P$=Ws(C$),I$=io({},z1,{propertyName:0,elapsedTime:0,pseudoElement:0}),A$=Ws(I$),M$=io({},ox,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),D$=Ws(M$),R$=[9,13,27,32],l7=zu&&"CompositionEvent"in window,Ng=null;zu&&"documentMode"in document&&(Ng=document.documentMode);var O$=zu&&"TextEvent"in window&&!Ng,RA=zu&&(!l7||Ng&&8<Ng&&11>=Ng),q9=String.fromCharCode(32),G9=!1;function OA(e,t){switch(e){case"keyup":return R$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Df=!1;function L$(e,t){switch(e){case"compositionend":return LA(t);case"keypress":return t.which!==32?null:(G9=!0,q9);case"textInput":return e=t.data,e===q9&&G9?null:e;default:return null}}function z$(e,t){if(Df)return e==="compositionend"||!l7&&OA(e,t)?(e=DA(),Ev=o7=Md=null,Df=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return RA&&t.locale!=="ko"?null:t.data;default:return null}}var N$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z9(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!N$[e.type]:t==="textarea"}function zA(e,t,n,i){pA(i),t=r2(t,"onChange"),0<t.length&&(n=new a7("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Fg=null,u0=null;function F$(e){GA(e,0)}function ax(e){var t=Lf(e);if(aA(t))return e}function B$(e,t){if(e==="change")return t}var NA=!1;if(zu){var p3;if(zu){var f3="oninput"in document;if(!f3){var X9=document.createElement("div");X9.setAttribute("oninput","return;"),f3=typeof X9.oninput=="function"}p3=f3}else p3=!1;NA=p3&&(!document.documentMode||9<document.documentMode)}function K9(){Fg&&(Fg.detachEvent("onpropertychange",FA),u0=Fg=null)}function FA(e){if(e.propertyName==="value"&&ax(u0)){var t=[];zA(t,u0,e,e7(e)),_A(F$,t)}}function j$(e,t,n){e==="focusin"?(K9(),Fg=t,u0=n,Fg.attachEvent("onpropertychange",FA)):e==="focusout"&&K9()}function $$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ax(u0)}function U$(e,t){if(e==="click")return ax(t)}function V$(e,t){if(e==="input"||e==="change")return ax(t)}function W$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oc=typeof Object.is=="function"?Object.is:W$;function d0(e,t){if(oc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!N4.call(t,c)||!oc(e[c],t[c]))return!1}return!0}function Y9(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function J9(e,t){var n=Y9(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Y9(n)}}function BA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?BA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jA(){for(var e=window,t=Kv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kv(e.document)}return t}function c7(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function H$(e){var t=jA(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&BA(n.ownerDocument.documentElement,n)){if(i!==null&&c7(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,d=Math.min(i.start,c);i=i.end===void 0?d:Math.min(i.end,c),!e.extend&&d>i&&(c=i,i=d,d=c),c=J9(n,d);var f=J9(n,i);c&&f&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var q$=zu&&"documentMode"in document&&11>=document.documentMode,Rf=null,n5=null,Bg=null,r5=!1;function Q9(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;r5||Rf==null||Rf!==Kv(i)||(i=Rf,"selectionStart"in i&&c7(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Bg&&d0(Bg,i)||(Bg=i,i=r2(n5,"onSelect"),0<i.length&&(t=new a7("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Rf)))}function $y(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Of={animationend:$y("Animation","AnimationEnd"),animationiteration:$y("Animation","AnimationIteration"),animationstart:$y("Animation","AnimationStart"),transitionend:$y("Transition","TransitionEnd")},m3={},$A={};zu&&($A=document.createElement("div").style,"AnimationEvent"in window||(delete Of.animationend.animation,delete Of.animationiteration.animation,delete Of.animationstart.animation),"TransitionEvent"in window||delete Of.transitionend.transition);function sx(e){if(m3[e])return m3[e];if(!Of[e])return e;var t=Of[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $A)return m3[e]=t[n];return e}var UA=sx("animationend"),VA=sx("animationiteration"),WA=sx("animationstart"),HA=sx("transitionend"),qA=new Map,ek="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ih(e,t){qA.set(e,t),kp(t,[e])}for(var g3=0;g3<ek.length;g3++){var _3=ek[g3],G$=_3.toLowerCase(),Z$=_3[0].toUpperCase()+_3.slice(1);ih(G$,"on"+Z$)}ih(UA,"onAnimationEnd");ih(VA,"onAnimationIteration");ih(WA,"onAnimationStart");ih("dblclick","onDoubleClick");ih("focusin","onFocus");ih("focusout","onBlur");ih(HA,"onTransitionEnd");h1("onMouseEnter",["mouseout","mouseover"]);h1("onMouseLeave",["mouseout","mouseover"]);h1("onPointerEnter",["pointerout","pointerover"]);h1("onPointerLeave",["pointerout","pointerover"]);kp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kp("onBeforeInput",["compositionend","keypress","textInput","paste"]);kp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pg));function tk(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,Gj(i,t,void 0,e),e.currentTarget=null}function GA(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],c=i.event;i=i.listeners;e:{var d=void 0;if(t)for(var f=i.length-1;0<=f;f--){var a=i[f],v=a.instance,S=a.currentTarget;if(a=a.listener,v!==d&&c.isPropagationStopped())break e;tk(c,a,S),d=v}else for(f=0;f<i.length;f++){if(a=i[f],v=a.instance,S=a.currentTarget,a=a.listener,v!==d&&c.isPropagationStopped())break e;tk(c,a,S),d=v}}}if(Jv)throw e=J4,Jv=!1,J4=null,e}function Li(e,t){var n=t[l5];n===void 0&&(n=t[l5]=new Set);var i=e+"__bubble";n.has(i)||(ZA(t,e,2,!1),n.add(i))}function y3(e,t,n){var i=0;t&&(i|=4),ZA(n,e,i,t)}var Uy="_reactListening"+Math.random().toString(36).slice(2);function h0(e){if(!e[Uy]){e[Uy]=!0,tA.forEach(function(n){n!=="selectionchange"&&(X$.has(n)||y3(n,!1,e),y3(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uy]||(t[Uy]=!0,y3("selectionchange",!1,t))}}function ZA(e,t,n,i){switch(MA(t)){case 1:var c=c$;break;case 4:c=u$;break;default:c=i7}n=c.bind(null,t,n,e),c=void 0,!Y4||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function v3(e,t,n,i,c){var d=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var a=i.stateNode.containerInfo;if(a===c||a.nodeType===8&&a.parentNode===c)break;if(f===4)for(f=i.return;f!==null;){var v=f.tag;if((v===3||v===4)&&(v=f.stateNode.containerInfo,v===c||v.nodeType===8&&v.parentNode===c))return;f=f.return}for(;a!==null;){if(f=Kh(a),f===null)return;if(v=f.tag,v===5||v===6){i=d=f;continue e}a=a.parentNode}}i=i.return}_A(function(){var S=d,M=e7(n),R=[];e:{var N=qA.get(e);if(N!==void 0){var W=a7,V=e;switch(e){case"keypress":if(Tv(n)===0)break e;case"keydown":case"keyup":W=S$;break;case"focusin":V="focus",W=h3;break;case"focusout":V="blur",W=h3;break;case"beforeblur":case"afterblur":W=h3;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=V9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=p$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=P$;break;case UA:case VA:case WA:W=g$;break;case HA:W=A$;break;case"scroll":W=d$;break;case"wheel":W=D$;break;case"copy":case"cut":case"paste":W=y$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=H9}var H=(t&4)!==0,le=!H&&e==="scroll",G=H?N!==null?N+"Capture":null:N;H=[];for(var X=S,Q;X!==null;){Q=X;var oe=Q.stateNode;if(Q.tag===5&&oe!==null&&(Q=oe,G!==null&&(oe=a0(X,G),oe!=null&&H.push(p0(X,oe,Q)))),le)break;X=X.return}0<H.length&&(N=new W(N,V,null,n,M),R.push({event:N,listeners:H}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",N&&n!==X4&&(V=n.relatedTarget||n.fromElement)&&(Kh(V)||V[Nu]))break e;if((W||N)&&(N=M.window===M?M:(N=M.ownerDocument)?N.defaultView||N.parentWindow:window,W?(V=n.relatedTarget||n.toElement,W=S,V=V?Kh(V):null,V!==null&&(le=Cp(V),V!==le||V.tag!==5&&V.tag!==6)&&(V=null)):(W=null,V=S),W!==V)){if(H=V9,oe="onMouseLeave",G="onMouseEnter",X="mouse",(e==="pointerout"||e==="pointerover")&&(H=H9,oe="onPointerLeave",G="onPointerEnter",X="pointer"),le=W==null?N:Lf(W),Q=V==null?N:Lf(V),N=new H(oe,X+"leave",W,n,M),N.target=le,N.relatedTarget=Q,oe=null,Kh(M)===S&&(H=new H(G,X+"enter",V,n,M),H.target=Q,H.relatedTarget=le,oe=H),le=oe,W&&V)t:{for(H=W,G=V,X=0,Q=H;Q;Q=xf(Q))X++;for(Q=0,oe=G;oe;oe=xf(oe))Q++;for(;0<X-Q;)H=xf(H),X--;for(;0<Q-X;)G=xf(G),Q--;for(;X--;){if(H===G||G!==null&&H===G.alternate)break t;H=xf(H),G=xf(G)}H=null}else H=null;W!==null&&nk(R,N,W,H,!1),V!==null&&le!==null&&nk(R,le,V,H,!0)}}e:{if(N=S?Lf(S):window,W=N.nodeName&&N.nodeName.toLowerCase(),W==="select"||W==="input"&&N.type==="file")var he=B$;else if(Z9(N))if(NA)he=V$;else{he=$$;var be=j$}else(W=N.nodeName)&&W.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(he=U$);if(he&&(he=he(e,S))){zA(R,he,n,M);break e}be&&be(e,N,S),e==="focusout"&&(be=N._wrapperState)&&be.controlled&&N.type==="number"&&W4(N,"number",N.value)}switch(be=S?Lf(S):window,e){case"focusin":(Z9(be)||be.contentEditable==="true")&&(Rf=be,n5=S,Bg=null);break;case"focusout":Bg=n5=Rf=null;break;case"mousedown":r5=!0;break;case"contextmenu":case"mouseup":case"dragend":r5=!1,Q9(R,n,M);break;case"selectionchange":if(q$)break;case"keydown":case"keyup":Q9(R,n,M)}var A;if(l7)e:{switch(e){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Df?OA(e,n)&&(Re="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Re="onCompositionStart");Re&&(RA&&n.locale!=="ko"&&(Df||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Df&&(A=DA()):(Md=M,o7="value"in Md?Md.value:Md.textContent,Df=!0)),be=r2(S,Re),0<be.length&&(Re=new W9(Re,e,null,n,M),R.push({event:Re,listeners:be}),A?Re.data=A:(A=LA(n),A!==null&&(Re.data=A)))),(A=O$?L$(e,n):z$(e,n))&&(S=r2(S,"onBeforeInput"),0<S.length&&(M=new W9("onBeforeInput","beforeinput",null,n,M),R.push({event:M,listeners:S}),M.data=A))}GA(R,t)})}function p0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function r2(e,t){for(var n=t+"Capture",i=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=a0(e,n),d!=null&&i.unshift(p0(e,d,c)),d=a0(e,t),d!=null&&i.push(p0(e,d,c))),e=e.return}return i}function xf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nk(e,t,n,i,c){for(var d=t._reactName,f=[];n!==null&&n!==i;){var a=n,v=a.alternate,S=a.stateNode;if(v!==null&&v===i)break;a.tag===5&&S!==null&&(a=S,c?(v=a0(n,d),v!=null&&f.unshift(p0(n,v,a))):c||(v=a0(n,d),v!=null&&f.push(p0(n,v,a)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var K$=/\r\n?/g,Y$=/\u0000|\uFFFD/g;function rk(e){return(typeof e=="string"?e:""+e).replace(K$,`
`).replace(Y$,"")}function Vy(e,t,n){if(t=rk(t),rk(e)!==t&&n)throw Error(sn(425))}function i2(){}var i5=null,o5=null;function a5(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var s5=typeof setTimeout=="function"?setTimeout:void 0,J$=typeof clearTimeout=="function"?clearTimeout:void 0,ik=typeof Promise=="function"?Promise:void 0,Q$=typeof queueMicrotask=="function"?queueMicrotask:typeof ik<"u"?function(e){return ik.resolve(null).then(e).catch(eU)}:s5;function eU(e){setTimeout(function(){throw e})}function x3(e,t){var n=t,i=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(i===0){e.removeChild(c),c0(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=c}while(n);c0(t)}function jd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ok(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var N1=Math.random().toString(36).slice(2),Nc="__reactFiber$"+N1,f0="__reactProps$"+N1,Nu="__reactContainer$"+N1,l5="__reactEvents$"+N1,tU="__reactListeners$"+N1,nU="__reactHandles$"+N1;function Kh(e){var t=e[Nc];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nu]||n[Nc]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ok(e);e!==null;){if(n=e[Nc])return n;e=ok(e)}return t}e=n,n=e.parentNode}return null}function r_(e){return e=e[Nc]||e[Nu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(sn(33))}function lx(e){return e[f0]||null}var c5=[],zf=-1;function oh(e){return{current:e}}function Fi(e){0>zf||(e.current=c5[zf],c5[zf]=null,zf--)}function Di(e,t){zf++,c5[zf]=e.current,e.current=t}var Yd={},Ra=oh(Yd),cs=oh(!1),up=Yd;function p1(e,t){var n=e.type.contextTypes;if(!n)return Yd;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in n)c[d]=t[d];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function us(e){return e=e.childContextTypes,e!=null}function o2(){Fi(cs),Fi(Ra)}function ak(e,t,n){if(Ra.current!==Yd)throw Error(sn(168));Di(Ra,t),Di(cs,n)}function XA(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var c in i)if(!(c in t))throw Error(sn(108,jj(e)||"Unknown",c));return io({},n,i)}function a2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yd,up=Ra.current,Di(Ra,e),Di(cs,cs.current),!0}function sk(e,t,n){var i=e.stateNode;if(!i)throw Error(sn(169));n?(e=XA(e,t,up),i.__reactInternalMemoizedMergedChildContext=e,Fi(cs),Fi(Ra),Di(Ra,e)):Fi(cs),Di(cs,n)}var Pu=null,cx=!1,b3=!1;function KA(e){Pu===null?Pu=[e]:Pu.push(e)}function rU(e){cx=!0,KA(e)}function ah(){if(!b3&&Pu!==null){b3=!0;var e=0,t=pi;try{var n=Pu;for(pi=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Pu=null,cx=!1}catch(c){throw Pu!==null&&(Pu=Pu.slice(e+1)),bA(t7,ah),c}finally{pi=t,b3=!1}}return null}var Nf=[],Ff=0,s2=null,l2=0,ul=[],dl=0,dp=null,Iu=1,Au="";function Wh(e,t){Nf[Ff++]=l2,Nf[Ff++]=s2,s2=e,l2=t}function YA(e,t,n){ul[dl++]=Iu,ul[dl++]=Au,ul[dl++]=dp,dp=e;var i=Iu;e=Au;var c=32-nc(i)-1;i&=~(1<<c),n+=1;var d=32-nc(t)+c;if(30<d){var f=c-c%5;d=(i&(1<<f)-1).toString(32),i>>=f,c-=f,Iu=1<<32-nc(t)+c|n<<c|i,Au=d+e}else Iu=1<<d|n<<c|i,Au=e}function u7(e){e.return!==null&&(Wh(e,1),YA(e,1,0))}function d7(e){for(;e===s2;)s2=Nf[--Ff],Nf[Ff]=null,l2=Nf[--Ff],Nf[Ff]=null;for(;e===dp;)dp=ul[--dl],ul[dl]=null,Au=ul[--dl],ul[dl]=null,Iu=ul[--dl],ul[dl]=null}var Fs=null,Ns=null,Wi=!1,Ql=null;function JA(e,t){var n=hl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function lk(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fs=e,Ns=jd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fs=e,Ns=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=dp!==null?{id:Iu,overflow:Au}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=hl(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Fs=e,Ns=null,!0):!1;default:return!1}}function u5(e){return(e.mode&1)!==0&&(e.flags&128)===0}function d5(e){if(Wi){var t=Ns;if(t){var n=t;if(!lk(e,t)){if(u5(e))throw Error(sn(418));t=jd(n.nextSibling);var i=Fs;t&&lk(e,t)?JA(i,n):(e.flags=e.flags&-4097|2,Wi=!1,Fs=e)}}else{if(u5(e))throw Error(sn(418));e.flags=e.flags&-4097|2,Wi=!1,Fs=e}}}function ck(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fs=e}function Wy(e){if(e!==Fs)return!1;if(!Wi)return ck(e),Wi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!a5(e.type,e.memoizedProps)),t&&(t=Ns)){if(u5(e))throw QA(),Error(sn(418));for(;t;)JA(e,t),t=jd(t.nextSibling)}if(ck(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(sn(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ns=jd(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ns=null}}else Ns=Fs?jd(e.stateNode.nextSibling):null;return!0}function QA(){for(var e=Ns;e;)e=jd(e.nextSibling)}function f1(){Ns=Fs=null,Wi=!1}function h7(e){Ql===null?Ql=[e]:Ql.push(e)}var iU=Vu.ReactCurrentBatchConfig;function Kl(e,t){if(e&&e.defaultProps){t=io({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var c2=oh(null),u2=null,Bf=null,p7=null;function f7(){p7=Bf=u2=null}function m7(e){var t=c2.current;Fi(c2),e._currentValue=t}function h5(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function t1(e,t){u2=e,p7=Bf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(as=!0),e.firstContext=null)}function xl(e){var t=e._currentValue;if(p7!==e)if(e={context:e,memoizedValue:t,next:null},Bf===null){if(u2===null)throw Error(sn(308));Bf=e,u2.dependencies={lanes:0,firstContext:e}}else Bf=Bf.next=e;return t}var Yh=null;function g7(e){Yh===null?Yh=[e]:Yh.push(e)}function eM(e,t,n,i){var c=t.interleaved;return c===null?(n.next=n,g7(t)):(n.next=c.next,c.next=n),t.interleaved=n,Fu(e,i)}function Fu(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ed=!1;function _7(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ru(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $d(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ur&2){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,Fu(e,n)}return c=i.interleaved,c===null?(t.next=t,g7(i)):(t.next=c.next,c.next=t),i.interleaved=t,Fu(e,n)}function Sv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,n7(e,n)}}function uk(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?c=d=f:d=d.next=f,n=n.next}while(n!==null);d===null?c=d=t:d=d.next=t}else c=d=t;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function d2(e,t,n,i){var c=e.updateQueue;Ed=!1;var d=c.firstBaseUpdate,f=c.lastBaseUpdate,a=c.shared.pending;if(a!==null){c.shared.pending=null;var v=a,S=v.next;v.next=null,f===null?d=S:f.next=S,f=v;var M=e.alternate;M!==null&&(M=M.updateQueue,a=M.lastBaseUpdate,a!==f&&(a===null?M.firstBaseUpdate=S:a.next=S,M.lastBaseUpdate=v))}if(d!==null){var R=c.baseState;f=0,M=S=v=null,a=d;do{var N=a.lane,W=a.eventTime;if((i&N)===N){M!==null&&(M=M.next={eventTime:W,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var V=e,H=a;switch(N=t,W=n,H.tag){case 1:if(V=H.payload,typeof V=="function"){R=V.call(W,R,N);break e}R=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=H.payload,N=typeof V=="function"?V.call(W,R,N):V,N==null)break e;R=io({},R,N);break e;case 2:Ed=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,N=c.effects,N===null?c.effects=[a]:N.push(a))}else W={eventTime:W,lane:N,tag:a.tag,payload:a.payload,callback:a.callback,next:null},M===null?(S=M=W,v=R):M=M.next=W,f|=N;if(a=a.next,a===null){if(a=c.shared.pending,a===null)break;N=a,a=N.next,N.next=null,c.lastBaseUpdate=N,c.shared.pending=null}}while(1);if(M===null&&(v=R),c.baseState=v,c.firstBaseUpdate=S,c.lastBaseUpdate=M,t=c.shared.interleaved,t!==null){c=t;do f|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);pp|=f,e.lanes=f,e.memoizedState=R}}function dk(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],c=i.callback;if(c!==null){if(i.callback=null,i=n,typeof c!="function")throw Error(sn(191,c));c.call(i)}}}var nM=new eA.Component().refs;function p5(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:io({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ux={isMounted:function(e){return(e=e._reactInternals)?Cp(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ga(),c=Vd(e),d=Ru(i,c);d.payload=t,n!=null&&(d.callback=n),t=$d(e,d,c),t!==null&&(rc(t,e,c,i),Sv(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ga(),c=Vd(e),d=Ru(i,c);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=$d(e,d,c),t!==null&&(rc(t,e,c,i),Sv(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ga(),i=Vd(e),c=Ru(n,i);c.tag=2,t!=null&&(c.callback=t),t=$d(e,c,i),t!==null&&(rc(t,e,i,n),Sv(t,e,i))}};function hk(e,t,n,i,c,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,d,f):t.prototype&&t.prototype.isPureReactComponent?!d0(n,i)||!d0(c,d):!0}function rM(e,t,n){var i=!1,c=Yd,d=t.contextType;return typeof d=="object"&&d!==null?d=xl(d):(c=us(t)?up:Ra.current,i=t.contextTypes,d=(i=i!=null)?p1(e,c):Yd),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ux,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function pk(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ux.enqueueReplaceState(t,t.state,null)}function f5(e,t,n,i){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=nM,_7(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=xl(d):(d=us(t)?up:Ra.current,c.context=p1(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(p5(e,t,d,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&ux.enqueueReplaceState(c,c.state,null),d2(e,n,c,i),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function hg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(sn(309));var i=n.stateNode}if(!i)throw Error(sn(147,e));var c=i,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(f){var a=c.refs;a===nM&&(a=c.refs={}),f===null?delete a[d]:a[d]=f},t._stringRef=d,t)}if(typeof e!="string")throw Error(sn(284));if(!n._owner)throw Error(sn(290,e))}return e}function Hy(e,t){throw e=Object.prototype.toString.call(t),Error(sn(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fk(e){var t=e._init;return t(e._payload)}function iM(e){function t(G,X){if(e){var Q=G.deletions;Q===null?(G.deletions=[X],G.flags|=16):Q.push(X)}}function n(G,X){if(!e)return null;for(;X!==null;)t(G,X),X=X.sibling;return null}function i(G,X){for(G=new Map;X!==null;)X.key!==null?G.set(X.key,X):G.set(X.index,X),X=X.sibling;return G}function c(G,X){return G=Wd(G,X),G.index=0,G.sibling=null,G}function d(G,X,Q){return G.index=Q,e?(Q=G.alternate,Q!==null?(Q=Q.index,Q<X?(G.flags|=2,X):Q):(G.flags|=2,X)):(G.flags|=1048576,X)}function f(G){return e&&G.alternate===null&&(G.flags|=2),G}function a(G,X,Q,oe){return X===null||X.tag!==6?(X=P3(Q,G.mode,oe),X.return=G,X):(X=c(X,Q),X.return=G,X)}function v(G,X,Q,oe){var he=Q.type;return he===Mf?M(G,X,Q.props.children,oe,Q.key):X!==null&&(X.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===wd&&fk(he)===X.type)?(oe=c(X,Q.props),oe.ref=hg(G,X,Q),oe.return=G,oe):(oe=Mv(Q.type,Q.key,Q.props,null,G.mode,oe),oe.ref=hg(G,X,Q),oe.return=G,oe)}function S(G,X,Q,oe){return X===null||X.tag!==4||X.stateNode.containerInfo!==Q.containerInfo||X.stateNode.implementation!==Q.implementation?(X=I3(Q,G.mode,oe),X.return=G,X):(X=c(X,Q.children||[]),X.return=G,X)}function M(G,X,Q,oe,he){return X===null||X.tag!==7?(X=tp(Q,G.mode,oe,he),X.return=G,X):(X=c(X,Q),X.return=G,X)}function R(G,X,Q){if(typeof X=="string"&&X!==""||typeof X=="number")return X=P3(""+X,G.mode,Q),X.return=G,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Oy:return Q=Mv(X.type,X.key,X.props,null,G.mode,Q),Q.ref=hg(G,null,X),Q.return=G,Q;case Af:return X=I3(X,G.mode,Q),X.return=G,X;case wd:var oe=X._init;return R(G,oe(X._payload),Q)}if(kg(X)||sg(X))return X=tp(X,G.mode,Q,null),X.return=G,X;Hy(G,X)}return null}function N(G,X,Q,oe){var he=X!==null?X.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return he!==null?null:a(G,X,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Oy:return Q.key===he?v(G,X,Q,oe):null;case Af:return Q.key===he?S(G,X,Q,oe):null;case wd:return he=Q._init,N(G,X,he(Q._payload),oe)}if(kg(Q)||sg(Q))return he!==null?null:M(G,X,Q,oe,null);Hy(G,Q)}return null}function W(G,X,Q,oe,he){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return G=G.get(Q)||null,a(X,G,""+oe,he);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Oy:return G=G.get(oe.key===null?Q:oe.key)||null,v(X,G,oe,he);case Af:return G=G.get(oe.key===null?Q:oe.key)||null,S(X,G,oe,he);case wd:var be=oe._init;return W(G,X,Q,be(oe._payload),he)}if(kg(oe)||sg(oe))return G=G.get(Q)||null,M(X,G,oe,he,null);Hy(X,oe)}return null}function V(G,X,Q,oe){for(var he=null,be=null,A=X,Re=X=0,_e=null;A!==null&&Re<Q.length;Re++){A.index>Re?(_e=A,A=null):_e=A.sibling;var ze=N(G,A,Q[Re],oe);if(ze===null){A===null&&(A=_e);break}e&&A&&ze.alternate===null&&t(G,A),X=d(ze,X,Re),be===null?he=ze:be.sibling=ze,be=ze,A=_e}if(Re===Q.length)return n(G,A),Wi&&Wh(G,Re),he;if(A===null){for(;Re<Q.length;Re++)A=R(G,Q[Re],oe),A!==null&&(X=d(A,X,Re),be===null?he=A:be.sibling=A,be=A);return Wi&&Wh(G,Re),he}for(A=i(G,A);Re<Q.length;Re++)_e=W(A,G,Re,Q[Re],oe),_e!==null&&(e&&_e.alternate!==null&&A.delete(_e.key===null?Re:_e.key),X=d(_e,X,Re),be===null?he=_e:be.sibling=_e,be=_e);return e&&A.forEach(function(ot){return t(G,ot)}),Wi&&Wh(G,Re),he}function H(G,X,Q,oe){var he=sg(Q);if(typeof he!="function")throw Error(sn(150));if(Q=he.call(Q),Q==null)throw Error(sn(151));for(var be=he=null,A=X,Re=X=0,_e=null,ze=Q.next();A!==null&&!ze.done;Re++,ze=Q.next()){A.index>Re?(_e=A,A=null):_e=A.sibling;var ot=N(G,A,ze.value,oe);if(ot===null){A===null&&(A=_e);break}e&&A&&ot.alternate===null&&t(G,A),X=d(ot,X,Re),be===null?he=ot:be.sibling=ot,be=ot,A=_e}if(ze.done)return n(G,A),Wi&&Wh(G,Re),he;if(A===null){for(;!ze.done;Re++,ze=Q.next())ze=R(G,ze.value,oe),ze!==null&&(X=d(ze,X,Re),be===null?he=ze:be.sibling=ze,be=ze);return Wi&&Wh(G,Re),he}for(A=i(G,A);!ze.done;Re++,ze=Q.next())ze=W(A,G,Re,ze.value,oe),ze!==null&&(e&&ze.alternate!==null&&A.delete(ze.key===null?Re:ze.key),X=d(ze,X,Re),be===null?he=ze:be.sibling=ze,be=ze);return e&&A.forEach(function(gt){return t(G,gt)}),Wi&&Wh(G,Re),he}function le(G,X,Q,oe){if(typeof Q=="object"&&Q!==null&&Q.type===Mf&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Oy:e:{for(var he=Q.key,be=X;be!==null;){if(be.key===he){if(he=Q.type,he===Mf){if(be.tag===7){n(G,be.sibling),X=c(be,Q.props.children),X.return=G,G=X;break e}}else if(be.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===wd&&fk(he)===be.type){n(G,be.sibling),X=c(be,Q.props),X.ref=hg(G,be,Q),X.return=G,G=X;break e}n(G,be);break}else t(G,be);be=be.sibling}Q.type===Mf?(X=tp(Q.props.children,G.mode,oe,Q.key),X.return=G,G=X):(oe=Mv(Q.type,Q.key,Q.props,null,G.mode,oe),oe.ref=hg(G,X,Q),oe.return=G,G=oe)}return f(G);case Af:e:{for(be=Q.key;X!==null;){if(X.key===be)if(X.tag===4&&X.stateNode.containerInfo===Q.containerInfo&&X.stateNode.implementation===Q.implementation){n(G,X.sibling),X=c(X,Q.children||[]),X.return=G,G=X;break e}else{n(G,X);break}else t(G,X);X=X.sibling}X=I3(Q,G.mode,oe),X.return=G,G=X}return f(G);case wd:return be=Q._init,le(G,X,be(Q._payload),oe)}if(kg(Q))return V(G,X,Q,oe);if(sg(Q))return H(G,X,Q,oe);Hy(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,X!==null&&X.tag===6?(n(G,X.sibling),X=c(X,Q),X.return=G,G=X):(n(G,X),X=P3(Q,G.mode,oe),X.return=G,G=X),f(G)):n(G,X)}return le}var m1=iM(!0),oM=iM(!1),i_={},Uc=oh(i_),m0=oh(i_),g0=oh(i_);function Jh(e){if(e===i_)throw Error(sn(174));return e}function y7(e,t){switch(Di(g0,t),Di(m0,e),Di(Uc,i_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:q4(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=q4(t,e)}Fi(Uc),Di(Uc,t)}function g1(){Fi(Uc),Fi(m0),Fi(g0)}function aM(e){Jh(g0.current);var t=Jh(Uc.current),n=q4(t,e.type);t!==n&&(Di(m0,e),Di(Uc,n))}function v7(e){m0.current===e&&(Fi(Uc),Fi(m0))}var to=oh(0);function h2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var w3=[];function x7(){for(var e=0;e<w3.length;e++)w3[e]._workInProgressVersionPrimary=null;w3.length=0}var kv=Vu.ReactCurrentDispatcher,E3=Vu.ReactCurrentBatchConfig,hp=0,ro=null,zo=null,Yo=null,p2=!1,jg=!1,_0=0,oU=0;function Ea(){throw Error(sn(321))}function b7(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oc(e[n],t[n]))return!1;return!0}function w7(e,t,n,i,c,d){if(hp=d,ro=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kv.current=e===null||e.memoizedState===null?cU:uU,e=n(i,c),jg){d=0;do{if(jg=!1,_0=0,25<=d)throw Error(sn(301));d+=1,Yo=zo=null,t.updateQueue=null,kv.current=dU,e=n(i,c)}while(jg)}if(kv.current=f2,t=zo!==null&&zo.next!==null,hp=0,Yo=zo=ro=null,p2=!1,t)throw Error(sn(300));return e}function E7(){var e=_0!==0;return _0=0,e}function Rc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yo===null?ro.memoizedState=Yo=e:Yo=Yo.next=e,Yo}function bl(){if(zo===null){var e=ro.alternate;e=e!==null?e.memoizedState:null}else e=zo.next;var t=Yo===null?ro.memoizedState:Yo.next;if(t!==null)Yo=t,zo=e;else{if(e===null)throw Error(sn(310));zo=e,e={memoizedState:zo.memoizedState,baseState:zo.baseState,baseQueue:zo.baseQueue,queue:zo.queue,next:null},Yo===null?ro.memoizedState=Yo=e:Yo=Yo.next=e}return Yo}function y0(e,t){return typeof t=="function"?t(e):t}function T3(e){var t=bl(),n=t.queue;if(n===null)throw Error(sn(311));n.lastRenderedReducer=e;var i=zo,c=i.baseQueue,d=n.pending;if(d!==null){if(c!==null){var f=c.next;c.next=d.next,d.next=f}i.baseQueue=c=d,n.pending=null}if(c!==null){d=c.next,i=i.baseState;var a=f=null,v=null,S=d;do{var M=S.lane;if((hp&M)===M)v!==null&&(v=v.next={lane:0,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null}),i=S.hasEagerState?S.eagerState:e(i,S.action);else{var R={lane:M,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null};v===null?(a=v=R,f=i):v=v.next=R,ro.lanes|=M,pp|=M}S=S.next}while(S!==null&&S!==d);v===null?f=i:v.next=a,oc(i,t.memoizedState)||(as=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=v,n.lastRenderedState=i}if(e=n.interleaved,e!==null){c=e;do d=c.lane,ro.lanes|=d,pp|=d,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function S3(e){var t=bl(),n=t.queue;if(n===null)throw Error(sn(311));n.lastRenderedReducer=e;var i=n.dispatch,c=n.pending,d=t.memoizedState;if(c!==null){n.pending=null;var f=c=c.next;do d=e(d,f.action),f=f.next;while(f!==c);oc(d,t.memoizedState)||(as=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,i]}function sM(){}function lM(e,t){var n=ro,i=bl(),c=t(),d=!oc(i.memoizedState,c);if(d&&(i.memoizedState=c,as=!0),i=i.queue,T7(dM.bind(null,n,i,e),[e]),i.getSnapshot!==t||d||Yo!==null&&Yo.memoizedState.tag&1){if(n.flags|=2048,v0(9,uM.bind(null,n,i,c,t),void 0,null),Jo===null)throw Error(sn(349));hp&30||cM(n,t,c)}return c}function cM(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ro.updateQueue,t===null?(t={lastEffect:null,stores:null},ro.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uM(e,t,n,i){t.value=n,t.getSnapshot=i,hM(t)&&pM(e)}function dM(e,t,n){return n(function(){hM(t)&&pM(e)})}function hM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oc(e,n)}catch{return!0}}function pM(e){var t=Fu(e,1);t!==null&&rc(t,e,1,-1)}function mk(e){var t=Rc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y0,lastRenderedState:e},t.queue=e,e=e.dispatch=lU.bind(null,ro,e),[t.memoizedState,e]}function v0(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=ro.updateQueue,t===null?(t={lastEffect:null,stores:null},ro.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function fM(){return bl().memoizedState}function Cv(e,t,n,i){var c=Rc();ro.flags|=e,c.memoizedState=v0(1|t,n,void 0,i===void 0?null:i)}function dx(e,t,n,i){var c=bl();i=i===void 0?null:i;var d=void 0;if(zo!==null){var f=zo.memoizedState;if(d=f.destroy,i!==null&&b7(i,f.deps)){c.memoizedState=v0(t,n,d,i);return}}ro.flags|=e,c.memoizedState=v0(1|t,n,d,i)}function gk(e,t){return Cv(8390656,8,e,t)}function T7(e,t){return dx(2048,8,e,t)}function mM(e,t){return dx(4,2,e,t)}function gM(e,t){return dx(4,4,e,t)}function _M(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yM(e,t,n){return n=n!=null?n.concat([e]):null,dx(4,4,_M.bind(null,t,e),n)}function S7(){}function vM(e,t){var n=bl();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&b7(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function xM(e,t){var n=bl();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&b7(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function bM(e,t,n){return hp&21?(oc(n,t)||(n=TA(),ro.lanes|=n,pp|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,as=!0),e.memoizedState=n)}function aU(e,t){var n=pi;pi=n!==0&&4>n?n:4,e(!0);var i=E3.transition;E3.transition={};try{e(!1),t()}finally{pi=n,E3.transition=i}}function wM(){return bl().memoizedState}function sU(e,t,n){var i=Vd(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},EM(e))TM(t,n);else if(n=eM(e,t,n,i),n!==null){var c=Ga();rc(n,e,i,c),SM(n,t,i)}}function lU(e,t,n){var i=Vd(e),c={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(EM(e))TM(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var f=t.lastRenderedState,a=d(f,n);if(c.hasEagerState=!0,c.eagerState=a,oc(a,f)){var v=t.interleaved;v===null?(c.next=c,g7(t)):(c.next=v.next,v.next=c),t.interleaved=c;return}}catch{}finally{}n=eM(e,t,c,i),n!==null&&(c=Ga(),rc(n,e,i,c),SM(n,t,i))}}function EM(e){var t=e.alternate;return e===ro||t!==null&&t===ro}function TM(e,t){jg=p2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function SM(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,n7(e,n)}}var f2={readContext:xl,useCallback:Ea,useContext:Ea,useEffect:Ea,useImperativeHandle:Ea,useInsertionEffect:Ea,useLayoutEffect:Ea,useMemo:Ea,useReducer:Ea,useRef:Ea,useState:Ea,useDebugValue:Ea,useDeferredValue:Ea,useTransition:Ea,useMutableSource:Ea,useSyncExternalStore:Ea,useId:Ea,unstable_isNewReconciler:!1},cU={readContext:xl,useCallback:function(e,t){return Rc().memoizedState=[e,t===void 0?null:t],e},useContext:xl,useEffect:gk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Cv(4194308,4,_M.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cv(4,2,e,t)},useMemo:function(e,t){var n=Rc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Rc();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=sU.bind(null,ro,e),[i.memoizedState,e]},useRef:function(e){var t=Rc();return e={current:e},t.memoizedState=e},useState:mk,useDebugValue:S7,useDeferredValue:function(e){return Rc().memoizedState=e},useTransition:function(){var e=mk(!1),t=e[0];return e=aU.bind(null,e[1]),Rc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ro,c=Rc();if(Wi){if(n===void 0)throw Error(sn(407));n=n()}else{if(n=t(),Jo===null)throw Error(sn(349));hp&30||cM(i,t,n)}c.memoizedState=n;var d={value:n,getSnapshot:t};return c.queue=d,gk(dM.bind(null,i,d,e),[e]),i.flags|=2048,v0(9,uM.bind(null,i,d,n,t),void 0,null),n},useId:function(){var e=Rc(),t=Jo.identifierPrefix;if(Wi){var n=Au,i=Iu;n=(i&~(1<<32-nc(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=_0++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=oU++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uU={readContext:xl,useCallback:vM,useContext:xl,useEffect:T7,useImperativeHandle:yM,useInsertionEffect:mM,useLayoutEffect:gM,useMemo:xM,useReducer:T3,useRef:fM,useState:function(){return T3(y0)},useDebugValue:S7,useDeferredValue:function(e){var t=bl();return bM(t,zo.memoizedState,e)},useTransition:function(){var e=T3(y0)[0],t=bl().memoizedState;return[e,t]},useMutableSource:sM,useSyncExternalStore:lM,useId:wM,unstable_isNewReconciler:!1},dU={readContext:xl,useCallback:vM,useContext:xl,useEffect:T7,useImperativeHandle:yM,useInsertionEffect:mM,useLayoutEffect:gM,useMemo:xM,useReducer:S3,useRef:fM,useState:function(){return S3(y0)},useDebugValue:S7,useDeferredValue:function(e){var t=bl();return zo===null?t.memoizedState=e:bM(t,zo.memoizedState,e)},useTransition:function(){var e=S3(y0)[0],t=bl().memoizedState;return[e,t]},useMutableSource:sM,useSyncExternalStore:lM,useId:wM,unstable_isNewReconciler:!1};function _1(e,t){try{var n="",i=t;do n+=Bj(i),i=i.return;while(i);var c=n}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function k3(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function m5(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hU=typeof WeakMap=="function"?WeakMap:Map;function kM(e,t,n){n=Ru(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){g2||(g2=!0,S5=i),m5(e,t)},n}function CM(e,t,n){n=Ru(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var c=t.value;n.payload=function(){return i(c)},n.callback=function(){m5(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){m5(e,t),typeof i!="function"&&(Ud===null?Ud=new Set([this]):Ud.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function _k(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new hU;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(n)||(c.add(n),e=kU.bind(null,e,t,n),t.then(e,e))}function yk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vk(e,t,n,i,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ru(-1,1),t.tag=2,$d(n,t,1))),n.lanes|=1),e)}var pU=Vu.ReactCurrentOwner,as=!1;function Ha(e,t,n,i){t.child=e===null?oM(t,null,n,i):m1(t,e.child,n,i)}function xk(e,t,n,i,c){n=n.render;var d=t.ref;return t1(t,c),i=w7(e,t,n,i,d,c),n=E7(),e!==null&&!as?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Bu(e,t,c)):(Wi&&n&&u7(t),t.flags|=1,Ha(e,t,i,c),t.child)}function bk(e,t,n,i,c){if(e===null){var d=n.type;return typeof d=="function"&&!R7(d)&&d.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=d,PM(e,t,d,i,c)):(e=Mv(n.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var f=d.memoizedProps;if(n=n.compare,n=n!==null?n:d0,n(f,i)&&e.ref===t.ref)return Bu(e,t,c)}return t.flags|=1,e=Wd(d,i),e.ref=t.ref,e.return=t,t.child=e}function PM(e,t,n,i,c){if(e!==null){var d=e.memoizedProps;if(d0(d,i)&&e.ref===t.ref)if(as=!1,t.pendingProps=i=d,(e.lanes&c)!==0)e.flags&131072&&(as=!0);else return t.lanes=e.lanes,Bu(e,t,c)}return g5(e,t,n,i,c)}function IM(e,t,n){var i=t.pendingProps,c=i.children,d=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Di($f,Ms),Ms|=n;else{if(!(n&1073741824))return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Di($f,Ms),Ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=d!==null?d.baseLanes:n,Di($f,Ms),Ms|=i}else d!==null?(i=d.baseLanes|n,t.memoizedState=null):i=n,Di($f,Ms),Ms|=i;return Ha(e,t,c,n),t.child}function AM(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function g5(e,t,n,i,c){var d=us(n)?up:Ra.current;return d=p1(t,d),t1(t,c),n=w7(e,t,n,i,d,c),i=E7(),e!==null&&!as?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Bu(e,t,c)):(Wi&&i&&u7(t),t.flags|=1,Ha(e,t,n,c),t.child)}function wk(e,t,n,i,c){if(us(n)){var d=!0;a2(t)}else d=!1;if(t1(t,c),t.stateNode===null)Pv(e,t),rM(t,n,i),f5(t,n,i,c),i=!0;else if(e===null){var f=t.stateNode,a=t.memoizedProps;f.props=a;var v=f.context,S=n.contextType;typeof S=="object"&&S!==null?S=xl(S):(S=us(n)?up:Ra.current,S=p1(t,S));var M=n.getDerivedStateFromProps,R=typeof M=="function"||typeof f.getSnapshotBeforeUpdate=="function";R||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==i||v!==S)&&pk(t,f,i,S),Ed=!1;var N=t.memoizedState;f.state=N,d2(t,i,f,c),v=t.memoizedState,a!==i||N!==v||cs.current||Ed?(typeof M=="function"&&(p5(t,n,M,i),v=t.memoizedState),(a=Ed||hk(t,n,a,i,N,v,S))?(R||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=v),f.props=i,f.state=v,f.context=S,i=a):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,tM(e,t),a=t.memoizedProps,S=t.type===t.elementType?a:Kl(t.type,a),f.props=S,R=t.pendingProps,N=f.context,v=n.contextType,typeof v=="object"&&v!==null?v=xl(v):(v=us(n)?up:Ra.current,v=p1(t,v));var W=n.getDerivedStateFromProps;(M=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==R||N!==v)&&pk(t,f,i,v),Ed=!1,N=t.memoizedState,f.state=N,d2(t,i,f,c);var V=t.memoizedState;a!==R||N!==V||cs.current||Ed?(typeof W=="function"&&(p5(t,n,W,i),V=t.memoizedState),(S=Ed||hk(t,n,S,i,N,V,v)||!1)?(M||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,V,v),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,V,v)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=V),f.props=i,f.state=V,f.context=v,i=S):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),i=!1)}return _5(e,t,n,i,d,c)}function _5(e,t,n,i,c,d){AM(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return c&&sk(t,n,!1),Bu(e,t,d);i=t.stateNode,pU.current=t;var a=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=m1(t,e.child,null,d),t.child=m1(t,null,a,d)):Ha(e,t,a,d),t.memoizedState=i.state,c&&sk(t,n,!0),t.child}function MM(e){var t=e.stateNode;t.pendingContext?ak(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ak(e,t.context,!1),y7(e,t.containerInfo)}function Ek(e,t,n,i,c){return f1(),h7(c),t.flags|=256,Ha(e,t,n,i),t.child}var y5={dehydrated:null,treeContext:null,retryLane:0};function v5(e){return{baseLanes:e,cachePool:null,transitions:null}}function DM(e,t,n){var i=t.pendingProps,c=to.current,d=!1,f=(t.flags&128)!==0,a;if((a=f)||(a=e!==null&&e.memoizedState===null?!1:(c&2)!==0),a?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Di(to,c&1),e===null)return d5(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,d?(i=t.mode,d=t.child,f={mode:"hidden",children:f},!(i&1)&&d!==null?(d.childLanes=0,d.pendingProps=f):d=fx(f,i,0,null),e=tp(e,i,n,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=v5(n),t.memoizedState=y5,e):k7(t,f));if(c=e.memoizedState,c!==null&&(a=c.dehydrated,a!==null))return fU(e,t,f,i,a,c,n);if(d){d=i.fallback,f=t.mode,c=e.child,a=c.sibling;var v={mode:"hidden",children:i.children};return!(f&1)&&t.child!==c?(i=t.child,i.childLanes=0,i.pendingProps=v,t.deletions=null):(i=Wd(c,v),i.subtreeFlags=c.subtreeFlags&14680064),a!==null?d=Wd(a,d):(d=tp(d,f,n,null),d.flags|=2),d.return=t,i.return=t,i.sibling=d,t.child=i,i=d,d=t.child,f=e.child.memoizedState,f=f===null?v5(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~n,t.memoizedState=y5,i}return d=e.child,e=d.sibling,i=Wd(d,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function k7(e,t){return t=fx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qy(e,t,n,i){return i!==null&&h7(i),m1(t,e.child,null,n),e=k7(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fU(e,t,n,i,c,d,f){if(n)return t.flags&256?(t.flags&=-257,i=k3(Error(sn(422))),qy(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=i.fallback,c=t.mode,i=fx({mode:"visible",children:i.children},c,0,null),d=tp(d,c,f,null),d.flags|=2,i.return=t,d.return=t,i.sibling=d,t.child=i,t.mode&1&&m1(t,e.child,null,f),t.child.memoizedState=v5(f),t.memoizedState=y5,d);if(!(t.mode&1))return qy(e,t,f,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var a=i.dgst;return i=a,d=Error(sn(419)),i=k3(d,i,void 0),qy(e,t,f,i)}if(a=(f&e.childLanes)!==0,as||a){if(i=Jo,i!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(i.suspendedLanes|f)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Fu(e,c),rc(i,e,c,-1))}return D7(),i=k3(Error(sn(421))),qy(e,t,f,i)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=CU.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,Ns=jd(c.nextSibling),Fs=t,Wi=!0,Ql=null,e!==null&&(ul[dl++]=Iu,ul[dl++]=Au,ul[dl++]=dp,Iu=e.id,Au=e.overflow,dp=t),t=k7(t,i.children),t.flags|=4096,t)}function Tk(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),h5(e.return,t,n)}function C3(e,t,n,i,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=n,d.tailMode=c)}function RM(e,t,n){var i=t.pendingProps,c=i.revealOrder,d=i.tail;if(Ha(e,t,i.children,n),i=to.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tk(e,n,t);else if(e.tag===19)Tk(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Di(to,i),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&h2(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),C3(t,!1,c,n,d);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&h2(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}C3(t,!0,n,null,d);break;case"together":C3(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pp|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(sn(153));if(t.child!==null){for(e=t.child,n=Wd(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Wd(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mU(e,t,n){switch(t.tag){case 3:MM(t),f1();break;case 5:aM(t);break;case 1:us(t.type)&&a2(t);break;case 4:y7(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,c=t.memoizedProps.value;Di(c2,i._currentValue),i._currentValue=c;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Di(to,to.current&1),t.flags|=128,null):n&t.child.childLanes?DM(e,t,n):(Di(to,to.current&1),e=Bu(e,t,n),e!==null?e.sibling:null);Di(to,to.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return RM(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Di(to,to.current),i)break;return null;case 22:case 23:return t.lanes=0,IM(e,t,n)}return Bu(e,t,n)}var OM,x5,LM,zM;OM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};x5=function(){};LM=function(e,t,n,i){var c=e.memoizedProps;if(c!==i){e=t.stateNode,Jh(Uc.current);var d=null;switch(n){case"input":c=U4(e,c),i=U4(e,i),d=[];break;case"select":c=io({},c,{value:void 0}),i=io({},i,{value:void 0}),d=[];break;case"textarea":c=H4(e,c),i=H4(e,i),d=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=i2)}G4(n,i);var f;n=null;for(S in c)if(!i.hasOwnProperty(S)&&c.hasOwnProperty(S)&&c[S]!=null)if(S==="style"){var a=c[S];for(f in a)a.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i0.hasOwnProperty(S)?d||(d=[]):(d=d||[]).push(S,null));for(S in i){var v=i[S];if(a=c!=null?c[S]:void 0,i.hasOwnProperty(S)&&v!==a&&(v!=null||a!=null))if(S==="style")if(a){for(f in a)!a.hasOwnProperty(f)||v&&v.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in v)v.hasOwnProperty(f)&&a[f]!==v[f]&&(n||(n={}),n[f]=v[f])}else n||(d||(d=[]),d.push(S,n)),n=v;else S==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,a=a?a.__html:void 0,v!=null&&a!==v&&(d=d||[]).push(S,v)):S==="children"?typeof v!="string"&&typeof v!="number"||(d=d||[]).push(S,""+v):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(i0.hasOwnProperty(S)?(v!=null&&S==="onScroll"&&Li("scroll",e),d||a===v||(d=[])):(d=d||[]).push(S,v))}n&&(d=d||[]).push("style",n);var S=d;(t.updateQueue=S)&&(t.flags|=4)}};zM=function(e,t,n,i){n!==i&&(t.flags|=4)};function pg(e,t){if(!Wi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ta(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function gU(e,t,n){var i=t.pendingProps;switch(d7(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ta(t),null;case 1:return us(t.type)&&o2(),Ta(t),null;case 3:return i=t.stateNode,g1(),Fi(cs),Fi(Ra),x7(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Wy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ql!==null&&(P5(Ql),Ql=null))),x5(e,t),Ta(t),null;case 5:v7(t);var c=Jh(g0.current);if(n=t.type,e!==null&&t.stateNode!=null)LM(e,t,n,i,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(sn(166));return Ta(t),null}if(e=Jh(Uc.current),Wy(t)){i=t.stateNode,n=t.type;var d=t.memoizedProps;switch(i[Nc]=t,i[f0]=d,e=(t.mode&1)!==0,n){case"dialog":Li("cancel",i),Li("close",i);break;case"iframe":case"object":case"embed":Li("load",i);break;case"video":case"audio":for(c=0;c<Pg.length;c++)Li(Pg[c],i);break;case"source":Li("error",i);break;case"img":case"image":case"link":Li("error",i),Li("load",i);break;case"details":Li("toggle",i);break;case"input":R9(i,d),Li("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!d.multiple},Li("invalid",i);break;case"textarea":L9(i,d),Li("invalid",i)}G4(n,d),c=null;for(var f in d)if(d.hasOwnProperty(f)){var a=d[f];f==="children"?typeof a=="string"?i.textContent!==a&&(d.suppressHydrationWarning!==!0&&Vy(i.textContent,a,e),c=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(d.suppressHydrationWarning!==!0&&Vy(i.textContent,a,e),c=["children",""+a]):i0.hasOwnProperty(f)&&a!=null&&f==="onScroll"&&Li("scroll",i)}switch(n){case"input":Ly(i),O9(i,d,!0);break;case"textarea":Ly(i),z9(i);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(i.onclick=i2)}i=c,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cA(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[Nc]=t,e[f0]=i,OM(e,t,!1,!1),t.stateNode=e;e:{switch(f=Z4(n,i),n){case"dialog":Li("cancel",e),Li("close",e),c=i;break;case"iframe":case"object":case"embed":Li("load",e),c=i;break;case"video":case"audio":for(c=0;c<Pg.length;c++)Li(Pg[c],e);c=i;break;case"source":Li("error",e),c=i;break;case"img":case"image":case"link":Li("error",e),Li("load",e),c=i;break;case"details":Li("toggle",e),c=i;break;case"input":R9(e,i),c=U4(e,i),Li("invalid",e);break;case"option":c=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},c=io({},i,{value:void 0}),Li("invalid",e);break;case"textarea":L9(e,i),c=H4(e,i),Li("invalid",e);break;default:c=i}G4(n,c),a=c;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];d==="style"?hA(e,v):d==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&uA(e,v)):d==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&o0(e,v):typeof v=="number"&&o0(e,""+v):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(i0.hasOwnProperty(d)?v!=null&&d==="onScroll"&&Li("scroll",e):v!=null&&K6(e,d,v,f))}switch(n){case"input":Ly(e),O9(e,i,!1);break;case"textarea":Ly(e),z9(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Kd(i.value));break;case"select":e.multiple=!!i.multiple,d=i.value,d!=null?Yf(e,!!i.multiple,d,!1):i.defaultValue!=null&&Yf(e,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=i2)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ta(t),null;case 6:if(e&&t.stateNode!=null)zM(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(sn(166));if(n=Jh(g0.current),Jh(Uc.current),Wy(t)){if(i=t.stateNode,n=t.memoizedProps,i[Nc]=t,(d=i.nodeValue!==n)&&(e=Fs,e!==null))switch(e.tag){case 3:Vy(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vy(i.nodeValue,n,(e.mode&1)!==0)}d&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Nc]=t,t.stateNode=i}return Ta(t),null;case 13:if(Fi(to),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Wi&&Ns!==null&&t.mode&1&&!(t.flags&128))QA(),f1(),t.flags|=98560,d=!1;else if(d=Wy(t),i!==null&&i.dehydrated!==null){if(e===null){if(!d)throw Error(sn(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(sn(317));d[Nc]=t}else f1(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ta(t),d=!1}else Ql!==null&&(P5(Ql),Ql=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||to.current&1?Fo===0&&(Fo=3):D7())),t.updateQueue!==null&&(t.flags|=4),Ta(t),null);case 4:return g1(),x5(e,t),e===null&&h0(t.stateNode.containerInfo),Ta(t),null;case 10:return m7(t.type._context),Ta(t),null;case 17:return us(t.type)&&o2(),Ta(t),null;case 19:if(Fi(to),d=t.memoizedState,d===null)return Ta(t),null;if(i=(t.flags&128)!==0,f=d.rendering,f===null)if(i)pg(d,!1);else{if(Fo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=h2(e),f!==null){for(t.flags|=128,pg(d,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)d=n,e=i,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Di(to,to.current&1|2),t.child}e=e.sibling}d.tail!==null&&_o()>y1&&(t.flags|=128,i=!0,pg(d,!1),t.lanes=4194304)}else{if(!i)if(e=h2(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pg(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Wi)return Ta(t),null}else 2*_o()-d.renderingStartTime>y1&&n!==1073741824&&(t.flags|=128,i=!0,pg(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(n=d.last,n!==null?n.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=_o(),t.sibling=null,n=to.current,Di(to,i?n&1|2:n&1),t):(Ta(t),null);case 22:case 23:return M7(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ms&1073741824&&(Ta(t),t.subtreeFlags&6&&(t.flags|=8192)):Ta(t),null;case 24:return null;case 25:return null}throw Error(sn(156,t.tag))}function _U(e,t){switch(d7(t),t.tag){case 1:return us(t.type)&&o2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return g1(),Fi(cs),Fi(Ra),x7(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return v7(t),null;case 13:if(Fi(to),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(sn(340));f1()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fi(to),null;case 4:return g1(),null;case 10:return m7(t.type._context),null;case 22:case 23:return M7(),null;case 24:return null;default:return null}}var Gy=!1,Ia=!1,yU=typeof WeakSet=="function"?WeakSet:Set,jn=null;function jf(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){co(e,t,i)}else n.current=null}function b5(e,t,n){try{n()}catch(i){co(e,t,i)}}var Sk=!1;function vU(e,t){if(i5=t2,e=jA(),c7(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,d=i.focusNode;i=i.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var f=0,a=-1,v=-1,S=0,M=0,R=e,N=null;t:for(;;){for(var W;R!==n||c!==0&&R.nodeType!==3||(a=f+c),R!==d||i!==0&&R.nodeType!==3||(v=f+i),R.nodeType===3&&(f+=R.nodeValue.length),(W=R.firstChild)!==null;)N=R,R=W;for(;;){if(R===e)break t;if(N===n&&++S===c&&(a=f),N===d&&++M===i&&(v=f),(W=R.nextSibling)!==null)break;R=N,N=R.parentNode}R=W}n=a===-1||v===-1?null:{start:a,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(o5={focusedElem:e,selectionRange:n},t2=!1,jn=t;jn!==null;)if(t=jn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,jn=e;else for(;jn!==null;){t=jn;try{var V=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var H=V.memoizedProps,le=V.memoizedState,G=t.stateNode,X=G.getSnapshotBeforeUpdate(t.elementType===t.type?H:Kl(t.type,H),le);G.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var Q=t.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(sn(163))}}catch(oe){co(t,t.return,oe)}if(e=t.sibling,e!==null){e.return=t.return,jn=e;break}jn=t.return}return V=Sk,Sk=!1,V}function $g(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&b5(t,n,d)}c=c.next}while(c!==i)}}function hx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function w5(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function NM(e){var t=e.alternate;t!==null&&(e.alternate=null,NM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nc],delete t[f0],delete t[l5],delete t[tU],delete t[nU])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function FM(e){return e.tag===5||e.tag===3||e.tag===4}function kk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||FM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function E5(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=i2));else if(i!==4&&(e=e.child,e!==null))for(E5(e,t,n),e=e.sibling;e!==null;)E5(e,t,n),e=e.sibling}function T5(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(T5(e,t,n),e=e.sibling;e!==null;)T5(e,t,n),e=e.sibling}var aa=null,Yl=!1;function vd(e,t,n){for(n=n.child;n!==null;)BM(e,t,n),n=n.sibling}function BM(e,t,n){if($c&&typeof $c.onCommitFiberUnmount=="function")try{$c.onCommitFiberUnmount(ix,n)}catch{}switch(n.tag){case 5:Ia||jf(n,t);case 6:var i=aa,c=Yl;aa=null,vd(e,t,n),aa=i,Yl=c,aa!==null&&(Yl?(e=aa,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):aa.removeChild(n.stateNode));break;case 18:aa!==null&&(Yl?(e=aa,n=n.stateNode,e.nodeType===8?x3(e.parentNode,n):e.nodeType===1&&x3(e,n),c0(e)):x3(aa,n.stateNode));break;case 4:i=aa,c=Yl,aa=n.stateNode.containerInfo,Yl=!0,vd(e,t,n),aa=i,Yl=c;break;case 0:case 11:case 14:case 15:if(!Ia&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var d=c,f=d.destroy;d=d.tag,f!==void 0&&(d&2||d&4)&&b5(n,t,f),c=c.next}while(c!==i)}vd(e,t,n);break;case 1:if(!Ia&&(jf(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){co(n,t,a)}vd(e,t,n);break;case 21:vd(e,t,n);break;case 22:n.mode&1?(Ia=(i=Ia)||n.memoizedState!==null,vd(e,t,n),Ia=i):vd(e,t,n);break;default:vd(e,t,n)}}function Ck(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new yU),t.forEach(function(i){var c=PU.bind(null,e,i);n.has(i)||(n.add(i),i.then(c,c))})}}function Hl(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];try{var d=e,f=t,a=f;e:for(;a!==null;){switch(a.tag){case 5:aa=a.stateNode,Yl=!1;break e;case 3:aa=a.stateNode.containerInfo,Yl=!0;break e;case 4:aa=a.stateNode.containerInfo,Yl=!0;break e}a=a.return}if(aa===null)throw Error(sn(160));BM(d,f,c),aa=null,Yl=!1;var v=c.alternate;v!==null&&(v.return=null),c.return=null}catch(S){co(c,t,S)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jM(t,e),t=t.sibling}function jM(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hl(t,e),Mc(e),i&4){try{$g(3,e,e.return),hx(3,e)}catch(H){co(e,e.return,H)}try{$g(5,e,e.return)}catch(H){co(e,e.return,H)}}break;case 1:Hl(t,e),Mc(e),i&512&&n!==null&&jf(n,n.return);break;case 5:if(Hl(t,e),Mc(e),i&512&&n!==null&&jf(n,n.return),e.flags&32){var c=e.stateNode;try{o0(c,"")}catch(H){co(e,e.return,H)}}if(i&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,f=n!==null?n.memoizedProps:d,a=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{a==="input"&&d.type==="radio"&&d.name!=null&&sA(c,d),Z4(a,f);var S=Z4(a,d);for(f=0;f<v.length;f+=2){var M=v[f],R=v[f+1];M==="style"?hA(c,R):M==="dangerouslySetInnerHTML"?uA(c,R):M==="children"?o0(c,R):K6(c,M,R,S)}switch(a){case"input":V4(c,d);break;case"textarea":lA(c,d);break;case"select":var N=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var W=d.value;W!=null?Yf(c,!!d.multiple,W,!1):N!==!!d.multiple&&(d.defaultValue!=null?Yf(c,!!d.multiple,d.defaultValue,!0):Yf(c,!!d.multiple,d.multiple?[]:"",!1))}c[f0]=d}catch(H){co(e,e.return,H)}}break;case 6:if(Hl(t,e),Mc(e),i&4){if(e.stateNode===null)throw Error(sn(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(H){co(e,e.return,H)}}break;case 3:if(Hl(t,e),Mc(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{c0(t.containerInfo)}catch(H){co(e,e.return,H)}break;case 4:Hl(t,e),Mc(e);break;case 13:Hl(t,e),Mc(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(I7=_o())),i&4&&Ck(e);break;case 22:if(M=n!==null&&n.memoizedState!==null,e.mode&1?(Ia=(S=Ia)||M,Hl(t,e),Ia=S):Hl(t,e),Mc(e),i&8192){if(S=e.memoizedState!==null,(e.stateNode.isHidden=S)&&!M&&e.mode&1)for(jn=e,M=e.child;M!==null;){for(R=jn=M;jn!==null;){switch(N=jn,W=N.child,N.tag){case 0:case 11:case 14:case 15:$g(4,N,N.return);break;case 1:jf(N,N.return);var V=N.stateNode;if(typeof V.componentWillUnmount=="function"){i=N,n=N.return;try{t=i,V.props=t.memoizedProps,V.state=t.memoizedState,V.componentWillUnmount()}catch(H){co(i,n,H)}}break;case 5:jf(N,N.return);break;case 22:if(N.memoizedState!==null){Ik(R);continue}}W!==null?(W.return=N,jn=W):Ik(R)}M=M.sibling}e:for(M=null,R=e;;){if(R.tag===5){if(M===null){M=R;try{c=R.stateNode,S?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(a=R.stateNode,v=R.memoizedProps.style,f=v!=null&&v.hasOwnProperty("display")?v.display:null,a.style.display=dA("display",f))}catch(H){co(e,e.return,H)}}}else if(R.tag===6){if(M===null)try{R.stateNode.nodeValue=S?"":R.memoizedProps}catch(H){co(e,e.return,H)}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===e)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===e)break e;for(;R.sibling===null;){if(R.return===null||R.return===e)break e;M===R&&(M=null),R=R.return}M===R&&(M=null),R.sibling.return=R.return,R=R.sibling}}break;case 19:Hl(t,e),Mc(e),i&4&&Ck(e);break;case 21:break;default:Hl(t,e),Mc(e)}}function Mc(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(FM(n)){var i=n;break e}n=n.return}throw Error(sn(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(o0(c,""),i.flags&=-33);var d=kk(e);T5(e,d,c);break;case 3:case 4:var f=i.stateNode.containerInfo,a=kk(e);E5(e,a,f);break;default:throw Error(sn(161))}}catch(v){co(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xU(e,t,n){jn=e,$M(e)}function $M(e,t,n){for(var i=(e.mode&1)!==0;jn!==null;){var c=jn,d=c.child;if(c.tag===22&&i){var f=c.memoizedState!==null||Gy;if(!f){var a=c.alternate,v=a!==null&&a.memoizedState!==null||Ia;a=Gy;var S=Ia;if(Gy=f,(Ia=v)&&!S)for(jn=c;jn!==null;)f=jn,v=f.child,f.tag===22&&f.memoizedState!==null?Ak(c):v!==null?(v.return=f,jn=v):Ak(c);for(;d!==null;)jn=d,$M(d),d=d.sibling;jn=c,Gy=a,Ia=S}Pk(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,jn=d):Pk(e)}}function Pk(e){for(;jn!==null;){var t=jn;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ia||hx(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ia)if(n===null)i.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:Kl(t.type,n.memoizedProps);i.componentDidUpdate(c,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&dk(t,d,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}dk(t,f,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var S=t.alternate;if(S!==null){var M=S.memoizedState;if(M!==null){var R=M.dehydrated;R!==null&&c0(R)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(sn(163))}Ia||t.flags&512&&w5(t)}catch(N){co(t,t.return,N)}}if(t===e){jn=null;break}if(n=t.sibling,n!==null){n.return=t.return,jn=n;break}jn=t.return}}function Ik(e){for(;jn!==null;){var t=jn;if(t===e){jn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,jn=n;break}jn=t.return}}function Ak(e){for(;jn!==null;){var t=jn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hx(4,t)}catch(v){co(t,n,v)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var c=t.return;try{i.componentDidMount()}catch(v){co(t,c,v)}}var d=t.return;try{w5(t)}catch(v){co(t,d,v)}break;case 5:var f=t.return;try{w5(t)}catch(v){co(t,f,v)}}}catch(v){co(t,t.return,v)}if(t===e){jn=null;break}var a=t.sibling;if(a!==null){a.return=t.return,jn=a;break}jn=t.return}}var bU=Math.ceil,m2=Vu.ReactCurrentDispatcher,C7=Vu.ReactCurrentOwner,gl=Vu.ReactCurrentBatchConfig,Ur=0,Jo=null,Co=null,ca=0,Ms=0,$f=oh(0),Fo=0,x0=null,pp=0,px=0,P7=0,Ug=null,os=null,I7=0,y1=1/0,ku=null,g2=!1,S5=null,Ud=null,Zy=!1,Dd=null,_2=0,Vg=0,k5=null,Iv=-1,Av=0;function Ga(){return Ur&6?_o():Iv!==-1?Iv:Iv=_o()}function Vd(e){return e.mode&1?Ur&2&&ca!==0?ca&-ca:iU.transition!==null?(Av===0&&(Av=TA()),Av):(e=pi,e!==0||(e=window.event,e=e===void 0?16:MA(e.type)),e):1}function rc(e,t,n,i){if(50<Vg)throw Vg=0,k5=null,Error(sn(185));t_(e,n,i),(!(Ur&2)||e!==Jo)&&(e===Jo&&(!(Ur&2)&&(px|=n),Fo===4&&Sd(e,ca)),ds(e,i),n===1&&Ur===0&&!(t.mode&1)&&(y1=_o()+500,cx&&ah()))}function ds(e,t){var n=e.callbackNode;i$(e,t);var i=e2(e,e===Jo?ca:0);if(i===0)n!==null&&B9(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&B9(n),t===1)e.tag===0?rU(Mk.bind(null,e)):KA(Mk.bind(null,e)),Q$(function(){!(Ur&6)&&ah()}),n=null;else{switch(SA(i)){case 1:n=t7;break;case 4:n=wA;break;case 16:n=Qv;break;case 536870912:n=EA;break;default:n=Qv}n=XM(n,UM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function UM(e,t){if(Iv=-1,Av=0,Ur&6)throw Error(sn(327));var n=e.callbackNode;if(n1()&&e.callbackNode!==n)return null;var i=e2(e,e===Jo?ca:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=y2(e,i);else{t=i;var c=Ur;Ur|=2;var d=WM();(Jo!==e||ca!==t)&&(ku=null,y1=_o()+500,ep(e,t));do try{TU();break}catch(a){VM(e,a)}while(1);f7(),m2.current=d,Ur=c,Co!==null?t=0:(Jo=null,ca=0,t=Fo)}if(t!==0){if(t===2&&(c=Q4(e),c!==0&&(i=c,t=C5(e,c))),t===1)throw n=x0,ep(e,0),Sd(e,i),ds(e,_o()),n;if(t===6)Sd(e,i);else{if(c=e.current.alternate,!(i&30)&&!wU(c)&&(t=y2(e,i),t===2&&(d=Q4(e),d!==0&&(i=d,t=C5(e,d))),t===1))throw n=x0,ep(e,0),Sd(e,i),ds(e,_o()),n;switch(e.finishedWork=c,e.finishedLanes=i,t){case 0:case 1:throw Error(sn(345));case 2:Hh(e,os,ku);break;case 3:if(Sd(e,i),(i&130023424)===i&&(t=I7+500-_o(),10<t)){if(e2(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){Ga(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=s5(Hh.bind(null,e,os,ku),t);break}Hh(e,os,ku);break;case 4:if(Sd(e,i),(i&4194240)===i)break;for(t=e.eventTimes,c=-1;0<i;){var f=31-nc(i);d=1<<f,f=t[f],f>c&&(c=f),i&=~d}if(i=c,i=_o()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bU(i/1960))-i,10<i){e.timeoutHandle=s5(Hh.bind(null,e,os,ku),i);break}Hh(e,os,ku);break;case 5:Hh(e,os,ku);break;default:throw Error(sn(329))}}}return ds(e,_o()),e.callbackNode===n?UM.bind(null,e):null}function C5(e,t){var n=Ug;return e.current.memoizedState.isDehydrated&&(ep(e,t).flags|=256),e=y2(e,t),e!==2&&(t=os,os=n,t!==null&&P5(t)),e}function P5(e){os===null?os=e:os.push.apply(os,e)}function wU(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var c=n[i],d=c.getSnapshot;c=c.value;try{if(!oc(d(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sd(e,t){for(t&=~P7,t&=~px,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-nc(t),i=1<<n;e[n]=-1,t&=~i}}function Mk(e){if(Ur&6)throw Error(sn(327));n1();var t=e2(e,0);if(!(t&1))return ds(e,_o()),null;var n=y2(e,t);if(e.tag!==0&&n===2){var i=Q4(e);i!==0&&(t=i,n=C5(e,i))}if(n===1)throw n=x0,ep(e,0),Sd(e,t),ds(e,_o()),n;if(n===6)throw Error(sn(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hh(e,os,ku),ds(e,_o()),null}function A7(e,t){var n=Ur;Ur|=1;try{return e(t)}finally{Ur=n,Ur===0&&(y1=_o()+500,cx&&ah())}}function fp(e){Dd!==null&&Dd.tag===0&&!(Ur&6)&&n1();var t=Ur;Ur|=1;var n=gl.transition,i=pi;try{if(gl.transition=null,pi=1,e)return e()}finally{pi=i,gl.transition=n,Ur=t,!(Ur&6)&&ah()}}function M7(){Ms=$f.current,Fi($f)}function ep(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,J$(n)),Co!==null)for(n=Co.return;n!==null;){var i=n;switch(d7(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&o2();break;case 3:g1(),Fi(cs),Fi(Ra),x7();break;case 5:v7(i);break;case 4:g1();break;case 13:Fi(to);break;case 19:Fi(to);break;case 10:m7(i.type._context);break;case 22:case 23:M7()}n=n.return}if(Jo=e,Co=e=Wd(e.current,null),ca=Ms=t,Fo=0,x0=null,P7=px=pp=0,os=Ug=null,Yh!==null){for(t=0;t<Yh.length;t++)if(n=Yh[t],i=n.interleaved,i!==null){n.interleaved=null;var c=i.next,d=n.pending;if(d!==null){var f=d.next;d.next=c,i.next=f}n.pending=i}Yh=null}return e}function VM(e,t){do{var n=Co;try{if(f7(),kv.current=f2,p2){for(var i=ro.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}p2=!1}if(hp=0,Yo=zo=ro=null,jg=!1,_0=0,C7.current=null,n===null||n.return===null){Fo=1,x0=t,Co=null;break}e:{var d=e,f=n.return,a=n,v=t;if(t=ca,a.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var S=v,M=a,R=M.tag;if(!(M.mode&1)&&(R===0||R===11||R===15)){var N=M.alternate;N?(M.updateQueue=N.updateQueue,M.memoizedState=N.memoizedState,M.lanes=N.lanes):(M.updateQueue=null,M.memoizedState=null)}var W=yk(f);if(W!==null){W.flags&=-257,vk(W,f,a,d,t),W.mode&1&&_k(d,S,t),t=W,v=S;var V=t.updateQueue;if(V===null){var H=new Set;H.add(v),t.updateQueue=H}else V.add(v);break e}else{if(!(t&1)){_k(d,S,t),D7();break e}v=Error(sn(426))}}else if(Wi&&a.mode&1){var le=yk(f);if(le!==null){!(le.flags&65536)&&(le.flags|=256),vk(le,f,a,d,t),h7(_1(v,a));break e}}d=v=_1(v,a),Fo!==4&&(Fo=2),Ug===null?Ug=[d]:Ug.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var G=kM(d,v,t);uk(d,G);break e;case 1:a=v;var X=d.type,Q=d.stateNode;if(!(d.flags&128)&&(typeof X.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Ud===null||!Ud.has(Q)))){d.flags|=65536,t&=-t,d.lanes|=t;var oe=CM(d,a,t);uk(d,oe);break e}}d=d.return}while(d!==null)}qM(n)}catch(he){t=he,Co===n&&n!==null&&(Co=n=n.return);continue}break}while(1)}function WM(){var e=m2.current;return m2.current=f2,e===null?f2:e}function D7(){(Fo===0||Fo===3||Fo===2)&&(Fo=4),Jo===null||!(pp&268435455)&&!(px&268435455)||Sd(Jo,ca)}function y2(e,t){var n=Ur;Ur|=2;var i=WM();(Jo!==e||ca!==t)&&(ku=null,ep(e,t));do try{EU();break}catch(c){VM(e,c)}while(1);if(f7(),Ur=n,m2.current=i,Co!==null)throw Error(sn(261));return Jo=null,ca=0,Fo}function EU(){for(;Co!==null;)HM(Co)}function TU(){for(;Co!==null&&!Xj();)HM(Co)}function HM(e){var t=ZM(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,t===null?qM(e):Co=t,C7.current=null}function qM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_U(n,t),n!==null){n.flags&=32767,Co=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fo=6,Co=null;return}}else if(n=gU(n,t,Ms),n!==null){Co=n;return}if(t=t.sibling,t!==null){Co=t;return}Co=t=e}while(t!==null);Fo===0&&(Fo=5)}function Hh(e,t,n){var i=pi,c=gl.transition;try{gl.transition=null,pi=1,SU(e,t,n,i)}finally{gl.transition=c,pi=i}return null}function SU(e,t,n,i){do n1();while(Dd!==null);if(Ur&6)throw Error(sn(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(sn(177));e.callbackNode=null,e.callbackPriority=0;var d=n.lanes|n.childLanes;if(o$(e,d),e===Jo&&(Co=Jo=null,ca=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zy||(Zy=!0,XM(Qv,function(){return n1(),null})),d=(n.flags&15990)!==0,n.subtreeFlags&15990||d){d=gl.transition,gl.transition=null;var f=pi;pi=1;var a=Ur;Ur|=4,C7.current=null,vU(e,n),jM(n,e),H$(o5),t2=!!i5,o5=i5=null,e.current=n,xU(n),Kj(),Ur=a,pi=f,gl.transition=d}else e.current=n;if(Zy&&(Zy=!1,Dd=e,_2=c),d=e.pendingLanes,d===0&&(Ud=null),Qj(n.stateNode),ds(e,_o()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],i(c.value,{componentStack:c.stack,digest:c.digest});if(g2)throw g2=!1,e=S5,S5=null,e;return _2&1&&e.tag!==0&&n1(),d=e.pendingLanes,d&1?e===k5?Vg++:(Vg=0,k5=e):Vg=0,ah(),null}function n1(){if(Dd!==null){var e=SA(_2),t=gl.transition,n=pi;try{if(gl.transition=null,pi=16>e?16:e,Dd===null)var i=!1;else{if(e=Dd,Dd=null,_2=0,Ur&6)throw Error(sn(331));var c=Ur;for(Ur|=4,jn=e.current;jn!==null;){var d=jn,f=d.child;if(jn.flags&16){var a=d.deletions;if(a!==null){for(var v=0;v<a.length;v++){var S=a[v];for(jn=S;jn!==null;){var M=jn;switch(M.tag){case 0:case 11:case 15:$g(8,M,d)}var R=M.child;if(R!==null)R.return=M,jn=R;else for(;jn!==null;){M=jn;var N=M.sibling,W=M.return;if(NM(M),M===S){jn=null;break}if(N!==null){N.return=W,jn=N;break}jn=W}}}var V=d.alternate;if(V!==null){var H=V.child;if(H!==null){V.child=null;do{var le=H.sibling;H.sibling=null,H=le}while(H!==null)}}jn=d}}if(d.subtreeFlags&2064&&f!==null)f.return=d,jn=f;else e:for(;jn!==null;){if(d=jn,d.flags&2048)switch(d.tag){case 0:case 11:case 15:$g(9,d,d.return)}var G=d.sibling;if(G!==null){G.return=d.return,jn=G;break e}jn=d.return}}var X=e.current;for(jn=X;jn!==null;){f=jn;var Q=f.child;if(f.subtreeFlags&2064&&Q!==null)Q.return=f,jn=Q;else e:for(f=X;jn!==null;){if(a=jn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hx(9,a)}}catch(he){co(a,a.return,he)}if(a===f){jn=null;break e}var oe=a.sibling;if(oe!==null){oe.return=a.return,jn=oe;break e}jn=a.return}}if(Ur=c,ah(),$c&&typeof $c.onPostCommitFiberRoot=="function")try{$c.onPostCommitFiberRoot(ix,e)}catch{}i=!0}return i}finally{pi=n,gl.transition=t}}return!1}function Dk(e,t,n){t=_1(n,t),t=kM(e,t,1),e=$d(e,t,1),t=Ga(),e!==null&&(t_(e,1,t),ds(e,t))}function co(e,t,n){if(e.tag===3)Dk(e,e,n);else for(;t!==null;){if(t.tag===3){Dk(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ud===null||!Ud.has(i))){e=_1(n,e),e=CM(t,e,1),t=$d(t,e,1),e=Ga(),t!==null&&(t_(t,1,e),ds(t,e));break}}t=t.return}}function kU(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Ga(),e.pingedLanes|=e.suspendedLanes&n,Jo===e&&(ca&n)===n&&(Fo===4||Fo===3&&(ca&130023424)===ca&&500>_o()-I7?ep(e,0):P7|=n),ds(e,t)}function GM(e,t){t===0&&(e.mode&1?(t=Fy,Fy<<=1,!(Fy&130023424)&&(Fy=4194304)):t=1);var n=Ga();e=Fu(e,t),e!==null&&(t_(e,t,n),ds(e,n))}function CU(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),GM(e,n)}function PU(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(sn(314))}i!==null&&i.delete(t),GM(e,n)}var ZM;ZM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||cs.current)as=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return as=!1,mU(e,t,n);as=!!(e.flags&131072)}else as=!1,Wi&&t.flags&1048576&&YA(t,l2,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Pv(e,t),e=t.pendingProps;var c=p1(t,Ra.current);t1(t,n),c=w7(null,t,i,e,c,n);var d=E7();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,us(i)?(d=!0,a2(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,_7(t),c.updater=ux,t.stateNode=c,c._reactInternals=t,f5(t,i,e,n),t=_5(null,t,i,!0,d,n)):(t.tag=0,Wi&&d&&u7(t),Ha(null,t,c,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Pv(e,t),e=t.pendingProps,c=i._init,i=c(i._payload),t.type=i,c=t.tag=AU(i),e=Kl(i,e),c){case 0:t=g5(null,t,i,e,n);break e;case 1:t=wk(null,t,i,e,n);break e;case 11:t=xk(null,t,i,e,n);break e;case 14:t=bk(null,t,i,Kl(i.type,e),n);break e}throw Error(sn(306,i,""))}return t;case 0:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Kl(i,c),g5(e,t,i,c,n);case 1:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Kl(i,c),wk(e,t,i,c,n);case 3:e:{if(MM(t),e===null)throw Error(sn(387));i=t.pendingProps,d=t.memoizedState,c=d.element,tM(e,t),d2(t,i,null,n);var f=t.memoizedState;if(i=f.element,d.isDehydrated)if(d={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=_1(Error(sn(423)),t),t=Ek(e,t,i,n,c);break e}else if(i!==c){c=_1(Error(sn(424)),t),t=Ek(e,t,i,n,c);break e}else for(Ns=jd(t.stateNode.containerInfo.firstChild),Fs=t,Wi=!0,Ql=null,n=oM(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(f1(),i===c){t=Bu(e,t,n);break e}Ha(e,t,i,n)}t=t.child}return t;case 5:return aM(t),e===null&&d5(t),i=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,f=c.children,a5(i,c)?f=null:d!==null&&a5(i,d)&&(t.flags|=32),AM(e,t),Ha(e,t,f,n),t.child;case 6:return e===null&&d5(t),null;case 13:return DM(e,t,n);case 4:return y7(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=m1(t,null,i,n):Ha(e,t,i,n),t.child;case 11:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Kl(i,c),xk(e,t,i,c,n);case 7:return Ha(e,t,t.pendingProps,n),t.child;case 8:return Ha(e,t,t.pendingProps.children,n),t.child;case 12:return Ha(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,c=t.pendingProps,d=t.memoizedProps,f=c.value,Di(c2,i._currentValue),i._currentValue=f,d!==null)if(oc(d.value,f)){if(d.children===c.children&&!cs.current){t=Bu(e,t,n);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var a=d.dependencies;if(a!==null){f=d.child;for(var v=a.firstContext;v!==null;){if(v.context===i){if(d.tag===1){v=Ru(-1,n&-n),v.tag=2;var S=d.updateQueue;if(S!==null){S=S.shared;var M=S.pending;M===null?v.next=v:(v.next=M.next,M.next=v),S.pending=v}}d.lanes|=n,v=d.alternate,v!==null&&(v.lanes|=n),h5(d.return,n,t),a.lanes|=n;break}v=v.next}}else if(d.tag===10)f=d.type===t.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(sn(341));f.lanes|=n,a=f.alternate,a!==null&&(a.lanes|=n),h5(f,n,t),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===t){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}Ha(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,i=t.pendingProps.children,t1(t,n),c=xl(c),i=i(c),t.flags|=1,Ha(e,t,i,n),t.child;case 14:return i=t.type,c=Kl(i,t.pendingProps),c=Kl(i.type,c),bk(e,t,i,c,n);case 15:return PM(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Kl(i,c),Pv(e,t),t.tag=1,us(i)?(e=!0,a2(t)):e=!1,t1(t,n),rM(t,i,c),f5(t,i,c,n),_5(null,t,i,!0,e,n);case 19:return RM(e,t,n);case 22:return IM(e,t,n)}throw Error(sn(156,t.tag))};function XM(e,t){return bA(e,t)}function IU(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hl(e,t,n,i){return new IU(e,t,n,i)}function R7(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AU(e){if(typeof e=="function")return R7(e)?1:0;if(e!=null){if(e=e.$$typeof,e===J6)return 11;if(e===Q6)return 14}return 2}function Wd(e,t){var n=e.alternate;return n===null?(n=hl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mv(e,t,n,i,c,d){var f=2;if(i=e,typeof e=="function")R7(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Mf:return tp(n.children,c,d,t);case Y6:f=8,c|=8;break;case F4:return e=hl(12,n,t,c|2),e.elementType=F4,e.lanes=d,e;case B4:return e=hl(13,n,t,c),e.elementType=B4,e.lanes=d,e;case j4:return e=hl(19,n,t,c),e.elementType=j4,e.lanes=d,e;case iA:return fx(n,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nA:f=10;break e;case rA:f=9;break e;case J6:f=11;break e;case Q6:f=14;break e;case wd:f=16,i=null;break e}throw Error(sn(130,e==null?e:typeof e,""))}return t=hl(f,n,t,c),t.elementType=e,t.type=i,t.lanes=d,t}function tp(e,t,n,i){return e=hl(7,e,i,t),e.lanes=n,e}function fx(e,t,n,i){return e=hl(22,e,i,t),e.elementType=iA,e.lanes=n,e.stateNode={isHidden:!1},e}function P3(e,t,n){return e=hl(6,e,null,t),e.lanes=n,e}function I3(e,t,n){return t=hl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function MU(e,t,n,i,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c3(0),this.expirationTimes=c3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c3(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function O7(e,t,n,i,c,d,f,a,v){return e=new MU(e,t,n,a,v),t===1?(t=1,d===!0&&(t|=8)):t=0,d=hl(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_7(d),e}function DU(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Af,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function KM(e){if(!e)return Yd;e=e._reactInternals;e:{if(Cp(e)!==e||e.tag!==1)throw Error(sn(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(us(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(sn(171))}if(e.tag===1){var n=e.type;if(us(n))return XA(e,n,t)}return t}function YM(e,t,n,i,c,d,f,a,v){return e=O7(n,i,!0,e,c,d,f,a,v),e.context=KM(null),n=e.current,i=Ga(),c=Vd(n),d=Ru(i,c),d.callback=t??null,$d(n,d,c),e.current.lanes=c,t_(e,c,i),ds(e,i),e}function mx(e,t,n,i){var c=t.current,d=Ga(),f=Vd(c);return n=KM(n),t.context===null?t.context=n:t.pendingContext=n,t=Ru(d,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=$d(c,t,f),e!==null&&(rc(e,c,f,d),Sv(e,c,f)),f}function v2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function L7(e,t){Rk(e,t),(e=e.alternate)&&Rk(e,t)}function RU(){return null}var JM=typeof reportError=="function"?reportError:function(e){console.error(e)};function z7(e){this._internalRoot=e}gx.prototype.render=z7.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(sn(409));mx(e,t,null,null)};gx.prototype.unmount=z7.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fp(function(){mx(null,e,null,null)}),t[Nu]=null}};function gx(e){this._internalRoot=e}gx.prototype.unstable_scheduleHydration=function(e){if(e){var t=PA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Td.length&&t!==0&&t<Td[n].priority;n++);Td.splice(n,0,e),n===0&&AA(e)}};function N7(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ok(){}function OU(e,t,n,i,c){if(c){if(typeof i=="function"){var d=i;i=function(){var S=v2(f);d.call(S)}}var f=YM(t,i,e,0,null,!1,!1,"",Ok);return e._reactRootContainer=f,e[Nu]=f.current,h0(e.nodeType===8?e.parentNode:e),fp(),f}for(;c=e.lastChild;)e.removeChild(c);if(typeof i=="function"){var a=i;i=function(){var S=v2(v);a.call(S)}}var v=O7(e,0,!1,null,null,!1,!1,"",Ok);return e._reactRootContainer=v,e[Nu]=v.current,h0(e.nodeType===8?e.parentNode:e),fp(function(){mx(t,v,n,i)}),v}function yx(e,t,n,i,c){var d=n._reactRootContainer;if(d){var f=d;if(typeof c=="function"){var a=c;c=function(){var v=v2(f);a.call(v)}}mx(t,f,e,c)}else f=OU(n,t,e,c,i);return v2(f)}kA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Cg(t.pendingLanes);n!==0&&(n7(t,n|1),ds(t,_o()),!(Ur&6)&&(y1=_o()+500,ah()))}break;case 13:fp(function(){var i=Fu(e,1);if(i!==null){var c=Ga();rc(i,e,1,c)}}),L7(e,1)}};r7=function(e){if(e.tag===13){var t=Fu(e,134217728);if(t!==null){var n=Ga();rc(t,e,134217728,n)}L7(e,134217728)}};CA=function(e){if(e.tag===13){var t=Vd(e),n=Fu(e,t);if(n!==null){var i=Ga();rc(n,e,t,i)}L7(e,t)}};PA=function(){return pi};IA=function(e,t){var n=pi;try{return pi=e,t()}finally{pi=n}};K4=function(e,t,n){switch(t){case"input":if(V4(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var c=lx(i);if(!c)throw Error(sn(90));aA(i),V4(i,c)}}}break;case"textarea":lA(e,n);break;case"select":t=n.value,t!=null&&Yf(e,!!n.multiple,t,!1)}};mA=A7;gA=fp;var LU={usingClientEntryPoint:!1,Events:[r_,Lf,lx,pA,fA,A7]},fg={findFiberByHostInstance:Kh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zU={bundleType:fg.bundleType,version:fg.version,rendererPackageName:fg.rendererPackageName,rendererConfig:fg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vA(e),e===null?null:e.stateNode},findFiberByHostInstance:fg.findFiberByHostInstance||RU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xy.isDisabled&&Xy.supportsFiber)try{ix=Xy.inject(zU),$c=Xy}catch{}}Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LU;Vs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N7(t))throw Error(sn(200));return DU(e,t,null,n)};Vs.createRoot=function(e,t){if(!N7(e))throw Error(sn(299));var n=!1,i="",c=JM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=O7(e,1,!1,null,null,n,!1,i,c),e[Nu]=t.current,h0(e.nodeType===8?e.parentNode:e),new z7(t)};Vs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(sn(188)):(e=Object.keys(e).join(","),Error(sn(268,e)));return e=vA(t),e=e===null?null:e.stateNode,e};Vs.flushSync=function(e){return fp(e)};Vs.hydrate=function(e,t,n){if(!_x(t))throw Error(sn(200));return yx(null,e,t,!0,n)};Vs.hydrateRoot=function(e,t,n){if(!N7(e))throw Error(sn(405));var i=n!=null&&n.hydratedSources||null,c=!1,d="",f=JM;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=YM(t,null,e,1,n??null,c,!1,d,f),e[Nu]=t.current,h0(e),i)for(e=0;e<i.length;e++)n=i[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new gx(t)};Vs.render=function(e,t,n){if(!_x(t))throw Error(sn(200));return yx(null,e,t,!1,n)};Vs.unmountComponentAtNode=function(e){if(!_x(e))throw Error(sn(40));return e._reactRootContainer?(fp(function(){yx(null,null,e,!1,function(){e._reactRootContainer=null,e[Nu]=null})}),!0):!1};Vs.unstable_batchedUpdates=A7;Vs.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!_x(n))throw Error(sn(200));if(e==null||e._reactInternals===void 0)throw Error(sn(38));return yx(e,t,n,!1,i)};Vs.version="18.2.0-next-9e3b772b8-20220608";function QM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QM)}catch(e){console.error(e)}}QM(),YI.exports=Vs;var mp=YI.exports;const Ky=O1(mp);var Lk=mp;z4.createRoot=Lk.createRoot,z4.hydrateRoot=Lk.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function b0(){return b0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b0.apply(this,arguments)}var Rd;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rd||(Rd={}));const zk="popstate";function NU(e){e===void 0&&(e={});function t(i,c){let{pathname:d,search:f,hash:a}=i.location;return I5("",{pathname:d,search:f,hash:a},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(i,c){return typeof c=="string"?c:x2(c)}return BU(t,n,null,e)}function yo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function F7(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function FU(){return Math.random().toString(36).substr(2,8)}function Nk(e,t){return{usr:e.state,key:e.key,idx:t}}function I5(e,t,n,i){return n===void 0&&(n=null),b0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?F1(t):t,{state:n,key:t&&t.key||i||FU()})}function x2(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function F1(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function BU(e,t,n,i){i===void 0&&(i={});let{window:c=document.defaultView,v5Compat:d=!1}=i,f=c.history,a=Rd.Pop,v=null,S=M();S==null&&(S=0,f.replaceState(b0({},f.state,{idx:S}),""));function M(){return(f.state||{idx:null}).idx}function R(){a=Rd.Pop;let le=M(),G=le==null?null:le-S;S=le,v&&v({action:a,location:H.location,delta:G})}function N(le,G){a=Rd.Push;let X=I5(H.location,le,G);n&&n(X,le),S=M()+1;let Q=Nk(X,S),oe=H.createHref(X);try{f.pushState(Q,"",oe)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;c.location.assign(oe)}d&&v&&v({action:a,location:H.location,delta:1})}function W(le,G){a=Rd.Replace;let X=I5(H.location,le,G);n&&n(X,le),S=M();let Q=Nk(X,S),oe=H.createHref(X);f.replaceState(Q,"",oe),d&&v&&v({action:a,location:H.location,delta:0})}function V(le){let G=c.location.origin!=="null"?c.location.origin:c.location.href,X=typeof le=="string"?le:x2(le);return yo(G,"No window.location.(origin|href) available to create URL for href: "+X),new URL(X,G)}let H={get action(){return a},get location(){return e(c,f)},listen(le){if(v)throw new Error("A history only accepts one active listener");return c.addEventListener(zk,R),v=le,()=>{c.removeEventListener(zk,R),v=null}},createHref(le){return t(c,le)},createURL:V,encodeLocation(le){let G=V(le);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:N,replace:W,go(le){return f.go(le)}};return H}var Fk;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Fk||(Fk={}));function jU(e,t,n){n===void 0&&(n="/");let i=typeof t=="string"?F1(t):t,c=B7(i.pathname||"/",n);if(c==null)return null;let d=eD(e);$U(d);let f=null;for(let a=0;f==null&&a<d.length;++a)f=KU(d[a],QU(c));return f}function eD(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let c=(d,f,a)=>{let v={relativePath:a===void 0?d.path||"":a,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};v.relativePath.startsWith("/")&&(yo(v.relativePath.startsWith(i),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(i.length));let S=Hd([i,v.relativePath]),M=n.concat(v);d.children&&d.children.length>0&&(yo(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),eD(d.children,t,M,S)),!(d.path==null&&!d.index)&&t.push({path:S,score:ZU(S,d.index),routesMeta:M})};return e.forEach((d,f)=>{var a;if(d.path===""||!((a=d.path)!=null&&a.includes("?")))c(d,f);else for(let v of tD(d.path))c(d,f,v)}),t}function tD(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,c=n.endsWith("?"),d=n.replace(/\?$/,"");if(i.length===0)return c?[d,""]:[d];let f=tD(i.join("/")),a=[];return a.push(...f.map(v=>v===""?d:[d,v].join("/"))),c&&a.push(...f),a.map(v=>e.startsWith("/")&&v===""?"/":v)}function $U(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:XU(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const UU=/^:\w+$/,VU=3,WU=2,HU=1,qU=10,GU=-2,Bk=e=>e==="*";function ZU(e,t){let n=e.split("/"),i=n.length;return n.some(Bk)&&(i+=GU),t&&(i+=WU),n.filter(c=>!Bk(c)).reduce((c,d)=>c+(UU.test(d)?VU:d===""?HU:qU),i)}function XU(e,t){return e.length===t.length&&e.slice(0,-1).every((i,c)=>i===t[c])?e[e.length-1]-t[t.length-1]:0}function KU(e,t){let{routesMeta:n}=e,i={},c="/",d=[];for(let f=0;f<n.length;++f){let a=n[f],v=f===n.length-1,S=c==="/"?t:t.slice(c.length)||"/",M=YU({path:a.relativePath,caseSensitive:a.caseSensitive,end:v},S);if(!M)return null;Object.assign(i,M.params);let R=a.route;d.push({params:i,pathname:Hd([c,M.pathname]),pathnameBase:rV(Hd([c,M.pathnameBase])),route:R}),M.pathnameBase!=="/"&&(c=Hd([c,M.pathnameBase]))}return d}function YU(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=JU(e.path,e.caseSensitive,e.end),c=t.match(n);if(!c)return null;let d=c[0],f=d.replace(/(.)\/+$/,"$1"),a=c.slice(1);return{params:i.reduce((S,M,R)=>{if(M==="*"){let N=a[R]||"";f=d.slice(0,d.length-N.length).replace(/(.)\/+$/,"$1")}return S[M]=eV(a[R]||"",M),S},{}),pathname:d,pathnameBase:f,pattern:e}}function JU(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),F7(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(f,a)=>(i.push(a),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),i]}function QU(e){try{return decodeURI(e)}catch(t){return F7(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function eV(e,t){try{return decodeURIComponent(e)}catch(n){return F7(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function B7(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function tV(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:c=""}=typeof e=="string"?F1(e):e;return{pathname:n?n.startsWith("/")?n:nV(n,t):t,search:iV(i),hash:oV(c)}}function nV(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function A3(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j7(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function $7(e,t,n,i){i===void 0&&(i=!1);let c;typeof e=="string"?c=F1(e):(c=b0({},e),yo(!c.pathname||!c.pathname.includes("?"),A3("?","pathname","search",c)),yo(!c.pathname||!c.pathname.includes("#"),A3("#","pathname","hash",c)),yo(!c.search||!c.search.includes("#"),A3("#","search","hash",c)));let d=e===""||c.pathname==="",f=d?"/":c.pathname,a;if(i||f==null)a=n;else{let R=t.length-1;if(f.startsWith("..")){let N=f.split("/");for(;N[0]==="..";)N.shift(),R-=1;c.pathname=N.join("/")}a=R>=0?t[R]:"/"}let v=tV(c,a),S=f&&f!=="/"&&f.endsWith("/"),M=(d||f===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(S||M)&&(v.pathname+="/"),v}const Hd=e=>e.join("/").replace(/\/\/+/g,"/"),rV=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iV=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,oV=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function aV(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nD=["post","put","patch","delete"];new Set(nD);const sV=["get",...nD];new Set(sV);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function b2(){return b2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b2.apply(this,arguments)}const U7=K.createContext(null),lV=K.createContext(null),B1=K.createContext(null),vx=K.createContext(null),sh=K.createContext({outlet:null,matches:[],isDataRoute:!1}),rD=K.createContext(null);function cV(e,t){let{relative:n}=t===void 0?{}:t;j1()||yo(!1);let{basename:i,navigator:c}=K.useContext(B1),{hash:d,pathname:f,search:a}=oD(e,{relative:n}),v=f;return i!=="/"&&(v=f==="/"?i:Hd([i,f])),c.createHref({pathname:v,search:a,hash:d})}function j1(){return K.useContext(vx)!=null}function o_(){return j1()||yo(!1),K.useContext(vx).location}function iD(e){K.useContext(B1).static||K.useLayoutEffect(e)}function Pp(){let{isDataRoute:e}=K.useContext(sh);return e?wV():uV()}function uV(){j1()||yo(!1);let e=K.useContext(U7),{basename:t,navigator:n}=K.useContext(B1),{matches:i}=K.useContext(sh),{pathname:c}=o_(),d=JSON.stringify(j7(i).map(v=>v.pathnameBase)),f=K.useRef(!1);return iD(()=>{f.current=!0}),K.useCallback(function(v,S){if(S===void 0&&(S={}),!f.current)return;if(typeof v=="number"){n.go(v);return}let M=$7(v,JSON.parse(d),c,S.relative==="path");e==null&&t!=="/"&&(M.pathname=M.pathname==="/"?t:Hd([t,M.pathname])),(S.replace?n.replace:n.push)(M,S.state,S)},[t,n,d,c,e])}function oD(e,t){let{relative:n}=t===void 0?{}:t,{matches:i}=K.useContext(sh),{pathname:c}=o_(),d=JSON.stringify(j7(i).map(f=>f.pathnameBase));return K.useMemo(()=>$7(e,JSON.parse(d),c,n==="path"),[e,d,c,n])}function dV(e,t){return hV(e,t)}function hV(e,t,n){j1()||yo(!1);let{navigator:i}=K.useContext(B1),{matches:c}=K.useContext(sh),d=c[c.length-1],f=d?d.params:{};d&&d.pathname;let a=d?d.pathnameBase:"/";d&&d.route;let v=o_(),S;if(t){var M;let H=typeof t=="string"?F1(t):t;a==="/"||(M=H.pathname)!=null&&M.startsWith(a)||yo(!1),S=H}else S=v;let R=S.pathname||"/",N=a==="/"?R:R.slice(a.length)||"/",W=jU(e,{pathname:N}),V=_V(W&&W.map(H=>Object.assign({},H,{params:Object.assign({},f,H.params),pathname:Hd([a,i.encodeLocation?i.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?a:Hd([a,i.encodeLocation?i.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),c,n);return t&&V?K.createElement(vx.Provider,{value:{location:b2({pathname:"/",search:"",hash:"",state:null,key:"default"},S),navigationType:Rd.Pop}},V):V}function pV(){let e=bV(),t=aV(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},d=null;return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},t),n?K.createElement("pre",{style:c},n):null,d)}const fV=K.createElement(pV,null);class mV extends K.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?K.createElement(sh.Provider,{value:this.props.routeContext},K.createElement(rD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gV(e){let{routeContext:t,match:n,children:i}=e,c=K.useContext(U7);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),K.createElement(sh.Provider,{value:t},i)}function _V(e,t,n){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var c;if((c=n)!=null&&c.errors)e=n.matches;else return null}let d=e,f=(i=n)==null?void 0:i.errors;if(f!=null){let a=d.findIndex(v=>v.route.id&&(f==null?void 0:f[v.route.id]));a>=0||yo(!1),d=d.slice(0,Math.min(d.length,a+1))}return d.reduceRight((a,v,S)=>{let M=v.route.id?f==null?void 0:f[v.route.id]:null,R=null;n&&(R=v.route.errorElement||fV);let N=t.concat(d.slice(0,S+1)),W=()=>{let V;return M?V=R:v.route.Component?V=K.createElement(v.route.Component,null):v.route.element?V=v.route.element:V=a,K.createElement(gV,{match:v,routeContext:{outlet:a,matches:N,isDataRoute:n!=null},children:V})};return n&&(v.route.ErrorBoundary||v.route.errorElement||S===0)?K.createElement(mV,{location:n.location,revalidation:n.revalidation,component:R,error:M,children:W(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):W()},null)}var A5;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(A5||(A5={}));var w0;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(w0||(w0={}));function yV(e){let t=K.useContext(U7);return t||yo(!1),t}function vV(e){let t=K.useContext(lV);return t||yo(!1),t}function xV(e){let t=K.useContext(sh);return t||yo(!1),t}function aD(e){let t=xV(),n=t.matches[t.matches.length-1];return n.route.id||yo(!1),n.route.id}function bV(){var e;let t=K.useContext(rD),n=vV(w0.UseRouteError),i=aD(w0.UseRouteError);return t||((e=n.errors)==null?void 0:e[i])}function wV(){let{router:e}=yV(A5.UseNavigateStable),t=aD(w0.UseNavigateStable),n=K.useRef(!1);return iD(()=>{n.current=!0}),K.useCallback(function(c,d){d===void 0&&(d={}),n.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,b2({fromRouteId:t},d)))},[e,t])}function EV(e){let{to:t,replace:n,state:i,relative:c}=e;j1()||yo(!1);let{matches:d}=K.useContext(sh),{pathname:f}=o_(),a=Pp(),v=$7(t,j7(d).map(M=>M.pathnameBase),f,c==="path"),S=JSON.stringify(v);return K.useEffect(()=>a(JSON.parse(S),{replace:n,state:i,relative:c}),[a,S,c,n,i]),null}function ol(e){yo(!1)}function TV(e){let{basename:t="/",children:n=null,location:i,navigationType:c=Rd.Pop,navigator:d,static:f=!1}=e;j1()&&yo(!1);let a=t.replace(/^\/*/,"/"),v=K.useMemo(()=>({basename:a,navigator:d,static:f}),[a,d,f]);typeof i=="string"&&(i=F1(i));let{pathname:S="/",search:M="",hash:R="",state:N=null,key:W="default"}=i,V=K.useMemo(()=>{let H=B7(S,a);return H==null?null:{location:{pathname:H,search:M,hash:R,state:N,key:W},navigationType:c}},[a,S,M,R,N,W,c]);return V==null?null:K.createElement(B1.Provider,{value:v},K.createElement(vx.Provider,{children:n,value:V}))}function SV(e){let{children:t,location:n}=e;return dV(M5(t),n)}var jk;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(jk||(jk={}));new Promise(()=>{});function M5(e,t){t===void 0&&(t=[]);let n=[];return K.Children.forEach(e,(i,c)=>{if(!K.isValidElement(i))return;let d=[...t,c];if(i.type===K.Fragment){n.push.apply(n,M5(i.props.children,d));return}i.type!==ol&&yo(!1),!i.props.index||!i.props.children||yo(!1);let f={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=M5(i.props.children,d)),n.push(f)}),n}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D5(){return D5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},D5.apply(this,arguments)}function kV(e,t){if(e==null)return{};var n={},i=Object.keys(e),c,d;for(d=0;d<i.length;d++)c=i[d],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function CV(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PV(e,t){return e.button===0&&(!t||t==="_self")&&!CV(e)}const IV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],AV="startTransition",$k=Xv[AV];function MV(e){let{basename:t,children:n,future:i,window:c}=e,d=K.useRef();d.current==null&&(d.current=NU({window:c,v5Compat:!0}));let f=d.current,[a,v]=K.useState({action:f.action,location:f.location}),{v7_startTransition:S}=i||{},M=K.useCallback(R=>{S&&$k?$k(()=>v(R)):v(R)},[v,S]);return K.useLayoutEffect(()=>f.listen(M),[f,M]),K.createElement(TV,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:f})}const DV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sD=K.forwardRef(function(t,n){let{onClick:i,relative:c,reloadDocument:d,replace:f,state:a,target:v,to:S,preventScrollReset:M}=t,R=kV(t,IV),{basename:N}=K.useContext(B1),W,V=!1;if(typeof S=="string"&&RV.test(S)&&(W=S,DV))try{let X=new URL(window.location.href),Q=S.startsWith("//")?new URL(X.protocol+S):new URL(S),oe=B7(Q.pathname,N);Q.origin===X.origin&&oe!=null?S=oe+Q.search+Q.hash:V=!0}catch{}let H=cV(S,{relative:c}),le=OV(S,{replace:f,state:a,target:v,preventScrollReset:M,relative:c});function G(X){i&&i(X),X.defaultPrevented||le(X)}return K.createElement("a",D5({},R,{href:W||H,onClick:V||d?i:G,ref:n,target:v}))});var Uk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Uk||(Uk={}));var Vk;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Vk||(Vk={}));function OV(e,t){let{target:n,replace:i,state:c,preventScrollReset:d,relative:f}=t===void 0?{}:t,a=Pp(),v=o_(),S=oD(e,{relative:f});return K.useCallback(M=>{if(PV(M,n)){M.preventDefault();let R=i!==void 0?i:x2(v)===x2(S);a(e,{replace:R,state:c,preventScrollReset:d,relative:f})}},[v,a,S,i,c,n,e,d,f])}var lD={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(xn,function(){var n,i,c;function d(a,v){if(!n)n=v;else if(!i)i=v;else{var S="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",M={};n(M),c=v(M),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}d(["exports"],function(a){var v=typeof self<"u"?self:{},S="2.15.0";let M;const R={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(M==null){const o=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{M={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):o}catch{M=o}}return M},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!R.API_URL)return null;try{const o=new URL(R.API_URL);return o.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":o.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},N={supported:!1,testSupport:function(o){!H&&V&&(le?G(o):W=o)}};let W,V,H=!1,le=!1;function G(o){const r=o.createTexture();o.bindTexture(o.TEXTURE_2D,r);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,V),o.isContextLost())return;N.supported=!0}catch{}o.deleteTexture(r),H=!0}v.document&&(V=v.document.createElement("img"),V.onload=function(){W&&G(W),W=null,le=!0},V.onerror=function(){H=!0,W=null},V.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const X="01";function Q(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var oe=he;function he(o,r,s,u){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=u}he.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,u=0;u<8;u++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<r)return s;var g=this.sampleCurveDerivativeX(s);if(Math.abs(g)<1e-6)break;s-=p/g}var y=0,b=1;for(s=o,u=0;u<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<r));u++)o>p?y=s:b=s,s=.5*(b-y)+y;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var be=Q(oe),A=Re;function Re(o,r){this.x=o,this.y=r}Re.prototype={clone:function(){return new Re(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,s=o.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),s=Math.sin(o),u=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=u,this},_rotateAround:function(o,r){var s=Math.cos(o),u=Math.sin(o),p=r.y+u*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-u*(this.y-r.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Re.convert=function(o){return o instanceof Re?o:Array.isArray(o)?new Re(o[0],o[1]):o};var _e=Q(A);const ze=Math.PI/180,ot=180/Math.PI;function gt(o){return o*ze}function Ze(o){return o*ot}const We=[[0,0],[1,0],[1,1],[0,1]];function He(o){if(o<=0)return 0;if(o>=1)return 1;const r=o*o,s=r*o;return 4*(o<.5?s:3*(o-r)+s-.75)}function rt(o,r,s,u){const p=new be(o,r,s,u);return function(g){return p.solve(g)}}const tt=rt(.25,.1,.25,1);function Ne(o,r,s){return Math.min(s,Math.max(r,o))}function et(o,r,s){return(s=Ne((s-o)/(r-o),0,1))*s*(3-2*s)}function it(o,r,s){const u=s-r,p=((o-r)%u+u)%u+r;return p===r?s:p}function Dt(o,r,s){if(!o.length)return s(null,[]);let u=o.length;const p=new Array(o.length);let g=null;o.forEach((y,b)=>{r(y,(T,k)=>{T&&(g=T),p[b]=k,--u==0&&s(g,p)})})}function Tt(o){const r=[];for(const s in o)r.push(o[s]);return r}function Rt(o,...r){for(const s of r)for(const u in s)o[u]=s[u];return o}let Yt=1;function tn(){return Yt++}function dn(){return function o(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function _n(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function In(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function Jt(o,r){o.forEach(s=>{r[s]&&(r[s]=r[s].bind(r))})}function vn(o,r){return o.indexOf(r,o.length-r.length)!==-1}function Ft(o,r,s){const u={};for(const p in o)u[p]=r.call(s||this,o[p],p,o);return u}function nn(o,r,s){const u={};for(const p in o)r.call(s||this,o[p],p,o)&&(u[p]=o[p]);return u}function En(o){return Array.isArray(o)?o.map(En):typeof o=="object"&&o?Ft(o,En):o}const Zt={};function Ct(o){Zt[o]||(typeof console<"u"&&console.warn(o),Zt[o]=!0)}function On(o,r,s){return(s.y-o.y)*(r.x-o.x)>(r.y-o.y)*(s.x-o.x)}function an(o){let r=0;for(let s,u,p=0,g=o.length,y=g-1;p<g;y=p++)s=o[p],u=o[y],r+=(u.x-s.x)*(s.y+u.y);return r}function Zn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function tr(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,u,p,g)=>{const y=p||g;return r[u]=!y||y.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r}let Nn=null;function Yn(o){if(Nn==null){const r=o.navigator?o.navigator.userAgent:null;Nn=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Nn}function Un(o){try{const r=v[o];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}function qn(o,r){return[o[4*r],o[4*r+1],o[4*r+2],o[4*r+3]]}const bn="mapbox-tiles";let Ye=500,Xt=50,rn,qt;function en(){try{return v.caches}catch{}}function on(){en()&&!rn&&(rn=v.caches.open(bn))}function yn(o){const r=o.indexOf("?");if(r<0)return o;const s=function(p){const g=p.indexOf("?");return g>0?p.slice(g+1).split("&"):[]}(o),u=s.filter(p=>{const g=p.split("=");return g[0]==="language"||g[0]==="worldview"});return u.length?`${o.slice(0,r)}?${u.join("&")}`:o.slice(0,r)}let Dn=1/0;const Fn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Fn);class nr extends Error{constructor(r,s,u){s===401&&qe(u)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=s,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ar=Zn()?()=>self.worker&&self.worker.referrer:()=>(v.location.protocol==="blob:"?v.parent:v).location.href,gr=function(o,r){if(!(/^file:/.test(s=o.url)||/^file:/.test(Ar())&&!/^\w+:/.test(s))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(u,p){const g=new v.AbortController,y=new v.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Ar(),referrerPolicy:u.referrerPolicy,signal:g.signal});let b=!1,T=!1;const k=(D=y.url).indexOf("sku=")>0&&qe(D);var D;u.type==="json"&&y.headers.set("Accept","application/json");const L=(U,q,ee)=>{if(T)return;if(U&&U.message!=="SecurityError"&&Ct(U.toString()),q&&ee)return F(q);const ce=Date.now();v.fetch(y).then(ye=>{if(ye.ok){const Ae=k?ye.clone():null;return F(ye,Ae,ce)}return p(new nr(ye.statusText,ye.status,u.url))}).catch(ye=>{ye.name!=="AbortError"&&p(new Error(`${ye.message} ${u.url}`))})},F=(U,q,ee)=>{(u.type==="arrayBuffer"?U.arrayBuffer():u.type==="json"?U.json():U.text()).then(ce=>{T||(q&&ee&&function(ye,Ae,ve){if(on(),!rn)return;const Ie={status:Ae.status,statusText:Ae.statusText,headers:new v.Headers};Ae.headers.forEach((ht,st)=>Ie.headers.set(st,ht));const Le=tr(Ae.headers.get("Cache-Control")||"");if(Le["no-store"])return;Le["max-age"]&&Ie.headers.set("Expires",new Date(ve+1e3*Le["max-age"]).toUTCString());const Oe=Ie.headers.get("Expires");Oe&&(new Date(Oe).getTime()-ve<42e4||function(ht,st){if(qt===void 0)try{new Response(new ReadableStream),qt=!0}catch{qt=!1}qt?st(ht.body):ht.blob().then(st)}(Ae,ht=>{const st=new v.Response(ht,Ie);on(),rn&&rn.then(bt=>bt.put(yn(ye.url),st)).catch(bt=>Ct(bt.message))}))}(y,q,ee),b=!0,p(null,ce,U.headers.get("Cache-Control"),U.headers.get("Expires")))}).catch(ce=>{T||p(new Error(ce.message))})};return k?function(U,q){if(on(),!rn)return q(null);const ee=yn(U.url);rn.then(ce=>{ce.match(ee).then(ye=>{const Ae=function(ve){if(!ve)return!1;const Ie=new Date(ve.headers.get("Expires")||0),Le=tr(ve.headers.get("Cache-Control")||"");return Ie>Date.now()&&!Le["no-cache"]}(ye);ce.delete(ee),Ae&&ce.put(ee,ye.clone()),q(null,ye,Ae)}).catch(q)}).catch(q)}(y,L):L(null,null),{cancel:()=>{T=!0,b||g.abort()}}}(o,r);if(Zn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var s;return function(u,p){const g=new v.XMLHttpRequest;g.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const y in u.headers)g.setRequestHeader(y,u.headers[y]);return u.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=u.credentials==="include",g.onerror=()=>{p(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let y=g.response;if(u.type==="json")try{y=JSON.parse(g.response)}catch(b){return p(b)}p(null,y,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else p(new nr(g.statusText,g.status,u.url))},g.send(u.body),{cancel:()=>g.abort()}}(o,r)},vi=function(o,r){return gr(Rt(o,{type:"arrayBuffer"}),r)};function di(o){const r=v.document.createElement("a");return r.href=o,r.protocol===v.document.location.protocol&&r.host===v.document.location.host}const Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let re,ie;re=[],ie=0;const me=function(o,r){if(N.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),ie>=R.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:o,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return re.push(g),g}ie++;let s=!1;const u=()=>{if(!s)for(s=!0,ie--;re.length&&ie<R.MAX_PARALLEL_IMAGE_REQUESTS;){const g=re.shift(),{requestParameters:y,callback:b,cancelled:T}=g;T||(g.cancel=me(y,b).cancel)}},p=vi(o,(g,y,b,T)=>{u(),g?r(g):y&&(v.createImageBitmap?function(k,D){const L=new v.Blob([new Uint8Array(k)],{type:"image/png"});v.createImageBitmap(L).then(F=>{D(null,F)}).catch(F=>{D(new Error(`Could not load image because of ${F.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(k,D)=>r(k,D,b,T)):function(k,D){const L=new v.Image,F=v.URL;L.onload=()=>{D(null,L),F.revokeObjectURL(L.src),L.onload=null,v.requestAnimationFrame(()=>{L.src=Te})},L.onerror=()=>D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const U=new v.Blob([new Uint8Array(k)],{type:"image/png"});L.src=k.byteLength?F.createObjectURL(U):Te}(y,(k,D)=>r(k,D,b,T)))});return{cancel:()=>{p.cancel(),u()}}},Me="NO_ACCESS_TOKEN";function De(o){return o.indexOf("mapbox:")===0}function qe(o){return R.API_URL_REGEX.test(o)}function Xe(o){return R.API_CDN_URL_REGEX.test(o)}function je(o){return R.API_STYLE_REGEX.test(o)&&!Fe(o)}function Fe(o){return R.API_SPRITE_REGEX.test(o)}const ct=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Pt(o){const r=o.match(ct);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function Et(o){const r=o.params.length?`?${o.params.join("&")}`:"";return`${o.protocol}://${o.authority}${o.path}${r}`}const mn="mapbox.eventData";function Rn(o){if(!o)return null;const r=o.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(r[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class An{constructor(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(r){const s=Rn(R.ACCESS_TOKEN);let u="";return u=s&&s.u?v.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(p,g)=>String.fromCharCode(+("0x"+g)))):R.ACCESS_TOKEN||"",r?`${mn}.${r}:${u}`:`${mn}:${u}`}fetchEventData(){const r=Un("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{const p=v.localStorage.getItem(s);p&&(this.eventData=JSON.parse(p));const g=v.localStorage.getItem(u);g&&(this.anonId=g)}catch{Ct("Unable to read from LocalStorage")}}saveEventData(){const r=Un("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{v.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{Ct("Unable to write to LocalStorage")}}processRequests(r){}postEvent(r,s,u,p){if(!R.EVENTS_URL)return;const g=Pt(R.EVENTS_URL);g.params.push(`access_token=${p||R.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(r).toISOString()},b=s?Rt(y,s):y,T={url:Et(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=function(k,D){return gr(Rt(k,{method:"POST"}),D)}(T,k=>{this.pendingRequest=null,u(k),this.saveEventData(),this.processRequests(p)})}queueRequest(r,s){this.queue.push(r),this.processRequests(s)}}const Ln=new class extends An{constructor(o){super("appUserTurnstile"),this._customAccessToken=o}postTurnstileEvent(o,r){R.EVENTS_URL&&R.ACCESS_TOKEN&&Array.isArray(o)&&o.some(s=>De(s)||qe(s))&&this.queueRequest(Date.now(),r)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const r=Rn(R.ACCESS_TOKEN),s=r?r.u:R.ACCESS_TOKEN;let u=s!==this.eventData.tokenU;In(this.anonId)||(this.anonId=dn(),u=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),y=new Date(p),b=(p-this.eventData.lastSuccess)/864e5;u=u||b>=1||b<-1||g.getDate()!==y.getDate()}else u=!0;u?this.postEvent(p,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:X,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=p,this.eventData.tokenU=s)},o):this.processRequests()}},Xn=Ln.postTurnstileEvent.bind(Ln),xr=new class extends An{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(o,r,s,u){this.skuToken=r,this.errorCb=u,R.EVENTS_URL&&(s||R.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},s):this.errorCb(new Error(Me)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:s}=this.queue.shift();r&&this.success[r]||(this.anonId||this.fetchEventData(),In(this.anonId)||(this.anonId=dn()),this.postEvent(s,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:X,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):r&&(this.success[r]=!0)},o))}},br=xr.postMapLoadEvent.bind(xr),Mr=new class extends An{constructor(){super("gljs.performance")}postPerformanceEvent(o,r){R.EVENTS_URL&&(o||R.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:r},o)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:r,performanceData:s}=this.queue.shift(),u=function(p){const g=v.performance.getEntriesByType("resource"),y=v.performance.getEntriesByType("mark"),b=function(F){const U={};if(F){for(const q in F)if(q!=="other")for(const ee of F[q]){const ce=`${q}ResolveRangeMin`,ye=`${q}ResolveRangeMax`,Ae=`${q}RequestCount`,ve=`${q}RequestCachedCount`;U[ce]=Math.min(U[ce]||1/0,ee.startTime),U[ye]=Math.max(U[ye]||-1/0,ee.responseEnd);const Ie=Le=>{U[Le]===void 0&&(U[Le]=0),++U[Le]};ee.transferSize!==void 0&&ee.transferSize===0&&Ie(ve),Ie(Ae)}}return U}(function(F,U){const q={};if(F)for(const ee of F){const ce=U(ee);q[ce]===void 0&&(q[ce]=[]),q[ce].push(ee)}return q}(g,Pr)),T=v.devicePixelRatio,k=v.navigator.connection||v.navigator.mozConnection||v.navigator.webkitConnection,D={counters:[],metadata:[],attributes:[]},L=(F,U,q)=>{q!=null&&F.push({name:U,value:q.toString()})};for(const F in b)L(D.counters,F,b[F]);if(p.interactionRange[0]!==1/0&&p.interactionRange[1]!==-1/0&&(L(D.counters,"interactionRangeMin",p.interactionRange[0]),L(D.counters,"interactionRangeMax",p.interactionRange[1])),y)for(const F of Object.keys(ln)){const U=ln[F],q=y.find(ee=>ee.name===U);q&&L(D.counters,U,q.startTime)}return L(D.counters,"visibilityHidden",p.visibilityHidden),L(D.attributes,"style",function(F){if(F)for(const U of F){const q=U.name.split("?")[0];if(je(q)){const ee=q.split("/").slice(-2);if(ee.length===2)return`mapbox://styles/${ee[0]}/${ee[1]}`}}}(g)),L(D.attributes,"terrainEnabled",p.terrainEnabled?"true":"false"),L(D.attributes,"fogEnabled",p.fogEnabled?"true":"false"),L(D.attributes,"projection",p.projection),L(D.attributes,"zoom",p.zoom),L(D.metadata,"devicePixelRatio",T),L(D.metadata,"connectionEffectiveType",k?k.effectiveType:void 0),L(D.metadata,"navigatorUserAgent",v.navigator.userAgent),L(D.metadata,"screenWidth",v.screen.width),L(D.metadata,"screenHeight",v.screen.height),L(D.metadata,"windowWidth",v.innerWidth),L(D.metadata,"windowHeight",v.innerHeight),L(D.metadata,"mapWidth",p.width/T),L(D.metadata,"mapHeight",p.height/T),L(D.metadata,"webglRenderer",p.renderer),L(D.metadata,"webglVendor",p.vendor),L(D.metadata,"sdkVersion",S),L(D.metadata,"sdkIdentifier","mapbox-gl-js"),D}(s);for(const p of u.metadata);for(const p of u.counters);for(const p of u.attributes);this.postEvent(r,u,()=>{},o)}},Ge=Mr.postPerformanceEvent.bind(Mr),Ee=new class extends An{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(o,r,s,u){if(!R.API_URL||!R.SESSION_PATH)return;const p=Pt(R.API_URL+R.SESSION_PATH);p.params.push(`sku=${r||""}`),p.params.push(`access_token=${u||R.ACCESS_TOKEN||""}`);const g={url:Et(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(y,b){return gr(Rt(y,{method:"GET"}),b)}(g,y=>{this.pendingRequest=null,s(y),this.saveEventData(),this.processRequests(u)})}getSessionAPI(o,r,s,u){this.skuToken=r,this.errorCb=u,R.SESSION_PATH&&R.API_URL&&(s||R.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},s):this.errorCb(new Error(Me)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:s}=this.queue.shift();r&&this.success[r]||this.getSession(s,this.skuToken,u=>{u?this.errorCb(u):r&&(this.success[r]=!0)},o)}},lt=Ee.getSessionAPI.bind(Ee),Ot=new Set,ln={create:"create",load:"load",fullLoad:"fullLoad"},hr={mark(o){v.performance.mark(o)},measure(o,r,s){v.performance.measure(o,r,s)}};function Pr(o){const r=o.name.split("?")[0];return Xe(r)&&r.includes("mapbox-gl.js")?"javascript":Xe(r)&&r.includes("mapbox-gl.css")?"css":function(s){return R.API_FONTS_REGEX.test(s)}(r)?"fontRange":Fe(r)?"sprite":je(r)?"style":function(s){return R.API_TILEJSON_REGEX.test(s)}(r)?"tilejson":"other"}const Vn=v.performance;function Io(o){const r=o?o.url.toString():void 0;return Vn.getEntriesByName(r)}let po,fo,ea,Bi;const ji={now:()=>ea!==void 0?ea:v.performance.now(),setNow(o){ea=o},restoreNow(){ea=void 0},frame(o){const r=v.requestAnimationFrame(o);return{cancel:()=>v.cancelAnimationFrame(r)}},getImageData(o,r=0){const{width:s,height:u}=o;Bi||(Bi=v.document.createElement("canvas"));const p=Bi.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(s>Bi.width||u>Bi.height)&&(Bi.width=s,Bi.height=u),p.clearRect(-r,-r,s+2*r,u+2*r),p.drawImage(o,0,0,s,u),p.getImageData(-r,-r,s+2*r,u+2*r)},resolveURL:o=>(po||(po=v.document.createElement("a")),po.href=o,po.href),get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(fo==null&&(fo=v.matchMedia("(prefers-reduced-motion: reduce)")),fo.matches)}};function mo(o,r,s){s[o]&&s[o].indexOf(r)!==-1||(s[o]=s[o]||[],s[o].push(r))}function $i(o,r,s){if(s&&s[o]){const u=s[o].indexOf(r);u!==-1&&s[o].splice(u,1)}}class za{constructor(r,s={}){Rt(this,s),this.type=r}}class Na extends za{constructor(r,s={}){super("error",Rt({error:r},s))}}class Cl{on(r,s){return this._listeners=this._listeners||{},mo(r,s,this._listeners),this}off(r,s){return $i(r,s,this._listeners),$i(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},mo(r,s,this._oneTimeListeners),this):new Promise(u=>this.once(r,u))}fire(r,s){typeof r=="string"&&(r=new za(r,s||{}));const u=r.type;if(this.listens(u)){r.target=this;const p=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const b of p)b.call(this,r);const g=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const b of g)$i(u,b,this._oneTimeListeners),b.call(this,r);const y=this._eventedParent;y&&(Rt(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(r))}else r instanceof Na&&console.error(r.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var yt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function da(o,...r){for(const s of r)for(const u in s)o[u]=s[u];return o}function Qr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Hi(o){if(Array.isArray(o))return o.map(Hi);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const s in o)r[s]=Hi(o[s]);return r}return Qr(o)}class Ao extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}var Mo=Ao;class lc{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[u,p]of s)this.bindings[u]=p}concat(r){return new lc(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}var Op=lc;const cc={kind:"null"},cn={kind:"number"},_r={kind:"string"},cr={kind:"boolean"},jo={kind:"color"},Fa={kind:"object"},fr={kind:"value"},xi={kind:"collator"},uc={kind:"formatted"},Ba={kind:"resolvedImage"};function ha(o,r){return{kind:"array",itemType:o,N:r}}function li(o){if(o.kind==="array"){const r=li(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const qs=[cc,cn,_r,cr,jo,uc,Fa,ha(fr),Ba];function Do(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Do(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const s of qs)if(!Do(s,r))return null}}return`Expected ${li(o)} but found ${li(r)} instead.`}function Pl(o,r){return r.some(s=>s.kind===o.kind)}function nu(o,r){return r.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}var Il,ph={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Al(o){return(o=Math.round(o))<0?0:o>255?255:o}function dc(o){return Al(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function ru(o){return(r=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:r>1?1:r;var r}function hc(o,r,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?o+(r-o)*s*6:2*s<1?r:3*s<2?o+(r-o)*(2/3-s)*6:o}try{Il={}.parseCSSColor=function(o){var r,s=o.replace(/ /g,"").toLowerCase();if(s in ph)return ph[s].slice();if(s[0]==="#")return s.length===4?(r=parseInt(s.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:s.length===7&&(r=parseInt(s.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var u=s.indexOf("("),p=s.indexOf(")");if(u!==-1&&p+1===s.length){var g=s.substr(0,u),y=s.substr(u+1,p-(u+1)).split(","),b=1;switch(g){case"rgba":if(y.length!==4)return null;b=ru(y.pop());case"rgb":return y.length!==3?null:[dc(y[0]),dc(y[1]),dc(y[2]),b];case"hsla":if(y.length!==4)return null;b=ru(y.pop());case"hsl":if(y.length!==3)return null;var T=(parseFloat(y[0])%360+360)%360/360,k=ru(y[1]),D=ru(y[2]),L=D<=.5?D*(k+1):D+k-D*k,F=2*D-L;return[Al(255*hc(F,L,T+1/3)),Al(255*hc(F,L,T)),Al(255*hc(F,L,T-1/3)),b];default:return null}}return null}}catch{}class Ro{constructor(r,s,u,p=1){this.r=r,this.g=s,this.b=u,this.a=p}static parse(r){if(!r)return;if(r instanceof Ro)return r;if(typeof r!="string")return;const s=Il(r);return s?new Ro(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[r,s,u,p]=this.toArray();return`rgba(${Math.round(r)},${Math.round(s)},${Math.round(u)},${p})`}toArray(){const{r,g:s,b:u,a:p}=this;return p===0?[0,0,0,0]:[255*r/p,255*s/p,255*u/p,p]}toArray01(){const{r,g:s,b:u,a:p}=this;return p===0?[0,0,0,0]:[r/p,s/p,u/p,p]}toArray01PremultipliedAlpha(){const{r,g:s,b:u,a:p}=this;return[r,s,u,p]}}Ro.black=new Ro(0,0,0,1),Ro.white=new Ro(1,1,1,1),Ro.transparent=new Ro(0,0,0,0),Ro.red=new Ro(1,0,0,1),Ro.blue=new Ro(0,0,1,1);var Ii=Ro;class fh{constructor(r,s,u){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class iu{constructor(r,s,u,p,g){this.text=r.normalize?r.normalize():r,this.image=s,this.scale=u,this.fontStack=p,this.textColor=g}}class $o{constructor(r){this.sections=r}static fromString(r){return new $o([new iu(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof $o?r:$o.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const s of this.sections){if(s.image){r.push(["image",s.image.name]);continue}r.push(s.text);const u={};s.fontStack&&(u["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(u["font-scale"]=s.scale),s.textColor&&(u["text-color"]=["rgba"].concat(s.textColor.toArray())),r.push(u)}return r}}class pa{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new pa({name:r,available:!1}):null}serialize(){return["image",this.name]}}function Lp(o,r,s,u){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[o,r,s,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[o,r,s,u]:[o,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ou(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Ii||o instanceof fh||o instanceof $o||o instanceof pa)return!0;if(Array.isArray(o)){for(const r of o)if(!ou(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!ou(o[r]))return!1;return!0}return!1}function bi(o){if(o===null)return cc;if(typeof o=="string")return _r;if(typeof o=="boolean")return cr;if(typeof o=="number")return cn;if(o instanceof Ii)return jo;if(o instanceof fh)return xi;if(o instanceof $o)return uc;if(o instanceof pa)return Ba;if(Array.isArray(o)){const r=o.length;let s;for(const u of o){const p=bi(u);if(s){if(s===p)continue;s=fr;break}s=p}return ha(s||fr,r)}return Fa}function au(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof Ii||o instanceof $o||o instanceof pa?o.toString():JSON.stringify(o)}class mh{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!ou(r[1]))return s.error("invalid value");const u=r[1];let p=bi(u);const g=s.expectedType;return p.kind!=="array"||p.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(p=g),new mh(p,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ii?["rgba"].concat(this.value.toArray()):this.value instanceof $o?this.value.serialize():this.value}}var Gs=mh,qi=class{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}};const Ku={string:_r,number:cn,boolean:cr,object:Fa};class su{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let u,p=1;const g=r[0];if(g==="array"){let b,T;if(r.length>2){const k=r[1];if(typeof k!="string"||!(k in Ku)||k==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=Ku[k],p++}else b=fr;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);T=r[2],p++}u=ha(b,T)}else u=Ku[g];const y=[];for(;p<r.length;p++){const b=s.parse(r[p],p,fr);if(!b)return null;y.push(b)}return new su(u,y)}evaluate(r){for(let s=0;s<this.args.length;s++){const u=this.args[s].evaluate(r);if(!Do(this.type,bi(u)))return u;if(s===this.args.length-1)throw new qi(`Expected value to be of type ${li(this.type)}, but found ${li(bi(u))} instead.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,s=[r.kind];if(r.kind==="array"){const u=r.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){s.push(u.kind);const p=r.N;(typeof p=="number"||this.args.length>1)&&s.push(p)}}return s.concat(this.args.map(u=>u.serialize()))}}var Ka=su;class ys{constructor(r){this.type=uc,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const u=r[1];if(!Array.isArray(u)&&typeof u=="object")return s.error("First argument must be an image or text section.");const p=[];let g=!1;for(let y=1;y<=r.length-1;++y){const b=r[y];if(g&&typeof b=="object"&&!Array.isArray(b)){g=!1;let T=null;if(b["font-scale"]&&(T=s.parse(b["font-scale"],1,cn),!T))return null;let k=null;if(b["text-font"]&&(k=s.parse(b["text-font"],1,ha(_r)),!k))return null;let D=null;if(b["text-color"]&&(D=s.parse(b["text-color"],1,jo),!D))return null;const L=p[p.length-1];L.scale=T,L.font=k,L.textColor=D}else{const T=s.parse(r[y],1,fr);if(!T)return null;const k=T.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,p.push({content:T,scale:null,font:null,textColor:null})}}return new ys(p)}evaluate(r){return new $o(this.sections.map(s=>{const u=s.content.evaluate(r);return bi(u)===Ba?new iu("",u,null,null,null):new iu(au(u),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const s of this.sections){r.push(s.content.serialize());const u={};s.scale&&(u["font-scale"]=s.scale.serialize()),s.font&&(u["text-font"]=s.font.serialize()),s.textColor&&(u["text-color"]=s.textColor.serialize()),r.push(u)}return r}}class pc{constructor(r){this.type=Ba,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const u=s.parse(r[1],1,_r);return u?new pc(u):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),u=pa.fromString(s);return u&&r.availableImages&&(u.available=r.availableImages.indexOf(s)>-1),u}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const om={"to-boolean":cr,"to-color":jo,"to-number":cn,"to-string":_r};class gh{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const u=r[0];if((u==="to-boolean"||u==="to-string")&&r.length!==2)return s.error("Expected one argument.");const p=om[u],g=[];for(let y=1;y<r.length;y++){const b=s.parse(r[y],y,fr);if(!b)return null;g.push(b)}return new gh(p,g)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let s,u;for(const p of this.args){if(s=p.evaluate(r),u=null,s instanceof Ii)return s;if(typeof s=="string"){const g=r.parseColor(s);if(g)return g}else if(Array.isArray(s)&&(u=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Lp(s[0],s[1],s[2],s[3]),!u))return new Ii(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new qi(u||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const u of this.args){if(s=u.evaluate(r),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new qi(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?$o.fromString(au(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?pa.fromString(au(this.args[0].evaluate(r))):au(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ys([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new pc(this.args[0]).serialize();const r=[`to-${this.type.kind}`];return this.eachChild(s=>{r.push(s.serialize())}),r}}var fc=gh;const Uo=["Unknown","Point","LineString","Polygon"];var Yu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Uo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:s,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*r-o[0])+this.featureDistanceData.bearing[1]*(u*r-o[1])}return 0}parseColor(o){let r=this._parseColorCache[o];return r||(r=this._parseColorCache[o]=Ii.parse(o)),r}};class vs{constructor(r,s,u,p){this.name=r,this.type=s,this._evaluate=u,this.args=p}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,s){const u=r[0],p=vs.definitions[u];if(!p)return s.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(p)?p[0]:p.type,y=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,b=y.filter(([k])=>!Array.isArray(k)||k.length===r.length-1);let T=null;for(const[k,D]of b){T=new Ir(s.registry,s.path,null,s.scope);const L=[];let F=!1;for(let U=1;U<r.length;U++){const q=r[U],ee=Array.isArray(k)?k[U-1]:k.type,ce=T.parse(q,1+L.length,ee);if(!ce){F=!0;break}L.push(ce)}if(!F)if(Array.isArray(k)&&k.length!==L.length)T.error(`Expected ${k.length} arguments, but found ${L.length} instead.`);else{for(let U=0;U<L.length;U++){const q=Array.isArray(k)?k[U]:k.type,ee=L[U];T.concat(U+1).checkSubtype(q,ee.type)}if(T.errors.length===0)return new vs(u,g,D,L)}}if(b.length===1)s.errors.push(...T.errors);else{const k=(b.length?b:y).map(([L])=>{return F=L,Array.isArray(F)?`(${F.map(li).join(", ")})`:`(${li(F.type)}...)`;var F}).join(" | "),D=[];for(let L=1;L<r.length;L++){const F=s.parse(r[L],1+D.length);if(!F)return null;D.push(li(F.type))}s.error(`Expected arguments of type ${k}, but found (${D.join(", ")}) instead.`)}return null}static register(r,s){vs.definitions=s;for(const u in s)r[u]=vs}}var xs=vs;class lu{constructor(r,s,u){this.type=xi,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const u=r[1];if(typeof u!="object"||Array.isArray(u))return s.error("Collator options argument must be an object.");const p=s.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,cr);if(!p)return null;const g=s.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,cr);if(!g)return null;let y=null;return u.locale&&(y=s.parse(u.locale,1,_r),!y)?null:new lu(p,g,y)}evaluate(r){return new fh(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}const bs=8192;function E(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function P(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function z(o,r){const s=(180+o[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,r.z);return[Math.round(s*p*bs),Math.round(u*p*bs)]}function $(o,r,s){const u=o[0]-r[0],p=o[1]-r[1],g=o[0]-s[0],y=o[1]-s[1];return u*y-g*p==0&&u*g<=0&&p*y<=0}function te(o,r){let s=!1;for(let y=0,b=r.length;y<b;y++){const T=r[y];for(let k=0,D=T.length;k<D-1;k++){if($(o,T[k],T[k+1]))return!1;(p=T[k])[1]>(u=o)[1]!=(g=T[k+1])[1]>u[1]&&u[0]<(g[0]-p[0])*(u[1]-p[1])/(g[1]-p[1])+p[0]&&(s=!s)}}var u,p,g;return s}function ne(o,r){for(let s=0;s<r.length;s++)if(te(o,r[s]))return!0;return!1}function ae(o,r,s,u){const p=u[0]-s[0],g=u[1]-s[1],y=(o[0]-s[0])*g-p*(o[1]-s[1]),b=(r[0]-s[0])*g-p*(r[1]-s[1]);return y>0&&b<0||y<0&&b>0}function Be(o,r,s){for(const k of s)for(let D=0;D<k.length-1;++D)if((b=[(y=k[D+1])[0]-(g=k[D])[0],y[1]-g[1]])[0]*(T=[(p=r)[0]-(u=o)[0],p[1]-u[1]])[1]-b[1]*T[0]!=0&&ae(u,p,g,y)&&ae(g,y,u,p))return!0;var u,p,g,y,b,T;return!1}function ke(o,r){for(let s=0;s<o.length;++s)if(!te(o[s],r))return!1;for(let s=0;s<o.length-1;++s)if(Be(o[s],o[s+1],r))return!1;return!0}function nt(o,r){for(let s=0;s<r.length;s++)if(ke(o,r[s]))return!0;return!1}function wt(o,r,s){const u=[];for(let p=0;p<o.length;p++){const g=[];for(let y=0;y<o[p].length;y++){const b=z(o[p][y],s);E(r,b),g.push(b)}u.push(g)}return u}function Lt(o,r,s){const u=[];for(let p=0;p<o.length;p++){const g=wt(o[p],r,s);u.push(g)}return u}function _t(o,r,s,u){if(o[0]<s[0]||o[0]>s[2]){const p=.5*u;let g=o[0]-s[0]>p?-u:s[0]-o[0]>p?u:0;g===0&&(g=o[0]-s[2]>p?-u:s[2]-o[0]>p?u:0),o[0]+=g}E(r,o)}function Qt(o,r,s,u){const p=Math.pow(2,u.z)*bs,g=[u.x*bs,u.y*bs],y=[];if(!o)return y;for(const b of o)for(const T of b){const k=[T.x+g[0],T.y+g[1]];_t(k,r,s,p),y.push(k)}return y}function ir(o,r,s,u){const p=Math.pow(2,u.z)*bs,g=[u.x*bs,u.y*bs],y=[];if(!o)return y;for(const T of o){const k=[];for(const D of T){const L=[D.x+g[0],D.y+g[1]];E(r,L),k.push(L)}y.push(k)}if(r[2]-r[0]<=p/2){(b=r)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const T of y)for(const k of T)_t(k,r,s,p)}var b;return y}class Tr{constructor(r,s){this.type=cr,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(ou(r[1])){const u=r[1];if(u.type==="FeatureCollection")for(let p=0;p<u.features.length;++p){const g=u.features[p].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Tr(u,u.features[p].geometry)}else if(u.type==="Feature"){const p=u.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Tr(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Tr(u,u)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,u){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=s.canonicalID();if(!y)return!1;if(u.type==="Polygon"){const b=wt(u.coordinates,g,y),T=Qt(s.geometry(),p,g,y);if(!P(p,g))return!1;for(const k of T)if(!te(k,b))return!1}if(u.type==="MultiPolygon"){const b=Lt(u.coordinates,g,y),T=Qt(s.geometry(),p,g,y);if(!P(p,g))return!1;for(const k of T)if(!ne(k,b))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,u){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=s.canonicalID();if(!y)return!1;if(u.type==="Polygon"){const b=wt(u.coordinates,g,y),T=ir(s.geometry(),p,g,y);if(!P(p,g))return!1;for(const k of T)if(!ke(k,b))return!1}if(u.type==="MultiPolygon"){const b=Lt(u.coordinates,g,y),T=ir(s.geometry(),p,g,y);if(!P(p,g))return!1;for(const k of T)if(!nt(k,b))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var mr=Tr;function Ai(o){if(o instanceof xs&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof mr)return!1;let r=!0;return o.eachChild(s=>{r&&!Ai(s)&&(r=!1)}),r}function ei(o){if(o instanceof xs&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(s=>{r&&!ei(s)&&(r=!1)}),r}function xo(o,r){if(o instanceof xs&&r.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(u=>{s&&!xo(u,r)&&(s=!1)}),s}class ta{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const u=r[1];return s.scope.has(u)?new ta(u,s.scope.get(u)):s.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Sr=ta;class ja{constructor(r,s=[],u,p=new Op,g=[]){this.registry=r,this.path=s,this.key=s.map(y=>`[${y}]`).join(""),this.scope=p,this.errors=g,this.expectedType=u}parse(r,s,u,p,g={}){return s?this.concat(s,u,p)._parse(r,g):this._parse(r,g)}_parse(r,s){function u(p,g,y){return y==="assert"?new Ka(g,[p]):y==="coerce"?new fc(g,[p]):p}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=r[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[p];if(g){let y=g.parse(r,this);if(!y)return null;if(this.expectedType){const b=this.expectedType,T=y.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||T.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string"){if(this.checkSubtype(b,T))return null}else y=u(y,b,s.typeAnnotation||"coerce");else y=u(y,b,s.typeAnnotation||"assert")}if(!(y instanceof Gs)&&y.type.kind!=="resolvedImage"&&mi(y)){const b=new Yu;try{y=new Gs(y.type,y.evaluate(b))}catch(T){return this.error(T.message),null}}return y}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,u){const p=typeof r=="number"?this.path.concat(r):this.path,g=u?this.scope.concat(u):this.scope;return new ja(this.registry,p,s||null,g,this.errors)}error(r,...s){const u=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Mo(u,r))}checkSubtype(r,s){const u=Do(r,s);return u&&this.error(u),u}}var Ir=ja;function mi(o){if(o instanceof Sr)return mi(o.boundExpression);if(o instanceof xs&&o.name==="error"||o instanceof lu||o instanceof mr)return!1;const r=o instanceof fc||o instanceof Ka;let s=!0;return o.eachChild(u=>{s=r?s&&mi(u):s&&u instanceof Gs}),!!s&&Ai(o)&&xo(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Zs(o,r){const s=o.length-1;let u,p,g=0,y=s,b=0;for(;g<=y;)if(b=Math.floor((g+y)/2),u=o[b],p=o[b+1],u<=r){if(b===s||r<p)return b;g=b+1}else{if(!(u>r))throw new qi("Input is not a number.");y=b-1}return 0}class mc{constructor(r,s,u){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[p,g]of u)this.labels.push(p),this.outputs.push(g)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const u=s.parse(r[1],1,cn);if(!u)return null;const p=[];let g=null;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);for(let y=1;y<r.length;y+=2){const b=y===1?-1/0:r[y],T=r[y+1],k=y,D=y+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(p.length&&p[p.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const L=s.parse(T,D,g);if(!L)return null;g=g||L.type,p.push([b,L])}return new mc(g,u,p)}evaluate(r){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(r);const p=this.input.evaluate(r);if(p<=s[0])return u[0].evaluate(r);const g=s.length;return p>=s[g-1]?u[g-1].evaluate(r):u[Zs(s,p)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&r.push(this.labels[s]),r.push(this.outputs[s].serialize());return r}}var fa=mc;function wr(o,r,s){return o*(1-s)+r*s}var Vo=Object.freeze({__proto__:null,array:function(o,r,s){return o.map((u,p)=>wr(u,r[p],s))},color:function(o,r,s){return new Ii(wr(o.r,r.r,s),wr(o.g,r.g,s),wr(o.b,r.b,s),wr(o.a,r.a,s))},number:wr});const ws=.95047,Ya=1.08883,na=4/29,Es=6/29,$a=3*Es*Es,Ts=Es*Es*Es,am=Math.PI/180,sm=180/Math.PI;function _h(o){return o>Ts?Math.pow(o,1/3):o/$a+na}function jr(o){return o>Es?o*o*o:$a*(o-na)}function gc(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function Wo(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Ml(o){const r=Wo(o.r),s=Wo(o.g),u=Wo(o.b),p=_h((.4124564*r+.3575761*s+.1804375*u)/ws),g=_h((.2126729*r+.7151522*s+.072175*u)/1);return{l:116*g-16,a:500*(p-g),b:200*(g-_h((.0193339*r+.119192*s+.9503041*u)/Ya)),alpha:o.a}}function zp(o){let r=(o.l+16)/116,s=isNaN(o.a)?r:r+o.a/500,u=isNaN(o.b)?r:r-o.b/200;return r=1*jr(r),s=ws*jr(s),u=Ya*jr(u),new Ii(gc(3.2404542*s-1.5371385*r-.4985314*u),gc(-.969266*s+1.8760108*r+.041556*u),gc(.0556434*s-.2040259*r+1.0572252*u),o.alpha)}function lm(o,r,s){const u=r-o;return o+s*(u>180||u<-180?u-360*Math.round(u/360):u)}const _c={forward:Ml,reverse:zp,interpolate:function(o,r,s){return{l:wr(o.l,r.l,s),a:wr(o.a,r.a,s),b:wr(o.b,r.b,s),alpha:wr(o.alpha,r.alpha,s)}}},ma={forward:function(o){const{l:r,a:s,b:u}=Ml(o),p=Math.atan2(u,s)*sm;return{h:p<0?p+360:p,c:Math.sqrt(s*s+u*u),l:r,alpha:o.a}},reverse:function(o){const r=o.h*am,s=o.c;return zp({l:o.l,a:Math.cos(r)*s,b:Math.sin(r)*s,alpha:o.alpha})},interpolate:function(o,r,s){return{h:lm(o.h,r.h,s),c:wr(o.c,r.c,s),l:wr(o.l,r.l,s),alpha:wr(o.alpha,r.alpha,s)}}};var cu=Object.freeze({__proto__:null,hcl:ma,lab:_c});class ga{constructor(r,s,u,p,g){this.type=r,this.operator=s,this.interpolation=u,this.input=p,this.labels=[],this.outputs=[];for(const[y,b]of g)this.labels.push(y),this.outputs.push(b)}static interpolationFactor(r,s,u,p){let g=0;if(r.name==="exponential")g=Ju(s,r.base,u,p);else if(r.name==="linear")g=Ju(s,1,u,p);else if(r.name==="cubic-bezier"){const y=r.controlPoints;g=new be(y[0],y[1],y[2],y[3]).solve(Ju(s,1,u,p))}return g}static parse(r,s){let[u,p,g,...y]=r;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const k=p[1];if(typeof k!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:k}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const k=p.slice(1);if(k.length!==4||k.some(D=>typeof D!="number"||D<0||D>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:k}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(g=s.parse(g,2,cn),!g)return null;const b=[];let T=null;u==="interpolate-hcl"||u==="interpolate-lab"?T=jo:s.expectedType&&s.expectedType.kind!=="value"&&(T=s.expectedType);for(let k=0;k<y.length;k+=2){const D=y[k],L=y[k+1],F=k+3,U=k+4;if(typeof D!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(b.length&&b[b.length-1][0]>=D)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);const q=s.parse(L,U,T);if(!q)return null;T=T||q.type,b.push([D,q])}return T.kind==="number"||T.kind==="color"||T.kind==="array"&&T.itemType.kind==="number"&&typeof T.N=="number"?new ga(T,u,p,g,b):s.error(`Type ${li(T)} is not interpolatable.`)}evaluate(r){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(r);const p=this.input.evaluate(r);if(p<=s[0])return u[0].evaluate(r);const g=s.length;if(p>=s[g-1])return u[g-1].evaluate(r);const y=Zs(s,p),b=ga.interpolationFactor(this.interpolation,p,s[y],s[y+1]),T=u[y].evaluate(r),k=u[y+1].evaluate(r);return this.operator==="interpolate"?Vo[this.type.kind.toLowerCase()](T,k,b):this.operator==="interpolate-hcl"?ma.reverse(ma.interpolate(ma.forward(T),ma.forward(k),b)):_c.reverse(_c.interpolate(_c.forward(T),_c.forward(k),b))}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,r,this.input.serialize()];for(let u=0;u<this.labels.length;u++)s.push(this.labels[u],this.outputs[u].serialize());return s}}function Ju(o,r,s,u){const p=u-s,g=o-s;return p===0?0:r===1?g/p:(Math.pow(r,g)-1)/(Math.pow(r,p)-1)}var ra=ga;class Dl{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let u=null;const p=s.expectedType;p&&p.kind!=="value"&&(u=p);const g=[];for(const b of r.slice(1)){const T=s.parse(b,1+g.length,u,void 0,{typeAnnotation:"omit"});if(!T)return null;u=u||T.type,g.push(T)}const y=p&&g.some(b=>Do(p,b.type));return new Dl(y?fr:u,g)}evaluate(r){let s,u=null,p=0;for(const g of this.args){if(p++,u=g.evaluate(r),u&&u instanceof pa&&!u.available&&(s||(s=u),u=null,p===this.args.length))return s;if(u!==null)break}return u}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(s=>{r.push(s.serialize())}),r}}var yc=Dl;class vc{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const u=[];for(let g=1;g<r.length-1;g+=2){const y=r[g];if(typeof y!="string")return s.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return s.error("Variable names must contain only alphanumeric characters or '_'.",g);const b=s.parse(r[g+1],g+1);if(!b)return null;u.push([y,b])}const p=s.parse(r[r.length-1],r.length-1,s.expectedType,u);return p?new vc(u,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[s,u]of this.bindings)r.push(s,u.serialize());return r.push(this.result.serialize()),r}}var Np=vc;class xc{constructor(r,s,u){this.type=r,this.index=s,this.input=u}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,cn),p=s.parse(r[2],2,ha(s.expectedType||fr));return u&&p?new xc(p.type.itemType,u,p):null}evaluate(r){const s=this.index.evaluate(r),u=this.input.evaluate(r);if(s<0)throw new qi(`Array index out of bounds: ${s} < 0.`);if(s>=u.length)throw new qi(`Array index out of bounds: ${s} > ${u.length-1}.`);if(s!==Math.floor(s))throw new qi(`Array index must be an integer, but found ${s} instead.`);return u[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var yh=xc;class uu{constructor(r,s){this.type=cr,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,fr),p=s.parse(r[2],2,fr);return u&&p?Pl(u.type,[cr,_r,cn,cc,fr])?new uu(u,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${li(u.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(u==null)return!1;if(!nu(s,["boolean","string","number","null"]))throw new qi(`Expected first argument to be of type boolean, string, number or null, but found ${li(bi(s))} instead.`);if(!nu(u,["string","array"]))throw new qi(`Expected second argument to be of type array or string, but found ${li(bi(u))} instead.`);return u.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Qu=uu;class Rl{constructor(r,s,u){this.type=cn,this.needle=r,this.haystack=s,this.fromIndex=u}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,fr),p=s.parse(r[2],2,fr);if(!u||!p)return null;if(!Pl(u.type,[cr,_r,cn,cc,fr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${li(u.type)} instead`);if(r.length===4){const g=s.parse(r[3],3,cn);return g?new Rl(u,p,g):null}return new Rl(u,p)}evaluate(r){const s=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!nu(s,["boolean","string","number","null"]))throw new qi(`Expected first argument to be of type boolean, string, number or null, but found ${li(bi(s))} instead.`);if(!nu(u,["string","array"]))throw new qi(`Expected second argument to be of type array or string, but found ${li(bi(u))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(r);return u.indexOf(s,p)}return u.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var vh=Rl;class Ce{constructor(r,s,u,p,g,y){this.inputType=r,this.type=s,this.input=u,this.cases=p,this.outputs=g,this.otherwise=y}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let u,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const g={},y=[];for(let k=2;k<r.length-1;k+=2){let D=r[k];const L=r[k+1];Array.isArray(D)||(D=[D]);const F=s.concat(k);if(D.length===0)return F.error("Expected at least one branch label.");for(const q of D){if(typeof q!="number"&&typeof q!="string")return F.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return F.error("Numeric branch labels must be integer values.");if(u){if(F.checkSubtype(u,bi(q)))return null}else u=bi(q);if(g[String(q)]!==void 0)return F.error("Branch labels must be unique.");g[String(q)]=y.length}const U=s.parse(L,k,p);if(!U)return null;p=p||U.type,y.push(U)}const b=s.parse(r[1],1,fr);if(!b)return null;const T=s.parse(r[r.length-1],r.length-1,p);return T?b.type.kind!=="value"&&s.concat(1).checkSubtype(u,b.type)?null:new Ce(u,p,b,g,y,T):null}evaluate(r){const s=this.input.evaluate(r);return(bi(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),u=[],p={};for(const y of s){const b=p[this.cases[y]];b===void 0?(p[this.cases[y]]=u.length,u.push([this.cases[y],[y]])):u[b][1].push(y)}const g=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,b]of u)r.push(b.length===1?g(b[0]):b.map(g)),r.push(this.outputs[y].serialize());return r.push(this.otherwise.serialize()),r}}var Ke=Ce;class pt{constructor(r,s,u){this.type=r,this.branches=s,this.otherwise=u}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let u;s.expectedType&&s.expectedType.kind!=="value"&&(u=s.expectedType);const p=[];for(let y=1;y<r.length-1;y+=2){const b=s.parse(r[y],y,cr);if(!b)return null;const T=s.parse(r[y+1],y+1,u);if(!T)return null;p.push([b,T]),u=u||T.type}const g=s.parse(r[r.length-1],r.length-1,u);return g?new pt(u,p,g):null}evaluate(r){for(const[s,u]of this.branches)if(s.evaluate(r))return u.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,u]of this.branches)r(s),r(u);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(s=>{r.push(s.serialize())}),r}}var vt=pt;class Mt{constructor(r,s,u,p){this.type=r,this.input=s,this.beginIndex=u,this.endIndex=p}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,fr),p=s.parse(r[2],2,cn);if(!u||!p)return null;if(!Pl(u.type,[ha(fr),_r,fr]))return s.error(`Expected first argument to be of type array or string, but found ${li(u.type)} instead`);if(r.length===4){const g=s.parse(r[3],3,cn);return g?new Mt(u.type,u,p,g):null}return new Mt(u.type,u,p)}evaluate(r){const s=this.input.evaluate(r),u=this.beginIndex.evaluate(r);if(!nu(s,["string","array"]))throw new qi(`Expected first argument to be of type array or string, but found ${li(bi(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(r);return s.slice(u,p)}return s.slice(u)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var fn=Mt;function Cn(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Wn(o,r,s,u){return u.compare(r,s)===0}function Tn(o,r,s){const u=o!=="=="&&o!=="!=";return class cD{constructor(g,y,b){this.type=cr,this.lhs=g,this.rhs=y,this.collator=b,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");const b=g[0];let T=y.parse(g[1],1,fr);if(!T)return null;if(!Cn(b,T.type))return y.concat(1).error(`"${b}" comparisons are not supported for type '${li(T.type)}'.`);let k=y.parse(g[2],2,fr);if(!k)return null;if(!Cn(b,k.type))return y.concat(2).error(`"${b}" comparisons are not supported for type '${li(k.type)}'.`);if(T.type.kind!==k.type.kind&&T.type.kind!=="value"&&k.type.kind!=="value")return y.error(`Cannot compare types '${li(T.type)}' and '${li(k.type)}'.`);u&&(T.type.kind==="value"&&k.type.kind!=="value"?T=new Ka(k.type,[T]):T.type.kind!=="value"&&k.type.kind==="value"&&(k=new Ka(T.type,[k])));let D=null;if(g.length===4){if(T.type.kind!=="string"&&k.type.kind!=="string"&&T.type.kind!=="value"&&k.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(D=y.parse(g[3],3,xi),!D)return null}return new cD(T,k,D)}evaluate(g){const y=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(u&&this.hasUntypedArgument){const T=bi(y),k=bi(b);if(T.kind!==k.kind||T.kind!=="string"&&T.kind!=="number")throw new qi(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${T.kind}, ${k.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const T=bi(y),k=bi(b);if(T.kind!=="string"||k.kind!=="string")return r(g,y,b)}return this.collator?s(g,y,b,this.collator.evaluate(g)):r(g,y,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[o];return this.eachChild(y=>{g.push(y.serialize())}),g}}}const kr=Tn("==",function(o,r,s){return r===s},Wn),or=Tn("!=",function(o,r,s){return r!==s},function(o,r,s,u){return!Wn(0,r,s,u)}),pr=Tn("<",function(o,r,s){return r<s},function(o,r,s,u){return u.compare(r,s)<0}),Cr=Tn(">",function(o,r,s){return r>s},function(o,r,s,u){return u.compare(r,s)>0}),Jn=Tn("<=",function(o,r,s){return r<=s},function(o,r,s,u){return u.compare(r,s)<=0}),ti=Tn(">=",function(o,r,s){return r>=s},function(o,r,s,u){return u.compare(r,s)>=0});class go{constructor(r,s,u,p,g,y){this.type=_r,this.number=r,this.locale=s,this.currency=u,this.unit=p,this.minFractionDigits=g,this.maxFractionDigits=y}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const u=s.parse(r[1],1,cn);if(!u)return null;const p=r[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let g=null;if(p.locale&&(g=s.parse(p.locale,1,_r),!g))return null;let y=null;if(p.currency&&(y=s.parse(p.currency,1,_r),!y))return null;let b=null;if(p.unit&&(b=s.parse(p.unit,1,_r),!b))return null;let T=null;if(p["min-fraction-digits"]&&(T=s.parse(p["min-fraction-digits"],1,cn),!T))return null;let k=null;return p["max-fraction-digits"]&&(k=s.parse(p["max-fraction-digits"],1,cn),!k)?null:new go(u,g,y,b,T,k)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class Ri{constructor(r){this.type=cn,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=s.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${li(u.type)} instead.`):new Ri(u):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new qi(`Expected value to be of type string or array, but found ${li(bi(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(s=>{r.push(s.serialize())}),r}}const ia={"==":kr,"!=":or,">":Cr,"<":pr,">=":ti,"<=":Jn,array:Ka,at:yh,boolean:Ka,case:vt,coalesce:yc,collator:lu,format:ys,image:pc,in:Qu,"index-of":vh,interpolate:ra,"interpolate-hcl":ra,"interpolate-lab":ra,length:Ri,let:Np,literal:Gs,match:Ke,number:Ka,"number-format":go,object:Ka,slice:fn,step:fa,string:Ka,"to-boolean":fc,"to-color":fc,"to-number":fc,"to-string":fc,var:Sr,within:mr};function Ua(o,[r,s,u,p]){r=r.evaluate(o),s=s.evaluate(o),u=u.evaluate(o);const g=p?p.evaluate(o):1,y=Lp(r,s,u,g);if(y)throw new qi(y);return new Ii(r/255*g,s/255*g,u/255*g,g)}function Ho(o,r){return o in r}function oo(o,r){const s=r[o];return s===void 0?null:s}function Ja(o){return{type:o}}xs.register(ia,{error:[{kind:"error"},[_r],(o,[r])=>{throw new qi(r.evaluate(o))}],typeof:[_r,[fr],(o,[r])=>li(bi(r.evaluate(o)))],"to-rgba":[ha(cn,4),[jo],(o,[r])=>r.evaluate(o).toArray()],rgb:[jo,[cn,cn,cn],Ua],rgba:[jo,[cn,cn,cn,cn],Ua],has:{type:cr,overloads:[[[_r],(o,[r])=>Ho(r.evaluate(o),o.properties())],[[_r,Fa],(o,[r,s])=>Ho(r.evaluate(o),s.evaluate(o))]]},get:{type:fr,overloads:[[[_r],(o,[r])=>oo(r.evaluate(o),o.properties())],[[_r,Fa],(o,[r,s])=>oo(r.evaluate(o),s.evaluate(o))]]},"feature-state":[fr,[_r],(o,[r])=>oo(r.evaluate(o),o.featureState||{})],properties:[Fa,[],o=>o.properties()],"geometry-type":[_r,[],o=>o.geometryType()],id:[fr,[],o=>o.id()],zoom:[cn,[],o=>o.globals.zoom],pitch:[cn,[],o=>o.globals.pitch||0],"distance-from-center":[cn,[],o=>o.distanceFromCenter()],"heatmap-density":[cn,[],o=>o.globals.heatmapDensity||0],"line-progress":[cn,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[cn,[],o=>o.globals.skyRadialProgress||0],accumulated:[fr,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[cn,Ja(cn),(o,r)=>{let s=0;for(const u of r)s+=u.evaluate(o);return s}],"*":[cn,Ja(cn),(o,r)=>{let s=1;for(const u of r)s*=u.evaluate(o);return s}],"-":{type:cn,overloads:[[[cn,cn],(o,[r,s])=>r.evaluate(o)-s.evaluate(o)],[[cn],(o,[r])=>-r.evaluate(o)]]},"/":[cn,[cn,cn],(o,[r,s])=>r.evaluate(o)/s.evaluate(o)],"%":[cn,[cn,cn],(o,[r,s])=>r.evaluate(o)%s.evaluate(o)],ln2:[cn,[],()=>Math.LN2],pi:[cn,[],()=>Math.PI],e:[cn,[],()=>Math.E],"^":[cn,[cn,cn],(o,[r,s])=>Math.pow(r.evaluate(o),s.evaluate(o))],sqrt:[cn,[cn],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[cn,[cn],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[cn,[cn],(o,[r])=>Math.log(r.evaluate(o))],log2:[cn,[cn],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[cn,[cn],(o,[r])=>Math.sin(r.evaluate(o))],cos:[cn,[cn],(o,[r])=>Math.cos(r.evaluate(o))],tan:[cn,[cn],(o,[r])=>Math.tan(r.evaluate(o))],asin:[cn,[cn],(o,[r])=>Math.asin(r.evaluate(o))],acos:[cn,[cn],(o,[r])=>Math.acos(r.evaluate(o))],atan:[cn,[cn],(o,[r])=>Math.atan(r.evaluate(o))],min:[cn,Ja(cn),(o,r)=>Math.min(...r.map(s=>s.evaluate(o)))],max:[cn,Ja(cn),(o,r)=>Math.max(...r.map(s=>s.evaluate(o)))],abs:[cn,[cn],(o,[r])=>Math.abs(r.evaluate(o))],round:[cn,[cn],(o,[r])=>{const s=r.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[cn,[cn],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[cn,[cn],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[cr,[_r,fr],(o,[r,s])=>o.properties()[r.value]===s.value],"filter-id-==":[cr,[fr],(o,[r])=>o.id()===r.value],"filter-type-==":[cr,[_r],(o,[r])=>o.geometryType()===r.value],"filter-<":[cr,[_r,fr],(o,[r,s])=>{const u=o.properties()[r.value],p=s.value;return typeof u==typeof p&&u<p}],"filter-id-<":[cr,[fr],(o,[r])=>{const s=o.id(),u=r.value;return typeof s==typeof u&&s<u}],"filter->":[cr,[_r,fr],(o,[r,s])=>{const u=o.properties()[r.value],p=s.value;return typeof u==typeof p&&u>p}],"filter-id->":[cr,[fr],(o,[r])=>{const s=o.id(),u=r.value;return typeof s==typeof u&&s>u}],"filter-<=":[cr,[_r,fr],(o,[r,s])=>{const u=o.properties()[r.value],p=s.value;return typeof u==typeof p&&u<=p}],"filter-id-<=":[cr,[fr],(o,[r])=>{const s=o.id(),u=r.value;return typeof s==typeof u&&s<=u}],"filter->=":[cr,[_r,fr],(o,[r,s])=>{const u=o.properties()[r.value],p=s.value;return typeof u==typeof p&&u>=p}],"filter-id->=":[cr,[fr],(o,[r])=>{const s=o.id(),u=r.value;return typeof s==typeof u&&s>=u}],"filter-has":[cr,[fr],(o,[r])=>r.value in o.properties()],"filter-has-id":[cr,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[cr,[ha(_r)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[cr,[ha(fr)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[cr,[_r,ha(fr)],(o,[r,s])=>s.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[cr,[_r,ha(fr)],(o,[r,s])=>function(u,p,g,y){for(;g<=y;){const b=g+y>>1;if(p[b]===u)return!0;p[b]>u?y=b-1:g=b+1}return!1}(o.properties()[r.value],s.value,0,s.value.length-1)],all:{type:cr,overloads:[[[cr,cr],(o,[r,s])=>r.evaluate(o)&&s.evaluate(o)],[Ja(cr),(o,r)=>{for(const s of r)if(!s.evaluate(o))return!1;return!0}]]},any:{type:cr,overloads:[[[cr,cr],(o,[r,s])=>r.evaluate(o)||s.evaluate(o)],[Ja(cr),(o,r)=>{for(const s of r)if(s.evaluate(o))return!0;return!1}]]},"!":[cr,[cr],(o,[r])=>!r.evaluate(o)],"is-supported-script":[cr,[_r],(o,[r])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(r.evaluate(o))}],upcase:[_r,[_r],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[_r,[_r],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[_r,Ja(fr),(o,r)=>r.map(s=>au(s.evaluate(o))).join("")],"resolved-locale":[_r,[xi],(o,[r])=>r.evaluate(o).resolvedLocale()]});var xh=ia;function A_(o){return{result:"success",value:o}}function du(o){return{result:"error",value:o}}function ed(o){return o["property-type"]==="data-driven"}function Fp(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Bp(o){return!!o.expression&&o.expression.interpolated}function Dr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function bh(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function M_(o){return o}function jp(o,r){const s=r.type==="color",u=o.stops&&typeof o.stops[0][0]=="object",p=u||!(u||o.property!==void 0),g=o.type||(Bp(r)?"exponential":"interval");if(s&&((o=da({},o)).stops&&(o.stops=o.stops.map(k=>[k[0],Ii.parse(k[1])])),o.default=Ii.parse(o.default?o.default:r.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!cu[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let y,b,T;if(g==="exponential")y=Ol;else if(g==="interval")y=$p;else if(g==="categorical"){y=D_,b=Object.create(null);for(const k of o.stops)b[k[0]]=k[1];T=typeof o.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);y=R_}if(u){const k={},D=[];for(let U=0;U<o.stops.length;U++){const q=o.stops[U],ee=q[0].zoom;k[ee]===void 0&&(k[ee]={zoom:ee,type:o.type,property:o.property,default:o.default,stops:[]},D.push(ee)),k[ee].stops.push([q[0].value,q[1]])}const L=[];for(const U of D)L.push([k[U].zoom,jp(k[U],r)]);const F={name:"linear"};return{kind:"composite",interpolationType:F,interpolationFactor:ra.interpolationFactor.bind(void 0,F),zoomStops:L.map(U=>U[0]),evaluate:({zoom:U},q)=>Ol({stops:L,base:o.base},r,U).evaluate(U,q)}}if(p){const k=g==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:ra.interpolationFactor.bind(void 0,k),zoomStops:o.stops.map(D=>D[0]),evaluate:({zoom:D})=>y(o,r,D,b,T)}}return{kind:"source",evaluate(k,D){const L=D&&D.properties?D.properties[o.property]:void 0;return L===void 0?td(o.default,r.default):y(o,r,L,b,T)}}}function td(o,r,s){return o!==void 0?o:r!==void 0?r:s!==void 0?s:void 0}function D_(o,r,s,u,p){return td(typeof s===p?u[s]:void 0,o.default,r.default)}function $p(o,r,s){if(Dr(s)!=="number")return td(o.default,r.default);const u=o.stops.length;if(u===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[u-1][0])return o.stops[u-1][1];const p=Zs(o.stops.map(g=>g[0]),s);return o.stops[p][1]}function Ol(o,r,s){const u=o.base!==void 0?o.base:1;if(Dr(s)!=="number")return td(o.default,r.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const g=Zs(o.stops.map(D=>D[0]),s),y=function(D,L,F,U){const q=U-F,ee=D-F;return q===0?0:L===1?ee/q:(Math.pow(L,ee)-1)/(Math.pow(L,q)-1)}(s,u,o.stops[g][0],o.stops[g+1][0]),b=o.stops[g][1],T=o.stops[g+1][1];let k=Vo[r.type]||M_;if(o.colorSpace&&o.colorSpace!=="rgb"){const D=cu[o.colorSpace];k=(L,F)=>D.reverse(D.interpolate(D.forward(L),D.forward(F),y))}return typeof b.evaluate=="function"?{evaluate(...D){const L=b.evaluate.apply(void 0,D),F=T.evaluate.apply(void 0,D);if(L!==void 0&&F!==void 0)return k(L,F,y)}}:k(b,T,y)}function R_(o,r,s){return r.type==="color"?s=Ii.parse(s):r.type==="formatted"?s=$o.fromString(s.toString()):r.type==="resolvedImage"?s=pa.fromString(s.toString()):Dr(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0),td(s,o.default,r.default)}class Up{constructor(r,s){this.expression=r,this._warningHistory={},this._evaluator=new Yu,this._defaultValue=s?function(u){return u.type==="color"&&(bh(u.default)||Array.isArray(u.default))?new Ii(0,0,0,0):u.type==="color"?Ii.parse(u.default)||null:u.default===void 0?null:u.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,u,p,g,y,b,T){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=u,this._evaluator.canonical=p||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=T||null,this.expression.evaluate(this._evaluator)}evaluate(r,s,u,p,g,y,b,T){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=u||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=T||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new qi(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function nd(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in xh}function rd(o,r){const s=new Ir(xh,[],r?function(p){const g={color:jo,string:_r,number:cn,enum:_r,boolean:cr,formatted:uc,resolvedImage:Ba};return p.type==="array"?ha(g[p.value]||fr,p.length):g[p.type]}(r):void 0),u=s.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?A_(new Up(u,r)):du(s.errors)}class cm{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!ei(s.expression)}evaluateWithoutErrorHandling(r,s,u,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(r,s,u,p,g,y)}evaluate(r,s,u,p,g,y){return this._styleExpression.evaluate(r,s,u,p,g,y)}}class wh{constructor(r,s,u,p){this.kind=r,this.zoomStops=u,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!ei(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(r,s,u,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(r,s,u,p,g,y)}evaluate(r,s,u,p,g,y){return this._styleExpression.evaluate(r,s,u,p,g,y)}interpolationFactor(r,s,u){return this.interpolationType?ra.interpolationFactor(this.interpolationType,r,s,u):0}}function Eh(o,r){if((o=rd(o,r)).result==="error")return o;const s=o.value.expression,u=Ai(s);if(!u&&!ed(r))return du([new Mo("","data expressions not supported")]);const p=xo(s,["zoom","pitch","distance-from-center"]);if(!p&&!Fp(r))return du([new Mo("","zoom expressions not supported")]);const g=Wp(s);return g||p?g instanceof Mo?du([g]):g instanceof ra&&!Bp(r)?du([new Mo("",'"interpolate" expressions cannot be used with this property')]):A_(g?new wh(u?"camera":"composite",o.value,g.labels,g instanceof ra?g.interpolation:void 0):new cm(u?"constant":"source",o.value)):du([new Mo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Vp{constructor(r,s){this._parameters=r,this._specification=s,da(this,jp(this._parameters,this._specification))}static deserialize(r){return new Vp(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Wp(o){let r=null;if(o instanceof Np)r=Wp(o.result);else if(o instanceof yc){for(const s of o.args)if(r=Wp(s),r)break}else(o instanceof fa||o instanceof ra)&&o.input instanceof xs&&o.input.name==="zoom"&&(r=o);return r instanceof Mo||o.eachChild(s=>{const u=Wp(s);u instanceof Mo?r=u:!r&&u?r=new Mo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&u&&r!==u&&(r=new Mo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}class gn{constructor(r,s,u,p){this.message=(r?`${r}: `:"")+u,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function Ss(o){const r=o.key,s=o.value,u=o.valueSpec||{},p=o.objectElementValidators||{},g=o.style,y=o.styleSpec;let b=[];const T=Dr(s);if(T!=="object")return[new gn(r,s,`object expected, ${T} found`)];for(const k in s){const D=k.split(".")[0];let L;p[D]?L=p[D]:u[D]?L=qo:p["*"]?L=p["*"]:u["*"]&&(L=qo),L?b=b.concat(L({key:(r&&`${r}.`)+k,value:s[k],valueSpec:u[D]||u["*"],style:g,styleSpec:y,object:s,objectKey:k},s)):b.push(new gn(r,s[k],`unknown property "${k}"`))}for(const k in u)p[k]||u[k].required&&u[k].default===void 0&&s[k]===void 0&&b.push(new gn(r,s,`missing required property "${k}"`));return b}function O_(o){const r=o.value,s=o.valueSpec,u=o.style,p=o.styleSpec,g=o.key,y=o.arrayElementValidator||qo;if(Dr(r)!=="array")return[new gn(g,r,`array expected, ${Dr(r)} found`)];if(s.length&&r.length!==s.length)return[new gn(g,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new gn(g,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let b={type:s.value,values:s.values,minimum:s.minimum,maximum:s.maximum,function:void 0};p.$version<7&&(b.function=s.function),Dr(s.value)==="object"&&(b=s.value);let T=[];for(let k=0;k<r.length;k++)T=T.concat(y({array:r,arrayIndex:k,value:r[k],valueSpec:b,style:u,styleSpec:p,key:`${g}[${k}]`}));return T}function Th(o){const r=o.key,s=o.value,u=o.valueSpec;let p=Dr(s);if(p==="number"&&s!=s&&(p="NaN"),p!=="number")return[new gn(r,s,`number expected, ${p} found`)];if("minimum"in u){let g=u.minimum;if(Dr(u.minimum)==="array"&&(g=u.minimum[o.arrayIndex]),s<g)return[new gn(r,s,`${s} is less than the minimum value ${g}`)]}if("maximum"in u){let g=u.maximum;if(Dr(u.maximum)==="array"&&(g=u.maximum[o.arrayIndex]),s>g)return[new gn(r,s,`${s} is greater than the maximum value ${g}`)]}return[]}function Sh(o){const r=o.valueSpec,s=Qr(o.value.type);let u,p,g,y={};const b=s!=="categorical"&&o.value.property===void 0,T=!b,k=Dr(o.value.stops)==="array"&&Dr(o.value.stops[0])==="array"&&Dr(o.value.stops[0][0])==="object",D=Ss({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(U){if(s==="identity")return[new gn(U.key,U.value,'identity function may not have a "stops" property')];let q=[];const ee=U.value;return q=q.concat(O_({key:U.key,value:ee,valueSpec:U.valueSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:L})),Dr(ee)==="array"&&ee.length===0&&q.push(new gn(U.key,ee,"array must have at least one stop")),q},default:function(U){return qo({key:U.key,value:U.value,valueSpec:r,style:U.style,styleSpec:U.styleSpec})}}});return s==="identity"&&b&&D.push(new gn(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||D.push(new gn(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Bp(o.valueSpec)&&D.push(new gn(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(T&&!ed(o.valueSpec)?D.push(new gn(o.key,o.value,"property functions not supported")):b&&!Fp(o.valueSpec)&&D.push(new gn(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!k||o.value.property!==void 0||D.push(new gn(o.key,o.value,'"property" property is required')),D;function L(U){let q=[];const ee=U.value,ce=U.key;if(Dr(ee)!=="array")return[new gn(ce,ee,`array expected, ${Dr(ee)} found`)];if(ee.length!==2)return[new gn(ce,ee,`array length 2 expected, length ${ee.length} found`)];if(k){if(Dr(ee[0])!=="object")return[new gn(ce,ee,`object expected, ${Dr(ee[0])} found`)];if(ee[0].zoom===void 0)return[new gn(ce,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new gn(ce,ee,"object stop key must have value")];const ye=Qr(ee[0].zoom);if(typeof ye!="number")return[new gn(ce,ee[0].zoom,"stop zoom values must be numbers")];if(g&&g>ye)return[new gn(ce,ee[0].zoom,"stop zoom values must appear in ascending order")];ye!==g&&(g=ye,p=void 0,y={}),q=q.concat(Ss({key:`${ce}[0]`,value:ee[0],valueSpec:{zoom:{}},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Th,value:F}}))}else q=q.concat(F({key:`${ce}[0]`,value:ee[0],valueSpec:{},style:U.style,styleSpec:U.styleSpec},ee));return nd(Hi(ee[1]))?q.concat([new gn(`${ce}[1]`,ee[1],"expressions are not allowed in function stops.")]):q.concat(qo({key:`${ce}[1]`,value:ee[1],valueSpec:r,style:U.style,styleSpec:U.styleSpec}))}function F(U,q){const ee=Dr(U.value),ce=Qr(U.value),ye=U.value!==null?U.value:q;if(u){if(ee!==u)return[new gn(U.key,ye,`${ee} stop domain type must match previous stop domain type ${u}`)]}else u=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean"&&typeof ce!="number"&&typeof ce!="string"&&typeof ce!="boolean")return[new gn(U.key,ye,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&s!=="categorical"){let Ae=`number expected, ${ee} found`;return ed(r)&&s===void 0&&(Ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gn(U.key,ye,Ae)]}return s!=="categorical"||ee!=="number"||typeof ce=="number"&&isFinite(ce)&&Math.floor(ce)===ce?s!=="categorical"&&ee==="number"&&typeof ce=="number"&&typeof p=="number"&&p!==void 0&&ce<p?[new gn(U.key,ye,"stop domain values must appear in ascending order")]:(p=ce,s==="categorical"&&ce in y?[new gn(U.key,ye,"stop domain values must be unique")]:(y[ce]=!0,[])):[new gn(U.key,ye,`integer expected, found ${String(ce)}`)]}}function bo(o){const r=(o.expressionContext==="property"?Eh:rd)(Hi(o.value),o.valueSpec);if(r.result==="error")return r.value.map(u=>new gn(`${o.key}${u.key}`,o.value,u.message));const s=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new gn(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ei(s))return[new gn(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter")return kh(s,o);if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!xo(s,["zoom","feature-state"]))return[new gn(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Ai(s))return[new gn(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function kh(o,r){const s=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(r.valueSpec&&r.valueSpec.expression)for(const p of r.valueSpec.expression.parameters)s.delete(p);if(s.size===0)return[];const u=[];return o instanceof xs&&s.has(o.name)?[new gn(r.key,r.value,`["${o.name}"] expression is not supported in a filter for a ${r.object.type} layer with id: ${r.object.id}`)]:(o.eachChild(p=>{u.push(...kh(p,r))}),u)}function Hp(o){const r=o.key,s=o.value,u=o.valueSpec,p=[];return Array.isArray(u.values)?u.values.indexOf(Qr(s))===-1&&p.push(new gn(r,s,`expected one of [${u.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(u.values).indexOf(Qr(s))===-1&&p.push(new gn(r,s,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function um(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!um(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function qp(o,r="fill"){if(o==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};um(o)||(o=od(o));const s=o;let u=!0;try{u=function(k){if(!id(k))return k;let D=Hi(k);return Gp(D),D=L_(D),D}(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(s,null,2)}
        `)}const p=yt[`filter_${r}`],g=rd(u,p);let y=null;if(g.result==="error")throw new Error(g.value.map(k=>`${k.key}: ${k.message}`).join(", "));y=(k,D,L)=>g.value.evaluate(k,D,{},L);let b=null,T=null;if(u!==s){const k=rd(s,p);if(k.result==="error")throw new Error(k.value.map(D=>`${D.key}: ${D.message}`).join(", "));b=(D,L,F,U,q)=>k.value.evaluate(D,L,{},F,void 0,void 0,U,q),T=!Ai(k.value.expression)}return{filter:y,dynamicFilter:b||void 0,needGeometry:z_(u),needFeature:!!T}}function L_(o){if(!Array.isArray(o))return o;const r=function(s){if(dm.has(s[0])){for(let u=1;u<s.length;u++)if(id(s[u]))return!0}return s}(o);return r===!0?r:r.map(s=>L_(s))}function Gp(o){let r=!1;const s=[];if(o[0]==="case"){for(let u=1;u<o.length-1;u+=2)r=r||id(o[u]),s.push(o[u+1]);s.push(o[o.length-1])}else if(o[0]==="match"){r=r||id(o[1]);for(let u=2;u<o.length-1;u+=2)s.push(o[u+1]);s.push(o[o.length-1])}else if(o[0]==="step"){r=r||id(o[1]);for(let u=1;u<o.length-1;u+=2)s.push(o[u+1])}r&&(o.length=0,o.push("any",...s));for(let u=1;u<o.length;u++)Gp(o[u])}function id(o){if(!Array.isArray(o))return!1;if((r=o[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let s=1;s<o.length;s++)if(id(o[s]))return!0;return!1}const dm=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Bb(o,r){return o<r?-1:o>r?1:0}function z_(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(z_(o[r]))return!0;return!1}function od(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?hm(o[1],o[2],"=="):r==="!="?Zp(hm(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?hm(o[1],o[2],r):r==="any"?(s=o.slice(1),["any"].concat(s.map(od))):r==="all"?["all"].concat(o.slice(1).map(od)):r==="none"?["all"].concat(o.slice(1).map(od).map(Zp)):r==="in"?pm(o[1],o.slice(2)):r==="!in"?Zp(pm(o[1],o.slice(2))):r==="has"?fm(o[1]):r==="!has"?Zp(fm(o[1])):r!=="within"||o;var s}function hm(o,r,s){switch(o){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,o,r]}}function pm(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Bb)]]:["filter-in-small",o,["literal",r]]}}function fm(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Zp(o){return["!",o]}function Ch(o){return um(Hi(o.value))?bo(da({},o,{expressionContext:"filter",valueSpec:o.styleSpec[`filter_${o.layerType||"fill"}`]})):Ph(o)}function Ph(o){const r=o.value,s=o.key;if(Dr(r)!=="array")return[new gn(s,r,`array expected, ${Dr(r)} found`)];const u=o.styleSpec;let p,g=[];if(r.length<1)return[new gn(s,r,"filter array must have at least 1 element")];switch(g=g.concat(Hp({key:`${s}[0]`,value:r[0],valueSpec:u.filter_operator,style:o.style,styleSpec:o.styleSpec})),Qr(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Qr(r[1])==="$type"&&g.push(new gn(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&g.push(new gn(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(p=Dr(r[1]),p!=="string"&&g.push(new gn(`${s}[1]`,r[1],`string expected, ${p} found`)));for(let y=2;y<r.length;y++)p=Dr(r[y]),Qr(r[1])==="$type"?g=g.concat(Hp({key:`${s}[${y}]`,value:r[y],valueSpec:u.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&g.push(new gn(`${s}[${y}]`,r[y],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let y=1;y<r.length;y++)g=g.concat(Ph({key:`${s}[${y}]`,value:r[y],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Dr(r[1]),r.length!==2?g.push(new gn(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="string"&&g.push(new gn(`${s}[1]`,r[1],`string expected, ${p} found`));break;case"within":p=Dr(r[1]),r.length!==2?g.push(new gn(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="object"&&g.push(new gn(`${s}[1]`,r[1],`object expected, ${p} found`))}return g}function mm(o,r){const s=o.key,u=o.style,p=o.styleSpec,g=o.value,y=o.objectKey,b=p[`${r}_${o.layerType}`];if(!b)return[];const T=y.match(/^(.*)-transition$/);if(r==="paint"&&T&&b[T[1]]&&b[T[1]].transition)return qo({key:s,value:g,valueSpec:p.transition,style:u,styleSpec:p});const k=o.valueSpec||b[y];if(!k)return[new gn(s,g,`unknown property "${y}"`)];let D;if(Dr(g)==="string"&&ed(k)&&!k.tokens&&(D=/^{([^}]+)}$/.exec(g))){const F=`\`{ "type": "identity", "property": ${D?JSON.stringify(D[1]):'"_"'} }\``;return[new gn(s,g,`"${y}" does not support interpolation syntax
Use an identity property function instead: ${F}.`)]}const L=[];return o.layerType==="symbol"&&(y==="text-field"&&u&&!u.glyphs&&L.push(new gn(s,g,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&bh(Hi(g))&&Qr(g.type)==="identity"&&L.push(new gn(s,g,'"text-font" does not support identity functions'))),L.concat(qo({key:o.key,value:g,valueSpec:k,style:u,styleSpec:p,expressionContext:"property",propertyType:r,propertyKey:y}))}function N_(o){return mm(o,"paint")}function gm(o){return mm(o,"layout")}function F_(o){let r=[];const s=o.value,u=o.key,p=o.style,g=o.styleSpec;s.type||s.ref||r.push(new gn(u,s,'either "type" or "ref" is required'));let y=Qr(s.type);const b=Qr(s.ref);if(s.id){const T=Qr(s.id);for(let k=0;k<o.arrayIndex;k++){const D=p.layers[k];Qr(D.id)===T&&r.push(new gn(u,s.id,`duplicate layer id "${s.id}", previously used at line ${D.id.__line__}`))}}if("ref"in s){let T;["type","source","source-layer","filter","layout"].forEach(k=>{k in s&&r.push(new gn(u,s[k],`"${k}" is prohibited for ref layers`))}),p.layers.forEach(k=>{Qr(k.id)===b&&(T=k)}),T?T.ref?r.push(new gn(u,s.ref,"ref cannot reference another ref layer")):y=Qr(T.type):typeof b=="string"&&r.push(new gn(u,s.ref,`ref layer "${b}" not found`))}else if(y!=="background"&&y!=="sky")if(s.source){const T=p.sources&&p.sources[s.source],k=T&&Qr(T.type);T?k==="vector"&&y==="raster"?r.push(new gn(u,s.source,`layer "${s.id}" requires a raster source`)):k==="raster"&&y!=="raster"?r.push(new gn(u,s.source,`layer "${s.id}" requires a vector source`)):k!=="vector"||s["source-layer"]?k==="raster-dem"&&y!=="hillshade"?r.push(new gn(u,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!s.paint||!s.paint["line-gradient"]&&!s.paint["line-trim-offset"]||k==="geojson"&&T.lineMetrics||r.push(new gn(u,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new gn(u,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new gn(u,s.source,`source "${s.source}" not found`))}else r.push(new gn(u,s,'missing required property "source"'));return r=r.concat(Ss({key:u,value:s,valueSpec:g.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>qo({key:`${u}.type`,value:s.type,valueSpec:g.layer.type,style:o.style,styleSpec:o.styleSpec,object:s,objectKey:"type"}),filter:T=>Ch(da({layerType:y},T)),layout:T=>Ss({layer:s,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":k=>gm(da({layerType:y},k))}}),paint:T=>Ss({layer:s,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":k=>N_(da({layerType:y},k))}})}})),r}function bc(o){const r=o.value,s=o.key,u=Dr(r);return u!=="string"?[new gn(s,r,`string expected, ${u} found`)]:[]}const B_={promoteId:function({key:o,value:r}){if(Dr(r)==="string")return bc({key:o,value:r});{const s=[];for(const u in r)s.push(...bc({key:`${o}.${u}`,value:r[u]}));return s}}};function j_(o){const r=o.value,s=o.key,u=o.styleSpec,p=o.style;if(!r.type)return[new gn(s,r,'"type" is required')];const g=Qr(r.type);let y;switch(g){case"vector":case"raster":case"raster-dem":return y=Ss({key:s,value:r,valueSpec:u[`source_${g.replace("-","_")}`],style:o.style,styleSpec:u,objectElementValidators:B_}),y;case"geojson":if(y=Ss({key:s,value:r,valueSpec:u.source_geojson,style:p,styleSpec:u,objectElementValidators:B_}),r.cluster)for(const b in r.clusterProperties){const[T,k]=r.clusterProperties[b],D=typeof T=="string"?[T,["accumulated"],["get",b]]:T;y.push(...bo({key:`${s}.${b}.map`,value:k,expressionContext:"cluster-map"})),y.push(...bo({key:`${s}.${b}.reduce`,value:D,expressionContext:"cluster-reduce"}))}return y;case"video":return Ss({key:s,value:r,valueSpec:u.source_video,style:p,styleSpec:u});case"image":return Ss({key:s,value:r,valueSpec:u.source_image,style:p,styleSpec:u});case"canvas":return[new gn(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Hp({key:`${s}.type`,value:r.type,valueSpec:{values:jb(u)},style:p,styleSpec:u})}}function jb(o){return o.source.reduce((r,s)=>{const u=o[s];return u.type.type==="enum"&&(r=r.concat(Object.keys(u.type.values))),r},[])}function $_(o){const r=o.value,s=o.styleSpec,u=s.light,p=o.style;let g=[];const y=Dr(r);if(r===void 0)return g;if(y!=="object")return g=g.concat([new gn("light",r,`object expected, ${y} found`)]),g;for(const b in r){const T=b.match(/^(.*)-transition$/);g=g.concat(T&&u[T[1]]&&u[T[1]].transition?qo({key:b,value:r[b],valueSpec:s.transition,style:p,styleSpec:s}):u[b]?qo({key:b,value:r[b],valueSpec:u[b],style:p,styleSpec:s}):[new gn(b,r[b],`unknown property "${b}"`)])}return g}function _m(o){const r=o.value,s=o.key,u=o.style,p=o.styleSpec,g=p.terrain;let y=[];const b=Dr(r);if(r===void 0)return y;if(b!=="object")return y=y.concat([new gn("terrain",r,`object expected, ${b} found`)]),y;for(const T in r){const k=T.match(/^(.*)-transition$/);y=y.concat(k&&g[k[1]]&&g[k[1]].transition?qo({key:T,value:r[T],valueSpec:p.transition,style:u,styleSpec:p}):g[T]?qo({key:T,value:r[T],valueSpec:g[T],style:u,styleSpec:p}):[new gn(T,r[T],`unknown property "${T}"`)])}if(r.source){const T=u.sources&&u.sources[r.source],k=T&&Qr(T.type);T?k!=="raster-dem"&&y.push(new gn(s,r.source,`terrain cannot be used with a source of type ${String(k)}, it only be used with a "raster-dem" source type`)):y.push(new gn(s,r.source,`source "${r.source}" not found`))}else y.push(new gn(s,r,'terrain is missing required property "source"'));return y}function U_(o){const r=o.value,s=o.style,u=o.styleSpec,p=u.fog;let g=[];const y=Dr(r);if(r===void 0)return g;if(y!=="object")return g=g.concat([new gn("fog",r,`object expected, ${y} found`)]),g;for(const b in r){const T=b.match(/^(.*)-transition$/);g=g.concat(T&&p[T[1]]&&p[T[1]].transition?qo({key:b,value:r[b],valueSpec:u.transition,style:s,styleSpec:u}):p[b]?qo({key:b,value:r[b],valueSpec:p[b],style:s,styleSpec:u}):[new gn(b,r[b],`unknown property "${b}"`)])}return g}const V_={"*":()=>[],array:O_,boolean:function(o){const r=o.value,s=o.key,u=Dr(r);return u!=="boolean"?[new gn(s,r,`boolean expected, ${u} found`)]:[]},number:Th,color:function(o){const r=o.key,s=o.value,u=Dr(s);return u!=="string"?[new gn(r,s,`color expected, ${u} found`)]:Il(s)===null?[new gn(r,s,`color expected, "${s}" found`)]:[]},enum:Hp,filter:Ch,function:Sh,layer:F_,object:Ss,source:j_,light:$_,terrain:_m,fog:U_,string:bc,formatted:function(o){return bc(o).length===0?[]:bo(o)},resolvedImage:function(o){return bc(o).length===0?[]:bo(o)},projection:function(o){const r=o.value,s=o.styleSpec,u=s.projection,p=o.style;let g=[];const y=Dr(r);if(y==="object")for(const b in r)g=g.concat(qo({key:b,value:r[b],valueSpec:u[b],style:p,styleSpec:s}));else y!=="string"&&(g=g.concat([new gn("projection",r,`object or string expected, ${y} found`)]));return g}};function qo(o){const r=o.value,s=o.valueSpec,u=o.styleSpec;return s.expression&&bh(Qr(r))?Sh(o):s.expression&&nd(Hi(r))?bo(o):s.type&&V_[s.type]?V_[s.type](o):Ss(da({},o,{valueSpec:s.type?u[s.type]:s}))}function $b(o){const r=o.value,s=o.key,u=bc(o);return u.length||(r.indexOf("{fontstack}")===-1&&u.push(new gn(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&u.push(new gn(s,r,'"glyphs" url must include a "{range}" token'))),u}function W_(o,r=yt){return Qa(qo({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,objectElementValidators:{glyphs:$b,"*":()=>[]}}))}const Ub=o=>Qa(N_(o)),Vb=o=>Qa(gm(o));function Qa(o){return o.slice().sort((r,s)=>r.line&&s.line?r.line-s.line:0)}function H_(o,r){let s=!1;if(r&&r.length)for(const u of r)o.fire(new Na(new Error(u.message))),s=!0;return s}var Wb=Xs,ks=3;function Xs(o,r,s){var u=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var p=new Int32Array(this.arrayBuffer);o=p[0],this.d=(r=p[1])+2*(s=p[2]);for(var g=0;g<this.d*this.d;g++){var y=p[ks+g],b=p[ks+g+1];u.push(y===b?null:p.subarray(y,b))}var T=p[ks+u.length+1];this.keys=p.subarray(p[ks+u.length],T),this.bboxes=p.subarray(T),this.insert=this._insertReadonly}else{this.d=r+2*s;for(var k=0;k<this.d*this.d;k++)u.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=o,this.padding=s,this.scale=r/o,this.uid=0;var D=s/r*o;this.min=-D,this.max=o+D}Xs.prototype.insert=function(o,r,s,u,p){this._forEachCell(r,s,u,p,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(r),this.bboxes.push(s),this.bboxes.push(u),this.bboxes.push(p)},Xs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Xs.prototype._insertCell=function(o,r,s,u,p,g){this.cells[p].push(g)},Xs.prototype.query=function(o,r,s,u,p){var g=this.min,y=this.max;if(o<=g&&r<=g&&y<=s&&y<=u&&!p)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(o,r,s,u,this._queryCell,b,{},p),b},Xs.prototype._queryCell=function(o,r,s,u,p,g,y,b){var T=this.cells[p];if(T!==null)for(var k=this.keys,D=this.bboxes,L=0;L<T.length;L++){var F=T[L];if(y[F]===void 0){var U=4*F;(b?b(D[U+0],D[U+1],D[U+2],D[U+3]):o<=D[U+2]&&r<=D[U+3]&&s>=D[U+0]&&u>=D[U+1])?(y[F]=!0,g.push(k[F])):y[F]=!1}}},Xs.prototype._forEachCell=function(o,r,s,u,p,g,y,b){for(var T=this._convertToCellCoord(o),k=this._convertToCellCoord(r),D=this._convertToCellCoord(s),L=this._convertToCellCoord(u),F=T;F<=D;F++)for(var U=k;U<=L;U++){var q=this.d*U+F;if((!b||b(this._convertFromCellCoord(F),this._convertFromCellCoord(U),this._convertFromCellCoord(F+1),this._convertFromCellCoord(U+1)))&&p.call(this,o,r,s,u,q,g,y,b))return}},Xs.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},Xs.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},Xs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,r=ks+this.cells.length+1+1,s=0,u=0;u<this.cells.length;u++)s+=this.cells[u].length;var p=new Int32Array(r+s+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var g=r,y=0;y<o.length;y++){var b=o[y];p[ks+y]=g,p.set(b,g),g+=b.length}return p[ks+o.length]=g,p.set(this.keys,g),p[ks+o.length+1]=g+=this.keys.length,p.set(this.bboxes,g),g+=this.bboxes.length,p.buffer};var hu=Q(Wb);const Xp={};function wn(o,r,s={}){Object.defineProperty(o,"_classRegistryKey",{value:r,writeable:!1}),Xp[r]={klass:o,omit:s.omit||[]}}wn(Object,"Object"),hu.serialize=function(o,r){const s=o.toArrayBuffer();return r&&r.push(s),{buffer:s}},hu.deserialize=function(o){return new hu(o.buffer)},Object.defineProperty(hu,"name",{value:"Grid"}),wn(hu,"Grid"),wn(Ii,"Color"),wn(Error,"Error"),wn(nr,"AJAXError"),wn(pa,"ResolvedImage"),wn(Vp,"StylePropertyFunction"),wn(Up,"StyleExpression",{omit:["_evaluator"]}),wn(wh,"ZoomDependentExpression"),wn(cm,"ZoomConstantExpression"),wn(xs,"CompoundExpression",{omit:["_evaluate"]});for(const o in xh)Xp[xh[o]._classRegistryKey]||wn(xh[o],`Expression${o}`);function ym(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function vm(o){return v.ImageBitmap&&o instanceof v.ImageBitmap}function ad(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(ym(o)||vm(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return r&&r.push(s.buffer),s}if(o instanceof v.ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const u of o)s.push(ad(u,r));return s}if(typeof o=="object"){const s=o.constructor,u=s._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const p=s.serialize?s.serialize(o,r):{};if(!s.serialize){for(const g in o)o.hasOwnProperty(g)&&(Xp[u].omit.indexOf(g)>=0||(p[g]=ad(o[g],r)));o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(p.$name=u),p}throw new Error("can't serialize object of type "+typeof o)}function pu(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||ym(o)||vm(o)||ArrayBuffer.isView(o)||o instanceof v.ImageData)return o;if(Array.isArray(o))return o.map(pu);if(typeof o=="object"){const r=o.$name||"Object",{klass:s}=Xp[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(o);const u=Object.create(s.prototype);for(const p of Object.keys(o))p!=="$name"&&(u[p]=pu(o[p]));return u}throw new Error("can't deserialize object of type "+typeof o)}const pn={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function xm(o){for(const r of o)if(bm(r.charCodeAt(0)))return!0;return!1}function Hb(o){for(const r of o)if(!q_(r.charCodeAt(0)))return!1;return!0}function q_(o){return!(pn.Arabic(o)||pn["Arabic Supplement"](o)||pn["Arabic Extended-A"](o)||pn["Arabic Presentation Forms-A"](o)||pn["Arabic Presentation Forms-B"](o))}function bm(o){return!(o!==746&&o!==747&&(o<4352||!(pn["Bopomofo Extended"](o)||pn.Bopomofo(o)||pn["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||pn["CJK Compatibility Ideographs"](o)||pn["CJK Compatibility"](o)||pn["CJK Radicals Supplement"](o)||pn["CJK Strokes"](o)||!(!pn["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||pn["CJK Unified Ideographs Extension A"](o)||pn["CJK Unified Ideographs"](o)||pn["Enclosed CJK Letters and Months"](o)||pn["Hangul Compatibility Jamo"](o)||pn["Hangul Jamo Extended-A"](o)||pn["Hangul Jamo Extended-B"](o)||pn["Hangul Jamo"](o)||pn["Hangul Syllables"](o)||pn.Hiragana(o)||pn["Ideographic Description Characters"](o)||pn.Kanbun(o)||pn["Kangxi Radicals"](o)||pn["Katakana Phonetic Extensions"](o)||pn.Katakana(o)&&o!==12540||!(!pn["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!pn["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||pn["Unified Canadian Aboriginal Syllabics"](o)||pn["Unified Canadian Aboriginal Syllabics Extended"](o)||pn["Vertical Forms"](o)||pn["Yijing Hexagram Symbols"](o)||pn["Yi Syllables"](o)||pn["Yi Radicals"](o))))}function G_(o){return!(bm(o)||function(r){return!!(pn["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||pn["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||pn["Letterlike Symbols"](r)||pn["Number Forms"](r)||pn["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||pn["Control Pictures"](r)&&r!==9251||pn["Optical Character Recognition"](r)||pn["Enclosed Alphanumerics"](r)||pn["Geometric Shapes"](r)||pn["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||pn["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||pn["CJK Symbols and Punctuation"](r)||pn.Katakana(r)||pn["Private Use Area"](r)||pn["CJK Compatibility Forms"](r)||pn["Small Form Variants"](r)||pn["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function Z_(o){return o>=1424&&o<=2303||pn["Arabic Presentation Forms-A"](o)||pn["Arabic Presentation Forms-B"](o)}function qb(o,r){return!(!r&&Z_(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||pn.Khmer(o))}function Gb(o){for(const r of o)if(Z_(r.charCodeAt(0)))return!0;return!1}const wm="deferred",Em="loading",Tm="loaded";let sd=null,m="unavailable",l=null;const h=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(m="error"),sd&&sd(o)};function _(){x.fire(new za("pluginStateChange",{pluginStatus:m,pluginURL:l}))}const x=new Cl,w=function(){return m},C=function(){if(m!==wm||!l)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");m=Em,_(),l&&vi({url:l},o=>{o?h(o):(m=Tm,_())})},I={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>m===Tm||I.applyArabicShaping!=null,isLoading:()=>m===Em,setState(o){m=o.pluginStatus,l=o.pluginURL},isParsed:()=>I.applyArabicShaping!=null&&I.processBidirectionalText!=null&&I.processStyledBidirectionalText!=null,getPluginURL:()=>l};class O{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(r){return function(s,u){for(const p of s)if(!qb(p.charCodeAt(0),u))return!1;return!0}(r,I.isLoaded())}}class j{constructor(r,s){this.property=r,this.value=s,this.expression=function(u,p){if(bh(u))return new Vp(u,p);if(nd(u)){const g=Eh(u,p);if(g.result==="error")throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=u;return typeof u=="string"&&p.type==="color"&&(g=Ii.parse(u)),{kind:"constant",evaluate:()=>g}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,u){return this.property.possiblyEvaluate(this,r,s,u)}}class B{constructor(r){this.property=r,this.value=new j(r,void 0)}transitioned(r,s){return new se(this.property,this.value,s,Rt({},r.transition,this.transition),r.now)}untransitioned(){return new se(this.property,this.value,null,{},0)}}class Y{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return En(this._values[r].value.value)}setValue(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new B(this._values[r].property)),this._values[r].value=new j(this._values[r].property,s===null?void 0:En(s))}getTransition(r){return En(this._values[r].transition)}setTransition(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new B(this._values[r].property)),this._values[r].transition=En(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(r[s]=u);const p=this.getTransition(s);p!==void 0&&(r[`${s}-transition`]=p)}return r}transitioned(r,s){const u=new de(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].transitioned(r,s._values[p]);return u}untransitioned(){const r=new de(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class se{constructor(r,s,u,p,g){const y=p.delay||0,b=p.duration||0;g=g||0,this.property=r,this.value=s,this.begin=g+y,this.end=this.begin+b,r.specification.transition&&(p.delay||p.duration)&&(this.prior=u)}possiblyEvaluate(r,s,u){const p=r.now||0,g=this.value.possiblyEvaluate(r,s,u),y=this.prior;if(y){if(p>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(p<this.begin)return y.possiblyEvaluate(r,s,u);{const b=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(r,s,u),g,He(b))}}return g}}class de{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,u){const p=new ge(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(r,s,u);return p}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class fe{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return En(this._values[r].value)}setValue(r,s){this._values[r]=new j(this._values[r].property,s===null?void 0:En(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(r[s]=u)}return r}possiblyEvaluate(r,s,u){const p=new ge(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(r,s,u);return p}}class pe{constructor(r,s,u){this.property=r,this.value=s,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,u,p){return this.property.evaluate(this.value,this.parameters,r,s,u,p)}}class ge{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class J{constructor(r){this.specification=r}possiblyEvaluate(r,s){return r.expression.evaluate(s)}interpolate(r,s,u){const p=Vo[this.specification.type];return p?p(r,s,u):r}}class ue{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,u,p){return new pe(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},u,p)}:r.expression,s)}interpolate(r,s,u){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new pe(this,{kind:"constant",value:void 0},r.parameters);const p=Vo[this.specification.type];return p?new pe(this,{kind:"constant",value:p(r.value.value,s.value.value,u)},r.parameters):r}evaluate(r,s,u,p,g,y){return r.kind==="constant"?r.value:r.evaluate(s,u,p,g,y)}}class we{constructor(r){this.specification=r}possiblyEvaluate(r,s,u,p){return!!r.expression.evaluate(s,null,{},u,p)}interpolate(){return!1}}class Se{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new O(0,{});for(const u in r){const p=r[u];p.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new j(p,void 0),y=this.defaultTransitionablePropertyValues[u]=new B(p);this.defaultTransitioningPropertyValues[u]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate(s)}}}function $e(o,r){return 256*(o=Ne(Math.floor(o),0,255))+Ne(Math.floor(r),0,255)}wn(ue,"DataDrivenProperty"),wn(J,"DataConstantProperty"),wn(we,"ColorRampProperty");const Ve={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ue{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Qe{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Je(o,r=1){let s=0,u=0;return{members:o.map(p=>{const g=Ve[p.type].BYTES_PER_ELEMENT,y=s=dt(s,Math.max(r,g)),b=p.components||1;return u=Math.max(u,g),s+=g*b,{name:p.name,type:p.type,components:b,offset:y}}),size:dt(s,Math.max(u,r)),alignment:r}}function dt(o,r){return Math.ceil(o/r)*r}class Ut extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const p=2*r;return this.int16[p+0]=s,this.int16[p+1]=u,r}}Ut.prototype.bytesPerElement=4,wn(Ut,"StructArrayLayout2i4");class at extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u){const p=this.length;return this.resize(p+1),this.emplace(p,r,s,u)}emplace(r,s,u,p){const g=3*r;return this.int16[g+0]=s,this.int16[g+1]=u,this.int16[g+2]=p,r}}at.prototype.bytesPerElement=6,wn(at,"StructArrayLayout3i6");class kt extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u,p)}emplace(r,s,u,p,g){const y=4*r;return this.int16[y+0]=s,this.int16[y+1]=u,this.int16[y+2]=p,this.int16[y+3]=g,r}}kt.prototype.bytesPerElement=8,wn(kt,"StructArrayLayout4i8");class ft extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g,y,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,s,u,p,g,y,b)}emplace(r,s,u,p,g,y,b,T){const k=6*r,D=12*r,L=3*r;return this.int16[k+0]=s,this.int16[k+1]=u,this.uint8[D+4]=p,this.uint8[D+5]=g,this.uint8[D+6]=y,this.uint8[D+7]=b,this.float32[L+2]=T,r}}ft.prototype.bytesPerElement=12,wn(ft,"StructArrayLayout2i4ub1f12");class jt extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u,p)}emplace(r,s,u,p,g){const y=4*r;return this.float32[y+0]=s,this.float32[y+1]=u,this.float32[y+2]=p,this.float32[y+3]=g,r}}jt.prototype.bytesPerElement=16,wn(jt,"StructArrayLayout4f16");class ut extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,s,u,p,g)}emplace(r,s,u,p,g,y){const b=6*r,T=3*r;return this.uint16[b+0]=s,this.uint16[b+1]=u,this.uint16[b+2]=p,this.uint16[b+3]=g,this.float32[T+2]=y,r}}ut.prototype.bytesPerElement=12,wn(ut,"StructArrayLayout4ui1f12");class St extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u,p)}emplace(r,s,u,p,g){const y=4*r;return this.uint16[y+0]=s,this.uint16[y+1]=u,this.uint16[y+2]=p,this.uint16[y+3]=g,r}}St.prototype.bytesPerElement=8,wn(St,"StructArrayLayout4ui8");class Wt extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,u,p,g,y)}emplace(r,s,u,p,g,y,b){const T=6*r;return this.int16[T+0]=s,this.int16[T+1]=u,this.int16[T+2]=p,this.int16[T+3]=g,this.int16[T+4]=y,this.int16[T+5]=b,r}}Wt.prototype.bytesPerElement=12,wn(Wt,"StructArrayLayout6i12");class zt extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g,y,b,T,k,D,L,F){const U=this.length;return this.resize(U+1),this.emplace(U,r,s,u,p,g,y,b,T,k,D,L,F)}emplace(r,s,u,p,g,y,b,T,k,D,L,F,U){const q=12*r;return this.int16[q+0]=s,this.int16[q+1]=u,this.int16[q+2]=p,this.int16[q+3]=g,this.uint16[q+4]=y,this.uint16[q+5]=b,this.uint16[q+6]=T,this.uint16[q+7]=k,this.int16[q+8]=D,this.int16[q+9]=L,this.int16[q+10]=F,this.int16[q+11]=U,r}}zt.prototype.bytesPerElement=24,wn(zt,"StructArrayLayout4i4ui4i24");class Ht extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,r,s,u,p,g,y)}emplace(r,s,u,p,g,y,b){const T=10*r,k=5*r;return this.int16[T+0]=s,this.int16[T+1]=u,this.int16[T+2]=p,this.float32[k+2]=g,this.float32[k+3]=y,this.float32[k+4]=b,r}}Ht.prototype.bytesPerElement=20,wn(Ht,"StructArrayLayout3i3f20");class zn extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}zn.prototype.bytesPerElement=4,wn(zn,"StructArrayLayout1ul4");class Qn extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g,y,b,T,k,D,L,F,U){const q=this.length;return this.resize(q+1),this.emplace(q,r,s,u,p,g,y,b,T,k,D,L,F,U)}emplace(r,s,u,p,g,y,b,T,k,D,L,F,U,q){const ee=20*r,ce=10*r;return this.int16[ee+0]=s,this.int16[ee+1]=u,this.int16[ee+2]=p,this.int16[ee+3]=g,this.int16[ee+4]=y,this.float32[ce+3]=b,this.float32[ce+4]=T,this.float32[ce+5]=k,this.float32[ce+6]=D,this.int16[ee+14]=L,this.uint32[ce+8]=F,this.uint16[ee+18]=U,this.uint16[ee+19]=q,r}}Qn.prototype.bytesPerElement=40,wn(Qn,"StructArrayLayout5i4f1i1ul2ui40");class Sn extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g,y,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,s,u,p,g,y,b)}emplace(r,s,u,p,g,y,b,T){const k=8*r;return this.int16[k+0]=s,this.int16[k+1]=u,this.int16[k+2]=p,this.int16[k+4]=g,this.int16[k+5]=y,this.int16[k+6]=b,this.int16[k+7]=T,r}}Sn.prototype.bytesPerElement=16,wn(Sn,"StructArrayLayout3i2i2i16");class Gn extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,s,u,p,g)}emplace(r,s,u,p,g,y){const b=4*r,T=8*r;return this.float32[b+0]=s,this.float32[b+1]=u,this.float32[b+2]=p,this.int16[T+6]=g,this.int16[T+7]=y,r}}Gn.prototype.bytesPerElement=16,wn(Gn,"StructArrayLayout2f1f2i16");class Er extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u,p)}emplace(r,s,u,p,g){const y=12*r,b=3*r;return this.uint8[y+0]=s,this.uint8[y+1]=u,this.float32[b+1]=p,this.float32[b+2]=g,r}}Er.prototype.bytesPerElement=12,wn(Er,"StructArrayLayout2ub2f12");class yr extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u){const p=this.length;return this.resize(p+1),this.emplace(p,r,s,u)}emplace(r,s,u,p){const g=3*r;return this.float32[g+0]=s,this.float32[g+1]=u,this.float32[g+2]=p,r}}yr.prototype.bytesPerElement=12,wn(yr,"StructArrayLayout3f12");class Mn extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u){const p=this.length;return this.resize(p+1),this.emplace(p,r,s,u)}emplace(r,s,u,p){const g=3*r;return this.uint16[g+0]=s,this.uint16[g+1]=u,this.uint16[g+2]=p,r}}Mn.prototype.bytesPerElement=6,wn(Mn,"StructArrayLayout3ui6");class Fr extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g,y,b,T,k,D,L,F,U,q,ee,ce,ye,Ae,ve,Ie,Le){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,r,s,u,p,g,y,b,T,k,D,L,F,U,q,ee,ce,ye,Ae,ve,Ie,Le)}emplace(r,s,u,p,g,y,b,T,k,D,L,F,U,q,ee,ce,ye,Ae,ve,Ie,Le,Oe){const ht=30*r,st=15*r,bt=60*r;return this.int16[ht+0]=s,this.int16[ht+1]=u,this.int16[ht+2]=p,this.float32[st+2]=g,this.float32[st+3]=y,this.uint16[ht+8]=b,this.uint16[ht+9]=T,this.uint32[st+5]=k,this.uint32[st+6]=D,this.uint32[st+7]=L,this.uint16[ht+16]=F,this.uint16[ht+17]=U,this.uint16[ht+18]=q,this.float32[st+10]=ee,this.float32[st+11]=ce,this.uint8[bt+48]=ye,this.uint8[bt+49]=Ae,this.uint8[bt+50]=ve,this.uint32[st+13]=Ie,this.int16[ht+28]=Le,this.uint8[bt+58]=Oe,r}}Fr.prototype.bytesPerElement=60,wn(Fr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Vr extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g,y,b,T,k,D,L,F,U,q,ee,ce,ye,Ae,ve,Ie,Le,Oe,ht,st,bt,Vt,mt,It,At,Nt){const Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,r,s,u,p,g,y,b,T,k,D,L,F,U,q,ee,ce,ye,Ae,ve,Ie,Le,Oe,ht,st,bt,Vt,mt,It,At,Nt)}emplace(r,s,u,p,g,y,b,T,k,D,L,F,U,q,ee,ce,ye,Ae,ve,Ie,Le,Oe,ht,st,bt,Vt,mt,It,At,Nt,Gt){const xt=38*r,un=19*r;return this.int16[xt+0]=s,this.int16[xt+1]=u,this.int16[xt+2]=p,this.float32[un+2]=g,this.float32[un+3]=y,this.int16[xt+8]=b,this.int16[xt+9]=T,this.int16[xt+10]=k,this.int16[xt+11]=D,this.int16[xt+12]=L,this.int16[xt+13]=F,this.uint16[xt+14]=U,this.uint16[xt+15]=q,this.uint16[xt+16]=ee,this.uint16[xt+17]=ce,this.uint16[xt+18]=ye,this.uint16[xt+19]=Ae,this.uint16[xt+20]=ve,this.uint16[xt+21]=Ie,this.uint16[xt+22]=Le,this.uint16[xt+23]=Oe,this.uint16[xt+24]=ht,this.uint16[xt+25]=st,this.uint16[xt+26]=bt,this.uint16[xt+27]=Vt,this.uint16[xt+28]=mt,this.uint32[un+15]=It,this.float32[un+16]=At,this.float32[un+17]=Nt,this.float32[un+18]=Gt,r}}Vr.prototype.bytesPerElement=76,wn(Vr,"StructArrayLayout3i2f6i15ui1ul3f76");class Wr extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}Wr.prototype.bytesPerElement=4,wn(Wr,"StructArrayLayout1f4");class Hr extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,p,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,s,u,p,g)}emplace(r,s,u,p,g,y){const b=5*r;return this.float32[b+0]=s,this.float32[b+1]=u,this.float32[b+2]=p,this.float32[b+3]=g,this.float32[b+4]=y,r}}Hr.prototype.bytesPerElement=20,wn(Hr,"StructArrayLayout5f20");class Go extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u,p)}emplace(r,s,u,p,g){const y=6*r;return this.uint32[3*r+0]=s,this.uint16[y+2]=u,this.uint16[y+3]=p,this.uint16[y+4]=g,r}}Go.prototype.bytesPerElement=12,wn(Go,"StructArrayLayout1ul3ui12");class wo extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const p=2*r;return this.uint16[p+0]=s,this.uint16[p+1]=u,r}}wo.prototype.bytesPerElement=4,wn(wo,"StructArrayLayout2ui4");class es extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}es.prototype.bytesPerElement=2,wn(es,"StructArrayLayout1ui2");class Ks extends Qe{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const p=2*r;return this.float32[p+0]=s,this.float32[p+1]=u,r}}Ks.prototype.bytesPerElement=8,wn(Ks,"StructArrayLayout2f8");class gi extends Ue{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}gi.prototype.size=40;class qr extends Qn{get(r){return new gi(this,r)}}wn(qr,"CollisionBoxArray");class Or extends Ue{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}Or.prototype.size=60;class Gi extends Fr{get(r){return new Or(this,r)}}wn(Gi,"PlacedSymbolArray");class oa extends Ue{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(r){this._structArray.uint32[this._pos4+15]=r}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}oa.prototype.size=76;class hi extends Vr{get(r){return new oa(this,r)}}wn(hi,"SymbolInstanceArray");class _a extends Wr{getoffsetX(r){return this.float32[1*r+0]}}wn(_a,"GlyphOffsetArray");class Kp extends Ut{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}wn(Kp,"SymbolLineVertexArray");class fu extends Ue{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}fu.prototype.size=12;class Ih extends Go{get(r){return new fu(this,r)}}wn(Ih,"FeatureIndexArray");class Ll extends wo{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}wn(Ll,"FillExtrusionCentroidArray");const wc=Je([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),mu=Je([{name:"a_dash",components:4,type:"Uint16"}]);var Yp={exports:{}},Ah={exports:{}};Ah.exports=function(o,r){var s,u,p,g,y,b,T,k;for(u=o.length-(s=3&o.length),p=r,y=3432918353,b=461845907,k=0;k<u;)T=255&o.charCodeAt(k)|(255&o.charCodeAt(++k))<<8|(255&o.charCodeAt(++k))<<16|(255&o.charCodeAt(++k))<<24,++k,p=27492+(65535&(g=5*(65535&(p=(p^=T=(65535&(T=(T=(65535&T)*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(T=0,s){case 3:T^=(255&o.charCodeAt(k+2))<<16;case 2:T^=(255&o.charCodeAt(k+1))<<8;case 1:p^=T=(65535&(T=(T=(65535&(T^=255&o.charCodeAt(k)))*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Sm=Ah.exports,YT={exports:{}};YT.exports=function(o,r){for(var s,u=o.length,p=r^u,g=0;u>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(g)|(255&o.charCodeAt(++g))<<8|(255&o.charCodeAt(++g))<<16|(255&o.charCodeAt(++g))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),u-=4,++g;switch(u){case 3:p^=(255&o.charCodeAt(g+2))<<16;case 2:p^=(255&o.charCodeAt(g+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(g)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var JT=Sm,FN=YT.exports;Yp.exports=JT,Yp.exports.murmur3=JT,Yp.exports.murmur2=FN;var Zb=Q(Yp.exports);class X_{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,u,p){this.ids.push(QT(r)),this.positions.push(s,u,p)}getPositions(r){const s=QT(r);let u=0,p=this.ids.length-1;for(;u<p;){const y=u+p>>1;this.ids[y]>=s?p=y:u=y+1}const g=[];for(;this.ids[u]===s;)g.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return g}static serialize(r,s){const u=new Float64Array(r.ids),p=new Uint32Array(r.positions);return Xb(u,p,0,u.length-1),s&&s.push(u.buffer,p.buffer),{ids:u,positions:p}}static deserialize(r){const s=new X_;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function QT(o){const r=+o;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:Zb(String(o))}function Xb(o,r,s,u){for(;s<u;){const p=o[s+u>>1];let g=s-1,y=u+1;for(;;){do g++;while(o[g]<p);do y--;while(o[y]>p);if(g>=y)break;K_(o,g,y),K_(r,3*g,3*y),K_(r,3*g+1,3*y+1),K_(r,3*g+2,3*y+2)}y-s<u-y?(Xb(o,r,s,y),s=y+1):(Xb(o,r,y+1,u),u=y)}}function K_(o,r,s){const u=o[r];o[r]=o[s],o[s]=u}wn(X_,"FeaturePositionMap");class gu{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,s),this.initialized=!0),!!this.location}}class Y_ extends gu{constructor(r){super(r),this.current=0}set(r,s,u){this.fetchUniformLocation(r,s)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class eS extends gu{constructor(r){super(r),this.current=[0,0,0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class tS extends gu{constructor(r){super(r),this.current=Ii.transparent}set(r,s,u){this.fetchUniformLocation(r,s)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const BN=new Float32Array(16),jN=new Float32Array(9),$N=new Float32Array(4);function Kb(o){return[$e(255*o.r,255*o.g),$e(255*o.b,255*o.a)]}class km{constructor(r,s,u){this.value=r,this.uniformNames=s.map(p=>`u_${p}`),this.type=u}setUniform(r,s,u,p,g){s.set(r,g,p.constantOr(this.value))}getBinding(r,s){return this.type==="color"?new tS(r):new Y_(r)}}class Jp{constructor(r,s){this.uniformNames=s.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,s,u,p,g){const y=g==="u_pattern"||g==="u_dash"?this.pattern:g==="u_pixel_ratio"?this.pixelRatio:null;y&&s.set(r,g,y)}getBinding(r,s){return s==="u_pattern"||s==="u_dash"?new eS(r):new Y_(r)}}class _u{constructor(r,s,u,p){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=s.map(g=>({name:`a_${g}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(r,s,u,p,g,y){const b=this.paintVertexArray.length,T=this.expression.evaluate(new O(0),s,{},g,p,y);this.paintVertexArray.resize(r),this._setPaintValue(b,r,T)}updatePaintArray(r,s,u,p,g){const y=this.expression.evaluate({zoom:0},u,p,void 0,g);this._setPaintValue(r,s,y)}_setPaintValue(r,s,u){if(this.type==="color"){const p=Kb(u);for(let g=r;g<s;g++)this.paintVertexArray.emplace(g,p[0],p[1])}else{for(let p=r;p<s;p++)this.paintVertexArray.emplace(p,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zl{constructor(r,s,u,p,g,y){this.expression=r,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=u,this.useIntegerZoom=p,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(r,s,u,p,g,y){const b=this.expression.evaluate(new O(this.zoom),s,{},g,p,y),T=this.expression.evaluate(new O(this.zoom+1),s,{},g,p,y),k=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(k,r,b,T)}updatePaintArray(r,s,u,p,g){const y=this.expression.evaluate({zoom:this.zoom},u,p,void 0,g),b=this.expression.evaluate({zoom:this.zoom+1},u,p,void 0,g);this._setPaintValue(r,s,y,b)}_setPaintValue(r,s,u,p){if(this.type==="color"){const g=Kb(u),y=Kb(p);for(let b=r;b<s;b++)this.paintVertexArray.emplace(b,g[0],g[1],y[0],y[1])}else{for(let g=r;g<s;g++)this.paintVertexArray.emplace(g,u,p);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s,u,p,g){const y=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=Ne(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);s.set(r,g,b)}getBinding(r,s){return new Y_(r)}}class ld{constructor(r,s,u,p,g){this.expression=r,this.layerId=g,this.paintVertexAttributes=(u==="array"?mu:wc).members;for(let y=0;y<s.length;++y);this.paintVertexArray=new p}populatePaintArray(r,s,u){const p=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(p,r,s.patterns&&s.patterns[this.layerId],u)}updatePaintArray(r,s,u,p,g,y){this._setPaintValues(r,s,u.patterns&&u.patterns[this.layerId],y)}_setPaintValues(r,s,u,p){if(!p||!u)return;const g=p[u];if(!g)return;const{tl:y,br:b,pixelRatio:T}=g;for(let k=r;k<s;k++)this.paintVertexArray.emplace(k,y[0],y[1],b[0],b[1],T)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class cd{constructor(r,s,u=()=>!0){this.binders={},this._buffers=[];const p=[];for(const g in r.paint._values){if(!u(g))continue;const y=r.paint.get(g);if(!(y instanceof pe&&ed(y.property.specification)))continue;const b=VN(g,r.type),T=y.value,k=y.property.specification.type,D=!!y.property.useIntegerZoom,L=g==="line-dasharray"||g.endsWith("pattern"),F=g==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant";if(T.kind!=="constant"||F)if(T.kind==="source"||F||L){const U=nS(g,k,"source");this.binders[g]=L?new ld(T,b,k,U,r.id):new _u(T,b,k,U),p.push(`/a_${g}`)}else{const U=nS(g,k,"composite");this.binders[g]=new zl(T,b,k,D,s,U),p.push(`/z_${g}`)}else this.binders[g]=L?new Jp(T.value,b):new km(T.value,b,k),p.push(`/u_${g}`)}this.cacheKey=p.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof _u||s instanceof zl?s.maxValue:0}populatePaintArrays(r,s,u,p,g,y){for(const b in this.binders){const T=this.binders[b];(T instanceof _u||T instanceof zl||T instanceof ld)&&T.populatePaintArray(r,s,u,p,g,y)}}setConstantPatternPositions(r){for(const s in this.binders){const u=this.binders[s];u instanceof Jp&&u.setConstantPatternPositions(r)}}updatePaintArrays(r,s,u,p,g,y){let b=!1;for(const T in r){const k=s.getPositions(T);for(const D of k){const L=u.feature(D.index);for(const F in this.binders){const U=this.binders[F];if((U instanceof _u||U instanceof zl||U instanceof ld)&&U.expression.isStateDependent===!0){const q=p.paint.get(F);U.expression=q.value,U.updatePaintArray(D.start,D.end,L,r[T],g,y),b=!0}}}}return b}defines(){const r=[];for(const s in this.binders){const u=this.binders[s];(u instanceof km||u instanceof Jp)&&r.push(...u.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof _u||u instanceof zl||u instanceof ld)for(let p=0;p<u.paintVertexAttributes.length;p++)r.push(u.paintVertexAttributes[p].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof km||u instanceof Jp||u instanceof zl)for(const p of u.uniformNames)r.push(p)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const s=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof km||p instanceof Jp||p instanceof zl)for(const g of p.uniformNames)s.push({name:g,property:u,binding:p.getBinding(r,g)})}return s}setUniforms(r,s,u,p,g){for(const{name:y,property:b,binding:T}of u)this.binders[b].setUniform(r,T,g,p.get(b),y)}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const s=this.binders[r];(s instanceof _u||s instanceof zl||s instanceof ld)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(r){for(const s in this.binders){const u=this.binders[s];(u instanceof _u||u instanceof zl||u instanceof ld)&&u.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof _u||s instanceof zl||s instanceof ld)&&s.destroy()}}}class Mh{constructor(r,s,u=()=>!0){this.programConfigurations={};for(const p of r)this.programConfigurations[p.id]=new cd(p,s,u);this.needsUpload=!1,this._featureMap=new X_,this._bufferOffset=0}populatePaintArrays(r,s,u,p,g,y,b){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(r,s,p,g,y,b);s.id!==void 0&&this._featureMap.add(s.id,u,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,u,p,g){for(const y of u)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(r,this._featureMap,s,y,p,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const UN={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function VN(o,r){return UN[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}const WN={"line-pattern":{source:ut,composite:ut},"fill-pattern":{source:ut,composite:ut},"fill-extrusion-pattern":{source:ut,composite:ut},"line-dasharray":{source:St,composite:St}},HN={color:{source:Ks,composite:jt},number:{source:Wr,composite:Ks}};function nS(o,r,s){const u=WN[o];return u&&u[s]||HN[r][s]}wn(km,"ConstantBinder"),wn(Jp,"PatternConstantBinder"),wn(_u,"SourceExpressionBinder"),wn(ld,"PatternCompositeBinder"),wn(zl,"CompositeExpressionBinder"),wn(cd,"ProgramConfiguration",{omit:["_buffers"]}),wn(Mh,"ProgramConfigurationSet");const rS="-transition";class Nl extends Cl{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&r.type!=="sky"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new fe(s.layout)),s.paint)){this._transitionablePaint=new Y(s.paint);for(const u in r.paint)this.setPaintProperty(u,r.paint[u],{validate:!1});for(const u in r.layout)this.setLayoutProperty(u,r.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ge(s.paint)}}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,u={}){s!=null&&this._validate(Vb,`layers.${this.id}.layout.${r}`,r,s,u)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return vn(r,rS)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,u={}){if(s!=null&&this._validate(Ub,`layers.${this.id}.paint.${r}`,r,s,u))return!1;if(vn(r,rS))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[r],g=p.value.isDataDriven(),y=p.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const b=this._transitionablePaint._values[r].value,T=b.isDataDriven(),k=vn(r,"pattern")||r==="line-dasharray";return T||g||k||this._handleOverridablePaintPropertyUpdate(r,y,b)}}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getProgramConfiguration(r){return null}_handleOverridablePaintPropertyUpdate(r,s,u){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),nn(r,(s,u)=>!(s===void 0||u==="layout"&&!Object.keys(s).length||u==="paint"&&!Object.keys(s).length))}_validate(r,s,u,p,g={}){return(!g||g.validate!==!1)&&H_(this,r.call(W_,{key:s,layerType:this.type,objectKey:u,value:p,styleSpec:yt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof pe&&ed(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=qp(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const qN=Je([{name:"a_pos",components:2,type:"Int16"}],4),GN=Je([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Zi{constructor(r=[]){this.segments=r}prepareSegment(r,s,u,p){let g=this.segments[this.segments.length-1];return r>Zi.MAX_VERTEX_ARRAY_LENGTH&&Ct(`Max vertices per segment is ${Zi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!g||g.vertexLength+r>Zi.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==p)&&(g={vertexOffset:s.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},p!==void 0&&(g.sortKey=p),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,u,p){return new Zi([{vertexOffset:r,primitiveOffset:s,vertexLength:u,primitiveLength:p,vaos:{},sortKey:0}])}}Zi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wn(Zi,"SegmentVector");var Hn=8192;class ud{constructor(r,s){r&&(s?this.setSouthWest(r).setNorthEast(s):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof Gr?new Gr(r.lng,r.lat):Gr.convert(r),this}setSouthWest(r){return this._sw=r instanceof Gr?new Gr(r.lng,r.lat):Gr.convert(r),this}extend(r){const s=this._sw,u=this._ne;let p,g;if(r instanceof Gr)p=r,g=r;else{if(!(r instanceof ud))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ud.convert(r)):this.extend(Gr.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(Gr.convert(r)):this;if(p=r._sw,g=r._ne,!p||!g)return this}return s||u?(s.lng=Math.min(p.lng,s.lng),s.lat=Math.min(p.lat,s.lat),u.lng=Math.max(g.lng,u.lng),u.lat=Math.max(g.lat,u.lat)):(this._sw=new Gr(p.lng,p.lat),this._ne=new Gr(g.lng,g.lat)),this}getCenter(){return new Gr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Gr(this.getWest(),this.getNorth())}getSouthEast(){return new Gr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:s,lat:u}=Gr.convert(r);let p=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&p}static convert(r){return!r||r instanceof ud?r:new ud(r)}}var J_=1e-6,ts=typeof Float32Array<"u"?Float32Array:Array;function iS(){var o=new ts(9);return ts!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function oS(o,r,s){var u=r[0],p=r[1],g=r[2],y=r[3],b=r[4],T=r[5],k=r[6],D=r[7],L=r[8],F=s[0],U=s[1],q=s[2],ee=s[3],ce=s[4],ye=s[5],Ae=s[6],ve=s[7],Ie=s[8];return o[0]=F*u+U*y+q*k,o[1]=F*p+U*b+q*D,o[2]=F*g+U*T+q*L,o[3]=ee*u+ce*y+ye*k,o[4]=ee*p+ce*b+ye*D,o[5]=ee*g+ce*T+ye*L,o[6]=Ae*u+ve*y+Ie*k,o[7]=Ae*p+ve*b+Ie*D,o[8]=Ae*g+ve*T+Ie*L,o}function Fl(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Yb(o,r){var s=r[0],u=r[1],p=r[2],g=r[3],y=r[4],b=r[5],T=r[6],k=r[7],D=r[8],L=r[9],F=r[10],U=r[11],q=r[12],ee=r[13],ce=r[14],ye=r[15],Ae=s*b-u*y,ve=s*T-p*y,Ie=s*k-g*y,Le=u*T-p*b,Oe=u*k-g*b,ht=p*k-g*T,st=D*ee-L*q,bt=D*ce-F*q,Vt=D*ye-U*q,mt=L*ce-F*ee,It=L*ye-U*ee,At=F*ye-U*ce,Nt=Ae*At-ve*It+Ie*mt+Le*Vt-Oe*bt+ht*st;return Nt?(o[0]=(b*At-T*It+k*mt)*(Nt=1/Nt),o[1]=(p*It-u*At-g*mt)*Nt,o[2]=(ee*ht-ce*Oe+ye*Le)*Nt,o[3]=(F*Oe-L*ht-U*Le)*Nt,o[4]=(T*Vt-y*At-k*bt)*Nt,o[5]=(s*At-p*Vt+g*bt)*Nt,o[6]=(ce*Ie-q*ht-ye*ve)*Nt,o[7]=(D*ht-F*Ie+U*ve)*Nt,o[8]=(y*It-b*Vt+k*st)*Nt,o[9]=(u*Vt-s*It-g*st)*Nt,o[10]=(q*Oe-ee*Ie+ye*Ae)*Nt,o[11]=(L*Ie-D*Oe-U*Ae)*Nt,o[12]=(b*bt-y*mt-T*st)*Nt,o[13]=(s*mt-u*bt+p*st)*Nt,o[14]=(ee*ve-q*Le-ce*Ae)*Nt,o[15]=(D*Le-L*ve+F*Ae)*Nt,o):null}function Dh(o,r,s){var u=r[0],p=r[1],g=r[2],y=r[3],b=r[4],T=r[5],k=r[6],D=r[7],L=r[8],F=r[9],U=r[10],q=r[11],ee=r[12],ce=r[13],ye=r[14],Ae=r[15],ve=s[0],Ie=s[1],Le=s[2],Oe=s[3];return o[0]=ve*u+Ie*b+Le*L+Oe*ee,o[1]=ve*p+Ie*T+Le*F+Oe*ce,o[2]=ve*g+Ie*k+Le*U+Oe*ye,o[3]=ve*y+Ie*D+Le*q+Oe*Ae,o[4]=(ve=s[4])*u+(Ie=s[5])*b+(Le=s[6])*L+(Oe=s[7])*ee,o[5]=ve*p+Ie*T+Le*F+Oe*ce,o[6]=ve*g+Ie*k+Le*U+Oe*ye,o[7]=ve*y+Ie*D+Le*q+Oe*Ae,o[8]=(ve=s[8])*u+(Ie=s[9])*b+(Le=s[10])*L+(Oe=s[11])*ee,o[9]=ve*p+Ie*T+Le*F+Oe*ce,o[10]=ve*g+Ie*k+Le*U+Oe*ye,o[11]=ve*y+Ie*D+Le*q+Oe*Ae,o[12]=(ve=s[12])*u+(Ie=s[13])*b+(Le=s[14])*L+(Oe=s[15])*ee,o[13]=ve*p+Ie*T+Le*F+Oe*ce,o[14]=ve*g+Ie*k+Le*U+Oe*ye,o[15]=ve*y+Ie*D+Le*q+Oe*Ae,o}function Cm(o,r,s){var u,p,g,y,b,T,k,D,L,F,U,q,ee=s[0],ce=s[1],ye=s[2];return r===o?(o[12]=r[0]*ee+r[4]*ce+r[8]*ye+r[12],o[13]=r[1]*ee+r[5]*ce+r[9]*ye+r[13],o[14]=r[2]*ee+r[6]*ce+r[10]*ye+r[14],o[15]=r[3]*ee+r[7]*ce+r[11]*ye+r[15]):(p=r[1],g=r[2],y=r[3],b=r[4],T=r[5],k=r[6],D=r[7],L=r[8],F=r[9],U=r[10],q=r[11],o[0]=u=r[0],o[1]=p,o[2]=g,o[3]=y,o[4]=b,o[5]=T,o[6]=k,o[7]=D,o[8]=L,o[9]=F,o[10]=U,o[11]=q,o[12]=u*ee+b*ce+L*ye+r[12],o[13]=p*ee+T*ce+F*ye+r[13],o[14]=g*ee+k*ce+U*ye+r[14],o[15]=y*ee+D*ce+q*ye+r[15]),o}function Rh(o,r,s){var u=s[0],p=s[1],g=s[2];return o[0]=r[0]*u,o[1]=r[1]*u,o[2]=r[2]*u,o[3]=r[3]*u,o[4]=r[4]*p,o[5]=r[5]*p,o[6]=r[6]*p,o[7]=r[7]*p,o[8]=r[8]*g,o[9]=r[9]*g,o[10]=r[10]*g,o[11]=r[11]*g,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o}function Jb(o,r,s){var u=Math.sin(s),p=Math.cos(s),g=r[4],y=r[5],b=r[6],T=r[7],k=r[8],D=r[9],L=r[10],F=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=g*p+k*u,o[5]=y*p+D*u,o[6]=b*p+L*u,o[7]=T*p+F*u,o[8]=k*p-g*u,o[9]=D*p-y*u,o[10]=L*p-b*u,o[11]=F*p-T*u,o}function Q_(o,r,s){var u=Math.sin(s),p=Math.cos(s),g=r[0],y=r[1],b=r[2],T=r[3],k=r[8],D=r[9],L=r[10],F=r[11];return r!==o&&(o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=g*p-k*u,o[1]=y*p-D*u,o[2]=b*p-L*u,o[3]=T*p-F*u,o[8]=g*u+k*p,o[9]=y*u+D*p,o[10]=b*u+L*p,o[11]=T*u+F*p,o}function aS(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function sS(o,r,s){var u,p,g,y=s[0],b=s[1],T=s[2],k=Math.hypot(y,b,T);return k<J_?null:(y*=k=1/k,b*=k,T*=k,u=Math.sin(r),p=Math.cos(r),o[0]=y*y*(g=1-p)+p,o[1]=b*y*g+T*u,o[2]=T*y*g-b*u,o[3]=0,o[4]=y*b*g-T*u,o[5]=b*b*g+p,o[6]=T*b*g+y*u,o[7]=0,o[8]=y*T*g+b*u,o[9]=b*T*g-y*u,o[10]=T*T*g+p,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var ZN=Dh;function Qb(){var o=new ts(3);return ts!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function lS(o){var r=new ts(3);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r}function Pm(o){return Math.hypot(o[0],o[1],o[2])}function Qp(o,r,s){var u=new ts(3);return u[0]=o,u[1]=r,u[2]=s,u}function yu(o,r,s){return o[0]=r[0]+s[0],o[1]=r[1]+s[1],o[2]=r[2]+s[2],o}function ew(o,r,s){return o[0]=r[0]-s[0],o[1]=r[1]-s[1],o[2]=r[2]-s[2],o}function cS(o,r,s){return o[0]=r[0]*s[0],o[1]=r[1]*s[1],o[2]=r[2]*s[2],o}function Im(o,r,s){return o[0]=Math.min(r[0],s[0]),o[1]=Math.min(r[1],s[1]),o[2]=Math.min(r[2],s[2]),o}function Am(o,r,s){return o[0]=Math.max(r[0],s[0]),o[1]=Math.max(r[1],s[1]),o[2]=Math.max(r[2],s[2]),o}function Cs(o,r,s){return o[0]=r[0]*s,o[1]=r[1]*s,o[2]=r[2]*s,o}function Mm(o,r,s,u){return o[0]=r[0]+s[0]*u,o[1]=r[1]+s[1]*u,o[2]=r[2]+s[2]*u,o}function ya(o,r){var s=r[0],u=r[1],p=r[2],g=s*s+u*u+p*p;return g>0&&(g=1/Math.sqrt(g)),o[0]=r[0]*g,o[1]=r[1]*g,o[2]=r[2]*g,o}function Ys(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]}function tw(o,r,s){var u=r[0],p=r[1],g=r[2],y=s[0],b=s[1],T=s[2];return o[0]=p*T-g*b,o[1]=g*y-u*T,o[2]=u*b-p*y,o}function Ui(o,r,s){var u=r[0],p=r[1],g=r[2],y=s[3]*u+s[7]*p+s[11]*g+s[15];return o[0]=(s[0]*u+s[4]*p+s[8]*g+s[12])/(y=y||1),o[1]=(s[1]*u+s[5]*p+s[9]*g+s[13])/y,o[2]=(s[2]*u+s[6]*p+s[10]*g+s[14])/y,o}function uS(o,r,s){var u=s[0],p=s[1],g=s[2],y=r[0],b=r[1],T=r[2],k=p*T-g*b,D=g*y-u*T,L=u*b-p*y,F=p*L-g*D,U=g*k-u*L,q=u*D-p*k,ee=2*s[3];return D*=ee,L*=ee,U*=2,q*=2,o[0]=y+(k*=ee)+(F*=2),o[1]=b+D+U,o[2]=T+L+q,o}var Dm,Bl=ew,XN=cS,KN=Pm;function dS(o,r,s){return o[0]=r[0]*s,o[1]=r[1]*s,o[2]=r[2]*s,o[3]=r[3]*s,o}function hS(o,r){var s=r[0],u=r[1],p=r[2],g=r[3],y=s*s+u*u+p*p+g*g;return y>0&&(y=1/Math.sqrt(y)),o[0]=s*y,o[1]=u*y,o[2]=p*y,o[3]=g*y,o}function Oh(o,r,s){var u=r[0],p=r[1],g=r[2],y=r[3];return o[0]=s[0]*u+s[4]*p+s[8]*g+s[12]*y,o[1]=s[1]*u+s[5]*p+s[9]*g+s[13]*y,o[2]=s[2]*u+s[6]*p+s[10]*g+s[14]*y,o[3]=s[3]*u+s[7]*p+s[11]*g+s[15]*y,o}function pS(){var o=new ts(4);return ts!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function fS(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o}function mS(o,r,s){s*=.5;var u=r[0],p=r[1],g=r[2],y=r[3],b=Math.sin(s),T=Math.cos(s);return o[0]=u*T+y*b,o[1]=p*T+g*b,o[2]=g*T-p*b,o[3]=y*T-u*b,o}function gS(o,r,s){s*=.5;var u=r[0],p=r[1],g=r[2],y=r[3],b=Math.sin(s),T=Math.cos(s);return o[0]=u*T-g*b,o[1]=p*T+y*b,o[2]=g*T+u*b,o[3]=y*T-p*b,o}Qb(),Dm=new ts(4),ts!=Float32Array&&(Dm[0]=0,Dm[1]=0,Dm[2]=0,Dm[3]=0);var YN=hS;Qb(),Qp(1,0,0),Qp(0,1,0),pS(),pS(),iS();const JN=Je([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:_S}=JN,yS=Je([{name:"a_pos_3",components:3,type:"Int16"}]);var Rm=Je([{name:"a_pos",type:"Int16",components:2}]);class nw{constructor(r,s){this.pos=r,this.dir=s}intersectsPlane(r,s,u){const p=Ys(s,this.dir);if(Math.abs(p)<1e-6)return!1;const g=((r[0]-this.pos[0])*s[0]+(r[1]-this.pos[1])*s[1]+(r[2]-this.pos[2])*s[2])/p;return u[0]=this.pos[0]+this.dir[0]*g,u[1]=this.pos[1]+this.dir[1]*g,u[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(r,s,u){if(function(U,q){var ee=U[0],ce=U[1],ye=U[2],Ae=q[0],ve=q[1],Ie=q[2];return Math.abs(ee-Ae)<=J_*Math.max(1,Math.abs(ee),Math.abs(Ae))&&Math.abs(ce-ve)<=J_*Math.max(1,Math.abs(ce),Math.abs(ve))&&Math.abs(ye-Ie)<=J_*Math.max(1,Math.abs(ye),Math.abs(Ie))}(this.pos,r)||s===0)return u[0]=u[1]=u[2]=0,!1;const[p,g,y]=this.dir,b=this.pos[0]-r[0],T=this.pos[1]-r[1],k=this.pos[2]-r[2],D=p*p+g*g+y*y,L=2*(b*p+T*g+k*y),F=L*L-4*D*(b*b+T*T+k*k-s*s);if(F<0){const U=Math.max(-L/2,0),q=b+p*U,ee=T+g*U,ce=k+y*U,ye=Math.hypot(q,ee,ce);return u[0]=q*s/ye,u[1]=ee*s/ye,u[2]=ce*s/ye,!1}{const U=(-L-Math.sqrt(F))/(2*D);if(U<0){const q=Math.hypot(b,T,k);return u[0]=b*s/q,u[1]=T*s/q,u[2]=k*s/q,!1}return u[0]=b+p*U,u[1]=T+g*U,u[2]=k+y*U,!0}}}class rw{constructor(r,s,u,p,g){this.TL=r,this.TR=s,this.BR=u,this.BL=p,this.horizon=g}static fromInvProjectionMatrix(r,s,u){const p=[-1,1,1],g=[1,1,1],y=[1,-1,1],b=[-1,-1,1],T=Ui(p,p,r),k=Ui(g,g,r),D=Ui(y,y,r),L=Ui(b,b,r);return new rw(T,k,D,L,s/u)}}class iw{constructor(r,s){this.points=r,this.planes=s}static fromInvProjectionMatrix(r,s,u,p){const g=Math.pow(2,u),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const k=Oh([],T,r),D=1/k[3]/s*g;return function(L,F,U){return L[0]=F[0]*U[0],L[1]=F[1]*U[1],L[2]=F[2]*U[2],L[3]=F[3]*U[3],L}(k,k,[D,D,p?1/k[3]:D,D])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const k=ya([],tw([],Bl([],y[T[0]],y[T[1]]),Bl([],y[T[2]],y[T[1]]))),D=-Ys(k,y[T[1]]);return k.concat(D)});return new iw(y,b)}}class va{static fromPoints(r){const s=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const p of r)Im(s,s,p),Am(u,u,p);return new va(s,u)}static applyTransform(r,s){const u=r.getCorners();for(let p=0;p<u.length;++p)Ui(u[p],u[p],s);return va.fromPoints(u)}constructor(r,s){this.min=r,this.max=s,this.center=Cs([],yu([],this.min,this.max),.5)}quadrant(r){const s=[r%2==0,r<2],u=lS(this.min),p=lS(this.max);for(let g=0;g<s.length;g++)u[g]=s[g]?this.min[g]:this.center[g],p[g]=s[g]?this.center[g]:this.max[g];return p[2]=this.max[2],new va(u,p)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,s=this.max;return[[r[0],r[1],r[2]],[s[0],r[1],r[2]],[s[0],s[1],r[2]],[r[0],s[1],r[2]],[r[0],r[1],s[2]],[s[0],r[1],s[2]],[s[0],s[1],s[2]],[r[0],s[1],s[2]]]}intersects(r){const s=this.getCorners();let u=!0;for(let p=0;p<r.planes.length;p++){const g=r.planes[p];let y=0;for(let b=0;b<s.length;b++)y+=Ys(g,s[b])+g[3]>=0;if(y===0)return 0;y!==s.length&&(u=!1)}if(u)return 2;for(let p=0;p<3;p++){let g=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(let b=0;b<r.points.length;b++){const T=r.points[b][p]-this.min[p];g=Math.min(g,T),y=Math.max(y,T)}if(y<0||g>this.max[p]-this.min[p])return 0}return 1}}const ow=5,vS=6,Ec=Hn/Math.PI/2,QN=16383,Lh=64,Om=[Lh,32,16],Js=-Ec,Qs=Ec,eF=[new va([Js,Js,Js],[Qs,Qs,Qs]),new va([Js,Js,Js],[0,0,Qs]),new va([0,Js,Js],[Qs,0,Qs]),new va([Js,0,Js],[0,Qs,Qs]),new va([0,0,Js],[Qs,Qs,Qs])];function ey(o){return o*Ec/Nm}function xS(o,r,s,u=!0){const p=Cs([],o._camera.position,o.worldSize),g=[r,s,1,1];Oh(g,g,o.pixelMatrixInverse),dS(g,g,1/g[3]);const y=ya([],Bl([],g,p)),b=o.globeMatrix,T=[b[12],b[13],b[14]],k=Bl([],T,p),D=Pm(k),L=ya([],k),F=o.worldSize/(2*Math.PI),U=Ys(L,y),q=Math.asin(F/D);if(q<Math.acos(U)){if(!u)return null;const Vt=[],mt=[];Cs(Vt,y,D/U),ya(mt,Bl(mt,Vt,k)),ya(y,yu(y,k,Cs(y,mt,Math.tan(q)*D)))}const ee=[];new nw(p,y).closestPointOnSphere(T,F,ee);const ce=ya([],qn(b,0)),ye=ya([],qn(b,1)),Ae=ya([],qn(b,2)),ve=Ys(ce,ee),Ie=Ys(ye,ee),Le=Ys(Ae,ee),Oe=Ze(Math.asin(-Ie/F));let ht=Ze(Math.atan2(ve,Le));ht=o.center.lng+function(Vt,mt){const It=(mt-Vt+180)%360-180;return It<-180?It+360:It}(o.center.lng,ht);const st=Sc(ht),bt=Ne(kc(Oe),0,1);return new rf(st,bt)}class tF{constructor(r,s,u){this.a=Bl([],r,u),this.b=Bl([],s,u),this.center=u;const p=ya([],this.a),g=ya([],this.b);this.angle=Math.acos(Ys(p,g))}}function aw(o,r){if(o.angle===0)return null;let s;return s=o.a[r]===0?1/o.angle*.5*Math.PI:1/o.angle*Math.atan(o.b[r]/o.a[r]/Math.sin(o.angle)-1/Math.tan(o.angle)),s<0||s>1?null:function(u,p,g,y){const b=Math.sin(g);return u*(Math.sin((1-y)*g)/b)+p*(Math.sin(y*g)/b)}(o.a[r],o.b[r],o.angle,Ne(s,0,1))+o.center[r]}function Tc(o){if(o.z<=1)return eF[o.z+2*o.y+o.x];const r=sw(ty(o));return va.fromPoints(r)}function zh(o,r,s){return Cs(o,o,1-s),Mm(o,o,r,s)}function bS(o,r){const s=nf(r.zoom);if(s===0)return Tc(o);const u=ty(o),p=sw(u),g=Sc(u.getWest())*r.worldSize,y=Sc(u.getEast())*r.worldSize,b=kc(u.getNorth())*r.worldSize,T=kc(u.getSouth())*r.worldSize,k=[g,b,0],D=[y,b,0],L=[g,T,0],F=[y,T,0],U=Yb([],r.globeMatrix);return Ui(k,k,U),Ui(D,D,U),Ui(L,L,U),Ui(F,F,U),p[0]=zh(p[0],L,s),p[1]=zh(p[1],F,s),p[2]=zh(p[2],D,s),p[3]=zh(p[3],k,s),va.fromPoints(p)}function wS(o,r,s){for(const u of o)Ui(u,u,r),Cs(u,u,s)}function nF(o,r,s){const u=r/o.worldSize,p=o.globeMatrix;if(s.z<=1){const st=Tc(s).getCorners();return wS(st,p,u),va.fromPoints(st)}const g=ty(s),y=sw(g);wS(y,p,u);const b=Number.MAX_VALUE,T=[-b,-b,-b],k=[b,b,b];if(g.contains(o.center)){for(const Vt of y)Im(k,k,Vt),Am(T,T,Vt);T[2]=0;const st=o.point,bt=[st.x*u,st.y*u,0];return Im(k,k,bt),Am(T,T,bt),new va(k,T)}const D=[p[12]*u,p[13]*u,p[14]*u],L=g.getCenter(),F=Ne(o.center.lat,-Xo,Xo),U=Ne(L.lat,-Xo,Xo),q=Sc(o.center.lng),ee=kc(F);let ce=q-Sc(L.lng);const ye=ee-kc(U);ce>.5?ce-=1:ce<-.5&&(ce+=1);let Ae=0;Math.abs(ce)>Math.abs(ye)?Ae=ce>=0?1:3:(Ae=ye>=0?0:2,Mm(D,D,[p[4]*u,p[5]*u,p[6]*u],-Math.sin(gt(ye>=0?g.getSouth():g.getNorth()))*Ec));const ve=y[Ae],Ie=y[(Ae+1)%4],Le=new tF(ve,Ie,D),Oe=[aw(Le,0)||ve[0],aw(Le,1)||ve[1],aw(Le,2)||ve[2]],ht=nf(o.zoom);if(ht>0){const st=function({x:Vt,y:mt,z:It},At,Nt,Gt,xt){const un=1/(1<<It);let kn=Vt*un,hn=kn+un,ar=mt*un,Kt=ar+un,Bn=0;const sr=(kn+hn)/2-Gt;return sr>.5?Bn=-1:sr<-.5&&(Bn=1),kn=((kn+Bn)*At-(Gt*=At))*Nt+Gt,hn=((hn+Bn)*At-Gt)*Nt+Gt,ar=(ar*At-(xt*=At))*Nt+xt,Kt=(Kt*At-xt)*Nt+xt,[[kn,Kt,0],[hn,Kt,0],[hn,ar,0],[kn,ar,0]]}(s,r,o._pixelsPerMercatorPixel,q,ee);for(let Vt=0;Vt<y.length;Vt++)zh(y[Vt],st[Vt],ht);const bt=yu([],st[Ae],st[(Ae+1)%4]);Cs(bt,bt,.5),zh(Oe,bt,ht)}for(const st of y)Im(k,k,st),Am(T,T,st);return k[2]=Math.min(ve[2],Ie[2]),Im(k,k,Oe),Am(T,T,Oe),new va(k,T)}function ty({x:o,y:r,z:s}){const u=1/(1<<s),p=new Gr(Ps(o*u),Zo((r+1)*u)),g=new Gr(Ps((o+1)*u),Zo(r*u));return new ud(p,g)}function sw(o){const r=gt(o.getNorth()),s=gt(o.getSouth()),u=Math.cos(r),p=Math.cos(s),g=Math.sin(r),y=Math.sin(s),b=o.getWest(),T=o.getEast();return[ef(p,y,b),ef(p,y,T),ef(u,g,T),ef(u,g,b)]}function ef(o,r,s,u=Ec){return s=gt(s),[o*Math.sin(s)*u,-r*u,o*Math.cos(s)*u]}function tf(o,r,s){return ef(Math.cos(gt(o)),Math.sin(gt(o)),r,s)}function Lm(o,r,s,u){const p=1<<s.z,g=(o/Hn+s.x)/p;return tf(Zo((r/Hn+s.y)/p),Ps(g),u)}function ny({min:o,max:r}){return QN/Math.max(r[0]-o[0],r[1]-o[1],r[2]-o[2])}const ES=new Float64Array(16);function zm(o){const r=ny(o),s=aS(ES,[r,r,r]);return Cm(s,s,((u=[])[0]=-(p=o.min)[0],u[1]=-p[1],u[2]=-p[2],u));var u,p}function lw(o){const r=(u=o.min,(s=ES)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=u[0],s[13]=u[1],s[14]=u[2],s[15]=1,s);var s,u;const p=1/ny(o);return Rh(r,r,[p,p,p])}function TS(o,r,s,u,p){const g=function(T){const k=Hn/(2*Math.PI);return T/(2*Math.PI)/k}(s),y=[o,r,-s/(2*Math.PI)],b=Fl(new Float64Array(16));return Cm(b,b,y),Rh(b,b,[g,g,g]),Jb(b,b,gt(-p)),Q_(b,b,gt(-u)),b}function nf(o){return et(ow,vS,o)}function SS(o,r){const s=tf(r.lat,r.lng),u=function(q){const ee=tf(q._center.lat,q._center.lng);let ce=tw([],Qp(0,1,0),ee);const ye=sS([],-q.angle,ee);ce=Ui(ce,ce,ye),sS(ye,-q._pitch,ce);const Ae=ya([],ee);return Cs(Ae,Ae,ey(q.cameraToCenterDistance/q.pixelsPerMeter)),Ui(Ae,Ae,ye),yu([],ee,Ae)}(o);return y=(p=ew([],u,s))[0],b=p[1],T=p[2],k=(g=s)[0],D=g[1],L=g[2],U=(F=Math.sqrt(y*y+b*b+T*T)*Math.sqrt(k*k+D*D+L*L))&&Ys(p,g)/F,Math.acos(Math.min(Math.max(U,-1),1));var p,g,y,b,T,k,D,L,F,U}function cw(o,r){return SS(o,r)>Math.PI/2*1.01}const kS=gt(85),rF=Math.cos(kS),iF=Math.sin(kS),Nm=63710088e-1,CS=2*Math.PI*Nm;class dd{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new dd(it(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,u=this.lat*s,p=r.lat*s,g=Math.sin(u)*Math.sin(p)+Math.cos(u)*Math.cos(p)*Math.cos((r.lng-this.lng)*s);return Nm*Math.acos(Math.min(g,1))}toBounds(r=0){const s=360*r/40075017,u=s/Math.cos(Math.PI/180*this.lat);return new ud(new dd(this.lng-u,this.lat-s),new dd(this.lng+u,this.lat+s))}toEcef(r){const s=ey(r);return tf(this.lat,this.lng,Ec+s)}static convert(r){if(r instanceof dd)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new dd(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new dd(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Gr=dd;function uw(o){return CS*Math.cos(o*Math.PI/180)}function Sc(o){return(180+o)/360}function kc(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function jl(o,r){return o/uw(r)}function Ps(o){return 360*o-180}function Zo(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function PS(o,r){return o*uw(Zo(r))}const Xo=85.051129;function IS(o){return 1/Math.cos(o*Math.PI/180)}class rf{constructor(r,s,u=0){this.x=+r,this.y=+s,this.z=+u}static fromLngLat(r,s=0){const u=Gr.convert(r);return new rf(Sc(u.lng),kc(u.lat),jl(s,u.lat))}toLngLat(){return new Gr(Ps(this.x),Zo(this.y))}toAltitude(){return PS(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/CS*IS(Zo(this.y))}}function dw(o,r,s,u,p,g,y,b,T){const k=(r+u)/2,D=(s+p)/2,L=new _e(k,D);b(L),function(F,U,q,ee,ce,ye){const Ae=q-ce,ve=ee-ye;return Math.abs((ee-U)*Ae-(q-F)*ve)/Math.hypot(Ae,ve)}(L.x,L.y,g.x,g.y,y.x,y.y)>=T?(dw(o,r,s,k,D,g,L,b,T),dw(o,k,D,u,p,L,y,b,T)):o.push(y)}function AS(o,r,s){let u=o[0],p=u.x,g=u.y;r(u);const y=[u];for(let b=1;b<o.length;b++){const T=o[b],{x:k,y:D}=T;r(T),dw(y,p,g,k,D,u,T,r,s),p=k,g=D,u=T}return y}function hw(o,r,s,u){if(u(r,s)){const p=r.add(s)._mult(.5);hw(o,r,p,u),hw(o,p,s,u)}else o.push(s)}function oF(o,r){let s=o[0];const u=[s];for(let p=1;p<o.length;p++){const g=o[p];hw(u,s,g,r),s=g}return u}const pw=Math.pow(2,14)-1,MS=-pw-1;function aF(o,r){const s=Math.round(o.x*r),u=Math.round(o.y*r);return o.x=Ne(s,MS,pw),o.y=Ne(u,MS,pw),(s<o.x||s>o.x+1||u<o.y||u>o.y+1)&&Ct("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o}function vu(o,r,s){const u=o.loadGeometry(),p=o.extent,g=Hn/p;if(r&&s&&s.projection.isReprojectedInTileSpace){const y=1<<r.z,{scale:b,x:T,y:k,projection:D}=s,L=F=>{const U=Ps((r.x+F.x/p)/y),q=Zo((r.y+F.y/p)/y),ee=D.project(U,q);F.x=(ee.x*b-T)*p,F.y=(ee.y*b-k)*p};for(let F=0;F<u.length;F++)if(o.type!==1)u[F]=AS(u[F],L,1);else{const U=[];for(const q of u[F])q.x<0||q.x>=p||q.y<0||q.y>=p||(L(q),U.push(q));u[F]=U}}for(const y of u)for(const b of y)aF(b,g);return u}function Nh(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?vu(o):[]}}function ry(o,r,s,u,p){o.emplaceBack(2*r+(u+1)/2,2*s+(p+1)/2)}function iy(o,r,s){o.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class fw{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new Ut,this.indexArray=new Mn,this.segments=new Zi,this.programConfigurations=new Mh(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,u,p){const g=this.layers[0],y=[];let b=null;g.type==="circle"&&(b=g.layout.get("circle-sort-key"));for(const{feature:k,id:D,index:L,sourceLayerIndex:F}of r){const U=this.layers[0]._featureFilter.needGeometry,q=Nh(k,U);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),q,u))continue;const ee=b?b.evaluate(q,{},u):void 0,ce={id:D,properties:k.properties,type:k.type,sourceLayerIndex:F,index:L,geometry:U?q.geometry:vu(k,u,p),patterns:{},sortKey:ee};y.push(ce)}b&&y.sort((k,D)=>k.sortKey-D.sortKey);let T=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new Wt,T=p.projection);for(const k of y){const{geometry:D,index:L,sourceLayerIndex:F}=k,U=r[L].feature;this.addFeature(k,D,L,s.availableImages,u,T),s.featureIndex.insert(U,D,L,F,this.index)}}update(r,s,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,qN.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,GN.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,s,u,p,g,y){for(const b of s)for(const T of b){const k=T.x,D=T.y;if(k<0||k>=Hn||D<0||D>=Hn)continue;if(y){const U=y.projectTilePoint(k,D,g),q=y.upVector(g,k,D),ee=this.globeExtVertexArray;iy(ee,U,q),iy(ee,U,q),iy(ee,U,q),iy(ee,U,q)}const L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),F=L.vertexLength;ry(this.layoutVertexArray,k,D,-1,-1),ry(this.layoutVertexArray,k,D,1,-1),ry(this.layoutVertexArray,k,D,1,1),ry(this.layoutVertexArray,k,D,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+2,F+3),L.vertexLength+=4,L.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},p,g)}}function DS(o,r){for(let s=0;s<o.length;s++)if(Fh(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(Fh(o,r[s]))return!0;return!!mw(o,r)}function sF(o,r,s){return!!Fh(o,r)||!!gw(r,o,s)}function RS(o,r){if(o.length===1)return LS(r,o[0]);for(let s=0;s<r.length;s++){const u=r[s];for(let p=0;p<u.length;p++)if(Fh(o,u[p]))return!0}for(let s=0;s<o.length;s++)if(LS(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(mw(o,r[s]))return!0;return!1}function lF(o,r,s){if(o.length>1){if(mw(o,r))return!0;for(let u=0;u<r.length;u++)if(gw(r[u],o,s))return!0}for(let u=0;u<o.length;u++)if(gw(o[u],r,s))return!0;return!1}function mw(o,r){if(o.length===0||r.length===0)return!1;for(let s=0;s<o.length-1;s++){const u=o[s],p=o[s+1];for(let g=0;g<r.length-1;g++)if(cF(u,p,r[g],r[g+1]))return!0}return!1}function cF(o,r,s,u){return On(o,s,u)!==On(r,s,u)&&On(o,r,s)!==On(o,r,u)}function gw(o,r,s){const u=s*s;if(r.length===1)return o.distSqr(r[0])<u;for(let p=1;p<r.length;p++)if(OS(o,r[p-1],r[p])<u)return!0;return!1}function OS(o,r,s){const u=r.distSqr(s);if(u===0)return o.distSqr(r);const p=((o.x-r.x)*(s.x-r.x)+(o.y-r.y)*(s.y-r.y))/u;return o.distSqr(p<0?r:p>1?s:s.sub(r)._mult(p)._add(r))}function LS(o,r){let s,u,p,g=!1;for(let y=0;y<o.length;y++){s=o[y];for(let b=0,T=s.length-1;b<s.length;T=b++)u=s[b],p=s[T],u.y>r.y!=p.y>r.y&&r.x<(p.x-u.x)*(r.y-u.y)/(p.y-u.y)+u.x&&(g=!g)}return g}function Fh(o,r){let s=!1;for(let u=0,p=o.length-1;u<o.length;p=u++){const g=o[u],y=o[p];g.y>r.y!=y.y>r.y&&r.x<(y.x-g.x)*(r.y-g.y)/(y.y-g.y)+g.x&&(s=!s)}return s}function zS(o,r,s,u,p){for(const y of o)if(r<=y.x&&s<=y.y&&u>=y.x&&p>=y.y)return!0;const g=[new _e(r,s),new _e(r,p),new _e(u,p),new _e(u,s)];if(o.length>2){for(const y of g)if(Fh(o,y))return!0}for(let y=0;y<o.length-1;y++)if(uF(o[y],o[y+1],g))return!0;return!1}function uF(o,r,s){const u=s[0],p=s[2];if(o.x<u.x&&r.x<u.x||o.x>p.x&&r.x>p.x||o.y<u.y&&r.y<u.y||o.y>p.y&&r.y>p.y)return!1;const g=On(o,r,s[0]);return g!==On(o,r,s[1])||g!==On(o,r,s[2])||g!==On(o,r,s[3])}function of(o,r,s){const u=r.paint.get(o).value;return u.kind==="constant"?u.value:s.programConfigurations.get(r.id).getMaxValue(o)}function oy(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function NS(o,r,s,u,p){if(!r[0]&&!r[1])return o;const g=_e.convert(r)._mult(p);s==="viewport"&&g._rotate(-u);const y=[];for(let b=0;b<o.length;b++)y.push(o[b].sub(g));return y}function FS(o,r,s,u){const p=_e.convert(o)._mult(u);return r==="viewport"&&p._rotate(-s),p}wn(fw,"CircleBucket",{omit:["layers"]});const dF=new Se({"circle-sort-key":new ue(yt.layout_circle["circle-sort-key"])});var hF={paint:new Se({"circle-radius":new ue(yt.paint_circle["circle-radius"]),"circle-color":new ue(yt.paint_circle["circle-color"]),"circle-blur":new ue(yt.paint_circle["circle-blur"]),"circle-opacity":new ue(yt.paint_circle["circle-opacity"]),"circle-translate":new J(yt.paint_circle["circle-translate"]),"circle-translate-anchor":new J(yt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new J(yt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new J(yt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ue(yt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ue(yt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ue(yt.paint_circle["circle-stroke-opacity"])}),layout:dF};function BS(o,r,s,u,p,g,y,b,T){if(g&&o.queryGeometry.isAboveHorizon)return!1;g&&(T*=o.pixelToTileUnitsFactor);const k=o.tileID.canonical,D=s.projection.upVectorScale(k,s.center.lat,s.worldSize).metersToTile;for(const L of r)for(const F of L){const U=F.add(b),q=p&&s.elevation?s.elevation.exaggeration()*p.getElevationAt(U.x,U.y,!0):0,ee=s.projection.projectTilePoint(U.x,U.y,k);if(q>0){const ve=s.projection.upVector(k,U.x,U.y);ee.x+=ve[0]*D*q,ee.y+=ve[1]*D*q,ee.z+=ve[2]*D*q}const ce=g?U:pF(ee.x,ee.y,ee.z,u),ye=g?o.tilespaceRays.map(ve=>mF(ve,q)):o.queryGeometry.screenGeometry,Ae=Oh([],[ee.x,ee.y,ee.z,1],u);if(!y&&g?T*=Ae[3]/s.cameraToCenterDistance:y&&!g&&(T*=s.cameraToCenterDistance/Ae[3]),g){const ve=Zo((F.y/Hn+k.y)/(1<<k.z));T/=s.projection.pixelsPerMeter(ve,1)/jl(1,ve)}if(sF(ye,ce,T))return!0}return!1}function pF(o,r,s,u){const p=Oh([],[o,r,s,1],u);return new _e(p[0]/p[3],p[1]/p[3])}const jS=Qp(0,0,0),fF=Qp(0,0,1);function mF(o,r){const s=Qb();return jS[2]=r,o.intersectsPlane(jS,fF,s),new _e(s[0],s[1])}class $S extends fw{}function US(o,{width:r,height:s},u,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==r*s*u)throw new RangeError("mismatched image size")}else p=new Uint8Array(r*s*u);return o.width=r,o.height=s,o.data=p,o}function VS(o,r,s){const{width:u,height:p}=r;u===o.width&&p===o.height||(_w(o,r,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,u),height:Math.min(o.height,p)},s),o.width=u,o.height=p,o.data=r.data)}function _w(o,r,s,u,p,g){if(p.width===0||p.height===0)return r;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>r.width||p.height>r.height||u.x>r.width-p.width||u.y>r.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const y=o.data,b=r.data;for(let T=0;T<p.height;T++){const k=((s.y+T)*o.width+s.x)*g,D=((u.y+T)*r.width+u.x)*g;for(let L=0;L<p.width*g;L++)b[D+L]=y[k+L]}return r}wn($S,"HeatmapBucket",{omit:["layers"]});class xu{constructor(r,s){US(this,r,1,s)}resize(r){VS(this,new xu(r),1)}clone(){return new xu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,u,p,g){_w(r,s,u,p,g,1)}}class ns{constructor(r,s){US(this,r,4,s)}resize(r){VS(this,new ns(r),4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ns({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,u,p,g){_w(r,s,u,p,g,4)}}wn(xu,"AlphaImage"),wn(ns,"RGBAImage");var gF={paint:new Se({"heatmap-radius":new ue(yt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ue(yt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new J(yt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new we(yt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new J(yt.paint_heatmap["heatmap-opacity"])})};function yw(o){const r={},s=o.resolution||256,u=o.clips?o.clips.length:1,p=o.image||new ns({width:s,height:u}),g=(y,b,T)=>{r[o.evaluationKey]=T;const k=o.expression.evaluate(r);p.data[y+b+0]=Math.floor(255*k.r/k.a),p.data[y+b+1]=Math.floor(255*k.g/k.a),p.data[y+b+2]=Math.floor(255*k.b/k.a),p.data[y+b+3]=Math.floor(255*k.a)};if(o.clips)for(let y=0,b=0;y<u;++y,b+=4*s)for(let T=0,k=0;T<s;T++,k+=4){const D=T/(s-1),{start:L,end:F}=o.clips[y];g(b,k,L*(1-D)+F*D)}else for(let y=0,b=0;y<s;y++,b+=4)g(0,b,y/(s-1));return p}var _F={paint:new Se({"hillshade-illumination-direction":new J(yt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new J(yt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new J(yt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new J(yt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new J(yt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new J(yt.paint_hillshade["hillshade-accent-color"])})};const yF=Je([{name:"a_pos",components:2,type:"Int16"}],4),{members:vF}=yF;var vw={exports:{}};function ay(o,r,s){s=s||2;var u,p,g,y,b,T,k,D=r&&r.length,L=D?r[0]*s:o.length,F=WS(o,0,L,s,!0),U=[];if(!F||F.next===F.prev)return U;if(D&&(F=function(ee,ce,ye,Ae){var ve,Ie,Le,Oe=[];for(ve=0,Ie=ce.length;ve<Ie;ve++)(Le=WS(ee,ce[ve]*Ae,ve<Ie-1?ce[ve+1]*Ae:ee.length,Ae,!1))===Le.next&&(Le.steiner=!0),Oe.push(CF(Le));for(Oe.sort(TF),ve=0;ve<Oe.length;ve++)ye=SF(Oe[ve],ye);return ye}(o,r,F,s)),o.length>80*s){u=g=o[0],p=y=o[1];for(var q=s;q<L;q+=s)(b=o[q])<u&&(u=b),(T=o[q+1])<p&&(p=T),b>g&&(g=b),T>y&&(y=T);k=(k=Math.max(g-u,y-p))!==0?32767/k:0}return Fm(F,U,s,u,p,k,0),U}function WS(o,r,s,u,p){var g,y;if(p===ww(o,r,s,u)>0)for(g=r;g<s;g+=u)y=GS(g,o[g],o[g+1],y);else for(g=s-u;g>=r;g-=u)y=GS(g,o[g],o[g+1],y);return y&&sy(y,y.next)&&(jm(y),y=y.next),y}function Bh(o,r){if(!o)return o;r||(r=o);var s,u=o;do if(s=!1,u.steiner||!sy(u,u.next)&&Xi(u.prev,u,u.next)!==0)u=u.next;else{if(jm(u),(u=r=u.prev)===u.next)break;s=!0}while(s||u!==r);return r}function Fm(o,r,s,u,p,g,y){if(o){!y&&g&&function(D,L,F,U){var q=D;do q.z===0&&(q.z=xw(q.x,q.y,L,F,U)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==D);q.prevZ.nextZ=null,q.prevZ=null,function(ee){var ce,ye,Ae,ve,Ie,Le,Oe,ht,st=1;do{for(ye=ee,ee=null,Ie=null,Le=0;ye;){for(Le++,Ae=ye,Oe=0,ce=0;ce<st&&(Oe++,Ae=Ae.nextZ);ce++);for(ht=st;Oe>0||ht>0&&Ae;)Oe!==0&&(ht===0||!Ae||ye.z<=Ae.z)?(ve=ye,ye=ye.nextZ,Oe--):(ve=Ae,Ae=Ae.nextZ,ht--),Ie?Ie.nextZ=ve:ee=ve,ve.prevZ=Ie,Ie=ve;ye=Ae}Ie.nextZ=null,st*=2}while(Le>1)}(q)}(o,u,p,g);for(var b,T,k=o;o.prev!==o.next;)if(b=o.prev,T=o.next,g?bF(o,u,p,g):xF(o))r.push(b.i/s|0),r.push(o.i/s|0),r.push(T.i/s|0),jm(o),o=T.next,k=T.next;else if((o=T)===k){y?y===1?Fm(o=wF(Bh(o),r,s),r,s,u,p,g,2):y===2&&EF(o,r,s,u,p,g):Fm(Bh(o),r,s,u,p,g,1);break}}}function xF(o){var r=o.prev,s=o,u=o.next;if(Xi(r,s,u)>=0)return!1;for(var p=r.x,g=s.x,y=u.x,b=r.y,T=s.y,k=u.y,D=p<g?p<y?p:y:g<y?g:y,L=b<T?b<k?b:k:T<k?T:k,F=p>g?p>y?p:y:g>y?g:y,U=b>T?b>k?b:k:T>k?T:k,q=u.next;q!==r;){if(q.x>=D&&q.x<=F&&q.y>=L&&q.y<=U&&af(p,b,g,T,y,k,q.x,q.y)&&Xi(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function bF(o,r,s,u){var p=o.prev,g=o,y=o.next;if(Xi(p,g,y)>=0)return!1;for(var b=p.x,T=g.x,k=y.x,D=p.y,L=g.y,F=y.y,U=b<T?b<k?b:k:T<k?T:k,q=D<L?D<F?D:F:L<F?L:F,ee=b>T?b>k?b:k:T>k?T:k,ce=D>L?D>F?D:F:L>F?L:F,ye=xw(U,q,r,s,u),Ae=xw(ee,ce,r,s,u),ve=o.prevZ,Ie=o.nextZ;ve&&ve.z>=ye&&Ie&&Ie.z<=Ae;){if(ve.x>=U&&ve.x<=ee&&ve.y>=q&&ve.y<=ce&&ve!==p&&ve!==y&&af(b,D,T,L,k,F,ve.x,ve.y)&&Xi(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,Ie.x>=U&&Ie.x<=ee&&Ie.y>=q&&Ie.y<=ce&&Ie!==p&&Ie!==y&&af(b,D,T,L,k,F,Ie.x,Ie.y)&&Xi(Ie.prev,Ie,Ie.next)>=0))return!1;Ie=Ie.nextZ}for(;ve&&ve.z>=ye;){if(ve.x>=U&&ve.x<=ee&&ve.y>=q&&ve.y<=ce&&ve!==p&&ve!==y&&af(b,D,T,L,k,F,ve.x,ve.y)&&Xi(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;Ie&&Ie.z<=Ae;){if(Ie.x>=U&&Ie.x<=ee&&Ie.y>=q&&Ie.y<=ce&&Ie!==p&&Ie!==y&&af(b,D,T,L,k,F,Ie.x,Ie.y)&&Xi(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.nextZ}return!0}function wF(o,r,s){var u=o;do{var p=u.prev,g=u.next.next;!sy(p,g)&&HS(p,u,u.next,g)&&Bm(p,g)&&Bm(g,p)&&(r.push(p.i/s|0),r.push(u.i/s|0),r.push(g.i/s|0),jm(u),jm(u.next),u=o=g),u=u.next}while(u!==o);return Bh(u)}function EF(o,r,s,u,p,g){var y=o;do{for(var b=y.next.next;b!==y.prev;){if(y.i!==b.i&&PF(y,b)){var T=qS(y,b);return y=Bh(y,y.next),T=Bh(T,T.next),Fm(y,r,s,u,p,g,0),void Fm(T,r,s,u,p,g,0)}b=b.next}y=y.next}while(y!==o)}function TF(o,r){return o.x-r.x}function SF(o,r){var s=function(p,g){var y,b=g,T=p.x,k=p.y,D=-1/0;do{if(k<=b.y&&k>=b.next.y&&b.next.y!==b.y){var L=b.x+(k-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(L<=T&&L>D&&(D=L,y=b.x<b.next.x?b:b.next,L===T))return y}b=b.next}while(b!==g);if(!y)return null;var F,U=y,q=y.x,ee=y.y,ce=1/0;b=y;do T>=b.x&&b.x>=q&&T!==b.x&&af(k<ee?T:D,k,q,ee,k<ee?D:T,k,b.x,b.y)&&(F=Math.abs(k-b.y)/(T-b.x),Bm(b,p)&&(F<ce||F===ce&&(b.x>y.x||b.x===y.x&&kF(y,b)))&&(y=b,ce=F)),b=b.next;while(b!==U);return y}(o,r);if(!s)return r;var u=qS(s,o);return Bh(u,u.next),Bh(s,s.next)}function kF(o,r){return Xi(o.prev,o,r.prev)<0&&Xi(r.next,o,o.next)<0}function xw(o,r,s,u,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-u)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function CF(o){var r=o,s=o;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==o);return s}function af(o,r,s,u,p,g,y,b){return(p-y)*(r-b)>=(o-y)*(g-b)&&(o-y)*(u-b)>=(s-y)*(r-b)&&(s-y)*(g-b)>=(p-y)*(u-b)}function PF(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(s,u){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==u.i&&p.next.i!==u.i&&HS(p,p.next,s,u))return!0;p=p.next}while(p!==s);return!1}(o,r)&&(Bm(o,r)&&Bm(r,o)&&function(s,u){var p=s,g=!1,y=(s.x+u.x)/2,b=(s.y+u.y)/2;do p.y>b!=p.next.y>b&&p.next.y!==p.y&&y<(p.next.x-p.x)*(b-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next;while(p!==s);return g}(o,r)&&(Xi(o.prev,o,r.prev)||Xi(o,r.prev,r))||sy(o,r)&&Xi(o.prev,o,o.next)>0&&Xi(r.prev,r,r.next)>0)}function Xi(o,r,s){return(r.y-o.y)*(s.x-r.x)-(r.x-o.x)*(s.y-r.y)}function sy(o,r){return o.x===r.x&&o.y===r.y}function HS(o,r,s,u){var p=cy(Xi(o,r,s)),g=cy(Xi(o,r,u)),y=cy(Xi(s,u,o)),b=cy(Xi(s,u,r));return p!==g&&y!==b||!(p!==0||!ly(o,s,r))||!(g!==0||!ly(o,u,r))||!(y!==0||!ly(s,o,u))||!(b!==0||!ly(s,r,u))}function ly(o,r,s){return r.x<=Math.max(o.x,s.x)&&r.x>=Math.min(o.x,s.x)&&r.y<=Math.max(o.y,s.y)&&r.y>=Math.min(o.y,s.y)}function cy(o){return o>0?1:o<0?-1:0}function Bm(o,r){return Xi(o.prev,o,o.next)<0?Xi(o,r,o.next)>=0&&Xi(o,o.prev,r)>=0:Xi(o,r,o.prev)<0||Xi(o,o.next,r)<0}function qS(o,r){var s=new bw(o.i,o.x,o.y),u=new bw(r.i,r.x,r.y),p=o.next,g=r.prev;return o.next=r,r.prev=o,s.next=p,p.prev=s,u.next=s,s.prev=u,g.next=u,u.prev=g,u}function GS(o,r,s,u){var p=new bw(o,r,s);return u?(p.next=u.next,p.prev=u,u.next.prev=p,u.next=p):(p.prev=p,p.next=p),p}function jm(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function bw(o,r,s){this.i=o,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ww(o,r,s,u){for(var p=0,g=r,y=s-u;g<s;g+=u)p+=(o[y]-o[g])*(o[g+1]+o[y+1]),y=g;return p}vw.exports=ay,vw.exports.default=ay,ay.deviation=function(o,r,s,u){var p=r&&r.length,g=Math.abs(ww(o,0,p?r[0]*s:o.length,s));if(p)for(var y=0,b=r.length;y<b;y++)g-=Math.abs(ww(o,r[y]*s,y<b-1?r[y+1]*s:o.length,s));var T=0;for(y=0;y<u.length;y+=3){var k=u[y]*s,D=u[y+1]*s,L=u[y+2]*s;T+=Math.abs((o[k]-o[L])*(o[D+1]-o[k+1])-(o[k]-o[D])*(o[L+1]-o[k+1]))}return g===0&&T===0?0:Math.abs((T-g)/g)},ay.flatten=function(o){for(var r=o[0][0].length,s={vertices:[],holes:[],dimensions:r},u=0,p=0;p<o.length;p++){for(var g=0;g<o[p].length;g++)for(var y=0;y<r;y++)s.vertices.push(o[p][g][y]);p>0&&s.holes.push(u+=o[p-1].length)}return s};var Ew=Q(vw.exports);function IF(o,r,s,u,p){ZS(o,r,s||0,u||o.length-1,p||AF)}function ZS(o,r,s,u,p){for(;u>s;){if(u-s>600){var g=u-s+1,y=r-s+1,b=Math.log(g),T=.5*Math.exp(2*b/3),k=.5*Math.sqrt(b*T*(g-T)/g)*(y-g/2<0?-1:1);ZS(o,r,Math.max(s,Math.floor(r-y*T/g+k)),Math.min(u,Math.floor(r+(g-y)*T/g+k)),p)}var D=o[r],L=s,F=u;for($m(o,s,r),p(o[u],D)>0&&$m(o,s,u);L<F;){for($m(o,L,F),L++,F--;p(o[L],D)<0;)L++;for(;p(o[F],D)>0;)F--}p(o[s],D)===0?$m(o,s,F):$m(o,++F,u),F<=r&&(s=F+1),r<=F&&(u=F-1)}}function $m(o,r,s){var u=o[r];o[r]=o[s],o[s]=u}function AF(o,r){return o<r?-1:o>r?1:0}function Tw(o,r){const s=o.length;if(s<=1)return[o];const u=[];let p,g;for(let y=0;y<s;y++){const b=an(o[y]);b!==0&&(o[y].area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(p&&u.push(p),p=[o[y]]):p.push(o[y]))}if(p&&u.push(p),r>1)for(let y=0;y<u.length;y++)u[y].length<=r||(IF(u[y],r,1,u[y].length-1,MF),u[y]=u[y].slice(0,r));return u}function MF(o,r){return r.area-o.area}function Sw(o,r,s){const u=s.patternDependencies;let p=!1;for(const g of r){const y=g.paint.get(`${o}-pattern`);y.isConstant()||(p=!0);const b=y.constantOr(null);b&&(p=!0,u[b]=!0)}return p}function kw(o,r,s,u,p){const g=p.patternDependencies;for(const y of r){const b=y.paint.get(`${o}-pattern`).value;if(b.kind!=="constant"){let T=b.evaluate({zoom:u},s,{},p.availableImages);T=T&&T.name?T.name:T,g[T]=!0,s.patterns[y.id]=T}}return s}class uy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ut,this.indexArray=new Mn,this.indexArray2=new wo,this.programConfigurations=new Mh(r.layers,r.zoom),this.segments=new Zi,this.segments2=new Zi,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=r.projection}populate(r,s,u,p){this.hasPattern=Sw("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:b,id:T,index:k,sourceLayerIndex:D}of r){const L=this.layers[0]._featureFilter.needGeometry,F=Nh(b,L);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),F,u))continue;const U=g?g.evaluate(F,{},u,s.availableImages):void 0,q={id:T,properties:b.properties,type:b.type,sourceLayerIndex:D,index:k,geometry:L?F.geometry:vu(b,u,p),patterns:{},sortKey:U};y.push(q)}g&&y.sort((b,T)=>b.sortKey-T.sortKey);for(const b of y){const{geometry:T,index:k,sourceLayerIndex:D}=b;if(this.hasPattern){const L=kw("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(L)}else this.addFeature(b,T,k,u,{},s.availableImages);s.featureIndex.insert(r[k].feature,T,k,D,this.index)}}update(r,s,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,u,p)}addFeatures(r,s,u,p,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,s,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,vF),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,u,p,g,y=[]){for(const b of Tw(s,500)){let T=0;for(const q of b)T+=q.length;const k=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),D=k.vertexLength,L=[],F=[];for(const q of b){if(q.length===0)continue;q!==b[0]&&F.push(L.length/2);const ee=this.segments2.prepareSegment(q.length,this.layoutVertexArray,this.indexArray2),ce=ee.vertexLength;this.layoutVertexArray.emplaceBack(q[0].x,q[0].y),this.indexArray2.emplaceBack(ce+q.length-1,ce),L.push(q[0].x),L.push(q[0].y);for(let ye=1;ye<q.length;ye++)this.layoutVertexArray.emplaceBack(q[ye].x,q[ye].y),this.indexArray2.emplaceBack(ce+ye-1,ce+ye),L.push(q[ye].x),L.push(q[ye].y);ee.vertexLength+=q.length,ee.primitiveLength+=q.length}const U=Ew(L,F);for(let q=0;q<U.length;q+=3)this.indexArray.emplaceBack(D+U[q],D+U[q+1],D+U[q+2]);k.vertexLength+=T,k.primitiveLength+=U.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,y,p)}}wn(uy,"FillBucket",{omit:["layers","patternFeatures"]});const DF=new Se({"fill-sort-key":new ue(yt.layout_fill["fill-sort-key"])});var RF={paint:new Se({"fill-antialias":new J(yt.paint_fill["fill-antialias"]),"fill-opacity":new ue(yt.paint_fill["fill-opacity"]),"fill-color":new ue(yt.paint_fill["fill-color"]),"fill-outline-color":new ue(yt.paint_fill["fill-outline-color"]),"fill-translate":new J(yt.paint_fill["fill-translate"]),"fill-translate-anchor":new J(yt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ue(yt.paint_fill["fill-pattern"])}),layout:DF};const OF=Je([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),LF=Je([{name:"a_centroid_pos",components:2,type:"Uint16"}]),zF=Je([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:NF}=OF;var dy={},FF=A,XS=sf;function sf(o,r,s,u,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=u,this._values=p,o.readFields(BF,this,r)}function BF(o,r,s){o==1?r.id=s.readVarint():o==2?function(u,p){for(var g=u.readVarint()+u.pos;u.pos<g;){var y=p._keys[u.readVarint()],b=p._values[u.readVarint()];p.properties[y]=b}}(s,r):o==3?r.type=s.readVarint():o==4&&(r._geometry=s.pos)}function jF(o){for(var r,s,u=0,p=0,g=o.length,y=g-1;p<g;y=p++)u+=((s=o[y]).x-(r=o[p]).x)*(r.y+s.y);return u}sf.types=["Unknown","Point","LineString","Polygon"],sf.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,s=o.readVarint()+o.pos,u=1,p=0,g=0,y=0,b=[];o.pos<s;){if(p<=0){var T=o.readVarint();u=7&T,p=T>>3}if(p--,u===1||u===2)g+=o.readSVarint(),y+=o.readSVarint(),u===1&&(r&&b.push(r),r=[]),r.push(new FF(g,y));else{if(u!==7)throw new Error("unknown command "+u);r&&r.push(r[0].clone())}}return r&&b.push(r),b},sf.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,s=1,u=0,p=0,g=0,y=1/0,b=-1/0,T=1/0,k=-1/0;o.pos<r;){if(u<=0){var D=o.readVarint();s=7&D,u=D>>3}if(u--,s===1||s===2)(p+=o.readSVarint())<y&&(y=p),p>b&&(b=p),(g+=o.readSVarint())<T&&(T=g),g>k&&(k=g);else if(s!==7)throw new Error("unknown command "+s)}return[y,T,b,k]},sf.prototype.toGeoJSON=function(o,r,s){var u,p,g=this.extent*Math.pow(2,s),y=this.extent*o,b=this.extent*r,T=this.loadGeometry(),k=sf.types[this.type];function D(U){for(var q=0;q<U.length;q++){var ee=U[q];U[q]=[360*(ee.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(ee.y+b)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(u=0;u<T.length;u++)L[u]=T[u][0];D(T=L);break;case 2:for(u=0;u<T.length;u++)D(T[u]);break;case 3:for(T=function(U){var q=U.length;if(q<=1)return[U];for(var ee,ce,ye=[],Ae=0;Ae<q;Ae++){var ve=jF(U[Ae]);ve!==0&&(ce===void 0&&(ce=ve<0),ce===ve<0?(ee&&ye.push(ee),ee=[U[Ae]]):ee.push(U[Ae]))}return ee&&ye.push(ee),ye}(T),u=0;u<T.length;u++)for(p=0;p<T[u].length;p++)D(T[u][p])}T.length===1?T=T[0]:k="Multi"+k;var F={type:"Feature",geometry:{type:k,coordinates:T},properties:this.properties};return"id"in this&&(F.id=this.id),F};var $F=XS,KS=YS;function YS(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(UF,this,r),this.length=this._features.length}function UF(o,r,s){o===15?r.version=s.readVarint():o===1?r.name=s.readString():o===5?r.extent=s.readVarint():o===2?r._features.push(s.pos):o===3?r._keys.push(s.readString()):o===4&&r._values.push(function(u){for(var p=null,g=u.readVarint()+u.pos;u.pos<g;){var y=u.readVarint()>>3;p=y===1?u.readString():y===2?u.readFloat():y===3?u.readDouble():y===4?u.readVarint64():y===5?u.readVarint():y===6?u.readSVarint():y===7?u.readBoolean():null}return p}(s))}YS.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new $F(this._pbf,r,this.extent,this._keys,this._values)};var VF=KS;function WF(o,r,s){if(o===3){var u=new VF(s,s.readVarint()+s.pos);u.length&&(r[u.name]=u)}}var Cw=dy.VectorTile=function(o,r){this.layers=o.readFields(WF,{},r)},hy=dy.VectorTileFeature=XS;function py(o,r,s,u){const p=[],g=u===0?(y,b,T,k,D,L)=>{y.push(new _e(L,T+(L-b)/(k-b)*(D-T)))}:(y,b,T,k,D,L)=>{y.push(new _e(b+(L-T)/(D-T)*(k-b),L))};for(const y of o){const b=[];for(const T of y){if(T.length<=2)continue;const k=[];for(let F=0;F<T.length-1;F++){const U=T[F].x,q=T[F].y,ee=T[F+1].x,ce=T[F+1].y,ye=u===0?U:q,Ae=u===0?ee:ce;ye<r?Ae>r&&g(k,U,q,ee,ce,r):ye>s?Ae<s&&g(k,U,q,ee,ce,s):k.push(T[F]),Ae<r&&ye>=r&&g(k,U,q,ee,ce,r),Ae>s&&ye<=s&&g(k,U,q,ee,ce,s)}let D=T[T.length-1];const L=u===0?D.x:D.y;L>=r&&L<=s&&k.push(D),k.length&&(D=k[k.length-1],k[0].x===D.x&&k[0].y===D.y||k.push(k[0]),b.push(k))}b.length&&p.push(b)}return p}dy.VectorTileLayer=KS;const HF=hy.types,qF=Math.pow(2,13);function Um(o,r,s,u,p,g,y,b){o.emplaceBack((r<<1)+y,(s<<1)+g,(Math.floor(u*qF)<<1)+p,Math.round(b))}function Vm(o,r,s){o.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class JS{constructor(){this.acc=new _e(0,0),this.polyCount=[]}startRing(r){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new _e(r.x,r.y),this.max=new _e(r.x,r.y))}append(r,s){this.currentPolyCount.edges++,this.acc._add(r);const u=this.min,p=this.max;r.x<u.x?u.x=r.x:r.x>p.x&&(p.x=r.x),r.y<u.y?u.y=r.y:r.y>p.y&&(p.y=r.y),((r.x===0||r.x===Hn)&&r.x===s.x)!=((r.y===0||r.y===Hn)&&r.y===s.y)&&this.processBorderOverlap(r,s),s.x<0!=r.x<0&&this.addBorderIntersection(0,wr(s.y,r.y,(0-s.x)/(r.x-s.x))),s.x>Hn!=r.x>Hn&&this.addBorderIntersection(1,wr(s.y,r.y,(Hn-s.x)/(r.x-s.x))),s.y<0!=r.y<0&&this.addBorderIntersection(2,wr(s.x,r.x,(0-s.y)/(r.y-s.y))),s.y>Hn!=r.y>Hn&&this.addBorderIntersection(3,wr(s.x,r.x,(Hn-s.y)/(r.y-s.y)))}addBorderIntersection(r,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[r];s<u[0]&&(u[0]=s),s>u[1]&&(u[1]=s)}processBorderOverlap(r,s){if(r.x===s.x){if(r.y===s.y)return;const u=r.x===0?0:1;this.addBorderIntersection(u,s.y),this.addBorderIntersection(u,r.y)}else{const u=r.y===0?2:3;this.addBorderIntersection(u,s.x),this.addBorderIntersection(u,r.x)}}centroid(){const r=this.polyCount.reduce((s,u)=>s+u.edges,0);return r!==0?this.acc.div(r)._round():new _e(0,0)}span(){return new _e(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((r,s)=>r+ +(s[0]!==Number.MAX_VALUE),0)}}class Wm{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.layoutVertexArray=new kt,this.centroidVertexArray=new Ll,this.indexArray=new Mn,this.programConfigurations=new Mh(r.layers,r.zoom),this.segments=new Zi,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.enableTerrain=r.enableTerrain}populate(r,s,u,p){this.features=[],this.hasPattern=Sw("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const y=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*y/(y*y+1)/Hn/(1<<g.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:y,index:b,sourceLayerIndex:T}of r){const k=this.layers[0]._featureFilter.needGeometry,D=Nh(g,k);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),D,u))continue;const L={id:y,sourceLayerIndex:T,index:b,geometry:k?D.geometry:vu(g,u,p),properties:g.properties,type:g.type,patterns:{}},F=this.layoutVertexArray.length;this.hasPattern?this.features.push(kw("fill-extrusion",this.layers,L,this.zoom,s)):this.addFeature(L,L.geometry,b,u,{},s.availableImages,p),s.featureIndex.insert(g,L.geometry,b,T,this.index,F)}this.sortBorders()}addFeatures(r,s,u,p,g){for(const y of this.features){const{geometry:b}=y;this.addFeature(y,b,y.index,s,u,p,g)}this.sortBorders()}update(r,s,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,NF),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,zF.members,!0))),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,LF.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,u,p,g,y,b){const T=[new _e(0,0),new _e(Hn,Hn)],k=b.projection,D=k.name==="globe",L=this.enableTerrain&&!D?new JS:null,F=HF[r.type]==="Polygon";D&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Wt);const U=Tw(s,500);for(let ye=U.length-1;ye>=0;ye--){const Ae=U[ye];(Ae.length===0||(q=Ae[0]).every(ve=>ve.x<=0)||q.every(ve=>ve.x>=Hn)||q.every(ve=>ve.y<=0)||q.every(ve=>ve.y>=Hn))&&U.splice(ye,1)}var q;let ee;if(D)ee=o8(U,T,p);else{ee=[];for(const ye of U)ee.push({polygon:ye,bounds:T})}const ce=F?this.edgeRadius:0;for(const{polygon:ye,bounds:Ae}of ee){let ve=0,Ie=0;for(const Oe of ye)F&&!Oe[0].equals(Oe[Oe.length-1])&&Oe.push(Oe[0]),Ie+=F?Oe.length-1:Oe.length;const Le=this.segments.prepareSegment((F?5:4)*Ie,this.layoutVertexArray,this.indexArray);if(F){const Oe=[],ht=[];ve=Le.vertexLength;for(const bt of ye){let Vt,mt;bt.length&&bt!==ye[0]&&ht.push(Oe.length/2),Vt=bt[1].sub(bt[0])._perp()._unit();for(let It=1;It<bt.length;It++){const At=bt[It],Nt=bt[It===bt.length-1?1:It+1];let{x:Gt,y:xt}=At;if(ce){mt=Nt.sub(At)._perp()._unit();const un=Vt.add(mt)._unit(),kn=ce*Math.min(4,1/(Vt.x*un.x+Vt.y*un.y));Gt+=kn*un.x,xt+=kn*un.y,Vt=mt}Um(this.layoutVertexArray,Gt,xt,0,0,1,1,0),Le.vertexLength++,Oe.push(At.x,At.y),D&&Vm(this.layoutVertexExtArray,k.projectTilePoint(Gt,xt,p),k.upVector(p,Gt,xt))}}const st=Ew(Oe,ht);for(let bt=0;bt<st.length;bt+=3)this.indexArray.emplaceBack(ve+st[bt],ve+st[bt+2],ve+st[bt+1]),Le.primitiveLength++}for(const Oe of ye){L&&Oe.length&&L.startRing(Oe[0]);let ht,st,bt,Vt=Oe.length>4&&n8(Oe[Oe.length-2],Oe[0],Oe[1]),mt=ce?GF(Oe[Oe.length-2],Oe[0],Oe[1],ce):0;st=Oe[1].sub(Oe[0])._perp()._unit();let It=!0;for(let At=1,Nt=0;At<Oe.length;At++){let Gt=Oe[At-1],xt=Oe[At];const un=Oe[At===Oe.length-1?1:At+1];if(L&&F&&L.currentPolyCount.top++,t8(xt,Gt,Ae)){ce&&(st=un.sub(xt)._perp()._unit(),It=!It);continue}L&&L.append(xt,Gt);const kn=xt.sub(Gt)._perp(),hn=kn.x/(Math.abs(kn.x)+Math.abs(kn.y)),ar=kn.y>0?1:0,Kt=Gt.dist(xt);if(Nt+Kt>32768&&(Nt=0),ce){bt=un.sub(xt)._perp()._unit();let lr=e8(Gt,xt,un,QS(st,bt),ce);isNaN(lr)&&(lr=0);const Kn=xt.sub(Gt)._unit();Gt=Gt.add(Kn.mult(mt))._round(),xt=xt.add(Kn.mult(-lr))._round(),mt=lr,st=bt}const Bn=Le.vertexLength,sr=Oe.length>4&&n8(Gt,xt,un);let Rr=r8(Nt,Vt,It);if(Um(this.layoutVertexArray,Gt.x,Gt.y,hn,ar,0,0,Rr),Um(this.layoutVertexArray,Gt.x,Gt.y,hn,ar,0,1,Rr),Nt+=Kt,Rr=r8(Nt,sr,!It),Vt=sr,Um(this.layoutVertexArray,xt.x,xt.y,hn,ar,0,0,Rr),Um(this.layoutVertexArray,xt.x,xt.y,hn,ar,0,1,Rr),Le.vertexLength+=4,this.indexArray.emplaceBack(Bn+0,Bn+1,Bn+2),this.indexArray.emplaceBack(Bn+1,Bn+3,Bn+2),Le.primitiveLength+=2,ce){const lr=ve+(At===1?Oe.length-2:At-2),Kn=At===1?ve:lr+1;if(this.indexArray.emplaceBack(Bn+1,lr,Bn+3),this.indexArray.emplaceBack(lr,Kn,Bn+3),Le.primitiveLength+=2,ht===void 0&&(ht=Bn),!t8(un,Oe[At],Ae)){const ci=At===Oe.length-1?ht:Le.vertexLength;this.indexArray.emplaceBack(Bn+2,Bn+3,ci),this.indexArray.emplaceBack(Bn+3,ci+1,ci),this.indexArray.emplaceBack(Bn+3,Kn,ci+1),Le.primitiveLength+=3}It=!It}if(D){const lr=this.layoutVertexExtArray,Kn=k.projectTilePoint(Gt.x,Gt.y,p),ci=k.projectTilePoint(xt.x,xt.y,p),ur=k.upVector(p,Gt.x,Gt.y),dr=k.upVector(p,xt.x,xt.y);Vm(lr,Kn,ur),Vm(lr,Kn,ur),Vm(lr,ci,dr),Vm(lr,ci,dr)}}F&&(ve+=Oe.length-1)}}if(L&&L.polyCount.length>0){if(L.borders){L.vertexArrayOffset=this.centroidVertexArray.length;const ye=L.borders,Ae=this.featuresOnBorder.push(L)-1;for(let ve=0;ve<4;ve++)ye[ve][0]!==Number.MAX_VALUE&&this.borders[ve].push(Ae)}this.encodeCentroid(L.borders?void 0:L.centroid(),L)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,y,p)}sortBorders(){for(let r=0;r<4;r++)this.borders[r].sort((s,u)=>this.featuresOnBorder[s].borders[r][0]-this.featuresOnBorder[u].borders[r][0])}encodeCentroid(r,s,u=!0){let p,g;if(r)if(r.y!==0){const b=s.span()._mult(this.tileToMeter);p=(Math.max(r.x,1)<<3)+Math.min(7,Math.round(b.x/10)),g=(Math.max(r.y,1)<<3)+Math.min(7,Math.round(b.y/10))}else p=Math.ceil(7*(r.x+450)),g=0;else p=0,g=+u;let y=u?this.centroidVertexArray.length:s.vertexArrayOffset;for(const b of s.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*b.edges+b.top);for(let T=0;T<b.top;T++)this.centroidVertexArray.emplace(y++,p,g);for(let T=0;T<2*b.edges;T++)this.centroidVertexArray.emplace(y++,0,g),this.centroidVertexArray.emplace(y++,p,g)}}}function QS(o,r){const s=o.add(r)._unit();return o.x*s.x+o.y*s.y}function GF(o,r,s,u){const p=r.sub(o)._perp()._unit(),g=s.sub(r)._perp()._unit();return e8(o,r,s,QS(p,g),u)}function e8(o,r,s,u,p){const g=Math.sqrt(1-u*u);return Math.min(o.dist(r)/3,r.dist(s)/3,p*g/u)}function t8(o,r,s){return o.x<s[0].x&&r.x<s[0].x||o.x>s[1].x&&r.x>s[1].x||o.y<s[0].y&&r.y<s[0].y||o.y>s[1].y&&r.y>s[1].y}function n8(o,r,s){if(o.x<0||o.x>=Hn||r.x<0||r.x>=Hn||s.x<0||s.x>=Hn)return!1;const u=s.sub(r),p=u.perp(),g=o.sub(r);return(u.x*g.x+u.y*g.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(g.x*g.x+g.y*g.y))>-.866&&p.x*g.x+p.y*g.y<0}function r8(o,r,s){const u=r?2|o:-3&o;return s?1|u:-2&u}function i8(){const o=Math.PI/32,r=Math.tan(o),s=Nm;return s*Math.sqrt(1+2*r*r)-s}function o8(o,r,s){const u=1<<s.z,p=Ps(s.x/u),g=Ps((s.x+1)/u),y=Zo(s.y/u),b=Zo((s.y+1)/u);return function(T,k,D,L,F=0,U){const q=[];if(!T.length||!D||!L)return q;const ee=(Oe,ht)=>{for(const st of Oe)q.push({polygon:st,bounds:ht})},ce=Math.ceil(Math.log2(D)),ye=Math.ceil(Math.log2(L)),Ae=ce-ye,ve=[];for(let Oe=0;Oe<Math.abs(Ae);Oe++)ve.push(Ae>0?0:1);for(let Oe=0;Oe<Math.min(ce,ye);Oe++)ve.push(0),ve.push(1);let Ie=T;if(Ie=py(Ie,k[0].y-F,k[1].y+F,1),Ie=py(Ie,k[0].x-F,k[1].x+F,0),!Ie.length)return q;const Le=[];for(ve.length?Le.push({polygons:Ie,bounds:k,depth:0}):ee(Ie,k);Le.length;){const Oe=Le.pop(),ht=Oe.depth,st=ve[ht],bt=Oe.bounds[0],Vt=Oe.bounds[1],mt=st===0?bt.x:bt.y,It=st===0?Vt.x:Vt.y,At=U?U(st,mt,It):.5*(mt+It),Nt=py(Oe.polygons,mt-F,At+F,st),Gt=py(Oe.polygons,At-F,It+F,st);if(Nt.length){const xt=[bt,new _e(st===0?At:Vt.x,st===1?At:Vt.y)];ve.length>ht+1?Le.push({polygons:Nt,bounds:xt,depth:ht+1}):ee(Nt,xt)}if(Gt.length){const xt=[new _e(st===0?At:bt.x,st===1?At:bt.y),Vt];ve.length>ht+1?Le.push({polygons:Gt,bounds:xt,depth:ht+1}):ee(Gt,xt)}}return q}(o,r,Math.ceil((g-p)/11.25),Math.ceil((y-b)/11.25),1,(T,k,D)=>{if(T===0)return .5*(k+D);{const L=Zo((s.y+k/Hn)/u);return(kc(.5*(Zo((s.y+D/Hn)/u)+L))*u-s.y)*Hn}})}wn(Wm,"FillExtrusionBucket",{omit:["layers","features"]}),wn(JS,"PartMetadata");const ZF=new Se({"fill-extrusion-edge-radius":new J(yt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var XF={paint:new Se({"fill-extrusion-opacity":new J(yt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ue(yt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new J(yt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new J(yt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ue(yt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ue(yt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ue(yt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new J(yt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new J(yt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new J(yt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new J(yt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:ZF};function a8(o,r,s){var u=2*Math.PI*6378137/256/Math.pow(2,s);return[o*u-2*Math.PI*6378137/2,r*u-2*Math.PI*6378137/2]}class fy{constructor(r,s,u){this.z=r,this.x=s,this.y=u,this.key=Hm(0,r,r,s,u)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s){const u=function(g,y,b){var T=a8(256*g,256*(y=Math.pow(2,b)-y-1),b),k=a8(256*(g+1),256*(y+1),b);return T[0]+","+T[1]+","+k[0]+","+k[1]}(this.x,this.y,this.z),p=function(g,y,b){let T,k="";for(let D=g;D>0;D--)T=1<<D-1,k+=(y&T?1:0)+(b&T?2:0);return k}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class s8{constructor(r,s){this.wrap=r,this.canonical=s,this.key=Hm(r,s.z,s.z,s.x,s.y)}}class xa{constructor(r,s,u,p,g){this.overscaledZ=r,this.wrap=s,this.canonical=new fy(u,+p,+g),this.key=s===0&&r===u?this.canonical.key:Hm(s,r,u,p,g)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const s=this.canonical.z-r;return r>this.canonical.z?new xa(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xa(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s=!0){if(this.overscaledZ===r&&s)return this.key;if(r>this.canonical.z)return Hm(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-r;return Hm(this.wrap*+s,r,r,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new xa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,u=2*this.canonical.x,p=2*this.canonical.y;return[new xa(s,this.wrap,s,u,p),new xa(s,this.wrap,s,u+1,p),new xa(s,this.wrap,s,u,p+1),new xa(s,this.wrap,s,u+1,p+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new xa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new xa(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new s8(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Hm(o,r,s,u,p){const g=1<<Math.min(s,22);let y=g*(p%g)+u%g;return o&&s<22&&(y+=g*g*((o<0?-2*o-1:2*o)%(1<<2*(22-s)))),16*(32*y+s)+(r-s)}wn(fy,"CanonicalTileID"),wn(xa,"OverscaledTileID",{omit:["projMatrix"]});class lf extends _e{constructor(r,s,u){super(r,s),this.z=u}}function qm(o,r){return o.x*r.x+o.y*r.y}function l8(o,r){if(o.length===1){let s=0;const u=r[s++];let p;for(;!p||u.equals(p);)if(p=r[s++],!p)return 1/0;for(;s<r.length;s++){const g=r[s],y=o[0],b=p.sub(u),T=g.sub(u),k=y.sub(u),D=qm(b,b),L=qm(b,T),F=qm(T,T),U=qm(k,b),q=qm(k,T),ee=D*F-L*L,ce=(F*U-L*q)/ee,ye=(D*q-L*U)/ee,Ae=u.z*(1-ce-ye)+p.z*ce+g.z*ye;if(isFinite(Ae))return Ae}return 1/0}{let s=1/0;for(const u of r)s=Math.min(s,u.z);return s}}function c8(o,r,s,u,p,g,y,b){const T=y*p.getElevationAt(o,r,!0,!0),k=g[0]!==0,D=k?g[1]===0?y*(g[0]/7-450):y*function(L,F,U){const q=Math.floor(F[0]/8),ee=Math.floor(F[1]/8),ce=10*(F[0]-8*q),ye=10*(F[1]-8*ee),Ae=L.getElevationAt(q,ee,!0,!0),ve=L.getMeterToDEM(U),Ie=Math.floor(.5*(ce*ve-1)),Le=Math.floor(.5*(ye*ve-1)),Oe=L.tileCoordToPixel(q,ee),ht=2*Ie+1,st=2*Le+1,bt=function(Gt,xt,un,kn,hn){return[Gt.getElevationAtPixel(xt,un,!0),Gt.getElevationAtPixel(xt+hn,un,!0),Gt.getElevationAtPixel(xt,un+hn,!0),Gt.getElevationAtPixel(xt+kn,un+hn,!0)]}(L,Oe.x-Ie,Oe.y-Le,ht,st),Vt=Math.abs(bt[0]-bt[1]),mt=Math.abs(bt[2]-bt[3]),It=Math.abs(bt[0]-bt[2])+Math.abs(bt[1]-bt[3]),At=Math.min(.25,.5*ve*(Vt+mt)/ht),Nt=Math.min(.25,.5*ve*It/st);return Ae+Math.max(At*ce,Nt*ye)}(p,g,b):T;return{base:T+(s===0)?-1:s,top:k?Math.max(D+u,T+s+2):T+u}}const KF=Je([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:YF}=KF,JF=Je([{name:"a_packed",components:4,type:"Float32"}]),{members:QF}=JF,eB=hy.types,tB=Math.cos(Math.PI/180*37.5);class my{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new ft,this.layoutVertexArray2=new jt,this.indexArray=new Mn,this.programConfigurations=new Mh(r.layers,r.zoom),this.segments=new Zi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,u,p){this.hasPattern=Sw("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),y=[];for(const{feature:D,id:L,index:F,sourceLayerIndex:U}of r){const q=this.layers[0]._featureFilter.needGeometry,ee=Nh(D,q);if(!this.layers[0]._featureFilter.filter(new O(this.zoom),ee,u))continue;const ce=g?g.evaluate(ee,{},u):void 0,ye={id:L,properties:D.properties,type:D.type,sourceLayerIndex:U,index:F,geometry:q?ee.geometry:vu(D,u,p),patterns:{},sortKey:ce};y.push(ye)}g&&y.sort((D,L)=>D.sortKey-L.sortKey);const{lineAtlas:b,featureIndex:T}=s,k=this.addConstantDashes(b);for(const D of y){const{geometry:L,index:F,sourceLayerIndex:U}=D;if(k&&this.addFeatureDashes(D,b),this.hasPattern){const q=kw("line",this.layers,D,this.zoom,s);this.patternFeatures.push(q)}else this.addFeature(D,L,F,u,b.positions,s.availableImages);T.insert(r[F].feature,L,F,U,this.index)}}addConstantDashes(r){let s=!1;for(const u of this.layers){const p=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if(p.kind!=="constant"||g.kind!=="constant")s=!0;else{const y=g.value,b=p.value;if(!b)continue;r.addDash(b,y)}}return s}addFeatureDashes(r,s){const u=this.zoom;for(const p of this.layers){const g=p.paint.get("line-dasharray").value,y=p.layout.get("line-cap").value;if(g.kind==="constant"&&y.kind==="constant")continue;let b,T;if(g.kind==="constant"){if(b=g.value,!b)continue}else b=g.evaluate({zoom:u},r);T=y.kind==="constant"?y.value:y.evaluate({zoom:u},r),s.addDash(b,T),r.patterns[p.id]=s.getKey(b,T)}}update(r,s,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,u,p)}addFeatures(r,s,u,p,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,s,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,QF)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,YF),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,u,p,g,y){const b=this.layers[0].layout,T=b.get("line-join").evaluate(r,{}),k=b.get("line-cap").evaluate(r,{}),D=b.get("line-miter-limit"),L=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const F of s)this.addLine(F,r,T,k,D,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,y,p)}addLine(r,s,u,p,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ye=0;ye<r.length-1;ye++)this.totalDistance+=r[ye].dist(r[ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=eB[s.type]==="Polygon";let T=r.length;for(;T>=2&&r[T-1].equals(r[T-2]);)T--;let k=0;for(;k<T-1&&r[k].equals(r[k+1]);)k++;if(T<(b?3:2))return;u==="bevel"&&(g=1.05);const D=this.overscaling<=16?15*Hn/(512*this.overscaling):0,L=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let F,U,q,ee,ce;this.e1=this.e2=-1,b&&(F=r[T-2],ce=r[k].sub(F)._unit()._perp());for(let ye=k;ye<T;ye++){if(q=ye===T-1?b?r[k+1]:void 0:r[ye+1],q&&r[ye].equals(q))continue;ce&&(ee=ce),F&&(U=F),F=r[ye],ce=q?q.sub(F)._unit()._perp():ee,ee=ee||ce;let Ae=ee.add(ce);Ae.x===0&&Ae.y===0||Ae._unit();const ve=ee.x*ce.x+ee.y*ce.y,Ie=Ae.x*ce.x+Ae.y*ce.y,Le=Ie!==0?1/Ie:1/0,Oe=2*Math.sqrt(2-2*Ie),ht=Ie<tB&&U&&q,st=ee.x*ce.y-ee.y*ce.x>0;if(ht&&ye>k){const mt=F.dist(U);if(mt>2*D){const It=F.sub(F.sub(U)._mult(D/mt)._round());this.updateDistance(U,It),this.addCurrentVertex(It,ee,0,0,L),U=It}}const bt=U&&q;let Vt=bt?u:b?"butt":p;if(bt&&Vt==="round"&&(Le<y?Vt="miter":Le<=2&&(Vt="fakeround")),Vt==="miter"&&Le>g&&(Vt="bevel"),Vt==="bevel"&&(Le>2&&(Vt="flipbevel"),Le<g&&(Vt="miter")),U&&this.updateDistance(U,F),Vt==="miter")Ae._mult(Le),this.addCurrentVertex(F,Ae,0,0,L);else if(Vt==="flipbevel"){if(Le>100)Ae=ce.mult(-1);else{const mt=Le*ee.add(ce).mag()/ee.sub(ce).mag();Ae._perp()._mult(mt*(st?-1:1))}this.addCurrentVertex(F,Ae,0,0,L),this.addCurrentVertex(F,Ae.mult(-1),0,0,L)}else if(Vt==="bevel"||Vt==="fakeround"){const mt=-Math.sqrt(Le*Le-1),It=st?mt:0,At=st?0:mt;if(U&&this.addCurrentVertex(F,ee,It,At,L),Vt==="fakeround"){const Nt=Math.round(180*Oe/Math.PI/20);for(let Gt=1;Gt<Nt;Gt++){let xt=Gt/Nt;if(xt!==.5){const kn=xt-.5;xt+=xt*kn*(xt-1)*((1.0904+ve*(ve*(3.55645-1.43519*ve)-3.2452))*kn*kn+(.848013+ve*(.215638*ve-1.06021)))}const un=ce.sub(ee)._mult(xt)._add(ee)._unit()._mult(st?-1:1);this.addHalfVertex(F,un.x,un.y,!1,st,0,L)}}q&&this.addCurrentVertex(F,ce,-It,-At,L)}else if(Vt==="butt")this.addCurrentVertex(F,Ae,0,0,L);else if(Vt==="square"){const mt=U?1:-1;U||this.addCurrentVertex(F,Ae,mt,mt,L),this.addCurrentVertex(F,Ae,0,0,L),U&&this.addCurrentVertex(F,Ae,mt,mt,L)}else Vt==="round"&&(U&&(this.addCurrentVertex(F,ee,0,0,L),this.addCurrentVertex(F,ee,1,1,L,!0)),q&&(this.addCurrentVertex(F,ce,-1,-1,L,!0),this.addCurrentVertex(F,ce,0,0,L)));if(ht&&ye<T-1){const mt=F.dist(q);if(mt>2*D){const It=F.add(q.sub(F)._mult(D/mt)._round());this.updateDistance(F,It),this.addCurrentVertex(It,ce,0,0,L),F=It}}}}addCurrentVertex(r,s,u,p,g,y=!1){const b=s.y*p-s.x,T=-s.y-s.x*p;this.addHalfVertex(r,s.x+s.y*u,s.y-s.x*u,y,!1,u,g),this.addHalfVertex(r,b,T,y,!0,-p,g)}addHalfVertex({x:r,y:s},u,p,g,y,b,T){this.layoutVertexArray.emplaceBack((r<<1)+(g?1:0),(s<<1)+(y?1:0),Math.round(63*u)+128,Math.round(63*p)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const k=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),T.primitiveLength++),y?this.e2=k:this.e1=k}updateScaledDistance(){if(this.lineClips){const r=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=r*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}wn(my,"LineBucket",{omit:["layers","patternFeatures"]});const nB=new Se({"line-cap":new ue(yt.layout_line["line-cap"]),"line-join":new ue(yt.layout_line["line-join"]),"line-miter-limit":new J(yt.layout_line["line-miter-limit"]),"line-round-limit":new J(yt.layout_line["line-round-limit"]),"line-sort-key":new ue(yt.layout_line["line-sort-key"])});var u8={paint:new Se({"line-opacity":new ue(yt.paint_line["line-opacity"]),"line-color":new ue(yt.paint_line["line-color"]),"line-translate":new J(yt.paint_line["line-translate"]),"line-translate-anchor":new J(yt.paint_line["line-translate-anchor"]),"line-width":new ue(yt.paint_line["line-width"]),"line-gap-width":new ue(yt.paint_line["line-gap-width"]),"line-offset":new ue(yt.paint_line["line-offset"]),"line-blur":new ue(yt.paint_line["line-blur"]),"line-dasharray":new ue(yt.paint_line["line-dasharray"]),"line-pattern":new ue(yt.paint_line["line-pattern"]),"line-gradient":new we(yt.paint_line["line-gradient"]),"line-trim-offset":new J(yt.paint_line["line-trim-offset"])}),layout:nB};const d8=new class extends ue{possiblyEvaluate(o,r){return r=new O(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,transition:r.transition}),super.possiblyEvaluate(o,r)}evaluate(o,r,s,u){return r=Rt({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(o,r,s,u)}}(u8.paint.properties["line-width"].specification);function h8(o,r){return r>0?r+2*o:o}d8.useIntegerZoom=!0;const rB=Je([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),iB=Je([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),oB=Je([{name:"a_projected_pos",components:4,type:"Float32"}],4);Je([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const aB=Je([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),sB=Je([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Je([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const p8=Je([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),lB=Je([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Je([{name:"triangle",components:3,type:"Uint16"}]),Je([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Je([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Je([{type:"Float32",name:"offsetX"}]),Je([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Oo=24;const $l=128;function Pw(o,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new O(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:p}=s;let g=0;for(;g<u.length&&u[g]<=o;)g++;g=Math.max(0,g-1);let y=g;for(;y<u.length&&u[y]<o+1;)y++;y=Math.min(u.length-1,y);const b=u[g],T=u[y];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:T,interpolationType:p}:{kind:"camera",minZoom:b,maxZoom:T,minSize:s.evaluate(new O(b)),maxSize:s.evaluate(new O(T)),interpolationType:p}}}function gy(o,{uSize:r,uSizeT:s},{lowerSize:u,upperSize:p}){return o.kind==="source"?u/$l:o.kind==="composite"?wr(u/$l,p/$l,s):r}function cf(o,r){let s=0,u=0;if(o.kind==="constant")u=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:g,maxZoom:y}=o,b=p?Ne(ra.interpolationFactor(p,r,g,y),0,1):0;o.kind==="camera"?u=wr(o.minSize,o.maxSize,b):s=b}return{uSizeT:s,uSize:u}}var cB=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:$l,evaluateSizeForFeature:gy,evaluateSizeForZoom:cf,getSizeData:Pw});function uB(o,r,s){return o.sections.forEach(u=>{u.text=function(p,g,y){const b=g.layout.get("text-transform").evaluate(y,{});return b==="uppercase"?p=p.toLocaleUpperCase():b==="lowercase"&&(p=p.toLocaleLowerCase()),I.applyArabicShaping&&(p=I.applyArabicShaping(p)),p}(u.text,r,s)}),o}const Gm={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function dB(o){return o==="︶"||o==="﹈"||o==="︸"||o==="﹄"||o==="﹂"||o==="︾"||o==="︼"||o==="︺"||o==="︘"||o==="﹀"||o==="︐"||o==="︓"||o==="︔"||o==="｀"||o==="￣"||o==="︑"||o==="︒"}function hB(o){return o==="︵"||o==="﹇"||o==="︷"||o==="﹃"||o==="﹁"||o==="︽"||o==="︻"||o==="︹"||o==="︗"||o==="︿"}var f8=ni,m8=function(o,r,s,u,p){var g,y,b=8*p-u-1,T=(1<<b)-1,k=T>>1,D=-7,L=s?p-1:0,F=s?-1:1,U=o[r+L];for(L+=F,g=U&(1<<-D)-1,U>>=-D,D+=b;D>0;g=256*g+o[r+L],L+=F,D-=8);for(y=g&(1<<-D)-1,g>>=-D,D+=u;D>0;y=256*y+o[r+L],L+=F,D-=8);if(g===0)g=1-k;else{if(g===T)return y?NaN:1/0*(U?-1:1);y+=Math.pow(2,u),g-=k}return(U?-1:1)*y*Math.pow(2,g-u)},g8=function(o,r,s,u,p,g){var y,b,T,k=8*g-p-1,D=(1<<k)-1,L=D>>1,F=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=u?0:g-1,q=u?1:-1,ee=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,y=D):(y=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-y))<1&&(y--,T*=2),(r+=y+L>=1?F/T:F*Math.pow(2,1-L))*T>=2&&(y++,T/=2),y+L>=D?(b=0,y=D):y+L>=1?(b=(r*T-1)*Math.pow(2,p),y+=L):(b=r*Math.pow(2,L-1)*Math.pow(2,p),y=0));p>=8;o[s+U]=255&b,U+=q,b/=256,p-=8);for(y=y<<p|b,k+=p;k>0;o[s+U]=255&y,U+=q,y/=256,k-=8);o[s+U-q]|=128*ee};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function ni(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}ni.Varint=0,ni.Fixed64=1,ni.Bytes=2,ni.Fixed32=5;var Iw=4294967296,_8=1/Iw,y8=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function bu(o){return o.type===ni.Bytes?o.readVarint()+o.pos:o.pos+1}function uf(o,r,s){return s?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function v8(o,r,s){var u=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(u);for(var p=s.pos-1;p>=o;p--)s.buf[p+u]=s.buf[p]}function pB(o,r){for(var s=0;s<o.length;s++)r.writeVarint(o[s])}function fB(o,r){for(var s=0;s<o.length;s++)r.writeSVarint(o[s])}function mB(o,r){for(var s=0;s<o.length;s++)r.writeFloat(o[s])}function gB(o,r){for(var s=0;s<o.length;s++)r.writeDouble(o[s])}function _B(o,r){for(var s=0;s<o.length;s++)r.writeBoolean(o[s])}function yB(o,r){for(var s=0;s<o.length;s++)r.writeFixed32(o[s])}function vB(o,r){for(var s=0;s<o.length;s++)r.writeSFixed32(o[s])}function xB(o,r){for(var s=0;s<o.length;s++)r.writeFixed64(o[s])}function bB(o,r){for(var s=0;s<o.length;s++)r.writeSFixed64(o[s])}function _y(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function df(o,r,s){o[s]=r,o[s+1]=r>>>8,o[s+2]=r>>>16,o[s+3]=r>>>24}function x8(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}ni.prototype={destroy:function(){this.buf=null},readFields:function(o,r,s){for(s=s||this.length;this.pos<s;){var u=this.readVarint(),p=u>>3,g=this.pos;this.type=7&u,o(p,r,this),this.pos===g&&this.skip(u)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=_y(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=x8(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=_y(this.buf,this.pos)+_y(this.buf,this.pos+4)*Iw;return this.pos+=8,o},readSFixed64:function(){var o=_y(this.buf,this.pos)+x8(this.buf,this.pos+4)*Iw;return this.pos+=8,o},readFloat:function(){var o=m8(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=m8(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,s,u=this.buf;return r=127&(s=u[this.pos++]),s<128?r:(r|=(127&(s=u[this.pos++]))<<7,s<128?r:(r|=(127&(s=u[this.pos++]))<<14,s<128?r:(r|=(127&(s=u[this.pos++]))<<21,s<128?r:function(p,g,y){var b,T,k=y.buf;if(b=(112&(T=k[y.pos++]))>>4,T<128||(b|=(127&(T=k[y.pos++]))<<3,T<128)||(b|=(127&(T=k[y.pos++]))<<10,T<128)||(b|=(127&(T=k[y.pos++]))<<17,T<128)||(b|=(127&(T=k[y.pos++]))<<24,T<128)||(b|=(1&(T=k[y.pos++]))<<31,T<128))return uf(p,b,g);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=u[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&y8?function(s,u,p){return y8.decode(s.subarray(u,p))}(this.buf,r,o):function(s,u,p){for(var g="",y=u;y<p;){var b,T,k,D=s[y],L=null,F=D>239?4:D>223?3:D>191?2:1;if(y+F>p)break;F===1?D<128&&(L=D):F===2?(192&(b=s[y+1]))==128&&(L=(31&D)<<6|63&b)<=127&&(L=null):F===3?(T=s[y+2],(192&(b=s[y+1]))==128&&(192&T)==128&&((L=(15&D)<<12|(63&b)<<6|63&T)<=2047||L>=55296&&L<=57343)&&(L=null)):F===4&&(T=s[y+2],k=s[y+3],(192&(b=s[y+1]))==128&&(192&T)==128&&(192&k)==128&&((L=(15&D)<<18|(63&b)<<12|(63&T)<<6|63&k)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,F=1):L>65535&&(L-=65536,g+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),g+=String.fromCharCode(L),y+=F}return g}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==ni.Bytes)return o.push(this.readVarint(r));var s=bu(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==ni.Bytes)return o.push(this.readSVarint());var r=bu(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==ni.Bytes)return o.push(this.readBoolean());var r=bu(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==ni.Bytes)return o.push(this.readFloat());var r=bu(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==ni.Bytes)return o.push(this.readDouble());var r=bu(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==ni.Bytes)return o.push(this.readFixed32());var r=bu(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==ni.Bytes)return o.push(this.readSFixed32());var r=bu(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==ni.Bytes)return o.push(this.readFixed64());var r=bu(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==ni.Bytes)return o.push(this.readSFixed64());var r=bu(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===ni.Varint)for(;this.buf[this.pos++]>127;);else if(r===ni.Bytes)this.pos=this.readVarint()+this.pos;else if(r===ni.Fixed32)this.pos+=4;else{if(r!==ni.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),df(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),df(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),df(this.buf,-1&o,this.pos),df(this.buf,Math.floor(o*_8),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),df(this.buf,-1&o,this.pos),df(this.buf,Math.floor(o*_8),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,s){var u,p;if(r>=0?(u=r%4294967296|0,p=r/4294967296|0):(p=~(-r/4294967296),4294967295^(u=~(-r%4294967296))?u=u+1|0:(u=0,p=p+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(g,y,b){b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,b.buf[b.pos]=127&(g>>>=7)}(u,0,s),function(g,y){var b=(7&g)<<4;y.buf[y.pos++]|=b|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(u,p,g){for(var y,b,T=0;T<p.length;T++){if((y=p.charCodeAt(T))>55295&&y<57344){if(!b){y>56319||T+1===p.length?(u[g++]=239,u[g++]=191,u[g++]=189):b=y;continue}if(y<56320){u[g++]=239,u[g++]=191,u[g++]=189,b=y;continue}y=b-55296<<10|y-56320|65536,b=null}else b&&(u[g++]=239,u[g++]=191,u[g++]=189,b=null);y<128?u[g++]=y:(y<2048?u[g++]=y>>6|192:(y<65536?u[g++]=y>>12|224:(u[g++]=y>>18|240,u[g++]=y>>12&63|128),u[g++]=y>>6&63|128),u[g++]=63&y|128)}return g}(this.buf,o,this.pos);var s=this.pos-r;s>=128&&v8(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),g8(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),g8(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,r){this.pos++;var s=this.pos;o(r,this);var u=this.pos-s;u>=128&&v8(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u},writeMessage:function(o,r,s){this.writeTag(o,ni.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,pB,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,fB,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,_B,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,mB,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,gB,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,yB,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,vB,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,xB,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,bB,r)},writeBytesField:function(o,r){this.writeTag(o,ni.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,ni.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,ni.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,ni.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,ni.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,ni.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,ni.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,ni.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,ni.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,ni.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var yy=Q(f8);const Aw=3;function wB(o,r,s){r.glyphs=[],o===1&&s.readMessage(EB,r)}function EB(o,r,s){if(o===3){const{id:u,bitmap:p,width:g,height:y,left:b,top:T,advance:k}=s.readMessage(TB,{});r.glyphs.push({id:u,bitmap:new xu({width:g+2*Aw,height:y+2*Aw},p),metrics:{width:g,height:y,left:b,top:T,advance:k}})}else o===4?r.ascender=s.readSVarint():o===5&&(r.descender=s.readSVarint())}function TB(o,r,s){o===1?r.id=s.readVarint():o===2?r.bitmap=s.readBytes():o===3?r.width=s.readVarint():o===4?r.height=s.readVarint():o===5?r.left=s.readSVarint():o===6?r.top=s.readSVarint():o===7&&(r.advance=s.readVarint())}const b8=Aw;function Mw(o){let r=0,s=0;for(const y of o)r+=y.w*y.h,s=Math.max(s,y.w);o.sort((y,b)=>b.h-y.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let p=0,g=0;for(const y of o)for(let b=u.length-1;b>=0;b--){const T=u[b];if(!(y.w>T.w||y.h>T.h)){if(y.x=T.x,y.y=T.y,g=Math.max(g,y.y+y.h),p=Math.max(p,y.x+y.w),y.w===T.w&&y.h===T.h){const k=u.pop();b<u.length&&(u[b]=k)}else y.h===T.h?(T.x+=y.w,T.w-=y.w):y.w===T.w?(T.y+=y.h,T.h-=y.h):(u.push({x:T.x+y.w,y:T.y,w:T.w-y.w,h:y.h}),T.y+=y.h,T.h-=y.h);break}}return{w:p,h:g,fill:r/(p*g)||0}}const Va=1;class Dw{constructor(r,{pixelRatio:s,version:u,stretchX:p,stretchY:g,content:y}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=p,this.stretchY=g,this.content=y,this.version=u}get tl(){return[this.paddedRect.x+Va,this.paddedRect.y+Va]}get br(){return[this.paddedRect.x+this.paddedRect.w-Va,this.paddedRect.y+this.paddedRect.h-Va]}get displaySize(){return[(this.paddedRect.w-2*Va)/this.pixelRatio,(this.paddedRect.h-2*Va)/this.pixelRatio]}}class w8{constructor(r,s){const u={},p={};this.haveRenderCallbacks=[];const g=[];this.addImages(r,u,g),this.addImages(s,p,g);const{w:y,h:b}=Mw(g),T=new ns({width:y||1,height:b||1});for(const k in r){const D=r[k],L=u[k].paddedRect;ns.copy(D.data,T,{x:0,y:0},{x:L.x+Va,y:L.y+Va},D.data)}for(const k in s){const D=s[k],L=p[k].paddedRect,F=L.x+Va,U=L.y+Va,q=D.data.width,ee=D.data.height;ns.copy(D.data,T,{x:0,y:0},{x:F,y:U},D.data),ns.copy(D.data,T,{x:0,y:ee-1},{x:F,y:U-1},{width:q,height:1}),ns.copy(D.data,T,{x:0,y:0},{x:F,y:U+ee},{width:q,height:1}),ns.copy(D.data,T,{x:q-1,y:0},{x:F-1,y:U},{width:1,height:ee}),ns.copy(D.data,T,{x:0,y:0},{x:F+q,y:U},{width:1,height:ee})}this.image=T,this.iconPositions=u,this.patternPositions=p}addImages(r,s,u){for(const p in r){const g=r[p],y={x:0,y:0,w:g.data.width+2*Va,h:g.data.height+2*Va};u.push(y),s[p]=new Dw(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(r,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>r.hasImage(u)),r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in r.updatedImages)this.patchUpdatedImage(this.iconPositions[u],r.getImage(u),s),this.patchUpdatedImage(this.patternPositions[u],r.getImage(u),s)}patchUpdatedImage(r,s,u){if(!r||!s||r.version===s.version)return;r.version=s.version;const[p,g]=r.tl;u.update(s.data,void 0,{x:p,y:g})}}wn(Dw,"ImagePosition"),wn(w8,"ImageAtlas");const Is={horizontal:1,vertical:2,horizontalOnly:3},E8=-17;class Zm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const u=new Zm;return u.scale=r||1,u.fontStack=s,u}static forImage(r){const s=new Zm;return s.imageName=r,s}}class hf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const u=new hf;for(let p=0;p<r.sections.length;p++){const g=r.sections[p];g.image?u.addImageSection(g):u.addTextSection(g,s)}return u}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(r){this.text=function(s,u){let p="";for(let g=0;g<s.length;g++){const y=s.charCodeAt(g+1)||null,b=s.charCodeAt(g-1)||null;p+=!u&&(y&&G_(y)&&!Gm[s[g+1]]||b&&G_(b)&&!Gm[s[g-1]])||!Gm[s[g]]?s[g]:Gm[s[g]]}return p}(this.text,r)}trim(){let r=0;for(let u=0;u<this.text.length&&vy[this.text.charCodeAt(u)];u++)r++;let s=this.text.length;for(let u=this.text.length-1;u>=0&&u>=r&&vy[this.text.charCodeAt(u)];u--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const u=new hf;return u.text=this.text.substring(r,s),u.sectionIndex=this.sectionIndex.slice(r,s),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(Zm.forText(r.scale,r.fontStack||s));const u=this.sections.length-1;for(let p=0;p<r.text.length;++p)this.sectionIndex.push(u)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void Ct("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Zm.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ct("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Rw(o,r,s,u,p,g,y,b,T,k,D,L,F,U,q){const ee=hf.fromFeature(o,p);L===Is.vertical&&ee.verticalizePunctuation(F);let ce=[];const ye=function(Oe,ht,st,bt,Vt,mt){if(!Oe)return[];const It=[],At=function(un,kn,hn,ar,Kt,Bn){let sr=0;for(let Rr=0;Rr<un.length();Rr++){const lr=un.getSection(Rr);sr+=T8(un.getCharCode(Rr),lr,ar,Kt,kn,Bn)}return sr/Math.max(1,Math.ceil(sr/hn))}(Oe,ht,st,bt,Vt,mt),Nt=Oe.text.indexOf("​")>=0;let Gt=0;for(let un=0;un<Oe.length();un++){const kn=Oe.getSection(un),hn=Oe.getCharCode(un);if(vy[hn]||(Gt+=T8(hn,kn,bt,Vt,ht,mt)),un<Oe.length()-1){const ar=!((xt=hn)<11904||!(pn["Bopomofo Extended"](xt)||pn.Bopomofo(xt)||pn["CJK Compatibility Forms"](xt)||pn["CJK Compatibility Ideographs"](xt)||pn["CJK Compatibility"](xt)||pn["CJK Radicals Supplement"](xt)||pn["CJK Strokes"](xt)||pn["CJK Symbols and Punctuation"](xt)||pn["CJK Unified Ideographs Extension A"](xt)||pn["CJK Unified Ideographs"](xt)||pn["Enclosed CJK Letters and Months"](xt)||pn["Halfwidth and Fullwidth Forms"](xt)||pn.Hiragana(xt)||pn["Ideographic Description Characters"](xt)||pn["Kangxi Radicals"](xt)||pn["Katakana Phonetic Extensions"](xt)||pn.Katakana(xt)||pn["Vertical Forms"](xt)||pn["Yi Radicals"](xt)||pn["Yi Syllables"](xt)));(SB[hn]||ar||kn.imageName)&&It.push(k8(un+1,Gt,At,It,kB(hn,Oe.getCharCode(un+1),ar&&Nt),!1))}}var xt;return C8(k8(Oe.length(),Gt,At,It,0,!0))}(ee,k,g,r,u,U),{processBidirectionalText:Ae,processStyledBidirectionalText:ve}=I;if(Ae&&ee.sections.length===1){const Oe=Ae(ee.toString(),ye);for(const ht of Oe){const st=new hf;st.text=ht,st.sections=ee.sections;for(let bt=0;bt<ht.length;bt++)st.sectionIndex.push(0);ce.push(st)}}else if(ve){const Oe=ve(ee.text,ee.sectionIndex,ye);for(const ht of Oe){const st=new hf;st.text=ht[0],st.sectionIndex=ht[1],st.sections=ee.sections,ce.push(st)}}else ce=function(Oe,ht){const st=[],bt=Oe.text;let Vt=0;for(const mt of ht)st.push(Oe.substring(Vt,mt)),Vt=mt;return Vt<bt.length&&st.push(Oe.substring(Vt,bt.length)),st}(ee,ye);const Ie=[],Le={positionedLines:Ie,text:ee.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:L,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Oe,ht,st,bt,Vt,mt,It,At,Nt,Gt,xt,un){let kn=0,hn=0,ar=0;const Kt=At==="right"?1:At==="left"?0:.5;let Bn=!1;for(const ur of Vt){const dr=ur.getSections();for(const Zr of dr){if(Zr.imageName)continue;const ri=ht[Zr.fontStack];if(ri&&(Bn=ri.ascender!==void 0&&ri.descender!==void 0,!Bn))break}if(!Bn)break}let sr=0;for(const ur of Vt){ur.trim();const dr=ur.getMaxScale(),Zr=(dr-1)*Oo,ri={positionedGlyphs:[],lineOffset:0};Oe.positionedLines[sr]=ri;const ii=ri.positionedGlyphs;let Xr=0;if(!ur.length()){hn+=mt,++sr;continue}let wi=0,Oi=0;for(let Kr=0;Kr<ur.length();Kr++){const ao=ur.getSection(Kr),Yi=ur.getSectionIndex(Kr),Mi=ur.getCharCode(Kr);let Lr=ao.scale,Ji=null,oi=null,ba=null,Qi=Oo,Lo=0;const Eo=!(Nt===Is.horizontal||!xt&&!bm(Mi)||xt&&(vy[Mi]||(Rr=Mi,pn.Arabic(Rr)||pn["Arabic Supplement"](Rr)||pn["Arabic Extended-A"](Rr)||pn["Arabic Presentation Forms-A"](Rr)||pn["Arabic Presentation Forms-B"](Rr))));if(ao.imageName){const wa=bt[ao.imageName];if(!wa)continue;ba=ao.imageName,Oe.iconsInText=Oe.iconsInText||!0,oi=wa.paddedRect;const To=wa.displaySize;Lr=Lr*Oo/un,Ji={width:To[0],height:To[1],left:Va,top:-b8,advance:Eo?To[1]:To[0],localGlyph:!1},Lo=Bn?-Ji.height*Lr:E8+dr*Oo-To[1]*Lr,Qi=Ji.advance;const Wl=(Eo?To[0]:To[1])*Lr-Oo*dr;Wl>0&&Wl>Xr&&(Xr=Wl)}else{const wa=st[ao.fontStack];if(!wa)continue;wa[Mi]&&(oi=wa[Mi]);const To=ht[ao.fontStack];if(!To)continue;const Wl=To.glyphs[Mi];if(!Wl)continue;if(Ji=Wl.metrics,Qi=Mi!==8203?Oo:0,Bn){const vf=To.ascender!==void 0?Math.abs(To.ascender):0,ig=To.descender!==void 0?Math.abs(To.descender):0,og=(vf+ig)*Lr;wi<og&&(wi=og,Oi=(vf-ig)/2*Lr),Lo=-vf*Lr}else Lo=E8+(dr-Lr)*Oo}Eo?(Oe.verticalizable=!0,ii.push({glyph:Mi,imageName:ba,x:kn,y:hn+Lo,vertical:Eo,scale:Lr,localGlyph:Ji.localGlyph,fontStack:ao.fontStack,sectionIndex:Yi,metrics:Ji,rect:oi}),kn+=Qi*Lr+Gt):(ii.push({glyph:Mi,imageName:ba,x:kn,y:hn+Lo,vertical:Eo,scale:Lr,localGlyph:Ji.localGlyph,fontStack:ao.fontStack,sectionIndex:Yi,metrics:Ji,rect:oi}),kn+=Ji.advance*Lr+Gt)}ii.length!==0&&(ar=Math.max(kn-Gt,ar),Bn?P8(ii,Kt,Xr,Oi,mt*dr/2):P8(ii,Kt,Xr,0,mt/2)),kn=0;const Ki=mt*dr+Xr;ri.lineOffset=Math.max(Xr,Zr),hn+=Ki,++sr}var Rr;const lr=hn,{horizontalAlign:Kn,verticalAlign:ci}=Ow(It);(function(ur,dr,Zr,ri,ii,Xr){const wi=(dr-Zr)*ii,Oi=-Xr*ri;for(const Ki of ur)for(const Kr of Ki.positionedGlyphs)Kr.x+=wi,Kr.y+=Oi})(Oe.positionedLines,Kt,Kn,ci,ar,lr),Oe.top+=-ci*lr,Oe.bottom=Oe.top+lr,Oe.left+=-Kn*ar,Oe.right=Oe.left+ar,Oe.hasBaseline=Bn}(Le,r,s,u,ce,y,b,T,L,k,F,q),!function(Oe){for(const ht of Oe)if(ht.positionedGlyphs.length!==0)return!1;return!0}(Ie)&&Le}const vy={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},SB={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function T8(o,r,s,u,p,g){if(r.imageName){const y=u[r.imageName];return y?y.displaySize[0]*r.scale*Oo/g+p:0}{const y=s[r.fontStack],b=y&&y.glyphs[o];return b?b.metrics.advance*r.scale+p:0}}function S8(o,r,s,u){const p=Math.pow(o-r,2);return u?o<r?p/2:2*p:p+Math.abs(s)*s}function kB(o,r,s){let u=0;return o===10&&(u-=1e4),s&&(u+=150),o!==40&&o!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function k8(o,r,s,u,p,g){let y=null,b=S8(r,s,p,g);for(const T of u){const k=S8(r-T.x,s,p,g)+T.badness;k<=b&&(y=T,b=k)}return{index:o,x:r,priorBreak:y,badness:b}}function C8(o){return o?C8(o.priorBreak).concat(o.index):[]}function Ow(o){let r=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function P8(o,r,s,u,p){if(!(r||s||u||p))return;const g=o.length-1,y=o[g],b=(y.x+y.metrics.advance*y.scale)*r;for(let T=0;T<=g;T++)o[T].x-=b,o[T].y+=s+u+p}function CB(o,r,s){const{horizontalAlign:u,verticalAlign:p}=Ow(s),g=r[0]-o.displaySize[0]*u,y=r[1]-o.displaySize[1]*p;return{image:o,top:y,bottom:y+o.displaySize[1],left:g,right:g+o.displaySize[0]}}function I8(o,r,s,u,p,g){const y=o.image;let b;if(y.content){const ce=y.content,ye=y.pixelRatio||1;b=[ce[0]/ye,ce[1]/ye,y.displaySize[0]-ce[2]/ye,y.displaySize[1]-ce[3]/ye]}const T=r.left*g,k=r.right*g;let D,L,F,U;s==="width"||s==="both"?(U=p[0]+T-u[3],L=p[0]+k+u[1]):(U=p[0]+(T+k-y.displaySize[0])/2,L=U+y.displaySize[0]);const q=r.top*g,ee=r.bottom*g;return s==="height"||s==="both"?(D=p[1]+q-u[0],F=p[1]+ee+u[2]):(D=p[1]+(q+ee-y.displaySize[1])/2,F=D+y.displaySize[1]),{image:y,top:D,right:L,bottom:F,left:U,collisionPadding:b}}class wu extends _e{constructor(r,s,u,p,g){super(r,s),this.angle=p,this.z=u,g!==void 0&&(this.segment=g)}clone(){return new wu(this.x,this.y,this.z,this.angle,this.segment)}}function A8(o,r,s,u,p){if(r.segment===void 0)return!0;let g=r,y=r.segment+1,b=0;for(;b>-s/2;){if(y--,y<0)return!1;b-=o[y].dist(g),g=o[y]}b+=o[y].dist(o[y+1]),y++;const T=[];let k=0;for(;b<s/2;){const D=o[y],L=o[y+1];if(!L)return!1;let F=o[y-1].angleTo(D)-D.angleTo(L);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:b,angleDelta:F}),k+=F;b-T[0].distance>u;)k-=T.shift().angleDelta;if(k>p)return!1;y++,b+=D.dist(L)}return!0}function M8(o){let r=0;for(let s=0;s<o.length-1;s++)r+=o[s].dist(o[s+1]);return r}function D8(o,r,s){return o?.6*r*s:0}function R8(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function PB(o,r,s,u,p,g){const y=D8(s,p,g),b=R8(s,u)*g;let T=0;const k=M8(o)/2;for(let D=0;D<o.length-1;D++){const L=o[D],F=o[D+1],U=L.dist(F);if(T+U>k){const q=(k-T)/U,ee=wr(L.x,F.x,q),ce=wr(L.y,F.y,q),ye=new wu(ee,ce,0,F.angleTo(L),D);return!y||A8(o,ye,b,y,r)?ye:void 0}T+=U}}function IB(o,r,s,u,p,g,y,b,T){const k=D8(u,g,y),D=R8(u,p),L=D*y,F=o[0].x===0||o[0].x===T||o[0].y===0||o[0].y===T;return r-L<r/4&&(r=L+r/4),O8(o,F?r/2*b%r:(D/2+2*g)*y*b%r,r,k,s,L,F,!1,T)}function O8(o,r,s,u,p,g,y,b,T){const k=g/2,D=M8(o);let L=0,F=r-s,U=[];for(let q=0;q<o.length-1;q++){const ee=o[q],ce=o[q+1],ye=ee.dist(ce),Ae=ce.angleTo(ee);for(;F+s<L+ye;){F+=s;const ve=(F-L)/ye,Ie=wr(ee.x,ce.x,ve),Le=wr(ee.y,ce.y,ve);if(Ie>=0&&Ie<T&&Le>=0&&Le<T&&F-k>=0&&F+k<=D){const Oe=new wu(Ie,Le,0,Ae,q);Oe._round(),u&&!A8(o,Oe,g,u,p)||U.push(Oe)}}L+=ye}return b||U.length||y||(U=O8(o,L/2,s,u,p,g,y,!0,T)),U}function L8(o,r,s,u,p){const g=[];for(let y=0;y<o.length;y++){const b=o[y];let T;for(let k=0;k<b.length-1;k++){let D=b[k],L=b[k+1];D.x<r&&L.x<r||(D.x<r?D=new _e(r,D.y+(r-D.x)/(L.x-D.x)*(L.y-D.y))._round():L.x<r&&(L=new _e(r,D.y+(r-D.x)/(L.x-D.x)*(L.y-D.y))._round()),D.y<s&&L.y<s||(D.y<s?D=new _e(D.x+(s-D.y)/(L.y-D.y)*(L.x-D.x),s)._round():L.y<s&&(L=new _e(D.x+(s-D.y)/(L.y-D.y)*(L.x-D.x),s)._round()),D.x>=u&&L.x>=u||(D.x>=u?D=new _e(u,D.y+(u-D.x)/(L.x-D.x)*(L.y-D.y))._round():L.x>=u&&(L=new _e(u,D.y+(u-D.x)/(L.x-D.x)*(L.y-D.y))._round()),D.y>=p&&L.y>=p||(D.y>=p?D=new _e(D.x+(p-D.y)/(L.y-D.y)*(L.x-D.x),p)._round():L.y>=p&&(L=new _e(D.x+(p-D.y)/(L.y-D.y)*(L.x-D.x),p)._round()),T&&D.equals(T[T.length-1])||(T=[D],g.push(T)),T.push(L)))))}}return g}wn(wu,"Anchor");const Xm=1e20;function z8(o,r,s,u,p,g,y,b,T){for(let k=r;k<r+u;k++)N8(o,s*g+k,g,p,y,b,T);for(let k=s;k<s+p;k++)N8(o,k*g+r,1,u,y,b,T)}function N8(o,r,s,u,p,g,y){g[0]=0,y[0]=-Xm,y[1]=Xm,p[0]=o[r];for(let b=1,T=0,k=0;b<u;b++){p[b]=o[r+b*s];const D=b*b;do{const L=g[T];k=(p[b]-p[L]+D-L*L)/(b-L)/2}while(k<=y[T]&&--T>-1);T++,g[T]=b,y[T]=k,y[T+1]=Xm}for(let b=0,T=0;b<u;b++){for(;y[T+1]<b;)T++;const k=g[T],D=b-k;o[r+b*s]=p[k]+D*D}}const Ul=2,Lw={none:0,ideographs:1,all:2};class pf{constructor(r,s,u){this.requestManager=r,this.localGlyphMode=s,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r){this.url=r}getGlyphs(r,s){const u=[];for(const p in r)for(const g of r[p])u.push({stack:p,id:g});Dt(u,({stack:p,id:g},y)=>{let b=this.entries[p];b||(b=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=b.glyphs[g];if(T!==void 0)return void y(null,{stack:p,id:g,glyph:T});if(T=this._tinySDF(b,p,g),T)return b.glyphs[g]=T,void y(null,{stack:p,id:g,glyph:T});const k=Math.floor(g/256);if(256*k>65535)return void y(new Error("glyphs > 65535 not supported"));if(b.ranges[k])return void y(null,{stack:p,id:g,glyph:T});let D=b.requests[k];D||(D=b.requests[k]=[],pf.loadGlyphRange(p,k,this.url,this.requestManager,(L,F)=>{if(F){b.ascender=F.ascender,b.descender=F.descender;for(const U in F.glyphs)this._doesCharSupportLocalGlyph(+U)||(b.glyphs[+U]=F.glyphs[+U]);b.ranges[k]=!0}for(const U of D)U(L,F);delete b.requests[k]})),D.push((L,F)=>{L?y(L):F&&y(null,{stack:p,id:g,glyph:F.glyphs[g]||null})})},(p,g)=>{if(p)s(p);else if(g){const y={};for(const{stack:b,id:T,glyph:k}of g)y[b]===void 0&&(y[b]={}),y[b].glyphs===void 0&&(y[b].glyphs={}),y[b].glyphs[T]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics},y[b].ascender=this.entries[b].ascender,y[b].descender=this.entries[b].descender;s(null,y)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==Lw.none&&(this.localGlyphMode===Lw.all?!!this.localFontFamily:!!this.localFontFamily&&(pn["CJK Unified Ideographs"](r)||pn["Hangul Syllables"](r)||pn.Hiragana(r)||pn.Katakana(r)||pn["CJK Symbols and Punctuation"](r)))}_tinySDF(r,s,u){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(u))return;let g=r.tinySDF;if(!g){let ee="400";/bold/i.test(s)?ee="900":/medium/i.test(s)?ee="500":/light/i.test(s)&&(ee="200"),g=r.tinySDF=new pf.TinySDF({fontFamily:p,fontWeight:ee,fontSize:24*Ul,buffer:3*Ul,radius:8*Ul}),g.fontWeight=ee}if(this.localGlyphs[g.fontWeight][u])return this.localGlyphs[g.fontWeight][u];const y=String.fromCharCode(u),{data:b,width:T,height:k,glyphWidth:D,glyphHeight:L,glyphLeft:F,glyphTop:U,glyphAdvance:q}=g.draw(y);return this.localGlyphs[g.fontWeight][u]={id:u,bitmap:new xu({width:T,height:k},b),metrics:{width:D/Ul,height:L/Ul,left:F/Ul,top:U/Ul-27,advance:q/Ul,localGlyph:!0}}}}pf.loadGlyphRange=function(o,r,s,u,p){const g=256*r,y=g+255,b=u.transformRequest(u.normalizeGlyphsURL(s).replace("{fontstack}",o).replace("{range}",`${g}-${y}`),Fn.Glyphs);vi(b,(T,k)=>{if(T)p(T);else if(k){const D={},L=function(F){return new yy(F).readFields(wB,{})}(k);for(const F of L.glyphs)D[F.id]=F;p(null,{glyphs:D,ascender:L.ascender,descender:L.descender})}})},pf.TinySDF=class{constructor({fontSize:o=24,buffer:r=3,radius:s=8,cutoff:u=.25,fontFamily:p="sans-serif",fontWeight:g="normal",fontStyle:y="normal"}={}){this.buffer=r,this.cutoff=u,this.radius=s;const b=this.size=o+4*r,T=this._createCanvas(b),k=this.ctx=T.getContext("2d",{willReadFrequently:!0});k.font=`${y} ${g} ${o}px ${p}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(o){const r=document.createElement("canvas");return r.width=r.height=o,r}draw(o){const{width:r,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u,actualBoundingBoxLeft:p,actualBoundingBoxRight:g}=this.ctx.measureText(o),y=Math.ceil(s),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-p))),T=Math.min(this.size-this.buffer,y+Math.ceil(u)),k=b+2*this.buffer,D=T+2*this.buffer,L=Math.max(k*D,0),F=new Uint8ClampedArray(L),U={data:F,width:k,height:D,glyphWidth:b,glyphHeight:T,glyphTop:y,glyphLeft:0,glyphAdvance:r};if(b===0||T===0)return U;const{ctx:q,buffer:ee,gridInner:ce,gridOuter:ye}=this;q.clearRect(ee,ee,b,T),q.fillText(o,ee,ee+y);const Ae=q.getImageData(ee,ee,b,T);ye.fill(Xm,0,L),ce.fill(0,0,L);for(let ve=0;ve<T;ve++)for(let Ie=0;Ie<b;Ie++){const Le=Ae.data[4*(ve*b+Ie)+3]/255;if(Le===0)continue;const Oe=(ve+ee)*k+Ie+ee;if(Le===1)ye[Oe]=0,ce[Oe]=Xm;else{const ht=.5-Le;ye[Oe]=ht>0?ht*ht:0,ce[Oe]=ht<0?ht*ht:0}}z8(ye,0,0,k,D,k,this.f,this.v,this.z),z8(ce,ee,ee,b,T,k,this.f,this.v,this.z);for(let ve=0;ve<L;ve++){const Ie=Math.sqrt(ye[ve])-Math.sqrt(ce[ve]);F[ve]=Math.round(255-255*(Ie/this.radius+this.cutoff))}return U}};const ff=Va;function F8(o,r,s,u){const p=[],g=o.image,y=g.pixelRatio,b=g.paddedRect.w-2*ff,T=g.paddedRect.h-2*ff,k=o.right-o.left,D=o.bottom-o.top,L=g.stretchX||[[0,b]],F=g.stretchY||[[0,T]],U=(mt,It)=>mt+It[1]-It[0],q=L.reduce(U,0),ee=F.reduce(U,0),ce=b-q,ye=T-ee;let Ae=0,ve=q,Ie=0,Le=ee,Oe=0,ht=ce,st=0,bt=ye;if(g.content&&u){const mt=g.content;Ae=xy(L,0,mt[0]),Ie=xy(F,0,mt[1]),ve=xy(L,mt[0],mt[2]),Le=xy(F,mt[1],mt[3]),Oe=mt[0]-Ae,st=mt[1]-Ie,ht=mt[2]-mt[0]-ve,bt=mt[3]-mt[1]-Le}const Vt=(mt,It,At,Nt)=>{const Gt=by(mt.stretch-Ae,ve,k,o.left),xt=wy(mt.fixed-Oe,ht,mt.stretch,q),un=by(It.stretch-Ie,Le,D,o.top),kn=wy(It.fixed-st,bt,It.stretch,ee),hn=by(At.stretch-Ae,ve,k,o.left),ar=wy(At.fixed-Oe,ht,At.stretch,q),Kt=by(Nt.stretch-Ie,Le,D,o.top),Bn=wy(Nt.fixed-st,bt,Nt.stretch,ee),sr=new _e(Gt,un),Rr=new _e(hn,un),lr=new _e(hn,Kt),Kn=new _e(Gt,Kt),ci=new _e(xt/y,kn/y),ur=new _e(ar/y,Bn/y),dr=r*Math.PI/180;if(dr){const ii=Math.sin(dr),Xr=Math.cos(dr),wi=[Xr,-ii,ii,Xr];sr._matMult(wi),Rr._matMult(wi),Kn._matMult(wi),lr._matMult(wi)}const Zr=mt.stretch+mt.fixed,ri=It.stretch+It.fixed;return{tl:sr,tr:Rr,bl:Kn,br:lr,tex:{x:g.paddedRect.x+ff+Zr,y:g.paddedRect.y+ff+ri,w:At.stretch+At.fixed-Zr,h:Nt.stretch+Nt.fixed-ri},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ci,pixelOffsetBR:ur,minFontScaleX:ht/y/k,minFontScaleY:bt/y/D,isSDF:s}};if(u&&(g.stretchX||g.stretchY)){const mt=B8(L,ce,q),It=B8(F,ye,ee);for(let At=0;At<mt.length-1;At++){const Nt=mt[At],Gt=mt[At+1];for(let xt=0;xt<It.length-1;xt++)p.push(Vt(Nt,It[xt],Gt,It[xt+1]))}}else p.push(Vt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:T+1}));return p}function xy(o,r,s){let u=0;for(const p of o)u+=Math.max(r,Math.min(s,p[1]))-Math.max(r,Math.min(s,p[0]));return u}function B8(o,r,s){const u=[{fixed:-ff,stretch:0}];for(const[p,g]of o){const y=u[u.length-1];u.push({fixed:p-y.stretch,stretch:y.stretch}),u.push({fixed:p-y.stretch,stretch:y.stretch+(g-p)})}return u.push({fixed:r+ff,stretch:s}),u}function by(o,r,s,u){return o/r*s+u}function wy(o,r,s,u){return o-r*s/u}function AB(o,r,s,u){const p=r+o.positionedLines[u].lineOffset;return u===0?s+p/2:s+(p+(r+o.positionedLines[u-1].lineOffset))/2}class MB{constructor(r=[],s=DB){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:u}=this,p=s[r];for(;r>0;){const g=r-1>>1,y=s[g];if(u(p,y)>=0)break;s[r]=y,r=g}s[r]=p}_down(r){const{data:s,compare:u}=this,p=this.length>>1,g=s[r];for(;r<p;){let y=1+(r<<1),b=s[y];const T=y+1;if(T<this.length&&u(s[T],b)<0&&(y=T,b=s[T]),u(b,g)>=0)break;s[r]=b,r=y}s[r]=g}}function DB(o,r){return o<r?-1:o>r?1:0}function RB(o,r=1,s=!1){let u=1/0,p=1/0,g=-1/0,y=-1/0;const b=o[0];for(let U=0;U<b.length;U++){const q=b[U];(!U||q.x<u)&&(u=q.x),(!U||q.y<p)&&(p=q.y),(!U||q.x>g)&&(g=q.x),(!U||q.y>y)&&(y=q.y)}const T=Math.min(g-u,y-p);let k=T/2;const D=new MB([],OB);if(T===0)return new _e(u,p);for(let U=u;U<g;U+=T)for(let q=p;q<y;q+=T)D.push(new mf(U+k,q+k,k,o));let L=function(U){let q=0,ee=0,ce=0;const ye=U[0];for(let Ae=0,ve=ye.length,Ie=ve-1;Ae<ve;Ie=Ae++){const Le=ye[Ae],Oe=ye[Ie],ht=Le.x*Oe.y-Oe.x*Le.y;ee+=(Le.x+Oe.x)*ht,ce+=(Le.y+Oe.y)*ht,q+=3*ht}return new mf(ee/q,ce/q,0,U)}(o),F=D.length;for(;D.length;){const U=D.pop();(U.d>L.d||!L.d)&&(L=U,s&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,F)),U.max-L.d<=r||(k=U.h/2,D.push(new mf(U.p.x-k,U.p.y-k,k,o)),D.push(new mf(U.p.x+k,U.p.y-k,k,o)),D.push(new mf(U.p.x-k,U.p.y+k,k,o)),D.push(new mf(U.p.x+k,U.p.y+k,k,o)),F+=4)}return s&&(console.log(`num probes: ${F}`),console.log(`best distance: ${L.d}`)),L.p}function OB(o,r){return r.max-o.max}class mf{constructor(r,s,u,p){this.p=new _e(r,s),this.h=u,this.d=function(g,y){let b=!1,T=1/0;for(let k=0;k<y.length;k++){const D=y[k];for(let L=0,F=D.length,U=F-1;L<F;U=L++){const q=D[L],ee=D[U];q.y>g.y!=ee.y>g.y&&g.x<(ee.x-q.x)*(g.y-q.y)/(ee.y-q.y)+q.x&&(b=!b),T=Math.min(T,OS(g,q,ee))}}return(b?1:-1)*Math.sqrt(T)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}}const gf=7,zw=Number.POSITIVE_INFINITY,LB=Math.sqrt(2);function j8(o,[r,s]){let u=0,p=0;if(s===zw){r<0&&(r=0);const g=r/LB;switch(o){case"top-right":case"top-left":p=g-gf;break;case"bottom-right":case"bottom-left":p=-g+gf;break;case"bottom":p=-r+gf;break;case"top":p=r-gf}switch(o){case"top-right":case"bottom-right":u=-g;break;case"top-left":case"bottom-left":u=g;break;case"left":u=r;break;case"right":u=-r}}else{switch(r=Math.abs(r),s=Math.abs(s),o){case"top-right":case"top-left":case"top":p=s-gf;break;case"bottom-right":case"bottom-left":case"bottom":p=-s+gf}switch(o){case"top-right":case"bottom-right":case"right":u=-r;break;case"top-left":case"bottom-left":case"left":u=r}}return[u,p]}function zB(o,r,s,u,p,g,y,b,T,k){o.createArrays(),o.tilePixelRatio=Hn/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const D=o.layers[0].layout,L=o.layers[0]._unevaluatedLayout._values,F={};if(o.textSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ce}=o.textSizeData;F.compositeTextSizes=[L["text-size"].possiblyEvaluate(new O(ee),b),L["text-size"].possiblyEvaluate(new O(ce),b)]}if(o.iconSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ce}=o.iconSizeData;F.compositeIconSizes=[L["icon-size"].possiblyEvaluate(new O(ee),b),L["icon-size"].possiblyEvaluate(new O(ce),b)]}F.layoutTextSize=L["text-size"].possiblyEvaluate(new O(T+1),b),F.layoutIconSize=L["icon-size"].possiblyEvaluate(new O(T+1),b),F.textMaxSize=L["text-size"].possiblyEvaluate(new O(18),b);const U=D.get("text-rotation-alignment")==="map"&&D.get("symbol-placement")!=="point",q=D.get("text-size");for(const ee of o.features){const ce=D.get("text-font").evaluate(ee,{},b).join(","),ye=q.evaluate(ee,{},b),Ae=F.layoutTextSize.evaluate(ee,{},b),ve=(F.layoutIconSize.evaluate(ee,{},b),{horizontal:{},vertical:void 0}),Ie=ee.text;let Le,Oe=[0,0];if(Ie){const bt=Ie.toString(),Vt=D.get("text-letter-spacing").evaluate(ee,{},b)*Oo,mt=D.get("text-line-height").evaluate(ee,{},b)*Oo,It=Hb(bt)?Vt:0,At=D.get("text-anchor").evaluate(ee,{},b),Nt=D.get("text-variable-anchor");if(!Nt){const hn=D.get("text-radial-offset").evaluate(ee,{},b);Oe=hn?j8(At,[hn*Oo,zw]):D.get("text-offset").evaluate(ee,{},b).map(ar=>ar*Oo)}let Gt=U?"center":D.get("text-justify").evaluate(ee,{},b);const xt=D.get("symbol-placement")==="point",un=xt?D.get("text-max-width").evaluate(ee,{},b)*Oo:1/0,kn=hn=>{o.allowVerticalPlacement&&xm(bt)&&(ve.vertical=Rw(Ie,r,s,p,ce,un,mt,At,hn,It,Oe,Is.vertical,!0,Ae,ye))};if(!U&&Nt){const hn=Gt==="auto"?Nt.map(Kt=>Nw(Kt)):[Gt];let ar=!1;for(let Kt=0;Kt<hn.length;Kt++){const Bn=hn[Kt];if(!ve.horizontal[Bn])if(ar)ve.horizontal[Bn]=ve.horizontal[0];else{const sr=Rw(Ie,r,s,p,ce,un,mt,"center",Bn,It,Oe,Is.horizontal,!1,Ae,ye);sr&&(ve.horizontal[Bn]=sr,ar=sr.positionedLines.length===1)}}kn("left")}else{if(Gt==="auto"&&(Gt=Nw(At)),xt||D.get("text-writing-mode").indexOf("horizontal")>=0||!xm(bt)){const hn=Rw(Ie,r,s,p,ce,un,mt,At,Gt,It,Oe,Is.horizontal,!1,Ae,ye);hn&&(ve.horizontal[Gt]=hn)}kn(xt?"left":Gt)}}let ht=!1;if(ee.icon&&ee.icon.name){const bt=u[ee.icon.name];bt&&(Le=CB(p[ee.icon.name],D.get("icon-offset").evaluate(ee,{},b),D.get("icon-anchor").evaluate(ee,{},b)),ht=bt.sdf,o.sdfIcons===void 0?o.sdfIcons=bt.sdf:o.sdfIcons!==bt.sdf&&Ct("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(bt.pixelRatio!==o.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}const st=U8(ve.horizontal)||ve.vertical;o.iconsInText||(o.iconsInText=!!st&&st.iconsInText),(st||Le)&&NB(o,ee,ve,Le,u,F,Ae,0,Oe,ht,y,b,k)}g&&o.generateCollisionDebugBuffers(T,o.collisionBoxArray)}function Nw(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function NB(o,r,s,u,p,g,y,b,T,k,D,L,F){let U=g.textMaxSize.evaluate(r,{},L);U===void 0&&(U=y);const q=o.layers[0].layout,ee=q.get("icon-offset").evaluate(r,{},L),ce=U8(s.horizontal)||s.vertical,ye=F.name==="globe",Ae=Oo,ve=y/Ae,Ie=o.tilePixelRatio*U/Ae,Le=(At=o.overscaling,o.zoom>18&&At>2&&(At>>=1),Math.max(Hn/(512*At),1)*q.get("symbol-spacing")),Oe=q.get("text-padding")*o.tilePixelRatio,ht=q.get("icon-padding")*o.tilePixelRatio,st=gt(q.get("text-max-angle")),bt=q.get("text-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",Vt=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",mt=q.get("symbol-placement"),It=Le/2;var At;const Nt=q.get("icon-text-fit");let Gt;u&&Nt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Gt=I8(u,s.vertical,Nt,q.get("icon-text-fit-padding"),ee,ve)),ce&&(u=I8(u,ce,Nt,q.get("icon-text-fit-padding"),ee,ve)));const xt=(un,kn,hn)=>{if(kn.x<0||kn.x>=Hn||kn.y<0||kn.y>=Hn)return;let ar=null;if(ye){const{x:Kt,y:Bn,z:sr}=F.projectTilePoint(kn.x,kn.y,hn);ar={anchor:new wu(Kt,Bn,sr,0,void 0),up:F.upVector(hn,kn.x,kn.y)}}(function(Kt,Bn,sr,Rr,lr,Kn,ci,ur,dr,Zr,ri,ii,Xr,wi,Oi,Ki,Kr,ao,Yi,Mi,Lr,Ji,oi,ba,Qi){const Lo=Kt.addToLineVertexArray(Bn,Rr);let Eo,wa,To,Wl,vf,ig,og,b9=0,w9=0,E9=0,T9=0,Jw=-1,Qw=-1;const Ac={};let S9=Zb("");const Uh=sr?sr.anchor:Bn;let e3=0,t3=0;if(dr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[e3,t3]=dr.layout.get("text-offset").evaluate(Lr,{},Qi).map(rs=>rs*Oo):(e3=dr.layout.get("text-radial-offset").evaluate(Lr,{},Qi)*Oo,t3=zw),Kt.allowVerticalPlacement&&lr.vertical){const rs=lr.vertical;if(Oi)ig=Fw(rs),ur&&(og=Fw(ur));else{const is=dr.layout.get("text-rotate").evaluate(Lr,{},Qi)+90;To=Ey(Zr,Uh,Bn,ri,ii,Xr,rs,wi,is,Ki),ur&&(Wl=Ey(Zr,Uh,Bn,ri,ii,Xr,ur,ao,is))}}if(Kn){const rs=dr.layout.get("icon-rotate").evaluate(Lr,{},Qi),is=dr.layout.get("icon-text-fit")!=="none",ag=F8(Kn,rs,oi,is),r3=ur?F8(ur,rs,oi,is):void 0;wa=Ey(Zr,Uh,Bn,ri,ii,Xr,Kn,ao,rs),b9=4*ag.length;const k9=Kt.iconSizeData;let Vh=null;k9.kind==="source"?(Vh=[$l*dr.layout.get("icon-size").evaluate(Lr,{},Qi)],Vh[0]>hd&&Ct(`${Kt.layerIds[0]}: Value for "icon-size" is >= ${Km}. Reduce your "icon-size".`)):k9.kind==="composite"&&(Vh=[$l*Ji.compositeIconSizes[0].evaluate(Lr,{},Qi),$l*Ji.compositeIconSizes[1].evaluate(Lr,{},Qi)],(Vh[0]>hd||Vh[1]>hd)&&Ct(`${Kt.layerIds[0]}: Value for "icon-size" is >= ${Km}. Reduce your "icon-size".`)),Kt.addSymbols(Kt.icon,ag,Vh,Mi,Yi,Lr,!1,sr,Bn,Lo.lineStartIndex,Lo.lineLength,-1,ba,Qi),Jw=Kt.icon.placedSymbolArray.length-1,r3&&(w9=4*r3.length,Kt.addSymbols(Kt.icon,r3,Vh,Mi,Yi,Lr,Is.vertical,sr,Bn,Lo.lineStartIndex,Lo.lineLength,-1,ba,Qi),Qw=Kt.icon.placedSymbolArray.length-1)}for(const rs in lr.horizontal){const is=lr.horizontal[rs];Eo||(S9=Zb(is.text),Oi?vf=Fw(is):Eo=Ey(Zr,Uh,Bn,ri,ii,Xr,is,wi,dr.layout.get("text-rotate").evaluate(Lr,{},Qi),Ki));const ag=is.positionedLines.length===1;if(E9+=$8(Kt,sr,Bn,is,ci,dr,Oi,Lr,Ki,Lo,lr.vertical?Is.horizontal:Is.horizontalOnly,ag?Object.keys(lr.horizontal):[rs],Ac,Jw,Ji,ba,Qi),ag)break}lr.vertical&&(T9+=$8(Kt,sr,Bn,lr.vertical,ci,dr,Oi,Lr,Ki,Lo,Is.vertical,["vertical"],Ac,Qw,Ji,ba,Qi));let yd=-1;const n3=(rs,is)=>rs?Math.max(rs,is):is;yd=n3(vf,yd),yd=n3(ig,yd),yd=n3(og,yd);const dj=yd>-1?1:0;Kt.glyphOffsetArray.length>=fd.MAX_GLYPHS&&Ct("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Lr.sortKey!==void 0&&Kt.addToSortKeyRanges(Kt.symbolInstances.length,Lr.sortKey),Kt.symbolInstances.emplaceBack(Uh.x,Uh.y,Uh.z,Bn.x,Bn.y,Ac.right>=0?Ac.right:-1,Ac.center>=0?Ac.center:-1,Ac.left>=0?Ac.left:-1,Ac.vertical>=0?Ac.vertical:-1,Jw,Qw,S9,Eo!==void 0?Eo:Kt.collisionBoxArray.length,Eo!==void 0?Eo+1:Kt.collisionBoxArray.length,To!==void 0?To:Kt.collisionBoxArray.length,To!==void 0?To+1:Kt.collisionBoxArray.length,wa!==void 0?wa:Kt.collisionBoxArray.length,wa!==void 0?wa+1:Kt.collisionBoxArray.length,Wl||Kt.collisionBoxArray.length,Wl?Wl+1:Kt.collisionBoxArray.length,ri,E9,T9,b9,w9,dj,0,e3,t3,yd)})(o,kn,ar,un,s,u,p,Gt,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Oe,bt,T,0,ht,Vt,ee,r,g,k,D,L)};if(mt==="line")for(const un of L8(r.geometry,0,0,Hn,Hn)){const kn=IB(un,Le,st,s.vertical||ce,u,Ae,Ie,o.overscaling,Hn);for(const hn of kn)ce&&FB(o,ce.text,It,hn)||xt(un,hn,L)}else if(mt==="line-center"){for(const un of r.geometry)if(un.length>1){const kn=PB(un,st,s.vertical||ce,u,Ae,Ie);kn&&xt(un,kn,L)}}else if(r.type==="Polygon")for(const un of Tw(r.geometry,0)){const kn=RB(un,16);xt(un[0],new wu(kn.x,kn.y,0,0,void 0),L)}else if(r.type==="LineString")for(const un of r.geometry)xt(un,new wu(un[0].x,un[0].y,0,0,void 0),L);else if(r.type==="Point")for(const un of r.geometry)for(const kn of un)xt([kn],new wu(kn.x,kn.y,0,0,void 0),L)}const Km=255,hd=Km*$l;function $8(o,r,s,u,p,g,y,b,T,k,D,L,F,U,q,ee,ce){const ye=function(Ie,Le,Oe,ht,st,bt,Vt,mt){const It=[];if(Le.positionedLines.length===0)return It;const At=ht.layout.get("text-rotate").evaluate(bt,{})*Math.PI/180,Nt=function(hn){const ar=hn[0],Kt=hn[1],Bn=ar*Kt;return Bn>0?[ar,-Kt]:Bn<0?[-ar,Kt]:ar===0?[Kt,ar]:[Kt,-ar]}(Oe);let Gt=Math.abs(Le.top-Le.bottom);for(const hn of Le.positionedLines)Gt-=hn.lineOffset;const xt=Le.positionedLines.length,un=Gt/xt;let kn=Le.top-Oe[1];for(let hn=0;hn<xt;++hn){const ar=Le.positionedLines[hn];kn=AB(Le,un,kn,hn);for(const Kt of ar.positionedGlyphs){if(!Kt.rect)continue;const Bn=Kt.rect||{};let sr=b8+1,Rr=!0,lr=1,Kn=0;if(Kt.imageName){const oi=Vt[Kt.imageName];if(!oi)continue;if(oi.sdf){Ct("SDF images are not supported in formatted text and will be ignored.");continue}Rr=!1,lr=oi.pixelRatio,sr=Va/lr}const ci=(st||mt)&&Kt.vertical,ur=Kt.metrics.advance*Kt.scale/2,dr=Kt.metrics,Zr=Kt.rect;if(Zr===null)continue;mt&&Le.verticalizable&&(Kn=Kt.imageName?ur-Kt.metrics.width*Kt.scale/2:0);const ri=st?[Kt.x+ur,Kt.y]:[0,0];let ii=[0,0],Xr=[0,0],wi=!1;st||(ci?(Xr=[Kt.x+ur+Nt[0],Kt.y+Nt[1]-Kn],wi=!0):ii=[Kt.x+ur+Oe[0],Kt.y+Oe[1]-Kn]);const Oi=Zr.w*Kt.scale/(lr*(Kt.localGlyph?Ul:1)),Ki=Zr.h*Kt.scale/(lr*(Kt.localGlyph?Ul:1));let Kr,ao,Yi,Mi;if(ci){const oi=Kt.y-kn,ba=new _e(-ur,ur-oi),Qi=-Math.PI/2,Lo=new _e(...Xr);Kr=new _e(-ur+ii[0],ii[1]),Kr._rotateAround(Qi,ba)._add(Lo),Kr.x+=-oi+ur,Kr.y-=(dr.left-sr)*Kt.scale;const Eo=Kt.imageName?dr.advance*Kt.scale:Oo*Kt.scale,wa=String.fromCharCode(Kt.glyph);dB(wa)?Kr.x+=(1-sr)*Kt.scale:hB(wa)?Kr.x+=Eo-dr.height*Kt.scale+(-sr-1)*Kt.scale:Kr.x+=Kt.imageName||dr.width+2*sr===Zr.w&&dr.height+2*sr===Zr.h?(Eo-Ki)/2:(Eo-(dr.height+2*sr)*Kt.scale)/2,ao=new _e(Kr.x,Kr.y-Oi),Yi=new _e(Kr.x+Ki,Kr.y),Mi=new _e(Kr.x+Ki,Kr.y-Oi)}else{const oi=(dr.left-sr)*Kt.scale-ur+ii[0],ba=(-dr.top-sr)*Kt.scale+ii[1],Qi=oi+Oi,Lo=ba+Ki;Kr=new _e(oi,ba),ao=new _e(Qi,ba),Yi=new _e(oi,Lo),Mi=new _e(Qi,Lo)}if(At){let oi;oi=st?new _e(0,0):wi?new _e(Nt[0],Nt[1]):new _e(Oe[0],Oe[1]),Kr._rotateAround(At,oi),ao._rotateAround(At,oi),Yi._rotateAround(At,oi),Mi._rotateAround(At,oi)}const Lr=new _e(0,0),Ji=new _e(0,0);It.push({tl:Kr,tr:ao,bl:Yi,br:Mi,tex:Bn,writingMode:Le.writingMode,glyphOffset:ri,sectionIndex:Kt.sectionIndex,isSDF:Rr,pixelOffsetTL:Lr,pixelOffsetBR:Ji,minFontScaleX:0,minFontScaleY:0})}}return It}(0,u,T,g,y,b,p,o.allowVerticalPlacement),Ae=o.textSizeData;let ve=null;Ae.kind==="source"?(ve=[$l*g.layout.get("text-size").evaluate(b,{},ce)],ve[0]>hd&&Ct(`${o.layerIds[0]}: Value for "text-size" is >= ${Km}. Reduce your "text-size".`)):Ae.kind==="composite"&&(ve=[$l*q.compositeTextSizes[0].evaluate(b,{},ce),$l*q.compositeTextSizes[1].evaluate(b,{},ce)],(ve[0]>hd||ve[1]>hd)&&Ct(`${o.layerIds[0]}: Value for "text-size" is >= ${Km}. Reduce your "text-size".`)),o.addSymbols(o.text,ye,ve,T,y,b,D,r,s,k.lineStartIndex,k.lineLength,U,ee,ce);for(const Ie of L)F[Ie]=o.text.placedSymbolArray.length-1;return 4*ye.length}function U8(o){for(const r in o)return o[r];return null}function Ey(o,r,s,u,p,g,y,b,T,k){let D=y.top,L=y.bottom,F=y.left,U=y.right;const q=y.collisionPadding;if(q&&(F-=q[0],D-=q[1],U+=q[2],L+=q[3]),T){const ee=new _e(F,D),ce=new _e(U,D),ye=new _e(F,L),Ae=new _e(U,L),ve=gt(T);let Ie=new _e(0,0);k&&(Ie=new _e(k[0],k[1])),ee._rotateAround(ve,Ie),ce._rotateAround(ve,Ie),ye._rotateAround(ve,Ie),Ae._rotateAround(ve,Ie),F=Math.min(ee.x,ce.x,ye.x,Ae.x),U=Math.max(ee.x,ce.x,ye.x,Ae.x),D=Math.min(ee.y,ce.y,ye.y,Ae.y),L=Math.max(ee.y,ce.y,ye.y,Ae.y)}return o.emplaceBack(r.x,r.y,r.z,s.x,s.y,F,D,U,L,b,u,p,g),o.length-1}function Fw(o){o.collisionPadding&&(o.top-=o.collisionPadding[1],o.bottom+=o.collisionPadding[3]);const r=o.bottom-o.top;return r>0?Math.max(10,r):null}function FB(o,r,s,u){const p=o.compareText;if(r in p){const g=p[r];for(let y=g.length-1;y>=0;y--)if(u.dist(g[y])<s)return!0}else p[r]=[];return p[r].push(u),!1}function V8(o,r){const s=o.fovAboveCenter,u=o.elevation?o.elevation.getMinElevationBelowMSL()*r:0,p=(o._camera.position[2]*o.worldSize-u)/Math.cos(o._pitch),g=Math.sin(s)*p/Math.sin(Math.max(Math.PI/2-o._pitch-s,.01)),y=Math.sin(o._pitch)*g+p;return Math.min(1.01*y,p*(1/o._horizonShift))}function jh(o,r){if(!r.isReprojectedInTileSpace)return{scale:1<<o.z,x:o.x,y:o.y,x2:o.x+1,y2:o.y+1,projection:r};const s=Math.pow(2,-o.z),u=o.x*s,p=(o.x+1)*s,g=o.y*s,y=(o.y+1)*s,b=Ps(u),T=Ps(p),k=Zo(g),D=Zo(y),L=r.project(b,k),F=r.project(T,k),U=r.project(T,D),q=r.project(b,D);let ee=Math.min(L.x,F.x,U.x,q.x),ce=Math.min(L.y,F.y,U.y,q.y),ye=Math.max(L.x,F.x,U.x,q.x),Ae=Math.max(L.y,F.y,U.y,q.y);const ve=s/16;function Ie(Oe,ht,st,bt,Vt,mt){const It=(st+Vt)/2,At=(bt+mt)/2,Nt=r.project(Ps(It),Zo(At)),Gt=Math.max(0,ee-Nt.x,ce-Nt.y,Nt.x-ye,Nt.y-Ae);ee=Math.min(ee,Nt.x),ye=Math.max(ye,Nt.x),ce=Math.min(ce,Nt.y),Ae=Math.max(Ae,Nt.y),Gt>ve&&(Ie(Oe,Nt,st,bt,It,At),Ie(Nt,ht,It,At,Vt,mt))}Ie(L,F,u,g,p,g),Ie(F,U,p,g,p,y),Ie(U,q,p,y,u,y),Ie(q,L,u,y,u,g),ee-=ve,ce-=ve,ye+=ve,Ae+=ve;const Le=1/Math.max(ye-ee,Ae-ce);return{scale:Le,x:ee*Le,y:ce*Le,x2:ye*Le,y2:Ae*Le,projection:r}}const BB=Fl(new Float32Array(16));class pd{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,s){return{x:0,y:0,z:0}}unproject(r,s){return new Gr(0,0)}projectTilePoint(r,s,u){return{x:r,y:s,z:0}}locationPoint(r,s,u=!0){return r._coordinatePoint(r.locationCoordinate(s),u)}pixelsPerMeter(r,s){return jl(1,r)*s}pixelSpaceConversion(r,s,u){return 1}farthestPixelDistance(r){return V8(r,r.pixelsPerMeter)}pointCoordinate(r,s,u,p){const g=r.horizonLineFromTop(!1),y=new _e(s,Math.max(g,u));return r.rayIntersectionCoordinate(r.pointRayIntersection(y,p))}pointCoordinate3D(r,s,u){const p=new _e(s,u);if(r.elevation)return r.elevation.pointCoordinate(p);{const g=this.pointCoordinate(r,p.x,p.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(r,s){if(r.elevation)return!this.pointCoordinate3D(r,s.x,s.y);const u=r.horizonLineFromTop();return s.y<u}createInversionMatrix(r,s){return BB}createTileMatrix(r,s,u){let p,g,y;const b=u.canonical,T=Fl(new Float64Array(16));if(this.isReprojectedInTileSpace){const k=jh(b,this);p=1,g=k.x+u.wrap*k.scale,y=k.y,Rh(T,T,[p/k.scale,p/k.scale,r.pixelsPerMeter/s])}else p=s/r.zoomScale(b.z),g=(b.x+Math.pow(2,b.z)*u.wrap)*p,y=b.y*p;return Cm(T,T,[g,y,0]),Rh(T,T,[p/Hn,p/Hn,1]),T}upVector(r,s,u){return[0,0,1]}upVectorScale(r,s,u){return{metersToTile:1}}}class jB extends pd{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[s,u]=this.parallels=r.parallels||[29.5,45.5],p=Math.sin(gt(s));this.n=(p+Math.sin(gt(u)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(r,s){const{n:u,c:p,r0:g}=this,y=gt(r-this.center[0]),b=gt(s),T=Math.sqrt(p-2*u*Math.sin(b))/u;return{x:T*Math.sin(y*u),y:T*Math.cos(y*u)-g,z:0}}unproject(r,s){const{n:u,c:p,r0:g}=this,y=g+s;let b=Math.atan2(r,Math.abs(y))*Math.sign(y);y*u<0&&(b-=Math.PI*Math.sign(r)*Math.sign(y));const T=gt(this.center[0])*u;b=it(b,-Math.PI-T,Math.PI-T);const k=Ne(Ze(b/u)+this.center[0],-180,180),D=Math.asin(Ne((p-(r*r+y*y)*u*u)/(2*u),-1,1)),L=Ne(Ze(D),-Xo,Xo);return new Gr(k,L)}}const Ym=1.340264,Jm=-.081106,Qm=893e-6,eg=.003796,Ty=Math.sqrt(3)/2;class $B extends pd{project(r,s){s=s/180*Math.PI,r=r/180*Math.PI;const u=Math.asin(Ty*Math.sin(s)),p=u*u,g=p*p*p;return{x:.5*(r*Math.cos(u)/(Ty*(Ym+3*Jm*p+g*(7*Qm+9*eg*p)))/Math.PI+.5),y:1-.5*(u*(Ym+Jm*p+g*(Qm+eg*p))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,p=u*u,g=p*p*p;for(let D,L,F,U=0;U<12&&(L=u*(Ym+Jm*p+g*(Qm+eg*p))-s,F=Ym+3*Jm*p+g*(7*Qm+9*eg*p),D=L/F,u=Ne(u-D,-Math.PI/3,Math.PI/3),p=u*u,g=p*p*p,!(Math.abs(D)<1e-12));++U);const y=Ty*r*(Ym+3*Jm*p+g*(7*Qm+9*eg*p))/Math.cos(u),b=Math.asin(Math.sin(u)/Ty),T=Ne(180*y/Math.PI,-180,180),k=Ne(180*b/Math.PI,-Xo,Xo);return new Gr(T,k)}}class UB extends pd{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){return{x:.5+r/360,y:.5-s/360,z:0}}unproject(r,s){const u=360*(r-.5),p=Ne(360*(.5-s),-Xo,Xo);return new Gr(u,p)}}const _f=Math.PI/2;function Sy(o){return Math.tan((_f+o)/2)}class VB extends pd{constructor(r){super(r),this.center=r.center||[0,30];const[s,u]=this.parallels=r.parallels||[30,30];let p=gt(s),g=gt(u);this.southernCenter=p+g<0,this.southernCenter&&(p=-p,g=-g);const y=Math.cos(p),b=Sy(p);this.n=p===g?Math.sin(p):Math.log(y/Math.cos(g))/Math.log(Sy(g)/b),this.f=y*Math.pow(Sy(p),this.n)/this.n}project(r,s){s=gt(s),this.southernCenter&&(s=-s),r=gt(r-this.center[0]);const u=1e-6,{n:p,f:g}=this;g>0?s<-_f+u&&(s=-_f+u):s>_f-u&&(s=_f-u);const y=g/Math.pow(Sy(s),p);let b=y*Math.sin(p*r),T=g-y*Math.cos(p*r);return b=.5*(b/Math.PI+.5),T=.5*(T/Math.PI+.5),{x:b,y:this.southernCenter?T:1-T,z:0}}unproject(r,s){r=(2*r-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:u,f:p}=this,g=p-s,y=Math.sign(g),b=Math.sign(u)*Math.sqrt(r*r+g*g);let T=Math.atan2(r,Math.abs(g))*y;g*u<0&&(T-=Math.PI*Math.sign(r)*y);const k=Ne(Ze(T/u)+this.center[0],-180,180),D=Ne(Ze(2*Math.atan(Math.pow(p/b,1/u))-_f),-Xo,Xo);return new Gr(k,this.southernCenter?-D:D)}}class W8 extends pd{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,s){return{x:Sc(r),y:kc(s),z:0}}unproject(r,s){const u=Ps(r),p=Zo(s);return new Gr(u,p)}}const H8=gt(Xo);class WB extends pd{project(r,s){const u=(s=gt(s))*s,p=u*u;return{x:.5*((r=gt(r))*(.8707-.131979*u+p*(p*(.003971*u-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+u*(.015085+p*(.028874*u-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,p=25,g=0,y=u*u;do{y=u*u;const k=y*y;g=(u*(1.007226+y*(.015085+k*(.028874*y-.044475-.005916*k)))-s)/(1.007226+y*(.045255+k*(.259866*y-.311325-.005916*11*k))),u=Ne(u-g,-H8,H8)}while(Math.abs(g)>1e-6&&--p>0);y=u*u;const b=Ne(Ze(r/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),T=Ze(u);return new Gr(b,T)}}const q8=gt(Xo);class HB extends pd{project(r,s){s=gt(s),r=gt(r);const u=Math.cos(s),p=2/Math.PI,g=Math.acos(u*Math.cos(r/2)),y=Math.sin(g)/g,b=.5*(r*p+2*u*Math.sin(r/2)/y)||0,T=.5*(s+Math.sin(s)/y)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(T/Math.PI+1),z:0}}unproject(r,s){let u=r=(2*r-.5)*Math.PI,p=s=(2*(1-s)-1)*Math.PI,g=25;const y=1e-6;let b=0,T=0;do{const k=Math.cos(p),D=Math.sin(p),L=2*D*k,F=D*D,U=k*k,q=Math.cos(u/2),ee=Math.sin(u/2),ce=2*q*ee,ye=ee*ee,Ae=1-U*q*q,ve=Ae?1/Ae:0,Ie=Ae?Math.acos(k*q)*Math.sqrt(1/Ae):0,Le=.5*(2*Ie*k*ee+2*u/Math.PI)-r,Oe=.5*(Ie*D+p)-s,ht=.5*ve*(U*ye+Ie*k*q*F)+1/Math.PI,st=ve*(ce*L/4-Ie*D*ee),bt=.125*ve*(L*ee-Ie*D*U*ce),Vt=.5*ve*(F*q+Ie*ye*k)+.5,mt=st*bt-Vt*ht;b=(Oe*st-Le*Vt)/mt,T=(Le*bt-Oe*ht)/mt,u=Ne(u-b,-Math.PI,Math.PI),p=Ne(p-T,-q8,q8)}while((Math.abs(b)>y||Math.abs(T)>y)&&--g>0);return new Gr(Ze(u),Ze(p))}}class G8 extends pd{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(gt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){const{scale:u,cosPhi:p}=this;return{x:gt(r)*p*u+.5,y:-Math.sin(gt(s))/p*u+.5,z:0}}unproject(r,s){const{scale:u,cosPhi:p}=this,g=-(s-.5)/u,y=Ne(Ze((r-.5)/u)/p,-180,180),b=Math.asin(Ne(g*p,-1,1)),T=Ne(Ze(b),-Xo,Xo);return new Gr(y,T)}}class qB extends W8{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,s,u){const p=Lm(r,s,u);return Ui(p,p,zm(Tc(u))),{x:p[0],y:p[1],z:p[2]}}locationPoint(r,s){const u=tf(s.lat,s.lng),p=ya([],u),g=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(s),r._centerAltitude):r._centerAltitude;Mm(u,u,p,jl(1,0)*Hn*g);const y=Fl(new Float64Array(16));return Dh(y,r.pixelMatrix,r.globeMatrix),Ui(u,u,y),new _e(u[0],u[1])}pixelsPerMeter(r,s){return jl(1,0)*s}pixelSpaceConversion(r,s,u){const p=jl(1,r)*s,g=wr(jl(1,45)*s,p,u);return this.pixelsPerMeter(r,s)/g}createTileMatrix(r,s,u){const p=lw(Tc(u.canonical));return Dh(new Float64Array(16),r.globeMatrix,p)}createInversionMatrix(r,s){const{center:u}=r,p=zm(Tc(s));return Q_(p,p,gt(u.lng)),Jb(p,p,gt(u.lat)),Rh(p,p,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(r,s,u,p){return xS(r,s,u,!0)||new rf(0,0)}pointCoordinate3D(r,s,u){const p=this.pointCoordinate(r,s,u,0);return[p.x,p.y,p.z]}isPointAboveHorizon(r,s){return!xS(r,s.x,s.y,!1)}farthestPixelDistance(r){const s=function(p,g){const y=p.cameraToCenterDistance,b=p._centerAltitude*g,T=p._camera,k=p._camera.forward(),D=yu([],Cs([],k,-y),[0,0,b]),L=p.worldSize/(2*Math.PI),F=[0,0,-L],U=p.width/p.height,q=Math.tan(p.fovAboveCenter),ee=Cs([],T.up(),q),ce=Cs([],T.right(),q*U),ye=ya([],yu([],yu([],k,ee),ce)),Ae=[];let ve;if(new nw(D,ye).closestPointOnSphere(F,L,Ae)){const Ie=yu([],Ae,F),Le=Bl([],Ie,D);ve=Math.cos(p.fovAboveCenter)*Pm(Le)}else{const Ie=Bl([],D,F),Le=Bl([],F,D);ya(Le,Le);const Oe=Pm(Ie)-L;ve=Math.sqrt(Oe*(Oe+2*L));const ht=Math.acos(ve/(L+Oe))-Math.acos(Ys(k,Le));ve*=Math.cos(ht)}return 1.01*ve}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),u=nf(r.zoom);if(u>0){const p=V8(r,jl(1,r.center.lat)*r.worldSize),g=r.worldSize/(2*Math.PI),y=Math.max(r.width,r.height)/r.worldSize*Math.PI;return wr(s,p+g*(1-Math.cos(y)),Math.pow(u,10))}return s}upVector(r,s,u){return Lm(s,u,r,1)}upVectorScale(r){return{metersToTile:ey(ny(Tc(r)))}}}function Z8(o){const r=o.parallels,s=!!r&&Math.abs(r[0]+r[1])<.01;switch(o.name){case"mercator":return new W8(o);case"equirectangular":return new UB(o);case"naturalEarth":return new WB(o);case"equalEarth":return new $B(o);case"winkelTripel":return new HB(o);case"albers":return s?new G8(o):new jB(o);case"lambertConformalConic":return s?new G8(o):new VB(o);case"globe":return new qB(o)}throw new Error(`Invalid projection name: ${o.name}`)}const GB=hy.types,ZB=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ky(o,r,s,u,p,g,y,b,T,k,D,L,F){const U=b?Math.min(hd,Math.round(b[0])):0,q=b?Math.min(hd,Math.round(b[1])):0;o.emplaceBack(r,s,Math.round(32*u),Math.round(32*p),g,y,(U<<1)+(T?1:0),q,16*k,16*D,256*L,256*F)}function Cy(o,r,s,u,p,g,y){o.emplaceBack(r,s,u,p,g,y)}function Py(o,r,s,u,p){o.emplaceBack(r,s,u,p),o.emplaceBack(r,s,u,p),o.emplaceBack(r,s,u,p),o.emplaceBack(r,s,u,p)}function XB(o){for(const r of o.sections)if(Gb(r.text))return!0;return!1}class Bw{constructor(r){this.layoutVertexArray=new zt,this.indexArray=new Mn,this.programConfigurations=r,this.segments=new Zi,this.dynamicLayoutVertexArray=new jt,this.opacityVertexArray=new zn,this.placedSymbolArray=new Gi,this.globeExtVertexArray=new Ht}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,u,p){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,rB.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,oB.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,ZB,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,iB.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||p)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}wn(Bw,"SymbolBuffers");class jw{constructor(r,s,u){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new u,this.segments=new Zi,this.collisionVertexArray=new Er,this.collisionVertexArrayExt=new yr}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,aB.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,sB.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}wn(jw,"CollisionBuffers");class fd{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(y=>y.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Fl([]),this.placementViewportMatrix=Fl([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pw(this.zoom,s["text-size"]),this.iconSizeData=Pw(this.zoom,s["icon-size"]);const u=this.layers[0].layout,p=u.get("symbol-sort-key"),g=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(y=>Is[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=r.sourceID,this.projection=r.projection}createArrays(){this.text=new Bw(new Mh(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Bw(new Mh(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new _a,this.lineVertexArray=new Kp,this.symbolInstances=new hi}calculateGlyphDependencies(r,s,u,p,g){for(let y=0;y<r.length;y++)if(s[r.charCodeAt(y)]=!0,p&&g){const b=Gm[r.charAt(y)];b&&(s[b.charCodeAt(0)]=!0)}}populate(r,s,u,p){const g=this.layers[0],y=g.layout,b=this.projection.name==="globe",T=y.get("text-font"),k=y.get("text-field"),D=y.get("icon-image"),L=(k.value.kind!=="constant"||k.value.value instanceof $o&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),F=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,U=y.get("symbol-sort-key");if(this.features=[],!L&&!F)return;const q=s.iconDependencies,ee=s.glyphDependencies,ce=s.availableImages,ye=new O(this.zoom);for(const{feature:Ae,id:ve,index:Ie,sourceLayerIndex:Le}of r){const Oe=g._featureFilter.needGeometry,ht=Nh(Ae,Oe);if(!g._featureFilter.filter(ye,ht,u))continue;if(Oe||(ht.geometry=vu(Ae,u,p)),b&&Ae.type!==1&&u.z<=5){const mt=ht.geometry,It=.98078528056,At=(Nt,Gt)=>Ys(Lm(Nt.x,Nt.y,u,1),Lm(Gt.x,Gt.y,u,1))<It;for(let Nt=0;Nt<mt.length;Nt++)mt[Nt]=oF(mt[Nt],At)}let st,bt;if(L){const mt=g.getValueAndResolveTokens("text-field",ht,u,ce),It=$o.factory(mt);XB(It)&&(this.hasRTLText=!0),(!this.hasRTLText||w()==="unavailable"||this.hasRTLText&&I.isParsed())&&(st=uB(It,g,ht))}if(F){const mt=g.getValueAndResolveTokens("icon-image",ht,u,ce);bt=mt instanceof pa?mt:pa.fromString(mt)}if(!st&&!bt)continue;const Vt=this.sortFeaturesByKey?U.evaluate(ht,{},u):void 0;if(this.features.push({id:ve,text:st,icon:bt,index:Ie,sourceLayerIndex:Le,geometry:ht.geometry,properties:Ae.properties,type:GB[Ae.type],sortKey:Vt}),bt&&(q[bt.name]=!0),st){const mt=T.evaluate(ht,{},u).join(","),It=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Is.vertical)>=0;for(const At of st.sections)if(At.image)q[At.image.name]=!0;else{const Nt=xm(st.toString()),Gt=At.fontStack||mt,xt=ee[Gt]=ee[Gt]||{};this.calculateGlyphDependencies(At.text,xt,It,this.allowVerticalPlacement,Nt)}}}y.get("symbol-placement")==="line"&&(this.features=function(Ae){const ve={},Ie={},Le=[];let Oe=0;function ht(mt){Le.push(Ae[mt]),Oe++}function st(mt,It,At){const Nt=Ie[mt];return delete Ie[mt],Ie[It]=Nt,Le[Nt].geometry[0].pop(),Le[Nt].geometry[0]=Le[Nt].geometry[0].concat(At[0]),Nt}function bt(mt,It,At){const Nt=ve[It];return delete ve[It],ve[mt]=Nt,Le[Nt].geometry[0].shift(),Le[Nt].geometry[0]=At[0].concat(Le[Nt].geometry[0]),Nt}function Vt(mt,It,At){const Nt=At?It[0][It[0].length-1]:It[0][0];return`${mt}:${Nt.x}:${Nt.y}`}for(let mt=0;mt<Ae.length;mt++){const It=Ae[mt],At=It.geometry,Nt=It.text?It.text.toString():null;if(!Nt){ht(mt);continue}const Gt=Vt(Nt,At),xt=Vt(Nt,At,!0);if(Gt in Ie&&xt in ve&&Ie[Gt]!==ve[xt]){const un=bt(Gt,xt,At),kn=st(Gt,xt,Le[un].geometry);delete ve[Gt],delete Ie[xt],Ie[Vt(Nt,Le[kn].geometry,!0)]=kn,Le[un].geometry=null}else Gt in Ie?st(Gt,xt,At):xt in ve?bt(Gt,xt,At):(ht(mt),ve[Gt]=Oe-1,Ie[xt]=Oe-1)}return Le.filter(mt=>mt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ae,ve)=>Ae.sortKey-ve.sortKey)}update(r,s,u,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,u,p),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,u,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Z8(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const u=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:p,y:g}of s)this.lineVertexArray.emplaceBack(p,g);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(r,s,u,p,g,y,b,T,k,D,L,F,U,q){const ee=r.indexArray,ce=r.layoutVertexArray,ye=r.globeExtVertexArray,Ae=r.segments.prepareSegment(4*s.length,ce,ee,this.canOverlap?y.sortKey:void 0),ve=this.glyphOffsetArray.length,Ie=Ae.vertexLength,Le=this.allowVerticalPlacement&&b===Is.vertical?Math.PI/2:0,Oe=y.text&&y.text.sections;for(let st=0;st<s.length;st++){const{tl:bt,tr:Vt,bl:mt,br:It,tex:At,pixelOffsetTL:Nt,pixelOffsetBR:Gt,minFontScaleX:xt,minFontScaleY:un,glyphOffset:kn,isSDF:hn,sectionIndex:ar}=s[st],Kt=Ae.vertexLength,Bn=kn[1];if(ky(ce,k.x,k.y,bt.x,Bn+bt.y,At.x,At.y,u,hn,Nt.x,Nt.y,xt,un),ky(ce,k.x,k.y,Vt.x,Bn+Vt.y,At.x+At.w,At.y,u,hn,Gt.x,Nt.y,xt,un),ky(ce,k.x,k.y,mt.x,Bn+mt.y,At.x,At.y+At.h,u,hn,Nt.x,Gt.y,xt,un),ky(ce,k.x,k.y,It.x,Bn+It.y,At.x+At.w,At.y+At.h,u,hn,Gt.x,Gt.y,xt,un),T){const{x:sr,y:Rr,z:lr}=T.anchor,[Kn,ci,ur]=T.up;Cy(ye,sr,Rr,lr,Kn,ci,ur),Cy(ye,sr,Rr,lr,Kn,ci,ur),Cy(ye,sr,Rr,lr,Kn,ci,ur),Cy(ye,sr,Rr,lr,Kn,ci,ur),Py(r.dynamicLayoutVertexArray,sr,Rr,lr,Le)}else Py(r.dynamicLayoutVertexArray,k.x,k.y,k.z,Le);ee.emplaceBack(Kt,Kt+1,Kt+2),ee.emplaceBack(Kt+1,Kt+2,Kt+3),Ae.vertexLength+=4,Ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kn[0]),st!==s.length-1&&ar===s[st+1].sectionIndex||r.programConfigurations.populatePaintArrays(ce.length,y,y.index,{},U,q,Oe&&Oe[ar])}const ht=T?T.anchor:k;r.placedSymbolArray.emplaceBack(ht.x,ht.y,ht.z,k.x,k.y,ve,this.glyphOffsetArray.length-ve,Ie,D,L,k.segment,u?u[0]:0,u?u[1]:0,p[0],p[1],b,0,!1,0,F,0)}_commitLayoutVertex(r,s,u,p,g,y,b){r.emplaceBack(s,u,p,g,y,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(r,s,u,p,g,y,b){const T=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),k=T.vertexLength,D=b.tileAnchorX,L=b.tileAnchorY;for(let U=0;U<4;U++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(s,-r.padding,-r.padding),u.collisionVertexArrayExt.emplaceBack(s,r.padding,-r.padding),u.collisionVertexArrayExt.emplaceBack(s,r.padding,r.padding),u.collisionVertexArrayExt.emplaceBack(s,-r.padding,r.padding),this._commitLayoutVertex(u.layoutVertexArray,p,g,y,D,L,new _e(r.x1,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,p,g,y,D,L,new _e(r.x2,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,p,g,y,D,L,new _e(r.x2,r.y2)),this._commitLayoutVertex(u.layoutVertexArray,p,g,y,D,L,new _e(r.x1,r.y2)),T.vertexLength+=4;const F=u.indexArray;F.emplaceBack(k,k+1),F.emplaceBack(k+1,k+2),F.emplaceBack(k+2,k+3),F.emplaceBack(k+3,k),T.primitiveLength+=4}_addTextDebugCollisionBoxes(r,s,u,p,g,y){for(let b=p;b<g;b++){const T=u.get(b),k=this.getSymbolInstanceTextSize(r,y,s,b);this._addCollisionDebugVertices(T,k,this.textCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(r,s,u,p,g,y){for(let b=p;b<g;b++){const T=u.get(b),k=this.getSymbolInstanceIconSize(r,s,y.placedIconSymbolIndex);this._addCollisionDebugVertices(T,k,this.iconCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,y)}}generateCollisionDebugBuffers(r,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new jw(Sn,p8.members,wo),this.iconCollisionBox=new jw(Sn,p8.members,wo);const u=cf(this.iconSizeData,r),p=cf(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(p,r,s,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(p,r,s,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(u,r,s,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(u,r,s,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(r,s,u,p){const g=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:p),y=gy(this.textSizeData,r,g)/Oo;return this.tilePixelRatio*y}getSymbolInstanceIconSize(r,s,u){const p=this.icon.placedSymbolArray.get(u),g=gy(this.iconSizeData,r,p);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(r,s,u){r.emplaceBack(s,-u,-u),r.emplaceBack(s,u,-u),r.emplaceBack(s,u,u),r.emplaceBack(s,-u,u)}_updateTextDebugCollisionBoxes(r,s,u,p,g,y){for(let b=p;b<g;b++){const T=u.get(b),k=this.getSymbolInstanceTextSize(r,y,s,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,k,T.padding)}}_updateIconDebugCollisionBoxes(r,s,u,p,g,y){for(let b=p;b<g;b++){const T=u.get(b),k=this.getSymbolInstanceIconSize(r,s,y);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,k,T.padding)}}updateCollisionDebugBuffers(r,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=cf(this.iconSizeData,r),p=cf(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(p,r,s,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(p,r,s,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(u,r,s,y.iconBoxStartIndex,y.iconBoxEndIndex,y.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,r,s,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,s,u,p,g,y,b,T,k){const D={};if(s<u){const{x1:L,y1:F,x2:U,y2:q,padding:ee,projectedAnchorX:ce,projectedAnchorY:ye,projectedAnchorZ:Ae,tileAnchorX:ve,tileAnchorY:Ie,featureIndex:Le}=r.get(s);D.textBox={x1:L,y1:F,x2:U,y2:q,padding:ee,projectedAnchorX:ce,projectedAnchorY:ye,projectedAnchorZ:Ae,tileAnchorX:ve,tileAnchorY:Ie},D.textFeatureIndex=Le}if(p<g){const{x1:L,y1:F,x2:U,y2:q,padding:ee,projectedAnchorX:ce,projectedAnchorY:ye,projectedAnchorZ:Ae,tileAnchorX:ve,tileAnchorY:Ie,featureIndex:Le}=r.get(p);D.verticalTextBox={x1:L,y1:F,x2:U,y2:q,padding:ee,projectedAnchorX:ce,projectedAnchorY:ye,projectedAnchorZ:Ae,tileAnchorX:ve,tileAnchorY:Ie},D.verticalTextFeatureIndex=Le}if(y<b){const{x1:L,y1:F,x2:U,y2:q,padding:ee,projectedAnchorX:ce,projectedAnchorY:ye,projectedAnchorZ:Ae,tileAnchorX:ve,tileAnchorY:Ie,featureIndex:Le}=r.get(y);D.iconBox={x1:L,y1:F,x2:U,y2:q,padding:ee,projectedAnchorX:ce,projectedAnchorY:ye,projectedAnchorZ:Ae,tileAnchorX:ve,tileAnchorY:Ie},D.iconFeatureIndex=Le}if(T<k){const{x1:L,y1:F,x2:U,y2:q,padding:ee,projectedAnchorX:ce,projectedAnchorY:ye,projectedAnchorZ:Ae,tileAnchorX:ve,tileAnchorY:Ie,featureIndex:Le}=r.get(T);D.verticalIconBox={x1:L,y1:F,x2:U,y2:q,padding:ee,projectedAnchorX:ce,projectedAnchorY:ye,projectedAnchorZ:Ae,tileAnchorX:ve,tileAnchorY:Ie},D.verticalIconFeatureIndex=Le}return D}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const u=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const u=r.placedSymbolArray.get(s),p=u.vertexStartIndex+4*u.numGlyphs;for(let g=u.vertexStartIndex;g<p;g+=4)r.indexArray.emplaceBack(g,g+1,g+2),r.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),u=Math.cos(r),p=[],g=[],y=[];for(let b=0;b<this.symbolInstances.length;++b){y.push(b);const T=this.symbolInstances.get(b);p.push(0|Math.round(s*T.tileAnchorX+u*T.tileAnchorY)),g.push(T.featureIndex)}return y.sort((b,T)=>p[b]-p[T]||g[T]-g[b]),y}addToSortKeyRanges(r,s){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===s?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const u=this.symbolInstances.get(s);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:T,verticalPlacedIconSymbolIndex:k}=u;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),g>=0&&g!==p&&this.addIndicesForPlacedSymbol(this.text,g),y>=0&&y!==g&&y!==p&&this.addIndicesForPlacedSymbol(this.text,y),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T),k>=0&&this.addIndicesForPlacedSymbol(this.icon,k)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}wn(fd,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),fd.MAX_GLYPHS=65535,fd.addDynamicAttributes=Py;const KB=new Se({"symbol-placement":new J(yt.layout_symbol["symbol-placement"]),"symbol-spacing":new J(yt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new J(yt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ue(yt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new J(yt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new J(yt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new J(yt.layout_symbol["icon-ignore-placement"]),"icon-optional":new J(yt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new J(yt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ue(yt.layout_symbol["icon-size"]),"icon-text-fit":new J(yt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new J(yt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ue(yt.layout_symbol["icon-image"]),"icon-rotate":new ue(yt.layout_symbol["icon-rotate"]),"icon-padding":new J(yt.layout_symbol["icon-padding"]),"icon-keep-upright":new J(yt.layout_symbol["icon-keep-upright"]),"icon-offset":new ue(yt.layout_symbol["icon-offset"]),"icon-anchor":new ue(yt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new J(yt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new J(yt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new J(yt.layout_symbol["text-rotation-alignment"]),"text-field":new ue(yt.layout_symbol["text-field"]),"text-font":new ue(yt.layout_symbol["text-font"]),"text-size":new ue(yt.layout_symbol["text-size"]),"text-max-width":new ue(yt.layout_symbol["text-max-width"]),"text-line-height":new ue(yt.layout_symbol["text-line-height"]),"text-letter-spacing":new ue(yt.layout_symbol["text-letter-spacing"]),"text-justify":new ue(yt.layout_symbol["text-justify"]),"text-radial-offset":new ue(yt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new J(yt.layout_symbol["text-variable-anchor"]),"text-anchor":new ue(yt.layout_symbol["text-anchor"]),"text-max-angle":new J(yt.layout_symbol["text-max-angle"]),"text-writing-mode":new J(yt.layout_symbol["text-writing-mode"]),"text-rotate":new ue(yt.layout_symbol["text-rotate"]),"text-padding":new J(yt.layout_symbol["text-padding"]),"text-keep-upright":new J(yt.layout_symbol["text-keep-upright"]),"text-transform":new ue(yt.layout_symbol["text-transform"]),"text-offset":new ue(yt.layout_symbol["text-offset"]),"text-allow-overlap":new J(yt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new J(yt.layout_symbol["text-ignore-placement"]),"text-optional":new J(yt.layout_symbol["text-optional"])});var $w={paint:new Se({"icon-opacity":new ue(yt.paint_symbol["icon-opacity"]),"icon-color":new ue(yt.paint_symbol["icon-color"]),"icon-halo-color":new ue(yt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ue(yt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ue(yt.paint_symbol["icon-halo-blur"]),"icon-translate":new J(yt.paint_symbol["icon-translate"]),"icon-translate-anchor":new J(yt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ue(yt.paint_symbol["text-opacity"]),"text-color":new ue(yt.paint_symbol["text-color"],{runtimeType:jo,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new ue(yt.paint_symbol["text-halo-color"]),"text-halo-width":new ue(yt.paint_symbol["text-halo-width"]),"text-halo-blur":new ue(yt.paint_symbol["text-halo-blur"]),"text-translate":new J(yt.paint_symbol["text-translate"]),"text-translate-anchor":new J(yt.paint_symbol["text-translate-anchor"])}),layout:KB};class X8{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:cc,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wn(X8,"FormatSectionOverride",{omit:["defaultValue"]});class Iy extends Nl{constructor(r){super(r,$w)}recalculate(r,s){super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const p=[];for(const g of u)p.indexOf(g)<0&&p.push(g);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(r,s,u,p){const g=this.layout.get(r).evaluate(s,{},u,p),y=this._unevaluatedLayout._values[r];return y.isDataDriven()||nd(y.value)||!g?g:function(b,T){return T.replace(/{([^{}]+)}/g,(k,D)=>D in b?String(b[D]):"")}(s.properties,g)}createBucket(r){return new fd(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of $w.paint.overridableProperties){if(!Iy.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),u=new X8(s),p=new Up(u,s.property.specification);let g=null;g=s.value.kind==="constant"||s.value.kind==="source"?new cm("source",p):new wh("composite",p,s.value.zoomStops,s.value._interpolationType),this.paint._values[r]=new pe(s.property,g,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven())&&Iy.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const u=r.get("text-field"),p=$w.paint.properties[s];let g=!1;const y=b=>{for(const T of b)if(p.overrides&&p.overrides.hasOverride(T))return void(g=!0)};if(u.value.kind==="constant"&&u.value.value instanceof $o)y(u.value.value.sections);else if(u.value.kind==="source"){const b=k=>{g||(k instanceof Gs&&bi(k.value)===uc?y(k.value.sections):k instanceof ys?y(k.sections):k.eachChild(b))},T=u.value;T._styleExpression&&b(T._styleExpression.expression)}return g}getProgramConfiguration(r){return new cd(this,r)}}var YB={paint:new Se({"background-color":new J(yt.paint_background["background-color"]),"background-pattern":new J(yt.paint_background["background-pattern"]),"background-opacity":new J(yt.paint_background["background-opacity"])})},JB={paint:new Se({"raster-opacity":new J(yt.paint_raster["raster-opacity"]),"raster-hue-rotate":new J(yt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new J(yt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new J(yt.paint_raster["raster-brightness-max"]),"raster-saturation":new J(yt.paint_raster["raster-saturation"]),"raster-contrast":new J(yt.paint_raster["raster-contrast"]),"raster-resampling":new J(yt.paint_raster["raster-resampling"]),"raster-fade-duration":new J(yt.paint_raster["raster-fade-duration"])})};class QB extends Nl{constructor(r){super(r,{}),this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}var ej={paint:new Se({"sky-type":new J(yt.paint_sky["sky-type"]),"sky-atmosphere-sun":new J(yt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new J(yt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new J(yt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new J(yt.paint_sky["sky-gradient-radius"]),"sky-gradient":new we(yt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new J(yt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new J(yt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new J(yt.paint_sky["sky-opacity"])})};function Uw(o,r,s){const u=[0,0,1],p=fS([]);return gS(p,p,s?-gt(o)+Math.PI:gt(o)),mS(p,p,-gt(r)),uS(u,u,p),ya(u,u)}const tj={circle:class extends Nl{constructor(o){super(o,hF)}createBucket(o){return new fw(o)}queryRadius(o){const r=o;return of("circle-radius",this,r)+of("circle-stroke-width",this,r)+oy(this.paint.get("circle-translate"))}queryIntersectsFeature(o,r,s,u,p,g,y,b){const T=FS(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),k=this.paint.get("circle-radius").evaluate(r,s)+this.paint.get("circle-stroke-width").evaluate(r,s);return BS(o,u,g,y,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",T,k)}getProgramIds(){return["circle"]}getProgramConfiguration(o){return new cd(this,o)}},heatmap:class extends Nl{createBucket(o){return new $S(o)}constructor(o){super(o,gF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(o){return of("heatmap-radius",this,o)}queryIntersectsFeature(o,r,s,u,p,g,y,b){const T=this.paint.get("heatmap-radius").evaluate(r,s);return BS(o,u,g,y,b,!0,!0,new _e(0,0),T)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(o){return new cd(this,o)}},hillshade:class extends Nl{constructor(o){super(o,_F)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Nl{constructor(o){super(o,RF)}getProgramIds(){const o=this.paint.get("fill-pattern"),r=o&&o.constantOr(1),s=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getProgramConfiguration(o){return new cd(this,o)}recalculate(o,r){super.recalculate(o,r);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new uy(o)}queryRadius(){return oy(this.paint.get("fill-translate"))}queryIntersectsFeature(o,r,s,u,p,g){return!o.queryGeometry.isAboveHorizon&&RS(NS(o.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Nl{constructor(o){super(o,XF)}createBucket(o){return new Wm(o)}queryRadius(){return oy(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(o){return new cd(this,o)}queryIntersectsFeature(o,r,s,u,p,g,y,b,T){const k=FS(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),D=this.paint.get("fill-extrusion-height").evaluate(r,s),L=this.paint.get("fill-extrusion-base").evaluate(r,s),F=[0,0],U=b&&g.elevation,q=g.elevation?g.elevation.exaggeration():1,ee=o.tile.getBucket(this);if(U&&ee instanceof Wm){const Ie=ee.centroidVertexArray,Le=T+1;Le<Ie.length&&(F[0]=Ie.geta_centroid_pos0(Le),F[1]=Ie.geta_centroid_pos1(Le))}if(F[0]===0&&F[1]===1)return!1;g.projection.name==="globe"&&(u=o8([u],[new _e(0,0),new _e(Hn,Hn)],o.tileID.canonical).map(Ie=>Ie.polygon).flat());const ce=U?b:null,[ye,Ae]=function(Ie,Le,Oe,ht,st,bt,Vt,mt,It,At,Nt){return Ie.projection.name==="globe"?function(Gt,xt,un,kn,hn,ar,Kt,Bn,sr,Rr,lr){const Kn=[],ci=[],ur=Gt.projection.upVectorScale(lr,Gt.center.lat,Gt.worldSize).metersToTile,dr=[0,0,0,1],Zr=[0,0,0,1],ri=(Xr,wi,Oi,Ki)=>{Xr[0]=wi,Xr[1]=Oi,Xr[2]=Ki,Xr[3]=1},ii=i8();un>0&&(un+=ii),kn+=ii;for(const Xr of xt){const wi=[],Oi=[];for(const Ki of Xr){const Kr=Ki.x+hn.x,ao=Ki.y+hn.y,Yi=Gt.projection.projectTilePoint(Kr,ao,lr),Mi=Gt.projection.upVector(lr,Ki.x,Ki.y);let Lr=un,Ji=kn;if(Kt){const oi=c8(Kr,ao,un,kn,Kt,Bn,sr,Rr);Lr+=oi.base,Ji+=oi.top}un!==0?ri(dr,Yi.x+Mi[0]*ur*Lr,Yi.y+Mi[1]*ur*Lr,Yi.z+Mi[2]*ur*Lr):ri(dr,Yi.x,Yi.y,Yi.z),ri(Zr,Yi.x+Mi[0]*ur*Ji,Yi.y+Mi[1]*ur*Ji,Yi.z+Mi[2]*ur*Ji),Ui(dr,dr,ar),Ui(Zr,Zr,ar),wi.push(new lf(dr[0],dr[1],dr[2])),Oi.push(new lf(Zr[0],Zr[1],Zr[2]))}Kn.push(wi),ci.push(Oi)}return[Kn,ci]}(Ie,Le,Oe,ht,st,bt,Vt,mt,It,At,Nt):Vt?function(Gt,xt,un,kn,hn,ar,Kt,Bn,sr){const Rr=[],lr=[],Kn=[0,0,0,1];for(const ci of Gt){const ur=[],dr=[];for(const Zr of ci){const ri=Zr.x+kn.x,ii=Zr.y+kn.y,Xr=c8(ri,ii,xt,un,ar,Kt,Bn,sr);Kn[0]=ri,Kn[1]=ii,Kn[2]=Xr.base,Kn[3]=1,Oh(Kn,Kn,hn),Kn[3]=Math.max(Kn[3],1e-5);const wi=new lf(Kn[0]/Kn[3],Kn[1]/Kn[3],Kn[2]/Kn[3]);Kn[0]=ri,Kn[1]=ii,Kn[2]=Xr.top,Kn[3]=1,Oh(Kn,Kn,hn),Kn[3]=Math.max(Kn[3],1e-5);const Oi=new lf(Kn[0]/Kn[3],Kn[1]/Kn[3],Kn[2]/Kn[3]);ur.push(wi),dr.push(Oi)}Rr.push(ur),lr.push(dr)}return[Rr,lr]}(Le,Oe,ht,st,bt,Vt,mt,It,At):function(Gt,xt,un,kn,hn){const ar=[],Kt=[],Bn=hn[8]*xt,sr=hn[9]*xt,Rr=hn[10]*xt,lr=hn[11]*xt,Kn=hn[8]*un,ci=hn[9]*un,ur=hn[10]*un,dr=hn[11]*un;for(const Zr of Gt){const ri=[],ii=[];for(const Xr of Zr){const wi=Xr.x+kn.x,Oi=Xr.y+kn.y,Ki=hn[0]*wi+hn[4]*Oi+hn[12],Kr=hn[1]*wi+hn[5]*Oi+hn[13],ao=hn[2]*wi+hn[6]*Oi+hn[14],Yi=hn[3]*wi+hn[7]*Oi+hn[15],Mi=Ki+Bn,Lr=Kr+sr,Ji=ao+Rr,oi=Math.max(Yi+lr,1e-5),ba=Ki+Kn,Qi=Kr+ci,Lo=ao+ur,Eo=Math.max(Yi+dr,1e-5);ri.push(new lf(Mi/oi,Lr/oi,Ji/oi)),ii.push(new lf(ba/Eo,Qi/Eo,Lo/Eo))}ar.push(ri),Kt.push(ii)}return[ar,Kt]}(Le,Oe,ht,st,bt)}(g,u,L,D,k,y,ce,F,q,g.center.lat,o.tileID.canonical),ve=o.queryGeometry;return function(Ie,Le,Oe){let ht=1/0;RS(Oe,Le)&&(ht=l8(Oe,Le[0]));for(let st=0;st<Le.length;st++){const bt=Le[st],Vt=Ie[st];for(let mt=0;mt<bt.length-1;mt++){const It=bt[mt],At=[It,bt[mt+1],Vt[mt+1],Vt[mt],It];DS(Oe,At)&&(ht=Math.min(ht,l8(Oe,At)))}}return ht!==1/0&&ht}(ye,Ae,ve.isPointQuery()?ve.screenBounds:ve.screenGeometry)}},line:class extends Nl{constructor(o){super(o,u8),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof fa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(o,r){super.recalculate(o,r),this.paint._values["line-floorwidth"]=d8.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new my(o)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(o){return new cd(this,o)}queryRadius(o){const r=o,s=h8(of("line-width",this,r),of("line-gap-width",this,r)),u=of("line-offset",this,r);return s/2+Math.abs(u)+oy(this.paint.get("line-translate"))}queryIntersectsFeature(o,r,s,u,p,g){if(o.queryGeometry.isAboveHorizon)return!1;const y=NS(o.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),b=o.pixelToTileUnitsFactor/2*h8(this.paint.get("line-width").evaluate(r,s),this.paint.get("line-gap-width").evaluate(r,s)),T=this.paint.get("line-offset").evaluate(r,s);return T&&(u=function(k,D){const L=[],F=new _e(0,0);for(let U=0;U<k.length;U++){const q=k[U],ee=[];for(let ce=0;ce<q.length;ce++){const ye=q[ce],Ae=q[ce+1],ve=ce===0?F:ye.sub(q[ce-1])._unit()._perp(),Ie=ce===q.length-1?F:Ae.sub(ye)._unit()._perp(),Le=ve._add(Ie)._unit();Le._mult(1/(Le.x*Ie.x+Le.y*Ie.y)),ee.push(Le._mult(D)._add(ye))}L.push(ee)}return L}(u,T*o.pixelToTileUnitsFactor)),function(k,D,L){for(let F=0;F<D.length;F++){const U=D[F];if(k.length>=3){for(let q=0;q<U.length;q++)if(Fh(k,U[q]))return!0}if(lF(k,U,L))return!0}return!1}(y,u,b)}isTileClipped(){return!0}},symbol:Iy,background:class extends Nl{constructor(o){super(o,YB)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Nl{constructor(o){super(o,JB)}getProgramIds(){return["raster"]}},sky:class extends Nl{constructor(o){super(o,ej),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="sky-gradient"?this._updateColorRamp():o!=="sky-atmosphere-sun"&&o!=="sky-atmosphere-halo-color"&&o!=="sky-atmosphere-color"&&o!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=yw({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(o){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=o.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(o,r){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),p=!u,g=o.style.light,y=g.properties.get("position");return p&&g.properties.get("anchor")==="viewport"&&Ct("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?Uw(y.azimuthal,90-y.polar,r):Uw(u[0],90-u[1],r)}const s=this.paint.get("sky-gradient-center");return Uw(s[0],90-s[1],r)}is3D(){return!1}isSky(){return!0}markSkyboxValid(o){this._skyboxInvalidated=!1,this._lightPosition=o.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const o=this.paint.get("sky-type");return o==="atmosphere"?["skyboxCapture","skybox"]:o==="gradient"?["skyboxGradient"]:null}}};class tg{constructor(r,s,u,p){this.context=r,this.format=u,this.texture=r.gl.createTexture(),this.update(s,p)}update(r,s,u){const{width:p,height:g}=r,{context:y}=this,{gl:b}=y,{HTMLImageElement:T,HTMLCanvasElement:k,HTMLVideoElement:D,ImageData:L,ImageBitmap:F}=v;if(b.bindTexture(b.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!s||s.premultiply!==!1)),u||this.size&&this.size[0]===p&&this.size[1]===g){const{x:U,y:q}=u||{x:0,y:0};r instanceof T||r instanceof k||r instanceof D||r instanceof L||F&&r instanceof F?b.texSubImage2D(b.TEXTURE_2D,0,U,q,b.RGBA,b.UNSIGNED_BYTE,r):b.texSubImage2D(b.TEXTURE_2D,0,U,q,p,g,b.RGBA,b.UNSIGNED_BYTE,r.data)}else this.size=[p,g],r instanceof T||r instanceof k||r instanceof D||r instanceof L||F&&r instanceof F?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,r):b.texImage2D(b.TEXTURE_2D,0,this.format,p,g,0,this.format,b.UNSIGNED_BYTE,r.data);this.useMipmap=!!(s&&s.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(r,s){const{context:u}=this,{gl:p}=u;p.bindTexture(p.TEXTURE_2D,this.texture),r!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,r),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?r===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:r),this.filter=r),s!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,s),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class nj{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class rj{constructor(){this.tasks={},this.taskQueue=[],Jt(["process"],this),this.invoker=new nj(this.process),this.nextId=0}add(r,s){const u=this.nextId++,p=function({type:g,isSymbolTile:y,zoom:b}){return b=b||0,g==="message"?0:g!=="maybePrepare"||y?g!=="parseTile"||y?g==="parseTile"&&y?300-b:g==="maybePrepare"&&y?400-b:500:200-b:100-b}(s);if(p===0){Zn();try{r()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:r,metadata:s,priority:p,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Zn();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const s=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let r=null,s=1/0;for(let p=0;p<this.taskQueue.length;p++){const g=this.tasks[this.taskQueue[p]];g.priority<s&&(s=g.priority,r=p)}if(r===null)return null;const u=this.taskQueue[r];return this.taskQueue.splice(r,1),u}remove(){this.invoker.remove()}}class K8{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const u=r[s];this._stringToNumber[u]=s,this._numberToString[s]=u}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const ij=["tile","layer","source","sourceLayer","state"];class Y8{constructor(r,s,u,p,g){this.type="Feature",this._vectorTileFeature=r,this._z=s,this._x=u,this._y=p,this.properties=r.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(r.id=this.id);for(const s of ij)this[s]!==void 0&&(r[s]=this[s]);return r}}const el=32,Cc=33,md=new Uint16Array(8184);for(let o=0;o<2046;o++){let r=o+2,s=0,u=0,p=0,g=0,y=0,b=0;for(1&r?p=g=y=el:s=u=b=el;(r>>=1)>1;){const k=s+p>>1,D=u+g>>1;1&r?(p=s,g=u,s=y,u=b):(s=p,u=g,p=y,g=b),y=k,b=D}const T=4*o;md[T+0]=s,md[T+1]=u,md[T+2]=p,md[T+3]=g}const Pc=new Uint16Array(2178),gd=new Uint8Array(1089),Ay=new Uint16Array(1089);function J8(o){return o===0?-.03125:o===32?.03125:0}var Q8=Je([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const e9={type:2,extent:Hn,loadGeometry:()=>[[new _e(0,0),new _e(Hn+1,0),new _e(Hn+1,Hn+1),new _e(0,Hn+1),new _e(0,0)]]};class Vw{constructor(r,s,u,p,g){this.tileID=r,this.uid=tn(),this.uses=0,this.tileSize=s,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(r){const s=r+this.timeAdded;s<ji.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=jh(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(r,s,u){if(this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(p,g){const y={};if(!g)return y;for(const b of p){const T=b.layerIds.map(k=>g.getLayer(k)).filter(Boolean);if(T.length!==0){b.layers=T,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(k=>T.filter(D=>D.id===k)[0]));for(const k of T)y[k.id]=b}}return y}(r.buckets,s.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const g=this.buckets[p];if(g instanceof fd){if(this.hasSymbolBuckets=!0,!u)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const g=this.buckets[p];if(g instanceof fd&&g.hasRTLText){this.hasRTLText=!0,I.isLoading()||I.isLoaded()||w()!=="deferred"||C();break}}this.queryPadding=0;for(const p in this.buckets){const g=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(p).queryRadius(g))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),r.lineAtlas&&(this.lineAtlas=r.lineAtlas)}else this.collisionBoxArray=new qr}unloadVectorData(){if(this.hasData()){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(r){return this.buckets[r.id]}upload(r){for(const u in this.buckets){const p=this.buckets[u];p.uploadPending()&&p.upload(r)}const s=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new tg(r,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new tg(r,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new tg(r,this.lineAtlas.image,s.ALPHA),this.lineAtlas.uploaded=!0)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,s,u,p,g,y,b,T){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:b,transform:y,params:g,tileTransform:this.tileTransform},r,s,u):{}}querySourceFeatures(r,s){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const p=u.loadVTLayers(),g=s?s.sourceLayer:"",y=p._geojsonTileLayer||p[g];if(!y)return;const b=qp(s&&s.filter),{z:T,x:k,y:D}=this.tileID.canonical,L={z:T,x:k,y:D};for(let F=0;F<y.length;F++){const U=y.feature(F);if(b.needGeometry){const ce=Nh(U,!0);if(!b.filter(new O(this.tileID.overscaledZ),ce,this.tileID.canonical))continue}else if(!b.filter(new O(this.tileID.overscaledZ),U))continue;const q=u.getId(U,g),ee=new Y8(U,T,k,D,q);ee.tile=L,r.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const s=this.expirationTime;if(r.cacheControl){const u=tr(r.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const u=Date.now();let p=!1;if(this.expirationTime>u)p=!1;else if(s)if(this.expirationTime<s)p=!0;else{const g=this.expirationTime-s;g?this.expirationTime=u+Math.max(g,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0||!s)return;const u=this.latestFeatureIndex.loadVTLayers(),p=s.style.listImages();for(const g in this.buckets){if(!s.style.hasLayer(g))continue;const y=this.buckets[g],b=y.layers[0].sourceLayer||"_geojsonTileLayer",T=u[b],k=r[b];if(!T||!k||Object.keys(k).length===0)continue;if(y.update(k,T,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),y instanceof my||y instanceof uy){const L=s.style._getSourceCache(y.layers[0].source);s._terrain&&s._terrain.enabled&&L&&y.programConfigurations.needsUpload&&s._terrain._clearRenderCacheForTile(L.id,this.tileID)}const D=s&&s.style&&s.style.getLayer(g);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ji.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=ji.now()+r}setTexture(r,s){const u=s.context,p=u.gl;this.texture=this.texture||s.getTileTexture(r.width),this.texture?this.texture.update(r,{useMipmap:!0}):(this.texture=new tg(u,r,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE))}setDependencies(r,s){const u={};for(const p of s)u[p]=!0;this.dependencies[r]=u}hasDependency(r,s){for(const u of r){const p=this.dependencies[u];if(p){for(const g of s)if(p[g])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(r,s){if(!s||s.name==="mercator"||this._tileDebugBuffer)return;const u=vu(e9,this.tileID.canonical,this.tileTransform)[0],p=new Ut,g=new es;for(let y=0;y<u.length;y++){const{x:b,y:T}=u[y];p.emplaceBack(b,T),g.emplaceBack(y)}g.emplaceBack(0),this._tileDebugIndexBuffer=r.createIndexBuffer(g),this._tileDebugBuffer=r.createVertexBuffer(p,Rm.members),this._tileDebugSegments=Zi.simpleSegment(0,0,p.length,g.length)}_makeTileBoundsBuffers(r,s){if(this._tileBoundsBuffer||!s||s.name==="mercator")return;const u=vu(e9,this.tileID.canonical,this.tileTransform)[0];let p,g;if(this.isRaster){const y=function(b,T){const k=jh(b,T),D=Math.pow(2,b.z);for(let ce=0;ce<Cc;ce++)for(let ye=0;ye<Cc;ye++){const Ae=Ps((b.x+(ye+J8(ye))/el)/D),ve=Zo((b.y+(ce+J8(ce))/el)/D),Ie=T.project(Ae,ve),Le=ce*Cc+ye;Pc[2*Le+0]=Math.round((Ie.x*k.scale-k.x)*Hn),Pc[2*Le+1]=Math.round((Ie.y*k.scale-k.y)*Hn)}gd.fill(0),Ay.fill(0);for(let ce=2045;ce>=0;ce--){const ye=4*ce,Ae=md[ye+0],ve=md[ye+1],Ie=md[ye+2],Le=md[ye+3],Oe=Ae+Ie>>1,ht=ve+Le>>1,st=Oe+ht-ve,bt=ht+Ae-Oe,Vt=ve*Cc+Ae,mt=Le*Cc+Ie,It=ht*Cc+Oe,At=Math.hypot((Pc[2*Vt+0]+Pc[2*mt+0])/2-Pc[2*It+0],(Pc[2*Vt+1]+Pc[2*mt+1])/2-Pc[2*It+1])>=16;gd[It]=gd[It]||(At?1:0),ce<1022&&(gd[It]=gd[It]||gd[(ve+bt>>1)*Cc+(Ae+st>>1)]||gd[(Le+bt>>1)*Cc+(Ie+st>>1)])}const L=new kt,F=new Mn;let U=0;function q(ce,ye){const Ae=ye*Cc+ce;return Ay[Ae]===0&&(L.emplaceBack(Pc[2*Ae+0],Pc[2*Ae+1],ce*Hn/el,ye*Hn/el),Ay[Ae]=++U),Ay[Ae]-1}function ee(ce,ye,Ae,ve,Ie,Le){const Oe=ce+Ae>>1,ht=ye+ve>>1;if(Math.abs(ce-Ie)+Math.abs(ye-Le)>1&&gd[ht*Cc+Oe])ee(Ie,Le,ce,ye,Oe,ht),ee(Ae,ve,Ie,Le,Oe,ht);else{const st=q(ce,ye),bt=q(Ae,ve),Vt=q(Ie,Le);F.emplaceBack(st,bt,Vt)}}return ee(0,0,el,el,el,0),ee(el,el,0,0,0,el),{vertices:L,indices:F}}(this.tileID.canonical,s);p=y.vertices,g=y.indices}else{p=new kt,g=new Mn;for(const{x:b,y:T}of u)p.emplaceBack(b,T,0,0);const y=Ew(p.int16,void 0,4);for(let b=0;b<y.length;b+=3)g.emplaceBack(y[b],y[b+1],y[b+2])}this._tileBoundsBuffer=r.createVertexBuffer(p,Q8.members),this._tileBoundsIndexBuffer=r.createIndexBuffer(g),this._tileBoundsSegments=Zi.simpleSegment(0,0,p.length,g.length)}_makeGlobeTileDebugBuffers(r,s){const u=s.projection;if(!u||u.name!=="globe"||s.freezeTileCoverage)return;const p=this.tileID.canonical,g=zm(bS(p,s)),y=nf(s.zoom);let b;y>0&&(b=Yb(new Float64Array(16),s.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(r,p,s,g,b,y),this._makeGlobeTileDebugTextBuffer(r,p,s,g,b,y)}_globePoint(r,s,u,p,g,y,b){let T=Lm(r,s,u);if(y){const k=1<<u.z,D=Sc(p.center.lng),L=kc(p.center.lat),F=(u.x+.5)/k-D;let U=0;F>.5?U=-1:F<-.5&&(U=1);let q=(r/Hn+u.x)/k+U,ee=(s/Hn+u.y)/k;q=(q-D)*p._pixelsPerMercatorPixel+D,ee=(ee-L)*p._pixelsPerMercatorPixel+L;const ce=[q*p.worldSize,ee*p.worldSize,0];Ui(ce,ce,y),T=zh(T,ce,b)}return Ui(T,T,g)}_makeGlobeTileDebugBorderBuffer(r,s,u,p,g,y){const b=new Ut,T=new es,k=new at,D=(F,U,q,ee,ce)=>{const ye=(q-F)/(ce-1),Ae=(ee-U)/(ce-1),ve=b.length;for(let Ie=0;Ie<ce;Ie++){const Le=F+Ie*ye,Oe=U+Ie*Ae;b.emplaceBack(Le,Oe);const ht=this._globePoint(Le,Oe,s,u,p,g,y);k.emplaceBack(ht[0],ht[1],ht[2]),T.emplaceBack(ve+Ie)}},L=Hn;D(0,0,L,0,16),D(L,0,L,L,16),D(L,L,0,L,16),D(0,L,0,0,16),this._tileDebugIndexBuffer=r.createIndexBuffer(T),this._tileDebugBuffer=r.createVertexBuffer(b,Rm.members),this._globeTileDebugBorderBuffer=r.createVertexBuffer(k,yS.members),this._tileDebugSegments=Zi.simpleSegment(0,0,b.length,T.length)}_makeGlobeTileDebugTextBuffer(r,s,u,p,g,y){const b=Hn/4,T=new Ut,k=new Mn,D=new at,L=25;k.reserve(32),T.reserve(L),D.reserve(L);const F=(U,q)=>L*U+q;for(let U=0;U<L;U++){const q=U*b;for(let ee=0;ee<L;ee++){const ce=ee*b;T.emplaceBack(ce,q);const ye=this._globePoint(ce,q,s,u,p,g,y);D.emplaceBack(ye[0],ye[1],ye[2])}}for(let U=0;U<4;U++)for(let q=0;q<4;q++){const ee=F(U,q),ce=F(U,q+1),ye=F(U+1,q),Ae=F(U+1,q+1);k.emplaceBack(ee,ce,ye),k.emplaceBack(ye,ce,Ae)}this._tileDebugTextIndexBuffer=r.createIndexBuffer(k),this._tileDebugTextBuffer=r.createVertexBuffer(T,Rm.members),this._globeTileDebugTextBuffer=r.createVertexBuffer(D,yS.members),this._tileDebugTextSegments=Zi.simpleSegment(0,0,L,32)}}class oj{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,s,u){const p=String(s);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][p]=this.stateChanges[r][p]||{},Rt(this.stateChanges[r][p],u),this.deletedStates[r]===null){this.deletedStates[r]={};for(const g in this.state[r])g!==p&&(this.deletedStates[r][g]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][p]===null){this.deletedStates[r][p]={};for(const g in this.state[r][p])u[g]||(this.deletedStates[r][p][g]=null)}else for(const g in u)this.deletedStates[r]&&this.deletedStates[r][p]&&this.deletedStates[r][p][g]===null&&delete this.deletedStates[r][p][g]}removeFeatureState(r,s,u){if(this.deletedStates[r]===null)return;const p=String(s);if(this.deletedStates[r]=this.deletedStates[r]||{},u&&s!==void 0)this.deletedStates[r][p]!==null&&(this.deletedStates[r][p]=this.deletedStates[r][p]||{},this.deletedStates[r][p][u]=null);else if(s!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][p])for(u in this.deletedStates[r][p]={},this.stateChanges[r][p])this.deletedStates[r][p][u]=null;else this.deletedStates[r][p]=null;else this.deletedStates[r]=null}getState(r,s){const u=String(s),p=Rt({},(this.state[r]||{})[u],(this.stateChanges[r]||{})[u]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const g=this.deletedStates[r][s];if(g===null)return{};for(const y in g)delete p[y]}return p}initializeTileState(r,s){r.setFeatureState(this.state,s)}coalesceChanges(r,s){const u={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const g={};for(const y in this.stateChanges[p])this.state[p][y]||(this.state[p][y]={}),Rt(this.state[p][y],this.stateChanges[p][y]),g[y]=this.state[p][y];u[p]=g}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const g={};if(this.deletedStates[p]===null)for(const y in this.state[p])g[y]={},this.state[p][y]={};else for(const y in this.deletedStates[p]){if(this.deletedStates[p][y]===null)this.state[p][y]={};else if(this.state[p][y])for(const b of Object.keys(this.deletedStates[p][y]))delete this.state[p][y][b];g[y]=this.state[p][y]}u[p]=u[p]||{},Rt(u[p],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const p in r)r[p].setFeatureState(u,s)}}class t9{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,s){const u=this.toIdx(r,s);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(r,s){return this.leaves[this.toIdx(r,s)]}toIdx(r,s){return s*this.size+r}}function n9(o,r,s,u){let p=0,g=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(u[y])<1e-15){if(s[y]<o[y]||s[y]>r[y])return null}else{const b=1/u[y];let T=(o[y]-s[y])*b,k=(r[y]-s[y])*b;if(T>k){const D=T;T=k,k=D}if(T>p&&(p=T),k<g&&(g=k),p>g)return null}return p}function r9(o,r,s,u,p,g,y,b,T,k,D){const L=u-o,F=p-r,U=g-s,q=y-o,ee=b-r,ce=T-s,ye=D[1]*ce-D[2]*ee,Ae=D[2]*q-D[0]*ce,ve=D[0]*ee-D[1]*q,Ie=L*ye+F*Ae+U*ve;if(Math.abs(Ie)<1e-15)return null;const Le=1/Ie,Oe=k[0]-o,ht=k[1]-r,st=k[2]-s,bt=(Oe*ye+ht*Ae+st*ve)*Le;if(bt<0||bt>1)return null;const Vt=ht*U-st*F,mt=st*L-Oe*U,It=Oe*F-ht*L,At=(D[0]*Vt+D[1]*mt+D[2]*It)*Le;return At<0||bt+At>1?null:(q*Vt+ee*mt+ce*It)*Le}function i9(o,r,s){return(o-r)/(s-r)}function o9(o,r,s,u,p,g,y,b,T){const k=1<<s,D=g-u,L=y-p,F=(o+1)/k*D+u,U=(r+0)/k*L+p,q=(r+1)/k*L+p;b[0]=(o+0)/k*D+u,b[1]=U,T[0]=F,T[1]=q}class a9{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(g){const y=Math.ceil(Math.log2(g.dim/8)),b=[];let T=Math.ceil(Math.pow(2,y));const k=1/T,D=(U,q,ee,ce,ye)=>{const Ae=ce?1:0,ve=(U+1)*ee-Ae,Ie=q*ee,Le=(q+1)*ee-Ae;ye[0]=U*ee,ye[1]=Ie,ye[2]=ve,ye[3]=Le};let L=new t9(T);const F=[];for(let U=0;U<T*T;U++){D(U%T,Math.floor(U/T),k,!1,F);const q=_d(F[0],F[1],g),ee=_d(F[2],F[1],g),ce=_d(F[2],F[3],g),ye=_d(F[0],F[3],g);L.minimums.push(Math.min(q,ee,ce,ye)),L.maximums.push(Math.max(q,ee,ce,ye)),L.leaves.push(1)}for(b.push(L),T/=2;T>=1;T/=2){const U=b[b.length-1];L=new t9(T);for(let q=0;q<T*T;q++){D(q%T,Math.floor(q/T),2,!0,F);const ee=U.getElevation(F[0],F[1]),ce=U.getElevation(F[2],F[1]),ye=U.getElevation(F[2],F[3]),Ae=U.getElevation(F[0],F[3]),ve=U.isLeaf(F[0],F[1]),Ie=U.isLeaf(F[2],F[1]),Le=U.isLeaf(F[2],F[3]),Oe=U.isLeaf(F[0],F[3]),ht=Math.min(ee.min,ce.min,ye.min,Ae.min),st=Math.max(ee.max,ce.max,ye.max,Ae.max),bt=ve&&Ie&&Le&&Oe;L.maximums.push(st),L.minimums.push(ht),L.leaves.push(st-ht<=5&&bt?1:0)}b.push(L)}return b}(this.dem),u=s.length-1,p=s[u];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(s,0,0,u,0)}raycastRoot(r,s,u,p,g,y,b=1){return n9([r,s,-100],[u,p,this.maximums[0]*b],g,y)}raycast(r,s,u,p,g,y,b=1){if(!this.nodeCount)return null;const T=this.raycastRoot(r,s,u,p,g,y,b);if(T==null)return null;const k=[],D=[],L=[],F=[],U=[{idx:0,t:T,nodex:0,nodey:0,depth:0}];for(;U.length>0;){const{idx:q,t:ee,nodex:ce,nodey:ye,depth:Ae}=U.pop();if(this.leaves[q]){o9(ce,ye,Ae,r,s,u,p,L,F);const Ie=1<<Ae,Le=(ce+0)/Ie,Oe=(ce+1)/Ie,ht=(ye+0)/Ie,st=(ye+1)/Ie,bt=_d(Le,ht,this.dem)*b,Vt=_d(Oe,ht,this.dem)*b,mt=_d(Oe,st,this.dem)*b,It=_d(Le,st,this.dem)*b,At=r9(L[0],L[1],bt,F[0],L[1],Vt,F[0],F[1],mt,g,y),Nt=r9(F[0],F[1],mt,L[0],F[1],It,L[0],L[1],bt,g,y),Gt=Math.min(At!==null?At:Number.MAX_VALUE,Nt!==null?Nt:Number.MAX_VALUE);if(Gt!==Number.MAX_VALUE)return Gt;{const xt=Mm([],g,y,ee);if(s9(bt,Vt,It,mt,i9(xt[0],L[0],F[0]),i9(xt[1],L[1],F[1]))>=xt[2])return ee}continue}let ve=0;for(let Ie=0;Ie<this._siblingOffset.length;Ie++){o9((ce<<1)+this._siblingOffset[Ie][0],(ye<<1)+this._siblingOffset[Ie][1],Ae+1,r,s,u,p,L,F),L[2]=-100,F[2]=this.maximums[this.childOffsets[q]+Ie]*b;const Le=n9(L,F,g,y);if(Le!=null){const Oe=Le;k[Ie]=Oe;let ht=!1;for(let st=0;st<ve&&!ht;st++)Oe>=k[D[st]]&&(D.splice(st,0,Ie),ht=!0);ht||(D[ve]=Ie),ve++}}for(let Ie=0;Ie<ve;Ie++){const Le=D[Ie];U.push({idx:this.childOffsets[q]+Le,t:k[Le],nodex:(ce<<1)+this._siblingOffset[Le][0],nodey:(ye<<1)+this._siblingOffset[Le][1],depth:Ae+1})}}return null}_addNode(r,s,u){return this.minimums.push(r),this.maximums.push(s),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(r,s,u,p,g){if(r[p].isLeaf(s,u)===1)return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const y=p-1,b=r[y];let T=0,k=0;for(let D=0;D<this._siblingOffset.length;D++){const L=2*s+this._siblingOffset[D][0],F=2*u+this._siblingOffset[D][1],U=b.getElevation(L,F),q=b.isLeaf(L,F),ee=this._addNode(U.min,U.max,q);q&&(T|=1<<D),k||(k=ee)}for(let D=0;D<this._siblingOffset.length;D++)T&1<<D||this._construct(r,2*s+this._siblingOffset[D][0],2*u+this._siblingOffset[D][1],y,k+D)}}function s9(o,r,s,u,p,g){return wr(wr(o,s,g),wr(r,u,g),p)}function _d(o,r,s){const u=s.dim,p=Ne(o*u-.5,0,u-1),g=Ne(r*u-.5,0,u-1),y=Math.floor(p),b=Math.floor(g),T=Math.min(y+1,u-1),k=Math.min(b+1,u-1);return s9(s.get(y,b),s.get(T,b),s.get(y,k),s.get(T,k),p-y,g-b)}const l9={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function aj(o,r,s){return(256*o*256+256*r+s)/10-1e4}function sj(o,r,s){return 256*o+r+s/256-32768}class My{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,s,u,p=!1,g=!1){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return Ct(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const y=this.dim=s.height-2,b=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.encoding=u||"mapbox",this.borderReady=p,!p){for(let T=0;T<y;T++)b[this._idx(-1,T)]=b[this._idx(0,T)],b[this._idx(y,T)]=b[this._idx(y-1,T)],b[this._idx(T,-1)]=b[this._idx(T,0)],b[this._idx(T,y)]=b[this._idx(T,y-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(y,-1)]=b[this._idx(y-1,0)],b[this._idx(-1,y)]=b[this._idx(0,y-1)],b[this._idx(y,y)]=b[this._idx(y-1,y-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new a9(this)}get(r,s,u=!1){u&&(r=Ne(r,-1,this.dim),s=Ne(s,-1,this.dim));const p=4*this._idx(r,s);return(this.encoding==="terrarium"?sj:aj)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(r){return l9[r]}get unpackVector(){return l9[this.encoding]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}static pack(r,s){const u=[0,0,0,0],p=My.getUnpackVector(s);let g=Math.floor((r+p[3])/p[2]);return u[2]=g%256,g=Math.floor(g/256),u[1]=g%256,g=Math.floor(g/256),u[0]=g,u}getPixels(){return new ns({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,s,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,g=s*this.dim+this.dim,y=u*this.dim,b=u*this.dim+this.dim;switch(s){case-1:p=g-1;break;case 1:g=p+1}switch(u){case-1:y=b-1;break;case 1:b=y+1}const T=-s*this.dim,k=-u*this.dim;for(let D=y;D<b;D++)for(let L=p;L<g;L++){const F=4*this._idx(L,D),U=4*this._idx(L+T,D+k);this.pixels[F+0]=r.pixels[U+0],this.pixels[F+1]=r.pixels[U+1],this.pixels[F+2]=r.pixels[U+2],this.pixels[F+3]=r.pixels[U+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}wn(My,"DEMData"),wn(a9,"DemMinMaxQuadTree",{omit:["dem"]});class lj{constructor(r,s){this.max=r,this.onRemove=s,this.reset()}reset(){for(const r in this.data)for(const s of this.data[r])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(r,s,u){const p=r.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const g={value:s,timeout:void 0};if(u!==void 0&&(g.timeout=setTimeout(()=>{this.remove(r,g)},u)),this.data[p].push(g),this.order.push(p),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const s=this.data[r].shift();return s.timeout&&clearTimeout(s.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),s.value}getByKey(r){const s=this.data[r];return s?s[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,s){if(!this.has(r))return this;const u=r.wrapped().key,p=s===void 0?0:this.data[u].indexOf(s),g=this.data[u][p];return this.data[u].splice(p,1),g.timeout&&clearTimeout(g.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(g.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(r){const s=[];for(const u in this.data)for(const p of this.data[u])r(p.value)||s.push(p);for(const u of s)this.remove(u.value.tileID,u)}}class yf{constructor(r,s,u){this.func=r,this.mask=s,this.range=u}}yf.ReadOnly=!1,yf.ReadWrite=!0,yf.disabled=new yf(519,yf.ReadOnly,[0,1]);const Ww=7680;class Hw{constructor(r,s,u,p,g,y){this.test=r,this.ref=s,this.mask=u,this.fail=p,this.depthFail=g,this.pass=y}}Hw.disabled=new Hw({func:519,mask:0},0,0,Ww,Ww,Ww);class Ic{constructor(r,s,u){this.blendFunction=r,this.blendColor=s,this.mask=u}}Ic.Replace=[1,0],Ic.disabled=new Ic(Ic.Replace,Ii.transparent,[!1,!1,!1,!1]),Ic.unblended=new Ic(Ic.Replace,Ii.transparent,[!0,!0,!0,!0]),Ic.alphaBlended=new Ic([1,771],Ii.transparent,[!0,!0,!0,!0]);const qw=1029,Gw=2305;class Vl{constructor(r,s,u){this.enable=r,this.mode=s,this.frontFace=u}}Vl.disabled=new Vl(!1,qw,Gw),Vl.backCCW=new Vl(!0,qw,Gw),Vl.backCW=new Vl(!0,qw,2304),Vl.frontCW=new Vl(!0,1028,2304),Vl.frontCCW=new Vl(!0,1028,Gw);class $h extends Cl{constructor(r,s,u){super(),this.id=r,this._onlySymbols=u,s.on("data",p=>{p.dataType==="source"&&p.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&p.dataType==="source"&&p.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),s.on("error",()=>{this._sourceErrored=!0}),this._source=s,this._tiles={},this._cache=new lj(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=s.minTileCacheSize,this._maxTileCacheSize=s.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new oj,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(r){this.map=r,this._minTileCacheSize=this._minTileCacheSize===void 0&&r?r._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&r?r._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const s=this._tiles[r];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(r,s){return r.isSymbolTile=this._onlySymbols,this._source.loadTile(r,s)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){if(this._source.abortTile)return this._source.abortTile(r,()=>{})}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const u=this._tiles[s];u.upload(r),u.prepare(this.map.style.imageManager)}}getIds(){return Tt(this._tiles).map(r=>r.tileID).sort(c9).map(r=>r.key)}getRenderableIds(r){const s=[];for(const u in this._tiles)this._isIdRenderable(+u,r)&&s.push(this._tiles[u]);return r?s.sort((u,p)=>{const g=u.tileID,y=p.tileID,b=new _e(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),T=new _e(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-y.overscaledZ||T.y-b.y||T.x-b.x}).map(u=>u.tileID.key):s.map(u=>u.tileID).sort(c9).map(u=>u.key)}hasRenderableParent(r){const s=this.findLoadedParent(r,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(r,s){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(s||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(+r,"reloading")}}_reloadTile(r,s){const u=this._tiles[r];u&&(u.state!=="loading"&&(u.state=s),this._loadTile(u,this._tileLoaded.bind(this,u,r,s)))}_tileLoaded(r,s,u,p){if(p)if(r.state="errored",p.status!==404)this._source.fire(new Na(p,{tile:r}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else r.timeAdded=ji.now(),u==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(s,r),this._source.type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new za("data",{dataType:"source",tile:r,coord:r.tileID,sourceCacheId:this.id}))}_backfillDEM(r){const s=this.getRenderableIds();for(let p=0;p<s.length;p++){const g=s[p];if(r.neighboringTiles&&r.neighboringTiles[g]){const y=this.getTileByID(g);u(r,y),u(y,r)}}function u(p,g){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let y=g.tileID.canonical.x-p.tileID.canonical.x;const b=g.tileID.canonical.y-p.tileID.canonical.y,T=Math.pow(2,p.tileID.canonical.z),k=g.tileID.key;y===0&&b===0||Math.abs(b)>1||(Math.abs(y)>1&&(Math.abs(y+T)===1?y+=T:Math.abs(y-T)===1&&(y-=T)),g.dem&&p.dem&&(p.dem.backfillBorder(g.dem,y,b),p.neighboringTiles&&p.neighboringTiles[k]&&(p.neighboringTiles[k].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,s,u,p){for(const g in this._tiles){let y=this._tiles[g];if(p[g]||!y.hasData()||y.tileID.overscaledZ<=s||y.tileID.overscaledZ>u)continue;let b=y.tileID;for(;y&&y.tileID.overscaledZ>s+1;){const k=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[k.key],y&&y.hasData()&&(b=k)}let T=b;for(;T.overscaledZ>s;)if(T=T.scaledTo(T.overscaledZ-1),r[T.key]){p[b.key]=b;break}}}findLoadedParent(r,s){if(r.key in this._loadedParentTiles){const u=this._loadedParentTiles[r.key];return u&&u.tileID.overscaledZ>=s?u:null}for(let u=r.overscaledZ-1;u>=s;u--){const p=r.scaledTo(u),g=this._getLoadedTile(p);if(g)return g}}_getLoadedTile(r){const s=this._tiles[r.key];return s&&s.hasData()?s:this._cache.getByKey(this._source.reparseOverscaled?r.wrapped().key:r.canonical.key)}updateCacheSize(r,s){s=s||this._source.tileSize;const u=Math.ceil(r.width/s)+1,p=Math.ceil(r.height/s)+1,g=Math.floor(u*p*5),y=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,g):g,b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(r){const s=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,s){const u={};for(const p in this._tiles){const g=this._tiles[p];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+s),u[g.tileID.key]=g}this._tiles=u;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(r,s,u){if(this.transform=r,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let p;this.updateCacheSize(r,s),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(b=>new xa(b.canonical.z,b.wrap,b.canonical.z,b.canonical.x,b.canonical.y)):(p=r.coveringTiles({tileSize:s||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(b=>this._source.hasTile(b)))):p=[];const g=this._updateRetainedTiles(p);if(u9(this._source.type)&&p.length!==0){const b={},T={},k=Object.keys(g);for(const L of k){const F=g[L],U=this._tiles[L];if(!U||U.fadeEndTime&&U.fadeEndTime<=ji.now())continue;const q=this.findLoadedParent(F,Math.max(F.overscaledZ-$h.maxOverzooming,this._source.minzoom));q&&(this._addTile(q.tileID),b[q.tileID.key]=q.tileID),T[L]=F}const D=p[p.length-1].overscaledZ;for(const L in this._tiles){const F=this._tiles[L];if(g[L]||!F.hasData())continue;let U=F.tileID;for(;U.overscaledZ>D;){U=U.scaledTo(U.overscaledZ-1);const q=this._tiles[U.key];if(q&&q.hasData()&&T[U.key]){g[L]=F.tileID;break}}}for(const L in b)g[L]||(this._coveredTiles[L]=!0,g[L]=b[L])}for(const b in g)this._tiles[b].clearFadeHold();const y=function(b,T){const k=[];for(const D in b)D in T||k.push(D);return k}(this._tiles,g);for(const b of y){const T=this._tiles[b];T.hasSymbolBuckets&&!T.holdingForFade()?T.setHoldDuration(this.map._fadeDuration):T.hasSymbolBuckets&&!T.symbolFadeFinished()||this._removeTile(+b)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(+r)}_updateRetainedTiles(r){const s={};if(r.length===0)return s;const u={},p=r.reduce((k,D)=>Math.min(k,D.overscaledZ),1/0),g=r[0].overscaledZ,y=Math.max(g-$h.maxOverzooming,this._source.minzoom),b=Math.max(g+$h.maxUnderzooming,this._source.minzoom),T={};for(const k of r){const D=this._addTile(k);s[k.key]=k,D.hasData()||p<this._source.maxzoom&&(T[k.key]=k)}this._retainLoadedChildren(T,p,b,s);for(const k of r){let D=this._tiles[k.key];if(D.hasData())continue;if(k.canonical.z>=this._source.maxzoom){const F=k.children(this._source.maxzoom)[0],U=this.getTile(F);if(U&&U.hasData()){s[F.key]=F;continue}}else{const F=k.children(this._source.maxzoom);if(s[F[0].key]&&s[F[1].key]&&s[F[2].key]&&s[F[3].key])continue}let L=D.wasRequested();for(let F=k.overscaledZ-1;F>=y;--F){const U=k.scaledTo(F);if(u[U.key]||(u[U.key]=!0,D=this.getTile(U),!D&&L&&(D=this._addTile(U)),D&&(s[U.key]=U,L=D.wasRequested(),D.hasData())))break}}return s}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const s=[];let u,p=this._tiles[r].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){u=this._loadedParentTiles[p.key];break}s.push(p.key);const g=p.scaledTo(p.overscaledZ-1);if(u=this._getLoadedTile(g),u)break;p=g}for(const g of s)this._loadedParentTiles[g]=u}}_addTile(r){let s=this._tiles[r.key];if(s)return s;s=this._cache.getAndRemove(r),s&&(this._setTileReloadTimer(r.key,s),s.tileID=r,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,s)));const u=!!s;if(!u){const p=this.map?this.map.painter:null;s=new Vw(r,this._source.tileSize*r.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._loadTile(s,this._tileLoaded.bind(this,s,r.key,s.state))}return s?(s.uses++,this._tiles[r.key]=s,u||this._source.fire(new za("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null}_setTileReloadTimer(r,s){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const u=s.getExpiryTimeout();u&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},u))}_removeTile(r){const s=this._tiles[r];s&&(s.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(+r);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(r,s,u){const p=[],g=this.transform;if(!g)return p;const y=g.projection.name==="globe",b=Sc(g.center.lng);for(const T in this._tiles){const k=this._tiles[T];if(u&&k.clearQueryDebugViz(),k.holdingForFade())continue;let D;if(y){const L=k.tileID.canonical;if(L.z===0){const F=[Math.abs(Ne(b,...ng(L,-1))-b),Math.abs(Ne(b,...ng(L,1))-b)];D=[0,2*F.indexOf(Math.min(...F))-1]}else{const F=[Math.abs(Ne(b,...ng(L,-1))-b),Math.abs(Ne(b,...ng(L,0))-b),Math.abs(Ne(b,...ng(L,1))-b)];D=[F.indexOf(Math.min(...F))-1]}}else D=[0];for(const L of D){const F=r.containsTile(k,g,s,L);F&&p.push(F)}}return p}getVisibleCoordinates(r){const s=this.getRenderableIds(r).map(u=>this._tiles[u].tileID);for(const u of s)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(u9(this._source.type))for(const r in this._tiles){const s=this._tiles[r];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=ji.now())return!0}return!1}setFeatureState(r,s,u){this._state.updateState(r=r||"_geojsonTileLayer",s,u)}removeFeatureState(r,s,u){this._state.removeFeatureState(r=r||"_geojsonTileLayer",s,u)}getFeatureState(r,s){return this._state.getState(r=r||"_geojsonTileLayer",s)}setDependencies(r,s,u){const p=this._tiles[r];p&&p.setDependencies(s,u)}reloadTilesForDependencies(r,s){for(const u in this._tiles)this._tiles[u].hasDependency(r,s)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(r,s))}_preloadTiles(r,s){if(!this._sourceLoaded){const b=()=>{this._sourceLoaded&&(this._source.off("data",b),this._preloadTiles(r,s))};return void this._source.on("data",b)}const u=new Map,p=Array.isArray(r)?r:[r],g=this.map.painter.terrain,y=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const b of p){const T=b.coveringTiles({tileSize:y,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const k of T)u.set(k.key,k);this.usedForTerrain&&b.updateElevation(!1)}Dt(Array.from(u.values()),(b,T)=>{const k=new Vw(b,this._source.tileSize*b.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(k,D=>{this._source.type==="raster-dem"&&k.dem&&this._backfillDEM(k),T(D,k)})},s)}}function c9(o,r){const s=Math.abs(2*o.wrap)-+(o.wrap<0),u=Math.abs(2*r.wrap)-+(r.wrap<0);return o.overscaledZ-r.overscaledZ||u-s||r.canonical.y-o.canonical.y||r.canonical.x-o.canonical.x}function u9(o){return o==="raster"||o==="image"||o==="video"||o==="custom"}function ng(o,r){const s=1<<o.z;return[o.x/s+r,(o.x+1)/s+r]}$h.maxOverzooming=10,$h.maxUnderzooming=3;class Dy{constructor(r,s,u){this._demTile=r,this._dem=this._demTile.dem,this._scale=s,this._offset=u}static create(r,s,u){const p=u||r.findDEMTileFor(s);if(!p||!p.dem)return;const g=p.dem,y=p.tileID,b=1<<s.canonical.z-y.canonical.z;return new Dy(p,p.tileSize/Hn/b,[(s.canonical.x/b-y.canonical.x)*g.dim,(s.canonical.y/b-y.canonical.y)*g.dim])}tileCoordToPixel(r,s){const u=s*this._scale+this._offset[1],p=Math.floor(r*this._scale+this._offset[0]),g=Math.floor(u);return new _e(p,g)}getElevationAt(r,s,u,p){const g=r*this._scale+this._offset[0],y=s*this._scale+this._offset[1],b=Math.floor(g),T=Math.floor(y),k=this._dem;return p=!!p,u?wr(wr(k.get(b,T,p),k.get(b,T+1,p),y-T),wr(k.get(b+1,T,p),k.get(b+1,T+1,p),y-T),g-b):k.get(b,T,p)}getElevationAtPixel(r,s,u){return this._dem.get(r,s,!!u)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*jl(1,r)*this._dem.stride}}class d9{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new hu(Hn,16,0),this.featureIndexArray=new Ih,this.promoteId=s}insert(r,s,u,p,g,y=0){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,p,g,y);const T=this.grid;for(let k=0;k<s.length;k++){const D=s[k],L=[1/0,1/0,-1/0,-1/0];for(let F=0;F<D.length;F++){const U=D[F];L[0]=Math.min(L[0],U.x),L[1]=Math.min(L[1],U.y),L[2]=Math.max(L[2],U.x),L[3]=Math.max(L[3],U.y)}L[0]<Hn&&L[1]<Hn&&L[2]>=0&&L[3]>=0&&T.insert(b,L[0],L[1],L[2],L[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Cw(new yy(this.rawTileData)).layers,this.sourceLayerCoder=new K8(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,s,u,p){this.loadVTLayers();const g=r.params||{},y=qp(g.filter),b=r.tileResult,T=r.transform,k=b.bufferedTilespaceBounds,D=this.grid.query(k.min.x,k.min.y,k.max.x,k.max.y,(q,ee,ce,ye)=>zS(b.bufferedTilespaceGeometry,q,ee,ce,ye));D.sort(cj);let L=null;T.elevation&&D.length>0&&(L=Dy.create(T.elevation,this.tileID));const F={};let U;for(let q=0;q<D.length;q++){const ee=D[q];if(ee===U)continue;U=ee;const ce=this.featureIndexArray.get(ee);let ye=null;this.loadMatchingFeature(F,ce,y,g.layers,g.availableImages,s,u,p,(Ae,ve,Ie,Le=0)=>(ye||(ye=vu(Ae,this.tileID.canonical,r.tileTransform)),ve.queryIntersectsFeature(b,Ae,Ie,ye,this.z,r.transform,r.pixelPosMatrix,L,Le)))}return F}loadMatchingFeature(r,s,u,p,g,y,b,T,k){const{featureIndex:D,bucketIndex:L,sourceLayerIndex:F,layoutVertexArrayOffset:U}=s,q=this.bucketLayerIDs[L];if(p&&!function(Ae,ve){for(let Ie=0;Ie<Ae.length;Ie++)if(ve.indexOf(Ae[Ie])>=0)return!0;return!1}(p,q))return;const ee=this.sourceLayerCoder.decode(F),ce=this.vtLayers[ee].feature(D);if(u.needGeometry){const Ae=Nh(ce,!0);if(!u.filter(new O(this.tileID.overscaledZ),Ae,this.tileID.canonical))return}else if(!u.filter(new O(this.tileID.overscaledZ),ce))return;const ye=this.getId(ce,ee);for(let Ae=0;Ae<q.length;Ae++){const ve=q[Ae];if(p&&p.indexOf(ve)<0)continue;const Ie=y[ve];if(!Ie)continue;let Le={};ye!==void 0&&T&&(Le=T.getState(Ie.sourceLayer||"_geojsonTileLayer",ye));const Oe=Rt({},b[ve]);Oe.paint=h9(Oe.paint,Ie.paint,ce,Le,g),Oe.layout=h9(Oe.layout,Ie.layout,ce,Le,g);const ht=!k||k(ce,Ie,Le,U);if(!ht)continue;const st=new Y8(ce,this.z,this.x,this.y,ye);st.layer=Oe;let bt=r[ve];bt===void 0&&(bt=r[ve]=[]),bt.push({featureIndex:D,feature:st,intersectionZ:ht})}}lookupSymbolFeatures(r,s,u,p,g,y,b,T){const k={};this.loadVTLayers();const D=qp(g);for(const L of r)this.loadMatchingFeature(k,{bucketIndex:u,sourceLayerIndex:p,featureIndex:L,layoutVertexArrayOffset:0},D,y,b,T,s);return k}loadFeature(r){const{featureIndex:s,sourceLayerIndex:u}=r;this.loadVTLayers();const p=this.sourceLayerCoder.decode(u),g=this.vtFeatures[p];if(g[s])return g[s];const y=this.vtLayers[p].feature(s);return g[s]=y,y}hasLayer(r){for(const s of this.bucketLayerIDs)for(const u of s)if(r===u)return!0;return!1}getId(r,s){let u=r.id;if(this.promoteId){const p=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];p!=null&&(u=r.properties[p]),typeof u=="boolean"&&(u=Number(u))}return u}}function h9(o,r,s,u,p){return Ft(o,(g,y)=>{const b=r instanceof ge?r.get(y):null;return b&&b.evaluate?b.evaluate(s,u,p):b})}function cj(o,r){return r-o}wn(d9,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class p9{constructor(r,s){this.width=r,this.height=s,this.nextRow=0,this.image=new xu({width:r,height:s}),this.positions={},this.uploaded=!1}getDash(r,s){const u=this.getKey(r,s);return this.positions[u]}trim(){const r=this.width,s=this.height=_n(this.nextRow);this.image.resize({width:r,height:s})}getKey(r,s){return r.join(",")+s}getDashRanges(r,s,u){const p=[];let g=r.length%2==1?-r[r.length-1]*u:0,y=r[0]*u,b=!0;p.push({left:g,right:y,isDash:b,zeroLength:r[0]===0});let T=r[0];for(let k=1;k<r.length;k++){b=!b;const D=r[k];g=T*u,T+=D,y=T*u,p.push({left:g,right:y,isDash:b,zeroLength:D===0})}return p}addRoundDash(r,s,u){const p=s/2;for(let g=-u;g<=u;g++){const y=this.width*(this.nextRow+u+g);let b=0,T=r[b];for(let k=0;k<this.width;k++){k/T.right>1&&(T=r[++b]);const D=Math.abs(k-T.left),L=Math.abs(k-T.right),F=Math.min(D,L);let U;const q=g/u*(p+1);if(T.isDash){const ee=p-Math.abs(q);U=Math.sqrt(F*F+ee*ee)}else U=p-Math.sqrt(F*F+q*q);this.image.data[y+k]=Math.max(0,Math.min(255,U+128))}}}addRegularDash(r,s){for(let T=r.length-1;T>=0;--T){const k=r[T],D=r[T+1];k.zeroLength?r.splice(T,1):D&&D.isDash===k.isDash&&(D.left=k.left,r.splice(T,1))}const u=r[0],p=r[r.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const g=this.width*this.nextRow;let y=0,b=r[y];for(let T=0;T<this.width;T++){T/b.right>1&&(b=r[++y]);const k=Math.abs(T-b.left),D=Math.abs(T-b.right),L=Math.min(k,D);this.image.data[g+T]=Math.max(0,Math.min(255,(b.isDash?L:-L)+s+128))}}addDash(r,s){const u=this.getKey(r,s);if(this.positions[u])return this.positions[u];const p=s==="round",g=p?7:0,y=2*g+1;if(this.nextRow+y>this.height)return Ct("LineAtlas out of space"),null;r.length===0&&r.push(1);let b=0;for(let D=0;D<r.length;D++)r[D]<0&&(Ct("Negative value is found in line dasharray, replacing values with 0"),r[D]=0),b+=r[D];if(b!==0){const D=this.width/b,L=this.getDashRanges(r,this.width,D);p?this.addRoundDash(L,D,g):this.addRegularDash(L,s==="square"?.5*D:0)}const T=this.nextRow+g;this.nextRow+=y;const k={tl:[T,g],br:[b,0]};return this.positions[u]=k,k}}wn(p9,"LineAtlas");const f9=1*Ul;class m9{constructor(r){const s={},u=[];for(const b in r){const T=r[b],k=s[b]={};for(const D in T.glyphs){const L=T.glyphs[+D];if(!L||L.bitmap.width===0||L.bitmap.height===0)continue;const F=L.metrics.localGlyph?f9:1,U={x:0,y:0,w:L.bitmap.width+2*F,h:L.bitmap.height+2*F};u.push(U),k[D]=U}}const{w:p,h:g}=Mw(u),y=new xu({width:p||1,height:g||1});for(const b in r){const T=r[b];for(const k in T.glyphs){const D=T.glyphs[+k];if(!D||D.bitmap.width===0||D.bitmap.height===0)continue;const L=s[b][k],F=D.metrics.localGlyph?f9:1;xu.copy(D.bitmap,y,{x:0,y:0},{x:L.x+F,y:L.y+F},D.bitmap)}}this.image=y,this.positions=s}}wn(m9,"GlyphAtlas");class uj{constructor(r){this.tileID=new xa(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y),this.tileZoom=r.tileZoom,this.uid=r.uid,this.zoom=r.zoom,this.canonical=r.tileID.canonical,this.pixelRatio=r.pixelRatio,this.tileSize=r.tileSize,this.source=r.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=r.showCollisionBoxes,this.collectResourceTiming=!!r.collectResourceTiming,this.returnDependencies=!!r.returnDependencies,this.promoteId=r.promoteId,this.enableTerrain=!!r.enableTerrain,this.isSymbolTile=r.isSymbolTile,this.tileTransform=jh(r.tileID.canonical,r.projection),this.projection=r.projection}parse(r,s,u,p,g){this.status="parsing",this.data=r,this.collisionBoxArray=new qr;const y=new K8(Object.keys(r.layers).sort()),b=new d9(this.tileID,this.promoteId);b.bucketLayerIDs=[];const T={},k=new p9(256,256),D={featureIndex:b,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:k,availableImages:u},L=s.familiesBySource[this.source];for(const Le in L){const Oe=r.layers[Le];if(!Oe)continue;let ht=!1,st=!1;for(const mt of L[Le])mt[0].type==="symbol"?ht=!0:st=!0;if(this.isSymbolTile===!0&&!ht||this.isSymbolTile===!1&&!st)continue;Oe.version===1&&Ct(`Vector tile source "${this.source}" layer "${Le}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const bt=y.encode(Le),Vt=[];for(let mt=0;mt<Oe.length;mt++){const It=Oe.feature(mt),At=b.getId(It,Le);Vt.push({feature:It,id:At,index:mt,sourceLayerIndex:bt})}for(const mt of L[Le]){const It=mt[0];this.isSymbolTile!==void 0&&It.type==="symbol"!==this.isSymbolTile||It.minzoom&&this.zoom<Math.floor(It.minzoom)||It.maxzoom&&this.zoom>=It.maxzoom||It.visibility!=="none"&&(Zw(mt,this.zoom,u),(T[It.id]=It.createBucket({index:b.bucketLayerIDs.length,layers:mt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:bt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(Vt,D,this.tileID.canonical,this.tileTransform),b.bucketLayerIDs.push(mt.map(At=>At.id)))}}let F,U,q,ee;k.trim();const ce={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ye=()=>{if(F)return g(F);if(U&&q&&ee){const Le=new m9(U),Oe=new w8(q,ee);for(const ht in T){const st=T[ht];st instanceof fd?(Zw(st.layers,this.zoom,u),zB(st,U,Le.positions,q,Oe.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):st.hasPattern&&(st instanceof my||st instanceof uy||st instanceof Wm)&&(Zw(st.layers,this.zoom,u),st.addFeatures(D,this.tileID.canonical,Oe.patternPositions,u,this.tileTransform))}this.status="done",g(null,{buckets:Tt(T).filter(ht=>!ht.isEmpty()),featureIndex:b,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Le.image,lineAtlas:k,imageAtlas:Oe,glyphMap:this.returnDependencies?U:null,iconMap:this.returnDependencies?q:null,glyphPositions:this.returnDependencies?Le.positions:null})}},Ae=Ft(D.glyphDependencies,Le=>Object.keys(Le).map(Number));Object.keys(Ae).length?p.send("getGlyphs",{uid:this.uid,stacks:Ae},(Le,Oe)=>{F||(F=Le,U=Oe,ye())},void 0,!1,ce):U={};const ve=Object.keys(D.iconDependencies);ve.length?p.send("getImages",{icons:ve,source:this.source,tileID:this.tileID,type:"icons"},(Le,Oe)=>{F||(F=Le,q=Oe,ye())},void 0,!1,ce):q={};const Ie=Object.keys(D.patternDependencies);Ie.length?p.send("getImages",{icons:Ie,source:this.source,tileID:this.tileID,type:"patterns"},(Le,Oe)=>{F||(F=Le,ee=Oe,ye())},void 0,!1,ce):ee={},ye()}}function Zw(o,r,s){const u=new O(r);for(const p of o)p.recalculate(u,s)}class g9{constructor(r){this.entries={},this.scheduler=r}request(r,s,u,p){const g=this.entries[r]=this.entries[r]||{callbacks:[]};if(g.result){const[y,b]=g.result;return this.scheduler?this.scheduler.add(()=>{p(y,b)},s):p(y,b),()=>{}}return g.callbacks.push(p),g.cancel||(g.cancel=u((y,b)=>{g.result=[y,b];for(const T of g.callbacks)this.scheduler?this.scheduler.add(()=>{T(y,b)},s):T(y,b);setTimeout(()=>delete this.entries[r],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(y=>y!==p),g.callbacks.length||(g.cancel(),delete this.entries[r]))}}}function _9(o,r,s){const u=JSON.stringify(o.request);return o.data&&(this.deduped.entries[u]={result:[null,o.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom},p=>{const g=vi(o.request,(y,b,T,k)=>{y?p(y):b&&p(null,{vectorTile:s?void 0:new Cw(new yy(b)),rawData:b,cacheControl:T,expires:k})});return()=>{g.cancel(),p()}},r)}const y9=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Xw{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,u]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=u>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const g=y9[15&u];if(!g)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(r,2,1),[b]=new Uint32Array(r,4,1);return new Xw(b,y,g,r)}constructor(r,s=64,u=Float64Array,p){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=u,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const g=y9.indexOf(this.ArrayType),y=2*r*this.ArrayType.BYTES_PER_ELEMENT,b=r*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-b%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${u}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+T,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+y+b+T),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+T,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=r,this.coords[this._pos++]=s,u}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Kw(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:y,nodeSize:b}=this,T=[0,g.length-1,0],k=[];for(;T.length;){const D=T.pop()||0,L=T.pop()||0,F=T.pop()||0;if(L-F<=b){for(let ce=F;ce<=L;ce++){const ye=y[2*ce],Ae=y[2*ce+1];ye>=r&&ye<=u&&Ae>=s&&Ae<=p&&k.push(g[ce])}continue}const U=F+L>>1,q=y[2*U],ee=y[2*U+1];q>=r&&q<=u&&ee>=s&&ee<=p&&k.push(g[U]),(D===0?r<=q:s<=ee)&&(T.push(F),T.push(U-1),T.push(1-D)),(D===0?u>=q:p>=ee)&&(T.push(U+1),T.push(L),T.push(1-D))}return k}within(r,s,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:g,nodeSize:y}=this,b=[0,p.length-1,0],T=[],k=u*u;for(;b.length;){const D=b.pop()||0,L=b.pop()||0,F=b.pop()||0;if(L-F<=y){for(let ce=F;ce<=L;ce++)x9(g[2*ce],g[2*ce+1],r,s)<=k&&T.push(p[ce]);continue}const U=F+L>>1,q=g[2*U],ee=g[2*U+1];x9(q,ee,r,s)<=k&&T.push(p[U]),(D===0?r-u<=q:s-u<=ee)&&(b.push(F),b.push(U-1),b.push(1-D)),(D===0?r+u>=q:s+u>=ee)&&(b.push(U+1),b.push(L),b.push(1-D))}return T}}function Kw(o,r,s,u,p,g){if(p-u<=s)return;const y=u+p>>1;v9(o,r,y,u,p,g),Kw(o,r,s,u,y-1,1-g),Kw(o,r,s,y+1,p,1-g)}function v9(o,r,s,u,p,g){for(;p>u;){if(p-u>600){const k=p-u+1,D=s-u+1,L=Math.log(k),F=.5*Math.exp(2*L/3),U=.5*Math.sqrt(L*F*(k-F)/k)*(D-k/2<0?-1:1);v9(o,r,s,Math.max(u,Math.floor(s-D*F/k+U)),Math.min(p,Math.floor(s+(k-D)*F/k+U)),g)}const y=r[2*s+g];let b=u,T=p;for(rg(o,r,u,s),r[2*p+g]>y&&rg(o,r,u,p);b<T;){for(rg(o,r,b,T),b++,T--;r[2*b+g]<y;)b++;for(;r[2*T+g]>y;)T--}r[2*u+g]===y?rg(o,r,u,T):(T++,rg(o,r,T,p)),T<=s&&(u=T+1),s<=T&&(p=T-1)}}function rg(o,r,s,u){Yw(o,s,u),Yw(r,2*s,2*u),Yw(r,2*s+1,2*u+1)}function Yw(o,r,s){const u=o[r];o[r]=o[s],o[s]=u}function x9(o,r,s,u){const p=o-s,g=r-u;return p*p+g*g}a.ARRAY_TYPE=ts,a.AUTH_ERR_MSG=Me,a.Aabb=va,a.Actor=class{constructor(o,r,s){this.target=o,this.parent=r,this.mapId=s,this.callbacks={},this.cancelCallbacks={},Jt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Zn()?o:v,this.scheduler=new rj}send(o,r,s,u,p=!1,g){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=g,this.callbacks[y]=s);const b=Yn(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:o,hasCallback:!!s,targetMapId:u,mustQueue:p,sourceMapId:this.mapId,data:ad(r,b)},b),{cancel:()=>{s&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(o){const r=o.data,s=r.id;if(s&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){const u=this.cancelCallbacks[s];delete this.cancelCallbacks[s],u&&u.cancel()}else if(r.mustQueue||Zn()){const u=this.callbacks[s];this.cancelCallbacks[s]=this.scheduler.add(()=>this.processTask(s,r),u&&u.metadata||{type:"message"})}else this.processTask(s,r)}processTask(o,r){if(r.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(r.error?s(pu(r.error)):s(null,pu(r.data)))}else{const s=Yn(this.globalScope)?void 0:[],u=r.hasCallback?(g,y)=>{delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:g?ad(g):null,data:ad(y,s)},s)}:g=>{},p=pu(r.data);if(this.parent[r.type])this.parent[r.type](r.sourceMapId,p,u);else if(this.parent.getWorkerSource){const g=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,g[0],p.source)[g[1]](p,u)}else u(new Error(`Could not find function ${r.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.CanonicalTileID=fy,a.Color=Ii,a.ColorMode=Ic,a.CullFaceMode=Vl,a.DEMData=My,a.DataConstantProperty=J,a.DedupedRequest=g9,a.DepthMode=yf,a.EXTENT=Hn,a.Elevation=class{isDataAvailableAtPoint(o){const r=this._source();if(this.isUsingMockSource()||!r||o.y<0||o.y>1)return!1;const s=r.getSource().maxzoom,u=1<<s,p=Math.floor(o.x),g=Math.floor((o.x-p)*u),y=Math.floor(o.y*u),b=this.findDEMTileFor(new xa(s,p,s,g,y));return!(!b||!b.dem)}getAtPointOrZero(o,r=0){return this.getAtPoint(o,r)||0}getAtPoint(o,r,s=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const u=this._source();if(!u||o.y<0||o.y>1)return r;const p=u.getSource().maxzoom,g=1<<p,y=Math.floor(o.x),b=o.x-y,T=new xa(p,y,p,Math.floor(b*g),Math.floor(o.y*g)),k=this.findDEMTileFor(T);if(!k||!k.dem)return r;const D=k.dem,L=1<<k.tileID.canonical.z,F=(b*L-k.tileID.canonical.x)*D.dim,U=(o.y*L-k.tileID.canonical.y)*D.dim,q=Math.floor(F),ee=Math.floor(U);return(s?this.exaggeration():1)*wr(wr(D.get(q,ee),D.get(q,ee+1),U-ee),wr(D.get(q+1,ee),D.get(q+1,ee+1),U-ee),F-q)}getAtTileOffset(o,r,s){const u=1<<o.canonical.z;return this.getAtPointOrZero(new rf(o.wrap+(o.canonical.x+r/Hn)/u,(o.canonical.y+s/Hn)/u))}getAtTileOffsetFunc(o,r,s,u){return p=>{const g=this.getAtTileOffset(o,p.x,p.y),y=u.upVector(o.canonical,p.x,p.y);return Cs(y,y,g*u.upVectorScale(o.canonical,r,s).metersToTile),y}}getForTilePoints(o,r,s,u){if(this.isUsingMockSource())return!1;const p=Dy.create(this,o,u);return!!p&&(r.forEach(g=>{g[2]=this.exaggeration()*p.getElevationAt(g[0],g[1],s)}),!0)}getMinMaxForTile(o){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(o);if(!r||!r.dem)return null;const s=r.dem.tree,u=r.tileID,p=1<<o.canonical.z-u.canonical.z;let g=o.canonical.x/p-u.canonical.x,y=o.canonical.y/p-u.canonical.y,b=0;for(let T=0;T<o.canonical.z-u.canonical.z&&!s.leaves[b];T++){g*=2,y*=2;const k=2*Math.floor(y)+Math.floor(g);b=s.childOffsets[b]+k,g%=1,y%=1}return{min:this.exaggeration()*s.minimums[b],max:this.exaggeration()*s.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(o,r,s){throw new Error("Pure virtual method called.")}pointCoordinate(o){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(o){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},a.ErrorEvent=Na,a.EvaluationParameters=O,a.Event=za,a.Evented=Cl,a.FillExtrusionBucket=Wm,a.Frustum=iw,a.FrustumCorners=rw,a.GLOBE_RADIUS=Ec,a.GLOBE_SCALE_MATCH_LATITUDE=45,a.GLOBE_ZOOM_THRESHOLD_MAX=vS,a.GLOBE_ZOOM_THRESHOLD_MIN=ow,a.GlobeSharedBuffers=class{constructor(o){this._createGrid(o),this._createPoles(o)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const o of this._poleSegments)o.destroy();for(const o of this._gridSegments)o.withSkirts.destroy(),o.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const o of this._wireframeSegments)o.destroy()}}_fillGridMeshWithLods(o,r){const s=new Ut,u=new Mn,p=[],g=o+1+2,y=r[0]+1,b=r[0]+1+(1+r.length),T=(k,D,L)=>{let F=k===g-1?k-2:k===0?k:k-1;return F+=L?24575:0,[F,D]};for(let k=0;k<g;++k)s.emplaceBack(...T(k,0,!0));for(let k=0;k<y;++k)for(let D=0;D<g;++D)s.emplaceBack(...T(D,k,(D===0||D===g-1)&&!0));for(let k=0;k<r.length;++k){const D=r[k];for(let L=0;L<g;++L)s.emplaceBack(...T(L,D,!0))}for(let k=0;k<r.length;++k){const D=u.length,L=r[k]+1+2,F=new Mn;for(let ee=0;ee<L-1;ee++){const ce=ee===L-2,ye=ce?g*(b-r.length+k-ee):g;for(let Ae=0;Ae<g-1;Ae++){const ve=ee*g+Ae;ee===0||ce||Ae===0||Ae===g-2?(F.emplaceBack(ve+1,ve,ve+ye),F.emplaceBack(ve+ye,ve+ye+1,ve+1)):(u.emplaceBack(ve+1,ve,ve+ye),u.emplaceBack(ve+ye,ve+ye+1,ve+1))}}const U=Zi.simpleSegment(0,D,s.length,u.length-D);for(let ee=0;ee<F.uint16.length;ee+=3)u.emplaceBack(F.uint16[ee],F.uint16[ee+1],F.uint16[ee+2]);const q=Zi.simpleSegment(0,D,s.length,u.length-D);p.push({withoutSkirts:U,withSkirts:q})}return{vertices:s,indices:u,segments:p}}_createGrid(o){const r=this._fillGridMeshWithLods(Lh,Om);this._gridSegments=r.segments,this._gridBuffer=o.createVertexBuffer(r.vertices,Rm.members),this._gridIndexBuffer=o.createIndexBuffer(r.indices,!0)}_createPoles(o){const r=new Mn;for(let p=0;p<=Lh;p++)r.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=o.createIndexBuffer(r,!0);const s=new Hr,u=new Hr;this._poleSegments=[];for(let p=0,g=0;p<ow;p++){const y=360/(1<<p);s.emplaceBack(0,-Ec,0,.5,0),u.emplaceBack(0,-Ec,0,.5,1);for(let b=0;b<=Lh;b++){const T=b/Lh,k=wr(0,y,T),[D,L,F]=ef(rF,iF,k,Ec);s.emplaceBack(D,L,F,T,0),u.emplaceBack(D,L,F,T,1)}this._poleSegments.push(Zi.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=o.createVertexBuffer(s,_S,!1),this._poleSouthVertexBuffer=o.createVertexBuffer(u,_S,!1)}getGridBuffers(o,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[o].withSkirts:this._gridSegments[o].withoutSkirts]}getPoleBuffers(o){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[o]]}getWirefameBuffers(o,r){if(!this._wireframeSegments){const s=new wo,u=Lh,p=u+1+2,g=1;this._wireframeSegments=[];for(let y=0,b=0;y<Om.length;y++){const T=Om[y];for(let D=g;D<T+g;D++)for(let L=g;L<u+g;L++){const F=D*p+L;s.emplaceBack(F,F+1),s.emplaceBack(F,F+p),s.emplaceBack(F,F+p+1)}const k=T*u*3;this._wireframeSegments.push(Zi.simpleSegment(0,b,(T+1)*p,k)),b+=k}this._wireframeIndexBuffer=o.createIndexBuffer(s)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[r]]}},a.GlyphManager=pf,a.ImagePosition=Dw,a.KDBush=Xw,a.LivePerformanceUtils=hr,a.LngLat=Gr,a.LngLatBounds=ud,a.LocalGlyphMode=Lw,a.MAX_MERCATOR_LATITUDE=Xo,a.MercatorCoordinate=rf,a.ONE_EM=Oo,a.OverscaledTileID=xa,a.PerformanceMarkers=ln,a.Point=_e,a.Properties=Se,a.RGBAImage=ns,a.Ray=nw,a.RequestManager=class{constructor(o,r,s){this._transformRequestFn=o,this._customAccessToken=r,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const o=function(){let r="";for(let s=0;s<10;s++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",X,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,r){return this._transformRequestFn&&this._transformRequestFn(o,r)||{url:o}}normalizeStyleURL(o,r){if(!De(o))return o;const s=Pt(o);return s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||r)}normalizeGlyphsURL(o,r){if(!De(o))return o;const s=Pt(o);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||r)}normalizeSourceURL(o,r,s,u){if(!De(o))return o;const p=Pt(o);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),s&&p.params.push(`language=${s}`),u&&p.params.push(`worldview=${u}`),this._makeAPIURL(p,this._customAccessToken||r)}normalizeSpriteURL(o,r,s,u){const p=Pt(o);return De(o)?(p.path=`/styles/v1${p.path}/sprite${r}${s}`,this._makeAPIURL(p,this._customAccessToken||u)):(p.path+=`${r}${s}`,Et(p))}normalizeTileURL(o,r,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!De(o))return o;const u=Pt(o);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${r||s&&u.authority!=="raster"&&s===512?"@2x":""}${N.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${R.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${R.TILE_URL_VERSION}${u.path}`);const p=this._customAccessToken||function(g){for(const y of g){const b=y.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(u.params)||R.ACCESS_TOKEN;return R.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,p)}canonicalizeTileURL(o,r){const s=Pt(o);if(!s.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!s.path.match(/\.[\w]+$/))return o;let u="mapbox://";s.path.match(/^\/raster\/v1\//)?u+=`raster/${s.path.replace(`/${R.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${s.path.replace(`/${R.TILE_URL_VERSION}/`,"")}`;let p=s.params;return r&&(p=p.filter(g=>!g.match(/^access_token=/))),p.length&&(u+=`?${p.join("&")}`),u}canonicalizeTileset(o,r){const s=!!r&&De(r),u=[];for(const p of o.tiles||[])qe(p)?u.push(this.canonicalizeTileURL(p,s)):u.push(p);return u}_makeAPIURL(o,r){const s="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=Pt(R.API_URL);if(o.protocol=u.protocol,o.authority=u.authority,o.protocol==="http"){const p=o.params.indexOf("secure");p>=0&&o.params.splice(p,1)}if(u.path!=="/"&&(o.path=`${u.path}${o.path}`),!R.REQUIRE_ACCESS_TOKEN)return Et(o);if(r=r||R.ACCESS_TOKEN,!this._silenceAuthErrors){if(!r)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if(r[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return o.params=o.params.filter(p=>p.indexOf("access_token")===-1),o.params.push(`access_token=${r||""}`),Et(o)}},a.ResourceType=Fn,a.SegmentVector=Zi,a.SourceCache=$h,a.StencilMode=Hw,a.StructArrayLayout1ui2=es,a.StructArrayLayout2f1f2i16=Gn,a.StructArrayLayout2i4=Ut,a.StructArrayLayout2ui4=wo,a.StructArrayLayout3f12=yr,a.StructArrayLayout3ui6=Mn,a.StructArrayLayout4i8=kt,a.StructArrayLayout5f20=Hr,a.Texture=tg,a.Tile=Vw,a.Transitionable=Y,a.Uniform1f=Y_,a.Uniform1i=class extends gu{constructor(o){super(o),this.current=0}set(o,r,s){this.fetchUniformLocation(o,r)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},a.Uniform2f=class extends gu{constructor(o){super(o),this.current=[0,0]}set(o,r,s){this.fetchUniformLocation(o,r)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}},a.Uniform3f=class extends gu{constructor(o){super(o),this.current=[0,0,0]}set(o,r,s){this.fetchUniformLocation(o,r)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}},a.Uniform4f=eS,a.UniformColor=tS,a.UniformMatrix2f=class extends gu{constructor(o){super(o),this.current=$N}set(o,r,s){if(this.fetchUniformLocation(o,r)){for(let u=0;u<4;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}}},a.UniformMatrix3f=class extends gu{constructor(o){super(o),this.current=jN}set(o,r,s){if(this.fetchUniformLocation(o,r)){for(let u=0;u<9;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},a.UniformMatrix4f=class extends gu{constructor(o){super(o),this.current=BN}set(o,r,s){if(this.fetchUniformLocation(o,r)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let u=1;u<16;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}},a.UnwrappedTileID=s8,a.ValidationError=gn,a.VectorTileFeature=hy,a.VectorTileWorkerSource=class extends Cl{constructor(o,r,s,u,p){super(),this.actor=o,this.layerIndex=r,this.availableImages=s,this.loadVectorData=p||_9,this.loading={},this.loaded={},this.deduped=new g9(o.scheduler),this.isSpriteLoaded=u,this.scheduler=o.scheduler}loadTile(o,r){const s=o.uid,u=o&&o.request,p=u&&u.collectResourceTiming,g=this.loading[s]=new uj(o);g.abort=this.loadVectorData(o,(y,b)=>{const T=!this.loading[s];if(delete this.loading[s],T||y||!b)return g.status="done",T||(this.loaded[s]=g),r(y);const k=b.rawData,D={};b.expires&&(D.expires=b.expires),b.cacheControl&&(D.cacheControl=b.cacheControl),g.vectorTile=b.vectorTile||new Cw(new yy(k));const L=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(F,U)=>{if(F||!U)return r(F);const q={};if(p){const ee=Io(u);ee.length>0&&(q.resourceTiming=JSON.parse(JSON.stringify(ee)))}r(null,Rt({rawTileData:k.slice(0)},U,D,q))})};this.isSpriteLoaded?L():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(L,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom}):L()}),this.loaded=this.loaded||{},this.loaded[s]=g})}reloadTile(o,r){const s=this.loaded,u=o.uid,p=this;if(s&&s[u]){const g=s[u];g.showCollisionBoxes=o.showCollisionBoxes,g.enableTerrain=!!o.enableTerrain,g.projection=o.projection,g.tileTransform=jh(o.tileID.canonical,o.projection);const y=(b,T)=>{const k=g.reloadCallback;k&&(delete g.reloadCallback,g.parse(g.vectorTile,p.layerIndex,this.availableImages,p.actor,k)),r(b,T)};g.status==="parsing"?g.reloadCallback=y:g.status==="done"&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,y):y())}}abortTile(o,r){const s=o.uid,u=this.loading[s];u&&(u.abort&&u.abort(),delete this.loading[s]),r()}removeTile(o,r){const s=this.loaded,u=o.uid;s&&s[u]&&delete s[u],r()}},a.WritingMode=Is,a.ZoomDependentExpression=wh,a.add=yu,a.addDynamicAttributes=Py,a.adjoint=function(o,r){var s=r[0],u=r[1],p=r[2],g=r[3],y=r[4],b=r[5],T=r[6],k=r[7],D=r[8];return o[0]=y*D-b*k,o[1]=p*k-u*D,o[2]=u*b-p*y,o[3]=b*T-g*D,o[4]=s*D-p*T,o[5]=p*g-s*b,o[6]=g*k-y*T,o[7]=u*T-s*k,o[8]=s*y-u*g,o},a.asyncAll=Dt,a.bezier=rt,a.bindAll=Jt,a.boundsAttributes=Q8,a.bufferConvexPolygon=function(o,r){const s=[];for(let u=0;u<o.length;u++){const p=it(u-1,-1,o.length-1),g=it(u+1,-1,o.length-1),y=o[u],b=o[g],T=o[p].sub(y).unit(),k=b.sub(y).unit(),D=k.angleWithSep(T.x,T.y),L=T.add(k).unit().mult(-1*r/Math.sin(D/2));s.push(y.add(L))}return s},a.cacheEntryPossiblyAdded=function(o){Dn++,Dn>Xt&&(o.getActor().send("enforceCacheSizeLimit",Ye),Dn=0)},a.calculateGlobeLabelMatrix=function(o,r){const{x:s,y:u}=o.point,p=TS(s,u,o.worldSize/o._pixelsPerMercatorPixel,0,0);return Dh(p,p,lw(Tc(r)))},a.calculateGlobeMatrix=function(o){const{x:r,y:s}=o.point,{lng:u,lat:p}=o._center;return TS(r,s,o.worldSize,u,p)},a.calculateGlobeMercatorMatrix=function(o){const r=o.pixelsPerMeter,s=r/jl(1,o.center.lat),u=Fl(new Float64Array(16));return Cm(u,u,[o.point.x,o.point.y,0]),Rh(u,u,[s,s,r]),Float32Array.from(u)},a.circumferenceAtLatitude=uw,a.clamp=Ne,a.clearTileCache=function(o){if(!en())return;const r=v.caches.delete(bn);o&&r.catch(o).then(()=>o())},a.clipLine=L8,a.clone=function(o){var r=new ts(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},a.clone$1=En,a.collisionCircleLayout=lB,a.config=R,a.conjugate=function(o,r){return o[0]=-r[0],o[1]=-r[1],o[2]=-r[2],o[3]=r[3],o},a.create=function(){var o=new ts(16);return ts!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a.create$1=iS,a.createExpression=rd,a.createLayout=Je,a.createStyleLayer=function(o){return o.type==="custom"?new QB(o):new tj[o.type](o)},a.cross=tw,a.degToRad=gt,a.distance=function(o,r){return Math.hypot(r[0]-o[0],r[1]-o[1],r[2]-o[2])},a.div=function(o,r,s){return o[0]=r[0]/s[0],o[1]=r[1]/s[1],o[2]=r[2]/s[2],o},a.dot=Ys,a.earthRadius=Nm,a.ease=tt,a.easeCubicInOut=He,a.ecefToLatLng=function([o,r,s]){const u=Math.hypot(o,r,s),p=Math.atan2(o,s),g=.5*Math.PI-Math.acos(-r/u);return new Gr(Ze(p),Ze(g))},a.emitValidationErrors=H_,a.endsWith=vn,a.enforceCacheSizeLimit=function(o){on(),rn&&rn.then(r=>{r.keys().then(s=>{for(let u=0;u<s.length-o;u++)r.delete(s[u])})})},a.evaluateSizeForFeature=gy,a.evaluateSizeForZoom=cf,a.evaluateVariableOffset=j8,a.evented=x,a.exactEquals=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]},a.exactEquals$1=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]},a.exported=ji,a.exported$1=N,a.extend=Rt,a.extend$1=da,a.fillExtrusionHeightLift=i8,a.filterObject=nn,a.fromMat4=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[4],o[4]=r[5],o[5]=r[6],o[6]=r[8],o[7]=r[9],o[8]=r[10],o},a.fromQuat=function(o,r){var s=r[0],u=r[1],p=r[2],g=r[3],y=s+s,b=u+u,T=p+p,k=s*y,D=u*y,L=u*b,F=p*y,U=p*b,q=p*T,ee=g*y,ce=g*b,ye=g*T;return o[0]=1-L-q,o[1]=D+ye,o[2]=F-ce,o[3]=0,o[4]=D-ye,o[5]=1-k-q,o[6]=U+ee,o[7]=0,o[8]=F+ce,o[9]=U-ee,o[10]=1-k-L,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.fromRotation=function(o,r){var s=Math.sin(r),u=Math.cos(r);return o[0]=u,o[1]=s,o[2]=0,o[3]=-s,o[4]=u,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},a.fromScaling=aS,a.furthestTileCorner=function(o){const r=Math.round((o+45+360)%360/90)%4;return We[r]},a.getAABBPointSquareDist=function(o,r,s){let u=0;for(let p=0;p<2;++p){const g=s?s[p]:0;o[p]>g&&(u+=(o[p]-g)*(o[p]-g)),r[p]<g&&(u+=(g-r[p])*(g-r[p]))}return u},a.getAnchorAlignment=Ow,a.getAnchorJustification=Nw,a.getBounds=function(o){let r=1/0,s=1/0,u=-1/0,p=-1/0;for(const g of o)r=Math.min(r,g.x),s=Math.min(s,g.y),u=Math.max(u,g.x),p=Math.max(p,g.y);return{min:new _e(r,s),max:new _e(u,p)}},a.getColumn=qn,a.getDefaultExportFromCjs=Q,a.getGridMatrix=function(o,r,s,u){const p=r.getNorth(),g=r.getSouth(),y=r.getWest(),b=r.getEast(),T=1<<o.z,k=b-y,D=p-g,L=k/Lh,F=-D/Om[s],U=[0,L,0,F,0,0,p,y,0];if(o.z>0){const q=180/u;oS(U,U,[q/k+1,0,0,0,q/D+1,0,-.5*q/L,.5*q/F,1])}return U[2]=T,U[5]=o.x,U[8]=o.y,U},a.getImage=me,a.getJSON=function(o,r){return gr(Rt(o,{type:"json"}),r)},a.getLatitudinalLod=function(o){const r=Xo-5;o=Ne(o,-r,r)/r*90;const s=Math.pow(Math.abs(Math.sin(gt(o))),3);return Math.round(s*(Om.length-1))},a.getMapSessionAPI=lt,a.getPerformanceMeasurement=Io,a.getProjection=Z8,a.getRTLTextPluginStatus=w,a.getReferrer=Ar,a.getTilePoint=function(o,{x:r,y:s},u=0){return new _e(((r-u)*o.scale-o.x)*Hn,(s*o.scale-o.y)*Hn)},a.getTileVec3=function(o,r,s=0){return Qp(((r.x-s)*o.scale-o.x)*Hn,(r.y*o.scale-o.y)*Hn,PS(r.z,r.y))},a.getVideo=function(o,r){const s=v.document.createElement("video");s.muted=!0,s.onloadstart=function(){r(null,s)};for(let u=0;u<o.length;u++){const p=v.document.createElement("source");di(o[u])||(s.crossOrigin="Anonymous"),p.src=o[u],s.appendChild(p)}return{cancel:()=>{}}},a.globeCenterToScreenPoint=function(o){const r=[0,0,0],s=Fl(new Float64Array(16));return Dh(s,o.pixelMatrix,o.globeMatrix),Ui(r,r,s),new _e(r[0],r[1])},a.globeDenormalizeECEF=lw,a.globeECEFOrigin=function(o,r){const s=[0,0,0];return Ui(s,s,zm(Tc(r.canonical))),Ui(s,s,o),s},a.globeMetersToEcef=ey,a.globeNormalizeECEF=zm,a.globePixelsToTileUnits=function(o,r){return Hn/(512*Math.pow(2,o))*ny(Tc(r))},a.globePoleMatrixForTile=function(o,r,s){const u=Fl(new Float64Array(16)),p=(r/(1<<o)-.5)*Math.PI*2;return Q_(u,s.globeMatrix,p),Float32Array.from(u)},a.globeTileBounds=Tc,a.globeTiltAtLngLat=SS,a.globeToMercatorTransition=nf,a.globeUseCustomAntiAliasing=function(o,r,s){const u=nf(s.zoom),p=o.style.map._antialias,g=!!r.extStandardDerivatives,y=r.extStandardDerivativesForceOff||o.terrain&&o.terrain.exaggeration()>0;return u===0&&!p&&!y&&g},a.identity=Fl,a.identity$1=fS,a.invert=Yb,a.isFullscreen=function(){return!!v.document.fullscreenElement||!!v.document.webkitFullscreenElement},a.isLngLatBehindGlobe=cw,a.isMapAuthenticated=function(o){return Ot.has(o)},a.isMapboxURL=De,a.isSafariWithAntialiasingBug=function(o){const r=o.navigator?o.navigator.userAgent:null;return!!Yn(o)&&r&&(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.latFromMercatorY=Zo,a.latLngToECEF=tf,a.len=KN,a.length=Pm,a.length$1=function(o){return Math.hypot(o[0],o[1],o[2],o[3])},a.lngFromMercatorX=Ps,a.loadVectorTile=_9,a.makeRequest=gr,a.mapValue=function(o,r,s,u,p){return Ne((o-r)/(s-r)*(p-u)+u,u,p)},a.mercatorScale=IS,a.mercatorXfromLng=Sc,a.mercatorYfromLat=kc,a.mercatorZfromAltitude=jl,a.mul=ZN,a.mul$1=XN,a.multiply=Dh,a.multiply$1=oS,a.multiply$2=cS,a.nextPowerOfTwo=_n,a.normalize=ya,a.normalize$1=YN,a.normalize$2=hS,a.number=wr,a.ortho=function(o,r,s,u,p,g,y){var b=1/(r-s),T=1/(u-p),k=1/(g-y);return o[0]=-2*b,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*T,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*k,o[11]=0,o[12]=(r+s)*b,o[13]=(p+u)*T,o[14]=(y+g)*k,o[15]=1,o},a.pbf=f8,a.perspective=function(o,r,s,u,p){var g,y=1/Math.tan(r/2);return o[0]=y/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=y,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+u)*(g=1/(u-p)),o[14]=2*p*u*g):(o[10]=-1,o[14]=-2*u),o},a.pick=function(o,r){const s={};for(let u=0;u<r.length;u++){const p=r[u];p in o&&(s[p]=o[p])}return s},a.plugin=I,a.pointGeometry=A,a.polesInViewport=function(o){const r=Fl(new Float64Array(16));Dh(r,o.pixelMatrix,o.globeMatrix);const s=[0,Js,0],u=[0,Qs,0];return Ui(s,s,r),Ui(u,u,r),[s[0]>0&&s[0]<=o.width&&s[1]>0&&s[1]<=o.height&&!cw(o,new Gr(o.center.lat,90)),u[0]>0&&u[0]<=o.width&&u[1]>0&&u[1]<=o.height&&!cw(o,new Gr(o.center.lat,-90))]},a.polygonContainsPoint=Fh,a.polygonIntersectsBox=zS,a.polygonIntersectsPolygon=DS,a.polygonizeBounds=function(o,r,s=0,u=!0){const p=new _e(s,s),g=o.sub(p),y=r.add(p),b=[g,new _e(y.x,g.y),y,new _e(g.x,y.y)];return u&&b.push(g.clone()),b},a.posAttributes=Rm,a.postMapLoadEvent=br,a.postPerformanceEvent=Ge,a.postTurnstileEvent=Xn,a.potpack=Mw,a.prevPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},a.radToDeg=Ze,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.registerForPluginStateChange=function(o){return o({pluginStatus:m,pluginURL:l}),x.on("pluginStateChange",o),o},a.removeAuthState=function(o){Ot.delete(o)},a.renderColorRamp=yw,a.resample=AS,a.rotateX=Jb,a.rotateX$1=mS,a.rotateY=Q_,a.rotateY$1=gS,a.rotateZ=function(o,r,s){var u=Math.sin(s),p=Math.cos(s),g=r[0],y=r[1],b=r[2],T=r[3],k=r[4],D=r[5],L=r[6],F=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=g*p+k*u,o[1]=y*p+D*u,o[2]=b*p+L*u,o[3]=T*p+F*u,o[4]=k*p-g*u,o[5]=D*p-y*u,o[6]=L*p-b*u,o[7]=F*p-T*u,o},a.rotateZ$1=function(o,r,s){s*=.5;var u=r[0],p=r[1],g=r[2],y=r[3],b=Math.sin(s),T=Math.cos(s);return o[0]=u*T+p*b,o[1]=p*T-u*b,o[2]=g*T+y*b,o[3]=y*T-g*b,o},a.scale=Rh,a.scale$1=dS,a.scale$2=Cs,a.scaleAndAdd=Mm,a.set=function(o,r,s,u){return o[0]=r,o[1]=s,o[2]=u,o},a.setCacheLimits=function(o,r){Ye=o,Xt=r},a.setColumn=function(o,r,s){o[4*r+0]=s[0],o[4*r+1]=s[1],o[4*r+2]=s[2],o[4*r+3]=s[3]},a.setRTLTextPlugin=function(o,r,s=!1){if(m===wm||m===Em||m===Tm)throw new Error("setRTLTextPlugin cannot be called multiple times.");l=ji.resolveURL(o),m=wm,sd=r,_(),s||C()},a.smoothstep=et,a.spec=yt,a.squaredLength=function(o){var r=o[0],s=o[1],u=o[2];return r*r+s*s+u*u},a.storeAuthState=function(o,r){r?Ot.add(o):Ot.delete(o)},a.sub=Bl,a.subtract=ew,a.symbolSize=cB,a.tileAABB=function(o,r,s,u,p,g,y,b,T){if(T.name==="globe")return nF(o,r,new fy(s,u,p));const k=jh({z:s,x:u,y:p},T);return new va([(g+k.x/k.scale)*r,r*(k.y/k.scale),y],[(g+k.x2/k.scale)*r,r*(k.y2/k.scale),b])},a.tileCornersToBounds=ty,a.tileTransform=jh,a.transformMat3=function(o,r,s){var u=r[0],p=r[1],g=r[2];return o[0]=u*s[0]+p*s[3]+g*s[6],o[1]=u*s[1]+p*s[4]+g*s[7],o[2]=u*s[2]+p*s[5]+g*s[8],o},a.transformMat4=Ui,a.transformMat4$1=Oh,a.transformQuat=uS,a.transitionTileAABBinECEF=bS,a.translate=Cm,a.transpose=function(o,r){if(o===r){var s=r[1],u=r[2],p=r[5];o[1]=r[3],o[2]=r[6],o[3]=s,o[5]=r[7],o[6]=u,o[7]=p}else o[0]=r[0],o[1]=r[3],o[2]=r[6],o[3]=r[1],o[4]=r[4],o[5]=r[7],o[6]=r[2],o[7]=r[5],o[8]=r[8];return o},a.triggerPluginCompletionEvent=h,a.uniqueId=tn,a.updateGlobeVertexNormal=function(o,r,s,u,p){const g=5*r+2;o.float32[g+0]=s,o.float32[g+1]=u,o.float32[g+2]=p},a.validateCustomStyleLayer=function(o){const r=[],s=o.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},a.validateFilter=o=>Qa(Ch(o)),a.validateFog=o=>Qa(U_(o)),a.validateLayer=o=>Qa(F_(o)),a.validateLight=o=>Qa($_(o)),a.validateSource=o=>Qa(j_(o)),a.validateStyle=W_,a.validateTerrain=o=>Qa(_m(o)),a.values=Tt,a.vectorTile=dy,a.version=S,a.warnOnce=Ct,a.window=v,a.wrap=it}),d(["./shared"],function(a){function v(Te){if(typeof Te=="number"||typeof Te=="boolean"||typeof Te=="string"||Te==null)return JSON.stringify(Te);if(Array.isArray(Te)){let ie="[";for(const me of Te)ie+=`${v(me)},`;return`${ie}]`}let re="{";for(const ie of Object.keys(Te).sort())re+=`${ie}:${v(Te[ie])},`;return`${re}}`}function S(Te){let re="";for(const ie of a.refProperties)re+=`/${v(Te[ie])}`;return re}class M{constructor(re){this.keyCache={},re&&this.replace(re)}replace(re){this._layerConfigs={},this._layers={},this.update(re,[])}update(re,ie){for(const Me of re)this._layerConfigs[Me.id]=Me,(this._layers[Me.id]=a.createStyleLayer(Me)).compileFilter(),this.keyCache[Me.id]&&delete this.keyCache[Me.id];for(const Me of ie)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const me=function(Me,De){const qe={};for(let je=0;je<Me.length;je++){const Fe=De&&De[Me[je].id]||S(Me[je]);De&&(De[Me[je].id]=Fe);let ct=qe[Fe];ct||(ct=qe[Fe]=[]),ct.push(Me[je])}const Xe=[];for(const je in qe)Xe.push(qe[je]);return Xe}(a.values(this._layerConfigs),this.keyCache);for(const Me of me){const De=Me.map(Pt=>this._layers[Pt.id]),qe=De[0];if(qe.visibility==="none")continue;const Xe=qe.source||"";let je=this.familiesBySource[Xe];je||(je=this.familiesBySource[Xe]={});const Fe=qe.sourceLayer||"_geojsonTileLayer";let ct=je[Fe];ct||(ct=je[Fe]=[]),ct.push(De)}}}class R{loadTile(re,ie){const{uid:me,encoding:Me,rawImageData:De,padding:qe,buildQuadTree:Xe}=re,je=a.window.ImageBitmap&&De instanceof a.window.ImageBitmap?this.getImageData(De,qe):De;ie(null,new a.DEMData(me,je,Me,qe<1,Xe))}getImageData(re,ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(re.width,re.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=re.width,this.offscreenCanvas.height=re.height,this.offscreenCanvasContext.drawImage(re,0,0,re.width,re.height);const me=this.offscreenCanvasContext.getImageData(-ie,-ie,re.width+2*ie,re.height+2*ie);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),me}}function N(Te,re){if(Te.length!==0){W(Te[0],re);for(var ie=1;ie<Te.length;ie++)W(Te[ie],!re)}}function W(Te,re){for(var ie=0,me=0,Me=0,De=Te.length,qe=De-1;Me<De;qe=Me++){var Xe=(Te[Me][0]-Te[qe][0])*(Te[qe][1]+Te[Me][1]),je=ie+Xe;me+=Math.abs(ie)>=Math.abs(Xe)?ie-je+Xe:Xe-je+ie,ie=je}ie+me>=0!=!!re&&Te.reverse()}var V=a.getDefaultExportFromCjs(function Te(re,ie){var me,Me=re&&re.type;if(Me==="FeatureCollection")for(me=0;me<re.features.length;me++)Te(re.features[me],ie);else if(Me==="GeometryCollection")for(me=0;me<re.geometries.length;me++)Te(re.geometries[me],ie);else if(Me==="Feature")Te(re.geometry,ie);else if(Me==="Polygon")N(re.coordinates,ie);else if(Me==="MultiPolygon")for(me=0;me<re.coordinates.length;me++)N(re.coordinates[me],ie);return re});const H=a.VectorTileFeature.prototype.toGeoJSON;var le={exports:{}},G=a.pointGeometry,X=a.vectorTile.VectorTileFeature,Q=oe;function oe(Te,re){this.options=re||{},this.features=Te,this.length=Te.length}function he(Te,re){this.id=typeof Te.id=="number"?Te.id:void 0,this.type=Te.type,this.rawGeometry=Te.type===1?[Te.geometry]:Te.geometry,this.properties=Te.tags,this.extent=re||4096}oe.prototype.feature=function(Te){return new he(this.features[Te],this.options.extent)},he.prototype.loadGeometry=function(){var Te=this.rawGeometry;this.geometry=[];for(var re=0;re<Te.length;re++){for(var ie=Te[re],me=[],Me=0;Me<ie.length;Me++)me.push(new G(ie[Me][0],ie[Me][1]));this.geometry.push(me)}return this.geometry},he.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Te=this.geometry,re=1/0,ie=-1/0,me=1/0,Me=-1/0,De=0;De<Te.length;De++)for(var qe=Te[De],Xe=0;Xe<qe.length;Xe++){var je=qe[Xe];re=Math.min(re,je.x),ie=Math.max(ie,je.x),me=Math.min(me,je.y),Me=Math.max(Me,je.y)}return[re,me,ie,Me]},he.prototype.toGeoJSON=X.prototype.toGeoJSON;var be=a.pbf,A=Q;function Re(Te){var re=new be;return function(ie,me){for(var Me in ie.layers)me.writeMessage(3,_e,ie.layers[Me])}(Te,re),re.finish()}function _e(Te,re){var ie;re.writeVarintField(15,Te.version||1),re.writeStringField(1,Te.name||""),re.writeVarintField(5,Te.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<Te.length;ie++)me.feature=Te.feature(ie),re.writeMessage(2,ze,me);var Me=me.keys;for(ie=0;ie<Me.length;ie++)re.writeStringField(3,Me[ie]);var De=me.values;for(ie=0;ie<De.length;ie++)re.writeMessage(4,He,De[ie])}function ze(Te,re){var ie=Te.feature;ie.id!==void 0&&re.writeVarintField(1,ie.id),re.writeMessage(2,ot,Te),re.writeVarintField(3,ie.type),re.writeMessage(4,We,ie)}function ot(Te,re){var ie=Te.feature,me=Te.keys,Me=Te.values,De=Te.keycache,qe=Te.valuecache;for(var Xe in ie.properties){var je=ie.properties[Xe],Fe=De[Xe];if(je!==null){Fe===void 0&&(me.push(Xe),De[Xe]=Fe=me.length-1),re.writeVarint(Fe);var ct=typeof je;ct!=="string"&&ct!=="boolean"&&ct!=="number"&&(je=JSON.stringify(je));var Pt=ct+":"+je,Et=qe[Pt];Et===void 0&&(Me.push(je),qe[Pt]=Et=Me.length-1),re.writeVarint(Et)}}}function gt(Te,re){return(re<<3)+(7&Te)}function Ze(Te){return Te<<1^Te>>31}function We(Te,re){for(var ie=Te.loadGeometry(),me=Te.type,Me=0,De=0,qe=ie.length,Xe=0;Xe<qe;Xe++){var je=ie[Xe],Fe=1;me===1&&(Fe=je.length),re.writeVarint(gt(1,Fe));for(var ct=me===3?je.length-1:je.length,Pt=0;Pt<ct;Pt++){Pt===1&&me!==1&&re.writeVarint(gt(2,ct-1));var Et=je[Pt].x-Me,mn=je[Pt].y-De;re.writeVarint(Ze(Et)),re.writeVarint(Ze(mn)),Me+=Et,De+=mn}me===3&&re.writeVarint(gt(7,1))}}function He(Te,re){var ie=typeof Te;ie==="string"?re.writeStringField(1,Te):ie==="boolean"?re.writeBooleanField(7,Te):ie==="number"&&(Te%1!=0?re.writeDoubleField(3,Te):Te<0?re.writeSVarintField(6,Te):re.writeVarintField(5,Te))}le.exports=Re,le.exports.fromVectorTileJs=Re,le.exports.fromGeojsonVt=function(Te,re){re=re||{};var ie={};for(var me in Te)ie[me]=new A(Te[me].features,re),ie[me].name=me,ie[me].version=re.version,ie[me].extent=re.extent;return Re({layers:ie})},le.exports.GeoJSONWrapper=A;var rt=a.getDefaultExportFromCjs(le.exports);const tt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Te=>Te},Ne=Math.fround||(et=new Float32Array(1),Te=>(et[0]=+Te,et[0]));var et;const it=3,Dt=5,Tt=6;class Rt{constructor(re){this.options=Object.assign(Object.create(tt),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:ie,minZoom:me,maxZoom:Me}=this.options;ie&&console.time("total time");const De=`prepare ${re.length} points`;ie&&console.time(De),this.points=re;const qe=[];for(let je=0;je<re.length;je++){const Fe=re[je];if(!Fe.geometry)continue;const[ct,Pt]=Fe.geometry.coordinates,Et=Ne(dn(ct)),mn=Ne(_n(Pt));qe.push(Et,mn,1/0,je,-1,1),this.options.reduce&&qe.push(0)}let Xe=this.trees[Me+1]=this._createTree(qe);ie&&console.timeEnd(De);for(let je=Me;je>=me;je--){const Fe=+Date.now();Xe=this.trees[je]=this._createTree(this._cluster(Xe,je)),ie&&console.log("z%d: %d clusters in %dms",je,Xe.numItems,+Date.now()-Fe)}return ie&&console.timeEnd("total time"),this}getClusters(re,ie){let me=((re[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,re[1]));let De=re[2]===180?180:((re[2]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)me=-180,De=180;else if(me>De){const Pt=this.getClusters([me,Me,180,qe],ie),Et=this.getClusters([-180,Me,De,qe],ie);return Pt.concat(Et)}const Xe=this.trees[this._limitZoom(ie)],je=Xe.range(dn(me),_n(qe),dn(De),_n(Me)),Fe=Xe.data,ct=[];for(const Pt of je){const Et=this.stride*Pt;ct.push(Fe[Et+Dt]>1?Yt(Fe,Et,this.clusterProps):this.points[Fe[Et+it]])}return ct}getChildren(re){const ie=this._getOriginId(re),me=this._getOriginZoom(re),Me="No cluster with the specified id.",De=this.trees[me];if(!De)throw new Error(Me);const qe=De.data;if(ie*this.stride>=qe.length)throw new Error(Me);const Xe=this.options.radius/(this.options.extent*Math.pow(2,me-1)),je=De.within(qe[ie*this.stride],qe[ie*this.stride+1],Xe),Fe=[];for(const ct of je){const Pt=ct*this.stride;qe[Pt+4]===re&&Fe.push(qe[Pt+Dt]>1?Yt(qe,Pt,this.clusterProps):this.points[qe[Pt+it]])}if(Fe.length===0)throw new Error(Me);return Fe}getLeaves(re,ie,me){const Me=[];return this._appendLeaves(Me,re,ie=ie||10,me=me||0,0),Me}getTile(re,ie,me){const Me=this.trees[this._limitZoom(re)],De=Math.pow(2,re),{extent:qe,radius:Xe}=this.options,je=Xe/qe,Fe=(me-je)/De,ct=(me+1+je)/De,Pt={features:[]};return this._addTileFeatures(Me.range((ie-je)/De,Fe,(ie+1+je)/De,ct),Me.data,ie,me,De,Pt),ie===0&&this._addTileFeatures(Me.range(1-je/De,Fe,1,ct),Me.data,De,me,De,Pt),ie===De-1&&this._addTileFeatures(Me.range(0,Fe,je/De,ct),Me.data,-1,me,De,Pt),Pt.features.length?Pt:null}getClusterExpansionZoom(re){let ie=this._getOriginZoom(re)-1;for(;ie<=this.options.maxZoom;){const me=this.getChildren(re);if(ie++,me.length!==1)break;re=me[0].properties.cluster_id}return ie}_appendLeaves(re,ie,me,Me,De){const qe=this.getChildren(ie);for(const Xe of qe){const je=Xe.properties;if(je&&je.cluster?De+je.point_count<=Me?De+=je.point_count:De=this._appendLeaves(re,je.cluster_id,me,Me,De):De<Me?De++:re.push(Xe),re.length===me)break}return De}_createTree(re){const ie=new a.KDBush(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<re.length;me+=this.stride)ie.add(re[me],re[me+1]);return ie.finish(),ie.data=re,ie}_addTileFeatures(re,ie,me,Me,De,qe){for(const Xe of re){const je=Xe*this.stride,Fe=ie[je+Dt]>1;let ct,Pt,Et;if(Fe)ct=tn(ie,je,this.clusterProps),Pt=ie[je],Et=ie[je+1];else{const An=this.points[ie[je+it]];ct=An.properties;const[Ln,Xn]=An.geometry.coordinates;Pt=dn(Ln),Et=_n(Xn)}const mn={type:1,geometry:[[Math.round(this.options.extent*(Pt*De-me)),Math.round(this.options.extent*(Et*De-Me))]],tags:ct};let Rn;Rn=Fe||this.options.generateId?ie[je+it]:this.points[ie[je+it]].id,Rn!==void 0&&(mn.id=Rn),qe.features.push(mn)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,ie){const{radius:me,extent:Me,reduce:De,minPoints:qe}=this.options,Xe=me/(Me*Math.pow(2,ie)),je=re.data,Fe=[],ct=this.stride;for(let Pt=0;Pt<je.length;Pt+=ct){if(je[Pt+2]<=ie)continue;je[Pt+2]=ie;const Et=je[Pt],mn=je[Pt+1],Rn=re.within(je[Pt],je[Pt+1],Xe),An=je[Pt+Dt];let Ln=An;for(const Xn of Rn){const xr=Xn*ct;je[xr+2]>ie&&(Ln+=je[xr+Dt])}if(Ln>An&&Ln>=qe){let Xn,xr=Et*An,br=mn*An,Mr=-1;const Ge=((Pt/ct|0)<<5)+(ie+1)+this.points.length;for(const Ee of Rn){const lt=Ee*ct;if(je[lt+2]<=ie)continue;je[lt+2]=ie;const Ot=je[lt+Dt];xr+=je[lt]*Ot,br+=je[lt+1]*Ot,je[lt+4]=Ge,De&&(Xn||(Xn=this._map(je,Pt,!0),Mr=this.clusterProps.length,this.clusterProps.push(Xn)),De(Xn,this._map(je,lt)))}je[Pt+4]=Ge,Fe.push(xr/Ln,br/Ln,1/0,Ge,-1,Ln),De&&Fe.push(Mr)}else{for(let Xn=0;Xn<ct;Xn++)Fe.push(je[Pt+Xn]);if(Ln>1)for(const Xn of Rn){const xr=Xn*ct;if(!(je[xr+2]<=ie)){je[xr+2]=ie;for(let br=0;br<ct;br++)Fe.push(je[xr+br])}}}}return Fe}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,ie,me){if(re[ie+Dt]>1){const qe=this.clusterProps[re[ie+Tt]];return me?Object.assign({},qe):qe}const Me=this.points[re[ie+it]].properties,De=this.options.map(Me);return me&&De===Me?Object.assign({},De):De}}function Yt(Te,re,ie){return{type:"Feature",id:Te[re+it],properties:tn(Te,re,ie),geometry:{type:"Point",coordinates:[(me=Te[re],360*(me-.5)),In(Te[re+1])]}};var me}function tn(Te,re,ie){const me=Te[re+Dt],Me=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,De=Te[re+Tt],qe=De===-1?{}:Object.assign({},ie[De]);return Object.assign(qe,{cluster:!0,cluster_id:Te[re+it],point_count:me,point_count_abbreviated:Me})}function dn(Te){return Te/360+.5}function _n(Te){const re=Math.sin(Te*Math.PI/180),ie=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ie<0?0:ie>1?1:ie}function In(Te){const re=(180-360*Te)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function Jt(Te,re,ie,me){for(var Me,De=me,qe=ie-re>>1,Xe=ie-re,je=Te[re],Fe=Te[re+1],ct=Te[ie],Pt=Te[ie+1],Et=re+3;Et<ie;Et+=3){var mn=vn(Te[Et],Te[Et+1],je,Fe,ct,Pt);if(mn>De)Me=Et,De=mn;else if(mn===De){var Rn=Math.abs(Et-qe);Rn<Xe&&(Me=Et,Xe=Rn)}}De>me&&(Me-re>3&&Jt(Te,re,Me,me),Te[Me+2]=De,ie-Me>3&&Jt(Te,Me,ie,me))}function vn(Te,re,ie,me,Me,De){var qe=Me-ie,Xe=De-me;if(qe!==0||Xe!==0){var je=((Te-ie)*qe+(re-me)*Xe)/(qe*qe+Xe*Xe);je>1?(ie=Me,me=De):je>0&&(ie+=qe*je,me+=Xe*je)}return(qe=Te-ie)*qe+(Xe=re-me)*Xe}function Ft(Te,re,ie,me){var Me={id:Te===void 0?null:Te,type:re,geometry:ie,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(De){var qe=De.geometry,Xe=De.type;if(Xe==="Point"||Xe==="MultiPoint"||Xe==="LineString")nn(De,qe);else if(Xe==="Polygon"||Xe==="MultiLineString")for(var je=0;je<qe.length;je++)nn(De,qe[je]);else if(Xe==="MultiPolygon")for(je=0;je<qe.length;je++)for(var Fe=0;Fe<qe[je].length;Fe++)nn(De,qe[je][Fe])}(Me),Me}function nn(Te,re){for(var ie=0;ie<re.length;ie+=3)Te.minX=Math.min(Te.minX,re[ie]),Te.minY=Math.min(Te.minY,re[ie+1]),Te.maxX=Math.max(Te.maxX,re[ie]),Te.maxY=Math.max(Te.maxY,re[ie+1])}function En(Te,re,ie,me){if(re.geometry){var Me=re.geometry.coordinates,De=re.geometry.type,qe=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2),Xe=[],je=re.id;if(ie.promoteId?je=re.properties[ie.promoteId]:ie.generateId&&(je=me||0),De==="Point")Zt(Me,Xe);else if(De==="MultiPoint")for(var Fe=0;Fe<Me.length;Fe++)Zt(Me[Fe],Xe);else if(De==="LineString")Ct(Me,Xe,qe,!1);else if(De==="MultiLineString"){if(ie.lineMetrics){for(Fe=0;Fe<Me.length;Fe++)Ct(Me[Fe],Xe=[],qe,!1),Te.push(Ft(je,"LineString",Xe,re.properties));return}On(Me,Xe,qe,!1)}else if(De==="Polygon")On(Me,Xe,qe,!0);else{if(De!=="MultiPolygon"){if(De==="GeometryCollection"){for(Fe=0;Fe<re.geometry.geometries.length;Fe++)En(Te,{id:je,geometry:re.geometry.geometries[Fe],properties:re.properties},ie,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Fe=0;Fe<Me.length;Fe++){var ct=[];On(Me[Fe],ct,qe,!0),Xe.push(ct)}}Te.push(Ft(je,De,Xe,re.properties))}}function Zt(Te,re){re.push(an(Te[0])),re.push(Zn(Te[1])),re.push(0)}function Ct(Te,re,ie,me){for(var Me,De,qe=0,Xe=0;Xe<Te.length;Xe++){var je=an(Te[Xe][0]),Fe=Zn(Te[Xe][1]);re.push(je),re.push(Fe),re.push(0),Xe>0&&(qe+=me?(Me*Fe-je*De)/2:Math.sqrt(Math.pow(je-Me,2)+Math.pow(Fe-De,2))),Me=je,De=Fe}var ct=re.length-3;re[2]=1,Jt(re,0,ct,ie),re[ct+2]=1,re.size=Math.abs(qe),re.start=0,re.end=re.size}function On(Te,re,ie,me){for(var Me=0;Me<Te.length;Me++){var De=[];Ct(Te[Me],De,ie,me),re.push(De)}}function an(Te){return Te/360+.5}function Zn(Te){var re=Math.sin(Te*Math.PI/180),ie=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ie<0?0:ie>1?1:ie}function tr(Te,re,ie,me,Me,De,qe,Xe){if(me/=re,De>=(ie/=re)&&qe<me)return Te;if(qe<ie||De>=me)return null;for(var je=[],Fe=0;Fe<Te.length;Fe++){var ct=Te[Fe],Pt=ct.geometry,Et=ct.type,mn=Me===0?ct.minX:ct.minY,Rn=Me===0?ct.maxX:ct.maxY;if(mn>=ie&&Rn<me)je.push(ct);else if(!(Rn<ie||mn>=me)){var An=[];if(Et==="Point"||Et==="MultiPoint")Nn(Pt,An,ie,me,Me);else if(Et==="LineString")Yn(Pt,An,ie,me,Me,!1,Xe.lineMetrics);else if(Et==="MultiLineString")qn(Pt,An,ie,me,Me,!1);else if(Et==="Polygon")qn(Pt,An,ie,me,Me,!0);else if(Et==="MultiPolygon")for(var Ln=0;Ln<Pt.length;Ln++){var Xn=[];qn(Pt[Ln],Xn,ie,me,Me,!0),Xn.length&&An.push(Xn)}if(An.length){if(Xe.lineMetrics&&Et==="LineString"){for(Ln=0;Ln<An.length;Ln++)je.push(Ft(ct.id,Et,An[Ln],ct.tags));continue}Et!=="LineString"&&Et!=="MultiLineString"||(An.length===1?(Et="LineString",An=An[0]):Et="MultiLineString"),Et!=="Point"&&Et!=="MultiPoint"||(Et=An.length===3?"Point":"MultiPoint"),je.push(Ft(ct.id,Et,An,ct.tags))}}}return je.length?je:null}function Nn(Te,re,ie,me,Me){for(var De=0;De<Te.length;De+=3){var qe=Te[De+Me];qe>=ie&&qe<=me&&(re.push(Te[De]),re.push(Te[De+1]),re.push(Te[De+2]))}}function Yn(Te,re,ie,me,Me,De,qe){for(var Xe,je,Fe=Un(Te),ct=Me===0?Ye:Xt,Pt=Te.start,Et=0;Et<Te.length-3;Et+=3){var mn=Te[Et],Rn=Te[Et+1],An=Te[Et+2],Ln=Te[Et+3],Xn=Te[Et+4],xr=Me===0?mn:Rn,br=Me===0?Ln:Xn,Mr=!1;qe&&(Xe=Math.sqrt(Math.pow(mn-Ln,2)+Math.pow(Rn-Xn,2))),xr<ie?br>ie&&(je=ct(Fe,mn,Rn,Ln,Xn,ie),qe&&(Fe.start=Pt+Xe*je)):xr>me?br<me&&(je=ct(Fe,mn,Rn,Ln,Xn,me),qe&&(Fe.start=Pt+Xe*je)):bn(Fe,mn,Rn,An),br<ie&&xr>=ie&&(je=ct(Fe,mn,Rn,Ln,Xn,ie),Mr=!0),br>me&&xr<=me&&(je=ct(Fe,mn,Rn,Ln,Xn,me),Mr=!0),!De&&Mr&&(qe&&(Fe.end=Pt+Xe*je),re.push(Fe),Fe=Un(Te)),qe&&(Pt+=Xe)}var Ge=Te.length-3;mn=Te[Ge],Rn=Te[Ge+1],An=Te[Ge+2],(xr=Me===0?mn:Rn)>=ie&&xr<=me&&bn(Fe,mn,Rn,An),Ge=Fe.length-3,De&&Ge>=3&&(Fe[Ge]!==Fe[0]||Fe[Ge+1]!==Fe[1])&&bn(Fe,Fe[0],Fe[1],Fe[2]),Fe.length&&re.push(Fe)}function Un(Te){var re=[];return re.size=Te.size,re.start=Te.start,re.end=Te.end,re}function qn(Te,re,ie,me,Me,De){for(var qe=0;qe<Te.length;qe++)Yn(Te[qe],re,ie,me,Me,De,!1)}function bn(Te,re,ie,me){Te.push(re),Te.push(ie),Te.push(me)}function Ye(Te,re,ie,me,Me,De){var qe=(De-re)/(me-re);return Te.push(De),Te.push(ie+(Me-ie)*qe),Te.push(1),qe}function Xt(Te,re,ie,me,Me,De){var qe=(De-ie)/(Me-ie);return Te.push(re+(me-re)*qe),Te.push(De),Te.push(1),qe}function rn(Te,re){for(var ie=[],me=0;me<Te.length;me++){var Me,De=Te[me],qe=De.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")Me=qt(De.geometry,re);else if(qe==="MultiLineString"||qe==="Polygon"){Me=[];for(var Xe=0;Xe<De.geometry.length;Xe++)Me.push(qt(De.geometry[Xe],re))}else if(qe==="MultiPolygon")for(Me=[],Xe=0;Xe<De.geometry.length;Xe++){for(var je=[],Fe=0;Fe<De.geometry[Xe].length;Fe++)je.push(qt(De.geometry[Xe][Fe],re));Me.push(je)}ie.push(Ft(De.id,qe,Me,De.tags))}return ie}function qt(Te,re){var ie=[];ie.size=Te.size,Te.start!==void 0&&(ie.start=Te.start,ie.end=Te.end);for(var me=0;me<Te.length;me+=3)ie.push(Te[me]+re,Te[me+1],Te[me+2]);return ie}function en(Te,re){if(Te.transformed)return Te;var ie,me,Me,De=1<<Te.z,qe=Te.x,Xe=Te.y;for(ie=0;ie<Te.features.length;ie++){var je=Te.features[ie],Fe=je.geometry,ct=je.type;if(je.geometry=[],ct===1)for(me=0;me<Fe.length;me+=2)je.geometry.push(on(Fe[me],Fe[me+1],re,De,qe,Xe));else for(me=0;me<Fe.length;me++){var Pt=[];for(Me=0;Me<Fe[me].length;Me+=2)Pt.push(on(Fe[me][Me],Fe[me][Me+1],re,De,qe,Xe));je.geometry.push(Pt)}}return Te.transformed=!0,Te}function on(Te,re,ie,me,Me,De){return[Math.round(ie*(Te*me-Me)),Math.round(ie*(re*me-De))]}function yn(Te,re,ie,me,Me){for(var De=re===Me.maxZoom?0:Me.tolerance/((1<<re)*Me.extent),qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ie,y:me,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Xe=0;Xe<Te.length;Xe++){qe.numFeatures++,Dn(qe,Te[Xe],De,Me);var je=Te[Xe].minX,Fe=Te[Xe].minY,ct=Te[Xe].maxX,Pt=Te[Xe].maxY;je<qe.minX&&(qe.minX=je),Fe<qe.minY&&(qe.minY=Fe),ct>qe.maxX&&(qe.maxX=ct),Pt>qe.maxY&&(qe.maxY=Pt)}return qe}function Dn(Te,re,ie,me){var Me=re.geometry,De=re.type,qe=[];if(De==="Point"||De==="MultiPoint")for(var Xe=0;Xe<Me.length;Xe+=3)qe.push(Me[Xe]),qe.push(Me[Xe+1]),Te.numPoints++,Te.numSimplified++;else if(De==="LineString")Fn(qe,Me,Te,ie,!1,!1);else if(De==="MultiLineString"||De==="Polygon")for(Xe=0;Xe<Me.length;Xe++)Fn(qe,Me[Xe],Te,ie,De==="Polygon",Xe===0);else if(De==="MultiPolygon")for(var je=0;je<Me.length;je++){var Fe=Me[je];for(Xe=0;Xe<Fe.length;Xe++)Fn(qe,Fe[Xe],Te,ie,!0,Xe===0)}if(qe.length){var ct=re.tags||null;if(De==="LineString"&&me.lineMetrics){for(var Pt in ct={},re.tags)ct[Pt]=re.tags[Pt];ct.mapbox_clip_start=Me.start/Me.size,ct.mapbox_clip_end=Me.end/Me.size}var Et={geometry:qe,type:De==="Polygon"||De==="MultiPolygon"?3:De==="LineString"||De==="MultiLineString"?2:1,tags:ct};re.id!==null&&(Et.id=re.id),Te.features.push(Et)}}function Fn(Te,re,ie,me,Me,De){var qe=me*me;if(me>0&&re.size<(Me?qe:me))ie.numPoints+=re.length/3;else{for(var Xe=[],je=0;je<re.length;je+=3)(me===0||re[je+2]>qe)&&(ie.numSimplified++,Xe.push(re[je]),Xe.push(re[je+1])),ie.numPoints++;Me&&function(Fe,ct){for(var Pt=0,Et=0,mn=Fe.length,Rn=mn-2;Et<mn;Rn=Et,Et+=2)Pt+=(Fe[Et]-Fe[Rn])*(Fe[Et+1]+Fe[Rn+1]);if(Pt>0===ct)for(Et=0,mn=Fe.length;Et<mn/2;Et+=2){var An=Fe[Et],Ln=Fe[Et+1];Fe[Et]=Fe[mn-2-Et],Fe[Et+1]=Fe[mn-1-Et],Fe[mn-2-Et]=An,Fe[mn-1-Et]=Ln}}(Xe,De),Te.push(Xe)}}function nr(Te,re){var ie=(re=this.options=function(Me,De){for(var qe in De)Me[qe]=De[qe];return Me}(Object.create(this.options),re)).debug;if(ie&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var me=function(Me,De){var qe=[];if(Me.type==="FeatureCollection")for(var Xe=0;Xe<Me.features.length;Xe++)En(qe,Me.features[Xe],De,Xe);else En(qe,Me.type==="Feature"?Me:{geometry:Me},De);return qe}(Te,re);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=function(Me,De){var qe=De.buffer/De.extent,Xe=Me,je=tr(Me,1,-1-qe,qe,0,-1,2,De),Fe=tr(Me,1,1-qe,2+qe,0,-1,2,De);return(je||Fe)&&(Xe=tr(Me,1,-qe,1+qe,0,-1,2,De)||[],je&&(Xe=rn(je,1).concat(Xe)),Fe&&(Xe=Xe.concat(rn(Fe,-1)))),Xe}(me,re),me.length&&this.splitTile(me,0,0,0),ie&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ar(Te,re,ie){return 32*((1<<Te)*ie+re)+Te}function gr(Te,re){const ie=Te.tileID.canonical;if(!this._geoJSONIndex)return re(null,null);const me=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);if(!me)return re(null,null);const Me=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(Xe){this._feature=Xe,this.extent=a.EXTENT,this.type=Xe.type,this.properties=Xe.tags,"id"in Xe&&!isNaN(Xe.id)&&(this.id=parseInt(Xe.id,10))}loadGeometry(){if(this._feature.type===1){const Xe=[];for(const je of this._feature.geometry)Xe.push([new a.Point(je[0],je[1])]);return Xe}{const Xe=[];for(const je of this._feature.geometry){const Fe=[];for(const ct of je)Fe.push(new a.Point(ct[0],ct[1]));Xe.push(Fe)}return Xe}}toGeoJSON(Xe,je,Fe){return H.call(this,Xe,je,Fe)}}(this._features[qe])}}(me.features);let De=rt(Me);De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),re(null,{vectorTile:Me,rawData:De.buffer})}nr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},nr.prototype.splitTile=function(Te,re,ie,me,Me,De,qe){for(var Xe=[Te,re,ie,me],je=this.options,Fe=je.debug;Xe.length;){me=Xe.pop(),ie=Xe.pop(),re=Xe.pop(),Te=Xe.pop();var ct=1<<re,Pt=Ar(re,ie,me),Et=this.tiles[Pt];if(!Et&&(Fe>1&&console.time("creation"),Et=this.tiles[Pt]=yn(Te,re,ie,me,je),this.tileCoords.push({z:re,x:ie,y:me}),Fe)){Fe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,ie,me,Et.numFeatures,Et.numPoints,Et.numSimplified),console.timeEnd("creation"));var mn="z"+re;this.stats[mn]=(this.stats[mn]||0)+1,this.total++}if(Et.source=Te,Me){if(re===je.maxZoom||re===Me)continue;var Rn=1<<Me-re;if(ie!==Math.floor(De/Rn)||me!==Math.floor(qe/Rn))continue}else if(re===je.indexMaxZoom||Et.numPoints<=je.indexMaxPoints)continue;if(Et.source=null,Te.length!==0){Fe>1&&console.time("clipping");var An,Ln,Xn,xr,br,Mr,Ge=.5*je.buffer/je.extent,Ee=.5-Ge,lt=.5+Ge,Ot=1+Ge;An=Ln=Xn=xr=null,br=tr(Te,ct,ie-Ge,ie+lt,0,Et.minX,Et.maxX,je),Mr=tr(Te,ct,ie+Ee,ie+Ot,0,Et.minX,Et.maxX,je),Te=null,br&&(An=tr(br,ct,me-Ge,me+lt,1,Et.minY,Et.maxY,je),Ln=tr(br,ct,me+Ee,me+Ot,1,Et.minY,Et.maxY,je),br=null),Mr&&(Xn=tr(Mr,ct,me-Ge,me+lt,1,Et.minY,Et.maxY,je),xr=tr(Mr,ct,me+Ee,me+Ot,1,Et.minY,Et.maxY,je),Mr=null),Fe>1&&console.timeEnd("clipping"),Xe.push(An||[],re+1,2*ie,2*me),Xe.push(Ln||[],re+1,2*ie,2*me+1),Xe.push(Xn||[],re+1,2*ie+1,2*me),Xe.push(xr||[],re+1,2*ie+1,2*me+1)}}},nr.prototype.getTile=function(Te,re,ie){var me=this.options,Me=me.extent,De=me.debug;if(Te<0||Te>24)return null;var qe=1<<Te,Xe=Ar(Te,re=(re%qe+qe)%qe,ie);if(this.tiles[Xe])return en(this.tiles[Xe],Me);De>1&&console.log("drilling down to z%d-%d-%d",Te,re,ie);for(var je,Fe=Te,ct=re,Pt=ie;!je&&Fe>0;)Fe--,ct=Math.floor(ct/2),Pt=Math.floor(Pt/2),je=this.tiles[Ar(Fe,ct,Pt)];return je&&je.source?(De>1&&console.log("found parent tile z%d-%d-%d",Fe,ct,Pt),De>1&&console.time("drilling down"),this.splitTile(je.source,Fe,ct,Pt,Te,re,ie),De>1&&console.timeEnd("drilling down"),this.tiles[Xe]?en(this.tiles[Xe],Me):null):null};class vi extends a.VectorTileWorkerSource{constructor(re,ie,me,Me,De){super(re,ie,me,Me,gr),De&&(this.loadGeoJSON=De)}loadData(re,ie){const me=re&&re.request,Me=me&&me.collectResourceTiming;this.loadGeoJSON(re,(De,qe)=>{if(De||!qe)return ie(De);if(typeof qe!="object")return ie(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`));{V(qe,!0);try{if(re.filter){const je=a.createExpression(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map(ct=>`${ct.key}: ${ct.message}`).join(", "));qe={type:"FeatureCollection",features:qe.features.filter(ct=>je.value.evaluate({zoom:0},ct))}}this._geoJSONIndex=re.cluster?new Rt(function({superclusterOptions:je,clusterProperties:Fe}){if(!Fe||!je)return je;const ct={},Pt={},Et={accumulated:null,zoom:0},mn={properties:null},Rn=Object.keys(Fe);for(const An of Rn){const[Ln,Xn]=Fe[An],xr=a.createExpression(Xn),br=a.createExpression(typeof Ln=="string"?[Ln,["accumulated"],["get",An]]:Ln);ct[An]=xr.value,Pt[An]=br.value}return je.map=An=>{mn.properties=An;const Ln={};for(const Xn of Rn)Ln[Xn]=ct[Xn].evaluate(Et,mn);return Ln},je.reduce=(An,Ln)=>{mn.properties=Ln;for(const Xn of Rn)Et.accumulated=An[Xn],An[Xn]=Pt[Xn].evaluate(Et,mn)},je}(re)).load(qe.features):function(je,Fe){return new nr(je,Fe)}(qe,re.geojsonVtOptions)}catch(je){return ie(je)}this.loaded={};const Xe={};if(Me){const je=a.getPerformanceMeasurement(me);je&&(Xe.resourceTiming={},Xe.resourceTiming[re.source]=JSON.parse(JSON.stringify(je)))}ie(null,Xe)}})}reloadTile(re,ie){const me=this.loaded;return me&&me[re.uid]?super.reloadTile(re,ie):this.loadTile(re,ie)}loadGeoJSON(re,ie){if(re.request)a.getJSON(re.request,ie);else{if(typeof re.data!="string")return ie(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`));try{return ie(null,JSON.parse(re.data))}catch{return ie(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(re,ie){try{ie(null,this._geoJSONIndex.getClusterExpansionZoom(re.clusterId))}catch(me){ie(me)}}getClusterChildren(re,ie){try{ie(null,this._geoJSONIndex.getChildren(re.clusterId))}catch(me){ie(me)}}getClusterLeaves(re,ie){try{ie(null,this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset))}catch(me){ie(me)}}}class di{constructor(re){this.self=re,this.actor=new a.Actor(re,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=a.getProjection({name:"mercator"}),this.workerSourceTypes={vector:a.VectorTileWorkerSource,geojson:vi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ie,me)=>{if(this.workerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.workerSourceTypes[ie]=me},this.self.registerRTLTextPlugin=ie=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=ie.applyArabicShaping,a.plugin.processBidirectionalText=ie.processBidirectionalText,a.plugin.processStyledBidirectionalText=ie.processStyledBidirectionalText}}clearCaches(re,ie,me){delete this.layerIndexes[re],delete this.availableImages[re],delete this.workerSources[re],delete this.demWorkerSources[re],me()}checkIfReady(re,ie,me){me()}setReferrer(re,ie){this.referrer=ie}spriteLoaded(re,ie){this.isSpriteLoaded[re]=ie;for(const me in this.workerSources[re]){const Me=this.workerSources[re][me];for(const De in Me)Me[De]instanceof a.VectorTileWorkerSource&&(Me[De].isSpriteLoaded=ie,Me[De].fire(new a.Event("isSpriteLoaded")))}}setImages(re,ie,me){this.availableImages[re]=ie;for(const Me in this.workerSources[re]){const De=this.workerSources[re][Me];for(const qe in De)De[qe].availableImages=ie}me()}enableTerrain(re,ie,me){this.terrain=ie,me()}setProjection(re,ie){this.projections[re]=a.getProjection(ie)}setLayers(re,ie,me){this.getLayerIndex(re).replace(ie),me()}updateLayers(re,ie,me){this.getLayerIndex(re).update(ie.layers,ie.removedIds),me()}loadTile(re,ie,me){const Me=this.enableTerrain?a.extend({enableTerrain:this.terrain},ie):ie;Me.projection=this.projections[re]||this.defaultProjection,this.getWorkerSource(re,ie.type,ie.source).loadTile(Me,me)}loadDEMTile(re,ie,me){const Me=this.enableTerrain?a.extend({buildQuadTree:this.terrain},ie):ie;this.getDEMWorkerSource(re,ie.source).loadTile(Me,me)}reloadTile(re,ie,me){const Me=this.enableTerrain?a.extend({enableTerrain:this.terrain},ie):ie;Me.projection=this.projections[re]||this.defaultProjection,this.getWorkerSource(re,ie.type,ie.source).reloadTile(Me,me)}abortTile(re,ie,me){this.getWorkerSource(re,ie.type,ie.source).abortTile(ie,me)}removeTile(re,ie,me){this.getWorkerSource(re,ie.type,ie.source).removeTile(ie,me)}removeSource(re,ie,me){if(!this.workerSources[re]||!this.workerSources[re][ie.type]||!this.workerSources[re][ie.type][ie.source])return;const Me=this.workerSources[re][ie.type][ie.source];delete this.workerSources[re][ie.type][ie.source],Me.removeSource!==void 0?Me.removeSource(ie,me):me()}loadWorkerSource(re,ie,me){try{this.self.importScripts(ie.url),me()}catch(Me){me(Me.toString())}}syncRTLPluginState(re,ie,me){try{a.plugin.setState(ie);const Me=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Me!=null){this.self.importScripts(Me);const De=a.plugin.isParsed();me(De?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Me}`),De)}}catch(Me){me(Me.toString())}}getAvailableImages(re){let ie=this.availableImages[re];return ie||(ie=[]),ie}getLayerIndex(re){let ie=this.layerIndexes[re];return ie||(ie=this.layerIndexes[re]=new M),ie}getWorkerSource(re,ie,me){if(this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ie]||(this.workerSources[re][ie]={}),!this.workerSources[re][ie][me]){const Me={send:(De,qe,Xe,je,Fe,ct)=>{this.actor.send(De,qe,Xe,re,Fe,ct)},scheduler:this.actor.scheduler};this.workerSources[re][ie][me]=new this.workerSourceTypes[ie](Me,this.getLayerIndex(re),this.getAvailableImages(re),this.isSpriteLoaded[re])}return this.workerSources[re][ie][me]}getDEMWorkerSource(re,ie){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ie]||(this.demWorkerSources[re][ie]=new R),this.demWorkerSources[re][ie]}enforceCacheSizeLimit(re,ie){a.enforceCacheSizeLimit(ie)}getWorkerPerformanceMetrics(re,ie,me){me(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new di(self)),di}),d(["./shared"],function(a){function v(m,l){if(Array.isArray(m)){if(!Array.isArray(l)||m.length!==l.length)return!1;for(let h=0;h<m.length;h++)if(!v(m[h],l[h]))return!1;return!0}if(typeof m=="object"&&m!==null&&l!==null){if(typeof l!="object"||Object.keys(m).length!==Object.keys(l).length)return!1;for(const h in m)if(!v(m[h],l[h]))return!1;return!0}return m===l}var S=M;function M(m){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,x,w=new Blob([""],{type:"text/javascript"}),C=URL.createObjectURL(w);try{x=new Worker(C),_=!0}catch{_=!1}return x&&x.terminate(),URL.revokeObjectURL(C),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var x=_.getContext("2d");if(!x)return!1;var w=x.getImageData(0,0,1,1);return w&&w.width===_.width}()?(R[h=l&&l.failIfMajorPerformanceCaveat]===void 0&&(R[h]=function(_){var x,w=function(C){var I=document.createElement("canvas"),O=Object.create(M.webGLContextAttributes);return O.failIfMajorPerformanceCaveat=C,I.getContext("webgl",O)||I.getContext("experimental-webgl",O)}(_);if(!w)return!1;try{x=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!x||w.isContextLost())&&(w.shaderSource(x,"void main() {}"),w.compileShader(x),w.getShaderParameter(x,w.COMPILE_STATUS)===!0)}(h)),R[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(m)}var R={};function N(m,l,h){const _=a.window.document.createElement(m);return l!==void 0&&(_.className=l),h&&h.appendChild(_),_}function W(m,l,h){const _=a.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const x of Object.keys(l))_.setAttributeNS(null,x,l[x]);return h&&h.appendChild(_),_}M.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const V=a.window.document&&a.window.document.documentElement.style,H=V&&V.userSelect!==void 0?"userSelect":"WebkitUserSelect";let le;function G(){V&&H&&(le=V[H],V[H]="none")}function X(){V&&H&&(V[H]=le)}function Q(m){m.preventDefault(),m.stopPropagation(),a.window.removeEventListener("click",Q,!0)}function oe(){a.window.addEventListener("click",Q,!0),a.window.setTimeout(()=>{a.window.removeEventListener("click",Q,!0)},0)}function he(m,l){const h=m.getBoundingClientRect();return Re(m,h,l)}function be(m,l){const h=m.getBoundingClientRect(),_=[];for(let x=0;x<l.length;x++)_.push(Re(m,h,l[x]));return _}function A(m){return a.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function Re(m,l,h){const _=m.offsetWidth===l.width?1:m.offsetWidth/l.width;return new a.Point((h.clientX-l.left)*_,(h.clientY-l.top)*_)}function _e(m,l){var h=l[0],_=l[1],x=l[2],w=l[3],C=h*w-x*_;return C?(m[0]=w*(C=1/C),m[1]=-_*C,m[2]=-x*C,m[3]=h*C,m):null}function ze(m){const{userImage:l}=m;return!!(l&&l.render&&l.render())&&(m.data.replace(new Uint8Array(l.data.buffer)),!0)}class ot extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:h,callback:_}of this.requestors)this._notify(h,_);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,h){this._validate(l,h)&&(this.images[l]=h)}_validate(l,h){let _=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),_=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),_=!1),this._validateContent(h.content,h)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),_=!1),_}_validateStretch(l,h){if(!l)return!0;let _=0;for(const x of l){if(x[0]<_||x[1]<x[0]||h<x[1])return!1;_=x[1]}return!0}_validateContent(l,h){return!(l&&(l.length!==4||l[0]<0||h.data.width<l[0]||l[1]<0||h.data.height<l[1]||l[2]<0||h.data.width<l[2]||l[3]<0||h.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,h){h.version=this.images[l].version+1,this.images[l]=h,this.updatedImages[l]=!0}removeImage(l){const h=this.images[l];delete this.images[l],delete this.patterns[l],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,h){let _=!0;if(!this.isLoaded())for(const x of l)this.images[x]||(_=!1);this.isLoaded()||_?this._notify(l,h):this.requestors.push({ids:l,callback:h})}_notify(l,h){const _={};for(const x of l){this.images[x]||this.fire(new a.Event("styleimagemissing",{id:x}));const w=this.images[x];w?_[x]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:a.warnOnce(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,_)}getPixelSize(){const{width:l,height:h}=this.atlasImage;return{width:l,height:h}}getPattern(l){const h=this.patterns[l],_=this.getImage(l);if(!_)return null;if(h&&h.position.version===_.version)return h.position;if(h)h.position.version=_.version;else{const x={w:_.data.width+2,h:_.data.height+2,x:0,y:0},w=new a.ImagePosition(x,_);this.patterns[l]={bin:x,position:w}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const h=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(l,this.atlasImage,h.RGBA),this.atlasTexture&&this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const w in this.patterns)l.push(this.patterns[w].bin);const{w:h,h:_}=a.potpack(l),x=this.atlasImage;x.resize({width:h||1,height:_||1});for(const w in this.patterns){const{bin:C}=this.patterns[w],I=C.x+1,O=C.y+1,j=this.images[w].data,B=j.width,Y=j.height;a.RGBAImage.copy(j,x,{x:0,y:0},{x:I,y:O},{width:B,height:Y}),a.RGBAImage.copy(j,x,{x:0,y:Y-1},{x:I,y:O-1},{width:B,height:1}),a.RGBAImage.copy(j,x,{x:0,y:0},{x:I,y:O+Y},{width:B,height:1}),a.RGBAImage.copy(j,x,{x:B-1,y:0},{x:I-1,y:O},{width:1,height:Y}),a.RGBAImage.copy(j,x,{x:0,y:0},{x:I+B,y:O},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const h of l){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const _=this.images[h];ze(_)&&this.updateImage(h,_)}}}const gt=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(m,l){return function([h,_,x]){const w=a.degToRad(_+90),C=a.degToRad(x);return{x:h*Math.cos(w)*Math.sin(C),y:h*Math.sin(w)*Math.sin(C),z:h*Math.cos(C),azimuthal:_,polar:x}}(m.expression.evaluate(l))}interpolate(m,l,h){return{x:a.number(m.x,l.x,h),y:a.number(m.y,l.y,h),z:a.number(m.z,l.z,h),azimuthal:a.number(m.azimuthal,l.azimuthal,h),polar:a.number(m.polar,l.polar,h)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)});class Ze extends a.Evented{constructor(l){super(),this._transitionable=new a.Transitionable(gt),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,h={}){if(!this._validate(a.validateLight,l,h))for(const _ in l){const x=l[_];a.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),x):this._transitionable.setValue(_,x)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,_){return(!_||_.validate!==!1)&&a.emitValidationErrors(this,l.call(a.validateStyle,a.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}const We=new a.Properties({source:new a.DataConstantProperty(a.spec.terrain.source),exaggeration:new a.DataConstantProperty(a.spec.terrain.exaggeration)});let He=class extends a.Evented{constructor(m,l){super(),this._transitionable=new a.Transitionable(We),this.set(m),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(m){for(const l in m){const h=m[l];a.endsWith(l,"-transition")?this._transitionable.setTransition(l.slice(0,-11),h):this._transitionable.setValue(l,h)}}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}};function rt(m,l,h,_){const x=a.smoothstep(45,65,h),[w,C]=tt(m,_),I=a.length(l);let O=1-Math.min(1,Math.exp((I-w)/(C-w)*-6));return O*=O*O,O=Math.min(1,1.00747*O),O*x*m.alpha}function tt(m,l){const h=.5/Math.tan(.5*l);return[m.range[0]+h,m.range[1]+h]}const Ne=new a.Properties({range:new a.DataConstantProperty(a.spec.fog.range),color:new a.DataConstantProperty(a.spec.fog.color),"high-color":new a.DataConstantProperty(a.spec.fog["high-color"]),"space-color":new a.DataConstantProperty(a.spec.fog["space-color"]),"horizon-blend":new a.DataConstantProperty(a.spec.fog["horizon-blend"]),"star-intensity":new a.DataConstantProperty(a.spec.fog["star-intensity"])});class et extends a.Evented{constructor(l,h){super(),this._transitionable=new a.Transitionable(Ne),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=h}get state(){const l=this._transform,h=l.projection.name==="globe",_=a.globeToMercatorTransition(l.zoom),x=this.properties.get("range"),w=[.5,3];return{range:h?[a.number(w[0],x[0],_),a.number(w[1],x[1],_)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,h={}){if(!this._validate(a.validateFog,l,h)){for(const _ of Object.keys(a.spec.fog))l&&l[_]===void 0&&(l[_]=a.spec.fog[_].default);for(const _ in l){const x=l[_];a.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),x):this._transitionable.setValue(_,x)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.smoothstep(45,65,l))*h.a}getOpacityAtLatLng(l,h){return this._transform.projection.supportsFog?function(_,x,w){const C=a.MercatorCoordinate.fromLngLat(x),I=w.elevation?w.elevation.getAtPointOrZero(C):0,O=[C.x,C.y,I];return a.transformMat4(O,O,w.mercatorFogMatrix),rt(_,O,w.pitch,w._fov)}(this.state,l,h):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?tt(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,_){return(!_||_.validate!==!1)&&a.emitValidationErrors(this,l.call(a.validateStyle,a.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class it{constructor(l,h){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const _=this.workerPool.acquire(this.id);for(let x=0;x<_.length;x++){const w=new it.Actor(_[x],h,this.id);w.name=`Worker ${x}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,h,_){a.asyncAll(this.actors,(x,w)=>{x.send(l,h,w)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Dt(m,l,h){return l*(a.EXTENT/(m.tileSize*Math.pow(2,h-m.tileID.overscaledZ)))}it.Actor=a.Actor;class Tt{constructor(l,h,_,x){this.screenBounds=l,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(l,h){let _,x;if(l instanceof a.Point||typeof l[0]=="number"){const w=a.Point.convert(l);_=[w],x=h.isPointAboveHorizon(w)}else{const w=a.Point.convert(l[0]),C=a.Point.convert(l[1]);_=[w,C],x=a.polygonizeBounds(w,C).every(I=>h.isPointAboveHorizon(I))}return new Tt(_,h.getCameraPoint(),x,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return a.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const h=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new a.Point(1,1)):this.screenBounds[1],x=a.polygonizeBounds(h,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<_.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?x[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(x[3]=this.cameraPoint)),a.bufferConvexPolygon(x,l)}bufferedCameraGeometryGlobe(l){const h=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new a.Point(1,1)):this.screenBounds[1],x=a.polygonizeBounds(h,_,l),w=this.cameraPoint.clone();switch(3*((w.y>h.y)+(w.y>_.y))+((w.x>h.x)+(w.x>_.x))){case 0:x[0]=w,x[4]=w.clone();break;case 1:x.splice(1,0,w);break;case 2:x[1]=w;break;case 3:x.splice(4,0,w);break;case 5:x.splice(2,0,w);break;case 6:x[3]=w;break;case 7:x.splice(3,0,w);break;case 8:x[2]=w}return x}containsTile(l,h,_,x=0){const w=l.queryPadding/h._pixelsPerMercatorPixel+1,C=_?this._bufferedCameraMercator(w,h):this._bufferedScreenMercator(w,h);let I=l.tileID.wrap+(C.unwrapped?x:0);const O=C.polygon.map(ge=>a.getTilePoint(l.tileTransform,ge,I));if(!a.polygonIntersectsBox(O,0,0,a.EXTENT,a.EXTENT))return;I=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const j=this.screenGeometryMercator.polygon.map(ge=>a.getTileVec3(l.tileTransform,ge,I)),B=j.map(ge=>new a.Point(ge[0],ge[1])),Y=h.getFreeCameraOptions().position||new a.MercatorCoordinate(0,0,0),se=a.getTileVec3(l.tileTransform,Y,I),de=j.map(ge=>{const J=a.sub(ge,ge,se);return a.normalize(J,J),new a.Ray(se,J)}),fe=Dt(l,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:B,tilespaceRays:de,bufferedTilespaceGeometry:O,bufferedTilespaceBounds:(pe=a.getBounds(O),pe.min.x=a.clamp(pe.min.x,0,a.EXTENT),pe.min.y=a.clamp(pe.min.y,0,a.EXTENT),pe.max.x=a.clamp(pe.max.x,0,a.EXTENT),pe.max.y=a.clamp(pe.max.y,0,a.EXTENT),pe),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:fe};var pe}_bufferedScreenMercator(l,h){const _=tn(l);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let x;return x=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),h):{polygon:this.bufferedScreenGeometry(l).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[_]=x,x}}_bufferedCameraMercator(l,h){const _=tn(l);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let x;return x=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),h):{polygon:this.bufferedCameraGeometry(l).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[_]=x,x}}_projectAndResample(l,h){const _=function(w,C){const I=a.multiply([],C.pixelMatrix,C.globeMatrix),O=[0,-a.GLOBE_RADIUS,0,1],j=[0,a.GLOBE_RADIUS,0,1],B=[0,0,0,1];a.transformMat4$1(O,O,I),a.transformMat4$1(j,j,I),a.transformMat4$1(B,B,I);const Y=new a.Point(O[0]/O[3],O[1]/O[3]),se=new a.Point(j[0]/j[3],j[1]/j[3]),de=a.polygonContainsPoint(w,Y)&&O[3]<B[3],fe=a.polygonContainsPoint(w,se)&&j[3]<B[3];if(!de&&!fe)return null;const pe=function(Ue,Qe,Je){for(let dt=1;dt<Ue.length;dt++){const Ut=Yt(Qe.pointCoordinate3D(Ue[dt-1]).x),at=Yt(Qe.pointCoordinate3D(Ue[dt]).x);if(Je<0){if(Ut<at)return{idx:dt,t:-Ut/(at-1-Ut)}}else if(at<Ut)return{idx:dt,t:(1-Ut)/(at+1-Ut)}}return null}(w,C,de?-1:1);if(!pe)return null;const{idx:ge,t:J}=pe;let ue=ge>1?Rt(w.slice(0,ge),C):[],we=ge<w.length?Rt(w.slice(ge),C):[];ue=ue.map(Ue=>new a.Point(Yt(Ue.x),Ue.y)),we=we.map(Ue=>new a.Point(Yt(Ue.x),Ue.y));const Se=[...ue];Se.length===0&&Se.push(we[we.length-1]);const $e=a.number(Se[Se.length-1].y,(we.length===0?ue[0]:we[0]).y,J);let Ve;return Ve=de?[new a.Point(0,$e),new a.Point(0,0),new a.Point(1,0),new a.Point(1,$e)]:[new a.Point(1,$e),new a.Point(1,1),new a.Point(0,1),new a.Point(0,$e)],Se.push(...Ve),we.length===0?Se.push(ue[0]):Se.push(...we),{polygon:Se.map(Ue=>new a.MercatorCoordinate(Ue.x,Ue.y)),unwrapped:!1}}(l,h);if(_)return _;const x=function(w,C){let I=!1,O=-1/0,j=0;for(let Y=0;Y<w.length-1;Y++)w[Y].x>O&&(O=w[Y].x,j=Y);for(let Y=0;Y<w.length-1;Y++){const se=(j+Y)%(w.length-1),de=w[se],fe=w[se+1];Math.abs(de.x-fe.x)>.5&&(de.x<fe.x?(de.x+=1,se===0&&(w[w.length-1].x+=1)):(fe.x+=1,se+1===w.length-1&&(w[0].x+=1)),I=!0)}const B=a.mercatorXfromLng(C.center.lng);return I&&B<Math.abs(B-1)&&w.forEach(Y=>{Y.x-=1}),{polygon:w,unwrapped:I}}(Rt(l,h).map(w=>new a.Point(Yt(w.x),w.y)),h);return{polygon:x.polygon.map(w=>new a.MercatorCoordinate(w.x,w.y)),unwrapped:x.unwrapped}}}function Rt(m,l){return a.resample(m,h=>{const _=l.pointCoordinate3D(h);h.x=_.x,h.y=_.y},1/256)}function Yt(m){return m<0?1+m%1:m%1}function tn(m){return 100*m|0}function dn(m,l,h,_,x){const w=function(C,I){if(C)return x(C);if(I){m.url&&I.tiles&&m.tiles&&delete m.tiles;const O=a.pick(a.extend(I,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);I.vector_layers&&(O.vectorLayers=I.vector_layers,O.vectorLayerIds=O.vectorLayers.map(j=>j.id)),O.tiles=l.canonicalizeTileset(O,m.url),x(null,O)}};return m.url?a.getJSON(l.transformRequest(l.normalizeSourceURL(m.url,null,h,_),a.ResourceType.Source),w):a.exported.frame(()=>w(null,m))}class _n{constructor(l,h,_){this.bounds=a.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=_||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const h=Math.pow(2,l.z),_=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*h),x=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*h),w=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*h),C=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*h);return l.x>=_&&l.x<w&&l.y>=x&&l.y<C}}class In{constructor(l,h,_){this.context=l;const x=l.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Jt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vn{constructor(l,h,_,x){this.length=h.length,this.attributes=_,this.itemSize=h.bytesPerElement,this.dynamicDraw=x,this.context=l;const w=l.gl;this.buffer=w.createBuffer(),l.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,h){for(let _=0;_<this.attributes.length;_++){const x=h.attributes[this.attributes[_].name];x!==void 0&&l.enableVertexAttribArray(x)}}setVertexAttribPointers(l,h,_){for(let x=0;x<this.attributes.length;x++){const w=this.attributes[x],C=h.attributes[w.name];C!==void 0&&l.vertexAttribPointer(C,w.components,l[Jt[w.type]],!1,this.itemSize,w.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ft{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class nn extends Ft{getDefault(){return a.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class En extends Ft{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Zt extends Ft{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Ct extends Ft{getDefault(){return[!0,!0,!0,!0]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class On extends Ft{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class an extends Ft{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Zn extends Ft{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const h=this.current;(l.func!==h.func||l.ref!==h.ref||l.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class tr extends Ft{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Nn extends Ft{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=l,this.dirty=!1}}class Yn extends Ft{getDefault(){return[0,1]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Un extends Ft{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=l,this.dirty=!1}}class qn extends Ft{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class bn extends Ft{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.BLEND):h.disable(h.BLEND),this.current=l,this.dirty=!1}}class Ye extends Ft{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Xt extends Ft{getDefault(){return a.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class rn extends Ft{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class qt extends Ft{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=l,this.dirty=!1}}class en extends Ft{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class on extends Ft{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let yn,Dn=class extends Ft{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class Fn extends Ft{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class nr extends Ft{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Ar extends Ft{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class gr extends Ft{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class vi extends Ft{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class di extends Ft{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Te extends Ft{getDefault(){return null}set(l){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class re extends Ft{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class ie extends Ft{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class me extends Ft{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Me extends Ft{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class De extends Ft{constructor(l,h){super(l),this.context=l,this.parent=h}getDefault(){return null}}class qe extends De{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Xe extends De{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class je extends Xe{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Fe{constructor(l,h,_,x){this.context=l,this.width=h,this.height=_;const w=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new qe(l,w),x&&(this.depthAttachment=new Xe(l,w))}destroy(){const l=this.context.gl,h=this.colorAttachment.get();if(h&&l.deleteTexture(h),this.depthAttachment){const _=this.depthAttachment.get();_&&l.deleteRenderbuffer(_)}l.deleteFramebuffer(this.framebuffer)}}class ct{constructor(l,h=!1){if(this.gl=l,this.isWebGL2=h,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),h){const _=l;this.extVertexArrayObject={createVertexArrayOES:_.createVertexArray.bind(l),deleteVertexArrayOES:_.deleteVertexArray.bind(l),bindVertexArrayOES:_.bindVertexArray.bind(l)}}this.clearColor=new nn(this),this.clearDepth=new En(this),this.clearStencil=new Zt(this),this.colorMask=new Ct(this),this.depthMask=new On(this),this.stencilMask=new an(this),this.stencilFunc=new Zn(this),this.stencilOp=new tr(this),this.stencilTest=new Nn(this),this.depthRange=new Yn(this),this.depthTest=new Un(this),this.depthFunc=new qn(this),this.blend=new bn(this),this.blendFunc=new Ye(this),this.blendColor=new Xt(this),this.blendEquation=new rn(this),this.cullFace=new qt(this),this.cullFaceSide=new en(this),this.frontFace=new on(this),this.program=new Dn(this),this.activeTexture=new Fn(this),this.viewport=new nr(this),this.bindFramebuffer=new Ar(this),this.bindRenderbuffer=new gr(this),this.bindTexture=new vi(this),this.bindVertexBuffer=new di(this),this.bindElementBuffer=new Te(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new re(this),this.pixelStoreUnpack=new ie(this),this.pixelStoreUnpackPremultiplyAlpha=new me(this),this.pixelStoreUnpackFlipY=new Me(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),h||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(h||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=h||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,h){return new In(this,l,h)}createVertexBuffer(l,h,_){return new vn(this,l,h,_)}createRenderbuffer(l,h,_){const x=this.gl,w=x.createRenderbuffer();return this.bindRenderbuffer.set(w),x.renderbufferStorage(x.RENDERBUFFER,l,h,_),this.bindRenderbuffer.set(null),w}createFramebuffer(l,h,_){return new Fe(this,l,h,_)}clear({color:l,depth:h,stencil:_}){const x=this.gl;let w=0;l&&(w|=x.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(w|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),_!==void 0&&(w|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),x.clear(w)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){v(l.blendFunction,a.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Pt extends a.Evented{constructor(l,h,_,x){if(super(),this.id=l,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(h,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new a.DedupedRequest}load(l){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=dn(this._options,this.map._requestManager,h,_,(x,w)=>{this._tileJSONRequest=null,this._loaded=!0,x?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new a.ErrorEvent(x))):w&&(a.extend(this,w),w.bounds&&(this.tileBounds=new _n(w.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(x)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}loadTile(l,h){const _=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(_,a.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(x.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=h:l.request=l.actor.send("reloadTile",x,w.bind(this));else if(l.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",x,w.bind(this),void 0,!0);else{const C=a.loadVectorTile.call({deduped:this._deduped},x,(I,O)=>{I||!O?w.call(this,I):(x.data={cacheControl:O.cacheControl,expires:O.expires,rawData:O.rawData.slice(0)},l.actor&&l.actor.send("loadTile",x,w.bind(this),void 0,!0))},!0);l.request={cancel:C}}function w(C,I){return delete l.request,l.aborted?h(null):C&&C.status!==404?h(C):(I&&I.resourceTiming&&(l.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&l.setExpiryData(I),l.loadVectorData(I,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Et extends a.Evented{constructor(l,h,_,x){super(),this.id=l,this.dispatcher=_,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},h),a.extend(this,a.pick(h,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dn(this._options,this.map._requestManager,null,null,(h,_)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new a.ErrorEvent(h)):_&&(a.extend(this,_),_.bounds&&(this.tileBounds=new _n(_.bounds,this.minzoom,this.maxzoom)),a.postTurnstileEvent(_.tiles),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(h)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,h){const _=a.exported.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);l.request=a.getImage(this.map._requestManager.transformRequest(x,a.ResourceType.Tile),(w,C,I,O)=>(delete l.request,l.aborted?(l.state="unloaded",h(null)):w?(l.state="errored",h(w)):C?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:I,expires:O}),l.setTexture(C,this.map.painter),l.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),void h(null)):h(null)))}static loadTileData(l,h,_){l.setTexture(h,_)}static unloadTileData(l,h){l.texture&&h.saveTileTexture(l.texture)}abortTile(l,h){l.request&&(l.request.cancel(),delete l.request),h()}unloadTile(l,h){l.texture&&this.map.painter.saveTileTexture(l.texture),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function mn(m,l,h,_,x,w,C,I){const O=[m,h,x,l,_,w,1,1,1],j=[C,I,1],B=a.adjoint([],O),[Y,se,de]=a.transformMat3(j,j,a.transpose(B,B));return a.multiply$1(O,[Y,0,0,0,se,0,0,0,de],O)}class Rn extends a.Evented{constructor(l,h,_,x){super(),this.id=l,this.dispatcher=_,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=h,this._dirty=!1}load(l,h){this._loaded=h||!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(_,x)=>{if(this._imageRequest=null,this._loaded=!0,_)this.fire(new a.ErrorEvent(_));else if(x){const{HTMLImageElement:w}=a.window;this.image=x instanceof w?a.exported.getImageData(x):x,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const h=l.map(a.MercatorCoordinate.fromLngLat);return this.tileID=function(_){let x=1/0,w=1/0,C=-1/0,I=-1/0;for(const Y of _)x=Math.min(x,Y.x),w=Math.min(w,Y.y),C=Math.max(C,Y.x),I=Math.max(I,Y.y);const O=Math.max(C-x,I-w),j=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),B=Math.pow(2,j);return new a.CanonicalTileID(j,Math.floor((x+C)/2*B),Math.floor((w+I)/2*B))}(h),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const O in this.tiles){const j=this.tiles[O];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture)}if(this._boundsArray)return;const h=a.tileTransform(this.tileID,this.map.transform.projection),[_,x,w,C]=this.coordinates.map(O=>{const j=h.projection.project(O[0],O[1]);return a.getTilePoint(h,j)._round()});this.perspectiveTransform=function(O,j,B,Y,se,de,fe,pe,ge,J){const ue=mn(0,0,O,0,0,j,O,j),we=mn(B,Y,se,de,fe,pe,ge,J);return a.multiply$1(we,a.adjoint(ue,ue),we),[we[6]/we[8]*O/a.EXTENT,we[7]/we[8]*j/a.EXTENT]}(this.width,this.height,_.x,_.y,x.x,x.y,C.x,C.y,w.x,w.y);const I=this._boundsArray=new a.StructArrayLayout4i8;I.emplaceBack(_.x,_.y,0,0),I.emplaceBack(x.x,x.y,a.EXTENT,0),I.emplaceBack(C.x,C.y,0,a.EXTENT),I.emplaceBack(w.x,w.y,a.EXTENT,a.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(I,a.boundsAttributes.members),this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,h=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new a.Texture(l,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,h){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},h(null)):(l.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const An={vector:Pt,raster:Et,"raster-dem":class extends Et{constructor(m,l,h,_){super(m,l,h,_),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(m,l){const h=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(x,w){x&&(m.state="errored",l(x)),w&&(m.dem=w,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",l(null))}m.request=a.getImage(this.map._requestManager.transformRequest(h,a.ResourceType.Tile),function(x,w,C,I){if(delete m.request,m.aborted)m.state="unloaded",l(null);else if(x)m.state="errored",l(x);else if(w){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:C,expires:I});const O=a.window.ImageBitmap&&w instanceof a.window.ImageBitmap&&(yn==null&&(yn=a.window.OffscreenCanvas&&new a.window.OffscreenCanvas(1,1).getContext("2d")&&typeof a.window.createImageBitmap=="function"),yn),j=1-(w.width-a.prevPowerOfTwo(w.width))/2;j<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const B=O?w:a.exported.getImageData(w,j),Y={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:B,encoding:this.encoding,padding:j};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",Y,_.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(m){const l=m.canonical,h=Math.pow(2,l.z),_=(l.x-1+h)%h,x=l.x===0?m.wrap-1:m.wrap,w=(l.x+1+h)%h,C=l.x+1===h?m.wrap+1:m.wrap,I={};return I[new a.OverscaledTileID(m.overscaledZ,x,l.z,_,l.y).key]={backfilled:!1},I[new a.OverscaledTileID(m.overscaledZ,C,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(I[new a.OverscaledTileID(m.overscaledZ,x,l.z,_,l.y-1).key]={backfilled:!1},I[new a.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},I[new a.OverscaledTileID(m.overscaledZ,C,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<h&&(I[new a.OverscaledTileID(m.overscaledZ,x,l.z,_,l.y+1).key]={backfilled:!1},I[new a.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},I[new a.OverscaledTileID(m.overscaledZ,C,l.z,w,l.y+1).key]={backfilled:!1}),I}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends a.Evented{constructor(m,l,h,_){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(_),this._data=l.data,this._options=a.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const x=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:a.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},l),this}getClusterChildren(m,l){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},l),this}getClusterLeaves(m,l,h,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:l,offset:h},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=a.extend({},this.workerOptions),l=this._data;typeof l=="string"?(m.request=this.map._requestManager.transformRequest(a.exported.resolveURL(l),a.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(h,_)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new a.ErrorEvent(h));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(x.resourceTiming=_.resourceTiming[this.id]),this.fire(new a.Event("data",x)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,l){const h=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(h,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(_,x)=>(delete m.request,m.unloadVectorData(),m.aborted?l(null):_?l(_):(m.loadVectorData(x,this.map.painter,h==="reloadTile"),l(null))),void 0,h==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Rn{constructor(m,l,h,_){super(m,l,h,_),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const l of m.urls)this.urls.push(this.map._requestManager.transformRequest(l,a.ResourceType.Source).url);a.getVideo(this.urls,(l,h)=>{this._loaded=!0,l?this.fire(new a.ErrorEvent(l)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const l=this.video.seekable;m<l.start(0)||m>l.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,l=m.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(m,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Rn,canvas:class extends Rn{constructor(m,l,h,_){super(m,l,h,_),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(w=>typeof w!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends a.Evented{constructor(m,l,h,_){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=l,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new _n(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),a.extend(this,a.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:l,y:h,z:_}=m.canonical;return this._implementation.hasTile({x:l,y:h,z:_})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,l){const{x:h,y:_,z:x}=m.tileID.canonical,w=new a.window.AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:h,y:_,z:x},{signal:w.signal})).then(function(C){return delete m.request,m.aborted?(m.state="unloaded",l(null)):C===void 0?(m.state="errored",l(null)):C===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",l(null)):function(I){return I instanceof a.window.ImageData||I instanceof a.window.HTMLCanvasElement||I instanceof a.window.ImageBitmap||I instanceof a.window.HTMLImageElement}(C)?(this.loadTileData(m,C),m.state="loaded",void l(null)):(m.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(C=>{C.code!==20&&(m.state="errored",l(C))}),m.request.cancel=()=>w.abort()}loadTileData(m,l){Et.loadTileData(m,l,this._map.painter)}unloadTileData(m){Et.unloadTileData(m,this._map.painter)}unloadTile(m,l){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:h,y:_,z:x}=m.tileID.canonical;this._implementation.unloadTile({x:h,y:_,z:x})}l()}abortTile(m,l){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ln=function(m,l,h,_){const x=new An[l.type](m,l,h,_);if(x.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${x.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],x),x};function Xn(m,l){const h=a.identity([]);return a.scale(h,h,[.5*m.width,.5*-m.height,1]),a.translate(h,h,[1,-1,0]),a.multiply(h,h,m.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(h)}function xr(m,l,h,_,x,w,C,I=!1){const O=m.tilesIn(_,C,I);O.sort(Mr);const j=[];for(const Y of O)j.push({wrappedTileID:Y.tile.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(l,h,m._state,Y,x,w,Xn(m.transform,Y.tile.tileID),I)});const B=function(Y){const se={},de={};for(const fe of Y){const pe=fe.queryResults,ge=fe.wrappedTileID,J=de[ge]=de[ge]||{};for(const ue in pe){const we=pe[ue],Se=J[ue]=J[ue]||{},$e=se[ue]=se[ue]||[];for(const Ve of we)Se[Ve.featureIndex]||(Se[Ve.featureIndex]=!0,$e.push(Ve))}}return se}(j);for(const Y in B)B[Y].forEach(se=>{const de=se.feature,fe=de.layer;fe&&fe.type!=="background"&&fe.type!=="sky"&&(de.source=fe.source,fe["source-layer"]&&(de.sourceLayer=fe["source-layer"]),de.state=de.id!==void 0?m.getFeatureState(fe["source-layer"],de.id):{})});return B}function br(m,l){const h=m.getRenderableIds().map(w=>m.getTileByID(w)),_=[],x={};for(let w=0;w<h.length;w++){const C=h[w],I=C.tileID.canonical.key;x[I]||(x[I]=!0,C.querySourceFeatures(_,l))}return _}function Mr(m,l){const h=m.tileID,_=l.tileID;return h.overscaledZ-_.overscaledZ||h.canonical.y-_.canonical.y||h.wrap-_.wrap||h.canonical.x-_.canonical.x}function Ge(){return sd.workerClass!=null?new sd.workerClass:new a.window.Worker(sd.workerUrl)}const Ee="mapboxgl_preloaded_worker_pool";class lt{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<lt.workerCount;)this.workers.push(new Ge);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ee]}numActive(){return Object.keys(this.active).length}}let Ot;function ln(){return Ot||(Ot=new lt),Ot}function hr(m,l){const h={};for(const _ in m)_!=="ref"&&(h[_]=m[_]);return a.refProperties.forEach(_=>{_ in l&&(h[_]=l[_])}),h}function Pr(m){m=m.slice();const l=Object.create(null);for(let h=0;h<m.length;h++)l[m[h].id]=m[h];for(let h=0;h<m.length;h++)"ref"in m[h]&&(m[h]=hr(m[h],l[m[h].ref]));return m}lt.workerCount=2;const Vn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Io(m,l,h){h.push({command:Vn.addSource,args:[m,l[m]]})}function po(m,l,h){l.push({command:Vn.removeSource,args:[m]}),h[m]=!0}function fo(m,l,h,_){po(m,h,_),Io(m,l,h)}function ea(m,l,h){let _;for(_ in m[h])if(m[h].hasOwnProperty(_)&&_!=="data"&&!v(m[h][_],l[h][_]))return!1;for(_ in l[h])if(l[h].hasOwnProperty(_)&&_!=="data"&&!v(m[h][_],l[h][_]))return!1;return!0}function Bi(m,l,h,_,x,w){let C;for(C in l=l||{},m=m||{})m.hasOwnProperty(C)&&(v(m[C],l[C])||h.push({command:w,args:[_,C,l[C],x]}));for(C in l)l.hasOwnProperty(C)&&!m.hasOwnProperty(C)&&(v(m[C],l[C])||h.push({command:w,args:[_,C,l[C],x]}))}function ji(m){return m.id}function mo(m,l){return m[l.id]=l,m}class $i{constructor(l,h){this.reset(l,h)}reset(l,h){this.points=l||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.clamp(l,0,1);let h=1,_=this._distances[h];const x=l*this.paddedLength+this.padding;for(;_<x&&h<this._distances.length;)_=this._distances[++h];const w=h-1,C=this._distances[w],I=_-C,O=I>0?(x-C)/I:0;return this.points[w].mult(1-O).add(this.points[h].mult(O))}}class za{constructor(l,h,_){const x=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(l/_),this.yCellCount=Math.ceil(h/_);for(let C=0;C<this.xCellCount*this.yCellCount;C++)x.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,h,_,x,w){this._forEachCell(h,_,x,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(_),this.bboxes.push(x),this.bboxes.push(w)}insertCircle(l,h,_,x){this._forEachCell(h-x,_-x,h+x,_+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(_),this.circles.push(x)}_insertBoxCell(l,h,_,x,w,C){this.boxCells[w].push(C)}_insertCircleCell(l,h,_,x,w,C){this.circleCells[w].push(C)}_query(l,h,_,x,w,C){if(_<0||l>this.width||x<0||h>this.height)return!w&&[];const I=[];if(l<=0&&h<=0&&this.width<=_&&this.height<=x){if(w)return!0;for(let O=0;O<this.boxKeys.length;O++)I.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const j=this.circles[3*O],B=this.circles[3*O+1],Y=this.circles[3*O+2];I.push({key:this.circleKeys[O],x1:j-Y,y1:B-Y,x2:j+Y,y2:B+Y})}return C?I.filter(C):I}return this._forEachCell(l,h,_,x,this._queryCell,I,{hitTest:w,seenUids:{box:{},circle:{}}},C),w?I.length>0:I}_queryCircle(l,h,_,x,w){const C=l-_,I=l+_,O=h-_,j=h+_;if(I<0||C>this.width||j<0||O>this.height)return!x&&[];const B=[];return this._forEachCell(C,O,I,j,this._queryCellCircle,B,{hitTest:x,circle:{x:l,y:h,radius:_},seenUids:{box:{},circle:{}}},w),x?B.length>0:B}query(l,h,_,x,w){return this._query(l,h,_,x,!1,w)}hitTest(l,h,_,x,w){return this._query(l,h,_,x,!0,w)}hitTestCircle(l,h,_,x){return this._queryCircle(l,h,_,!0,x)}_queryCell(l,h,_,x,w,C,I,O){const j=I.seenUids,B=this.boxCells[w];if(B!==null){const se=this.bboxes;for(const de of B)if(!j.box[de]){j.box[de]=!0;const fe=4*de;if(l<=se[fe+2]&&h<=se[fe+3]&&_>=se[fe+0]&&x>=se[fe+1]&&(!O||O(this.boxKeys[de]))){if(I.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[de],x1:se[fe],y1:se[fe+1],x2:se[fe+2],y2:se[fe+3]})}}}const Y=this.circleCells[w];if(Y!==null){const se=this.circles;for(const de of Y)if(!j.circle[de]){j.circle[de]=!0;const fe=3*de;if(this._circleAndRectCollide(se[fe],se[fe+1],se[fe+2],l,h,_,x)&&(!O||O(this.circleKeys[de]))){if(I.hitTest)return C.push(!0),!0;{const pe=se[fe],ge=se[fe+1],J=se[fe+2];C.push({key:this.circleKeys[de],x1:pe-J,y1:ge-J,x2:pe+J,y2:ge+J})}}}}}_queryCellCircle(l,h,_,x,w,C,I,O){const j=I.circle,B=I.seenUids,Y=this.boxCells[w];if(Y!==null){const de=this.bboxes;for(const fe of Y)if(!B.box[fe]){B.box[fe]=!0;const pe=4*fe;if(this._circleAndRectCollide(j.x,j.y,j.radius,de[pe+0],de[pe+1],de[pe+2],de[pe+3])&&(!O||O(this.boxKeys[fe])))return C.push(!0),!0}}const se=this.circleCells[w];if(se!==null){const de=this.circles;for(const fe of se)if(!B.circle[fe]){B.circle[fe]=!0;const pe=3*fe;if(this._circlesCollide(de[pe],de[pe+1],de[pe+2],j.x,j.y,j.radius)&&(!O||O(this.circleKeys[fe])))return C.push(!0),!0}}}_forEachCell(l,h,_,x,w,C,I,O){const j=this._convertToXCellCoord(l),B=this._convertToYCellCoord(h),Y=this._convertToXCellCoord(_),se=this._convertToYCellCoord(x);for(let de=j;de<=Y;de++)for(let fe=B;fe<=se;fe++)if(w.call(this,l,h,_,x,this.xCellCount*fe+de,C,I,O))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,h,_,x,w,C){const I=x-l,O=w-h,j=_+C;return j*j>I*I+O*O}_circleAndRectCollide(l,h,_,x,w,C,I){const O=(C-x)/2,j=Math.abs(l-(x+O));if(j>O+_)return!1;const B=(I-w)/2,Y=Math.abs(h-(w+B));if(Y>B+_)return!1;if(j<=O||Y<=B)return!0;const se=j-O,de=Y-B;return se*se+de*de<=_*_}}const Na={unknown:0,flipRequired:1,flipNotRequired:2},Cl=Math.tan(85*Math.PI/180);function yt(m,l,h,_,x,w,C){const I=a.create();if(h)if(w.name==="globe"){const O=a.calculateGlobeLabelMatrix(x,l);a.multiply(I,I,O)}else{const O=_e([],C);I[0]=O[0],I[1]=O[1],I[4]=O[2],I[5]=O[3],_||a.rotateZ(I,I,x.angle)}else a.multiply(I,x.labelPlaneMatrix,m);return I}function da(m,l,h,_,x,w,C){const I=yt(m,l,h,_,x,w,C);return w.name==="globe"&&h||(I[2]=I[6]=I[10]=I[14]=0),I}function Qr(m,l,h,_,x,w,C){if(h){if(w.name==="globe"){const I=yt(m,l,h,_,x,w,C);return a.invert(I,I),a.multiply(I,m,I),I}{const I=a.clone(m),O=a.identity([]);return O[0]=C[0],O[1]=C[1],O[4]=C[2],O[5]=C[3],a.multiply(I,I,O),_||a.rotateZ(I,I,-x.angle),I}}return x.glCoordMatrix}function Hi(m,l,h,_){const x=[m,l,h,1];h?a.transformMat4$1(x,x,_):fr(x,x,_);const w=x[3];return x[0]/=w,x[1]/=w,x[2]/=w,x}function Ao(m,l){return Math.min(.5+m/l*.5,1.5)}function Mo(m,l){const h=m[0]/m[3],_=m[1]/m[3];return h>=-l[0]&&h<=l[0]&&_>=-l[1]&&_<=l[1]}function lc(m,l,h,_,x,w,C,I,O,j){const B=h.transform,Y=_?m.textSizeData:m.iconSizeData,se=a.evaluateSizeForZoom(Y,h.transform.zoom),de=B.projection.name==="globe",fe=[256/h.width*2+1,256/h.height*2+1],pe=_?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;pe.clear();let ge=null;de&&(ge=_?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const J=m.lineVertexArray,ue=_?m.text.placedSymbolArray:m.icon.placedSymbolArray,we=h.transform.width/h.transform.height;let Se,$e=!1;for(let Ve=0;Ve<ue.length;Ve++){const Ue=ue.get(Ve),{numGlyphs:Qe,writingMode:Je}=Ue;if(Je!==a.WritingMode.vertical||$e||Se===a.WritingMode.horizontal||($e=!0),Se=Je,(Ue.hidden||Je===a.WritingMode.vertical)&&!$e){Fa(Qe,pe);continue}$e=!1;const dt=new a.Point(Ue.tileAnchorX,Ue.tileAnchorY);let{x:Ut,y:at,z:kt}=B.projection.projectTilePoint(dt.x,dt.y,j.canonical);if(O){const[Qn,Sn,Gn]=O(dt);Ut+=Qn,at+=Sn,kt+=Gn}const ft=[Ut,at,kt,1];if(a.transformMat4$1(ft,ft,l),!Mo(ft,fe)){Fa(Qe,pe);continue}const jt=Ao(h.transform.cameraToCenterDistance,ft[3]),ut=a.evaluateSizeForFeature(Y,se,Ue),St=C?ut/jt:ut*jt,Wt=Hi(Ut,at,kt,x);if(Wt[3]<=0){Fa(Qe,pe);continue}let zt={};const Ht=C?null:O,zn=cn(Ue,St,!1,I,l,x,w,m.glyphOffsetArray,J,pe,ge,Wt,dt,zt,we,Ht,B.projection,j,C);$e=zn.useVertical,Ht&&zn.needsFlipping&&(zt={}),(zn.notEnoughRoom||$e||zn.needsFlipping&&cn(Ue,St,!0,I,l,x,w,m.glyphOffsetArray,J,pe,ge,Wt,dt,zt,we,Ht,B.projection,j,C).notEnoughRoom)&&Fa(Qe,pe)}_?(m.text.dynamicLayoutVertexBuffer.updateData(pe),ge&&m.text.globeExtVertexBuffer.updateData(ge)):(m.icon.dynamicLayoutVertexBuffer.updateData(pe),ge&&m.icon.globeExtVertexBuffer.updateData(ge))}function Op(m,l,h,_,x,w,C,I,O,j,B,Y,se,de,fe,pe){const{lineStartIndex:ge,glyphStartIndex:J,segment:ue}=I,we=J+I.numGlyphs,Se=ge+I.lineLength,$e=l.getoffsetX(J),Ve=l.getoffsetX(we-1),Ue=jo(m*$e,h,_,x,w,C,ue,ge,Se,O,j,B,Y,se,!0,de,fe,pe);if(!Ue)return null;const Qe=jo(m*Ve,h,_,x,w,C,ue,ge,Se,O,j,B,Y,se,!0,de,fe,pe);return Qe?{first:Ue,last:Qe}:null}function cc(m,l,h,_){return m===a.WritingMode.horizontal&&Math.abs(_)>Math.abs(h)?{useVertical:!0}:m===a.WritingMode.vertical?_>0?{needsFlipping:!0}:null:l!==Na.unknown&&function(x,w){return x===0||Math.abs(w/x)>Cl}(h,_)?l===Na.flipRequired?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function cn(m,l,h,_,x,w,C,I,O,j,B,Y,se,de,fe,pe,ge,J,ue){const we=l/24,Se=m.lineOffsetX*we,$e=m.lineOffsetY*we,{lineStartIndex:Ve,glyphStartIndex:Ue,numGlyphs:Qe,segment:Je,writingMode:dt,flipState:Ut}=m,at=Ve+m.lineLength,kt=ft=>{if(B){const[Wt,zt,Ht]=ft.up,zn=j.length;a.updateGlobeVertexNormal(B,zn+0,Wt,zt,Ht),a.updateGlobeVertexNormal(B,zn+1,Wt,zt,Ht),a.updateGlobeVertexNormal(B,zn+2,Wt,zt,Ht),a.updateGlobeVertexNormal(B,zn+3,Wt,zt,Ht)}const[jt,ut,St]=ft.point;a.addDynamicAttributes(j,jt,ut,St,ft.angle)};if(Qe>1){const ft=Op(we,I,Se,$e,h,Y,se,m,O,w,de,pe,!1,ge,J,ue);if(!ft)return{notEnoughRoom:!0};if(_&&!h){let[jt,ut,St]=ft.first.point,[Wt,zt,Ht]=ft.last.point;[jt,ut]=Hi(jt,ut,St,C),[Wt,zt]=Hi(Wt,zt,Ht,C);const zn=cc(dt,Ut,(Wt-jt)*fe,zt-ut);if(m.flipState=zn&&zn.needsFlipping?Na.flipRequired:Na.flipNotRequired,zn)return zn}kt(ft.first);for(let jt=Ue+1;jt<Ue+Qe-1;jt++){const ut=jo(we*I.getoffsetX(jt),Se,$e,h,Y,se,Je,Ve,at,O,w,de,pe,!1,!1,ge,J,ue);if(!ut)return j.length-=4*(jt-Ue),{notEnoughRoom:!0};kt(ut)}kt(ft.last)}else{if(_&&!h){const jt=Hi(se.x,se.y,0,x),ut=Ve+Je+1,St=new a.Point(O.getx(ut),O.gety(ut)),Wt=Hi(St.x,St.y,0,x),zt=Wt[3]>0?Wt:cr(se,St,jt,1,x,void 0,ge,J.canonical),Ht=cc(dt,Ut,(zt[0]-jt[0])*fe,zt[1]-jt[1]);if(m.flipState=Ht&&Ht.needsFlipping?Na.flipRequired:Na.flipNotRequired,Ht)return Ht}const ft=jo(we*I.getoffsetX(Ue),Se,$e,h,Y,se,Je,Ve,at,O,w,de,pe,!1,!1,ge,J,ue);if(!ft)return{notEnoughRoom:!0};kt(ft)}return{}}function _r(m,l,h,_,x){const{x:w,y:C,z:I}=_.projectTilePoint(m.x,m.y,l);if(!x)return Hi(w,C,I,h);const[O,j,B]=x(m);return Hi(w+O,C+j,I+B,h)}function cr(m,l,h,_,x,w,C,I){const O=_r(m.sub(l)._unit()._add(m),I,x,C,w);return a.sub(O,h,O),a.normalize(O,O),a.scaleAndAdd(O,h,O,_)}function jo(m,l,h,_,x,w,C,I,O,j,B,Y,se,de,fe,pe,ge,J){const ue=_?m-l:m+l;let we=ue>0?1:-1,Se=0;_&&(we*=-1,Se=Math.PI),we<0&&(Se+=Math.PI);let $e=I+C+(we>0?0:1)|0,Ve=x,Ue=x,Qe=0,Je=0;const dt=Math.abs(ue),Ut=[],at=[];let kt=w,ft=kt;const jt=()=>cr(ft,kt,Ue,dt-Qe+1,B,se,pe,ge.canonical);for(;Qe+Je<=dt;){if($e+=we,$e<I||$e>=O)return null;if(Ue=Ve,ft=kt,Ut.push(Ue),de&&at.push(ft),kt=new a.Point(j.getx($e),j.gety($e)),Ve=Y[$e],!Ve){const Gn=_r(kt,ge.canonical,B,pe,se);Ve=Gn[3]>0?Y[$e]=Gn:jt()}Qe+=Je,Je=a.distance(Ue,Ve)}fe&&se&&(Y[$e]&&(Ve=jt(),Je=a.distance(Ue,Ve)),Y[$e]=Ve);const ut=(dt-Qe)/Je,St=kt.sub(ft)._mult(ut)._add(ft),Wt=a.sub([],Ve,Ue),zt=a.scaleAndAdd([],Ue,Wt,ut);let Ht=[0,0,1],zn=Wt[0],Qn=Wt[1];if(J&&(Ht=pe.upVector(ge.canonical,St.x,St.y),Ht[0]!==0||Ht[1]!==0||Ht[2]!==1)){const Gn=[Ht[2],0,-Ht[0]],Er=a.cross([],Ht,Gn);a.normalize(Gn,Gn),a.normalize(Er,Er),zn=a.dot(Wt,Gn),Qn=a.dot(Wt,Er)}if(h){const Gn=a.cross([],Ht,Wt);a.normalize(Gn,Gn),a.scaleAndAdd(zt,zt,Gn,h*we)}const Sn=Se+Math.atan2(Qn,zn);return Ut.push(zt),de&&at.push(St),{point:zt,angle:Sn,path:Ut,tilePath:at,up:Ht}}function Fa(m,l){const h=l.length,_=h+4*m;l.resize(_),l.float32.fill(-1/0,4*h,4*_)}function fr(m,l,h){const _=l[0],x=l[1];return m[0]=h[0]*_+h[4]*x+h[12],m[1]=h[1]*_+h[5]*x+h[13],m[3]=h[3]*_+h[7]*x+h[15],m}const xi=100;class uc{constructor(l,h,_=new za(l.width+200,l.height+200,25),x=new za(l.width+200,l.height+200,25)){this.transform=l,this.grid=_,this.ignoredGrid=x,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+xi,this.screenBottomBoundary=l.height+xi,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=h}placeCollisionBox(l,h,_,x,w,C,I,O){let j=_.projectedAnchorX,B=_.projectedAnchorY,Y=_.projectedAnchorZ;const se=_.elevation,de=_.tileID,fe=l.getProjection();if(se&&de){const[Ve,Ue,Qe]=fe.upVector(de.canonical,_.tileAnchorX,_.tileAnchorY),Je=fe.upVectorScale(de.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;j+=Ve*se*Je,B+=Ue*se*Je,Y+=Qe*se*Je}const pe=this.projectAndGetPerspectiveRatio(I,j,B,Y,_.tileID,fe.name==="globe"||!!se||this.transform.pitch>0,fe),ge=C*pe.perspectiveRatio,J=(_.x1*h+x.x-_.padding)*ge+pe.point.x,ue=(_.y1*h+x.y-_.padding)*ge+pe.point.y,we=(_.x2*h+x.x+_.padding)*ge+pe.point.x,Se=(_.y2*h+x.y+_.padding)*ge+pe.point.y,$e=pe.perspectiveRatio<=.55||pe.occluded;return!this.isInsideGrid(J,ue,we,Se)||!w&&this.grid.hitTest(J,ue,we,Se,O)||$e?{box:[],offscreen:!1,occluded:pe.occluded}:{box:[J,ue,we,Se],offscreen:this.isOffscreen(J,ue,we,Se),occluded:!1}}placeCollisionCircles(l,h,_,x,w,C,I,O,j,B,Y,se,de,fe,pe){const ge=[],J=this.transform.elevation,ue=l.getProjection(),we=J?J.getAtTileOffsetFunc(pe,this.transform.center.lat,this.transform.worldSize,ue):null,Se=new a.Point(_.tileAnchorX,_.tileAnchorY);let{x:$e,y:Ve,z:Ue}=ue.projectTilePoint(Se.x,Se.y,pe.canonical);if(we){const[St,Wt,zt]=we(Se);$e+=St,Ve+=Wt,Ue+=zt}const Qe=ue.name==="globe",Je=this.projectAndGetPerspectiveRatio(I,$e,Ve,Ue,pe,Qe||!!J||this.transform.pitch>0,ue),{perspectiveRatio:dt}=Je,Ut=(Y?C/dt:C*dt)/a.ONE_EM,at=Hi($e,Ve,Ue,O),kt=Je.signedDistanceFromCamera>0?Op(Ut,w,_.lineOffsetX*Ut,_.lineOffsetY*Ut,!1,at,Se,_,x,O,{},J&&!Y?we:null,Y&&!!J,ue,pe,Y):null;let ft=!1,jt=!1,ut=!0;if(kt&&!Je.occluded){const St=.5*de*dt+fe,Wt=new a.Point(-100,-100),zt=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),Ht=new $i,{first:zn,last:Qn}=kt,Sn=zn.path.length;let Gn=[];for(let Mn=Sn-1;Mn>=1;Mn--)Gn.push(zn.path[Mn]);for(let Mn=1;Mn<Qn.path.length;Mn++)Gn.push(Qn.path[Mn]);const Er=2.5*St;j&&(Gn=Gn.map(([Mn,Fr,Vr],Wr)=>(we&&!Qe&&(Vr=we(Wr<Sn-1?zn.tilePath[Sn-1-Wr]:Qn.tilePath[Wr-Sn+2])[2]),Hi(Mn,Fr,Vr,j))),Gn.some(Mn=>Mn[3]<=0)&&(Gn=[]));let yr=[];if(Gn.length>0){let Mn=1/0,Fr=-1/0,Vr=1/0,Wr=-1/0;for(const Hr of Gn)Mn=Math.min(Mn,Hr[0]),Vr=Math.min(Vr,Hr[1]),Fr=Math.max(Fr,Hr[0]),Wr=Math.max(Wr,Hr[1]);Fr>=Wt.x&&Mn<=zt.x&&Wr>=Wt.y&&Vr<=zt.y&&(yr=[Gn.map(Hr=>new a.Point(Hr[0],Hr[1]))],(Mn<Wt.x||Fr>zt.x||Vr<Wt.y||Wr>zt.y)&&(yr=a.clipLine(yr,Wt.x,Wt.y,zt.x,zt.y)))}for(const Mn of yr){Ht.reset(Mn,.25*St);let Fr=0;Fr=Ht.length<=.5*St?1:Math.ceil(Ht.paddedLength/Er)+1;for(let Vr=0;Vr<Fr;Vr++){const Wr=Vr/Math.max(Fr-1,1),Hr=Ht.lerp(Wr),Go=Hr.x+xi,wo=Hr.y+xi;ge.push(Go,wo,St,0);const es=Go-St,Ks=wo-St,gi=Go+St,qr=wo+St;if(ut=ut&&this.isOffscreen(es,Ks,gi,qr),jt=jt||this.isInsideGrid(es,Ks,gi,qr),!h&&this.grid.hitTestCircle(Go,wo,St,se)&&(ft=!0,!B))return{circles:[],offscreen:!1,collisionDetected:ft,occluded:!1}}}}return{circles:!B&&ft||!jt?[]:ge,offscreen:ut,collisionDetected:ft,occluded:Je.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let _=1/0,x=1/0,w=-1/0,C=-1/0;for(const B of l){const Y=new a.Point(B.x+xi,B.y+xi);_=Math.min(_,Y.x),x=Math.min(x,Y.y),w=Math.max(w,Y.x),C=Math.max(C,Y.y),h.push(Y)}const I=this.grid.query(_,x,w,C).concat(this.ignoredGrid.query(_,x,w,C)),O={},j={};for(const B of I){const Y=B.key;if(O[Y.bucketInstanceId]===void 0&&(O[Y.bucketInstanceId]={}),O[Y.bucketInstanceId][Y.featureIndex])continue;const se=[new a.Point(B.x1,B.y1),new a.Point(B.x2,B.y1),new a.Point(B.x2,B.y2),new a.Point(B.x1,B.y2)];a.polygonIntersectsPolygon(h,se)&&(O[Y.bucketInstanceId][Y.featureIndex]=!0,j[Y.bucketInstanceId]===void 0&&(j[Y.bucketInstanceId]=[]),j[Y.bucketInstanceId].push(Y.featureIndex))}return j}insertCollisionBox(l,h,_,x,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:x,collisionGroupID:w},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,h,_,x,w){const C=h?this.ignoredGrid:this.grid,I={bucketInstanceId:_,featureIndex:x,collisionGroupID:w};for(let O=0;O<l.length;O+=4)C.insertCircle(I,l[O],l[O+1],l[O+2])}projectAndGetPerspectiveRatio(l,h,_,x,w,C,I){const O=[h,_,x,1];let j=!1;x||this.transform.pitch>0?(a.transformMat4$1(O,O,l),this.fogState&&w&&I.name!=="globe"&&(j=function(se,de,fe,pe,ge,J){const ue=J.calculateFogTileMatrix(ge),we=[de,fe,pe];return a.transformMat4(we,we,ue),rt(se,we,J.pitch,J._fov)}(this.fogState,h,_,x,w.toUnwrapped(),this.transform)>.9)):fr(O,O,l);const B=O[3];return{point:new a.Point((O[0]/B+1)/2*this.transform.width+xi,(-O[1]/B+1)/2*this.transform.height+xi),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(I)/B*.5,1.5),signedDistanceFromCamera:B,occluded:C&&O[2]>B||j}}isOffscreen(l,h,_,x){return _<xi||l>=this.screenRightBoundary||x<xi||h>this.screenBottomBoundary}isInsideGrid(l,h,_,x){return _>=0&&l<this.gridRightBoundary&&x>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const l=a.identity([]);return a.translate(l,l,[-100,-100,0]),l}}function Ba(m,l,h){const _=l.createTileMatrix(m,m.worldSize,h.toUnwrapped());return a.multiply(new Float32Array(16),m.projMatrix,_)}function ha(m,l,h){if(l.projection.name===h.projection.name)return m.projMatrix;const _=h.clone();return _.setProjection(l.projection),Ba(_,l.getProjection(),m)}function li(m,l,h){return l.name===h.projection.name?m.projMatrix:Ba(h,l,m)}class qs{constructor(l,h,_,x){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):x&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Do{constructor(l,h,_,x,w,C=!1){this.text=new qs(l?l.text:null,h,_,w),this.icon=new qs(l?l.icon:null,h,x,w),this.clipped=C}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pl{constructor(l,h,_,x=!1){this.text=l,this.icon=h,this.skipFade=_,this.clipped=x}}class nu{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Il{constructor(l,h,_,x,w){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=_,this.bucketIndex=x,this.tileID=w}}class ph{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:_=>_.collisionGroupID===h}}return this.collisionGroups[l]}}function Al(m,l,h,_,x){const{horizontalAlign:w,verticalAlign:C}=a.getAnchorAlignment(m),I=-(w-.5)*l,O=-(C-.5)*h,j=a.evaluateVariableOffset(m,_);return new a.Point(I+j[0]*x,O+j[1]*x)}function dc(m,l,h,_,x){const w=new a.Point(m,l);return h&&w._rotate(_?x:-x),w}class ru{constructor(l,h,_,x,w){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new uc(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new ph(_),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,h,_,x){const w=_.getBucket(h),C=_.latestFeatureIndex;if(!w||!C||h.id!==w.layerIds[0])return;const I=w.layers[0].layout,O=_.collisionBoxArray,j=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),B=_.tileSize/a.EXTENT,Y=_.tileID.toUnwrapped();this.transform.setProjection(w.projection);const se=(de=_.tileID,fe=w.getProjection(),pe=this.transform,fe.name===this.projection?pe.calculateProjMatrix(de.toUnwrapped()):Ba(pe,fe,de));var de,fe,pe;const ge=I.get("text-pitch-alignment")==="map",J=I.get("text-rotation-alignment")==="map";h.compileFilter();const ue=h.dynamicFilter(),we=h.dynamicFilterNeedsFeature(),Se=this.transform.calculatePixelsToTileUnitsMatrix(_),$e=da(se,_.tileID.canonical,ge,J,this.transform,w.getProjection(),Se);let Ve=null;if(ge){const Je=Qr(se,_.tileID.canonical,ge,J,this.transform,w.getProjection(),Se);Ve=a.multiply([],this.transform.labelPlaneMatrix,Je)}let Ue=null;ue&&_.latestFeatureIndex&&(Ue={unwrappedTileID:Y,dynamicFilter:ue,dynamicFilterNeedsFeature:we,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Il(w.bucketInstanceId,C,w.sourceLayerIndex,w.index,_.tileID);const Qe={bucket:w,layout:I,posMatrix:se,textLabelPlaneMatrix:$e,labelToScreenMatrix:Ve,clippingData:Ue,scale:j,textPixelRatio:B,holdingForFade:_.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:a.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(x)for(const Je of w.sortKeyRanges){const{sortKey:dt,symbolInstanceStart:Ut,symbolInstanceEnd:at}=Je;l.push({sortKey:dt,symbolInstanceStart:Ut,symbolInstanceEnd:at,parameters:Qe})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Qe})}attemptAnchorPlacement(l,h,_,x,w,C,I,O,j,B,Y,se,de,fe,pe,ge,J,ue){const{textOffset0:we,textOffset1:Se,crossTileID:$e}=se,Ve=[we,Se],Ue=Al(l,_,x,Ve,w),Qe=this.collisionIndex.placeCollisionBox(fe,w,h,dc(Ue.x,Ue.y,C,I,this.transform.angle),Y,O,j,B.predicate);if(ge){const Je=fe.getSymbolInstanceIconSize(ue,this.transform.zoom,se.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(fe,Je,ge,dc(Ue.x,Ue.y,C,I,this.transform.angle),Y,O,j,B.predicate).box.length===0)return}if(Qe.box.length>0){let Je;return this.prevPlacement&&this.prevPlacement.variableOffsets[$e]&&this.prevPlacement.placements[$e]&&this.prevPlacement.placements[$e].text&&(Je=this.prevPlacement.variableOffsets[$e].anchor),this.variableOffsets[$e]={textOffset:Ve,width:_,height:x,anchor:l,textScale:w,prevAnchor:Je},this.markUsedJustification(fe,l,se,pe),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,pe,se),this.placedOrientations[$e]=pe),{shift:Ue,placedGlyphBoxes:Qe}}}placeLayerBucketPart(l,h,_,x){const{bucket:w,layout:C,posMatrix:I,textLabelPlaneMatrix:O,labelToScreenMatrix:j,clippingData:B,textPixelRatio:Y,holdingForFade:se,collisionBoxArray:de,partiallyEvaluatedTextSize:fe,partiallyEvaluatedIconSize:pe,collisionGroup:ge}=l.parameters,J=C.get("text-optional"),ue=C.get("icon-optional"),we=C.get("text-allow-overlap"),Se=C.get("icon-allow-overlap"),$e=C.get("text-rotation-alignment")==="map",Ve=C.get("text-pitch-alignment")==="map",Ue=C.get("icon-text-fit")!=="none",Qe=C.get("symbol-z-order")==="viewport-y";this.transform.setProjection(w.projection);let Je=we&&(Se||!w.hasIconData()||ue),dt=Se&&(we||!w.hasTextData()||J);!w.collisionArrays&&de&&w.deserializeCollisionBoxes(de),_&&x&&w.updateCollisionDebugBuffers(this.transform.zoom,de);const Ut=(at,kt,ft)=>{const{crossTileID:jt,numVerticalGlyphVertices:ut}=at;if(B){const gi={zoom:this.transform.zoom,pitch:this.transform.pitch};let qr=null;if(B.dynamicFilterNeedsFeature){const Or=this.retainedQueryData[w.bucketInstanceId];qr=B.featureIndex.loadFeature({featureIndex:at.featureIndex,bucketIndex:Or.bucketIndex,sourceLayerIndex:Or.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,B.dynamicFilter)(gi,qr,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new a.Point(at.tileAnchorX,at.tileAnchorY),this.transform.calculateDistanceTileData(B.unwrappedTileID)))return this.placements[jt]=new Pl(!1,!1,!1,!0),void h.add(jt)}if(h.has(jt))return;if(se)return void(this.placements[jt]=new Pl(!1,!1,!1));let St=!1,Wt=!1,zt=!0,Ht=!1,zn=!1,Qn=null,Sn={box:null,offscreen:null,occluded:null},Gn={box:null,offscreen:null,occluded:null},Er=null,yr=null,Mn=null,Fr=0,Vr=0,Wr=0;ft.textFeatureIndex?Fr=ft.textFeatureIndex:at.useRuntimeCollisionCircles&&(Fr=at.featureIndex),ft.verticalTextFeatureIndex&&(Vr=ft.verticalTextFeatureIndex);const Hr=gi=>{gi.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const qr=this.transform.elevation;(qr||gi.elevation)&&(gi.elevation=qr?qr.getAtTileOffset(gi.tileID,gi.tileAnchorX,gi.tileAnchorY):0)},Go=ft.textBox;if(Go){Hr(Go);const gi=Or=>{let Gi=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Or&&this.prevPlacement){const oa=this.prevPlacement.placedOrientations[jt];oa&&(this.placedOrientations[jt]=oa,Gi=oa,this.markUsedOrientation(w,Gi,at))}return Gi},qr=(Or,Gi)=>{if(w.allowVerticalPlacement&&ut>0&&ft.verticalTextBox){for(const oa of w.writingModes)if(oa===a.WritingMode.vertical?(Sn=Gi(),Gn=Sn):Sn=Or(),Sn&&Sn.box&&Sn.box.length)break}else Sn=Or()};if(C.get("text-variable-anchor")){let Or=C.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[jt]){const hi=this.prevPlacement.variableOffsets[jt];Or.indexOf(hi.anchor)>0&&(Or=Or.filter(_a=>_a!==hi.anchor),Or.unshift(hi.anchor))}const Gi=(hi,_a,Kp)=>{const fu=w.getSymbolInstanceTextSize(fe,at,this.transform.zoom,kt),Ih=(hi.x2-hi.x1)*fu+2*hi.padding,Ll=(hi.y2-hi.y1)*fu+2*hi.padding,wc=Ue&&!Se?_a:null;wc&&Hr(wc);let mu={box:[],offscreen:!1,occluded:!1};const Yp=we?2*Or.length:Or.length;for(let Ah=0;Ah<Yp;++Ah){const Sm=this.attemptAnchorPlacement(Or[Ah%Or.length],hi,Ih,Ll,fu,$e,Ve,Y,I,ge,Ah>=Or.length,at,kt,w,Kp,wc,fe,pe);if(Sm&&(mu=Sm.placedGlyphBoxes,mu&&mu.box&&mu.box.length)){St=!0,Qn=Sm.shift;break}}return mu};qr(()=>Gi(Go,ft.iconBox,a.WritingMode.horizontal),()=>{const hi=ft.verticalTextBox;return hi&&Hr(hi),w.allowVerticalPlacement&&!(Sn&&Sn.box&&Sn.box.length)&&ut>0&&hi?Gi(hi,ft.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Sn&&(St=Sn.box,zt=Sn.offscreen,Ht=Sn.occluded);const oa=gi(!(!Sn||!Sn.box));if(!St&&this.prevPlacement){const hi=this.prevPlacement.variableOffsets[jt];hi&&(this.variableOffsets[jt]=hi,this.markUsedJustification(w,hi.anchor,at,oa))}}else{const Or=(Gi,oa)=>{const hi=w.getSymbolInstanceTextSize(fe,at,this.transform.zoom,kt),_a=this.collisionIndex.placeCollisionBox(w,hi,Gi,new a.Point(0,0),we,Y,I,ge.predicate);return _a&&_a.box&&_a.box.length&&(this.markUsedOrientation(w,oa,at),this.placedOrientations[jt]=oa),_a};qr(()=>Or(Go,a.WritingMode.horizontal),()=>{const Gi=ft.verticalTextBox;return w.allowVerticalPlacement&&ut>0&&Gi?(Hr(Gi),Or(Gi,a.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),gi(!!(Sn&&Sn.box&&Sn.box.length))}}if(Er=Sn,St=Er&&Er.box&&Er.box.length>0,zt=Er&&Er.offscreen,Ht=Er&&Er.occluded,at.useRuntimeCollisionCircles){const gi=w.text.placedSymbolArray.get(at.centerJustifiedTextSymbolIndex>=0?at.centerJustifiedTextSymbolIndex:at.verticalPlacedTextSymbolIndex),qr=a.evaluateSizeForFeature(w.textSizeData,fe,gi),Or=C.get("text-padding");yr=this.collisionIndex.placeCollisionCircles(w,we,gi,w.lineVertexArray,w.glyphOffsetArray,qr,I,O,j,_,Ve,ge.predicate,at.collisionCircleDiameter*qr/a.ONE_EM,Or,this.retainedQueryData[w.bucketInstanceId].tileID),St=we||yr.circles.length>0&&!yr.collisionDetected,zt=zt&&yr.offscreen,Ht=yr.occluded}if(ft.iconFeatureIndex&&(Wr=ft.iconFeatureIndex),ft.iconBox){const gi=qr=>{Hr(qr);const Or=Ue&&Qn?dc(Qn.x,Qn.y,$e,Ve,this.transform.angle):new a.Point(0,0),Gi=w.getSymbolInstanceIconSize(pe,this.transform.zoom,at.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,Gi,qr,Or,Se,Y,I,ge.predicate)};Gn&&Gn.box&&Gn.box.length&&ft.verticalIconBox?(Mn=gi(ft.verticalIconBox),Wt=Mn.box.length>0):(Mn=gi(ft.iconBox),Wt=Mn.box.length>0),zt=zt&&Mn.offscreen,zn=Mn.occluded}const wo=J||at.numHorizontalGlyphVertices===0&&ut===0,es=ue||at.numIconVertices===0;if(wo||es?es?wo||(Wt=Wt&&St):St=Wt&&St:Wt=St=Wt&&St,St&&Er&&Er.box&&this.collisionIndex.insertCollisionBox(Er.box,C.get("text-ignore-placement"),w.bucketInstanceId,Gn&&Gn.box&&Vr?Vr:Fr,ge.ID),Wt&&Mn&&this.collisionIndex.insertCollisionBox(Mn.box,C.get("icon-ignore-placement"),w.bucketInstanceId,Wr,ge.ID),yr&&(St&&this.collisionIndex.insertCollisionCircles(yr.circles,C.get("text-ignore-placement"),w.bucketInstanceId,Fr,ge.ID),_)){const gi=w.bucketInstanceId;let qr=this.collisionCircleArrays[gi];qr===void 0&&(qr=this.collisionCircleArrays[gi]=new nu);for(let Or=0;Or<yr.circles.length;Or+=4)qr.circles.push(yr.circles[Or+0]),qr.circles.push(yr.circles[Or+1]),qr.circles.push(yr.circles[Or+2]),qr.circles.push(yr.collisionDetected?1:0)}const Ks=w.projection.name!=="globe";Je=Je&&(Ks||!Ht),dt=dt&&(Ks||!zn),this.placements[jt]=new Pl(St||Je,Wt||dt,zt||w.justReloaded),h.add(jt)};if(Qe){const at=w.getSortedSymbolIndexes(this.transform.angle);for(let kt=at.length-1;kt>=0;--kt){const ft=at[kt];Ut(w.symbolInstances.get(ft),ft,w.collisionArrays[ft])}}else for(let at=l.symbolInstanceStart;at<l.symbolInstanceEnd;at++)Ut(w.symbolInstances.get(at),at,w.collisionArrays[at]);if(_&&w.bucketInstanceId in this.collisionCircleArrays){const at=this.collisionCircleArrays[w.bucketInstanceId];a.invert(at.invProjMatrix,I),at.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,h,_,x){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:C,rightJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:O,crossTileID:j}=_,B=a.getAnchorJustification(h),Y=x===a.WritingMode.vertical?O:B==="left"?w:B==="center"?C:B==="right"?I:-1;w>=0&&(l.text.placedSymbolArray.get(w).crossTileID=Y>=0&&w!==Y?0:j),C>=0&&(l.text.placedSymbolArray.get(C).crossTileID=Y>=0&&C!==Y?0:j),I>=0&&(l.text.placedSymbolArray.get(I).crossTileID=Y>=0&&I!==Y?0:j),O>=0&&(l.text.placedSymbolArray.get(O).crossTileID=Y>=0&&O!==Y?0:j)}markUsedOrientation(l,h,_){const x=h===a.WritingMode.horizontal||h===a.WritingMode.horizontalOnly?h:0,w=h===a.WritingMode.vertical?h:0,{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:j}=_,B=l.text.placedSymbolArray;C>=0&&(B.get(C).placedOrientation=x),I>=0&&(B.get(I).placedOrientation=x),O>=0&&(B.get(O).placedOrientation=x),j>=0&&(B.get(j).placedOrientation=w)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let _=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const x=h?h.symbolFadeChange(l):1,w=h?h.opacities:{},C=h?h.variableOffsets:{},I=h?h.placedOrientations:{};for(const O in this.placements){const j=this.placements[O],B=w[O];B?(this.opacities[O]=new Do(B,x,j.text,j.icon,null,j.clipped),_=_||j.text!==B.text.placed||j.icon!==B.icon.placed):(this.opacities[O]=new Do(null,x,j.text,j.icon,j.skipFade,j.clipped),_=_||j.text||j.icon)}for(const O in w){const j=w[O];if(!this.opacities[O]){const B=new Do(j,x,!1,!1);B.isHidden()||(this.opacities[O]=B,_=_||j.text.placed||j.icon.placed)}}for(const O in C)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=C[O]);for(const O in I)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=I[O]);_?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)}updateLayerOpacities(l,h){const _=new Set;for(const x of h){const w=x.getBucket(l);w&&x.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,_,x.collisionBoxArray)}}updateBucketOpacities(l,h,_){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const x=l.layers[0].layout,w=!!l.layers[0].dynamicFilter(),C=new Do(null,0,!1,!1,!0),I=x.get("text-allow-overlap"),O=x.get("icon-allow-overlap"),j=x.get("text-variable-anchor"),B=x.get("text-rotation-alignment")==="map",Y=x.get("text-pitch-alignment")==="map",se=x.get("icon-text-fit")!=="none",de=new Do(null,0,I&&(O||!l.hasIconData()||x.get("icon-optional")),O&&(I||!l.hasTextData()||x.get("text-optional")),!0);!l.collisionArrays&&_&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(_);const fe=(ge,J,ue)=>{for(let we=0;we<J/4;we++)ge.opacityVertexArray.emplaceBack(ue)};let pe=0;for(let ge=0;ge<l.symbolInstances.length;ge++){const J=l.symbolInstances.get(ge),{numHorizontalGlyphVertices:ue,numVerticalGlyphVertices:we,crossTileID:Se,numIconVertices:$e}=J,Ve=h.has(Se);let Ue=this.opacities[Se];Ve?Ue=C:Ue||(Ue=de,this.opacities[Se]=Ue),h.add(Se);const Qe=ue>0||we>0,Je=$e>0,dt=this.placedOrientations[Se],Ut=dt===a.WritingMode.vertical,at=dt===a.WritingMode.horizontal||dt===a.WritingMode.horizontalOnly;if(!Qe&&!Je||Ue.isHidden()||pe++,Qe){const kt=ou(Ue.text);fe(l.text,ue,Ut?bi:kt),fe(l.text,we,at?bi:kt);const ft=Ue.text.isHidden(),{leftJustifiedTextSymbolIndex:jt,centerJustifiedTextSymbolIndex:ut,rightJustifiedTextSymbolIndex:St,verticalPlacedTextSymbolIndex:Wt}=J,zt=l.text.placedSymbolArray,Ht=ft||Ut?1:0;jt>=0&&(zt.get(jt).hidden=Ht),ut>=0&&(zt.get(ut).hidden=Ht),St>=0&&(zt.get(St).hidden=Ht),Wt>=0&&(zt.get(Wt).hidden=ft||at?1:0);const zn=this.variableOffsets[Se];zn&&this.markUsedJustification(l,zn.anchor,J,dt);const Qn=this.placedOrientations[Se];Qn&&(this.markUsedJustification(l,"left",J,Qn),this.markUsedOrientation(l,Qn,J))}if(Je){const kt=ou(Ue.icon),{placedIconSymbolIndex:ft,verticalPlacedIconSymbolIndex:jt}=J,ut=l.icon.placedSymbolArray,St=Ue.icon.isHidden()?1:0;ft>=0&&(fe(l.icon,$e,Ut?bi:kt),ut.get(ft).hidden=St),jt>=0&&(fe(l.icon,J.numVerticalIconVertices,at?bi:kt),ut.get(jt).hidden=St)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const kt=l.collisionArrays[ge];if(kt){let ft=new a.Point(0,0),jt=!0;if(kt.textBox||kt.verticalTextBox){if(j){const St=this.variableOffsets[Se];St?(ft=Al(St.anchor,St.width,St.height,St.textOffset,St.textScale),B&&ft._rotate(Y?this.transform.angle:-this.transform.angle)):jt=!1}w&&(jt=!Ue.clipped),kt.textBox&&hc(l.textCollisionBox.collisionVertexArray,Ue.text.placed,!jt||Ut,ft.x,ft.y),kt.verticalTextBox&&hc(l.textCollisionBox.collisionVertexArray,Ue.text.placed,!jt||at,ft.x,ft.y)}const ut=jt&&!!(!at&&kt.verticalIconBox);kt.iconBox&&hc(l.iconCollisionBox.collisionVertexArray,Ue.icon.placed,ut,se?ft.x:0,se?ft.y:0),kt.verticalIconBox&&hc(l.iconCollisionBox.collisionVertexArray,Ue.icon.placed,!ut,se?ft.x:0,se?ft.y:0)}}}if(l.fullyClipped=pe===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const ge=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ge.invProjMatrix,l.placementViewportMatrix=ge.viewportMatrix,l.collisionCircleArray=ge.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,h){const _=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*_>l}setStale(){this.stale=!0}}function hc(m,l,h,_,x){m.emplaceBack(l?1:0,h?1:0,_||0,x||0),m.emplaceBack(l?1:0,h?1:0,_||0,x||0),m.emplaceBack(l?1:0,h?1:0,_||0,x||0),m.emplaceBack(l?1:0,h?1:0,_||0,x||0)}const Ro=Math.pow(2,25),Ii=Math.pow(2,24),fh=Math.pow(2,17),iu=Math.pow(2,16),$o=Math.pow(2,9),pa=Math.pow(2,8),Lp=Math.pow(2,1);function ou(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const l=m.placed?1:0,h=Math.floor(127*m.opacity);return h*Ro+l*Ii+h*fh+l*iu+h*$o+l*pa+h*Lp+l}const bi=0;class au{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,h,_,x,w){const C=this._bucketParts;for(;this._currentTileIndex<l.length;)if(h.getBucketParts(C,x,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((I,O)=>I.sortKey-O.sortKey));this._currentPartIndex<C.length;){const I=C[this._currentPartIndex];if(h.placeLayerBucketPart(I,this._seenCrossTileIDs,_,I.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class mh{constructor(l,h,_,x,w,C,I,O){this.placement=new ru(l,w,C,I,O),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(l,h,_){const x=a.exported.now(),w=()=>{const C=a.exported.now()-x;return!this._forceFullPlacement&&C>2};for(;this._currentPlacementIndex>=0;){const C=h[l[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=I)&&(!C.maxzoom||C.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new au(C)),this._inProgressLayer.continuePlacement(_[C.source],this.placement,this._showCollisionBoxes,C,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Gs=512/a.EXTENT/2;class qi{constructor(l,h,_){this.tileID=l,this.bucketInstanceId=_,this.index=new a.KDBush(h.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const x=l.canonical.x*a.EXTENT,w=l.canonical.y*a.EXTENT;for(let C=0;C<h.length;C++){const{key:I,crossTileID:O,tileAnchorX:j,tileAnchorY:B}=h.get(C),Y=Math.floor((x+j)*Gs),se=Math.floor((w+B)*Gs);this.index.add(Y,se),this.keys.push(I),this.crossTileIDs.push(O)}this.index.finish()}findMatches(l,h,_){const x=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),w=Gs/Math.pow(2,h.canonical.z-this.tileID.canonical.z),C=h.canonical.x*a.EXTENT,I=h.canonical.y*a.EXTENT;for(let O=0;O<l.length;O++){const j=l.get(O);if(j.crossTileID)continue;const{key:B,tileAnchorX:Y,tileAnchorY:se}=j,de=Math.floor((C+Y)*w),fe=Math.floor((I+se)*w),pe=this.index.range(de-x,fe-x,de+x,fe+x);for(const ge of pe){const J=this.crossTileIDs[ge];if(this.keys[ge]===B&&!_.has(J)){_.add(J),j.crossTileID=J;break}}}}}class Ku{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class su{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const h=Math.round((l-this.lng)/360);if(h!==0)for(const _ in this.indexes){const x=this.indexes[_],w={};for(const C in x){const I=x[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+h),w[I.tileID.key]=I}this.indexes[_]=w}this.lng=l}addBucket(l,h,_){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let w=0;w<h.symbolInstances.length;w++)h.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const x=this.usedCrossTileIDs[l.overscaledZ];for(const w in this.indexes){const C=this.indexes[w];if(Number(w)>l.overscaledZ)for(const I in C){const O=C[I];O.tileID.isChildOf(l)&&O.findMatches(h.symbolInstances,l,x)}else{const I=C[l.scaledTo(Number(w)).key];I&&I.findMatches(h.symbolInstances,l,x)}}for(let w=0;w<h.symbolInstances.length;w++){const C=h.symbolInstances.get(w);C.crossTileID||(C.crossTileID=_.generate(),x.add(C.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new qi(l,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(l,h){for(const _ of h.crossTileIDs)this.usedCrossTileIDs[l].delete(_)}removeStaleBuckets(l){let h=!1;for(const _ in this.indexes){const x=this.indexes[_];for(const w in x)l[x[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,x[w]),delete x[w],h=!0)}return h}}class Ka{constructor(){this.layerIndexes={},this.crossTileIDs=new Ku,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,h,_,x){let w=this.layerIndexes[l.id];w===void 0&&(w=this.layerIndexes[l.id]=new su);let C=!1;const I={};x.name!=="globe"&&w.handleWrapJump(_);for(const O of h){const j=O.getBucket(l);j&&l.id===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(O.tileID,j,this.crossTileIDs)&&(C=!0),I[j.bucketInstanceId]=!0)}return w.removeStaleBuckets(I)&&(C=!0),C}pruneUnusedLayers(l){const h={};l.forEach(_=>{h[_]=!0});for(const _ in this.layerIndexes)h[_]||delete this.layerIndexes[_]}}const ys=(m,l)=>a.emitValidationErrors(m,l&&l.filter(h=>h.identifier!=="source.canvas")),pc=a.pick(Vn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),om=a.pick(Vn,["setCenter","setZoom","setBearing","setPitch"]),gh={version:8,layers:[],sources:{}},fc={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Uo extends a.Evented{constructor(l,h={}){super(),this.map=l,this.dispatcher=new it(ln(),this),this.imageManager=new ot,this.imageManager.setEventedParent(this),this.glyphManager=new a.GlyphManager(l._requestManager,h.localFontFamily?a.LocalGlyphMode.all:h.localIdeographFontFamily?a.LocalGlyphMode.ideographs:a.LocalGlyphMode.none,h.localFontFamily||h.localIdeographFontFamily),this.crossTileSymbolIndex=new Ka,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const _=this;this._rtlTextPluginCallback=Uo.registerForPluginStateChange(x=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(w,C)=>{if(a.triggerPluginCompletionEvent(w),C&&C.every(I=>I))for(const I in _._sourceCaches){const O=_._sourceCaches[I],j=O.getSource().type;j!=="vector"&&j!=="geojson"||O.reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const w=this.getSource(x.sourceId);if(w&&w.vectorLayerIds)for(const C in this._layers){const I=this._layers[C];I.source===w.id&&this._validateLayer(I)}})}loadURL(l,h={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const _=typeof h.validate=="boolean"?h.validate:!a.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,h.accessToken);const x=this.map._requestManager.transformRequest(l,a.ResourceType.Style);this._request=a.getJSON(x,(w,C)=>{this._request=null,w?this.fire(new a.ErrorEvent(w)):C&&this._load(C,_)})}loadJSON(l,h={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(l,h.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(gh,!1)}_updateLayerCount(l,h){const _=h?1:-1;l.is3D()&&(this._num3DLayers+=_),l.type==="circle"&&(this._numCircleLayers+=_),l.type==="symbol"&&(this._numSymbolLayers+=_)}_load(l,h){if(h&&ys(this,a.validateStyle(l)))return;this._loaded=!0,this.stylesheet=a.clone$1(l),this._updateMapProjection();for(const x in l.sources)this.addSource(x,l.sources[x],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const _=Pr(this.stylesheet.layers);this._order=_.map(x=>x.id),this._layers={},this._serializedLayers={};for(const x of _){const w=a.createStyleLayer(x);w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ze(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(h,_,x){let w,C,I;const O=a.exported.devicePixelRatio>1?"@2x":"";let j=a.getJSON(_.transformRequest(_.normalizeSpriteURL(h,O,".json"),a.ResourceType.SpriteJSON),(se,de)=>{j=null,I||(I=se,w=de,Y())}),B=a.getImage(_.transformRequest(_.normalizeSpriteURL(h,O,".png"),a.ResourceType.SpriteImage),(se,de)=>{B=null,I||(I=se,C=de,Y())});function Y(){if(I)x(I);else if(w&&C){const se=a.exported.getImageData(C),de={};for(const fe in w){const{width:pe,height:ge,x:J,y:ue,sdf:we,pixelRatio:Se,stretchX:$e,stretchY:Ve,content:Ue}=w[fe],Qe=new a.RGBAImage({width:pe,height:ge});a.RGBAImage.copy(se,Qe,{x:J,y:ue},{x:0,y:0},{width:pe,height:ge}),de[fe]={data:Qe,pixelRatio:Se,sdf:we,stretchX:$e,stretchY:Ve,content:Ue}}x(null,de)}}return{cancel(){j&&(j.cancel(),j=null),B&&(B.cancel(),B=null)}}}(l,this.map._requestManager,(h,_)=>{if(this._spriteRequest=null,h)this.fire(new a.ErrorEvent(h));else if(_)for(const x in _)this.imageManager.addImage(x,_[x]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(l){const h=this.getSource(l.source);if(!h)return;const _=l.sourceLayer;_&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(_)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${h.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const h=[];for(const _ of l){const x=this._layers[_];x.type!=="custom"&&h.push(x.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&(typeof l.isLayerDraped=="function"?l.isLayerDraped():fc[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const h=this._changed;if(this._changed){const x=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(x.length||w.length)&&this._updateWorkerLayers(x,w);for(const C in this._updatedSources){const I=this._updatedSources[C];I==="reload"?this._reloadSource(C):I==="clear"&&this._clearSource(C)}this._updateTilesForChangedImages();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const _={};for(const x in this._sourceCaches){const w=this._sourceCaches[x];_[x]=w.used,w.used=!1}for(const x of this._order){const w=this._layers[x];if(w.recalculate(l,this._availableImages),!w.isHidden(l.zoom)){const I=this._getLayerSourceCache(w);I&&(I.used=!0)}const C=this.map.painter;if(C){const I=w.getProgramIds();if(!I)continue;const O=w.getProgramConfiguration(l.zoom);for(const j of I)C.useProgram(j,O)}}for(const x in _){const w=this._sourceCaches[x];_[x]!==w.used&&w.getSource().fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),h&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),ys(this,a.validateStyle(l)))return!1;(l=a.clone$1(l)).layers=Pr(l.layers);const h=function(x,w){if(!x)return[{command:Vn.setStyle,args:[w]}];let C=[];try{if(!v(x.version,w.version))return[{command:Vn.setStyle,args:[w]}];v(x.center,w.center)||C.push({command:Vn.setCenter,args:[w.center]}),v(x.zoom,w.zoom)||C.push({command:Vn.setZoom,args:[w.zoom]}),v(x.bearing,w.bearing)||C.push({command:Vn.setBearing,args:[w.bearing]}),v(x.pitch,w.pitch)||C.push({command:Vn.setPitch,args:[w.pitch]}),v(x.sprite,w.sprite)||C.push({command:Vn.setSprite,args:[w.sprite]}),v(x.glyphs,w.glyphs)||C.push({command:Vn.setGlyphs,args:[w.glyphs]}),v(x.transition,w.transition)||C.push({command:Vn.setTransition,args:[w.transition]}),v(x.light,w.light)||C.push({command:Vn.setLight,args:[w.light]}),v(x.fog,w.fog)||C.push({command:Vn.setFog,args:[w.fog]}),v(x.projection,w.projection)||C.push({command:Vn.setProjection,args:[w.projection]});const I={},O=[];(function(Y,se,de,fe){let pe;for(pe in se=se||{},Y=Y||{})Y.hasOwnProperty(pe)&&(se.hasOwnProperty(pe)||po(pe,de,fe));for(pe in se){if(!se.hasOwnProperty(pe))continue;const ge=se[pe];Y.hasOwnProperty(pe)?v(Y[pe],ge)||(Y[pe].type==="geojson"&&ge.type==="geojson"&&ea(Y,se,pe)?de.push({command:Vn.setGeoJSONSourceData,args:[pe,ge.data]}):fo(pe,se,de,fe)):Io(pe,se,de)}})(x.sources,w.sources,O,I);const j=[];x.layers&&x.layers.forEach(Y=>{Y.source&&I[Y.source]?C.push({command:Vn.removeLayer,args:[Y.id]}):j.push(Y)});let B=x.terrain;B&&I[B.source]&&(C.push({command:Vn.setTerrain,args:[void 0]}),B=void 0),C=C.concat(O),v(B,w.terrain)||C.push({command:Vn.setTerrain,args:[w.terrain]}),function(Y,se,de){se=se||[];const fe=(Y=Y||[]).map(ji),pe=se.map(ji),ge=Y.reduce(mo,{}),J=se.reduce(mo,{}),ue=fe.slice(),we=Object.create(null);let Se,$e,Ve,Ue,Qe,Je,dt;for(Se=0,$e=0;Se<fe.length;Se++)Ve=fe[Se],J.hasOwnProperty(Ve)?$e++:(de.push({command:Vn.removeLayer,args:[Ve]}),ue.splice(ue.indexOf(Ve,$e),1));for(Se=0,$e=0;Se<pe.length;Se++)Ve=pe[pe.length-1-Se],ue[ue.length-1-Se]!==Ve&&(ge.hasOwnProperty(Ve)?(de.push({command:Vn.removeLayer,args:[Ve]}),ue.splice(ue.lastIndexOf(Ve,ue.length-$e),1)):$e++,Je=ue[ue.length-Se],de.push({command:Vn.addLayer,args:[J[Ve],Je]}),ue.splice(ue.length-Se,0,Ve),we[Ve]=!0);for(Se=0;Se<pe.length;Se++)if(Ve=pe[Se],Ue=ge[Ve],Qe=J[Ve],!we[Ve]&&!v(Ue,Qe))if(v(Ue.source,Qe.source)&&v(Ue["source-layer"],Qe["source-layer"])&&v(Ue.type,Qe.type)){for(dt in Bi(Ue.layout,Qe.layout,de,Ve,null,Vn.setLayoutProperty),Bi(Ue.paint,Qe.paint,de,Ve,null,Vn.setPaintProperty),v(Ue.filter,Qe.filter)||de.push({command:Vn.setFilter,args:[Ve,Qe.filter]}),v(Ue.minzoom,Qe.minzoom)&&v(Ue.maxzoom,Qe.maxzoom)||de.push({command:Vn.setLayerZoomRange,args:[Ve,Qe.minzoom,Qe.maxzoom]}),Ue)Ue.hasOwnProperty(dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?Bi(Ue[dt],Qe[dt],de,Ve,dt.slice(6),Vn.setPaintProperty):v(Ue[dt],Qe[dt])||de.push({command:Vn.setLayerProperty,args:[Ve,dt,Qe[dt]]}));for(dt in Qe)Qe.hasOwnProperty(dt)&&!Ue.hasOwnProperty(dt)&&dt!=="layout"&&dt!=="paint"&&dt!=="filter"&&dt!=="metadata"&&dt!=="minzoom"&&dt!=="maxzoom"&&(dt.indexOf("paint.")===0?Bi(Ue[dt],Qe[dt],de,Ve,dt.slice(6),Vn.setPaintProperty):v(Ue[dt],Qe[dt])||de.push({command:Vn.setLayerProperty,args:[Ve,dt,Qe[dt]]}))}else de.push({command:Vn.removeLayer,args:[Ve]}),Je=ue[ue.lastIndexOf(Ve)+1],de.push({command:Vn.addLayer,args:[Qe,Je]})}(j,w.layers,C)}catch(I){console.warn("Unable to compute style diff:",I),C=[{command:Vn.setStyle,args:[w]}]}return C}(this.serialize(),l).filter(x=>!(x.command in om));if(h.length===0)return!1;const _=h.filter(x=>!(x.command in pc));if(_.length>0)throw new Error(`Unimplemented: ${_.map(x=>x.command).join(", ")}.`);return h.forEach(x=>{x.command!=="setTransition"&&x.command!=="setProjection"&&this[x.command].apply(this,x.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,h){return this.getImage(l)?this.fire(new a.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,h),this._afterImageUpdated(l),this)}updateImage(l,h){this.imageManager.updateImage(l,h)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new a.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,h,_={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(a.validateSource,`sources.${l}`,h,null,_))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const x=Ln(l,h,this.dispatcher,this);x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:x.serialize(),sourceId:l}));const w=C=>{const I=(C?"symbol:":"other:")+l,O=this._sourceCaches[I]=new a.SourceCache(I,x,C);(C?this._symbolSourceCaches:this._otherSourceCaches)[l]=O,O.style=this,O.onAdd(this.map)};w(!1),h.type!=="vector"&&h.type!=="geojson"||w(!0),x.onAdd&&x.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const h=this.getSource(l);if(!h)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===l)return this.fire(new a.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new a.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const _=this._getSourceCaches(l);for(const x of _)delete this._sourceCaches[x.id],delete this._updatedSources[x.id],x.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,h){this._checkLoaded(),this.getSource(l).setData(h),this._changed=!0}getSource(l){const h=this._getSourceCache(l);return h&&h.getSource()}_getSources(){const l=[];for(const h in this._otherSourceCaches){const _=this._getSourceCache(h);_&&l.push(_.getSource())}return l}addLayer(l,h,_={}){this._checkLoaded();const x=l.id;if(this.getLayer(x))return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${x}" already exists on this map`)));let w;if(l.type==="custom"){if(ys(this,a.validateCustomStyleLayer(l)))return;w=a.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(x,l.source),l=a.clone$1(l),l=a.extend(l,{source:x})),this._validate(a.validateLayer,`layers.${x}`,l,{arrayIndex:-1},_))return;w=a.createStyleLayer(l),this._validateLayer(w),w.setEventedParent(this,{layer:{id:x}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const C=h?this._order.indexOf(h):this._order.length;if(h&&C===-1)return void this.fire(new a.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`)));this._order.splice(C,0,x),this._layerOrderChanged=!0,this._layers[x]=w;const I=this._getLayerSourceCache(w);if(this._removedLayers[x]&&w.source&&I&&w.type!=="custom"){const O=this._removedLayers[x];delete this._removedLayers[x],O.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",I.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,h){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===h)return;const _=this._order.indexOf(l);this._order.splice(_,1);const x=h?this._order.indexOf(h):this._order.length;h&&x===-1?this.fire(new a.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`))):(this._order.splice(x,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const h=this._layers[l];if(!h)return void this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));h.setEventedParent(null),this._updateLayerCount(h,!1);const _=this._order.indexOf(l);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=h,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],h.onRemove&&h.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const h in this._layers)if(this._layers[h].type===l)return!0;return!1}setLayerZoomRange(l,h,_){this._checkLoaded();const x=this.getLayer(l);x?x.minzoom===h&&x.maxzoom===_||(h!=null&&(x.minzoom=h),_!=null&&(x.maxzoom=_),this._updateLayer(x)):this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,h,_={}){this._checkLoaded();const x=this.getLayer(l);if(x){if(!v(x.filter,h))return h==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(a.validateFilter,`layers.${x.id}.filter`,h,{layerType:x.type},_)||(x.filter=a.clone$1(h),this._updateLayer(x)))}else this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const h=this.getLayer(l);return h&&a.clone$1(h.filter)}setLayoutProperty(l,h,_,x={}){this._checkLoaded();const w=this.getLayer(l);w?v(w.getLayoutProperty(h),_)||(w.setLayoutProperty(h,_,x),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,h){const _=this.getLayer(l);if(_)return _.getLayoutProperty(h);this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,h,_,x={}){this._checkLoaded();const w=this.getLayer(l);w?v(w.getPaintProperty(h),_)||(w.setPaintProperty(h,_,x)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,h){const _=this.getLayer(l);return _&&_.getPaintProperty(h)}setFeatureState(l,h){this._checkLoaded();const _=l.source,x=l.sourceLayer,w=this.getSource(_);if(!w)return void this.fire(new a.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const C=w.type;if(C==="geojson"&&x)return void this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(C==="vector"&&!x)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided.")));const I=this._getSourceCaches(_);for(const O of I)O.setFeatureState(x,l.id,h)}removeFeatureState(l,h){this._checkLoaded();const _=l.source,x=this.getSource(_);if(!x)return void this.fire(new a.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const w=x.type,C=w==="vector"?l.sourceLayer:void 0;if(w==="vector"&&!C)return void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const I=this._getSourceCaches(_);for(const O of I)O.removeFeatureState(C,l.id,h)}getFeatureState(l){this._checkLoaded();const h=l.source,_=l.sourceLayer,x=this.getSource(h);if(x){if(x.type!=="vector"||_)return l.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(h)[0].getFeatureState(_,l.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const h in this._sourceCaches){const _=this._sourceCaches[h].getSource();l[_.id]||(l[_.id]=_.serialize())}return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},h=>h!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const h=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&h&&h.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",h.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const h=C=>this._layers[C].type==="fill-extrusion",_={},x=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(h(I)){_[I]=C;for(const O of l){const j=O[I];if(j)for(const B of j)x.push(B)}}}x.sort((C,I)=>I.intersectionZ-C.intersectionZ);const w=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(h(I))for(let O=x.length-1;O>=0;O--){const j=x[O].feature;if(_[j.layer.id]<C)break;w.push(j),x.pop()}else for(const O of l){const j=O[I];if(j)for(const B of j)w.push(B.feature)}}return w}queryRenderedFeatures(l,h,_){h&&h.filter&&this._validate(a.validateFilter,"queryRenderedFeatures.filter",h.filter,null,h);const x={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const O of h.layers){const j=this._layers[O];if(!j)return this.fire(new a.ErrorEvent(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];x[j.source]=!0}}const w=[];h.availableImages=this._availableImages;const C=h&&h.layers?h.layers.some(O=>{const j=this.getLayer(O);return j&&j.is3D()}):this.has3DLayers(),I=Tt.createFromScreenPoints(l,_);for(const O in this._sourceCaches){const j=this._sourceCaches[O].getSource().id;h.layers&&!x[j]||w.push(xr(this._sourceCaches[O],this._layers,this._serializedLayers,I,h,_,C,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(O,j,B,Y,se,de,fe){const pe={},ge=de.queryRenderedSymbols(Y),J=[];for(const ue of Object.keys(ge).map(Number))J.push(fe[ue]);J.sort(Mr);for(const ue of J){const we=ue.featureIndex.lookupSymbolFeatures(ge[ue.bucketInstanceId],j,ue.bucketIndex,ue.sourceLayerIndex,se.filter,se.layers,se.availableImages,O);for(const Se in we){const $e=pe[Se]=pe[Se]||[],Ve=we[Se];Ve.sort((Ue,Qe)=>{const Je=ue.featureSortOrder;if(Je){const dt=Je.indexOf(Ue.featureIndex);return Je.indexOf(Qe.featureIndex)-dt}return Qe.featureIndex-Ue.featureIndex});for(const Ue of Ve)$e.push(Ue)}}for(const ue in pe)pe[ue].forEach(we=>{const Se=we.feature,$e=B(O[ue]);if(!$e)return;const Ve=$e.getFeatureState(Se.layer["source-layer"],Se.id);Se.source=Se.layer.source,Se.layer["source-layer"]&&(Se.sourceLayer=Se.layer["source-layer"]),Se.state=Ve});return pe}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),I.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(l,h){h&&h.filter&&this._validate(a.validateFilter,"querySourceFeatures.filter",h.filter,null,h);const _=this._getSourceCaches(l);let x=[];for(const w of _)x=x.concat(br(w,h));return x}addSourceType(l,h,_){return Uo.getSourceType(l)?_(new Error(`A source type called "${l}" already exists.`)):(Uo.setSourceType(l,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:h.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(l,h={}){this._checkLoaded();const _=this.light.getLight();let x=!1;for(const C in l)if(!v(l[C],_[C])){x=!0;break}if(!x)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,h),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,h=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=l;if(h===1){if(typeof _.source=="object"){const x="terrain-dem-src";this.addSource(x,_.source),_=a.clone$1(_),_=a.extend(_,{source:x})}if(this._validate(a.validateTerrain,"terrain",_))return}if(!this.terrain||this.terrain&&h!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,h)}else{const x=this.terrain,w=x.get();for(const C of Object.keys(a.spec.terrain))!_.hasOwnProperty(C)&&a.spec.terrain[C].default&&(_[C]=a.spec.terrain[C].default);for(const C in _)if(!v(_[C],w[C])){x.set(_),this.stylesheet.terrain=_;const I=this._setTransitionParameters({duration:0});x.updateTransitions(I);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const h=this.fog=new et(l,this.map.transform);this.stylesheet.fog=l;const _=this._setTransitionParameters({duration:0});h.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog,_=h.get();Object.keys(l).length===0&&h.set(l);for(const x in l)if(!v(l[x],_[x])){h.set(l),this.stylesheet.fog=l;const w=this._setTransitionParameters({duration:0});h.updateTransitions(w);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:a.exported.now(),transition:a.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(_=>this.isLayerDraped(this._layers[_])),h=this._order.filter(_=>!this.isLayerDraped(this._layers[_]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...h)}_createTerrain(l,h){const _=this.terrain=new He(l,h);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const x=this._setTransitionParameters({duration:0});_.updateTransitions(x)}_force3DLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="symbol"&&this._updateLayer(h)}}_validate(l,h,_,x,w={}){return(!w||w.validate!==!1)&&ys(this,l.call(a.validateStyle,a.extend({key:h,style:this.serialize(),value:_,styleSpec:a.spec},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const h=this._getSourceCaches(l);for(const _ of h)_.clearTiles()}_reloadSource(l){const h=this._getSourceCaches(l);for(const _ of h)_.resume(),_.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const h in this._sourceCaches)this._sourceCaches[h].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const h=this._sourceCaches[l];h.resume(),h.reload()}}_updatePlacement(l,h,_,x,w=!1){let C=!1,I=!1;const O={};for(const j of this._order){const B=this._layers[j];if(B.type!=="symbol")continue;if(!O[B.source]){const se=this._getLayerSourceCache(B);if(!se)continue;O[B.source]=se.getRenderableIds(!0).map(de=>se.getTileByID(de)).sort((de,fe)=>fe.tileID.overscaledZ-de.tileID.overscaledZ||(de.tileID.isLessThan(fe.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(B,O[B.source],l.center.lng,l.projection);C=C||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new a.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),l.zoom))&&(this.pauseablePlacement=new mh(l,this._order,w,h,_,x,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),I=!0),C&&this.pauseablePlacement.placement.setStale()),I||C)for(const j of this._order){const B=this._layers[j];B.type==="symbol"&&this.placement.updateLayerOpacities(B,O[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,h,_){this.imageManager.getImages(h.icons,_),this._updateTilesForChangedImages();const x=w=>{w&&w.setDependencies(h.tileID.key,h.type,h.icons)};x(this._otherSourceCaches[h.source]),x(this._symbolSourceCaches[h.source])}getGlyphs(l,h,_){this.glyphManager.getGlyphs(h.stacks,_)}getResource(l,h,_){return a.makeRequest(h,_)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const h=[];return this._otherSourceCaches[l]&&h.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&h.push(this._symbolSourceCaches[l]),h}_isSourceCacheLoaded(l){const h=this._getSourceCaches(l);return h.length===0?(this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):h.every(_=>_.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Uo.getSourceType=function(m){return An[m]},Uo.setSourceType=function(m,l){An[m]=l},Uo.registerForPluginStateChange=a.registerForPluginStateChange;var Yu=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,vs="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",xs=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,lu=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,bs=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let E={},P={};const z=[];Be(Yu,z),Be(xs,z),Be(lu,z),Be(bs,z),E=ke("",xs),P=ke(bs,lu);const $=ke(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),te=Yu,ne=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var ae={background:ke(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ke(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:ke(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ke("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ke(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ke(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ke("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ke("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ke("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:ke(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:ke(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ke(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ke(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ke(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:ke(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:ke(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ke(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ke(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:ke(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:ke(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:ke(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:ke(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:ke(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:ke(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:ke(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:ke(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vs),skyboxGradient:ke(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vs),skyboxCapture:ke(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ke(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ke(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Be(m,l){const h=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of h)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=_.split(" ");for(const w of x)l.includes(w)||l.push(w)}}function ke(m,l){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),x={},w=[...z];return Be(m,w),Be(l,w),{fragmentSource:m=m.replace(h,(C,I,O,j,B)=>(x[B]=!0,I==="define"?`
#ifndef HAS_UNIFORM_u_${B}
varying ${O} ${j} ${B};
#else
uniform ${O} ${j} u_${B};
#endif
`:`
#ifdef HAS_UNIFORM_u_${B}
    ${O} ${j} ${B} = u_${B};
#endif
`)),vertexSource:l=l.replace(h,(C,I,O,j,B)=>{const Y=j==="float"?"vec2":"vec4",se=B.match(/color/)?"color":Y;return x[B]?I==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${O} ${Y} a_${B};
varying ${O} ${j} ${B};
#else
uniform ${O} ${j} u_${B};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = a_${B};
#else
    ${O} ${j} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = unpack_mix_${se}(a_${B}, u_${B}_t);
#else
    ${O} ${j} ${B} = u_${B};
#endif
`:I==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${O} ${Y} a_${B};
#else
uniform ${O} ${j} u_${B};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${O} ${j} ${B} = a_${B};
#else
    ${O} ${j} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${O} ${j} ${B} = unpack_mix_${se}(a_${B}, u_${B}_t);
#else
    ${O} ${j} ${B} = u_${B};
#endif
`}),staticAttributes:_,usedDefines:w}}class nt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,h,_,x,w,C,I){this.context=l;let O=this.boundPaintVertexBuffers.length!==x.length;for(let B=0;!O&&B<x.length;B++)this.boundPaintVertexBuffers[B]!==x[B]&&(O=!0);let j=this.boundDynamicVertexBuffers.length!==I.length;for(let B=0;!j&&B<I.length;B++)this.boundDynamicVertexBuffers[B]!==I[B]&&(j=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==_||O||j||this.boundIndexBuffer!==w||this.boundVertexOffset!==C)this.freshBind(h,_,x,w,C,I);else{l.bindVertexArrayOES.set(this.vao);for(const B of I)B&&B.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(l,h,_,x,w,C){let I;const O=l.numAttributes,j=this.context,B=j.gl;if(j.extVertexArrayObject)this.vao&&this.destroy(),this.vao=j.extVertexArrayObject.createVertexArrayOES(),j.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=x,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=C;else{I=j.currentNumAttributes||0;for(let Y=O;Y<I;Y++)B.disableVertexAttribArray(Y)}h.enableAttributes(B,l),h.bind(),h.setVertexAttribPointers(B,l,w);for(const Y of _)Y.enableAttributes(B,l),Y.bind(),Y.setVertexAttribPointers(B,l,w);for(const Y of C)Y&&(Y.enableAttributes(B,l),Y.bind(),Y.setVertexAttribPointers(B,l,w));x&&x.bind(),j.currentNumAttributes=O}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function wt(m,l){const h=Math.pow(2,l.canonical.z),_=l.canonical.y;return[new a.MercatorCoordinate(0,_/h).toLngLat().lat,new a.MercatorCoordinate(0,(_+1)/h).toLngLat().lat]}function Lt(m,l,h,_,x,w,C){const I=m.context,O=I.gl,j=h.fbo;if(!j)return;m.prepareDrawTile();const B=m.useProgram("hillshade");I.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,j.colorAttachment.get());const Y=((pe,ge,J,ue)=>{const we=J.paint.get("hillshade-shadow-color"),Se=J.paint.get("hillshade-highlight-color"),$e=J.paint.get("hillshade-accent-color");let Ve=J.paint.get("hillshade-illumination-direction")*(Math.PI/180);J.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ve-=pe.transform.angle);const Ue=!pe.options.moving;return{u_matrix:ue||pe.transform.calculateProjMatrix(ge.tileID.toUnwrapped(),Ue),u_image:0,u_latrange:wt(0,ge.tileID),u_light:[J.paint.get("hillshade-exaggeration"),Ve],u_shadow:we,u_highlight:Se,u_accent:$e}})(m,h,_,m.terrain?l.projMatrix:null);m.prepareDrawProgram(I,B,l.toUnwrapped());const{tileBoundsBuffer:se,tileBoundsIndexBuffer:de,tileBoundsSegments:fe}=m.getTileBoundsBuffers(h);B.draw(I,O.TRIANGLES,x,w,C,a.CullFaceMode.disabled,Y,_.id,se,de,fe)}function _t(m,l,h){if(!l.needsDEMTextureUpload)return;const _=m.context,x=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||m.getTileTexture(h.stride);const w=h.getPixels();l.demTexture?l.demTexture.update(w,{premultiply:!1}):l.demTexture=new a.Texture(_,w,x.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function Qt(m,l,h,_,x,w){const C=m.context,I=C.gl;if(!l.dem)return;const O=l.dem;if(C.activeTexture.set(I.TEXTURE1),_t(m,l,O),!l.demTexture)return;l.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);const j=O.dim;C.activeTexture.set(I.TEXTURE0);let B=l.fbo;if(!B){const fe=new a.Texture(C,{width:j,height:j,data:null},I.RGBA);fe.bind(I.LINEAR,I.CLAMP_TO_EDGE),B=l.fbo=C.createFramebuffer(j,j,!0),B.colorAttachment.set(fe.texture)}C.bindFramebuffer.set(B.framebuffer),C.viewport.set([0,0,j,j]);const{tileBoundsBuffer:Y,tileBoundsIndexBuffer:se,tileBoundsSegments:de}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(C,I.TRIANGLES,_,x,w,a.CullFaceMode.disabled,((fe,pe)=>{const ge=pe.stride,J=a.create();return a.ortho(J,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(J,J,[0,-a.EXTENT,0]),{u_matrix:J,u_image:1,u_dimension:[ge,ge],u_zoom:fe.overscaledZ,u_unpack:pe.unpackVector}})(l.tileID,O),h.id,Y,se,de),l.needsHillshadePrepare=!1}const ir=m=>({u_matrix:new a.UniformMatrix4f(m),u_image0:new a.Uniform1i(m),u_skirt_height:new a.Uniform1f(m)}),Tr=(m,l)=>({u_matrix:m,u_image0:0,u_skirt_height:l}),mr=(m,l,h,_,x,w,C,I,O,j,B,Y,se,de,fe)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:h,u_zoom_transition:x,u_merc_center:w,u_image0:0,u_frustum_tl:C,u_frustum_tr:I,u_frustum_br:O,u_frustum_bl:j,u_globe_pos:B,u_globe_radius:Y,u_viewport:se,u_grid_matrix:fe?Float32Array.from(fe):new Float32Array(9),u_skirt_height:de});function Ai(m,l){return m!=null&&l!=null&&!(!m.hasData()||!l.hasData())&&m.demTexture!=null&&l.demTexture!=null&&m.tileID.key!==l.tileID.key}const ei=new class{constructor(){this.operations={}}newMorphing(m,l,h,_,x){if(m in this.operations){const w=this.operations[m];w.to.tileID.key!==h.tileID.key&&(w.queued=h)}else this.operations[m]={startTime:_,phase:0,duration:x,from:l,to:h,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const l=this.operations[m];return{from:l.from,to:l.to,phase:l.phase}}update(m){for(const l in this.operations){const h=this.operations[l];for(h.phase=(m-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,m)){delete this.operations[l];break}}}_nextOp(m,l){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=l,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},xo={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function ta(m){return 6*Math.pow(1.5,22-m)}function Sr(m,l){const h=1<<m.z;return!l&&(m.x===0||m.x===h-1)||m.y===0||m.y===h-1}const ja=m=>({u_matrix:m});function Ir(m,l,h,_,x){if(x>0){const w=a.exported.now(),C=(w-m.timeAdded)/x,I=l?(w-l.timeAdded)/x:-1,O=h.getSource(),j=_.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),B=!l||Math.abs(l.tileID.overscaledZ-j)>Math.abs(m.tileID.overscaledZ-j),Y=B&&m.refreshedUponExpiration?1:a.clamp(B?C:1-I,0,1);return m.refreshedUponExpiration&&C>=1&&(m.refreshedUponExpiration=!1),l?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}class mi extends a.SourceCache{constructor(l){const h={type:"raster-dem",maxzoom:l.transform.maxZoom},_=new it(ln(),null),x=Ln("mock-dem",h,_,l.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,h){l.state="loaded",h(null)}}class Zs extends a.SourceCache{constructor(l){const h=Ln("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new it(ln(),null),l.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,h,_){if(l.freezeTileCoverage)return;this.transform=l;const x=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,C)=>{if(w[C.key]="",!this._tiles[C.key]){const I=new a.Tile(C,this._source.tileSize*C.overscaleFactor(),l.tileZoom);I.state="loaded",this._tiles[C.key]=I}return w},{});for(const w in this._tiles)w in x||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(l){const h=this.proxyCachedFBO[l];if(h!==void 0){const _=Object.values(h);this.renderCachePool.push(..._),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class mc extends a.OverscaledTileID{constructor(l,h,_){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=h,this.projMatrix=_}}class fa extends a.Elevation{constructor(l,h){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,x,w]=function(O){const j=new a.StructArrayLayout2i4,B=new a.StructArrayLayout3ui6,Y=131;j.reserve(17161),B.reserve(33800);const se=a.EXTENT/128,de=a.EXTENT+se/2,fe=de+se;for(let ge=-se;ge<fe;ge+=se)for(let J=-se;J<fe;J+=se){const ue=J<0||J>de||ge<0||ge>de?24575:0,we=a.clamp(Math.round(J),0,a.EXTENT),Se=a.clamp(Math.round(ge),0,a.EXTENT);j.emplaceBack(we+ue,Se)}const pe=(ge,J)=>{const ue=J*Y+ge;B.emplaceBack(ue+1,ue,ue+Y),B.emplaceBack(ue+Y,ue+Y+1,ue+1)};for(let ge=1;ge<129;ge++)for(let J=1;J<129;J++)pe(J,ge);return[0,129].forEach(ge=>{for(let J=0;J<130;J++)pe(J,ge),pe(ge,J)}),[j,B,32768]}(),C=l.context;this.gridBuffer=C.createVertexBuffer(_,a.posAttributes.members),this.gridIndexBuffer=C.createIndexBuffer(x),this.gridSegments=a.SegmentVector.simpleSegment(0,0,_.length,x.length),this.gridNoSkirtSegments=a.SegmentVector.simpleSegment(0,0,_.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Zs(h.map),this.orthoMatrix=a.create(),a.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.EXTENT,0,a.EXTENT,0,1);const I=C.gl;this._overlapStencilMode=new a.StencilMode({func:I.GEQUAL,mask:255},0,255,I.KEEP,I.KEEP,I.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new mi(h.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,h,_){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const x=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(x.get("source")),this._exaggeration=x.get("exaggeration");const w=()=>{this.sourceCache.used&&a.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const C=this.getScaledDemTileSize();this.sourceCache.update(h,C,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),h.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&a.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=h.getIds().map(O=>{const j=h.getTileByID(O).tileID;return j.projMatrix=_.calculateProjMatrix(j.toUnwrapped()),j});(function(O,j){const B=j.transform.pointCoordinate(j.transform.getCameraPoint()),Y=new a.Point(B.x,B.y);O.sort((se,de)=>{if(de.overscaledZ-se.overscaledZ)return de.overscaledZ-se.overscaledZ;const fe=new a.Point(se.canonical.x+(1<<se.canonical.z)*se.wrap,se.canonical.y),pe=new a.Point(de.canonical.x+(1<<de.canonical.z)*de.wrap,de.canonical.y),ge=Y.mult(1<<se.canonical.z);return ge.x-=.5,ge.y-=.5,ge.distSqr(fe)-ge.distSqr(pe)})})(x,this.painter),this._previousZoom=_.zoom;const w=this.proxyToSource||{};this.proxyToSource={},x.forEach(O=>{this.proxyToSource[O.key]={}}),this.terrainTileForTile={};const C=this._style._sourceCaches;for(const O in C){const j=C[O];if(!j.used||(j!==this.sourceCache&&this.resetTileLookupCache(j.id),this._setupProxiedCoordsForOrtho(j,l[O],w),j.usedForTerrain))continue;const B=l[O];j.getSource().reparseOverscaled&&this._assignTerrainTiles(B)}this.proxiedCoords[h.id]=x.map(O=>new mc(O,O.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=a.exported.now();const I={};this._visibleDemTiles=[];for(const O of this.proxyCoords){const j=this.terrainTileForTile[O.key];if(!j)continue;const B=j.tileID.key;B in I||(this._visibleDemTiles.push(j),I[B]=B)}}_assignTerrainTiles(l){this._initializing||l.forEach(h=>{if(this.terrainTileForTile[h.key])return;const _=this._findTileCoveringTileID(h,this.sourceCache);_&&(this.terrainTileForTile[h.key]=_)})}_prepareDEMTextures(){const l=this.painter.context,h=l.gl;for(const _ in this.terrainTileForTile){const x=this.terrainTileForTile[_],w=x.dem;!w||x.demTexture&&!x.needsDEMTextureUpload||(l.activeTexture.set(h.TEXTURE1),_t(this.painter,x,w))}}_prepareDemTileUniforms(l,h,_,x){if(!h||h.demTexture==null)return!1;const w=l.tileID.canonical,C=Math.pow(2,h.tileID.canonical.z-w.z),I=x||"";return _[`u_dem_tl${I}`]=[w.x*C%1,w.y*C%1],_[`u_dem_scale${I}`]=C,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,h=l.gl;if(!this._emptyDepthBufferTexture){const _=new a.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new a.Texture(l,_,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const h=this._visibleDemTiles.reduce((_,x)=>{if(!x.dem)return _;const w=x.dem.tree.minimums[0];return w>0&&l++,_+w},0);return l?h/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,h=l.gl;l.activeTexture.set(h.TEXTURE2);const _=this._getLoadedAreaMinimum(),x=new a.RGBAImage({width:1,height:1},new Uint8Array(a.DEMData.pack(_,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(x,{premultiply:!1}):w=this._emptyDEMTexture=new a.Texture(l,x,h.RGBA,{premultiply:!1}),w}setupElevationDraw(l,h,_){const x=this.painter.context,w=x.gl,C=(I=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:a.DEMData.getUnpackVector(I),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var I;C.u_dem_size=this.sourceCache.getSource().tileSize,C.u_exaggeration=this.exaggeration();let O=null,j=null,B=1;if(_&&_.morphing&&this._useVertexMorphing){const Y=_.morphing.srcDemTile,se=_.morphing.dstDemTile;B=_.morphing.phase,Y&&se&&(this._prepareDemTileUniforms(l,Y,C,"_prev")&&(j=Y),this._prepareDemTileUniforms(l,se,C)&&(O=se))}if(j&&O?(x.activeTexture.set(w.TEXTURE2),O.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),x.activeTexture.set(w.TEXTURE4),j.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),C.u_dem_lerp=B):(O=this.terrainTileForTile[l.tileID.key],x.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(l,O,C)?O.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),x.activeTexture.set(w.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(C.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),C.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&O){const Y=(1<<O.tileID.canonical.z)*a.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;C.u_meter_to_dem=Y}if(_&&_.labelPlaneMatrixInv&&(C.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),h.setTerrainUniformValues(x,C),this.painter.transform.projection.name==="globe"){const Y=this.globeUniformValues(this.painter.transform,l.tileID.canonical,_&&_.useDenormalizedUpVectorScale);h.setGlobeUniformValues(x,Y)}}globeUniformValues(l,h,_){const x=l.projection;return{u_tile_tl_up:x.upVector(h,0,0),u_tile_tr_up:x.upVector(h,a.EXTENT,0),u_tile_br_up:x.upVector(h,a.EXTENT,a.EXTENT),u_tile_bl_up:x.upVector(h,0,a.EXTENT),u_tile_up_scale:_?a.globeMetersToEcef(1):x.upVectorScale(h,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const h=this.painter,_=this.painter.context;l.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,w,C,I,O){if(x.transform.projection.name==="globe")(function(j,B,Y,se,de){const fe=j.context,pe=fe.gl;let ge,J;const ue=j.options.showTerrainWireframe?2:0,we=j.transform,Se=a.globeUseCustomAntiAliasing(j,fe,we),$e=(jt,ut)=>{if(J===jt)return;const St=[xo[jt],"PROJECTION_GLOBE_VIEW"];Se&&St.push("CUSTOM_ANTIALIASING"),ut&&St.push(xo[ue]),ge=j.useProgram("globeRaster",null,St),J=jt},Ve=j.colorModeForRenderPass(),Ue=new a.DepthMode(pe.LEQUAL,a.DepthMode.ReadWrite,j.depthRangeFor3D);ei.update(de);const Qe=a.calculateGlobeMercatorMatrix(we),Je=[a.mercatorXfromLng(we.center.lng),a.mercatorYfromLat(we.center.lat)],dt=ue?[!1,!0]:[!1],Ut=j.globeSharedBuffers,at=[we.width*a.exported.devicePixelRatio,we.height*a.exported.devicePixelRatio],kt=Float32Array.from(we.globeMatrix),ft={useDenormalizedUpVectorScale:!0};if(dt.forEach(jt=>{const ut=j.transform,St=ta(ut.zoom)*B.exaggeration();J=-1;const Wt=jt?pe.LINES:pe.TRIANGLES;for(const zt of se){const Ht=Y.getTile(zt),zn=a.StencilMode.disabled,Qn=B.prevTerrainTileForTile[zt.key],Sn=B.terrainTileForTile[zt.key];Ai(Qn,Sn)&&ei.newMorphing(zt.key,Qn,Sn,de,250),fe.activeTexture.set(pe.TEXTURE0),Ht.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);const Gn=ei.getMorphValuesForProxy(zt.key),Er=Gn?1:0;Gn&&a.extend$1(ft,{morphing:{srcDemTile:Gn.from,dstDemTile:Gn.to,phase:a.easeCubicInOut(Gn.phase)}});const yr=a.tileCornersToBounds(zt.canonical),Mn=a.getLatitudinalLod(yr.getCenter().lat),Fr=a.getGridMatrix(zt.canonical,yr,Mn,ut.worldSize/ut._pixelsPerMercatorPixel),Vr=a.globeNormalizeECEF(a.globeTileBounds(zt.canonical)),Wr=mr(ut.projMatrix,kt,Qe,Vr,a.globeToMercatorTransition(ut.zoom),Je,ut.frustumCorners.TL,ut.frustumCorners.TR,ut.frustumCorners.BR,ut.frustumCorners.BL,ut.globeCenterInViewSpace,ut.globeRadius,at,St,Fr);if($e(Er,jt),B.setupElevationDraw(Ht,ge,ft),j.prepareDrawProgram(fe,ge,zt.toUnwrapped()),Ut){const[Hr,Go,wo]=jt?Ut.getWirefameBuffers(j.context,Mn):Ut.getGridBuffers(Mn,St!==0);ge.draw(fe,Wt,Ue,zn,Ve,a.CullFaceMode.backCCW,Wr,"globe_raster",Hr,Go,wo)}}}),Ut){const jt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Se&&jt.push("CUSTOM_ANTIALIASING"),ge=j.useProgram("globeRaster",null,jt);for(const ut of se){const{x:St,y:Wt,z:zt}=ut.canonical,Ht=Wt===0,zn=Wt===(1<<zt)-1,[Qn,Sn,Gn,Er]=Ut.getPoleBuffers(zt);if(Er&&(Ht||zn)){const yr=Y.getTile(ut);fe.activeTexture.set(pe.TEXTURE0),yr.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);let Mn=a.globePoleMatrixForTile(zt,St,we);const Fr=a.globeNormalizeECEF(a.globeTileBounds(ut.canonical)),Vr=(Wr,Hr)=>Wr.draw(fe,pe.TRIANGLES,Ue,a.StencilMode.disabled,Ve,a.CullFaceMode.disabled,mr(we.projMatrix,Mn,Mn,Fr,0,Je,we.frustumCorners.TL,we.frustumCorners.TR,we.frustumCorners.BR,we.frustumCorners.BL,we.globeCenterInViewSpace,we.globeRadius,at,0),"globe_pole_raster",Hr,Gn,Er);B.setupElevationDraw(yr,ge,ft),j.prepareDrawProgram(fe,ge,ut.toUnwrapped()),Ht&&Vr(ge,Qn),zn&&(Mn=a.scale(a.create(),Mn,[1,-1,1]),Vr(ge,Sn))}}}})(x,w,C,I,O);else{const j=x.context,B=j.gl;let Y,se;const de=x.options.showTerrainWireframe?2:0,fe=(we,Se)=>{if(se===we)return;const $e=[xo[we]];Se&&$e.push(xo[de]),Y=x.useProgram("terrainRaster",null,$e),se=we},pe=x.colorModeForRenderPass(),ge=new a.DepthMode(B.LEQUAL,a.DepthMode.ReadWrite,x.depthRangeFor3D);ei.update(O);const J=x.transform,ue=ta(J.zoom)*w.exaggeration();(de?[!1,!0]:[!1]).forEach(we=>{se=-1;const Se=we?B.LINES:B.TRIANGLES,[$e,Ve]=we?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const Ue of I){const Qe=C.getTile(Ue),Je=a.StencilMode.disabled,dt=w.prevTerrainTileForTile[Ue.key],Ut=w.terrainTileForTile[Ue.key];Ai(dt,Ut)&&ei.newMorphing(Ue.key,dt,Ut,O,250),j.activeTexture.set(B.TEXTURE0),Qe.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const at=ei.getMorphValuesForProxy(Ue.key),kt=at?1:0;let ft;at&&(ft={morphing:{srcDemTile:at.from,dstDemTile:at.to,phase:a.easeCubicInOut(at.phase)}});const jt=Tr(Ue.projMatrix,Sr(Ue.canonical,J.renderWorldCopies)?ue/10:ue);fe(kt,we),w.setupElevationDraw(Qe,Y,ft),x.prepareDrawProgram(j,Y,Ue.toUnwrapped()),Y.draw(j,Se,ge,Je,pe,a.CullFaceMode.backCCW,jt,"terrain_raster",w.gridBuffer,$e,Ve)}})}}(h,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const h=this.painter,_=this.painter.context,x=this.proxySourceCache,w=this.proxiedCoords[x.id],C=this._drapedRenderBatches.shift(),I=[],O=h.style.order;let j=0;for(const B of w){const Y=x.getTileByID(B.proxyTileKey),se=x.proxyCachedFBO[B.key]?x.proxyCachedFBO[B.key][l]:void 0,de=se!==void 0?x.renderCache[se]:this.pool[j++],fe=se!==void 0;if(Y.texture=de.tex,fe&&!de.dirty){I.push(Y.tileID);continue}let pe;_.bindFramebuffer.set(de.fb.framebuffer),this.renderedToTile=!1,de.dirty&&(_.clear({color:a.Color.transparent,stencil:0}),de.dirty=!1);for(let ge=C.start;ge<=C.end;++ge){const J=h.style._layers[O[ge]];if(J.isHidden(h.transform.zoom))continue;const ue=h.style._getLayerSourceCache(J),we=ue?this.proxyToSource[B.key][ue.id]:[B];if(!we)continue;const Se=we;_.viewport.set([0,0,de.fb.width,de.fb.height]),pe!==(ue?ue.id:null)&&(this._setupStencil(de,we,J,ue),pe=ue?ue.id:null),h.renderLayer(h,ue,J,Se)}this.renderedToTile?(de.dirty=!0,I.push(Y.tileID)):fe||--j,j===5&&(j=0,this.renderToBackBuffer(I))}return this.renderToBackBuffer(I),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,h.width,h.height]),C.end+1}postRender(){}renderCacheEfficiency(l){const h=l.order.length;if(h===0)return{efficiency:100};let _,x=0,w=0,C=!1;for(let I=0;I<h;++I){const O=l._layers[l.order[I]];this._style.isLayerDraped(O)?(C&&++x,++w):C||(C=!0,_=O.id)}return w===0?{efficiency:100}:{efficiency:100*(1-x/w),firstUndrapedLayer:_}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{l=Math.min(l,h.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,h,_){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const C=w.tileID,I=1<<C.overscaledZ,{x:O,y:j}=C.canonical,B=O/I,Y=(O+1)/I,se=j/I,de=(j+1)/I;return{minx:B,miny:se,maxx:Y,maxy:de,t:w.dem.tree.raycastRoot(B,se,Y,de,l,h,_),tile:w}});x.sort((w,C)=>(w.t!==null?w.t:Number.MAX_VALUE)-(C.t!==null?C.t:Number.MAX_VALUE));for(const w of x){if(w.t==null)return null;const C=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,l,h,_);if(C!=null)return C}return null}_createFBO(){const l=this.painter.context,h=l.gl,_=this.drapeBufferSize;l.activeTexture.set(h.TEXTURE0);const x=new a.Texture(l,{width:_[0],height:_[1],data:null},h.RGBA);x.bind(h.LINEAR,h.CLAMP_TO_EDGE);const w=l.createFramebuffer(_[0],_[1],!1);return w.colorAttachment.set(x.texture),w.depthAttachment=new je(l,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&h.texParameterf(h.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:w,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const h=this._style._layers[l],_=h.isHidden(this.painter.transform.zoom);return h.type==="custom"?!_&&h.shouldRedrape():!_&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const _ of this._style._getSources())if(_ instanceof Pt){l=!0;break}if(!l)return;const h={};for(let _=0;_<this._style.order.length;++_){const x=this._style._layers[this._style.order[_]],w=this._style._getLayerSourceCache(x);if(w&&!h[w.id]&&!x.isHidden(this.painter.transform.zoom)&&x.type==="line"&&x.widthExpression()instanceof a.ZoomDependentExpression){h[w.id]=!0;for(const C of this.proxyCoords){const I=this.proxyToSource[C.key][w.id];if(I)for(const O of I)this._clearRenderCacheForTile(w.id,O)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const _ in this._style._sourceCaches)if(this._style._sourceCaches[_]._source instanceof Et){l=!0;break}if(!l)return;const h={};for(let _=0;_<this._style.order.length;++_){const x=this._style._layers[this._style.order[_]],w=this._style._getLayerSourceCache(x);if(!w||h[w.id]||x.isHidden(this.painter.transform.zoom)||x.type!=="raster")continue;const C=x.paint.get("raster-fade-duration");for(const I of this.proxyCoords){const O=this.proxyToSource[I.key][w.id];if(O)for(const j of O){const B=Ir(w.getTile(j),w.findLoadedParent(j,0),w,this.painter.transform,C);(B.opacity!==1||B.mix!==0)&&this._clearRenderCacheForTile(w.id,j)}}}}_setupDrapedRenderBatches(){const l=this._style.order,h=l.length;if(h===0)return;const _=[];let x,w=0,C=this._style._layers[l[w]];for(;!this._style.isLayerDraped(C)&&C.isHidden(this.painter.transform.zoom)&&++w<h;)C=this._style._layers[l[w]];for(;w<h;++w){const I=this._style._layers[l[w]];I.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(I)?x===void 0&&(x=w):x!==void 0&&(_.push({start:x,end:w-1}),x=void 0))}x!==void 0&&_.push({start:x,end:w-1}),this._drapedRenderBatches=_}_setupRenderCache(l){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const C=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let I=0;I<C.length;++I){const O=Object.values(C[I]);h.renderCachePool.push(...O)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,x=this._tilesDirty;for(let C=_.length-1;C>=0;C--){const I=_[C];if(h.getTileByID(I.key),h.proxyCachedFBO[I.key]!==void 0){const O=l[I.key],j=this.proxyToSource[I.key];let B=0;for(const Y in j){const se=j[Y],de=O[Y];if(!de||de.length!==se.length||se.some((fe,pe)=>fe!==de[pe]||x[Y]&&x[Y].hasOwnProperty(fe.key))){B=-1;break}++B}for(const Y in h.proxyCachedFBO[I.key])h.renderCache[h.proxyCachedFBO[I.key][Y]].dirty=B<0||B!==Object.values(O).length}}const w=[...this._drapedRenderBatches];w.sort((C,I)=>I.end-I.start-(C.end-C.start));for(const C of w)for(const I of _){if(h.proxyCachedFBO[I.key])continue;let O=h.renderCachePool.pop();O===void 0&&h.renderCache.length<50&&(O=h.renderCache.length,h.renderCache.push(this._createFBO())),O!==void 0&&(h.proxyCachedFBO[I.key]={},h.proxyCachedFBO[I.key][C.start]=O,h.renderCache[O].dirty=!0)}this._tilesDirty={}}_setupStencil(l,h,_,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,C=w.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let I;if(_.isTileClipped())I=h.length,this._overlapStencilMode.test={func:C.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);I=1,this._overlapStencilMode.test={func:C.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+I>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=I,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):a.StencilMode.disabled}_renderTileClippingMasks(l,h){const _=this.painter,x=this.painter.context,w=x.gl;_._tileClippingMaskIDs={},x.setColorMode(a.ColorMode.disabled),x.setDepthMode(a.DepthMode.disabled);const C=_.useProgram("clippingMask");for(const I of l){const O=_._tileClippingMaskIDs[I.key]=--h;C.draw(x,w.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:w.ALWAYS,mask:0},O,255,w.KEEP,w.KEEP,w.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,ja(I.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(l){const h=this.painter.transform;if(l.x<0||l.x>h.width||l.y<0||l.y>h.height)return null;const _=[l.x,l.y,1,1];a.transformMat4$1(_,_,h.pixelMatrixInverse),a.scale$1(_,_,1/_[3]),_[0]/=h.worldSize,_[1]/=h.worldSize;const x=h._camera.position,w=a.mercatorZfromAltitude(1,h.center.lat),C=[x[0],x[1],x[2]/w,0],I=a.subtract([],_.slice(0,3),C);a.normalize(I,I);const O=this.raycast(C,I,this._exaggeration);return O!==null&&O?(a.scaleAndAdd(C,C,I,O),C[3]=C[2],C[2]*=w,C):null}drawDepth(){const l=this.painter,h=l.context,_=this.proxySourceCache,x=Math.ceil(l.width),w=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===x&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const C=h.gl,I=h.createFramebuffer(x,w,!0);h.activeTexture.set(C.TEXTURE0);const O=new a.Texture(h,{width:x,height:w,data:null},C.RGBA);O.bind(C.NEAREST,C.CLAMP_TO_EDGE),I.colorAttachment.set(O.texture);const j=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,x,w);I.depthAttachment.set(j),this._depthFBO=I,this._depthTexture=O}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,x,w]),function(C,I,O,j){if(C.transform.projection.name==="globe")return;const B=C.context,Y=B.gl;B.clear({depth:1});const se=C.useProgram("terrainDepth"),de=new a.DepthMode(Y.LESS,a.DepthMode.ReadWrite,C.depthRangeFor3D);for(const fe of j){const pe=O.getTile(fe),ge=Tr(fe.projMatrix,0);I.setupElevationDraw(pe,se),se.draw(B,Y.TRIANGLES,de,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.backCCW,ge,"terrain_depth",I.gridBuffer,I.gridIndexBuffer,I.gridNoSkirtSegments)}}(l,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,h,_){if(l.getSource()instanceof Rn)return this._setupProxiedCoordsForImageSource(l,h,_);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const x=this.proxiedCoords[l.id]=[],w=this.proxyCoords;for(let I=0;I<w.length;I++){const O=w[I],j=this._findTileCoveringTileID(O,l);if(j){const B=this._createProxiedId(O,j,_[O.key]&&_[O.key][l.id]);x.push(B),this.proxyToSource[O.key][l.id]=[B]}}let C=!1;for(let I=0;I<h.length;I++){const O=l.getTile(h[I]);if(!O||!O.hasData())continue;const j=this._findTileCoveringTileID(O.tileID,this.proxySourceCache);if(j&&j.tileID.canonical.z!==O.tileID.canonical.z){const B=this.proxyToSource[j.tileID.key][l.id],Y=this._createProxiedId(j.tileID,O,_[j.tileID.key]&&_[j.tileID.key][l.id]);B?B.splice(B.length-1,0,Y):this.proxyToSource[j.tileID.key][l.id]=[Y],x.push(Y),C=!0}}this._sourceTilesOverlap[l.id]=C}_setupProxiedCoordsForImageSource(l,h,_){if(!l.getSource().loaded())return;const x=this.proxiedCoords[l.id]=[],w=this.proxyCoords,C=l.getSource(),I=new a.Point(C.tileID.x,C.tileID.y)._div(1<<C.tileID.z),O=C.coordinates.map(a.MercatorCoordinate.fromLngLat).reduce((B,Y)=>(B.min.x=Math.min(B.min.x,Y.x-I.x),B.min.y=Math.min(B.min.y,Y.y-I.y),B.max.x=Math.max(B.max.x,Y.x-I.x),B.max.y=Math.max(B.max.y,Y.y-I.y),B),{min:new a.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),j=(B,Y)=>{const se=B.wrap+B.canonical.x/(1<<B.canonical.z),de=B.canonical.y/(1<<B.canonical.z),fe=a.EXTENT/(1<<B.canonical.z),pe=Y.wrap+Y.canonical.x/(1<<Y.canonical.z),ge=Y.canonical.y/(1<<Y.canonical.z);return se+fe<pe+O.min.x||se>pe+O.max.x||de+fe<ge+O.min.y||de>ge+O.max.y};for(let B=0;B<w.length;B++){const Y=w[B];for(let se=0;se<h.length;se++){const de=l.getTile(h[se]);if(!de||!de.hasData()||j(Y,de.tileID))continue;const fe=this._createProxiedId(Y,de,_[Y.key]&&_[Y.key][l.id]),pe=this.proxyToSource[Y.key][l.id];pe?pe.push(fe):this.proxyToSource[Y.key][l.id]=[fe],x.push(fe)}}}_createProxiedId(l,h,_){let x=this.orthoMatrix;if(_){const w=_.find(C=>C.key===h.tileID.key);if(w)return w}if(h.tileID.key!==l.key){const w=l.canonical.z-h.tileID.canonical.z;let C,I,O;x=a.create();const j=h.tileID.wrap-l.wrap<<l.overscaledZ;w>0?(C=a.EXTENT>>w,I=C*((h.tileID.canonical.x<<w)-l.canonical.x+j),O=C*((h.tileID.canonical.y<<w)-l.canonical.y)):(C=a.EXTENT<<-w,I=a.EXTENT*(h.tileID.canonical.x-(l.canonical.x+j<<-w)),O=a.EXTENT*(h.tileID.canonical.y-(l.canonical.y<<-w))),a.ortho(x,0,C,0,C,0,1),a.translate(x,x,[I,O,0])}return new mc(h.tileID,l.key,x)}_findTileCoveringTileID(l,h){let _=h.getTile(l);if(_&&_.hasData())return _;const x=this._findCoveringTileCache[h.id],w=x[l.key];if(_=w?h.getTileByID(w):null,_&&_.hasData()||w===null)return _;let C=_?_.tileID:l,I=C.overscaledZ;const O=h.getSource().minzoom,j=[];if(!w){const Y=h.getSource().maxzoom;if(l.canonical.z>=Y){const se=l.canonical.z-Y;h.getSource().reparseOverscaled?(I=Math.max(l.canonical.z+2,h.transform.tileZoom),C=new a.OverscaledTileID(I,l.wrap,Y,l.canonical.x>>se,l.canonical.y>>se)):se!==0&&(I=Y,C=new a.OverscaledTileID(I,l.wrap,Y,l.canonical.x>>se,l.canonical.y>>se))}C.key!==l.key&&(j.push(C.key),_=h.getTile(C))}const B=Y=>{j.forEach(se=>{x[se]=Y}),j.length=0};for(I-=1;I>=O&&(!_||!_.hasData());I--){_&&B(_.tileID.key);const Y=C.calculateScaledKey(I);if(_=h.getTileByID(Y),_&&_.hasData())break;const se=x[Y];if(se===null)break;se===void 0?j.push(Y):_=h.getTileByID(se)}return B(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,h){let _=this._tilesDirty[l];_||(_=this._tilesDirty[l]={}),_[h.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(h){let _=0;const x=new a.StructArrayLayout2ui4,w=131;for(let C=1;C<129;C++){for(let I=1;I<129;I++)_=C*w+I,x.emplaceBack(_,_+1),x.emplaceBack(_,_+w),x.emplaceBack(_+1,_+w),C===128&&x.emplaceBack(_+w,_+w+1);x.emplaceBack(_+1,_+1+w)}return x}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=a.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class wr{static cacheKey(l,h,_,x){let w=`${h}${x?x.cacheKey:""}`;for(const C of _)l.usedDefines.includes(C)&&(w+=`/${C}`);return w}constructor(l,h,_,x,w,C){const I=l.gl;this.program=I.createProgram();const O=function(J){const ue=[];for(let we=0;we<J.length;we++){if(J[we]===null)continue;const Se=J[we].split(" ");ue.push(Se.pop())}return ue}(_.staticAttributes),j=x?x.getBinderAttributes():[],B=O.concat(j);let Y=x?x.defines():[];Y=Y.concat(C.map(J=>`#define ${J}`));const se=l.isWebGL2?`#version 300 es
`:"",de=se+Y.concat(l.extStandardDerivatives&&se.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(ne):ne,ne,te,$.fragmentSource,P.fragmentSource,_.fragmentSource).join(`
`),fe=se+Y.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,te,$.vertexSource,P.vertexSource,E.vertexSource,_.vertexSource).join(`
`),pe=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(pe,de),I.compileShader(pe),I.attachShader(this.program,pe);const ge=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())this.failedToCreate=!0;else{I.shaderSource(ge,fe),I.compileShader(ge),I.attachShader(this.program,ge),this.attributes={},this.numAttributes=B.length;for(let J=0;J<this.numAttributes;J++)B[J]&&(I.bindAttribLocation(this.program,J,B[J]),this.attributes[B[J]]=J);I.linkProgram(this.program),I.deleteShader(ge),I.deleteShader(pe),this.fixedUniforms=w(l),this.binderUniforms=x?x.getUniforms(l):[],C.includes("TERRAIN")&&(this.terrainUniforms=(J=>({u_dem:new a.Uniform1i(J),u_dem_prev:new a.Uniform1i(J),u_dem_unpack:new a.Uniform4f(J),u_dem_tl:new a.Uniform2f(J),u_dem_scale:new a.Uniform1f(J),u_dem_tl_prev:new a.Uniform2f(J),u_dem_scale_prev:new a.Uniform1f(J),u_dem_size:new a.Uniform1f(J),u_dem_lerp:new a.Uniform1f(J),u_exaggeration:new a.Uniform1f(J),u_depth:new a.Uniform1i(J),u_depth_size_inv:new a.Uniform2f(J),u_meter_to_dem:new a.Uniform1f(J),u_label_plane_matrix_inv:new a.UniformMatrix4f(J)}))(l)),C.includes("GLOBE")&&(this.globeUniforms=(J=>({u_tile_tl_up:new a.Uniform3f(J),u_tile_tr_up:new a.Uniform3f(J),u_tile_br_up:new a.Uniform3f(J),u_tile_bl_up:new a.Uniform3f(J),u_tile_up_scale:new a.Uniform1f(J)}))(l)),C.includes("FOG")&&(this.fogUniforms=(J=>({u_fog_matrix:new a.UniformMatrix4f(J),u_fog_range:new a.Uniform2f(J),u_fog_color:new a.Uniform4f(J),u_fog_horizon_blend:new a.Uniform1f(J),u_fog_temporal_offset:new a.Uniform1f(J),u_frustum_tl:new a.Uniform3f(J),u_frustum_tr:new a.Uniform3f(J),u_frustum_br:new a.Uniform3f(J),u_frustum_bl:new a.Uniform3f(J),u_globe_pos:new a.Uniform3f(J),u_globe_radius:new a.Uniform1f(J),u_globe_transition:new a.Uniform1f(J),u_is_globe:new a.Uniform1i(J),u_viewport:new a.Uniform2f(J)}))(l))}}setTerrainUniformValues(l,h){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in h)_[x]&&_[x].set(this.program,x,h[x])}}setGlobeUniformValues(l,h){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in h)_[x]&&_[x].set(this.program,x,h[x])}}setFogUniformValues(l,h){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in h)_[x].set(this.program,x,h[x])}}draw(l,h,_,x,w,C,I,O,j,B,Y,se,de,fe,pe){const ge=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(_),l.setStencilMode(x),l.setColorMode(w),l.setCullFace(C);for(const ue of Object.keys(this.fixedUniforms))this.fixedUniforms[ue].set(this.program,ue,I[ue]);fe&&fe.setUniforms(this.program,l,this.binderUniforms,se,{zoom:de});const J={[ge.LINES]:2,[ge.TRIANGLES]:3,[ge.LINE_STRIP]:1}[h];for(const ue of Y.get()){const we=ue.vaos||(ue.vaos={});(we[O]||(we[O]=new nt)).bind(l,this,j,fe?fe.getPaintVertexBuffers():[],B,ue.vertexOffset,pe||[]),ge.drawElements(h,ue.primitiveLength*J,ge.UNSIGNED_SHORT,ue.primitiveOffset*J*2)}}}function Vo(m,l){const h=Math.pow(2,l.tileID.overscaledZ),_=l.tileSize*Math.pow(2,m.transform.tileZoom)/h,x=_*(l.tileID.canonical.x+l.tileID.wrap*h),w=_*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/Dt(l,1,m.transform.tileZoom),u_pixel_coord_upper:[x>>16,w>>16],u_pixel_coord_lower:[65535&x,65535&w]}}const ws=a.create(),Ya=(m,l,h,_,x,w,C,I,O,j,B)=>{const Y=l.style.light,se=Y.properties.get("position"),de=[se.x,se.y,se.z],fe=a.create$1();Y.properties.get("anchor")==="viewport"&&(a.fromRotation(fe,-l.transform.angle),a.transformMat3(de,de,fe));const pe=Y.properties.get("color"),ge=l.transform,J={u_matrix:m,u_lightpos:de,u_lightintensity:Y.properties.get("intensity"),u_lightcolor:[pe.r,pe.g,pe.b],u_vertical_gradient:+h,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ws,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:x,u_edge_radius:w};return ge.projection.name==="globe"&&(J.u_tile_id=[C.canonical.x,C.canonical.y,1<<C.canonical.z],J.u_zoom_transition=O,J.u_inv_rot_matrix=B,J.u_merc_center=j,J.u_up_dir=ge.projection.upVector(new a.CanonicalTileID(0,0,0),j[0]*a.EXTENT,j[1]*a.EXTENT),J.u_height_lift=I),J},na=(m,l,h,_,x,w,C,I,O,j,B,Y)=>{const se=Ya(m,l,h,_,x,w,C,O,j,B,Y),de={u_height_factor:-Math.pow(2,C.overscaledZ)/I.tileSize/8};return a.extend(se,Vo(l,I),de)},Es=m=>({u_matrix:m}),$a=(m,l,h)=>a.extend(Es(m),Vo(l,h)),Ts=(m,l)=>({u_matrix:m,u_world:l}),am=(m,l,h,_)=>a.extend($a(m,l,h),{u_world:_}),sm=a.create(),_h=(m,l,h,_,x,w)=>{const C=m.transform,I=C.projection.name==="globe";let O;if(w.paint.get("circle-pitch-alignment")==="map")if(I){const B=a.globePixelsToTileUnits(C.zoom,l.canonical)*C._pixelsPerMercatorPixel;O=Float32Array.from([B,0,0,B])}else O=C.calculatePixelsToTileUnitsMatrix(h);else O=new Float32Array([C.pixelsToGLUnits[0],0,0,C.pixelsToGLUnits[1]]);const j={u_camera_to_center_distance:C.cameraToCenterDistance,u_matrix:m.translatePosMatrix(l.projMatrix,h,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:a.exported.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:sm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(I){j.u_inv_rot_matrix=_,j.u_merc_center=x,j.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],j.u_zoom_transition=a.globeToMercatorTransition(C.zoom);const B=x[0]*a.EXTENT,Y=x[1]*a.EXTENT;j.u_up_dir=C.projection.upVector(new a.CanonicalTileID(0,0,0),B,Y)}return j},jr=m=>{const l=[];return m.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),m.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},gc=(m,l,h,_)=>{const x=a.EXTENT/h.tileSize;return{u_matrix:m,u_camera_to_center_distance:l.getCameraToCenterDistance(_),u_extrude_scale:[l.pixelsToGLUnits[0]/x,l.pixelsToGLUnits[1]/x]}},Wo=(m,l,h=1)=>({u_matrix:m,u_color:l,u_overlay:0,u_overlay_scale:h}),Ml=a.create(),zp=(m,l,h,_,x,w,C)=>{const I=m.transform,O=I.projection.name==="globe",j=O?a.globePixelsToTileUnits(I.zoom,l.canonical)*I._pixelsPerMercatorPixel:Dt(h,1,w),B={u_matrix:l.projMatrix,u_extrude_scale:j,u_intensity:C,u_inv_rot_matrix:Ml,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){B.u_inv_rot_matrix=_,B.u_merc_center=x,B.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],B.u_zoom_transition=a.globeToMercatorTransition(I.zoom);const Y=x[0]*a.EXTENT,se=x[1]*a.EXTENT;B.u_up_dir=I.projection.upVector(new a.CanonicalTileID(0,0,0),Y,se)}return B},lm=(m,l,h,_,x,w,C)=>{const I=m.transform,O=I.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:cu(m,l,h,_),u_pixels_to_tile_units:O,u_device_pixel_ratio:w,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:ga(h)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ma(l,m.transform),u_alpha_discard_threshold:0,u_trim_offset:C}},_c=(m,l,h,_,x)=>{const w=m.transform;return{u_matrix:cu(m,l,h,_),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:x,u_image:0,u_tile_units_to_pixels:ma(l,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ma(m,l){return 1/Dt(m,1,l.tileZoom)}function cu(m,l,h,_){return m.translatePosMatrix(_||l.tileID.projMatrix,l,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}function ga(m){const l=m.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const Ju=(m,l,h,_,x,w)=>{return{u_matrix:m,u_tl_parent:l,u_scale_parent:h,u_fade_t:_.mix,u_opacity:_.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(I=x.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(C=x.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:ra(x.paint.get("raster-hue-rotate")),u_perspective_transform:w};var C,I};function ra(m){m*=Math.PI/180;const l=Math.sin(m),h=Math.cos(m);return[(2*h+1)/3,(-Math.sqrt(3)*l-h+1)/3,(Math.sqrt(3)*l-h+1)/3]}const Dl=a.create(),yc=(m,l,h,_,x,w,C,I,O,j,B,Y,se,de,fe,pe)=>{const ge=x.transform,J={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:ge.cameraToCenterDistance,u_rotate_symbol:+h,u_aspect_ratio:ge.width/ge.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:C,u_coord_matrix:I,u_is_text:+O,u_pitch_with_map:+_,u_texsize:j,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Dl,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Dl,u_up_vector:[0,-1,0]};return pe.name==="globe"&&(J.u_tile_id=[B.canonical.x,B.canonical.y,1<<B.canonical.z],J.u_zoom_transition=Y,J.u_inv_rot_matrix=de,J.u_merc_center=se,J.u_camera_forward=ge._camera.forward(),J.u_ecef_origin=a.globeECEFOrigin(ge.globeMatrix,B.toUnwrapped()),J.u_tile_matrix=Float32Array.from(ge.globeMatrix),J.u_up_vector=fe),J},vc=(m,l,h,_,x,w,C,I,O,j,B,Y,se,de,fe,pe,ge)=>a.extend(yc(m,l,h,_,x,w,C,I,O,j,Y,se,de,fe,pe,ge),{u_gamma_scale:_?x.transform.cameraToCenterDistance*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:a.exported.devicePixelRatio,u_is_halo:+B}),Np=(m,l,h,_,x,w,C,I,O,j,B,Y,se,de,fe,pe)=>a.extend(vc(m,l,h,_,x,w,C,I,!0,O,!0,B,Y,se,de,fe,pe),{u_texsize_icon:j,u_texture_icon:1}),xc=(m,l,h)=>({u_matrix:m,u_opacity:l,u_color:h}),yh=(m,l,h,_,x)=>a.extend(function(w,C,I){const O=C.imageManager.getPattern(w.toString()),{width:j,height:B}=C.imageManager.getPixelSize(),Y=Math.pow(2,I.tileID.overscaledZ),se=I.tileSize*Math.pow(2,C.transform.tileZoom)/Y,de=se*(I.tileID.canonical.x+I.tileID.wrap*Y),fe=se*I.tileID.canonical.y;return{u_image:0,u_pattern_tl:O.tl,u_pattern_br:O.br,u_texsize:[j,B],u_pattern_size:O.displaySize,u_tile_units_to_pixels:1/Dt(I,1,C.transform.tileZoom),u_pixel_coord_upper:[de>>16,fe>>16],u_pixel_coord_lower:[65535&de,65535&fe]}}(_,h,x),{u_matrix:m,u_opacity:l}),uu={fillExtrusion:m=>({u_matrix:new a.UniformMatrix4f(m),u_lightpos:new a.Uniform3f(m),u_lightintensity:new a.Uniform1f(m),u_lightcolor:new a.Uniform3f(m),u_vertical_gradient:new a.Uniform1f(m),u_opacity:new a.Uniform1f(m),u_edge_radius:new a.Uniform1f(m),u_ao:new a.Uniform2f(m),u_tile_id:new a.Uniform3f(m),u_zoom_transition:new a.Uniform1f(m),u_inv_rot_matrix:new a.UniformMatrix4f(m),u_merc_center:new a.Uniform2f(m),u_up_dir:new a.Uniform3f(m),u_height_lift:new a.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new a.UniformMatrix4f(m),u_lightpos:new a.Uniform3f(m),u_lightintensity:new a.Uniform1f(m),u_lightcolor:new a.Uniform3f(m),u_vertical_gradient:new a.Uniform1f(m),u_height_factor:new a.Uniform1f(m),u_edge_radius:new a.Uniform1f(m),u_ao:new a.Uniform2f(m),u_tile_id:new a.Uniform3f(m),u_zoom_transition:new a.Uniform1f(m),u_inv_rot_matrix:new a.UniformMatrix4f(m),u_merc_center:new a.Uniform2f(m),u_up_dir:new a.Uniform3f(m),u_height_lift:new a.Uniform1f(m),u_image:new a.Uniform1i(m),u_texsize:new a.Uniform2f(m),u_pixel_coord_upper:new a.Uniform2f(m),u_pixel_coord_lower:new a.Uniform2f(m),u_tile_units_to_pixels:new a.Uniform1f(m),u_opacity:new a.Uniform1f(m)}),fill:m=>({u_matrix:new a.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new a.UniformMatrix4f(m),u_image:new a.Uniform1i(m),u_texsize:new a.Uniform2f(m),u_pixel_coord_upper:new a.Uniform2f(m),u_pixel_coord_lower:new a.Uniform2f(m),u_tile_units_to_pixels:new a.Uniform1f(m)}),fillOutline:m=>({u_matrix:new a.UniformMatrix4f(m),u_world:new a.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new a.UniformMatrix4f(m),u_world:new a.Uniform2f(m),u_image:new a.Uniform1i(m),u_texsize:new a.Uniform2f(m),u_pixel_coord_upper:new a.Uniform2f(m),u_pixel_coord_lower:new a.Uniform2f(m),u_tile_units_to_pixels:new a.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new a.Uniform1f(m),u_extrude_scale:new a.UniformMatrix2f(m),u_device_pixel_ratio:new a.Uniform1f(m),u_matrix:new a.UniformMatrix4f(m),u_inv_rot_matrix:new a.UniformMatrix4f(m),u_merc_center:new a.Uniform2f(m),u_tile_id:new a.Uniform3f(m),u_zoom_transition:new a.Uniform1f(m),u_up_dir:new a.Uniform3f(m)}),collisionBox:m=>({u_matrix:new a.UniformMatrix4f(m),u_camera_to_center_distance:new a.Uniform1f(m),u_extrude_scale:new a.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new a.UniformMatrix4f(m),u_inv_matrix:new a.UniformMatrix4f(m),u_camera_to_center_distance:new a.Uniform1f(m),u_viewport_size:new a.Uniform2f(m)}),debug:m=>({u_color:new a.UniformColor(m),u_matrix:new a.UniformMatrix4f(m),u_overlay:new a.Uniform1i(m),u_overlay_scale:new a.Uniform1f(m)}),clippingMask:m=>({u_matrix:new a.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new a.Uniform1f(m),u_intensity:new a.Uniform1f(m),u_matrix:new a.UniformMatrix4f(m),u_inv_rot_matrix:new a.UniformMatrix4f(m),u_merc_center:new a.Uniform2f(m),u_tile_id:new a.Uniform3f(m),u_zoom_transition:new a.Uniform1f(m),u_up_dir:new a.Uniform3f(m)}),heatmapTexture:m=>({u_image:new a.Uniform1i(m),u_color_ramp:new a.Uniform1i(m),u_opacity:new a.Uniform1f(m)}),hillshade:m=>({u_matrix:new a.UniformMatrix4f(m),u_image:new a.Uniform1i(m),u_latrange:new a.Uniform2f(m),u_light:new a.Uniform2f(m),u_shadow:new a.UniformColor(m),u_highlight:new a.UniformColor(m),u_accent:new a.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new a.UniformMatrix4f(m),u_image:new a.Uniform1i(m),u_dimension:new a.Uniform2f(m),u_zoom:new a.Uniform1f(m),u_unpack:new a.Uniform4f(m)}),line:m=>({u_matrix:new a.UniformMatrix4f(m),u_pixels_to_tile_units:new a.UniformMatrix2f(m),u_device_pixel_ratio:new a.Uniform1f(m),u_units_to_pixels:new a.Uniform2f(m),u_dash_image:new a.Uniform1i(m),u_gradient_image:new a.Uniform1i(m),u_image_height:new a.Uniform1f(m),u_texsize:new a.Uniform2f(m),u_tile_units_to_pixels:new a.Uniform1f(m),u_alpha_discard_threshold:new a.Uniform1f(m),u_trim_offset:new a.Uniform2f(m)}),linePattern:m=>({u_matrix:new a.UniformMatrix4f(m),u_texsize:new a.Uniform2f(m),u_pixels_to_tile_units:new a.UniformMatrix2f(m),u_device_pixel_ratio:new a.Uniform1f(m),u_image:new a.Uniform1i(m),u_units_to_pixels:new a.Uniform2f(m),u_tile_units_to_pixels:new a.Uniform1f(m),u_alpha_discard_threshold:new a.Uniform1f(m)}),raster:m=>({u_matrix:new a.UniformMatrix4f(m),u_tl_parent:new a.Uniform2f(m),u_scale_parent:new a.Uniform1f(m),u_fade_t:new a.Uniform1f(m),u_opacity:new a.Uniform1f(m),u_image0:new a.Uniform1i(m),u_image1:new a.Uniform1i(m),u_brightness_low:new a.Uniform1f(m),u_brightness_high:new a.Uniform1f(m),u_saturation_factor:new a.Uniform1f(m),u_contrast_factor:new a.Uniform1f(m),u_spin_weights:new a.Uniform3f(m),u_perspective_transform:new a.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new a.Uniform1i(m),u_is_size_feature_constant:new a.Uniform1i(m),u_size_t:new a.Uniform1f(m),u_size:new a.Uniform1f(m),u_camera_to_center_distance:new a.Uniform1f(m),u_rotate_symbol:new a.Uniform1i(m),u_aspect_ratio:new a.Uniform1f(m),u_fade_change:new a.Uniform1f(m),u_matrix:new a.UniformMatrix4f(m),u_label_plane_matrix:new a.UniformMatrix4f(m),u_coord_matrix:new a.UniformMatrix4f(m),u_is_text:new a.Uniform1i(m),u_pitch_with_map:new a.Uniform1i(m),u_texsize:new a.Uniform2f(m),u_tile_id:new a.Uniform3f(m),u_zoom_transition:new a.Uniform1f(m),u_inv_rot_matrix:new a.UniformMatrix4f(m),u_merc_center:new a.Uniform2f(m),u_camera_forward:new a.Uniform3f(m),u_tile_matrix:new a.UniformMatrix4f(m),u_up_vector:new a.Uniform3f(m),u_ecef_origin:new a.Uniform3f(m),u_texture:new a.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new a.Uniform1i(m),u_is_size_feature_constant:new a.Uniform1i(m),u_size_t:new a.Uniform1f(m),u_size:new a.Uniform1f(m),u_camera_to_center_distance:new a.Uniform1f(m),u_rotate_symbol:new a.Uniform1i(m),u_aspect_ratio:new a.Uniform1f(m),u_fade_change:new a.Uniform1f(m),u_matrix:new a.UniformMatrix4f(m),u_label_plane_matrix:new a.UniformMatrix4f(m),u_coord_matrix:new a.UniformMatrix4f(m),u_is_text:new a.Uniform1i(m),u_pitch_with_map:new a.Uniform1i(m),u_texsize:new a.Uniform2f(m),u_texture:new a.Uniform1i(m),u_gamma_scale:new a.Uniform1f(m),u_device_pixel_ratio:new a.Uniform1f(m),u_tile_id:new a.Uniform3f(m),u_zoom_transition:new a.Uniform1f(m),u_inv_rot_matrix:new a.UniformMatrix4f(m),u_merc_center:new a.Uniform2f(m),u_camera_forward:new a.Uniform3f(m),u_tile_matrix:new a.UniformMatrix4f(m),u_up_vector:new a.Uniform3f(m),u_ecef_origin:new a.Uniform3f(m),u_is_halo:new a.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new a.Uniform1i(m),u_is_size_feature_constant:new a.Uniform1i(m),u_size_t:new a.Uniform1f(m),u_size:new a.Uniform1f(m),u_camera_to_center_distance:new a.Uniform1f(m),u_rotate_symbol:new a.Uniform1i(m),u_aspect_ratio:new a.Uniform1f(m),u_fade_change:new a.Uniform1f(m),u_matrix:new a.UniformMatrix4f(m),u_label_plane_matrix:new a.UniformMatrix4f(m),u_coord_matrix:new a.UniformMatrix4f(m),u_is_text:new a.Uniform1i(m),u_pitch_with_map:new a.Uniform1i(m),u_texsize:new a.Uniform2f(m),u_texsize_icon:new a.Uniform2f(m),u_texture:new a.Uniform1i(m),u_texture_icon:new a.Uniform1i(m),u_gamma_scale:new a.Uniform1f(m),u_device_pixel_ratio:new a.Uniform1f(m),u_is_halo:new a.Uniform1i(m)}),background:m=>({u_matrix:new a.UniformMatrix4f(m),u_opacity:new a.Uniform1f(m),u_color:new a.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new a.UniformMatrix4f(m),u_opacity:new a.Uniform1f(m),u_image:new a.Uniform1i(m),u_pattern_tl:new a.Uniform2f(m),u_pattern_br:new a.Uniform2f(m),u_texsize:new a.Uniform2f(m),u_pattern_size:new a.Uniform2f(m),u_pixel_coord_upper:new a.Uniform2f(m),u_pixel_coord_lower:new a.Uniform2f(m),u_tile_units_to_pixels:new a.Uniform1f(m)}),terrainRaster:ir,terrainDepth:ir,skybox:m=>({u_matrix:new a.UniformMatrix4f(m),u_sun_direction:new a.Uniform3f(m),u_cubemap:new a.Uniform1i(m),u_opacity:new a.Uniform1f(m),u_temporal_offset:new a.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new a.UniformMatrix4f(m),u_color_ramp:new a.Uniform1i(m),u_center_direction:new a.Uniform3f(m),u_radius:new a.Uniform1f(m),u_opacity:new a.Uniform1f(m),u_temporal_offset:new a.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new a.UniformMatrix3f(m),u_sun_direction:new a.Uniform3f(m),u_sun_intensity:new a.Uniform1f(m),u_color_tint_r:new a.Uniform4f(m),u_color_tint_m:new a.Uniform4f(m),u_luminance:new a.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new a.UniformMatrix4f(m),u_globe_matrix:new a.UniformMatrix4f(m),u_normalize_matrix:new a.UniformMatrix4f(m),u_merc_matrix:new a.UniformMatrix4f(m),u_zoom_transition:new a.Uniform1f(m),u_merc_center:new a.Uniform2f(m),u_image0:new a.Uniform1i(m),u_grid_matrix:new a.UniformMatrix3f(m),u_skirt_height:new a.Uniform1f(m),u_frustum_tl:new a.Uniform3f(m),u_frustum_tr:new a.Uniform3f(m),u_frustum_br:new a.Uniform3f(m),u_frustum_bl:new a.Uniform3f(m),u_globe_pos:new a.Uniform3f(m),u_globe_radius:new a.Uniform1f(m),u_viewport:new a.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new a.Uniform3f(m),u_frustum_tr:new a.Uniform3f(m),u_frustum_br:new a.Uniform3f(m),u_frustum_bl:new a.Uniform3f(m),u_horizon:new a.Uniform1f(m),u_transition:new a.Uniform1f(m),u_fadeout_range:new a.Uniform1f(m),u_color:new a.Uniform4f(m),u_high_color:new a.Uniform4f(m),u_space_color:new a.Uniform4f(m),u_star_intensity:new a.Uniform1f(m),u_star_density:new a.Uniform1f(m),u_star_size:new a.Uniform1f(m),u_temporal_offset:new a.Uniform1f(m),u_horizon_angle:new a.Uniform1f(m),u_rotation_matrix:new a.UniformMatrix4f(m)})};let Qu;function Rl(m,l,h,_,x,w,C){const I=m.context,O=I.gl,j=m.transform,B=m.useProgram("collisionBox"),Y=[];let se=0,de=0;for(let Se=0;Se<_.length;Se++){const $e=_[Se],Ve=l.getTile($e),Ue=Ve.getBucket(h);if(!Ue)continue;const Qe=ha($e,Ue,j);let Je=Qe;x[0]===0&&x[1]===0||(Je=m.translatePosMatrix(Qe,Ve,x,w));const dt=C?Ue.textCollisionBox:Ue.iconCollisionBox,Ut=Ue.collisionCircleArray;if(Ut.length>0){const at=a.create(),kt=Je;a.mul(at,Ue.placementInvProjMatrix,j.glCoordMatrix),a.mul(at,at,Ue.placementViewportMatrix),Y.push({circleArray:Ut,circleOffset:de,transform:kt,invTransform:at,projection:Ue.getProjection()}),se+=Ut.length/4,de=se}dt&&(m.terrain&&m.terrain.setupElevationDraw(Ve,B),B.draw(I,O.LINES,a.DepthMode.disabled,a.StencilMode.disabled,m.colorModeForRenderPass(),a.CullFaceMode.disabled,gc(Je,j,Ve,Ue.getProjection()),h.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,null,j.zoom,null,[dt.collisionVertexBuffer,dt.collisionVertexBufferExt]))}if(!C||!Y.length)return;const fe=m.useProgram("collisionCircle"),pe=new a.StructArrayLayout2f1f2i16;pe.resize(4*se),pe._trim();let ge=0;for(const Se of Y)for(let $e=0;$e<Se.circleArray.length/4;$e++){const Ve=4*$e,Ue=Se.circleArray[Ve+0],Qe=Se.circleArray[Ve+1],Je=Se.circleArray[Ve+2],dt=Se.circleArray[Ve+3];pe.emplace(ge++,Ue,Qe,Je,dt,0),pe.emplace(ge++,Ue,Qe,Je,dt,1),pe.emplace(ge++,Ue,Qe,Je,dt,2),pe.emplace(ge++,Ue,Qe,Je,dt,3)}(!Qu||Qu.length<2*se)&&(Qu=function(Se){const $e=2*Se,Ve=new a.StructArrayLayout3ui6;Ve.resize($e),Ve._trim();for(let Ue=0;Ue<$e;Ue++){const Qe=6*Ue;Ve.uint16[Qe+0]=4*Ue+0,Ve.uint16[Qe+1]=4*Ue+1,Ve.uint16[Qe+2]=4*Ue+2,Ve.uint16[Qe+3]=4*Ue+2,Ve.uint16[Qe+4]=4*Ue+3,Ve.uint16[Qe+5]=4*Ue+0}return Ve}(se));const J=I.createIndexBuffer(Qu,!0),ue=I.createVertexBuffer(pe,a.collisionCircleLayout.members,!0);for(const Se of Y){const $e={u_matrix:Se.transform,u_inv_matrix:Se.invTransform,u_camera_to_center_distance:(we=j).getCameraToCenterDistance(Se.projection),u_viewport_size:[we.width,we.height]};fe.draw(I,O.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,m.colorModeForRenderPass(),a.CullFaceMode.disabled,$e,h.id,ue,J,a.SegmentVector.simpleSegment(0,2*Se.circleOffset,Se.circleArray.length,Se.circleArray.length/2),null,j.zoom)}var we;ue.destroy(),J.destroy()}const vh=a.create();function Ce({width:m,height:l,anchor:h,textOffset:_,textScale:x},w){const{horizontalAlign:C,verticalAlign:I}=a.getAnchorAlignment(h),O=-(C-.5)*m,j=-(I-.5)*l,B=a.evaluateVariableOffset(h,_);return new a.Point((O/x+B[0])*w,(j/x+B[1])*w)}function Ke(m,l,h,_,x,w,C,I,O,j,B){const Y=m.text.placedSymbolArray,se=m.text.dynamicLayoutVertexArray,de=m.icon.dynamicLayoutVertexArray,fe={},pe=m.getProjection(),ge=li(I,pe,w),J=w.elevation,ue=pe.upVectorScale(I.canonical,w.center.lat,w.worldSize).metersToTile;se.clear();for(let we=0;we<Y.length;we++){const Se=Y.get(we),{tileAnchorX:$e,tileAnchorY:Ve,numGlyphs:Ue}=Se,Qe=Se.hidden||!Se.crossTileID||m.allowVerticalPlacement&&!Se.placedOrientation?null:_[Se.crossTileID];if(Qe){let Je=0,dt=0,Ut=0;if(J){const Ht=J?J.getAtTileOffset(I,$e,Ve):0,[zn,Qn,Sn]=pe.upVector(I.canonical,$e,Ve);Je=Ht*zn*ue,dt=Ht*Qn*ue,Ut=Ht*Sn*ue}let[at,kt,ft,jt]=Hi(Se.projectedAnchorX+Je,Se.projectedAnchorY+dt,Se.projectedAnchorZ+Ut,h?ge:C);const ut=Ao(w.getCameraToCenterDistance(pe),jt);let St=x.evaluateSizeForFeature(m.textSizeData,j,Se)*ut/a.ONE_EM;h&&(St*=m.tilePixelRatio/O);const Wt=Ce(Qe,St);h?({x:at,y:kt,z:ft}=pe.projectTilePoint($e+Wt.x,Ve+Wt.y,I.canonical),[at,kt,ft]=Hi(at+Je,kt+dt,ft+Ut,C)):(l&&Wt._rotate(-w.angle),at+=Wt.x,kt+=Wt.y,ft=0);const zt=m.allowVerticalPlacement&&Se.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let Ht=0;Ht<Ue;Ht++)a.addDynamicAttributes(se,at,kt,ft,zt);B&&Se.associatedIconIndex>=0&&(fe[Se.associatedIconIndex]={x:at,y:kt,z:ft,angle:zt})}else Fa(Ue,se)}if(B){de.clear();const we=m.icon.placedSymbolArray;for(let Se=0;Se<we.length;Se++){const $e=we.get(Se),{numGlyphs:Ve}=$e,Ue=fe[Se];if($e.hidden||!Ue)Fa(Ve,de);else{const{x:Qe,y:Je,z:dt,angle:Ut}=Ue;for(let at=0;at<Ve;at++)a.addDynamicAttributes(de,Qe,Je,dt,Ut)}}m.icon.dynamicLayoutVertexBuffer.updateData(de)}m.text.dynamicLayoutVertexBuffer.updateData(se)}function pt(m,l,h){return h.iconsInText&&l?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function vt(m,l,h,_,x,w,C,I,O,j,B,Y){const se=m.context,de=se.gl,fe=m.transform,pe=I==="map",ge=O==="map",J=pe&&h.layout.get("symbol-placement")!=="point",ue=pe&&!ge&&!J,we=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Se=!1;const $e=m.depthModeForSublayer(0,a.DepthMode.ReadOnly),Ve=[a.mercatorXfromLng(fe.center.lng),a.mercatorYfromLat(fe.center.lat)],Ue=h.layout.get("text-variable-anchor"),Qe=fe.projection.name==="globe",Je=[],dt=[0,-1,0];let Ut=dt;!Qe&&!fe.mercatorFromTransition||pe||(Ut=function(at){const kt=at._camera.getWorldToCamera(at.worldSize,1),ft=a.multiply([],kt,at.globeMatrix);a.invert(ft,ft);const jt=[0,0,0],ut=[0,1,0,0];return a.transformMat4$1(ut,ut,ft),jt[0]=ut[0],jt[1]=ut[1],jt[2]=ut[2],a.normalize(jt,jt),jt}(fe));for(const at of _){const kt=l.getTile(at),ft=kt.getBucket(h);if(!ft||ft.projection.name==="mercator"&&Qe)continue;const jt=x?ft.text:ft.icon;if(!jt||ft.fullyClipped||!jt.segments.get().length)continue;const ut=jt.programConfigurations.get(h.id),St=x||ft.sdfIcons,Wt=x?ft.textSizeData:ft.iconSizeData,zt=ge||fe.pitch!==0,Ht=a.evaluateSizeForZoom(Wt,fe.zoom);let zn,Qn,Sn,Gn,Er=[0,0],yr=null;if(x)Qn=kt.glyphAtlasTexture,Sn=de.LINEAR,zn=kt.glyphAtlasTexture.size,ft.iconsInText&&(Er=kt.imageAtlasTexture.size,yr=kt.imageAtlasTexture,Gn=zt||m.options.rotating||m.options.zooming||Wt.kind==="composite"||Wt.kind==="camera"?de.LINEAR:de.NEAREST);else{const Ll=h.layout.get("icon-size").constantOr(0)!==1||ft.iconsNeedLinear;Qn=kt.imageAtlasTexture,Sn=St||m.options.rotating||m.options.zooming||Ll||zt?de.LINEAR:de.NEAREST,zn=kt.imageAtlasTexture.size}const Mn=ft.projection.name==="globe",Fr=Mn?Ut:dt,Vr=Mn?a.globeToMercatorTransition(fe.zoom):0,Wr=li(at,ft.getProjection(),fe),Hr=fe.calculatePixelsToTileUnitsMatrix(kt),Go=yt(Wr,kt.tileID.canonical,ge,pe,fe,ft.getProjection(),Hr),wo=m.terrain&&ge&&J?a.invert(a.create(),Go):vh,es=Qr(Wr,kt.tileID.canonical,ge,pe,fe,ft.getProjection(),Hr),Ks=Ue&&ft.hasTextData(),gi=h.layout.get("icon-text-fit")!=="none"&&Ks&&ft.hasIconData();if(J){const Ll=fe.elevation,wc=Ll?Ll.getAtTileOffsetFunc(at,fe.center.lat,fe.worldSize,ft.getProjection()):null,mu=da(Wr,kt.tileID.canonical,ge,pe,fe,ft.getProjection(),Hr);lc(ft,Wr,m,x,mu,es,ge,j,wc,at)}const qr=J||x&&Ue||gi,Or=m.translatePosMatrix(Wr,kt,w,C),Gi=qr?vh:Go,oa=m.translatePosMatrix(es,kt,w,C,!0),hi=ft.getProjection().createInversionMatrix(fe,at.canonical),_a=[];m.terrainRenderModeElevated()&&ge&&_a.push("PITCH_WITH_MAP_TERRAIN"),Mn&&_a.push("PROJECTION_GLOBE_VIEW"),qr&&_a.push("PROJECTED_POS_ON_VIEWPORT");const Kp=St&&h.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let fu;fu=St?ft.iconsInText?Np(Wt.kind,Ht,ue,ge,m,Or,Gi,oa,zn,Er,at,Vr,Ve,hi,Fr,ft.getProjection()):vc(Wt.kind,Ht,ue,ge,m,Or,Gi,oa,x,zn,!0,at,Vr,Ve,hi,Fr,ft.getProjection()):yc(Wt.kind,Ht,ue,ge,m,Or,Gi,oa,x,zn,at,Vr,Ve,hi,Fr,ft.getProjection());const Ih={program:m.useProgram(pt(St,x,ft),ut,_a),buffers:jt,uniformValues:fu,atlasTexture:Qn,atlasTextureIcon:yr,atlasInterpolation:Sn,atlasInterpolationIcon:Gn,isSDF:St,hasHalo:Kp,tile:kt,labelPlaneMatrixInv:wo};if(we&&ft.canOverlap){Se=!0;const Ll=jt.segments.get();for(const wc of Ll)Je.push({segments:new a.SegmentVector([wc]),sortKey:wc.sortKey,state:Ih})}else Je.push({segments:jt.segments,sortKey:0,state:Ih})}Se&&Je.sort((at,kt)=>at.sortKey-kt.sortKey);for(const at of Je){const kt=at.state;if(m.terrain&&m.terrain.setupElevationDraw(kt.tile,kt.program,{useDepthForOcclusion:!Qe,labelPlaneMatrixInv:kt.labelPlaneMatrixInv}),se.activeTexture.set(de.TEXTURE0),kt.atlasTexture.bind(kt.atlasInterpolation,de.CLAMP_TO_EDGE),kt.atlasTextureIcon&&(se.activeTexture.set(de.TEXTURE1),kt.atlasTextureIcon&&kt.atlasTextureIcon.bind(kt.atlasInterpolationIcon,de.CLAMP_TO_EDGE)),kt.isSDF){const ft=kt.uniformValues;kt.hasHalo&&(ft.u_is_halo=1,Mt(kt.buffers,at.segments,h,m,kt.program,$e,B,Y,ft)),ft.u_is_halo=0}Mt(kt.buffers,at.segments,h,m,kt.program,$e,B,Y,kt.uniformValues)}}function Mt(m,l,h,_,x,w,C,I,O){const j=_.context,B=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];x.draw(j,j.gl.TRIANGLES,w,C,I,a.CullFaceMode.disabled,O,h.id,m.layoutVertexBuffer,m.indexBuffer,l,h.paint,_.transform.zoom,m.programConfigurations.get(h.id),B)}function fn(m,l,h,_,x,w,C){const I=m.context.gl,O=h.paint.get("fill-pattern"),j=O&&O.constantOr(1);let B,Y,se,de,fe;C?(Y=j&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=I.LINES):(Y=j?"fillPattern":"fill",B=I.TRIANGLES);for(const pe of _){const ge=l.getTile(pe);if(j&&!ge.patternsLoaded())continue;const J=ge.getBucket(h);if(!J)continue;m.prepareDrawTile();const ue=J.programConfigurations.get(h.id),we=m.useProgram(Y,ue);j&&(m.context.activeTexture.set(I.TEXTURE0),ge.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ue.updatePaintBuffers());const Se=O.constantOr(null);if(Se&&ge.imageAtlas){const Ve=ge.imageAtlas.patternPositions[Se.toString()];Ve&&ue.setConstantPatternPositions(Ve)}const $e=m.translatePosMatrix(pe.projMatrix,ge,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(C){de=J.indexBuffer2,fe=J.segments2;const Ve=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[I.drawingBufferWidth,I.drawingBufferHeight];se=Y==="fillOutlinePattern"&&j?am($e,m,ge,Ve):Ts($e,Ve)}else de=J.indexBuffer,fe=J.segments,se=j?$a($e,m,ge):Es($e);m.prepareDrawProgram(m.context,we,pe.toUnwrapped()),we.draw(m.context,B,x,m.stencilModeForClipping(pe),w,a.CullFaceMode.disabled,se,h.id,J.layoutVertexBuffer,de,fe,h.paint,m.transform.zoom,ue)}}function Cn(m,l,h,_,x,w,C){const I=m.context,O=I.gl,j=m.transform,B=h.paint.get("fill-extrusion-pattern"),Y=B.constantOr(1),se=h.paint.get("fill-extrusion-opacity"),de=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),h.paint.get("fill-extrusion-ambient-occlusion-radius")],fe=h.layout.get("fill-extrusion-edge-radius"),pe=fe>0&&!h.paint.get("fill-extrusion-rounded-roof"),ge=pe?0:fe,J=j.projection.name==="globe"?a.fillExtrusionHeightLift():0,ue=j.projection.name==="globe",we=ue?a.globeToMercatorTransition(j.zoom):0,Se=[a.mercatorXfromLng(j.center.lng),a.mercatorYfromLat(j.center.lat)],$e=[];ue&&$e.push("PROJECTION_GLOBE_VIEW"),de[0]>0&&$e.push("FAUX_AO"),pe&&$e.push("ZERO_ROOF_RADIUS");for(const Ve of _){const Ue=l.getTile(Ve),Qe=Ue.getBucket(h);if(!Qe||Qe.projection.name!==j.projection.name)continue;const Je=Qe.programConfigurations.get(h.id),dt=m.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",Je,$e);if(m.terrain){const St=m.terrain;if(m.style.terrainSetForDrapingOnly())St.setupElevationDraw(Ue,dt,{useMeterToDem:!0});else{if(!Qe.enableTerrain)continue;if(St.setupElevationDraw(Ue,dt,{useMeterToDem:!0}),Wn(I,l,Ve,Qe,h,St),!Qe.centroidVertexBuffer){const Wt=dt.attributes.a_centroid_pos;Wt!==void 0&&O.vertexAttrib2f(Wt,0,0)}}}Y&&(m.context.activeTexture.set(O.TEXTURE0),Ue.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Je.updatePaintBuffers());const Ut=B.constantOr(null);if(Ut&&Ue.imageAtlas){const St=Ue.imageAtlas.patternPositions[Ut.toString()];St&&Je.setConstantPatternPositions(St)}const at=m.translatePosMatrix(Ve.projMatrix,Ue,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),kt=j.projection.createInversionMatrix(j,Ve.canonical),ft=h.paint.get("fill-extrusion-vertical-gradient"),jt=Y?na(at,m,ft,se,de,ge,Ve,Ue,J,we,Se,kt):Ya(at,m,ft,se,de,ge,Ve,J,we,Se,kt);m.prepareDrawProgram(I,dt,Ve.toUnwrapped());const ut=[];m.terrain&&ut.push(Qe.centroidVertexBuffer),ue&&ut.push(Qe.layoutVertexExtBuffer),dt.draw(I,I.gl.TRIANGLES,x,w,C,a.CullFaceMode.backCCW,jt,h.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,h.paint,m.transform.zoom,Je,ut)}}function Wn(m,l,h,_,x,w){const C=[J=>{let ue=J.canonical.x-1,we=J.wrap;return ue<0&&(ue=(1<<J.canonical.z)-1,we--),new a.OverscaledTileID(J.overscaledZ,we,J.canonical.z,ue,J.canonical.y)},J=>{let ue=J.canonical.x+1,we=J.wrap;return ue===1<<J.canonical.z&&(ue=0,we++),new a.OverscaledTileID(J.overscaledZ,we,J.canonical.z,ue,J.canonical.y)},J=>new a.OverscaledTileID(J.overscaledZ,J.wrap,J.canonical.z,J.canonical.x,(J.canonical.y===0?1<<J.canonical.z:J.canonical.y)-1),J=>new a.OverscaledTileID(J.overscaledZ,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y===(1<<J.canonical.z)-1?0:J.canonical.y+1)],I=J=>{const ue=l.getSource().minzoom,we=$e=>{const Ve=l.getTileByID($e);if(Ve&&Ve.hasData())return Ve.getBucket(x)},Se=[0,-1,1];for(const $e of Se){if(J.overscaledZ+$e<ue)continue;const Ve=we(J.calculateScaledKey(J.overscaledZ+$e));if(Ve)return Ve}},O=[0,0,0],j=(J,ue)=>(O[0]=Math.min(J.min.y,ue.min.y),O[1]=Math.max(J.max.y,ue.max.y),O[2]=a.EXTENT-ue.min.x>J.max.x?ue.min.x-a.EXTENT:J.max.x,O),B=(J,ue)=>(O[0]=Math.min(J.min.x,ue.min.x),O[1]=Math.max(J.max.x,ue.max.x),O[2]=a.EXTENT-ue.min.y>J.max.y?ue.min.y-a.EXTENT:J.max.y,O),Y=[(J,ue)=>j(J,ue),(J,ue)=>j(ue,J),(J,ue)=>B(J,ue),(J,ue)=>B(ue,J)],se=new a.Point(0,0);let de,fe,pe;const ge=(J,ue,we,Se,$e)=>{const Ve=[[Se?we:J,Se?J:we,0],[Se?we:ue,Se?ue:we,0]],Ue=$e<0?a.EXTENT+$e:$e,Qe=[Se?Ue:(J+ue)/2,Se?(J+ue)/2:Ue,0];return we===0&&$e<0||we!==0&&$e>0?w.getForTilePoints(pe,[Qe],!0,fe):Ve.push(Qe),w.getForTilePoints(h,Ve,!0,de),Math.max(Ve[0][2],Ve[1][2],Qe[2])/w.exaggeration()};for(let J=0;J<4;J++){const ue=(J<2?1:5)-J,we=_.borders[J];if(we.length===0)continue;const Se=pe=C[J](h),$e=I(Se);if(!($e&&$e instanceof a.FillExtrusionBucket&&$e.enableTerrain)||_.borderDoneWithNeighborZ[J]===$e.canonical.z&&$e.borderDoneWithNeighborZ[ue]===_.canonical.z||(fe=w.findDEMTileFor(Se),!fe||!fe.dem))continue;if(!de){const Je=w.findDEMTileFor(h);if(!Je||!Je.dem)return;de=Je}const Ve=$e.borders[ue];let Ue=0;const Qe=$e.borderDoneWithNeighborZ[ue]!==_.canonical.z;if(_.canonical.z===$e.canonical.z){for(let Je=0;Je<we.length;Je++){const dt=_.featuresOnBorder[we[Je]],Ut=dt.borders[J];let at;for(;Ue<Ve.length&&(at=$e.featuresOnBorder[Ve[Ue]],!(at.borders[ue][1]>Ut[0]+3));)Qe&&$e.encodeCentroid(void 0,at,!1),Ue++;if(at&&Ue<Ve.length){const kt=Ue;let ft=0;for(;!(at.borders[ue][0]>Ut[1]-3)&&(ft++,++Ue!==Ve.length);)at=$e.featuresOnBorder[Ve[Ue]];if(at=$e.featuresOnBorder[Ve[kt]],dt.intersectsCount()>1||at.intersectsCount()>1||ft!==1){ft!==1&&(Ue=kt),_.encodeCentroid(void 0,dt,!1),Qe&&$e.encodeCentroid(void 0,at,!1);continue}const jt=Y[J](dt,at),ut=J%2?a.EXTENT-1:0;se.x=ge(jt[0],Math.min(a.EXTENT-1,jt[1]),ut,J<2,jt[2]),se.y=0,_.encodeCentroid(se,dt,!1),Qe&&$e.encodeCentroid(se,at,!1)}else _.encodeCentroid(void 0,dt,!1)}_.borderDoneWithNeighborZ[J]=$e.canonical.z,_.needsCentroidUpdate=!0,Qe&&($e.borderDoneWithNeighborZ[ue]=_.canonical.z,$e.needsCentroidUpdate=!0)}else{for(const Je of we)_.encodeCentroid(void 0,_.featuresOnBorder[Je],!1);if(Qe){for(const Je of Ve)$e.encodeCentroid(void 0,$e.featuresOnBorder[Je],!1);$e.borderDoneWithNeighborZ[ue]=_.canonical.z,$e.needsCentroidUpdate=!0}_.borderDoneWithNeighborZ[J]=$e.canonical.z,_.needsCentroidUpdate=!0}}(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(m)}const Tn=new a.Color(1,0,0,1),kr=new a.Color(0,1,0,1),or=new a.Color(0,0,1,1),pr=new a.Color(1,0,1,1),Cr=new a.Color(0,1,1,1);function Jn(m,l,h){const _=m.context,x=m.transform,w=_.gl,C=x.projection.name==="globe",I=C?["PROJECTION_GLOBE_VIEW"]:null;let O=h.projMatrix;if(C&&a.globeToMercatorTransition(x.zoom)>0){const dt=a.transitionTileAABBinECEF(h.canonical,x),Ut=a.globeDenormalizeECEF(dt);O=a.multiply(new Float32Array(16),x.globeMatrix,Ut),a.multiply(O,x.projMatrix,O)}const j=m.useProgram("debug",null,I),B=l.getTileByID(h.key);m.terrain&&m.terrain.setupElevationDraw(B,j);const Y=a.DepthMode.disabled,se=a.StencilMode.disabled,de=m.colorModeForRenderPass(),fe="$debug";_.activeTexture.set(w.TEXTURE0),m.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),C?B._makeGlobeTileDebugBuffers(m.context,x):B._makeDebugTileBoundsBuffers(m.context,x.projection);const pe=B._tileDebugBuffer||m.debugBuffer,ge=B._tileDebugIndexBuffer||m.debugIndexBuffer,J=B._tileDebugSegments||m.debugSegments;j.draw(_,w.LINE_STRIP,Y,se,de,a.CullFaceMode.disabled,Wo(O,a.Color.red),fe,pe,ge,J,null,null,null,[B._globeTileDebugBorderBuffer]);const ue=B.latestRawTileData,we=Math.floor((ue&&ue.byteLength||0)/1024),Se=l.getTile(h).tileSize,$e=512/Math.min(Se,512)*(h.overscaledZ/x.zoom)*.5;let Ve=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Ve+=` => ${h.overscaledZ}`),Ve+=` ${we}kb`,function(dt,Ut){dt.initDebugOverlayCanvas();const at=dt.debugOverlayCanvas,kt=dt.context.gl,ft=dt.debugOverlayCanvas.getContext("2d");ft.clearRect(0,0,at.width,at.height),ft.shadowColor="white",ft.shadowBlur=2,ft.lineWidth=1.5,ft.strokeStyle="white",ft.textBaseline="top",ft.font="bold 36px Open Sans, sans-serif",ft.fillText(Ut,5,5),ft.strokeText(Ut,5,5),dt.debugOverlayTexture.update(at),dt.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(m,Ve);const Ue=B._tileDebugTextBuffer||m.debugBuffer,Qe=B._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Je=B._tileDebugTextSegments||m.debugSegments;j.draw(_,w.TRIANGLES,Y,se,a.ColorMode.alphaBlended,a.CullFaceMode.disabled,Wo(O,a.Color.transparent,$e),fe,Ue,Qe,Je,null,null,null,[B._globeTileDebugTextBuffer])}function ti(m,l,h,_){Ri(m,0,l+h/2,m.transform.width,h,_)}function go(m,l,h,_){Ri(m,l-h/2,0,h,m.transform.height,_)}function Ri(m,l,h,_,x,w){const C=m.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(l*a.exported.devicePixelRatio,h*a.exported.devicePixelRatio,_*a.exported.devicePixelRatio,x*a.exported.devicePixelRatio),C.clear({color:w}),I.disable(I.SCISSOR_TEST)}const ia=a.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ua}=ia;function Ho(m,l,h,_){m.emplaceBack(l,h,_)}class oo{constructor(l){this.vertexArray=new a.StructArrayLayout3f12,this.indices=new a.StructArrayLayout3ui6,Ho(this.vertexArray,-1,-1,1),Ho(this.vertexArray,1,-1,1),Ho(this.vertexArray,-1,1,1),Ho(this.vertexArray,1,1,1),Ho(this.vertexArray,-1,-1,-1),Ho(this.vertexArray,1,-1,-1),Ho(this.vertexArray,-1,1,-1),Ho(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,Ua),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=a.SegmentVector.simpleSegment(0,0,36,12)}}function Ja(m,l,h,_,x,w){const C=m.gl,I=l.paint.get("sky-atmosphere-color"),O=l.paint.get("sky-atmosphere-halo-color"),j=l.paint.get("sky-atmosphere-sun-intensity"),B=((Y,se,de,fe,pe)=>({u_matrix_3f:Y,u_sun_direction:se,u_sun_intensity:de,u_color_tint_r:[fe.r,fe.g,fe.b,fe.a],u_color_tint_m:[pe.r,pe.g,pe.b,pe.a],u_luminance:5e-5}))(a.fromMat4(a.create$1(),_),x,j,I,O);C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+w,l.skyboxTexture,0),h.draw(m,C.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,a.ColorMode.unblended,a.CullFaceMode.frontCW,B,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const xh=a.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class A_{constructor(l){const h=new a.StructArrayLayout5f20;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const _=new a.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(h,xh.members),this.indexBuffer=l.createIndexBuffer(_),this.segments=a.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const du={symbol:function(m,l,h,_,x){if(m.renderPass!=="translucent")return;const w=a.StencilMode.disabled,C=m.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(I,O,j,B,Y,se,de){const fe=O.transform,pe=Y==="map",ge=se==="map";for(const J of I){const ue=B.getTile(J),we=ue.getBucket(j);if(!we||!we.text||!we.text.segments.get().length)continue;const Se=a.evaluateSizeForZoom(we.textSizeData,fe.zoom),$e=li(J,we.getProjection(),fe),Ve=fe.calculatePixelsToTileUnitsMatrix(ue),Ue=yt($e,ue.tileID.canonical,ge,pe,fe,we.getProjection(),Ve),Qe=j.layout.get("icon-text-fit")!=="none"&&we.hasIconData();if(Se){const Je=Math.pow(2,fe.zoom-ue.tileID.overscaledZ);Ke(we,pe,ge,de,a.symbolSize,fe,Ue,J,Je,Se,Qe)}}}(_,m,h,l,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),x),h.paint.get("icon-opacity").constantOr(1)!==0&&vt(m,l,h,_,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),w,C),h.paint.get("text-opacity").constantOr(1)!==0&&vt(m,l,h,_,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),w,C),l.map.showCollisionBoxes&&(Rl(m,l,h,_,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),Rl(m,l,h,_,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(m,l,h,_){if(m.renderPass!=="translucent")return;const x=h.paint.get("circle-opacity"),w=h.paint.get("circle-stroke-width"),C=h.paint.get("circle-stroke-opacity"),I=h.layout.get("circle-sort-key").constantOr(1)!==void 0;if(x.constantOr(1)===0&&(w.constantOr(1)===0||C.constantOr(1)===0))return;const O=m.context,j=O.gl,B=m.transform,Y=m.depthModeForSublayer(0,a.DepthMode.ReadOnly),se=a.StencilMode.disabled,de=m.colorModeForRenderPass(),fe=B.projection.name==="globe",pe=[a.mercatorXfromLng(B.center.lng),a.mercatorYfromLat(B.center.lat)],ge=[];for(let ue=0;ue<_.length;ue++){const we=_[ue],Se=l.getTile(we),$e=Se.getBucket(h);if(!$e||$e.projection.name!==B.projection.name)continue;const Ve=$e.programConfigurations.get(h.id),Ue=jr(h);fe&&Ue.push("PROJECTION_GLOBE_VIEW");const Qe=m.useProgram("circle",Ve,Ue),Je=$e.layoutVertexBuffer,dt=$e.globeExtVertexBuffer,Ut=$e.indexBuffer,at=B.projection.createInversionMatrix(B,we.canonical),kt={programConfiguration:Ve,program:Qe,layoutVertexBuffer:Je,globeExtVertexBuffer:dt,indexBuffer:Ut,uniformValues:_h(m,we,Se,at,pe,h),tile:Se};if(I){const ft=$e.segments.get();for(const jt of ft)ge.push({segments:new a.SegmentVector([jt]),sortKey:jt.sortKey,state:kt})}else ge.push({segments:$e.segments,sortKey:0,state:kt})}I&&ge.sort((ue,we)=>ue.sortKey-we.sortKey);const J={useDepthForOcclusion:!fe};for(const ue of ge){const{programConfiguration:we,program:Se,layoutVertexBuffer:$e,globeExtVertexBuffer:Ve,indexBuffer:Ue,uniformValues:Qe,tile:Je}=ue.state,dt=ue.segments;m.terrain&&m.terrain.setupElevationDraw(Je,Se,J),m.prepareDrawProgram(O,Se,Je.tileID.toUnwrapped()),Se.draw(O,j.TRIANGLES,Y,se,de,a.CullFaceMode.disabled,Qe,h.id,$e,Ue,dt,h.paint,B.zoom,we,[Ve])}},heatmap:function(m,l,h,_){if(h.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const x=m.context,w=x.gl,C=a.StencilMode.disabled,I=new a.ColorMode([w.ONE,w.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(de,fe,pe,ge){const J=de.gl,ue=fe.width*ge,we=fe.height*ge;de.activeTexture.set(J.TEXTURE1),de.viewport.set([0,0,ue,we]);let Se=pe.heatmapFbo;if(!Se||Se&&(Se.width!==ue||Se.height!==we)){Se&&Se.destroy();const $e=J.createTexture();J.bindTexture(J.TEXTURE_2D,$e),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),Se=pe.heatmapFbo=de.createFramebuffer(ue,we,!1),function(Ve,Ue,Qe,Je,dt,Ut){const at=Ve.gl;at.texImage2D(at.TEXTURE_2D,0,Ve.isWebGL2&&Ve.extRenderToTextureHalfFloat?at.RGBA16F:at.RGBA,dt,Ut,0,at.RGBA,Ve.extRenderToTextureHalfFloat?Ve.isWebGL2?at.HALF_FLOAT:Ve.extTextureHalfFloat.HALF_FLOAT_OES:at.UNSIGNED_BYTE,null),Je.colorAttachment.set(Qe)}(de,0,$e,Se,ue,we)}else J.bindTexture(J.TEXTURE_2D,Se.colorAttachment.get()),de.bindFramebuffer.set(Se.framebuffer)})(x,m,h,m.transform.projection.name==="globe"?.5:.25),x.clear({color:a.Color.transparent});const O=m.transform,j=O.projection.name==="globe",B=j?["PROJECTION_GLOBE_VIEW"]:null,Y=j?a.CullFaceMode.frontCCW:a.CullFaceMode.disabled,se=[a.mercatorXfromLng(O.center.lng),a.mercatorYfromLat(O.center.lat)];for(let de=0;de<_.length;de++){const fe=_[de];if(l.hasRenderableParent(fe))continue;const pe=l.getTile(fe),ge=pe.getBucket(h);if(!ge||ge.projection.name!==O.projection.name)continue;const J=ge.programConfigurations.get(h.id),ue=m.useProgram("heatmap",J,B),{zoom:we}=m.transform;m.terrain&&m.terrain.setupElevationDraw(pe,ue),m.prepareDrawProgram(x,ue,fe.toUnwrapped());const Se=O.projection.createInversionMatrix(O,fe.canonical);ue.draw(x,w.TRIANGLES,a.DepthMode.disabled,C,I,Y,zp(m,fe,pe,Se,se,we,h.paint.get("heatmap-intensity")),h.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,h.paint,m.transform.zoom,J,j?[ge.globeExtVertexBuffer]:null)}x.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(x,w){const C=x.context,I=C.gl,O=w.heatmapFbo;if(!O)return;C.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,O.colorAttachment.get()),C.activeTexture.set(I.TEXTURE1);let j=w.colorRampTexture;j||(j=w.colorRampTexture=new a.Texture(C,w.colorRamp,I.RGBA)),j.bind(I.LINEAR,I.CLAMP_TO_EDGE),x.useProgram("heatmapTexture").draw(C,I.TRIANGLES,a.DepthMode.disabled,a.StencilMode.disabled,x.colorModeForRenderPass(),a.CullFaceMode.disabled,((B,Y,se,de)=>({u_image:0,u_color_ramp:1,u_opacity:Y.paint.get("heatmap-opacity")}))(0,w),w.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,w.paint,x.transform.zoom)}(m,h))},line:function(m,l,h,_){if(m.renderPass!=="translucent")return;const x=h.paint.get("line-opacity"),w=h.paint.get("line-width");if(x.constantOr(1)===0||w.constantOr(1)===0)return;const C=m.depthModeForSublayer(0,a.DepthMode.ReadOnly),I=m.colorModeForRenderPass(),O=m.terrain&&m.terrain.renderingToTexture?1:a.exported.devicePixelRatio,j=h.paint.get("line-dasharray"),B=j.constantOr(1),Y=h.layout.get("line-cap"),se=h.paint.get("line-pattern"),de=se.constantOr(1),fe=h.paint.get("line-gradient"),pe=de?"linePattern":"line",ge=m.context,J=ge.gl,ue=(Se=>{const $e=[];ga(Se)&&$e.push("RENDER_LINE_DASH"),Se.paint.get("line-gradient")&&$e.push("RENDER_LINE_GRADIENT");const Ve=Se.paint.get("line-trim-offset");Ve[0]===0&&Ve[1]===0||$e.push("RENDER_LINE_TRIM_OFFSET");const Ue=Se.paint.get("line-pattern").constantOr(1),Qe=Se.paint.get("line-opacity").constantOr(1)!==1;return!Ue&&Qe&&$e.push("RENDER_LINE_ALPHA_DISCARD"),$e})(h);let we=ue.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(we=!1);for(const Se of _){const $e=l.getTile(Se);if(de&&!$e.patternsLoaded())continue;const Ve=$e.getBucket(h);if(!Ve)continue;m.prepareDrawTile();const Ue=Ve.programConfigurations.get(h.id),Qe=m.useProgram(pe,Ue,ue),Je=se.constantOr(null);if(Je&&$e.imageAtlas){const St=$e.imageAtlas.patternPositions[Je.toString()];St&&Ue.setConstantPatternPositions(St)}const dt=j.constantOr(null),Ut=Y.constantOr(null);if(!de&&dt&&Ut&&$e.lineAtlas){const St=$e.lineAtlas.getDash(dt,Ut);St&&Ue.setConstantPatternPositions(St)}let[at,kt]=h.paint.get("line-trim-offset");(Ut==="round"||Ut==="square")&&at!==kt&&(at===0&&(at-=1),kt===1&&(kt+=1));const ft=m.terrain?Se.projMatrix:null,jt=de?_c(m,$e,h,ft,O):lm(m,$e,h,ft,Ve.lineClipsArray.length,O,[at,kt]);if(fe){const St=Ve.gradients[h.id];let Wt=St.texture;if(h.gradientVersion!==St.version){let zt=256;if(h.stepInterpolant){const Ht=l.getSource().maxzoom,zn=Se.canonical.z===Ht?Math.ceil(1<<m.transform.maxZoom-Se.canonical.z):1;zt=a.clamp(a.nextPowerOfTwo(Ve.maxLineLength/a.EXTENT*1024*zn),256,ge.maxTextureSize)}St.gradient=a.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:zt,image:St.gradient||void 0,clips:Ve.lineClipsArray}),St.texture?St.texture.update(St.gradient):St.texture=new a.Texture(ge,St.gradient,J.RGBA),St.version=h.gradientVersion,Wt=St.texture}ge.activeTexture.set(J.TEXTURE1),Wt.bind(h.stepInterpolant?J.NEAREST:J.LINEAR,J.CLAMP_TO_EDGE)}B&&(ge.activeTexture.set(J.TEXTURE0),$e.lineAtlasTexture.bind(J.LINEAR,J.REPEAT),Ue.updatePaintBuffers()),de&&(ge.activeTexture.set(J.TEXTURE0),$e.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),Ue.updatePaintBuffers()),m.prepareDrawProgram(ge,Qe,Se.toUnwrapped());const ut=St=>{Qe.draw(ge,J.TRIANGLES,C,St,I,a.CullFaceMode.disabled,jt,h.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,h.paint,m.transform.zoom,Ue,[Ve.layoutVertexBuffer2])};if(we){const St=m.stencilModeForClipping(Se).ref;St===0&&m.terrain&&ge.clear({stencil:0});const Wt={func:J.EQUAL,mask:255};jt.u_alpha_discard_threshold=.8,ut(new a.StencilMode(Wt,St,255,J.KEEP,J.KEEP,J.INVERT)),jt.u_alpha_discard_threshold=0,ut(new a.StencilMode(Wt,St,255,J.KEEP,J.KEEP,J.KEEP))}else ut(m.stencilModeForClipping(Se))}we&&(m.resetStencilClippingMasks(),m.terrain&&ge.clear({stencil:0}))},fill:function(m,l,h,_){const x=h.paint.get("fill-color"),w=h.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const C=m.colorModeForRenderPass(),I=h.paint.get("fill-pattern"),O=m.opaquePassEnabledForLayer()&&!I.constantOr(1)&&x.constantOr(a.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===O){const j=m.depthModeForSublayer(1,m.renderPass==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly);fn(m,l,h,_,j,C,!1)}if(m.renderPass==="translucent"&&h.paint.get("fill-antialias")){const j=m.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,a.DepthMode.ReadOnly);fn(m,l,h,_,j,C,!0)}},"fill-extrusion":function(m,l,h,_){const x=h.paint.get("fill-extrusion-opacity");if(x!==0&&m.renderPass==="translucent"){const w=new a.DepthMode(m.context.gl.LEQUAL,a.DepthMode.ReadWrite,m.depthRangeFor3D);if(x!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))Cn(m,l,h,_,w,a.StencilMode.disabled,a.ColorMode.disabled),Cn(m,l,h,_,w,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const C=m.colorModeForRenderPass();Cn(m,l,h,_,w,a.StencilMode.disabled,C)}}},hillshade:function(m,l,h,_){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const x=m.context,w=m.depthModeForSublayer(0,a.DepthMode.ReadOnly),C=m.colorModeForRenderPass(),I=m.terrain&&m.terrain.renderingToTexture,[O,j]=m.renderPass!=="translucent"||I?[{},_]:m.stencilConfigForOverlap(_);for(const B of j){const Y=l.getTile(B);if(Y.needsHillshadePrepare&&m.renderPass==="offscreen")Qt(m,Y,h,w,a.StencilMode.disabled,C);else if(m.renderPass==="translucent"){const se=I&&m.terrain?m.terrain.stencilModeForRTTOverlap(B):O[B.overscaledZ];Lt(m,B,Y,h,w,se,C)}}x.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,l,h,_,x,w){if(m.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!_.length)return;const C=m.context,I=C.gl,O=l.getSource(),j=m.useProgram("raster"),B=m.colorModeForRenderPass(),Y=m.terrain&&m.terrain.renderingToTexture,[se,de]=O instanceof Rn||Y?[{},_]:m.stencilConfigForOverlap(_),fe=de[de.length-1].overscaledZ,pe=!m.options.moving;for(const ge of de){const J=Y?a.DepthMode.disabled:m.depthModeForSublayer(ge.overscaledZ-fe,h.paint.get("raster-opacity")===1?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly,I.LESS),ue=ge.toUnwrapped(),we=l.getTile(ge);if(Y&&(!we||!we.hasData()))continue;const Se=Y?ge.projMatrix:m.transform.calculateProjMatrix(ue,pe),$e=m.terrain&&Y?m.terrain.stencilModeForRTTOverlap(ge):se[ge.overscaledZ],Ve=w?0:h.paint.get("raster-fade-duration");we.registerFadeDuration(Ve);const Ue=l.findLoadedParent(ge,0),Qe=Ir(we,Ue,l,m.transform,Ve);let Je,dt;m.terrain&&m.terrain.prepareDrawTile();const Ut=h.paint.get("raster-resampling")==="nearest"?I.NEAREST:I.LINEAR;C.activeTexture.set(I.TEXTURE0),we.texture.bind(Ut,I.CLAMP_TO_EDGE),C.activeTexture.set(I.TEXTURE1),Ue?(Ue.texture.bind(Ut,I.CLAMP_TO_EDGE),Je=Math.pow(2,Ue.tileID.overscaledZ-we.tileID.overscaledZ),dt=[we.tileID.canonical.x*Je%1,we.tileID.canonical.y*Je%1]):we.texture.bind(Ut,I.CLAMP_TO_EDGE),we.texture.useMipmap&&C.extTextureFilterAnisotropic&&m.transform.pitch>20&&I.texParameterf(I.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax);const at=Ju(Se,dt||[0,0],Je||1,Qe,h,O instanceof Rn?O.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(C,j,ue),O instanceof Rn)O.boundsBuffer&&O.boundsSegments&&j.draw(C,I.TRIANGLES,J,a.StencilMode.disabled,B,a.CullFaceMode.disabled,at,h.id,O.boundsBuffer,m.quadTriangleIndexBuffer,O.boundsSegments);else{const{tileBoundsBuffer:kt,tileBoundsIndexBuffer:ft,tileBoundsSegments:jt}=m.getTileBoundsBuffers(we);j.draw(C,I.TRIANGLES,J,$e,B,a.CullFaceMode.disabled,at,h.id,kt,ft,jt)}}m.resetStencilClippingMasks()},background:function(m,l,h,_){const x=h.paint.get("background-color"),w=h.paint.get("background-opacity");if(w===0)return;const C=m.context,I=C.gl,O=m.transform,j=O.tileSize,B=h.paint.get("background-pattern");if(m.isPatternMissing(B))return;const Y=!B&&x.a===1&&w===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==Y)return;const se=a.StencilMode.disabled,de=m.depthModeForSublayer(0,Y==="opaque"?a.DepthMode.ReadWrite:a.DepthMode.ReadOnly),fe=m.colorModeForRenderPass(),pe=m.useProgram(B?"backgroundPattern":"background");let ge,J=_;J||(ge=m.getBackgroundTiles(),J=Object.values(ge).map(ue=>ue.tileID)),B&&(C.activeTexture.set(I.TEXTURE0),m.imageManager.bind(m.context));for(const ue of J){const we=ue.toUnwrapped(),Se=_?ue.projMatrix:m.transform.calculateProjMatrix(we);m.prepareDrawTile();const $e=l?l.getTile(ue):ge?ge[ue.key]:new a.Tile(ue,j,O.zoom,m),Ve=B?yh(Se,w,m,B,{tileID:ue,tileSize:j}):xc(Se,w,x);m.prepareDrawProgram(C,pe,we);const{tileBoundsBuffer:Ue,tileBoundsIndexBuffer:Qe,tileBoundsSegments:Je}=m.getTileBoundsBuffers($e);pe.draw(C,I.TRIANGLES,de,se,fe,a.CullFaceMode.disabled,Ve,h.id,Ue,Qe,Je)}},sky:function(m,l,h){const _=m.transform,x=_.projection.name==="mercator"||_.projection.name==="globe"?1:a.smoothstep(7,8,_.zoom),w=h.paint.get("sky-opacity")*x;if(w===0)return;const C=m.context,I=h.paint.get("sky-type"),O=new a.DepthMode(C.gl.LEQUAL,a.DepthMode.ReadOnly,[0,1]),j=m.frameCounter/1e3%1;I==="atmosphere"?m.renderPass==="offscreen"?h.needsSkyboxCapture(m)&&(function(B,Y,se,de){const fe=B.context,pe=fe.gl;let ge=Y.skyboxFbo;if(!ge){ge=Y.skyboxFbo=fe.createFramebuffer(32,32,!1),Y.skyboxGeometry=new oo(fe),Y.skyboxTexture=fe.gl.createTexture(),pe.bindTexture(pe.TEXTURE_CUBE_MAP,Y.skyboxTexture),pe.texParameteri(pe.TEXTURE_CUBE_MAP,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_CUBE_MAP,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_CUBE_MAP,pe.TEXTURE_MIN_FILTER,pe.LINEAR),pe.texParameteri(pe.TEXTURE_CUBE_MAP,pe.TEXTURE_MAG_FILTER,pe.LINEAR);for(let Se=0;Se<6;++Se)pe.texImage2D(pe.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,pe.RGBA,32,32,0,pe.RGBA,pe.UNSIGNED_BYTE,null)}fe.bindFramebuffer.set(ge.framebuffer),fe.viewport.set([0,0,32,32]);const J=Y.getCenter(B,!0),ue=B.useProgram("skyboxCapture"),we=new Float64Array(16);a.identity(we),a.rotateY(we,we,.5*-Math.PI),Ja(fe,Y,ue,we,J,0),a.identity(we),a.rotateY(we,we,.5*Math.PI),Ja(fe,Y,ue,we,J,1),a.identity(we),a.rotateX(we,we,.5*-Math.PI),Ja(fe,Y,ue,we,J,2),a.identity(we),a.rotateX(we,we,.5*Math.PI),Ja(fe,Y,ue,we,J,3),a.identity(we),Ja(fe,Y,ue,we,J,4),a.identity(we),a.rotateY(we,we,Math.PI),Ja(fe,Y,ue,we,J,5),fe.viewport.set([0,0,B.width,B.height])}(m,h),h.markSkyboxValid(m)):m.renderPass==="sky"&&function(B,Y,se,de,fe){const pe=B.context,ge=pe.gl,J=B.transform,ue=B.useProgram("skybox");pe.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_CUBE_MAP,Y.skyboxTexture);const we=((Se,$e,Ve,Ue,Qe)=>({u_matrix:Se,u_sun_direction:$e,u_cubemap:0,u_opacity:Ue,u_temporal_offset:Qe}))(J.skyboxMatrix,Y.getCenter(B,!1),0,de,fe);B.prepareDrawProgram(pe,ue),ue.draw(pe,ge.TRIANGLES,se,a.StencilMode.disabled,B.colorModeForRenderPass(),a.CullFaceMode.backCW,we,"skybox",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(m,h,O,w,j):I==="gradient"&&m.renderPass==="sky"&&function(B,Y,se,de,fe){const pe=B.context,ge=pe.gl,J=B.transform,ue=B.useProgram("skyboxGradient");Y.skyboxGeometry||(Y.skyboxGeometry=new oo(pe)),pe.activeTexture.set(ge.TEXTURE0);let we=Y.colorRampTexture;we||(we=Y.colorRampTexture=new a.Texture(pe,Y.colorRamp,ge.RGBA)),we.bind(ge.LINEAR,ge.CLAMP_TO_EDGE);const Se=(($e,Ve,Ue,Qe,Je)=>({u_matrix:$e,u_color_ramp:0,u_center_direction:Ve,u_radius:a.degToRad(Ue),u_opacity:Qe,u_temporal_offset:Je}))(J.skyboxMatrix,Y.getCenter(B,!1),Y.paint.get("sky-gradient-radius"),de,fe);B.prepareDrawProgram(pe,ue),ue.draw(pe,ge.TRIANGLES,se,a.StencilMode.disabled,B.colorModeForRenderPass(),a.CullFaceMode.backCW,Se,"skyboxGradient",Y.skyboxGeometry.vertexBuffer,Y.skyboxGeometry.indexBuffer,Y.skyboxGeometry.segment)}(m,h,O,w,j)},debug:function(m,l,h){for(let _=0;_<h.length;_++)Jn(m,l,h[_])},custom:function(m,l,h,_){const x=m.context,w=h.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&h.isLayerDraped()){if(m.renderPass==="offscreen"){const C=w.prerender;if(C){if(m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const I=m.transform.pointMerc;C.call(w,x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(m.transform.zoom),[I.x,I.y],m.transform.pixelsPerMeterRatio)}else C.call(w,x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const I=w.renderToTile;if(I){const O=_[0].canonical,j=new a.MercatorCoordinate(O.x+_[0].wrap*(1<<O.z),O.y,O.z);x.setDepthMode(a.DepthMode.disabled),x.setStencilMode(a.StencilMode.disabled),x.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),I.call(w,x.gl,j),x.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),x.setStencilMode(a.StencilMode.disabled);const C=w.renderingMode==="3d"?new a.DepthMode(m.context.gl.LEQUAL,a.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,a.DepthMode.ReadOnly);if(x.setDepthMode(C),m.transform.projection.name==="globe"){const I=m.transform.pointMerc;w.render(x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),a.globeToMercatorTransition(m.transform.zoom),[I.x,I.y],m.transform.pixelsPerMeterRatio)}else w.render(x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState(),x.bindFramebuffer.set(null)}}else a.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class ed{constructor(l,h,_=!1){this.context=new ct(l,_),this.transform=h,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=a.SourceCache.maxUnderzooming+a.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,h){const _=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new fa(this,l));const x=this._terrain;this.transform.elevation=_?x:null,x.update(l,this.transform,h)}_updateFog(l){const h=l.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,x]=h.getFovAdjustedRange(this.transform._fov);if(_>x)return void(this.transform.fogCullDistSq=null);const w=_+.78*(x-_);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,h){if(this.width=l*a.exported.devicePixelRatio,this.height=h*a.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._layers[_].resize()}setup(){const l=this.context,h=new a.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(a.EXTENT,0),h.emplaceBack(0,a.EXTENT),h.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(h,a.posAttributes.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const _=new a.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(a.EXTENT,0),_.emplaceBack(0,a.EXTENT),_.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=l.createVertexBuffer(_,a.posAttributes.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const x=new a.StructArrayLayout2i4;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(x,a.posAttributes.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const w=new a.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(a.EXTENT,0,a.EXTENT,0),w.emplaceBack(0,a.EXTENT,0,a.EXTENT),w.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(w,a.boundsAttributes.members),this.mercatorBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const C=new a.StructArrayLayout3ui6;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(C);const I=new a.StructArrayLayout1ui2;for(const j of[0,1,3,2,0])I.emplaceBack(j);this.debugIndexBuffer=l.createIndexBuffer(I),this.emptyTexture=new a.Texture(l,new a.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=a.create();const O=this.context.gl;this.stencilClearMode=new a.StencilMode({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.loadTimeStamps.push(a.window.performance.now()),this.atmosphereBuffer=new A_(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,h=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,h.TRIANGLES,a.DepthMode.disabled,this.stencilClearMode,a.ColorMode.disabled,a.CullFaceMode.disabled,ja(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,h,_){if(!h||this.currentStencilSource===h.id||!l.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let I=!1;for(const O of _)if(this._tileClippingMaskIDs[O.key]===void 0){I=!0;break}if(!I)return}this.currentStencilSource=h.id;const x=this.context,w=x.gl;this.nextStencilID+_.length>256&&this.clearStencil(),x.setColorMode(a.ColorMode.disabled),x.setDepthMode(a.DepthMode.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of _){const O=h.getTile(I),j=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,{tileBoundsBuffer:B,tileBoundsIndexBuffer:Y,tileBoundsSegments:se}=this.getTileBoundsBuffers(O);C.draw(x,w.TRIANGLES,a.DepthMode.disabled,new a.StencilMode({func:w.ALWAYS,mask:0},j,255,w.KEEP,w.KEEP,w.REPLACE),a.ColorMode.disabled,a.CullFaceMode.disabled,ja(I.projMatrix),"$clipping",B,Y,se)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,h=this.context.gl;return new a.StencilMode({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const h=this.context.gl;return new a.StencilMode({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(l){const h=this.context.gl,_=l.sort((C,I)=>I.overscaledZ-C.overscaledZ),x=_[_.length-1].overscaledZ,w=_[0].overscaledZ-x+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const C={};for(let I=0;I<w;I++)C[I+x]=new a.StencilMode({func:h.GEQUAL,mask:255},I+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=w,[C,_]}return[{[x]:a.StencilMode.disabled},_]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new a.ColorMode([l.CONSTANT_COLOR,l.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?a.ColorMode.unblended:a.ColorMode.alphaBlended}depthModeForSublayer(l,h,_){if(!this.opaquePassEnabledForLayer())return a.DepthMode.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new a.DepthMode(_||this.context.gl.LEQUAL,h,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,h){this.style=l,this.options=h,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const _=this.style.order,x=this.style._sourceCaches;for(const j in x){const B=x[j];B.used&&B.prepare(this.context)}const w={},C={},I={};for(const j in x){const B=x[j];w[j]=B.getVisibleCoordinates(),C[j]=w[j].slice().reverse(),I[j]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let j=0;j<_.length;j++)if(this.style._layers[_[j]].is3D()){this.opaquePassCutoff=j;break}if(this.terrain&&(this.terrain.updateTileBinding(I),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.GlobeSharedBuffers(this.context)),!a.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const j of _){const B=this.style._layers[j],Y=l._getLayerSourceCache(B);if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const se=Y?C[Y.id]:void 0;(B.type==="custom"||B.isSky()||se&&se.length)&&this.renderLayer(this,Y,B,se)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const O=this.terrain;if(O&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&O.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:h.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const j=this.style._layers[_[this.currentLayer]],B=l._getLayerSourceCache(j);if(j.isSky())continue;const Y=B?C[B.id]:void 0;this._renderTileClippingMasks(j,B,Y),this.renderLayer(this,B,j,Y)}if(this.style.fog&&this.transform.projection.supportsFog&&function(j,B){const Y=j.context,se=Y.gl,de=j.transform,fe=new a.DepthMode(se.LEQUAL,a.DepthMode.ReadOnly,[0,1]),pe=j.useProgram("globeAtmosphere",null,de.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ge=a.globeToMercatorTransition(de.zoom),J=B.properties.get("color").toArray01(),ue=B.properties.get("high-color").toArray01(),we=B.properties.get("space-color").toArray01PremultipliedAlpha(),Se=a.identity$1([]);a.rotateY$1(Se,Se,-a.degToRad(de._center.lng)),a.rotateX$1(Se,Se,a.degToRad(de._center.lat)),a.rotateZ$1(Se,Se,de.angle),a.rotateX$1(Se,Se,-de._pitch);const $e=a.fromQuat(new Float32Array(16),Se),Ve=a.mapValue(B.properties.get("star-intensity"),0,1,0,.25),Ue=5e-4,Qe=a.mapValue(B.properties.get("horizon-blend"),0,1,Ue,.25),Je=a.globeUseCustomAntiAliasing(j,Y,de)&&Qe===Ue?de.worldSize/(2*Math.PI*1.025)-1:de.globeRadius,dt=j.frameCounter/1e3%1,Ut=a.length(de.globeCenterInViewSpace),at=Math.sqrt(Math.pow(Ut,2)-Math.pow(Je,2)),kt=Math.acos(at/Ut),ft=((ut,St,Wt,zt,Ht,zn,Qn,Sn,Gn,Er,yr,Mn,Fr,Vr)=>({u_frustum_tl:ut,u_frustum_tr:St,u_frustum_br:Wt,u_frustum_bl:zt,u_horizon:Ht,u_transition:zn,u_fadeout_range:Qn,u_color:Sn,u_high_color:Gn,u_space_color:Er,u_star_intensity:yr,u_star_size:5*a.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Mn,u_horizon_angle:Fr,u_rotation_matrix:Vr}))(de.frustumCorners.TL,de.frustumCorners.TR,de.frustumCorners.BR,de.frustumCorners.BL,de.frustumCorners.horizon,ge,Qe,J,ue,we,Ve,dt,kt,$e);j.prepareDrawProgram(Y,pe);const jt=j.atmosphereBuffer;jt&&pe.draw(Y,se.TRIANGLES,fe,a.StencilMode.disabled,a.ColorMode.alphaBlended,a.CullFaceMode.backCW,ft,"skybox",jt.vertexBuffer,jt.indexBuffer,jt.segments)}(this,this.style.fog),this.renderPass="sky",(a.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const j=this.style._layers[_[this.currentLayer]],B=l._getLayerSourceCache(j);j.isSky()&&this.renderLayer(this,B,j,B?C[B.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;){const j=this.style._layers[_[this.currentLayer]],B=l._getLayerSourceCache(j);if(j.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(j)){if(j.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Y=B?(j.type==="symbol"?I:C)[B.id]:void 0;this._renderTileClippingMasks(j,B,B?w[B.id]:void 0),this.renderLayer(this,B,j,Y),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let j=null;a.values(this.style._layers).forEach(B=>{const Y=l._getLayerSourceCache(B);Y&&!B.isHidden(this.transform.zoom)&&(!j||j.getSource().maxzoom<Y.getSource().maxzoom)&&(j=Y)}),j&&this.options.showTileBoundaries&&du.debug(this,j,j.getVisibleCoordinates())}this.options.showPadding&&function(j){const B=j.transform.padding;ti(j,j.transform.height-(B.top||0),3,Tn),ti(j,B.bottom||0,3,kr),go(j,B.left||0,3,or),go(j,j.transform.width-(B.right||0),3,pr);const Y=j.transform.centerPoint;(function(se,de,fe,pe){Ri(se,de-1,fe-10,2,20,pe),Ri(se,de-10,fe-1,20,2,pe)})(j,Y.x,j.transform.height-Y.y,Cr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(a.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,h,_,x){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||x&&x.length)&&(this.id=_.id,this.gpuTimingStart(_),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(_.type)||l.terrain&&_.type==="custom")&&du[_.type](l,h,_,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let _=this.gpuTimers[l.id];_||(_=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),_.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,h=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(h),l.beginQueryEXT(l.TIME_ELAPSED_EXT,h)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const h={};for(const _ in l){const x=l[_],w=this.context.extTimerQuery,C=w.getQueryObjectEXT(x.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(x.query),h[_]=C}return h}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery;let _=0;for(const x of l)_+=h.getQueryObjectEXT(x,h.QUERY_RESULT_EXT)/1e6,h.deleteQueryEXT(x);return _}translatePosMatrix(l,h,_,x,w){if(!_[0]&&!_[1])return l;const C=w?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(C){const j=Math.sin(C),B=Math.cos(C);_=[_[0]*B-_[1]*j,_[0]*j+_[1]*B]}const I=[w?_[0]:Dt(h,_[0],this.transform.zoom),w?_[1]:Dt(h,_[1],this.transform.zoom),0],O=new Float32Array(16);return a.translate(O,l,I),O}saveTileTexture(l){const h=this._tileTextures[l.size[0]];h?h.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const h=this._tileTextures[l];return h&&h.length>0?h.pop():null}isPatternMissing(l){return l===null||l!==void 0&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,h=this.terrain&&this.terrain.exaggeration()===0,_=this.style&&this.style.fog,x=[];return this.terrainRenderModeElevated()&&x.push("TERRAIN"),this.transform.projection.name==="globe"&&x.push("GLOBE"),h&&x.push("ZERO_EXAGGERATION"),_&&!l&&_.getOpacity(this.transform.pitch)!==0&&x.push("FOG"),l&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}useProgram(l,h,_){this.cache=this.cache||{};const x=_||[],w=this.currentGlobalDefines().concat(x),C=wr.cacheKey(ae[l],l,w,h);return this.cache[C]||(this.cache[C]=new wr(this.context,l,ae[l],h,uu[l],w)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,h,_){if(this.terrain&&this.terrain.renderingToTexture)return;const x=this.style.fog;if(x){const w=x.getOpacity(this.transform.pitch),C=((I,O,j,B,Y,se,de,fe,pe,ge,J)=>{const ue=I.transform,we=O.properties.get("color").toArray01();we[3]=B;const Se=I.frameCounter/1e3%1;return{u_fog_matrix:j?ue.calculateFogTileMatrix(j):I.identityMat,u_fog_range:O.getFovAdjustedRange(ue._fov),u_fog_color:we,u_fog_horizon_blend:O.properties.get("horizon-blend"),u_fog_temporal_offset:Se,u_frustum_tl:Y,u_frustum_tr:se,u_frustum_br:de,u_frustum_bl:fe,u_globe_pos:pe,u_globe_radius:ge,u_viewport:J,u_globe_transition:a.globeToMercatorTransition(ue.zoom),u_is_globe:+(ue.projection.name==="globe")}})(this,x,_,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.exported.devicePixelRatio,this.transform.height*a.exported.devicePixelRatio]);h.setFogUniformValues(l,C)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,h=l.createTexture();return l.bindTexture(l.TEXTURE_2D,h),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,h=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const x of _)h[x.key]=l[x.key]||new a.Tile(x,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}}class Fp{constructor(l=0,h=0,_=0,x=0){if(isNaN(l)||l<0||isNaN(h)||h<0||isNaN(_)||_<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=_,this.right=x}interpolate(l,h,_){return h.top!=null&&l.top!=null&&(this.top=a.number(l.top,h.top,_)),h.bottom!=null&&l.bottom!=null&&(this.bottom=a.number(l.bottom,h.bottom,_)),h.left!=null&&l.left!=null&&(this.left=a.number(l.left,h.left,_)),h.right!=null&&l.right!=null&&(this.right=a.number(l.right,h.right,_)),this}getCenter(l,h){const _=a.clamp((this.left+l-this.right)/2,0,l),x=a.clamp((this.top+h-this.bottom)/2,0,h);return new a.Point(_,x)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Fp(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Bp(m,l){const h=a.getColumn(m,3);a.fromQuat(m,l),a.setColumn(m,3,h)}function Dr(m,l){const h=a.identity$1([]);return a.rotateZ$1(h,h,-l),a.rotateX$1(h,h,-m),h}function bh(m,l){const h=[m[0],m[1],0],_=[l[0],l[1],0];if(a.length(h)>=1e-15){const C=a.normalize([],h);a.scale$2(_,C,a.dot(_,C)),l[0]=_[0],l[1]=_[1]}const x=a.cross([],l,m);if(a.len(x)<1e-15)return null;const w=Math.atan2(-x[1],x[0]);return Dr(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),w)}class M_{constructor(l,h){this.position=l,this.orientation=h}get position(){return this._position}set position(l){if(l){const h=l instanceof a.MercatorCoordinate?l:new a.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(h.x=a.wrap(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(l,h){if(this.orientation=null,!this.position)return;const _=this.position,x=this._elevation?this._elevation.getAtPointOrZero(a.MercatorCoordinate.fromLngLat(l)):0,w=a.MercatorCoordinate.fromLngLat(l,x),C=[w.x-_.x,w.y-_.y,w.z-_.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=bh(C,h)}setPitchBearing(l,h){this.orientation=Dr(a.degToRad(l),a.degToRad(-h))}}class jp{constructor(l,h){this._transform=a.identity([]),this.orientation=h,this.position=l}get mercatorPosition(){const l=this.position;return new a.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=a.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var h;l&&a.setColumn(this._transform,3,[(h=l)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||a.identity$1([]),l&&Bp(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,h){this._orientation=Dr(l,h),Bp(this._transform,this._orientation)}forward(){const l=a.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=a.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=a.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,h){const _=new Float64Array(16);return a.invert(_,this.getWorldToCamera(l,h)),_}getWorldToCameraPosition(l,h,_){const x=this.position;a.scale$2(x,x,-l);const w=new Float64Array(16);return a.fromScaling(w,[_,_,_]),a.translate(w,w,x),w[10]*=h,w}getWorldToCamera(l,h){const _=new Float64Array(16),x=new Float64Array(4),w=this.position;return a.conjugate(x,this._orientation),a.scale$2(w,w,-l),a.fromQuat(_,x),a.translate(_,_,w),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=h,_[9]*=h,_[10]*=h,_[11]*=h,_}getCameraToClipPerspective(l,h,_,x){const w=new Float64Array(16);return a.perspective(w,l,h,_,x),w}getDistanceToElevation(l,h=!1){const _=l===0?0:a.mercatorZfromAltitude(l,h?a.latFromMercatorY(this.position[1]):this.position[1]),x=this.forward();return(_-this.position[2])/x[2]}clone(){return new jp([...this.position],[...this.orientation])}}function td(m,l){const h=$p(m.projection,m.zoom,m.width,m.height),_=function(w,C,I,O,j){const B=new a.LngLat(I.lng-180*Ol,I.lat),Y=new a.LngLat(I.lng+180*Ol,I.lat),se=w.project(B.lng,B.lat),de=w.project(Y.lng,Y.lat),fe=-Math.atan2(de.y-se.y,de.x-se.x),pe=a.MercatorCoordinate.fromLngLat(I);pe.y=a.clamp(pe.y,-1+Ol,1-Ol);const ge=pe.toLngLat(),J=w.project(ge.lng,ge.lat),ue=a.MercatorCoordinate.fromLngLat(ge);ue.x+=Ol;const we=ue.toLngLat(),Se=w.project(we.lng,we.lat),$e=Up(Se.x-J.x,Se.y-J.y,fe),Ve=a.MercatorCoordinate.fromLngLat(ge);Ve.y+=Ol;const Ue=Ve.toLngLat(),Qe=w.project(Ue.lng,Ue.lat),Je=Up(Qe.x-J.x,Qe.y-J.y,fe),dt=Math.abs($e.x)/Math.abs(Je.y),Ut=a.identity([]);a.rotateZ(Ut,Ut,-fe*(1-(j?0:O)));const at=a.identity([]);return a.scale(at,at,[1,1-(1-dt)*O,1]),at[4]=-Je.x/Je.y*O,a.rotateZ(at,at,fe),a.multiply(at,Ut,at),at}(m.projection,0,m.center,h,l),x=D_(m);return a.scale(_,_,[x,x,1]),_}function D_(m){const l=m.projection,h=$p(m.projection,m.zoom,m.width,m.height),_=R_(l,m.center),x=R_(l,a.LngLat.convert(l.center));return Math.pow(2,_*h+(1-h)*x)}function $p(m,l,h,_,x=1/0){const w=m.range;if(!w)return 0;const C=Math.min(x,Math.max(h,_)),I=Math.log(C/1024)/Math.LN2;return a.smoothstep(w[0]+I,w[1]+I,l)}const Ol=1/4e4;function R_(m,l){const h=a.clamp(l.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),_=new a.LngLat(l.lng-180*Ol,h),x=new a.LngLat(l.lng+180*Ol,h),w=m.project(_.lng,h),C=m.project(x.lng,h),I=a.MercatorCoordinate.fromLngLat(_),O=a.MercatorCoordinate.fromLngLat(x),j=C.x-w.x,B=C.y-w.y,Y=O.x-I.x,se=O.y-I.y,de=Math.sqrt((Y*Y+se*se)/(j*j+B*B));return Math.log(de)/Math.LN2}function Up(m,l,h){const _=Math.cos(h),x=Math.sin(h);return{x:m*_-l*x,y:m*x+l*_}}class nd{constructor(l,h,_,x,w,C,I){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=_??0,this._maxPitch=x??60,this.setProjection(C),this.setMaxBounds(I),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Fp,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new jp,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new nd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,h=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||_)&&this._updateCameraOnTerrain(),(l||_)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return a.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=a.getProjection(this.projectionOptions);const _=!v(h,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.getProjection({name:"mercator"});const h=l!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.Point(this.width,this.height)}get bearing(){return a.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const h=-l*Math.PI/180;var _;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(_=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(x,w,C){var I=w[0],O=w[1],j=w[2],B=w[3],Y=Math.sin(C),se=Math.cos(C);x[0]=I*se+j*Y,x[1]=O*se+B*Y,x[2]=I*-Y+j*se,x[3]=O*-Y+B*se}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const h=a.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=a.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const h=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let x=0,w=0;for(let C=0;C<h.length;C++){const I=new a.Point(h[C][0]*this.width,_+h[C][1]*(this.height-_)),O=l.pointCoordinate(I);if(!O)continue;const j=1/Math.hypot(O[0]-this._camera.position[0],O[1]-this._camera.position[1]);x+=O[3]*j,w+=j}return w===0?NaN:x/w}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*h,x=this._mercatorZfromZoom(l),w=this._mercatorZfromZoom(this._maxZoom),C=Math.max(x-_,w);this._setZoom(this._zoomFromMercatorZ(C))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let _;_=l.z<this._camera.position[2]?[h.x,h.y,h.z]:[l.x,l.y,l.z];const x=a.length(a.sub([],this._camera.position,_));return a.clamp(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let h=!1;if(l.orientation&&!a.exactEquals(l.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(l.orientation)),l.position){const _=[l.position.x,l.position.y,l.position.z];a.exactEquals$1(_,this._camera.position)||(this._setCameraPosition(_),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,h=new M_;return h.position=new a.MercatorCoordinate(l[0],l[1],l[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(l){if(!a.length$1(l))return!1;a.normalize$1(l,l);const h=a.transformQuat([],[0,0,-1],l),_=a.transformQuat([],[0,-1,0],l);if(_[2]<0)return!1;const x=bh(h,_);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(l){const h=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;l[2]=a.clamp(l[2],x/_,x/h),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,h,_){this._unmodified=!1,this._edgeInsets.interpolate(l,h,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const h=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(l){const h=[new a.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const _=this.pointCoordinate(new a.Point(0,0)),x=this.pointCoordinate(new a.Point(this.width,0)),w=this.pointCoordinate(new a.Point(this.width,this.height)),C=this.pointCoordinate(new a.Point(0,this.height)),I=Math.floor(Math.min(_.x,x.x,w.x,C.x)),O=Math.floor(Math.max(_.x,x.x,w.x,C.x)),j=1;for(let B=I-j;B<=O+j;B++)B!==0&&h.push(new a.UnwrappedTileID(B,l))}return h}coveringTiles(l){let h=this.coveringZoomLevel(l);const _=h,x=this.elevation&&!l.isTerrainDEM,w=this.projection.name==="mercator";if(l.minzoom!==void 0&&h<l.minzoom)return[];l.maxzoom!==void 0&&h>l.maxzoom&&(h=l.maxzoom);const C=this.locationCoordinate(this.center),I=this.center.lat,O=1<<h,j=[O*C.x,O*C.y,0],B=this.projection.name==="globe",Y=!B,se=a.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,Y),de=B?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),fe=O*a.mercatorZfromAltitude(1,this.center.lat),pe=this._camera.position[2]/a.mercatorZfromAltitude(1,this.center.lat),ge=[O*de.x,O*de.y,pe*(Y?1:fe)],J=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),ue=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?h:0,we=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Se=l.isTerrainDEM?-we:this._elevation?this._elevation.getMinElevationBelowMSL():0,$e=this.projection.isReprojectedInTileSpace?D_(this):1,Ve=ut=>{const Wt=new a.MercatorCoordinate(ut.x+25e-6,ut.y,ut.z),zt=new a.MercatorCoordinate(ut.x,ut.y+25e-6,ut.z),Ht=ut.toLngLat(),zn=Wt.toLngLat(),Qn=zt.toLngLat(),Sn=this.locationCoordinate(Ht),Gn=this.locationCoordinate(zn),Er=this.locationCoordinate(Qn),yr=Math.hypot(Gn.x-Sn.x,Gn.y-Sn.y),Mn=Math.hypot(Er.x-Sn.x,Er.y-Sn.y);return Math.sqrt(yr*Mn)*$e/25e-6},Ue=ut=>{const St=we,Wt=Se;return{aabb:a.tileAABB(this,O,0,0,0,ut,Wt,St,this.projection),zoom:0,x:0,y:0,minZ:Wt,maxZ:St,wrap:ut,fullyVisible:!1}},Qe=[];let Je=[];const dt=h,Ut=l.reparseOverscaled?_:h,at=ut=>ut*ut,kt=at((pe-this._centerAltitude)*fe),ft=ut=>{if(!this._elevation||!ut.tileID||!w)return;const St=this._elevation.getMinMaxForTile(ut.tileID),Wt=ut.aabb;St?(Wt.min[2]=St.min,Wt.max[2]=St.max,Wt.center[2]=(Wt.min[2]+Wt.max[2])/2):(ut.shouldSplit=jt(ut),ut.shouldSplit||(Wt.min[2]=Wt.max[2]=Wt.center[2]=this._centerAltitude))},jt=ut=>{if(ut.zoom<ue)return!0;if(ut.zoom===dt)return!1;if(ut.shouldSplit!=null)return ut.shouldSplit;const St=ut.aabb.distanceX(ge),Wt=ut.aabb.distanceY(ge);let zt=kt,Ht=1;if(B){zt=at(ut.aabb.distanceZ(ge));const Sn=Math.pow(2,ut.zoom),Gn=a.latFromMercatorY((ut.y+1)/Sn),Er=a.latFromMercatorY(ut.y/Sn),yr=Math.min(Math.max(I,Gn),Er),Mn=a.circumferenceAtLatitude(yr)/a.circumferenceAtLatitude(I);if(Ht=yr===I?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Mn/this._mercatorScaleRatio),this.zoom<=a.GLOBE_ZOOM_THRESHOLD_MIN&&ut.zoom===dt-1&&Mn>=.9)return!0}else if(x&&(zt=at(ut.aabb.distanceZ(ge)*fe)),this.projection.isReprojectedInTileSpace&&_<=5){const Sn=Math.pow(2,ut.zoom),Gn=Ve(new a.MercatorCoordinate((ut.x+.5)/Sn,(ut.y+.5)/Sn));Ht=Gn>.85?1:Gn}const zn=St*St+Wt*Wt+zt,Qn=at((1<<dt-ut.zoom)*J*Ht*((Sn,Gn)=>{if(Gn*at(.707)<Sn)return 1;const Er=Math.sqrt(Gn/Sn);return Er/(1.4144271570014144+(Math.pow(1.1,Er-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(zt,kt),zn));return zn<Qn};if(this.renderWorldCopies)for(let ut=1;ut<=3;ut++)Qe.push(Ue(-ut)),Qe.push(Ue(ut));for(Qe.push(Ue(0));Qe.length>0;){const ut=Qe.pop(),St=ut.x,Wt=ut.y;let zt=ut.fullyVisible;if(!zt){const Ht=ut.aabb.intersects(se);if(Ht===0)continue;zt=Ht===2}if(ut.zoom!==dt&&jt(ut))for(let Ht=0;Ht<4;Ht++){const zn=(St<<1)+Ht%2,Qn=(Wt<<1)+(Ht>>1),Sn={aabb:w?ut.aabb.quadrant(Ht):a.tileAABB(this,O,ut.zoom+1,zn,Qn,ut.wrap,ut.minZ,ut.maxZ,this.projection),zoom:ut.zoom+1,x:zn,y:Qn,wrap:ut.wrap,fullyVisible:zt,tileID:void 0,shouldSplit:void 0,minZ:ut.minZ,maxZ:ut.maxZ};x&&!B&&(Sn.tileID=new a.OverscaledTileID(ut.zoom+1===dt?Ut:ut.zoom+1,ut.wrap,ut.zoom+1,zn,Qn),ft(Sn)),Qe.push(Sn)}else{const Ht=ut.zoom===dt?Ut:ut.zoom;if(l.minzoom&&l.minzoom>Ht)continue;const zn=j[0]-(.5+St+(ut.wrap<<ut.zoom))*(1<<h-ut.zoom),Qn=j[1]-.5-Wt,Sn=ut.tileID?ut.tileID:new a.OverscaledTileID(Ht,ut.wrap,ut.zoom,St,Wt);Je.push({tileID:Sn,distanceSq:zn*zn+Qn*Qn})}}if(this.fogCullDistSq){const ut=this.fogCullDistSq,St=this.horizonLineFromTop();Je=Je.filter(Wt=>{const zt=[0,0,0,1],Ht=[a.EXTENT,a.EXTENT,0,1],zn=this.calculateFogTileMatrix(Wt.tileID.toUnwrapped());a.transformMat4$1(zt,zt,zn),a.transformMat4$1(Ht,Ht,zn);const Qn=a.getAABBPointSquareDist(zt,Ht);if(Qn===0)return!0;let Sn=!1;const Gn=this._elevation;if(Gn&&Qn>ut&&St!==0){const Er=this.calculateProjMatrix(Wt.tileID.toUnwrapped());let yr;l.isTerrainDEM||(yr=Gn.getMinMaxForTile(Wt.tileID)),yr||(yr={min:Se,max:we});const Mn=a.furthestTileCorner(this.rotation),Fr=[Mn[0]*a.EXTENT,Mn[1]*a.EXTENT,yr.max];a.transformMat4(Fr,Fr,Er),Sn=(1-Fr[1])*this.height*.5<St}return Qn<ut||Sn})}return Je.sort((ut,St)=>ut.distanceSq-St.distanceSq).map(ut=>ut.tileID)}resize(l,h){this.width=l,this.height=h,this.pixelsToGLUnits=[2/l,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const h=a.clamp(l.lat,-a.MAX_MERCATOR_LATITUDE,a.MAX_MERCATOR_LATITUDE),_=this.projection.project(l.lng,h);return new a.Point(_.x*this.worldSize,_.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,h){let _,x;const w=this.centerPoint;if(this.projection.name==="globe"){const I=this.worldSize;_=(h.x-w.x)/I,x=(h.y-w.y)/I}else{const I=this.pointCoordinate(h),O=this.pointCoordinate(w);_=I.x-O.x,x=I.y-O.y}const C=this.locationCoordinate(l);this.setLocation(new a.MercatorCoordinate(C.x-_,C.y-x))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,h){const _=h?a.mercatorZfromAltitude(h,l.lat):void 0,x=this.projection.project(l.lng,l.lat);return new a.MercatorCoordinate(x.x,x.y,_)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,h){const _=h??this._centerAltitude,x=[l.x,l.y,0,1],w=[l.x,l.y,1,1];a.transformMat4$1(x,x,this.pixelMatrixInverse),a.transformMat4$1(w,w,this.pixelMatrixInverse);const C=w[3];a.scale$1(x,x,1/x[3]),a.scale$1(w,w,1/C);const I=x[2],O=w[2];return{p0:x,p1:w,t:I===O?0:(_-I)/(O-I)}}screenPointToMercatorRay(l){const h=[l.x,l.y,0,1],_=[l.x,l.y,1,1];return a.transformMat4$1(h,h,this.pixelMatrixInverse),a.transformMat4$1(_,_,this.pixelMatrixInverse),a.scale$1(h,h,1/h[3]),a.scale$1(_,_,1/_[3]),h[2]=a.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,_[2]=a.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,a.scale$1(h,h,1/this.worldSize),a.scale$1(_,_,1/this.worldSize),new a.Ray([h[0],h[1],h[2]],a.normalize([],a.sub([],_,h)))}rayIntersectionCoordinate(l){const{p0:h,p1:_,t:x}=l,w=a.mercatorZfromAltitude(h[2],this._center.lat),C=a.mercatorZfromAltitude(_[2],this._center.lat);return new a.MercatorCoordinate(a.number(h[0],_[0],x)/this.worldSize,a.number(h[1],_[1],x)/this.worldSize,a.number(w,C,x))}pointCoordinate(l,h=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,h)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let h=this.projection.pointCoordinate3D(this,l.x,l.y);if(h)return new a.MercatorCoordinate(h[0],h[1],h[2]);let _=0,x=this.horizonLineFromTop();if(l.y>x)return this.pointCoordinate(l);const w=.02*x,C=l.clone();for(let I=0;I<10&&x-_>w;I++){C.y=a.number(_,x,.66);const O=this.projection.pointCoordinate3D(this,C.x,C.y);O?(x=C.y,h=O):_=C.y}return h?new a.MercatorCoordinate(h[0],h[1],h[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(l);const h=this.pointCoordinate(l);return h.y>=0&&h.y<=1}_coordinatePoint(l,h){const _=h&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,x=[l.x*this.worldSize,l.y*this.worldSize,_+l.toAltitude(),1];return a.transformMat4$1(x,x,this.pixelMatrix),x[3]>0?new a.Point(x[0]/x[3],x[1]/x[3]):new a.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:h}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,w=this.pointLocation3D(new a.Point(h,l)),C=this.pointLocation3D(new a.Point(x,l)),I=this.pointLocation3D(new a.Point(x,_)),O=this.pointLocation3D(new a.Point(h,_));let j=Math.min(w.lng,C.lng,I.lng,O.lng),B=Math.max(w.lng,C.lng,I.lng,O.lng),Y=Math.min(w.lat,C.lat,I.lat,O.lat),se=Math.max(w.lat,C.lat,I.lat,O.lat);const de=Math.pow(2,-this.zoom)/16*270,fe=this.projection.name==="globe"?1:4,pe=(ge,J,ue,we,Se)=>{const $e=(ge+ue)/2,Ve=(J+we)/2,Ue=new a.Point($e,Ve),{lng:Qe,lat:Je}=this.pointLocation3D(Ue),dt=Math.max(0,j-Qe,Y-Je,Qe-B,Je-se);j=Math.min(j,Qe),B=Math.max(B,Qe),Y=Math.min(Y,Je),se=Math.max(se,Je),(Se<fe||dt>de)&&(pe(ge,J,$e,Ve,Se+1),pe($e,Ve,ue,we,Se+1))};if(pe(h,l,x,l,1),pe(x,l,x,_,1),pe(x,_,h,_,1),pe(h,_,h,l,1),this.projection.name==="globe"){const[ge,J]=a.polesInViewport(this);ge?(se=90,B=180,j=-180):J&&(Y=-90,B=180,j=-180)}return new a.LngLatBounds(new a.LngLat(j,Y),new a.LngLat(B,se))}_getBoundsRectangular(l,h){const{top:_,left:x}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,C=this.width-this._edgeInsets.right,I=new a.Point(x,_),O=new a.Point(C,_),j=new a.Point(C,w),B=new a.Point(x,w);let Y=this.pointCoordinate(I,l),se=this.pointCoordinate(O,l);const de=this.pointCoordinate(j,h),fe=this.pointCoordinate(B,h),pe=(ge,J)=>(J.y-ge.y)/(J.x-ge.x);return Y.y>1&&se.y>=0?Y=new a.MercatorCoordinate((1-fe.y)/pe(fe,Y)+fe.x,1):Y.y<0&&se.y<=1&&(Y=new a.MercatorCoordinate(-fe.y/pe(fe,Y)+fe.x,0)),se.y>1&&Y.y>=0?se=new a.MercatorCoordinate((1-de.y)/pe(de,se)+de.x,1):se.y<0&&Y.y<=1&&(se=new a.MercatorCoordinate(-de.y/pe(de,se)+de.x,0)),new a.LngLatBounds().extend(this.coordinateLocation(Y)).extend(this.coordinateLocation(se)).extend(this.coordinateLocation(fe)).extend(this.coordinateLocation(de))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=l.visibleDemTiles.reduce((_,x)=>{if(x.dem){const w=x.dem.tree;_.min=Math.min(_.min,w.minimums[0]),_.max=Math.max(_.max,w.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*l.exaggeration(),h.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,_=this.height/2-h*(1-this._horizonShift);return l?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-a.MAX_MERCATOR_LATITUDE,this.maxLat=a.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=a.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=a.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=a.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,h){return this.projection.createTileMatrix(this,h,l)}calculateDistanceTileData(l){const h=l.key,_=this._distanceTileDataCache;if(_[h])return _[h];const x=l.canonical,w=1/this.height,C=this.cameraWorldSize,I=C/this.zoomScale(x.z),O=(x.x+Math.pow(2,x.z)*l.wrap)*I,j=x.y*I,B=this.point;B.x*=C/this.worldSize,B.y*=C/this.worldSize;const Y=this.angle,se=Math.sin(-Y),de=-Math.cos(-Y);return _[h]={bearing:[se,de],center:[(B.x-O)*w,(B.y-j)*w],scale:I/a.EXTENT*w},_[h]}calculateFogTileMatrix(l){const h=l.key,_=this._fogTileMatrixCache;if(_[h])return _[h];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return a.multiply(x,this.worldToFogMatrix,x),_[h]=new Float32Array(x),_[h]}calculateProjMatrix(l,h=!1){const _=l.key,x=h?this._alignedProjMatrixCache:this._projMatrixCache;if(x[_])return x[_];const w=this.calculatePosMatrix(l,this.worldSize);return a.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:h?this.alignedProjMatrix:this.projMatrix,w),x[_]=new Float32Array(w),x[_]}calculatePixelsToTileUnitsMatrix(l){const h=l.tileID.key,_=this._pixelsToTileUnitsCache;if(_[h])return _[h];const x=function(w,C){const{scale:I}=w.tileTransform,O=I*a.EXTENT/(w.tileSize*Math.pow(2,C.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return j=new Float32Array(4),se=(B=C.inverseAdjustmentMatrix)[1],de=B[2],fe=B[3],ge=(Y=[O,O])[1],j[0]=B[0]*(pe=Y[0]),j[1]=se*pe,j[2]=de*ge,j[3]=fe*ge,j;var j,B,Y,se,de,fe,pe,ge}(l,this);return _[h]=x,_[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,h=a.fromScaling([],[l,l,l]);return a.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const h=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(h),x=this._camera.forward(),w=a.mercatorZfromAltitude(1,this._center.lat);_[2]/=w,x[2]/=w,a.normalize(x,x);const C=l.raycast(_,x,l.exaggeration());if(C){const I=a.scaleAndAdd([],_,x,C),O=new a.MercatorCoordinate(I[0],I[1],a.mercatorZfromAltitude(I[2],a.latFromMercatorY(I[1]))),j=(O.z+a.length([O.x-_[0],O.y-_[1],O.z-_[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(j),this._centerAltitude=O.toAltitude(),this._center=this.coordinateLocation(O),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const h=this._elevation,_=a.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(_),w=h.getAtPointOrZero(new a.MercatorCoordinate(...x)),C=this.pixelsPerMeter/this.worldSize*w,I=this._minimumHeightOverTerrain(),O=x[2]-C;if(O<=I)if(O<0||l){const j=this.locationCoordinate(this._center,this._centerAltitude),B=[x[0],x[1],j.z-x[2]],Y=a.length(B);B[2]-=(I-O)/this._pixelsPerMercatorPixel;const se=a.length(B);if(se===0)return;a.scale$2(B,B,Y/se*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],j.z*this._pixelsPerMercatorPixel-B[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const se=this.center;return se.lat=a.clamp(se.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(se.lng=a.clamp(se.lng,this.minLng,this.maxLng)),this.center=se,void(this._constraining=!1)}const h=this._unmodified,{x:_,y:x}=this.point;let w=0,C=_,I=x;const O=this.width/2,j=this.height/2,B=this.worldMinY*this.scale,Y=this.worldMaxY*this.scale;if(x-j<B&&(I=B+j),x+j>Y&&(I=Y-j),Y-B<this.height&&(w=Math.max(w,this.height/(Y-B)),I=(Y+B)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const se=this.worldMinX*this.scale,de=this.worldMaxX*this.scale,fe=this.worldSize/2-(se+de)/2;C=(_+fe+this.worldSize)%this.worldSize-fe,C-O<se&&(C=se+O),C+O>de&&(C=de-O),de-se<this.width&&(w=Math.max(w,this.width/(de-se)),C=(de+se)/2)}C===_&&I===x||(this.center=this.unproject(new a.Point(C,I))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,h=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.mercatorZfromAltitude(1,this.center.lat)/a.mercatorZfromAltitude(1,a.GLOBE_SCALE_MATCH_LATITUDE));const _=$p(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x=this.projection.zAxisUnit==="meters"?h:1,w=this._camera.getWorldToCamera(this.worldSize,x),C=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);C[8]=2*-l.x/this.width,C[9]=2*l.y/this.height;let I=a.mul([],C,w);if(this.projection.isReprojectedInTileSpace){const Ve=this.locationCoordinate(this.center),Ue=a.identity([]);a.translate(Ue,Ue,[Ve.x*this.worldSize,Ve.y*this.worldSize,0]),a.multiply(Ue,Ue,td(this)),a.translate(Ue,Ue,[-Ve.x*this.worldSize,-Ve.y*this.worldSize,0]),a.multiply(I,I,Ue),this.inverseAdjustmentMatrix=function(Qe){const Je=td(Qe,!0);return _e([],[Je[0],Je[1],Je[4],Je[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=a.scale([],I,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=I,this.invProjMatrix=a.invert(new Float64Array(16),this.projMatrix);const O=a.invert([],C);this.frustumCorners=a.FrustumCorners.fromInvProjectionMatrix(O,this.horizonLineFromTop(),this.height);const j=new Float32Array(16);a.identity(j),a.scale(j,j,[1,-1,1]),a.rotateX(j,j,this._pitch),a.rotateZ(j,j,this.angle);const B=a.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Y=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;B[8]=2*-l.x/this.width,B[9]=2*(l.y+Y)/this.height,this.skyboxMatrix=a.multiply(j,B,j);const se=this.point,de=se.x,fe=se.y,pe=this.width%2/2,ge=this.height%2/2,J=Math.cos(this.angle),ue=Math.sin(this.angle),we=de-Math.round(de)+J*pe+ue*ge,Se=fe-Math.round(fe)+J*ge+ue*pe,$e=new Float64Array(I);if(a.translate($e,$e,[we>.5?we-1:we,Se>.5?Se-1:Se,0]),this.alignedProjMatrix=$e,I=a.create(),a.scale(I,I,[this.width/2,-this.height/2,1]),a.translate(I,I,[1,-1,0]),this.labelPlaneMatrix=I,I=a.create(),a.scale(I,I,[1,-1,1]),a.translate(I,I,[-1,-1,0]),a.scale(I,I,[2/this.width,2/this.height,1]),this.glCoordMatrix=I,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},I=a.invert(new Float64Array(16),this.pixelMatrix),!I)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=I,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.calculateGlobeMatrix(this);const Ve=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.transformMat4(Ve,Ve,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=I;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,_=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,w=[l,l,h];a.scale$2(w,w,x),a.scale$2(_,_,-1),a.multiply$2(_,_,w);const C=a.create();a.translate(C,C,_),a.scale(C,C,w),this.mercatorFogMatrix=C,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,h,x)}_computeCameraPosition(l){const h=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),x=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-l/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-_[0]*w,x.y/this.worldSize-_[1]*w,l/this.worldSize*this._centerAltitude-_[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],x=l[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(w=Math.min((h-_)/x,1)),this._camera.position=a.scaleAndAdd([],this._camera.position,l,w),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,h=this._camera.forward(),{pitch:_,bearing:x}=this._camera.getPitchBearing(),w=a.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,C=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.degToRad(this._maxPitch)),I=Math.max((l[2]-w)/Math.cos(_),C),O=this._zoomFromMercatorZ(I);a.scaleAndAdd(l,l,h,I),this._pitch=a.clamp(_,a.degToRad(this.minPitch),a.degToRad(this.maxPitch)),this.angle=a.wrap(x,-Math.PI,Math.PI),this._setZoom(a.clamp(O,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let h=0,_=a.GLOBE_ZOOM_THRESHOLD_MAX,x=0,w=1/0;for(;_-h>1e-6&&_>h;){const C=h+.5*(_-h),I=this.tileSize*Math.pow(2,C),O=this.getCameraToCenterDistance(this.projection,C,I),j=this.scaleZoom(O/(l*this.tileSize)),B=Math.abs(C-j);B<w&&(w=B,x=C),C<j?h=C:_=C}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,h){const _=Math.min(l.x,h.x),x=Math.max(l.x,h.x),w=Math.min(l.y,h.y),C=Math.max(l.y,h.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const I=[new a.Point(_,w),new a.Point(x,C),new a.Point(_,C),new a.Point(x,w)],O=this.renderWorldCopies?-3:0,j=this.renderWorldCopies?4:1;for(const B of I){const Y=this.pointRayIntersection(B);if(Y.t<0)return!0;const se=this.rayIntersectionCoordinate(Y);if(se.x<O||se.y<0||se.x>j||se.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.Point(0,0),new a.Point(this.width,this.height))}zoomDeltaToMovement(l,h){const _=a.length(a.sub([],this._camera.position,l)),x=this._zoomFromMercatorZ(_)+h;return _-this._mercatorZfromZoom(x)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([h,_,x],w){const C=[h,_,x,1];a.transformMat4$1(C,C,w);const I=C[3]=Math.max(C[3],1e-6);return C[0]/=I,C[1]/=I,C[2]/=I,C}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.Point(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,l))}}getCameraToCenterDistance(l,h=this.zoom,_=this.worldSize){const x=$p(l,h,this.width,this.height,1024),w=l.pixelSpaceConversion(this.center.lat,_,x);return .5/Math.tan(.5*this._fov)*this.height*w}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.multiply(l,l,this.globeMatrix),l}}function rd(m,l){let h=!1,_=null;const x=()=>{_=null,h&&(m(),_=setTimeout(x,l),h=!1)};return()=>(h=!0,_||x(),_)}class cm{constructor(l){this._hashName=l&&encodeURIComponent(l),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=rd(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,a.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),a.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const h=wh(l);if(this._hashName){const _=this._hashName;let x=!1;const w=a.window.location.hash.slice(1).split("&").map(C=>{const I=C.split("=")[0];return I===_?(x=!0,`${I}=${h}`):C}).filter(C=>C);return x||w.push(`${_}=${h}`),`#${w.join("&")}`}return`#${h}`}_getCurrentHash(){const l=a.window.location.hash.replace("#","");if(this._hashName){let h;return l.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(h=_)}),(h&&h[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(_=>isNaN(_))){const _=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(h[3]||0):l.getBearing();return l.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:_,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=a.window.location.href.replace(/(#.+)?$/,this.getHashString());a.window.history.replaceState(a.window.history.state,null,l)}}function wh(m,l){const h=m.getCenter(),_=Math.round(100*m.getZoom())/100,x=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,x),C=Math.round(h.lng*w)/w,I=Math.round(h.lat*w)/w,O=m.getBearing(),j=m.getPitch();let B=l?`/${C}/${I}/${_}`:`${_}/${I}/${C}`;return(O||j)&&(B+="/"+Math.round(10*O)/10),j&&(B+=`/${Math.round(j)}`),B}const Eh={linearity:.3,easing:a.bezier(0,0,.3,1)},Vp=a.extend({deceleration:2500,maxSpeed:1400},Eh),Wp=a.extend({deceleration:20,maxSpeed:1400},Eh),gn=a.extend({deceleration:1e3,maxSpeed:360},Eh),Ss=a.extend({deceleration:1e3,maxSpeed:90},Eh);class O_{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,h=a.exported.now();for(;l.length>0&&h-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)h.zoom+=w.zoomDelta||0,h.bearing+=w.bearingDelta||0,h.pitch+=w.pitchDelta||0,w.panDelta&&h.pan._add(w.panDelta),w.around&&(h.around=w.around),w.pinchAround&&(h.pinchAround=w.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(h.pan.mag()){const w=Sh(h.pan.mag(),_,a.extend({},Vp,l||{}));x.offset=h.pan.mult(w.amount/h.pan.mag()),x.center=this._map.transform.center,Th(x,w)}if(h.zoom){const w=Sh(h.zoom,_,Wp);x.zoom=this._map.transform.zoom+w.amount,Th(x,w)}if(h.bearing){const w=Sh(h.bearing,_,gn);x.bearing=this._map.transform.bearing+a.clamp(w.amount,-179,179),Th(x,w)}if(h.pitch){const w=Sh(h.pitch,_,Ss);x.pitch=this._map.transform.pitch+w.amount,Th(x,w)}if(x.zoom||x.bearing){const w=h.pinchAround===void 0?h.around:h.pinchAround;x.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function Th(m,l){(!m.duration||m.duration<l.duration)&&(m.duration=l.duration,m.easing=l.easing)}function Sh(m,l,h){const{maxSpeed:_,linearity:x,deceleration:w}=h,C=a.clamp(m*x/(l/1e3),-_,_),I=Math.abs(C)/(w*x);return{easing:h.easing,duration:1e3*I,amount:C*(I/2)}}class bo extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,_,x={}){const w=he(h.getCanvasContainer(),_),C=h.unproject(w);super(l,a.extend({point:w,lngLat:C,originalEvent:_},x)),this._defaultPrevented=!1,this.target=h}}class kh extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,_){const x=l==="touchend"?_.changedTouches:_.touches,w=be(h.getCanvasContainer(),x),C=w.map(O=>h.unproject(O)),I=w.reduce((O,j,B,Y)=>O.add(j.div(Y.length)),new a.Point(0,0));super(l,{points:w,point:I,lngLats:C,lngLat:h.unproject(I),originalEvent:_}),this._defaultPrevented=!1}}class Hp extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,_){super(l,{originalEvent:_}),this._defaultPrevented=!1}}class um{constructor(l,h){this._map=l,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new Hp(l.type,this._map,l))}mousedown(l,h){return this._mousedownPos=h,this._firePreventable(new bo(l.type,this._map,l))}mouseup(l){this._map.fire(new bo(l.type,this._map,l))}preclick(l){const h=a.extend({},l);h.type="preclick",this._map.fire(new bo(h.type,this._map,h))}click(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(l),this._map.fire(new bo(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new bo(l.type,this._map,l))}mouseover(l){this._map.fire(new bo(l.type,this._map,l))}mouseout(l){this._map.fire(new bo(l.type,this._map,l))}touchstart(l){return this._firePreventable(new kh(l.type,this._map,l))}touchmove(l){this._map.fire(new kh(l.type,this._map,l))}touchend(l){this._map.fire(new kh(l.type,this._map,l))}touchcancel(l){this._map.fire(new kh(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qp{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new bo(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new bo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new bo(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class L_{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(G(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(l,h){if(!this._active)return;const _=h,x=this._startPos,w=this._lastPos;if(!x||!w||w.equals(_)||!this._box&&_.dist(x)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=N("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const C=Math.min(x.x,_.x),I=Math.max(x.x,_.x),O=Math.min(x.y,_.y),j=Math.max(x.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${C}px,${O}px)`,this._box.style.width=I-C+"px",this._box.style.height=j-O+"px")})}mouseupWindow(l,h){if(!this._active)return;const _=this._startPos,x=h;if(_&&l.button===0){if(this.reset(),oe(),_.x!==x.x||_.y!==x.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:w=>w.fitScreenCoordinates(_,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),X(),delete this._startPos,delete this._lastPos}_fireEvent(l,h){return this._map.fire(new a.Event(l,{originalEvent:h}))}}function Gp(m,l){const h={};for(let _=0;_<m.length;_++)h[m[_].identifier]=l[_];return h}class id{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,h,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),_.length===this.numTouches&&(this.centroid=function(x){const w=new a.Point(0,0);for(const C of x)w._add(C);return w.div(x.length)}(h),this.touches=Gp(_,h)))}touchmove(l,h,_){if(this.aborted||!this.centroid)return;const x=Gp(_,h);for(const w in this.touches){const C=x[w];(!C||C.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(l,h,_){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class dm{constructor(l){this.singleTap=new id(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,h,_){this.singleTap.touchstart(l,h,_)}touchmove(l,h,_){this.singleTap.touchmove(l,h,_)}touchend(l,h,_){const x=this.singleTap.touchend(l,h,_);if(x){const w=l.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(x)<30;if(w&&C||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class Bb{constructor(){this._zoomIn=new dm({numTouches:1,numTaps:2}),this._zoomOut=new dm({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,h,_){this._zoomIn.touchstart(l,h,_),this._zoomOut.touchstart(l,h,_)}touchmove(l,h,_){this._zoomIn.touchmove(l,h,_),this._zoomOut.touchmove(l,h,_)}touchend(l,h,_){const x=this._zoomIn.touchend(l,h,_),w=this._zoomOut.touchend(l,h,_);return x?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(x)},{originalEvent:l})}):w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(w)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const z_={0:1,2:2};class od{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,h){return!1}_move(l,h){return{}}mousedown(l,h){if(this._lastPoint)return;const _=A(l);this._correctButton(l,_)&&(this._lastPoint=h,this._eventButton=_)}mousemoveWindow(l,h){const _=this._lastPoint;if(_){if(l.preventDefault(),this._eventButton!=null&&function(x,w){const C=z_[w];return x.buttons===void 0||(x.buttons&C)!==C}(l,this._eventButton))this.reset();else if(this._moved||!(h.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(_,h)}}mouseupWindow(l){this._lastPoint&&A(l)===this._eventButton&&(this._moved&&oe(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hm extends od{mousedown(l,h){super.mousedown(l,h),this._lastPoint&&(this._active=!0)}_correctButton(l,h){return h===0&&!l.ctrlKey}_move(l,h){return{around:h,panDelta:h.sub(l)}}}class pm extends od{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const _=.8*(h.x-l.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(l){l.preventDefault()}}class fm extends od{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const _=-.5*(h.y-l.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(l){l.preventDefault()}}class Zp{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),a.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)}touchstart(l,h,_){return this._calculateTransform(l,h,_)}touchmove(l,h,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!a.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,h,_)}}touchend(l,h,_){this._calculateTransform(l,h,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,h,_){_.length>0&&(this._active=!0);const x=Gp(_,h),w=new a.Point(0,0),C=new a.Point(0,0);let I=0;for(const j in x){const B=x[j],Y=this._touches[j];Y&&(w._add(B),C._add(B.sub(Y)),I++,x[j]=B)}if(this._touches=x,I<this._minTouches||!C.mag())return;const O=C.div(I);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(I),panDelta:O}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=N("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Ch{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,h,_){return{}}touchstart(l,h,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([h[0],h[1]]))}touchmove(l,h,_){const x=this._firstTwoTouches;if(!x)return;l.preventDefault();const[w,C]=x,I=Ph(_,h,w),O=Ph(_,h,C);if(!I||!O)return;const j=this._aroundCenter?null:I.add(O).div(2);return this._move([I,O],j,l)}touchend(l,h,_){if(!this._firstTwoTouches)return;const[x,w]=this._firstTwoTouches,C=Ph(_,h,x),I=Ph(_,h,w);C&&I||(this._active&&oe(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ph(m,l,h){for(let _=0;_<m.length;_++)if(m[_].identifier===h)return l[_]}function mm(m,l){return Math.log(m/l)/Math.LN2}class N_ extends Ch{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,h){const _=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(mm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mm(this._distance,_),pinchAround:h}}}function gm(m,l){return 180*m.angleWith(l)/Math.PI}class F_ extends Ch{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,h){const _=this._vector;if(this._vector=l[0].sub(l[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:gm(this._vector,_),pinchAround:h}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const h=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const x=gm(l,_);return Math.abs(x)<h}}function bc(m){return Math.abs(m.y)>Math.abs(m.x)}class B_ extends Ch{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,bc(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,h,_){const x=this._lastPoints;if(!x)return;const w=l[0].sub(x[0]),C=l[1].sub(x[1]);return this._map._cooperativeGestures&&!a.isFullscreen()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(w,C,_.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+C.y)/2*-.5})}gestureBeginsVertically(l,h,_){if(this._valid!==void 0)return this._valid;const x=l.mag()>=2,w=h.mag()>=2;if(!x&&!w)return;if(!x||!w)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const C=l.y>0==h.y>0;return bc(l)&&bc(h)&&C}}const j_={panStep:100,bearingStep:15,pitchStep:10};class jb{constructor(){const l=j_;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let h=0,_=0,x=0,w=0,C=0;switch(l.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:l.shiftKey?_=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?_=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?x=1:(l.preventDefault(),C=-1);break;case 40:l.shiftKey?x=-1:(l.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(_=0,x=0),{cameraAnimation:I=>{const O=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:$_,zoom:h?Math.round(O)+h*(l.shiftKey?2:1):O,bearing:I.getBearing()+_*this._bearingStep,pitch:I.getPitch()+x*this._pitchStep,offset:[-w*this._panStep,-C*this._panStep],center:I.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function $_(m){return m*(2-m)}const _m=4.000244140625;class U_{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||a.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=l.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const _=a.exported.now(),x=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,h!==0&&h%_m==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(x*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=he(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>_m?this._wheelZoomRate:this._defaultZoomRate;let j=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&j!==0&&(j=1/j);const B=h(),Y=Math.pow(2,B),se=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):Y;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(se*j))),this._type==="wheel"&&(this._startZoom=B,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:h(),x=this._startZoom,w=this._easing;let C,I=!1;if(this._type==="wheel"&&x&&w){const O=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),j=w(O);C=a.number(x,_,j),O<1?this._frameId||(this._frameId=!0):I=!0}else C=_,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:C-h(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let h=a.ease;if(this._prevEase){const _=this._prevEase,x=(a.exported.now()-_.start)/_.duration,w=_.easing(x+.01)-_.easing(x),C=.27/Math.sqrt(w*w+1e-4)*.01,I=Math.sqrt(.0729-C*C);h=a.bezier(C,I,.25,1)}return this._prevEase={start:a.exported.now(),duration:l,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=N("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(a.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class V_{constructor(l,h){this._clickZoom=l,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qo{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,h){return l.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(l.shiftKey?-1:1),around:_.unproject(h)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $b{constructor(){this._tap=new dm({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,h,_){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=h[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(l,h,_))}touchmove(l,h,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const x=h[0],w=x.y-this._swipePoint.y;return this._swipePoint=x,l.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(l,h,_)}touchend(l,h,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(l,h,_)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class W_{constructor(l,h,_){this._el=l,this._mousePan=h,this._touchPan=_}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ub{constructor(l,h,_){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=h,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Vb{constructor(l,h,_,x){this._el=l,this._touchZoom=h,this._touchRotate=_,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Qa=m=>m.zoom||m.drag||m.pitch||m.rotate;class H_ extends a.Event{}class Wb{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,h){const _=a.sub([],h,l);this.radius=a.length(_[2]<0?a.div([],_,this.constants):[_[0],_[1],0])}projectRay(l){a.div(l,l,this.constants),a.normalize(l,l),a.mul$1(l,l,this.constants);const h=a.scale$2([],l,this.radius);if(h[2]>0){const _=a.scale$2([],[0,0,1],a.dot(h,[0,0,1])),x=a.scale$2([],a.normalize([],[h[0],h[1],0]),this.radius),w=a.add([],h,a.scale$2([],a.sub([],a.add([],x,_),h),2));h[0]=w[0],h[1]=w[1]}return h}}function ks(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class Xs{constructor(l,h){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new O_(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Wb,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),a.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[a.window,"blur",void 0]];for(const[x,w,C]of this._listeners)x.addEventListener(w,x===a.window.document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[l,h,_]of this._listeners)l.removeEventListener(h,l===a.window.document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(l){const h=this._map,_=h.getCanvasContainer();this._add("mapEvent",new um(h,l));const x=h.boxZoom=new L_(h,l);this._add("boxZoom",x);const w=new Bb,C=new qo;h.doubleClickZoom=new V_(C,w),this._add("tapZoom",w),this._add("clickZoom",C);const I=new $b;this._add("tapDragZoom",I);const O=h.touchPitch=new B_(h);this._add("touchPitch",O);const j=new pm(l),B=new fm(l);h.dragRotate=new Ub(l,j,B),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]);const Y=new hm(l),se=new Zp(h,l);h.dragPan=new W_(_,Y,se),this._add("mousePan",Y),this._add("touchPan",se,["touchZoom","touchRotate"]);const de=new F_,fe=new N_;h.touchZoomRotate=new Vb(_,fe,de,I),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",fe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new qp(h));const pe=h.scrollZoom=new U_(h,this);this._add("scrollZoom",pe,["mousePan"]);const ge=h.keyboard=new jb;this._add("keyboard",ge);for(const J of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[J]&&h[J].enable(l[J])}_add(l,h,_){this._handlers.push({handlerName:l,handler:h,allowed:_}),this._handlersById[l]=h}stop(l){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Qa(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,h,_){for(const x in l)if(x!==_&&(!h||h.indexOf(x)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const h=[];for(const _ of l)this._el.contains(_.target)&&h.push(_);return h}handleEvent(l,h){this._updatingCamera=!0;const _=l.type==="renderFrame",x=_?void 0:l,w={needsRenderFrame:!1},C={},I={},O=l.touches?this._getMapTouches(l.touches):void 0,j=O?be(this._el,O):_?void 0:he(this._el,l);for(const{handlerName:se,handler:de,allowed:fe}of this._handlers){if(!de.isEnabled())continue;let pe;this._blockedByActive(I,fe,se)?de.reset():de[h||l.type]&&(pe=de[h||l.type](l,j,O),this.mergeHandlerResult(w,C,pe,se,x),pe&&pe.needsRenderFrame&&this._triggerRenderFrame()),(pe||de.isActive())&&(I[se]=de)}const B={};for(const se in this._previousActiveHandlers)I[se]||(B[se]=x);this._previousActiveHandlers=I,(Object.keys(B).length||ks(w))&&(this._changes.push([w,C,B]),this._triggerRenderFrame()),(Object.keys(I).length||ks(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Y}=w;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))}mergeHandlerResult(l,h,_,x,w){if(!_)return;a.extend(l,_);const C={handlerName:x,originalEvent:_.originalEvent||w};_.zoomDelta!==void 0&&(h.zoom=C),_.panDelta!==void 0&&(h.drag=C),_.pitchDelta!==void 0&&(h.pitch=C),_.bearingDelta!==void 0&&(h.rotate=C)}_applyChanges(){const l={},h={},_={};for(const[x,w,C]of this._changes)x.panDelta&&(l.panDelta=(l.panDelta||new a.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(l.around=x.around),x.aroundCoord!==void 0&&(l.aroundCoord=x.aroundCoord),x.pinchAround!==void 0&&(l.pinchAround=x.pinchAround),x.noInertia&&(l.noInertia=x.noInertia),a.extend(h,w),a.extend(_,C);this._updateMapTransform(l,h,_),this._changes=[]}_updateMapTransform(l,h,_){const x=this._map,w=x.transform,C=ue=>[ue.x,ue.y,ue.z];if((ue=>{const we=this._eventsInProgress.drag;return we&&!this._handlersById[we.handlerName].isActive()})()&&!ks(l)){const ue=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",ue!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&x._stop(!0),!ks(l))return void this._fireEvents(h,_,!0);let{panDelta:I,zoomDelta:O,bearingDelta:j,pitchDelta:B,around:Y,aroundCoord:se,pinchAround:de}=l;w._isCameraConstrained&&(O>0&&(O=0),w._isCameraConstrained=!1),de!==void 0&&(Y=de),(O||(ue=>h[ue]&&!this._eventsInProgress[ue])("drag"))&&Y&&(this._dragOrigin=C(w.pointCoordinate3D(Y)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",x._stop(!0),Y=Y||x.transform.centerPoint,j&&(w.bearing+=j),B&&(w.pitch+=B),w._updateCameraState();const fe=[0,0,0];if(I)if(w.projection.name==="mercator"){const ue=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(Y).dir),we=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(Y.sub(I)).dir);fe[0]=we[0]-ue[0],fe[1]=we[1]-ue[1]}else{const ue=w.pointCoordinate(Y);if(w.projection.name==="globe"){I=I.rotate(-w.angle);const we=w._pixelsPerMercatorPixel/w.worldSize;fe[0]=-I.x*a.mercatorScale(a.latFromMercatorY(ue.y))*we,fe[1]=-I.y*a.mercatorScale(w.center.lat)*we}else{const we=w.pointCoordinate(Y.sub(I));ue&&we&&(fe[0]=we.x-ue.x,fe[1]=we.y-ue.y)}}const pe=w.zoom,ge=[0,0,0];if(O){const ue=C(se||w.pointCoordinate3D(Y)),we={dir:a.normalize([],a.sub([],ue,w._camera.position))};if(we.dir[2]<0){const Se=w.zoomDeltaToMovement(ue,O);a.scale$2(ge,we.dir,Se)}}const J=a.add(fe,fe,ge);w._translateCameraConstrained(J),O&&Math.abs(w.zoom-pe)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,_,!0)}_fireEvents(l,h,_){const x=Qa(this._eventsInProgress),w=Qa(l),C={};for(const B in l){const{originalEvent:Y}=l[B];this._eventsInProgress[B]||(C[`${B}start`]=Y),this._eventsInProgress[B]=l[B]}!x&&w&&this._fireEvent("movestart",w.originalEvent);for(const B in C)this._fireEvent(B,C[B]);w&&this._fireEvent("move",w.originalEvent);for(const B in l){const{originalEvent:Y}=l[B];this._fireEvent(B,Y)}const I={};let O;for(const B in this._eventsInProgress){const{handlerName:Y,originalEvent:se}=this._eventsInProgress[B];this._handlersById[Y].isActive()||(delete this._eventsInProgress[B],O=h[Y]||se,I[`${B}end`]=O)}for(const B in I)this._fireEvent(B,I[B]);const j=Qa(this._eventsInProgress);if(_&&(x||w)&&!j){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Y=se=>se!==0&&-this._bearingSnap<se&&se<this._bearingSnap;B?(Y(B.bearing||this._map.getBearing())&&(B.bearing=0),this._map.easeTo(B,{originalEvent:O})):(this._map.fire(new a.Event("moveend",{originalEvent:O})),Y(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,h){this._map.fire(new a.Event(l,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new H_("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const hu="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Xp extends a.Evented{constructor(l,h){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=h.bearingSnap,this._respectPrefersReducedMotion=h.respectPrefersReducedMotion!==!1,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,h){return this.jumpTo({center:l},h)}panBy(l,h,_){return l=a.Point.convert(l).mult(-1),this.panTo(this.transform.center,a.extend({offset:l},h),_)}panTo(l,h,_){return this.easeTo(a.extend({center:l},h),_)}getZoom(){return this.transform.zoom}setZoom(l,h){return this.jumpTo({zoom:l},h),this}zoomTo(l,h,_){return this.easeTo(a.extend({zoom:l},h),_)}zoomIn(l,h){return this.zoomTo(this.getZoom()+1,l,h),this}zoomOut(l,h){return this.zoomTo(this.getZoom()-1,l,h),this}getBearing(){return this.transform.bearing}setBearing(l,h){return this.jumpTo({bearing:l},h),this}getPadding(){return this.transform.padding}setPadding(l,h){return this.jumpTo({padding:l},h),this}rotateTo(l,h,_){return this.easeTo(a.extend({bearing:l},h),_)}resetNorth(l,h){return this.rotateTo(0,a.extend({duration:1e3},l),h),this}resetNorthPitch(l,h){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},l),h),this}snapToNorth(l,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,h):this}getPitch(){return this.transform.pitch}setPitch(l,h){return this.jumpTo({pitch:l},h),this}cameraForBounds(l,h){l=a.LngLatBounds.convert(l);const _=h&&h.bearing||0,x=h&&h.pitch||0,w=l.getNorthWest(),C=l.getSouthEast();return this._cameraForBounds(this.transform,w,C,_,x,h)}_extendCameraOptions(l){const h={top:0,bottom:0,right:0,left:0};if(typeof(l=a.extend({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const _=l.padding;l.padding={top:_,bottom:_,right:_,left:_}}return l.padding=a.extend(h,l.padding),l}_minimumAABBFrustumDistance(l,h){const _=h.max[0]-h.min[0],x=h.max[1]-h.min[1];return _/x>l.aspect?_/(2*Math.tan(.5*l.fovX)*l.aspect):x/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,h,_,x,w,C){const I=l.clone(),O=this._extendCameraOptions(C);I.bearing=x,I.pitch=w;const j=a.LngLat.convert(h),B=a.LngLat.convert(_),Y=.5*(j.lat+B.lat),se=.5*(j.lng+B.lng),de=a.latLngToECEF(Y,se),fe=a.normalize([],de),pe=a.normalize([],a.cross([],fe,[0,1,0])),ge=a.cross([],pe,fe),J=[pe[0],pe[1],pe[2],0,ge[0],ge[1],ge[2],0,fe[0],fe[1],fe[2],0,0,0,0,1],ue=[de,a.latLngToECEF(j.lat,j.lng),a.latLngToECEF(B.lat,j.lng),a.latLngToECEF(B.lat,B.lng),a.latLngToECEF(j.lat,B.lng),a.latLngToECEF(Y,j.lng),a.latLngToECEF(Y,B.lng),a.latLngToECEF(j.lat,se),a.latLngToECEF(B.lat,se)];let we=a.Aabb.fromPoints(ue.map(zt=>[a.dot(pe,zt),a.dot(ge,zt),a.dot(fe,zt)]));const Se=a.transformMat4([],we.center,J);a.squaredLength(Se)===0&&a.set(Se,0,0,1),a.normalize(Se,Se),a.scale$2(Se,Se,a.GLOBE_RADIUS),I.center=a.ecefToLatLng(Se);const $e=I.getWorldToCameraMatrix(),Ve=a.invert(new Float64Array(16),$e);we=a.Aabb.applyTransform(we,a.multiply([],$e,J)),a.transformMat4(Se,Se,$e);const Ue=.5*(we.max[2]-we.min[2]),Qe=this._minimumAABBFrustumDistance(I,we),Je=a.scale$2([],[0,0,1],Ue),dt=a.add(Je,Se,Je),Ut=Qe+(I.pitch===0?0:a.distance(Se,dt)),at=I.globeCenterInViewSpace,kt=a.sub([],Se,[at[0],at[1],at[2]]);a.normalize(kt,kt),a.scale$2(kt,kt,Ut);const ft=a.add([],Se,kt);a.transformMat4(ft,ft,Ve);const jt=a.earthRadius/a.GLOBE_RADIUS,ut=a.length(ft),St=a.mercatorZfromAltitude(Math.max(ut*jt-a.earthRadius,Number.EPSILON),0),Wt=Math.min(I.zoomFromMercatorZAdjusted(St),O.maxZoom);return Wt>.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(I.setProjection({name:"mercator"}),I.zoom=Wt,this._cameraForBounds(I,h,_,x,w,C)):{center:I.center,zoom:Wt,bearing:x,pitch:w}}queryTerrainElevation(l,h){const _=this.transform.elevation;return _?(h=a.extend({},{exaggerated:!0},h),_.getAtPoint(a.MercatorCoordinate.fromLngLat(l),null,h.exaggerated)):null}_cameraForBounds(l,h,_,x,w,C){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,h,_,x,w,C);const I=l.clone(),O=this._extendCameraOptions(C),j=I.padding;I.bearing=x,I.pitch=w;const B=a.LngLat.convert(h),Y=a.LngLat.convert(_),se=new a.LngLat(B.lng,Y.lat),de=new a.LngLat(Y.lng,B.lat),fe=I.project(B),pe=I.project(Y),ge=this.queryTerrainElevation(B),J=this.queryTerrainElevation(Y),ue=this.queryTerrainElevation(se),we=this.queryTerrainElevation(de),Se=[[fe.x,fe.y,Math.min(ge||0,J||0,ue||0,we||0)],[pe.x,pe.y,Math.max(ge||0,J||0,ue||0,we||0)]];let $e=a.Aabb.fromPoints(Se);const Ve=I.getWorldToCameraMatrix(),Ue=a.invert(new Float64Array(16),Ve);$e=a.Aabb.applyTransform($e,Ve);const Qe=a.sub([],$e.max,$e.min),Je=j.left||0,dt=j.right||0,Ut=j.bottom||0,at=j.top||0,{left:kt,right:ft,top:jt,bottom:ut}=O.padding,St=.5*(Je+dt),Wt=.5*(at+Ut),zt=Math.min(I.scaleZoom(I.scale*Math.min((I.width-(Je+dt+kt+ft))/Qe[0],(I.height-(Ut+at+ut+jt))/Qe[1])),O.maxZoom),Ht=I.scale/I.zoomScale(zt);$e=new a.Aabb([$e.min[0]-(kt+St)*Ht,$e.min[1]-(ut+Wt)*Ht,$e.min[2]],[$e.max[0]+(ft+St)*Ht,$e.max[1]+(jt+Wt)*Ht,$e.max[2]]);const zn=.5*Qe[2],Qn=this._minimumAABBFrustumDistance(I,$e),Sn=[0,0,1,0];a.transformMat4$1(Sn,Sn,Ve),a.normalize$2(Sn,Sn);const Gn=a.scale$2([],Sn,Qn+zn),Er=a.add([],$e.center,Gn),yr=(typeof O.offset.x=="number"&&typeof O.offset.y=="number"?new a.Point(O.offset.x,O.offset.y):a.Point.convert(O.offset)).rotate(-a.degToRad(x));$e.center[0]-=yr.x*Ht,$e.center[1]+=yr.y*Ht,a.transformMat4($e.center,$e.center,Ue),a.transformMat4(Er,Er,Ue);const Mn=[$e.center[0],$e.center[1],Er[2]*I.pixelsPerMeter];a.scale$2(Mn,Mn,1/I.worldSize);const Fr=a.lngFromMercatorX(Mn[0]),Vr=a.latFromMercatorY(Mn[1]),Wr=Math.min(I._zoomFromMercatorZ(Mn[2]),O.maxZoom),Hr=new a.LngLat(Fr,Vr);return I.mercatorFromTransition&&Wr<.5*(a.GLOBE_ZOOM_THRESHOLD_MIN+a.GLOBE_ZOOM_THRESHOLD_MAX)?(I.setProjection({name:"globe"}),I.zoom=Wr,this._cameraForBounds(I,h,_,x,w,C)):{center:Hr,zoom:Wr,bearing:x,pitch:w}}fitBounds(l,h,_){const x=this.cameraForBounds(l,h);return this._fitInternal(x,h,_)}fitScreenCoordinates(l,h,_,x,w){const C=a.Point.convert(l),I=a.Point.convert(h),O=new a.Point(Math.min(C.x,I.x),Math.min(C.y,I.y)),j=new a.Point(Math.max(C.x,I.x),Math.max(C.y,I.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(C,I))return this;const B=this.transform.pointLocation3D(O),Y=this.transform.pointLocation3D(j),se=this.transform.pointLocation3D(new a.Point(O.x,j.y)),de=this.transform.pointLocation3D(new a.Point(j.x,O.y)),fe=[Math.min(B.lng,Y.lng,se.lng,de.lng),Math.min(B.lat,Y.lat,se.lat,de.lat)],pe=[Math.max(B.lng,Y.lng,se.lng,de.lng),Math.max(B.lat,Y.lat,se.lat,de.lat)],ge=x&&x.pitch?x.pitch:this.getPitch(),J=this._cameraForBounds(this.transform,fe,pe,_,ge,x);return this._fitInternal(J,x,w)}_fitInternal(l,h,_){return l?(delete(h=a.extend(l,h)).padding,h.linear?this.easeTo(h,_):this.flyTo(h,_)):this}jumpTo(l,h){this.stop();const _=l.preloadOnly?this.transform.clone():this.transform;let x=!1,w=!1,C=!1;return"zoom"in l&&_.zoom!==+l.zoom&&(x=!0,_.zoom=+l.zoom),l.center!==void 0&&(_.center=a.LngLat.convert(l.center)),"bearing"in l&&_.bearing!==+l.bearing&&(w=!0,_.bearing=+l.bearing),"pitch"in l&&_.pitch!==+l.pitch&&(C=!0,_.pitch=+l.pitch),l.padding==null||_.isPaddingEqual(l.padding)||(_.padding=l.padding),l.preloadOnly?(this._preloadTiles(_),this):(this.fire(new a.Event("movestart",h)).fire(new a.Event("move",h)),x&&this.fire(new a.Event("zoomstart",h)).fire(new a.Event("zoom",h)).fire(new a.Event("zoomend",h)),w&&this.fire(new a.Event("rotatestart",h)).fire(new a.Event("rotate",h)).fire(new a.Event("rotateend",h)),C&&this.fire(new a.Event("pitchstart",h)).fire(new a.Event("pitch",h)).fire(new a.Event("pitchend",h)),this.fire(new a.Event("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.warnOnce(hu),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,h){const _=this.transform;if(!_.projection.supportsFreeCamera)return a.warnOnce(hu),this;this.stop();const x=_.zoom,w=_.pitch,C=_.bearing;_.setFreeCameraOptions(l);const I=x!==_.zoom,O=w!==_.pitch,j=C!==_.bearing;return this.fire(new a.Event("movestart",h)).fire(new a.Event("move",h)),I&&this.fire(new a.Event("zoomstart",h)).fire(new a.Event("zoom",h)).fire(new a.Event("zoomend",h)),j&&this.fire(new a.Event("rotatestart",h)).fire(new a.Event("rotate",h)).fire(new a.Event("rotateend",h)),O&&this.fire(new a.Event("pitchstart",h)).fire(new a.Event("pitch",h)).fire(new a.Event("pitchend",h)),this.fire(new a.Event("moveend",h)),this}easeTo(l,h){this._stop(!1,l.easeId),((l=a.extend({offset:[0,0],duration:500,easing:a.ease},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const _=this.transform,x=this.getZoom(),w=this.getBearing(),C=this.getPitch(),I=this.getPadding(),O="zoom"in l?+l.zoom:x,j="bearing"in l?this._normalizeBearing(l.bearing,w):w,B="pitch"in l?+l.pitch:C,Y="padding"in l?l.padding:_.padding,se=a.Point.convert(l.offset);let de,fe,pe;if(_.projection.name==="globe"){const Je=a.MercatorCoordinate.fromLngLat(_.center),dt=se.rotate(-_.angle);Je.x+=dt.x/_.worldSize,Je.y+=dt.y/_.worldSize;const Ut=Je.toLngLat(),at=a.LngLat.convert(l.center||Ut);this._normalizeCenter(at),de=_.centerPoint.add(dt),fe=new a.Point(Je.x,Je.y).mult(_.worldSize),pe=new a.Point(a.mercatorXfromLng(at.lng),a.mercatorYfromLat(at.lat)).mult(_.worldSize).sub(fe)}else{de=_.centerPoint.add(se);const Je=_.pointLocation(de),dt=a.LngLat.convert(l.center||Je);this._normalizeCenter(dt),fe=_.project(Je),pe=_.project(dt).sub(fe)}const ge=_.zoomScale(O-x);let J,ue;l.around&&(J=a.LngLat.convert(l.around),ue=_.locationPoint(J));const we=this._zooming||O!==x,Se=this._rotating||w!==j,$e=this._pitching||B!==C,Ve=!_.isPaddingEqual(Y),Ue=Je=>dt=>{if(we&&(Je.zoom=a.number(x,O,dt)),Se&&(Je.bearing=a.number(w,j,dt)),$e&&(Je.pitch=a.number(C,B,dt)),Ve&&(Je.interpolatePadding(I,Y,dt),de=Je.centerPoint.add(se)),J)Je.setLocationAtPoint(J,ue);else{const Ut=Je.zoomScale(Je.zoom-x),at=O>x?Math.min(2,ge):Math.max(.5,ge),kt=Math.pow(at,1-dt),ft=Je.unproject(fe.add(pe.mult(dt*kt)).mult(Ut));Je.setLocationAtPoint(Je.renderWorldCopies?ft.wrap():ft,de)}return l.preloadOnly||this._fireMoveEvents(h),Je};if(l.preloadOnly){const Je=this._emulate(Ue,l.duration,_);return this._preloadTiles(Je),this}const Qe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=we,this._rotating=Se,this._pitching=$e,this._padding=Ve,this._easeId=l.easeId,this._prepareEase(h,l.noMoveStart,Qe),this._ease(Ue(_),Je=>{_.recenterOnTerrain(),this._afterEase(h,Je)},l),this}_prepareEase(l,h,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",h||_.moving||this.fire(new a.Event("movestart",l)),this._zooming&&!_.zooming&&this.fire(new a.Event("zoomstart",l)),this._rotating&&!_.rotating&&this.fire(new a.Event("rotatestart",l)),this._pitching&&!_.pitching&&this.fire(new a.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new a.Event("move",l)),this._zooming&&this.fire(new a.Event("zoom",l)),this._rotating&&this.fire(new a.Event("rotate",l)),this._pitching&&this.fire(new a.Event("pitch",l))}_afterEase(l,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,x=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new a.Event("zoomend",l)),x&&this.fire(new a.Event("rotateend",l)),w&&this.fire(new a.Event("pitchend",l)),this.fire(new a.Event("moveend",l))}flyTo(l,h){if(this._prefersReducedMotion(l)){const zt=a.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(zt,h)}this.stop(),l=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},l);const _=this.transform,x=this.getZoom(),w=this.getBearing(),C=this.getPitch(),I=this.getPadding(),O="zoom"in l?a.clamp(+l.zoom,_.minZoom,_.maxZoom):x,j="bearing"in l?this._normalizeBearing(l.bearing,w):w,B="pitch"in l?+l.pitch:C,Y="padding"in l?l.padding:_.padding,se=_.zoomScale(O-x),de=a.Point.convert(l.offset);let fe=_.centerPoint.add(de);const pe=_.pointLocation(fe),ge=a.LngLat.convert(l.center||pe);this._normalizeCenter(ge);const J=_.project(pe),ue=_.project(ge).sub(J);let we=l.curve;const Se=Math.max(_.width,_.height),$e=Se/se,Ve=ue.mag();if("minZoom"in l){const zt=a.clamp(Math.min(l.minZoom,x,O),_.minZoom,_.maxZoom),Ht=Se/_.zoomScale(zt-x);we=Math.sqrt(Ht/Ve*2)}const Ue=we*we;function Qe(zt){const Ht=($e*$e-Se*Se+(zt?-1:1)*Ue*Ue*Ve*Ve)/(2*(zt?$e:Se)*Ue*Ve);return Math.log(Math.sqrt(Ht*Ht+1)-Ht)}function Je(zt){return(Math.exp(zt)-Math.exp(-zt))/2}function dt(zt){return(Math.exp(zt)+Math.exp(-zt))/2}const Ut=Qe(0);let at=function(zt){return dt(Ut)/dt(Ut+we*zt)},kt=function(zt){return Se*((dt(Ut)*(Je(Ht=Ut+we*zt)/dt(Ht))-Je(Ut))/Ue)/Ve;var Ht},ft=(Qe(1)-Ut)/we;if(Math.abs(Ve)<1e-6||!isFinite(ft)){if(Math.abs(Se-$e)<1e-6)return this.easeTo(l,h);const zt=$e<Se?-1:1;ft=Math.abs(Math.log($e/Se))/we,kt=function(){return 0},at=function(Ht){return Math.exp(zt*we*Ht)}}l.duration="duration"in l?+l.duration:1e3*ft/("screenSpeed"in l?+l.screenSpeed/we:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const jt=w!==j,ut=B!==C,St=!_.isPaddingEqual(Y),Wt=zt=>Ht=>{const zn=Ht*ft,Qn=1/at(zn);zt.zoom=Ht===1?O:x+zt.scaleZoom(Qn),jt&&(zt.bearing=a.number(w,j,Ht)),ut&&(zt.pitch=a.number(C,B,Ht)),St&&(zt.interpolatePadding(I,Y,Ht),fe=zt.centerPoint.add(de));const Sn=Ht===1?ge:zt.unproject(J.add(ue.mult(kt(zn))).mult(Qn));return zt.setLocationAtPoint(zt.renderWorldCopies?Sn.wrap():Sn,fe),zt._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(h),zt};if(l.preloadOnly){const zt=this._emulate(Wt,l.duration,_);return this._preloadTiles(zt),this}return this._zooming=!0,this._rotating=jt,this._pitching=ut,this._padding=St,this._prepareEase(h,!1),this._ease(Wt(_),()=>this._afterEase(h),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,h)}if(!l){const _=this.handlers;_&&_.stop(!1)}return this}_ease(l,h,_){_.animate===!1||_.duration===0?(l(1),h()):(this._easeStart=a.exported.now(),this._easeOptions=_,this._onEaseFrame=l,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,h){l=a.wrap(l,-180,180);const _=Math.abs(l-h);return Math.abs(l-360-h)<_&&(l-=360),Math.abs(l+360-h)<_&&(l+=360),l}_normalizeCenter(l){const h=this.transform;if(!h.renderWorldCopies||h.maxBounds)return;const _=l.lng-h.center.lng;l.lng+=_>180?-360:_<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&a.exported.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,h,_){const x=Math.ceil(15*h/1e3),w=[],C=l(_.clone());for(let I=0;I<=x;I++){const O=C(I/x);w.push(O.clone())}return w}}class wn{constructor(l={}){this.options=l,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const h=this.options&&this.options.compact;return this._map=l,this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=N("button","mapboxgl-ctrl-attrib-button",this._container),N("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,h){const _=this._map._getUIString(`AttributionControl.${h}`);l.setAttribute("aria-label",_),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(l){const _=h.reduce((x,w,C)=>(w.value&&(x+=`${w.key}=${w.value}${C<h.length-1?"&":""}`),x),"?");l.href=`${a.config.FEEDBACK_URL}/${_}#${wh(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const h=this._map.style._sourceCaches;for(const x in h){const w=h[x];if(w.used){const C=w.getSource();C.attribution&&l.indexOf(C.attribution)<0&&l.push(C.attribution)}}l.sort((x,w)=>x.length-w.length),l=l.filter((x,w)=>{for(let C=w+1;C<l.length;C++)if(l[C].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const _=l.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,l.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ym{constructor(){a.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=N("div","mapboxgl-ctrl");const h=N("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const h in l){const _=l[h].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const h=l[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class vm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h}remove(l){const h=this._currentlyRunning,_=h?this._queue.concat(h):this._queue;for(const x of _)if(x.id===l)return void(x.cancelled=!0)}run(l=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const _ of h)if(!_.cancelled&&(_.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function ad(m,l,h){if(m=new a.LngLat(m.lng,m.lat),l){const _=new a.LngLat(m.lng-360,m.lat),x=new a.LngLat(m.lng+360,m.lat),w=360*Math.ceil(Math.abs(m.lng-h.center.lng)/360),C=h.locationPoint(m).distSqr(l),I=l.x<0||l.y<0||l.x>h.width||l.y>h.height;h.locationPoint(_).distSqr(l)<C&&(I||Math.abs(_.lng-h.center.lng)<w)?m=_:h.locationPoint(x).distSqr(l)<C&&(I||Math.abs(x.lng-h.center.lng)<w)&&(m=x)}for(;Math.abs(m.lng-h.center.lng)>180;){const _=h.locationPoint(m);if(_.x>=0&&_.y>=0&&_.x<=h.width&&_.y<=h.height)break;m.lng>h.center.lng?m.lng-=360:m.lng+=360}return m}const pu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class pn extends a.Evented{constructor(l,h){if(super(),(l instanceof a.window.HTMLElement||h)&&(l=a.extend({element:l},h)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=a.Point.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=N("div");const x=41,w=27,C=W("svg",{display:"block",height:x*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${x}`},this._element),I=W("radialGradient",{id:"shadowGradient"},W("defs",{},C));W("stop",{offset:"10%","stop-opacity":.4},I),W("stop",{offset:"100%","stop-opacity":.05},I),W("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},C),W("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},C),W("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},C),W("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},C),this._offset=a.Point.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const _=this._element.classList;for(const x in pu)_.remove(`mapboxgl-marker-anchor-${x}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const h=l.code,_=l.charCode||l.keyCode;h!=="Space"&&h!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(l){const h=l.originalEvent.target,_=this._element;this._popup&&(h===_||_.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,h=this._pos;if(!l||!h)return!1;const _=l.unproject(h),x=l.getFreeCameraOptions();if(!x.position)return!1;const w=x.position.toLngLat();return w.distanceTo(_)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const h=this._pos;if(!h||h.x<0||h.x>l.transform.width||h.y<0||h.y>l.transform.height)return void this._clearFadeTimer();const _=l.unproject(h);let x;l._showingGlobe()&&a.isLngLatBehindGlobe(l.transform,this._lngLat)?x=0:(x=1-l._queryFogOpacity(_),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${pu[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const l=this._pos,h=this._map,_=this.getPitchAlignment();if(!h||!l||_!=="map")return"";if(!h._showingGlobe()){const O=h.getPitch();return O?`rotateX(${O}deg)`:""}const x=a.radToDeg(a.globeTiltAtLngLat(h.transform,this._lngLat)),w=l.sub(a.globeCenterToScreenPoint(h.transform)),C=Math.abs(w.x)+Math.abs(w.y);if(C===0)return"";const I=x/C;return`rotateX(${-w.y*I}deg) rotateY(${w.x*I}deg)`}_calculateZTransform(){const l=this._pos,h=this._map;if(!h||!l)return"";let _=0;const x=this.getRotationAlignment();if(x==="map")if(h._showingGlobe()){const w=h.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),C=h.project(new a.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);_=a.radToDeg(Math.atan2(C.y,C.x))-90}else _=-h.getBearing();else if(x==="horizon"){const w=a.smoothstep(4,6,h.getZoom()),C=a.globeCenterToScreenPoint(h.transform);C.y+=w*h.transform.height;const I=l.sub(C),O=a.radToDeg(Math.atan2(I.y,I.x));_=(O>90?O-270:O+90)*(1-w)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(l){a.window.cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=ad(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),l===!0?this._updateFrameId=a.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=a.Point.convert(l),this._update(),this}_onMove(l){const h=this._map;if(!h)return;const _=this._pointerdownPos,x=this._positionDelta;if(_&&x){if(!this._isDragging){const w=this._clickTolerance||h._clickTolerance;if(l.point.dist(_)<w)return;this._isDragging=!0}this._pos=l.point.sub(x),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(l){const h=this._map,_=this._pos;h&&_&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(_),this._pointerdownPos=l.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const h=this._map;return h&&(l?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const xm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Hb=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function q_(m=new a.Point(0,0),l="bottom"){if(typeof m=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(l){case"top":return new a.Point(0,m);case"top-left":return new a.Point(h,h);case"top-right":return new a.Point(-h,h);case"bottom":return new a.Point(0,-m);case"bottom-left":return new a.Point(h,-h);case"bottom-right":return new a.Point(-h,-h);case"left":return new a.Point(m,0);case"right":return new a.Point(-m,0)}return new a.Point(0,0)}return m instanceof a.Point||Array.isArray(m)?a.Point.convert(m):a.Point.convert(m[l]||[0,0])}class bm{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const h=a.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,h,_){this._start=this.getValue(h),this._end=l,this._startTime=h,this._endTime=h+_}}const G_={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Z_={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},qb={showCompass:!0,showZoom:!0,visualizePitch:!1};class Gb{constructor(l,h,_=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new pm({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,_&&(this.mousePitch=new fm({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(l,h){this.mouseRotate.mousedown(l,h),this.mousePitch&&this.mousePitch.mousedown(l,h),G()}move(l,h){const _=this.map,x=this.mouseRotate.mousemoveWindow(l,h),w=x&&x.bearingDelta;if(w&&_.setBearing(_.getBearing()+w),this.mousePitch){const C=this.mousePitch.mousemoveWindow(l,h),I=C&&C.pitchDelta;I&&_.setPitch(_.getPitch()+I)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){X(),a.window.removeEventListener("mousemove",this.mousemove),a.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(a.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),he(this.element,l)),a.window.addEventListener("mousemove",this.mousemove),a.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,he(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=be(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=be(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const wm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Em={maxWidth:100,unit:"metric"},Tm={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},sd={version:a.version,supported:S,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends Xp{constructor(m){if(a.LivePerformanceUtils.mark(a.PerformanceMarkers.create),(m=a.extend({},Z_,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&a.isSafariWithAntialiasingBug(a.window)&&(m.antialias=!1,a.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new nd(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._useWebGL2=m.useWebGL2,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new vm,this._domRenderTaskQueue=new vm,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.uniqueId(),this._locale=a.extend({},G_,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new bm(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new a.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,typeof m.container=="string"){if(this._container=a.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof a.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&a.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1),a.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Xs(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new cm(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,a.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new wn({customAttribution:m.customAttribution})),this._logoControl=new ym,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new a.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new a.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(m,l){if(l===void 0&&(l=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=m.onAdd(this);this._controls.push(m);const _=this._controlPositions[l];return l.indexOf("bottom")!==-1?_.insertBefore(h,_.firstChild):_.appendChild(h),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(m);return l>-1&&this._controls.splice(l,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new a.Event("movestart",m)).fire(new a.Event("move",m)),this.fire(new a.Event("resize",m)),l&&this.fire(new a.Event("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(a.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new a.Event("zoomstart")).fire(new a.Event("zoom")).fire(new a.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new a.Event("pitchstart")).fire(new a.Event("pitch")).fire(new a.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?a.window.navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(l=>l==="auto"?a.window.navigator.language:l):m}setLanguage(m){const l=this._parseLanguage(m);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,l=m.projection.name;let h;l==="globe"&&m.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),h=!0):l==="mercator"&&m.zoom<a.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,l){return this._updateProjection(m||l||{name:"mercator"})}_updateProjection(m){let l;if(l=m.name==="globe"&&this.transform.zoom>=a.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const h in this.style._sourceCaches)this.style._sourceCaches[h].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(m){return this.transform.locationPoint3D(a.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(a.Point.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,l,h){if(m==="mouseenter"||m==="mouseover"){let _=!1;const x=C=>{const I=l.filter(j=>this.getLayer(j)),O=I.length?this.queryRenderedFeatures(C.point,{layers:I}):[];O.length?_||(_=!0,h.call(this,new bo(m,this,C.originalEvent,{features:O}))):_=!1},w=()=>{_=!1};return{layers:new Set(l),listener:h,delegates:{mousemove:x,mouseout:w}}}if(m==="mouseleave"||m==="mouseout"){let _=!1;const x=C=>{const I=l.filter(O=>this.getLayer(O));(I.length?this.queryRenderedFeatures(C.point,{layers:I}):[]).length?_=!0:_&&(_=!1,h.call(this,new bo(m,this,C.originalEvent)))},w=C=>{_&&(_=!1,h.call(this,new bo(m,this,C.originalEvent)))};return{layers:new Set(l),listener:h,delegates:{mousemove:x,mouseout:w}}}{const _=x=>{const w=l.filter(I=>this.getLayer(I)),C=w.length?this.queryRenderedFeatures(x.point,{layers:w}):[];C.length&&(x.features=C,h.call(this,x),delete x.features)};return{layers:new Set(l),listener:h,delegates:{[m]:_}}}}on(m,l,h){if(h===void 0)return super.on(m,l);Array.isArray(l)||(l=[l]);const _=this._createDelegatedListener(m,l,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(_);for(const x in _.delegates)this.on(x,_.delegates[x]);return this}once(m,l,h){if(h===void 0)return super.once(m,l);Array.isArray(l)||(l=[l]);const _=this._createDelegatedListener(m,l,h);for(const x in _.delegates)this.once(x,_.delegates[x]);return this}off(m,l,h){if(h===void 0)return super.off(m,l);l=new Set(Array.isArray(l)?l:[l]);const _=(w,C)=>{if(w.size!==C.size)return!1;for(const I of w)if(!C.has(I))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[m]:void 0;return x&&(w=>{for(let C=0;C<w.length;C++){const I=w[C];if(I.listener===h&&_(I.layers,l)){for(const O in I.delegates)this.off(O,I.delegates[O]);return w.splice(C,1),this}}})(x),this}queryRenderedFeatures(m,l){return this.style?(l!==void 0||m===void 0||m instanceof a.Point||Array.isArray(m)||(l=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(m,l){return this.style.querySourceFeatures(m,l)}isPointOnSurface(m){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&a.warnOnce(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.Point.convert(m))}setStyle(m,l){return(l=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(m,l))}_getUIString(m){const l=this._locale[m];if(l==null)throw new Error(`Missing UI string '${m}'`);return l}_updateStyle(m,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new Uo(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Uo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,l){if(typeof m=="string"){const h=this._requestManager.normalizeStyleURL(m),_=this._requestManager.transformRequest(h,a.ResourceType.Style);a.getJSON(_,(x,w)=>{x?this.fire(new a.ErrorEvent(x)):w&&this._updateDiff(w,l)})}else typeof m=="object"&&this._updateDiff(m,l)}_updateDiff(m,l){try{this.style.setState(m)&&this._update(!0)}catch(h){a.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(m,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.warnOnce("There is no style added to the map."),!1)}addSource(m,l){return this._lazyInitEmptyStyle(),this.style.addSource(m,l),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const l in m){const h=m[l]._tiles;for(const _ in h){const x=h[_];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}addSourceType(m,l,h){this._lazyInitEmptyStyle(),this.style.addSourceType(m,l,h)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,l,{pixelRatio:h=1,sdf:_=!1,stretchX:x,stretchY:w,content:C}={}){if(this._lazyInitEmptyStyle(),l instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&l instanceof a.window.ImageBitmap){const{width:I,height:O,data:j}=a.exported.getImageData(l);this.style.addImage(m,{data:new a.RGBAImage({width:I,height:O},j),pixelRatio:h,stretchX:x,stretchY:w,content:C,sdf:_,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:I,height:O}=l,j=l;this.style.addImage(m,{data:new a.RGBAImage({width:I,height:O},new Uint8Array(j.data)),pixelRatio:h,stretchX:x,stretchY:w,content:C,sdf:_,version:0,userImage:j}),j.onAdd&&j.onAdd(this,m)}}updateImage(m,l){const h=this.style.getImage(m);if(!h)return void this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=l instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&l instanceof a.window.ImageBitmap?a.exported.getImageData(l):l,{width:x,height:w}=_;x!==void 0&&w!==void 0?x===h.data.width&&w===h.data.height?(h.data.replace(_.data,!(l instanceof a.window.HTMLImageElement||a.window.ImageBitmap&&l instanceof a.window.ImageBitmap)),this.style.updateImage(m,h)):this.fire(new a.ErrorEvent(new Error(`The width and height of the updated image (${x}, ${w})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`))):this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,l){a.getImage(this._requestManager.transformRequest(m,a.ResourceType.Image),(h,_)=>{l(h,_ instanceof a.window.HTMLImageElement?a.exported.getImageData(_):_)})}listImages(){return this.style.listImages()}addLayer(m,l){return this._lazyInitEmptyStyle(),this.style.addLayer(m,l),this._update(!0)}moveLayer(m,l){return this.style.moveLayer(m,l),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,l,h){return this.style.setLayerZoomRange(m,l,h),this._update(!0)}setFilter(m,l,h={}){return this.style.setFilter(m,l,h),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,l,h,_={}){return this.style.setPaintProperty(m,l,h,_),this._update(!0)}getPaintProperty(m,l){return this.style.getPaintProperty(m,l)}setLayoutProperty(m,l,h,_={}){return this.style.setLayoutProperty(m,l,h,_),this._update(!0)}getLayoutProperty(m,l){return this.style.getLayoutProperty(m,l)}setLight(m,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.LngLat.convert(m),this.transform):0}setFeatureState(m,l){return this.style.setFeatureState(m,l),this._update()}removeFeatureState(m,l){return this.style.removeFeatureState(m,l),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let h,_,x,w=this._container;for(;w&&(!_||!x);){const C=a.window.getComputedStyle(w).transform;C&&C!=="none"&&(h=C.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(_=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(x=h[3])),w=w.parentElement}this._containerWidth=_?Math.abs(m/_):m,this._containerHeight=x?Math.abs(l/x):l}_detectMissingCSS(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=N("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=N("div","mapboxgl-canvas-container",m);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=N("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=N("div","mapboxgl-control-container",m),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{_[x]=N("div",`mapboxgl-ctrl-${x}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,l){const h=a.exported.devicePixelRatio||1;this._canvas.width=h*Math.ceil(m),this._canvas.height=h*Math.ceil(l),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${l}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const l=this._markers.indexOf(m);l!==-1&&this._markers.splice(l,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const l=this._popups.indexOf(m);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const m=a.extend({},S.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",m),h=l||this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);h?(this._useWebGL2&&!l&&a.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),a.storeAuthState(h,!0),this.painter=new ed(h,this.transform,!!l),this.on("data",_=>{_.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),a.exported$1.testSupport(h)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let l;const h=this.painter.context.extTimerQuery,_=a.exported.now();if(this.listens("gpu-timing-frame")&&(l=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],a.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],a.window.performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const I=this.transform.zoom,O=this.transform.pitch,j=a.exported.now(),B=new a.EvaluationParameters(I,{now:j,fadeDuration:x,pitch:O,transition:this.style.getTransition()});this.style.update(B)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(_),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const I=a.exported.now()-_;h.endQueryEXT(h.TIME_ELAPSED_EXT,l),setTimeout(()=>{const O=h.getQueryObjectEXT(l,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(l),this.fire(new a.Event("gpu-timing-frame",{cpuTime:I,gpuTime:O})),a.window.performance.mark("frame-gpu",{startTime:_,detail:{gpuTime:O}})},50)}if(this.listens("gpu-timing-layer")){const I=this.painter.collectGpuTimers();setTimeout(()=>{const O=this.painter.queryGpuTimers(I);this.fire(new a.Event("gpu-timing-layer",{layerTimes:O}))},50)}if(this.listens("gpu-timing-deferred-render")){const I=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const O=this.painter.queryGpuTimeDeferredRender(I);this.fire(new a.Event("gpu-timing-deferred-render",{gpuTime:O}))},50)}const C=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(C||this._repaint)this.triggerRepaint();else{const I=!this.isMoving()&&this.loaded();if(I&&(w=this._updateAverageElevation(_,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),I&&(this.fire(new a.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const O=this._calculateSpeedIndex();this.fire(new a.Event("speedindexcompleted",{speedIndex:O})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||C||(this._fullyLoaded=!0,a.LivePerformanceUtils.mark(a.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&a.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const l of this._markers)m&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!m||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(m,l=!1){const h=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);if((l||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const _=this.transform.averageElevation;let x=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=m;const C=Math.abs(_-x);if(C>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(x),h(x);this._averageElevation.easeTo(x,m,300)}else if(C>1e-4)return this._averageElevation.jumpTo(x),h(x)}return!!this._averageElevation.isEasing(m)&&h(this._averageElevation.getValue(m))}_authenticate(){a.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===a.AUTH_ERR_MSG||m.status===401)){const l=this.painter.context.gl;a.storeAuthState(l,!1),this._logoControl instanceof ym&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),a.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const h=this.painter.context.gl,_=h.createFramebuffer();function x(w){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,w,0);const C=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,C),C}return h.bindFramebuffer(h.FRAMEBUFFER,_),this._canvasPixelComparison(x(m),l.canvasCopies.map(x),l.timeStamps)}_canvasPixelComparison(m,l,h){let _=h[1]-h[0];const x=m.length/4;for(let w=0;w<l.length;w++){const C=l[w];let I=0;for(let O=0;O<C.length;O+=4)C[O]===m[O]&&C[O+1]===m[O+1]&&C[O+2]===m[O+2]&&C[O+3]===m[O+3]&&(I+=1);_+=(h[w+2]-h[w+1])*(1-I/x)}return _}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1),a.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),a.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=a.exported.frame(l=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(l)}))}_preloadTiles(m){const l=this.style?Object.values(this.style._sourceCaches):[];return a.asyncAll(l,(h,_)=>h._preloadTiles(m,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){a.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,l){a.setCacheLimits(m,l)}get version(){return a.version}},NavigationControl:class{constructor(m){this.options=a.extend({},qb,m),this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),N("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),N("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:l}):h.resetNorth({},{originalEvent:l}))}),this._compassIcon=N("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const l=m.getZoom(),h=l===m.getMaxZoom(),_=l===m.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gb(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,l){const h=N("button",m,this._container);return h.type="button",h.addEventListener("click",l),h}_setButtonTitle(m,l){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${l}`);m.setAttribute("aria-label",h),m.firstElementChild&&m.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends a.Evented{constructor(m){super(),this.options=a.extend({geolocation:a.window.navigator.geolocation},wm,m),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=rd(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const l=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,m(h)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(h=>l(h.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(m){const l=this._map.getMaxBounds(),h=m.coords;return!!l&&(h.longitude<l.getWest()||h.longitude>l.getEast()||h.latitude<l.getSouth()||h.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",m)),this._finish()}}_updateCamera(m){const l=new a.LngLat(m.coords.longitude,m.coords.latitude),h=m.coords.accuracy,_=this._map.getBearing(),x=a.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(h),x,{geolocateSource:!0})}_updateMarker(m){if(m){const l=new a.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,l=a.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,h=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=N("button","mapboxgl-ctrl-geolocate",this._container),N("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N("div","mapboxgl-user-location"),this._dotElement.appendChild(N("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(N("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new pn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=N("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{a.window.addEventListener("ondeviceorientationabsolute"in a.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};a.window.DeviceMotionEvent!==void 0&&typeof a.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),a.window.removeEventListener("deviceorientation",this._onDeviceOrientation),a.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:wn,ScaleControl:class{constructor(m){this.options=a.extend({},Em,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),a.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,l=this._map,h=l._containerHeight/2,_=l._containerWidth/2-m/2,x=l.unproject([_,h]),w=l.unproject([_+m,h]),C=x.distanceTo(w);if(this.options.unit==="imperial"){const I=3.2808*C;I>5280?this._setScale(m,I/5280,"mile"):this._setScale(m,I,"foot")}else this.options.unit==="nautical"?this._setScale(m,C/1852,"nautical-mile"):C>=1e3?this._setScale(m,C/1e3,"kilometer"):this._setScale(m,C,"meter")}_setScale(m,l,h){this._map._requestDomTask(()=>{const _=function(w){const C=Math.pow(10,`${Math.floor(w)}`.length-1);let I=w/C;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(O){const j=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*j)/j}(I),C*I}(l),x=_/l;this._container.innerHTML=this._isNumberFormatSupported&&h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:h}).format(_):`${_}&nbsp;${Tm[h]}`,this._container.style.width=m*x+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof a.window.HTMLElement?this._container=m.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in a.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!a.window.document.fullscreenEnabled&&!a.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=N("button","mapboxgl-ctrl-fullscreen",this._controlContainer);N("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(a.window.document.fullscreenElement||a.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.Evented{constructor(m){super(),this.options=a.extend(Object.create(xm),m),a.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=a.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(a.window.document.createTextNode(m))}setHTML(m){const l=a.window.document.createDocumentFragment(),h=a.window.document.createElement("body");let _;for(h.innerHTML=m;_=h.firstChild,_;)l.appendChild(_);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=N("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(m),this.options.closeButton){const h=this._closeButton=N("button","mapboxgl-popup-close-button",l);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let l;return this._classList.delete(m)?l=!1:(this._classList.add(m),l=!0),this._updateClassList(),l}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const l=this._map,h=this._container,_=this._pos;if(!l||!h||!_)return"bottom";const x=h.offsetWidth,w=h.offsetHeight,C=_.x<x/2,I=_.x>l.transform.width-x/2;if(_.y+m<w)return C?"top-left":I?"top-right":"top";if(_.y>l.transform.height-w){if(C)return"bottom-left";if(I)return"bottom-right"}return C?"left":I?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),m.className=l.join(" ")}_update(m){const l=this._map,h=this._content;if(!l||!this._lngLat&&!this._trackPointer||!h)return;let _=this._container;if(_||(_=this._container=N("div","mapboxgl-popup",l.getContainer()),this._tip=N("div","mapboxgl-popup-tip",_),_.appendChild(h)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ad(this._lngLat,this._pos,l.transform)),!this._trackPointer||m){const x=this._pos=this._trackPointer&&m?m:l.project(this._lngLat),w=q_(this.options.offset),C=this._anchor=this._getAnchor(w.y),I=q_(this.options.offset,C),O=x.add(I).round();l._requestDomTask(()=>{this._container&&C&&(this._container.style.transform=`${pu[C]} translate(${O.x}px,${O.y}px)`)})}if(!this._marker&&l._showingGlobe()){const x=a.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(Hb);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:pn,Style:Uo,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,FreeCameraOptions:M_,Evented:a.Evented,config:a.config,prewarm:function(){ln().acquire(Ee)},clearPrewarmedResources:function(){const m=Ot;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(Ee),Ot=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(m){a.config.ACCESS_TOKEN=m},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(m){a.config.API_URL=m},get workerCount(){return lt.workerCount},set workerCount(m){lt.workerCount=m},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){a.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){a.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:a.exported.setNow,restoreNow:a.exported.restoreNow};return sd});var f=c;return f})})(lD);var LV=lD.exports;const ss=O1(LV);var uD={exports:{}},zV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",NV=zV,FV=NV;function dD(){}function hD(){}hD.resetWarningCache=dD;var BV=function(){function e(i,c,d,f,a,v){if(v!==FV){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:hD,resetWarningCache:dD};return n.PropTypes=n,n};uD.exports=BV();var _s=uD.exports;const xe=O1(_s);var Ko=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},jV=["onCopy","onCut","onPaste"],$V=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],UV=["onFocus","onBlur"],VV=["onInput","onInvalid","onReset","onSubmit"],WV=["onLoad","onError"],HV=["onKeyDown","onKeyPress","onKeyUp"],qV=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],GV=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],ZV=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],XV=["onSelect"],KV=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],YV=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],JV=["onScroll"],QV=["onWheel"],eW=["onAnimationStart","onAnimationEnd","onAnimationIteration"],tW=["onTransitionEnd"],nW=["onToggle"],rW=["onChange"],iW=Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko(Ko([],jV,!0),$V,!0),UV,!0),VV,!0),WV,!0),HV,!0),qV,!0),GV,!0),ZV,!0),XV,!0),KV,!0),YV,!0),JV,!0),QV,!0),eW,!0),tW,!0),rW,!0),nW,!0);function oW(e,t){var n={};return iW.forEach(function(i){var c=e[i];c&&(t?n[i]=function(d){return c(d,t(i))}:n[i]=c)}),n}function pD(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=pD(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function M3(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=pD(e))&&(i&&(i+=" "),i+=t);return i}function fD(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=fD(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function xx(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=fD(e))&&(i&&(i+=" "),i+=t);return i}var aW="Expected a function",mD="__lodash_hash_undefined__",sW="[object Function]",lW="[object GeneratorFunction]",cW=/[\\^$.*+?()[\]{}|]/g,uW=/^\[object .+?Constructor\]$/,dW=typeof xn=="object"&&xn&&xn.Object===Object&&xn,hW=typeof self=="object"&&self&&self.Object===Object&&self,gD=dW||hW||Function("return this")();function pW(e,t){return e==null?void 0:e[t]}function fW(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var mW=Array.prototype,gW=Function.prototype,_D=Object.prototype,D3=gD["__core-js_shared__"],Wk=function(){var e=/[^.]+$/.exec(D3&&D3.keys&&D3.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),yD=gW.toString,V7=_D.hasOwnProperty,_W=_D.toString,yW=RegExp("^"+yD.call(V7).replace(cW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vW=mW.splice,xW=vD(gD,"Map"),E0=vD(Object,"create");function gp(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function bW(){this.__data__=E0?E0(null):{}}function wW(e){return this.has(e)&&delete this.__data__[e]}function EW(e){var t=this.__data__;if(E0){var n=t[e];return n===mD?void 0:n}return V7.call(t,e)?t[e]:void 0}function TW(e){var t=this.__data__;return E0?t[e]!==void 0:V7.call(t,e)}function SW(e,t){var n=this.__data__;return n[e]=E0&&t===void 0?mD:t,this}gp.prototype.clear=bW;gp.prototype.delete=wW;gp.prototype.get=EW;gp.prototype.has=TW;gp.prototype.set=SW;function $1(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function kW(){this.__data__=[]}function CW(e){var t=this.__data__,n=bx(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():vW.call(t,n,1),!0}function PW(e){var t=this.__data__,n=bx(t,e);return n<0?void 0:t[n][1]}function IW(e){return bx(this.__data__,e)>-1}function AW(e,t){var n=this.__data__,i=bx(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}$1.prototype.clear=kW;$1.prototype.delete=CW;$1.prototype.get=PW;$1.prototype.has=IW;$1.prototype.set=AW;function Ip(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function MW(){this.__data__={hash:new gp,map:new(xW||$1),string:new gp}}function DW(e){return wx(this,e).delete(e)}function RW(e){return wx(this,e).get(e)}function OW(e){return wx(this,e).has(e)}function LW(e,t){return wx(this,e).set(e,t),this}Ip.prototype.clear=MW;Ip.prototype.delete=DW;Ip.prototype.get=RW;Ip.prototype.has=OW;Ip.prototype.set=LW;function bx(e,t){for(var n=e.length;n--;)if(jW(e[n][0],t))return n;return-1}function zW(e){if(!xD(e)||FW(e))return!1;var t=$W(e)||fW(e)?yW:uW;return t.test(BW(e))}function wx(e,t){var n=e.__data__;return NW(t)?n[typeof t=="string"?"string":"hash"]:n.map}function vD(e,t){var n=pW(e,t);return zW(n)?n:void 0}function NW(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function FW(e){return!!Wk&&Wk in e}function BW(e){if(e!=null){try{return yD.call(e)}catch{}try{return e+""}catch{}}return""}function W7(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(aW);var n=function(){var i=arguments,c=t?t.apply(this,i):i[0],d=n.cache;if(d.has(c))return d.get(c);var f=e.apply(this,i);return n.cache=d.set(c,f),f};return n.cache=new(W7.Cache||Ip),n}W7.Cache=Ip;function jW(e,t){return e===t||e!==e&&t!==t}function $W(e){var t=xD(e)?_W.call(e):"";return t==sW||t==lW}function xD(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}var UW=W7;const bD=O1(UW);function wD(e){return JSON.stringify(e)}function VW(e){return typeof e=="string"}function WW(e,t,n){return n.indexOf(e)===t}function HW(e){return e.toLowerCase()===e}function Hk(e){return e.indexOf(",")===-1?e:e.split(",")}function R5(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return R5(n)}if(e.indexOf("@")!==-1){var i=e.split("@")[0],n=i===void 0?"":i;return R5(n)}if(e.indexOf("-")===-1||!HW(e))return e;var c=e.split("-"),d=c[0],f=c[1],a=f===void 0?"":f;return"".concat(d,"-").concat(a.toUpperCase())}function qW(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,i=n===void 0?!0:n,c=t.fallbackLocale,d=c===void 0?"en-US":c,f=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],v=[],S=0,M=a;S<M.length;S++){var R=M[S];v=v.concat(Hk(R))}var N=navigator.language,W=N&&Hk(N);f=f.concat(v,W)}return i&&f.push(d),f.filter(VW).map(R5).filter(WW)}var ED=bD(qW,wD);function GW(e){return ED(e)[0]||null}var H7=bD(GW,wD);const a_=H7,ZW=Object.freeze(Object.defineProperty({__proto__:null,default:a_,getUserLocale:H7,getUserLocales:ED},Symbol.toStringTag,{value:"Module"}));function Sl(e,t,n){return function(c,d){d===void 0&&(d=n);var f=e(c)+d;return t(f)}}function s_(e){return function(n){return new Date(e(n).getTime()-1)}}function l_(e,t){return function(i){return[e(i),t(i)]}}function Jr(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function Wu(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function c_(e){if(e instanceof Date)return e.getMonth()+1;throw new Error("Failed to get human-readable month from date: ".concat(e,"."))}function lh(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Jd(e){if(e instanceof Date)return e.getHours();if(typeof e=="string"){var t=e.split(":");if(t.length>=2){var n=t[0];if(n){var i=parseInt(n,10);if(!isNaN(i))return i}}}throw new Error("Failed to get hours from date: ".concat(e,"."))}function np(e){if(e instanceof Date)return e.getMinutes();if(typeof e=="string"){var t=e.split(":");if(t.length>=2){var n=t[1]||"0",i=parseInt(n,10);if(!isNaN(i))return i}}throw new Error("Failed to get minutes from date: ".concat(e,"."))}function r1(e){if(e instanceof Date)return e.getSeconds();if(typeof e=="string"){var t=e.split(":");if(t.length>=2){var n=t[2]||"0",i=parseInt(n,10);if(!isNaN(i))return i}}throw new Error("Failed to get seconds from date: ".concat(e,"."))}function U1(e){var t=Jr(e),n=t+(-t+1)%100,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var TD=Sl(Jr,U1,-100),q7=Sl(Jr,U1,100),u_=s_(q7),SD=Sl(Jr,u_,-100),XW=Sl(Jr,u_,100),G7=l_(U1,u_);function ch(e){var t=Jr(e),n=t+(-t+1)%10,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var Z7=Sl(Jr,ch,-10),Ex=Sl(Jr,ch,10),V1=s_(Ex),X7=Sl(Jr,V1,-10),KW=Sl(Jr,V1,10),K7=l_(ch,V1);function W1(e){var t=Jr(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var Y7=Sl(Jr,W1,-1),Tx=Sl(Jr,W1,1),H1=s_(Tx),J7=Sl(Jr,H1,-1),YW=Sl(Jr,H1,1),kD=l_(W1,H1);function Sx(e,t){return function(i,c){c===void 0&&(c=t);var d=Jr(i),f=Wu(i)+c,a=new Date;return a.setFullYear(d,f,1),a.setHours(0,0,0,0),e(a)}}function Ap(e){var t=Jr(e),n=Wu(e),i=new Date;return i.setFullYear(t,n,1),i.setHours(0,0,0,0),i}var Q7=Sx(Ap,-1),kx=Sx(Ap,1),Mp=s_(kx),eE=Sx(Mp,-1),JW=Sx(Mp,1),CD=l_(Ap,Mp);function Cx(e,t){return function(i,c){c===void 0&&(c=t);var d=Jr(i),f=Wu(i),a=lh(i)+c,v=new Date;return v.setFullYear(d,f,a),v.setHours(0,0,0,0),e(v)}}function q1(e){var t=Jr(e),n=Wu(e),i=lh(e),c=new Date;return c.setFullYear(t,n,i),c.setHours(0,0,0,0),c}var QW=Cx(q1,-1),PD=Cx(q1,1),G1=s_(PD),eH=Cx(G1,-1),tH=Cx(G1,1),ID=l_(q1,G1);function tE(e){return lh(Mp(e))}function Vc(e,t){t===void 0&&(t=2);var n="".concat(e);return n.length>=t?e:"0000".concat(n).slice(-t)}function AD(e){var t=Vc(Jd(e)),n=Vc(np(e));return"".concat(t,":").concat(n)}function w2(e){var t=Vc(Jd(e)),n=Vc(np(e)),i=Vc(r1(e));return"".concat(t,":").concat(n,":").concat(i)}function nH(e){var t=Vc(Jr(e),4),n=Vc(c_(e));return"".concat(t,"-").concat(n)}function E2(e){var t=Vc(Jr(e),4),n=Vc(c_(e)),i=Vc(lh(e));return"".concat(t,"-").concat(n,"-").concat(i)}function MD(e){return"".concat(E2(e),"T").concat(w2(e))}const rH=Object.freeze(Object.defineProperty({__proto__:null,getCenturyEnd:u_,getCenturyRange:G7,getCenturyStart:U1,getDate:lh,getDayEnd:G1,getDayRange:ID,getDayStart:q1,getDaysInMonth:tE,getDecadeEnd:V1,getDecadeRange:K7,getDecadeStart:ch,getHours:Jd,getHoursMinutes:AD,getHoursMinutesSeconds:w2,getISOLocalDate:E2,getISOLocalDateTime:MD,getISOLocalMonth:nH,getMinutes:np,getMonth:Wu,getMonthEnd:Mp,getMonthHuman:c_,getMonthRange:CD,getMonthStart:Ap,getNextCenturyEnd:XW,getNextCenturyStart:q7,getNextDayEnd:tH,getNextDayStart:PD,getNextDecadeEnd:KW,getNextDecadeStart:Ex,getNextMonthEnd:JW,getNextMonthStart:kx,getNextYearEnd:YW,getNextYearStart:Tx,getPreviousCenturyEnd:SD,getPreviousCenturyStart:TD,getPreviousDayEnd:eH,getPreviousDayStart:QW,getPreviousDecadeEnd:X7,getPreviousDecadeStart:Z7,getPreviousMonthEnd:eE,getPreviousMonthStart:Q7,getPreviousYearEnd:J7,getPreviousYearStart:Y7,getSeconds:r1,getYear:Jr,getYearEnd:H1,getYearRange:kD,getYearStart:W1},Symbol.toStringTag,{value:"Module"}));var mg,Ni={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},Uf={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},iH=(mg={},mg[Ni.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],mg[Ni.HEBREW]=["he","he-IL"],mg[Ni.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],mg),nE=[0,1,2,3,4,5,6],R3=new Map;function oH(e){return function(n,i){var c=n||a_();R3.has(c)||R3.set(c,new Map);var d=R3.get(c);return d.has(e)||d.set(e,new Intl.DateTimeFormat(c||void 0,e).format),d.get(e)(i)}}function aH(e){var t=new Date(e);return new Date(t.setHours(12))}function Dp(e){return function(t,n){return oH(e)(t,aH(n))}}var sH={day:"numeric"},lH={day:"numeric",month:"long",year:"numeric"},cH={month:"long"},uH={month:"long",year:"numeric"},dH={weekday:"short"},hH={weekday:"long"},pH={year:"numeric"},fH=Dp(sH),mH=Dp(lH),gH=Dp(cH),DD=Dp(uH),_H=Dp(dH),yH=Dp(hH),Px=Dp(pH),vH=nE[0],xH=nE[5],qk=nE[6];function T0(e,t){t===void 0&&(t=Ni.ISO_8601);var n=e.getDay();switch(t){case Ni.ISO_8601:return(n+6)%7;case Ni.ISLAMIC:return(n+1)%7;case Ni.HEBREW:case Ni.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function bH(e){var t=U1(e);return Jr(t)}function wH(e){var t=ch(e);return Jr(t)}function O5(e,t){t===void 0&&(t=Ni.ISO_8601);var n=Jr(e),i=Wu(e),c=e.getDate()-T0(e,t);return new Date(n,i,c)}function EH(e,t){t===void 0&&(t=Ni.ISO_8601);var n=t===Ni.GREGORY?Ni.GREGORY:Ni.ISO_8601,i=O5(e,t),c=Jr(e)+1,d,f;do d=new Date(c,0,n===Ni.ISO_8601?4:1),f=O5(d,t),c-=1;while(e<f);return Math.round((i.getTime()-f.getTime())/(864e5*7))+1}function rp(e,t){switch(e){case"century":return U1(t);case"decade":return ch(t);case"year":return W1(t);case"month":return Ap(t);case"day":return q1(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function TH(e,t){switch(e){case"century":return TD(t);case"decade":return Z7(t);case"year":return Y7(t);case"month":return Q7(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function RD(e,t){switch(e){case"century":return q7(t);case"decade":return Ex(t);case"year":return Tx(t);case"month":return kx(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function SH(e,t){switch(e){case"decade":return Z7(t,-100);case"year":return Y7(t,-10);case"month":return Q7(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function kH(e,t){switch(e){case"decade":return Ex(t,100);case"year":return Tx(t,10);case"month":return kx(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function OD(e,t){switch(e){case"century":return u_(t);case"decade":return V1(t);case"year":return H1(t);case"month":return Mp(t);case"day":return G1(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function CH(e,t){switch(e){case"century":return SD(t);case"decade":return X7(t);case"year":return J7(t);case"month":return eE(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function PH(e,t){switch(e){case"decade":return X7(t,-100);case"year":return J7(t,-10);case"month":return eE(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Gk(e,t){switch(e){case"century":return G7(t);case"decade":return K7(t);case"year":return kD(t);case"month":return CD(t);case"day":return ID(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function IH(e,t,n){var i=[t,n].sort(function(c,d){return c.getTime()-d.getTime()});return[rp(e,i[0]),OD(e,i[1])]}function LD(e,t,n){return t===void 0&&(t=Px),n.map(function(i){return t(e,i)}).join(" – ")}function AH(e,t,n){return LD(e,t,G7(n))}function zD(e,t,n){return LD(e,t,K7(n))}function MH(e){return e.getDay()===new Date().getDay()}function ND(e,t){t===void 0&&(t=Ni.ISO_8601);var n=e.getDay();switch(t){case Ni.ISLAMIC:case Ni.HEBREW:return n===xH||n===qk;case Ni.ISO_8601:case Ni.GREGORY:return n===qk||n===vH;default:throw new Error("Unsupported calendar type.")}}var Zk=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},DH=Object.values(Ni),RH=Object.values(Uf),L5=["century","decade","year","month"],d_=xe.oneOf(Zk(Zk([],DH,!0),RH,!0)),T2=xe.oneOfType([xe.string,xe.arrayOf(xe.string)]),rE=function(t,n,i){var c=t,d=n,f=c[d];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var a=t.maxDate;return a&&f>a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, minDate cannot be larger than maxDate.")):null},iE=function(t,n,i){var c=t,d=n,f=c[d];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var a=t.minDate;return a&&f<a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, maxDate cannot be smaller than minDate.")):null},OH=xe.oneOfType([xe.func,xe.exact({current:xe.any})]),LH=xe.oneOfType([xe.instanceOf(Date),xe.arrayOf(xe.instanceOf(Date))]),zH=xe.arrayOf(xe.oneOf(L5)),S0=function(t,n,i){var c=t,d=n,f=c[d];return f!==void 0&&(typeof f!="string"||L5.indexOf(f)===-1)?new Error("Invalid prop `".concat(n,"` of value `").concat(f,"` supplied to `").concat(i,"`, expected one of [").concat(L5.map(function(a){return'"'.concat(a,'"')}).join(", "),"].")):null};S0.isRequired=function(t,n,i,c,d){var f=t,a=n,v=f[a];return v?S0(t,n,i):new Error("The prop `".concat(n,"` is marked as required in `").concat(i,"`, but its value is `").concat(v,"`."))};var NH=function(e){return xe.arrayOf(e)},Z1={activeStartDate:xe.instanceOf(Date).isRequired,hover:xe.instanceOf(Date),locale:xe.string,maxDate:iE,minDate:rE,onClick:xe.func,onMouseOver:xe.func,tileClassName:xe.oneOfType([xe.func,T2]),tileContent:xe.oneOfType([xe.func,xe.node]),value:LH,valueType:xe.string},h_={activeStartDate:xe.instanceOf(Date).isRequired,classes:xe.arrayOf(xe.string).isRequired,date:xe.instanceOf(Date).isRequired,locale:xe.string,maxDate:iE,minDate:rE,onClick:xe.func,onMouseOver:xe.func,style:xe.objectOf(xe.oneOfType([xe.string,xe.number])),tileClassName:xe.oneOfType([xe.func,T2]),tileContent:xe.oneOfType([xe.func,xe.node]),tileDisabled:xe.func},Dc="react-calendar__navigation";function FD(e){var t=e.activeStartDate,n=e.drillUp,i=e.formatMonthYear,c=i===void 0?DD:i,d=e.formatYear,f=d===void 0?Px:d,a=e.locale,v=e.maxDate,S=e.minDate,M=e.navigationAriaLabel,R=M===void 0?"":M,N=e.navigationAriaLive,W=e.navigationLabel,V=e.next2AriaLabel,H=V===void 0?"":V,le=e.next2Label,G=le===void 0?"»":le,X=e.nextAriaLabel,Q=X===void 0?"":X,oe=e.nextLabel,he=oe===void 0?"›":oe,be=e.prev2AriaLabel,A=be===void 0?"":be,Re=e.prev2Label,_e=Re===void 0?"«":Re,ze=e.prevAriaLabel,ot=ze===void 0?"":ze,gt=e.prevLabel,Ze=gt===void 0?"‹":gt,We=e.setActiveStartDate,He=e.showDoubleView,rt=e.view,tt=e.views,Ne=tt.indexOf(rt)>0,et=rt!=="century",it=TH(rt,t),Dt=et?SH(rt,t):void 0,Tt=RD(rt,t),Rt=et?kH(rt,t):void 0,Yt=function(){if(it.getFullYear()<0)return!0;var Zt=CH(rt,t);return S&&S>=Zt}(),tn=et&&function(){if(Dt.getFullYear()<0)return!0;var Zt=PH(rt,t);return S&&S>=Zt}(),dn=v&&v<Tt,_n=et&&v&&v<Rt;function In(){We(it,"prev")}function Jt(){We(Dt,"prev2")}function vn(){We(Tt,"next")}function Ft(){We(Rt,"next2")}function nn(Zt){var Ct=function(){switch(rt){case"century":return AH(a,f,Zt);case"decade":return zD(a,f,Zt);case"year":return f(a,Zt);case"month":return c(a,Zt);default:throw new Error("Invalid view: ".concat(rt,"."))}}();return W?W({date:Zt,label:Ct,locale:a||H7()||void 0,view:rt}):Ct}function En(){var Zt="".concat(Dc,"__label");return $t.createElement("button",{"aria-label":R,"aria-live":N,className:Zt,disabled:!Ne,onClick:n,style:{flexGrow:1},type:"button"},$t.createElement("span",{className:"".concat(Zt,"__labelText ").concat(Zt,"__labelText--from")},nn(t)),He?$t.createElement($t.Fragment,null,$t.createElement("span",{className:"".concat(Zt,"__divider")}," – "),$t.createElement("span",{className:"".concat(Zt,"__labelText ").concat(Zt,"__labelText--to")},nn(Tt))):null)}return $t.createElement("div",{className:Dc},_e!==null&&et?$t.createElement("button",{"aria-label":A,className:"".concat(Dc,"__arrow ").concat(Dc,"__prev2-button"),disabled:tn,onClick:Jt,type:"button"},_e):null,Ze!==null&&$t.createElement("button",{"aria-label":ot,className:"".concat(Dc,"__arrow ").concat(Dc,"__prev-button"),disabled:Yt,onClick:In,type:"button"},Ze),En(),he!==null&&$t.createElement("button",{"aria-label":Q,className:"".concat(Dc,"__arrow ").concat(Dc,"__next-button"),disabled:dn,onClick:vn,type:"button"},he),G!==null&&et?$t.createElement("button",{"aria-label":H,className:"".concat(Dc,"__arrow ").concat(Dc,"__next2-button"),disabled:_n,onClick:Ft,type:"button"},G):null)}FD.propTypes={activeStartDate:xe.instanceOf(Date).isRequired,drillUp:xe.func.isRequired,formatMonthYear:xe.func,formatYear:xe.func,locale:xe.string,maxDate:xe.instanceOf(Date),minDate:xe.instanceOf(Date),navigationAriaLabel:xe.string,navigationAriaLive:xe.string,navigationLabel:xe.func,next2AriaLabel:xe.string,next2Label:xe.node,nextAriaLabel:xe.string,nextLabel:xe.node,prev2AriaLabel:xe.string,prev2Label:xe.node,prevAriaLabel:xe.string,prevLabel:xe.node,setActiveStartDate:xe.func.isRequired,showDoubleView:xe.bool,view:S0.isRequired,views:zH.isRequired};var Vf=globalThis&&globalThis.__assign||function(){return Vf=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Vf.apply(this,arguments)},FH=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n};function Xk(e){return"".concat(e,"%")}function Ix(e){var t=e.children,n=e.className,i=e.count,c=e.direction,d=e.offset,f=e.style,a=e.wrap,v=FH(e,["children","className","count","direction","offset","style","wrap"]);return $t.createElement("div",Vf({className:n,style:Vf({display:"flex",flexDirection:c,flexWrap:a?"wrap":"nowrap"},f)},v),$t.Children.map(t,function(S,M){var R=d&&M===0?Xk(100*d/i):null;return $t.cloneElement(S,Vf(Vf({},S.props),{style:{flexBasis:Xk(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:R,marginInlineStart:R,marginInlineEnd:0}}))}))}Ix.propTypes={children:xe.node,className:xe.string,count:xe.number.isRequired,direction:xe.string,offset:xe.number,style:xe.objectOf(xe.oneOfType([xe.string,xe.number])),wrap:xe.bool};var BH=!0;function z5(e,t){if(!BH){if(e)return;var n="Warning: "+t;typeof console<"u"&&console.warn(n);try{throw Error(n)}catch{}}}var bf;function jH(e,t,n){return t&&t>e?t:n&&n<e?n:e}function k0(e,t){return t[0]<=e&&t[1]>=e}function $H(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function BD(e,t){return k0(e[0],t)||k0(e[1],t)}function Kk(e,t,n){var i=BD(t,e),c=[];if(i){c.push(n);var d=k0(e[0],t),f=k0(e[1],t);d&&c.push("".concat(n,"Start")),f&&c.push("".concat(n,"End")),d&&f&&c.push("".concat(n,"BothEnds"))}return c}function UH(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,i=e.hover,c="react-calendar__tile",d=[c];if(!n)return d;var f=new Date,a=function(){if(Array.isArray(n))return n;var W=e.dateType;if(!W)throw new Error("dateType is required when date is not an array of two dates");return Gk(W,n)}();if(k0(f,a)&&d.push("".concat(c,"--now")),!t)return d;var v=function(){if(Array.isArray(t))return t;var W=e.valueType;if(!W)throw new Error("valueType is required when value is not an array of two dates");return Gk(W,t)}();$H(v,a)?d.push("".concat(c,"--active")):BD(v,a)&&d.push("".concat(c,"--hasActive"));var S=Kk(v,a,"".concat(c,"--range"));d.push.apply(d,S);var M=Array.isArray(t)?t:[t];if(i&&M.length===1){var R=i>v[0]?[v[0],i]:[i,v[0]],N=Kk(R,a,"".concat(c,"--hover"));d.push.apply(d,N)}return d}var VH=(bf={},bf[Uf.ARABIC]=Ni.ISLAMIC,bf[Uf.HEBREW]=Ni.HEBREW,bf[Uf.ISO_8601]=Ni.ISO_8601,bf[Uf.US]=Ni.GREGORY,bf);function WH(e){return e!==void 0&&e in Uf}var Yk=!1;function Ax(e){if(WH(e)){var t=VH[e];return z5(Yk,'Specifying calendarType="'.concat(e,'" is deprecated. Use calendarType="').concat(t,'" instead.')),Yk=!0,t}return e}var C0=globalThis&&globalThis.__assign||function(){return C0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},C0.apply(this,arguments)},HH=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n};function p_(e){for(var t=e.className,n=e.count,i=n===void 0?3:n,c=e.dateTransform,d=e.dateType,f=e.end,a=e.hover,v=e.offset,S=e.start,M=e.step,R=M===void 0?1:M,N=e.tile,W=e.value,V=e.valueType,H=HH(e,["className","count","dateTransform","dateType","end","hover","offset","start","step","tile","value","valueType"]),le=[],G=S;G<=f;G+=R){var X=c(G);le.push($t.createElement(N,C0({key:X.getTime(),classes:UH({value:W,valueType:V,date:X,dateType:d,hover:a}),date:X,point:G},H)))}return $t.createElement(Ix,{className:t,count:i,offset:v,wrap:!0},le)}p_.propTypes=C0(C0({},Z1),{className:xe.string,count:xe.number,dateTransform:xe.func.isRequired,dateType:xe.string,end:xe.number.isRequired,offset:xe.number,step:xe.number,start:xe.number.isRequired,tile:xe.func.isRequired});var S2=globalThis&&globalThis.__assign||function(){return S2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},S2.apply(this,arguments)};function f_(e){var t=e.activeStartDate,n=e.children,i=e.classes,c=e.date,d=e.formatAbbr,f=e.locale,a=e.maxDate,v=e.maxDateTransform,S=e.minDate,M=e.minDateTransform,R=e.onClick,N=e.onMouseOver,W=e.style,V=e.tileClassName,H=e.tileContent,le=e.tileDisabled,G=e.view,X=K.useMemo(function(){var oe={activeStartDate:t,date:c,view:G};return typeof V=="function"?V(oe):V},[t,c,V,G]),Q=K.useMemo(function(){var oe={activeStartDate:t,date:c,view:G};return typeof H=="function"?H(oe):H},[t,c,H,G]);return $t.createElement("button",{className:xx(i,X),disabled:S&&M(S)>c||a&&v(a)<c||le&&le({activeStartDate:t,date:c,view:G}),onClick:R?function(oe){return R(c,oe)}:void 0,onFocus:N?function(){return N(c)}:void 0,onMouseOver:N?function(){return N(c)}:void 0,style:W,type:"button"},d?$t.createElement("abbr",{"aria-label":d(f,c)},n):n,Q)}f_.propTypes=S2(S2({},h_),{children:xe.node.isRequired,formatAbbr:xe.func,maxDateTransform:xe.func.isRequired,minDateTransform:xe.func.isRequired});var P0=globalThis&&globalThis.__assign||function(){return P0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},P0.apply(this,arguments)},qH=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},Jk=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},GH="react-calendar__century-view__decades__decade";function jD(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatYear,c=i===void 0?Px:i,d=qH(e,["classes","formatYear"]),f=d.date,a=d.locale;return $t.createElement(f_,P0({},d,{classes:Jk(Jk([],n,!0),[GH],!1),maxDateTransform:V1,minDateTransform:ch,view:"century"}),zD(a,c,f))}jD.propTypes=P0(P0({},h_),{formatYear:xe.func});var k2=globalThis&&globalThis.__assign||function(){return k2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},k2.apply(this,arguments)};function $D(e){var t=e.activeStartDate,n=bH(t),i=n+99;return $t.createElement(p_,k2({},e,{className:"react-calendar__century-view__decades",dateTransform:ch,dateType:"decade",end:i,start:n,step:10,tile:jD}))}$D.propTypes=k2({},Z1);var N5=globalThis&&globalThis.__assign||function(){return N5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},N5.apply(this,arguments)};function ZH(e){function t(){return $t.createElement($D,N5({},e))}return $t.createElement("div",{className:"react-calendar__century-view"},t())}var I0=globalThis&&globalThis.__assign||function(){return I0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},I0.apply(this,arguments)},XH=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},Qk=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},KH="react-calendar__decade-view__years__year";function UD(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatYear,c=i===void 0?Px:i,d=XH(e,["classes","formatYear"]),f=d.date,a=d.locale;return $t.createElement(f_,I0({},d,{classes:Qk(Qk([],n,!0),[KH],!1),maxDateTransform:H1,minDateTransform:W1,view:"decade"}),c(a,f))}UD.propTypes=I0(I0({},h_),{formatYear:xe.func});var C2=globalThis&&globalThis.__assign||function(){return C2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},C2.apply(this,arguments)};function VD(e){var t=e.activeStartDate,n=wH(t),i=n+9;return $t.createElement(p_,C2({},e,{className:"react-calendar__decade-view__years",dateTransform:function(c){var d=new Date;return d.setFullYear(c,0,1),d.setHours(0,0,0,0),d},dateType:"year",end:i,start:n,tile:UD}))}VD.propTypes=C2({},Z1);var F5=globalThis&&globalThis.__assign||function(){return F5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},F5.apply(this,arguments)};function YH(e){function t(){return $t.createElement(VD,F5({},e))}return $t.createElement("div",{className:"react-calendar__decade-view"},t())}var A0=globalThis&&globalThis.__assign||function(){return A0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},A0.apply(this,arguments)},JH=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},eC=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},QH="react-calendar__year-view__months__month";function WD(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatMonth,c=i===void 0?gH:i,d=e.formatMonthYear,f=d===void 0?DD:d,a=JH(e,["classes","formatMonth","formatMonthYear"]),v=a.date,S=a.locale;return $t.createElement(f_,A0({},a,{classes:eC(eC([],n,!0),[QH],!1),formatAbbr:f,maxDateTransform:Mp,minDateTransform:Ap,view:"year"}),c(S,v))}WD.propTypes=A0(A0({},h_),{formatMonth:xe.func,formatMonthYear:xe.func});var M0=globalThis&&globalThis.__assign||function(){return M0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},M0.apply(this,arguments)};function HD(e){var t=e.activeStartDate,n=0,i=11,c=Jr(t);return $t.createElement(p_,M0({},e,{className:"react-calendar__year-view__months",dateTransform:function(d){var f=new Date;return f.setFullYear(c,d,1),f.setHours(0,0,0,0),f},dateType:"month",end:i,start:n,tile:WD}))}HD.propTypes=M0(M0({},Z1),{locale:xe.string});var B5=globalThis&&globalThis.__assign||function(){return B5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},B5.apply(this,arguments)};function eq(e){function t(){return $t.createElement(HD,B5({},e))}return $t.createElement("div",{className:"react-calendar__year-view"},t())}var D0=globalThis&&globalThis.__assign||function(){return D0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},D0.apply(this,arguments)},tq=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},Yy="react-calendar__month-view__days__day";function qD(e){var t=e.calendarType,n=e.classes,i=n===void 0?[]:n,c=e.currentMonthIndex,d=e.formatDay,f=d===void 0?fH:d,a=e.formatLongDate,v=a===void 0?mH:a,S=tq(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),M=Ax(t),R=S.date,N=S.locale,W=[];return i&&W.push.apply(W,i),Yy&&W.push(Yy),ND(R,M)&&W.push("".concat(Yy,"--weekend")),R.getMonth()!==c&&W.push("".concat(Yy,"--neighboringMonth")),$t.createElement(f_,D0({},S,{classes:W,formatAbbr:v,maxDateTransform:G1,minDateTransform:q1,view:"month"}),f(N,R))}qD.propTypes=D0(D0({},h_),{currentMonthIndex:xe.number.isRequired,formatDay:xe.func,formatLongDate:xe.func});var P2=globalThis&&globalThis.__assign||function(){return P2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},P2.apply(this,arguments)},nq=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n};function GD(e){var t=e.activeStartDate,n=e.calendarType,i=e.showFixedNumberOfWeeks,c=e.showNeighboringMonth,d=nq(e,["showFixedNumberOfWeeks","showNeighboringMonth"]),f=Ax(n),a=Jr(t),v=Wu(t),S=i||c,M=T0(t,f),R=S?0:M,N=(S?-M:0)+1,W=function(){if(i)return N+6*7-1;var V=tE(t);if(c){var H=new Date;H.setFullYear(a,v,V),H.setHours(0,0,0,0);var le=7-T0(H,f)-1;return V+le}return V}();return $t.createElement(p_,P2({},d,{className:"react-calendar__month-view__days",count:7,currentMonthIndex:v,dateTransform:function(V){var H=new Date;return H.setFullYear(a,v,V),H.setHours(0,0,0,0),H},dateType:"day",end:W,offset:R,start:N,tile:qD}))}GD.propTypes=P2({calendarType:d_,showFixedNumberOfWeeks:xe.bool,showNeighboringMonth:xe.bool},Z1);var ZD="react-calendar__month-view__weekdays",O3="".concat(ZD,"__weekday");function XD(e){for(var t=e.calendarType,n=e.formatShortWeekday,i=n===void 0?_H:n,c=e.formatWeekday,d=c===void 0?yH:c,f=e.locale,a=e.onMouseLeave,v=Ax(t),S=new Date,M=Ap(S),R=Jr(M),N=Wu(M),W=[],V=1;V<=7;V+=1){var H=new Date(R,N,V-T0(M,v)),le=d(f,H);W.push($t.createElement("div",{key:V,className:xx(O3,MH(H)&&"".concat(O3,"--current"),ND(H,v)&&"".concat(O3,"--weekend"))},$t.createElement("abbr",{"aria-label":le,title:le},i(f,H).replace(".",""))))}return $t.createElement(Ix,{className:ZD,count:7,onFocus:a,onMouseOver:a},W)}XD.propTypes={calendarType:d_,formatShortWeekday:xe.func,formatWeekday:xe.func,locale:xe.string,onMouseLeave:xe.func};var I2=globalThis&&globalThis.__assign||function(){return I2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},I2.apply(this,arguments)},tC=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},nC="react-calendar__tile";function KD(e){var t=e.onClickWeekNumber,n=e.weekNumber,i=$t.createElement("span",null,n);if(t){var c=e.date,d=e.onClickWeekNumber,f=e.weekNumber,a=tC(e,["date","onClickWeekNumber","weekNumber"]);return $t.createElement("button",I2({},a,{className:nC,onClick:function(v){return d(f,c,v)},type:"button"}),i)}else{e.date,e.onClickWeekNumber,e.weekNumber;var a=tC(e,["date","onClickWeekNumber","weekNumber"]);return $t.createElement("div",I2({},a,{className:nC}),i)}}KD.propTypes={date:xe.instanceOf(Date).isRequired,onClickWeekNumber:xe.func,weekNumber:xe.node.isRequired};function YD(e){var t=e.activeStartDate,n=e.calendarType,i=e.onClickWeekNumber,c=e.onMouseLeave,d=e.showFixedNumberOfWeeks,f=Ax(n),a=function(){if(d)return 6;var M=tE(t),R=T0(t,f),N=M-(7-R);return 1+Math.ceil(N/7)}(),v=function(){for(var M=Jr(t),R=Wu(t),N=lh(t),W=[],V=0;V<a;V+=1)W.push(O5(new Date(M,R,N+V*7),f));return W}(),S=v.map(function(M){return EH(M,f)});return $t.createElement(Ix,{className:"react-calendar__month-view__weekNumbers",count:a,direction:"column",onFocus:c,onMouseOver:c,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},S.map(function(M,R){var N=v[R];if(!N)throw new Error("date is not defined");return $t.createElement(KD,{key:M,date:N,onClickWeekNumber:i,weekNumber:M})}))}YD.propTypes={activeStartDate:xe.instanceOf(Date).isRequired,calendarType:d_,onClickWeekNumber:xe.func,onMouseLeave:xe.func,showFixedNumberOfWeeks:xe.bool};var R0=globalThis&&globalThis.__assign||function(){return R0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},R0.apply(this,arguments)},rq=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n};function iq(e){for(var t=0,n=Object.entries(iH);t<n.length;t++){var i=n[t],c=i[0],d=i[1];if(d.includes(e))return c}return Ni.ISO_8601}function JD(e){var t=e.activeStartDate,n=e.locale,i=e.onMouseLeave,c=e.showFixedNumberOfWeeks,d=e.calendarType,f=d===void 0?iq(n):d,a=e.formatShortWeekday,v=e.formatWeekday,S=e.onClickWeekNumber,M=e.showWeekNumbers,R=rq(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function N(){return $t.createElement(XD,{calendarType:f,formatShortWeekday:a,formatWeekday:v,locale:n,onMouseLeave:i})}function W(){return M?$t.createElement(YD,{activeStartDate:t,calendarType:f,onClickWeekNumber:S,onMouseLeave:i,showFixedNumberOfWeeks:c}):null}function V(){return $t.createElement(GD,R0({calendarType:f},R))}var H="react-calendar__month-view";return $t.createElement("div",{className:xx(H,M?"".concat(H,"--weekNumbers"):"")},$t.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},W(),$t.createElement("div",{style:{flexGrow:1,width:"100%"}},N(),V())))}JD.propTypes=R0(R0({},Z1),{calendarType:d_,formatDay:xe.func,formatLongDate:xe.func,formatShortWeekday:xe.func,formatWeekday:xe.func,onClickWeekNumber:xe.func,onMouseLeave:xe.func,showFixedNumberOfWeeks:xe.bool,showNeighboringMonth:xe.bool,showWeekNumbers:xe.bool});var Wf=globalThis&&globalThis.__assign||function(){return Wf=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Wf.apply(this,arguments)},Jy="react-calendar",i1=["century","decade","year","month"],oq=["decade","year","month","day"],oE=new Date;oE.setFullYear(1,0,1);oE.setHours(0,0,0,0);var aq=new Date(864e13);function Ig(e){return e instanceof Date?e:new Date(e)}function QD(e,t){return i1.slice(i1.indexOf(e),i1.indexOf(t)+1)}function sq(e,t,n){var i=QD(t,n);return i.indexOf(e)!==-1}function aE(e,t,n){return e&&sq(e,t,n)?e:n}function eR(e){var t=i1.indexOf(e);return oq[t]}function lq(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var i=Ig(n);if(isNaN(i.getTime()))throw new Error("Invalid date: ".concat(e));return i}function tR(e,t){var n=e.value,i=e.minDate,c=e.maxDate,d=e.maxDetail,f=lq(n,t);if(!f)return null;var a=eR(d),v=function(){switch(t){case 0:return rp(a,f);case 1:return OD(a,f);default:throw new Error("Invalid index value: ".concat(t))}}();return jH(v,i,c)}var sE=function(e){return tR(e,0)},nR=function(e){return tR(e,1)},cq=function(e){return[sE,nR].map(function(t){return t(e)})};function rR(e){var t=e.maxDate,n=e.maxDetail,i=e.minDate,c=e.minDetail,d=e.value,f=e.view,a=aE(f,c,n),v=sE({value:d,minDate:i,maxDate:t,maxDetail:n})||new Date;return rp(a,v)}function uq(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,i=e.defaultValue,c=e.defaultView,d=e.maxDate,f=e.maxDetail,a=e.minDate,v=e.minDetail,S=e.value,M=e.view,R=aE(M,v,f),N=t||n;return N?rp(R,N):rR({maxDate:d,maxDetail:f,minDate:a,minDetail:v,value:S||i,view:M||c})}function L3(e){return e&&(!Array.isArray(e)||e.length===1)}function Qy(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var iR=K.forwardRef(function(t,n){var i=t.activeStartDate,c=t.allowPartialRange,d=t.calendarType,f=t.className,a=t.defaultActiveStartDate,v=t.defaultValue,S=t.defaultView,M=t.formatDay,R=t.formatLongDate,N=t.formatMonth,W=t.formatMonthYear,V=t.formatShortWeekday,H=t.formatWeekday,le=t.formatYear,G=t.goToRangeStartOnSelect,X=G===void 0?!0:G,Q=t.inputRef,oe=t.locale,he=t.maxDate,be=he===void 0?aq:he,A=t.maxDetail,Re=A===void 0?"month":A,_e=t.minDate,ze=_e===void 0?oE:_e,ot=t.minDetail,gt=ot===void 0?"century":ot,Ze=t.navigationAriaLabel,We=t.navigationAriaLive,He=t.navigationLabel,rt=t.next2AriaLabel,tt=t.next2Label,Ne=t.nextAriaLabel,et=t.nextLabel,it=t.onActiveStartDateChange,Dt=t.onChange,Tt=t.onClickDay,Rt=t.onClickDecade,Yt=t.onClickMonth,tn=t.onClickWeekNumber,dn=t.onClickYear,_n=t.onDrillDown,In=t.onDrillUp,Jt=t.onViewChange,vn=t.prev2AriaLabel,Ft=t.prev2Label,nn=t.prevAriaLabel,En=t.prevLabel,Zt=t.returnValue,Ct=Zt===void 0?"start":Zt,On=t.selectRange,an=t.showDoubleView,Zn=t.showFixedNumberOfWeeks,tr=t.showNavigation,Nn=tr===void 0?!0:tr,Yn=t.showNeighboringMonth,Un=Yn===void 0?!0:Yn,qn=t.showWeekNumbers,bn=t.tileClassName,Ye=t.tileContent,Xt=t.tileDisabled,rn=t.value,qt=t.view,en=K.useState(a),on=en[0],yn=en[1],Dn=K.useState(null),Fn=Dn[0],nr=Dn[1],Ar=K.useState(Array.isArray(v)?v.map(function(Ge){return Ge!==null?Ig(Ge):Ge}):v!=null?Ig(v):v),gr=Ar[0],vi=Ar[1],di=K.useState(S),Te=di[0],re=di[1],ie=i||on||uq({activeStartDate:i,defaultActiveStartDate:a,defaultValue:v,defaultView:S,maxDate:be,maxDetail:Re,minDate:ze,minDetail:gt,value:rn,view:qt}),me=function(){var Ge=function(){return On&&L3(gr)?gr:rn!==void 0?rn:gr}();return Ge?Array.isArray(Ge)?Ge.map(function(Ee){return Ee!==null?Ig(Ee):Ee}):Ge!==null?Ig(Ge):Ge:null}(),Me=eR(Re),De=aE(qt||Te,gt,Re),qe=QD(gt,Re),Xe=On?Fn:null,je=qe.indexOf(De)<qe.length-1,Fe=qe.indexOf(De)>0,ct=K.useCallback(function(Ge){var Ee=function(){switch(Ct){case"start":return sE;case"end":return nR;case"range":return cq;default:throw new Error("Invalid returnValue.")}}();return Ee({maxDate:be,maxDetail:Re,minDate:ze,value:Ge})},[be,Re,ze,Ct]),Pt=K.useCallback(function(Ge,Ee){yn(Ge);var lt={action:Ee,activeStartDate:Ge,value:me,view:De};it&&!Qy(ie,Ge)&&it(lt)},[ie,it,me,De]),Et=K.useCallback(function(Ge,Ee){var lt=function(){switch(De){case"century":return Rt;case"decade":return dn;case"year":return Yt;case"month":return Tt;default:throw new Error("Invalid view: ".concat(De,"."))}}();lt&&lt(Ge,Ee)},[Tt,Rt,Yt,dn,De]),mn=K.useCallback(function(Ge,Ee){if(je){Et(Ge,Ee);var lt=qe[qe.indexOf(De)+1];if(!lt)throw new Error("Attempted to drill down from the lowest view.");yn(Ge),re(lt);var Ot={action:"drillDown",activeStartDate:Ge,value:me,view:lt};it&&!Qy(ie,Ge)&&it(Ot),Jt&&De!==lt&&Jt(Ot),_n&&_n(Ot)}},[ie,je,it,Et,_n,Jt,me,De,qe]),Rn=K.useCallback(function(){if(Fe){var Ge=qe[qe.indexOf(De)-1];if(!Ge)throw new Error("Attempted to drill up from the highest view.");var Ee=rp(Ge,ie);yn(Ee),re(Ge);var lt={action:"drillUp",activeStartDate:Ee,value:me,view:Ge};it&&!Qy(ie,Ee)&&it(lt),Jt&&De!==Ge&&Jt(lt),In&&In(lt)}},[ie,Fe,it,In,Jt,me,De,qe]),An=K.useCallback(function(Ge,Ee){var lt=me;Et(Ge,Ee);var Ot=On&&!L3(lt),ln;if(On)if(Ot)ln=rp(Me,Ge);else{if(!lt)throw new Error("previousValue is required");if(Array.isArray(lt))throw new Error("previousValue must not be an array");ln=IH(Me,lt,Ge)}else ln=ct(Ge);var hr=!On||Ot||X?rR({maxDate:be,maxDetail:Re,minDate:ze,minDetail:gt,value:ln,view:De}):null;Ee.persist(),yn(hr),vi(ln);var Pr={action:"onChange",activeStartDate:hr,value:ln,view:De};if(it&&!Qy(ie,hr)&&it(Pr),Dt)if(On){var Vn=L3(ln);if(!Vn)Dt(ln||null,Ee);else if(c){if(Array.isArray(ln))throw new Error("value must not be an array");Dt([ln||null,null],Ee)}}else Dt(ln||null,Ee)},[ie,c,ct,X,be,Re,ze,gt,it,Dt,Et,On,me,Me,De]);function Ln(Ge){nr(Ge)}function Xn(){nr(null)}K.useImperativeHandle(n,function(){return{activeStartDate:ie,drillDown:mn,drillUp:Rn,onChange:An,setActiveStartDate:Pt,value:me,view:De}},[ie,mn,Rn,An,Pt,me,De]);function xr(Ge){var Ee=Ge?RD(De,ie):rp(De,ie),lt=je?mn:An,Ot={activeStartDate:Ee,hover:Xe,locale:oe,maxDate:be,minDate:ze,onClick:lt,onMouseOver:On?Ln:null,tileClassName:bn,tileContent:Ye,tileDisabled:Xt,value:me,valueType:Me};switch(De){case"century":return $t.createElement(ZH,Wf({formatYear:le},Ot));case"decade":return $t.createElement(YH,Wf({formatYear:le},Ot));case"year":return $t.createElement(eq,Wf({formatMonth:N,formatMonthYear:W},Ot));case"month":return $t.createElement(JD,Wf({calendarType:d,formatDay:M,formatLongDate:R,formatShortWeekday:V,formatWeekday:H,onClickWeekNumber:tn,onMouseLeave:On?Xn:null,showFixedNumberOfWeeks:typeof Zn<"u"?Zn:an,showNeighboringMonth:Un,showWeekNumbers:qn},Ot));default:throw new Error("Invalid view: ".concat(De,"."))}}function br(){return Nn?$t.createElement(FD,{activeStartDate:ie,drillUp:Rn,formatMonthYear:W,formatYear:le,locale:oe,maxDate:be,minDate:ze,navigationAriaLabel:Ze,navigationAriaLive:We,navigationLabel:He,next2AriaLabel:rt,next2Label:tt,nextAriaLabel:Ne,nextLabel:et,prev2AriaLabel:vn,prev2Label:Ft,prevAriaLabel:nn,prevLabel:En,setActiveStartDate:Pt,showDoubleView:an,view:De,views:qe}):null}var Mr=Array.isArray(me)?me:[me];return $t.createElement("div",{className:xx(Jy,On&&Mr.length===1&&"".concat(Jy,"--selectRange"),an&&"".concat(Jy,"--doubleView"),f),ref:Q},br(),$t.createElement("div",{className:"".concat(Jy,"__viewContainer"),onBlur:On?Xn:void 0,onMouseLeave:On?Xn:void 0},xr(),an?xr(!0):null))}),rC=xe.instanceOf(Date),iC=xe.oneOfType([xe.string,xe.instanceOf(Date)]),oC=xe.oneOfType([iC,NH(iC)]);iR.propTypes={activeStartDate:rC,allowPartialRange:xe.bool,calendarType:d_,className:T2,defaultActiveStartDate:rC,defaultValue:oC,defaultView:S0,formatDay:xe.func,formatLongDate:xe.func,formatMonth:xe.func,formatMonthYear:xe.func,formatShortWeekday:xe.func,formatWeekday:xe.func,formatYear:xe.func,goToRangeStartOnSelect:xe.bool,inputRef:OH,locale:xe.string,maxDate:iE,maxDetail:xe.oneOf(i1),minDate:rE,minDetail:xe.oneOf(i1),navigationAriaLabel:xe.string,navigationAriaLive:xe.oneOf(["off","polite","assertive"]),navigationLabel:xe.func,next2AriaLabel:xe.string,next2Label:xe.node,nextAriaLabel:xe.string,nextLabel:xe.node,onActiveStartDateChange:xe.func,onChange:xe.func,onClickDay:xe.func,onClickDecade:xe.func,onClickMonth:xe.func,onClickWeekNumber:xe.func,onClickYear:xe.func,onDrillDown:xe.func,onDrillUp:xe.func,onViewChange:xe.func,prev2AriaLabel:xe.string,prev2Label:xe.node,prevAriaLabel:xe.string,prevLabel:xe.node,returnValue:xe.oneOf(["start","end","range"]),selectRange:xe.bool,showDoubleView:xe.bool,showFixedNumberOfWeeks:xe.bool,showNavigation:xe.bool,showNeighboringMonth:xe.bool,showWeekNumbers:xe.bool,tileClassName:xe.oneOfType([xe.func,T2]),tileContent:xe.oneOfType([xe.func,xe.node]),tileDisabled:xe.func,value:oC,view:S0};const dq=iR;function oR(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=oR(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function hq(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=oR(e))&&(i&&(i+=" "),i+=t);return i}function aR(e,t){return function(n,i,c){var d=n,f=i,a=d[f];if(typeof a<"u"){if(typeof a!="number")return new Error("Invalid prop `".concat(i,"` of type `").concat(typeof a,"` supplied to `").concat(c,"`, expected `number`."));if(a<e||a>t)return new Error("Invalid prop `".concat(i,"` of type `").concat(typeof a,"` supplied to `").concat(c,"`, length must be between ").concat(e," and ").concat(t,"."))}return null}}var o1=aR(0,100),z3=aR(-100,100),Wg=function(t,n,i){var c=t,d=n,f=c[d];if(typeof f<"u"){if(typeof f!="number")return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected `number`."));if(f<0)return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, width must be greater or equal to 0."))}return null},j5=o1,$5=Wg;function Dv(e){var t=e.angle,n=t===void 0?0:t,i=e.name,c=e.length,d=c===void 0?100:c,f=e.oppositeLength,a=f===void 0?10:f,v=e.width,S=v===void 0?1:v;return $t.createElement("div",{className:"react-clock__hand react-clock__".concat(i,"-hand"),style:{transform:"rotate(".concat(n,"deg)")}},$t.createElement("div",{className:"react-clock__hand__body react-clock__".concat(i,"-hand__body"),style:{width:"".concat(S,"px"),top:"".concat(50-d/2,"%"),bottom:"".concat(50-a/2,"%")}}))}Dv.propTypes={angle:xe.number,length:o1,name:xe.string.isRequired,oppositeLength:o1,width:Wg};function lE(e){var t=e.angle,n=t===void 0?0:t,i=e.length,c=i===void 0?10:i,d=e.name,f=e.width,a=f===void 0?1:f,v=e.number;return $t.createElement("div",{className:"react-clock__mark react-clock__".concat(d,"-mark"),style:{transform:"rotate(".concat(n,"deg)")}},$t.createElement("div",{className:"react-clock__mark__body react-clock__".concat(d,"-mark__body"),style:{width:"".concat(a,"px"),top:0,bottom:"".concat(100-c/2,"%")}}),v?$t.createElement("div",{className:"react-clock__mark__number",style:{transform:"rotate(-".concat(n,"deg)"),top:"".concat(c/2,"%")}},v):null)}lE.propTypes={angle:xe.number,length:j5,name:xe.string.isRequired,number:xe.node,width:$5};var U5=globalThis&&globalThis.__assign||function(){return U5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},U5.apply(this,arguments)};function pq(e){return $t.createElement(lE,U5({},e))}function fq(e,t){return t.toLocaleString(e||a_()||void 0)}var V5=globalThis&&globalThis.__assign||function(){return V5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},V5.apply(this,arguments)},mq=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n};function sR(e){var t=e.formatHour,n=t===void 0?fq:t,i=e.locale,c=e.number,d=mq(e,["formatHour","locale","number"]);return $t.createElement(lE,V5({number:c?n(i,c):null},d))}sR.propTypes={formatHour:xe.func,locale:xe.string,number:xe.number};function lR(e){var t=e.className,n=e.formatHour,i=e.hourHandLength,c=i===void 0?50:i,d=e.hourHandOppositeLength,f=e.hourHandWidth,a=f===void 0?4:f,v=e.hourMarksLength,S=v===void 0?10:v,M=e.hourMarksWidth,R=M===void 0?3:M,N=e.locale,W=e.minuteHandLength,V=W===void 0?70:W,H=e.minuteHandOppositeLength,le=e.minuteHandWidth,G=le===void 0?2:le,X=e.minuteMarksLength,Q=X===void 0?6:X,oe=e.minuteMarksWidth,he=oe===void 0?1:oe,be=e.renderHourMarks,A=be===void 0?!0:be,Re=e.renderMinuteHand,_e=Re===void 0?!0:Re,ze=e.renderMinuteMarks,ot=ze===void 0?!0:ze,gt=e.renderNumbers,Ze=e.renderSecondHand,We=Ze===void 0?!0:Ze,He=e.secondHandLength,rt=He===void 0?90:He,tt=e.secondHandOppositeLength,Ne=e.secondHandWidth,et=Ne===void 0?1:Ne,it=e.size,Dt=it===void 0?150:it,Tt=e.value;function Rt(){if(!ot)return null;for(var Jt=[],vn=1;vn<=60;vn+=1){var Ft=A&&!(vn%5);Ft||Jt.push($t.createElement(pq,{key:"minute_".concat(vn),angle:vn*6,length:Q,name:"minute",width:he}))}return Jt}function Yt(){if(!A)return null;for(var Jt=[],vn=1;vn<=12;vn+=1)Jt.push($t.createElement(sR,{key:"hour_".concat(vn),angle:vn*30,formatHour:n,length:S,locale:N,name:"hour",number:gt?vn:void 0,width:R}));return Jt}function tn(){return $t.createElement("div",{className:"react-clock__face"},Rt(),Yt())}function dn(){var Jt=Tt?Jd(Tt)*30+np(Tt)/2+r1(Tt)/600:0;return $t.createElement(Dv,{angle:Jt,length:c,name:"hour",oppositeLength:d,width:a})}function _n(){if(!_e)return null;var Jt=Tt?Jd(Tt)*360+np(Tt)*6+r1(Tt)/10:0;return $t.createElement(Dv,{angle:Jt,length:V,name:"minute",oppositeLength:H,width:G})}function In(){if(!We)return null;var Jt=Tt?np(Tt)*360+r1(Tt)*6:0;return $t.createElement(Dv,{angle:Jt,length:rt,name:"second",oppositeLength:tt,width:et})}return $t.createElement("time",{className:hq("react-clock",t),dateTime:Tt instanceof Date?Tt.toISOString():Tt||void 0,style:{width:Dt,height:Dt}},tn(),dn(),_n(),In())}lR.propTypes={className:xe.oneOfType([xe.string,xe.arrayOf(xe.string)]),formatHour:xe.func,hourHandLength:o1,hourHandOppositeLength:z3,hourHandWidth:Wg,hourMarksLength:j5,hourMarksWidth:$5,locale:xe.string,minuteHandLength:o1,minuteHandOppositeLength:z3,minuteHandWidth:Wg,minuteMarksLength:j5,minuteMarksWidth:$5,renderHourMarks:xe.bool,renderMinuteHand:xe.bool,renderMinuteMarks:xe.bool,renderNumbers:xe.bool,renderSecondHand:xe.bool,secondHandLength:o1,secondHandOppositeLength:z3,secondHandWidth:Wg,size:xe.oneOfType([xe.number,xe.string]),value:xe.oneOfType([xe.string,xe.instanceOf(Date)])};function Sa(e){return e.getBoundingClientRect()}function aC(e,t){return{get collidedTop(){return Sa(e).top<Sa(t).top},get collidedBottom(){return Sa(e).bottom>Sa(t).bottom},get collidedLeft(){return Sa(e).left<Sa(t).left},get collidedRight(){return Sa(e).right>Sa(t).right},get overflowTop(){return Sa(t).top-Sa(e).top},get overflowBottom(){return Sa(e).bottom-Sa(t).bottom},get overflowLeft(){return Sa(t).left-Sa(e).left},get overflowRight(){return Sa(e).right-Sa(t).right}}}var gq=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(i[d]=c[d])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Od=globalThis&&globalThis.__assign||function(){return Od=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Od.apply(this,arguments)},_q=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},cR=typeof document<"u",sC=cR&&"CSS"in window&&"supports"in window.CSS&&CSS.supports("display","contents"),yq=cR&&"MutationObserver"in window;function ev(e){return e.charAt(0).toUpperCase()+e.slice(1)}function lC(e){for(var t=e.parentElement;t;){var n=window.getComputedStyle(t).overflow;if(n.split(" ").every(function(i){return i==="auto"||i==="scroll"}))return t;t=t.parentElement}return document.documentElement}function uR(e){var t=e.axis,n=e.container,i=e.element,c=e.invertAxis,d=e.secondary,f=e.scrollContainer,a=e.spacing,v=window.getComputedStyle(i),S=n.parentElement;if(!S)return;var M=aC(S,f),R=aC(S,document.documentElement),N=t==="x",W=N?"left":"top",V=N?"right":"bottom",H=N?"width":"height",le="overflow".concat(ev(W)),G="overflow".concat(ev(V)),X="scroll".concat(ev(W)),Q=ev(H),oe="offset".concat(Q),he="client".concat(Q),be="min-".concat(H),A=f[oe]-f[he],Re=typeof a=="object"?a[W]:a,_e=-Math.max(M[le],R[le]+document.documentElement[X])-Re,ze=typeof a=="object"?a[V]:a,ot=-Math.max(M[G],R[G]-document.documentElement[X])-ze-A;d&&(_e+=S[he],ot+=S[he]);var gt=i[oe];function Ze(){i.style[W]="auto",i.style[V]=d?"0":"100%"}function We(){i.style[W]=d?"0":"100%",i.style[V]="auto"}function He(it,Dt){var Tt=gt<=it;return Tt&&Dt(),Tt}function rt(){return He(_e,Ze)}function tt(){return He(ot,We)}function Ne(){var it=_e>ot,Dt=v.getPropertyValue(be),Tt=Dt?parseInt(Dt,10):null;function Rt(Yt){z5(!Tt||Yt>=Tt,"<Fit />'s child will not fit anywhere with its current ".concat(be," of ").concat(Tt,"px."));var tn=Math.max(Yt,Tt||0);z5(!1,"<Fit />'s child needed to have its ".concat(H," decreased to ").concat(tn,"px.")),i.style[H]="".concat(tn,"px")}it?(Rt(_e),Ze()):(Rt(ot),We())}var et;c?et=rt()||tt():et=tt()||rt(),et||Ne()}function vq(e){uR(e)}function xq(e){uR(Od(Od({},e),{axis:e.axis==="x"?"y":"x",secondary:!0}))}function bq(e){var t=e.invertAxis,n=e.invertSecondaryAxis,i=_q(e,["invertAxis","invertSecondaryAxis"]);vq(Od(Od({},i),{invertAxis:t})),xq(Od(Od({},i),{invertAxis:n}))}var cC=function(e){gq(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.fit=function(){var i=n,c=i.scrollContainer,d=i.container,f=i.element;if(!(!c||!d||!f)){var a=f.clientWidth,v=f.clientHeight;if(!(n.elementWidth===a&&n.elementHeight===v)){n.elementWidth=a,n.elementHeight=v;var S=d.parentElement;if(S){var M=window.getComputedStyle(f),R=M.position;R!=="absolute"&&(f.style.position="absolute");var N=window.getComputedStyle(S),W=N.position;W!=="relative"&&W!=="absolute"&&(S.style.position="relative");var V=n.props,H=V.invertAxis,le=V.invertSecondaryAxis,G=V.mainAxis,X=G===void 0?"y":G,Q=V.spacing,oe=Q===void 0?8:Q;bq({container:d,element:f,invertAxis:H,invertSecondaryAxis:le,axis:X,scrollContainer:c,spacing:oe})}}}},n}return t.prototype.componentDidMount=function(){var n=this;if(!sC){var i=mp.findDOMNode(this);if(!i||!(i instanceof HTMLElement))return;this.container=i,this.element=i,this.scrollContainer=lC(i)}this.fit();var c=function(){n.fit()};if(yq&&this.element){var d=new MutationObserver(c);d.observe(this.element,{attributes:!0,attributeFilter:["class","style"]})}},t.prototype.render=function(){var n=this,i=this.props.children,c=$t.Children.only(i);return sC?$t.createElement("span",{ref:function(d){n.container=d;var f=d&&d.firstElementChild;!f||!(f instanceof HTMLElement)||(n.element=f,n.scrollContainer=lC(f))},style:{display:"contents"}},c):c},t.propTypes={children:xe.node.isRequired,invertAxis:xe.bool,invertSecondaryAxis:xe.bool,mainAxis:xe.oneOf(["x","y"]),spacing:xe.oneOfType([xe.number,xe.shape({bottom:xe.number.isRequired,left:xe.number.isRequired,right:xe.number.isRequired,top:xe.number.isRequired})])},t}(K.Component);function dR(e){var t=e.children;return $t.createElement("span",{className:"react-datetime-picker__inputGroup__divider"},t)}dR.propTypes={children:xe.node};var hR={};const Hu=V6(rH);var m_={},W5={exports:{}};function pR(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=pR(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function uC(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=pR(e))&&(i&&(i+=" "),i+=t);return i}W5.exports=uC,W5.exports.clsx=uC;var fR=W5.exports,Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.updateInputWidth=Wc.measureText=Wc.getFontShorthand=void 0;var wq=["normal","small-caps"];function mR(e){if(!e)return"";var t=window.getComputedStyle(e);if(t.font)return t.font;var n=t.fontFamily!=="";if(!n)return"";var i=wq.includes(t.fontVariant)?t.fontVariant:"normal";return"".concat(t.fontStyle," ").concat(i," ").concat(t.fontWeight," ").concat(t.fontSize," / ").concat(t.lineHeight," ").concat(t.fontFamily)}Wc.getFontShorthand=mR;var dC;function gR(e,t){var n=dC||(dC=document.createElement("canvas")),i=n.getContext("2d");if(!i)return null;i.font=t;var c=i.measureText(e).width;return Math.ceil(c)}Wc.measureText=gR;function _R(e){if(typeof document>"u"||!e)return null;var t=mR(e),n=e.value||e.placeholder,i=gR(n,t);return i===null?null:(e.style.width="".concat(i,"px"),i)}Wc.updateInputWidth=_R;Wc.default=_R;var Aa={},hC=xn&&xn.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},Eq=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.rangeOf=Aa.isRef=Aa.isMaxDate=Aa.isMinDate=Aa.isValueType=void 0;var Hf=Eq(_s),Tq=["century","decade","year","month"],Sq=hC(hC([],Tq.slice(1),!0),["day"],!1);Aa.isValueType=Hf.default.oneOf(Sq);var kq=function(t,n,i){var c=t,d=n,f=c[d];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var a=t.maxDate;return a&&f>a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, minDate cannot be larger than maxDate.")):null};Aa.isMinDate=kq;var Cq=function(t,n,i){var c=t,d=n,f=c[d];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var a=t.minDate;return a&&f<a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, maxDate cannot be smaller than minDate.")):null};Aa.isMaxDate=Cq;Aa.isRef=Hf.default.oneOfType([Hf.default.func,Hf.default.exact({current:Hf.default.any})]);var Pq=function(e){return Hf.default.arrayOf(e)};Aa.rangeOf=Pq;var Iq=xn&&xn.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var c=Object.getOwnPropertyDescriptor(t,n);(!c||("get"in c?!t.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,c)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),Aq=xn&&xn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yR=xn&&xn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Iq(t,e,n);return Aq(t,e),t},vR=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(m_,"__esModule",{value:!0});var qf=yR(K),ka=vR(_s),Mq=vR(fR),O0=yR(Wc),Dq=Aa,cE=typeof document<"u",Rq=cE?qf.useLayoutEffect:qf.useEffect,Oq=cE&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),Lq=cE&&/Firefox/.test(navigator.userAgent);function zq(e){var t=e.target;Oq?requestAnimationFrame(function(){return t.select()}):t.select()}function Nq(e){if(document.readyState==="complete")return;function t(){(0,O0.default)(e)}window.addEventListener("load",t)}function Fq(e){if(!document.fonts)return;var t=(0,O0.getFontShorthand)(e);if(!t)return;var n=document.fonts.check(t);if(n)return;function i(){(0,O0.default)(e)}document.fonts.addEventListener("loadingdone",i)}function Bq(e){if(e&&"selectionStart"in e&&e.selectionStart!==null&&"selectionEnd"in e&&e.selectionEnd!==null)return e.value.slice(e.selectionStart,e.selectionEnd);if("getSelection"in window){var t=window.getSelection();return t&&t.toString()}return null}function jq(e){if(e!==null)return function(n){if(!Lq){var i=n.key,c=n.target,d=c.value,f=i.length===1&&/\d/.test(i),a=Bq(c);(!f||!(a||d.length<e))&&n.preventDefault()}}}function xR(e){var t=e.ariaLabel,n=e.autoFocus,i=e.className,c=e.disabled,d=e.inputRef,f=e.max,a=e.min,v=e.name,S=e.nameForClass,M=e.onChange,R=e.onKeyDown,N=e.onKeyUp,W=e.placeholder,V=W===void 0?"--":W,H=e.required,le=e.showLeadingZeros,G=e.step,X=e.value;Rq(function(){!d||!d.current||((0,O0.default)(d.current),Nq(d.current),Fq(d.current))},[d,X]);var Q=le&&X&&Number(X)<10&&(X==="0"||!X.toString().startsWith("0")),oe=f?f.toString().length:null;return qf.default.createElement(qf.default.Fragment,null,Q?qf.default.createElement("span",{className:"".concat(i,"__leadingZero")},"0"):null,qf.default.createElement("input",{"aria-label":t,autoComplete:"off",autoFocus:n,className:(0,Mq.default)("".concat(i,"__input"),"".concat(i,"__").concat(S||v),Q&&"".concat(i,"__input--hasLeadingZero")),"data-input":"true",disabled:c,inputMode:"numeric",max:f,min:a,name:v,onChange:M,onFocus:zq,onKeyDown:R,onKeyPress:jq(oe),onKeyUp:function(he){(0,O0.default)(he.target),N&&N(he)},placeholder:V,ref:d,required:H,step:G,type:"number",value:X!==null?X:""}))}m_.default=xR;xR.propTypes={ariaLabel:ka.default.string,autoFocus:ka.default.bool,className:ka.default.string.isRequired,disabled:ka.default.bool,inputRef:Dq.isRef,max:ka.default.number,min:ka.default.number,name:ka.default.string,nameForClass:ka.default.string,onChange:ka.default.func,onKeyDown:ka.default.func,onKeyUp:ka.default.func,placeholder:ka.default.string,required:ka.default.bool,showLeadingZeros:ka.default.bool,step:ka.default.number,value:ka.default.string};var ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.safeMax=ic.safeMin=ic.between=void 0;function $q(e,t,n){return t&&t>e?t:n&&n<e?n:e}ic.between=$q;function bR(e){return e!==null&&e!==!1&&!Number.isNaN(Number(e))}function Uq(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.min.apply(Math,e.filter(bR))}ic.safeMin=Uq;function Vq(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.max.apply(Math,e.filter(bR))}ic.safeMax=Vq;var H5=xn&&xn.__assign||function(){return H5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},H5.apply(this,arguments)},Wq=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},uE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hR,"__esModule",{value:!0});var Hq=uE(K),tl=uE(_s),gg=Hu,qq=uE(m_),N3=Aa,pC=ic;function wR(e){var t=e.maxDate,n=e.minDate,i=e.month,c=e.year,d=Wq(e,["maxDate","minDate","month","year"]),f=function(){return i?(0,gg.getDaysInMonth)(new Date(Number(c),Number(i)-1,1)):31}();function a(M){return c===(0,gg.getYear)(M).toString()&&i===(0,gg.getMonthHuman)(M).toString()}var v=(0,pC.safeMin)(f,t&&a(t)&&(0,gg.getDate)(t)),S=(0,pC.safeMax)(1,n&&a(n)&&(0,gg.getDate)(n));return Hq.default.createElement(qq.default,H5({max:v,min:S,name:"day"},d))}var Gq=hR.default=wR;wR.propTypes={ariaLabel:tl.default.string,className:tl.default.string.isRequired,disabled:tl.default.bool,inputRef:N3.isRef,maxDate:N3.isMaxDate,minDate:N3.isMinDate,month:tl.default.string,onChange:tl.default.func,onKeyDown:tl.default.func,onKeyUp:tl.default.func,placeholder:tl.default.string,required:tl.default.bool,showLeadingZeros:tl.default.bool,value:tl.default.string,year:tl.default.string};var ER={},q5=xn&&xn.__assign||function(){return q5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},q5.apply(this,arguments)},Zq=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},dE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ER,"__esModule",{value:!0});var Xq=dE(K),ql=dE(_s),F3=Hu,Kq=dE(m_),B3=Aa,fC=ic;function TR(e){var t=e.maxDate,n=e.minDate,i=e.year,c=Zq(e,["maxDate","minDate","year"]);function d(v){return v&&i===(0,F3.getYear)(v).toString()}var f=(0,fC.safeMin)(12,t&&d(t)&&(0,F3.getMonthHuman)(t)),a=(0,fC.safeMax)(1,n&&d(n)&&(0,F3.getMonthHuman)(n));return Xq.default.createElement(Kq.default,q5({max:f,min:a,name:"month"},c))}var Yq=ER.default=TR;TR.propTypes={ariaLabel:ql.default.string,className:ql.default.string.isRequired,disabled:ql.default.bool,inputRef:B3.isRef,maxDate:B3.isMaxDate,minDate:B3.isMinDate,onChange:ql.default.func,onKeyDown:ql.default.func,onKeyUp:ql.default.func,placeholder:ql.default.string,required:ql.default.bool,showLeadingZeros:ql.default.bool,value:ql.default.string,year:ql.default.string};var SR={},qd={};const kR=V6(ZW);var Jq=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qd,"__esModule",{value:!0});qd.formatShortMonth=qd.formatMonth=qd.getFormatter=void 0;var Qq=Jq(kR),j3=new Map;function CR(e){return function(n,i){var c=n||(0,Qq.default)();j3.has(c)||j3.set(c,new Map);var d=j3.get(c);return d.has(e)||d.set(e,new Intl.DateTimeFormat(c||void 0,e).format),d.get(e)(i)}}qd.getFormatter=CR;function eG(e){var t=new Date(e);return new Date(t.setHours(12))}function PR(e){return function(t,n){return CR(e)(t,eG(n))}}var tG={month:"long"},nG={month:"short"};qd.formatMonth=PR(tG);qd.formatShortMonth=PR(nG);var rG=xn&&xn.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},hE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(SR,"__esModule",{value:!0});var $3=hE(K),nl=hE(_s),iG=hE(fR),tv=Hu,mC=qd,U3=Aa,gC=ic;function IR(e){var t=e.ariaLabel,n=e.autoFocus,i=e.className,c=e.disabled,d=e.inputRef,f=e.locale,a=e.maxDate,v=e.minDate,S=e.onChange,M=e.onKeyDown,R=e.placeholder,N=R===void 0?"--":R,W=e.required,V=e.short,H=e.value,le=e.year;function G(A){return A&&le===(0,tv.getYear)(A).toString()}var X=(0,gC.safeMin)(12,a&&G(a)&&(0,tv.getMonthHuman)(a)),Q=(0,gC.safeMax)(1,v&&G(v)&&(0,tv.getMonthHuman)(v)),oe=rG([],Array(12),!0).map(function(A,Re){return new Date(2019,Re,1)}),he="month",be=V?mC.formatShortMonth:mC.formatMonth;return $3.default.createElement("select",{"aria-label":t,autoFocus:n,className:(0,iG.default)("".concat(i,"__input"),"".concat(i,"__").concat(he)),"data-input":"true","data-select":"true",disabled:c,name:he,onChange:S,onKeyDown:M,ref:d,required:W,value:H!==null?H:""},!H&&$3.default.createElement("option",{value:""},N),oe.map(function(A){var Re=(0,tv.getMonthHuman)(A),_e=Re<Q||Re>X;return $3.default.createElement("option",{key:Re,disabled:_e,value:Re},be(f,A))}))}var oG=SR.default=IR;IR.propTypes={ariaLabel:nl.default.string,autoFocus:nl.default.bool,className:nl.default.string.isRequired,disabled:nl.default.bool,inputRef:U3.isRef,locale:nl.default.string,maxDate:U3.isMaxDate,minDate:U3.isMinDate,onChange:nl.default.func,onKeyDown:nl.default.func,placeholder:nl.default.string,required:nl.default.bool,short:nl.default.bool,value:nl.default.string,year:nl.default.string};var AR={},G5=xn&&xn.__assign||function(){return G5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},G5.apply(this,arguments)},aG=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},pE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(AR,"__esModule",{value:!0});var sG=pE(K),Eu=pE(_s),_C=Hu,lG=pE(m_),nv=Aa,yC=ic;function MR(e){var t=e.maxDate,n=e.minDate,i=e.placeholder,c=i===void 0?"----":i,d=e.valueType,f=aG(e,["maxDate","minDate","placeholder","valueType"]),a=(0,yC.safeMin)(275760,t&&(0,_C.getYear)(t)),v=(0,yC.safeMax)(1,n&&(0,_C.getYear)(n)),S=function(){return d==="century"?10:1}();return sG.default.createElement(lG.default,G5({max:a,min:v,name:"year",placeholder:c,step:S},f))}var cG=AR.default=MR;MR.propTypes={ariaLabel:Eu.default.string,className:Eu.default.string.isRequired,disabled:Eu.default.bool,inputRef:nv.isRef,maxDate:nv.isMaxDate,minDate:nv.isMinDate,onChange:Eu.default.func,onKeyDown:Eu.default.func,onKeyUp:Eu.default.func,placeholder:Eu.default.string,required:Eu.default.bool,value:Eu.default.string,valueType:nv.isValueType};var DR={},X1={},Z5={exports:{}};function RR(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=RR(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function vC(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=RR(e))&&(i&&(i+=" "),i+=t);return i}Z5.exports=vC,Z5.exports.clsx=vC;var OR=Z5.exports,qa={},uG=xn&&xn.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},dG=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qa,"__esModule",{value:!0});qa.rangeOf=qa.isRef=qa.isValueType=qa.isTime=void 0;var Gf=dG(_s),hG=["hour","minute","second"],pG=uG([],hG,!0),fG=/^(([0-1])?[0-9]|2[0-3]):[0-5][0-9](:([0-5][0-9]))?$/,mG=function(t,n,i){var c=t,d=n,f=c[d];return f&&(typeof f!="string"||!fG.test(f))?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected time in HH:mm(:ss) format.")):null};qa.isTime=mG;qa.isValueType=Gf.default.oneOf(pG);qa.isRef=Gf.default.oneOfType([Gf.default.func,Gf.default.exact({current:Gf.default.any})]);var gG=function(e){return Gf.default.arrayOf(e)};qa.rangeOf=gG;var _G=xn&&xn.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var c=Object.getOwnPropertyDescriptor(t,n);(!c||("get"in c?!t.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,c)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),yG=xn&&xn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),LR=xn&&xn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&_G(t,e,n);return yG(t,e),t},zR=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(X1,"__esModule",{value:!0});var Zf=LR(K),Ca=zR(_s),vG=zR(OR),L0=LR(Wc),xG=qa,fE=typeof document<"u",bG=fE?Zf.useLayoutEffect:Zf.useEffect,wG=fE&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),EG=fE&&/Firefox/.test(navigator.userAgent);function TG(e){var t=e.target;wG?requestAnimationFrame(function(){return t.select()}):t.select()}function SG(e){if(document.readyState==="complete")return;function t(){(0,L0.default)(e)}window.addEventListener("load",t)}function kG(e){if(!document.fonts)return;var t=(0,L0.getFontShorthand)(e);if(!t)return;var n=document.fonts.check(t);if(n)return;function i(){(0,L0.default)(e)}document.fonts.addEventListener("loadingdone",i)}function CG(e){if(e&&"selectionStart"in e&&e.selectionStart!==null&&"selectionEnd"in e&&e.selectionEnd!==null)return e.value.slice(e.selectionStart,e.selectionEnd);if("getSelection"in window){var t=window.getSelection();return t&&t.toString()}return null}function PG(e){if(e!==null)return function(n){if(!EG){var i=n.key,c=n.target,d=c.value,f=i.length===1&&/\d/.test(i),a=CG(c);(!f||!(a||d.length<e))&&n.preventDefault()}}}function NR(e){var t=e.ariaLabel,n=e.autoFocus,i=e.className,c=e.disabled,d=e.inputRef,f=e.max,a=e.min,v=e.name,S=e.nameForClass,M=e.onChange,R=e.onKeyDown,N=e.onKeyUp,W=e.placeholder,V=W===void 0?"--":W,H=e.required,le=e.showLeadingZeros,G=e.step,X=e.value;bG(function(){!d||!d.current||((0,L0.default)(d.current),SG(d.current),kG(d.current))},[d,X]);var Q=le&&X&&Number(X)<10&&(X==="0"||!X.toString().startsWith("0")),oe=f?f.toString().length:null;return Zf.default.createElement(Zf.default.Fragment,null,Q?Zf.default.createElement("span",{className:"".concat(i,"__leadingZero")},"0"):null,Zf.default.createElement("input",{"aria-label":t,autoComplete:"off",autoFocus:n,className:(0,vG.default)("".concat(i,"__input"),"".concat(i,"__").concat(S||v),Q&&"".concat(i,"__input--hasLeadingZero")),"data-input":"true",disabled:c,inputMode:"numeric",max:f,min:a,name:v,onChange:M,onFocus:TG,onKeyDown:R,onKeyPress:PG(oe),onKeyUp:function(he){(0,L0.default)(he.target),N&&N(he)},placeholder:V,ref:d,required:H,step:G,type:"number",value:X!==null?X:""}))}X1.default=NR;NR.propTypes={ariaLabel:Ca.default.string,autoFocus:Ca.default.bool,className:Ca.default.string.isRequired,disabled:Ca.default.bool,inputRef:xG.isRef,max:Ca.default.number,min:Ca.default.number,name:Ca.default.string,nameForClass:Ca.default.string,onChange:Ca.default.func,onKeyDown:Ca.default.func,onKeyUp:Ca.default.func,placeholder:Ca.default.string,required:Ca.default.bool,showLeadingZeros:Ca.default.bool,step:Ca.default.number,value:Ca.default.string};var _p={};Object.defineProperty(_p,"__esModule",{value:!0});_p.convert24to12=_p.convert12to24=void 0;function IG(e,t){var n=Number(e);return t==="am"&&n===12?n=0:t==="pm"&&n<12&&(n+=12),n}_p.convert12to24=IG;function AG(e){var t=Number(e)%12||12;return[t,Number(e)<12?"am":"pm"]}_p.convert24to12=AG;var _l={},v1={},MG=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(v1,"__esModule",{value:!0});v1.getNumberFormatter=v1.getFormatter=void 0;var FR=MG(kR),V3=new Map;function DG(e){return function(n,i){var c=n||(0,FR.default)();V3.has(c)||V3.set(c,new Map);var d=V3.get(c);return d.has(e)||d.set(e,new Intl.DateTimeFormat(c||void 0,e).format),d.get(e)(i)}}v1.getFormatter=DG;var W3=new Map;function RG(e){return function(t,n){var i=t||(0,FR.default)();W3.has(i)||W3.set(i,new Map);var c=W3.get(i);return c.has(e)||c.set(e,new Intl.NumberFormat(i||void 0,e).format),c.get(e)(n)}}v1.getNumberFormatter=RG;Object.defineProperty(_l,"__esModule",{value:!0});_l.safeMax=_l.safeMin=_l.getAmPmLabels=void 0;var OG=v1,LG=["9","٩"],xC=new RegExp("[".concat(LG.join(""),"]")),bC=(0,OG.getFormatter)({hour:"numeric"});function zG(e){var t=bC(e,new Date(2017,0,1,9)),n=bC(e,new Date(2017,0,1,21)),i=t.split(xC),c=i[0],d=i[1],f=n.split(xC),a=f[0],v=f[1];if(v!==void 0){if(c!==a)return[c,a].map(function(S){return S.trim()});if(d!==v)return[d,v].map(function(S){return S.trim()})}return["AM","PM"]}_l.getAmPmLabels=zG;function BR(e){return e!==null&&e!==!1&&!Number.isNaN(Number(e))}function NG(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.min.apply(Math,e.filter(BR))}_l.safeMin=NG;function FG(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.max.apply(Math,e.filter(BR))}_l.safeMax=FG;var X5=xn&&xn.__assign||function(){return X5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},X5.apply(this,arguments)},BG=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},mE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(DR,"__esModule",{value:!0});var jG=mE(K),rl=mE(_s),wC=Hu,$G=mE(X1),H3=_p,q3=qa,EC=_l;function jR(e){var t=e.amPm,n=e.maxTime,i=e.minTime,c=e.value,d=BG(e,["amPm","maxTime","minTime","value"]),f=(0,EC.safeMin)(12,n&&function(){var S=(0,H3.convert24to12)((0,wC.getHours)(n)),M=S[0],R=S[1];return R!==t?null:M}()),a=(0,EC.safeMax)(1,i&&function(){var S=(0,H3.convert24to12)((0,wC.getHours)(i)),M=S[0],R=S[1];return R!==t||M===12?null:M}()),v=c?(0,H3.convert24to12)(c)[0].toString():"";return jG.default.createElement($G.default,X5({max:f,min:a,name:"hour12",nameForClass:"hour",value:v},d))}var UG=DR.default=jR;jR.propTypes={amPm:rl.default.string,ariaLabel:rl.default.string,className:rl.default.string.isRequired,disabled:rl.default.bool,hour:rl.default.string,inputRef:q3.isRef,maxTime:q3.isTime,minTime:q3.isTime,onChange:rl.default.func,onKeyDown:rl.default.func,onKeyUp:rl.default.func,placeholder:rl.default.string,required:rl.default.bool,showLeadingZeros:rl.default.bool,value:rl.default.string};var $R={},K5=xn&&xn.__assign||function(){return K5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},K5.apply(this,arguments)},VG=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},gE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($R,"__esModule",{value:!0});var WG=gE(K),Gl=gE(_s),TC=Hu,HG=gE(X1),G3=qa,SC=_l;function UR(e){var t=e.maxTime,n=e.minTime,i=VG(e,["maxTime","minTime"]),c=(0,SC.safeMin)(23,t&&(0,TC.getHours)(t)),d=(0,SC.safeMax)(0,n&&(0,TC.getHours)(n));return WG.default.createElement(HG.default,K5({max:c,min:d,name:"hour24",nameForClass:"hour"},i))}var qG=$R.default=UR;UR.propTypes={ariaLabel:Gl.default.string,className:Gl.default.string.isRequired,disabled:Gl.default.bool,hour:Gl.default.string,inputRef:G3.isRef,maxTime:G3.isTime,minTime:G3.isTime,onChange:Gl.default.func,onKeyDown:Gl.default.func,onKeyUp:Gl.default.func,placeholder:Gl.default.string,required:Gl.default.bool,showLeadingZeros:Gl.default.bool,value:Gl.default.string};var VR={},Y5=xn&&xn.__assign||function(){return Y5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Y5.apply(this,arguments)},GG=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},_E=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(VR,"__esModule",{value:!0});var ZG=_E(K),Zl=_E(_s),Z3=Hu,XG=_E(X1),X3=qa,kC=_l;function WR(e){var t=e.hour,n=e.maxTime,i=e.minTime,c=e.showLeadingZeros,d=c===void 0?!0:c,f=GG(e,["hour","maxTime","minTime","showLeadingZeros"]);function a(M){return t===(0,Z3.getHours)(M).toString()}var v=(0,kC.safeMin)(59,n&&a(n)&&(0,Z3.getMinutes)(n)),S=(0,kC.safeMax)(0,i&&a(i)&&(0,Z3.getMinutes)(i));return ZG.default.createElement(XG.default,Y5({max:v,min:S,name:"minute",showLeadingZeros:d},f))}var KG=VR.default=WR;WR.propTypes={ariaLabel:Zl.default.string,className:Zl.default.string.isRequired,disabled:Zl.default.bool,hour:Zl.default.string,inputRef:X3.isRef,maxTime:X3.isTime,minTime:X3.isTime,onChange:Zl.default.func,onKeyDown:Zl.default.func,onKeyUp:Zl.default.func,placeholder:Zl.default.string,required:Zl.default.bool,showLeadingZeros:Zl.default.bool,value:Zl.default.string};var HR={},J5=xn&&xn.__assign||function(){return J5=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},J5.apply(this,arguments)},YG=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},yE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(HR,"__esModule",{value:!0});var JG=yE(K),il=yE(_s),rv=Hu,QG=yE(X1),K3=qa,CC=_l;function qR(e){var t=e.hour,n=e.maxTime,i=e.minTime,c=e.minute,d=e.showLeadingZeros,f=d===void 0?!0:d,a=YG(e,["hour","maxTime","minTime","minute","showLeadingZeros"]);function v(R){return t===(0,rv.getHours)(R).toString()&&c===(0,rv.getMinutes)(R).toString()}var S=(0,CC.safeMin)(59,n&&v(n)&&(0,rv.getSeconds)(n)),M=(0,CC.safeMax)(0,i&&v(i)&&(0,rv.getSeconds)(i));return JG.default.createElement(QG.default,J5({max:S,min:M,name:"second",showLeadingZeros:f},a))}var eZ=HR.default=qR;qR.propTypes={ariaLabel:il.default.string,className:il.default.string.isRequired,disabled:il.default.bool,hour:il.default.string,inputRef:K3.isRef,maxTime:K3.isTime,minTime:K3.isTime,minute:il.default.string,onChange:il.default.func,onKeyDown:il.default.func,onKeyUp:il.default.func,placeholder:il.default.string,required:il.default.bool,showLeadingZeros:il.default.bool,value:il.default.string};var GR={},vE=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(GR,"__esModule",{value:!0});var iv=vE(K),Tu=vE(_s),tZ=vE(OR),PC=Hu,IC=_p,Y3=qa,nZ=_l;function ZR(e){var t=e.ariaLabel,n=e.autoFocus,i=e.className,c=e.disabled,d=e.inputRef,f=e.locale,a=e.maxTime,v=e.minTime,S=e.onChange,M=e.onKeyDown,R=e.required,N=e.value,W=v?(0,IC.convert24to12)((0,PC.getHours)(v))[1]==="pm":!1,V=a?(0,IC.convert24to12)((0,PC.getHours)(a))[1]==="am":!1,H="amPm",le=(0,nZ.getAmPmLabels)(f),G=le[0],X=le[1];return iv.default.createElement("select",{"aria-label":t,autoFocus:n,className:(0,tZ.default)("".concat(i,"__input"),"".concat(i,"__").concat(H)),"data-input":"true","data-select":"true",disabled:c,name:H,onChange:S,onKeyDown:M,ref:d,required:R,value:N!==null?N:""},!N&&iv.default.createElement("option",{value:""},"--"),iv.default.createElement("option",{disabled:W,value:"am"},G),iv.default.createElement("option",{disabled:V,value:"pm"},X))}var rZ=GR.default=ZR;ZR.propTypes={ariaLabel:Tu.default.string,autoFocus:Tu.default.bool,className:Tu.default.string.isRequired,disabled:Tu.default.bool,inputRef:Y3.isRef,locale:Tu.default.string,maxTime:Y3.isTime,minTime:Y3.isTime,onChange:Tu.default.func,onKeyDown:Tu.default.func,required:Tu.default.bool,value:Tu.default.oneOf(["am","pm"])};var iZ=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},oZ=["hour","minute","second"],aZ=iZ([],oZ,!0),xE=function(t,n,i){var c=t,d=n,f=c[d];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var a=t.maxDate;return a&&f>a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, minDate cannot be larger than maxDate.")):null},bE=function(t,n,i){var c=t,d=n,f=c[d];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var a=t.minDate;return a&&f<a?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, maxDate cannot be smaller than minDate.")):null},sZ=xe.oneOf(aZ),lZ=function(e){return xe.arrayOf(e)};function XR(e){var t=e.ariaLabel,n=e.disabled,i=e.maxDate,c=e.minDate,d=e.name,f=e.onChange,a=e.required,v=e.value,S=e.valueType,M=function(){switch(S){case"hour":return function(W){return"".concat(E2(W),"T").concat(Jd(W),":00")};case"minute":return function(W){return"".concat(E2(W),"T").concat(AD(W))};case"second":return MD;default:throw new Error("Invalid valueType")}}(),R=function(){switch(S){case"hour":return 3600;case"minute":return 60;case"second":return 1;default:throw new Error("Invalid valueType")}}();function N(W){W.stopPropagation()}return $t.createElement("input",{"aria-label":t,disabled:n,hidden:!0,max:i?M(i):void 0,min:c?M(c):void 0,name:d,onChange:f,onFocus:N,required:a,step:R,style:{visibility:"hidden",position:"absolute",zIndex:"-999"},type:"datetime-local",value:v?M(v):""})}XR.propTypes={ariaLabel:xe.string,disabled:xe.bool,maxDate:bE,minDate:xE,name:xe.string,onChange:xe.func,required:xe.bool,value:xe.oneOfType([xe.string,xe.instanceOf(Date)]),valueType:sZ};var J3=new Map;function A2(e){return function(n,i){var c=n||a_();J3.has(c)||J3.set(c,new Map);var d=J3.get(c);return d.has(e)||d.set(e,new Intl.DateTimeFormat(c||void 0,e).format),d.get(e)(i)}}var Q3=new Map;function cZ(e){return function(t,n){var i=t||a_();Q3.has(i)||Q3.set(i,new Map);var c=Q3.get(i);return c.has(e)||c.set(e,new Intl.NumberFormat(i||void 0,e).format),c.get(e)(n)}}var uZ={day:"numeric",month:"numeric",year:"numeric"},dZ=A2(uZ);function AC(e,t){var n=Number(e);return t==="am"&&n===12?n=0:t==="pm"&&n<12&&(n+=12),n}function hZ(e){var t=Number(e)%12||12;return[t,Number(e)<12?"am":"pm"]}function pZ(e,t,n){return t&&t>e?t:n&&n<e?n:e}var fZ=["9","٩"],MC=new RegExp("[".concat(fZ.join(""),"]")),DC=A2({hour:"numeric"});function mZ(e){var t=DC(e,new Date(2017,0,1,9)),n=DC(e,new Date(2017,0,1,21)),i=t.split(MC),c=i[0],d=i[1],f=n.split(MC),a=f[0],v=f[1];if(v!==void 0){if(c!==a)return[c,a].map(function(S){return S.trim()});if(d!==v)return[d,v].map(function(S){return S.trim()})}return["AM","PM"]}var Xl=globalThis&&globalThis.__assign||function(){return Xl=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Xl.apply(this,arguments)},RC=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,c=t.length,d;i<c;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))},ov={},Hg=new Date;Hg.setFullYear(1,0,1);Hg.setHours(0,0,0,0);var e4=new Date(864e13),KR=["hour","minute","second"];function YR(e){return e instanceof Date?e:new Date(e)}function OC(e,t,n,i){return t===Jr(e).toString()&&n===c_(e).toString()&&i===lh(e).toString()}function gZ(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var i=YR(n);if(isNaN(i.getTime()))throw new Error("Invalid date: ".concat(e));return i}function _Z(e,t){var n=e.value,i=e.minDate,c=e.maxDate,d=gZ(n,t);return d?pZ(d,i,c):null}var yZ=function(e){return _Z(e,0)};function vZ(e){return e.dataset.input==="true"}function LC(e,t){var n=e;do n=n[t];while(n&&!vZ(n));return n}function t4(e){e&&e.focus()}function xZ(e,t,n){var i=[],c=new RegExp(Object.keys(t).map(function(f){return"".concat(f,"+")}).join("|"),"g"),d=e.match(c);return e.split(c).reduce(function(f,a,v){var S=a&&$t.createElement(dR,{key:"separator_".concat(v)},a),M=RC(RC([],f,!0),[S],!1),R=d&&d[v];if(R){var N=t[R]||t[Object.keys(t).find(function(W){return R.match(W)})];if(!N)return M;!n&&i.includes(N)?M.push(R):(M.push(N(R,v)),i.push(N))}return M},[])}var av=cZ({useGrouping:!1});function JR(e){var t=e.amPmAriaLabel,n=e.autoFocus,i=e.className,c=e.dayAriaLabel,d=e.dayPlaceholder,f=e.disabled,a=e.format,v=e.hourAriaLabel,S=e.hourPlaceholder,M=e.isWidgetOpen,R=e.locale,N=e.maxDate,W=e.maxDetail,V=W===void 0?"minute":W,H=e.minDate,le=e.minuteAriaLabel,G=e.minutePlaceholder,X=e.monthAriaLabel,Q=e.monthPlaceholder,oe=e.name,he=oe===void 0?"datetime":oe,be=e.nativeInputAriaLabel,A=e.onChange,Re=e.onInvalidChange,_e=e.required,ze=e.secondAriaLabel,ot=e.secondPlaceholder,gt=e.showLeadingZeros,Ze=e.value,We=e.yearAriaLabel,He=e.yearPlaceholder,rt=K.useState(null),tt=rt[0],Ne=rt[1],et=K.useState(null),it=et[0],Dt=et[1],Tt=K.useState(null),Rt=Tt[0],Yt=Tt[1],tn=K.useState(null),dn=tn[0],_n=tn[1],In=K.useState(null),Jt=In[0],vn=In[1],Ft=K.useState(null),nn=Ft[0],En=Ft[1],Zt=K.useState(null),Ct=Zt[0],On=Zt[1],an=K.useState(null),Zn=an[0],tr=an[1],Nn=K.useRef(null),Yn=K.useRef(null),Un=K.useRef(null),qn=K.useRef(null),bn=K.useRef(null),Ye=K.useRef(null),Xt=K.useRef(null),rn=K.useRef(null),qt=K.useRef(null),en=K.useState(M),on=en[0],yn=en[1],Dn=K.useRef();K.useEffect(function(){yn(M)},[M]),K.useEffect(function(){var Ee=yZ({value:Ze,minDate:H,maxDate:N});Ee?(Ne(hZ(Jd(Ee))[1]),Dt(Jr(Ee).toString()),Yt(c_(Ee).toString()),_n(lh(Ee).toString()),vn(Jd(Ee).toString()),En(np(Ee).toString()),On(r1(Ee).toString()),tr(YR(Ee))):(Ne(null),Dt(null),Yt(null),_n(null),vn(null),En(null),On(null),tr(null))},[Ze,H,N,on]);var Fn=V,nr=function(){var Ee=KR.indexOf(V),lt=ov[Ee]||function(){var Ot={hour:"numeric"};return Ee>=1&&(Ot.minute="numeric"),Ee>=2&&(Ot.second="numeric"),ov[Ee]=Ot,Ot}();return A2(lt)}(),Ar=function(){var Ee=2017,lt=11,Ot=11,ln=new Date(Ee,lt,Ot),hr=dZ(R,ln),Pr=["year","month","day"],Vn=["y","M","d"];function Io(fo,ea){var Bi=ov[fo]||function(){var ji,mo=(ji={},ji[fo]="numeric",ji);return ov[fo]=mo,mo}();return A2(Bi)(R,ea).match(/\d{1,}/)}var po=hr;return Pr.forEach(function(fo,ea){var Bi=Io(fo,ln);if(Bi){var ji=Bi[0],mo=Vn[ea];po=po.replace(ji,mo)}}),po=po.replace("17","y"),po}(),gr=function(){var Ee=21,lt=9,Ot=13,ln=14,hr=new Date(2017,0,1,Ee,Ot,ln);return nr(R,hr).replace(av(R,lt),"h").replace(av(R,Ee),"H").replace(av(R,Ot),"mm").replace(av(R,ln),"ss").replace(new RegExp(mZ(R).join("|")),"a")}(),vi=a||"".concat(Ar," ").concat(gr),di=function(){var Ee=Ar.match(/[^0-9a-z]/i);return Ee?Ee[0]:null}(),Te=function(){var Ee=gr.match(/[^0-9a-z]/i);return Ee?Ee[0]:null}(),re=function(){if(N&&OC(N,it,Rt,dn))return w2(N||e4)}(),ie=function(){if(H&&OC(H,it,Rt,dn))return w2(H||Hg)}();function me(Ee){if(Ee.target===Ee.currentTarget){var lt=Ee.target.children[1];t4(lt)}}function Me(Ee){switch(Dn.current=Ee.key,Ee.key){case"ArrowLeft":case"ArrowRight":case di:case Te:{Ee.preventDefault();var lt=Ee.target,Ot=Ee.key==="ArrowLeft"?"previousElementSibling":"nextElementSibling",ln=LC(lt,Ot);t4(ln);break}}}function De(Ee){var lt=Ee.key,Ot=Ee.target,ln=Dn.current===lt;if(ln){var hr=!isNaN(Number(lt));if(hr){var Pr=Ot.getAttribute("max");if(Pr){var Vn=Ot.value;if(Number(Vn)*10>Number(Pr)||Vn.length>=Pr.length){var Io="nextElementSibling",po=LC(Ot,Io);t4(po)}}}}}function qe(){if(!A)return;function Ee($i){return!!$i}var lt=[Nn.current,bn.current,Un.current,qn.current,Yn.current,Ye.current,Xt.current,rn.current,qt.current].filter(Ee),Ot=lt.slice(1),ln={};lt.forEach(function($i){ln[$i.name]=$i.type==="number"?"valueAsNumber"in $i?$i.valueAsNumber:Number($i.value):$i.value});var hr=Ot.every(function($i){return!$i.value});if(hr){A(null,!1);return}var Pr=lt.every(function($i){return $i.value}),Vn=lt.every(function($i){return $i.validity.valid});if(Pr&&Vn){var Io=Number(ln.year||new Date().getFullYear()),po=Number(ln.month||1)-1,fo=Number(ln.day||1),ea=Number(ln.hour24||ln.hour12&&ln.amPm&&AC(ln.hour12,ln.amPm)||0),Bi=Number(ln.minute||0),ji=Number(ln.second||0),mo=new Date;mo.setFullYear(Io,po,fo),mo.setHours(ea,Bi,ji,0),A(mo,!1);return}Re&&Re()}function Xe(Ee){var lt=Ee.target,Ot=lt.name,ln=lt.value;switch(Ot){case"amPm":Ne(ln);break;case"year":Dt(ln);break;case"month":Yt(ln);break;case"day":_n(ln);break;case"hour12":vn(ln?AC(ln,tt||"am").toString():"");break;case"hour24":vn(ln);break;case"minute":En(ln);break;case"second":On(ln);break}qe()}function je(Ee){var lt=Ee.target.value;if(A){var Ot=function(){if(!lt)return null;var ln=lt.split("T"),hr=ln[0],Pr=ln[1],Vn=hr.split("-"),Io=Vn[0],po=Vn[1],fo=Vn[2],ea=Number(Io),Bi=Number(po)-1||0,ji=Number(fo)||1,mo=Pr.split(":"),$i=mo[0],za=mo[1],Na=mo[2],Cl=Number($i)||0,yt=Number(za)||0,da=Number(Na)||0,Qr=new Date;return Qr.setFullYear(ea,Bi,ji),Qr.setHours(Cl,yt,da,0),Qr}();A(Ot,!1)}}var Fe={className:i,disabled:f,maxDate:N||e4,minDate:H||Hg,onChange:Xe,onKeyDown:Me,onKeyUp:De,required:!!(_e||on)},ct={maxTime:re,minTime:ie};function Pt(Ee,lt){if(Ee&&Ee.length>2)throw new Error("Unsupported token: ".concat(Ee));var Ot=Ee&&Ee.length===2;return $t.createElement(Gq,Xl({key:"day"},Fe,{ariaLabel:c,autoFocus:lt===0&&n,inputRef:bn,month:Rt,placeholder:d,showLeadingZeros:Ot||gt,value:dn,year:it}))}function Et(Ee,lt){if(Ee&&Ee.length>4)throw new Error("Unsupported token: ".concat(Ee));if(Ee.length>2)return $t.createElement(oG,Xl({key:"month"},Fe,{ariaLabel:X,autoFocus:lt===0&&n,inputRef:qn,locale:R,placeholder:Q,short:Ee.length===3,value:Rt,year:it}));var Ot=Ee&&Ee.length===2;return $t.createElement(Yq,Xl({key:"month"},Fe,{ariaLabel:X,autoFocus:lt===0&&n,inputRef:Un,placeholder:Q,showLeadingZeros:Ot||gt,value:Rt,year:it}))}function mn(Ee,lt){return $t.createElement(cG,Xl({key:"year"},Fe,{ariaLabel:We,autoFocus:lt===0&&n,inputRef:Yn,placeholder:He,value:it,valueType:"day"}))}function Rn(Ee,lt){if(Ee&&Ee.length>2)throw new Error("Unsupported token: ".concat(Ee));var Ot=Ee?Ee.length===2:!1;return $t.createElement(UG,Xl({key:"hour12"},Fe,ct,{amPm:tt,ariaLabel:v,autoFocus:lt===0&&n,inputRef:Ye,placeholder:S,showLeadingZeros:Ot,value:Jt}))}function An(Ee,lt){if(Ee&&Ee.length>2)throw new Error("Unsupported token: ".concat(Ee));var Ot=Ee?Ee.length===2:!1;return $t.createElement(qG,Xl({key:"hour24"},Fe,ct,{ariaLabel:v,autoFocus:lt===0&&n,inputRef:Xt,placeholder:S,showLeadingZeros:Ot,value:Jt}))}function Ln(Ee,lt){return/h/.test(Ee)?Rn(Ee,lt):An(Ee,lt)}function Xn(Ee,lt){if(Ee&&Ee.length>2)throw new Error("Unsupported token: ".concat(Ee));var Ot=Ee?Ee.length===2:!1;return $t.createElement(KG,Xl({key:"minute"},Fe,ct,{ariaLabel:le,autoFocus:lt===0&&n,hour:Jt,inputRef:rn,placeholder:G,showLeadingZeros:Ot,value:nn}))}function xr(Ee,lt){if(Ee&&Ee.length>2)throw new Error("Unsupported token: ".concat(Ee));var Ot=Ee?Ee.length===2:!0;return $t.createElement(eZ,Xl({key:"second"},Fe,ct,{ariaLabel:ze,autoFocus:lt===0&&n,hour:Jt,inputRef:qt,minute:nn,placeholder:ot,showLeadingZeros:Ot,value:Ct}))}function br(Ee,lt){return $t.createElement(rZ,Xl({key:"ampm"},Fe,ct,{ariaLabel:t,autoFocus:lt===0&&n,inputRef:Nn,locale:R,onChange:Xe,value:tt}))}function Mr(){var Ee={d:Pt,M:Et,y:mn,h:Ln,H:Ln,m:Xn,s:xr,a:br},lt=typeof a<"u";return xZ(vi,Ee,lt)}function Ge(){return $t.createElement(XR,{key:"datetime",ariaLabel:be,disabled:f,maxDate:N||e4,minDate:H||Hg,name:he,onChange:je,required:_e,value:Zn,valueType:Fn})}return $t.createElement("div",{className:i,onClick:me},Ge(),Mr())}var bZ=xe.oneOfType([xe.string,xe.instanceOf(Date)]);JR.propTypes={amPmAriaLabel:xe.string,autoFocus:xe.bool,className:xe.string.isRequired,dayAriaLabel:xe.string,dayPlaceholder:xe.string,disabled:xe.bool,format:xe.string,hourAriaLabel:xe.string,hourPlaceholder:xe.string,isWidgetOpen:xe.bool,locale:xe.string,maxDate:bE,maxDetail:xe.oneOf(KR),minDate:xE,minuteAriaLabel:xe.string,minutePlaceholder:xe.string,monthAriaLabel:xe.string,monthPlaceholder:xe.string,name:xe.string,nativeInputAriaLabel:xe.string,onChange:xe.func,required:xe.bool,secondAriaLabel:xe.string,secondPlaceholder:xe.string,showLeadingZeros:xe.bool,value:bZ,yearAriaLabel:xe.string,yearPlaceholder:xe.string};var Ld=globalThis&&globalThis.__assign||function(){return Ld=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},Ld.apply(this,arguments)},n4=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n},Wa="react-datetime-picker",wZ=["mousedown","focusin","touchstart"],QR=["hour","minute","second"],eO={xmlns:"http://www.w3.org/2000/svg",width:19,height:19,viewBox:"0 0 19 19",stroke:"black",strokeWidth:2},EZ=$t.createElement("svg",Ld({},eO,{className:"".concat(Wa,"__calendar-button__icon ").concat(Wa,"__button__icon")}),$t.createElement("rect",{fill:"none",height:"15",width:"15",x:"2",y:"2"}),$t.createElement("line",{x1:"6",x2:"6",y1:"0",y2:"4"}),$t.createElement("line",{x1:"13",x2:"13",y1:"0",y2:"4"})),TZ=$t.createElement("svg",Ld({},eO,{className:"".concat(Wa,"__clear-button__icon ").concat(Wa,"__button__icon")}),$t.createElement("line",{x1:"4",x2:"15",y1:"4",y2:"15"}),$t.createElement("line",{x1:"15",x2:"4",y1:"4",y2:"15"}));function tO(e){var t=e.amPmAriaLabel,n=e.autoFocus,i=e.calendarAriaLabel,c=e.calendarIcon,d=c===void 0?EZ:c,f=e.className,a=e.clearAriaLabel,v=e.clearIcon,S=v===void 0?TZ:v,M=e.closeWidgets,R=M===void 0?!0:M,N=e["data-testid"],W=e.dayAriaLabel,V=e.dayPlaceholder,H=e.disableCalendar,le=e.disableClock,G=e.disabled,X=e.format,Q=e.hourAriaLabel,oe=e.hourPlaceholder,he=e.id,be=e.isCalendarOpen,A=be===void 0?null:be,Re=e.isClockOpen,_e=Re===void 0?null:Re,ze=e.locale,ot=e.maxDate,gt=e.maxDetail,Ze=gt===void 0?"minute":gt,We=e.minDate,He=e.minuteAriaLabel,rt=e.minutePlaceholder,tt=e.monthAriaLabel,Ne=e.monthPlaceholder,et=e.name,it=et===void 0?"datetime":et,Dt=e.nativeInputAriaLabel,Tt=e.onCalendarClose,Rt=e.onCalendarOpen,Yt=e.onChange,tn=e.onClockClose,dn=e.onClockOpen,_n=e.onFocus,In=e.onInvalidChange,Jt=e.openWidgetsOnFocus,vn=Jt===void 0?!0:Jt,Ft=e.required,nn=e.secondAriaLabel,En=e.secondPlaceholder,Zt=e.shouldCloseWidgets,Ct=e.shouldOpenWidgets,On=e.showLeadingZeros,an=e.value,Zn=e.yearAriaLabel,tr=e.yearPlaceholder,Nn=n4(e,["amPmAriaLabel","autoFocus","calendarAriaLabel","calendarIcon","className","clearAriaLabel","clearIcon","closeWidgets","data-testid","dayAriaLabel","dayPlaceholder","disableCalendar","disableClock","disabled","format","hourAriaLabel","hourPlaceholder","id","isCalendarOpen","isClockOpen","locale","maxDate","maxDetail","minDate","minuteAriaLabel","minutePlaceholder","monthAriaLabel","monthPlaceholder","name","nativeInputAriaLabel","onCalendarClose","onCalendarOpen","onChange","onClockClose","onClockOpen","onFocus","onInvalidChange","openWidgetsOnFocus","required","secondAriaLabel","secondPlaceholder","shouldCloseWidgets","shouldOpenWidgets","showLeadingZeros","value","yearAriaLabel","yearPlaceholder"]),Yn=K.useState(A),Un=Yn[0],qn=Yn[1],bn=K.useState(_e),Ye=bn[0],Xt=bn[1],rn=K.useRef(null),qt=K.useRef(null),en=K.useRef(null);K.useEffect(function(){qn(A)},[A]),K.useEffect(function(){Xt(_e)},[_e]);function on(Fe){var ct=Fe.reason;Ct&&!Ct({reason:ct,widget:"calendar"})||(Xt(Ye&&!1),qn(!0),Rt&&Rt())}var yn=K.useCallback(function(Fe){var ct=Fe.reason;Zt&&!Zt({reason:ct,widget:"calendar"})||(qn(!1),Tt&&Tt())},[Tt,Zt]);function Dn(){Un?yn({reason:"buttonClick"}):on({reason:"buttonClick"})}function Fn(Fe){var ct=Fe.reason;Ct&&!Ct({reason:ct,widget:"clock"})||(qn(Un&&!1),Xt(!0),dn&&dn())}var nr=K.useCallback(function(Fe){var ct=Fe.reason;Zt&&!Zt({reason:ct,widget:"clock"})||(Xt(!1),tn&&tn())},[tn,Zt]),Ar=K.useCallback(function(Fe){var ct=Fe.reason;yn({reason:ct}),nr({reason:ct})},[yn,nr]);function gr(Fe,ct){ct===void 0&&(ct=R),ct&&Ar({reason:"select"}),Yt&&Yt(Fe)}function vi(Fe,ct){var Pt=(Array.isArray(Fe)?Fe:[Fe])[0],Et=(Array.isArray(an)?an:[an])[0];if(Et&&Pt){var mn=new Date(Et),Rn=new Date(Pt);Rn.setHours(mn.getHours(),mn.getMinutes(),mn.getSeconds(),mn.getMilliseconds()),gr(Rn,ct)}else gr(Pt,ct)}function di(Fe){if(_n&&_n(Fe),!(G||!vn||Fe.target.dataset.select==="true"))switch(Fe.target.name){case"day":case"month":case"year":{if(Un)return;on({reason:"focus"});break}case"hour12":case"hour24":case"minute":case"second":{if(Ye)return;Fn({reason:"focus"});break}}}var Te=K.useCallback(function(Fe){Fe.key==="Escape"&&Ar({reason:"escape"})},[Ar]);function re(){gr(null)}function ie(Fe){Fe.stopPropagation()}var me=K.useCallback(function(Fe){var ct=rn.current,Pt=qt.current,Et=en.current,mn="composedPath"in Fe?Fe.composedPath()[0]:Fe.target;mn&&ct&&!ct.contains(mn)&&(!Pt||!Pt.contains(mn))&&(!Et||!Et.contains(mn))&&Ar({reason:"outsideAction"})},[qt,en,Ar,rn]),Me=K.useCallback(function(Fe){Fe===void 0&&(Fe=Un||Ye),wZ.forEach(function(ct){Fe?document.addEventListener(ct,me):document.removeEventListener(ct,me)}),Fe?document.addEventListener("keydown",Te):document.removeEventListener("keydown",Te)},[Un,Ye,me,Te]);K.useEffect(function(){return Me(),function(){Me(!1)}},[Me]);function De(){var Fe=(Array.isArray(an)?an:[an])[0],ct={amPmAriaLabel:t,dayAriaLabel:W,hourAriaLabel:Q,minuteAriaLabel:He,monthAriaLabel:tt,nativeInputAriaLabel:Dt,secondAriaLabel:nn,yearAriaLabel:Zn},Pt={dayPlaceholder:V,hourPlaceholder:oe,minutePlaceholder:rt,monthPlaceholder:Ne,secondPlaceholder:En,yearPlaceholder:tr};return $t.createElement("div",{className:"".concat(Wa,"__wrapper")},$t.createElement(JR,Ld({},ct,Pt,{autoFocus:n,className:"".concat(Wa,"__inputGroup"),disabled:G,format:X,isWidgetOpen:Un||Ye,locale:ze,maxDate:ot,maxDetail:Ze,minDate:We,name:it,onChange:gr,onInvalidChange:In,required:Ft,showLeadingZeros:On,value:Fe})),S!==null&&$t.createElement("button",{"aria-label":a,className:"".concat(Wa,"__clear-button ").concat(Wa,"__button"),disabled:G,onClick:re,onFocus:ie,type:"button"},typeof S=="function"?$t.createElement(S):S),d!==null&&!H&&$t.createElement("button",{"aria-label":i,className:"".concat(Wa,"__calendar-button ").concat(Wa,"__button"),disabled:G,onClick:Dn,onFocus:ie,type:"button"},typeof d=="function"?$t.createElement(d):d))}function qe(){if(Un===null||H)return null;var Fe=e.calendarClassName;e.className,e.maxDetail,e.onChange;var ct=e.portalContainer,Pt=e.value,Et=n4(e,["calendarClassName","className","maxDetail","onChange","portalContainer","value"]),mn="".concat(Wa,"__calendar"),Rn=M3(mn,"".concat(mn,"--").concat(Un?"open":"closed")),An=$t.createElement(dq,Ld({className:Fe,onChange:function(Ln){return vi(Ln)},value:Pt},Et));return ct?mp.createPortal($t.createElement("div",{ref:qt,className:Rn},An),ct):$t.createElement(cC,null,$t.createElement("div",{ref:function(Ln){Ln&&!Un&&Ln.removeAttribute("style")},className:Rn},An))}function Xe(){if(Ye===null||le)return null;var Fe=e.clockClassName;e.className;var ct=e.maxDetail,Pt=ct===void 0?"minute":ct;e.onChange;var Et=e.portalContainer,mn=e.value,Rn=n4(e,["clockClassName","className","maxDetail","onChange","portalContainer","value"]),An="".concat(Wa,"__clock"),Ln=M3(An,"".concat(An,"--").concat(Ye?"open":"closed")),Xn=(Array.isArray(mn)?mn:[mn])[0],xr=QR.indexOf(Pt),br=$t.createElement(lR,Ld({className:Fe,renderMinuteHand:xr>0,renderSecondHand:xr>1,value:Xn},Rn));return Et?mp.createPortal($t.createElement("div",{ref:en,className:Ln},br),Et):$t.createElement(cC,null,$t.createElement("div",{ref:function(Mr){Mr&&!Ye&&Mr.removeAttribute("style")},className:Ln},br))}var je=K.useMemo(function(){return oW(Nn)},[Nn]);return $t.createElement("div",Ld({className:M3(Wa,"".concat(Wa,"--").concat(Un||Ye?"open":"closed"),"".concat(Wa,"--").concat(G?"disabled":"enabled"),f),"data-testid":N,id:he},je,{onFocus:di,ref:rn}),De(),qe(),Xe())}var zC=xe.oneOfType([xe.string,xe.instanceOf(Date)]),SZ=xe.oneOfType([zC,lZ(zC)]);tO.propTypes={amPmAriaLabel:xe.string,autoFocus:xe.bool,calendarAriaLabel:xe.string,calendarClassName:xe.oneOfType([xe.string,xe.arrayOf(xe.string)]),calendarIcon:xe.oneOfType([xe.node,xe.func]),className:xe.oneOfType([xe.string,xe.arrayOf(xe.string)]),clearAriaLabel:xe.string,clearIcon:xe.oneOfType([xe.node,xe.func]),clockClassName:xe.oneOfType([xe.string,xe.arrayOf(xe.string)]),closeWidgets:xe.bool,"data-testid":xe.string,dayAriaLabel:xe.string,dayPlaceholder:xe.string,disableCalendar:xe.bool,disableClock:xe.bool,disabled:xe.bool,format:xe.string,hourAriaLabel:xe.string,hourPlaceholder:xe.string,id:xe.string,isCalendarOpen:xe.bool,isClockOpen:xe.bool,locale:xe.string,maxDate:bE,maxDetail:xe.oneOf(QR),minDate:xE,minuteAriaLabel:xe.string,minutePlaceholder:xe.string,monthAriaLabel:xe.string,monthPlaceholder:xe.string,name:xe.string,nativeInputAriaLabel:xe.string,onCalendarClose:xe.func,onCalendarOpen:xe.func,onChange:xe.func,onClockClose:xe.func,onClockOpen:xe.func,onFocus:xe.func,openWidgetsOnFocus:xe.bool,portalContainer:xe.object,required:xe.bool,secondAriaLabel:xe.string,secondPlaceholder:xe.string,showLeadingZeros:xe.bool,value:SZ,yearAriaLabel:xe.string,yearPlaceholder:xe.string};function nO(e,t){return function(){return e.apply(t,arguments)}}const{toString:kZ}=Object.prototype,{getPrototypeOf:wE}=Object,Mx=(e=>t=>{const n=kZ.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qc=e=>(e=e.toLowerCase(),t=>Mx(t)===e),Dx=e=>t=>typeof t===e,{isArray:K1}=Array,z0=Dx("undefined");function CZ(e){return e!==null&&!z0(e)&&e.constructor!==null&&!z0(e.constructor)&&yl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const rO=Qc("ArrayBuffer");function PZ(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&rO(e.buffer),t}const IZ=Dx("string"),yl=Dx("function"),iO=Dx("number"),Rx=e=>e!==null&&typeof e=="object",AZ=e=>e===!0||e===!1,Rv=e=>{if(Mx(e)!=="object")return!1;const t=wE(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},MZ=Qc("Date"),DZ=Qc("File"),RZ=Qc("Blob"),OZ=Qc("FileList"),LZ=e=>Rx(e)&&yl(e.pipe),zZ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||yl(e.append)&&((t=Mx(e))==="formdata"||t==="object"&&yl(e.toString)&&e.toString()==="[object FormData]"))},NZ=Qc("URLSearchParams"),FZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function g_(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,c;if(typeof e!="object"&&(e=[e]),K1(e))for(i=0,c=e.length;i<c;i++)t.call(null,e[i],i,e);else{const d=n?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let a;for(i=0;i<f;i++)a=d[i],t.call(null,e[a],a,e)}}function oO(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,c;for(;i-- >0;)if(c=n[i],t===c.toLowerCase())return c;return null}const aO=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),sO=e=>!z0(e)&&e!==aO;function Q5(){const{caseless:e}=sO(this)&&this||{},t={},n=(i,c)=>{const d=e&&oO(t,c)||c;Rv(t[d])&&Rv(i)?t[d]=Q5(t[d],i):Rv(i)?t[d]=Q5({},i):K1(i)?t[d]=i.slice():t[d]=i};for(let i=0,c=arguments.length;i<c;i++)arguments[i]&&g_(arguments[i],n);return t}const BZ=(e,t,n,{allOwnKeys:i}={})=>(g_(t,(c,d)=>{n&&yl(c)?e[d]=nO(c,n):e[d]=c},{allOwnKeys:i}),e),jZ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$Z=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},UZ=(e,t,n,i)=>{let c,d,f;const a={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)f=c[d],(!i||i(f,e,t))&&!a[f]&&(t[f]=e[f],a[f]=!0);e=n!==!1&&wE(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},VZ=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},WZ=e=>{if(!e)return null;if(K1(e))return e;let t=e.length;if(!iO(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},HZ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&wE(Uint8Array)),qZ=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let c;for(;(c=i.next())&&!c.done;){const d=c.value;t.call(e,d[0],d[1])}},GZ=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},ZZ=Qc("HTMLFormElement"),XZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,c){return i.toUpperCase()+c}),NC=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),KZ=Qc("RegExp"),lO=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};g_(n,(c,d)=>{t(c,d,e)!==!1&&(i[d]=c)}),Object.defineProperties(e,i)},YZ=e=>{lO(e,(t,n)=>{if(yl(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(yl(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},JZ=(e,t)=>{const n={},i=c=>{c.forEach(d=>{n[d]=!0})};return K1(e)?i(e):i(String(e).split(t)),n},QZ=()=>{},eX=(e,t)=>(e=+e,Number.isFinite(e)?e:t),r4="abcdefghijklmnopqrstuvwxyz",FC="0123456789",cO={DIGIT:FC,ALPHA:r4,ALPHA_DIGIT:r4+r4.toUpperCase()+FC},tX=(e=16,t=cO.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function nX(e){return!!(e&&yl(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const rX=e=>{const t=new Array(10),n=(i,c)=>{if(Rx(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[c]=i;const d=K1(i)?[]:{};return g_(i,(f,a)=>{const v=n(f,c+1);!z0(v)&&(d[a]=v)}),t[c]=void 0,d}}return i};return n(e,0)},iX=Qc("AsyncFunction"),oX=e=>e&&(Rx(e)||yl(e))&&yl(e.then)&&yl(e.catch),Bt={isArray:K1,isArrayBuffer:rO,isBuffer:CZ,isFormData:zZ,isArrayBufferView:PZ,isString:IZ,isNumber:iO,isBoolean:AZ,isObject:Rx,isPlainObject:Rv,isUndefined:z0,isDate:MZ,isFile:DZ,isBlob:RZ,isRegExp:KZ,isFunction:yl,isStream:LZ,isURLSearchParams:NZ,isTypedArray:HZ,isFileList:OZ,forEach:g_,merge:Q5,extend:BZ,trim:FZ,stripBOM:jZ,inherits:$Z,toFlatObject:UZ,kindOf:Mx,kindOfTest:Qc,endsWith:VZ,toArray:WZ,forEachEntry:qZ,matchAll:GZ,isHTMLForm:ZZ,hasOwnProperty:NC,hasOwnProp:NC,reduceDescriptors:lO,freezeMethods:YZ,toObjectSet:JZ,toCamelCase:XZ,noop:QZ,toFiniteNumber:eX,findKey:oO,global:aO,isContextDefined:sO,ALPHABET:cO,generateString:tX,isSpecCompliantForm:nX,toJSONObject:rX,isAsyncFn:iX,isThenable:oX};function $r(e,t,n,i,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),c&&(this.response=c)}Bt.inherits($r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Bt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const uO=$r.prototype,dO={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{dO[e]={value:e}});Object.defineProperties($r,dO);Object.defineProperty(uO,"isAxiosError",{value:!0});$r.from=(e,t,n,i,c,d)=>{const f=Object.create(uO);return Bt.toFlatObject(e,f,function(v){return v!==Error.prototype},a=>a!=="isAxiosError"),$r.call(f,e.message,t,n,i,c),f.cause=e,f.name=e.name,d&&Object.assign(f,d),f};const aX=null;function e6(e){return Bt.isPlainObject(e)||Bt.isArray(e)}function hO(e){return Bt.endsWith(e,"[]")?e.slice(0,-2):e}function BC(e,t,n){return e?e.concat(t).map(function(c,d){return c=hO(c),!n&&d?"["+c+"]":c}).join(n?".":""):t}function sX(e){return Bt.isArray(e)&&!e.some(e6)}const lX=Bt.toFlatObject(Bt,{},null,function(t){return/^is[A-Z]/.test(t)});function Ox(e,t,n){if(!Bt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Bt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(H,le){return!Bt.isUndefined(le[H])});const i=n.metaTokens,c=n.visitor||M,d=n.dots,f=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&Bt.isSpecCompliantForm(t);if(!Bt.isFunction(c))throw new TypeError("visitor must be a function");function S(V){if(V===null)return"";if(Bt.isDate(V))return V.toISOString();if(!v&&Bt.isBlob(V))throw new $r("Blob is not supported. Use a Buffer instead.");return Bt.isArrayBuffer(V)||Bt.isTypedArray(V)?v&&typeof Blob=="function"?new Blob([V]):Buffer.from(V):V}function M(V,H,le){let G=V;if(V&&!le&&typeof V=="object"){if(Bt.endsWith(H,"{}"))H=i?H:H.slice(0,-2),V=JSON.stringify(V);else if(Bt.isArray(V)&&sX(V)||(Bt.isFileList(V)||Bt.endsWith(H,"[]"))&&(G=Bt.toArray(V)))return H=hO(H),G.forEach(function(Q,oe){!(Bt.isUndefined(Q)||Q===null)&&t.append(f===!0?BC([H],oe,d):f===null?H:H+"[]",S(Q))}),!1}return e6(V)?!0:(t.append(BC(le,H,d),S(V)),!1)}const R=[],N=Object.assign(lX,{defaultVisitor:M,convertValue:S,isVisitable:e6});function W(V,H){if(!Bt.isUndefined(V)){if(R.indexOf(V)!==-1)throw Error("Circular reference detected in "+H.join("."));R.push(V),Bt.forEach(V,function(G,X){(!(Bt.isUndefined(G)||G===null)&&c.call(t,G,Bt.isString(X)?X.trim():X,H,N))===!0&&W(G,H?H.concat(X):[X])}),R.pop()}}if(!Bt.isObject(e))throw new TypeError("data must be an object");return W(e),t}function jC(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function EE(e,t){this._pairs=[],e&&Ox(e,this,t)}const pO=EE.prototype;pO.append=function(t,n){this._pairs.push([t,n])};pO.toString=function(t){const n=t?function(i){return t.call(this,i,jC)}:jC;return this._pairs.map(function(c){return n(c[0])+"="+n(c[1])},"").join("&")};function cX(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fO(e,t,n){if(!t)return e;const i=n&&n.encode||cX,c=n&&n.serialize;let d;if(c?d=c(t,n):d=Bt.isURLSearchParams(t)?t.toString():new EE(t,n).toString(i),d){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class uX{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Bt.forEach(this.handlers,function(i){i!==null&&t(i)})}}const $C=uX,mO={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dX=typeof URLSearchParams<"u"?URLSearchParams:EE,hX=typeof FormData<"u"?FormData:null,pX=typeof Blob<"u"?Blob:null,fX=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),mX=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),jc={isBrowser:!0,classes:{URLSearchParams:dX,FormData:hX,Blob:pX},isStandardBrowserEnv:fX,isStandardBrowserWebWorkerEnv:mX,protocols:["http","https","file","blob","url","data"]};function gX(e,t){return Ox(e,new jc.classes.URLSearchParams,Object.assign({visitor:function(n,i,c,d){return jc.isNode&&Bt.isBuffer(n)?(this.append(i,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},t))}function _X(e){return Bt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function yX(e){const t={},n=Object.keys(e);let i;const c=n.length;let d;for(i=0;i<c;i++)d=n[i],t[d]=e[d];return t}function gO(e){function t(n,i,c,d){let f=n[d++];const a=Number.isFinite(+f),v=d>=n.length;return f=!f&&Bt.isArray(c)?c.length:f,v?(Bt.hasOwnProp(c,f)?c[f]=[c[f],i]:c[f]=i,!a):((!c[f]||!Bt.isObject(c[f]))&&(c[f]=[]),t(n,i,c[f],d)&&Bt.isArray(c[f])&&(c[f]=yX(c[f])),!a)}if(Bt.isFormData(e)&&Bt.isFunction(e.entries)){const n={};return Bt.forEachEntry(e,(i,c)=>{t(_X(i),c,n,0)}),n}return null}const vX={"Content-Type":void 0};function xX(e,t,n){if(Bt.isString(e))try{return(t||JSON.parse)(e),Bt.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Lx={transitional:mO,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",c=i.indexOf("application/json")>-1,d=Bt.isObject(t);if(d&&Bt.isHTMLForm(t)&&(t=new FormData(t)),Bt.isFormData(t))return c&&c?JSON.stringify(gO(t)):t;if(Bt.isArrayBuffer(t)||Bt.isBuffer(t)||Bt.isStream(t)||Bt.isFile(t)||Bt.isBlob(t))return t;if(Bt.isArrayBufferView(t))return t.buffer;if(Bt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return gX(t,this.formSerializer).toString();if((a=Bt.isFileList(t))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Ox(a?{"files[]":t}:t,v&&new v,this.formSerializer)}}return d||c?(n.setContentType("application/json",!1),xX(t)):t}],transformResponse:[function(t){const n=this.transitional||Lx.transitional,i=n&&n.forcedJSONParsing,c=this.responseType==="json";if(t&&Bt.isString(t)&&(i&&!this.responseType||c)){const f=!(n&&n.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(a){if(f)throw a.name==="SyntaxError"?$r.from(a,$r.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jc.classes.FormData,Blob:jc.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Bt.forEach(["delete","get","head"],function(t){Lx.headers[t]={}});Bt.forEach(["post","put","patch"],function(t){Lx.headers[t]=Bt.merge(vX)});const TE=Lx,bX=Bt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wX=e=>{const t={};let n,i,c;return e&&e.split(`
`).forEach(function(f){c=f.indexOf(":"),n=f.substring(0,c).trim().toLowerCase(),i=f.substring(c+1).trim(),!(!n||t[n]&&bX[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},UC=Symbol("internals");function _g(e){return e&&String(e).trim().toLowerCase()}function Ov(e){return e===!1||e==null?e:Bt.isArray(e)?e.map(Ov):String(e)}function EX(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const TX=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function i4(e,t,n,i,c){if(Bt.isFunction(i))return i.call(this,t,n);if(c&&(t=n),!!Bt.isString(t)){if(Bt.isString(i))return t.indexOf(i)!==-1;if(Bt.isRegExp(i))return i.test(t)}}function SX(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function kX(e,t){const n=Bt.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(c,d,f){return this[i].call(this,t,c,d,f)},configurable:!0})})}class zx{constructor(t){t&&this.set(t)}set(t,n,i){const c=this;function d(a,v,S){const M=_g(v);if(!M)throw new Error("header name must be a non-empty string");const R=Bt.findKey(c,M);(!R||c[R]===void 0||S===!0||S===void 0&&c[R]!==!1)&&(c[R||v]=Ov(a))}const f=(a,v)=>Bt.forEach(a,(S,M)=>d(S,M,v));return Bt.isPlainObject(t)||t instanceof this.constructor?f(t,n):Bt.isString(t)&&(t=t.trim())&&!TX(t)?f(wX(t),n):t!=null&&d(n,t,i),this}get(t,n){if(t=_g(t),t){const i=Bt.findKey(this,t);if(i){const c=this[i];if(!n)return c;if(n===!0)return EX(c);if(Bt.isFunction(n))return n.call(this,c,i);if(Bt.isRegExp(n))return n.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=_g(t),t){const i=Bt.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||i4(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let c=!1;function d(f){if(f=_g(f),f){const a=Bt.findKey(i,f);a&&(!n||i4(i,i[a],a,n))&&(delete i[a],c=!0)}}return Bt.isArray(t)?t.forEach(d):d(t),c}clear(t){const n=Object.keys(this);let i=n.length,c=!1;for(;i--;){const d=n[i];(!t||i4(this,this[d],d,t,!0))&&(delete this[d],c=!0)}return c}normalize(t){const n=this,i={};return Bt.forEach(this,(c,d)=>{const f=Bt.findKey(i,d);if(f){n[f]=Ov(c),delete n[d];return}const a=t?SX(d):String(d).trim();a!==d&&delete n[d],n[a]=Ov(c),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Bt.forEach(this,(i,c)=>{i!=null&&i!==!1&&(n[c]=t&&Bt.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(c=>i.set(c)),i}static accessor(t){const i=(this[UC]=this[UC]={accessors:{}}).accessors,c=this.prototype;function d(f){const a=_g(f);i[a]||(kX(c,f),i[a]=!0)}return Bt.isArray(t)?t.forEach(d):d(t),this}}zx.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Bt.freezeMethods(zx.prototype);Bt.freezeMethods(zx);const Ou=zx;function o4(e,t){const n=this||TE,i=t||n,c=Ou.from(i.headers);let d=i.data;return Bt.forEach(e,function(a){d=a.call(n,d,c.normalize(),t?t.status:void 0)}),c.normalize(),d}function _O(e){return!!(e&&e.__CANCEL__)}function __(e,t,n){$r.call(this,e??"canceled",$r.ERR_CANCELED,t,n),this.name="CanceledError"}Bt.inherits(__,$r,{__CANCEL__:!0});function CX(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new $r("Request failed with status code "+n.status,[$r.ERR_BAD_REQUEST,$r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const PX=jc.isStandardBrowserEnv?function(){return{write:function(n,i,c,d,f,a){const v=[];v.push(n+"="+encodeURIComponent(i)),Bt.isNumber(c)&&v.push("expires="+new Date(c).toGMTString()),Bt.isString(d)&&v.push("path="+d),Bt.isString(f)&&v.push("domain="+f),a===!0&&v.push("secure"),document.cookie=v.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function IX(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function AX(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function yO(e,t){return e&&!IX(t)?AX(e,t):t}const MX=jc.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function c(d){let f=d;return t&&(n.setAttribute("href",f),f=n.href),n.setAttribute("href",f),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=c(window.location.href),function(f){const a=Bt.isString(f)?c(f):f;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function DX(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function RX(e,t){e=e||10;const n=new Array(e),i=new Array(e);let c=0,d=0,f;return t=t!==void 0?t:1e3,function(v){const S=Date.now(),M=i[d];f||(f=S),n[c]=v,i[c]=S;let R=d,N=0;for(;R!==c;)N+=n[R++],R=R%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),S-f<t)return;const W=M&&S-M;return W?Math.round(N*1e3/W):void 0}}function VC(e,t){let n=0;const i=RX(50,250);return c=>{const d=c.loaded,f=c.lengthComputable?c.total:void 0,a=d-n,v=i(a),S=d<=f;n=d;const M={loaded:d,total:f,progress:f?d/f:void 0,bytes:a,rate:v||void 0,estimated:v&&f&&S?(f-d)/v:void 0,event:c};M[t?"download":"upload"]=!0,e(M)}}const OX=typeof XMLHttpRequest<"u",LX=OX&&function(e){return new Promise(function(n,i){let c=e.data;const d=Ou.from(e.headers).normalize(),f=e.responseType;let a;function v(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}Bt.isFormData(c)&&(jc.isStandardBrowserEnv||jc.isStandardBrowserWebWorkerEnv?d.setContentType(!1):d.setContentType("multipart/form-data;",!1));let S=new XMLHttpRequest;if(e.auth){const W=e.auth.username||"",V=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.set("Authorization","Basic "+btoa(W+":"+V))}const M=yO(e.baseURL,e.url);S.open(e.method.toUpperCase(),fO(M,e.params,e.paramsSerializer),!0),S.timeout=e.timeout;function R(){if(!S)return;const W=Ou.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),H={data:!f||f==="text"||f==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:W,config:e,request:S};CX(function(G){n(G),v()},function(G){i(G),v()},H),S=null}if("onloadend"in S?S.onloadend=R:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(R)},S.onabort=function(){S&&(i(new $r("Request aborted",$r.ECONNABORTED,e,S)),S=null)},S.onerror=function(){i(new $r("Network Error",$r.ERR_NETWORK,e,S)),S=null},S.ontimeout=function(){let V=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const H=e.transitional||mO;e.timeoutErrorMessage&&(V=e.timeoutErrorMessage),i(new $r(V,H.clarifyTimeoutError?$r.ETIMEDOUT:$r.ECONNABORTED,e,S)),S=null},jc.isStandardBrowserEnv){const W=(e.withCredentials||MX(M))&&e.xsrfCookieName&&PX.read(e.xsrfCookieName);W&&d.set(e.xsrfHeaderName,W)}c===void 0&&d.setContentType(null),"setRequestHeader"in S&&Bt.forEach(d.toJSON(),function(V,H){S.setRequestHeader(H,V)}),Bt.isUndefined(e.withCredentials)||(S.withCredentials=!!e.withCredentials),f&&f!=="json"&&(S.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&S.addEventListener("progress",VC(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",VC(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=W=>{S&&(i(!W||W.type?new __(null,e,S):W),S.abort(),S=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const N=DX(M);if(N&&jc.protocols.indexOf(N)===-1){i(new $r("Unsupported protocol "+N+":",$r.ERR_BAD_REQUEST,e));return}S.send(c||null)})},Lv={http:aX,xhr:LX};Bt.forEach(Lv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const zX={getAdapter:e=>{e=Bt.isArray(e)?e:[e];const{length:t}=e;let n,i;for(let c=0;c<t&&(n=e[c],!(i=Bt.isString(n)?Lv[n.toLowerCase()]:n));c++);if(!i)throw i===!1?new $r(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Bt.hasOwnProp(Lv,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!Bt.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:Lv};function a4(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new __(null,e)}function WC(e){return a4(e),e.headers=Ou.from(e.headers),e.data=o4.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),zX.getAdapter(e.adapter||TE.adapter)(e).then(function(i){return a4(e),i.data=o4.call(e,e.transformResponse,i),i.headers=Ou.from(i.headers),i},function(i){return _O(i)||(a4(e),i&&i.response&&(i.response.data=o4.call(e,e.transformResponse,i.response),i.response.headers=Ou.from(i.response.headers))),Promise.reject(i)})}const HC=e=>e instanceof Ou?e.toJSON():e;function x1(e,t){t=t||{};const n={};function i(S,M,R){return Bt.isPlainObject(S)&&Bt.isPlainObject(M)?Bt.merge.call({caseless:R},S,M):Bt.isPlainObject(M)?Bt.merge({},M):Bt.isArray(M)?M.slice():M}function c(S,M,R){if(Bt.isUndefined(M)){if(!Bt.isUndefined(S))return i(void 0,S,R)}else return i(S,M,R)}function d(S,M){if(!Bt.isUndefined(M))return i(void 0,M)}function f(S,M){if(Bt.isUndefined(M)){if(!Bt.isUndefined(S))return i(void 0,S)}else return i(void 0,M)}function a(S,M,R){if(R in t)return i(S,M);if(R in e)return i(void 0,S)}const v={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:a,headers:(S,M)=>c(HC(S),HC(M),!0)};return Bt.forEach(Object.keys(Object.assign({},e,t)),function(M){const R=v[M]||c,N=R(e[M],t[M],M);Bt.isUndefined(N)&&R!==a||(n[M]=N)}),n}const vO="1.4.0",SE={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{SE[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const qC={};SE.transitional=function(t,n,i){function c(d,f){return"[Axios v"+vO+"] Transitional option '"+d+"'"+f+(i?". "+i:"")}return(d,f,a)=>{if(t===!1)throw new $r(c(f," has been removed"+(n?" in "+n:"")),$r.ERR_DEPRECATED);return n&&!qC[f]&&(qC[f]=!0,console.warn(c(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,f,a):!0}};function NX(e,t,n){if(typeof e!="object")throw new $r("options must be an object",$r.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let c=i.length;for(;c-- >0;){const d=i[c],f=t[d];if(f){const a=e[d],v=a===void 0||f(a,d,e);if(v!==!0)throw new $r("option "+d+" must be "+v,$r.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new $r("Unknown option "+d,$r.ERR_BAD_OPTION)}}const t6={assertOptions:NX,validators:SE},xd=t6.validators;class M2{constructor(t){this.defaults=t,this.interceptors={request:new $C,response:new $C}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=x1(this.defaults,n);const{transitional:i,paramsSerializer:c,headers:d}=n;i!==void 0&&t6.assertOptions(i,{silentJSONParsing:xd.transitional(xd.boolean),forcedJSONParsing:xd.transitional(xd.boolean),clarifyTimeoutError:xd.transitional(xd.boolean)},!1),c!=null&&(Bt.isFunction(c)?n.paramsSerializer={serialize:c}:t6.assertOptions(c,{encode:xd.function,serialize:xd.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f;f=d&&Bt.merge(d.common,d[n.method]),f&&Bt.forEach(["delete","get","head","post","put","patch","common"],V=>{delete d[V]}),n.headers=Ou.concat(f,d);const a=[];let v=!0;this.interceptors.request.forEach(function(H){typeof H.runWhen=="function"&&H.runWhen(n)===!1||(v=v&&H.synchronous,a.unshift(H.fulfilled,H.rejected))});const S=[];this.interceptors.response.forEach(function(H){S.push(H.fulfilled,H.rejected)});let M,R=0,N;if(!v){const V=[WC.bind(this),void 0];for(V.unshift.apply(V,a),V.push.apply(V,S),N=V.length,M=Promise.resolve(n);R<N;)M=M.then(V[R++],V[R++]);return M}N=a.length;let W=n;for(R=0;R<N;){const V=a[R++],H=a[R++];try{W=V(W)}catch(le){H.call(this,le);break}}try{M=WC.call(this,W)}catch(V){return Promise.reject(V)}for(R=0,N=S.length;R<N;)M=M.then(S[R++],S[R++]);return M}getUri(t){t=x1(this.defaults,t);const n=yO(t.baseURL,t.url);return fO(n,t.params,t.paramsSerializer)}}Bt.forEach(["delete","get","head","options"],function(t){M2.prototype[t]=function(n,i){return this.request(x1(i||{},{method:t,url:n,data:(i||{}).data}))}});Bt.forEach(["post","put","patch"],function(t){function n(i){return function(d,f,a){return this.request(x1(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}M2.prototype[t]=n(),M2.prototype[t+"Form"]=n(!0)});const zv=M2;class kE{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const i=this;this.promise.then(c=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](c);i._listeners=null}),this.promise.then=c=>{let d;const f=new Promise(a=>{i.subscribe(a),d=a}).then(c);return f.cancel=function(){i.unsubscribe(d)},f},t(function(d,f,a){i.reason||(i.reason=new __(d,f,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new kE(function(c){t=c}),cancel:t}}}const FX=kE;function BX(e){return function(n){return e.apply(null,n)}}function jX(e){return Bt.isObject(e)&&e.isAxiosError===!0}const n6={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(n6).forEach(([e,t])=>{n6[t]=e});const $X=n6;function xO(e){const t=new zv(e),n=nO(zv.prototype.request,t);return Bt.extend(n,zv.prototype,t,{allOwnKeys:!0}),Bt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(c){return xO(x1(e,c))},n}const Bo=xO(TE);Bo.Axios=zv;Bo.CanceledError=__;Bo.CancelToken=FX;Bo.isCancel=_O;Bo.VERSION=vO;Bo.toFormData=Ox;Bo.AxiosError=$r;Bo.Cancel=Bo.CanceledError;Bo.all=function(t){return Promise.all(t)};Bo.spread=BX;Bo.isAxiosError=jX;Bo.mergeConfig=x1;Bo.AxiosHeaders=Ou;Bo.formToJSON=e=>gO(Bt.isHTMLForm(e)?new FormData(e):e);Bo.HttpStatusCode=$X;Bo.default=Bo;const CE=Bo;function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pe.apply(this,arguments)}function Xh(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function bO(e){if(!Xh(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=bO(e[n])}),t}function hs(e,t,n={clone:!0}){const i=n.clone?Pe({},e):e;return Xh(e)&&Xh(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(Xh(t[c])&&c in e&&Xh(e[c])?i[c]=hs(e[c],t[c],n):n.clone?i[c]=Xh(t[c])?bO(t[c]):t[c]:i[c]=t[c])}),i}function Qd(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Pn(e){if(typeof e!="string")throw new Error(Qd(7));return e.charAt(0).toUpperCase()+e.slice(1)}function r6(...e){return e.reduce((t,n)=>n==null?t:function(...c){t.apply(this,c),n.apply(this,c)},()=>{})}function PE(e,t=166){let n;function i(...c){const d=()=>{e.apply(this,c)};clearTimeout(n),n=setTimeout(d,t)}return i.clear=()=>{clearTimeout(n)},i}function UX(e,t){return()=>null}function Nv(e,t){return K.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function Po(e){return e&&e.ownerDocument||document}function eh(e){return Po(e).defaultView||window}function VX(e,t){return()=>null}function N0(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const WX=typeof window<"u"?K.useLayoutEffect:K.useEffect,Xc=WX;let GC=0;function HX(e){const[t,n]=K.useState(e),i=e||t;return K.useEffect(()=>{t==null&&(GC+=1,n(`mui-${GC}`))},[t]),i}const ZC=Xv["useId".toString()];function IE(e){if(ZC!==void 0){const t=ZC();return e??t}return HX(e)}function qX(e,t,n,i,c){return null}function ip({controlled:e,default:t,name:n,state:i="value"}){const{current:c}=K.useRef(e!==void 0),[d,f]=K.useState(t),a=c?e:d,v=K.useCallback(S=>{c||f(S)},[]);return[a,v]}function ls(e){const t=K.useRef(e);return Xc(()=>{t.current=e}),K.useCallback((...n)=>(0,t.current)(...n),[])}function vo(...e){return K.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{N0(n,t)})},e)}let Nx=!0,i6=!1,XC;const GX={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ZX(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&GX[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function XX(e){e.metaKey||e.altKey||e.ctrlKey||(Nx=!0)}function s4(){Nx=!1}function KX(){this.visibilityState==="hidden"&&i6&&(Nx=!0)}function YX(e){e.addEventListener("keydown",XX,!0),e.addEventListener("mousedown",s4,!0),e.addEventListener("pointerdown",s4,!0),e.addEventListener("touchstart",s4,!0),e.addEventListener("visibilitychange",KX,!0)}function JX(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Nx||ZX(t)}function AE(){const e=K.useCallback(c=>{c!=null&&YX(c.ownerDocument)},[]),t=K.useRef(!1);function n(){return t.current?(i6=!0,window.clearTimeout(XC),XC=window.setTimeout(()=>{i6=!1},100),t.current=!1,!0):!1}function i(c){return JX(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:i,onBlur:n,ref:e}}function wO(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const QX=e=>{const t=K.useRef({});return K.useEffect(()=>{t.current=e}),t.current},eK=QX,tK={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},nK=tK;function ME(e,t){const n=Pe({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]=Pe({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const c=e[i]||{},d=t[i];n[i]={},!d||!Object.keys(d)?n[i]=c:!c||!Object.keys(c)?n[i]=d:(n[i]=Pe({},d),Object.keys(c).forEach(f=>{n[i][f]=ME(c[f],d[f])}))}else n[i]===void 0&&(n[i]=e[i])}),n}function ki(e,t,n=void 0){const i={};return Object.keys(e).forEach(c=>{i[c]=e[c].reduce((d,f)=>{if(f){const a=t(f);a!==""&&d.push(a),n&&n[f]&&d.push(n[f])}return d},[]).join(" ")}),i}const KC=e=>e,rK=()=>{let e=KC;return{configure(t){e=t},generate(t){return e(t)},reset(){e=KC}}},iK=rK(),EO=iK,oK={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function _i(e,t,n="Mui"){const i=oK[t];return i?`${n}-${i}`:`${EO.generate(e)}-${t}`}function Ci(e,t,n="Mui"){const i={};return t.forEach(c=>{i[c]=_i(e,c,n)}),i}function TO(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var aK=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,sK=TO(function(e){return aK.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function lK(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function cK(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var uK=function(){function e(n){var i=this;this._insertTag=function(c){var d;i.tags.length===0?i.insertionPoint?d=i.insertionPoint.nextSibling:i.prepend?d=i.container.firstChild:d=i.before:d=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(c,d),i.tags.push(c)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(cK(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=lK(c);try{d.insertRule(i,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),Pa="-ms-",D2="-moz-",ai="-webkit-",SO="comm",DE="rule",RE="decl",dK="@import",kO="@keyframes",hK="@layer",pK=Math.abs,Fx=String.fromCharCode,fK=Object.assign;function mK(e,t){return sa(e,0)^45?(((t<<2^sa(e,0))<<2^sa(e,1))<<2^sa(e,2))<<2^sa(e,3):0}function CO(e){return e.trim()}function gK(e,t){return(e=t.exec(e))?e[0]:e}function si(e,t,n){return e.replace(t,n)}function o6(e,t){return e.indexOf(t)}function sa(e,t){return e.charCodeAt(t)|0}function F0(e,t,n){return e.slice(t,n)}function Lc(e){return e.length}function OE(e){return e.length}function sv(e,t){return t.push(e),e}function _K(e,t){return e.map(t).join("")}var Bx=1,b1=1,PO=0,gs=0,ko=0,Y1="";function jx(e,t,n,i,c,d,f){return{value:e,root:t,parent:n,type:i,props:c,children:d,line:Bx,column:b1,length:f,return:""}}function yg(e,t){return fK(jx("",null,null,"",null,null,0),e,{length:-e.length},t)}function yK(){return ko}function vK(){return ko=gs>0?sa(Y1,--gs):0,b1--,ko===10&&(b1=1,Bx--),ko}function Bs(){return ko=gs<PO?sa(Y1,gs++):0,b1++,ko===10&&(b1=1,Bx++),ko}function Hc(){return sa(Y1,gs)}function Fv(){return gs}function y_(e,t){return F0(Y1,e,t)}function B0(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function IO(e){return Bx=b1=1,PO=Lc(Y1=e),gs=0,[]}function AO(e){return Y1="",e}function Bv(e){return CO(y_(gs-1,a6(e===91?e+2:e===40?e+1:e)))}function xK(e){for(;(ko=Hc())&&ko<33;)Bs();return B0(e)>2||B0(ko)>3?"":" "}function bK(e,t){for(;--t&&Bs()&&!(ko<48||ko>102||ko>57&&ko<65||ko>70&&ko<97););return y_(e,Fv()+(t<6&&Hc()==32&&Bs()==32))}function a6(e){for(;Bs();)switch(ko){case e:return gs;case 34:case 39:e!==34&&e!==39&&a6(ko);break;case 40:e===41&&a6(e);break;case 92:Bs();break}return gs}function wK(e,t){for(;Bs()&&e+ko!==47+10;)if(e+ko===42+42&&Hc()===47)break;return"/*"+y_(t,gs-1)+"*"+Fx(e===47?e:Bs())}function EK(e){for(;!B0(Hc());)Bs();return y_(e,gs)}function TK(e){return AO(jv("",null,null,null,[""],e=IO(e),0,[0],e))}function jv(e,t,n,i,c,d,f,a,v){for(var S=0,M=0,R=f,N=0,W=0,V=0,H=1,le=1,G=1,X=0,Q="",oe=c,he=d,be=i,A=Q;le;)switch(V=X,X=Bs()){case 40:if(V!=108&&sa(A,R-1)==58){o6(A+=si(Bv(X),"&","&\f"),"&\f")!=-1&&(G=-1);break}case 34:case 39:case 91:A+=Bv(X);break;case 9:case 10:case 13:case 32:A+=xK(V);break;case 92:A+=bK(Fv()-1,7);continue;case 47:switch(Hc()){case 42:case 47:sv(SK(wK(Bs(),Fv()),t,n),v);break;default:A+="/"}break;case 123*H:a[S++]=Lc(A)*G;case 125*H:case 59:case 0:switch(X){case 0:case 125:le=0;case 59+M:G==-1&&(A=si(A,/\f/g,"")),W>0&&Lc(A)-R&&sv(W>32?JC(A+";",i,n,R-1):JC(si(A," ","")+";",i,n,R-2),v);break;case 59:A+=";";default:if(sv(be=YC(A,t,n,S,M,c,a,Q,oe=[],he=[],R),d),X===123)if(M===0)jv(A,t,be,be,oe,d,R,a,he);else switch(N===99&&sa(A,3)===110?100:N){case 100:case 108:case 109:case 115:jv(e,be,be,i&&sv(YC(e,be,be,0,0,c,a,Q,c,oe=[],R),he),c,he,R,a,i?oe:he);break;default:jv(A,be,be,be,[""],he,0,a,he)}}S=M=W=0,H=G=1,Q=A="",R=f;break;case 58:R=1+Lc(A),W=V;default:if(H<1){if(X==123)--H;else if(X==125&&H++==0&&vK()==125)continue}switch(A+=Fx(X),X*H){case 38:G=M>0?1:(A+="\f",-1);break;case 44:a[S++]=(Lc(A)-1)*G,G=1;break;case 64:Hc()===45&&(A+=Bv(Bs())),N=Hc(),M=R=Lc(Q=A+=EK(Fv())),X++;break;case 45:V===45&&Lc(A)==2&&(H=0)}}return d}function YC(e,t,n,i,c,d,f,a,v,S,M){for(var R=c-1,N=c===0?d:[""],W=OE(N),V=0,H=0,le=0;V<i;++V)for(var G=0,X=F0(e,R+1,R=pK(H=f[V])),Q=e;G<W;++G)(Q=CO(H>0?N[G]+" "+X:si(X,/&\f/g,N[G])))&&(v[le++]=Q);return jx(e,t,n,c===0?DE:a,v,S,M)}function SK(e,t,n){return jx(e,t,n,SO,Fx(yK()),F0(e,2,-2),0)}function JC(e,t,n,i){return jx(e,t,n,RE,F0(e,0,i),F0(e,i+1,-1),i)}function a1(e,t){for(var n="",i=OE(e),c=0;c<i;c++)n+=t(e[c],c,e,t)||"";return n}function kK(e,t,n,i){switch(e.type){case hK:if(e.children.length)break;case dK:case RE:return e.return=e.return||e.value;case SO:return"";case kO:return e.return=e.value+"{"+a1(e.children,i)+"}";case DE:e.value=e.props.join(",")}return Lc(n=a1(e.children,i))?e.return=e.value+"{"+n+"}":""}function CK(e){var t=OE(e);return function(n,i,c,d){for(var f="",a=0;a<t;a++)f+=e[a](n,i,c,d)||"";return f}}function PK(e){return function(t){t.root||(t=t.return)&&e(t)}}var IK=function(t,n,i){for(var c=0,d=0;c=d,d=Hc(),c===38&&d===12&&(n[i]=1),!B0(d);)Bs();return y_(t,gs)},AK=function(t,n){var i=-1,c=44;do switch(B0(c)){case 0:c===38&&Hc()===12&&(n[i]=1),t[i]+=IK(gs-1,n,i);break;case 2:t[i]+=Bv(c);break;case 4:if(c===44){t[++i]=Hc()===58?"&\f":"",n[i]=t[i].length;break}default:t[i]+=Fx(c)}while(c=Bs());return t},MK=function(t,n){return AO(AK(IO(t),n))},QC=new WeakMap,DK=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,i=t.parent,c=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!QC.get(i))&&!c){QC.set(t,!0);for(var d=[],f=MK(n,d),a=i.props,v=0,S=0;v<f.length;v++)for(var M=0;M<a.length;M++,S++)t.props[S]=d[v]?f[v].replace(/&\f/g,a[M]):a[M]+" "+f[v]}}},RK=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function MO(e,t){switch(mK(e,t)){case 5103:return ai+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ai+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ai+e+D2+e+Pa+e+e;case 6828:case 4268:return ai+e+Pa+e+e;case 6165:return ai+e+Pa+"flex-"+e+e;case 5187:return ai+e+si(e,/(\w+).+(:[^]+)/,ai+"box-$1$2"+Pa+"flex-$1$2")+e;case 5443:return ai+e+Pa+"flex-item-"+si(e,/flex-|-self/,"")+e;case 4675:return ai+e+Pa+"flex-line-pack"+si(e,/align-content|flex-|-self/,"")+e;case 5548:return ai+e+Pa+si(e,"shrink","negative")+e;case 5292:return ai+e+Pa+si(e,"basis","preferred-size")+e;case 6060:return ai+"box-"+si(e,"-grow","")+ai+e+Pa+si(e,"grow","positive")+e;case 4554:return ai+si(e,/([^-])(transform)/g,"$1"+ai+"$2")+e;case 6187:return si(si(si(e,/(zoom-|grab)/,ai+"$1"),/(image-set)/,ai+"$1"),e,"")+e;case 5495:case 3959:return si(e,/(image-set\([^]*)/,ai+"$1$`$1");case 4968:return si(si(e,/(.+:)(flex-)?(.*)/,ai+"box-pack:$3"+Pa+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ai+e+e;case 4095:case 3583:case 4068:case 2532:return si(e,/(.+)-inline(.+)/,ai+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Lc(e)-1-t>6)switch(sa(e,t+1)){case 109:if(sa(e,t+4)!==45)break;case 102:return si(e,/(.+:)(.+)-([^]+)/,"$1"+ai+"$2-$3$1"+D2+(sa(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~o6(e,"stretch")?MO(si(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(sa(e,t+1)!==115)break;case 6444:switch(sa(e,Lc(e)-3-(~o6(e,"!important")&&10))){case 107:return si(e,":",":"+ai)+e;case 101:return si(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ai+(sa(e,14)===45?"inline-":"")+"box$3$1"+ai+"$2$3$1"+Pa+"$2box$3")+e}break;case 5936:switch(sa(e,t+11)){case 114:return ai+e+Pa+si(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ai+e+Pa+si(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ai+e+Pa+si(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ai+e+Pa+e+e}return e}var OK=function(t,n,i,c){if(t.length>-1&&!t.return)switch(t.type){case RE:t.return=MO(t.value,t.length);break;case kO:return a1([yg(t,{value:si(t.value,"@","@"+ai)})],c);case DE:if(t.length)return _K(t.props,function(d){switch(gK(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return a1([yg(t,{props:[si(d,/:(read-\w+)/,":"+D2+"$1")]})],c);case"::placeholder":return a1([yg(t,{props:[si(d,/:(plac\w+)/,":"+ai+"input-$1")]}),yg(t,{props:[si(d,/:(plac\w+)/,":"+D2+"$1")]}),yg(t,{props:[si(d,/:(plac\w+)/,Pa+"input-$1")]})],c)}return""})}},LK=[OK],zK=function(t){var n=t.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(H){var le=H.getAttribute("data-emotion");le.indexOf(" ")!==-1&&(document.head.appendChild(H),H.setAttribute("data-s",""))})}var c=t.stylisPlugins||LK,d={},f,a=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(H){for(var le=H.getAttribute("data-emotion").split(" "),G=1;G<le.length;G++)d[le[G]]=!0;a.push(H)});var v,S=[DK,RK];{var M,R=[kK,PK(function(H){M.insert(H)})],N=CK(S.concat(c,R)),W=function(le){return a1(TK(le),N)};v=function(le,G,X,Q){M=X,W(le?le+"{"+G.styles+"}":G.styles),Q&&(V.inserted[G.name]=!0)}}var V={key:n,sheet:new uK({key:n,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:v};return V.sheet.hydrate(a),V},DO={exports:{}},fi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qo=typeof Symbol=="function"&&Symbol.for,LE=Qo?Symbol.for("react.element"):60103,zE=Qo?Symbol.for("react.portal"):60106,$x=Qo?Symbol.for("react.fragment"):60107,Ux=Qo?Symbol.for("react.strict_mode"):60108,Vx=Qo?Symbol.for("react.profiler"):60114,Wx=Qo?Symbol.for("react.provider"):60109,Hx=Qo?Symbol.for("react.context"):60110,NE=Qo?Symbol.for("react.async_mode"):60111,qx=Qo?Symbol.for("react.concurrent_mode"):60111,Gx=Qo?Symbol.for("react.forward_ref"):60112,Zx=Qo?Symbol.for("react.suspense"):60113,NK=Qo?Symbol.for("react.suspense_list"):60120,Xx=Qo?Symbol.for("react.memo"):60115,Kx=Qo?Symbol.for("react.lazy"):60116,FK=Qo?Symbol.for("react.block"):60121,BK=Qo?Symbol.for("react.fundamental"):60117,jK=Qo?Symbol.for("react.responder"):60118,$K=Qo?Symbol.for("react.scope"):60119;function Hs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case LE:switch(e=e.type,e){case NE:case qx:case $x:case Vx:case Ux:case Zx:return e;default:switch(e=e&&e.$$typeof,e){case Hx:case Gx:case Kx:case Xx:case Wx:return e;default:return t}}case zE:return t}}}function RO(e){return Hs(e)===qx}fi.AsyncMode=NE;fi.ConcurrentMode=qx;fi.ContextConsumer=Hx;fi.ContextProvider=Wx;fi.Element=LE;fi.ForwardRef=Gx;fi.Fragment=$x;fi.Lazy=Kx;fi.Memo=Xx;fi.Portal=zE;fi.Profiler=Vx;fi.StrictMode=Ux;fi.Suspense=Zx;fi.isAsyncMode=function(e){return RO(e)||Hs(e)===NE};fi.isConcurrentMode=RO;fi.isContextConsumer=function(e){return Hs(e)===Hx};fi.isContextProvider=function(e){return Hs(e)===Wx};fi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===LE};fi.isForwardRef=function(e){return Hs(e)===Gx};fi.isFragment=function(e){return Hs(e)===$x};fi.isLazy=function(e){return Hs(e)===Kx};fi.isMemo=function(e){return Hs(e)===Xx};fi.isPortal=function(e){return Hs(e)===zE};fi.isProfiler=function(e){return Hs(e)===Vx};fi.isStrictMode=function(e){return Hs(e)===Ux};fi.isSuspense=function(e){return Hs(e)===Zx};fi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===$x||e===qx||e===Vx||e===Ux||e===Zx||e===NK||typeof e=="object"&&e!==null&&(e.$$typeof===Kx||e.$$typeof===Xx||e.$$typeof===Wx||e.$$typeof===Hx||e.$$typeof===Gx||e.$$typeof===BK||e.$$typeof===jK||e.$$typeof===$K||e.$$typeof===FK)};fi.typeOf=Hs;DO.exports=fi;var UK=DO.exports,OO=UK,VK={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},WK={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},LO={};LO[OO.ForwardRef]=VK;LO[OO.Memo]=WK;var HK=!0;function qK(e,t,n){var i="";return n.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):i+=c+" "}),i}var zO=function(t,n,i){var c=t.key+"-"+n.name;(i===!1||HK===!1)&&t.registered[c]===void 0&&(t.registered[c]=n.styles)},NO=function(t,n,i){zO(t,n,i);var c=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var d=n;do t.insert(n===d?"."+c:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function GK(e){for(var t=0,n,i=0,c=e.length;c>=4;++i,c-=4)n=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ZK={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},XK=/[A-Z]|^ms/g,KK=/_EMO_([^_]+?)_([^]*?)_EMO_/g,FO=function(t){return t.charCodeAt(1)===45},eP=function(t){return t!=null&&typeof t!="boolean"},l4=TO(function(e){return FO(e)?e:e.replace(XK,"-$&").toLowerCase()}),tP=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(KK,function(i,c,d){return zc={name:c,styles:d,next:zc},c})}return ZK[t]!==1&&!FO(t)&&typeof n=="number"&&n!==0?n+"px":n};function j0(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return zc={name:n.name,styles:n.styles,next:zc},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)zc={name:i.name,styles:i.styles,next:zc},i=i.next;var c=n.styles+";";return c}return YK(e,t,n)}case"function":{if(e!==void 0){var d=zc,f=n(e);return zc=d,j0(e,t,f)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function YK(e,t,n){var i="";if(Array.isArray(n))for(var c=0;c<n.length;c++)i+=j0(e,t,n[c])+";";else for(var d in n){var f=n[d];if(typeof f!="object")t!=null&&t[f]!==void 0?i+=d+"{"+t[f]+"}":eP(f)&&(i+=l4(d)+":"+tP(d,f)+";");else if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var a=0;a<f.length;a++)eP(f[a])&&(i+=l4(d)+":"+tP(d,f[a])+";");else{var v=j0(e,t,f);switch(d){case"animation":case"animationName":{i+=l4(d)+":"+v+";";break}default:i+=d+"{"+v+"}"}}}return i}var nP=/label:\s*([^\s;\n{]+)\s*(;|$)/g,zc,FE=function(t,n,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,d="";zc=void 0;var f=t[0];f==null||f.raw===void 0?(c=!1,d+=j0(i,n,f)):d+=f[0];for(var a=1;a<t.length;a++)d+=j0(i,n,t[a]),c&&(d+=f[a]);nP.lastIndex=0;for(var v="",S;(S=nP.exec(d))!==null;)v+="-"+S[1];var M=GK(d)+v;return{name:M,styles:d,next:zc}},JK=function(t){return t()},BO=Xv["useInsertionEffect"]?Xv["useInsertionEffect"]:!1,QK=BO||JK,rP=BO||K.useLayoutEffect,jO=K.createContext(typeof HTMLElement<"u"?zK({key:"css"}):null);jO.Provider;var $O=function(t){return K.forwardRef(function(n,i){var c=K.useContext(jO);return t(n,c,i)})},Yx=K.createContext({}),eY=$O(function(e,t){var n=e.styles,i=FE([n],void 0,K.useContext(Yx)),c=K.useRef();return rP(function(){var d=t.key+"-global",f=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,v=document.querySelector('style[data-emotion="'+d+" "+i.name+'"]');return t.sheet.tags.length&&(f.before=t.sheet.tags[0]),v!==null&&(a=!0,v.setAttribute("data-emotion",d),f.hydrate([v])),c.current=[f,a],function(){f.flush()}},[t]),rP(function(){var d=c.current,f=d[0],a=d[1];if(a){d[1]=!1;return}if(i.next!==void 0&&NO(t,i.next,!0),f.tags.length){var v=f.tags[f.tags.length-1].nextElementSibling;f.before=v,f.flush()}t.insert("",i,f,!1)},[t,i.name]),null});function tY(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return FE(t)}var BE=function(){var t=tY.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},nY=sK,rY=function(t){return t!=="theme"},iP=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?nY:rY},oP=function(t,n,i){var c;if(n){var d=n.shouldForwardProp;c=t.__emotion_forwardProp&&d?function(f){return t.__emotion_forwardProp(f)&&d(f)}:d}return typeof c!="function"&&i&&(c=t.__emotion_forwardProp),c},iY=function(t){var n=t.cache,i=t.serialized,c=t.isStringTag;return zO(n,i,c),QK(function(){return NO(n,i,c)}),null},oY=function e(t,n){var i=t.__emotion_real===t,c=i&&t.__emotion_base||t,d,f;n!==void 0&&(d=n.label,f=n.target);var a=oP(t,n,i),v=a||iP(c),S=!v("as");return function(){var M=arguments,R=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&R.push("label:"+d+";"),M[0]==null||M[0].raw===void 0)R.push.apply(R,M);else{R.push(M[0][0]);for(var N=M.length,W=1;W<N;W++)R.push(M[W],M[0][W])}var V=$O(function(H,le,G){var X=S&&H.as||c,Q="",oe=[],he=H;if(H.theme==null){he={};for(var be in H)he[be]=H[be];he.theme=K.useContext(Yx)}typeof H.className=="string"?Q=qK(le.registered,oe,H.className):H.className!=null&&(Q=H.className+" ");var A=FE(R.concat(oe),le.registered,he);Q+=le.key+"-"+A.name,f!==void 0&&(Q+=" "+f);var Re=S&&a===void 0?iP(X):v,_e={};for(var ze in H)S&&ze==="as"||Re(ze)&&(_e[ze]=H[ze]);return _e.className=Q,_e.ref=G,K.createElement(K.Fragment,null,K.createElement(iY,{cache:le,serialized:A,isStringTag:typeof X=="string"}),K.createElement(X,_e))});return V.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",V.defaultProps=t.defaultProps,V.__emotion_real=V,V.__emotion_base=c,V.__emotion_styles=R,V.__emotion_forwardProp=a,Object.defineProperty(V,"toString",{value:function(){return"."+f}}),V.withComponent=function(H,le){return e(H,Pe({},n,le,{shouldForwardProp:oP(V,le,!0)})).apply(void 0,R)},V}},aY=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],s6=oY.bind();aY.forEach(function(e){s6[e]=s6(e)});function sY(e){return e==null||Object.keys(e).length===0}function lY(e){const{styles:t,defaultTheme:n={}}=e,i=typeof t=="function"?c=>t(sY(c)?n:c):t;return Z.jsx(eY,{styles:i})}/**
 * @mui/styled-engine v5.13.2
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function cY(e,t){return s6(e,t)}const uY=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function er(e,t){if(e==null)return{};var n={},i=Object.keys(e),c,d;for(d=0;d<i.length;d++)c=i[d],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}const dY=["values","unit","step"],hY=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,i)=>n.val-i.val),t.reduce((n,i)=>Pe({},n,{[i.key]:i.val}),{})};function pY(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=e,c=er(e,dY),d=hY(t),f=Object.keys(d);function a(N){return`@media (min-width:${typeof t[N]=="number"?t[N]:N}${n})`}function v(N){return`@media (max-width:${(typeof t[N]=="number"?t[N]:N)-i/100}${n})`}function S(N,W){const V=f.indexOf(W);return`@media (min-width:${typeof t[N]=="number"?t[N]:N}${n}) and (max-width:${(V!==-1&&typeof t[f[V]]=="number"?t[f[V]]:W)-i/100}${n})`}function M(N){return f.indexOf(N)+1<f.length?S(N,f[f.indexOf(N)+1]):a(N)}function R(N){const W=f.indexOf(N);return W===0?a(f[1]):W===f.length-1?v(f[W]):S(N,f[f.indexOf(N)+1]).replace("@media","@media not all and")}return Pe({keys:f,values:d,up:a,down:v,between:S,only:M,not:R,unit:n},c)}const fY={borderRadius:4},mY=fY;function qg(e,t){return t?hs(e,t,{clone:!1}):e}const jE={xs:0,sm:600,md:900,lg:1200,xl:1536},aP={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${jE[e]}px)`};function ac(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const d=i.breakpoints||aP;return t.reduce((f,a,v)=>(f[d.up(d.keys[v])]=n(t[v]),f),{})}if(typeof t=="object"){const d=i.breakpoints||aP;return Object.keys(t).reduce((f,a)=>{if(Object.keys(d.values||jE).indexOf(a)!==-1){const v=d.up(a);f[v]=n(t[a],a)}else{const v=a;f[v]=t[v]}return f},{})}return n(t)}function UO(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((i,c)=>{const d=e.up(c);return i[d]={},i},{}))||{}}function VO(e,t){return e.reduce((n,i)=>{const c=n[i];return(!c||Object.keys(c).length===0)&&delete n[i],n},t)}function gY(e,...t){const n=UO(e),i=[n,...t].reduce((c,d)=>hs(c,d),{});return VO(Object.keys(n),i)}function _Y(e,t){if(typeof e!="object")return{};const n={},i=Object.keys(t);return Array.isArray(e)?i.forEach((c,d)=>{d<e.length&&(n[c]=!0)}):i.forEach(c=>{e[c]!=null&&(n[c]=!0)}),n}function c4({values:e,breakpoints:t,base:n}){const i=n||_Y(e,t),c=Object.keys(i);if(c.length===0)return e;let d;return c.reduce((f,a,v)=>(Array.isArray(e)?(f[a]=e[v]!=null?e[v]:e[d],d=v):typeof e=="object"?(f[a]=e[a]!=null?e[a]:e[d],d=a):f[a]=e,f),{})}function Jx(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const i=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(i!=null)return i}return t.split(".").reduce((i,c)=>i&&i[c]!=null?i[c]:null,e)}function R2(e,t,n,i=n){let c;return typeof e=="function"?c=e(n):Array.isArray(e)?c=e[n]||i:c=Jx(e,n)||i,t&&(c=t(c,i,e)),c}function ui(e){const{prop:t,cssProperty:n=e.prop,themeKey:i,transform:c}=e,d=f=>{if(f[t]==null)return null;const a=f[t],v=f.theme,S=Jx(v,i)||{};return ac(f,a,R=>{let N=R2(S,c,R);return R===N&&typeof R=="string"&&(N=R2(S,c,`${t}${R==="default"?"":Pn(R)}`,R)),n===!1?N:{[n]:N}})};return d.propTypes={},d.filterProps=[t],d}function yY(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const vY={m:"margin",p:"padding"},xY={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},sP={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},bY=yY(e=>{if(e.length>2)if(sP[e])e=sP[e];else return[e];const[t,n]=e.split(""),i=vY[t],c=xY[n]||"";return Array.isArray(c)?c.map(d=>i+d):[i+c]}),$E=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],UE=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...$E,...UE];function v_(e,t,n,i){var c;const d=(c=Jx(e,t,!1))!=null?c:n;return typeof d=="number"?f=>typeof f=="string"?f:d*f:Array.isArray(d)?f=>typeof f=="string"?f:d[f]:typeof d=="function"?d:()=>{}}function VE(e){return v_(e,"spacing",8)}function yp(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),i=e(n);return t>=0?i:typeof i=="number"?-i:`-${i}`}function wY(e,t){return n=>e.reduce((i,c)=>(i[c]=yp(t,n),i),{})}function EY(e,t,n,i){if(t.indexOf(n)===-1)return null;const c=bY(n),d=wY(c,i),f=e[n];return ac(e,f,d)}function WO(e,t){const n=VE(e.theme);return Object.keys(e).map(i=>EY(e,t,i,n)).reduce(qg,{})}function so(e){return WO(e,$E)}so.propTypes={};so.filterProps=$E;function lo(e){return WO(e,UE)}lo.propTypes={};lo.filterProps=UE;function TY(e=8){if(e.mui)return e;const t=VE({spacing:e}),n=(...i)=>(i.length===0?[1]:i).map(d=>{const f=t(d);return typeof f=="number"?`${f}px`:f}).join(" ");return n.mui=!0,n}function Qx(...e){const t=e.reduce((i,c)=>(c.filterProps.forEach(d=>{i[d]=c}),i),{}),n=i=>Object.keys(i).reduce((c,d)=>t[d]?qg(c,t[d](i)):c,{});return n.propTypes={},n.filterProps=e.reduce((i,c)=>i.concat(c.filterProps),[]),n}function Fc(e){return typeof e!="number"?e:`${e}px solid`}const SY=ui({prop:"border",themeKey:"borders",transform:Fc}),kY=ui({prop:"borderTop",themeKey:"borders",transform:Fc}),CY=ui({prop:"borderRight",themeKey:"borders",transform:Fc}),PY=ui({prop:"borderBottom",themeKey:"borders",transform:Fc}),IY=ui({prop:"borderLeft",themeKey:"borders",transform:Fc}),AY=ui({prop:"borderColor",themeKey:"palette"}),MY=ui({prop:"borderTopColor",themeKey:"palette"}),DY=ui({prop:"borderRightColor",themeKey:"palette"}),RY=ui({prop:"borderBottomColor",themeKey:"palette"}),OY=ui({prop:"borderLeftColor",themeKey:"palette"}),eb=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=v_(e.theme,"shape.borderRadius",4),n=i=>({borderRadius:yp(t,i)});return ac(e,e.borderRadius,n)}return null};eb.propTypes={};eb.filterProps=["borderRadius"];Qx(SY,kY,CY,PY,IY,AY,MY,DY,RY,OY,eb);const tb=e=>{if(e.gap!==void 0&&e.gap!==null){const t=v_(e.theme,"spacing",8),n=i=>({gap:yp(t,i)});return ac(e,e.gap,n)}return null};tb.propTypes={};tb.filterProps=["gap"];const nb=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=v_(e.theme,"spacing",8),n=i=>({columnGap:yp(t,i)});return ac(e,e.columnGap,n)}return null};nb.propTypes={};nb.filterProps=["columnGap"];const rb=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=v_(e.theme,"spacing",8),n=i=>({rowGap:yp(t,i)});return ac(e,e.rowGap,n)}return null};rb.propTypes={};rb.filterProps=["rowGap"];const LY=ui({prop:"gridColumn"}),zY=ui({prop:"gridRow"}),NY=ui({prop:"gridAutoFlow"}),FY=ui({prop:"gridAutoColumns"}),BY=ui({prop:"gridAutoRows"}),jY=ui({prop:"gridTemplateColumns"}),$Y=ui({prop:"gridTemplateRows"}),UY=ui({prop:"gridTemplateAreas"}),VY=ui({prop:"gridArea"});Qx(tb,nb,rb,LY,zY,NY,FY,BY,jY,$Y,UY,VY);function s1(e,t){return t==="grey"?t:e}const WY=ui({prop:"color",themeKey:"palette",transform:s1}),HY=ui({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:s1}),qY=ui({prop:"backgroundColor",themeKey:"palette",transform:s1});Qx(WY,HY,qY);function Ls(e){return e<=1&&e!==0?`${e*100}%`:e}const GY=ui({prop:"width",transform:Ls}),WE=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var i;return{maxWidth:((i=e.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[n])||jE[n]||Ls(n)}};return ac(e,e.maxWidth,t)}return null};WE.filterProps=["maxWidth"];const ZY=ui({prop:"minWidth",transform:Ls}),XY=ui({prop:"height",transform:Ls}),KY=ui({prop:"maxHeight",transform:Ls}),YY=ui({prop:"minHeight",transform:Ls});ui({prop:"size",cssProperty:"width",transform:Ls});ui({prop:"size",cssProperty:"height",transform:Ls});const JY=ui({prop:"boxSizing"});Qx(GY,WE,ZY,XY,KY,YY,JY);const QY={border:{themeKey:"borders",transform:Fc},borderTop:{themeKey:"borders",transform:Fc},borderRight:{themeKey:"borders",transform:Fc},borderBottom:{themeKey:"borders",transform:Fc},borderLeft:{themeKey:"borders",transform:Fc},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:eb},color:{themeKey:"palette",transform:s1},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:s1},backgroundColor:{themeKey:"palette",transform:s1},p:{style:lo},pt:{style:lo},pr:{style:lo},pb:{style:lo},pl:{style:lo},px:{style:lo},py:{style:lo},padding:{style:lo},paddingTop:{style:lo},paddingRight:{style:lo},paddingBottom:{style:lo},paddingLeft:{style:lo},paddingX:{style:lo},paddingY:{style:lo},paddingInline:{style:lo},paddingInlineStart:{style:lo},paddingInlineEnd:{style:lo},paddingBlock:{style:lo},paddingBlockStart:{style:lo},paddingBlockEnd:{style:lo},m:{style:so},mt:{style:so},mr:{style:so},mb:{style:so},ml:{style:so},mx:{style:so},my:{style:so},margin:{style:so},marginTop:{style:so},marginRight:{style:so},marginBottom:{style:so},marginLeft:{style:so},marginX:{style:so},marginY:{style:so},marginInline:{style:so},marginInlineStart:{style:so},marginInlineEnd:{style:so},marginBlock:{style:so},marginBlockStart:{style:so},marginBlockEnd:{style:so},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:tb},rowGap:{style:rb},columnGap:{style:nb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ls},maxWidth:{style:WE},minWidth:{transform:Ls},height:{transform:Ls},maxHeight:{transform:Ls},minHeight:{transform:Ls},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},ib=QY;function eJ(...e){const t=e.reduce((i,c)=>i.concat(Object.keys(c)),[]),n=new Set(t);return e.every(i=>n.size===Object.keys(i).length)}function tJ(e,t){return typeof e=="function"?e(t):e}function nJ(){function e(n,i,c,d){const f={[n]:i,theme:c},a=d[n];if(!a)return{[n]:i};const{cssProperty:v=n,themeKey:S,transform:M,style:R}=a;if(i==null)return null;if(S==="typography"&&i==="inherit")return{[n]:i};const N=Jx(c,S)||{};return R?R(f):ac(f,i,V=>{let H=R2(N,M,V);return V===H&&typeof V=="string"&&(H=R2(N,M,`${n}${V==="default"?"":Pn(V)}`,V)),v===!1?H:{[v]:H}})}function t(n){var i;const{sx:c,theme:d={}}=n||{};if(!c)return null;const f=(i=d.unstable_sxConfig)!=null?i:ib;function a(v){let S=v;if(typeof v=="function")S=v(d);else if(typeof v!="object")return v;if(!S)return null;const M=UO(d.breakpoints),R=Object.keys(M);let N=M;return Object.keys(S).forEach(W=>{const V=tJ(S[W],d);if(V!=null)if(typeof V=="object")if(f[W])N=qg(N,e(W,V,d,f));else{const H=ac({theme:d},V,le=>({[W]:le}));eJ(H,V)?N[W]=t({sx:V,theme:d}):N=qg(N,H)}else N=qg(N,e(W,V,d,f))}),VO(R,N)}return Array.isArray(c)?c.map(a):a(c)}return t}const HO=nJ();HO.filterProps=["sx"];const HE=HO,rJ=["breakpoints","palette","spacing","shape"];function ob(e={},...t){const{breakpoints:n={},palette:i={},spacing:c,shape:d={}}=e,f=er(e,rJ),a=pY(n),v=TY(c);let S=hs({breakpoints:a,direction:"ltr",components:{},palette:Pe({mode:"light"},i),spacing:v,shape:Pe({},mY,d)},f);return S=t.reduce((M,R)=>hs(M,R),S),S.unstable_sxConfig=Pe({},ib,f==null?void 0:f.unstable_sxConfig),S.unstable_sx=function(R){return HE({sx:R,theme:this})},S}function iJ(e){return Object.keys(e).length===0}function qE(e=null){const t=K.useContext(Yx);return!t||iJ(t)?e:t}const oJ=ob();function GE(e=oJ){return qE(e)}function aJ({styles:e,themeId:t,defaultTheme:n={}}){const i=GE(n),c=typeof e=="function"?e(t&&i[t]||i):e;return Z.jsx(lY,{styles:c})}const sJ=["sx"],lJ=e=>{var t,n;const i={systemProps:{},otherProps:{}},c=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:ib;return Object.keys(e).forEach(d=>{c[d]?i.systemProps[d]=e[d]:i.otherProps[d]=e[d]}),i};function cJ(e){const{sx:t}=e,n=er(e,sJ),{systemProps:i,otherProps:c}=lJ(n);let d;return Array.isArray(t)?d=[i,...t]:typeof t=="function"?d=(...f)=>{const a=t(...f);return Xh(a)?Pe({},i,a):i}:d=Pe({},i,t),Pe({},c,{sx:d})}function qO(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=qO(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function rr(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=qO(e))&&(i&&(i+=" "),i+=t);return i}const uJ=["variant"];function lP(e){return e.length===0}function GO(e){const{variant:t}=e,n=er(e,uJ);let i=t||"";return Object.keys(n).sort().forEach(c=>{c==="color"?i+=lP(i)?e[c]:Pn(e[c]):i+=`${lP(i)?c:Pn(c)}${Pn(e[c].toString())}`}),i}const dJ=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function hJ(e){return Object.keys(e).length===0}function pJ(e){return typeof e=="string"&&e.charCodeAt(0)>96}const fJ=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,mJ=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const i={};return n.forEach(c=>{const d=GO(c.props);i[d]=c.style}),i},gJ=(e,t,n,i)=>{var c;const{ownerState:d={}}=e,f=[],a=n==null||(c=n.components)==null||(c=c[i])==null?void 0:c.variants;return a&&a.forEach(v=>{let S=!0;Object.keys(v.props).forEach(M=>{d[M]!==v.props[M]&&e[M]!==v.props[M]&&(S=!1)}),S&&f.push(t[GO(v.props)])}),f};function Gg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const _J=ob();function vg({defaultTheme:e,theme:t,themeId:n}){return hJ(t)?e:t[n]||t}function ZO(e={}){const{themeId:t,defaultTheme:n=_J,rootShouldForwardProp:i=Gg,slotShouldForwardProp:c=Gg}=e,d=f=>HE(Pe({},f,{theme:vg(Pe({},f,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,(f,a={})=>{uY(f,oe=>oe.filter(he=>!(he!=null&&he.__mui_systemSx)));const{name:v,slot:S,skipVariantsResolver:M,skipSx:R,overridesResolver:N}=a,W=er(a,dJ),V=M!==void 0?M:S&&S!=="Root"||!1,H=R||!1;let le,G=Gg;S==="Root"?G=i:S?G=c:pJ(f)&&(G=void 0);const X=cY(f,Pe({shouldForwardProp:G,label:le},W)),Q=(oe,...he)=>{const be=he?he.map(ze=>typeof ze=="function"&&ze.__emotion_real!==ze?ot=>ze(Pe({},ot,{theme:vg(Pe({},ot,{defaultTheme:n,themeId:t}))})):ze):[];let A=oe;v&&N&&be.push(ze=>{const ot=vg(Pe({},ze,{defaultTheme:n,themeId:t})),gt=fJ(v,ot);if(gt){const Ze={};return Object.entries(gt).forEach(([We,He])=>{Ze[We]=typeof He=="function"?He(Pe({},ze,{theme:ot})):He}),N(ze,Ze)}return null}),v&&!V&&be.push(ze=>{const ot=vg(Pe({},ze,{defaultTheme:n,themeId:t}));return gJ(ze,mJ(v,ot),ot,v)}),H||be.push(d);const Re=be.length-he.length;if(Array.isArray(oe)&&Re>0){const ze=new Array(Re).fill("");A=[...oe,...ze],A.raw=[...oe.raw,...ze]}else typeof oe=="function"&&oe.__emotion_real!==oe&&(A=ze=>oe(Pe({},ze,{theme:vg(Pe({},ze,{defaultTheme:n,themeId:t}))})));const _e=X(A,...be);return f.muiName&&(_e.muiName=f.muiName),_e};return X.withConfig&&(Q.withConfig=X.withConfig),Q}}const yJ=ZO(),vJ=yJ;function xJ(e){const{theme:t,name:n,props:i}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?i:ME(t.components[n].defaultProps,i)}function XO({props:e,name:t,defaultTheme:n,themeId:i}){let c=GE(n);return i&&(c=c[i]||c),xJ({theme:c,name:t,props:e})}function ZE(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function bJ(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,c)=>c<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function vp(e){if(e.type)return e;if(e.charAt(0)==="#")return vp(bJ(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Qd(9,e));let i=e.substring(t+1,e.length-1),c;if(n==="color"){if(i=i.split(" "),c=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(Qd(10,c))}else i=i.split(",");return i=i.map(d=>parseFloat(d)),{type:n,values:i,colorSpace:c}}function ab(e){const{type:t,colorSpace:n}=e;let{values:i}=e;return t.indexOf("rgb")!==-1?i=i.map((c,d)=>d<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.indexOf("color")!==-1?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function wJ(e){e=vp(e);const{values:t}=e,n=t[0],i=t[1]/100,c=t[2]/100,d=i*Math.min(c,1-c),f=(S,M=(S+n/30)%12)=>c-d*Math.max(Math.min(M-3,9-M,1),-1);let a="rgb";const v=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return e.type==="hsla"&&(a+="a",v.push(t[3])),ab({type:a,values:v})}function cP(e){e=vp(e);let t=e.type==="hsl"||e.type==="hsla"?vp(wJ(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function EJ(e,t){const n=cP(e),i=cP(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function eo(e,t){return e=vp(e),t=ZE(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,ab(e)}function KO(e,t){if(e=vp(e),t=ZE(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return ab(e)}function YO(e,t){if(e=vp(e),t=ZE(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return ab(e)}const TJ=K.createContext(null),JO=TJ;function QO(){return K.useContext(JO)}const SJ=typeof Symbol=="function"&&Symbol.for,kJ=SJ?Symbol.for("mui.nested"):"__THEME_NESTED__";function CJ(e,t){return typeof t=="function"?t(e):Pe({},e,t)}function PJ(e){const{children:t,theme:n}=e,i=QO(),c=K.useMemo(()=>{const d=i===null?n:CJ(i,n);return d!=null&&(d[kJ]=i!==null),d},[n,i]);return Z.jsx(JO.Provider,{value:c,children:t})}const uP={};function dP(e,t,n,i=!1){return K.useMemo(()=>{const c=e&&t[e]||t;if(typeof n=="function"){const d=n(c),f=e?Pe({},t,{[e]:d}):d;return i?()=>f:f}return e?Pe({},t,{[e]:n}):Pe({},t,n)},[e,t,n,i])}function IJ(e){const{children:t,theme:n,themeId:i}=e,c=qE(uP),d=QO()||uP,f=dP(i,c,n),a=dP(i,d,n,!0);return Z.jsx(PJ,{theme:a,children:Z.jsx(Yx.Provider,{value:f,children:t})})}const AJ=["component","direction","spacing","divider","children","className","useFlexGap"],MJ=ob(),DJ=vJ("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function RJ(e){return XO({props:e,name:"MuiStack",defaultTheme:MJ})}function OJ(e,t){const n=K.Children.toArray(e).filter(Boolean);return n.reduce((i,c,d)=>(i.push(c),d<n.length-1&&i.push(K.cloneElement(t,{key:`separator-${d}`})),i),[])}const LJ=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],zJ=({ownerState:e,theme:t})=>{let n=Pe({display:"flex",flexDirection:"column"},ac({theme:t},c4({values:e.direction,breakpoints:t.breakpoints.values}),i=>({flexDirection:i})));if(e.spacing){const i=VE(t),c=Object.keys(t.breakpoints.values).reduce((v,S)=>((typeof e.spacing=="object"&&e.spacing[S]!=null||typeof e.direction=="object"&&e.direction[S]!=null)&&(v[S]=!0),v),{}),d=c4({values:e.direction,base:c}),f=c4({values:e.spacing,base:c});typeof d=="object"&&Object.keys(d).forEach((v,S,M)=>{if(!d[v]){const N=S>0?d[M[S-1]]:"column";d[v]=N}}),n=hs(n,ac({theme:t},f,(v,S)=>e.useFlexGap?{gap:yp(i,v)}:{"& > :not(style) ~ :not(style)":{margin:0,[`margin${LJ(S?d[S]:e.direction)}`]:yp(i,v)}}))}return n=gY(t.breakpoints,n),n};function NJ(e={}){const{createStyledComponent:t=DJ,useThemeProps:n=RJ,componentName:i="MuiStack"}=e,c=()=>ki({root:["root"]},v=>_i(i,v),{}),d=t(zJ);return K.forwardRef(function(v,S){const M=n(v),R=cJ(M),{component:N="div",direction:W="column",spacing:V=0,divider:H,children:le,className:G,useFlexGap:X=!1}=R,Q=er(R,AJ),oe={direction:W,spacing:V,useFlexGap:X},he=c();return Z.jsx(d,Pe({as:N,ownerState:oe,ref:S,className:rr(he.root,G)},Q,{children:H?OJ(le,H):le}))})}const w1="$$material";function FJ(e,t){return Pe({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const BJ={black:"#000",white:"#fff"},$0=BJ,jJ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},$J=jJ,UJ={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},wf=UJ,VJ={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ef=VJ,WJ={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},xg=WJ,HJ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Tf=HJ,qJ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Sf=qJ,GJ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},kf=GJ,ZJ=["mode","contrastThreshold","tonalOffset"],hP={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:$0.white,default:$0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},u4={text:{primary:$0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:$0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function pP(e,t,n,i){const c=i.light||i,d=i.dark||i*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=YO(e.main,c):t==="dark"&&(e.dark=KO(e.main,d)))}function XJ(e="light"){return e==="dark"?{main:Tf[200],light:Tf[50],dark:Tf[400]}:{main:Tf[700],light:Tf[400],dark:Tf[800]}}function KJ(e="light"){return e==="dark"?{main:wf[200],light:wf[50],dark:wf[400]}:{main:wf[500],light:wf[300],dark:wf[700]}}function YJ(e="light"){return e==="dark"?{main:Ef[500],light:Ef[300],dark:Ef[700]}:{main:Ef[700],light:Ef[400],dark:Ef[800]}}function JJ(e="light"){return e==="dark"?{main:Sf[400],light:Sf[300],dark:Sf[700]}:{main:Sf[700],light:Sf[500],dark:Sf[900]}}function QJ(e="light"){return e==="dark"?{main:kf[400],light:kf[300],dark:kf[700]}:{main:kf[800],light:kf[500],dark:kf[900]}}function eQ(e="light"){return e==="dark"?{main:xg[400],light:xg[300],dark:xg[700]}:{main:"#ed6c02",light:xg[500],dark:xg[900]}}function tQ(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:i=.2}=e,c=er(e,ZJ),d=e.primary||XJ(t),f=e.secondary||KJ(t),a=e.error||YJ(t),v=e.info||JJ(t),S=e.success||QJ(t),M=e.warning||eQ(t);function R(H){return EJ(H,u4.text.primary)>=n?u4.text.primary:hP.text.primary}const N=({color:H,name:le,mainShade:G=500,lightShade:X=300,darkShade:Q=700})=>{if(H=Pe({},H),!H.main&&H[G]&&(H.main=H[G]),!H.hasOwnProperty("main"))throw new Error(Qd(11,le?` (${le})`:"",G));if(typeof H.main!="string")throw new Error(Qd(12,le?` (${le})`:"",JSON.stringify(H.main)));return pP(H,"light",X,i),pP(H,"dark",Q,i),H.contrastText||(H.contrastText=R(H.main)),H},W={dark:u4,light:hP};return hs(Pe({common:Pe({},$0),mode:t,primary:N({color:d,name:"primary"}),secondary:N({color:f,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:N({color:a,name:"error"}),warning:N({color:M,name:"warning"}),info:N({color:v,name:"info"}),success:N({color:S,name:"success"}),grey:$J,contrastThreshold:n,getContrastText:R,augmentColor:N,tonalOffset:i},W[t]),c)}const nQ=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function rQ(e){return Math.round(e*1e5)/1e5}const fP={textTransform:"uppercase"},mP='"Roboto", "Helvetica", "Arial", sans-serif';function iQ(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:i=mP,fontSize:c=14,fontWeightLight:d=300,fontWeightRegular:f=400,fontWeightMedium:a=500,fontWeightBold:v=700,htmlFontSize:S=16,allVariants:M,pxToRem:R}=n,N=er(n,nQ),W=c/14,V=R||(G=>`${G/S*W}rem`),H=(G,X,Q,oe,he)=>Pe({fontFamily:i,fontWeight:G,fontSize:V(X),lineHeight:Q},i===mP?{letterSpacing:`${rQ(oe/X)}em`}:{},he,M),le={h1:H(d,96,1.167,-1.5),h2:H(d,60,1.2,-.5),h3:H(f,48,1.167,0),h4:H(f,34,1.235,.25),h5:H(f,24,1.334,0),h6:H(a,20,1.6,.15),subtitle1:H(f,16,1.75,.15),subtitle2:H(a,14,1.57,.1),body1:H(f,16,1.5,.15),body2:H(f,14,1.43,.15),button:H(a,14,1.75,.4,fP),caption:H(f,12,1.66,.4),overline:H(f,12,2.66,1,fP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return hs(Pe({htmlFontSize:S,pxToRem:V,fontFamily:i,fontSize:c,fontWeightLight:d,fontWeightRegular:f,fontWeightMedium:a,fontWeightBold:v},le),N,{clone:!1})}const oQ=.2,aQ=.14,sQ=.12;function Vi(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${oQ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${aQ})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${sQ})`].join(",")}const lQ=["none",Vi(0,2,1,-1,0,1,1,0,0,1,3,0),Vi(0,3,1,-2,0,2,2,0,0,1,5,0),Vi(0,3,3,-2,0,3,4,0,0,1,8,0),Vi(0,2,4,-1,0,4,5,0,0,1,10,0),Vi(0,3,5,-1,0,5,8,0,0,1,14,0),Vi(0,3,5,-1,0,6,10,0,0,1,18,0),Vi(0,4,5,-2,0,7,10,1,0,2,16,1),Vi(0,5,5,-3,0,8,10,1,0,3,14,2),Vi(0,5,6,-3,0,9,12,1,0,3,16,2),Vi(0,6,6,-3,0,10,14,1,0,4,18,3),Vi(0,6,7,-4,0,11,15,1,0,4,20,3),Vi(0,7,8,-4,0,12,17,2,0,5,22,4),Vi(0,7,8,-4,0,13,19,2,0,5,24,4),Vi(0,7,9,-4,0,14,21,2,0,5,26,4),Vi(0,8,9,-5,0,15,22,2,0,6,28,5),Vi(0,8,10,-5,0,16,24,2,0,6,30,5),Vi(0,8,11,-5,0,17,26,2,0,6,32,5),Vi(0,9,11,-5,0,18,28,2,0,7,34,6),Vi(0,9,12,-6,0,19,29,2,0,7,36,6),Vi(0,10,13,-6,0,20,31,3,0,8,38,7),Vi(0,10,13,-6,0,21,33,3,0,8,40,7),Vi(0,10,14,-6,0,22,35,3,0,8,42,7),Vi(0,11,14,-7,0,23,36,3,0,9,44,8),Vi(0,11,15,-7,0,24,38,3,0,9,46,8)],cQ=lQ,uQ=["duration","easing","delay"],dQ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},hQ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function gP(e){return`${Math.round(e)}ms`}function pQ(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function fQ(e){const t=Pe({},dQ,e.easing),n=Pe({},hQ,e.duration);return Pe({getAutoHeightDuration:pQ,create:(c=["all"],d={})=>{const{duration:f=n.standard,easing:a=t.easeInOut,delay:v=0}=d;return er(d,uQ),(Array.isArray(c)?c:[c]).map(S=>`${S} ${typeof f=="string"?f:gP(f)} ${a} ${typeof v=="string"?v:gP(v)}`).join(",")}},e,{easing:t,duration:n})}const mQ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},gQ=mQ,_Q=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function sb(e={},...t){const{mixins:n={},palette:i={},transitions:c={},typography:d={}}=e,f=er(e,_Q);if(e.vars)throw new Error(Qd(18));const a=tQ(i),v=ob(e);let S=hs(v,{mixins:FJ(v.breakpoints,n),palette:a,shadows:cQ.slice(),typography:iQ(a,d),transitions:fQ(c),zIndex:Pe({},gQ)});return S=hs(S,f),S=t.reduce((M,R)=>hs(M,R),S),S.unstable_sxConfig=Pe({},ib,f==null?void 0:f.unstable_sxConfig),S.unstable_sx=function(R){return HE({sx:R,theme:this})},S}const yQ=sb(),lb=yQ;function cb(){const e=GE(lb);return e[w1]||e}function Pi({props:e,name:t}){return XO({props:e,name:t,defaultTheme:lb,themeId:w1})}const qu=e=>Gg(e)&&e!=="classes",XE=Gg,vQ=ZO({themeId:w1,defaultTheme:lb,rootShouldForwardProp:qu}),$n=vQ,xQ=["theme"];function eL(e){let{theme:t}=e,n=er(e,xQ);const i=t[w1];return Z.jsx(IJ,Pe({},n,{themeId:i?w1:void 0,theme:i||t}))}const bQ=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},_P=bQ;function Lu(e){return typeof e=="string"}function wQ(e,t,n){return e===void 0||Lu(e)?t:Pe({},t,{ownerState:Pe({},t.ownerState,n)})}function EQ(e,t,n=(i,c)=>i===c){return e.length===t.length&&e.every((i,c)=>n(i,t[c]))}const TQ={disableDefaultClasses:!1},SQ=K.createContext(TQ);function tL(e){const{disableDefaultClasses:t}=K.useContext(SQ);return n=>t?"":e(n)}function kQ(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&typeof e[i]=="function"&&!t.includes(i)).forEach(i=>{n[i]=e[i]}),n}function l6(e,t,n){return typeof e=="function"?e(t,n):e}function yP(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function CQ(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:c,className:d}=e;if(!t){const W=rr(c==null?void 0:c.className,i==null?void 0:i.className,d,n==null?void 0:n.className),V=Pe({},n==null?void 0:n.style,c==null?void 0:c.style,i==null?void 0:i.style),H=Pe({},n,c,i);return W.length>0&&(H.className=W),Object.keys(V).length>0&&(H.style=V),{props:H,internalRef:void 0}}const f=kQ(Pe({},c,i)),a=yP(i),v=yP(c),S=t(f),M=rr(S==null?void 0:S.className,n==null?void 0:n.className,d,c==null?void 0:c.className,i==null?void 0:i.className),R=Pe({},S==null?void 0:S.style,n==null?void 0:n.style,c==null?void 0:c.style,i==null?void 0:i.style),N=Pe({},S,n,v,a);return M.length>0&&(N.className=M),Object.keys(R).length>0&&(N.style=R),{props:N,internalRef:S.ref}}const PQ=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Ds(e){var t;const{elementType:n,externalSlotProps:i,ownerState:c,skipResolvingSlotProps:d=!1}=e,f=er(e,PQ),a=d?{}:l6(i,c),{props:v,internalRef:S}=CQ(Pe({},f,{externalSlotProps:a})),M=vo(S,a==null?void 0:a.ref,(t=e.additionalProps)==null?void 0:t.ref);return wQ(n,Pe({},v,{ref:M}),c)}const IQ=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function AQ(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function MQ(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=i=>e.ownerDocument.querySelector(`input[type="radio"]${i}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function DQ(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||MQ(e))}function RQ(e){const t=[],n=[];return Array.from(e.querySelectorAll(IQ)).forEach((i,c)=>{const d=AQ(i);d===-1||!DQ(i)||(d===0?t.push(i):n.push({documentOrder:c,tabIndex:d,node:i}))}),n.sort((i,c)=>i.tabIndex===c.tabIndex?i.documentOrder-c.documentOrder:i.tabIndex-c.tabIndex).map(i=>i.node).concat(t)}function OQ(){return!0}function LQ(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:c=!1,getTabbable:d=RQ,isEnabled:f=OQ,open:a}=e,v=K.useRef(!1),S=K.useRef(null),M=K.useRef(null),R=K.useRef(null),N=K.useRef(null),W=K.useRef(!1),V=K.useRef(null),H=vo(t.ref,V),le=K.useRef(null);K.useEffect(()=>{!a||!V.current||(W.current=!n)},[n,a]),K.useEffect(()=>{if(!a||!V.current)return;const Q=Po(V.current);return V.current.contains(Q.activeElement)||(V.current.hasAttribute("tabIndex")||V.current.setAttribute("tabIndex","-1"),W.current&&V.current.focus()),()=>{c||(R.current&&R.current.focus&&(v.current=!0,R.current.focus()),R.current=null)}},[a]),K.useEffect(()=>{if(!a||!V.current)return;const Q=Po(V.current),oe=A=>{const{current:Re}=V;if(Re!==null){if(!Q.hasFocus()||i||!f()||v.current){v.current=!1;return}if(!Re.contains(Q.activeElement)){if(A&&N.current!==A.target||Q.activeElement!==N.current)N.current=null;else if(N.current!==null)return;if(!W.current)return;let ot=[];if((Q.activeElement===S.current||Q.activeElement===M.current)&&(ot=d(V.current)),ot.length>0){var _e,ze;const gt=!!((_e=le.current)!=null&&_e.shiftKey&&((ze=le.current)==null?void 0:ze.key)==="Tab"),Ze=ot[0],We=ot[ot.length-1];typeof Ze!="string"&&typeof We!="string"&&(gt?We.focus():Ze.focus())}else Re.focus()}}},he=A=>{le.current=A,!(i||!f()||A.key!=="Tab")&&Q.activeElement===V.current&&A.shiftKey&&(v.current=!0,M.current&&M.current.focus())};Q.addEventListener("focusin",oe),Q.addEventListener("keydown",he,!0);const be=setInterval(()=>{Q.activeElement&&Q.activeElement.tagName==="BODY"&&oe(null)},50);return()=>{clearInterval(be),Q.removeEventListener("focusin",oe),Q.removeEventListener("keydown",he,!0)}},[n,i,c,f,a,d]);const G=Q=>{R.current===null&&(R.current=Q.relatedTarget),W.current=!0,N.current=Q.target;const oe=t.props.onFocus;oe&&oe(Q)},X=Q=>{R.current===null&&(R.current=Q.relatedTarget),W.current=!0};return Z.jsxs(K.Fragment,{children:[Z.jsx("div",{tabIndex:a?0:-1,onFocus:X,ref:S,"data-testid":"sentinelStart"}),K.cloneElement(t,{ref:H,onFocus:G}),Z.jsx("div",{tabIndex:a?0:-1,onFocus:X,ref:M,"data-testid":"sentinelEnd"})]})}var ps="top",wl="bottom",El="right",fs="left",KE="auto",x_=[ps,wl,El,fs],E1="start",U0="end",zQ="clippingParents",nL="viewport",bg="popper",NQ="reference",vP=x_.reduce(function(e,t){return e.concat([t+"-"+E1,t+"-"+U0])},[]),rL=[].concat(x_,[KE]).reduce(function(e,t){return e.concat([t,t+"-"+E1,t+"-"+U0])},[]),FQ="beforeRead",BQ="read",jQ="afterRead",$Q="beforeMain",UQ="main",VQ="afterMain",WQ="beforeWrite",HQ="write",qQ="afterWrite",GQ=[FQ,BQ,jQ,$Q,UQ,VQ,WQ,HQ,qQ];function Kc(e){return e?(e.nodeName||"").toLowerCase():null}function $s(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function xp(e){var t=$s(e).Element;return e instanceof t||e instanceof Element}function vl(e){var t=$s(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function YE(e){if(typeof ShadowRoot>"u")return!1;var t=$s(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ZQ(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},c=t.attributes[n]||{},d=t.elements[n];!vl(d)||!Kc(d)||(Object.assign(d.style,i),Object.keys(c).forEach(function(f){var a=c[f];a===!1?d.removeAttribute(f):d.setAttribute(f,a===!0?"":a)}))})}function XQ(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var c=t.elements[i],d=t.attributes[i]||{},f=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=f.reduce(function(v,S){return v[S]="",v},{});!vl(c)||!Kc(c)||(Object.assign(c.style,a),Object.keys(d).forEach(function(v){c.removeAttribute(v)}))})}}const KQ={name:"applyStyles",enabled:!0,phase:"write",fn:ZQ,effect:XQ,requires:["computeStyles"]};function qc(e){return e.split("-")[0]}var op=Math.max,O2=Math.min,T1=Math.round;function c6(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function iL(){return!/^((?!chrome|android).)*safari/i.test(c6())}function S1(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),c=1,d=1;t&&vl(e)&&(c=e.offsetWidth>0&&T1(i.width)/e.offsetWidth||1,d=e.offsetHeight>0&&T1(i.height)/e.offsetHeight||1);var f=xp(e)?$s(e):window,a=f.visualViewport,v=!iL()&&n,S=(i.left+(v&&a?a.offsetLeft:0))/c,M=(i.top+(v&&a?a.offsetTop:0))/d,R=i.width/c,N=i.height/d;return{width:R,height:N,top:M,right:S+R,bottom:M+N,left:S,x:S,y:M}}function JE(e){var t=S1(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function oL(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&YE(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ju(e){return $s(e).getComputedStyle(e)}function YQ(e){return["table","td","th"].indexOf(Kc(e))>=0}function uh(e){return((xp(e)?e.ownerDocument:e.document)||window.document).documentElement}function ub(e){return Kc(e)==="html"?e:e.assignedSlot||e.parentNode||(YE(e)?e.host:null)||uh(e)}function xP(e){return!vl(e)||ju(e).position==="fixed"?null:e.offsetParent}function JQ(e){var t=/firefox/i.test(c6()),n=/Trident/i.test(c6());if(n&&vl(e)){var i=ju(e);if(i.position==="fixed")return null}var c=ub(e);for(YE(c)&&(c=c.host);vl(c)&&["html","body"].indexOf(Kc(c))<0;){var d=ju(c);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return c;c=c.parentNode}return null}function b_(e){for(var t=$s(e),n=xP(e);n&&YQ(n)&&ju(n).position==="static";)n=xP(n);return n&&(Kc(n)==="html"||Kc(n)==="body"&&ju(n).position==="static")?t:n||JQ(e)||t}function QE(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Zg(e,t,n){return op(e,O2(t,n))}function QQ(e,t,n){var i=Zg(e,t,n);return i>n?n:i}function aL(){return{top:0,right:0,bottom:0,left:0}}function sL(e){return Object.assign({},aL(),e)}function lL(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var eee=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,sL(typeof t!="number"?t:lL(t,x_))};function tee(e){var t,n=e.state,i=e.name,c=e.options,d=n.elements.arrow,f=n.modifiersData.popperOffsets,a=qc(n.placement),v=QE(a),S=[fs,El].indexOf(a)>=0,M=S?"height":"width";if(!(!d||!f)){var R=eee(c.padding,n),N=JE(d),W=v==="y"?ps:fs,V=v==="y"?wl:El,H=n.rects.reference[M]+n.rects.reference[v]-f[v]-n.rects.popper[M],le=f[v]-n.rects.reference[v],G=b_(d),X=G?v==="y"?G.clientHeight||0:G.clientWidth||0:0,Q=H/2-le/2,oe=R[W],he=X-N[M]-R[V],be=X/2-N[M]/2+Q,A=Zg(oe,be,he),Re=v;n.modifiersData[i]=(t={},t[Re]=A,t.centerOffset=A-be,t)}}function nee(e){var t=e.state,n=e.options,i=n.element,c=i===void 0?"[data-popper-arrow]":i;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||oL(t.elements.popper,c)&&(t.elements.arrow=c))}const ree={name:"arrow",enabled:!0,phase:"main",fn:tee,effect:nee,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function k1(e){return e.split("-")[1]}var iee={top:"auto",right:"auto",bottom:"auto",left:"auto"};function oee(e,t){var n=e.x,i=e.y,c=t.devicePixelRatio||1;return{x:T1(n*c)/c||0,y:T1(i*c)/c||0}}function bP(e){var t,n=e.popper,i=e.popperRect,c=e.placement,d=e.variation,f=e.offsets,a=e.position,v=e.gpuAcceleration,S=e.adaptive,M=e.roundOffsets,R=e.isFixed,N=f.x,W=N===void 0?0:N,V=f.y,H=V===void 0?0:V,le=typeof M=="function"?M({x:W,y:H}):{x:W,y:H};W=le.x,H=le.y;var G=f.hasOwnProperty("x"),X=f.hasOwnProperty("y"),Q=fs,oe=ps,he=window;if(S){var be=b_(n),A="clientHeight",Re="clientWidth";if(be===$s(n)&&(be=uh(n),ju(be).position!=="static"&&a==="absolute"&&(A="scrollHeight",Re="scrollWidth")),be=be,c===ps||(c===fs||c===El)&&d===U0){oe=wl;var _e=R&&be===he&&he.visualViewport?he.visualViewport.height:be[A];H-=_e-i.height,H*=v?1:-1}if(c===fs||(c===ps||c===wl)&&d===U0){Q=El;var ze=R&&be===he&&he.visualViewport?he.visualViewport.width:be[Re];W-=ze-i.width,W*=v?1:-1}}var ot=Object.assign({position:a},S&&iee),gt=M===!0?oee({x:W,y:H},$s(n)):{x:W,y:H};if(W=gt.x,H=gt.y,v){var Ze;return Object.assign({},ot,(Ze={},Ze[oe]=X?"0":"",Ze[Q]=G?"0":"",Ze.transform=(he.devicePixelRatio||1)<=1?"translate("+W+"px, "+H+"px)":"translate3d("+W+"px, "+H+"px, 0)",Ze))}return Object.assign({},ot,(t={},t[oe]=X?H+"px":"",t[Q]=G?W+"px":"",t.transform="",t))}function aee(e){var t=e.state,n=e.options,i=n.gpuAcceleration,c=i===void 0?!0:i,d=n.adaptive,f=d===void 0?!0:d,a=n.roundOffsets,v=a===void 0?!0:a,S={placement:qc(t.placement),variation:k1(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,bP(Object.assign({},S,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:v})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,bP(Object.assign({},S,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:v})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const see={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:aee,data:{}};var lv={passive:!0};function lee(e){var t=e.state,n=e.instance,i=e.options,c=i.scroll,d=c===void 0?!0:c,f=i.resize,a=f===void 0?!0:f,v=$s(t.elements.popper),S=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&S.forEach(function(M){M.addEventListener("scroll",n.update,lv)}),a&&v.addEventListener("resize",n.update,lv),function(){d&&S.forEach(function(M){M.removeEventListener("scroll",n.update,lv)}),a&&v.removeEventListener("resize",n.update,lv)}}const cee={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:lee,data:{}};var uee={left:"right",right:"left",bottom:"top",top:"bottom"};function $v(e){return e.replace(/left|right|bottom|top/g,function(t){return uee[t]})}var dee={start:"end",end:"start"};function wP(e){return e.replace(/start|end/g,function(t){return dee[t]})}function eT(e){var t=$s(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function tT(e){return S1(uh(e)).left+eT(e).scrollLeft}function hee(e,t){var n=$s(e),i=uh(e),c=n.visualViewport,d=i.clientWidth,f=i.clientHeight,a=0,v=0;if(c){d=c.width,f=c.height;var S=iL();(S||!S&&t==="fixed")&&(a=c.offsetLeft,v=c.offsetTop)}return{width:d,height:f,x:a+tT(e),y:v}}function pee(e){var t,n=uh(e),i=eT(e),c=(t=e.ownerDocument)==null?void 0:t.body,d=op(n.scrollWidth,n.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),f=op(n.scrollHeight,n.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),a=-i.scrollLeft+tT(e),v=-i.scrollTop;return ju(c||n).direction==="rtl"&&(a+=op(n.clientWidth,c?c.clientWidth:0)-d),{width:d,height:f,x:a,y:v}}function nT(e){var t=ju(e),n=t.overflow,i=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+c+i)}function cL(e){return["html","body","#document"].indexOf(Kc(e))>=0?e.ownerDocument.body:vl(e)&&nT(e)?e:cL(ub(e))}function Xg(e,t){var n;t===void 0&&(t=[]);var i=cL(e),c=i===((n=e.ownerDocument)==null?void 0:n.body),d=$s(i),f=c?[d].concat(d.visualViewport||[],nT(i)?i:[]):i,a=t.concat(f);return c?a:a.concat(Xg(ub(f)))}function u6(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function fee(e,t){var n=S1(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function EP(e,t,n){return t===nL?u6(hee(e,n)):xp(t)?fee(t,n):u6(pee(uh(e)))}function mee(e){var t=Xg(ub(e)),n=["absolute","fixed"].indexOf(ju(e).position)>=0,i=n&&vl(e)?b_(e):e;return xp(i)?t.filter(function(c){return xp(c)&&oL(c,i)&&Kc(c)!=="body"}):[]}function gee(e,t,n,i){var c=t==="clippingParents"?mee(e):[].concat(t),d=[].concat(c,[n]),f=d[0],a=d.reduce(function(v,S){var M=EP(e,S,i);return v.top=op(M.top,v.top),v.right=O2(M.right,v.right),v.bottom=O2(M.bottom,v.bottom),v.left=op(M.left,v.left),v},EP(e,f,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function uL(e){var t=e.reference,n=e.element,i=e.placement,c=i?qc(i):null,d=i?k1(i):null,f=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,v;switch(c){case ps:v={x:f,y:t.y-n.height};break;case wl:v={x:f,y:t.y+t.height};break;case El:v={x:t.x+t.width,y:a};break;case fs:v={x:t.x-n.width,y:a};break;default:v={x:t.x,y:t.y}}var S=c?QE(c):null;if(S!=null){var M=S==="y"?"height":"width";switch(d){case E1:v[S]=v[S]-(t[M]/2-n[M]/2);break;case U0:v[S]=v[S]+(t[M]/2-n[M]/2);break}}return v}function V0(e,t){t===void 0&&(t={});var n=t,i=n.placement,c=i===void 0?e.placement:i,d=n.strategy,f=d===void 0?e.strategy:d,a=n.boundary,v=a===void 0?zQ:a,S=n.rootBoundary,M=S===void 0?nL:S,R=n.elementContext,N=R===void 0?bg:R,W=n.altBoundary,V=W===void 0?!1:W,H=n.padding,le=H===void 0?0:H,G=sL(typeof le!="number"?le:lL(le,x_)),X=N===bg?NQ:bg,Q=e.rects.popper,oe=e.elements[V?X:N],he=gee(xp(oe)?oe:oe.contextElement||uh(e.elements.popper),v,M,f),be=S1(e.elements.reference),A=uL({reference:be,element:Q,strategy:"absolute",placement:c}),Re=u6(Object.assign({},Q,A)),_e=N===bg?Re:be,ze={top:he.top-_e.top+G.top,bottom:_e.bottom-he.bottom+G.bottom,left:he.left-_e.left+G.left,right:_e.right-he.right+G.right},ot=e.modifiersData.offset;if(N===bg&&ot){var gt=ot[c];Object.keys(ze).forEach(function(Ze){var We=[El,wl].indexOf(Ze)>=0?1:-1,He=[ps,wl].indexOf(Ze)>=0?"y":"x";ze[Ze]+=gt[He]*We})}return ze}function _ee(e,t){t===void 0&&(t={});var n=t,i=n.placement,c=n.boundary,d=n.rootBoundary,f=n.padding,a=n.flipVariations,v=n.allowedAutoPlacements,S=v===void 0?rL:v,M=k1(i),R=M?a?vP:vP.filter(function(V){return k1(V)===M}):x_,N=R.filter(function(V){return S.indexOf(V)>=0});N.length===0&&(N=R);var W=N.reduce(function(V,H){return V[H]=V0(e,{placement:H,boundary:c,rootBoundary:d,padding:f})[qc(H)],V},{});return Object.keys(W).sort(function(V,H){return W[V]-W[H]})}function yee(e){if(qc(e)===KE)return[];var t=$v(e);return[wP(e),t,wP(t)]}function vee(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var c=n.mainAxis,d=c===void 0?!0:c,f=n.altAxis,a=f===void 0?!0:f,v=n.fallbackPlacements,S=n.padding,M=n.boundary,R=n.rootBoundary,N=n.altBoundary,W=n.flipVariations,V=W===void 0?!0:W,H=n.allowedAutoPlacements,le=t.options.placement,G=qc(le),X=G===le,Q=v||(X||!V?[$v(le)]:yee(le)),oe=[le].concat(Q).reduce(function(Yt,tn){return Yt.concat(qc(tn)===KE?_ee(t,{placement:tn,boundary:M,rootBoundary:R,padding:S,flipVariations:V,allowedAutoPlacements:H}):tn)},[]),he=t.rects.reference,be=t.rects.popper,A=new Map,Re=!0,_e=oe[0],ze=0;ze<oe.length;ze++){var ot=oe[ze],gt=qc(ot),Ze=k1(ot)===E1,We=[ps,wl].indexOf(gt)>=0,He=We?"width":"height",rt=V0(t,{placement:ot,boundary:M,rootBoundary:R,altBoundary:N,padding:S}),tt=We?Ze?El:fs:Ze?wl:ps;he[He]>be[He]&&(tt=$v(tt));var Ne=$v(tt),et=[];if(d&&et.push(rt[gt]<=0),a&&et.push(rt[tt]<=0,rt[Ne]<=0),et.every(function(Yt){return Yt})){_e=ot,Re=!1;break}A.set(ot,et)}if(Re)for(var it=V?3:1,Dt=function(tn){var dn=oe.find(function(_n){var In=A.get(_n);if(In)return In.slice(0,tn).every(function(Jt){return Jt})});if(dn)return _e=dn,"break"},Tt=it;Tt>0;Tt--){var Rt=Dt(Tt);if(Rt==="break")break}t.placement!==_e&&(t.modifiersData[i]._skip=!0,t.placement=_e,t.reset=!0)}}const xee={name:"flip",enabled:!0,phase:"main",fn:vee,requiresIfExists:["offset"],data:{_skip:!1}};function TP(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function SP(e){return[ps,El,wl,fs].some(function(t){return e[t]>=0})}function bee(e){var t=e.state,n=e.name,i=t.rects.reference,c=t.rects.popper,d=t.modifiersData.preventOverflow,f=V0(t,{elementContext:"reference"}),a=V0(t,{altBoundary:!0}),v=TP(f,i),S=TP(a,c,d),M=SP(v),R=SP(S);t.modifiersData[n]={referenceClippingOffsets:v,popperEscapeOffsets:S,isReferenceHidden:M,hasPopperEscaped:R},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":M,"data-popper-escaped":R})}const wee={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bee};function Eee(e,t,n){var i=qc(e),c=[fs,ps].indexOf(i)>=0?-1:1,d=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,f=d[0],a=d[1];return f=f||0,a=(a||0)*c,[fs,El].indexOf(i)>=0?{x:a,y:f}:{x:f,y:a}}function Tee(e){var t=e.state,n=e.options,i=e.name,c=n.offset,d=c===void 0?[0,0]:c,f=rL.reduce(function(M,R){return M[R]=Eee(R,t.rects,d),M},{}),a=f[t.placement],v=a.x,S=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=v,t.modifiersData.popperOffsets.y+=S),t.modifiersData[i]=f}const See={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Tee};function kee(e){var t=e.state,n=e.name;t.modifiersData[n]=uL({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Cee={name:"popperOffsets",enabled:!0,phase:"read",fn:kee,data:{}};function Pee(e){return e==="x"?"y":"x"}function Iee(e){var t=e.state,n=e.options,i=e.name,c=n.mainAxis,d=c===void 0?!0:c,f=n.altAxis,a=f===void 0?!1:f,v=n.boundary,S=n.rootBoundary,M=n.altBoundary,R=n.padding,N=n.tether,W=N===void 0?!0:N,V=n.tetherOffset,H=V===void 0?0:V,le=V0(t,{boundary:v,rootBoundary:S,padding:R,altBoundary:M}),G=qc(t.placement),X=k1(t.placement),Q=!X,oe=QE(G),he=Pee(oe),be=t.modifiersData.popperOffsets,A=t.rects.reference,Re=t.rects.popper,_e=typeof H=="function"?H(Object.assign({},t.rects,{placement:t.placement})):H,ze=typeof _e=="number"?{mainAxis:_e,altAxis:_e}:Object.assign({mainAxis:0,altAxis:0},_e),ot=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,gt={x:0,y:0};if(be){if(d){var Ze,We=oe==="y"?ps:fs,He=oe==="y"?wl:El,rt=oe==="y"?"height":"width",tt=be[oe],Ne=tt+le[We],et=tt-le[He],it=W?-Re[rt]/2:0,Dt=X===E1?A[rt]:Re[rt],Tt=X===E1?-Re[rt]:-A[rt],Rt=t.elements.arrow,Yt=W&&Rt?JE(Rt):{width:0,height:0},tn=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:aL(),dn=tn[We],_n=tn[He],In=Zg(0,A[rt],Yt[rt]),Jt=Q?A[rt]/2-it-In-dn-ze.mainAxis:Dt-In-dn-ze.mainAxis,vn=Q?-A[rt]/2+it+In+_n+ze.mainAxis:Tt+In+_n+ze.mainAxis,Ft=t.elements.arrow&&b_(t.elements.arrow),nn=Ft?oe==="y"?Ft.clientTop||0:Ft.clientLeft||0:0,En=(Ze=ot==null?void 0:ot[oe])!=null?Ze:0,Zt=tt+Jt-En-nn,Ct=tt+vn-En,On=Zg(W?O2(Ne,Zt):Ne,tt,W?op(et,Ct):et);be[oe]=On,gt[oe]=On-tt}if(a){var an,Zn=oe==="x"?ps:fs,tr=oe==="x"?wl:El,Nn=be[he],Yn=he==="y"?"height":"width",Un=Nn+le[Zn],qn=Nn-le[tr],bn=[ps,fs].indexOf(G)!==-1,Ye=(an=ot==null?void 0:ot[he])!=null?an:0,Xt=bn?Un:Nn-A[Yn]-Re[Yn]-Ye+ze.altAxis,rn=bn?Nn+A[Yn]+Re[Yn]-Ye-ze.altAxis:qn,qt=W&&bn?QQ(Xt,Nn,rn):Zg(W?Xt:Un,Nn,W?rn:qn);be[he]=qt,gt[he]=qt-Nn}t.modifiersData[i]=gt}}const Aee={name:"preventOverflow",enabled:!0,phase:"main",fn:Iee,requiresIfExists:["offset"]};function Mee(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Dee(e){return e===$s(e)||!vl(e)?eT(e):Mee(e)}function Ree(e){var t=e.getBoundingClientRect(),n=T1(t.width)/e.offsetWidth||1,i=T1(t.height)/e.offsetHeight||1;return n!==1||i!==1}function Oee(e,t,n){n===void 0&&(n=!1);var i=vl(t),c=vl(t)&&Ree(t),d=uh(t),f=S1(e,c,n),a={scrollLeft:0,scrollTop:0},v={x:0,y:0};return(i||!i&&!n)&&((Kc(t)!=="body"||nT(d))&&(a=Dee(t)),vl(t)?(v=S1(t,!0),v.x+=t.clientLeft,v.y+=t.clientTop):d&&(v.x=tT(d))),{x:f.left+a.scrollLeft-v.x,y:f.top+a.scrollTop-v.y,width:f.width,height:f.height}}function Lee(e){var t=new Map,n=new Set,i=[];e.forEach(function(d){t.set(d.name,d)});function c(d){n.add(d.name);var f=[].concat(d.requires||[],d.requiresIfExists||[]);f.forEach(function(a){if(!n.has(a)){var v=t.get(a);v&&c(v)}}),i.push(d)}return e.forEach(function(d){n.has(d.name)||c(d)}),i}function zee(e){var t=Lee(e);return GQ.reduce(function(n,i){return n.concat(t.filter(function(c){return c.phase===i}))},[])}function Nee(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Fee(e){var t=e.reduce(function(n,i){var c=n[i.name];return n[i.name]=c?Object.assign({},c,i,{options:Object.assign({},c.options,i.options),data:Object.assign({},c.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var kP={placement:"bottom",modifiers:[],strategy:"absolute"};function CP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Bee(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,c=t.defaultOptions,d=c===void 0?kP:c;return function(a,v,S){S===void 0&&(S=d);var M={placement:"bottom",orderedModifiers:[],options:Object.assign({},kP,d),modifiersData:{},elements:{reference:a,popper:v},attributes:{},styles:{}},R=[],N=!1,W={state:M,setOptions:function(G){var X=typeof G=="function"?G(M.options):G;H(),M.options=Object.assign({},d,M.options,X),M.scrollParents={reference:xp(a)?Xg(a):a.contextElement?Xg(a.contextElement):[],popper:Xg(v)};var Q=zee(Fee([].concat(i,M.options.modifiers)));return M.orderedModifiers=Q.filter(function(oe){return oe.enabled}),V(),W.update()},forceUpdate:function(){if(!N){var G=M.elements,X=G.reference,Q=G.popper;if(CP(X,Q)){M.rects={reference:Oee(X,b_(Q),M.options.strategy==="fixed"),popper:JE(Q)},M.reset=!1,M.placement=M.options.placement,M.orderedModifiers.forEach(function(ze){return M.modifiersData[ze.name]=Object.assign({},ze.data)});for(var oe=0;oe<M.orderedModifiers.length;oe++){if(M.reset===!0){M.reset=!1,oe=-1;continue}var he=M.orderedModifiers[oe],be=he.fn,A=he.options,Re=A===void 0?{}:A,_e=he.name;typeof be=="function"&&(M=be({state:M,options:Re,name:_e,instance:W})||M)}}}},update:Nee(function(){return new Promise(function(le){W.forceUpdate(),le(M)})}),destroy:function(){H(),N=!0}};if(!CP(a,v))return W;W.setOptions(S).then(function(le){!N&&S.onFirstUpdate&&S.onFirstUpdate(le)});function V(){M.orderedModifiers.forEach(function(le){var G=le.name,X=le.options,Q=X===void 0?{}:X,oe=le.effect;if(typeof oe=="function"){var he=oe({state:M,name:G,instance:W,options:Q}),be=function(){};R.push(he||be)}})}function H(){R.forEach(function(le){return le()}),R=[]}return W}}var jee=[cee,Cee,see,KQ,See,xee,Aee,ree,wee],$ee=Bee({defaultModifiers:jee});function Uee(e){return typeof e=="function"?e():e}const Vee=K.forwardRef(function(t,n){const{children:i,container:c,disablePortal:d=!1}=t,[f,a]=K.useState(null),v=vo(K.isValidElement(i)?i.ref:null,n);if(Xc(()=>{d||a(Uee(c)||document.body)},[c,d]),Xc(()=>{if(f&&!d)return N0(n,f),()=>{N0(n,null)}},[n,f,d]),d){if(K.isValidElement(i)){const S={ref:v};return K.cloneElement(i,S)}return Z.jsx(K.Fragment,{children:i})}return Z.jsx(K.Fragment,{children:f&&mp.createPortal(i,f)})}),dL=Vee;function Wee(e){return _i("MuiPopper",e)}Ci("MuiPopper",["root"]);const Hee=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],qee=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Gee(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function d6(e){return typeof e=="function"?e():e}function Zee(e){return e.nodeType!==void 0}const Xee=()=>ki({root:["root"]},tL(Wee)),Kee={},Yee=K.forwardRef(function(t,n){var i;const{anchorEl:c,children:d,direction:f,disablePortal:a,modifiers:v,open:S,placement:M,popperOptions:R,popperRef:N,slotProps:W={},slots:V={},TransitionProps:H}=t,le=er(t,Hee),G=K.useRef(null),X=vo(G,n),Q=K.useRef(null),oe=vo(Q,N),he=K.useRef(oe);Xc(()=>{he.current=oe},[oe]),K.useImperativeHandle(N,()=>Q.current,[]);const be=Gee(M,f),[A,Re]=K.useState(be),[_e,ze]=K.useState(d6(c));K.useEffect(()=>{Q.current&&Q.current.forceUpdate()}),K.useEffect(()=>{c&&ze(d6(c))},[c]),Xc(()=>{if(!_e||!S)return;const He=Ne=>{Re(Ne.placement)};let rt=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ne})=>{He(Ne)}}];v!=null&&(rt=rt.concat(v)),R&&R.modifiers!=null&&(rt=rt.concat(R.modifiers));const tt=$ee(_e,G.current,Pe({placement:be},R,{modifiers:rt}));return he.current(tt),()=>{tt.destroy(),he.current(null)}},[_e,a,v,S,R,be]);const ot={placement:A};H!==null&&(ot.TransitionProps=H);const gt=Xee(),Ze=(i=V.root)!=null?i:"div",We=Ds({elementType:Ze,externalSlotProps:W.root,externalForwardedProps:le,additionalProps:{role:"tooltip",ref:X},ownerState:t,className:gt.root});return Z.jsx(Ze,Pe({},We,{children:typeof d=="function"?d(ot):d}))}),Jee=K.forwardRef(function(t,n){const{anchorEl:i,children:c,container:d,direction:f="ltr",disablePortal:a=!1,keepMounted:v=!1,modifiers:S,open:M,placement:R="bottom",popperOptions:N=Kee,popperRef:W,style:V,transition:H=!1,slotProps:le={},slots:G={}}=t,X=er(t,qee),[Q,oe]=K.useState(!0),he=()=>{oe(!1)},be=()=>{oe(!0)};if(!v&&!M&&(!H||Q))return null;let A;if(d)A=d;else if(i){const ze=d6(i);A=ze&&Zee(ze)?Po(ze).body:Po(null).body}const Re=!M&&v&&(!H||Q)?"none":void 0,_e=H?{in:M,onEnter:he,onExited:be}:void 0;return Z.jsx(dL,{disablePortal:a,container:A,children:Z.jsx(Yee,Pe({anchorEl:i,direction:f,disablePortal:a,modifiers:S,ref:n,open:H?!Q:M,placement:R,popperOptions:N,popperRef:W,slotProps:le,slots:G},X,{style:Pe({position:"fixed",top:0,left:0,display:Re},V),TransitionProps:_e,children:c}))})}),Qee=Jee;function ete(e){const t=Po(e);return t.body===e?eh(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Kg(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function PP(e){return parseInt(eh(e).getComputedStyle(e).paddingRight,10)||0}function tte(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,i=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||i}function IP(e,t,n,i,c){const d=[t,n,...i];[].forEach.call(e.children,f=>{const a=d.indexOf(f)===-1,v=!tte(f);a&&v&&Kg(f,c)})}function d4(e,t){let n=-1;return e.some((i,c)=>t(i)?(n=c,!0):!1),n}function nte(e,t){const n=[],i=e.container;if(!t.disableScrollLock){if(ete(i)){const f=wO(Po(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${PP(i)+f}px`;const a=Po(i).querySelectorAll(".mui-fixed");[].forEach.call(a,v=>{n.push({value:v.style.paddingRight,property:"padding-right",el:v}),v.style.paddingRight=`${PP(v)+f}px`})}let d;if(i.parentNode instanceof DocumentFragment)d=Po(i).body;else{const f=i.parentElement,a=eh(i);d=(f==null?void 0:f.nodeName)==="HTML"&&a.getComputedStyle(f).overflowY==="scroll"?f:i}n.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{n.forEach(({value:d,el:f,property:a})=>{d?f.style.setProperty(a,d):f.style.removeProperty(a)})}}function rte(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class ite{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&Kg(t.modalRef,!1);const c=rte(n);IP(n,t.mount,t.modalRef,c,!0);const d=d4(this.containers,f=>f.container===n);return d!==-1?(this.containers[d].modals.push(t),i):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:c}),i)}mount(t,n){const i=d4(this.containers,d=>d.modals.indexOf(t)!==-1),c=this.containers[i];c.restore||(c.restore=nte(c,n))}remove(t,n=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const c=d4(this.containers,f=>f.modals.indexOf(t)!==-1),d=this.containers[c];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(i,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&Kg(t.modalRef,n),IP(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(c,1);else{const f=d.modals[d.modals.length-1];f.modalRef&&Kg(f.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function ote(e){return _i("MuiModal",e)}Ci("MuiModal",["root","hidden","backdrop"]);const ate=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],ste=e=>{const{open:t,exited:n}=e;return ki({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},tL(ote))};function lte(e){return typeof e=="function"?e():e}function cte(e){return e?e.props.hasOwnProperty("in"):!1}const ute=new ite,dte=K.forwardRef(function(t,n){var i,c;const{children:d,closeAfterTransition:f=!1,container:a,disableAutoFocus:v=!1,disableEnforceFocus:S=!1,disableEscapeKeyDown:M=!1,disablePortal:R=!1,disableRestoreFocus:N=!1,disableScrollLock:W=!1,hideBackdrop:V=!1,keepMounted:H=!1,manager:le=ute,onBackdropClick:G,onClose:X,onKeyDown:Q,open:oe,onTransitionEnter:he,onTransitionExited:be,slotProps:A={},slots:Re={}}=t,_e=er(t,ate),ze=le,[ot,gt]=K.useState(!oe),Ze=K.useRef({}),We=K.useRef(null),He=K.useRef(null),rt=vo(He,n),tt=cte(d),Ne=(i=t["aria-hidden"])!=null?i:!0,et=()=>Po(We.current),it=()=>(Ze.current.modalRef=He.current,Ze.current.mountNode=We.current,Ze.current),Dt=()=>{ze.mount(it(),{disableScrollLock:W}),He.current&&(He.current.scrollTop=0)},Tt=ls(()=>{const an=lte(a)||et().body;ze.add(it(),an),He.current&&Dt()}),Rt=K.useCallback(()=>ze.isTopModal(it()),[ze]),Yt=ls(an=>{We.current=an,!(!an||!He.current)&&(oe&&Rt()?Dt():Kg(He.current,Ne))}),tn=K.useCallback(()=>{ze.remove(it(),Ne)},[ze,Ne]);K.useEffect(()=>()=>{tn()},[tn]),K.useEffect(()=>{oe?Tt():(!tt||!f)&&tn()},[oe,tn,tt,f,Tt]);const dn=Pe({},t,{closeAfterTransition:f,disableAutoFocus:v,disableEnforceFocus:S,disableEscapeKeyDown:M,disablePortal:R,disableRestoreFocus:N,disableScrollLock:W,exited:ot,hideBackdrop:V,keepMounted:H}),_n=ste(dn),In=()=>{gt(!1),he&&he()},Jt=()=>{gt(!0),be&&be(),f&&tn()},vn=an=>{an.target===an.currentTarget&&(G&&G(an),X&&X(an,"backdropClick"))},Ft=an=>{Q&&Q(an),!(an.key!=="Escape"||!Rt())&&(M||(an.stopPropagation(),X&&X(an,"escapeKeyDown")))},nn={};d.props.tabIndex===void 0&&(nn.tabIndex="-1"),tt&&(nn.onEnter=r6(In,d.props.onEnter),nn.onExited=r6(Jt,d.props.onExited));const En=(c=Re.root)!=null?c:"div",Zt=Ds({elementType:En,externalSlotProps:A.root,externalForwardedProps:_e,additionalProps:{ref:rt,role:"presentation",onKeyDown:Ft},className:_n.root,ownerState:dn}),Ct=Re.backdrop,On=Ds({elementType:Ct,externalSlotProps:A.backdrop,additionalProps:{"aria-hidden":!0,onClick:vn,open:oe},className:_n.backdrop,ownerState:dn});return!H&&!oe&&(!tt||ot)?null:Z.jsx(dL,{ref:Yt,container:a,disablePortal:R,children:Z.jsxs(En,Pe({},Zt,{children:[!V&&Ct?Z.jsx(Ct,Pe({},On)):null,Z.jsx(LQ,{disableEnforceFocus:S,disableAutoFocus:v,disableRestoreFocus:N,isEnabled:Rt,open:oe,children:K.cloneElement(d,nn)})]}))})}),hte=dte,pte=2;function hL(e,t){return e-t}function wg(e,t,n){return e==null?t:Math.min(Math.max(t,e),n)}function AP(e,t){var n;const{index:i}=(n=e.reduce((c,d,f)=>{const a=Math.abs(t-d);return c===null||a<c.distance||a===c.distance?{distance:a,index:f}:c},null))!=null?n:{};return i}function cv(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let i=0;i<n.changedTouches.length;i+=1){const c=n.changedTouches[i];if(c.identifier===t.current)return{x:c.clientX,y:c.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function L2(e,t,n){return(e-t)*100/(n-t)}function fte(e,t,n){return(n-t)*e+t}function mte(e){if(Math.abs(e)<1){const n=e.toExponential().split("e-"),i=n[0].split(".")[1];return(i?i.length:0)+parseInt(n[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function gte(e,t,n){const i=Math.round((e-n)/t)*t+n;return Number(i.toFixed(mte(t)))}function MP({values:e,newValue:t,index:n}){const i=e.slice();return i[n]=t,i.sort(hL)}function uv({sliderRef:e,activeIndex:t,setActive:n}){var i,c;const d=Po(e.current);if(!((i=e.current)!=null&&i.contains(d.activeElement))||Number(d==null||(c=d.activeElement)==null?void 0:c.getAttribute("data-index"))!==t){var f;(f=e.current)==null||f.querySelector(`[type="range"][data-index="${t}"]`).focus()}n&&n(t)}function dv(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?EQ(e,t):!1}const _te={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},yte=e=>e;let hv;function h4(){return hv===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?hv=CSS.supports("touch-action","none"):hv=!0),hv}function vte(e){const{"aria-labelledby":t,defaultValue:n,disabled:i=!1,disableSwap:c=!1,isRtl:d=!1,marks:f=!1,max:a=100,min:v=0,name:S,onChange:M,onChangeCommitted:R,orientation:N="horizontal",rootRef:W,scale:V=yte,step:H=1,tabIndex:le,value:G}=e,X=K.useRef(),[Q,oe]=K.useState(-1),[he,be]=K.useState(-1),[A,Re]=K.useState(!1),_e=K.useRef(0),[ze,ot]=ip({controlled:G,default:n??v,name:"Slider"}),gt=M&&((Ye,Xt,rn)=>{const qt=Ye.nativeEvent||Ye,en=new qt.constructor(qt.type,qt);Object.defineProperty(en,"target",{writable:!0,value:{value:Xt,name:S}}),M(en,Xt,rn)}),Ze=Array.isArray(ze);let We=Ze?ze.slice().sort(hL):[ze];We=We.map(Ye=>wg(Ye,v,a));const He=f===!0&&H!==null?[...Array(Math.floor((a-v)/H)+1)].map((Ye,Xt)=>({value:v+H*Xt})):f||[],rt=He.map(Ye=>Ye.value),{isFocusVisibleRef:tt,onBlur:Ne,onFocus:et,ref:it}=AE(),[Dt,Tt]=K.useState(-1),Rt=K.useRef(),Yt=vo(it,Rt),tn=vo(W,Yt),dn=Ye=>Xt=>{var rn;const qt=Number(Xt.currentTarget.getAttribute("data-index"));et(Xt),tt.current===!0&&Tt(qt),be(qt),Ye==null||(rn=Ye.onFocus)==null||rn.call(Ye,Xt)},_n=Ye=>Xt=>{var rn;Ne(Xt),tt.current===!1&&Tt(-1),be(-1),Ye==null||(rn=Ye.onBlur)==null||rn.call(Ye,Xt)};Xc(()=>{if(i&&Rt.current.contains(document.activeElement)){var Ye;(Ye=document.activeElement)==null||Ye.blur()}},[i]),i&&Q!==-1&&oe(-1),i&&Dt!==-1&&Tt(-1);const In=Ye=>Xt=>{var rn;(rn=Ye.onChange)==null||rn.call(Ye,Xt);const qt=Number(Xt.currentTarget.getAttribute("data-index")),en=We[qt],on=rt.indexOf(en);let yn=Xt.target.valueAsNumber;if(He&&H==null){const Dn=rt[rt.length-1];yn>Dn?yn=Dn:yn<rt[0]?yn=rt[0]:yn=yn<en?rt[on-1]:rt[on+1]}if(yn=wg(yn,v,a),Ze){c&&(yn=wg(yn,We[qt-1]||-1/0,We[qt+1]||1/0));const Dn=yn;yn=MP({values:We,newValue:yn,index:qt});let Fn=qt;c||(Fn=yn.indexOf(Dn)),uv({sliderRef:Rt,activeIndex:Fn})}ot(yn),Tt(qt),gt&&!dv(yn,ze)&&gt(Xt,yn,qt),R&&R(Xt,yn)},Jt=K.useRef();let vn=N;d&&N==="horizontal"&&(vn+="-reverse");const Ft=({finger:Ye,move:Xt=!1})=>{const{current:rn}=Rt,{width:qt,height:en,bottom:on,left:yn}=rn.getBoundingClientRect();let Dn;vn.indexOf("vertical")===0?Dn=(on-Ye.y)/en:Dn=(Ye.x-yn)/qt,vn.indexOf("-reverse")!==-1&&(Dn=1-Dn);let Fn;if(Fn=fte(Dn,v,a),H)Fn=gte(Fn,H,v);else{const Ar=AP(rt,Fn);Fn=rt[Ar]}Fn=wg(Fn,v,a);let nr=0;if(Ze){Xt?nr=Jt.current:nr=AP(We,Fn),c&&(Fn=wg(Fn,We[nr-1]||-1/0,We[nr+1]||1/0));const Ar=Fn;Fn=MP({values:We,newValue:Fn,index:nr}),c&&Xt||(nr=Fn.indexOf(Ar),Jt.current=nr)}return{newValue:Fn,activeIndex:nr}},nn=ls(Ye=>{const Xt=cv(Ye,X);if(!Xt)return;if(_e.current+=1,Ye.type==="mousemove"&&Ye.buttons===0){En(Ye);return}const{newValue:rn,activeIndex:qt}=Ft({finger:Xt,move:!0});uv({sliderRef:Rt,activeIndex:qt,setActive:oe}),ot(rn),!A&&_e.current>pte&&Re(!0),gt&&!dv(rn,ze)&&gt(Ye,rn,qt)}),En=ls(Ye=>{const Xt=cv(Ye,X);if(Re(!1),!Xt)return;const{newValue:rn}=Ft({finger:Xt,move:!0});oe(-1),Ye.type==="touchend"&&be(-1),R&&R(Ye,rn),X.current=void 0,Ct()}),Zt=ls(Ye=>{if(i)return;h4()||Ye.preventDefault();const Xt=Ye.changedTouches[0];Xt!=null&&(X.current=Xt.identifier);const rn=cv(Ye,X);if(rn!==!1){const{newValue:en,activeIndex:on}=Ft({finger:rn});uv({sliderRef:Rt,activeIndex:on,setActive:oe}),ot(en),gt&&!dv(en,ze)&&gt(Ye,en,on)}_e.current=0;const qt=Po(Rt.current);qt.addEventListener("touchmove",nn),qt.addEventListener("touchend",En)}),Ct=K.useCallback(()=>{const Ye=Po(Rt.current);Ye.removeEventListener("mousemove",nn),Ye.removeEventListener("mouseup",En),Ye.removeEventListener("touchmove",nn),Ye.removeEventListener("touchend",En)},[En,nn]);K.useEffect(()=>{const{current:Ye}=Rt;return Ye.addEventListener("touchstart",Zt,{passive:h4()}),()=>{Ye.removeEventListener("touchstart",Zt,{passive:h4()}),Ct()}},[Ct,Zt]),K.useEffect(()=>{i&&Ct()},[i,Ct]);const On=Ye=>Xt=>{var rn;if((rn=Ye.onMouseDown)==null||rn.call(Ye,Xt),i||Xt.defaultPrevented||Xt.button!==0)return;Xt.preventDefault();const qt=cv(Xt,X);if(qt!==!1){const{newValue:on,activeIndex:yn}=Ft({finger:qt});uv({sliderRef:Rt,activeIndex:yn,setActive:oe}),ot(on),gt&&!dv(on,ze)&&gt(Xt,on,yn)}_e.current=0;const en=Po(Rt.current);en.addEventListener("mousemove",nn),en.addEventListener("mouseup",En)},an=L2(Ze?We[0]:v,v,a),Zn=L2(We[We.length-1],v,a)-an,tr=(Ye={})=>{const Xt={onMouseDown:On(Ye||{})},rn=Pe({},Ye,Xt);return Pe({ref:tn},rn)},Nn=Ye=>Xt=>{var rn;(rn=Ye.onMouseOver)==null||rn.call(Ye,Xt);const qt=Number(Xt.currentTarget.getAttribute("data-index"));be(qt)},Yn=Ye=>Xt=>{var rn;(rn=Ye.onMouseLeave)==null||rn.call(Ye,Xt),be(-1)};return{active:Q,axis:vn,axisProps:_te,dragging:A,focusedThumbIndex:Dt,getHiddenInputProps:(Ye={})=>{var Xt;const rn={onChange:In(Ye||{}),onFocus:dn(Ye||{}),onBlur:_n(Ye||{})},qt=Pe({},Ye,rn);return Pe({tabIndex:le,"aria-labelledby":t,"aria-orientation":N,"aria-valuemax":V(a),"aria-valuemin":V(v),name:S,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(Xt=e.step)!=null?Xt:void 0,disabled:i},qt,{style:Pe({},nK,{direction:d?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:tr,getThumbProps:(Ye={})=>{const Xt={onMouseOver:Nn(Ye||{}),onMouseLeave:Yn(Ye||{})};return Pe({},Ye,Xt)},marks:He,open:he,range:Ze,rootRef:tn,trackLeap:Zn,trackOffset:an,values:We,getThumbStyle:Ye=>({pointerEvents:Q!==-1&&Q!==Ye?"none":void 0})}}const xte=["onChange","maxRows","minRows","style","value"];function pv(e){return parseInt(e,10)||0}const bte={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function DP(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const wte=K.forwardRef(function(t,n){const{onChange:i,maxRows:c,minRows:d=1,style:f,value:a}=t,v=er(t,xte),{current:S}=K.useRef(a!=null),M=K.useRef(null),R=vo(n,M),N=K.useRef(null),W=K.useRef(0),[V,H]=K.useState({outerHeightStyle:0}),le=K.useCallback(()=>{const he=M.current,A=eh(he).getComputedStyle(he);if(A.width==="0px")return{outerHeightStyle:0};const Re=N.current;Re.style.width=A.width,Re.value=he.value||t.placeholder||"x",Re.value.slice(-1)===`
`&&(Re.value+=" ");const _e=A.boxSizing,ze=pv(A.paddingBottom)+pv(A.paddingTop),ot=pv(A.borderBottomWidth)+pv(A.borderTopWidth),gt=Re.scrollHeight;Re.value="x";const Ze=Re.scrollHeight;let We=gt;d&&(We=Math.max(Number(d)*Ze,We)),c&&(We=Math.min(Number(c)*Ze,We)),We=Math.max(We,Ze);const He=We+(_e==="border-box"?ze+ot:0),rt=Math.abs(We-gt)<=1;return{outerHeightStyle:He,overflow:rt}},[c,d,t.placeholder]),G=(he,be)=>{const{outerHeightStyle:A,overflow:Re}=be;return W.current<20&&(A>0&&Math.abs((he.outerHeightStyle||0)-A)>1||he.overflow!==Re)?(W.current+=1,{overflow:Re,outerHeightStyle:A}):he},X=K.useCallback(()=>{const he=le();DP(he)||H(be=>G(be,he))},[le]),Q=()=>{const he=le();DP(he)||mp.flushSync(()=>{H(be=>G(be,he))})};K.useEffect(()=>{const he=PE(()=>{W.current=0,M.current&&Q()});let be;const A=M.current,Re=eh(A);return Re.addEventListener("resize",he),typeof ResizeObserver<"u"&&(be=new ResizeObserver(he),be.observe(A)),()=>{he.clear(),Re.removeEventListener("resize",he),be&&be.disconnect()}}),Xc(()=>{X()}),K.useEffect(()=>{W.current=0},[a]);const oe=he=>{W.current=0,S||X(),i&&i(he)};return Z.jsxs(K.Fragment,{children:[Z.jsx("textarea",Pe({value:a,onChange:oe,ref:R,rows:d,style:Pe({height:V.outerHeightStyle,overflow:V.overflow?"hidden":void 0},f)},v)),Z.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:N,tabIndex:-1,style:Pe({},bte.shadow,f,{paddingTop:0,paddingBottom:0})})]})}),Ete=wte;function RP(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function Tte(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:i,matchFrom:c="any",stringify:d,trim:f=!1}=e;return(a,{inputValue:v,getOptionLabel:S})=>{let M=f?v.trim():v;n&&(M=M.toLowerCase()),t&&(M=RP(M));const R=M?a.filter(N=>{let W=(d||S)(N);return n&&(W=W.toLowerCase()),t&&(W=RP(W)),c==="start"?W.indexOf(M)===0:W.indexOf(M)>-1}):a;return typeof i=="number"?R.slice(0,i):R}}function p4(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const Ste=Tte(),OP=5,kte=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function Cte(e){const{unstable_isActiveElementInListbox:t=kte,unstable_classNamePrefix:n="Mui",autoComplete:i=!1,autoHighlight:c=!1,autoSelect:d=!1,blurOnSelect:f=!1,clearOnBlur:a=!e.freeSolo,clearOnEscape:v=!1,componentName:S="useAutocomplete",defaultValue:M=e.multiple?[]:null,disableClearable:R=!1,disableCloseOnSelect:N=!1,disabled:W,disabledItemsFocusable:V=!1,disableListWrap:H=!1,filterOptions:le=Ste,filterSelectedOptions:G=!1,freeSolo:X=!1,getOptionDisabled:Q,getOptionLabel:oe=Ge=>{var Ee;return(Ee=Ge.label)!=null?Ee:Ge},groupBy:he,handleHomeEndKeys:be=!e.freeSolo,id:A,includeInputInList:Re=!1,inputValue:_e,isOptionEqualToValue:ze=(Ge,Ee)=>Ge===Ee,multiple:ot=!1,onChange:gt,onClose:Ze,onHighlightChange:We,onInputChange:He,onOpen:rt,open:tt,openOnFocus:Ne=!1,options:et,readOnly:it=!1,selectOnFocus:Dt=!e.freeSolo,value:Tt}=e,Rt=IE(A);let Yt=oe;Yt=Ge=>{const Ee=oe(Ge);return typeof Ee!="string"?String(Ee):Ee};const tn=K.useRef(!1),dn=K.useRef(!0),_n=K.useRef(null),In=K.useRef(null),[Jt,vn]=K.useState(null),[Ft,nn]=K.useState(-1),En=c?0:-1,Zt=K.useRef(En),[Ct,On]=ip({controlled:Tt,default:M,name:S}),[an,Zn]=ip({controlled:_e,default:"",name:S,state:"inputValue"}),[tr,Nn]=K.useState(!1),Yn=K.useCallback((Ge,Ee)=>{if(!(ot?Ct.length<Ee.length:Ee!==null)&&!a)return;let Ot;if(ot)Ot="";else if(Ee==null)Ot="";else{const ln=Yt(Ee);Ot=typeof ln=="string"?ln:""}an!==Ot&&(Zn(Ot),He&&He(Ge,Ot,"reset"))},[Yt,an,ot,He,Zn,a,Ct]),[Un,qn]=ip({controlled:tt,default:!1,name:S,state:"open"}),[bn,Ye]=K.useState(!0),Xt=!ot&&Ct!=null&&an===Yt(Ct),rn=Un&&!it,qt=rn?le(et.filter(Ge=>!(G&&(ot?Ct:[Ct]).some(Ee=>Ee!==null&&ze(Ge,Ee)))),{inputValue:Xt&&bn?"":an,getOptionLabel:Yt}):[],en=eK({filteredOptions:qt,value:Ct,inputValue:an});K.useEffect(()=>{const Ge=Ct!==en.value;tr&&!Ge||X&&!Ge||Yn(null,Ct)},[Ct,Yn,tr,en.value,X]);const on=Un&&qt.length>0&&!it,yn=ls(Ge=>{Ge===-1?_n.current.focus():Jt.querySelector(`[data-tag-index="${Ge}"]`).focus()});K.useEffect(()=>{ot&&Ft>Ct.length-1&&(nn(-1),yn(-1))},[Ct,ot,Ft,yn]);function Dn(Ge,Ee){if(!In.current||Ge===-1)return-1;let lt=Ge;for(;;){if(Ee==="next"&&lt===qt.length||Ee==="previous"&&lt===-1)return-1;const Ot=In.current.querySelector(`[data-option-index="${lt}"]`),ln=V?!1:!Ot||Ot.disabled||Ot.getAttribute("aria-disabled")==="true";if(Ot&&!Ot.hasAttribute("tabindex")||ln)lt+=Ee==="next"?1:-1;else return lt}}const Fn=ls(({event:Ge,index:Ee,reason:lt="auto"})=>{if(Zt.current=Ee,Ee===-1?_n.current.removeAttribute("aria-activedescendant"):_n.current.setAttribute("aria-activedescendant",`${Rt}-option-${Ee}`),We&&We(Ge,Ee===-1?null:qt[Ee],lt),!In.current)return;const Ot=In.current.querySelector(`[role="option"].${n}-focused`);Ot&&(Ot.classList.remove(`${n}-focused`),Ot.classList.remove(`${n}-focusVisible`));let ln=In.current;if(In.current.getAttribute("role")!=="listbox"&&(ln=In.current.parentElement.querySelector('[role="listbox"]')),!ln)return;if(Ee===-1){ln.scrollTop=0;return}const hr=In.current.querySelector(`[data-option-index="${Ee}"]`);if(hr&&(hr.classList.add(`${n}-focused`),lt==="keyboard"&&hr.classList.add(`${n}-focusVisible`),ln.scrollHeight>ln.clientHeight&&lt!=="mouse"&&lt!=="touch")){const Pr=hr,Vn=ln.clientHeight+ln.scrollTop,Io=Pr.offsetTop+Pr.offsetHeight;Io>Vn?ln.scrollTop=Io-ln.clientHeight:Pr.offsetTop-Pr.offsetHeight*(he?1.3:0)<ln.scrollTop&&(ln.scrollTop=Pr.offsetTop-Pr.offsetHeight*(he?1.3:0))}}),nr=ls(({event:Ge,diff:Ee,direction:lt="next",reason:Ot="auto"})=>{if(!rn)return;const hr=Dn((()=>{const Pr=qt.length-1;if(Ee==="reset")return En;if(Ee==="start")return 0;if(Ee==="end")return Pr;const Vn=Zt.current+Ee;return Vn<0?Vn===-1&&Re?-1:H&&Zt.current!==-1||Math.abs(Ee)>1?0:Pr:Vn>Pr?Vn===Pr+1&&Re?-1:H||Math.abs(Ee)>1?Pr:0:Vn})(),lt);if(Fn({index:hr,reason:Ot,event:Ge}),i&&Ee!=="reset")if(hr===-1)_n.current.value=an;else{const Pr=Yt(qt[hr]);_n.current.value=Pr,Pr.toLowerCase().indexOf(an.toLowerCase())===0&&an.length>0&&_n.current.setSelectionRange(an.length,Pr.length)}}),Ar=()=>{const Ge=(Ee,lt)=>{const Ot=Ee?Yt(Ee):"",ln=lt?Yt(lt):"";return Ot===ln};if(Zt.current!==-1&&en.filteredOptions&&en.filteredOptions.length!==qt.length&&en.inputValue===an&&(ot?Ct.length===en.value.length&&en.value.every((Ee,lt)=>Yt(Ct[lt])===Yt(Ee)):Ge(en.value,Ct))){const Ee=en.filteredOptions[Zt.current];if(Ee&&qt.some(Ot=>Yt(Ot)===Yt(Ee)))return!0}return!1},gr=K.useCallback(()=>{if(!rn||Ar())return;const Ge=ot?Ct[0]:Ct;if(qt.length===0||Ge==null){nr({diff:"reset"});return}if(In.current){if(Ge!=null){const Ee=qt[Zt.current];if(ot&&Ee&&p4(Ct,Ot=>ze(Ee,Ot))!==-1)return;const lt=p4(qt,Ot=>ze(Ot,Ge));lt===-1?nr({diff:"reset"}):Fn({index:lt});return}if(Zt.current>=qt.length-1){Fn({index:qt.length-1});return}Fn({index:Zt.current})}},[qt.length,ot?!1:Ct,G,nr,Fn,rn,an,ot]),vi=ls(Ge=>{N0(In,Ge),Ge&&gr()});K.useEffect(()=>{gr()},[gr]);const di=Ge=>{Un||(qn(!0),Ye(!0),rt&&rt(Ge))},Te=(Ge,Ee)=>{Un&&(qn(!1),Ze&&Ze(Ge,Ee))},re=(Ge,Ee,lt,Ot)=>{if(ot){if(Ct.length===Ee.length&&Ct.every((ln,hr)=>ln===Ee[hr]))return}else if(Ct===Ee)return;gt&&gt(Ge,Ee,lt,Ot),On(Ee)},ie=K.useRef(!1),me=(Ge,Ee,lt="selectOption",Ot="options")=>{let ln=lt,hr=Ee;if(ot){hr=Array.isArray(Ct)?Ct.slice():[];const Pr=p4(hr,Vn=>ze(Ee,Vn));Pr===-1?hr.push(Ee):Ot!=="freeSolo"&&(hr.splice(Pr,1),ln="removeOption")}Yn(Ge,hr),re(Ge,hr,ln,{option:Ee}),!N&&(!Ge||!Ge.ctrlKey&&!Ge.metaKey)&&Te(Ge,ln),(f===!0||f==="touch"&&ie.current||f==="mouse"&&!ie.current)&&_n.current.blur()};function Me(Ge,Ee){if(Ge===-1)return-1;let lt=Ge;for(;;){if(Ee==="next"&&lt===Ct.length||Ee==="previous"&&lt===-1)return-1;const Ot=Jt.querySelector(`[data-tag-index="${lt}"]`);if(!Ot||!Ot.hasAttribute("tabindex")||Ot.disabled||Ot.getAttribute("aria-disabled")==="true")lt+=Ee==="next"?1:-1;else return lt}}const De=(Ge,Ee)=>{if(!ot)return;an===""&&Te(Ge,"toggleInput");let lt=Ft;Ft===-1?an===""&&Ee==="previous"&&(lt=Ct.length-1):(lt+=Ee==="next"?1:-1,lt<0&&(lt=0),lt===Ct.length&&(lt=-1)),lt=Me(lt,Ee),nn(lt),yn(lt)},qe=Ge=>{tn.current=!0,Zn(""),He&&He(Ge,"","clear"),re(Ge,ot?[]:null,"clear")},Xe=Ge=>Ee=>{if(Ge.onKeyDown&&Ge.onKeyDown(Ee),!Ee.defaultMuiPrevented&&(Ft!==-1&&["ArrowLeft","ArrowRight"].indexOf(Ee.key)===-1&&(nn(-1),yn(-1)),Ee.which!==229))switch(Ee.key){case"Home":rn&&be&&(Ee.preventDefault(),nr({diff:"start",direction:"next",reason:"keyboard",event:Ee}));break;case"End":rn&&be&&(Ee.preventDefault(),nr({diff:"end",direction:"previous",reason:"keyboard",event:Ee}));break;case"PageUp":Ee.preventDefault(),nr({diff:-OP,direction:"previous",reason:"keyboard",event:Ee}),di(Ee);break;case"PageDown":Ee.preventDefault(),nr({diff:OP,direction:"next",reason:"keyboard",event:Ee}),di(Ee);break;case"ArrowDown":Ee.preventDefault(),nr({diff:1,direction:"next",reason:"keyboard",event:Ee}),di(Ee);break;case"ArrowUp":Ee.preventDefault(),nr({diff:-1,direction:"previous",reason:"keyboard",event:Ee}),di(Ee);break;case"ArrowLeft":De(Ee,"previous");break;case"ArrowRight":De(Ee,"next");break;case"Enter":if(Zt.current!==-1&&rn){const lt=qt[Zt.current],Ot=Q?Q(lt):!1;if(Ee.preventDefault(),Ot)return;me(Ee,lt,"selectOption"),i&&_n.current.setSelectionRange(_n.current.value.length,_n.current.value.length)}else X&&an!==""&&Xt===!1&&(ot&&Ee.preventDefault(),me(Ee,an,"createOption","freeSolo"));break;case"Escape":rn?(Ee.preventDefault(),Ee.stopPropagation(),Te(Ee,"escape")):v&&(an!==""||ot&&Ct.length>0)&&(Ee.preventDefault(),Ee.stopPropagation(),qe(Ee));break;case"Backspace":if(ot&&!it&&an===""&&Ct.length>0){const lt=Ft===-1?Ct.length-1:Ft,Ot=Ct.slice();Ot.splice(lt,1),re(Ee,Ot,"removeOption",{option:Ct[lt]})}break;case"Delete":if(ot&&!it&&an===""&&Ct.length>0&&Ft!==-1){const lt=Ft,Ot=Ct.slice();Ot.splice(lt,1),re(Ee,Ot,"removeOption",{option:Ct[lt]})}break}},je=Ge=>{Nn(!0),Ne&&!tn.current&&di(Ge)},Fe=Ge=>{if(t(In)){_n.current.focus();return}Nn(!1),dn.current=!0,tn.current=!1,d&&Zt.current!==-1&&rn?me(Ge,qt[Zt.current],"blur"):d&&X&&an!==""?me(Ge,an,"blur","freeSolo"):a&&Yn(Ge,Ct),Te(Ge,"blur")},ct=Ge=>{const Ee=Ge.target.value;an!==Ee&&(Zn(Ee),Ye(!1),He&&He(Ge,Ee,"input")),Ee===""?!R&&!ot&&re(Ge,null,"clear"):di(Ge)},Pt=Ge=>{const Ee=Number(Ge.currentTarget.getAttribute("data-option-index"));Zt.current!==Ee&&Fn({event:Ge,index:Ee,reason:"mouse"})},Et=Ge=>{Fn({event:Ge,index:Number(Ge.currentTarget.getAttribute("data-option-index")),reason:"touch"}),ie.current=!0},mn=Ge=>{const Ee=Number(Ge.currentTarget.getAttribute("data-option-index"));me(Ge,qt[Ee],"selectOption"),ie.current=!1},Rn=Ge=>Ee=>{const lt=Ct.slice();lt.splice(Ge,1),re(Ee,lt,"removeOption",{option:Ct[Ge]})},An=Ge=>{Un?Te(Ge,"toggleInput"):di(Ge)},Ln=Ge=>{Ge.currentTarget.contains(Ge.target)&&Ge.target.getAttribute("id")!==Rt&&Ge.preventDefault()},Xn=Ge=>{Ge.currentTarget.contains(Ge.target)&&(_n.current.focus(),Dt&&dn.current&&_n.current.selectionEnd-_n.current.selectionStart===0&&_n.current.select(),dn.current=!1)},xr=Ge=>{(an===""||!Un)&&An(Ge)};let br=X&&an.length>0;br=br||(ot?Ct.length>0:Ct!==null);let Mr=qt;return he&&(Mr=qt.reduce((Ge,Ee,lt)=>{const Ot=he(Ee);return Ge.length>0&&Ge[Ge.length-1].group===Ot?Ge[Ge.length-1].options.push(Ee):Ge.push({key:lt,index:lt,group:Ot,options:[Ee]}),Ge},[])),W&&tr&&Fe(),{getRootProps:(Ge={})=>Pe({"aria-owns":on?`${Rt}-listbox`:null},Ge,{onKeyDown:Xe(Ge),onMouseDown:Ln,onClick:Xn}),getInputLabelProps:()=>({id:`${Rt}-label`,htmlFor:Rt}),getInputProps:()=>({id:Rt,value:an,onBlur:Fe,onFocus:je,onChange:ct,onMouseDown:xr,"aria-activedescendant":rn?"":null,"aria-autocomplete":i?"both":"list","aria-controls":on?`${Rt}-listbox`:void 0,"aria-expanded":on,autoComplete:"off",ref:_n,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:W}),getClearProps:()=>({tabIndex:-1,onClick:qe}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:An}),getTagProps:({index:Ge})=>Pe({key:Ge,"data-tag-index":Ge,tabIndex:-1},!it&&{onDelete:Rn(Ge)}),getListboxProps:()=>({role:"listbox",id:`${Rt}-listbox`,"aria-labelledby":`${Rt}-label`,ref:vi,onMouseDown:Ge=>{Ge.preventDefault()}}),getOptionProps:({index:Ge,option:Ee})=>{const lt=(ot?Ct:[Ct]).some(ln=>ln!=null&&ze(Ee,ln)),Ot=Q?Q(Ee):!1;return{key:Yt(Ee),tabIndex:-1,role:"option",id:`${Rt}-option-${Ge}`,onMouseMove:Pt,onClick:mn,onTouchStart:Et,"data-option-index":Ge,"aria-disabled":Ot,"aria-selected":lt}},id:Rt,inputValue:an,value:Ct,dirty:br,expanded:rn&&Jt,popupOpen:rn,focused:tr||Ft!==-1,anchorEl:Jt,setAnchorEl:vn,focusedTag:Ft,groupedOptions:Mr}}const Pte=e=>!e||!Lu(e),Ite=Pte;function Ate(e){return _i("MuiSlider",e)}const Mte=Ci("MuiSlider",["root","active","colorPrimary","colorSecondary","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),tc=Mte,Dte=e=>{const{open:t}=e;return{offset:rr(t&&tc.valueLabelOpen),circle:tc.valueLabelCircle,label:tc.valueLabelLabel}};function Rte(e){const{children:t,className:n,value:i}=e,c=Dte(e);return t?K.cloneElement(t,{className:rr(t.props.className)},Z.jsxs(K.Fragment,{children:[t.props.children,Z.jsx("span",{className:rr(c.offset,n),"aria-hidden":!0,children:Z.jsx("span",{className:c.circle,children:Z.jsx("span",{className:c.label,children:i})})})]})):null}const Ote=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function LP(e){return e}const Lte=$n("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${Pn(n.color)}`],n.size!=="medium"&&t[`size${Pn(n.size)}`],n.marked&&t.marked,n.orientation==="vertical"&&t.vertical,n.track==="inverted"&&t.trackInverted,n.track===!1&&t.trackFalse]}})(({theme:e,ownerState:t})=>Pe({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[t.color].main,WebkitTapHighlightColor:"transparent"},t.orientation==="horizontal"&&Pe({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},t.size==="small"&&{height:2},t.marked&&{marginBottom:20}),t.orientation==="vertical"&&Pe({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},t.size==="small"&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${tc.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${tc.dragging}`]:{[`& .${tc.thumb}, & .${tc.track}`]:{transition:"none"}}})),zte=$n("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})(({ownerState:e})=>Pe({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},e.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track==="inverted"&&{opacity:1})),Nte=$n("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?YO(e.palette[t.color].main,.62):KO(e.palette[t.color].main,.5);return Pe({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{border:"none"},t.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track===!1&&{display:"none"},t.track==="inverted"&&{backgroundColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n,borderColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n})}),Fte=$n("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${Pn(n.color)}`],n.size!=="medium"&&t[`thumbSize${Pn(n.size)}`]]}})(({theme:e,ownerState:t})=>Pe({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{width:12,height:12},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":Pe({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},t.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${tc.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:eo(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${tc.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:eo(e.palette[t.color].main,.16)}`},[`&.${tc.disabled}`]:{"&:hover":{boxShadow:"none"}}})),Bte=$n(Rte,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e,ownerState:t})=>Pe({[`&.${tc.valueLabelOpen}`]:{transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},t.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},t.orientation==="vertical"&&{right:t.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"}},t.size==="small"&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),jte=$n("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>XE(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})(({theme:e,ownerState:t,markActive:n})=>Pe({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8})),$te=$n("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>XE(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e,ownerState:t,markLabelActive:n})=>Pe({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},t.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},t.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(e.vars||e).palette.text.primary})),Ute=e=>{const{disabled:t,dragging:n,marked:i,orientation:c,track:d,classes:f,color:a,size:v}=e,S={root:["root",t&&"disabled",n&&"dragging",i&&"marked",c==="vertical"&&"vertical",d==="inverted"&&"trackInverted",d===!1&&"trackFalse",a&&`color${Pn(a)}`,v&&`size${Pn(v)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",v&&`thumbSize${Pn(v)}`,a&&`thumbColor${Pn(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ki(S,Ate,f)},Vte=({children:e})=>e,Wte=K.forwardRef(function(t,n){var i,c,d,f,a,v,S,M,R,N,W,V,H,le,G,X,Q,oe,he,be,A,Re,_e,ze;const ot=Pi({props:t,name:"MuiSlider"}),Ze=cb().direction==="rtl",{"aria-label":We,"aria-valuetext":He,"aria-labelledby":rt,component:tt="span",components:Ne={},componentsProps:et={},color:it="primary",classes:Dt,className:Tt,disableSwap:Rt=!1,disabled:Yt=!1,getAriaLabel:tn,getAriaValueText:dn,marks:_n=!1,max:In=100,min:Jt=0,orientation:vn="horizontal",size:Ft="medium",step:nn=1,scale:En=LP,slotProps:Zt,slots:Ct,track:On="normal",valueLabelDisplay:an="off",valueLabelFormat:Zn=LP}=ot,tr=er(ot,Ote),Nn=Pe({},ot,{isRtl:Ze,max:In,min:Jt,classes:Dt,disabled:Yt,disableSwap:Rt,orientation:vn,marks:_n,color:it,size:Ft,step:nn,scale:En,track:On,valueLabelDisplay:an,valueLabelFormat:Zn}),{axisProps:Yn,getRootProps:Un,getHiddenInputProps:qn,getThumbProps:bn,open:Ye,active:Xt,axis:rn,focusedThumbIndex:qt,range:en,dragging:on,marks:yn,values:Dn,trackOffset:Fn,trackLeap:nr,getThumbStyle:Ar}=vte(Pe({},Nn,{rootRef:n}));Nn.marked=yn.length>0&&yn.some(Ee=>Ee.label),Nn.dragging=on,Nn.focusedThumbIndex=qt;const gr=Ute(Nn),vi=(i=(c=Ct==null?void 0:Ct.root)!=null?c:Ne.Root)!=null?i:Lte,di=(d=(f=Ct==null?void 0:Ct.rail)!=null?f:Ne.Rail)!=null?d:zte,Te=(a=(v=Ct==null?void 0:Ct.track)!=null?v:Ne.Track)!=null?a:Nte,re=(S=(M=Ct==null?void 0:Ct.thumb)!=null?M:Ne.Thumb)!=null?S:Fte,ie=(R=(N=Ct==null?void 0:Ct.valueLabel)!=null?N:Ne.ValueLabel)!=null?R:Bte,me=(W=(V=Ct==null?void 0:Ct.mark)!=null?V:Ne.Mark)!=null?W:jte,Me=(H=(le=Ct==null?void 0:Ct.markLabel)!=null?le:Ne.MarkLabel)!=null?H:$te,De=(G=(X=Ct==null?void 0:Ct.input)!=null?X:Ne.Input)!=null?G:"input",qe=(Q=Zt==null?void 0:Zt.root)!=null?Q:et.root,Xe=(oe=Zt==null?void 0:Zt.rail)!=null?oe:et.rail,je=(he=Zt==null?void 0:Zt.track)!=null?he:et.track,Fe=(be=Zt==null?void 0:Zt.thumb)!=null?be:et.thumb,ct=(A=Zt==null?void 0:Zt.valueLabel)!=null?A:et.valueLabel,Pt=(Re=Zt==null?void 0:Zt.mark)!=null?Re:et.mark,Et=(_e=Zt==null?void 0:Zt.markLabel)!=null?_e:et.markLabel,mn=(ze=Zt==null?void 0:Zt.input)!=null?ze:et.input,Rn=Ds({elementType:vi,getSlotProps:Un,externalSlotProps:qe,externalForwardedProps:tr,additionalProps:Pe({},Ite(vi)&&{as:tt}),ownerState:Pe({},Nn,qe==null?void 0:qe.ownerState),className:[gr.root,Tt]}),An=Ds({elementType:di,externalSlotProps:Xe,ownerState:Nn,className:gr.rail}),Ln=Ds({elementType:Te,externalSlotProps:je,additionalProps:{style:Pe({},Yn[rn].offset(Fn),Yn[rn].leap(nr))},ownerState:Pe({},Nn,je==null?void 0:je.ownerState),className:gr.track}),Xn=Ds({elementType:re,getSlotProps:bn,externalSlotProps:Fe,ownerState:Pe({},Nn,Fe==null?void 0:Fe.ownerState),className:gr.thumb}),xr=Ds({elementType:ie,externalSlotProps:ct,ownerState:Pe({},Nn,ct==null?void 0:ct.ownerState),className:gr.valueLabel}),br=Ds({elementType:me,externalSlotProps:Pt,ownerState:Nn,className:gr.mark}),Mr=Ds({elementType:Me,externalSlotProps:Et,ownerState:Nn,className:gr.markLabel}),Ge=Ds({elementType:De,getSlotProps:qn,externalSlotProps:mn,ownerState:Nn});return Z.jsxs(vi,Pe({},Rn,{children:[Z.jsx(di,Pe({},An)),Z.jsx(Te,Pe({},Ln)),yn.filter(Ee=>Ee.value>=Jt&&Ee.value<=In).map((Ee,lt)=>{const Ot=L2(Ee.value,Jt,In),ln=Yn[rn].offset(Ot);let hr;return On===!1?hr=Dn.indexOf(Ee.value)!==-1:hr=On==="normal"&&(en?Ee.value>=Dn[0]&&Ee.value<=Dn[Dn.length-1]:Ee.value<=Dn[0])||On==="inverted"&&(en?Ee.value<=Dn[0]||Ee.value>=Dn[Dn.length-1]:Ee.value>=Dn[0]),Z.jsxs(K.Fragment,{children:[Z.jsx(me,Pe({"data-index":lt},br,!Lu(me)&&{markActive:hr},{style:Pe({},ln,br.style),className:rr(br.className,hr&&gr.markActive)})),Ee.label!=null?Z.jsx(Me,Pe({"aria-hidden":!0,"data-index":lt},Mr,!Lu(Me)&&{markLabelActive:hr},{style:Pe({},ln,Mr.style),className:rr(gr.markLabel,Mr.className,hr&&gr.markLabelActive),children:Ee.label})):null]},lt)}),Dn.map((Ee,lt)=>{const Ot=L2(Ee,Jt,In),ln=Yn[rn].offset(Ot),hr=an==="off"?Vte:ie;return Z.jsx(hr,Pe({},!Lu(hr)&&{valueLabelFormat:Zn,valueLabelDisplay:an,value:typeof Zn=="function"?Zn(En(Ee),lt):Zn,index:lt,open:Ye===lt||Xt===lt||an==="on",disabled:Yt},xr,{children:Z.jsx(re,Pe({"data-index":lt},Xn,{className:rr(gr.thumb,Xn.className,Xt===lt&&gr.active,qt===lt&&gr.focusVisible),style:Pe({},ln,Ar(lt),Xn.style),children:Z.jsx(De,Pe({"data-index":lt,"aria-label":tn?tn(lt):We,"aria-valuenow":En(Ee),"aria-labelledby":rt,"aria-valuetext":dn?dn(En(Ee),lt):He,value:Dn[lt]},Ge))}))}),lt)})]}))}),Hte=Wte;function J1({props:e,states:t,muiFormControl:n}){return t.reduce((i,c)=>(i[c]=e[c],n&&typeof e[c]>"u"&&(i[c]=n[c]),i),{})}const qte=K.createContext(void 0),rT=qte;function Q1(){return K.useContext(rT)}function Gte(e){return Z.jsx(aJ,Pe({},e,{defaultTheme:lb,themeId:w1}))}function zP(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function z2(e,t=!1){return e&&(zP(e.value)&&e.value!==""||t&&zP(e.defaultValue)&&e.defaultValue!=="")}function Zte(e){return e.startAdornment}function Xte(e){return _i("MuiInputBase",e)}const Kte=Ci("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Rs=Kte,Yte=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],db=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Pn(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},hb=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Jte=e=>{const{classes:t,color:n,disabled:i,error:c,endAdornment:d,focused:f,formControl:a,fullWidth:v,hiddenLabel:S,multiline:M,readOnly:R,size:N,startAdornment:W,type:V}=e,H={root:["root",`color${Pn(n)}`,i&&"disabled",c&&"error",v&&"fullWidth",f&&"focused",a&&"formControl",N==="small"&&"sizeSmall",M&&"multiline",W&&"adornedStart",d&&"adornedEnd",S&&"hiddenLabel",R&&"readOnly"],input:["input",i&&"disabled",V==="search"&&"inputTypeSearch",M&&"inputMultiline",N==="small"&&"inputSizeSmall",S&&"inputHiddenLabel",W&&"inputAdornedStart",d&&"inputAdornedEnd",R&&"readOnly"]};return ki(H,Xte,t)},pb=$n("div",{name:"MuiInputBase",slot:"Root",overridesResolver:db})(({theme:e,ownerState:t})=>Pe({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Rs.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&Pe({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),fb=$n("input",{name:"MuiInputBase",slot:"Input",overridesResolver:hb})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",i=Pe({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),c={opacity:"0 !important"},d=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return Pe({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Rs.formControl} &`]:{"&::-webkit-input-placeholder":c,"&::-moz-placeholder":c,"&:-ms-input-placeholder":c,"&::-ms-input-placeholder":c,"&:focus::-webkit-input-placeholder":d,"&:focus::-moz-placeholder":d,"&:focus:-ms-input-placeholder":d,"&:focus::-ms-input-placeholder":d},[`&.${Rs.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),Qte=Z.jsx(Gte,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),ene=K.forwardRef(function(t,n){var i;const c=Pi({props:t,name:"MuiInputBase"}),{"aria-describedby":d,autoComplete:f,autoFocus:a,className:v,components:S={},componentsProps:M={},defaultValue:R,disabled:N,disableInjectingGlobalStyles:W,endAdornment:V,fullWidth:H=!1,id:le,inputComponent:G="input",inputProps:X={},inputRef:Q,maxRows:oe,minRows:he,multiline:be=!1,name:A,onBlur:Re,onChange:_e,onClick:ze,onFocus:ot,onKeyDown:gt,onKeyUp:Ze,placeholder:We,readOnly:He,renderSuffix:rt,rows:tt,slotProps:Ne={},slots:et={},startAdornment:it,type:Dt="text",value:Tt}=c,Rt=er(c,Yte),Yt=X.value!=null?X.value:Tt,{current:tn}=K.useRef(Yt!=null),dn=K.useRef(),_n=K.useCallback(qt=>{},[]),In=vo(dn,Q,X.ref,_n),[Jt,vn]=K.useState(!1),Ft=Q1(),nn=J1({props:c,muiFormControl:Ft,states:["color","disabled","error","hiddenLabel","size","required","filled"]});nn.focused=Ft?Ft.focused:Jt,K.useEffect(()=>{!Ft&&N&&Jt&&(vn(!1),Re&&Re())},[Ft,N,Jt,Re]);const En=Ft&&Ft.onFilled,Zt=Ft&&Ft.onEmpty,Ct=K.useCallback(qt=>{z2(qt)?En&&En():Zt&&Zt()},[En,Zt]);Xc(()=>{tn&&Ct({value:Yt})},[Yt,Ct,tn]);const On=qt=>{if(nn.disabled){qt.stopPropagation();return}ot&&ot(qt),X.onFocus&&X.onFocus(qt),Ft&&Ft.onFocus?Ft.onFocus(qt):vn(!0)},an=qt=>{Re&&Re(qt),X.onBlur&&X.onBlur(qt),Ft&&Ft.onBlur?Ft.onBlur(qt):vn(!1)},Zn=(qt,...en)=>{if(!tn){const on=qt.target||dn.current;if(on==null)throw new Error(Qd(1));Ct({value:on.value})}X.onChange&&X.onChange(qt,...en),_e&&_e(qt,...en)};K.useEffect(()=>{Ct(dn.current)},[]);const tr=qt=>{dn.current&&qt.currentTarget===qt.target&&dn.current.focus(),ze&&!nn.disabled&&ze(qt)};let Nn=G,Yn=X;be&&Nn==="input"&&(tt?Yn=Pe({type:void 0,minRows:tt,maxRows:tt},Yn):Yn=Pe({type:void 0,maxRows:oe,minRows:he},Yn),Nn=Ete);const Un=qt=>{Ct(qt.animationName==="mui-auto-fill-cancel"?dn.current:{value:"x"})};K.useEffect(()=>{Ft&&Ft.setAdornedStart(!!it)},[Ft,it]);const qn=Pe({},c,{color:nn.color||"primary",disabled:nn.disabled,endAdornment:V,error:nn.error,focused:nn.focused,formControl:Ft,fullWidth:H,hiddenLabel:nn.hiddenLabel,multiline:be,size:nn.size,startAdornment:it,type:Dt}),bn=Jte(qn),Ye=et.root||S.Root||pb,Xt=Ne.root||M.root||{},rn=et.input||S.Input||fb;return Yn=Pe({},Yn,(i=Ne.input)!=null?i:M.input),Z.jsxs(K.Fragment,{children:[!W&&Qte,Z.jsxs(Ye,Pe({},Xt,!Lu(Ye)&&{ownerState:Pe({},qn,Xt.ownerState)},{ref:n,onClick:tr},Rt,{className:rr(bn.root,Xt.className,v,He&&"MuiInputBase-readOnly"),children:[it,Z.jsx(rT.Provider,{value:null,children:Z.jsx(rn,Pe({ownerState:qn,"aria-invalid":nn.error,"aria-describedby":d,autoComplete:f,autoFocus:a,defaultValue:R,disabled:nn.disabled,id:le,onAnimationStart:Un,name:A,placeholder:We,readOnly:He,required:nn.required,rows:tt,value:Yt,onKeyDown:gt,onKeyUp:Ze,type:Dt},Yn,!Lu(rn)&&{as:Nn,ownerState:Pe({},qn,Yn.ownerState)},{ref:In,className:rr(bn.input,Yn.className,He&&"MuiInputBase-readOnly"),onBlur:an,onChange:Zn,onFocus:On}))}),V,rt?rt(Pe({},nn,{startAdornment:it})):null]}))]})}),iT=ene;function tne(e){return _i("MuiInput",e)}const nne=Pe({},Rs,Ci("MuiInput",["root","underline","input"])),kd=nne,rne=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],ine=e=>{const{classes:t,disableUnderline:n}=e,c=ki({root:["root",!n&&"underline"],input:["input"]},tne,t);return Pe({},t,c)},one=$n(pb,{shouldForwardProp:e=>qu(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...db(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let i=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(i=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),Pe({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kd.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kd.disabled}, .${kd.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${kd.disabled}:before`]:{borderBottomStyle:"dotted"}})}),ane=$n(fb,{name:"MuiInput",slot:"Input",overridesResolver:hb})({}),pL=K.forwardRef(function(t,n){var i,c,d,f;const a=Pi({props:t,name:"MuiInput"}),{disableUnderline:v,components:S={},componentsProps:M,fullWidth:R=!1,inputComponent:N="input",multiline:W=!1,slotProps:V,slots:H={},type:le="text"}=a,G=er(a,rne),X=ine(a),oe={root:{ownerState:{disableUnderline:v}}},he=V??M?hs(V??M,oe):oe,be=(i=(c=H.root)!=null?c:S.Root)!=null?i:one,A=(d=(f=H.input)!=null?f:S.Input)!=null?d:ane;return Z.jsx(iT,Pe({slots:{root:be,input:A},slotProps:he,fullWidth:R,inputComponent:N,multiline:W,ref:n,type:le},G,{classes:X}))});pL.muiName="Input";const fL=pL;function sne(e){return _i("MuiFilledInput",e)}const lne=Pe({},Rs,Ci("MuiFilledInput",["root","underline","input"])),Os=lne,cne=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],une=e=>{const{classes:t,disableUnderline:n}=e,c=ki({root:["root",!n&&"underline"],input:["input"]},sne,t);return Pe({},t,c)},dne=$n(pb,{shouldForwardProp:e=>qu(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...db(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const i=e.palette.mode==="light",c=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",d=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",f=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Pe({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:f,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d}},[`&.${Os.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d},[`&.${Os.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:a}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Os.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Os.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:c}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Os.disabled}, .${Os.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Os.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&Pe({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),hne=$n(fb,{name:"MuiFilledInput",slot:"Input",overridesResolver:hb})(({theme:e,ownerState:t})=>Pe({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),mL=K.forwardRef(function(t,n){var i,c,d,f;const a=Pi({props:t,name:"MuiFilledInput"}),{components:v={},componentsProps:S,fullWidth:M=!1,inputComponent:R="input",multiline:N=!1,slotProps:W,slots:V={},type:H="text"}=a,le=er(a,cne),G=Pe({},a,{fullWidth:M,inputComponent:R,multiline:N,type:H}),X=une(a),Q={root:{ownerState:G},input:{ownerState:G}},oe=W??S?hs(W??S,Q):Q,he=(i=(c=V.root)!=null?c:v.Root)!=null?i:dne,be=(d=(f=V.input)!=null?f:v.Input)!=null?d:hne;return Z.jsx(iT,Pe({slots:{root:he,input:be},componentsProps:oe,fullWidth:M,inputComponent:R,multiline:N,ref:n,type:H},le,{classes:X}))});mL.muiName="Input";const gL=mL;var NP;const pne=["children","classes","className","label","notched"],fne=$n("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),mne=$n("legend")(({ownerState:e,theme:t})=>Pe({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&Pe({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function gne(e){const{className:t,label:n,notched:i}=e,c=er(e,pne),d=n!=null&&n!=="",f=Pe({},e,{notched:i,withLabel:d});return Z.jsx(fne,Pe({"aria-hidden":!0,className:t,ownerState:f},c,{children:Z.jsx(mne,{ownerState:f,children:d?Z.jsx("span",{children:n}):NP||(NP=Z.jsx("span",{className:"notranslate",children:"​"}))})}))}function _ne(e){return _i("MuiOutlinedInput",e)}const yne=Pe({},Rs,Ci("MuiOutlinedInput",["root","notchedOutline","input"])),Oc=yne,vne=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],xne=e=>{const{classes:t}=e,i=ki({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},_ne,t);return Pe({},t,i)},bne=$n(pb,{shouldForwardProp:e=>qu(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:db})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Pe({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Oc.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Oc.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Oc.focused} .${Oc.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${Oc.error} .${Oc.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Oc.disabled} .${Oc.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&Pe({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),wne=$n(gne,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),Ene=$n(fb,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:hb})(({theme:e,ownerState:t})=>Pe({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),_L=K.forwardRef(function(t,n){var i,c,d,f,a;const v=Pi({props:t,name:"MuiOutlinedInput"}),{components:S={},fullWidth:M=!1,inputComponent:R="input",label:N,multiline:W=!1,notched:V,slots:H={},type:le="text"}=v,G=er(v,vne),X=xne(v),Q=Q1(),oe=J1({props:v,muiFormControl:Q,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),he=Pe({},v,{color:oe.color||"primary",disabled:oe.disabled,error:oe.error,focused:oe.focused,formControl:Q,fullWidth:M,hiddenLabel:oe.hiddenLabel,multiline:W,size:oe.size,type:le}),be=(i=(c=H.root)!=null?c:S.Root)!=null?i:bne,A=(d=(f=H.input)!=null?f:S.Input)!=null?d:Ene;return Z.jsx(iT,Pe({slots:{root:be,input:A},renderSuffix:Re=>Z.jsx(wne,{ownerState:he,className:X.notchedOutline,label:N!=null&&N!==""&&oe.required?a||(a=Z.jsxs(K.Fragment,{children:[N," ","*"]})):N,notched:typeof V<"u"?V:!!(Re.startAdornment||Re.filled||Re.focused)}),fullWidth:M,inputComponent:R,multiline:W,ref:n,type:le},G,{classes:Pe({},X,{notchedOutline:null})}))});_L.muiName="Input";const yL=_L;function Tne(e){return _i("MuiFormLabel",e)}const Sne=Ci("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Yg=Sne,kne=["children","className","color","component","disabled","error","filled","focused","required"],Cne=e=>{const{classes:t,color:n,focused:i,disabled:c,error:d,filled:f,required:a}=e,v={root:["root",`color${Pn(n)}`,c&&"disabled",d&&"error",f&&"filled",i&&"focused",a&&"required"],asterisk:["asterisk",d&&"error"]};return ki(v,Tne,t)},Pne=$n("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>Pe({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>Pe({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Yg.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Yg.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Yg.error}`]:{color:(e.vars||e).palette.error.main}})),Ine=$n("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Yg.error}`]:{color:(e.vars||e).palette.error.main}})),Ane=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiFormLabel"}),{children:c,className:d,component:f="label"}=i,a=er(i,kne),v=Q1(),S=J1({props:i,muiFormControl:v,states:["color","required","focused","disabled","error","filled"]}),M=Pe({},i,{color:S.color||"primary",component:f,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required}),R=Cne(M);return Z.jsxs(Pne,Pe({as:f,ownerState:M,className:rr(R.root,d),ref:n},a,{children:[c,S.required&&Z.jsxs(Ine,{ownerState:M,"aria-hidden":!0,className:R.asterisk,children:[" ","*"]})]}))}),Mne=Ane;function Dne(e){return _i("MuiInputLabel",e)}Ci("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Rne=["disableAnimation","margin","shrink","variant","className"],One=e=>{const{classes:t,formControl:n,size:i,shrink:c,disableAnimation:d,variant:f,required:a}=e,S=ki({root:["root",n&&"formControl",!d&&"animated",c&&"shrink",i==="small"&&"sizeSmall",f],asterisk:[a&&"asterisk"]},Dne,t);return Pe({},t,S)},Lne=$n(Mne,{shouldForwardProp:e=>qu(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Yg.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})(({theme:e,ownerState:t})=>Pe({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&Pe({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&Pe({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&Pe({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),zne=K.forwardRef(function(t,n){const i=Pi({name:"MuiInputLabel",props:t}),{disableAnimation:c=!1,shrink:d,className:f}=i,a=er(i,Rne),v=Q1();let S=d;typeof S>"u"&&v&&(S=v.filled||v.focused||v.adornedStart);const M=J1({props:i,muiFormControl:v,states:["size","variant","required"]}),R=Pe({},i,{disableAnimation:c,formControl:v,shrink:S,size:M.size,variant:M.variant,required:M.required}),N=One(R);return Z.jsx(Lne,Pe({"data-shrink":S,ownerState:R,ref:n,className:rr(N.root,f)},a,{classes:N}))}),Nne=zne;function Fne(e){return _i("MuiFormControl",e)}Ci("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Bne=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],jne=e=>{const{classes:t,margin:n,fullWidth:i}=e,c={root:["root",n!=="none"&&`margin${Pn(n)}`,i&&"fullWidth"]};return ki(c,Fne,t)},$ne=$n("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>Pe({},t.root,t[`margin${Pn(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>Pe({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),Une=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiFormControl"}),{children:c,className:d,color:f="primary",component:a="div",disabled:v=!1,error:S=!1,focused:M,fullWidth:R=!1,hiddenLabel:N=!1,margin:W="none",required:V=!1,size:H="medium",variant:le="outlined"}=i,G=er(i,Bne),X=Pe({},i,{color:f,component:a,disabled:v,error:S,fullWidth:R,hiddenLabel:N,margin:W,required:V,size:H,variant:le}),Q=jne(X),[oe,he]=K.useState(()=>{let Ze=!1;return c&&K.Children.forEach(c,We=>{if(!Nv(We,["Input","Select"]))return;const He=Nv(We,["Select"])?We.props.input:We;He&&Zte(He.props)&&(Ze=!0)}),Ze}),[be,A]=K.useState(()=>{let Ze=!1;return c&&K.Children.forEach(c,We=>{Nv(We,["Input","Select"])&&(z2(We.props,!0)||z2(We.props.inputProps,!0))&&(Ze=!0)}),Ze}),[Re,_e]=K.useState(!1);v&&Re&&_e(!1);const ze=M!==void 0&&!v?M:Re;let ot;const gt=K.useMemo(()=>({adornedStart:oe,setAdornedStart:he,color:f,disabled:v,error:S,filled:be,focused:ze,fullWidth:R,hiddenLabel:N,size:H,onBlur:()=>{_e(!1)},onEmpty:()=>{A(!1)},onFilled:()=>{A(!0)},onFocus:()=>{_e(!0)},registerEffect:ot,required:V,variant:le}),[oe,f,v,S,be,ze,R,N,ot,V,H,le]);return Z.jsx(rT.Provider,{value:gt,children:Z.jsx($ne,Pe({as:a,ownerState:X,className:rr(Q.root,d),ref:n},G,{children:c}))})}),Vne=Une;function Wne(e){return _i("MuiFormHelperText",e)}const Hne=Ci("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),FP=Hne;var BP;const qne=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Gne=e=>{const{classes:t,contained:n,size:i,disabled:c,error:d,filled:f,focused:a,required:v}=e,S={root:["root",c&&"disabled",d&&"error",i&&`size${Pn(i)}`,n&&"contained",a&&"focused",f&&"filled",v&&"required"]};return ki(S,Wne,t)},Zne=$n("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Pn(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>Pe({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${FP.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${FP.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),Xne=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiFormHelperText"}),{children:c,className:d,component:f="p"}=i,a=er(i,qne),v=Q1(),S=J1({props:i,muiFormControl:v,states:["variant","size","disabled","error","filled","focused","required"]}),M=Pe({},i,{component:f,contained:S.variant==="filled"||S.variant==="outlined",variant:S.variant,size:S.size,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required}),R=Gne(M);return Z.jsx(Zne,Pe({as:f,ownerState:M,className:rr(R.root,d),ref:n},a,{children:c===" "?BP||(BP=Z.jsx("span",{className:"notranslate",children:"​"})):c}))}),Kne=Xne;var yi={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT=Symbol.for("react.element"),aT=Symbol.for("react.portal"),mb=Symbol.for("react.fragment"),gb=Symbol.for("react.strict_mode"),_b=Symbol.for("react.profiler"),yb=Symbol.for("react.provider"),vb=Symbol.for("react.context"),Yne=Symbol.for("react.server_context"),xb=Symbol.for("react.forward_ref"),bb=Symbol.for("react.suspense"),wb=Symbol.for("react.suspense_list"),Eb=Symbol.for("react.memo"),Tb=Symbol.for("react.lazy"),Jne=Symbol.for("react.offscreen"),vL;vL=Symbol.for("react.module.reference");function kl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case oT:switch(e=e.type,e){case mb:case _b:case gb:case bb:case wb:return e;default:switch(e=e&&e.$$typeof,e){case Yne:case vb:case xb:case Tb:case Eb:case yb:return e;default:return t}}case aT:return t}}}yi.ContextConsumer=vb;yi.ContextProvider=yb;yi.Element=oT;yi.ForwardRef=xb;yi.Fragment=mb;yi.Lazy=Tb;yi.Memo=Eb;yi.Portal=aT;yi.Profiler=_b;yi.StrictMode=gb;yi.Suspense=bb;yi.SuspenseList=wb;yi.isAsyncMode=function(){return!1};yi.isConcurrentMode=function(){return!1};yi.isContextConsumer=function(e){return kl(e)===vb};yi.isContextProvider=function(e){return kl(e)===yb};yi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===oT};yi.isForwardRef=function(e){return kl(e)===xb};yi.isFragment=function(e){return kl(e)===mb};yi.isLazy=function(e){return kl(e)===Tb};yi.isMemo=function(e){return kl(e)===Eb};yi.isPortal=function(e){return kl(e)===aT};yi.isProfiler=function(e){return kl(e)===_b};yi.isStrictMode=function(e){return kl(e)===gb};yi.isSuspense=function(e){return kl(e)===bb};yi.isSuspenseList=function(e){return kl(e)===wb};yi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===mb||e===_b||e===gb||e===bb||e===wb||e===Jne||typeof e=="object"&&e!==null&&(e.$$typeof===Tb||e.$$typeof===Eb||e.$$typeof===yb||e.$$typeof===vb||e.$$typeof===xb||e.$$typeof===vL||e.getModuleId!==void 0)};yi.typeOf=kl;const Qne=K.createContext({}),ere=Qne;function tre(e){return _i("MuiList",e)}Ci("MuiList",["root","padding","dense","subheader"]);const nre=["children","className","component","dense","disablePadding","subheader"],rre=e=>{const{classes:t,disablePadding:n,dense:i,subheader:c}=e;return ki({root:["root",!n&&"padding",i&&"dense",c&&"subheader"]},tre,t)},ire=$n("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>Pe({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),ore=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiList"}),{children:c,className:d,component:f="ul",dense:a=!1,disablePadding:v=!1,subheader:S}=i,M=er(i,nre),R=K.useMemo(()=>({dense:a}),[a]),N=Pe({},i,{component:f,dense:a,disablePadding:v}),W=rre(N);return Z.jsx(ere.Provider,{value:R,children:Z.jsxs(ire,Pe({as:f,className:rr(W.root,d),ref:n,ownerState:N},M,{children:[S,c]}))})}),are=ore,sre=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function f4(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function jP(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function xL(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function Eg(e,t,n,i,c,d){let f=!1,a=c(e,t,t?n:!1);for(;a;){if(a===e.firstChild){if(f)return!1;f=!0}const v=i?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!xL(a,d)||v)a=c(e,a,n);else return a.focus(),!0}return!1}const lre=K.forwardRef(function(t,n){const{actions:i,autoFocus:c=!1,autoFocusItem:d=!1,children:f,className:a,disabledItemsFocusable:v=!1,disableListWrap:S=!1,onKeyDown:M,variant:R="selectedMenu"}=t,N=er(t,sre),W=K.useRef(null),V=K.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Xc(()=>{c&&W.current.focus()},[c]),K.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(Q,oe)=>{const he=!W.current.style.width;if(Q.clientHeight<W.current.clientHeight&&he){const be=`${wO(Po(Q))}px`;W.current.style[oe.direction==="rtl"?"paddingLeft":"paddingRight"]=be,W.current.style.width=`calc(100% + ${be})`}return W.current}}),[]);const H=Q=>{const oe=W.current,he=Q.key,be=Po(oe).activeElement;if(he==="ArrowDown")Q.preventDefault(),Eg(oe,be,S,v,f4);else if(he==="ArrowUp")Q.preventDefault(),Eg(oe,be,S,v,jP);else if(he==="Home")Q.preventDefault(),Eg(oe,null,S,v,f4);else if(he==="End")Q.preventDefault(),Eg(oe,null,S,v,jP);else if(he.length===1){const A=V.current,Re=he.toLowerCase(),_e=performance.now();A.keys.length>0&&(_e-A.lastTime>500?(A.keys=[],A.repeating=!0,A.previousKeyMatched=!0):A.repeating&&Re!==A.keys[0]&&(A.repeating=!1)),A.lastTime=_e,A.keys.push(Re);const ze=be&&!A.repeating&&xL(be,A);A.previousKeyMatched&&(ze||Eg(oe,be,!1,v,f4,A))?Q.preventDefault():A.previousKeyMatched=!1}M&&M(Q)},le=vo(W,n);let G=-1;K.Children.forEach(f,(Q,oe)=>{if(!K.isValidElement(Q)){G===oe&&(G+=1,G>=f.length&&(G=-1));return}Q.props.disabled||(R==="selectedMenu"&&Q.props.selected||G===-1)&&(G=oe),G===oe&&(Q.props.disabled||Q.props.muiSkipListHighlight||Q.type.muiSkipListHighlight)&&(G+=1,G>=f.length&&(G=-1))});const X=K.Children.map(f,(Q,oe)=>{if(oe===G){const he={};return d&&(he.autoFocus=!0),Q.props.tabIndex===void 0&&R==="selectedMenu"&&(he.tabIndex=0),K.cloneElement(Q,he)}return Q});return Z.jsx(are,Pe({role:"menu",ref:le,className:a,onKeyDown:H,tabIndex:c?0:-1},N,{children:X}))}),cre=lre;function h6(e,t){return h6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},h6(e,t)}function bL(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,h6(e,t)}const $P={disabled:!1},N2=$t.createContext(null);var ure=function(t){return t.scrollTop},Ag="unmounted",qh="exited",Gh="entering",If="entered",p6="exiting",Gu=function(e){bL(t,e);function t(i,c){var d;d=e.call(this,i,c)||this;var f=c,a=f&&!f.isMounting?i.enter:i.appear,v;return d.appearStatus=null,i.in?a?(v=qh,d.appearStatus=Gh):v=If:i.unmountOnExit||i.mountOnEnter?v=Ag:v=qh,d.state={status:v},d.nextCallback=null,d}t.getDerivedStateFromProps=function(c,d){var f=c.in;return f&&d.status===Ag?{status:qh}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(c){var d=null;if(c!==this.props){var f=this.state.status;this.props.in?f!==Gh&&f!==If&&(d=Gh):(f===Gh||f===If)&&(d=p6)}this.updateStatus(!1,d)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var c=this.props.timeout,d,f,a;return d=f=a=c,c!=null&&typeof c!="number"&&(d=c.exit,f=c.enter,a=c.appear!==void 0?c.appear:f),{exit:d,enter:f,appear:a}},n.updateStatus=function(c,d){if(c===void 0&&(c=!1),d!==null)if(this.cancelNextCallback(),d===Gh){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:Ky.findDOMNode(this);f&&ure(f)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===qh&&this.setState({status:Ag})},n.performEnter=function(c){var d=this,f=this.props.enter,a=this.context?this.context.isMounting:c,v=this.props.nodeRef?[a]:[Ky.findDOMNode(this),a],S=v[0],M=v[1],R=this.getTimeouts(),N=a?R.appear:R.enter;if(!c&&!f||$P.disabled){this.safeSetState({status:If},function(){d.props.onEntered(S)});return}this.props.onEnter(S,M),this.safeSetState({status:Gh},function(){d.props.onEntering(S,M),d.onTransitionEnd(N,function(){d.safeSetState({status:If},function(){d.props.onEntered(S,M)})})})},n.performExit=function(){var c=this,d=this.props.exit,f=this.getTimeouts(),a=this.props.nodeRef?void 0:Ky.findDOMNode(this);if(!d||$P.disabled){this.safeSetState({status:qh},function(){c.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:p6},function(){c.props.onExiting(a),c.onTransitionEnd(f.exit,function(){c.safeSetState({status:qh},function(){c.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(c,d){d=this.setNextCallback(d),this.setState(c,d)},n.setNextCallback=function(c){var d=this,f=!0;return this.nextCallback=function(a){f&&(f=!1,d.nextCallback=null,c(a))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},n.onTransitionEnd=function(c,d){this.setNextCallback(d);var f=this.props.nodeRef?this.props.nodeRef.current:Ky.findDOMNode(this),a=c==null&&!this.props.addEndListener;if(!f||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var v=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],S=v[0],M=v[1];this.props.addEndListener(S,M)}c!=null&&setTimeout(this.nextCallback,c)},n.render=function(){var c=this.state.status;if(c===Ag)return null;var d=this.props,f=d.children;d.in,d.mountOnEnter,d.unmountOnExit,d.appear,d.enter,d.exit,d.timeout,d.addEndListener,d.onEnter,d.onEntering,d.onEntered,d.onExit,d.onExiting,d.onExited,d.nodeRef;var a=er(d,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return $t.createElement(N2.Provider,{value:null},typeof f=="function"?f(c,a):$t.cloneElement($t.Children.only(f),a))},t}($t.Component);Gu.contextType=N2;Gu.propTypes={};function Cf(){}Gu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Cf,onEntering:Cf,onEntered:Cf,onExit:Cf,onExiting:Cf,onExited:Cf};Gu.UNMOUNTED=Ag;Gu.EXITED=qh;Gu.ENTERING=Gh;Gu.ENTERED=If;Gu.EXITING=p6;const wL=Gu;function dre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sT(e,t){var n=function(d){return t&&K.isValidElement(d)?t(d):d},i=Object.create(null);return e&&K.Children.map(e,function(c){return c}).forEach(function(c){i[c.key]=n(c)}),i}function hre(e,t){e=e||{},t=t||{};function n(M){return M in t?t[M]:e[M]}var i=Object.create(null),c=[];for(var d in e)d in t?c.length&&(i[d]=c,c=[]):c.push(d);var f,a={};for(var v in t){if(i[v])for(f=0;f<i[v].length;f++){var S=i[v][f];a[i[v][f]]=n(S)}a[v]=n(v)}for(f=0;f<c.length;f++)a[c[f]]=n(c[f]);return a}function Qh(e,t,n){return n[t]!=null?n[t]:e.props[t]}function pre(e,t){return sT(e.children,function(n){return K.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Qh(n,"appear",e),enter:Qh(n,"enter",e),exit:Qh(n,"exit",e)})})}function fre(e,t,n){var i=sT(e.children),c=hre(t,i);return Object.keys(c).forEach(function(d){var f=c[d];if(K.isValidElement(f)){var a=d in t,v=d in i,S=t[d],M=K.isValidElement(S)&&!S.props.in;v&&(!a||M)?c[d]=K.cloneElement(f,{onExited:n.bind(null,f),in:!0,exit:Qh(f,"exit",e),enter:Qh(f,"enter",e)}):!v&&a&&!M?c[d]=K.cloneElement(f,{in:!1}):v&&a&&K.isValidElement(S)&&(c[d]=K.cloneElement(f,{onExited:n.bind(null,f),in:S.props.in,exit:Qh(f,"exit",e),enter:Qh(f,"enter",e)}))}}),c}var mre=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},gre={component:"div",childFactory:function(t){return t}},lT=function(e){bL(t,e);function t(i,c){var d;d=e.call(this,i,c)||this;var f=d.handleExited.bind(dre(d));return d.state={contextValue:{isMounting:!0},handleExited:f,firstRender:!0},d}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(c,d){var f=d.children,a=d.handleExited,v=d.firstRender;return{children:v?pre(c,a):fre(c,f,a),firstRender:!1}},n.handleExited=function(c,d){var f=sT(this.props.children);c.key in f||(c.props.onExited&&c.props.onExited(d),this.mounted&&this.setState(function(a){var v=Pe({},a.children);return delete v[c.key],{children:v}}))},n.render=function(){var c=this.props,d=c.component,f=c.childFactory,a=er(c,["component","childFactory"]),v=this.state.contextValue,S=mre(this.state.children).map(f);return delete a.appear,delete a.enter,delete a.exit,d===null?$t.createElement(N2.Provider,{value:v},S):$t.createElement(N2.Provider,{value:v},$t.createElement(d,a,S))},t}($t.Component);lT.propTypes={};lT.defaultProps=gre;const _re=lT,EL=e=>e.scrollTop;function F2(e,t){var n,i;const{timeout:c,easing:d,style:f={}}=e;return{duration:(n=f.transitionDuration)!=null?n:typeof c=="number"?c:c[t.mode]||0,easing:(i=f.transitionTimingFunction)!=null?i:typeof d=="object"?d[t.mode]:d,delay:f.transitionDelay}}const yre=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function f6(e){return`scale(${e}, ${e**2})`}const vre={entering:{opacity:1,transform:f6(1)},entered:{opacity:1,transform:"none"}},m4=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),TL=K.forwardRef(function(t,n){const{addEndListener:i,appear:c=!0,children:d,easing:f,in:a,onEnter:v,onEntered:S,onEntering:M,onExit:R,onExited:N,onExiting:W,style:V,timeout:H="auto",TransitionComponent:le=wL}=t,G=er(t,yre),X=K.useRef(),Q=K.useRef(),oe=cb(),he=K.useRef(null),be=vo(he,d.ref,n),A=He=>rt=>{if(He){const tt=he.current;rt===void 0?He(tt):He(tt,rt)}},Re=A(M),_e=A((He,rt)=>{EL(He);const{duration:tt,delay:Ne,easing:et}=F2({style:V,timeout:H,easing:f},{mode:"enter"});let it;H==="auto"?(it=oe.transitions.getAutoHeightDuration(He.clientHeight),Q.current=it):it=tt,He.style.transition=[oe.transitions.create("opacity",{duration:it,delay:Ne}),oe.transitions.create("transform",{duration:m4?it:it*.666,delay:Ne,easing:et})].join(","),v&&v(He,rt)}),ze=A(S),ot=A(W),gt=A(He=>{const{duration:rt,delay:tt,easing:Ne}=F2({style:V,timeout:H,easing:f},{mode:"exit"});let et;H==="auto"?(et=oe.transitions.getAutoHeightDuration(He.clientHeight),Q.current=et):et=rt,He.style.transition=[oe.transitions.create("opacity",{duration:et,delay:tt}),oe.transitions.create("transform",{duration:m4?et:et*.666,delay:m4?tt:tt||et*.333,easing:Ne})].join(","),He.style.opacity=0,He.style.transform=f6(.75),R&&R(He)}),Ze=A(N),We=He=>{H==="auto"&&(X.current=setTimeout(He,Q.current||0)),i&&i(he.current,He)};return K.useEffect(()=>()=>{clearTimeout(X.current)},[]),Z.jsx(le,Pe({appear:c,in:a,nodeRef:he,onEnter:_e,onEntered:ze,onEntering:Re,onExit:gt,onExited:Ze,onExiting:ot,addEndListener:We,timeout:H==="auto"?null:H},G,{children:(He,rt)=>K.cloneElement(d,Pe({style:Pe({opacity:0,transform:f6(.75),visibility:He==="exited"&&!a?"hidden":void 0},vre[He],V,d.props.style),ref:be},rt))}))});TL.muiSupportAuto=!0;const xre=TL,bre=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],wre={entering:{opacity:1},entered:{opacity:1}},Ere=K.forwardRef(function(t,n){const i=cb(),c={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:d,appear:f=!0,children:a,easing:v,in:S,onEnter:M,onEntered:R,onEntering:N,onExit:W,onExited:V,onExiting:H,style:le,timeout:G=c,TransitionComponent:X=wL}=t,Q=er(t,bre),oe=K.useRef(null),he=vo(oe,a.ref,n),be=We=>He=>{if(We){const rt=oe.current;He===void 0?We(rt):We(rt,He)}},A=be(N),Re=be((We,He)=>{EL(We);const rt=F2({style:le,timeout:G,easing:v},{mode:"enter"});We.style.webkitTransition=i.transitions.create("opacity",rt),We.style.transition=i.transitions.create("opacity",rt),M&&M(We,He)}),_e=be(R),ze=be(H),ot=be(We=>{const He=F2({style:le,timeout:G,easing:v},{mode:"exit"});We.style.webkitTransition=i.transitions.create("opacity",He),We.style.transition=i.transitions.create("opacity",He),W&&W(We)}),gt=be(V),Ze=We=>{d&&d(oe.current,We)};return Z.jsx(X,Pe({appear:f,in:S,nodeRef:oe,onEnter:Re,onEntered:_e,onEntering:A,onExit:ot,onExited:gt,onExiting:ze,addEndListener:Ze,timeout:G},Q,{children:(We,He)=>K.cloneElement(a,Pe({style:Pe({opacity:0,visibility:We==="exited"&&!S?"hidden":void 0},wre[We],le,a.props.style),ref:he},He))}))}),Tre=Ere;function Sre(e){return _i("MuiBackdrop",e)}Ci("MuiBackdrop",["root","invisible"]);const kre=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Cre=e=>{const{classes:t,invisible:n}=e;return ki({root:["root",n&&"invisible"]},Sre,t)},Pre=$n("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>Pe({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),Ire=K.forwardRef(function(t,n){var i,c,d;const f=Pi({props:t,name:"MuiBackdrop"}),{children:a,className:v,component:S="div",components:M={},componentsProps:R={},invisible:N=!1,open:W,slotProps:V={},slots:H={},TransitionComponent:le=Tre,transitionDuration:G}=f,X=er(f,kre),Q=Pe({},f,{component:S,invisible:N}),oe=Cre(Q),he=(i=V.root)!=null?i:R.root;return Z.jsx(le,Pe({in:W,timeout:G},X,{children:Z.jsx(Pre,Pe({"aria-hidden":!0},he,{as:(c=(d=H.root)!=null?d:M.Root)!=null?c:S,className:rr(oe.root,v,he==null?void 0:he.className),ownerState:Pe({},Q,he==null?void 0:he.ownerState),classes:oe,ref:n,children:a}))}))}),Are=Ire,Mre=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],Dre=$n("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>Pe({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),Rre=$n(Are,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Ore=K.forwardRef(function(t,n){var i,c,d,f,a,v;const S=Pi({name:"MuiModal",props:t}),{BackdropComponent:M=Rre,BackdropProps:R,classes:N,className:W,closeAfterTransition:V=!1,children:H,container:le,component:G,components:X={},componentsProps:Q={},disableAutoFocus:oe=!1,disableEnforceFocus:he=!1,disableEscapeKeyDown:be=!1,disablePortal:A=!1,disableRestoreFocus:Re=!1,disableScrollLock:_e=!1,hideBackdrop:ze=!1,keepMounted:ot=!1,onBackdropClick:gt,onClose:Ze,open:We,slotProps:He,slots:rt,theme:tt}=S,Ne=er(S,Mre),[et,it]=K.useState(!0),Dt={container:le,closeAfterTransition:V,disableAutoFocus:oe,disableEnforceFocus:he,disableEscapeKeyDown:be,disablePortal:A,disableRestoreFocus:Re,disableScrollLock:_e,hideBackdrop:ze,keepMounted:ot,onBackdropClick:gt,onClose:Ze,open:We},Tt=Pe({},S,Dt,{exited:et}),Rt=(i=(c=rt==null?void 0:rt.root)!=null?c:X.Root)!=null?i:Dre,Yt=(d=(f=rt==null?void 0:rt.backdrop)!=null?f:X.Backdrop)!=null?d:M,tn=(a=He==null?void 0:He.root)!=null?a:Q.root,dn=(v=He==null?void 0:He.backdrop)!=null?v:Q.backdrop;return Z.jsx(hte,Pe({slots:{root:Rt,backdrop:Yt},slotProps:{root:()=>Pe({},l6(tn,Tt),!Lu(Rt)&&{as:G,theme:tt},{className:rr(W,tn==null?void 0:tn.className,N==null?void 0:N.root,!Tt.open&&Tt.exited&&(N==null?void 0:N.hidden))}),backdrop:()=>Pe({},R,l6(dn,Tt),{className:rr(dn==null?void 0:dn.className,R==null?void 0:R.className,N==null?void 0:N.backdrop)})},onTransitionEnter:()=>it(!1),onTransitionExited:()=>it(!0),ref:n},Ne,Dt,{children:H}))}),Lre=Ore;function zre(e){return _i("MuiPaper",e)}Ci("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Nre=["className","component","elevation","square","variant"],Fre=e=>{const{square:t,elevation:n,variant:i,classes:c}=e,d={root:["root",i,!t&&"rounded",i==="elevation"&&`elevation${n}`]};return ki(d,zre,c)},Bre=$n("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return Pe({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Pe({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${eo("#fff",_P(t.elevation))}, ${eo("#fff",_P(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),jre=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiPaper"}),{className:c,component:d="div",elevation:f=1,square:a=!1,variant:v="elevation"}=i,S=er(i,Nre),M=Pe({},i,{component:d,elevation:f,square:a,variant:v}),R=Fre(M);return Z.jsx(Bre,Pe({as:d,ownerState:M,className:rr(R.root,c),ref:n},S))}),cT=jre;function $re(e){return _i("MuiPopover",e)}Ci("MuiPopover",["root","paper"]);const Ure=["onEntering"],Vre=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"],Wre=["slotProps"];function UP(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function VP(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function WP(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function g4(e){return typeof e=="function"?e():e}const Hre=e=>{const{classes:t}=e;return ki({root:["root"],paper:["paper"]},$re,t)},qre=$n(Lre,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),SL=$n(cT,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Gre=K.forwardRef(function(t,n){var i,c,d;const f=Pi({props:t,name:"MuiPopover"}),{action:a,anchorEl:v,anchorOrigin:S={vertical:"top",horizontal:"left"},anchorPosition:M,anchorReference:R="anchorEl",children:N,className:W,container:V,elevation:H=8,marginThreshold:le=16,open:G,PaperProps:X={},slots:Q,slotProps:oe,transformOrigin:he={vertical:"top",horizontal:"left"},TransitionComponent:be=xre,transitionDuration:A="auto",TransitionProps:{onEntering:Re}={}}=f,_e=er(f.TransitionProps,Ure),ze=er(f,Vre),ot=(i=oe==null?void 0:oe.paper)!=null?i:X,gt=K.useRef(),Ze=vo(gt,ot.ref),We=Pe({},f,{anchorOrigin:S,anchorReference:R,elevation:H,marginThreshold:le,externalPaperSlotProps:ot,transformOrigin:he,TransitionComponent:be,transitionDuration:A,TransitionProps:_e}),He=Hre(We),rt=K.useCallback(()=>{if(R==="anchorPosition")return M;const nn=g4(v),Zt=(nn&&nn.nodeType===1?nn:Po(gt.current).body).getBoundingClientRect();return{top:Zt.top+UP(Zt,S.vertical),left:Zt.left+VP(Zt,S.horizontal)}},[v,S.horizontal,S.vertical,M,R]),tt=K.useCallback(nn=>({vertical:UP(nn,he.vertical),horizontal:VP(nn,he.horizontal)}),[he.horizontal,he.vertical]),Ne=K.useCallback(nn=>{const En={width:nn.offsetWidth,height:nn.offsetHeight},Zt=tt(En);if(R==="none")return{top:null,left:null,transformOrigin:WP(Zt)};const Ct=rt();let On=Ct.top-Zt.vertical,an=Ct.left-Zt.horizontal;const Zn=On+En.height,tr=an+En.width,Nn=eh(g4(v)),Yn=Nn.innerHeight-le,Un=Nn.innerWidth-le;if(On<le){const qn=On-le;On-=qn,Zt.vertical+=qn}else if(Zn>Yn){const qn=Zn-Yn;On-=qn,Zt.vertical+=qn}if(an<le){const qn=an-le;an-=qn,Zt.horizontal+=qn}else if(tr>Un){const qn=tr-Un;an-=qn,Zt.horizontal+=qn}return{top:`${Math.round(On)}px`,left:`${Math.round(an)}px`,transformOrigin:WP(Zt)}},[v,R,rt,tt,le]),[et,it]=K.useState(G),Dt=K.useCallback(()=>{const nn=gt.current;if(!nn)return;const En=Ne(nn);En.top!==null&&(nn.style.top=En.top),En.left!==null&&(nn.style.left=En.left),nn.style.transformOrigin=En.transformOrigin,it(!0)},[Ne]),Tt=(nn,En)=>{Re&&Re(nn,En),Dt()},Rt=()=>{it(!1)};K.useEffect(()=>{G&&Dt()}),K.useImperativeHandle(a,()=>G?{updatePosition:()=>{Dt()}}:null,[G,Dt]),K.useEffect(()=>{if(!G)return;const nn=PE(()=>{Dt()}),En=eh(v);return En.addEventListener("resize",nn),()=>{nn.clear(),En.removeEventListener("resize",nn)}},[v,G,Dt]);let Yt=A;A==="auto"&&!be.muiSupportAuto&&(Yt=void 0);const tn=V||(v?Po(g4(v)).body:void 0),dn=(c=Q==null?void 0:Q.root)!=null?c:qre,_n=(d=Q==null?void 0:Q.paper)!=null?d:SL,In=Ds({elementType:_n,externalSlotProps:Pe({},ot,{style:et?ot.style:Pe({},ot.style,{opacity:0})}),additionalProps:{elevation:H,ref:Ze},ownerState:We,className:rr(He.paper,ot==null?void 0:ot.className)}),Jt=Ds({elementType:dn,externalSlotProps:(oe==null?void 0:oe.root)||{},externalForwardedProps:ze,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:tn,open:G},ownerState:We,className:rr(He.root,W)}),{slotProps:vn}=Jt,Ft=er(Jt,Wre);return Z.jsx(dn,Pe({},Ft,!Lu(dn)&&{slotProps:vn},{children:Z.jsx(be,Pe({appear:!0,in:G,onEntering:Tt,onExited:Rt,timeout:Yt},_e,{children:Z.jsx(_n,Pe({},In,{children:N}))}))}))}),Zre=Gre;function Xre(e){return _i("MuiMenu",e)}Ci("MuiMenu",["root","paper","list"]);const Kre=["onEntering"],Yre=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Jre={vertical:"top",horizontal:"right"},Qre={vertical:"top",horizontal:"left"},eie=e=>{const{classes:t}=e;return ki({root:["root"],paper:["paper"],list:["list"]},Xre,t)},tie=$n(Zre,{shouldForwardProp:e=>qu(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nie=$n(SL,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),rie=$n(cre,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),iie=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiMenu"}),{autoFocus:c=!0,children:d,disableAutoFocusItem:f=!1,MenuListProps:a={},onClose:v,open:S,PaperProps:M={},PopoverClasses:R,transitionDuration:N="auto",TransitionProps:{onEntering:W}={},variant:V="selectedMenu"}=i,H=er(i.TransitionProps,Kre),le=er(i,Yre),G=cb(),X=G.direction==="rtl",Q=Pe({},i,{autoFocus:c,disableAutoFocusItem:f,MenuListProps:a,onEntering:W,PaperProps:M,transitionDuration:N,TransitionProps:H,variant:V}),oe=eie(Q),he=c&&!f&&S,be=K.useRef(null),A=(ze,ot)=>{be.current&&be.current.adjustStyleForScrollbar(ze,G),W&&W(ze,ot)},Re=ze=>{ze.key==="Tab"&&(ze.preventDefault(),v&&v(ze,"tabKeyDown"))};let _e=-1;return K.Children.map(d,(ze,ot)=>{K.isValidElement(ze)&&(ze.props.disabled||(V==="selectedMenu"&&ze.props.selected||_e===-1)&&(_e=ot))}),Z.jsx(tie,Pe({onClose:v,anchorOrigin:{vertical:"bottom",horizontal:X?"right":"left"},transformOrigin:X?Jre:Qre,slots:{paper:nie},slotProps:{paper:Pe({},M,{classes:Pe({},M.classes,{root:oe.paper})})},className:oe.root,open:S,ref:n,transitionDuration:N,TransitionProps:Pe({onEntering:A},H),ownerState:Q},le,{classes:R,children:Z.jsx(rie,Pe({onKeyDown:Re,actions:be,autoFocus:c&&(_e===-1||f),autoFocusItem:he,variant:V},a,{className:rr(oe.list,a.className),children:d}))}))}),oie=iie;function aie(e){return _i("MuiNativeSelect",e)}const sie=Ci("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),uT=sie,lie=["className","disabled","error","IconComponent","inputRef","variant"],cie=e=>{const{classes:t,variant:n,disabled:i,multiple:c,open:d,error:f}=e,a={select:["select",n,i&&"disabled",c&&"multiple",f&&"error"],icon:["icon",`icon${Pn(n)}`,d&&"iconOpen",i&&"disabled"]};return ki(a,aie,t)},kL=({ownerState:e,theme:t})=>Pe({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Pe({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${uT.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),uie=$n("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:qu,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${uT.multiple}`]:t.multiple}]}})(kL),CL=({ownerState:e,theme:t})=>Pe({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${uT.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),die=$n("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Pn(n.variant)}`],n.open&&t.iconOpen]}})(CL),hie=K.forwardRef(function(t,n){const{className:i,disabled:c,error:d,IconComponent:f,inputRef:a,variant:v="standard"}=t,S=er(t,lie),M=Pe({},t,{disabled:c,variant:v,error:d}),R=cie(M);return Z.jsxs(K.Fragment,{children:[Z.jsx(uie,Pe({ownerState:M,className:rr(R.select,i),disabled:c,ref:a||n},S)),t.multiple?null:Z.jsx(die,{as:f,ownerState:M,className:R.icon})]})}),pie=hie;function fie(e){return _i("MuiSelect",e)}const mie=Ci("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Tg=mie;var HP;const gie=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],_ie=$n("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Tg.select}`]:t.select},{[`&.${Tg.select}`]:t[n.variant]},{[`&.${Tg.error}`]:t.error},{[`&.${Tg.multiple}`]:t.multiple}]}})(kL,{[`&.${Tg.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),yie=$n("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Pn(n.variant)}`],n.open&&t.iconOpen]}})(CL),vie=$n("input",{shouldForwardProp:e=>XE(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function qP(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function xie(e){return e==null||typeof e=="string"&&!e.trim()}const bie=e=>{const{classes:t,variant:n,disabled:i,multiple:c,open:d,error:f}=e,a={select:["select",n,i&&"disabled",c&&"multiple",f&&"error"],icon:["icon",`icon${Pn(n)}`,d&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return ki(a,fie,t)},wie=K.forwardRef(function(t,n){const{"aria-describedby":i,"aria-label":c,autoFocus:d,autoWidth:f,children:a,className:v,defaultOpen:S,defaultValue:M,disabled:R,displayEmpty:N,error:W=!1,IconComponent:V,inputRef:H,labelId:le,MenuProps:G={},multiple:X,name:Q,onBlur:oe,onChange:he,onClose:be,onFocus:A,onOpen:Re,open:_e,readOnly:ze,renderValue:ot,SelectDisplayProps:gt={},tabIndex:Ze,value:We,variant:He="standard"}=t,rt=er(t,gie),[tt,Ne]=ip({controlled:We,default:M,name:"Select"}),[et,it]=ip({controlled:_e,default:S,name:"Select"}),Dt=K.useRef(null),Tt=K.useRef(null),[Rt,Yt]=K.useState(null),{current:tn}=K.useRef(_e!=null),[dn,_n]=K.useState(),In=vo(n,H),Jt=K.useCallback(on=>{Tt.current=on,on&&Yt(on)},[]),vn=Rt==null?void 0:Rt.parentNode;K.useImperativeHandle(In,()=>({focus:()=>{Tt.current.focus()},node:Dt.current,value:tt}),[tt]),K.useEffect(()=>{S&&et&&Rt&&!tn&&(_n(f?null:vn.clientWidth),Tt.current.focus())},[Rt,f]),K.useEffect(()=>{d&&Tt.current.focus()},[d]),K.useEffect(()=>{if(!le)return;const on=Po(Tt.current).getElementById(le);if(on){const yn=()=>{getSelection().isCollapsed&&Tt.current.focus()};return on.addEventListener("click",yn),()=>{on.removeEventListener("click",yn)}}},[le]);const Ft=(on,yn)=>{on?Re&&Re(yn):be&&be(yn),tn||(_n(f?null:vn.clientWidth),it(on))},nn=on=>{on.button===0&&(on.preventDefault(),Tt.current.focus(),Ft(!0,on))},En=on=>{Ft(!1,on)},Zt=K.Children.toArray(a),Ct=on=>{const yn=Zt.find(Dn=>Dn.props.value===on.target.value);yn!==void 0&&(Ne(yn.props.value),he&&he(on,yn))},On=on=>yn=>{let Dn;if(yn.currentTarget.hasAttribute("tabindex")){if(X){Dn=Array.isArray(tt)?tt.slice():[];const Fn=tt.indexOf(on.props.value);Fn===-1?Dn.push(on.props.value):Dn.splice(Fn,1)}else Dn=on.props.value;if(on.props.onClick&&on.props.onClick(yn),tt!==Dn&&(Ne(Dn),he)){const Fn=yn.nativeEvent||yn,nr=new Fn.constructor(Fn.type,Fn);Object.defineProperty(nr,"target",{writable:!0,value:{value:Dn,name:Q}}),he(nr,on)}X||Ft(!1,yn)}},an=on=>{ze||[" ","ArrowUp","ArrowDown","Enter"].indexOf(on.key)!==-1&&(on.preventDefault(),Ft(!0,on))},Zn=Rt!==null&&et,tr=on=>{!Zn&&oe&&(Object.defineProperty(on,"target",{writable:!0,value:{value:tt,name:Q}}),oe(on))};delete rt["aria-invalid"];let Nn,Yn;const Un=[];let qn=!1;(z2({value:tt})||N)&&(ot?Nn=ot(tt):qn=!0);const bn=Zt.map(on=>{if(!K.isValidElement(on))return null;let yn;if(X){if(!Array.isArray(tt))throw new Error(Qd(2));yn=tt.some(Dn=>qP(Dn,on.props.value)),yn&&qn&&Un.push(on.props.children)}else yn=qP(tt,on.props.value),yn&&qn&&(Yn=on.props.children);return K.cloneElement(on,{"aria-selected":yn?"true":"false",onClick:On(on),onKeyUp:Dn=>{Dn.key===" "&&Dn.preventDefault(),on.props.onKeyUp&&on.props.onKeyUp(Dn)},role:"option",selected:yn,value:void 0,"data-value":on.props.value})});qn&&(X?Un.length===0?Nn=null:Nn=Un.reduce((on,yn,Dn)=>(on.push(yn),Dn<Un.length-1&&on.push(", "),on),[]):Nn=Yn);let Ye=dn;!f&&tn&&Rt&&(Ye=vn.clientWidth);let Xt;typeof Ze<"u"?Xt=Ze:Xt=R?null:0;const rn=gt.id||(Q?`mui-component-select-${Q}`:void 0),qt=Pe({},t,{variant:He,value:tt,open:Zn,error:W}),en=bie(qt);return Z.jsxs(K.Fragment,{children:[Z.jsx(_ie,Pe({ref:Jt,tabIndex:Xt,role:"button","aria-disabled":R?"true":void 0,"aria-expanded":Zn?"true":"false","aria-haspopup":"listbox","aria-label":c,"aria-labelledby":[le,rn].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:an,onMouseDown:R||ze?null:nn,onBlur:tr,onFocus:A},gt,{ownerState:qt,className:rr(gt.className,en.select,v),id:rn,children:xie(Nn)?HP||(HP=Z.jsx("span",{className:"notranslate",children:"​"})):Nn})),Z.jsx(vie,Pe({"aria-invalid":W,value:Array.isArray(tt)?tt.join(","):tt,name:Q,ref:Dt,"aria-hidden":!0,onChange:Ct,tabIndex:-1,disabled:R,className:en.nativeInput,autoFocus:d,ownerState:qt},rt)),Z.jsx(yie,{as:V,className:en.icon,ownerState:qt}),Z.jsx(oie,Pe({id:`menu-${Q||""}`,anchorEl:vn,open:Zn,onClose:En,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},G,{MenuListProps:Pe({"aria-labelledby":le,role:"listbox",disableListWrap:!0},G.MenuListProps),PaperProps:Pe({},G.PaperProps,{style:Pe({minWidth:Ye},G.PaperProps!=null?G.PaperProps.style:null)}),children:bn}))]})}),Eie=wie;function Tie(e){return _i("MuiSvgIcon",e)}Ci("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Sie=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],kie=e=>{const{color:t,fontSize:n,classes:i}=e,c={root:["root",t!=="inherit"&&`color${Pn(t)}`,`fontSize${Pn(n)}`]};return ki(c,Tie,i)},Cie=$n("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Pn(n.color)}`],t[`fontSize${Pn(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,i,c,d,f,a,v,S,M,R,N,W,V;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(i=n.create)==null?void 0:i.call(n,"fill",{duration:(c=e.transitions)==null||(c=c.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(f=d.pxToRem)==null?void 0:f.call(d,20))||"1.25rem",medium:((a=e.typography)==null||(v=a.pxToRem)==null?void 0:v.call(a,24))||"1.5rem",large:((S=e.typography)==null||(M=S.pxToRem)==null?void 0:M.call(S,35))||"2.1875rem"}[t.fontSize],color:(R=(N=(e.vars||e).palette)==null||(N=N[t.color])==null?void 0:N.main)!=null?R:{action:(W=(e.vars||e).palette)==null||(W=W.action)==null?void 0:W.active,disabled:(V=(e.vars||e).palette)==null||(V=V.action)==null?void 0:V.disabled,inherit:void 0}[t.color]}}),PL=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiSvgIcon"}),{children:c,className:d,color:f="inherit",component:a="svg",fontSize:v="medium",htmlColor:S,inheritViewBox:M=!1,titleAccess:R,viewBox:N="0 0 24 24"}=i,W=er(i,Sie),V=K.isValidElement(c)&&c.type==="svg",H=Pe({},i,{color:f,component:a,fontSize:v,instanceFontSize:t.fontSize,inheritViewBox:M,viewBox:N,hasSvgAsChild:V}),le={};M||(le.viewBox=N);const G=kie(H);return Z.jsxs(Cie,Pe({as:a,className:rr(G.root,d),focusable:"false",color:S,"aria-hidden":R?void 0:!0,role:R?"img":void 0,ref:n},le,W,V&&c.props,{ownerState:H,children:[V?c.props.children:c,R?Z.jsx("title",{children:R}):null]}))});PL.muiName="SvgIcon";const GP=PL;function Sb(e,t){function n(i,c){return Z.jsx(GP,Pe({"data-testid":`${t}Icon`,ref:c},i,{children:e}))}return n.muiName=GP.muiName,K.memo(K.forwardRef(n))}const IL=Sb(Z.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Pie=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Iie=e=>{const{classes:t}=e;return t},dT={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>qu(e)&&e!=="variant",slot:"Root"},Aie=$n(fL,dT)(""),Mie=$n(yL,dT)(""),Die=$n(gL,dT)(""),AL=K.forwardRef(function(t,n){const i=Pi({name:"MuiSelect",props:t}),{autoWidth:c=!1,children:d,classes:f={},className:a,defaultOpen:v=!1,displayEmpty:S=!1,IconComponent:M=IL,id:R,input:N,inputProps:W,label:V,labelId:H,MenuProps:le,multiple:G=!1,native:X=!1,onClose:Q,onOpen:oe,open:he,renderValue:be,SelectDisplayProps:A,variant:Re="outlined"}=i,_e=er(i,Pie),ze=X?pie:Eie,ot=Q1(),gt=J1({props:i,muiFormControl:ot,states:["variant","error"]}),Ze=gt.variant||Re,We=Pe({},i,{variant:Ze,classes:f}),He=Iie(We),rt=N||{standard:Z.jsx(Aie,{ownerState:We}),outlined:Z.jsx(Mie,{label:V,ownerState:We}),filled:Z.jsx(Die,{ownerState:We})}[Ze],tt=vo(n,rt.ref);return Z.jsx(K.Fragment,{children:K.cloneElement(rt,Pe({inputComponent:ze,inputProps:Pe({children:d,error:gt.error,IconComponent:M,variant:Ze,type:void 0,multiple:G},X?{id:R}:{autoWidth:c,defaultOpen:v,displayEmpty:S,labelId:H,MenuProps:le,onClose:Q,onOpen:oe,open:he,renderValue:be,SelectDisplayProps:Pe({id:R},A)},W,{classes:W?hs(He,W.classes):He},N?N.props.inputProps:{})},G&&X&&Ze==="outlined"?{notched:!0}:{},{ref:tt,className:rr(rt.props.className,a)},!N&&{variant:Ze},_e))})});AL.muiName="Select";const Rie=AL;function Oie(e){return _i("MuiTextField",e)}Ci("MuiTextField",["root"]);const Lie=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],zie={standard:fL,filled:gL,outlined:yL},Nie=e=>{const{classes:t}=e;return ki({root:["root"]},Oie,t)},Fie=$n(Vne,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Bie=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiTextField"}),{autoComplete:c,autoFocus:d=!1,children:f,className:a,color:v="primary",defaultValue:S,disabled:M=!1,error:R=!1,FormHelperTextProps:N,fullWidth:W=!1,helperText:V,id:H,InputLabelProps:le,inputProps:G,InputProps:X,inputRef:Q,label:oe,maxRows:he,minRows:be,multiline:A=!1,name:Re,onBlur:_e,onChange:ze,onClick:ot,onFocus:gt,placeholder:Ze,required:We=!1,rows:He,select:rt=!1,SelectProps:tt,type:Ne,value:et,variant:it="outlined"}=i,Dt=er(i,Lie),Tt=Pe({},i,{autoFocus:d,color:v,disabled:M,error:R,fullWidth:W,multiline:A,required:We,select:rt,variant:it}),Rt=Nie(Tt),Yt={};it==="outlined"&&(le&&typeof le.shrink<"u"&&(Yt.notched=le.shrink),Yt.label=oe),rt&&((!tt||!tt.native)&&(Yt.id=void 0),Yt["aria-describedby"]=void 0);const tn=IE(H),dn=V&&tn?`${tn}-helper-text`:void 0,_n=oe&&tn?`${tn}-label`:void 0,In=zie[it],Jt=Z.jsx(In,Pe({"aria-describedby":dn,autoComplete:c,autoFocus:d,defaultValue:S,fullWidth:W,multiline:A,name:Re,rows:He,maxRows:he,minRows:be,type:Ne,value:et,id:tn,inputRef:Q,onBlur:_e,onChange:ze,onFocus:gt,onClick:ot,placeholder:Ze,inputProps:G},Yt,X));return Z.jsxs(Fie,Pe({className:rr(Rt.root,a),disabled:M,error:R,fullWidth:W,ref:n,required:We,color:v,variant:it,ownerState:Tt},Dt,{children:[oe!=null&&oe!==""&&Z.jsx(Nne,Pe({htmlFor:tn,id:_n},le,{children:oe})),rt?Z.jsx(Rie,Pe({"aria-describedby":dn,id:tn,labelId:_n,value:et,input:Jt},tt,{children:f})):Jt,V&&Z.jsx(Kne,Pe({id:dn},N,{children:V}))]}))}),ZP=Bie,jie=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],$ie=$n(Qee,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Uie=K.forwardRef(function(t,n){var i;const c=qE(),d=Pi({props:t,name:"MuiPopper"}),{anchorEl:f,component:a,components:v,componentsProps:S,container:M,disablePortal:R,keepMounted:N,modifiers:W,open:V,placement:H,popperOptions:le,popperRef:G,transition:X,slots:Q,slotProps:oe}=d,he=er(d,jie),be=(i=Q==null?void 0:Q.root)!=null?i:v==null?void 0:v.Root,A=Pe({anchorEl:f,container:M,disablePortal:R,keepMounted:N,modifiers:W,open:V,placement:H,popperOptions:le,popperRef:G,transition:X},he);return Z.jsx($ie,Pe({as:a,direction:c==null?void 0:c.direction,slots:{root:be},slotProps:oe??S},A,{ref:n}))}),ML=Uie;function Vie(e){return _i("MuiListSubheader",e)}Ci("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const Wie=["className","color","component","disableGutters","disableSticky","inset"],Hie=e=>{const{classes:t,color:n,disableGutters:i,inset:c,disableSticky:d}=e,f={root:["root",n!=="default"&&`color${Pn(n)}`,!i&&"gutters",c&&"inset",!d&&"sticky"]};return ki(f,Vie,t)},qie=$n("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Pn(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>Pe({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),DL=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiListSubheader"}),{className:c,color:d="default",component:f="li",disableGutters:a=!1,disableSticky:v=!1,inset:S=!1}=i,M=er(i,Wie),R=Pe({},i,{color:d,component:f,disableGutters:a,disableSticky:v,inset:S}),N=Hie(R);return Z.jsx(qie,Pe({as:f,className:rr(N.root,c),ref:n,ownerState:R},M))});DL.muiSkipListHighlight=!0;const Gie=DL;function Zie(e){const{className:t,classes:n,pulsate:i=!1,rippleX:c,rippleY:d,rippleSize:f,in:a,onExited:v,timeout:S}=e,[M,R]=K.useState(!1),N=rr(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),W={width:f,height:f,top:-(f/2)+d,left:-(f/2)+c},V=rr(n.child,M&&n.childLeaving,i&&n.childPulsate);return!a&&!M&&R(!0),K.useEffect(()=>{if(!a&&v!=null){const H=setTimeout(v,S);return()=>{clearTimeout(H)}}},[v,a,S]),Z.jsx("span",{className:N,style:W,children:Z.jsx("span",{className:V})})}const Xie=Ci("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ll=Xie,Kie=["center","classes","className"];let kb=e=>e,XP,KP,YP,JP;const m6=550,Yie=80,Jie=BE(XP||(XP=kb`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Qie=BE(KP||(KP=kb`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),eoe=BE(YP||(YP=kb`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),toe=$n("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),noe=$n(Zie,{name:"MuiTouchRipple",slot:"Ripple"})(JP||(JP=kb`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ll.rippleVisible,Jie,m6,({theme:e})=>e.transitions.easing.easeInOut,ll.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,ll.child,ll.childLeaving,Qie,m6,({theme:e})=>e.transitions.easing.easeInOut,ll.childPulsate,eoe,({theme:e})=>e.transitions.easing.easeInOut),roe=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiTouchRipple"}),{center:c=!1,classes:d={},className:f}=i,a=er(i,Kie),[v,S]=K.useState([]),M=K.useRef(0),R=K.useRef(null);K.useEffect(()=>{R.current&&(R.current(),R.current=null)},[v]);const N=K.useRef(!1),W=K.useRef(0),V=K.useRef(null),H=K.useRef(null);K.useEffect(()=>()=>{W.current&&clearTimeout(W.current)},[]);const le=K.useCallback(oe=>{const{pulsate:he,rippleX:be,rippleY:A,rippleSize:Re,cb:_e}=oe;S(ze=>[...ze,Z.jsx(noe,{classes:{ripple:rr(d.ripple,ll.ripple),rippleVisible:rr(d.rippleVisible,ll.rippleVisible),ripplePulsate:rr(d.ripplePulsate,ll.ripplePulsate),child:rr(d.child,ll.child),childLeaving:rr(d.childLeaving,ll.childLeaving),childPulsate:rr(d.childPulsate,ll.childPulsate)},timeout:m6,pulsate:he,rippleX:be,rippleY:A,rippleSize:Re},M.current)]),M.current+=1,R.current=_e},[d]),G=K.useCallback((oe={},he={},be=()=>{})=>{const{pulsate:A=!1,center:Re=c||he.pulsate,fakeElement:_e=!1}=he;if((oe==null?void 0:oe.type)==="mousedown"&&N.current){N.current=!1;return}(oe==null?void 0:oe.type)==="touchstart"&&(N.current=!0);const ze=_e?null:H.current,ot=ze?ze.getBoundingClientRect():{width:0,height:0,left:0,top:0};let gt,Ze,We;if(Re||oe===void 0||oe.clientX===0&&oe.clientY===0||!oe.clientX&&!oe.touches)gt=Math.round(ot.width/2),Ze=Math.round(ot.height/2);else{const{clientX:He,clientY:rt}=oe.touches&&oe.touches.length>0?oe.touches[0]:oe;gt=Math.round(He-ot.left),Ze=Math.round(rt-ot.top)}if(Re)We=Math.sqrt((2*ot.width**2+ot.height**2)/3),We%2===0&&(We+=1);else{const He=Math.max(Math.abs((ze?ze.clientWidth:0)-gt),gt)*2+2,rt=Math.max(Math.abs((ze?ze.clientHeight:0)-Ze),Ze)*2+2;We=Math.sqrt(He**2+rt**2)}oe!=null&&oe.touches?V.current===null&&(V.current=()=>{le({pulsate:A,rippleX:gt,rippleY:Ze,rippleSize:We,cb:be})},W.current=setTimeout(()=>{V.current&&(V.current(),V.current=null)},Yie)):le({pulsate:A,rippleX:gt,rippleY:Ze,rippleSize:We,cb:be})},[c,le]),X=K.useCallback(()=>{G({},{pulsate:!0})},[G]),Q=K.useCallback((oe,he)=>{if(clearTimeout(W.current),(oe==null?void 0:oe.type)==="touchend"&&V.current){V.current(),V.current=null,W.current=setTimeout(()=>{Q(oe,he)});return}V.current=null,S(be=>be.length>0?be.slice(1):be),R.current=he},[]);return K.useImperativeHandle(n,()=>({pulsate:X,start:G,stop:Q}),[X,G,Q]),Z.jsx(toe,Pe({className:rr(ll.root,d.root,f),ref:H},a,{children:Z.jsx(_re,{component:null,exit:!0,children:v})}))}),ioe=roe;function ooe(e){return _i("MuiButtonBase",e)}const aoe=Ci("MuiButtonBase",["root","disabled","focusVisible"]),soe=aoe,loe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],coe=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:i,classes:c}=e,f=ki({root:["root",t&&"disabled",n&&"focusVisible"]},ooe,c);return n&&i&&(f.root+=` ${i}`),f},uoe=$n("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${soe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),doe=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiButtonBase"}),{action:c,centerRipple:d=!1,children:f,className:a,component:v="button",disabled:S=!1,disableRipple:M=!1,disableTouchRipple:R=!1,focusRipple:N=!1,LinkComponent:W="a",onBlur:V,onClick:H,onContextMenu:le,onDragLeave:G,onFocus:X,onFocusVisible:Q,onKeyDown:oe,onKeyUp:he,onMouseDown:be,onMouseLeave:A,onMouseUp:Re,onTouchEnd:_e,onTouchMove:ze,onTouchStart:ot,tabIndex:gt=0,TouchRippleProps:Ze,touchRippleRef:We,type:He}=i,rt=er(i,loe),tt=K.useRef(null),Ne=K.useRef(null),et=vo(Ne,We),{isFocusVisibleRef:it,onFocus:Dt,onBlur:Tt,ref:Rt}=AE(),[Yt,tn]=K.useState(!1);S&&Yt&&tn(!1),K.useImperativeHandle(c,()=>({focusVisible:()=>{tn(!0),tt.current.focus()}}),[]);const[dn,_n]=K.useState(!1);K.useEffect(()=>{_n(!0)},[]);const In=dn&&!M&&!S;K.useEffect(()=>{Yt&&N&&!M&&dn&&Ne.current.pulsate()},[M,N,Yt,dn]);function Jt(en,on,yn=R){return ls(Dn=>(on&&on(Dn),!yn&&Ne.current&&Ne.current[en](Dn),!0))}const vn=Jt("start",be),Ft=Jt("stop",le),nn=Jt("stop",G),En=Jt("stop",Re),Zt=Jt("stop",en=>{Yt&&en.preventDefault(),A&&A(en)}),Ct=Jt("start",ot),On=Jt("stop",_e),an=Jt("stop",ze),Zn=Jt("stop",en=>{Tt(en),it.current===!1&&tn(!1),V&&V(en)},!1),tr=ls(en=>{tt.current||(tt.current=en.currentTarget),Dt(en),it.current===!0&&(tn(!0),Q&&Q(en)),X&&X(en)}),Nn=()=>{const en=tt.current;return v&&v!=="button"&&!(en.tagName==="A"&&en.href)},Yn=K.useRef(!1),Un=ls(en=>{N&&!Yn.current&&Yt&&Ne.current&&en.key===" "&&(Yn.current=!0,Ne.current.stop(en,()=>{Ne.current.start(en)})),en.target===en.currentTarget&&Nn()&&en.key===" "&&en.preventDefault(),oe&&oe(en),en.target===en.currentTarget&&Nn()&&en.key==="Enter"&&!S&&(en.preventDefault(),H&&H(en))}),qn=ls(en=>{N&&en.key===" "&&Ne.current&&Yt&&!en.defaultPrevented&&(Yn.current=!1,Ne.current.stop(en,()=>{Ne.current.pulsate(en)})),he&&he(en),H&&en.target===en.currentTarget&&Nn()&&en.key===" "&&!en.defaultPrevented&&H(en)});let bn=v;bn==="button"&&(rt.href||rt.to)&&(bn=W);const Ye={};bn==="button"?(Ye.type=He===void 0?"button":He,Ye.disabled=S):(!rt.href&&!rt.to&&(Ye.role="button"),S&&(Ye["aria-disabled"]=S));const Xt=vo(n,Rt,tt),rn=Pe({},i,{centerRipple:d,component:v,disabled:S,disableRipple:M,disableTouchRipple:R,focusRipple:N,tabIndex:gt,focusVisible:Yt}),qt=coe(rn);return Z.jsxs(uoe,Pe({as:bn,className:rr(qt.root,a),ownerState:rn,onBlur:Zn,onClick:H,onContextMenu:Ft,onFocus:tr,onKeyDown:Un,onKeyUp:qn,onMouseDown:vn,onMouseLeave:Zt,onMouseUp:En,onDragLeave:nn,onTouchEnd:On,onTouchMove:an,onTouchStart:Ct,ref:Xt,tabIndex:S?-1:gt,type:He},Ye,rt,{children:[f,In?Z.jsx(ioe,Pe({ref:et,center:d},Ze)):null]}))}),B2=doe;function hoe(e){return _i("MuiIconButton",e)}const poe=Ci("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),foe=poe,moe=["edge","children","className","color","disabled","disableFocusRipple","size"],goe=e=>{const{classes:t,disabled:n,color:i,edge:c,size:d}=e,f={root:["root",n&&"disabled",i!=="default"&&`color${Pn(i)}`,c&&`edge${Pn(c)}`,`size${Pn(d)}`]};return ki(f,hoe,t)},_oe=$n(B2,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Pn(n.color)}`],n.edge&&t[`edge${Pn(n.edge)}`],t[`size${Pn(n.size)}`]]}})(({theme:e,ownerState:t})=>Pe({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:eo(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const i=(n=(e.vars||e).palette)==null?void 0:n[t.color];return Pe({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&Pe({color:i==null?void 0:i.main},!t.disableRipple&&{"&:hover":Pe({},i&&{backgroundColor:e.vars?`rgba(${i.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:eo(i.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${foe.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),yoe=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiIconButton"}),{edge:c=!1,children:d,className:f,color:a="default",disabled:v=!1,disableFocusRipple:S=!1,size:M="medium"}=i,R=er(i,moe),N=Pe({},i,{edge:c,color:a,disabled:v,disableFocusRipple:S,size:M}),W=goe(N);return Z.jsx(_oe,Pe({className:rr(W.root,f),centerRipple:!0,focusRipple:!S,disabled:v,ref:n,ownerState:N},R,{children:d}))}),RL=yoe,voe=Sb(Z.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function xoe(e){return _i("MuiChip",e)}const boe=Ci("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Yr=boe,woe=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Eoe=e=>{const{classes:t,disabled:n,size:i,color:c,iconColor:d,onDelete:f,clickable:a,variant:v}=e,S={root:["root",v,n&&"disabled",`size${Pn(i)}`,`color${Pn(c)}`,a&&"clickable",a&&`clickableColor${Pn(c)}`,f&&"deletable",f&&`deletableColor${Pn(c)}`,`${v}${Pn(c)}`],label:["label",`label${Pn(i)}`],avatar:["avatar",`avatar${Pn(i)}`,`avatarColor${Pn(c)}`],icon:["icon",`icon${Pn(i)}`,`iconColor${Pn(d)}`],deleteIcon:["deleteIcon",`deleteIcon${Pn(i)}`,`deleteIconColor${Pn(c)}`,`deleteIcon${Pn(v)}Color${Pn(c)}`]};return ki(S,xoe,t)},Toe=$n("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:i,iconColor:c,clickable:d,onDelete:f,size:a,variant:v}=n;return[{[`& .${Yr.avatar}`]:t.avatar},{[`& .${Yr.avatar}`]:t[`avatar${Pn(a)}`]},{[`& .${Yr.avatar}`]:t[`avatarColor${Pn(i)}`]},{[`& .${Yr.icon}`]:t.icon},{[`& .${Yr.icon}`]:t[`icon${Pn(a)}`]},{[`& .${Yr.icon}`]:t[`iconColor${Pn(c)}`]},{[`& .${Yr.deleteIcon}`]:t.deleteIcon},{[`& .${Yr.deleteIcon}`]:t[`deleteIcon${Pn(a)}`]},{[`& .${Yr.deleteIcon}`]:t[`deleteIconColor${Pn(i)}`]},{[`& .${Yr.deleteIcon}`]:t[`deleteIcon${Pn(v)}Color${Pn(i)}`]},t.root,t[`size${Pn(a)}`],t[`color${Pn(i)}`],d&&t.clickable,d&&i!=="default"&&t[`clickableColor${Pn(i)})`],f&&t.deletable,f&&i!=="default"&&t[`deletableColor${Pn(i)}`],t[v],t[`${v}${Pn(i)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return Pe({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Yr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Yr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${Yr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Yr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Yr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Yr.icon}`]:Pe({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&Pe({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},t.color!=="default"&&{color:"inherit"})),[`& .${Yr.deleteIcon}`]:Pe({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:eo(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:eo(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:eo(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${Yr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:eo(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${Yr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>Pe({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:eo(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Yr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:eo(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${Yr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>Pe({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Yr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Yr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Yr.avatar}`]:{marginLeft:4},[`& .${Yr.avatarSmall}`]:{marginLeft:2},[`& .${Yr.icon}`]:{marginLeft:4},[`& .${Yr.iconSmall}`]:{marginLeft:2},[`& .${Yr.deleteIcon}`]:{marginRight:5},[`& .${Yr.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:eo(e.palette[t.color].main,.7)}`,[`&.${Yr.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:eo(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${Yr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:eo(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${Yr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:eo(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),Soe=$n("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:i}=n;return[t.label,t[`label${Pn(i)}`]]}})(({ownerState:e})=>Pe({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function QP(e){return e.key==="Backspace"||e.key==="Delete"}const koe=K.forwardRef(function(t,n){const i=Pi({props:t,name:"MuiChip"}),{avatar:c,className:d,clickable:f,color:a="default",component:v,deleteIcon:S,disabled:M=!1,icon:R,label:N,onClick:W,onDelete:V,onKeyDown:H,onKeyUp:le,size:G="medium",variant:X="filled",tabIndex:Q,skipFocusWhenDisabled:oe=!1}=i,he=er(i,woe),be=K.useRef(null),A=vo(be,n),Re=et=>{et.stopPropagation(),V&&V(et)},_e=et=>{et.currentTarget===et.target&&QP(et)&&et.preventDefault(),H&&H(et)},ze=et=>{et.currentTarget===et.target&&(V&&QP(et)?V(et):et.key==="Escape"&&be.current&&be.current.blur()),le&&le(et)},ot=f!==!1&&W?!0:f,gt=ot||V?B2:v||"div",Ze=Pe({},i,{component:gt,disabled:M,size:G,color:a,iconColor:K.isValidElement(R)&&R.props.color||a,onDelete:!!V,clickable:ot,variant:X}),We=Eoe(Ze),He=gt===B2?Pe({component:v||"div",focusVisibleClassName:We.focusVisible},V&&{disableRipple:!0}):{};let rt=null;V&&(rt=S&&K.isValidElement(S)?K.cloneElement(S,{className:rr(S.props.className,We.deleteIcon),onClick:Re}):Z.jsx(voe,{className:rr(We.deleteIcon),onClick:Re}));let tt=null;c&&K.isValidElement(c)&&(tt=K.cloneElement(c,{className:rr(We.avatar,c.props.className)}));let Ne=null;return R&&K.isValidElement(R)&&(Ne=K.cloneElement(R,{className:rr(We.icon,R.props.className)})),Z.jsxs(Toe,Pe({as:gt,className:rr(We.root,d),disabled:ot&&M?!0:void 0,onClick:W,onKeyDown:_e,onKeyUp:ze,ref:A,tabIndex:oe&&M?-1:Q,ownerState:Ze},He,he,{children:[tt||Ne,Z.jsx(Soe,{className:rr(We.label),ownerState:Ze,children:N}),rt]}))}),Coe=koe,Poe=Sb(Z.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function Ioe(e){return _i("MuiAutocomplete",e)}const Aoe=Ci("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),zr=Aoe;var eI,tI;const Moe=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],Doe=["ref"],Roe=e=>{const{classes:t,disablePortal:n,expanded:i,focused:c,fullWidth:d,hasClearIcon:f,hasPopupIcon:a,inputFocused:v,popupOpen:S,size:M}=e,R={root:["root",i&&"expanded",c&&"focused",d&&"fullWidth",f&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",v&&"inputFocused"],tag:["tag",`tagSize${Pn(M)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",S&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return ki(R,Ioe,t)},Ooe=$n("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:i,hasClearIcon:c,hasPopupIcon:d,inputFocused:f,size:a}=n;return[{[`& .${zr.tag}`]:t.tag},{[`& .${zr.tag}`]:t[`tagSize${Pn(a)}`]},{[`& .${zr.inputRoot}`]:t.inputRoot},{[`& .${zr.input}`]:t.input},{[`& .${zr.input}`]:f&&t.inputFocused},t.root,i&&t.fullWidth,d&&t.hasPopupIcon,c&&t.hasClearIcon]}})(({ownerState:e})=>Pe({[`&.${zr.focused} .${zr.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${zr.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${zr.tag}`]:Pe({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${zr.inputRoot}`]:{flexWrap:"wrap",[`.${zr.hasPopupIcon}&, .${zr.hasClearIcon}&`]:{paddingRight:26+4},[`.${zr.hasPopupIcon}.${zr.hasClearIcon}&`]:{paddingRight:52+4},[`& .${zr.input}`]:{width:0,minWidth:30}},[`& .${kd.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${kd.root}.${Rs.sizeSmall}`]:{[`& .${kd.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Oc.root}`]:{padding:9,[`.${zr.hasPopupIcon}&, .${zr.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${zr.hasPopupIcon}.${zr.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${zr.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${zr.endAdornment}`]:{right:9}},[`& .${Oc.root}.${Rs.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${zr.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Os.root}`]:{paddingTop:19,paddingLeft:8,[`.${zr.hasPopupIcon}&, .${zr.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${zr.hasPopupIcon}.${zr.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${Os.input}`]:{padding:"7px 4px"},[`& .${zr.endAdornment}`]:{right:9}},[`& .${Os.root}.${Rs.sizeSmall}`]:{paddingBottom:1,[`& .${Os.input}`]:{padding:"2.5px 4px"}},[`& .${Rs.hiddenLabel}`]:{paddingTop:8},[`& .${Os.root}.${Rs.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${zr.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Os.root}.${Rs.hiddenLabel}.${Rs.sizeSmall}`]:{[`& .${zr.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${zr.input}`]:Pe({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),Loe=$n("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),zoe=$n(RL,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Noe=$n(RL,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>Pe({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>Pe({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),Foe=$n(ML,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${zr.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>Pe({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),Boe=$n(cT,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>Pe({},e.typography.body1,{overflow:"auto"})),joe=$n("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),$oe=$n("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Uoe=$n("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${zr.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${zr.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${zr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:eo(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${zr.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:eo(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${zr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:eo(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),Voe=$n(Gie,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),Woe=$n("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${zr.option}`]:{paddingLeft:24}}),Hoe=K.forwardRef(function(t,n){var i,c,d,f;const a=Pi({props:t,name:"MuiAutocomplete"}),{autoComplete:v=!1,autoHighlight:S=!1,autoSelect:M=!1,blurOnSelect:R=!1,ChipProps:N,className:W,clearIcon:V=eI||(eI=Z.jsx(Poe,{fontSize:"small"})),clearOnBlur:H=!a.freeSolo,clearOnEscape:le=!1,clearText:G="Clear",closeText:X="Close",componentsProps:Q={},defaultValue:oe=a.multiple?[]:null,disableClearable:he=!1,disableCloseOnSelect:be=!1,disabled:A=!1,disabledItemsFocusable:Re=!1,disableListWrap:_e=!1,disablePortal:ze=!1,filterSelectedOptions:ot=!1,forcePopupIcon:gt="auto",freeSolo:Ze=!1,fullWidth:We=!1,getLimitTagsText:He=Ge=>`+${Ge}`,getOptionLabel:rt=Ge=>{var Ee;return(Ee=Ge.label)!=null?Ee:Ge},groupBy:tt,handleHomeEndKeys:Ne=!a.freeSolo,includeInputInList:et=!1,limitTags:it=-1,ListboxComponent:Dt="ul",ListboxProps:Tt,loading:Rt=!1,loadingText:Yt="Loading…",multiple:tn=!1,noOptionsText:dn="No options",openOnFocus:_n=!1,openText:In="Open",PaperComponent:Jt=cT,PopperComponent:vn=ML,popupIcon:Ft=tI||(tI=Z.jsx(IL,{})),readOnly:nn=!1,renderGroup:En,renderInput:Zt,renderOption:Ct,renderTags:On,selectOnFocus:an=!a.freeSolo,size:Zn="medium",slotProps:tr={}}=a,Nn=er(a,Moe),{getRootProps:Yn,getInputProps:Un,getInputLabelProps:qn,getPopupIndicatorProps:bn,getClearProps:Ye,getTagProps:Xt,getListboxProps:rn,getOptionProps:qt,value:en,dirty:on,expanded:yn,id:Dn,popupOpen:Fn,focused:nr,focusedTag:Ar,anchorEl:gr,setAnchorEl:vi,inputValue:di,groupedOptions:Te}=Cte(Pe({},a,{componentName:"Autocomplete"})),re=!he&&!A&&on&&!nn,ie=(!Ze||gt===!0)&&gt!==!1,{onMouseDown:me}=Un(),{ref:Me}=Tt??{},De=rn(),{ref:qe}=De,Xe=er(De,Doe),je=vo(qe,Me),Fe=Pe({},a,{disablePortal:ze,expanded:yn,focused:nr,fullWidth:We,hasClearIcon:re,hasPopupIcon:ie,inputFocused:Ar===-1,popupOpen:Fn,size:Zn}),ct=Roe(Fe);let Pt;if(tn&&en.length>0){const Ge=Ee=>Pe({className:ct.tag,disabled:A},Xt(Ee));On?Pt=On(en,Ge,Fe):Pt=en.map((Ee,lt)=>Z.jsx(Coe,Pe({label:rt(Ee),size:Zn},Ge({index:lt}),N)))}if(it>-1&&Array.isArray(Pt)){const Ge=Pt.length-it;!nr&&Ge>0&&(Pt=Pt.splice(0,it),Pt.push(Z.jsx("span",{className:ct.tag,children:He(Ge)},Pt.length)))}const mn=En||(Ge=>Z.jsxs("li",{children:[Z.jsx(Voe,{className:ct.groupLabel,ownerState:Fe,component:"div",children:Ge.group}),Z.jsx(Woe,{className:ct.groupUl,ownerState:Fe,children:Ge.children})]},Ge.key)),An=Ct||((Ge,Ee)=>Z.jsx("li",Pe({},Ge,{children:rt(Ee)}))),Ln=(Ge,Ee)=>{const lt=qt({option:Ge,index:Ee});return An(Pe({},lt,{className:ct.option}),Ge,{selected:lt["aria-selected"],index:Ee,inputValue:di},Fe)},Xn=(i=tr.clearIndicator)!=null?i:Q.clearIndicator,xr=(c=tr.paper)!=null?c:Q.paper,br=(d=tr.popper)!=null?d:Q.popper,Mr=(f=tr.popupIndicator)!=null?f:Q.popupIndicator;return Z.jsxs(K.Fragment,{children:[Z.jsx(Ooe,Pe({ref:n,className:rr(ct.root,W),ownerState:Fe},Yn(Nn),{children:Zt({id:Dn,disabled:A,fullWidth:!0,size:Zn==="small"?"small":void 0,InputLabelProps:qn(),InputProps:Pe({ref:vi,className:ct.inputRoot,startAdornment:Pt,onClick:Ge=>{Ge.target===Ge.currentTarget&&me(Ge)}},(re||ie)&&{endAdornment:Z.jsxs(Loe,{className:ct.endAdornment,ownerState:Fe,children:[re?Z.jsx(zoe,Pe({},Ye(),{"aria-label":G,title:G,ownerState:Fe},Xn,{className:rr(ct.clearIndicator,Xn==null?void 0:Xn.className),children:V})):null,ie?Z.jsx(Noe,Pe({},bn(),{disabled:A,"aria-label":Fn?X:In,title:Fn?X:In,ownerState:Fe},Mr,{className:rr(ct.popupIndicator,Mr==null?void 0:Mr.className),children:Ft})):null]})}),inputProps:Pe({className:ct.input,disabled:A,readOnly:nn},Un())})})),gr?Z.jsx(Foe,Pe({as:vn,disablePortal:ze,style:{width:gr?gr.clientWidth:null},ownerState:Fe,role:"presentation",anchorEl:gr,open:Fn},br,{className:rr(ct.popper,br==null?void 0:br.className),children:Z.jsxs(Boe,Pe({ownerState:Fe,as:Jt},xr,{className:rr(ct.paper,xr==null?void 0:xr.className),children:[Rt&&Te.length===0?Z.jsx(joe,{className:ct.loading,ownerState:Fe,children:Yt}):null,Te.length===0&&!Ze&&!Rt?Z.jsx($oe,{className:ct.noOptions,ownerState:Fe,role:"presentation",onMouseDown:Ge=>{Ge.preventDefault()},children:dn}):null,Te.length>0?Z.jsx(Uoe,Pe({as:Dt,className:ct.listbox,ownerState:Fe},Xe,Tt,{ref:je,children:Te.map((Ge,Ee)=>tt?mn({key:Ge.key,group:Ge.group,children:Ge.options.map((lt,Ot)=>Ln(lt,Ge.index+Ot))}):Ln(Ge,Ee))})):null]}))})):null]})}),nI=Hoe,qoe=NJ({createStyledComponent:$n("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Pi({props:e,name:"MuiStack"})}),fv=qoe;function Goe(e){return _i("MuiButton",e)}const Zoe=Ci("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),mv=Zoe,Xoe=K.createContext({}),Koe=Xoe,Yoe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Joe=e=>{const{color:t,disableElevation:n,fullWidth:i,size:c,variant:d,classes:f}=e,a={root:["root",d,`${d}${Pn(t)}`,`size${Pn(c)}`,`${d}Size${Pn(c)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Pn(c)}`],endIcon:["endIcon",`iconSize${Pn(c)}`]},v=ki(a,Goe,f);return Pe({},f,v)},OL=e=>Pe({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Qoe=$n(B2,{shouldForwardProp:e=>qu(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Pn(n.color)}`],t[`size${Pn(n.size)}`],t[`${n.variant}Size${Pn(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,i;const c=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],d=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return Pe({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":Pe({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:eo(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:eo(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:eo(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:d,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":Pe({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${mv.focusVisible}`]:Pe({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${mv.disabled}`]:Pe({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${eo(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(i=e.palette).getContrastText)==null?void 0:n.call(i,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:c,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${mv.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${mv.disabled}`]:{boxShadow:"none"}}),eae=$n("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Pn(n.size)}`]]}})(({ownerState:e})=>Pe({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},OL(e))),tae=$n("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Pn(n.size)}`]]}})(({ownerState:e})=>Pe({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},OL(e))),nae=K.forwardRef(function(t,n){const i=K.useContext(Koe),c=ME(i,t),d=Pi({props:c,name:"MuiButton"}),{children:f,color:a="primary",component:v="button",className:S,disabled:M=!1,disableElevation:R=!1,disableFocusRipple:N=!1,endIcon:W,focusVisibleClassName:V,fullWidth:H=!1,size:le="medium",startIcon:G,type:X,variant:Q="text"}=d,oe=er(d,Yoe),he=Pe({},d,{color:a,component:v,disabled:M,disableElevation:R,disableFocusRipple:N,fullWidth:H,size:le,type:X,variant:Q}),be=Joe(he),A=G&&Z.jsx(eae,{className:be.startIcon,ownerState:he,children:G}),Re=W&&Z.jsx(tae,{className:be.endIcon,ownerState:he,children:W});return Z.jsxs(Qoe,Pe({ownerState:he,className:rr(i.className,be.root,S),component:v,disabled:M,focusRipple:!N,focusVisibleClassName:rr(be.focusVisible,V),ref:n,type:X},oe,{classes:be,children:[A,f,Re]}))}),As=nae;var hT={},LL={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(LL);var eu=LL.exports,_4={};const rae={configure:e=>{EO.configure(e)}},iae=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Pn,createChainedFunction:r6,createSvgIcon:Sb,debounce:PE,deprecatedPropType:UX,isMuiElement:Nv,ownerDocument:Po,ownerWindow:eh,requirePropFactory:VX,setRef:N0,unstable_ClassNameGenerator:rae,unstable_useEnhancedEffect:Xc,unstable_useId:IE,unsupportedProp:qX,useControlled:ip,useEventCallback:ls,useForkRef:vo,useIsFocusVisible:AE},Symbol.toStringTag,{value:"Module"})),oae=V6(iae);var rI;function tu(){return rI||(rI=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=oae}(_4)),_4}var aae=eu;Object.defineProperty(hT,"__esModule",{value:!0});var g6=hT.default=void 0,sae=aae(tu()),lae=Z,cae=(0,sae.default)((0,lae.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");g6=hT.default=cae;var pT={},uae=eu;Object.defineProperty(pT,"__esModule",{value:!0});var _6=pT.default=void 0,dae=uae(tu()),hae=Z,pae=(0,dae.default)((0,hae.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"}),"Map");_6=pT.default=pae;var fT={},fae=eu;Object.defineProperty(fT,"__esModule",{value:!0});var y6=fT.default=void 0,mae=fae(tu()),gae=Z,_ae=(0,mae.default)((0,gae.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");y6=fT.default=_ae;var mT={},yae=eu;Object.defineProperty(mT,"__esModule",{value:!0});var v6=mT.default=void 0,vae=yae(tu()),xae=Z,bae=(0,vae.default)((0,xae.jsx)("path",{d:"M20.94 11c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}),"LocationSearching");v6=mT.default=bae;const wae=(e,t)=>{const[n,i]=K.useState([]),c=async()=>{if(console.log("displayRoute called"),!(!e||!t||!t.waypoints||!t.longitude||!t.latitude||!t.endLongitude||!t.endLatitude))try{let d="";t.waypoints.length>0&&(d=t.waypoints.map(N=>`${N[1]},${N[0]}`).join(";")),console.log(t.waypoints),console.log("ways:",d);const f=`https://api.mapbox.com/directions/v5/mapbox/walking/${t.longitude},${t.latitude};${d};${t.endLongitude},${t.endLatitude}?geometries=geojson&access_token=${ss.accessToken}`,S=(await(await fetch(f)).json()).routes[0].geometry.coordinates;if(!Array.isArray(S)||S.some(N=>N.length!==2||isNaN(N[0])||isNaN(N[1]))){console.error("Invalid route coordinates:",S);return}const M={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:S}};e.getSource("route")&&(e.removeLayer("route"),e.removeSource("route")),e.addSource("route",{type:"geojson",data:M}),e.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3b9ddd","line-width":4}});const R=new ss.LngLatBounds;S.forEach(N=>{Array.isArray(N)&&N.length===2&&!isNaN(N[0])&&!isNaN(N[1])?R.extend(N):console.error("Invalid coordinate:",N)}),R.isEmpty()?console.error("No valid coordinates to fit bounds"):(console.log("Bounds:",R.toArray()),e.fitBounds(R,{margin:100})),i(S)}catch(d){console.error("Error:",d)}};return K.useEffect(()=>{c()},[t.waypoints]),{route:n,displayRoute:c}},Eae=(e,t,n,i,c,d,f,a,v,S)=>{const[M,R]=K.useState({lat:null,lng:null,address:""});return K.useEffect(()=>{if(e){const N=W=>{(t||i)&&(n(!1),c(!1),fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${W.lngLat.lng},${W.lngLat.lat}.json?access_token=${ss.accessToken}`).then(V=>V.json()).then(V=>{var le;const H=((le=V.features[0])==null?void 0:le.place_name)||"Unknown location";R({lat:W.lngLat.lat,lng:W.lngLat.lng,address:H}),t?f(G=>({...G,latitude:W.lngLat.lat,longitude:W.lngLat.lng})):i&&f(G=>({...G,endLatitude:W.lngLat.lat,endLongitude:W.lngLat.lng})),v(!0),S(!0)}).catch(V=>console.error("Error:",V)))};return e.on("click",N),()=>{e.off("click",N)}}},[e,t,i]),{location:M,setLocation:R}},Tae=[{id:"P5029111",name:"Battery Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":21,"taxi-zone":12,precinct:1,"b-score":{0:65,1:44,2:26,3:18,4:15,5:9,6:25,7:35,8:49,9:102,10:107,11:134,12:198,13:196,14:194,15:171,16:154,17:129,18:148,19:152,20:144,21:132,22:132,23:98},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7028143,longitude:-74.015775},last_updated:null},{id:"P22727025",name:"Bryant Park",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:"Mo-Su 07:00-23:00","grid-id":502,"taxi-zone":164,precinct:14,"b-score":{0:23,1:16,2:17,3:9,4:7,5:10,6:5,7:10,8:10,9:11,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:13,18:17,19:24,20:29,21:31,22:40,23:39},"c-score":1,rating:1.5,location:{latitude:40.7537508,longitude:-73.9835384},last_updated:null},{id:"P22899286",name:"Madison Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"06:00-23:00","grid-id":419,"taxi-zone":234,precinct:13,"b-score":{0:338,1:202,2:109,3:69,4:53,5:158,6:476,7:542,8:652,9:682,10:892,11:897,12:906,13:913,14:919,15:1092,16:1484,17:1589,18:1540,19:1557,20:1441,21:1446,22:1125,23:734},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7421868,longitude:-73.987872},last_updated:null},{id:"P22899302",name:"Washington Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":267,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.730896,longitude:-73.9975857},last_updated:null},{id:"P22900913",name:"Dr. Gertrude B. Kelly Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":184,"taxi-zone":68,precinct:10,"b-score":{0:317,1:195,2:130,3:66,4:78,5:112,6:207,7:304,8:534,9:501,10:519,11:598,12:693,13:697,14:827,15:843,16:831,17:863,18:860,19:818,20:837,21:828,22:729,23:552},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7416557,longitude:-74.0020105},last_updated:null},{id:"P22900959",name:"Chelsea Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":217,"taxi-zone":68,precinct:10,"b-score":{0:317,1:195,2:130,3:66,4:78,5:112,6:207,7:304,8:534,9:501,10:519,11:598,12:693,13:697,14:827,15:843,16:831,17:863,18:860,19:818,20:837,21:828,22:729,23:552},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7499194,longitude:-74.0006702},last_updated:null},{id:"P22901074",name:"Gramercy Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":465,"taxi-zone":107,precinct:13,"b-score":{0:69,1:71,2:26,3:19,4:16,5:20,6:40,7:68,8:66,9:110,10:111,11:117,12:121,13:127,14:146,15:145,16:144,17:180,18:181,19:163,20:150,21:146,22:144,23:103},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.737939,longitude:-73.9859225},last_updated:null},{id:"P22903972",name:"Chelsea Waterside Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":108,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7492535,longitude:-74.0074571},last_updated:null},{id:"P22904239",name:"14th Street Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":111,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.742717,longitude:-74.0082549},last_updated:null},{id:"P22926662",name:"Liberty Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":36,"taxi-zone":261,precinct:1,"b-score":{0:253,1:129,2:74,3:56,4:59,5:116,6:168,7:306,8:548,9:551,10:602,11:638,12:667,13:676,14:683,15:709,16:740,17:945,18:903,19:836,20:827,21:811,22:736,23:463},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7102299,longitude:-74.0135844},last_updated:null},{id:"P22926980",name:"Washington Market Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"Mo-Su 06:00-01:00","grid-id":61,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7170293,longitude:-74.0116375},last_updated:null},{id:"P22941918",name:"DeWitt Clinton Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":283,"taxi-zone":50,precinct:18,"b-score":{0:367,1:209,2:67,3:48,4:56,5:82,6:191,7:340,8:468,9:613,10:735,11:792,12:829,13:838,14:1161,15:1289,16:1151,17:1401,18:1419,19:1118,20:942,21:880,22:772,23:628},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7682011,longitude:-73.9942676},last_updated:null},{id:"P22961817",name:"Jackson Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":185,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7390049,longitude:-74.0028822},last_updated:null},{id:"P22961821",name:"Corporal John A. Seravalli Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":148,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7390844,longitude:-74.0048187},last_updated:null},{id:"P22961904",name:"Clement Clarke Moore Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":144,"taxi-zone":68,precinct:10,"b-score":{0:317,1:195,2:130,3:66,4:78,5:112,6:207,7:304,8:534,9:501,10:519,11:598,12:693,13:697,14:827,15:843,16:831,17:863,18:860,19:818,20:837,21:828,22:729,23:552},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.746629,longitude:-74.0043038},last_updated:null},{id:"P23048485",name:"Tudor City Greens - North Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":809,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7495583,longitude:-73.9705138},last_updated:null},{id:"P23048493",name:"Tudor City Greens - South Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":758,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7488541,longitude:-73.9710191},last_updated:null},{id:"P25026338",name:"Zuccotti Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":65,"taxi-zone":261,precinct:1,"b-score":{0:253,1:129,2:74,3:56,4:59,5:116,6:168,7:306,8:548,9:551,10:602,11:638,12:667,13:676,14:683,15:709,16:740,17:945,18:903,19:836,20:827,21:811,22:736,23:463},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7092314,longitude:-74.0112539},last_updated:null},{id:"P25162896",name:"Tompkins Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":565,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7264724,longitude:-73.9816871},last_updated:null},{id:"P30657456",name:"Christopher Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":188,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7335833,longitude:-74.0022513},last_updated:null},{id:"P30657462",name:"Sheridan Square Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":189,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7330286,longitude:-74.0021296},last_updated:null},{id:"P31009822",name:"Stuyvesant Cove Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":715,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7330953,longitude:-73.9739823},last_updated:null},{id:"P33804388",name:"East River Esplanade",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":811,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7449845,longitude:-73.9704672},last_updated:null},{id:"P33804405",name:"Asser Levy Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":661,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.8489244622311155,rating:1.5,location:{latitude:40.7364296,longitude:-73.9756472},last_updated:null},{id:"P36185652",name:"Bellevue Society Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":712,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7380949,longitude:-73.9745264},last_updated:null},{id:"P36865288",name:"Desalvio Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":309,"taxi-zone":144,precinct:5,"b-score":{0:329,1:200,2:133,3:76,4:95,5:86,6:169,7:345,8:381,9:354,10:356,11:360,12:385,13:395,14:420,15:440,16:452,17:420,18:401,19:399,20:404,21:420,22:542,23:518},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7216408,longitude:-73.9961097},last_updated:null},{id:"P37003318",name:"Riverside Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":531,"taxi-zone":239,precinct:20,"b-score":{0:98,1:114,2:40,3:25,4:24,5:35,6:96,7:152,8:156,9:189,10:297,11:307,12:323,13:334,14:329,15:340,16:328,17:334,18:309,19:302,20:299,21:307,22:299,23:278},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7880268,longitude:-73.982186},last_updated:null},{id:"P39243853",name:"Morningside Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":978,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8060522,longitude:-73.9580625},last_updated:null},{id:"P44225581",name:"Petrosino Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":272,"taxi-zone":144,precinct:5,"b-score":{0:329,1:200,2:133,3:76,4:95,5:86,6:169,7:345,8:381,9:354,10:356,11:360,12:385,13:395,14:420,15:440,16:452,17:420,18:401,19:399,20:404,21:420,22:542,23:518},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7217802,longitude:-73.9974692},last_updated:null},{id:"P53189828",name:"DeLury Square",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":165,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7091073,longitude:-74.0050236},last_updated:null},{id:"P66374787",name:"Columbus Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":237,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7151001,longitude:-74.0000509},last_updated:null},{id:"P75311774",name:"Battery Park City Ball Fields",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7160843,longitude:-74.0140082},last_updated:null},{id:"P75364733",name:"Bogardus Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":92,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7158736,longitude:-74.0090666},last_updated:null},{id:"P86144190",name:"Abingdon Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":149,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7372675,longitude:-74.0053868},last_updated:null},{id:"P86144198",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":150,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.736377,longitude:-74.0054892},last_updated:null},{id:"P86256760",name:"Arthur Strickler Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":150,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7368584,longitude:-74.0058066},last_updated:null},{id:"P86336886",name:"Sherman Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":489,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7773648,longitude:-73.9823502},last_updated:null},{id:"P86338375",name:"Greenacre Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"Mo-Su 08:00-20:00","grid-id":805,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7562735,longitude:-73.9692846},last_updated:null},{id:"P86714429",name:"Kimlau Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":277,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.713421,longitude:-73.9979986},last_updated:null},{id:"P95833119",name:"Cooper Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":384,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7288189,longitude:-73.9907764},last_updated:null},{id:"P104077634",name:"Gorman Memorial Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1448,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8556942,longitude:-73.9324027},last_updated:null},{id:"P104078386",name:"Bennett Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1311,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8528398,longitude:-73.938113},last_updated:null},{id:"P104169861",name:"Isham Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1544,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8696523,longitude:-73.9190761},last_updated:null},{id:"P105715154",name:"Fort Washington Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1267,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5962981490745373,rating:1.5,location:{latitude:40.8531632,longitude:-73.9398863},last_updated:null},{id:"P108153375",name:"Collect Pond Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"06:00-01:00","grid-id":198,"taxi-zone":231,precinct:5,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.4907453726863431,rating:1.5,location:{latitude:40.716328,longitude:-74.0018252},last_updated:null},{id:"P108153676",name:"Duarte Square",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"Mo-Su 06:00-01:00","grid-id":158,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7225449,longitude:-74.0055296},last_updated:null},{id:"P108159406",name:"Carl Schurz Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1262,"taxi-zone":262,precinct:19,"b-score":{0:714,1:440,2:234,3:161,4:180,5:308,6:696,7:567,8:592,9:657,10:727,11:1141,12:1111,13:1107,14:1115,15:1128,16:1120,17:1905,18:2049,19:1980,20:1680,21:1865,22:1940,23:1347},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7752127,longitude:-73.9437574},last_updated:null},{id:"P108159407",name:"Thomas Jefferson Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1389,"taxi-zone":74,precinct:23,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7932541,longitude:-73.9353945},last_updated:null},{id:"P108199253",name:"Robert Moses Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":447,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7707338,longitude:-73.9847792},last_updated:null},{id:"P108199260",name:"St. Peter's Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":447,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7711578,longitude:-73.9854676},last_updated:null},{id:"P108235832",name:"Corlears Hook Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":624,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7117122,longitude:-73.9792669},last_updated:null},{id:"P108235833",name:"Rector Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":17,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.709189,longitude:-74.016925},last_updated:null},{id:"P108235836",name:"Seward Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 06:00-22:00","grid-id":434,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.7858929464732366,rating:1.5,location:{latitude:40.7148304,longitude:-73.9891502},last_updated:null},{id:"P108235837",name:"Vietnam Veterans Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":100,"taxi-zone":88,precinct:1,"b-score":{0:108,1:43,2:30,3:21,4:23,5:29,6:60,7:133,8:165,9:366,10:405,11:499,12:506,13:511,14:569,15:522,16:441,17:421,18:416,19:367,20:308,21:301,22:330,23:200},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7027051,longitude:-74.0097651},last_updated:null},{id:"P108235842",name:"John V. Lindsay East River Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":671,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7185542,longitude:-73.976023},last_updated:null},{id:"P108237827",name:"Wallenberg Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1506,"taxi-zone":120,precinct:34,"b-score":{0:97,1:100,2:63,3:45,4:44,5:20,6:48,7:118,8:89,9:95,10:97,11:89,12:85,13:85,14:86,15:107,16:100,17:117,18:123,19:136,20:147,21:156,22:160,23:157},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8529616,longitude:-73.9267854},last_updated:null},{id:"P108237828",name:"Jackie Robinson Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1282,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8267343,longitude:-73.9412148},last_updated:null},{id:"P108239585",name:"Jacob H. Schiff Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1052,"taxi-zone":152,precinct:30,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8205186,longitude:-73.9520188},last_updated:null},{id:"P108239586",name:"Montefiore Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1052,"taxi-zone":152,precinct:30,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8214533,longitude:-73.9535643},last_updated:null},{id:"P108239588",name:"Alexander Hamilton Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1094,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.35367683841920955,rating:1.5,location:{latitude:40.8230955,longitude:-73.9512438},last_updated:null},{id:"P108239589",name:"Saint Nicholas Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1144,"taxi-zone":152,precinct:26,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8172175,longitude:-73.9489593},last_updated:null},{id:"P109267278",name:"Coenties Slip",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":99,"taxi-zone":88,precinct:1,"b-score":{0:108,1:43,2:30,3:21,4:23,5:29,6:60,7:133,8:165,9:366,10:405,11:499,12:506,13:511,14:569,15:522,16:441,17:421,18:416,19:367,20:308,21:301,22:330,23:200},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7034804,longitude:-74.01053},last_updated:null},{id:"P109269750",name:"Grand Army Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":697,"taxi-zone":163,precinct:18,"b-score":{0:21,1:32,2:20,3:5,4:3,5:17,6:6,7:6,8:7,9:6,10:5,11:7,12:6,13:5,14:5,15:5,16:4,17:4,18:4,19:3,20:4,21:4,22:4,23:4},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.764415,longitude:-73.9733608},last_updated:null},{id:"P109328312",name:"Joseph C. Sauer Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":614,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7281595,longitude:-73.9797195},last_updated:null},{id:"P109330342",name:"James Madison Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":239,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7114325,longitude:-74.0003718},last_updated:null},{id:"P109441961",name:"Titanic Memorial Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":166,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7075392,longitude:-74.0036904},last_updated:null},{id:"P109447376",name:"Louise Nevelson Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":131,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7076565,longitude:-74.0079164},last_updated:null},{id:"P111563947",name:"Peretz Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":429,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7229342,longitude:-73.9878534},last_updated:null},{id:"P112692313",name:"Bowling Green",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":39,"taxi-zone":261,precinct:1,"b-score":{0:253,1:129,2:74,3:56,4:59,5:116,6:168,7:306,8:548,9:551,10:602,11:638,12:667,13:676,14:683,15:709,16:740,17:945,18:903,19:836,20:827,21:811,22:736,23:463},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7050354,longitude:-74.0136629},last_updated:null},{id:"P113690621",name:"Marsh & McLennan Public Space",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":549,"taxi-zone":161,precinct:18,"b-score":{0:333,1:225,2:114,3:86,4:60,5:35,6:65,7:77,8:110,9:176,10:234,11:287,12:268,13:276,14:372,15:371,16:375,17:539,18:602,19:619,20:582,21:564,22:519,23:496},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.75669,longitude:-73.9815898},last_updated:null},{id:"P113723738",name:"Straus Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":779,"taxi-zone":24,precinct:24,"b-score":{0:574,1:281,2:240,3:118,4:163,5:241,6:1292,7:1081,8:1092,9:1276,10:1347,11:1364,12:1368,13:1393,14:1449,15:1448,16:1444,17:1489,18:1646,19:1649,20:1532,21:1558,22:1433,23:1037},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.8018962,longitude:-73.9682115},last_updated:null},{id:"P117994215",name:"Samuel N. Bennerson 2nd Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":445,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7738043,longitude:-73.9869758},last_updated:null},{id:"P117994217",name:"Damrosch Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":446,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7723209,longitude:-73.9850051},last_updated:null},{id:"P118116798",name:"Pier 84",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":210,"taxi-zone":50,precinct:18,"b-score":{0:367,1:209,2:67,3:48,4:56,5:82,6:191,7:340,8:468,9:613,10:735,11:792,12:829,13:838,14:1161,15:1289,16:1151,17:1401,18:1419,19:1118,20:942,21:880,22:772,23:628},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7637561,longitude:-74.0013936},last_updated:null},{id:"P118116802",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:"07:00-22:00","grid-id":401,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7746717,longitude:-73.9889625},last_updated:null},{id:"P118505053",name:"Clinton Cove",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:null,"grid-id":282,"taxi-zone":50,precinct:18,"b-score":{0:367,1:209,2:67,3:48,4:56,5:82,6:191,7:340,8:468,9:613,10:735,11:792,12:829,13:838,14:1161,15:1289,16:1151,17:1401,18:1419,19:1118,20:942,21:880,22:772,23:628},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7706616,longitude:-73.9954545},last_updated:null},{id:"P118524658",name:"Johnny Hartman Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1140,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8241497,longitude:-73.9486126},last_updated:null},{id:"P118524659",name:"Courtney Callender Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1291,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8100335,longitude:-73.9400997},last_updated:null},{id:"P118524660",name:"Alice Kornegay Triangle",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1382,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8064189,longitude:-73.9353004},last_updated:null},{id:"P118524662",name:"Colonel Charles Young Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1370,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8272244,longitude:-73.9358637},last_updated:null},{id:"P118524664",name:"Renaissance Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1285,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8212878,longitude:-73.9413653},last_updated:null},{id:"P118524667",name:"Harlem Lane Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1371,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8259868,longitude:-73.9349482},last_updated:null},{id:"P118524668",name:"Howard Bennett Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1333,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8136382,longitude:-73.9386348},last_updated:null},{id:"P118524669",name:"Moore Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1335,"taxi-zone":42,precinct:25,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8094037,longitude:-73.938501},last_updated:null},{id:"P118524671",name:"Colonel Charles Young Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1375,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8191237,longitude:-73.935624},last_updated:null},{id:"P118524675",name:"Riverside Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1047,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8290212,longitude:-73.953451},last_updated:null},{id:"P118524677",name:"Frederick Johnson Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1372,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8247169,longitude:-73.9355292},last_updated:null},{id:"P118524678",name:"Abraham Lincoln Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1379,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.812198,longitude:-73.9371517},last_updated:null},{id:"P118524689",name:"Holcombe Rucker Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1369,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.829198,longitude:-73.9361184},last_updated:null},{id:"P118524694",name:"Riverbank State Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"sunrise-sunset","grid-id":967,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8254269,longitude:-73.9565197},last_updated:null},{id:"P118524697",name:"Crack Is Wack Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1459,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8044855,longitude:-73.9317785},last_updated:null},{id:"P118524700",name:"Harlem River Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1428,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8059758,longitude:-73.9336626},last_updated:null},{id:"P118524701",name:"Bradhurst Urban Renewal Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1284,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8226795,longitude:-73.9400884},last_updated:null},{id:"P118524706",name:"Convent Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1233,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.828365,longitude:-73.9427004},last_updated:null},{id:"P118528233",name:"Sakura Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":892,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8130779,longitude:-73.962112},last_updated:null},{id:"P118528235",name:"West Harlem Piers Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":930,"taxi-zone":152,precinct:26,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8191647,longitude:-73.9611293},last_updated:null},{id:"P118528587",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":627,"taxi-zone":238,precinct:24,"b-score":{0:396,1:289,2:117,3:84,4:79,5:112,6:385,7:443,8:470,9:525,10:596,11:724,12:763,13:801,14:791,15:834,16:803,17:840,18:1072,19:997,20:975,21:964,22:993,23:808},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.7972777,longitude:-73.9768346},last_updated:null},{id:"P118529212",name:"Inwood Hill Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1513,"taxi-zone":128,precinct:34,"b-score":{0:201,1:127,2:97,3:105,4:99,5:98,6:271,7:217,8:266,9:324,10:334,11:360,12:385,13:392,14:393,15:394,16:396,17:400,18:446,19:431,20:412,21:407,22:410,23:422},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8722547,longitude:-73.9253479},last_updated:null},{id:"P124814434",name:"Bogardus Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":92,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7159015,longitude:-74.0092316},last_updated:null},{id:"P129700421",name:"Wagner Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":7,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.705538,longitude:-74.0183661},last_updated:null},{id:"P129700423",name:"South Cove Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":6,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7073325,longitude:-74.0184369},last_updated:null},{id:"P129700430",name:"The Esplanade",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":16,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.711556,longitude:-74.0171986},last_updated:null},{id:"P144333814",name:"Joseph Slifka Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":709,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.743948,longitude:-73.9729184},last_updated:null},{id:"P147035202",name:"Duane Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"Mo-Su 06:00-01:00","grid-id":92,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7171562,longitude:-74.0094215},last_updated:null},{id:"P147475917",name:"Hamilton Fish Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":569,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7197929,longitude:-73.9808332},last_updated:null},{id:"P154416663",name:"Dante Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":492,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.77192,longitude:-73.9825711},last_updated:null},{id:"P154416666",name:"Richard Tucker Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":539,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7734422,longitude:-73.9818886},last_updated:null},{id:"P159028631",name:"Channel Gardens",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":598,"taxi-zone":161,precinct:18,"b-score":{0:333,1:225,2:114,3:86,4:60,5:35,6:65,7:77,8:110,9:176,10:234,11:287,12:268,13:276,14:372,15:371,16:375,17:539,18:602,19:619,20:582,21:564,22:519,23:496},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.758446,longitude:-73.9779564},last_updated:null},{id:"P160903868",name:"McKinley Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":473,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7242531,longitude:-73.9857747},last_updated:null},{id:"P169483357",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":289,"taxi-zone":48,precinct:10,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7572689,longitude:-73.9947724},last_updated:null},{id:"P171562481",name:"Father Demo Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7302244,longitude:-74.0021376},last_updated:null},{id:"P171805412",name:"Luther Gulick Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":571,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7158754,longitude:-73.9818757},last_updated:null},{id:"P177068788",name:"Laurie M. Tisch Illumination Lawn",type:"park",address:null,internet_access:null,wheelchair_accessible:"no",opening_hours:null,"grid-id":491,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.3771885942971485,rating:1.5,location:{latitude:40.7733857,longitude:-73.9835496},last_updated:null},{id:"P178575123",name:"Riverside Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":816,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.45122561280640316,rating:1.5,location:{latitude:40.8068603,longitude:-73.9680684},last_updated:null},{id:"P194212578",name:"Tecumseh Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":585,"taxi-zone":239,precinct:20,"b-score":{0:98,1:114,2:40,3:25,4:24,5:35,6:96,7:152,8:156,9:189,10:297,11:307,12:323,13:334,14:329,15:340,16:328,17:334,18:309,19:302,20:299,21:307,22:299,23:278},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7818184,longitude:-73.9785715},last_updated:null},{id:"P197064614",name:"James J Walker Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":119,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7298088,longitude:-74.0061054},last_updated:null},{id:"P197066133",name:"Pier 45",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":52,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7331785,longitude:-74.0124101},last_updated:null},{id:"P199925533",name:"Marcus Garvey Memorial Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1246,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.8044864,longitude:-73.9436727},last_updated:null},{id:"P201158183",name:"Irish Hunger Memorial",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":14,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7151544,longitude:-74.0165528},last_updated:null},{id:"P208360494",name:"The Queen Elizabeth II September 11th Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":98,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.704797,longitude:-74.0093346},last_updated:null},{id:"P217722093",name:"J. Hood Wright Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1271,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8464722,longitude:-73.941255},last_updated:null},{id:"P218327131",name:"Verizon Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":456,"taxi-zone":100,precinct:14,"b-score":{0:84,1:75,2:46,3:40,4:29,5:19,6:34,7:42,8:67,9:68,10:71,11:75,12:90,13:95,14:124,15:128,16:125,17:167,18:235,19:235,20:235,21:244,22:240,23:177},"c-score":1,rating:1.5,location:{latitude:40.7548157,longitude:-73.9851583},last_updated:null},{id:"P219612698",name:"Finn Square",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":125,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7186426,longitude:-74.0068689},last_updated:null},{id:"P221922480",name:"Riverside Park South",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":357,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7772231,longitude:-73.9905567},last_updated:null},{id:"P224028029",name:"132nd Street Block Association Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1242,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8123187,longitude:-73.943153},last_updated:null},{id:"P224029303",name:"Rev. Linnette C Williamson Memorial Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1243,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8094612,longitude:-73.9429209},last_updated:null},{id:"P224031776",name:"Collyer Brothers Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1292,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5302651325662832,rating:1.5,location:{latitude:40.8085313,longitude:-73.9410487},last_updated:null},{id:"P224034804",name:"A Philip Randolph Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1061,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8038286,longitude:-73.952422},last_updated:null},{id:"P225132539",name:"Dr. Ronald E. McNair Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1339,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8025387,longitude:-73.9381332},last_updated:null},{id:"P225134048",name:"Dream Street Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1384,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8027407,longitude:-73.9350402},last_updated:null},{id:"P225134049",name:"Harlem Art Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1340,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.8834417208604302,rating:1.5,location:{latitude:40.8010442,longitude:-73.9388073},last_updated:null},{id:"P225135028",name:"Wagner Houses Pool",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1431,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8016837,longitude:-73.9325907},last_updated:null},{id:"P225143097",name:"Martin Luther King Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1106,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8002087,longitude:-73.9503857},last_updated:null},{id:"P225159200",name:"Hancock Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1058,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8095436,longitude:-73.9532979},last_updated:null},{id:"P225171034",name:"Peter Minuit Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1156,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7947722,longitude:-73.9472299},last_updated:null},{id:"P225173496",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1428,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8063252,longitude:-73.9344249},last_updated:null},{id:"P225173571",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1427,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8078192,longitude:-73.9346167},last_updated:null},{id:"P225173572",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1382,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8069688,longitude:-73.9353248},last_updated:null},{id:"P225173799",name:"Each One Teach One",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1428,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8071736,longitude:-73.9345657},last_updated:null},{id:"P225188061",name:"Mae Grant Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1111,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7924257,longitude:-73.9494365},last_updated:null},{id:"P225188879",name:"Sunshine Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1160,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7884898,longitude:-73.9478109},last_updated:null},{id:"P225188968",name:"Cherry Tree Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1161,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7872445,longitude:-73.9471949},last_updated:null},{id:"P225189359",name:"White Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1205,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7916462,longitude:-73.9458897},last_updated:null},{id:"P225189391",name:"103rd Street Community Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1159,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7909291,longitude:-73.9486547},last_updated:null},{id:"P225189513",name:"Poor Richard's Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1253,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7926185,longitude:-73.9426331},last_updated:null},{id:"P225190178",name:"Marx Brothers Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1209,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7842492,longitude:-73.9459882},last_updated:null},{id:"P225190195",name:"Stanley Isaacs Courts",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1258,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7834698,longitude:-73.9441011},last_updated:null},{id:"P225190397",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1257,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7853549,longitude:-73.9427366},last_updated:null},{id:"P225190636",name:"Playground 103",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1348,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7869524,longitude:-73.9390245},last_updated:null},{id:"P225190643",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1346,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7893497,longitude:-73.9382443},last_updated:null},{id:"P225191605",name:"Harlem River Drive Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1423,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8148592,longitude:-73.9343099},last_updated:null},{id:"P226010200",name:"Jacob K. Javits Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1353,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.9639819909954978,rating:1.5,location:{latitude:40.8589557,longitude:-73.9349368},last_updated:null},{id:"P237054245",name:"Plaza de las Americas",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1315,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8460987,longitude:-73.9381037},last_updated:null},{id:"P237397736",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":392,"taxi-zone":148,precinct:7,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7145611,longitude:-73.9910703},last_updated:null},{id:"P239982768",name:"LentSpace",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":157,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7227168,longitude:-74.0057708},last_updated:null},{id:"P239988106",name:"Spring Street Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":156,"taxi-zone":125,precinct:6,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.5142571285642822,rating:1.5,location:{latitude:40.724913,longitude:-74.0044414},last_updated:null},{id:"P239988114",name:"Minetta Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7298853,longitude:-74.0018589},last_updated:null},{id:"P239988118",name:"Father Fagan Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":192,"taxi-zone":125,precinct:6,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7267003,longitude:-74.0033094},last_updated:null},{id:"P239988120",name:"Jefferson Market Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":226,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7344325,longitude:-73.9995026},last_updated:null},{id:"P241883186",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":732,"taxi-zone":238,precinct:24,"b-score":{0:396,1:289,2:117,3:84,4:79,5:112,6:385,7:443,8:470,9:525,10:596,11:724,12:763,13:801,14:791,15:834,16:803,17:840,18:1072,19:997,20:975,21:964,22:993,23:808},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.7954341,longitude:-73.9721055},last_updated:null},{id:"P242113355",name:"Playground One",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":277,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7122529,longitude:-73.9974005},last_updated:null},{id:"P244977216",name:"William E. Passannante Ballfield",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":191,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.6358179089544772,rating:1.5,location:{latitude:40.728579,longitude:-74.0022425},last_updated:null},{id:"P244978444",name:"Winston Churchill Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7298571,longitude:-74.0024499},last_updated:null},{id:"P246964616",name:"Booker T Washington Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":859,"taxi-zone":24,precinct:24,"b-score":{0:574,1:281,2:240,3:118,4:163,5:241,6:1292,7:1081,8:1092,9:1276,10:1347,11:1364,12:1368,13:1393,14:1449,15:1448,16:1444,17:1489,18:1646,19:1649,20:1532,21:1558,22:1433,23:1037},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.8009598,longitude:-73.9637796},last_updated:null},{id:"P249665058",name:"Playground of the Americas",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":192,"taxi-zone":125,precinct:6,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.728006,longitude:-74.0026728},last_updated:null},{id:"P250049345",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":59,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7195161,longitude:-74.0109504},last_updated:null},{id:"P250051493",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":60,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7178178,longitude:-74.0112569},last_updated:null},{id:"P250265505",name:"Hartman Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":569,"taxi-zone":4,precinct:9,"b-score":{0:259,1:207,2:104,3:46,4:45,5:79,6:153,7:390,8:897,9:935,10:1024,11:1037,12:1248,13:1260,14:1480,15:1553,16:1512,17:1751,18:1747,19:1595,20:1162,21:1121,22:984,23:577},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7207559,longitude:-73.9806992},last_updated:null},{id:"P252823151",name:"Straus Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":392,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7142374,longitude:-73.9899111},last_updated:null},{id:"P254594895",name:"Audubon Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1317,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8416095,longitude:-73.9381178},last_updated:null},{id:"P257389723",name:"Twentyfour Sycamores Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1004,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7594475,longitude:-73.9586677},last_updated:null},{id:"P257671578",name:"Penn South Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":258,"taxi-zone":68,precinct:10,"b-score":{0:317,1:195,2:130,3:66,4:78,5:112,6:207,7:304,8:534,9:501,10:519,11:598,12:693,13:697,14:827,15:843,16:831,17:863,18:860,19:818,20:837,21:828,22:729,23:552},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7474929,longitude:-73.9987079},last_updated:null},{id:"P264003876",name:"Paley Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":700,"taxi-zone":161,precinct:18,"b-score":{0:333,1:225,2:114,3:86,4:60,5:35,6:65,7:77,8:110,9:176,10:234,11:287,12:268,13:276,14:372,15:371,16:375,17:539,18:602,19:619,20:582,21:564,22:519,23:496},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7603437,longitude:-73.9750748},last_updated:null},{id:"P264851981",name:"Big Screen Plaza1",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:"06:00-23:59","grid-id":374,"taxi-zone":186,precinct:14,"b-score":{0:151,1:113,2:67,3:43,4:60,5:78,6:513,7:508,8:652,9:602,10:621,11:621,12:622,13:618,14:632,15:642,16:586,17:658,18:647,19:614,20:555,21:630,22:449,23:326},"c-score":1,rating:1.5,location:{latitude:40.7472248,longitude:-73.990373},last_updated:null},{id:"P266077859",name:"Hells Kitchen Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":325,"taxi-zone":48,precinct:18,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.897448724362181,rating:1.5,location:{latitude:40.7629731,longitude:-73.9925633},last_updated:null},{id:"P266097823",name:"Matthews-Palmer Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":326,"taxi-zone":48,precinct:18,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.9449724862431216,rating:1.5,location:{latitude:40.7613978,longitude:-73.9927341},last_updated:null},{id:"P266113539",name:"Ramone Aponte Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":408,"taxi-zone":48,precinct:18,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7614489,longitude:-73.9893455},last_updated:null},{id:"P270791455",name:"Freeman Plaza West",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":122,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7242344,longitude:-74.0074749},last_updated:null},{id:"P281499420",name:"Lower East Side Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":516,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7293823,longitude:-73.9829156},last_updated:null},{id:"P287462475",name:"Bellevue South Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":608,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7400387,longitude:-73.9780496},last_updated:null},{id:"P292727035",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":164,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7111594,longitude:-74.0058691},last_updated:null},{id:"P293720019",name:"Balsley Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":449,"taxi-zone":48,precinct:18,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7674642,longitude:-73.9856951},last_updated:null},{id:"P295969929",name:"St. Catherine's Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":960,"taxi-zone":141,precinct:19,"b-score":{0:158,1:191,2:95,3:68,4:76,5:111,6:271,7:295,8:305,9:341,10:327,11:330,12:332,13:372,14:399,15:401,16:399,17:401,18:405,19:399,20:357,21:336,22:321,23:264},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7652136,longitude:-73.9587494},last_updated:null},{id:"P304129981",name:"Montgomery Triangle Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":478,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7142248,longitude:-73.9851113},last_updated:null},{id:"P317355661",name:"Henry M. Jackson Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":572,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7139646,longitude:-73.981496},last_updated:null},{id:"P318328998",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":981,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8005903,longitude:-73.9581806},last_updated:null},{id:"P318329003",name:"Roosevelt Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1015,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8113293,longitude:-73.9544008},last_updated:null},{id:"P324750157",name:"First Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":429,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7234173,longitude:-73.9892626},last_updated:null},{id:"P324975287",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":199,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.714787,longitude:-74.001878},last_updated:null},{id:"P324975291",name:"Canal Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":87,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7254013,longitude:-74.0105312},last_updated:null},{id:"P325008929",name:"Alfred E. Smith Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":278,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.710613,longitude:-73.9974893},last_updated:null},{id:"P325008930",name:"Tanahey Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":315,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7101263,longitude:-73.9953543},last_updated:null},{id:"P329041506",name:"Freeman Plaza East",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":122,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7240917,longitude:-74.0065116},last_updated:null},{id:"P329041537",name:"Freeman Plaza North",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":122,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7243541,longitude:-74.0065666},last_updated:null},{id:"P329988114",name:"Verdi Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":536,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7791313,longitude:-73.9816274},last_updated:null},{id:"P334715965",name:"Poses Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":878,"taxi-zone":237,precinct:19,"b-score":{0:434,1:286,2:183,3:154,4:154,5:181,6:214,7:535,8:438,9:481,10:550,11:917,12:1090,13:1105,14:1108,15:1152,16:1269,17:1289,18:1141,19:1182,20:1047,21:996,22:1052,23:780},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7674465,longitude:-73.9635001},last_updated:null},{id:"P343765233",name:"Peter Detmold Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":885,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7536627,longitude:-73.9635157},last_updated:null},{id:"P351201923",name:"Tramway Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":881,"taxi-zone":141,precinct:17,"b-score":{0:158,1:191,2:95,3:68,4:76,5:111,6:271,7:295,8:305,9:341,10:327,11:330,12:332,13:372,14:399,15:401,16:399,17:401,18:405,19:399,20:357,21:336,22:321,23:264},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7609599,longitude:-73.9644278},last_updated:null},{id:"P353000933",name:"Ruppert Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1117,"taxi-zone":263,precinct:19,"b-score":{0:214,1:125,2:86,3:48,4:55,5:55,6:241,7:169,8:194,9:247,10:385,11:503,12:520,13:530,14:539,15:531,16:521,17:530,18:514,19:496,20:445,21:451,22:446,23:528},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7809662,longitude:-73.9501489},last_updated:null},{id:"P353133685",name:"Park Avenue Malls",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1071,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7869307,longitude:-73.9522659},last_updated:null},{id:"P357523569",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1182,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8339778,longitude:-73.9452121},last_updated:null},{id:"P362684406",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1020,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8033166,longitude:-73.954381},last_updated:null},{id:"P362826160",name:"Harlem Valley Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1240,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8145685,longitude:-73.9435785},last_updated:null},{id:"P362827398",name:"Mandela Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1101,"taxi-zone":42,precinct:28,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8107974,longitude:-73.9499718},last_updated:null},{id:"P371120098",name:"Chealsea Green",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":298,"taxi-zone":90,precinct:13,"b-score":{0:99,1:80,2:46,3:31,4:36,5:64,6:141,7:436,8:480,9:519,10:519,11:530,12:540,13:532,14:600,15:722,16:674,17:792,18:785,19:689,20:525,21:509,22:403,23:273},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7415933,longitude:-73.9960607},last_updated:null},{id:"P372721441",name:"Teardrop Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":13,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7167736,longitude:-74.0156166},last_updated:null},{id:"P375369088",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"sunrise-sunset","grid-id":130,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7090264,longitude:-74.0080705},last_updated:null},{id:"P375369089",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"sunrise-sunset","grid-id":130,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7091468,longitude:-74.0082314},last_updated:null},{id:"P376015439",name:"CU SIPA Commons",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":936,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.807298,longitude:-73.9599478},last_updated:null},{id:"P376015442",name:"CU SE Field",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":896,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.806367,longitude:-73.9623446},last_updated:null},{id:"P378359193",name:"Vincent F. Albano Jr. Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mar 2-Oct 31: Mo-Su 06:00-21:00; Nov 1-Mar 1: Mo-Su 06:00-18:00","grid-id":607,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7419438,longitude:-73.9783848},last_updated:null},{id:"P378364365",name:"Peter's Field",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":560,"taxi-zone":107,precinct:13,"b-score":{0:69,1:71,2:26,3:19,4:16,5:20,6:40,7:68,8:66,9:110,10:111,11:117,12:121,13:127,14:146,15:145,16:144,17:180,18:181,19:163,20:150,21:146,22:144,23:103},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7361158,longitude:-73.9815688},last_updated:null},{id:"P379634622",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":81,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.736497,longitude:-74.0103959},last_updated:null},{id:"P379634625",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":82,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7346149,longitude:-74.0105573},last_updated:null},{id:"P379657566",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":807,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7526667,longitude:-73.9704924},last_updated:null},{id:"P379747570",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":807,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7515363,longitude:-73.9697087},last_updated:null},{id:"P379749111",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":806,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7535038,longitude:-73.9704538},last_updated:null},{id:"P379758354",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"24/7","grid-id":654,"taxi-zone":170,precinct:17,"b-score":{0:121,1:84,2:52,3:41,4:40,5:42,6:87,7:225,8:204,9:302,10:311,11:313,12:318,13:344,14:402,15:460,16:458,17:561,18:562,19:483,20:466,21:438,22:321,23:329},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7495206,longitude:-73.9760712},last_updated:null},{id:"P380425199",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":704,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7516246,longitude:-73.9730606},last_updated:null},{id:"P385106972",name:"Ralph Bunche Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":809,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7493256,longitude:-73.969745},last_updated:null},{id:"P395678163",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 08:00-sunset","grid-id":461,"taxi-zone":164,precinct:13,"b-score":{0:23,1:16,2:17,3:9,4:7,5:10,6:5,7:10,8:10,9:11,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:13,18:17,19:24,20:29,21:31,22:40,23:39},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7445517,longitude:-73.9862513},last_updated:null},{id:"P400780940",name:"Teardrop Park South",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":13,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7157927,longitude:-74.0160302},last_updated:null},{id:"P400782867",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":34,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.714576,longitude:-74.0139461},last_updated:null},{id:"P400782868",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":19,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7063887,longitude:-74.0165613},last_updated:null},{id:"P400782869",name:"Vesey Green",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":14,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7149552,longitude:-74.0166948},last_updated:null},{id:"P400782871",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.71596,longitude:-74.0135378},last_updated:null},{id:"P400782872",name:"West Thames Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":17,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7088371,longitude:-74.0157564},last_updated:null},{id:"P410310399",name:"Coleman Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":354,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7111652,longitude:-73.9933311},last_updated:null},{id:"P413055246",name:"City Hall Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":128,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7128841,longitude:-74.0060845},last_updated:null},{id:"P427818536",name:"Central Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"06:00-01:00","grid-id":869,"taxi-zone":43,precinct:22,"b-score":{0:406,1:220,2:172,3:132,4:120,5:74,6:206,7:372,8:606,9:686,10:768,11:806,12:865,13:895,14:966,15:940,16:938,17:1175,18:1009,19:957,20:910,21:907,22:982,23:1109},"c-score":.047523761880940464,rating:1.5,location:{latitude:40.7825293,longitude:-73.9655068},last_updated:null},{id:"P440055119",name:"Minetta Green",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7303446,longitude:-74.0016029},last_updated:null},{id:"P440055120",name:"West Fourth Street Courts",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":228,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7312486,longitude:-74.0009604},last_updated:null},{id:"P449139914",name:"Urban Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":194,"taxi-zone":211,precinct:1,"b-score":{0:296,1:170,2:94,3:67,4:76,5:84,6:236,7:308,8:639,9:710,10:927,11:1099,12:1349,13:1348,14:1579,15:1617,16:1602,17:2019,18:2173,19:2096,20:1468,21:1513,22:1580,23:798},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7235239,longitude:-74.0034678},last_updated:null},{id:"P453456965",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":126,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7157919,longitude:-74.006181},last_updated:null},{id:"P453461400",name:"Elizabeth Street Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":309,"taxi-zone":144,precinct:5,"b-score":{0:329,1:200,2:133,3:76,4:95,5:86,6:169,7:345,8:381,9:354,10:356,11:360,12:385,13:395,14:420,15:440,16:452,17:420,18:401,19:399,20:404,21:420,22:542,23:518},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7221953,longitude:-73.9947837},last_updated:null},{id:"P453528989",name:"Dry Dock Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":667,"taxi-zone":4,precinct:9,"b-score":{0:259,1:207,2:104,3:46,4:45,5:79,6:153,7:390,8:897,9:935,10:1024,11:1037,12:1248,13:1260,14:1480,15:1553,16:1512,17:1751,18:1747,19:1595,20:1162,21:1121,22:984,23:577},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7254397,longitude:-73.9754832},last_updated:null},{id:"P455314804",name:"Trygve Lie Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":809,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7484918,longitude:-73.9704129},last_updated:null},{id:"P458511171",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":499,"taxi-zone":230,precinct:18,"b-score":{0:225,1:167,2:97,3:66,4:48,5:23,6:30,7:78,8:165,9:246,10:286,11:517,12:613,13:648,14:647,15:655,16:642,17:650,18:417,19:392,20:375,21:378,22:380,23:411},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7603632,longitude:-73.9823986},last_updated:null},{id:"P458642434",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":496,"taxi-zone":163,precinct:18,"b-score":{0:21,1:32,2:20,3:5,4:3,5:17,6:6,7:6,8:7,9:6,10:5,11:7,12:6,13:5,14:5,15:5,16:4,17:4,18:4,19:3,20:4,21:4,22:4,23:4},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7647609,longitude:-73.9828725},last_updated:null},{id:"P458642435",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":495,"taxi-zone":163,precinct:18,"b-score":{0:21,1:32,2:20,3:5,4:3,5:17,6:6,7:6,8:7,9:6,10:5,11:7,12:6,13:5,14:5,15:5,16:4,17:4,18:4,19:3,20:4,21:4,22:4,23:4},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7661451,longitude:-73.9830132},last_updated:null},{id:"P462302471",name:"Manuel Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 06:00-22:00","grid-id":345,"taxi-zone":113,precinct:9,"b-score":{0:9,1:5,2:4,3:4,4:3,5:5,6:13,7:25,8:48,9:52,10:54,11:58,12:61,13:57,14:57,15:58,16:38,17:42,18:37,19:11,20:10,21:8,22:10,23:11},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7276683,longitude:-73.9921173},last_updated:null},{id:"P468472672",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":596,"taxi-zone":161,precinct:18,"b-score":{0:333,1:225,2:114,3:86,4:60,5:35,6:65,7:77,8:110,9:176,10:234,11:287,12:268,13:276,14:372,15:371,16:375,17:539,18:602,19:619,20:582,21:564,22:519,23:496},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7610842,longitude:-73.9783735},last_updated:null},{id:"P468485719",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":716,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7305654,longitude:-73.9748081},last_updated:null},{id:"P468548548",name:"West 111th Street People's Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":857,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.803897,longitude:-73.9635414},last_updated:null},{id:"P468555499",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":891,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.81501,longitude:-73.9622763},last_updated:null},{id:"P468591558",name:"West 104th Street Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":901,"taxi-zone":151,precinct:24,"b-score":{0:278,1:195,2:108,3:73,4:94,5:172,6:783,7:444,8:566,9:584,10:862,11:877,12:880,13:846,14:889,15:945,16:910,17:926,18:971,19:938,20:929,21:848,22:739,23:533},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.7968848,longitude:-73.9619463},last_updated:null},{id:"P469101347",name:"Tenzer Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1481,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8498324,longitude:-73.9291411},last_updated:null},{id:"P469101348",name:"Danciger Quadrangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1481,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.850316,longitude:-73.928956},last_updated:null},{id:"P471549306",name:"NYC AIDS Memorial Park at St. Vincent's Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":224,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7371836,longitude:-74.0011967},last_updated:null},{id:"P473565702",name:"Rapkin-Gayle Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 06:00-22:00","grid-id":234,"taxi-zone":144,precinct:5,"b-score":{0:329,1:200,2:133,3:76,4:95,5:86,6:169,7:345,8:381,9:354,10:356,11:360,12:385,13:395,14:420,15:440,16:452,17:420,18:401,19:399,20:404,21:420,22:542,23:518},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7204001,longitude:-73.9991398},last_updated:null},{id:"P474169900",name:"Lieutenant William Tighe Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1472,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8658571,longitude:-73.9279994},last_updated:null},{id:"P474173970",name:"Sherman Creek",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1549,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8608411,longitude:-73.9182038},last_updated:null},{id:"P474175699",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1549,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8601542,longitude:-73.9185091},last_updated:null},{id:"P474199302",name:"Monsignor Kett Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1535,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8625304,longitude:-73.9209396},last_updated:null},{id:"P476650290",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1179,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8379833,longitude:-73.9459572},last_updated:null},{id:"P479358564",name:"Rooftop Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":804,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7576241,longitude:-73.9686533},last_updated:null},{id:"P480966277",name:"148th Street Block Association Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1327,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8243789,longitude:-73.9389915},last_updated:null},{id:"P483509921",name:"Poinsettia Community Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":936,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.808972,longitude:-73.9588785},last_updated:null},{id:"P483509926",name:"Ruggles Commons",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":896,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8056356,longitude:-73.9628429},last_updated:null},{id:"P483702983",name:"Augustus Saint-Gaudens Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":560,"taxi-zone":107,precinct:13,"b-score":{0:69,1:71,2:26,3:19,4:16,5:20,6:40,7:68,8:66,9:110,10:111,11:117,12:121,13:127,14:146,15:145,16:144,17:180,18:181,19:163,20:150,21:146,22:144,23:103},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7355499,longitude:-73.9821423},last_updated:null},{id:"P497484756",name:"Albert Capsouto Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":158,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7220549,longitude:-74.0059139},last_updated:null},{id:"P498671779",name:"Drumgoole Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"null","grid-id":164,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7110399,longitude:-74.0041141},last_updated:null},{id:"P504045549",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"null","grid-id":131,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7072581,longitude:-74.0083037},last_updated:null},{id:"P531272222",name:"CS Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":935,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8091383,longitude:-73.9599533},last_updated:null},{id:"P531580782",name:"Robert Moses Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":809,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7481156,longitude:-73.9692894},last_updated:null},{id:"P538080002",name:"Elizabeth H. Berger Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":38,"taxi-zone":261,precinct:1,"b-score":{0:253,1:129,2:74,3:56,4:59,5:116,6:168,7:306,8:548,9:551,10:602,11:638,12:667,13:676,14:683,15:709,16:740,17:945,18:903,19:836,20:827,21:811,22:736,23:463},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7066764,longitude:-74.0140208},last_updated:null},{id:"P539005582",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7156052,longitude:-74.0150931},last_updated:null},{id:"P544675664",name:"Mitchell Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1274,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8401868,longitude:-73.9400483},last_updated:null},{id:"P580123906",name:"Mulry Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":225,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7362506,longitude:-74.0010873},last_updated:null},{id:"P581666857",name:"Jane Street Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":149,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.738004,longitude:-74.0045481},last_updated:null},{id:"P585788256",name:"Central Park Carousel",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":642,"taxi-zone":43,precinct:22,"b-score":{0:406,1:220,2:172,3:132,4:120,5:74,6:206,7:372,8:606,9:686,10:768,11:806,12:865,13:895,14:966,15:940,16:938,17:1175,18:1009,19:957,20:910,21:907,22:982,23:1109},"c-score":.15157578789394696,rating:1.5,location:{latitude:40.7699426,longitude:-73.9752476},last_updated:null},{id:"P588483880",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1407,"taxi-zone":120,precinct:33,"b-score":{0:97,1:100,2:63,3:45,4:44,5:20,6:48,7:118,8:89,9:95,10:97,11:89,12:85,13:85,14:86,15:107,16:100,17:117,18:123,19:136,20:147,21:156,22:160,23:157},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8446978,longitude:-73.9329917},last_updated:null},{id:"P613509792",name:"Tribeca Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"Mo-Su 06:00-01:00","grid-id":159,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7202027,longitude:-74.0056402},last_updated:null},{id:"P664153164",name:'Bill "Bojangles" Robinson Playground',type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1327,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8252699,longitude:-73.9372963},last_updated:null},{id:"P664153165",name:"LaGuardia Corner Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":269,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7279235,longitude:-73.9988616},last_updated:null},{id:"P664697032",name:"Monterey Public Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"24/7","grid-id":1114,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.785788,longitude:-73.949994},last_updated:null},{id:"P672251427",name:"Abe Lebewohl Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":469,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7300001,longitude:-73.9870591},last_updated:null},{id:"P675913161",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":393,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7123128,longitude:-73.9916567},last_updated:null},{id:"P675935774",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":352,"taxi-zone":148,precinct:7,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7147518,longitude:-73.9926339},last_updated:null},{id:"P675935775",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":390,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7187024,longitude:-73.9906477},last_updated:null},{id:"P675935776",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":390,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7178532,longitude:-73.9910848},last_updated:null},{id:"P675935777",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":391,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7167999,longitude:-73.9916173},last_updated:null},{id:"P675935778",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":351,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.715654,longitude:-73.9922088},last_updated:null},{id:"P675935779",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":354,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7113496,longitude:-73.9922318},last_updated:null},{id:"P675935780",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":353,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7120492,longitude:-73.9923541},last_updated:null},{id:"P675937259",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":276,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7142311,longitude:-73.9970905},last_updated:null},{id:"P675962287",name:"Sophie Irene Loeb Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":314,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7133595,longitude:-73.9943004},last_updated:null},{id:"P684670439",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":657,"taxi-zone":137,precinct:17,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7426586,longitude:-73.9756162},last_updated:null},{id:"P687661469",name:"First Street Green Cultural Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":387,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.723751,longitude:-73.9903251},last_updated:null},{id:"P702078581",name:"McMahon Lawn",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":446,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7713558,longitude:-73.9865241},last_updated:null},{id:"P705304809",name:"30 Lincoln Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"8:00-23:00","grid-id":541,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7707961,longitude:-73.9814012},last_updated:null},{id:"P718438725",name:"Murphy Brothers Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":716,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7302393,longitude:-73.973219},last_updated:null},{id:"P718471254",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1042,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7640426,longitude:-73.9544696},last_updated:null},{id:"P727964618",name:"Lafayette Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":980,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8035524,longitude:-73.9580337},last_updated:null},{id:"P743395860",name:"The Elevated Acre",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":99,"taxi-zone":88,precinct:1,"b-score":{0:108,1:43,2:30,3:21,4:23,5:29,6:60,7:133,8:165,9:366,10:405,11:499,12:506,13:511,14:569,15:522,16:441,17:421,18:416,19:367,20:308,21:301,22:330,23:200},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7032051,longitude:-74.0087006},last_updated:null},{id:"P759460622",name:"Minerva Bernadino Green Street",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":858,"taxi-zone":24,precinct:24,"b-score":{0:574,1:281,2:240,3:118,4:163,5:241,6:1292,7:1081,8:1092,9:1276,10:1347,11:1364,12:1368,13:1393,14:1449,15:1448,16:1444,17:1489,18:1646,19:1649,20:1532,21:1558,22:1433,23:1037},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.8028294,longitude:-73.9640762},last_updated:null},{id:"P765274333",name:"Playground 11",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":664,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7310982,longitude:-73.9763847},last_updated:null},{id:"P765274338",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":612,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7324171,longitude:-73.9792686},last_updated:null},{id:"P769716502",name:"Hillman Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":572,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7151983,longitude:-73.982351},last_updated:null},{id:"P769716504",name:"Sol Lain Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":524,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7142341,longitude:-73.9838951},last_updated:null},{id:"P793720073",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":760,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7444405,longitude:-73.9717305},last_updated:null},{id:"P800212164",name:"Catherine Slip Malls",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":316,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7095081,longitude:-73.9961565},last_updated:null},{id:"P821278619",name:"Small Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":931,"taxi-zone":152,precinct:26,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8170021,longitude:-73.9588657},last_updated:null},{id:"P833335529",name:"Little Island",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"Mo-Su 06:00-23:00","grid-id":78,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7420048,longitude:-74.0106097},last_updated:null},{id:"P837603512",name:"Pier 26",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":30,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7212402,longitude:-74.0146496},last_updated:null},{id:"P890862707",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":277,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7127252,longitude:-73.9985494},last_updated:null},{id:"P890862858",name:"Fishbridge Park Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":202,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7090621,longitude:-74.0013335},last_updated:null},{id:"P890862859",name:"Pearl Street Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":166,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7079571,longitude:-74.003871},last_updated:null},{id:"P891074490",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":164,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7104212,longitude:-74.0058293},last_updated:null},{id:"P891134387",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7165399,longitude:-74.0148155},last_updated:null},{id:"P891134388",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":32,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7173682,longitude:-74.014168},last_updated:null},{id:"P893841834",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":188,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7352313,longitude:-74.0017222},last_updated:null},{id:"P893841889",name:"Washington Commons",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":114,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7384531,longitude:-74.0083015},last_updated:null},{id:"P894035808",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7298816,longitude:-74.002776},last_updated:null},{id:"P895611180",name:"West 87th Street Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":737,"taxi-zone":238,precinct:24,"b-score":{0:396,1:289,2:117,3:84,4:79,5:112,6:385,7:443,8:470,9:525,10:596,11:724,12:763,13:801,14:791,15:834,16:803,17:840,18:1072,19:997,20:975,21:964,22:993,23:808},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.787094,longitude:-73.9709212},last_updated:null},{id:"P895757747",name:"Joan of Arc Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":629,"taxi-zone":238,precinct:24,"b-score":{0:396,1:289,2:117,3:84,4:79,5:112,6:385,7:443,8:470,9:525,10:596,11:724,12:763,13:801,14:791,15:834,16:803,17:840,18:1072,19:997,20:975,21:964,22:993,23:808},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.7942118,longitude:-73.976389},last_updated:null},{id:"P904714816",name:"Happy Warrior Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":783,"taxi-zone":151,precinct:24,"b-score":{0:278,1:195,2:108,3:73,4:94,5:172,6:783,7:444,8:566,9:584,10:862,11:877,12:880,13:846,14:889,15:945,16:910,17:926,18:971,19:938,20:929,21:848,22:739,23:533},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7954197,longitude:-73.9684305},last_updated:null},{id:"P918302837",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":399,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7777983,longitude:-73.9873252},last_updated:null},{id:"P943557523",name:"Dorrence Brook Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1143,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8181963,longitude:-73.9472809},last_updated:null},{id:"P954250916",name:"Dekovats Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1260,"taxi-zone":262,precinct:19,"b-score":{0:714,1:440,2:234,3:161,4:180,5:308,6:696,7:567,8:592,9:657,10:727,11:1141,12:1111,13:1107,14:1115,15:1128,16:1120,17:1905,18:2049,19:1980,20:1680,21:1865,22:1940,23:1347},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7793517,longitude:-73.9442344},last_updated:null},{id:"P954250919",name:"Samuel Marx Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1062,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.802576,longitude:-73.9527698},last_updated:null},{id:"P959894788",name:"Roger Morris Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1321,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8345035,longitude:-73.9385228},last_updated:null},{id:"P959895071",name:"McKenna Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1319,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.6868434217108554,rating:1.5,location:{latitude:40.8383487,longitude:-73.9391569},last_updated:null},{id:"P964819132",name:"Seward Park Extension Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"dawn-dusk","grid-id":433,"taxi-zone":148,precinct:7,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.5297648824412206,rating:1.5,location:{latitude:40.7171165,longitude:-73.9884804},last_updated:null},{id:"P964822654",name:"Seward Park Extension Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"dawn-dusk","grid-id":477,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.6613306653326663,rating:1.5,location:{latitude:40.7168088,longitude:-73.9848922},last_updated:null},{id:"P973521995",name:"Ahearn Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":524,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7148022,longitude:-73.9834508},last_updated:null},{id:"P976724943",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":384,"taxi-zone":113,precinct:9,"b-score":{0:9,1:5,2:4,3:4,4:3,5:5,6:13,7:25,8:48,9:52,10:54,11:58,12:61,13:57,14:57,15:58,16:38,17:42,18:37,19:11,20:10,21:8,22:10,23:11},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7294006,longitude:-73.9911035},last_updated:null},{id:"P985281628",name:"Seward Park High School - Community Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":433,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.5297648824412206,rating:1.5,location:{latitude:40.7158595,longitude:-73.9891313},last_updated:null},{id:"P990936691",name:"Pier 42 Upland Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":574,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7105384,longitude:-73.981794},last_updated:null},{id:"P997819338",name:"Andrew Haswell Green Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1004,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7594825,longitude:-73.9575866},last_updated:null},{id:"P1015980340",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Apr-Oct 07:00-22:00; Nov-Mar 07:00-20:00","grid-id":477,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.6613306653326663,rating:1.5,location:{latitude:40.7168628,longitude:-73.9867292},last_updated:null},{id:"P1016487162",name:"Queensborough Oval",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":963,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7592353,longitude:-73.9600741},last_updated:null},{id:"P1018935492",name:"Vladeck Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":573,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7123997,longitude:-73.9820519},last_updated:null},{id:"P1021760821",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":176,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7562014,longitude:-74.0035176},last_updated:null},{id:"P1023817153",name:"Pier 76",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":137,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.38419209604802396,rating:1.5,location:{latitude:40.7591506,longitude:-74.005364},last_updated:null},{id:"P1025959315",name:"The Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":931,"taxi-zone":152,precinct:26,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8180211,longitude:-73.9589542},last_updated:null},{id:"P1059903962",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"24/7","grid-id":653,"taxi-zone":170,precinct:17,"b-score":{0:121,1:84,2:52,3:41,4:40,5:42,6:87,7:225,8:204,9:302,10:311,11:313,12:318,13:344,14:402,15:460,16:458,17:561,18:562,19:483,20:466,21:438,22:321,23:329},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7500032,longitude:-73.9756477},last_updated:null},{id:"P1068258666",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":605,"taxi-zone":137,precinct:17,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.3771885942971485,rating:1.5,location:{latitude:40.7443685,longitude:-73.9781439},last_updated:null},{id:"P1068603579",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":506,"taxi-zone":164,precinct:14,"b-score":{0:23,1:16,2:17,3:9,4:7,5:10,6:5,7:10,8:10,9:11,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:13,18:17,19:24,20:29,21:31,22:40,23:39},"c-score":1,rating:1.5,location:{latitude:40.7474521,longitude:-73.9837467},last_updated:null},{id:"P1077518596",name:"Hester Street Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":434,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.7858929464732366,rating:1.5,location:{latitude:40.7154087,longitude:-73.9893119},last_updated:null},{id:"P1082729243",name:"Saint Vartan Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":708,"taxi-zone":170,precinct:17,"b-score":{0:121,1:84,2:52,3:41,4:40,5:42,6:87,7:225,8:204,9:302,10:311,11:313,12:318,13:344,14:402,15:460,16:458,17:561,18:562,19:483,20:466,21:438,22:321,23:329},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7456086,longitude:-73.9748201},last_updated:null},{id:"P1083911850",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":429,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7231734,longitude:-73.987557},last_updated:null},{id:"P1087523912",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":607,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7408339,longitude:-73.9794828},last_updated:null},{id:"P1090764362",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"08:00-20:00","grid-id":1075,"taxi-zone":263,precinct:19,"b-score":{0:214,1:125,2:86,3:48,4:55,5:55,6:241,7:169,8:194,9:247,10:385,11:503,12:520,13:530,14:539,15:531,16:521,17:530,18:514,19:496,20:445,21:451,22:446,23:528},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7801006,longitude:-73.9524877},last_updated:null},{id:"P1095508395",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1532,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8674781,longitude:-73.9228727},last_updated:null},{id:"P1107165183",name:"Anibal Aviles Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":899,"taxi-zone":24,precinct:24,"b-score":{0:574,1:281,2:240,3:118,4:163,5:241,6:1292,7:1081,8:1092,9:1276,10:1347,11:1364,12:1368,13:1393,14:1449,15:1448,16:1444,17:1489,18:1646,19:1649,20:1532,21:1558,22:1433,23:1037},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.801159,longitude:-73.9627985},last_updated:null},{id:"P1121582607",name:"Herald Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":414,"taxi-zone":100,precinct:14,"b-score":{0:84,1:75,2:46,3:40,4:29,5:19,6:34,7:42,8:67,9:68,10:71,11:75,12:90,13:95,14:124,15:128,16:125,17:167,18:235,19:235,20:235,21:244,22:240,23:177},"c-score":1,rating:1.5,location:{latitude:40.750256,longitude:-73.987625},last_updated:null},{id:"P1121932385",name:"Greeley Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":415,"taxi-zone":164,precinct:14,"b-score":{0:23,1:16,2:17,3:9,4:7,5:10,6:5,7:10,8:10,9:11,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:13,18:17,19:24,20:29,21:31,22:40,23:39},"c-score":1,rating:1.5,location:{latitude:40.7487036,longitude:-73.9883472},last_updated:null},{id:"P1127559545",name:"Peck Slip",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":203,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7078001,longitude:-74.0015491},last_updated:null},{id:"P1127851294",name:"Imagination Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":167,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7061989,longitude:-74.0040983},last_updated:null},{id:"P1135559125",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1268,"taxi-zone":244,precinct:34,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8505811,longitude:-73.9407742},last_updated:null},{id:"P1141662701",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":843,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7569158,longitude:-73.9662011},last_updated:null},{id:"P1173199006",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"08:00-21:00","grid-id":1116,"taxi-zone":263,precinct:19,"b-score":{0:214,1:125,2:86,3:48,4:55,5:55,6:241,7:169,8:194,9:247,10:385,11:503,12:520,13:530,14:539,15:531,16:521,17:530,18:514,19:496,20:445,21:451,22:446,23:528},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7825984,longitude:-73.949957},last_updated:null},{id:"P1173199007",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"24/7","grid-id":1116,"taxi-zone":263,precinct:19,"b-score":{0:214,1:125,2:86,3:48,4:55,5:55,6:241,7:169,8:194,9:247,10:385,11:503,12:520,13:530,14:539,15:531,16:521,17:530,18:514,19:496,20:445,21:451,22:446,23:528},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7826106,longitude:-73.9501576},last_updated:null},{id:"P1183761752",name:"Clara Coffey Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":924,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.755163,longitude:-73.9621444},last_updated:null},{id:"P1183958467",name:"MacArthur Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":886,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.752273,longitude:-73.9651557},last_updated:null},{id:"P1188665117",name:"Pier 42 Deck",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":527,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7099785,longitude:-73.9823839},last_updated:null},{id:"P1751075",name:"John Jay Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1124,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7692516,longitude:-73.9496384},last_updated:null},{id:"P3690816",name:"Highbridge Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1453,"taxi-zone":120,precinct:33,"b-score":{0:97,1:100,2:63,3:45,4:44,5:20,6:48,7:118,8:89,9:95,10:97,11:89,12:85,13:85,14:86,15:107,16:100,17:117,18:123,19:136,20:147,21:156,22:160,23:157},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8460051,longitude:-73.9319502},last_updated:null},{id:"P4099553",name:"Sara D. Roosevelt Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":349,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7196275,longitude:-73.9925973},last_updated:null},{id:"P5625630",name:"Fort Tryon Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1397,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8619781,longitude:-73.9326365},last_updated:null},{id:"P6802606",name:"Mannahatta Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":132,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7047848,longitude:-74.006686},last_updated:null},{id:"P6992452",name:"Dag Hammarskjold Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":807,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7523203,longitude:-73.9688866},last_updated:null},{id:"P7095444",name:"Union Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":380,"taxi-zone":234,precinct:13,"b-score":{0:338,1:202,2:109,3:69,4:53,5:158,6:476,7:542,8:652,9:682,10:892,11:897,12:906,13:913,14:919,15:1092,16:1484,17:1589,18:1540,19:1557,20:1441,21:1446,22:1125,23:734},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7358088,longitude:-73.9904565},last_updated:null},{id:"P7095669",name:"Stuyvesant Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":513,"taxi-zone":107,precinct:13,"b-score":{0:69,1:71,2:26,3:19,4:16,5:20,6:40,7:68,8:66,9:110,10:111,11:117,12:121,13:127,14:146,15:145,16:144,17:180,18:181,19:163,20:150,21:146,22:144,23:103},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7336501,longitude:-73.9839997},last_updated:null},{id:"P7109446",name:"Theodore Roosevelt Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":688,"taxi-zone":239,precinct:20,"b-score":{0:98,1:114,2:40,3:25,4:24,5:35,6:96,7:152,8:156,9:189,10:297,11:307,12:323,13:334,14:329,15:340,16:328,17:334,18:309,19:302,20:299,21:307,22:299,23:278},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7813637,longitude:-73.9740819},last_updated:null},{id:"P7141751",name:"The High Line",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:"Mo-Su 07:00-19:00","grid-id":143,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7479527,longitude:-74.0039779},last_updated:null},{id:"P8176996",name:"Old Slip Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":99,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7038707,longitude:-74.0085649},last_updated:null},{id:"P8456861",name:"Columbia University Well Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":936,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8081586,longitude:-73.9607078},last_updated:null},{id:"P9340888",name:"United Nations Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":847,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7509687,longitude:-73.9664023},last_updated:null},{id:"P9643461",name:"Nelson A. Rockefeller Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.716889,longitude:-74.0152879},last_updated:null},{id:"P10025591",name:"West 59th Street Recreation Center",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":403,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7712414,longitude:-73.988724},last_updated:null},{id:"P10170445",name:"Low Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":895,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8076784,longitude:-73.9622466},last_updated:null},{id:"P10571875",name:"Duke Ellington Circle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1108,"taxi-zone":43,precinct:22,"b-score":{0:406,1:220,2:172,3:132,4:120,5:74,6:206,7:372,8:606,9:686,10:768,11:806,12:865,13:895,14:966,15:940,16:938,17:1175,18:1009,19:957,20:910,21:907,22:982,23:1109},"c-score":.2061030515257629,rating:1.5,location:{latitude:40.7968563,longitude:-73.949257},last_updated:null},{id:"P11037505",name:"Charles B. Benenson Grove",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":492,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7714021,longitude:-73.9835705},last_updated:null},{id:"P11077079",name:"African Burial Ground National Monument",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":162,"taxi-zone":231,precinct:5,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.3986993496748374,rating:1.5,location:{latitude:40.7145261,longitude:-74.004464},last_updated:null},{id:"P11225305",name:"Honey Locust Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":922,"taxi-zone":141,precinct:17,"b-score":{0:158,1:191,2:95,3:68,4:76,5:111,6:271,7:295,8:305,9:341,10:327,11:330,12:332,13:372,14:399,15:401,16:399,17:401,18:405,19:399,20:357,21:336,22:321,23:264},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7601599,longitude:-73.9628992},last_updated:null},{id:"P13613032",name:"Thomas Paine Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 06:00-01:00","grid-id":199,"taxi-zone":231,precinct:5,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.714782,longitude:-74.0027707},last_updated:null},{id:"P13678220",name:"Bella Abzug Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":214,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7558415,longitude:-74.0003803},last_updated:null},{id:"P14374901",name:"Sherman Creek",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1537,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8585719,longitude:-73.9216107},last_updated:null},{id:"P14425097",name:"Saint Vartan Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":708,"taxi-zone":170,precinct:17,"b-score":{0:121,1:84,2:52,3:41,4:40,5:42,6:87,7:225,8:204,9:302,10:311,11:313,12:318,13:344,14:402,15:460,16:458,17:561,18:562,19:483,20:466,21:438,22:321,23:329},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7452795,longitude:-73.9740145},last_updated:null},{id:"P15039698",name:"Silverstein Family Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":63,"taxi-zone":231,precinct:17,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7131852,longitude:-74.0114448},last_updated:null},{id:"P15902634",name:"Brooklyn Banks",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":201,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7114732,longitude:-74.0027148},last_updated:null},{id:"P16000824",name:"Sutton Parks",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":965,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7565069,longitude:-73.9605051},last_updated:null}],zL={data:Tae},Sae=(e,t,n,i,c)=>{const d=K.useRef(null),[f,a]=K.useState([]),v=K.useRef(),S=K.useRef();return K.useEffect(()=>{d.current&&(v.current&&v.current.remove(),v.current=new ss.Marker().setLngLat([c.longitude,c.latitude]).addTo(d.current),console.log("Placing start marker at:",[c.longitude,c.latitude]))},[d,c.latitude,c.longitude]),K.useEffect(()=>{d.current&&(S.current&&S.current.remove(),S.current=new ss.Marker().setLngLat([c.endLongitude,c.endLatitude]).addTo(d.current),console.log("Placing end marker at:",[c.endLongitude,c.endLatitude]))},[d,c.endLatitude,c.endLongitude]),K.useEffect(()=>{if(d.current)return;d.current=new ss.Map({container:e.current,style:"mapbox://styles/mapbox/streets-v11",center:[n,t],zoom:i});const M=zL.data.map(R=>({id:R.id,name:R.name,latitude:R.location.latitude,longitude:R.location.longitude}));a(M),d.current.on("load",()=>{d.current.loadImage("/static/tree.png",(R,N)=>{if(R)throw R;d.current.addImage("cat",N),d.current.addSource("markers",{type:"geojson",data:{type:"FeatureCollection",features:M.map(W=>({type:"Feature",geometry:{type:"Point",coordinates:[W.longitude,W.latitude]},properties:{id:W.id,name:W.name}}))}}),d.current.addLayer({id:"markers",type:"symbol",source:"markers",layout:{"icon-image":"cat","icon-size":.25},paint:{"icon-opacity":.8}}),d.current.on("mouseenter","markers",()=>{d.current.getCanvas().style.cursor="pointer"}),d.current.on("mouseleave","markers",()=>{d.current.getCanvas().style.cursor=""})}),d.current.on("click",R=>{const N=d.current.queryRenderedFeatures(R.point,{layers:["markers"]});if(N.length>0){const W=N[0].geometry.coordinates.slice(),V=N[0].properties.name,H=N[0].properties.id;new ss.Popup({className:"custom-popup"}).setLngLat(W).setHTML(`<div class="popup-content">${V}<br>${H}<br>${W}</div>`).addTo(d.current)}})})},[]),{map:d,markers:f}},kae=(e="",t)=>{const[n,i]=K.useState(e),[c,d]=K.useState([]);return{placeName:n,suggestions:c,handlePlaceNameChange:async(v,S)=>{if(i(S||""),S){const R=await(await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(S)}.json?access_token=${ss.accessToken}`)).json();R.features.length>0&&d(R.features.map(N=>({label:N.place_name,value:N.place_name,coordinates:N.center})))}else d([])},handlePlaceSelect:v=>{t(S=>({...S,latitude:v.coordinates[1],longitude:v.coordinates[0]}))}}},Cae="pk.eyJ1IjoiZmluYmFyYWxsYW4iLCJhIjoiY2xqY3NtYWN6MjV0ODNqcXhhaTY4aGQxdSJ9.VeVQzxCCtpyP_MeT1CkjOg";ss.accessToken=Cae;const NL=({inputValues:e,setInputValues:t})=>{const n=K.useRef(null),[i,c]=K.useState(40.73),[d,f]=K.useState(-73.445),[a,v]=K.useState(12.4),[S,M]=K.useState(!1),[R,N]=K.useState(!1),[W,V]=K.useState(!1),[H,le]=K.useState(1),[G,X]=K.useState("km"),[Q,oe]=K.useState(!1),[he,be]=K.useState(!1),[A,Re]=K.useState(()=>{const bn=new Date;return bn.getMinutes()!==0&&bn.setHours(bn.getHours()+1,0,0,0),bn}),[_e,ze]=K.useState(A),[ot,gt]=K.useState(!1),[Ze,We]=K.useState(!1),[He,rt]=K.useState(!1),[tt,Ne]=K.useState(!1),[et,it]=K.useState(!1),[Dt,Tt]=K.useState(!1),[Rt,Yt]=K.useState(!1),[tn,dn]=K.useState(!1),[_n,In]=K.useState(!1),[Jt,vn]=K.useState(!1),[Ft,nn]=K.useState(!1),[En,Zt]=K.useState(!1),{map:Ct,markers:On}=Sae(n,i,d,a,e);wae(Ct.current,e),Eae(Ct.current,S,M,R,N,e,t,He,rt,Ne);const{placeName:an,suggestions:Zn,handlePlaceNameChange:tr,handlePlaceSelect:Nn}=kae("",t),Yn=()=>{it(!0),Tt(!1);const bn=new Date,Ye=bn.getHours();t(rn=>({...rn,hour:Ye}));const Xt=Math.round(bn.getMinutes());bn.setMinutes(Xt),ze(bn),V(!1),gt(!0)},Un=()=>{it(!1),Tt(!0);const bn=new Date;let Ye=bn.getHours();bn.getMinutes()>0&&(Ye+=1),bn.setHours(Ye,0,0,0),t(Xt=>({...Xt,hour:Ye})),ze(bn),V(!0),gt(!0)},qn=async bn=>{bn.preventDefault(),console.log("handleInputSubmit",e);try{const Ye=await CE.post("/users/handle_routeinpput_data",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});console.log("errorless:",Ye.data);const Xt=Ye.data.waypoints;console.log("waypoints:",Xt),t({...e,waypoints:Xt}),console.log("handleInputSubmit",e)}catch(Ye){Ye.response?(console.log(Ye.response),console.log("server responded with error")):Ye.request?console.log("network error"):console.log(Ye)}};return Z.jsxs("div",{children:[Z.jsxs("div",{className:"user-input",children:[Z.jsx("div",{className:"titlebox",children:Z.jsx("span",{className:"text_bar-mapfunction",children:"My Journey Planner"})}),Z.jsxs("div",{className:"when-input",children:[Z.jsx("p",{children:"When would you like to leave?"}),Z.jsxs(fv,{spacing:2,direction:"row",justifyContent:"center",paddingBottom:"15px",children:[Z.jsx(As,{className:"now-button",sx:{width:"100px",height:"2.5rem"},variant:et?"contained":"outlined",style:et?{borderRadius:0}:{backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none",borderRadius:0},onClick:Yn,children:"Now"}),Z.jsx(As,{variant:Dt?"contained":"outlined",sx:{width:"100px",height:"2.5rem"},style:Dt?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},onClick:Un,children:"Later"})]}),W&&Z.jsx(tO,{value:_e,onChange:bn=>{bn?(ze(bn),t(Ye=>({...Ye,hour:bn.getHours()}))):ze(A)}})]}),ot&&Z.jsxs("div",{children:[Z.jsx("p",{children:"How long would like to go for?"}),Z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[Z.jsx(Hte,{style:{width:"150px"},value:H,min:G==="km"?1:10,max:G==="km"?10:100,step:G==="km"?.5:5,valueLabelDisplay:"auto",onChange:(bn,Ye)=>le(Ye),onChangeCommitted:()=>{We(!0)}}),Z.jsx(As,{sx:{width:"100px",height:"2.5rem"},variant:"outlined",style:et?{borderColor:"black",color:"black",borderRadius:0}:{borderColor:"black",color:"black",borderRadius:0},onClick:()=>{if(G==="km"){const Ye=(H-1)/9*(100-10)+10;le(Ye),X("min")}else{const Ye=(H-10)/90*(10-1)+1;le(Ye),X("km")}},children:G==="km"?`${H} km`:`${H} mins`})]})]}),Ze&&Z.jsxs("div",{children:[Z.jsx("p",{children:"Where would you like to begin?"}),Z.jsx("div",{style:{display:"flex",gap:"10px"},children:Z.jsxs(fv,{spacing:1,direction:"row",justifyContent:"center",paddingBottom:"15px",children:[Z.jsx(As,{onClick:()=>{t(bn=>({...bn,latitude:40.7505,longitude:-73.9934})),oe(!1),Yt(!0),dn(!1),In(!1),rt(!0)},sx:{width:"110px",height:"2.5rem"},startIcon:Z.jsx(g6,{}),variant:Rt?"contained":"outlined",style:Rt?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:"Home"}),Z.jsx(As,{onClick:()=>{M(!S),oe(!1),Yt(!1),dn(!0),In(!1)},sx:{width:"110px",height:"2.5rem"},startIcon:S?Z.jsx(v6,{}):Z.jsx(_6,{}),variant:tn?"contained":"outlined",style:tn?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:S?"Click":"Map"}),Z.jsx(As,{onClick:()=>{oe(!0),Yt(!1),dn(!1),In(!0)},sx:{width:"110px",height:"2.5rem"},startIcon:Z.jsx(y6,{}),variant:_n?"contained":"outlined",style:_n?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:"Search"})]})}),Q&&Z.jsx(nI,{id:"address-input",options:Zn,getOptionLabel:bn=>bn.label,isOptionEqualToValue:()=>!0,style:{borderRadius:0,width:350,paddingBottom:"15px",color:"black",borderRadius:0},onInputChange:tr,onChange:(bn,Ye)=>{Ye&&Nn(Ye)},renderInput:bn=>Z.jsx(ZP,{...bn,label:"Type Address",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"black"},"&:hover fieldset":{borderColor:"black"},"&.Mui-focused fieldset":{borderColor:"black"}},"& .MuiFormLabel-root":{color:"black","&.Mui-focused":{color:"black"}},"& .MuiInputBase-root":{color:"black"},"& .MuiAutocomplete-clearIndicator":{color:"black"},"& .MuiAutocomplete-popupIndicator":{color:"black"}}})})]}),He&&Z.jsxs("div",{children:[Z.jsx("p",{children:"Where would you like to go?"}),Z.jsx("div",{style:{display:"flex",gap:"10px"},children:Z.jsxs(fv,{spacing:1,direction:"row",justifyContent:"center",paddingBottom:"15px",children:[Z.jsx(As,{onClick:()=>{t(bn=>({...bn,endLatitude:40.711667,endLongitude:-74.0125})),vn(!0),nn(!1),Zt(!1),Ne(!0),be(!1)},startIcon:Z.jsx(g6,{}),sx:{width:"110px",height:"2.5rem"},variant:Jt?"contained":"outlined",style:Jt?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:"Home"}),Z.jsx(As,{onClick:()=>{N(!R),vn(!1),nn(!0),Zt(!1),be(!1)},sx:{width:"110px",height:"2.5rem"},startIcon:R?Z.jsx(v6,{}):Z.jsx(_6,{}),variant:Ft?"contained":"outlined",style:Ft?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:R?"Click":"Map"}),Z.jsx(As,{onClick:()=>{vn(!1),nn(!1),Zt(!0),be(!0)},sx:{width:"110px",height:"2.5rem"},startIcon:Z.jsx(y6,{}),variant:En?"contained":"outlined",style:En?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none",borderRadius:0},children:"Search"})]})}),he&&Z.jsx(nI,{id:"address-input",options:Zn,getOptionLabel:bn=>bn.label,isOptionEqualToValue:()=>!0,style:{width:350,paddingBottom:"15px",color:"black",borderRadius:0},onInputChange:tr,onChange:(bn,Ye)=>{Ye&&Nn(Ye)},renderInput:bn=>Z.jsx(ZP,{...bn,label:"Type Address",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"black"},"&:hover fieldset":{borderColor:"black"},"&.Mui-focused fieldset":{borderColor:"black"}},"& .MuiFormLabel-root":{color:"black","&.Mui-focused":{color:"black"}},"& .MuiInputBase-root":{color:"black"},"& .MuiAutocomplete-clearIndicator":{color:"black"},"& .MuiAutocomplete-popupIndicator":{color:"black"}}})})]}),tt&&Z.jsx(fv,{spacing:1,direction:"row",justifyContent:"center",paddingBottom:"15px",children:Z.jsx(As,{sx:{width:"200px",height:"2.5rem"},variant:"contained",type:"submit",size:"large",style:{borderRadius:0},onClick:qn,children:"GO"})}),Z.jsx(As,{sx:{width:"200px",height:"2.5rem"},style:{borderRadius:0},variant:"outlined",onClick:()=>console.log("These were the inputValues:",e),children:"Tell me baby..."})]}),Z.jsx("div",{ref:n,className:"map-container"})]})};function Pae({inputValues:e,setInputValues:t}){return Z.jsx("div",{children:Z.jsx("div",{className:"interface-container",children:Z.jsx("div",{className:"map-container",children:Z.jsx(NL,{inputValues:e,setInputValues:t})})})})}function Iae(){return Z.jsx(Z.Fragment,{children:Z.jsx("div",{className:"wrapper-function-signup",children:Z.jsx("a",{className:"wrapper-function-text-signup",href:"#",type:"submit",children:Z.jsx("span",{children:"Sign Up"})})})})}const FL=()=>{const[e,t]=K.useState({first_name:"",last_name:"",email:"",address:"",password:""}),n=document.getElementById("error-message"),i=d=>{t({...e,[d.target.name]:d.target.value})},c=async d=>{d.preventDefault(),CE.post("/users/registration",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(f=>{console.log(f)}).catch(f=>{if(f.response.status===400){console.log("It may be that Username already exists.");const a="Check if Username already exists. Please try entering a different email address.";n.textContent=a}else f.response?(console.log(f.response),console.log("server responded")):f.request?console.log("network error"):console.log(f)})};return Z.jsx("div",{children:Z.jsxs("form",{onSubmit:c,children:[Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"first_name",children:"First Name:"}),Z.jsx("input",{type:"text",name:"first_name",className:"first_name",id:"first_name",onChange:i})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"last_name",children:"Last Name:"}),Z.jsx("input",{type:"text",name:"last_name",className:"last_name",onChange:i})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"email",children:"Email:"}),Z.jsx("input",{type:"text",name:"email",className:"email",id:"email",onChange:i})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"address",children:"Address:"}),Z.jsx("input",{type:"text",name:"address",className:"address",id:"address",onChange:i})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"password",children:"Password:"}),Z.jsx("input",{type:"text",name:"password",className:"password",id:"password",onChange:i})]}),Z.jsx("div",{id:"error-message"}),Z.jsx("div",{className:"submit-container",children:Z.jsx(Iae,{type:"submit",className:"submit-button"})})]})})};const Aae=()=>{const[e,t]=K.useState({latitude:"",longitude:"",distance:"",hour:""}),n=c=>{t({...e,[c.target.name]:c.target.value})},i=c=>{c.preventDefault(),CE.post("/users",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(d=>{console.log(d.data)}).catch(d=>{d.response?(console.log(d.response),console.log("server responded")):d.request?console.log("network error"):console.log(d)})};return Z.jsxs("div",{className:"latlondis-area",children:[Z.jsx("h3",{children:"Route Planner Inputs"}),Z.jsxs("form",{onSubmit:i,children:[Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"latitude",children:"Starting Latitude:"}),Z.jsx("input",{type:"text",name:"latitude",onChange:n})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"longitude",children:"Starting Longitude:"}),Z.jsx("input",{type:"text",name:"longitude",onChange:n})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"distance",children:"Distance to walk:"}),Z.jsx("input",{type:"text",name:"distance",onChange:n})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"distance",children:"Hour (to start walk):"}),Z.jsx("input",{type:"text",name:"hour",onChange:n})]}),Z.jsx("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})};var gT={},Mae=eu;Object.defineProperty(gT,"__esModule",{value:!0});var BL=gT.default=void 0,Dae=Mae(tu()),Rae=Z,Oae=(0,Dae.default)((0,Rae.jsx)("path",{d:"M13 14v6c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1h-6c-.55 0-1 .45-1 1zm-9 7h6c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1zM3 4v6c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1zm12.95-1.6L11.7 6.64c-.39.39-.39 1.02 0 1.41l4.25 4.25c.39.39 1.02.39 1.41 0l4.25-4.25c.39-.39.39-1.02 0-1.41L17.37 2.4c-.39-.39-1.03-.39-1.42 0z"}),"WidgetsRounded");BL=gT.default=Oae;var _T={},Lae=eu;Object.defineProperty(_T,"__esModule",{value:!0});var C1=_T.default=void 0,zae=Lae(tu()),Nae=Z,Fae=(0,zae.default)((0,Nae.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");C1=_T.default=Fae;var yT={},Bae=eu;Object.defineProperty(yT,"__esModule",{value:!0});var jL=yT.default=void 0,jae=Bae(tu()),$ae=Z,Uae=(0,jae.default)((0,$ae.jsx)("path",{d:"m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zM7.88 8.75c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-2 11c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z"}),"StyleRounded");jL=yT.default=Uae;var vT={},Vae=eu;Object.defineProperty(vT,"__esModule",{value:!0});var $L=vT.default=void 0,Wae=Vae(tu()),Hae=Z,qae=(0,Wae.default)((0,Hae.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z"}),"PersonRounded");$L=vT.default=qae;function xT(){const[e,t]=K.useState(!1),[n,i]=K.useState(!1),c=K.useRef(null),d=K.useRef(null),[f,a]=K.useState(!1),v=()=>{document.querySelector(".additional-block-close-menubar").classList.add("hide"),document.querySelector(".overlay").classList.add("hide"),document.querySelector(".menu-bar").classList.add("hide"),document.querySelector(".additional-blocks-menubar").classList.add("hide"),document.querySelector(".additional-block-text-menubar").classList.add("hide")},S=()=>{document.querySelector(".additional-block-close-Reg-menu").classList.add("hide"),document.querySelector(".overlay-Reg").classList.add("hide"),document.querySelector(".Reg-menu").classList.add("hide"),document.querySelector(".additional-blocks-Reg").classList.add("hide"),document.querySelector(".additional-block-text-Reg").classList.add("hide")},M=()=>{v()},R=()=>{S()},N=()=>{t(!e)},W=()=>{n?(M(),setTimeout(()=>{i(!1)},1e3)):i(!0)},V=()=>{f?(R(),setTimeout(()=>{a(!1)},1e3)):a(!0)},H=le=>{c.current&&!c.current.contains(le.target)&&!d.current.contains(le.target)&&t(!1)};return K.useEffect(()=>(document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}),[]),Z.jsxs("div",{className:"menubar-container",children:[Z.jsx("div",{className:"menu-button-wrapper",children:Z.jsx(BL,{className:"menu-button",sx:{fontSize:24,color:"white"},onClick:W})}),Z.jsxs("div",{className:"profile-button-wrapper",children:[Z.jsx($L,{className:`profile-button ${e?"active":""}`,sx:{fontSize:25,color:"white"},onClick:N,ref:d}),e&&Z.jsxs("div",{className:"options-box",ref:c,children:[Z.jsxs("button",{className:"option",children:[" ",Z.jsx("span",{className:"option-text",onClick:V,children:"Sign Up"})]}),Z.jsx("button",{className:"option",children:Z.jsx("span",{className:"option-text",children:"Log In"})})]})]}),Z.jsx("div",{className:"history-button-wrapper",children:Z.jsx(jL,{className:"history-button",sx:{fontSize:25,color:"white"}})}),n&&Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{className:`menu-bar ${n?"show":""}`,children:[Z.jsxs("div",{className:"additional-blocks-menubar",children:[Z.jsx("div",{className:"additional-block-text-menubar",children:Z.jsx("span",{className:"text_bar_2-menubar",children:"Navigation"})}),Z.jsx("div",{className:"additional-block-close-menubar",children:Z.jsx(C1,{sx:{fontSize:27,color:"white"},onClick:W})})]}),Z.jsx("button",{className:"option-bottom-menu",children:"Home Page"}),Z.jsx("button",{className:"option-bottom-menu",children:"Plan Page"}),Z.jsx("button",{className:"option-bottom-menu",children:"Green Inform Page"}),Z.jsx("button",{className:"option-bottom-menu",children:"About"})]}),Z.jsx("div",{className:"overlay"})]}),f&&Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{className:`Reg-menu ${f?"show":""}`,children:[Z.jsxs("div",{className:"additional-blocks-Reg",children:[Z.jsx("div",{className:"additional-block-text-Reg",children:Z.jsx("span",{className:"text_bar_2-Reg",children:"Sign Up"})}),Z.jsx("div",{className:"additional-block-close-Reg-menu",children:Z.jsx(C1,{sx:{fontSize:27,color:"white"},onClick:V})})]}),Z.jsx(FL,{})]}),Z.jsx("div",{className:"overlay-Reg"})]})]})}var UL={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e){(function(t,n){e.exports=t.document?n(t,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return n(i)}})(typeof window<"u"?window:xn,function(t,n){var i=[],c=Object.getPrototypeOf,d=i.slice,f=i.flat?function(E){return i.flat.call(E)}:function(E){return i.concat.apply([],E)},a=i.push,v=i.indexOf,S={},M=S.toString,R=S.hasOwnProperty,N=R.toString,W=N.call(Object),V={},H=function(P){return typeof P=="function"&&typeof P.nodeType!="number"&&typeof P.item!="function"},le=function(P){return P!=null&&P===P.window},G=t.document,X={type:!0,src:!0,nonce:!0,noModule:!0};function Q(E,P,z){z=z||G;var $,te,ne=z.createElement("script");if(ne.text=E,P)for($ in X)te=P[$]||P.getAttribute&&P.getAttribute($),te&&ne.setAttribute($,te);z.head.appendChild(ne).parentNode.removeChild(ne)}function oe(E){return E==null?E+"":typeof E=="object"||typeof E=="function"?S[M.call(E)]||"object":typeof E}var he="3.7.0",be=/HTML$/i,A=function(E,P){return new A.fn.init(E,P)};A.fn=A.prototype={jquery:he,constructor:A,length:0,toArray:function(){return d.call(this)},get:function(E){return E==null?d.call(this):E<0?this[E+this.length]:this[E]},pushStack:function(E){var P=A.merge(this.constructor(),E);return P.prevObject=this,P},each:function(E){return A.each(this,E)},map:function(E){return this.pushStack(A.map(this,function(P,z){return E.call(P,z,P)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(E,P){return(P+1)%2}))},odd:function(){return this.pushStack(A.grep(this,function(E,P){return P%2}))},eq:function(E){var P=this.length,z=+E+(E<0?P:0);return this.pushStack(z>=0&&z<P?[this[z]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:i.sort,splice:i.splice},A.extend=A.fn.extend=function(){var E,P,z,$,te,ne,ae=arguments[0]||{},Be=1,ke=arguments.length,nt=!1;for(typeof ae=="boolean"&&(nt=ae,ae=arguments[Be]||{},Be++),typeof ae!="object"&&!H(ae)&&(ae={}),Be===ke&&(ae=this,Be--);Be<ke;Be++)if((E=arguments[Be])!=null)for(P in E)$=E[P],!(P==="__proto__"||ae===$)&&(nt&&$&&(A.isPlainObject($)||(te=Array.isArray($)))?(z=ae[P],te&&!Array.isArray(z)?ne=[]:!te&&!A.isPlainObject(z)?ne={}:ne=z,te=!1,ae[P]=A.extend(nt,ne,$)):$!==void 0&&(ae[P]=$));return ae},A.extend({expando:"jQuery"+(he+Math.random()).replace(/\D/g,""),isReady:!0,error:function(E){throw new Error(E)},noop:function(){},isPlainObject:function(E){var P,z;return!E||M.call(E)!=="[object Object]"?!1:(P=c(E),P?(z=R.call(P,"constructor")&&P.constructor,typeof z=="function"&&N.call(z)===W):!0)},isEmptyObject:function(E){var P;for(P in E)return!1;return!0},globalEval:function(E,P,z){Q(E,{nonce:P&&P.nonce},z)},each:function(E,P){var z,$=0;if(Re(E))for(z=E.length;$<z&&P.call(E[$],$,E[$])!==!1;$++);else for($ in E)if(P.call(E[$],$,E[$])===!1)break;return E},text:function(E){var P,z="",$=0,te=E.nodeType;if(te){if(te===1||te===9||te===11)return E.textContent;if(te===3||te===4)return E.nodeValue}else for(;P=E[$++];)z+=A.text(P);return z},makeArray:function(E,P){var z=P||[];return E!=null&&(Re(Object(E))?A.merge(z,typeof E=="string"?[E]:E):a.call(z,E)),z},inArray:function(E,P,z){return P==null?-1:v.call(P,E,z)},isXMLDoc:function(E){var P=E&&E.namespaceURI,z=E&&(E.ownerDocument||E).documentElement;return!be.test(P||z&&z.nodeName||"HTML")},merge:function(E,P){for(var z=+P.length,$=0,te=E.length;$<z;$++)E[te++]=P[$];return E.length=te,E},grep:function(E,P,z){for(var $,te=[],ne=0,ae=E.length,Be=!z;ne<ae;ne++)$=!P(E[ne],ne),$!==Be&&te.push(E[ne]);return te},map:function(E,P,z){var $,te,ne=0,ae=[];if(Re(E))for($=E.length;ne<$;ne++)te=P(E[ne],ne,z),te!=null&&ae.push(te);else for(ne in E)te=P(E[ne],ne,z),te!=null&&ae.push(te);return f(ae)},guid:1,support:V}),typeof Symbol=="function"&&(A.fn[Symbol.iterator]=i[Symbol.iterator]),A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(E,P){S["[object "+P+"]"]=P.toLowerCase()});function Re(E){var P=!!E&&"length"in E&&E.length,z=oe(E);return H(E)||le(E)?!1:z==="array"||P===0||typeof P=="number"&&P>0&&P-1 in E}function _e(E,P){return E.nodeName&&E.nodeName.toLowerCase()===P.toLowerCase()}var ze=i.pop,ot=i.sort,gt=i.splice,Ze="[\\x20\\t\\r\\n\\f]",We=new RegExp("^"+Ze+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ze+"+$","g");A.contains=function(E,P){var z=P&&P.parentNode;return E===z||!!(z&&z.nodeType===1&&(E.contains?E.contains(z):E.compareDocumentPosition&&E.compareDocumentPosition(z)&16))};var He=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function rt(E,P){return P?E==="\0"?"�":E.slice(0,-1)+"\\"+E.charCodeAt(E.length-1).toString(16)+" ":"\\"+E}A.escapeSelector=function(E){return(E+"").replace(He,rt)};var tt=G,Ne=a;(function(){var E,P,z,$,te,ne=Ne,ae,Be,ke,nt,wt,Lt=A.expando,_t=0,Qt=0,ir=gc(),Tr=gc(),mr=gc(),Ai=gc(),ei=function(Ce,Ke){return Ce===Ke&&(te=!0),0},xo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ta="(?:\\\\[\\da-fA-F]{1,6}"+Ze+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Sr="\\["+Ze+"*("+ta+")(?:"+Ze+"*([*^$|!~]?=)"+Ze+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ta+"))|)"+Ze+"*\\]",ja=":("+ta+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Sr+")*)|.*)\\)|)",Ir=new RegExp(Ze+"+","g"),mi=new RegExp("^"+Ze+"*,"+Ze+"*"),Zs=new RegExp("^"+Ze+"*([>+~]|"+Ze+")"+Ze+"*"),mc=new RegExp(Ze+"|>"),fa=new RegExp(ja),wr=new RegExp("^"+ta+"$"),Vo={ID:new RegExp("^#("+ta+")"),CLASS:new RegExp("^\\.("+ta+")"),TAG:new RegExp("^("+ta+"|[*])"),ATTR:new RegExp("^"+Sr),PSEUDO:new RegExp("^"+ja),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ze+"*(even|odd|(([+-]|)(\\d*)n|)"+Ze+"*(?:([+-]|)"+Ze+"*(\\d+)|))"+Ze+"*\\)|)","i"),bool:new RegExp("^(?:"+xo+")$","i"),needsContext:new RegExp("^"+Ze+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ze+"*((?:-\\d)?\\d*)"+Ze+"*\\)|)(?=[^-]|$)","i")},ws=/^(?:input|select|textarea|button)$/i,Ya=/^h\d$/i,na=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Es=/[+~]/,$a=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ze+"?|\\\\([^\\r\\n\\f])","g"),Ts=function(Ce,Ke){var pt="0x"+Ce.slice(1)-65536;return Ke||(pt<0?String.fromCharCode(pt+65536):String.fromCharCode(pt>>10|55296,pt&1023|56320))},am=function(){ga()},sm=yc(function(Ce){return Ce.disabled===!0&&_e(Ce,"fieldset")},{dir:"parentNode",next:"legend"});function _h(){try{return ae.activeElement}catch{}}try{ne.apply(i=d.call(tt.childNodes),tt.childNodes),i[tt.childNodes.length].nodeType}catch{ne={apply:function(Ke,pt){Ne.apply(Ke,d.call(pt))},call:function(Ke){Ne.apply(Ke,d.call(arguments,1))}}}function jr(Ce,Ke,pt,vt){var Mt,fn,Cn,Wn,Tn,kr,or,pr=Ke&&Ke.ownerDocument,Cr=Ke?Ke.nodeType:9;if(pt=pt||[],typeof Ce!="string"||!Ce||Cr!==1&&Cr!==9&&Cr!==11)return pt;if(!vt&&(ga(Ke),Ke=Ke||ae,ke)){if(Cr!==11&&(Tn=na.exec(Ce)))if(Mt=Tn[1]){if(Cr===9)if(Cn=Ke.getElementById(Mt)){if(Cn.id===Mt)return ne.call(pt,Cn),pt}else return pt;else if(pr&&(Cn=pr.getElementById(Mt))&&jr.contains(Ke,Cn)&&Cn.id===Mt)return ne.call(pt,Cn),pt}else{if(Tn[2])return ne.apply(pt,Ke.getElementsByTagName(Ce)),pt;if((Mt=Tn[3])&&Ke.getElementsByClassName)return ne.apply(pt,Ke.getElementsByClassName(Mt)),pt}if(!Ai[Ce+" "]&&(!nt||!nt.test(Ce))){if(or=Ce,pr=Ke,Cr===1&&(mc.test(Ce)||Zs.test(Ce))){for(pr=Es.test(Ce)&&cu(Ke.parentNode)||Ke,(pr!=Ke||!V.scope)&&((Wn=Ke.getAttribute("id"))?Wn=A.escapeSelector(Wn):Ke.setAttribute("id",Wn=Lt)),kr=ra(Ce),fn=kr.length;fn--;)kr[fn]=(Wn?"#"+Wn:":scope")+" "+Dl(kr[fn]);or=kr.join(",")}try{return ne.apply(pt,pr.querySelectorAll(or)),pt}catch{Ai(Ce,!0)}finally{Wn===Lt&&Ke.removeAttribute("id")}}}return vh(Ce.replace(We,"$1"),Ke,pt,vt)}function gc(){var Ce=[];function Ke(pt,vt){return Ce.push(pt+" ")>P.cacheLength&&delete Ke[Ce.shift()],Ke[pt+" "]=vt}return Ke}function Wo(Ce){return Ce[Lt]=!0,Ce}function Ml(Ce){var Ke=ae.createElement("fieldset");try{return!!Ce(Ke)}catch{return!1}finally{Ke.parentNode&&Ke.parentNode.removeChild(Ke),Ke=null}}function zp(Ce){return function(Ke){return _e(Ke,"input")&&Ke.type===Ce}}function lm(Ce){return function(Ke){return(_e(Ke,"input")||_e(Ke,"button"))&&Ke.type===Ce}}function _c(Ce){return function(Ke){return"form"in Ke?Ke.parentNode&&Ke.disabled===!1?"label"in Ke?"label"in Ke.parentNode?Ke.parentNode.disabled===Ce:Ke.disabled===Ce:Ke.isDisabled===Ce||Ke.isDisabled!==!Ce&&sm(Ke)===Ce:Ke.disabled===Ce:"label"in Ke?Ke.disabled===Ce:!1}}function ma(Ce){return Wo(function(Ke){return Ke=+Ke,Wo(function(pt,vt){for(var Mt,fn=Ce([],pt.length,Ke),Cn=fn.length;Cn--;)pt[Mt=fn[Cn]]&&(pt[Mt]=!(vt[Mt]=pt[Mt]))})})}function cu(Ce){return Ce&&typeof Ce.getElementsByTagName<"u"&&Ce}function ga(Ce){var Ke,pt=Ce?Ce.ownerDocument||Ce:tt;return pt==ae||pt.nodeType!==9||!pt.documentElement||(ae=pt,Be=ae.documentElement,ke=!A.isXMLDoc(ae),wt=Be.matches||Be.webkitMatchesSelector||Be.msMatchesSelector,tt!=ae&&(Ke=ae.defaultView)&&Ke.top!==Ke&&Ke.addEventListener("unload",am),V.getById=Ml(function(vt){return Be.appendChild(vt).id=A.expando,!ae.getElementsByName||!ae.getElementsByName(A.expando).length}),V.disconnectedMatch=Ml(function(vt){return wt.call(vt,"*")}),V.scope=Ml(function(){return ae.querySelectorAll(":scope")}),V.cssHas=Ml(function(){try{return ae.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),V.getById?(P.filter.ID=function(vt){var Mt=vt.replace($a,Ts);return function(fn){return fn.getAttribute("id")===Mt}},P.find.ID=function(vt,Mt){if(typeof Mt.getElementById<"u"&&ke){var fn=Mt.getElementById(vt);return fn?[fn]:[]}}):(P.filter.ID=function(vt){var Mt=vt.replace($a,Ts);return function(fn){var Cn=typeof fn.getAttributeNode<"u"&&fn.getAttributeNode("id");return Cn&&Cn.value===Mt}},P.find.ID=function(vt,Mt){if(typeof Mt.getElementById<"u"&&ke){var fn,Cn,Wn,Tn=Mt.getElementById(vt);if(Tn){if(fn=Tn.getAttributeNode("id"),fn&&fn.value===vt)return[Tn];for(Wn=Mt.getElementsByName(vt),Cn=0;Tn=Wn[Cn++];)if(fn=Tn.getAttributeNode("id"),fn&&fn.value===vt)return[Tn]}return[]}}),P.find.TAG=function(vt,Mt){return typeof Mt.getElementsByTagName<"u"?Mt.getElementsByTagName(vt):Mt.querySelectorAll(vt)},P.find.CLASS=function(vt,Mt){if(typeof Mt.getElementsByClassName<"u"&&ke)return Mt.getElementsByClassName(vt)},nt=[],Ml(function(vt){var Mt;Be.appendChild(vt).innerHTML="<a id='"+Lt+"' href='' disabled='disabled'></a><select id='"+Lt+"-\r\\' disabled='disabled'><option selected=''></option></select>",vt.querySelectorAll("[selected]").length||nt.push("\\["+Ze+"*(?:value|"+xo+")"),vt.querySelectorAll("[id~="+Lt+"-]").length||nt.push("~="),vt.querySelectorAll("a#"+Lt+"+*").length||nt.push(".#.+[+~]"),vt.querySelectorAll(":checked").length||nt.push(":checked"),Mt=ae.createElement("input"),Mt.setAttribute("type","hidden"),vt.appendChild(Mt).setAttribute("name","D"),Be.appendChild(vt).disabled=!0,vt.querySelectorAll(":disabled").length!==2&&nt.push(":enabled",":disabled"),Mt=ae.createElement("input"),Mt.setAttribute("name",""),vt.appendChild(Mt),vt.querySelectorAll("[name='']").length||nt.push("\\["+Ze+"*name"+Ze+"*="+Ze+`*(?:''|"")`)}),V.cssHas||nt.push(":has"),nt=nt.length&&new RegExp(nt.join("|")),ei=function(vt,Mt){if(vt===Mt)return te=!0,0;var fn=!vt.compareDocumentPosition-!Mt.compareDocumentPosition;return fn||(fn=(vt.ownerDocument||vt)==(Mt.ownerDocument||Mt)?vt.compareDocumentPosition(Mt):1,fn&1||!V.sortDetached&&Mt.compareDocumentPosition(vt)===fn?vt===ae||vt.ownerDocument==tt&&jr.contains(tt,vt)?-1:Mt===ae||Mt.ownerDocument==tt&&jr.contains(tt,Mt)?1:$?v.call($,vt)-v.call($,Mt):0:fn&4?-1:1)}),ae}jr.matches=function(Ce,Ke){return jr(Ce,null,null,Ke)},jr.matchesSelector=function(Ce,Ke){if(ga(Ce),ke&&!Ai[Ke+" "]&&(!nt||!nt.test(Ke)))try{var pt=wt.call(Ce,Ke);if(pt||V.disconnectedMatch||Ce.document&&Ce.document.nodeType!==11)return pt}catch{Ai(Ke,!0)}return jr(Ke,ae,null,[Ce]).length>0},jr.contains=function(Ce,Ke){return(Ce.ownerDocument||Ce)!=ae&&ga(Ce),A.contains(Ce,Ke)},jr.attr=function(Ce,Ke){(Ce.ownerDocument||Ce)!=ae&&ga(Ce);var pt=P.attrHandle[Ke.toLowerCase()],vt=pt&&R.call(P.attrHandle,Ke.toLowerCase())?pt(Ce,Ke,!ke):void 0;return vt!==void 0?vt:Ce.getAttribute(Ke)},jr.error=function(Ce){throw new Error("Syntax error, unrecognized expression: "+Ce)},A.uniqueSort=function(Ce){var Ke,pt=[],vt=0,Mt=0;if(te=!V.sortStable,$=!V.sortStable&&d.call(Ce,0),ot.call(Ce,ei),te){for(;Ke=Ce[Mt++];)Ke===Ce[Mt]&&(vt=pt.push(Mt));for(;vt--;)gt.call(Ce,pt[vt],1)}return $=null,Ce},A.fn.uniqueSort=function(){return this.pushStack(A.uniqueSort(d.apply(this)))},P=A.expr={cacheLength:50,createPseudo:Wo,match:Vo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ce){return Ce[1]=Ce[1].replace($a,Ts),Ce[3]=(Ce[3]||Ce[4]||Ce[5]||"").replace($a,Ts),Ce[2]==="~="&&(Ce[3]=" "+Ce[3]+" "),Ce.slice(0,4)},CHILD:function(Ce){return Ce[1]=Ce[1].toLowerCase(),Ce[1].slice(0,3)==="nth"?(Ce[3]||jr.error(Ce[0]),Ce[4]=+(Ce[4]?Ce[5]+(Ce[6]||1):2*(Ce[3]==="even"||Ce[3]==="odd")),Ce[5]=+(Ce[7]+Ce[8]||Ce[3]==="odd")):Ce[3]&&jr.error(Ce[0]),Ce},PSEUDO:function(Ce){var Ke,pt=!Ce[6]&&Ce[2];return Vo.CHILD.test(Ce[0])?null:(Ce[3]?Ce[2]=Ce[4]||Ce[5]||"":pt&&fa.test(pt)&&(Ke=ra(pt,!0))&&(Ke=pt.indexOf(")",pt.length-Ke)-pt.length)&&(Ce[0]=Ce[0].slice(0,Ke),Ce[2]=pt.slice(0,Ke)),Ce.slice(0,3))}},filter:{TAG:function(Ce){var Ke=Ce.replace($a,Ts).toLowerCase();return Ce==="*"?function(){return!0}:function(pt){return _e(pt,Ke)}},CLASS:function(Ce){var Ke=ir[Ce+" "];return Ke||(Ke=new RegExp("(^|"+Ze+")"+Ce+"("+Ze+"|$)"))&&ir(Ce,function(pt){return Ke.test(typeof pt.className=="string"&&pt.className||typeof pt.getAttribute<"u"&&pt.getAttribute("class")||"")})},ATTR:function(Ce,Ke,pt){return function(vt){var Mt=jr.attr(vt,Ce);return Mt==null?Ke==="!=":Ke?(Mt+="",Ke==="="?Mt===pt:Ke==="!="?Mt!==pt:Ke==="^="?pt&&Mt.indexOf(pt)===0:Ke==="*="?pt&&Mt.indexOf(pt)>-1:Ke==="$="?pt&&Mt.slice(-pt.length)===pt:Ke==="~="?(" "+Mt.replace(Ir," ")+" ").indexOf(pt)>-1:Ke==="|="?Mt===pt||Mt.slice(0,pt.length+1)===pt+"-":!1):!0}},CHILD:function(Ce,Ke,pt,vt,Mt){var fn=Ce.slice(0,3)!=="nth",Cn=Ce.slice(-4)!=="last",Wn=Ke==="of-type";return vt===1&&Mt===0?function(Tn){return!!Tn.parentNode}:function(Tn,kr,or){var pr,Cr,Jn,ti,go,Ri=fn!==Cn?"nextSibling":"previousSibling",ia=Tn.parentNode,Ua=Wn&&Tn.nodeName.toLowerCase(),Ho=!or&&!Wn,oo=!1;if(ia){if(fn){for(;Ri;){for(Jn=Tn;Jn=Jn[Ri];)if(Wn?_e(Jn,Ua):Jn.nodeType===1)return!1;go=Ri=Ce==="only"&&!go&&"nextSibling"}return!0}if(go=[Cn?ia.firstChild:ia.lastChild],Cn&&Ho){for(Cr=ia[Lt]||(ia[Lt]={}),pr=Cr[Ce]||[],ti=pr[0]===_t&&pr[1],oo=ti&&pr[2],Jn=ti&&ia.childNodes[ti];Jn=++ti&&Jn&&Jn[Ri]||(oo=ti=0)||go.pop();)if(Jn.nodeType===1&&++oo&&Jn===Tn){Cr[Ce]=[_t,ti,oo];break}}else if(Ho&&(Cr=Tn[Lt]||(Tn[Lt]={}),pr=Cr[Ce]||[],ti=pr[0]===_t&&pr[1],oo=ti),oo===!1)for(;(Jn=++ti&&Jn&&Jn[Ri]||(oo=ti=0)||go.pop())&&!((Wn?_e(Jn,Ua):Jn.nodeType===1)&&++oo&&(Ho&&(Cr=Jn[Lt]||(Jn[Lt]={}),Cr[Ce]=[_t,oo]),Jn===Tn)););return oo-=Mt,oo===vt||oo%vt===0&&oo/vt>=0}}},PSEUDO:function(Ce,Ke){var pt,vt=P.pseudos[Ce]||P.setFilters[Ce.toLowerCase()]||jr.error("unsupported pseudo: "+Ce);return vt[Lt]?vt(Ke):vt.length>1?(pt=[Ce,Ce,"",Ke],P.setFilters.hasOwnProperty(Ce.toLowerCase())?Wo(function(Mt,fn){for(var Cn,Wn=vt(Mt,Ke),Tn=Wn.length;Tn--;)Cn=v.call(Mt,Wn[Tn]),Mt[Cn]=!(fn[Cn]=Wn[Tn])}):function(Mt){return vt(Mt,0,pt)}):vt}},pseudos:{not:Wo(function(Ce){var Ke=[],pt=[],vt=Rl(Ce.replace(We,"$1"));return vt[Lt]?Wo(function(Mt,fn,Cn,Wn){for(var Tn,kr=vt(Mt,null,Wn,[]),or=Mt.length;or--;)(Tn=kr[or])&&(Mt[or]=!(fn[or]=Tn))}):function(Mt,fn,Cn){return Ke[0]=Mt,vt(Ke,null,Cn,pt),Ke[0]=null,!pt.pop()}}),has:Wo(function(Ce){return function(Ke){return jr(Ce,Ke).length>0}}),contains:Wo(function(Ce){return Ce=Ce.replace($a,Ts),function(Ke){return(Ke.textContent||A.text(Ke)).indexOf(Ce)>-1}}),lang:Wo(function(Ce){return wr.test(Ce||"")||jr.error("unsupported lang: "+Ce),Ce=Ce.replace($a,Ts).toLowerCase(),function(Ke){var pt;do if(pt=ke?Ke.lang:Ke.getAttribute("xml:lang")||Ke.getAttribute("lang"))return pt=pt.toLowerCase(),pt===Ce||pt.indexOf(Ce+"-")===0;while((Ke=Ke.parentNode)&&Ke.nodeType===1);return!1}}),target:function(Ce){var Ke=t.location&&t.location.hash;return Ke&&Ke.slice(1)===Ce.id},root:function(Ce){return Ce===Be},focus:function(Ce){return Ce===_h()&&ae.hasFocus()&&!!(Ce.type||Ce.href||~Ce.tabIndex)},enabled:_c(!1),disabled:_c(!0),checked:function(Ce){return _e(Ce,"input")&&!!Ce.checked||_e(Ce,"option")&&!!Ce.selected},selected:function(Ce){return Ce.parentNode&&Ce.parentNode.selectedIndex,Ce.selected===!0},empty:function(Ce){for(Ce=Ce.firstChild;Ce;Ce=Ce.nextSibling)if(Ce.nodeType<6)return!1;return!0},parent:function(Ce){return!P.pseudos.empty(Ce)},header:function(Ce){return Ya.test(Ce.nodeName)},input:function(Ce){return ws.test(Ce.nodeName)},button:function(Ce){return _e(Ce,"input")&&Ce.type==="button"||_e(Ce,"button")},text:function(Ce){var Ke;return _e(Ce,"input")&&Ce.type==="text"&&((Ke=Ce.getAttribute("type"))==null||Ke.toLowerCase()==="text")},first:ma(function(){return[0]}),last:ma(function(Ce,Ke){return[Ke-1]}),eq:ma(function(Ce,Ke,pt){return[pt<0?pt+Ke:pt]}),even:ma(function(Ce,Ke){for(var pt=0;pt<Ke;pt+=2)Ce.push(pt);return Ce}),odd:ma(function(Ce,Ke){for(var pt=1;pt<Ke;pt+=2)Ce.push(pt);return Ce}),lt:ma(function(Ce,Ke,pt){var vt;for(pt<0?vt=pt+Ke:pt>Ke?vt=Ke:vt=pt;--vt>=0;)Ce.push(vt);return Ce}),gt:ma(function(Ce,Ke,pt){for(var vt=pt<0?pt+Ke:pt;++vt<Ke;)Ce.push(vt);return Ce})}},P.pseudos.nth=P.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})P.pseudos[E]=zp(E);for(E in{submit:!0,reset:!0})P.pseudos[E]=lm(E);function Ju(){}Ju.prototype=P.filters=P.pseudos,P.setFilters=new Ju;function ra(Ce,Ke){var pt,vt,Mt,fn,Cn,Wn,Tn,kr=Tr[Ce+" "];if(kr)return Ke?0:kr.slice(0);for(Cn=Ce,Wn=[],Tn=P.preFilter;Cn;){(!pt||(vt=mi.exec(Cn)))&&(vt&&(Cn=Cn.slice(vt[0].length)||Cn),Wn.push(Mt=[])),pt=!1,(vt=Zs.exec(Cn))&&(pt=vt.shift(),Mt.push({value:pt,type:vt[0].replace(We," ")}),Cn=Cn.slice(pt.length));for(fn in P.filter)(vt=Vo[fn].exec(Cn))&&(!Tn[fn]||(vt=Tn[fn](vt)))&&(pt=vt.shift(),Mt.push({value:pt,type:fn,matches:vt}),Cn=Cn.slice(pt.length));if(!pt)break}return Ke?Cn.length:Cn?jr.error(Ce):Tr(Ce,Wn).slice(0)}function Dl(Ce){for(var Ke=0,pt=Ce.length,vt="";Ke<pt;Ke++)vt+=Ce[Ke].value;return vt}function yc(Ce,Ke,pt){var vt=Ke.dir,Mt=Ke.next,fn=Mt||vt,Cn=pt&&fn==="parentNode",Wn=Qt++;return Ke.first?function(Tn,kr,or){for(;Tn=Tn[vt];)if(Tn.nodeType===1||Cn)return Ce(Tn,kr,or);return!1}:function(Tn,kr,or){var pr,Cr,Jn=[_t,Wn];if(or){for(;Tn=Tn[vt];)if((Tn.nodeType===1||Cn)&&Ce(Tn,kr,or))return!0}else for(;Tn=Tn[vt];)if(Tn.nodeType===1||Cn)if(Cr=Tn[Lt]||(Tn[Lt]={}),Mt&&_e(Tn,Mt))Tn=Tn[vt]||Tn;else{if((pr=Cr[fn])&&pr[0]===_t&&pr[1]===Wn)return Jn[2]=pr[2];if(Cr[fn]=Jn,Jn[2]=Ce(Tn,kr,or))return!0}return!1}}function vc(Ce){return Ce.length>1?function(Ke,pt,vt){for(var Mt=Ce.length;Mt--;)if(!Ce[Mt](Ke,pt,vt))return!1;return!0}:Ce[0]}function Np(Ce,Ke,pt){for(var vt=0,Mt=Ke.length;vt<Mt;vt++)jr(Ce,Ke[vt],pt);return pt}function xc(Ce,Ke,pt,vt,Mt){for(var fn,Cn=[],Wn=0,Tn=Ce.length,kr=Ke!=null;Wn<Tn;Wn++)(fn=Ce[Wn])&&(!pt||pt(fn,vt,Mt))&&(Cn.push(fn),kr&&Ke.push(Wn));return Cn}function yh(Ce,Ke,pt,vt,Mt,fn){return vt&&!vt[Lt]&&(vt=yh(vt)),Mt&&!Mt[Lt]&&(Mt=yh(Mt,fn)),Wo(function(Cn,Wn,Tn,kr){var or,pr,Cr,Jn,ti=[],go=[],Ri=Wn.length,ia=Cn||Np(Ke||"*",Tn.nodeType?[Tn]:Tn,[]),Ua=Ce&&(Cn||!Ke)?xc(ia,ti,Ce,Tn,kr):ia;if(pt?(Jn=Mt||(Cn?Ce:Ri||vt)?[]:Wn,pt(Ua,Jn,Tn,kr)):Jn=Ua,vt)for(or=xc(Jn,go),vt(or,[],Tn,kr),pr=or.length;pr--;)(Cr=or[pr])&&(Jn[go[pr]]=!(Ua[go[pr]]=Cr));if(Cn){if(Mt||Ce){if(Mt){for(or=[],pr=Jn.length;pr--;)(Cr=Jn[pr])&&or.push(Ua[pr]=Cr);Mt(null,Jn=[],or,kr)}for(pr=Jn.length;pr--;)(Cr=Jn[pr])&&(or=Mt?v.call(Cn,Cr):ti[pr])>-1&&(Cn[or]=!(Wn[or]=Cr))}}else Jn=xc(Jn===Wn?Jn.splice(Ri,Jn.length):Jn),Mt?Mt(null,Wn,Jn,kr):ne.apply(Wn,Jn)})}function uu(Ce){for(var Ke,pt,vt,Mt=Ce.length,fn=P.relative[Ce[0].type],Cn=fn||P.relative[" "],Wn=fn?1:0,Tn=yc(function(pr){return pr===Ke},Cn,!0),kr=yc(function(pr){return v.call(Ke,pr)>-1},Cn,!0),or=[function(pr,Cr,Jn){var ti=!fn&&(Jn||Cr!=z)||((Ke=Cr).nodeType?Tn(pr,Cr,Jn):kr(pr,Cr,Jn));return Ke=null,ti}];Wn<Mt;Wn++)if(pt=P.relative[Ce[Wn].type])or=[yc(vc(or),pt)];else{if(pt=P.filter[Ce[Wn].type].apply(null,Ce[Wn].matches),pt[Lt]){for(vt=++Wn;vt<Mt&&!P.relative[Ce[vt].type];vt++);return yh(Wn>1&&vc(or),Wn>1&&Dl(Ce.slice(0,Wn-1).concat({value:Ce[Wn-2].type===" "?"*":""})).replace(We,"$1"),pt,Wn<vt&&uu(Ce.slice(Wn,vt)),vt<Mt&&uu(Ce=Ce.slice(vt)),vt<Mt&&Dl(Ce))}or.push(pt)}return vc(or)}function Qu(Ce,Ke){var pt=Ke.length>0,vt=Ce.length>0,Mt=function(fn,Cn,Wn,Tn,kr){var or,pr,Cr,Jn=0,ti="0",go=fn&&[],Ri=[],ia=z,Ua=fn||vt&&P.find.TAG("*",kr),Ho=_t+=ia==null?1:Math.random()||.1,oo=Ua.length;for(kr&&(z=Cn==ae||Cn||kr);ti!==oo&&(or=Ua[ti])!=null;ti++){if(vt&&or){for(pr=0,!Cn&&or.ownerDocument!=ae&&(ga(or),Wn=!ke);Cr=Ce[pr++];)if(Cr(or,Cn||ae,Wn)){ne.call(Tn,or);break}kr&&(_t=Ho)}pt&&((or=!Cr&&or)&&Jn--,fn&&go.push(or))}if(Jn+=ti,pt&&ti!==Jn){for(pr=0;Cr=Ke[pr++];)Cr(go,Ri,Cn,Wn);if(fn){if(Jn>0)for(;ti--;)go[ti]||Ri[ti]||(Ri[ti]=ze.call(Tn));Ri=xc(Ri)}ne.apply(Tn,Ri),kr&&!fn&&Ri.length>0&&Jn+Ke.length>1&&A.uniqueSort(Tn)}return kr&&(_t=Ho,z=ia),go};return pt?Wo(Mt):Mt}function Rl(Ce,Ke){var pt,vt=[],Mt=[],fn=mr[Ce+" "];if(!fn){for(Ke||(Ke=ra(Ce)),pt=Ke.length;pt--;)fn=uu(Ke[pt]),fn[Lt]?vt.push(fn):Mt.push(fn);fn=mr(Ce,Qu(Mt,vt)),fn.selector=Ce}return fn}function vh(Ce,Ke,pt,vt){var Mt,fn,Cn,Wn,Tn,kr=typeof Ce=="function"&&Ce,or=!vt&&ra(Ce=kr.selector||Ce);if(pt=pt||[],or.length===1){if(fn=or[0]=or[0].slice(0),fn.length>2&&(Cn=fn[0]).type==="ID"&&Ke.nodeType===9&&ke&&P.relative[fn[1].type]){if(Ke=(P.find.ID(Cn.matches[0].replace($a,Ts),Ke)||[])[0],Ke)kr&&(Ke=Ke.parentNode);else return pt;Ce=Ce.slice(fn.shift().value.length)}for(Mt=Vo.needsContext.test(Ce)?0:fn.length;Mt--&&(Cn=fn[Mt],!P.relative[Wn=Cn.type]);)if((Tn=P.find[Wn])&&(vt=Tn(Cn.matches[0].replace($a,Ts),Es.test(fn[0].type)&&cu(Ke.parentNode)||Ke))){if(fn.splice(Mt,1),Ce=vt.length&&Dl(fn),!Ce)return ne.apply(pt,vt),pt;break}}return(kr||Rl(Ce,or))(vt,Ke,!ke,pt,!Ke||Es.test(Ce)&&cu(Ke.parentNode)||Ke),pt}V.sortStable=Lt.split("").sort(ei).join("")===Lt,ga(),V.sortDetached=Ml(function(Ce){return Ce.compareDocumentPosition(ae.createElement("fieldset"))&1}),A.find=jr,A.expr[":"]=A.expr.pseudos,A.unique=A.uniqueSort,jr.compile=Rl,jr.select=vh,jr.setDocument=ga,jr.escape=A.escapeSelector,jr.getText=A.text,jr.isXML=A.isXMLDoc,jr.selectors=A.expr,jr.support=A.support,jr.uniqueSort=A.uniqueSort})();var et=function(E,P,z){for(var $=[],te=z!==void 0;(E=E[P])&&E.nodeType!==9;)if(E.nodeType===1){if(te&&A(E).is(z))break;$.push(E)}return $},it=function(E,P){for(var z=[];E;E=E.nextSibling)E.nodeType===1&&E!==P&&z.push(E);return z},Dt=A.expr.match.needsContext,Tt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Rt(E,P,z){return H(P)?A.grep(E,function($,te){return!!P.call($,te,$)!==z}):P.nodeType?A.grep(E,function($){return $===P!==z}):typeof P!="string"?A.grep(E,function($){return v.call(P,$)>-1!==z}):A.filter(P,E,z)}A.filter=function(E,P,z){var $=P[0];return z&&(E=":not("+E+")"),P.length===1&&$.nodeType===1?A.find.matchesSelector($,E)?[$]:[]:A.find.matches(E,A.grep(P,function(te){return te.nodeType===1}))},A.fn.extend({find:function(E){var P,z,$=this.length,te=this;if(typeof E!="string")return this.pushStack(A(E).filter(function(){for(P=0;P<$;P++)if(A.contains(te[P],this))return!0}));for(z=this.pushStack([]),P=0;P<$;P++)A.find(E,te[P],z);return $>1?A.uniqueSort(z):z},filter:function(E){return this.pushStack(Rt(this,E||[],!1))},not:function(E){return this.pushStack(Rt(this,E||[],!0))},is:function(E){return!!Rt(this,typeof E=="string"&&Dt.test(E)?A(E):E||[],!1).length}});var Yt,tn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,dn=A.fn.init=function(E,P,z){var $,te;if(!E)return this;if(z=z||Yt,typeof E=="string")if(E[0]==="<"&&E[E.length-1]===">"&&E.length>=3?$=[null,E,null]:$=tn.exec(E),$&&($[1]||!P))if($[1]){if(P=P instanceof A?P[0]:P,A.merge(this,A.parseHTML($[1],P&&P.nodeType?P.ownerDocument||P:G,!0)),Tt.test($[1])&&A.isPlainObject(P))for($ in P)H(this[$])?this[$](P[$]):this.attr($,P[$]);return this}else return te=G.getElementById($[2]),te&&(this[0]=te,this.length=1),this;else return!P||P.jquery?(P||z).find(E):this.constructor(P).find(E);else{if(E.nodeType)return this[0]=E,this.length=1,this;if(H(E))return z.ready!==void 0?z.ready(E):E(A)}return A.makeArray(E,this)};dn.prototype=A.fn,Yt=A(G);var _n=/^(?:parents|prev(?:Until|All))/,In={children:!0,contents:!0,next:!0,prev:!0};A.fn.extend({has:function(E){var P=A(E,this),z=P.length;return this.filter(function(){for(var $=0;$<z;$++)if(A.contains(this,P[$]))return!0})},closest:function(E,P){var z,$=0,te=this.length,ne=[],ae=typeof E!="string"&&A(E);if(!Dt.test(E)){for(;$<te;$++)for(z=this[$];z&&z!==P;z=z.parentNode)if(z.nodeType<11&&(ae?ae.index(z)>-1:z.nodeType===1&&A.find.matchesSelector(z,E))){ne.push(z);break}}return this.pushStack(ne.length>1?A.uniqueSort(ne):ne)},index:function(E){return E?typeof E=="string"?v.call(A(E),this[0]):v.call(this,E.jquery?E[0]:E):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(E,P){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(E,P))))},addBack:function(E){return this.add(E==null?this.prevObject:this.prevObject.filter(E))}});function Jt(E,P){for(;(E=E[P])&&E.nodeType!==1;);return E}A.each({parent:function(E){var P=E.parentNode;return P&&P.nodeType!==11?P:null},parents:function(E){return et(E,"parentNode")},parentsUntil:function(E,P,z){return et(E,"parentNode",z)},next:function(E){return Jt(E,"nextSibling")},prev:function(E){return Jt(E,"previousSibling")},nextAll:function(E){return et(E,"nextSibling")},prevAll:function(E){return et(E,"previousSibling")},nextUntil:function(E,P,z){return et(E,"nextSibling",z)},prevUntil:function(E,P,z){return et(E,"previousSibling",z)},siblings:function(E){return it((E.parentNode||{}).firstChild,E)},children:function(E){return it(E.firstChild)},contents:function(E){return E.contentDocument!=null&&c(E.contentDocument)?E.contentDocument:(_e(E,"template")&&(E=E.content||E),A.merge([],E.childNodes))}},function(E,P){A.fn[E]=function(z,$){var te=A.map(this,P,z);return E.slice(-5)!=="Until"&&($=z),$&&typeof $=="string"&&(te=A.filter($,te)),this.length>1&&(In[E]||A.uniqueSort(te),_n.test(E)&&te.reverse()),this.pushStack(te)}});var vn=/[^\x20\t\r\n\f]+/g;function Ft(E){var P={};return A.each(E.match(vn)||[],function(z,$){P[$]=!0}),P}A.Callbacks=function(E){E=typeof E=="string"?Ft(E):A.extend({},E);var P,z,$,te,ne=[],ae=[],Be=-1,ke=function(){for(te=te||E.once,$=P=!0;ae.length;Be=-1)for(z=ae.shift();++Be<ne.length;)ne[Be].apply(z[0],z[1])===!1&&E.stopOnFalse&&(Be=ne.length,z=!1);E.memory||(z=!1),P=!1,te&&(z?ne=[]:ne="")},nt={add:function(){return ne&&(z&&!P&&(Be=ne.length-1,ae.push(z)),function wt(Lt){A.each(Lt,function(_t,Qt){H(Qt)?(!E.unique||!nt.has(Qt))&&ne.push(Qt):Qt&&Qt.length&&oe(Qt)!=="string"&&wt(Qt)})}(arguments),z&&!P&&ke()),this},remove:function(){return A.each(arguments,function(wt,Lt){for(var _t;(_t=A.inArray(Lt,ne,_t))>-1;)ne.splice(_t,1),_t<=Be&&Be--}),this},has:function(wt){return wt?A.inArray(wt,ne)>-1:ne.length>0},empty:function(){return ne&&(ne=[]),this},disable:function(){return te=ae=[],ne=z="",this},disabled:function(){return!ne},lock:function(){return te=ae=[],!z&&!P&&(ne=z=""),this},locked:function(){return!!te},fireWith:function(wt,Lt){return te||(Lt=Lt||[],Lt=[wt,Lt.slice?Lt.slice():Lt],ae.push(Lt),P||ke()),this},fire:function(){return nt.fireWith(this,arguments),this},fired:function(){return!!$}};return nt};function nn(E){return E}function En(E){throw E}function Zt(E,P,z,$){var te;try{E&&H(te=E.promise)?te.call(E).done(P).fail(z):E&&H(te=E.then)?te.call(E,P,z):P.apply(void 0,[E].slice($))}catch(ne){z.apply(void 0,[ne])}}A.extend({Deferred:function(E){var P=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],z="pending",$={state:function(){return z},always:function(){return te.done(arguments).fail(arguments),this},catch:function(ne){return $.then(null,ne)},pipe:function(){var ne=arguments;return A.Deferred(function(ae){A.each(P,function(Be,ke){var nt=H(ne[ke[4]])&&ne[ke[4]];te[ke[1]](function(){var wt=nt&&nt.apply(this,arguments);wt&&H(wt.promise)?wt.promise().progress(ae.notify).done(ae.resolve).fail(ae.reject):ae[ke[0]+"With"](this,nt?[wt]:arguments)})}),ne=null}).promise()},then:function(ne,ae,Be){var ke=0;function nt(wt,Lt,_t,Qt){return function(){var ir=this,Tr=arguments,mr=function(){var ei,xo;if(!(wt<ke)){if(ei=_t.apply(ir,Tr),ei===Lt.promise())throw new TypeError("Thenable self-resolution");xo=ei&&(typeof ei=="object"||typeof ei=="function")&&ei.then,H(xo)?Qt?xo.call(ei,nt(ke,Lt,nn,Qt),nt(ke,Lt,En,Qt)):(ke++,xo.call(ei,nt(ke,Lt,nn,Qt),nt(ke,Lt,En,Qt),nt(ke,Lt,nn,Lt.notifyWith))):(_t!==nn&&(ir=void 0,Tr=[ei]),(Qt||Lt.resolveWith)(ir,Tr))}},Ai=Qt?mr:function(){try{mr()}catch(ei){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(ei,Ai.error),wt+1>=ke&&(_t!==En&&(ir=void 0,Tr=[ei]),Lt.rejectWith(ir,Tr))}};wt?Ai():(A.Deferred.getErrorHook?Ai.error=A.Deferred.getErrorHook():A.Deferred.getStackHook&&(Ai.error=A.Deferred.getStackHook()),t.setTimeout(Ai))}}return A.Deferred(function(wt){P[0][3].add(nt(0,wt,H(Be)?Be:nn,wt.notifyWith)),P[1][3].add(nt(0,wt,H(ne)?ne:nn)),P[2][3].add(nt(0,wt,H(ae)?ae:En))}).promise()},promise:function(ne){return ne!=null?A.extend(ne,$):$}},te={};return A.each(P,function(ne,ae){var Be=ae[2],ke=ae[5];$[ae[1]]=Be.add,ke&&Be.add(function(){z=ke},P[3-ne][2].disable,P[3-ne][3].disable,P[0][2].lock,P[0][3].lock),Be.add(ae[3].fire),te[ae[0]]=function(){return te[ae[0]+"With"](this===te?void 0:this,arguments),this},te[ae[0]+"With"]=Be.fireWith}),$.promise(te),E&&E.call(te,te),te},when:function(E){var P=arguments.length,z=P,$=Array(z),te=d.call(arguments),ne=A.Deferred(),ae=function(Be){return function(ke){$[Be]=this,te[Be]=arguments.length>1?d.call(arguments):ke,--P||ne.resolveWith($,te)}};if(P<=1&&(Zt(E,ne.done(ae(z)).resolve,ne.reject,!P),ne.state()==="pending"||H(te[z]&&te[z].then)))return ne.then();for(;z--;)Zt(te[z],ae(z),ne.reject);return ne.promise()}});var Ct=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(E,P){t.console&&t.console.warn&&E&&Ct.test(E.name)&&t.console.warn("jQuery.Deferred exception: "+E.message,E.stack,P)},A.readyException=function(E){t.setTimeout(function(){throw E})};var On=A.Deferred();A.fn.ready=function(E){return On.then(E).catch(function(P){A.readyException(P)}),this},A.extend({isReady:!1,readyWait:1,ready:function(E){(E===!0?--A.readyWait:A.isReady)||(A.isReady=!0,!(E!==!0&&--A.readyWait>0)&&On.resolveWith(G,[A]))}}),A.ready.then=On.then;function an(){G.removeEventListener("DOMContentLoaded",an),t.removeEventListener("load",an),A.ready()}G.readyState==="complete"||G.readyState!=="loading"&&!G.documentElement.doScroll?t.setTimeout(A.ready):(G.addEventListener("DOMContentLoaded",an),t.addEventListener("load",an));var Zn=function(E,P,z,$,te,ne,ae){var Be=0,ke=E.length,nt=z==null;if(oe(z)==="object"){te=!0;for(Be in z)Zn(E,P,Be,z[Be],!0,ne,ae)}else if($!==void 0&&(te=!0,H($)||(ae=!0),nt&&(ae?(P.call(E,$),P=null):(nt=P,P=function(wt,Lt,_t){return nt.call(A(wt),_t)})),P))for(;Be<ke;Be++)P(E[Be],z,ae?$:$.call(E[Be],Be,P(E[Be],z)));return te?E:nt?P.call(E):ke?P(E[0],z):ne},tr=/^-ms-/,Nn=/-([a-z])/g;function Yn(E,P){return P.toUpperCase()}function Un(E){return E.replace(tr,"ms-").replace(Nn,Yn)}var qn=function(E){return E.nodeType===1||E.nodeType===9||!+E.nodeType};function bn(){this.expando=A.expando+bn.uid++}bn.uid=1,bn.prototype={cache:function(E){var P=E[this.expando];return P||(P={},qn(E)&&(E.nodeType?E[this.expando]=P:Object.defineProperty(E,this.expando,{value:P,configurable:!0}))),P},set:function(E,P,z){var $,te=this.cache(E);if(typeof P=="string")te[Un(P)]=z;else for($ in P)te[Un($)]=P[$];return te},get:function(E,P){return P===void 0?this.cache(E):E[this.expando]&&E[this.expando][Un(P)]},access:function(E,P,z){return P===void 0||P&&typeof P=="string"&&z===void 0?this.get(E,P):(this.set(E,P,z),z!==void 0?z:P)},remove:function(E,P){var z,$=E[this.expando];if($!==void 0){if(P!==void 0)for(Array.isArray(P)?P=P.map(Un):(P=Un(P),P=P in $?[P]:P.match(vn)||[]),z=P.length;z--;)delete $[P[z]];(P===void 0||A.isEmptyObject($))&&(E.nodeType?E[this.expando]=void 0:delete E[this.expando])}},hasData:function(E){var P=E[this.expando];return P!==void 0&&!A.isEmptyObject(P)}};var Ye=new bn,Xt=new bn,rn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qt=/[A-Z]/g;function en(E){return E==="true"?!0:E==="false"?!1:E==="null"?null:E===+E+""?+E:rn.test(E)?JSON.parse(E):E}function on(E,P,z){var $;if(z===void 0&&E.nodeType===1)if($="data-"+P.replace(qt,"-$&").toLowerCase(),z=E.getAttribute($),typeof z=="string"){try{z=en(z)}catch{}Xt.set(E,P,z)}else z=void 0;return z}A.extend({hasData:function(E){return Xt.hasData(E)||Ye.hasData(E)},data:function(E,P,z){return Xt.access(E,P,z)},removeData:function(E,P){Xt.remove(E,P)},_data:function(E,P,z){return Ye.access(E,P,z)},_removeData:function(E,P){Ye.remove(E,P)}}),A.fn.extend({data:function(E,P){var z,$,te,ne=this[0],ae=ne&&ne.attributes;if(E===void 0){if(this.length&&(te=Xt.get(ne),ne.nodeType===1&&!Ye.get(ne,"hasDataAttrs"))){for(z=ae.length;z--;)ae[z]&&($=ae[z].name,$.indexOf("data-")===0&&($=Un($.slice(5)),on(ne,$,te[$])));Ye.set(ne,"hasDataAttrs",!0)}return te}return typeof E=="object"?this.each(function(){Xt.set(this,E)}):Zn(this,function(Be){var ke;if(ne&&Be===void 0)return ke=Xt.get(ne,E),ke!==void 0||(ke=on(ne,E),ke!==void 0)?ke:void 0;this.each(function(){Xt.set(this,E,Be)})},null,P,arguments.length>1,null,!0)},removeData:function(E){return this.each(function(){Xt.remove(this,E)})}}),A.extend({queue:function(E,P,z){var $;if(E)return P=(P||"fx")+"queue",$=Ye.get(E,P),z&&(!$||Array.isArray(z)?$=Ye.access(E,P,A.makeArray(z)):$.push(z)),$||[]},dequeue:function(E,P){P=P||"fx";var z=A.queue(E,P),$=z.length,te=z.shift(),ne=A._queueHooks(E,P),ae=function(){A.dequeue(E,P)};te==="inprogress"&&(te=z.shift(),$--),te&&(P==="fx"&&z.unshift("inprogress"),delete ne.stop,te.call(E,ae,ne)),!$&&ne&&ne.empty.fire()},_queueHooks:function(E,P){var z=P+"queueHooks";return Ye.get(E,z)||Ye.access(E,z,{empty:A.Callbacks("once memory").add(function(){Ye.remove(E,[P+"queue",z])})})}}),A.fn.extend({queue:function(E,P){var z=2;return typeof E!="string"&&(P=E,E="fx",z--),arguments.length<z?A.queue(this[0],E):P===void 0?this:this.each(function(){var $=A.queue(this,E,P);A._queueHooks(this,E),E==="fx"&&$[0]!=="inprogress"&&A.dequeue(this,E)})},dequeue:function(E){return this.each(function(){A.dequeue(this,E)})},clearQueue:function(E){return this.queue(E||"fx",[])},promise:function(E,P){var z,$=1,te=A.Deferred(),ne=this,ae=this.length,Be=function(){--$||te.resolveWith(ne,[ne])};for(typeof E!="string"&&(P=E,E=void 0),E=E||"fx";ae--;)z=Ye.get(ne[ae],E+"queueHooks"),z&&z.empty&&($++,z.empty.add(Be));return Be(),te.promise(P)}});var yn=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Dn=new RegExp("^(?:([+-])=|)("+yn+")([a-z%]*)$","i"),Fn=["Top","Right","Bottom","Left"],nr=G.documentElement,Ar=function(E){return A.contains(E.ownerDocument,E)},gr={composed:!0};nr.getRootNode&&(Ar=function(E){return A.contains(E.ownerDocument,E)||E.getRootNode(gr)===E.ownerDocument});var vi=function(E,P){return E=P||E,E.style.display==="none"||E.style.display===""&&Ar(E)&&A.css(E,"display")==="none"};function di(E,P,z,$){var te,ne,ae=20,Be=$?function(){return $.cur()}:function(){return A.css(E,P,"")},ke=Be(),nt=z&&z[3]||(A.cssNumber[P]?"":"px"),wt=E.nodeType&&(A.cssNumber[P]||nt!=="px"&&+ke)&&Dn.exec(A.css(E,P));if(wt&&wt[3]!==nt){for(ke=ke/2,nt=nt||wt[3],wt=+ke||1;ae--;)A.style(E,P,wt+nt),(1-ne)*(1-(ne=Be()/ke||.5))<=0&&(ae=0),wt=wt/ne;wt=wt*2,A.style(E,P,wt+nt),z=z||[]}return z&&(wt=+wt||+ke||0,te=z[1]?wt+(z[1]+1)*z[2]:+z[2],$&&($.unit=nt,$.start=wt,$.end=te)),te}var Te={};function re(E){var P,z=E.ownerDocument,$=E.nodeName,te=Te[$];return te||(P=z.body.appendChild(z.createElement($)),te=A.css(P,"display"),P.parentNode.removeChild(P),te==="none"&&(te="block"),Te[$]=te,te)}function ie(E,P){for(var z,$,te=[],ne=0,ae=E.length;ne<ae;ne++)$=E[ne],$.style&&(z=$.style.display,P?(z==="none"&&(te[ne]=Ye.get($,"display")||null,te[ne]||($.style.display="")),$.style.display===""&&vi($)&&(te[ne]=re($))):z!=="none"&&(te[ne]="none",Ye.set($,"display",z)));for(ne=0;ne<ae;ne++)te[ne]!=null&&(E[ne].style.display=te[ne]);return E}A.fn.extend({show:function(){return ie(this,!0)},hide:function(){return ie(this)},toggle:function(E){return typeof E=="boolean"?E?this.show():this.hide():this.each(function(){vi(this)?A(this).show():A(this).hide()})}});var me=/^(?:checkbox|radio)$/i,Me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,De=/^$|^module$|\/(?:java|ecma)script/i;(function(){var E=G.createDocumentFragment(),P=E.appendChild(G.createElement("div")),z=G.createElement("input");z.setAttribute("type","radio"),z.setAttribute("checked","checked"),z.setAttribute("name","t"),P.appendChild(z),V.checkClone=P.cloneNode(!0).cloneNode(!0).lastChild.checked,P.innerHTML="<textarea>x</textarea>",V.noCloneChecked=!!P.cloneNode(!0).lastChild.defaultValue,P.innerHTML="<option></option>",V.option=!!P.lastChild})();var qe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td,V.option||(qe.optgroup=qe.option=[1,"<select multiple='multiple'>","</select>"]);function Xe(E,P){var z;return typeof E.getElementsByTagName<"u"?z=E.getElementsByTagName(P||"*"):typeof E.querySelectorAll<"u"?z=E.querySelectorAll(P||"*"):z=[],P===void 0||P&&_e(E,P)?A.merge([E],z):z}function je(E,P){for(var z=0,$=E.length;z<$;z++)Ye.set(E[z],"globalEval",!P||Ye.get(P[z],"globalEval"))}var Fe=/<|&#?\w+;/;function ct(E,P,z,$,te){for(var ne,ae,Be,ke,nt,wt,Lt=P.createDocumentFragment(),_t=[],Qt=0,ir=E.length;Qt<ir;Qt++)if(ne=E[Qt],ne||ne===0)if(oe(ne)==="object")A.merge(_t,ne.nodeType?[ne]:ne);else if(!Fe.test(ne))_t.push(P.createTextNode(ne));else{for(ae=ae||Lt.appendChild(P.createElement("div")),Be=(Me.exec(ne)||["",""])[1].toLowerCase(),ke=qe[Be]||qe._default,ae.innerHTML=ke[1]+A.htmlPrefilter(ne)+ke[2],wt=ke[0];wt--;)ae=ae.lastChild;A.merge(_t,ae.childNodes),ae=Lt.firstChild,ae.textContent=""}for(Lt.textContent="",Qt=0;ne=_t[Qt++];){if($&&A.inArray(ne,$)>-1){te&&te.push(ne);continue}if(nt=Ar(ne),ae=Xe(Lt.appendChild(ne),"script"),nt&&je(ae),z)for(wt=0;ne=ae[wt++];)De.test(ne.type||"")&&z.push(ne)}return Lt}var Pt=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function mn(){return!1}function Rn(E,P,z,$,te,ne){var ae,Be;if(typeof P=="object"){typeof z!="string"&&($=$||z,z=void 0);for(Be in P)Rn(E,Be,z,$,P[Be],ne);return E}if($==null&&te==null?(te=z,$=z=void 0):te==null&&(typeof z=="string"?(te=$,$=void 0):(te=$,$=z,z=void 0)),te===!1)te=mn;else if(!te)return E;return ne===1&&(ae=te,te=function(ke){return A().off(ke),ae.apply(this,arguments)},te.guid=ae.guid||(ae.guid=A.guid++)),E.each(function(){A.event.add(this,P,te,$,z)})}A.event={global:{},add:function(E,P,z,$,te){var ne,ae,Be,ke,nt,wt,Lt,_t,Qt,ir,Tr,mr=Ye.get(E);if(qn(E))for(z.handler&&(ne=z,z=ne.handler,te=ne.selector),te&&A.find.matchesSelector(nr,te),z.guid||(z.guid=A.guid++),(ke=mr.events)||(ke=mr.events=Object.create(null)),(ae=mr.handle)||(ae=mr.handle=function(Ai){return typeof A<"u"&&A.event.triggered!==Ai.type?A.event.dispatch.apply(E,arguments):void 0}),P=(P||"").match(vn)||[""],nt=P.length;nt--;)Be=Pt.exec(P[nt])||[],Qt=Tr=Be[1],ir=(Be[2]||"").split(".").sort(),Qt&&(Lt=A.event.special[Qt]||{},Qt=(te?Lt.delegateType:Lt.bindType)||Qt,Lt=A.event.special[Qt]||{},wt=A.extend({type:Qt,origType:Tr,data:$,handler:z,guid:z.guid,selector:te,needsContext:te&&A.expr.match.needsContext.test(te),namespace:ir.join(".")},ne),(_t=ke[Qt])||(_t=ke[Qt]=[],_t.delegateCount=0,(!Lt.setup||Lt.setup.call(E,$,ir,ae)===!1)&&E.addEventListener&&E.addEventListener(Qt,ae)),Lt.add&&(Lt.add.call(E,wt),wt.handler.guid||(wt.handler.guid=z.guid)),te?_t.splice(_t.delegateCount++,0,wt):_t.push(wt),A.event.global[Qt]=!0)},remove:function(E,P,z,$,te){var ne,ae,Be,ke,nt,wt,Lt,_t,Qt,ir,Tr,mr=Ye.hasData(E)&&Ye.get(E);if(!(!mr||!(ke=mr.events))){for(P=(P||"").match(vn)||[""],nt=P.length;nt--;){if(Be=Pt.exec(P[nt])||[],Qt=Tr=Be[1],ir=(Be[2]||"").split(".").sort(),!Qt){for(Qt in ke)A.event.remove(E,Qt+P[nt],z,$,!0);continue}for(Lt=A.event.special[Qt]||{},Qt=($?Lt.delegateType:Lt.bindType)||Qt,_t=ke[Qt]||[],Be=Be[2]&&new RegExp("(^|\\.)"+ir.join("\\.(?:.*\\.|)")+"(\\.|$)"),ae=ne=_t.length;ne--;)wt=_t[ne],(te||Tr===wt.origType)&&(!z||z.guid===wt.guid)&&(!Be||Be.test(wt.namespace))&&(!$||$===wt.selector||$==="**"&&wt.selector)&&(_t.splice(ne,1),wt.selector&&_t.delegateCount--,Lt.remove&&Lt.remove.call(E,wt));ae&&!_t.length&&((!Lt.teardown||Lt.teardown.call(E,ir,mr.handle)===!1)&&A.removeEvent(E,Qt,mr.handle),delete ke[Qt])}A.isEmptyObject(ke)&&Ye.remove(E,"handle events")}},dispatch:function(E){var P,z,$,te,ne,ae,Be=new Array(arguments.length),ke=A.event.fix(E),nt=(Ye.get(this,"events")||Object.create(null))[ke.type]||[],wt=A.event.special[ke.type]||{};for(Be[0]=ke,P=1;P<arguments.length;P++)Be[P]=arguments[P];if(ke.delegateTarget=this,!(wt.preDispatch&&wt.preDispatch.call(this,ke)===!1)){for(ae=A.event.handlers.call(this,ke,nt),P=0;(te=ae[P++])&&!ke.isPropagationStopped();)for(ke.currentTarget=te.elem,z=0;(ne=te.handlers[z++])&&!ke.isImmediatePropagationStopped();)(!ke.rnamespace||ne.namespace===!1||ke.rnamespace.test(ne.namespace))&&(ke.handleObj=ne,ke.data=ne.data,$=((A.event.special[ne.origType]||{}).handle||ne.handler).apply(te.elem,Be),$!==void 0&&(ke.result=$)===!1&&(ke.preventDefault(),ke.stopPropagation()));return wt.postDispatch&&wt.postDispatch.call(this,ke),ke.result}},handlers:function(E,P){var z,$,te,ne,ae,Be=[],ke=P.delegateCount,nt=E.target;if(ke&&nt.nodeType&&!(E.type==="click"&&E.button>=1)){for(;nt!==this;nt=nt.parentNode||this)if(nt.nodeType===1&&!(E.type==="click"&&nt.disabled===!0)){for(ne=[],ae={},z=0;z<ke;z++)$=P[z],te=$.selector+" ",ae[te]===void 0&&(ae[te]=$.needsContext?A(te,this).index(nt)>-1:A.find(te,this,null,[nt]).length),ae[te]&&ne.push($);ne.length&&Be.push({elem:nt,handlers:ne})}}return nt=this,ke<P.length&&Be.push({elem:nt,handlers:P.slice(ke)}),Be},addProp:function(E,P){Object.defineProperty(A.Event.prototype,E,{enumerable:!0,configurable:!0,get:H(P)?function(){if(this.originalEvent)return P(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[E]},set:function(z){Object.defineProperty(this,E,{enumerable:!0,configurable:!0,writable:!0,value:z})}})},fix:function(E){return E[A.expando]?E:new A.Event(E)},special:{load:{noBubble:!0},click:{setup:function(E){var P=this||E;return me.test(P.type)&&P.click&&_e(P,"input")&&An(P,"click",!0),!1},trigger:function(E){var P=this||E;return me.test(P.type)&&P.click&&_e(P,"input")&&An(P,"click"),!0},_default:function(E){var P=E.target;return me.test(P.type)&&P.click&&_e(P,"input")&&Ye.get(P,"click")||_e(P,"a")}},beforeunload:{postDispatch:function(E){E.result!==void 0&&E.originalEvent&&(E.originalEvent.returnValue=E.result)}}}};function An(E,P,z){if(!z){Ye.get(E,P)===void 0&&A.event.add(E,P,Et);return}Ye.set(E,P,!1),A.event.add(E,P,{namespace:!1,handler:function($){var te,ne=Ye.get(this,P);if($.isTrigger&1&&this[P]){if(ne)(A.event.special[P]||{}).delegateType&&$.stopPropagation();else if(ne=d.call(arguments),Ye.set(this,P,ne),this[P](),te=Ye.get(this,P),Ye.set(this,P,!1),ne!==te)return $.stopImmediatePropagation(),$.preventDefault(),te}else ne&&(Ye.set(this,P,A.event.trigger(ne[0],ne.slice(1),this)),$.stopPropagation(),$.isImmediatePropagationStopped=Et)}})}A.removeEvent=function(E,P,z){E.removeEventListener&&E.removeEventListener(P,z)},A.Event=function(E,P){if(!(this instanceof A.Event))return new A.Event(E,P);E&&E.type?(this.originalEvent=E,this.type=E.type,this.isDefaultPrevented=E.defaultPrevented||E.defaultPrevented===void 0&&E.returnValue===!1?Et:mn,this.target=E.target&&E.target.nodeType===3?E.target.parentNode:E.target,this.currentTarget=E.currentTarget,this.relatedTarget=E.relatedTarget):this.type=E,P&&A.extend(this,P),this.timeStamp=E&&E.timeStamp||Date.now(),this[A.expando]=!0},A.Event.prototype={constructor:A.Event,isDefaultPrevented:mn,isPropagationStopped:mn,isImmediatePropagationStopped:mn,isSimulated:!1,preventDefault:function(){var E=this.originalEvent;this.isDefaultPrevented=Et,E&&!this.isSimulated&&E.preventDefault()},stopPropagation:function(){var E=this.originalEvent;this.isPropagationStopped=Et,E&&!this.isSimulated&&E.stopPropagation()},stopImmediatePropagation:function(){var E=this.originalEvent;this.isImmediatePropagationStopped=Et,E&&!this.isSimulated&&E.stopImmediatePropagation(),this.stopPropagation()}},A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp),A.each({focus:"focusin",blur:"focusout"},function(E,P){function z($){if(G.documentMode){var te=Ye.get(this,"handle"),ne=A.event.fix($);ne.type=$.type==="focusin"?"focus":"blur",ne.isSimulated=!0,te($),ne.target===ne.currentTarget&&te(ne)}else A.event.simulate(P,$.target,A.event.fix($))}A.event.special[E]={setup:function(){var $;if(An(this,E,!0),G.documentMode)$=Ye.get(this,P),$||this.addEventListener(P,z),Ye.set(this,P,($||0)+1);else return!1},trigger:function(){return An(this,E),!0},teardown:function(){var $;if(G.documentMode)$=Ye.get(this,P)-1,$?Ye.set(this,P,$):(this.removeEventListener(P,z),Ye.remove(this,P));else return!1},_default:function($){return Ye.get($.target,E)},delegateType:P},A.event.special[P]={setup:function(){var $=this.ownerDocument||this.document||this,te=G.documentMode?this:$,ne=Ye.get(te,P);ne||(G.documentMode?this.addEventListener(P,z):$.addEventListener(E,z,!0)),Ye.set(te,P,(ne||0)+1)},teardown:function(){var $=this.ownerDocument||this.document||this,te=G.documentMode?this:$,ne=Ye.get(te,P)-1;ne?Ye.set(te,P,ne):(G.documentMode?this.removeEventListener(P,z):$.removeEventListener(E,z,!0),Ye.remove(te,P))}}}),A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(E,P){A.event.special[E]={delegateType:P,bindType:P,handle:function(z){var $,te=this,ne=z.relatedTarget,ae=z.handleObj;return(!ne||ne!==te&&!A.contains(te,ne))&&(z.type=ae.origType,$=ae.handler.apply(this,arguments),z.type=P),$}}}),A.fn.extend({on:function(E,P,z,$){return Rn(this,E,P,z,$)},one:function(E,P,z,$){return Rn(this,E,P,z,$,1)},off:function(E,P,z){var $,te;if(E&&E.preventDefault&&E.handleObj)return $=E.handleObj,A(E.delegateTarget).off($.namespace?$.origType+"."+$.namespace:$.origType,$.selector,$.handler),this;if(typeof E=="object"){for(te in E)this.off(te,P,E[te]);return this}return(P===!1||typeof P=="function")&&(z=P,P=void 0),z===!1&&(z=mn),this.each(function(){A.event.remove(this,E,z,P)})}});var Ln=/<script|<style|<link/i,Xn=/checked\s*(?:[^=]|=\s*.checked.)/i,xr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function br(E,P){return _e(E,"table")&&_e(P.nodeType!==11?P:P.firstChild,"tr")&&A(E).children("tbody")[0]||E}function Mr(E){return E.type=(E.getAttribute("type")!==null)+"/"+E.type,E}function Ge(E){return(E.type||"").slice(0,5)==="true/"?E.type=E.type.slice(5):E.removeAttribute("type"),E}function Ee(E,P){var z,$,te,ne,ae,Be,ke;if(P.nodeType===1){if(Ye.hasData(E)&&(ne=Ye.get(E),ke=ne.events,ke)){Ye.remove(P,"handle events");for(te in ke)for(z=0,$=ke[te].length;z<$;z++)A.event.add(P,te,ke[te][z])}Xt.hasData(E)&&(ae=Xt.access(E),Be=A.extend({},ae),Xt.set(P,Be))}}function lt(E,P){var z=P.nodeName.toLowerCase();z==="input"&&me.test(E.type)?P.checked=E.checked:(z==="input"||z==="textarea")&&(P.defaultValue=E.defaultValue)}function Ot(E,P,z,$){P=f(P);var te,ne,ae,Be,ke,nt,wt=0,Lt=E.length,_t=Lt-1,Qt=P[0],ir=H(Qt);if(ir||Lt>1&&typeof Qt=="string"&&!V.checkClone&&Xn.test(Qt))return E.each(function(Tr){var mr=E.eq(Tr);ir&&(P[0]=Qt.call(this,Tr,mr.html())),Ot(mr,P,z,$)});if(Lt&&(te=ct(P,E[0].ownerDocument,!1,E,$),ne=te.firstChild,te.childNodes.length===1&&(te=ne),ne||$)){for(ae=A.map(Xe(te,"script"),Mr),Be=ae.length;wt<Lt;wt++)ke=te,wt!==_t&&(ke=A.clone(ke,!0,!0),Be&&A.merge(ae,Xe(ke,"script"))),z.call(E[wt],ke,wt);if(Be)for(nt=ae[ae.length-1].ownerDocument,A.map(ae,Ge),wt=0;wt<Be;wt++)ke=ae[wt],De.test(ke.type||"")&&!Ye.access(ke,"globalEval")&&A.contains(nt,ke)&&(ke.src&&(ke.type||"").toLowerCase()!=="module"?A._evalUrl&&!ke.noModule&&A._evalUrl(ke.src,{nonce:ke.nonce||ke.getAttribute("nonce")},nt):Q(ke.textContent.replace(xr,""),ke,nt))}return E}function ln(E,P,z){for(var $,te=P?A.filter(P,E):E,ne=0;($=te[ne])!=null;ne++)!z&&$.nodeType===1&&A.cleanData(Xe($)),$.parentNode&&(z&&Ar($)&&je(Xe($,"script")),$.parentNode.removeChild($));return E}A.extend({htmlPrefilter:function(E){return E},clone:function(E,P,z){var $,te,ne,ae,Be=E.cloneNode(!0),ke=Ar(E);if(!V.noCloneChecked&&(E.nodeType===1||E.nodeType===11)&&!A.isXMLDoc(E))for(ae=Xe(Be),ne=Xe(E),$=0,te=ne.length;$<te;$++)lt(ne[$],ae[$]);if(P)if(z)for(ne=ne||Xe(E),ae=ae||Xe(Be),$=0,te=ne.length;$<te;$++)Ee(ne[$],ae[$]);else Ee(E,Be);return ae=Xe(Be,"script"),ae.length>0&&je(ae,!ke&&Xe(E,"script")),Be},cleanData:function(E){for(var P,z,$,te=A.event.special,ne=0;(z=E[ne])!==void 0;ne++)if(qn(z)){if(P=z[Ye.expando]){if(P.events)for($ in P.events)te[$]?A.event.remove(z,$):A.removeEvent(z,$,P.handle);z[Ye.expando]=void 0}z[Xt.expando]&&(z[Xt.expando]=void 0)}}}),A.fn.extend({detach:function(E){return ln(this,E,!0)},remove:function(E){return ln(this,E)},text:function(E){return Zn(this,function(P){return P===void 0?A.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=P)})},null,E,arguments.length)},append:function(){return Ot(this,arguments,function(E){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var P=br(this,E);P.appendChild(E)}})},prepend:function(){return Ot(this,arguments,function(E){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var P=br(this,E);P.insertBefore(E,P.firstChild)}})},before:function(){return Ot(this,arguments,function(E){this.parentNode&&this.parentNode.insertBefore(E,this)})},after:function(){return Ot(this,arguments,function(E){this.parentNode&&this.parentNode.insertBefore(E,this.nextSibling)})},empty:function(){for(var E,P=0;(E=this[P])!=null;P++)E.nodeType===1&&(A.cleanData(Xe(E,!1)),E.textContent="");return this},clone:function(E,P){return E=E??!1,P=P??E,this.map(function(){return A.clone(this,E,P)})},html:function(E){return Zn(this,function(P){var z=this[0]||{},$=0,te=this.length;if(P===void 0&&z.nodeType===1)return z.innerHTML;if(typeof P=="string"&&!Ln.test(P)&&!qe[(Me.exec(P)||["",""])[1].toLowerCase()]){P=A.htmlPrefilter(P);try{for(;$<te;$++)z=this[$]||{},z.nodeType===1&&(A.cleanData(Xe(z,!1)),z.innerHTML=P);z=0}catch{}}z&&this.empty().append(P)},null,E,arguments.length)},replaceWith:function(){var E=[];return Ot(this,arguments,function(P){var z=this.parentNode;A.inArray(this,E)<0&&(A.cleanData(Xe(this)),z&&z.replaceChild(P,this))},E)}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(E,P){A.fn[E]=function(z){for(var $,te=[],ne=A(z),ae=ne.length-1,Be=0;Be<=ae;Be++)$=Be===ae?this:this.clone(!0),A(ne[Be])[P]($),a.apply(te,$.get());return this.pushStack(te)}});var hr=new RegExp("^("+yn+")(?!px)[a-z%]+$","i"),Pr=/^--/,Vn=function(E){var P=E.ownerDocument.defaultView;return(!P||!P.opener)&&(P=t),P.getComputedStyle(E)},Io=function(E,P,z){var $,te,ne={};for(te in P)ne[te]=E.style[te],E.style[te]=P[te];$=z.call(E);for(te in P)E.style[te]=ne[te];return $},po=new RegExp(Fn.join("|"),"i");(function(){function E(){if(nt){ke.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",nt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nr.appendChild(ke).appendChild(nt);var wt=t.getComputedStyle(nt);z=wt.top!=="1%",Be=P(wt.marginLeft)===12,nt.style.right="60%",ne=P(wt.right)===36,$=P(wt.width)===36,nt.style.position="absolute",te=P(nt.offsetWidth/3)===12,nr.removeChild(ke),nt=null}}function P(wt){return Math.round(parseFloat(wt))}var z,$,te,ne,ae,Be,ke=G.createElement("div"),nt=G.createElement("div");nt.style&&(nt.style.backgroundClip="content-box",nt.cloneNode(!0).style.backgroundClip="",V.clearCloneStyle=nt.style.backgroundClip==="content-box",A.extend(V,{boxSizingReliable:function(){return E(),$},pixelBoxStyles:function(){return E(),ne},pixelPosition:function(){return E(),z},reliableMarginLeft:function(){return E(),Be},scrollboxSize:function(){return E(),te},reliableTrDimensions:function(){var wt,Lt,_t,Qt;return ae==null&&(wt=G.createElement("table"),Lt=G.createElement("tr"),_t=G.createElement("div"),wt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Lt.style.cssText="border:1px solid",Lt.style.height="1px",_t.style.height="9px",_t.style.display="block",nr.appendChild(wt).appendChild(Lt).appendChild(_t),Qt=t.getComputedStyle(Lt),ae=parseInt(Qt.height,10)+parseInt(Qt.borderTopWidth,10)+parseInt(Qt.borderBottomWidth,10)===Lt.offsetHeight,nr.removeChild(wt)),ae}}))})();function fo(E,P,z){var $,te,ne,ae,Be=Pr.test(P),ke=E.style;return z=z||Vn(E),z&&(ae=z.getPropertyValue(P)||z[P],Be&&ae&&(ae=ae.replace(We,"$1")||void 0),ae===""&&!Ar(E)&&(ae=A.style(E,P)),!V.pixelBoxStyles()&&hr.test(ae)&&po.test(P)&&($=ke.width,te=ke.minWidth,ne=ke.maxWidth,ke.minWidth=ke.maxWidth=ke.width=ae,ae=z.width,ke.width=$,ke.minWidth=te,ke.maxWidth=ne)),ae!==void 0?ae+"":ae}function ea(E,P){return{get:function(){if(E()){delete this.get;return}return(this.get=P).apply(this,arguments)}}}var Bi=["Webkit","Moz","ms"],ji=G.createElement("div").style,mo={};function $i(E){for(var P=E[0].toUpperCase()+E.slice(1),z=Bi.length;z--;)if(E=Bi[z]+P,E in ji)return E}function za(E){var P=A.cssProps[E]||mo[E];return P||(E in ji?E:mo[E]=$i(E)||E)}var Na=/^(none|table(?!-c[ea]).+)/,Cl={position:"absolute",visibility:"hidden",display:"block"},yt={letterSpacing:"0",fontWeight:"400"};function da(E,P,z){var $=Dn.exec(P);return $?Math.max(0,$[2]-(z||0))+($[3]||"px"):P}function Qr(E,P,z,$,te,ne){var ae=P==="width"?1:0,Be=0,ke=0,nt=0;if(z===($?"border":"content"))return 0;for(;ae<4;ae+=2)z==="margin"&&(nt+=A.css(E,z+Fn[ae],!0,te)),$?(z==="content"&&(ke-=A.css(E,"padding"+Fn[ae],!0,te)),z!=="margin"&&(ke-=A.css(E,"border"+Fn[ae]+"Width",!0,te))):(ke+=A.css(E,"padding"+Fn[ae],!0,te),z!=="padding"?ke+=A.css(E,"border"+Fn[ae]+"Width",!0,te):Be+=A.css(E,"border"+Fn[ae]+"Width",!0,te));return!$&&ne>=0&&(ke+=Math.max(0,Math.ceil(E["offset"+P[0].toUpperCase()+P.slice(1)]-ne-ke-Be-.5))||0),ke+nt}function Hi(E,P,z){var $=Vn(E),te=!V.boxSizingReliable()||z,ne=te&&A.css(E,"boxSizing",!1,$)==="border-box",ae=ne,Be=fo(E,P,$),ke="offset"+P[0].toUpperCase()+P.slice(1);if(hr.test(Be)){if(!z)return Be;Be="auto"}return(!V.boxSizingReliable()&&ne||!V.reliableTrDimensions()&&_e(E,"tr")||Be==="auto"||!parseFloat(Be)&&A.css(E,"display",!1,$)==="inline")&&E.getClientRects().length&&(ne=A.css(E,"boxSizing",!1,$)==="border-box",ae=ke in E,ae&&(Be=E[ke])),Be=parseFloat(Be)||0,Be+Qr(E,P,z||(ne?"border":"content"),ae,$,Be)+"px"}A.extend({cssHooks:{opacity:{get:function(E,P){if(P){var z=fo(E,"opacity");return z===""?"1":z}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(E,P,z,$){if(!(!E||E.nodeType===3||E.nodeType===8||!E.style)){var te,ne,ae,Be=Un(P),ke=Pr.test(P),nt=E.style;if(ke||(P=za(Be)),ae=A.cssHooks[P]||A.cssHooks[Be],z!==void 0){if(ne=typeof z,ne==="string"&&(te=Dn.exec(z))&&te[1]&&(z=di(E,P,te),ne="number"),z==null||z!==z)return;ne==="number"&&!ke&&(z+=te&&te[3]||(A.cssNumber[Be]?"":"px")),!V.clearCloneStyle&&z===""&&P.indexOf("background")===0&&(nt[P]="inherit"),(!ae||!("set"in ae)||(z=ae.set(E,z,$))!==void 0)&&(ke?nt.setProperty(P,z):nt[P]=z)}else return ae&&"get"in ae&&(te=ae.get(E,!1,$))!==void 0?te:nt[P]}},css:function(E,P,z,$){var te,ne,ae,Be=Un(P),ke=Pr.test(P);return ke||(P=za(Be)),ae=A.cssHooks[P]||A.cssHooks[Be],ae&&"get"in ae&&(te=ae.get(E,!0,z)),te===void 0&&(te=fo(E,P,$)),te==="normal"&&P in yt&&(te=yt[P]),z===""||z?(ne=parseFloat(te),z===!0||isFinite(ne)?ne||0:te):te}}),A.each(["height","width"],function(E,P){A.cssHooks[P]={get:function(z,$,te){if($)return Na.test(A.css(z,"display"))&&(!z.getClientRects().length||!z.getBoundingClientRect().width)?Io(z,Cl,function(){return Hi(z,P,te)}):Hi(z,P,te)},set:function(z,$,te){var ne,ae=Vn(z),Be=!V.scrollboxSize()&&ae.position==="absolute",ke=Be||te,nt=ke&&A.css(z,"boxSizing",!1,ae)==="border-box",wt=te?Qr(z,P,te,nt,ae):0;return nt&&Be&&(wt-=Math.ceil(z["offset"+P[0].toUpperCase()+P.slice(1)]-parseFloat(ae[P])-Qr(z,P,"border",!1,ae)-.5)),wt&&(ne=Dn.exec($))&&(ne[3]||"px")!=="px"&&(z.style[P]=$,$=A.css(z,P)),da(z,$,wt)}}}),A.cssHooks.marginLeft=ea(V.reliableMarginLeft,function(E,P){if(P)return(parseFloat(fo(E,"marginLeft"))||E.getBoundingClientRect().left-Io(E,{marginLeft:0},function(){return E.getBoundingClientRect().left}))+"px"}),A.each({margin:"",padding:"",border:"Width"},function(E,P){A.cssHooks[E+P]={expand:function(z){for(var $=0,te={},ne=typeof z=="string"?z.split(" "):[z];$<4;$++)te[E+Fn[$]+P]=ne[$]||ne[$-2]||ne[0];return te}},E!=="margin"&&(A.cssHooks[E+P].set=da)}),A.fn.extend({css:function(E,P){return Zn(this,function(z,$,te){var ne,ae,Be={},ke=0;if(Array.isArray($)){for(ne=Vn(z),ae=$.length;ke<ae;ke++)Be[$[ke]]=A.css(z,$[ke],!1,ne);return Be}return te!==void 0?A.style(z,$,te):A.css(z,$)},E,P,arguments.length>1)}});function Ao(E,P,z,$,te){return new Ao.prototype.init(E,P,z,$,te)}A.Tween=Ao,Ao.prototype={constructor:Ao,init:function(E,P,z,$,te,ne){this.elem=E,this.prop=z,this.easing=te||A.easing._default,this.options=P,this.start=this.now=this.cur(),this.end=$,this.unit=ne||(A.cssNumber[z]?"":"px")},cur:function(){var E=Ao.propHooks[this.prop];return E&&E.get?E.get(this):Ao.propHooks._default.get(this)},run:function(E){var P,z=Ao.propHooks[this.prop];return this.options.duration?this.pos=P=A.easing[this.easing](E,this.options.duration*E,0,1,this.options.duration):this.pos=P=E,this.now=(this.end-this.start)*P+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),z&&z.set?z.set(this):Ao.propHooks._default.set(this),this}},Ao.prototype.init.prototype=Ao.prototype,Ao.propHooks={_default:{get:function(E){var P;return E.elem.nodeType!==1||E.elem[E.prop]!=null&&E.elem.style[E.prop]==null?E.elem[E.prop]:(P=A.css(E.elem,E.prop,""),!P||P==="auto"?0:P)},set:function(E){A.fx.step[E.prop]?A.fx.step[E.prop](E):E.elem.nodeType===1&&(A.cssHooks[E.prop]||E.elem.style[za(E.prop)]!=null)?A.style(E.elem,E.prop,E.now+E.unit):E.elem[E.prop]=E.now}}},Ao.propHooks.scrollTop=Ao.propHooks.scrollLeft={set:function(E){E.elem.nodeType&&E.elem.parentNode&&(E.elem[E.prop]=E.now)}},A.easing={linear:function(E){return E},swing:function(E){return .5-Math.cos(E*Math.PI)/2},_default:"swing"},A.fx=Ao.prototype.init,A.fx.step={};var Mo,lc,Op=/^(?:toggle|show|hide)$/,cc=/queueHooks$/;function cn(){lc&&(G.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(cn):t.setTimeout(cn,A.fx.interval),A.fx.tick())}function _r(){return t.setTimeout(function(){Mo=void 0}),Mo=Date.now()}function cr(E,P){var z,$=0,te={height:E};for(P=P?1:0;$<4;$+=2-P)z=Fn[$],te["margin"+z]=te["padding"+z]=E;return P&&(te.opacity=te.width=E),te}function jo(E,P,z){for(var $,te=(xi.tweeners[P]||[]).concat(xi.tweeners["*"]),ne=0,ae=te.length;ne<ae;ne++)if($=te[ne].call(z,P,E))return $}function Fa(E,P,z){var $,te,ne,ae,Be,ke,nt,wt,Lt="width"in P||"height"in P,_t=this,Qt={},ir=E.style,Tr=E.nodeType&&vi(E),mr=Ye.get(E,"fxshow");z.queue||(ae=A._queueHooks(E,"fx"),ae.unqueued==null&&(ae.unqueued=0,Be=ae.empty.fire,ae.empty.fire=function(){ae.unqueued||Be()}),ae.unqueued++,_t.always(function(){_t.always(function(){ae.unqueued--,A.queue(E,"fx").length||ae.empty.fire()})}));for($ in P)if(te=P[$],Op.test(te)){if(delete P[$],ne=ne||te==="toggle",te===(Tr?"hide":"show"))if(te==="show"&&mr&&mr[$]!==void 0)Tr=!0;else continue;Qt[$]=mr&&mr[$]||A.style(E,$)}if(ke=!A.isEmptyObject(P),!(!ke&&A.isEmptyObject(Qt))){Lt&&E.nodeType===1&&(z.overflow=[ir.overflow,ir.overflowX,ir.overflowY],nt=mr&&mr.display,nt==null&&(nt=Ye.get(E,"display")),wt=A.css(E,"display"),wt==="none"&&(nt?wt=nt:(ie([E],!0),nt=E.style.display||nt,wt=A.css(E,"display"),ie([E]))),(wt==="inline"||wt==="inline-block"&&nt!=null)&&A.css(E,"float")==="none"&&(ke||(_t.done(function(){ir.display=nt}),nt==null&&(wt=ir.display,nt=wt==="none"?"":wt)),ir.display="inline-block")),z.overflow&&(ir.overflow="hidden",_t.always(function(){ir.overflow=z.overflow[0],ir.overflowX=z.overflow[1],ir.overflowY=z.overflow[2]})),ke=!1;for($ in Qt)ke||(mr?"hidden"in mr&&(Tr=mr.hidden):mr=Ye.access(E,"fxshow",{display:nt}),ne&&(mr.hidden=!Tr),Tr&&ie([E],!0),_t.done(function(){Tr||ie([E]),Ye.remove(E,"fxshow");for($ in Qt)A.style(E,$,Qt[$])})),ke=jo(Tr?mr[$]:0,$,_t),$ in mr||(mr[$]=ke.start,Tr&&(ke.end=ke.start,ke.start=0))}}function fr(E,P){var z,$,te,ne,ae;for(z in E)if($=Un(z),te=P[$],ne=E[z],Array.isArray(ne)&&(te=ne[1],ne=E[z]=ne[0]),z!==$&&(E[$]=ne,delete E[z]),ae=A.cssHooks[$],ae&&"expand"in ae){ne=ae.expand(ne),delete E[$];for(z in ne)z in E||(E[z]=ne[z],P[z]=te)}else P[$]=te}function xi(E,P,z){var $,te,ne=0,ae=xi.prefilters.length,Be=A.Deferred().always(function(){delete ke.elem}),ke=function(){if(te)return!1;for(var Lt=Mo||_r(),_t=Math.max(0,nt.startTime+nt.duration-Lt),Qt=_t/nt.duration||0,ir=1-Qt,Tr=0,mr=nt.tweens.length;Tr<mr;Tr++)nt.tweens[Tr].run(ir);return Be.notifyWith(E,[nt,ir,_t]),ir<1&&mr?_t:(mr||Be.notifyWith(E,[nt,1,0]),Be.resolveWith(E,[nt]),!1)},nt=Be.promise({elem:E,props:A.extend({},P),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},z),originalProperties:P,originalOptions:z,startTime:Mo||_r(),duration:z.duration,tweens:[],createTween:function(Lt,_t){var Qt=A.Tween(E,nt.opts,Lt,_t,nt.opts.specialEasing[Lt]||nt.opts.easing);return nt.tweens.push(Qt),Qt},stop:function(Lt){var _t=0,Qt=Lt?nt.tweens.length:0;if(te)return this;for(te=!0;_t<Qt;_t++)nt.tweens[_t].run(1);return Lt?(Be.notifyWith(E,[nt,1,0]),Be.resolveWith(E,[nt,Lt])):Be.rejectWith(E,[nt,Lt]),this}}),wt=nt.props;for(fr(wt,nt.opts.specialEasing);ne<ae;ne++)if($=xi.prefilters[ne].call(nt,E,wt,nt.opts),$)return H($.stop)&&(A._queueHooks(nt.elem,nt.opts.queue).stop=$.stop.bind($)),$;return A.map(wt,jo,nt),H(nt.opts.start)&&nt.opts.start.call(E,nt),nt.progress(nt.opts.progress).done(nt.opts.done,nt.opts.complete).fail(nt.opts.fail).always(nt.opts.always),A.fx.timer(A.extend(ke,{elem:E,anim:nt,queue:nt.opts.queue})),nt}A.Animation=A.extend(xi,{tweeners:{"*":[function(E,P){var z=this.createTween(E,P);return di(z.elem,E,Dn.exec(P),z),z}]},tweener:function(E,P){H(E)?(P=E,E=["*"]):E=E.match(vn);for(var z,$=0,te=E.length;$<te;$++)z=E[$],xi.tweeners[z]=xi.tweeners[z]||[],xi.tweeners[z].unshift(P)},prefilters:[Fa],prefilter:function(E,P){P?xi.prefilters.unshift(E):xi.prefilters.push(E)}}),A.speed=function(E,P,z){var $=E&&typeof E=="object"?A.extend({},E):{complete:z||!z&&P||H(E)&&E,duration:E,easing:z&&P||P&&!H(P)&&P};return A.fx.off?$.duration=0:typeof $.duration!="number"&&($.duration in A.fx.speeds?$.duration=A.fx.speeds[$.duration]:$.duration=A.fx.speeds._default),($.queue==null||$.queue===!0)&&($.queue="fx"),$.old=$.complete,$.complete=function(){H($.old)&&$.old.call(this),$.queue&&A.dequeue(this,$.queue)},$},A.fn.extend({fadeTo:function(E,P,z,$){return this.filter(vi).css("opacity",0).show().end().animate({opacity:P},E,z,$)},animate:function(E,P,z,$){var te=A.isEmptyObject(E),ne=A.speed(P,z,$),ae=function(){var Be=xi(this,A.extend({},E),ne);(te||Ye.get(this,"finish"))&&Be.stop(!0)};return ae.finish=ae,te||ne.queue===!1?this.each(ae):this.queue(ne.queue,ae)},stop:function(E,P,z){var $=function(te){var ne=te.stop;delete te.stop,ne(z)};return typeof E!="string"&&(z=P,P=E,E=void 0),P&&this.queue(E||"fx",[]),this.each(function(){var te=!0,ne=E!=null&&E+"queueHooks",ae=A.timers,Be=Ye.get(this);if(ne)Be[ne]&&Be[ne].stop&&$(Be[ne]);else for(ne in Be)Be[ne]&&Be[ne].stop&&cc.test(ne)&&$(Be[ne]);for(ne=ae.length;ne--;)ae[ne].elem===this&&(E==null||ae[ne].queue===E)&&(ae[ne].anim.stop(z),te=!1,ae.splice(ne,1));(te||!z)&&A.dequeue(this,E)})},finish:function(E){return E!==!1&&(E=E||"fx"),this.each(function(){var P,z=Ye.get(this),$=z[E+"queue"],te=z[E+"queueHooks"],ne=A.timers,ae=$?$.length:0;for(z.finish=!0,A.queue(this,E,[]),te&&te.stop&&te.stop.call(this,!0),P=ne.length;P--;)ne[P].elem===this&&ne[P].queue===E&&(ne[P].anim.stop(!0),ne.splice(P,1));for(P=0;P<ae;P++)$[P]&&$[P].finish&&$[P].finish.call(this);delete z.finish})}}),A.each(["toggle","show","hide"],function(E,P){var z=A.fn[P];A.fn[P]=function($,te,ne){return $==null||typeof $=="boolean"?z.apply(this,arguments):this.animate(cr(P,!0),$,te,ne)}}),A.each({slideDown:cr("show"),slideUp:cr("hide"),slideToggle:cr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(E,P){A.fn[E]=function(z,$,te){return this.animate(P,z,$,te)}}),A.timers=[],A.fx.tick=function(){var E,P=0,z=A.timers;for(Mo=Date.now();P<z.length;P++)E=z[P],!E()&&z[P]===E&&z.splice(P--,1);z.length||A.fx.stop(),Mo=void 0},A.fx.timer=function(E){A.timers.push(E),A.fx.start()},A.fx.interval=13,A.fx.start=function(){lc||(lc=!0,cn())},A.fx.stop=function(){lc=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(E,P){return E=A.fx&&A.fx.speeds[E]||E,P=P||"fx",this.queue(P,function(z,$){var te=t.setTimeout(z,E);$.stop=function(){t.clearTimeout(te)}})},function(){var E=G.createElement("input"),P=G.createElement("select"),z=P.appendChild(G.createElement("option"));E.type="checkbox",V.checkOn=E.value!=="",V.optSelected=z.selected,E=G.createElement("input"),E.value="t",E.type="radio",V.radioValue=E.value==="t"}();var uc,Ba=A.expr.attrHandle;A.fn.extend({attr:function(E,P){return Zn(this,A.attr,E,P,arguments.length>1)},removeAttr:function(E){return this.each(function(){A.removeAttr(this,E)})}}),A.extend({attr:function(E,P,z){var $,te,ne=E.nodeType;if(!(ne===3||ne===8||ne===2)){if(typeof E.getAttribute>"u")return A.prop(E,P,z);if((ne!==1||!A.isXMLDoc(E))&&(te=A.attrHooks[P.toLowerCase()]||(A.expr.match.bool.test(P)?uc:void 0)),z!==void 0){if(z===null){A.removeAttr(E,P);return}return te&&"set"in te&&($=te.set(E,z,P))!==void 0?$:(E.setAttribute(P,z+""),z)}return te&&"get"in te&&($=te.get(E,P))!==null?$:($=A.find.attr(E,P),$??void 0)}},attrHooks:{type:{set:function(E,P){if(!V.radioValue&&P==="radio"&&_e(E,"input")){var z=E.value;return E.setAttribute("type",P),z&&(E.value=z),P}}}},removeAttr:function(E,P){var z,$=0,te=P&&P.match(vn);if(te&&E.nodeType===1)for(;z=te[$++];)E.removeAttribute(z)}}),uc={set:function(E,P,z){return P===!1?A.removeAttr(E,z):E.setAttribute(z,z),z}},A.each(A.expr.match.bool.source.match(/\w+/g),function(E,P){var z=Ba[P]||A.find.attr;Ba[P]=function($,te,ne){var ae,Be,ke=te.toLowerCase();return ne||(Be=Ba[ke],Ba[ke]=ae,ae=z($,te,ne)!=null?ke:null,Ba[ke]=Be),ae}});var ha=/^(?:input|select|textarea|button)$/i,li=/^(?:a|area)$/i;A.fn.extend({prop:function(E,P){return Zn(this,A.prop,E,P,arguments.length>1)},removeProp:function(E){return this.each(function(){delete this[A.propFix[E]||E]})}}),A.extend({prop:function(E,P,z){var $,te,ne=E.nodeType;if(!(ne===3||ne===8||ne===2))return(ne!==1||!A.isXMLDoc(E))&&(P=A.propFix[P]||P,te=A.propHooks[P]),z!==void 0?te&&"set"in te&&($=te.set(E,z,P))!==void 0?$:E[P]=z:te&&"get"in te&&($=te.get(E,P))!==null?$:E[P]},propHooks:{tabIndex:{get:function(E){var P=A.find.attr(E,"tabindex");return P?parseInt(P,10):ha.test(E.nodeName)||li.test(E.nodeName)&&E.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),V.optSelected||(A.propHooks.selected={get:function(E){var P=E.parentNode;return P&&P.parentNode&&P.parentNode.selectedIndex,null},set:function(E){var P=E.parentNode;P&&(P.selectedIndex,P.parentNode&&P.parentNode.selectedIndex)}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){A.propFix[this.toLowerCase()]=this});function qs(E){var P=E.match(vn)||[];return P.join(" ")}function Do(E){return E.getAttribute&&E.getAttribute("class")||""}function Pl(E){return Array.isArray(E)?E:typeof E=="string"?E.match(vn)||[]:[]}A.fn.extend({addClass:function(E){var P,z,$,te,ne,ae;return H(E)?this.each(function(Be){A(this).addClass(E.call(this,Be,Do(this)))}):(P=Pl(E),P.length?this.each(function(){if($=Do(this),z=this.nodeType===1&&" "+qs($)+" ",z){for(ne=0;ne<P.length;ne++)te=P[ne],z.indexOf(" "+te+" ")<0&&(z+=te+" ");ae=qs(z),$!==ae&&this.setAttribute("class",ae)}}):this)},removeClass:function(E){var P,z,$,te,ne,ae;return H(E)?this.each(function(Be){A(this).removeClass(E.call(this,Be,Do(this)))}):arguments.length?(P=Pl(E),P.length?this.each(function(){if($=Do(this),z=this.nodeType===1&&" "+qs($)+" ",z){for(ne=0;ne<P.length;ne++)for(te=P[ne];z.indexOf(" "+te+" ")>-1;)z=z.replace(" "+te+" "," ");ae=qs(z),$!==ae&&this.setAttribute("class",ae)}}):this):this.attr("class","")},toggleClass:function(E,P){var z,$,te,ne,ae=typeof E,Be=ae==="string"||Array.isArray(E);return H(E)?this.each(function(ke){A(this).toggleClass(E.call(this,ke,Do(this),P),P)}):typeof P=="boolean"&&Be?P?this.addClass(E):this.removeClass(E):(z=Pl(E),this.each(function(){if(Be)for(ne=A(this),te=0;te<z.length;te++)$=z[te],ne.hasClass($)?ne.removeClass($):ne.addClass($);else(E===void 0||ae==="boolean")&&($=Do(this),$&&Ye.set(this,"__className__",$),this.setAttribute&&this.setAttribute("class",$||E===!1?"":Ye.get(this,"__className__")||""))}))},hasClass:function(E){var P,z,$=0;for(P=" "+E+" ";z=this[$++];)if(z.nodeType===1&&(" "+qs(Do(z))+" ").indexOf(P)>-1)return!0;return!1}});var nu=/\r/g;A.fn.extend({val:function(E){var P,z,$,te=this[0];return arguments.length?($=H(E),this.each(function(ne){var ae;this.nodeType===1&&($?ae=E.call(this,ne,A(this).val()):ae=E,ae==null?ae="":typeof ae=="number"?ae+="":Array.isArray(ae)&&(ae=A.map(ae,function(Be){return Be==null?"":Be+""})),P=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()],(!P||!("set"in P)||P.set(this,ae,"value")===void 0)&&(this.value=ae))})):te?(P=A.valHooks[te.type]||A.valHooks[te.nodeName.toLowerCase()],P&&"get"in P&&(z=P.get(te,"value"))!==void 0?z:(z=te.value,typeof z=="string"?z.replace(nu,""):z??"")):void 0}}),A.extend({valHooks:{option:{get:function(E){var P=A.find.attr(E,"value");return P??qs(A.text(E))}},select:{get:function(E){var P,z,$,te=E.options,ne=E.selectedIndex,ae=E.type==="select-one",Be=ae?null:[],ke=ae?ne+1:te.length;for(ne<0?$=ke:$=ae?ne:0;$<ke;$++)if(z=te[$],(z.selected||$===ne)&&!z.disabled&&(!z.parentNode.disabled||!_e(z.parentNode,"optgroup"))){if(P=A(z).val(),ae)return P;Be.push(P)}return Be},set:function(E,P){for(var z,$,te=E.options,ne=A.makeArray(P),ae=te.length;ae--;)$=te[ae],($.selected=A.inArray(A.valHooks.option.get($),ne)>-1)&&(z=!0);return z||(E.selectedIndex=-1),ne}}}}),A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(E,P){if(Array.isArray(P))return E.checked=A.inArray(A(E).val(),P)>-1}},V.checkOn||(A.valHooks[this].get=function(E){return E.getAttribute("value")===null?"on":E.value})});var Il=t.location,ph={guid:Date.now()},Al=/\?/;A.parseXML=function(E){var P,z;if(!E||typeof E!="string")return null;try{P=new t.DOMParser().parseFromString(E,"text/xml")}catch{}return z=P&&P.getElementsByTagName("parsererror")[0],(!P||z)&&A.error("Invalid XML: "+(z?A.map(z.childNodes,function($){return $.textContent}).join(`
`):E)),P};var dc=/^(?:focusinfocus|focusoutblur)$/,ru=function(E){E.stopPropagation()};A.extend(A.event,{trigger:function(E,P,z,$){var te,ne,ae,Be,ke,nt,wt,Lt,_t=[z||G],Qt=R.call(E,"type")?E.type:E,ir=R.call(E,"namespace")?E.namespace.split("."):[];if(ne=Lt=ae=z=z||G,!(z.nodeType===3||z.nodeType===8)&&!dc.test(Qt+A.event.triggered)&&(Qt.indexOf(".")>-1&&(ir=Qt.split("."),Qt=ir.shift(),ir.sort()),ke=Qt.indexOf(":")<0&&"on"+Qt,E=E[A.expando]?E:new A.Event(Qt,typeof E=="object"&&E),E.isTrigger=$?2:3,E.namespace=ir.join("."),E.rnamespace=E.namespace?new RegExp("(^|\\.)"+ir.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,E.result=void 0,E.target||(E.target=z),P=P==null?[E]:A.makeArray(P,[E]),wt=A.event.special[Qt]||{},!(!$&&wt.trigger&&wt.trigger.apply(z,P)===!1))){if(!$&&!wt.noBubble&&!le(z)){for(Be=wt.delegateType||Qt,dc.test(Be+Qt)||(ne=ne.parentNode);ne;ne=ne.parentNode)_t.push(ne),ae=ne;ae===(z.ownerDocument||G)&&_t.push(ae.defaultView||ae.parentWindow||t)}for(te=0;(ne=_t[te++])&&!E.isPropagationStopped();)Lt=ne,E.type=te>1?Be:wt.bindType||Qt,nt=(Ye.get(ne,"events")||Object.create(null))[E.type]&&Ye.get(ne,"handle"),nt&&nt.apply(ne,P),nt=ke&&ne[ke],nt&&nt.apply&&qn(ne)&&(E.result=nt.apply(ne,P),E.result===!1&&E.preventDefault());return E.type=Qt,!$&&!E.isDefaultPrevented()&&(!wt._default||wt._default.apply(_t.pop(),P)===!1)&&qn(z)&&ke&&H(z[Qt])&&!le(z)&&(ae=z[ke],ae&&(z[ke]=null),A.event.triggered=Qt,E.isPropagationStopped()&&Lt.addEventListener(Qt,ru),z[Qt](),E.isPropagationStopped()&&Lt.removeEventListener(Qt,ru),A.event.triggered=void 0,ae&&(z[ke]=ae)),E.result}},simulate:function(E,P,z){var $=A.extend(new A.Event,z,{type:E,isSimulated:!0});A.event.trigger($,null,P)}}),A.fn.extend({trigger:function(E,P){return this.each(function(){A.event.trigger(E,P,this)})},triggerHandler:function(E,P){var z=this[0];if(z)return A.event.trigger(E,P,z,!0)}});var hc=/\[\]$/,Ro=/\r?\n/g,Ii=/^(?:submit|button|image|reset|file)$/i,fh=/^(?:input|select|textarea|keygen)/i;function iu(E,P,z,$){var te;if(Array.isArray(P))A.each(P,function(ne,ae){z||hc.test(E)?$(E,ae):iu(E+"["+(typeof ae=="object"&&ae!=null?ne:"")+"]",ae,z,$)});else if(!z&&oe(P)==="object")for(te in P)iu(E+"["+te+"]",P[te],z,$);else $(E,P)}A.param=function(E,P){var z,$=[],te=function(ne,ae){var Be=H(ae)?ae():ae;$[$.length]=encodeURIComponent(ne)+"="+encodeURIComponent(Be??"")};if(E==null)return"";if(Array.isArray(E)||E.jquery&&!A.isPlainObject(E))A.each(E,function(){te(this.name,this.value)});else for(z in E)iu(z,E[z],P,te);return $.join("&")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var E=A.prop(this,"elements");return E?A.makeArray(E):this}).filter(function(){var E=this.type;return this.name&&!A(this).is(":disabled")&&fh.test(this.nodeName)&&!Ii.test(E)&&(this.checked||!me.test(E))}).map(function(E,P){var z=A(this).val();return z==null?null:Array.isArray(z)?A.map(z,function($){return{name:P.name,value:$.replace(Ro,`\r
`)}}):{name:P.name,value:z.replace(Ro,`\r
`)}}).get()}});var $o=/%20/g,pa=/#.*$/,Lp=/([?&])_=[^&]*/,ou=/^(.*?):[ \t]*([^\r\n]*)$/mg,bi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,au=/^(?:GET|HEAD)$/,mh=/^\/\//,Gs={},qi={},Ku="*/".concat("*"),su=G.createElement("a");su.href=Il.href;function Ka(E){return function(P,z){typeof P!="string"&&(z=P,P="*");var $,te=0,ne=P.toLowerCase().match(vn)||[];if(H(z))for(;$=ne[te++];)$[0]==="+"?($=$.slice(1)||"*",(E[$]=E[$]||[]).unshift(z)):(E[$]=E[$]||[]).push(z)}}function ys(E,P,z,$){var te={},ne=E===qi;function ae(Be){var ke;return te[Be]=!0,A.each(E[Be]||[],function(nt,wt){var Lt=wt(P,z,$);if(typeof Lt=="string"&&!ne&&!te[Lt])return P.dataTypes.unshift(Lt),ae(Lt),!1;if(ne)return!(ke=Lt)}),ke}return ae(P.dataTypes[0])||!te["*"]&&ae("*")}function pc(E,P){var z,$,te=A.ajaxSettings.flatOptions||{};for(z in P)P[z]!==void 0&&((te[z]?E:$||($={}))[z]=P[z]);return $&&A.extend(!0,E,$),E}function om(E,P,z){for(var $,te,ne,ae,Be=E.contents,ke=E.dataTypes;ke[0]==="*";)ke.shift(),$===void 0&&($=E.mimeType||P.getResponseHeader("Content-Type"));if($){for(te in Be)if(Be[te]&&Be[te].test($)){ke.unshift(te);break}}if(ke[0]in z)ne=ke[0];else{for(te in z){if(!ke[0]||E.converters[te+" "+ke[0]]){ne=te;break}ae||(ae=te)}ne=ne||ae}if(ne)return ne!==ke[0]&&ke.unshift(ne),z[ne]}function gh(E,P,z,$){var te,ne,ae,Be,ke,nt={},wt=E.dataTypes.slice();if(wt[1])for(ae in E.converters)nt[ae.toLowerCase()]=E.converters[ae];for(ne=wt.shift();ne;)if(E.responseFields[ne]&&(z[E.responseFields[ne]]=P),!ke&&$&&E.dataFilter&&(P=E.dataFilter(P,E.dataType)),ke=ne,ne=wt.shift(),ne){if(ne==="*")ne=ke;else if(ke!=="*"&&ke!==ne){if(ae=nt[ke+" "+ne]||nt["* "+ne],!ae){for(te in nt)if(Be=te.split(" "),Be[1]===ne&&(ae=nt[ke+" "+Be[0]]||nt["* "+Be[0]],ae)){ae===!0?ae=nt[te]:nt[te]!==!0&&(ne=Be[0],wt.unshift(Be[1]));break}}if(ae!==!0)if(ae&&E.throws)P=ae(P);else try{P=ae(P)}catch(Lt){return{state:"parsererror",error:ae?Lt:"No conversion from "+ke+" to "+ne}}}}return{state:"success",data:P}}A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Il.href,type:"GET",isLocal:bi.test(Il.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ku,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(E,P){return P?pc(pc(E,A.ajaxSettings),P):pc(A.ajaxSettings,E)},ajaxPrefilter:Ka(Gs),ajaxTransport:Ka(qi),ajax:function(E,P){typeof E=="object"&&(P=E,E=void 0),P=P||{};var z,$,te,ne,ae,Be,ke,nt,wt,Lt,_t=A.ajaxSetup({},P),Qt=_t.context||_t,ir=_t.context&&(Qt.nodeType||Qt.jquery)?A(Qt):A.event,Tr=A.Deferred(),mr=A.Callbacks("once memory"),Ai=_t.statusCode||{},ei={},xo={},ta="canceled",Sr={readyState:0,getResponseHeader:function(Ir){var mi;if(ke){if(!ne)for(ne={};mi=ou.exec(te);)ne[mi[1].toLowerCase()+" "]=(ne[mi[1].toLowerCase()+" "]||[]).concat(mi[2]);mi=ne[Ir.toLowerCase()+" "]}return mi==null?null:mi.join(", ")},getAllResponseHeaders:function(){return ke?te:null},setRequestHeader:function(Ir,mi){return ke==null&&(Ir=xo[Ir.toLowerCase()]=xo[Ir.toLowerCase()]||Ir,ei[Ir]=mi),this},overrideMimeType:function(Ir){return ke==null&&(_t.mimeType=Ir),this},statusCode:function(Ir){var mi;if(Ir)if(ke)Sr.always(Ir[Sr.status]);else for(mi in Ir)Ai[mi]=[Ai[mi],Ir[mi]];return this},abort:function(Ir){var mi=Ir||ta;return z&&z.abort(mi),ja(0,mi),this}};if(Tr.promise(Sr),_t.url=((E||_t.url||Il.href)+"").replace(mh,Il.protocol+"//"),_t.type=P.method||P.type||_t.method||_t.type,_t.dataTypes=(_t.dataType||"*").toLowerCase().match(vn)||[""],_t.crossDomain==null){Be=G.createElement("a");try{Be.href=_t.url,Be.href=Be.href,_t.crossDomain=su.protocol+"//"+su.host!=Be.protocol+"//"+Be.host}catch{_t.crossDomain=!0}}if(_t.data&&_t.processData&&typeof _t.data!="string"&&(_t.data=A.param(_t.data,_t.traditional)),ys(Gs,_t,P,Sr),ke)return Sr;nt=A.event&&_t.global,nt&&A.active++===0&&A.event.trigger("ajaxStart"),_t.type=_t.type.toUpperCase(),_t.hasContent=!au.test(_t.type),$=_t.url.replace(pa,""),_t.hasContent?_t.data&&_t.processData&&(_t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(_t.data=_t.data.replace($o,"+")):(Lt=_t.url.slice($.length),_t.data&&(_t.processData||typeof _t.data=="string")&&($+=(Al.test($)?"&":"?")+_t.data,delete _t.data),_t.cache===!1&&($=$.replace(Lp,"$1"),Lt=(Al.test($)?"&":"?")+"_="+ph.guid+++Lt),_t.url=$+Lt),_t.ifModified&&(A.lastModified[$]&&Sr.setRequestHeader("If-Modified-Since",A.lastModified[$]),A.etag[$]&&Sr.setRequestHeader("If-None-Match",A.etag[$])),(_t.data&&_t.hasContent&&_t.contentType!==!1||P.contentType)&&Sr.setRequestHeader("Content-Type",_t.contentType),Sr.setRequestHeader("Accept",_t.dataTypes[0]&&_t.accepts[_t.dataTypes[0]]?_t.accepts[_t.dataTypes[0]]+(_t.dataTypes[0]!=="*"?", "+Ku+"; q=0.01":""):_t.accepts["*"]);for(wt in _t.headers)Sr.setRequestHeader(wt,_t.headers[wt]);if(_t.beforeSend&&(_t.beforeSend.call(Qt,Sr,_t)===!1||ke))return Sr.abort();if(ta="abort",mr.add(_t.complete),Sr.done(_t.success),Sr.fail(_t.error),z=ys(qi,_t,P,Sr),!z)ja(-1,"No Transport");else{if(Sr.readyState=1,nt&&ir.trigger("ajaxSend",[Sr,_t]),ke)return Sr;_t.async&&_t.timeout>0&&(ae=t.setTimeout(function(){Sr.abort("timeout")},_t.timeout));try{ke=!1,z.send(ei,ja)}catch(Ir){if(ke)throw Ir;ja(-1,Ir)}}function ja(Ir,mi,Zs,mc){var fa,wr,Vo,ws,Ya,na=mi;ke||(ke=!0,ae&&t.clearTimeout(ae),z=void 0,te=mc||"",Sr.readyState=Ir>0?4:0,fa=Ir>=200&&Ir<300||Ir===304,Zs&&(ws=om(_t,Sr,Zs)),!fa&&A.inArray("script",_t.dataTypes)>-1&&A.inArray("json",_t.dataTypes)<0&&(_t.converters["text script"]=function(){}),ws=gh(_t,ws,Sr,fa),fa?(_t.ifModified&&(Ya=Sr.getResponseHeader("Last-Modified"),Ya&&(A.lastModified[$]=Ya),Ya=Sr.getResponseHeader("etag"),Ya&&(A.etag[$]=Ya)),Ir===204||_t.type==="HEAD"?na="nocontent":Ir===304?na="notmodified":(na=ws.state,wr=ws.data,Vo=ws.error,fa=!Vo)):(Vo=na,(Ir||!na)&&(na="error",Ir<0&&(Ir=0))),Sr.status=Ir,Sr.statusText=(mi||na)+"",fa?Tr.resolveWith(Qt,[wr,na,Sr]):Tr.rejectWith(Qt,[Sr,na,Vo]),Sr.statusCode(Ai),Ai=void 0,nt&&ir.trigger(fa?"ajaxSuccess":"ajaxError",[Sr,_t,fa?wr:Vo]),mr.fireWith(Qt,[Sr,na]),nt&&(ir.trigger("ajaxComplete",[Sr,_t]),--A.active||A.event.trigger("ajaxStop")))}return Sr},getJSON:function(E,P,z){return A.get(E,P,z,"json")},getScript:function(E,P){return A.get(E,void 0,P,"script")}}),A.each(["get","post"],function(E,P){A[P]=function(z,$,te,ne){return H($)&&(ne=ne||te,te=$,$=void 0),A.ajax(A.extend({url:z,type:P,dataType:ne,data:$,success:te},A.isPlainObject(z)&&z))}}),A.ajaxPrefilter(function(E){var P;for(P in E.headers)P.toLowerCase()==="content-type"&&(E.contentType=E.headers[P]||"")}),A._evalUrl=function(E,P,z){return A.ajax({url:E,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function($){A.globalEval($,P,z)}})},A.fn.extend({wrapAll:function(E){var P;return this[0]&&(H(E)&&(E=E.call(this[0])),P=A(E,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&P.insertBefore(this[0]),P.map(function(){for(var z=this;z.firstElementChild;)z=z.firstElementChild;return z}).append(this)),this},wrapInner:function(E){return H(E)?this.each(function(P){A(this).wrapInner(E.call(this,P))}):this.each(function(){var P=A(this),z=P.contents();z.length?z.wrapAll(E):P.append(E)})},wrap:function(E){var P=H(E);return this.each(function(z){A(this).wrapAll(P?E.call(this,z):E)})},unwrap:function(E){return this.parent(E).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}}),A.expr.pseudos.hidden=function(E){return!A.expr.pseudos.visible(E)},A.expr.pseudos.visible=function(E){return!!(E.offsetWidth||E.offsetHeight||E.getClientRects().length)},A.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var fc={0:200,1223:204},Uo=A.ajaxSettings.xhr();V.cors=!!Uo&&"withCredentials"in Uo,V.ajax=Uo=!!Uo,A.ajaxTransport(function(E){var P,z;if(V.cors||Uo&&!E.crossDomain)return{send:function($,te){var ne,ae=E.xhr();if(ae.open(E.type,E.url,E.async,E.username,E.password),E.xhrFields)for(ne in E.xhrFields)ae[ne]=E.xhrFields[ne];E.mimeType&&ae.overrideMimeType&&ae.overrideMimeType(E.mimeType),!E.crossDomain&&!$["X-Requested-With"]&&($["X-Requested-With"]="XMLHttpRequest");for(ne in $)ae.setRequestHeader(ne,$[ne]);P=function(Be){return function(){P&&(P=z=ae.onload=ae.onerror=ae.onabort=ae.ontimeout=ae.onreadystatechange=null,Be==="abort"?ae.abort():Be==="error"?typeof ae.status!="number"?te(0,"error"):te(ae.status,ae.statusText):te(fc[ae.status]||ae.status,ae.statusText,(ae.responseType||"text")!=="text"||typeof ae.responseText!="string"?{binary:ae.response}:{text:ae.responseText},ae.getAllResponseHeaders()))}},ae.onload=P(),z=ae.onerror=ae.ontimeout=P("error"),ae.onabort!==void 0?ae.onabort=z:ae.onreadystatechange=function(){ae.readyState===4&&t.setTimeout(function(){P&&z()})},P=P("abort");try{ae.send(E.hasContent&&E.data||null)}catch(Be){if(P)throw Be}},abort:function(){P&&P()}}}),A.ajaxPrefilter(function(E){E.crossDomain&&(E.contents.script=!1)}),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(E){return A.globalEval(E),E}}}),A.ajaxPrefilter("script",function(E){E.cache===void 0&&(E.cache=!1),E.crossDomain&&(E.type="GET")}),A.ajaxTransport("script",function(E){if(E.crossDomain||E.scriptAttrs){var P,z;return{send:function($,te){P=A("<script>").attr(E.scriptAttrs||{}).prop({charset:E.scriptCharset,src:E.url}).on("load error",z=function(ne){P.remove(),z=null,ne&&te(ne.type==="error"?404:200,ne.type)}),G.head.appendChild(P[0])},abort:function(){z&&z()}}}});var Yu=[],vs=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var E=Yu.pop()||A.expando+"_"+ph.guid++;return this[E]=!0,E}}),A.ajaxPrefilter("json jsonp",function(E,P,z){var $,te,ne,ae=E.jsonp!==!1&&(vs.test(E.url)?"url":typeof E.data=="string"&&(E.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&vs.test(E.data)&&"data");if(ae||E.dataTypes[0]==="jsonp")return $=E.jsonpCallback=H(E.jsonpCallback)?E.jsonpCallback():E.jsonpCallback,ae?E[ae]=E[ae].replace(vs,"$1"+$):E.jsonp!==!1&&(E.url+=(Al.test(E.url)?"&":"?")+E.jsonp+"="+$),E.converters["script json"]=function(){return ne||A.error($+" was not called"),ne[0]},E.dataTypes[0]="json",te=t[$],t[$]=function(){ne=arguments},z.always(function(){te===void 0?A(t).removeProp($):t[$]=te,E[$]&&(E.jsonpCallback=P.jsonpCallback,Yu.push($)),ne&&H(te)&&te(ne[0]),ne=te=void 0}),"script"}),V.createHTMLDocument=function(){var E=G.implementation.createHTMLDocument("").body;return E.innerHTML="<form></form><form></form>",E.childNodes.length===2}(),A.parseHTML=function(E,P,z){if(typeof E!="string")return[];typeof P=="boolean"&&(z=P,P=!1);var $,te,ne;return P||(V.createHTMLDocument?(P=G.implementation.createHTMLDocument(""),$=P.createElement("base"),$.href=G.location.href,P.head.appendChild($)):P=G),te=Tt.exec(E),ne=!z&&[],te?[P.createElement(te[1])]:(te=ct([E],P,ne),ne&&ne.length&&A(ne).remove(),A.merge([],te.childNodes))},A.fn.load=function(E,P,z){var $,te,ne,ae=this,Be=E.indexOf(" ");return Be>-1&&($=qs(E.slice(Be)),E=E.slice(0,Be)),H(P)?(z=P,P=void 0):P&&typeof P=="object"&&(te="POST"),ae.length>0&&A.ajax({url:E,type:te||"GET",dataType:"html",data:P}).done(function(ke){ne=arguments,ae.html($?A("<div>").append(A.parseHTML(ke)).find($):ke)}).always(z&&function(ke,nt){ae.each(function(){z.apply(this,ne||[ke.responseText,nt,ke])})}),this},A.expr.pseudos.animated=function(E){return A.grep(A.timers,function(P){return E===P.elem}).length},A.offset={setOffset:function(E,P,z){var $,te,ne,ae,Be,ke,nt,wt=A.css(E,"position"),Lt=A(E),_t={};wt==="static"&&(E.style.position="relative"),Be=Lt.offset(),ne=A.css(E,"top"),ke=A.css(E,"left"),nt=(wt==="absolute"||wt==="fixed")&&(ne+ke).indexOf("auto")>-1,nt?($=Lt.position(),ae=$.top,te=$.left):(ae=parseFloat(ne)||0,te=parseFloat(ke)||0),H(P)&&(P=P.call(E,z,A.extend({},Be))),P.top!=null&&(_t.top=P.top-Be.top+ae),P.left!=null&&(_t.left=P.left-Be.left+te),"using"in P?P.using.call(E,_t):Lt.css(_t)}},A.fn.extend({offset:function(E){if(arguments.length)return E===void 0?this:this.each(function(te){A.offset.setOffset(this,E,te)});var P,z,$=this[0];if($)return $.getClientRects().length?(P=$.getBoundingClientRect(),z=$.ownerDocument.defaultView,{top:P.top+z.pageYOffset,left:P.left+z.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var E,P,z,$=this[0],te={top:0,left:0};if(A.css($,"position")==="fixed")P=$.getBoundingClientRect();else{for(P=this.offset(),z=$.ownerDocument,E=$.offsetParent||z.documentElement;E&&(E===z.body||E===z.documentElement)&&A.css(E,"position")==="static";)E=E.parentNode;E&&E!==$&&E.nodeType===1&&(te=A(E).offset(),te.top+=A.css(E,"borderTopWidth",!0),te.left+=A.css(E,"borderLeftWidth",!0))}return{top:P.top-te.top-A.css($,"marginTop",!0),left:P.left-te.left-A.css($,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var E=this.offsetParent;E&&A.css(E,"position")==="static";)E=E.offsetParent;return E||nr})}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(E,P){var z=P==="pageYOffset";A.fn[E]=function($){return Zn(this,function(te,ne,ae){var Be;if(le(te)?Be=te:te.nodeType===9&&(Be=te.defaultView),ae===void 0)return Be?Be[P]:te[ne];Be?Be.scrollTo(z?Be.pageXOffset:ae,z?ae:Be.pageYOffset):te[ne]=ae},E,$,arguments.length)}}),A.each(["top","left"],function(E,P){A.cssHooks[P]=ea(V.pixelPosition,function(z,$){if($)return $=fo(z,P),hr.test($)?A(z).position()[P]+"px":$})}),A.each({Height:"height",Width:"width"},function(E,P){A.each({padding:"inner"+E,content:P,"":"outer"+E},function(z,$){A.fn[$]=function(te,ne){var ae=arguments.length&&(z||typeof te!="boolean"),Be=z||(te===!0||ne===!0?"margin":"border");return Zn(this,function(ke,nt,wt){var Lt;return le(ke)?$.indexOf("outer")===0?ke["inner"+E]:ke.document.documentElement["client"+E]:ke.nodeType===9?(Lt=ke.documentElement,Math.max(ke.body["scroll"+E],Lt["scroll"+E],ke.body["offset"+E],Lt["offset"+E],Lt["client"+E])):wt===void 0?A.css(ke,nt,Be):A.style(ke,nt,wt,Be)},P,ae?te:void 0,ae)}})}),A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(E,P){A.fn[P]=function(z){return this.on(P,z)}}),A.fn.extend({bind:function(E,P,z){return this.on(E,null,P,z)},unbind:function(E,P){return this.off(E,null,P)},delegate:function(E,P,z,$){return this.on(P,E,z,$)},undelegate:function(E,P,z){return arguments.length===1?this.off(E,"**"):this.off(P,E||"**",z)},hover:function(E,P){return this.mouseenter(E).mouseleave(P||E)}}),A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(E,P){A.fn[P]=function(z,$){return arguments.length>0?this.on(P,null,z,$):this.trigger(P)}});var xs=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;A.proxy=function(E,P){var z,$,te;if(typeof P=="string"&&(z=E[P],P=E,E=z),!!H(E))return $=d.call(arguments,2),te=function(){return E.apply(P||this,$.concat(d.call(arguments)))},te.guid=E.guid=E.guid||A.guid++,te},A.holdReady=function(E){E?A.readyWait++:A.ready(!0)},A.isArray=Array.isArray,A.parseJSON=JSON.parse,A.nodeName=_e,A.isFunction=H,A.isWindow=le,A.camelCase=Un,A.type=oe,A.now=Date.now,A.isNumeric=function(E){var P=A.type(E);return(P==="number"||P==="string")&&!isNaN(E-parseFloat(E))},A.trim=function(E){return E==null?"":(E+"").replace(xs,"$1")};var lu=t.jQuery,bs=t.$;return A.noConflict=function(E){return t.$===A&&(t.$=bs),E&&t.jQuery===A&&(t.jQuery=lu),A},typeof n>"u"&&(t.jQuery=t.$=A),A})})(UL);var Gae=UL.exports;const Pf=O1(Gae);function Cu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VL(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var P1={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},I1={duration:.5,overwrite:!1,delay:0},bT,Ma,uo,pl=1e8,Si=1/pl,x6=Math.PI*2,Zae=x6/4,Xae=0,WL=Math.sqrt,Kae=Math.cos,Yae=Math.sin,Oa=function(t){return typeof t=="string"},ho=function(t){return typeof t=="function"},$u=function(t){return typeof t=="number"},HL=function(t){return typeof t>"u"},Yc=function(t){return typeof t=="object"},ms=function(t){return t!==!1},wT=function(){return typeof window<"u"},gv=function(t){return ho(t)||Oa(t)},qL=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Da=Array.isArray,b6=/(?:-?\.?\d|\.)+/gi,Jae=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,GL=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,y4=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Qae=/[+-]=-?[.\d]+/,ZL=/[^,'"\[\]\s]+/gi,ese=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,no,sl,w6,ET,Us={},j2={},XL,KL=function(t){return(j2=bp(t,Us))&&wp},YL=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},$2=function(t,n){return!n&&console.warn(t)},JL=function(t,n){return t&&(Us[t]=n)&&j2&&(j2[t]=n)||Us},W0=function(){return 0},tse={suppressEvents:!0,isStart:!0,kill:!1},Uv={suppressEvents:!0,kill:!1},nse={suppressEvents:!0},TT={},Gd=[],E6={},QL,cl={},v4={},iI=30,Vv=[],ST="",kT=function(t){var n=t[0],i,c;if(Yc(n)||ho(n)||(t=[t]),!(i=(n._gsap||{}).harness)){for(c=Vv.length;c--&&!Vv[c].targetTest(n););i=Vv[c]}for(c=t.length;c--;)t[c]&&(t[c]._gsap||(t[c]._gsap=new Ise(t[c],i)))||t.splice(c,1);return t},Jg=function(t){return t._gsap||kT(fl(t))[0]._gsap},rse=function(t,n,i){return(i=t[n])&&ho(i)?t[n]():HL(i)&&t.getAttribute&&t.getAttribute(n)||i},Zu=function(t,n){return(t=t.split(",")).forEach(n)||t},ise=function(t){return Math.round(t*1e5)/1e5||0},la=function(t){return Math.round(t*1e7)/1e7||0},ez=function(t,n){var i=n.charAt(0),c=parseFloat(n.substr(2));return t=parseFloat(t),i==="+"?t+c:i==="-"?t-c:i==="*"?t*c:t/c},ose=function(t,n){for(var i=n.length,c=0;t.indexOf(n[c])<0&&++c<i;);return c<i},U2=function(){var t=Gd.length,n=Gd.slice(0),i,c;for(E6={},Gd.length=0,i=0;i<t;i++)c=n[i],c&&c._lazy&&(c.render(c._lazy[0],c._lazy[1],!0)._lazy=0)},tz=function(t,n,i,c){Gd.length&&!Ma&&U2(),t.render(n,i,c||Ma&&n<0&&(t._initted||t._startAt)),Gd.length&&!Ma&&U2()},nz=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(ZL).length<2?n:Oa(t)?t.trim():t},rz=function(t){return t},Tl=function(t,n){for(var i in n)i in t||(t[i]=n[i]);return t},ase=function(t){return function(n,i){for(var c in i)c in n||c==="duration"&&t||c==="ease"||(n[c]=i[c])}},bp=function(t,n){for(var i in n)t[i]=n[i];return t},oI=function e(t,n){for(var i in n)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=Yc(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},V2=function(t,n){var i={},c;for(c in t)c in n||(i[c]=t[c]);return i},Qg=function(t){var n=t.parent||no,i=t.keyframes?ase(Da(t.keyframes)):Tl;if(ms(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},sse=function(t,n){for(var i=t.length,c=i===n.length;c&&i--&&t[i]===n[i];);return i<0},iz=function(t,n,i,c,d){i===void 0&&(i="_first"),c===void 0&&(c="_last");var f=t[c],a;if(d)for(a=n[d];f&&f[d]>a;)f=f._prev;return f?(n._next=f._next,f._next=n):(n._next=t[i],t[i]=n),n._next?n._next._prev=n:t[c]=n,n._prev=f,n.parent=n._dp=t,n},Cb=function(t,n,i,c){i===void 0&&(i="_first"),c===void 0&&(c="_last");var d=n._prev,f=n._next;d?d._next=f:t[i]===n&&(t[i]=f),f?f._prev=d:t[c]===n&&(t[c]=d),n._next=n._prev=n.parent=null},th=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},ap=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},lse=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},T6=function(t,n,i,c){return t._startAt&&(Ma?t._startAt.revert(Uv):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,c))},cse=function e(t){return!t||t._ts&&e(t.parent)},aI=function(t){return t._repeat?A1(t._tTime,t=t.duration()+t._rDelay)*t:0},A1=function(t,n){var i=Math.floor(t/=n);return t&&i===t?i-1:i},W2=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Pb=function(t){return t._end=la(t._start+(t._tDur/Math.abs(t._ts||t._rts||Si)||0))},Ib=function(t,n){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=la(i._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),Pb(t),i._dirty||ap(i,t)),t},oz=function(t,n){var i;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(i=W2(t.rawTime(),n),(!n._dur||w_(0,n.totalDuration(),i)-n._tTime>Si)&&n.render(i,!0)),ap(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-Si}},Bc=function(t,n,i,c){return n.parent&&th(n),n._start=la(($u(i)?i:i||t!==no?al(t,i,n):t._time)+n._delay),n._end=la(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),iz(t,n,"_first","_last",t._sort?"_start":0),S6(n)||(t._recent=n),c||oz(t,n),t._ts<0&&Ib(t,t._tTime),t},az=function(t,n){return(Us.ScrollTrigger||YL("scrollTrigger",n))&&Us.ScrollTrigger.create(n,t)},sz=function(t,n,i,c,d){if(IT(t,n,d),!t._initted)return 1;if(!i&&t._pt&&!Ma&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&QL!==ec.frame)return Gd.push(t),t._lazy=[d,c],1},use=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},S6=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},dse=function(t,n,i,c){var d=t.ratio,f=n<0||!n&&(!t._start&&use(t)&&!(!t._initted&&S6(t))||(t._ts<0||t._dp._ts<0)&&!S6(t))?0:1,a=t._rDelay,v=0,S,M,R;if(a&&t._repeat&&(v=w_(0,t._tDur,n),M=A1(v,a),t._yoyo&&M&1&&(f=1-f),M!==A1(t._tTime,a)&&(d=1-f,t.vars.repeatRefresh&&t._initted&&t.invalidate())),f!==d||Ma||c||t._zTime===Si||!n&&t._zTime){if(!t._initted&&sz(t,n,c,i,v))return;for(R=t._zTime,t._zTime=n||(i?Si:0),i||(i=n&&!R),t.ratio=f,t._from&&(f=1-f),t._time=0,t._tTime=v,S=t._pt;S;)S.r(f,S.d),S=S._next;n<0&&T6(t,n,i,!0),t._onUpdate&&!i&&ml(t,"onUpdate"),v&&t._repeat&&!i&&t.parent&&ml(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===f&&(f&&th(t,1),!i&&!Ma&&(ml(t,f?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},hse=function(t,n,i){var c;if(i>n)for(c=t._first;c&&c._start<=i;){if(c.data==="isPause"&&c._start>n)return c;c=c._next}else for(c=t._last;c&&c._start>=i;){if(c.data==="isPause"&&c._start<n)return c;c=c._prev}},M1=function(t,n,i,c){var d=t._repeat,f=la(n)||0,a=t._tTime/t._tDur;return a&&!c&&(t._time*=f/t._dur),t._dur=f,t._tDur=d?d<0?1e10:la(f*(d+1)+t._rDelay*d):f,a>0&&!c&&Ib(t,t._tTime=t._tDur*a),t.parent&&Pb(t),i||ap(t.parent,t),t},sI=function(t){return t instanceof No?ap(t):M1(t,t._dur)},pse={_start:0,endTime:W0,totalDuration:W0},al=function e(t,n,i){var c=t.labels,d=t._recent||pse,f=t.duration()>=pl?d.endTime(!1):t._dur,a,v,S;return Oa(n)&&(isNaN(n)||n in c)?(v=n.charAt(0),S=n.substr(-1)==="%",a=n.indexOf("="),v==="<"||v===">"?(a>=0&&(n=n.replace(/=/,"")),(v==="<"?d._start:d.endTime(d._repeat>=0))+(parseFloat(n.substr(1))||0)*(S?(a<0?d:i).totalDuration()/100:1)):a<0?(n in c||(c[n]=f),c[n]):(v=parseFloat(n.charAt(a-1)+n.substr(a+1)),S&&i&&(v=v/100*(Da(i)?i[0]:i).totalDuration()),a>1?e(t,n.substr(0,a-1),i)+v:f+v)):n==null?f:+n},e0=function(t,n,i){var c=$u(n[1]),d=(c?2:1)+(t<2?0:1),f=n[d],a,v;if(c&&(f.duration=n[1]),f.parent=i,t){for(a=f,v=i;v&&!("immediateRender"in a);)a=v.vars.defaults||{},v=ms(v.vars.inherit)&&v.parent;f.immediateRender=ms(a.immediateRender),t<2?f.runBackwards=1:f.startAt=n[d-1]}return new So(n[0],f,n[d+1])},dh=function(t,n){return t||t===0?n(t):n},w_=function(t,n,i){return i<t?t:i>n?n:i},nh=function(t,n){return!Oa(t)||!(n=ese.exec(t))?"":n[1]},fse=function(t,n,i){return dh(i,function(c){return w_(t,n,c)})},k6=[].slice,lz=function(t,n){return t&&Yc(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&Yc(t[0]))&&!t.nodeType&&t!==sl},mse=function(t,n,i){return i===void 0&&(i=[]),t.forEach(function(c){var d;return Oa(c)&&!n||lz(c,1)?(d=i).push.apply(d,fl(c)):i.push(c)})||i},fl=function(t,n,i){return uo&&!n&&uo.selector?uo.selector(t):Oa(t)&&!i&&(w6||!D1())?k6.call((n||ET).querySelectorAll(t),0):Da(t)?mse(t,i):lz(t)?k6.call(t,0):t?[t]:[]},C6=function(t){return t=fl(t)[0]||$2("Invalid scope")||{},function(n){var i=t.current||t.nativeElement||t;return fl(n,i.querySelectorAll?i:i===t?$2("Invalid scope")||ET.createElement("div"):t)}},cz=function(t){return t.sort(function(){return .5-Math.random()})},uz=function(t){if(ho(t))return t;var n=Yc(t)?t:{each:t},i=sp(n.ease),c=n.from||0,d=parseFloat(n.base)||0,f={},a=c>0&&c<1,v=isNaN(c)||a,S=n.axis,M=c,R=c;return Oa(c)?M=R={center:.5,edges:.5,end:1}[c]||0:!a&&v&&(M=c[0],R=c[1]),function(N,W,V){var H=(V||n).length,le=f[H],G,X,Q,oe,he,be,A,Re,_e;if(!le){if(_e=n.grid==="auto"?0:(n.grid||[1,pl])[1],!_e){for(A=-pl;A<(A=V[_e++].getBoundingClientRect().left)&&_e<H;);_e--}for(le=f[H]=[],G=v?Math.min(_e,H)*M-.5:c%_e,X=_e===pl?0:v?H*R/_e-.5:c/_e|0,A=0,Re=pl,be=0;be<H;be++)Q=be%_e-G,oe=X-(be/_e|0),le[be]=he=S?Math.abs(S==="y"?oe:Q):WL(Q*Q+oe*oe),he>A&&(A=he),he<Re&&(Re=he);c==="random"&&cz(le),le.max=A-Re,le.min=Re,le.v=H=(parseFloat(n.amount)||parseFloat(n.each)*(_e>H?H-1:S?S==="y"?H/_e:_e:Math.max(_e,H/_e))||0)*(c==="edges"?-1:1),le.b=H<0?d-H:d,le.u=nh(n.amount||n.each)||0,i=i&&H<0?vz(i):i}return H=(le[N]-le.min)/le.max||0,la(le.b+(i?i(H):H)*le.v)+le.u}},P6=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var c=la(Math.round(parseFloat(i)/t)*t*n);return(c-c%1)/n+($u(i)?0:nh(i))}},dz=function(t,n){var i=Da(t),c,d;return!i&&Yc(t)&&(c=i=t.radius||pl,t.values?(t=fl(t.values),(d=!$u(t[0]))&&(c*=c)):t=P6(t.increment)),dh(n,i?ho(t)?function(f){return d=t(f),Math.abs(d-f)<=c?d:f}:function(f){for(var a=parseFloat(d?f.x:f),v=parseFloat(d?f.y:0),S=pl,M=0,R=t.length,N,W;R--;)d?(N=t[R].x-a,W=t[R].y-v,N=N*N+W*W):N=Math.abs(t[R]-a),N<S&&(S=N,M=R);return M=!c||S<=c?t[M]:f,d||M===f||$u(f)?M:M+nh(f)}:P6(t))},hz=function(t,n,i,c){return dh(Da(t)?!n:i===!0?!!(i=0):!c,function(){return Da(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(c=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(n-t+i*.99))/i)*i*c)/c})},gse=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(c){return n.reduce(function(d,f){return f(d)},c)}},_se=function(t,n){return function(i){return t(parseFloat(i))+(n||nh(i))}},yse=function(t,n,i){return fz(t,n,0,1,i)},pz=function(t,n,i){return dh(i,function(c){return t[~~n(c)]})},vse=function e(t,n,i){var c=n-t;return Da(t)?pz(t,e(0,t.length),n):dh(i,function(d){return(c+(d-t)%c)%c+t})},xse=function e(t,n,i){var c=n-t,d=c*2;return Da(t)?pz(t,e(0,t.length-1),n):dh(i,function(f){return f=(d+(f-t)%d)%d||0,t+(f>c?d-f:f)})},CT=function(t){for(var n=0,i="",c,d,f,a;~(c=t.indexOf("random(",n));)f=t.indexOf(")",c),a=t.charAt(c+7)==="[",d=t.substr(c+7,f-c-7).match(a?ZL:b6),i+=t.substr(n,c-n)+hz(a?d:+d[0],a?0:+d[1],+d[2]||1e-5),n=f+1;return i+t.substr(n,t.length-n)},fz=function(t,n,i,c,d){var f=n-t,a=c-i;return dh(d,function(v){return i+((v-t)/f*a||0)})},bse=function e(t,n,i,c){var d=isNaN(t+n)?0:function(W){return(1-W)*t+W*n};if(!d){var f=Oa(t),a={},v,S,M,R,N;if(i===!0&&(c=1)&&(i=null),f)t={p:t},n={p:n};else if(Da(t)&&!Da(n)){for(M=[],R=t.length,N=R-2,S=1;S<R;S++)M.push(e(t[S-1],t[S]));R--,d=function(V){V*=R;var H=Math.min(N,~~V);return M[H](V-H)},i=n}else c||(t=bp(Da(t)?[]:{},t));if(!M){for(v in n)PT.call(a,t,v,"get",n[v]);d=function(V){return MT(V,a)||(f?t.p:t)}}}return dh(i,d)},lI=function(t,n,i){var c=t.labels,d=pl,f,a,v;for(f in c)a=c[f]-n,a<0==!!i&&a&&d>(a=Math.abs(a))&&(v=f,d=a);return v},ml=function(t,n,i){var c=t.vars,d=c[n],f=uo,a=t._ctx,v,S,M;if(d)return v=c[n+"Params"],S=c.callbackScope||t,i&&Gd.length&&U2(),a&&(uo=a),M=v?d.apply(S,v):d.call(S),uo=f,M},Mg=function(t){return th(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Ma),t.progress()<1&&ml(t,"onInterrupt"),t},Xf,mz=[],gz=function(t){if(wT()&&t){t=!t.name&&t.default||t;var n=t.name,i=ho(t),c=n&&!i&&t.init?function(){this._props=[]}:t,d={init:W0,render:MT,add:PT,kill:$se,modifier:jse,rawVars:0},f={targetTest:0,get:0,getSetter:Sz,aliases:{},register:0};if(D1(),t!==c){if(cl[n])return;Tl(c,Tl(V2(t,d),f)),bp(c.prototype,bp(d,V2(t,f))),cl[c.prop=n]=c,t.targetTest&&(Vv.push(c),TT[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}JL(n,c),t.register&&t.register(wp,c,em)}else t&&mz.push(t)},Ei=255,Dg={aqua:[0,Ei,Ei],lime:[0,Ei,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ei],navy:[0,0,128],white:[Ei,Ei,Ei],olive:[128,128,0],yellow:[Ei,Ei,0],orange:[Ei,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ei,0,0],pink:[Ei,192,203],cyan:[0,Ei,Ei],transparent:[Ei,Ei,Ei,0]},x4=function(t,n,i){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(i-n)*t*6:t<.5?i:t*3<2?n+(i-n)*(2/3-t)*6:n)*Ei+.5|0},_z=function(t,n,i){var c=t?$u(t)?[t>>16,t>>8&Ei,t&Ei]:0:Dg.black,d,f,a,v,S,M,R,N,W,V;if(!c){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Dg[t])c=Dg[t];else if(t.charAt(0)==="#"){if(t.length<6&&(d=t.charAt(1),f=t.charAt(2),a=t.charAt(3),t="#"+d+d+f+f+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return c=parseInt(t.substr(1,6),16),[c>>16,c>>8&Ei,c&Ei,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),c=[t>>16,t>>8&Ei,t&Ei]}else if(t.substr(0,3)==="hsl"){if(c=V=t.match(b6),!n)v=+c[0]%360/360,S=+c[1]/100,M=+c[2]/100,f=M<=.5?M*(S+1):M+S-M*S,d=M*2-f,c.length>3&&(c[3]*=1),c[0]=x4(v+1/3,d,f),c[1]=x4(v,d,f),c[2]=x4(v-1/3,d,f);else if(~t.indexOf("="))return c=t.match(Jae),i&&c.length<4&&(c[3]=1),c}else c=t.match(b6)||Dg.transparent;c=c.map(Number)}return n&&!V&&(d=c[0]/Ei,f=c[1]/Ei,a=c[2]/Ei,R=Math.max(d,f,a),N=Math.min(d,f,a),M=(R+N)/2,R===N?v=S=0:(W=R-N,S=M>.5?W/(2-R-N):W/(R+N),v=R===d?(f-a)/W+(f<a?6:0):R===f?(a-d)/W+2:(d-f)/W+4,v*=60),c[0]=~~(v+.5),c[1]=~~(S*100+.5),c[2]=~~(M*100+.5)),i&&c.length<4&&(c[3]=1),c},yz=function(t){var n=[],i=[],c=-1;return t.split(l1).forEach(function(d){var f=d.match(GL)||[];n.push.apply(n,f),i.push(c+=f.length+1)}),n.c=i,n},cI=function(t,n,i){var c="",d=(t+c).match(l1),f=n?"hsla(":"rgba(",a=0,v,S,M,R;if(!d)return t;if(d=d.map(function(N){return(N=_z(N,n,1))&&f+(n?N[0]+","+N[1]+"%,"+N[2]+"%,"+N[3]:N.join(","))+")"}),i&&(M=yz(t),v=i.c,v.join(c)!==M.c.join(c)))for(S=t.replace(l1,"1").split(GL),R=S.length-1;a<R;a++)c+=S[a]+(~v.indexOf(a)?d.shift()||f+"0,0,0,0)":(M.length?M:d.length?d:i).shift());if(!S)for(S=t.split(l1),R=S.length-1;a<R;a++)c+=S[a]+d[a];return c+S[R]},l1=function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Dg)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),wse=/hsl[a]?\(/,Ese=function(t){var n=t.join(" "),i;if(l1.lastIndex=0,l1.test(n))return i=wse.test(n),t[1]=cI(t[1],i),t[0]=cI(t[0],i,yz(t[1])),!0},H0,ec=function(){var e=Date.now,t=500,n=33,i=e(),c=i,d=1e3/240,f=d,a=[],v,S,M,R,N,W,V=function H(le){var G=e()-c,X=le===!0,Q,oe,he,be;if(G>t&&(i+=G-n),c+=G,he=c-i,Q=he-f,(Q>0||X)&&(be=++R.frame,N=he-R.time*1e3,R.time=he=he/1e3,f+=Q+(Q>=d?4:d-Q),oe=1),X||(v=S(H)),oe)for(W=0;W<a.length;W++)a[W](he,N,be,le)};return R={time:0,frame:0,tick:function(){V(!0)},deltaRatio:function(le){return N/(1e3/(le||60))},wake:function(){XL&&(!w6&&wT()&&(sl=w6=window,ET=sl.document||{},Us.gsap=wp,(sl.gsapVersions||(sl.gsapVersions=[])).push(wp.version),KL(j2||sl.GreenSockGlobals||!sl.gsap&&sl||{}),M=sl.requestAnimationFrame,mz.forEach(gz)),v&&R.sleep(),S=M||function(le){return setTimeout(le,f-R.time*1e3+1|0)},H0=1,V(2))},sleep:function(){(M?sl.cancelAnimationFrame:clearTimeout)(v),H0=0,S=W0},lagSmoothing:function(le,G){t=le||1/0,n=Math.min(G||33,t)},fps:function(le){d=1e3/(le||240),f=R.time*1e3+d},add:function(le,G,X){var Q=G?function(oe,he,be,A){le(oe,he,be,A),R.remove(Q)}:le;return R.remove(le),a[X?"unshift":"push"](Q),D1(),Q},remove:function(le,G){~(G=a.indexOf(le))&&a.splice(G,1)&&W>=G&&W--},_listeners:a},R}(),D1=function(){return!H0&&ec.wake()},Br={},Tse=/^[\d.\-M][\d.\-,\s]/,Sse=/["']/g,kse=function(t){for(var n={},i=t.substr(1,t.length-3).split(":"),c=i[0],d=1,f=i.length,a,v,S;d<f;d++)v=i[d],a=d!==f-1?v.lastIndexOf(","):v.length,S=v.substr(0,a),n[c]=isNaN(S)?S.replace(Sse,"").trim():+S,c=v.substr(a+1).trim();return n},Cse=function(t){var n=t.indexOf("(")+1,i=t.indexOf(")"),c=t.indexOf("(",n);return t.substring(n,~c&&c<i?t.indexOf(")",i+1):i)},Pse=function(t){var n=(t+"").split("("),i=Br[n[0]];return i&&n.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[kse(n[1])]:Cse(t).split(",").map(nz)):Br._CE&&Tse.test(t)?Br._CE("",t):i},vz=function(t){return function(n){return 1-t(1-n)}},xz=function e(t,n){for(var i=t._first,c;i;)i instanceof No?e(i,n):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==n&&(i.timeline?e(i.timeline,n):(c=i._ease,i._ease=i._yEase,i._yEase=c,i._yoyo=n)),i=i._next},sp=function(t,n){return t&&(ho(t)?t:Br[t]||Pse(t))||n},Rp=function(t,n,i,c){i===void 0&&(i=function(v){return 1-n(1-v)}),c===void 0&&(c=function(v){return v<.5?n(v*2)/2:1-n((1-v)*2)/2});var d={easeIn:n,easeOut:i,easeInOut:c},f;return Zu(t,function(a){Br[a]=Us[a]=d,Br[f=a.toLowerCase()]=i;for(var v in d)Br[f+(v==="easeIn"?".in":v==="easeOut"?".out":".inOut")]=Br[a+"."+v]=d[v]}),d},bz=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},b4=function e(t,n,i){var c=n>=1?n:1,d=(i||(t?.3:.45))/(n<1?n:1),f=d/x6*(Math.asin(1/c)||0),a=function(M){return M===1?1:c*Math.pow(2,-10*M)*Yae((M-f)*d)+1},v=t==="out"?a:t==="in"?function(S){return 1-a(1-S)}:bz(a);return d=x6/d,v.config=function(S,M){return e(t,S,M)},v},w4=function e(t,n){n===void 0&&(n=1.70158);var i=function(f){return f?--f*f*((n+1)*f+n)+1:0},c=t==="out"?i:t==="in"?function(d){return 1-i(1-d)}:bz(i);return c.config=function(d){return e(t,d)},c};Zu("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;Rp(e+",Power"+(n-1),t?function(i){return Math.pow(i,n)}:function(i){return i},function(i){return 1-Math.pow(1-i,n)},function(i){return i<.5?Math.pow(i*2,n)/2:1-Math.pow((1-i)*2,n)/2})});Br.Linear.easeNone=Br.none=Br.Linear.easeIn;Rp("Elastic",b4("in"),b4("out"),b4());(function(e,t){var n=1/t,i=2*n,c=2.5*n,d=function(a){return a<n?e*a*a:a<i?e*Math.pow(a-1.5/t,2)+.75:a<c?e*(a-=2.25/t)*a+.9375:e*Math.pow(a-2.625/t,2)+.984375};Rp("Bounce",function(f){return 1-d(1-f)},d)})(7.5625,2.75);Rp("Expo",function(e){return e?Math.pow(2,10*(e-1)):0});Rp("Circ",function(e){return-(WL(1-e*e)-1)});Rp("Sine",function(e){return e===1?1:-Kae(e*Zae)+1});Rp("Back",w4("in"),w4("out"),w4());Br.SteppedEase=Br.steps=Us.SteppedEase={config:function(t,n){t===void 0&&(t=1);var i=1/t,c=t+(n?0:1),d=n?1:0,f=1-Si;return function(a){return((c*w_(0,f,a)|0)+d)*i}}};I1.ease=Br["quad.out"];Zu("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return ST+=e+","+e+"Params,"});var Ise=function(t,n){this.id=Xae++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:rse,this.set=n?n.getSetter:Sz},q0=function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,M1(this,+n.duration,1,1),this.data=n.data,uo&&(this._ctx=uo,uo.data.push(this)),H0||ec.wake()}var t=e.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,M1(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,c){if(D1(),!arguments.length)return this._tTime;var d=this._dp;if(d&&d.smoothChildTiming&&this._ts){for(Ib(this,i),!d._dp||d.parent||oz(d,this);d&&d.parent;)d.parent._time!==d._start+(d._ts>=0?d._tTime/d._ts:(d.totalDuration()-d._tTime)/-d._ts)&&d.totalTime(d._tTime,!0),d=d.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Bc(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!c||this._initted&&Math.abs(this._zTime)===Si||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),tz(this,i,c)),this},t.time=function(i,c){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+aI(this))%(this._dur+this._rDelay)||(i?this._dur:0),c):this._time},t.totalProgress=function(i,c){return arguments.length?this.totalTime(this.totalDuration()*i,c):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(i,c){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+aI(this),c):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(i,c){var d=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*d,c):this._repeat?A1(this._tTime,d)+1:1},t.timeScale=function(i){if(!arguments.length)return this._rts===-Si?0:this._rts;if(this._rts===i)return this;var c=this.parent&&this._ts?W2(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Si?0:this._rts,this.totalTime(w_(-Math.abs(this._delay),this._tDur,c),!0),Pb(this),lse(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(D1(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Si&&(this._tTime-=Si)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var c=this.parent||this._dp;return c&&(c._sort||!this.parent)&&Bc(c,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(ms(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var c=this.parent||this._dp;return c?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?W2(c.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=nse);var c=Ma;return Ma=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ma=c,this},t.globalTime=function(i){for(var c=this,d=arguments.length?i:c.rawTime();c;)d=c._start+d/(c._ts||1),c=c._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(i):d},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,sI(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var c=this._time;return this._rDelay=i,sI(this),c?this.time(c):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,c){return this.totalTime(al(this,i),ms(c))},t.restart=function(i,c){return this.play().totalTime(i?-this._delay:0,ms(c))},t.play=function(i,c){return i!=null&&this.seek(i,c),this.reversed(!1).paused(!1)},t.reverse=function(i,c){return i!=null&&this.seek(i||this.totalDuration(),c),this.reversed(!0).paused(!1)},t.pause=function(i,c){return i!=null&&this.seek(i,c),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Si:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Si,this},t.isActive=function(){var i=this.parent||this._dp,c=this._start,d;return!!(!i||this._ts&&this._initted&&i.isActive()&&(d=i.rawTime(!0))>=c&&d<this.endTime(!0)-Si)},t.eventCallback=function(i,c,d){var f=this.vars;return arguments.length>1?(c?(f[i]=c,d&&(f[i+"Params"]=d),i==="onUpdate"&&(this._onUpdate=c)):delete f[i],this):f[i]},t.then=function(i){var c=this;return new Promise(function(d){var f=ho(i)?i:rz,a=function(){var S=c.then;c.then=null,ho(f)&&(f=f(c))&&(f.then||f===c)&&(c.then=S),d(f),c.then=S};c._initted&&c.totalProgress()===1&&c._ts>=0||!c._tTime&&c._ts<0?a():c._prom=a})},t.kill=function(){Mg(this)},e}();Tl(q0.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Si,_prom:0,_ps:!1,_rts:1});var No=function(e){VL(t,e);function t(i,c){var d;return i===void 0&&(i={}),d=e.call(this,i)||this,d.labels={},d.smoothChildTiming=!!i.smoothChildTiming,d.autoRemoveChildren=!!i.autoRemoveChildren,d._sort=ms(i.sortChildren),no&&Bc(i.parent||no,Cu(d),c),i.reversed&&d.reverse(),i.paused&&d.paused(!0),i.scrollTrigger&&az(Cu(d),i.scrollTrigger),d}var n=t.prototype;return n.to=function(c,d,f){return e0(0,arguments,this),this},n.from=function(c,d,f){return e0(1,arguments,this),this},n.fromTo=function(c,d,f,a){return e0(2,arguments,this),this},n.set=function(c,d,f){return d.duration=0,d.parent=this,Qg(d).repeatDelay||(d.repeat=0),d.immediateRender=!!d.immediateRender,new So(c,d,al(this,f),1),this},n.call=function(c,d,f){return Bc(this,So.delayedCall(0,c,d),f)},n.staggerTo=function(c,d,f,a,v,S,M){return f.duration=d,f.stagger=f.stagger||a,f.onComplete=S,f.onCompleteParams=M,f.parent=this,new So(c,f,al(this,v)),this},n.staggerFrom=function(c,d,f,a,v,S,M){return f.runBackwards=1,Qg(f).immediateRender=ms(f.immediateRender),this.staggerTo(c,d,f,a,v,S,M)},n.staggerFromTo=function(c,d,f,a,v,S,M,R){return a.startAt=f,Qg(a).immediateRender=ms(a.immediateRender),this.staggerTo(c,d,a,v,S,M,R)},n.render=function(c,d,f){var a=this._time,v=this._dirty?this.totalDuration():this._tDur,S=this._dur,M=c<=0?0:la(c),R=this._zTime<0!=c<0&&(this._initted||!S),N,W,V,H,le,G,X,Q,oe,he,be,A;if(this!==no&&M>v&&c>=0&&(M=v),M!==this._tTime||f||R){if(a!==this._time&&S&&(M+=this._time-a,c+=this._time-a),N=M,oe=this._start,Q=this._ts,G=!Q,R&&(S||(a=this._zTime),(c||!d)&&(this._zTime=c)),this._repeat){if(be=this._yoyo,le=S+this._rDelay,this._repeat<-1&&c<0)return this.totalTime(le*100+c,d,f);if(N=la(M%le),M===v?(H=this._repeat,N=S):(H=~~(M/le),H&&H===M/le&&(N=S,H--),N>S&&(N=S)),he=A1(this._tTime,le),!a&&this._tTime&&he!==H&&this._tTime-he*le-this._dur<=0&&(he=H),be&&H&1&&(N=S-N,A=1),H!==he&&!this._lock){var Re=be&&he&1,_e=Re===(be&&H&1);if(H<he&&(Re=!Re),a=Re?0:M%S?S:M,this._lock=1,this.render(a||(A?0:la(H*le)),d,!S)._lock=0,this._tTime=M,!d&&this.parent&&ml(this,"onRepeat"),this.vars.repeatRefresh&&!A&&(this.invalidate()._lock=1),a&&a!==this._time||G!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(S=this._dur,v=this._tDur,_e&&(this._lock=2,a=Re?S:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!A&&this.invalidate()),this._lock=0,!this._ts&&!G)return this;xz(this,A)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(X=hse(this,la(a),la(N)),X&&(M-=N-(N=X._start))),this._tTime=M,this._time=N,this._act=!Q,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=c,a=0),!a&&N&&!d&&!H&&(ml(this,"onStart"),this._tTime!==M))return this;if(N>=a&&c>=0)for(W=this._first;W;){if(V=W._next,(W._act||N>=W._start)&&W._ts&&X!==W){if(W.parent!==this)return this.render(c,d,f);if(W.render(W._ts>0?(N-W._start)*W._ts:(W._dirty?W.totalDuration():W._tDur)+(N-W._start)*W._ts,d,f),N!==this._time||!this._ts&&!G){X=0,V&&(M+=this._zTime=-Si);break}}W=V}else{W=this._last;for(var ze=c<0?c:N;W;){if(V=W._prev,(W._act||ze<=W._end)&&W._ts&&X!==W){if(W.parent!==this)return this.render(c,d,f);if(W.render(W._ts>0?(ze-W._start)*W._ts:(W._dirty?W.totalDuration():W._tDur)+(ze-W._start)*W._ts,d,f||Ma&&(W._initted||W._startAt)),N!==this._time||!this._ts&&!G){X=0,V&&(M+=this._zTime=ze?-Si:Si);break}}W=V}}if(X&&!d&&(this.pause(),X.render(N>=a?0:-Si)._zTime=N>=a?1:-1,this._ts))return this._start=oe,Pb(this),this.render(c,d,f);this._onUpdate&&!d&&ml(this,"onUpdate",!0),(M===v&&this._tTime>=this.totalDuration()||!M&&a)&&(oe===this._start||Math.abs(Q)!==Math.abs(this._ts))&&(this._lock||((c||!S)&&(M===v&&this._ts>0||!M&&this._ts<0)&&th(this,1),!d&&!(c<0&&!a)&&(M||a||!v)&&(ml(this,M===v&&c>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(M<v&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(c,d){var f=this;if($u(d)||(d=al(this,d,c)),!(c instanceof q0)){if(Da(c))return c.forEach(function(a){return f.add(a,d)}),this;if(Oa(c))return this.addLabel(c,d);if(ho(c))c=So.delayedCall(0,c);else return this}return this!==c?Bc(this,c,d):this},n.getChildren=function(c,d,f,a){c===void 0&&(c=!0),d===void 0&&(d=!0),f===void 0&&(f=!0),a===void 0&&(a=-pl);for(var v=[],S=this._first;S;)S._start>=a&&(S instanceof So?d&&v.push(S):(f&&v.push(S),c&&v.push.apply(v,S.getChildren(!0,d,f)))),S=S._next;return v},n.getById=function(c){for(var d=this.getChildren(1,1,1),f=d.length;f--;)if(d[f].vars.id===c)return d[f]},n.remove=function(c){return Oa(c)?this.removeLabel(c):ho(c)?this.killTweensOf(c):(Cb(this,c),c===this._recent&&(this._recent=this._last),ap(this))},n.totalTime=function(c,d){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=la(ec.time-(this._ts>0?c/this._ts:(this.totalDuration()-c)/-this._ts))),e.prototype.totalTime.call(this,c,d),this._forcing=0,this):this._tTime},n.addLabel=function(c,d){return this.labels[c]=al(this,d),this},n.removeLabel=function(c){return delete this.labels[c],this},n.addPause=function(c,d,f){var a=So.delayedCall(0,d||W0,f);return a.data="isPause",this._hasPause=1,Bc(this,a,al(this,c))},n.removePause=function(c){var d=this._first;for(c=al(this,c);d;)d._start===c&&d.data==="isPause"&&th(d),d=d._next},n.killTweensOf=function(c,d,f){for(var a=this.getTweensOf(c,f),v=a.length;v--;)zd!==a[v]&&a[v].kill(c,d);return this},n.getTweensOf=function(c,d){for(var f=[],a=fl(c),v=this._first,S=$u(d),M;v;)v instanceof So?ose(v._targets,a)&&(S?(!zd||v._initted&&v._ts)&&v.globalTime(0)<=d&&v.globalTime(v.totalDuration())>d:!d||v.isActive())&&f.push(v):(M=v.getTweensOf(a,d)).length&&f.push.apply(f,M),v=v._next;return f},n.tweenTo=function(c,d){d=d||{};var f=this,a=al(f,c),v=d,S=v.startAt,M=v.onStart,R=v.onStartParams,N=v.immediateRender,W,V=So.to(f,Tl({ease:d.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:d.duration||Math.abs((a-(S&&"time"in S?S.time:f._time))/f.timeScale())||Si,onStart:function(){if(f.pause(),!W){var le=d.duration||Math.abs((a-(S&&"time"in S?S.time:f._time))/f.timeScale());V._dur!==le&&M1(V,le,0,1).render(V._time,!0,!0),W=1}M&&M.apply(V,R||[])}},d));return N?V.render(0):V},n.tweenFromTo=function(c,d,f){return this.tweenTo(d,Tl({startAt:{time:al(this,c)}},f))},n.recent=function(){return this._recent},n.nextLabel=function(c){return c===void 0&&(c=this._time),lI(this,al(this,c))},n.previousLabel=function(c){return c===void 0&&(c=this._time),lI(this,al(this,c),1)},n.currentLabel=function(c){return arguments.length?this.seek(c,!0):this.previousLabel(this._time+Si)},n.shiftChildren=function(c,d,f){f===void 0&&(f=0);for(var a=this._first,v=this.labels,S;a;)a._start>=f&&(a._start+=c,a._end+=c),a=a._next;if(d)for(S in v)v[S]>=f&&(v[S]+=c);return ap(this)},n.invalidate=function(c){var d=this._first;for(this._lock=0;d;)d.invalidate(c),d=d._next;return e.prototype.invalidate.call(this,c)},n.clear=function(c){c===void 0&&(c=!0);for(var d=this._first,f;d;)f=d._next,this.remove(d),d=f;return this._dp&&(this._time=this._tTime=this._pTime=0),c&&(this.labels={}),ap(this)},n.totalDuration=function(c){var d=0,f=this,a=f._last,v=pl,S,M,R;if(arguments.length)return f.timeScale((f._repeat<0?f.duration():f.totalDuration())/(f.reversed()?-c:c));if(f._dirty){for(R=f.parent;a;)S=a._prev,a._dirty&&a.totalDuration(),M=a._start,M>v&&f._sort&&a._ts&&!f._lock?(f._lock=1,Bc(f,a,M-a._delay,1)._lock=0):v=M,M<0&&a._ts&&(d-=M,(!R&&!f._dp||R&&R.smoothChildTiming)&&(f._start+=M/f._ts,f._time-=M,f._tTime-=M),f.shiftChildren(-M,!1,-1/0),v=0),a._end>d&&a._ts&&(d=a._end),a=S;M1(f,f===no&&f._time>d?f._time:d,1,1),f._dirty=0}return f._tDur},t.updateRoot=function(c){if(no._ts&&(tz(no,W2(c,no)),QL=ec.frame),ec.frame>=iI){iI+=P1.autoSleep||120;var d=no._first;if((!d||!d._ts)&&P1.autoSleep&&ec._listeners.length<2){for(;d&&!d._ts;)d=d._next;d||ec.sleep()}}},t}(q0);Tl(No.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ase=function(t,n,i,c,d,f,a){var v=new em(this._pt,t,n,0,1,Bse,null,d),S=0,M=0,R,N,W,V,H,le,G,X;for(v.b=i,v.e=c,i+="",c+="",(G=~c.indexOf("random("))&&(c=CT(c)),f&&(X=[i,c],f(X,t,n),i=X[0],c=X[1]),N=i.match(y4)||[];R=y4.exec(c);)V=R[0],H=c.substring(S,R.index),W?W=(W+1)%5:H.substr(-5)==="rgba("&&(W=1),V!==N[M++]&&(le=parseFloat(N[M-1])||0,v._pt={_next:v._pt,p:H||M===1?H:",",s:le,c:V.charAt(1)==="="?ez(le,V)-le:parseFloat(V)-le,m:W&&W<4?Math.round:0},S=y4.lastIndex);return v.c=S<c.length?c.substring(S,c.length):"",v.fp=a,(Qae.test(c)||G)&&(v.e=0),this._pt=v,v},PT=function(t,n,i,c,d,f,a,v,S,M){ho(c)&&(c=c(d||0,t,f));var R=t[n],N=i!=="get"?i:ho(R)?S?t[n.indexOf("set")||!ho(t["get"+n.substr(3)])?n:"get"+n.substr(3)](S):t[n]():R,W=ho(R)?S?zse:Tz:AT,V;if(Oa(c)&&(~c.indexOf("random(")&&(c=CT(c)),c.charAt(1)==="="&&(V=ez(N,c)+(nh(N)||0),(V||V===0)&&(c=V))),!M||N!==c||I6)return!isNaN(N*c)&&c!==""?(V=new em(this._pt,t,n,+N||0,c-(N||0),typeof R=="boolean"?Fse:kz,0,W),S&&(V.fp=S),a&&V.modifier(a,this,t),this._pt=V):(!R&&!(n in t)&&YL(n,c),Ase.call(this,t,n,N,c,W,v||P1.stringFilter,S))},Mse=function(t,n,i,c,d){if(ho(t)&&(t=t0(t,d,n,i,c)),!Yc(t)||t.style&&t.nodeType||Da(t)||qL(t))return Oa(t)?t0(t,d,n,i,c):t;var f={},a;for(a in t)f[a]=t0(t[a],d,n,i,c);return f},Dse=function(t,n,i,c,d,f){var a,v,S,M;if(cl[t]&&(a=new cl[t]).init(d,a.rawVars?n[t]:Mse(n[t],c,d,f,i),i,c,f)!==!1&&(i._pt=v=new em(i._pt,d,t,0,1,a.render,a,0,a.priority),i!==Xf))for(S=i._ptLookup[i._targets.indexOf(d)],M=a._props.length;M--;)S[a._props[M]]=v;return a},zd,I6,IT=function e(t,n,i){var c=t.vars,d=c.ease,f=c.startAt,a=c.immediateRender,v=c.lazy,S=c.onUpdate,M=c.onUpdateParams,R=c.callbackScope,N=c.runBackwards,W=c.yoyoEase,V=c.keyframes,H=c.autoRevert,le=t._dur,G=t._startAt,X=t._targets,Q=t.parent,oe=Q&&Q.data==="nested"?Q.vars.targets:X,he=t._overwrite==="auto"&&!bT,be=t.timeline,A,Re,_e,ze,ot,gt,Ze,We,He,rt,tt,Ne,et;if(be&&(!V||!d)&&(d="none"),t._ease=sp(d,I1.ease),t._yEase=W?vz(sp(W===!0?d:W,I1.ease)):0,W&&t._yoyo&&!t._repeat&&(W=t._yEase,t._yEase=t._ease,t._ease=W),t._from=!be&&!!c.runBackwards,!be||V&&!c.stagger){if(We=X[0]?Jg(X[0]).harness:0,Ne=We&&c[We.prop],A=V2(c,TT),G&&(G._zTime<0&&G.progress(1),n<0&&N&&a&&!H?G.render(-1,!0):G.revert(N&&le?Uv:tse),G._lazy=0),f){if(th(t._startAt=So.set(X,Tl({data:"isStart",overwrite:!1,parent:Q,immediateRender:!0,lazy:!G&&ms(v),startAt:null,delay:0,onUpdate:S,onUpdateParams:M,callbackScope:R,stagger:0},f))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Ma||!a&&!H)&&t._startAt.revert(Uv),a&&le&&n<=0&&i<=0){n&&(t._zTime=n);return}}else if(N&&le&&!G){if(n&&(a=!1),_e=Tl({overwrite:!1,data:"isFromStart",lazy:a&&!G&&ms(v),immediateRender:a,stagger:0,parent:Q},A),Ne&&(_e[We.prop]=Ne),th(t._startAt=So.set(X,_e)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Ma?t._startAt.revert(Uv):t._startAt.render(-1,!0)),t._zTime=n,!a)e(t._startAt,Si,Si);else if(!n)return}for(t._pt=t._ptCache=0,v=le&&ms(v)||v&&!le,Re=0;Re<X.length;Re++){if(ot=X[Re],Ze=ot._gsap||kT(X)[Re]._gsap,t._ptLookup[Re]=rt={},E6[Ze.id]&&Gd.length&&U2(),tt=oe===X?Re:oe.indexOf(ot),We&&(He=new We).init(ot,Ne||A,t,tt,oe)!==!1&&(t._pt=ze=new em(t._pt,ot,He.name,0,1,He.render,He,0,He.priority),He._props.forEach(function(it){rt[it]=ze}),He.priority&&(gt=1)),!We||Ne)for(_e in A)cl[_e]&&(He=Dse(_e,A,t,tt,ot,oe))?He.priority&&(gt=1):rt[_e]=ze=PT.call(t,ot,_e,"get",A[_e],tt,oe,0,c.stringFilter);t._op&&t._op[Re]&&t.kill(ot,t._op[Re]),he&&t._pt&&(zd=t,no.killTweensOf(ot,rt,t.globalTime(n)),et=!t.parent,zd=0),t._pt&&v&&(E6[Ze.id]=1)}gt&&Vse(t),t._onInit&&t._onInit(t)}t._onUpdate=S,t._initted=(!t._op||t._pt)&&!et,V&&n<=0&&be.render(pl,!0,!0)},Rse=function(t,n,i,c,d,f,a){var v=(t._pt&&t._ptCache||(t._ptCache={}))[n],S,M,R,N;if(!v)for(v=t._ptCache[n]=[],R=t._ptLookup,N=t._targets.length;N--;){if(S=R[N][n],S&&S.d&&S.d._pt)for(S=S.d._pt;S&&S.p!==n&&S.fp!==n;)S=S._next;if(!S)return I6=1,t.vars[n]="+=0",IT(t,a),I6=0,1;v.push(S)}for(N=v.length;N--;)M=v[N],S=M._pt||M,S.s=(c||c===0)&&!d?c:S.s+(c||0)+f*S.c,S.c=i-S.s,M.e&&(M.e=ise(i)+nh(M.e)),M.b&&(M.b=S.s+nh(M.b))},Ose=function(t,n){var i=t[0]?Jg(t[0]).harness:0,c=i&&i.aliases,d,f,a,v;if(!c)return n;d=bp({},n);for(f in c)if(f in d)for(v=c[f].split(","),a=v.length;a--;)d[v[a]]=d[f];return d},Lse=function(t,n,i,c){var d=n.ease||c||"power1.inOut",f,a;if(Da(n))a=i[t]||(i[t]=[]),n.forEach(function(v,S){return a.push({t:S/(n.length-1)*100,v,e:d})});else for(f in n)a=i[f]||(i[f]=[]),f==="ease"||a.push({t:parseFloat(t),v:n[f],e:d})},t0=function(t,n,i,c,d){return ho(t)?t.call(n,i,c,d):Oa(t)&&~t.indexOf("random(")?CT(t):t},wz=ST+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Ez={};Zu(wz+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return Ez[e]=1});var So=function(e){VL(t,e);function t(i,c,d,f){var a;typeof c=="number"&&(d.duration=c,c=d,d=null),a=e.call(this,f?c:Qg(c))||this;var v=a.vars,S=v.duration,M=v.delay,R=v.immediateRender,N=v.stagger,W=v.overwrite,V=v.keyframes,H=v.defaults,le=v.scrollTrigger,G=v.yoyoEase,X=c.parent||no,Q=(Da(i)||qL(i)?$u(i[0]):"length"in c)?[i]:fl(i),oe,he,be,A,Re,_e,ze,ot;if(a._targets=Q.length?kT(Q):$2("GSAP target "+i+" not found. https://greensock.com",!P1.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=W,V||N||gv(S)||gv(M)){if(c=a.vars,oe=a.timeline=new No({data:"nested",defaults:H||{},targets:X&&X.data==="nested"?X.vars.targets:Q}),oe.kill(),oe.parent=oe._dp=Cu(a),oe._start=0,N||gv(S)||gv(M)){if(A=Q.length,ze=N&&uz(N),Yc(N))for(Re in N)~wz.indexOf(Re)&&(ot||(ot={}),ot[Re]=N[Re]);for(he=0;he<A;he++)be=V2(c,Ez),be.stagger=0,G&&(be.yoyoEase=G),ot&&bp(be,ot),_e=Q[he],be.duration=+t0(S,Cu(a),he,_e,Q),be.delay=(+t0(M,Cu(a),he,_e,Q)||0)-a._delay,!N&&A===1&&be.delay&&(a._delay=M=be.delay,a._start+=M,be.delay=0),oe.to(_e,be,ze?ze(he,_e,Q):0),oe._ease=Br.none;oe.duration()?S=M=0:a.timeline=0}else if(V){Qg(Tl(oe.vars.defaults,{ease:"none"})),oe._ease=sp(V.ease||c.ease||"none");var gt=0,Ze,We,He;if(Da(V))V.forEach(function(rt){return oe.to(Q,rt,">")}),oe.duration();else{be={};for(Re in V)Re==="ease"||Re==="easeEach"||Lse(Re,V[Re],be,V.easeEach);for(Re in be)for(Ze=be[Re].sort(function(rt,tt){return rt.t-tt.t}),gt=0,he=0;he<Ze.length;he++)We=Ze[he],He={ease:We.e,duration:(We.t-(he?Ze[he-1].t:0))/100*S},He[Re]=We.v,oe.to(Q,He,gt),gt+=He.duration;oe.duration()<S&&oe.to({},{duration:S-oe.duration()})}}S||a.duration(S=oe.duration())}else a.timeline=0;return W===!0&&!bT&&(zd=Cu(a),no.killTweensOf(Q),zd=0),Bc(X,Cu(a),d),c.reversed&&a.reverse(),c.paused&&a.paused(!0),(R||!S&&!V&&a._start===la(X._time)&&ms(R)&&cse(Cu(a))&&X.data!=="nested")&&(a._tTime=-Si,a.render(Math.max(0,-M)||0)),le&&az(Cu(a),le),a}var n=t.prototype;return n.render=function(c,d,f){var a=this._time,v=this._tDur,S=this._dur,M=c<0,R=c>v-Si&&!M?v:c<Si?0:c,N,W,V,H,le,G,X,Q,oe;if(!S)dse(this,c,d,f);else if(R!==this._tTime||!c||f||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==M){if(N=R,Q=this.timeline,this._repeat){if(H=S+this._rDelay,this._repeat<-1&&M)return this.totalTime(H*100+c,d,f);if(N=la(R%H),R===v?(V=this._repeat,N=S):(V=~~(R/H),V&&V===R/H&&(N=S,V--),N>S&&(N=S)),G=this._yoyo&&V&1,G&&(oe=this._yEase,N=S-N),le=A1(this._tTime,H),N===a&&!f&&this._initted)return this._tTime=R,this;V!==le&&(Q&&this._yEase&&xz(Q,G),this.vars.repeatRefresh&&!G&&!this._lock&&(this._lock=f=1,this.render(la(H*V),!0).invalidate()._lock=0))}if(!this._initted){if(sz(this,M?c:N,f,d,R))return this._tTime=0,this;if(a!==this._time)return this;if(S!==this._dur)return this.render(c,d,f)}if(this._tTime=R,this._time=N,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=X=(oe||this._ease)(N/S),this._from&&(this.ratio=X=1-X),N&&!a&&!d&&!V&&(ml(this,"onStart"),this._tTime!==R))return this;for(W=this._pt;W;)W.r(X,W.d),W=W._next;Q&&Q.render(c<0?c:!N&&G?-Si:Q._dur*Q._ease(N/this._dur),d,f)||this._startAt&&(this._zTime=c),this._onUpdate&&!d&&(M&&T6(this,c,d,f),ml(this,"onUpdate")),this._repeat&&V!==le&&this.vars.onRepeat&&!d&&this.parent&&ml(this,"onRepeat"),(R===this._tDur||!R)&&this._tTime===R&&(M&&!this._onUpdate&&T6(this,c,!0,!0),(c||!S)&&(R===this._tDur&&this._ts>0||!R&&this._ts<0)&&th(this,1),!d&&!(M&&!a)&&(R||a||G)&&(ml(this,R===v?"onComplete":"onReverseComplete",!0),this._prom&&!(R<v&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(c){return(!c||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(c),e.prototype.invalidate.call(this,c)},n.resetTo=function(c,d,f,a){H0||ec.wake(),this._ts||this.play();var v=Math.min(this._dur,(this._dp._time-this._start)*this._ts),S;return this._initted||IT(this,v),S=this._ease(v/this._dur),Rse(this,c,d,f,a,S,v)?this.resetTo(c,d,f,a):(Ib(this,0),this.parent||iz(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(c,d){if(d===void 0&&(d="all"),!c&&(!d||d==="all"))return this._lazy=this._pt=0,this.parent?Mg(this):this;if(this.timeline){var f=this.timeline.totalDuration();return this.timeline.killTweensOf(c,d,zd&&zd.vars.overwrite!==!0)._first||Mg(this),this.parent&&f!==this.timeline.totalDuration()&&M1(this,this._dur*this.timeline._tDur/f,0,1),this}var a=this._targets,v=c?fl(c):a,S=this._ptLookup,M=this._pt,R,N,W,V,H,le,G;if((!d||d==="all")&&sse(a,v))return d==="all"&&(this._pt=0),Mg(this);for(R=this._op=this._op||[],d!=="all"&&(Oa(d)&&(H={},Zu(d,function(X){return H[X]=1}),d=H),d=Ose(a,d)),G=a.length;G--;)if(~v.indexOf(a[G])){N=S[G],d==="all"?(R[G]=d,V=N,W={}):(W=R[G]=R[G]||{},V=d);for(H in V)le=N&&N[H],le&&((!("kill"in le.d)||le.d.kill(H)===!0)&&Cb(this,le,"_pt"),delete N[H]),W!=="all"&&(W[H]=1)}return this._initted&&!this._pt&&M&&Mg(this),this},t.to=function(c,d){return new t(c,d,arguments[2])},t.from=function(c,d){return e0(1,arguments)},t.delayedCall=function(c,d,f,a){return new t(d,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:c,onComplete:d,onReverseComplete:d,onCompleteParams:f,onReverseCompleteParams:f,callbackScope:a})},t.fromTo=function(c,d,f){return e0(2,arguments)},t.set=function(c,d){return d.duration=0,d.repeatDelay||(d.repeat=0),new t(c,d)},t.killTweensOf=function(c,d,f){return no.killTweensOf(c,d,f)},t}(q0);Tl(So.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Zu("staggerTo,staggerFrom,staggerFromTo",function(e){So[e]=function(){var t=new No,n=k6.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var AT=function(t,n,i){return t[n]=i},Tz=function(t,n,i){return t[n](i)},zse=function(t,n,i,c){return t[n](c.fp,i)},Nse=function(t,n,i){return t.setAttribute(n,i)},Sz=function(t,n){return ho(t[n])?Tz:HL(t[n])&&t.setAttribute?Nse:AT},kz=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},Fse=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},Bse=function(t,n){var i=n._pt,c="";if(!t&&n.b)c=n.b;else if(t===1&&n.e)c=n.e;else{for(;i;)c=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+c,i=i._next;c+=n.c}n.set(n.t,n.p,c,n)},MT=function(t,n){for(var i=n._pt;i;)i.r(t,i.d),i=i._next},jse=function(t,n,i,c){for(var d=this._pt,f;d;)f=d._next,d.p===c&&d.modifier(t,n,i),d=f},$se=function(t){for(var n=this._pt,i,c;n;)c=n._next,n.p===t&&!n.op||n.op===t?Cb(this,n,"_pt"):n.dep||(i=1),n=c;return!i},Use=function(t,n,i,c){c.mSet(t,n,c.m.call(c.tween,i,c.mt),c)},Vse=function(t){for(var n=t._pt,i,c,d,f;n;){for(i=n._next,c=d;c&&c.pr>n.pr;)c=c._next;(n._prev=c?c._prev:f)?n._prev._next=n:d=n,(n._next=c)?c._prev=n:f=n,n=i}t._pt=d},em=function(){function e(n,i,c,d,f,a,v,S,M){this.t=i,this.s=d,this.c=f,this.p=c,this.r=a||kz,this.d=v||this,this.set=S||AT,this.pr=M||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(i,c,d){this.mSet=this.mSet||this.set,this.set=Use,this.m=i,this.mt=d,this.tween=c},e}();Zu(ST+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return TT[e]=1});Us.TweenMax=Us.TweenLite=So;Us.TimelineLite=Us.TimelineMax=No;no=new No({sortChildren:!1,defaults:I1,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});P1.stringFilter=Ese;var lp=[],Wv={},Wse=[],uI=0,Hse=0,E4=function(t){return(Wv[t]||Wse).map(function(n){return n()})},A6=function(){var t=Date.now(),n=[];t-uI>2&&(E4("matchMediaInit"),lp.forEach(function(i){var c=i.queries,d=i.conditions,f,a,v,S;for(a in c)f=sl.matchMedia(c[a]).matches,f&&(v=1),f!==d[a]&&(d[a]=f,S=1);S&&(i.revert(),v&&n.push(i))}),E4("matchMediaRevert"),n.forEach(function(i){return i.onMatch(i)}),uI=t,E4("matchMedia"))},Cz=function(){function e(n,i){this.selector=i&&C6(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Hse++,n&&this.add(n)}var t=e.prototype;return t.add=function(i,c,d){ho(i)&&(d=c,c=i,i=ho);var f=this,a=function(){var S=uo,M=f.selector,R;return S&&S!==f&&S.data.push(f),d&&(f.selector=C6(d)),uo=f,R=c.apply(f,arguments),ho(R)&&f._r.push(R),uo=S,f.selector=M,f.isReverted=!1,R};return f.last=a,i===ho?a(f):i?f[i]=a:a},t.ignore=function(i){var c=uo;uo=null,i(this),uo=c},t.getTweens=function(){var i=[];return this.data.forEach(function(c){return c instanceof e?i.push.apply(i,c.getTweens()):c instanceof So&&!(c.parent&&c.parent.data==="nested")&&i.push(c)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,c){var d=this;if(i){var f=this.getTweens();this.data.forEach(function(v){v.data==="isFlip"&&(v.revert(),v.getChildren(!0,!0,!1).forEach(function(S){return f.splice(f.indexOf(S),1)}))}),f.map(function(v){return{g:v.globalTime(0),t:v}}).sort(function(v,S){return S.g-v.g||-1/0}).forEach(function(v){return v.t.revert(i)}),this.data.forEach(function(v){return!(v instanceof So)&&v.revert&&v.revert(i)}),this._r.forEach(function(v){return v(i,d)}),this.isReverted=!0}else this.data.forEach(function(v){return v.kill&&v.kill()});if(this.clear(),c)for(var a=lp.length;a--;)lp[a].id===this.id&&lp.splice(a,1)},t.revert=function(i){this.kill(i||{})},e}(),qse=function(){function e(n){this.contexts=[],this.scope=n}var t=e.prototype;return t.add=function(i,c,d){Yc(i)||(i={matches:i});var f=new Cz(0,d||this.scope),a=f.conditions={},v,S,M;uo&&!f.selector&&(f.selector=uo.selector),this.contexts.push(f),c=f.add("onMatch",c),f.queries=i;for(S in i)S==="all"?M=1:(v=sl.matchMedia(i[S]),v&&(lp.indexOf(f)<0&&lp.push(f),(a[S]=v.matches)&&(M=1),v.addListener?v.addListener(A6):v.addEventListener("change",A6)));return M&&c(f),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(c){return c.kill(i,!0)})},e}(),H2={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(c){return gz(c)})},timeline:function(t){return new No(t)},getTweensOf:function(t,n){return no.getTweensOf(t,n)},getProperty:function(t,n,i,c){Oa(t)&&(t=fl(t)[0]);var d=Jg(t||{}).get,f=i?rz:nz;return i==="native"&&(i=""),t&&(n?f((cl[n]&&cl[n].get||d)(t,n,i,c)):function(a,v,S){return f((cl[a]&&cl[a].get||d)(t,a,v,S))})},quickSetter:function(t,n,i){if(t=fl(t),t.length>1){var c=t.map(function(M){return wp.quickSetter(M,n,i)}),d=c.length;return function(M){for(var R=d;R--;)c[R](M)}}t=t[0]||{};var f=cl[n],a=Jg(t),v=a.harness&&(a.harness.aliases||{})[n]||n,S=f?function(M){var R=new f;Xf._pt=0,R.init(t,i?M+i:M,Xf,0,[t]),R.render(1,R),Xf._pt&&MT(1,Xf)}:a.set(t,v);return f?S:function(M){return S(t,v,i?M+i:M,a,1)}},quickTo:function(t,n,i){var c,d=wp.to(t,bp((c={},c[n]="+=0.1",c.paused=!0,c),i||{})),f=function(v,S,M){return d.resetTo(n,v,S,M)};return f.tween=d,f},isTweening:function(t){return no.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=sp(t.ease,I1.ease)),oI(I1,t||{})},config:function(t){return oI(P1,t||{})},registerEffect:function(t){var n=t.name,i=t.effect,c=t.plugins,d=t.defaults,f=t.extendTimeline;(c||"").split(",").forEach(function(a){return a&&!cl[a]&&!Us[a]&&$2(n+" effect requires "+a+" plugin.")}),v4[n]=function(a,v,S){return i(fl(a),Tl(v||{},d),S)},f&&(No.prototype[n]=function(a,v,S){return this.add(v4[n](a,Yc(v)?v:(S=v)&&{},this),S)})},registerEase:function(t,n){Br[t]=sp(n)},parseEase:function(t,n){return arguments.length?sp(t,n):Br},getById:function(t){return no.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var i=new No(t),c,d;for(i.smoothChildTiming=ms(t.smoothChildTiming),no.remove(i),i._dp=0,i._time=i._tTime=no._time,c=no._first;c;)d=c._next,(n||!(!c._dur&&c instanceof So&&c.vars.onComplete===c._targets[0]))&&Bc(i,c,c._start-c._delay),c=d;return Bc(no,i,0),i},context:function(t,n){return t?new Cz(t,n):uo},matchMedia:function(t){return new qse(t)},matchMediaRefresh:function(){return lp.forEach(function(t){var n=t.conditions,i,c;for(c in n)n[c]&&(n[c]=!1,i=1);i&&t.revert()})||A6()},addEventListener:function(t,n){var i=Wv[t]||(Wv[t]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function(t,n){var i=Wv[t],c=i&&i.indexOf(n);c>=0&&i.splice(c,1)},utils:{wrap:vse,wrapYoyo:xse,distribute:uz,random:hz,snap:dz,normalize:yse,getUnit:nh,clamp:fse,splitColor:_z,toArray:fl,selector:C6,mapRange:fz,pipe:gse,unitize:_se,interpolate:bse,shuffle:cz},install:KL,effects:v4,ticker:ec,updateRoot:No.updateRoot,plugins:cl,globalTimeline:no,core:{PropTween:em,globals:JL,Tween:So,Timeline:No,Animation:q0,getCache:Jg,_removeLinkedListItem:Cb,reverting:function(){return Ma},context:function(t){return t&&uo&&(uo.data.push(t),t._ctx=uo),uo},suppressOverwrites:function(t){return bT=t}}};Zu("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return H2[e]=So[e]});ec.add(No.updateRoot);Xf=H2.to({},{duration:0});var Gse=function(t,n){for(var i=t._pt;i&&i.p!==n&&i.op!==n&&i.fp!==n;)i=i._next;return i},Zse=function(t,n){var i=t._targets,c,d,f;for(c in n)for(d=i.length;d--;)f=t._ptLookup[d][c],f&&(f=f.d)&&(f._pt&&(f=Gse(f,c)),f&&f.modifier&&f.modifier(n[c],t,i[d],c))},T4=function(t,n){return{name:t,rawVars:1,init:function(c,d,f){f._onInit=function(a){var v,S;if(Oa(d)&&(v={},Zu(d,function(M){return v[M]=1}),d=v),n){v={};for(S in d)v[S]=n(d[S]);d=v}Zse(a,d)}}}},wp=H2.registerPlugin({name:"attr",init:function(t,n,i,c,d){var f,a,v;this.tween=i;for(f in n)v=t.getAttribute(f)||"",a=this.add(t,"setAttribute",(v||0)+"",n[f],c,d,0,0,f),a.op=f,a.b=v,this._props.push(f)},render:function(t,n){for(var i=n._pt;i;)Ma?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,n){for(var i=n.length;i--;)this.add(t,i,t[i]||0,n[i],0,0,0,0,0,1)}},T4("roundProps",P6),T4("modifiers"),T4("snap",dz))||H2;So.version=No.version=wp.version="3.12.2";XL=1;wT()&&D1();Br.Power0;Br.Power1;Br.Power2;Br.Power3;Br.Power4;Br.Linear;Br.Quad;Br.Cubic;Br.Quart;Br.Quint;Br.Strong;var Xse=Br.Elastic;Br.Back;Br.SteppedEase;Br.Bounce;Br.Sine;Br.Expo;Br.Circ;/*!
 * EasePack 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var zs,_v,Pz=function(){return zs||typeof window<"u"&&(zs=window.gsap)&&zs.registerPlugin&&zs},M6=function(t,n){return!!(typeof t>"u"?n:t&&!~(t+"").indexOf("false"))},Kse=function(t){if(zs=t||Pz(),zs){_v=zs.registerEase;var n=zs.parseEase(),i=function(f){return function(a){var v=.5+a/2;f.config=function(S){return f(2*(1-S)*S*v+S*S)}}},c;for(c in n)n[c].config||i(n[c]);_v("slow",rh),_v("expoScale",DT),_v("rough",G0);for(c in n0)c!=="version"&&zs.core.globals(c,n0[c])}},Iz=function(t,n,i){t=Math.min(1,t||.7);var c=t<1?n||n===0?n:.7:0,d=(1-t)/2,f=d+t,a=M6(i);return function(v){var S=v+(.5-v)*c;return v<d?a?1-(v=1-v/d)*v:S-(v=1-v/d)*v*v*v*S:v>f?a?v===1?0:1-(v=(v-f)/d)*v:S+(v-S)*(v=(v-f)/d)*v*v*v:a?1:S}},Az=function(t,n,i){var c=Math.log(n/t),d=n-t;return i&&(i=zs.parseEase(i)),function(f){return(t*Math.exp(c*(i?i(f):f))-t)/d}},S4=function(t,n,i){this.t=t,this.v=n,i&&(this.next=i,i.prev=this,this.c=i.v-n,this.gap=i.t-t)},Mz=function(t){typeof t!="object"&&(t={points:+t||20});for(var n=t.taper||"none",i=[],c=0,d=(+t.points||20)|0,f=d,a=M6(t.randomize,!0),v=M6(t.clamp),S=zs?zs.parseEase(t.template):0,M=(+t.strength||1)*.4,R,N,W,V,H,le,G;--f>-1;)R=a?Math.random():1/d*f,N=S?S(R):R,n==="none"?W=M:n==="out"?(V=1-R,W=V*V*M):n==="in"?W=R*R*M:R<.5?(V=R*2,W=V*V*.5*M):(V=(1-R)*2,W=V*V*.5*M),a?N+=Math.random()*W-W*.5:f%2?N+=W*.5:N-=W*.5,v&&(N>1?N=1:N<0&&(N=0)),i[c++]={x:R,y:N};for(i.sort(function(X,Q){return X.x-Q.x}),le=new S4(1,1,null),f=d;f--;)H=i[f],le=new S4(H.x,H.y,le);return G=new S4(0,0,le.t?le:le.next),function(X){var Q=G;if(X>Q.t){for(;Q.next&&X>=Q.t;)Q=Q.next;Q=Q.prev}else for(;Q.prev&&X<=Q.t;)Q=Q.prev;return G=Q,Q.v+(X-Q.t)/Q.gap*Q.c}},rh=Iz(.7);rh.ease=rh;rh.config=Iz;var DT=Az(1,2);DT.config=Az;var G0=Mz();G0.ease=G0;G0.config=Mz;var n0={SlowMo:rh,RoughEase:G0,ExpoScaleEase:DT};for(var dI in n0)n0[dI].register=Kse,n0[dI].version="3.12.2";Pz()&&zs.registerPlugin(rh);class Yse extends $t.Component{componentDidMount(){Pf(".button--bubble").each(function(){var t=Pf(this).parent().find(".circle.top-left"),n=Pf(this).parent().find(".circle.bottom-right"),i=new No,c=new No,d=new No({paused:!0});i.to(t,1.2,{x:-25,y:-25,scaleY:2,ease:rh.ease.config(.1,.7,!1)}),i.to(t.eq(0),.1,{scale:.2,x:"+=6",y:"-=2"}),i.to(t.eq(1),.1,{scaleX:1,scaleY:.8,x:"-=10",y:"-=7"},"-=0.1"),i.to(t.eq(2),.1,{scale:.2,x:"-=15",y:"+=6"},"-=0.1"),i.to(t.eq(0),1,{scale:0,x:"-=5",y:"-=15",opacity:0}),i.to(t.eq(1),1,{scaleX:.4,scaleY:.4,x:"-=10",y:"-=10",opacity:0},"-=1"),i.to(t.eq(2),1,{scale:0,x:"-=15",y:"+=5",opacity:0},"-=1");var f=new No,a=new No;f.set(t,{x:0,y:0,rotation:-45}),f.add(i),c.set(n,{x:0,y:0}),c.to(n,1.1,{x:30,y:30,ease:rh.ease.config(.1,.7,!1)}),c.to(n.eq(0),.1,{scale:.2,x:"-=6",y:"+=3"}),c.to(n.eq(1),.1,{scale:.8,x:"+=7",y:"+=3"},"-=0.1"),c.to(n.eq(2),.1,{scale:.2,x:"+=15",y:"-=6"},"-=0.2"),c.to(n.eq(0),1,{scale:0,x:"+=5",y:"+=15",opacity:0}),c.to(n.eq(1),1,{scale:.4,x:"+=7",y:"+=7",opacity:0},"-=1"),c.to(n.eq(2),1,{scale:0,x:"+=15",y:"-=5",opacity:0},"-=1"),a.set(n,{x:0,y:0,rotation:45}),a.add(c),d.add(f),d.to(Pf(this).parent().find(".button.effect-button"),.8,{scaleY:1.1},.1),d.add(a,.2),d.to(Pf(this).parent().find(".button.effect-button"),1.8,{scale:1,ease:Xse.easeOut.config(1.2,.4)},1.2),d.timeScale(2.6),Pf(this).on("mouseover",function(){d.restart()})})}render(){const{onClick:t}=this.props;return Z.jsxs("div",{className:"mainbutton",children:[Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"goo",children:Z.jsx("defs",{children:Z.jsxs("filter",{id:"goo",children:[Z.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),Z.jsx("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),Z.jsx("feComposite",{in:"SourceGraphic",in2:"goo"})]})})}),Z.jsxs("span",{className:"button--bubble__container",children:[Z.jsx("a",{href:"#campaign",className:"button button--bubble",onClick:t,children:"Planning!"}),Z.jsxs("span",{className:"button--bubble__effect-container",children:[Z.jsx("span",{className:"circle top-left"}),Z.jsx("span",{className:"circle top-left"}),Z.jsx("span",{className:"circle top-left"}),Z.jsx("span",{className:"button effect-button"}),Z.jsx("span",{className:"circle bottom-right"}),Z.jsx("span",{className:"circle bottom-right"}),Z.jsx("span",{className:"circle bottom-right"})]})]})]})}}const RT=({zoom:e})=>(K.useEffect(()=>{ss.accessToken="pk.eyJ1IjoieGluZ3llYWgiLCJhIjoiY2toeWFsOXdsMGE3djJybjBzaGZkdWE2aSJ9.wqzmeUmjmYZiKeW3NGvIiw";const t=new ss.Map({container:"map",center:[-73.971321,40.776676],zoom:e||11,style:"mapbox://styles/xingyeah/clk2yxv5y006s01pg4ws580kw"});return()=>{t.remove()}},[e]),Z.jsx("div",{id:"map",style:{width:"100%",height:"100%"}}));sb({palette:{primary:{main:"#004d40"},secondary:{main:"#004d40"}}});const hI=["/static/images/LL1.png","/static/images/LL2.png","/static/images/LL3.png","/static/images/LL3.png","/static/images/LL4.png","/static/images/LL4.png","/static/images/LL5.png"];function pI(){const e=Pp(),[t,n]=K.useState(0),i=()=>{e("/interface-two")};return K.useEffect(()=>{const c=setInterval(()=>{n(d=>(d+1)%hI.length)},80);return()=>{clearInterval(c)}},[]),Z.jsxs(Z.Fragment,{children:[Z.jsx(xT,{}),Z.jsxs("div",{className:"homepagecontainer",children:[Z.jsx("div",{className:"mapwrapper_homepage",children:Z.jsx(RT,{zoom:12.8})}),Z.jsxs("div",{className:"flex-container",children:[Z.jsxs("span",{className:"hometext",children:[Z.jsx("span",{style:{fontSize:"28px",fontWeight:550},children:"amble - the peaceful way"}),Z.jsx("br",{}),Z.jsx("span",{style:{fontSize:"16px"},children:"The purpose of our application is to generate walking routes for users to guide them though the quiet corners of Manhattan. The route generating algorthm takes forecast conditions into our machine learning model to determine busyiness based on taxizone, citibike and subway data and pair this infomation with crimes statistics for areas of Manhattan to ensure users can enjoy a quiet, peaceful and safe journey!"})]}),Z.jsx("div",{className:"LOGO",children:Z.jsx("img",{src:hI[t],className:"Logo",alt:"Logo"})}),Z.jsx(Yse,{onClick:i})]})]})]})}var Jse={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(xn,function(){var n=1e3,i=6e4,c=36e5,d="millisecond",f="second",a="minute",v="hour",S="day",M="week",R="month",N="quarter",W="year",V="date",H="Invalid Date",le=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,G=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,X={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ze){var We=["th","st","nd","rd"],He=Ze%100;return"["+Ze+(We[(He-20)%10]||We[He]||We[0])+"]"}},Q=function(Ze,We,He){var rt=String(Ze);return!rt||rt.length>=We?Ze:""+Array(We+1-rt.length).join(He)+Ze},oe={s:Q,z:function(Ze){var We=-Ze.utcOffset(),He=Math.abs(We),rt=Math.floor(He/60),tt=He%60;return(We<=0?"+":"-")+Q(rt,2,"0")+":"+Q(tt,2,"0")},m:function Ze(We,He){if(We.date()<He.date())return-Ze(He,We);var rt=12*(He.year()-We.year())+(He.month()-We.month()),tt=We.clone().add(rt,R),Ne=He-tt<0,et=We.clone().add(rt+(Ne?-1:1),R);return+(-(rt+(He-tt)/(Ne?tt-et:et-tt))||0)},a:function(Ze){return Ze<0?Math.ceil(Ze)||0:Math.floor(Ze)},p:function(Ze){return{M:R,y:W,w:M,d:S,D:V,h:v,m:a,s:f,ms:d,Q:N}[Ze]||String(Ze||"").toLowerCase().replace(/s$/,"")},u:function(Ze){return Ze===void 0}},he="en",be={};be[he]=X;var A=function(Ze){return Ze instanceof ot},Re=function Ze(We,He,rt){var tt;if(!We)return he;if(typeof We=="string"){var Ne=We.toLowerCase();be[Ne]&&(tt=Ne),He&&(be[Ne]=He,tt=Ne);var et=We.split("-");if(!tt&&et.length>1)return Ze(et[0])}else{var it=We.name;be[it]=We,tt=it}return!rt&&tt&&(he=tt),tt||!rt&&he},_e=function(Ze,We){if(A(Ze))return Ze.clone();var He=typeof We=="object"?We:{};return He.date=Ze,He.args=arguments,new ot(He)},ze=oe;ze.l=Re,ze.i=A,ze.w=function(Ze,We){return _e(Ze,{locale:We.$L,utc:We.$u,x:We.$x,$offset:We.$offset})};var ot=function(){function Ze(He){this.$L=Re(He.locale,null,!0),this.parse(He)}var We=Ze.prototype;return We.parse=function(He){this.$d=function(rt){var tt=rt.date,Ne=rt.utc;if(tt===null)return new Date(NaN);if(ze.u(tt))return new Date;if(tt instanceof Date)return new Date(tt);if(typeof tt=="string"&&!/Z$/i.test(tt)){var et=tt.match(le);if(et){var it=et[2]-1||0,Dt=(et[7]||"0").substring(0,3);return Ne?new Date(Date.UTC(et[1],it,et[3]||1,et[4]||0,et[5]||0,et[6]||0,Dt)):new Date(et[1],it,et[3]||1,et[4]||0,et[5]||0,et[6]||0,Dt)}}return new Date(tt)}(He),this.$x=He.x||{},this.init()},We.init=function(){var He=this.$d;this.$y=He.getFullYear(),this.$M=He.getMonth(),this.$D=He.getDate(),this.$W=He.getDay(),this.$H=He.getHours(),this.$m=He.getMinutes(),this.$s=He.getSeconds(),this.$ms=He.getMilliseconds()},We.$utils=function(){return ze},We.isValid=function(){return this.$d.toString()!==H},We.isSame=function(He,rt){var tt=_e(He);return this.startOf(rt)<=tt&&tt<=this.endOf(rt)},We.isAfter=function(He,rt){return _e(He)<this.startOf(rt)},We.isBefore=function(He,rt){return this.endOf(rt)<_e(He)},We.$g=function(He,rt,tt){return ze.u(He)?this[rt]:this.set(tt,He)},We.unix=function(){return Math.floor(this.valueOf()/1e3)},We.valueOf=function(){return this.$d.getTime()},We.startOf=function(He,rt){var tt=this,Ne=!!ze.u(rt)||rt,et=ze.p(He),it=function(In,Jt){var vn=ze.w(tt.$u?Date.UTC(tt.$y,Jt,In):new Date(tt.$y,Jt,In),tt);return Ne?vn:vn.endOf(S)},Dt=function(In,Jt){return ze.w(tt.toDate()[In].apply(tt.toDate("s"),(Ne?[0,0,0,0]:[23,59,59,999]).slice(Jt)),tt)},Tt=this.$W,Rt=this.$M,Yt=this.$D,tn="set"+(this.$u?"UTC":"");switch(et){case W:return Ne?it(1,0):it(31,11);case R:return Ne?it(1,Rt):it(0,Rt+1);case M:var dn=this.$locale().weekStart||0,_n=(Tt<dn?Tt+7:Tt)-dn;return it(Ne?Yt-_n:Yt+(6-_n),Rt);case S:case V:return Dt(tn+"Hours",0);case v:return Dt(tn+"Minutes",1);case a:return Dt(tn+"Seconds",2);case f:return Dt(tn+"Milliseconds",3);default:return this.clone()}},We.endOf=function(He){return this.startOf(He,!1)},We.$set=function(He,rt){var tt,Ne=ze.p(He),et="set"+(this.$u?"UTC":""),it=(tt={},tt[S]=et+"Date",tt[V]=et+"Date",tt[R]=et+"Month",tt[W]=et+"FullYear",tt[v]=et+"Hours",tt[a]=et+"Minutes",tt[f]=et+"Seconds",tt[d]=et+"Milliseconds",tt)[Ne],Dt=Ne===S?this.$D+(rt-this.$W):rt;if(Ne===R||Ne===W){var Tt=this.clone().set(V,1);Tt.$d[it](Dt),Tt.init(),this.$d=Tt.set(V,Math.min(this.$D,Tt.daysInMonth())).$d}else it&&this.$d[it](Dt);return this.init(),this},We.set=function(He,rt){return this.clone().$set(He,rt)},We.get=function(He){return this[ze.p(He)]()},We.add=function(He,rt){var tt,Ne=this;He=Number(He);var et=ze.p(rt),it=function(Rt){var Yt=_e(Ne);return ze.w(Yt.date(Yt.date()+Math.round(Rt*He)),Ne)};if(et===R)return this.set(R,this.$M+He);if(et===W)return this.set(W,this.$y+He);if(et===S)return it(1);if(et===M)return it(7);var Dt=(tt={},tt[a]=i,tt[v]=c,tt[f]=n,tt)[et]||1,Tt=this.$d.getTime()+He*Dt;return ze.w(Tt,this)},We.subtract=function(He,rt){return this.add(-1*He,rt)},We.format=function(He){var rt=this,tt=this.$locale();if(!this.isValid())return tt.invalidDate||H;var Ne=He||"YYYY-MM-DDTHH:mm:ssZ",et=ze.z(this),it=this.$H,Dt=this.$m,Tt=this.$M,Rt=tt.weekdays,Yt=tt.months,tn=function(Jt,vn,Ft,nn){return Jt&&(Jt[vn]||Jt(rt,Ne))||Ft[vn].slice(0,nn)},dn=function(Jt){return ze.s(it%12||12,Jt,"0")},_n=tt.meridiem||function(Jt,vn,Ft){var nn=Jt<12?"AM":"PM";return Ft?nn.toLowerCase():nn},In={YY:String(this.$y).slice(-2),YYYY:ze.s(this.$y,4,"0"),M:Tt+1,MM:ze.s(Tt+1,2,"0"),MMM:tn(tt.monthsShort,Tt,Yt,3),MMMM:tn(Yt,Tt),D:this.$D,DD:ze.s(this.$D,2,"0"),d:String(this.$W),dd:tn(tt.weekdaysMin,this.$W,Rt,2),ddd:tn(tt.weekdaysShort,this.$W,Rt,3),dddd:Rt[this.$W],H:String(it),HH:ze.s(it,2,"0"),h:dn(1),hh:dn(2),a:_n(it,Dt,!0),A:_n(it,Dt,!1),m:String(Dt),mm:ze.s(Dt,2,"0"),s:String(this.$s),ss:ze.s(this.$s,2,"0"),SSS:ze.s(this.$ms,3,"0"),Z:et};return Ne.replace(G,function(Jt,vn){return vn||In[Jt]||et.replace(":","")})},We.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},We.diff=function(He,rt,tt){var Ne,et=ze.p(rt),it=_e(He),Dt=(it.utcOffset()-this.utcOffset())*i,Tt=this-it,Rt=ze.m(this,it);return Rt=(Ne={},Ne[W]=Rt/12,Ne[R]=Rt,Ne[N]=Rt/3,Ne[M]=(Tt-Dt)/6048e5,Ne[S]=(Tt-Dt)/864e5,Ne[v]=Tt/c,Ne[a]=Tt/i,Ne[f]=Tt/n,Ne)[et]||Tt,tt?Rt:ze.a(Rt)},We.daysInMonth=function(){return this.endOf(R).$D},We.$locale=function(){return be[this.$L]},We.locale=function(He,rt){if(!He)return this.$L;var tt=this.clone(),Ne=Re(He,rt,!0);return Ne&&(tt.$L=Ne),tt},We.clone=function(){return ze.w(this.$d,this)},We.toDate=function(){return new Date(this.valueOf())},We.toJSON=function(){return this.isValid()?this.toISOString():null},We.toISOString=function(){return this.$d.toISOString()},We.toString=function(){return this.$d.toUTCString()},Ze}(),gt=ot.prototype;return _e.prototype=gt,[["$ms",d],["$s",f],["$m",a],["$H",v],["$W",S],["$M",R],["$y",W],["$D",V]].forEach(function(Ze){gt[Ze[1]]=function(We){return this.$g(We,Ze[0],Ze[1])}}),_e.extend=function(Ze,We){return Ze.$i||(Ze(We,ot,_e),Ze.$i=!0),_e},_e.locale=Re,_e.isDayjs=A,_e.unix=function(Ze){return _e(1e3*Ze)},_e.en=be[he],_e.Ls=be,_e.p={},_e})})(Jse);const q2="api.openweathermap.org/data/2.5",G2="80503c1dbe4d41ea31d3d65de6bad11b";var OT={},Qse=eu;Object.defineProperty(OT,"__esModule",{value:!0});var Dz=OT.default=void 0,ele=Qse(tu()),tle=Z,nle=(0,ele.default)((0,tle.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"}),"Cloud");Dz=OT.default=nle;function fI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function D6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(n),!0).forEach(function(i){zi(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Ab(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Mb(e,t,n){return t&&mI(e.prototype,t),n&&mI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jc(){return Jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jc.apply(this,arguments)}function LT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R6(e,t)}function Z2(e){return Z2=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Z2(e)}function R6(e,t){return R6=Object.setPrototypeOf||function(i,c){return i.__proto__=c,i},R6(e,t)}function rle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ile(e,t){if(e==null)return{};var n={},i=Object.keys(e),c,d;for(d=0;d<i.length;d++)c=i[d],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function Db(e,t){if(e==null)return{};var n=ile(e,t),i,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)i=d[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Jl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ole(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(e)}function zT(e){var t=rle();return function(){var i=Z2(e),c;if(t){var d=Z2(this).constructor;c=Reflect.construct(i,arguments,d)}else c=i.apply(this,arguments);return ole(this,c)}}function ale(e,t){return cle(e)||dle(e,t)||Rz(e,t)||ple()}function sle(e){return lle(e)||ule(e)||Rz(e)||hle()}function lle(e){if(Array.isArray(e))return O6(e)}function cle(e){if(Array.isArray(e))return e}function ule(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],c=!0,d=!1,f,a;try{for(n=n.call(e);!(c=(f=n.next()).done)&&(i.push(f.value),!(t&&i.length===t));c=!0);}catch(v){d=!0,a=v}finally{try{!c&&n.return!=null&&n.return()}finally{if(d)throw a}}return i}}function Rz(e,t){if(e){if(typeof e=="string")return O6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O6(e,t)}}function O6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function hle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ple(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fle=Mb(function e(t){var n=this,i=t.expanded,c=i===void 0?[]:i,d=t.allowMultipleExpanded,f=d===void 0?!1:d,a=t.allowZeroExpanded,v=a===void 0?!1:a;Ab(this,e),zi(this,"expanded",void 0),zi(this,"allowMultipleExpanded",void 0),zi(this,"allowZeroExpanded",void 0),zi(this,"toggleExpanded",function(S){if(n.isItemDisabled(S))return n;var M=n.isItemExpanded(S);return M?n.augment({expanded:n.expanded.filter(function(R){return R!==S})}):n.augment({expanded:n.allowMultipleExpanded?[].concat(sle(n.expanded),[S]):[S]})}),zi(this,"isItemDisabled",function(S){var M=n.isItemExpanded(S),R=n.expanded.length===1;return!!(M&&!n.allowZeroExpanded&&R)}),zi(this,"isItemExpanded",function(S){return n.expanded.indexOf(S)!==-1}),zi(this,"getPanelAttributes",function(S,M){var R=M??n.isItemExpanded(S);return{role:n.allowMultipleExpanded?void 0:"region","aria-hidden":n.allowMultipleExpanded?!R:void 0,"aria-labelledby":n.getButtonId(S),id:n.getPanelId(S),hidden:R?void 0:!0}}),zi(this,"getHeadingAttributes",function(){return{role:"heading"}}),zi(this,"getButtonAttributes",function(S,M){var R=M??n.isItemExpanded(S),N=n.isItemDisabled(S);return{id:n.getButtonId(S),"aria-disabled":N,"aria-expanded":R,"aria-controls":n.getPanelId(S),role:"button",tabIndex:0}}),zi(this,"getPanelId",function(S){return"accordion__panel-".concat(S)}),zi(this,"getButtonId",function(S){return"accordion__heading-".concat(S)}),zi(this,"augment",function(S){return new e(D6({expanded:n.expanded,allowMultipleExpanded:n.allowMultipleExpanded,allowZeroExpanded:n.allowZeroExpanded},S))}),this.expanded=c,this.allowMultipleExpanded=f,this.allowZeroExpanded=v}),Oz=K.createContext(null),Lz=function(e){LT(n,e);var t=zT(n);function n(){var i;Ab(this,n);for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return i=t.call.apply(t,[this].concat(d)),zi(Jl(i),"state",new fle({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),zi(Jl(i),"toggleExpanded",function(a){i.setState(function(v){return v.toggleExpanded(a)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),zi(Jl(i),"isItemDisabled",function(a){return i.state.isItemDisabled(a)}),zi(Jl(i),"isItemExpanded",function(a){return i.state.isItemExpanded(a)}),zi(Jl(i),"getPanelAttributes",function(a,v){return i.state.getPanelAttributes(a,v)}),zi(Jl(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),zi(Jl(i),"getButtonAttributes",function(a,v){return i.state.getButtonAttributes(a,v)}),i}return Mb(n,[{key:"render",value:function(){var c=this.state,d=c.allowZeroExpanded,f=c.allowMultipleExpanded;return K.createElement(Oz.Provider,{value:{allowMultipleExpanded:f,allowZeroExpanded:d,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),n}(K.PureComponent);zi(Lz,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var zz=function(e){LT(n,e);var t=zT(n);function n(){var i;Ab(this,n);for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return i=t.call.apply(t,[this].concat(d)),zi(Jl(i),"renderChildren",function(a){return a?i.props.children(a):null}),i}return Mb(n,[{key:"render",value:function(){return K.createElement(Oz.Consumer,null,this.renderChildren)}}]),n}(K.PureComponent),mle=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Nz=function(t){var n=t.className,i=n===void 0?"accordion":n,c=t.allowMultipleExpanded,d=t.allowZeroExpanded,f=t.onChange,a=t.preExpanded,v=Db(t,mle);return K.createElement(Lz,{preExpanded:a,allowMultipleExpanded:c,allowZeroExpanded:d,onChange:f},K.createElement("div",Jc({"data-accordion-component":"Accordion",className:i},v)))},L6;(function(e){e.Accordion="Accordion",e.AccordionItem="AccordionItem",e.AccordionItemButton="AccordionItemButton",e.AccordionItemHeading="AccordionItemHeading",e.AccordionItemPanel="AccordionItemPanel"})(L6||(L6={}));var Fz=L6,k4=0;function gle(){var e=k4;return k4=k4+1,"raa-".concat(e)}var _le=K.useId||gle,yle=/[\u0009\u000a\u000c\u000d\u0020]/g;function Z0(e){return e===""||yle.test(e)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(e,'", ASCII whitespaces are forbidden')),!1):!0}var Bz=K.createContext(null),vle=function(t){var n=t.children,i=t.uuid,c=t.accordionContext,d=t.dangerouslySetExpanded,f=function(){c.toggleExpanded(i)},a=function(S){var M=d??S.isItemExpanded(i),R=S.isItemDisabled(i),N=S.getPanelAttributes(i,d),W=S.getHeadingAttributes(i),V=S.getButtonAttributes(i,d);return K.createElement(Bz.Provider,{value:{uuid:i,expanded:M,disabled:R,toggleExpanded:f,panelAttributes:N,headingAttributes:W,buttonAttributes:V}},n)};return K.createElement(zz,null,a)},xle=function(t){return K.createElement(zz,null,function(n){return K.createElement(vle,Jc({},t,{accordionContext:n}))})},Rb=function(t){var n=t.children,i=function(d){return d?n(d):null};return K.createElement(Bz.Consumer,null,i)},ble=["uuid","dangerouslySetExpanded","className","activeClassName"],NT=function(t){var n=t.uuid,i=t.dangerouslySetExpanded,c=t.className,d=c===void 0?"accordion__item":c,f=t.activeClassName,a=Db(t,ble),v=K.useState(_le()),S=ale(v,1),M=S[0],R=n??M,N=function(V){var H=V.expanded,le=H&&f?f:d;return K.createElement("div",Jc({"data-accordion-component":"AccordionItem",className:le},a))};return Z0(R.toString()),a.id&&Z0(a.id),K.createElement(xle,{uuid:R,dangerouslySetExpanded:i},K.createElement(Rb,null,N))};NT.displayName=Fz.AccordionItem;function jz(e){return e&&(e.matches('[data-accordion-component="Accordion"]')?e:jz(e.parentElement))}function Ob(e){var t=jz(e);return t&&Array.from(t.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function wle(e){var t=Ob(e)||[],n=t[0];n&&n.focus()}function Ele(e){var t=Ob(e)||[],n=t[t.length-1];n&&n.focus()}function Tle(e){var t=Ob(e)||[],n=t.indexOf(e);if(n!==-1){var i=t[n+1];i&&i.focus()}}function Sle(e){var t=Ob(e)||[],n=t.indexOf(e);if(n!==-1){var i=t[n-1];i&&i.focus()}}var Su={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},kle=["toggleExpanded","className"],Cle=function(t){var n=t.toggleExpanded,i=t.className,c=i===void 0?"accordion__button":i,d=Db(t,kle),f=function(v){var S=v.key;if((S===Su.ENTER||S===Su.SPACE||S===Su.SPACE_DEPRECATED)&&(v.preventDefault(),n()),v.target instanceof HTMLElement)switch(S){case Su.HOME:{v.preventDefault(),wle(v.target);break}case Su.END:{v.preventDefault(),Ele(v.target);break}case Su.LEFT:case Su.UP:{v.preventDefault(),Sle(v.target);break}case Su.RIGHT:case Su.DOWN:{v.preventDefault(),Tle(v.target);break}}};return d.id&&Z0(d.id),K.createElement("div",Jc({className:c},d,{role:"button",tabIndex:0,onClick:n,onKeyDown:f,"data-accordion-component":"AccordionItemButton"}))},$z=function(t){return K.createElement(Rb,null,function(n){var i=n.toggleExpanded,c=n.buttonAttributes;return K.createElement(Cle,Jc({toggleExpanded:i},t,c))})},Ple={className:"accordion__heading","aria-level":3},Ile=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

“The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.”

`,Uz=function(e){LT(n,e);var t=zT(n);function n(){var i;Ab(this,n);for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return i=t.call.apply(t,[this].concat(d)),zi(Jl(i),"ref",void 0),zi(Jl(i),"setRef",function(a){i.ref=a}),i}return Mb(n,[{key:"componentDidUpdate",value:function(){n.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){n.VALIDATE(this.ref)}},{key:"render",value:function(){return K.createElement("div",Jc({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(c){if(c===void 0)throw new Error("ref is undefined");if(!(c.childElementCount===1&&c.firstElementChild&&c.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(Ile)}}]),n}(K.PureComponent);zi(Uz,"defaultProps",Ple);var FT=function(t){return K.createElement(Rb,null,function(n){var i=n.headingAttributes;return t.id&&Z0(t.id),K.createElement(Uz,Jc({},t,i))})};FT.displayName=Fz.AccordionItemHeading;var Ale=["className","region","id"],Vz=function(t){var n=t.className,i=n===void 0?"accordion__panel":n,c=t.region,d=t.id,f=Db(t,Ale),a=function(S){var M=S.panelAttributes;d&&Z0(d);var R=D6(D6({},M),{},{"aria-labelledby":c?M["aria-labelledby"]:void 0});return K.createElement("div",Jc({"data-accordion-component":"AccordionItemPanel",className:i},f,R,{role:c?"region":void 0}))};return K.createElement(Rb,null,a)};const Mle=({data:e})=>Z.jsxs(Z.Fragment,{children:[Z.jsx("label",{className:"title",children:"Future Three Days"}),Z.jsx("div",{style:{overflow:"auto"},children:Z.jsx(Nz,{allowZeroExpanded:!0,children:e.list.slice(0,24).map((t,n)=>Z.jsxs(NT,{children:[Z.jsx(FT,{children:Z.jsx($z,{children:Z.jsxs("div",{className:"daily-item",children:[Z.jsx("img",{alt:"weather",className:"icon-small",src:`https://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`}),Z.jsx("label",{className:"Date",children:t.dt_txt}),Z.jsx("label",{className:"weather-general",children:t.weather[0].main}),Z.jsxs("label",{className:"min-max",children:[Math.round(t.main.temp_min),"°C/",Math.round(t.main.temp_max),"°C"]})]})})}),Z.jsx(Vz,{children:Z.jsxs("div",{className:"daily-details-grids",children:[Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Description:"}),Z.jsx("label",{className:"content",children:t.weather[0].description})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Pressure:"}),Z.jsxs("label",{className:"content",children:[t.main.pressure," hPa"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Humidity:"}),Z.jsxs("label",{className:"content",children:[t.main.humidity,"%"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Clouds:"}),Z.jsxs("label",{className:"content",children:[t.clouds.all,"%"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Wind speed:"}),Z.jsxs("label",{className:"content",children:[t.wind.speed," m/s"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Feels like:"}),Z.jsxs("label",{className:"content",children:[t.main.feels_like,"°C"]})]})]})})]},n))})})]});const Dle=({data:e})=>Z.jsxs(Z.Fragment,{children:[Z.jsx("label",{className:"title",children:"Current"}),Z.jsx(Nz,{allowZeroExpanded:!0,children:Z.jsxs(NT,{children:[Z.jsx(FT,{children:Z.jsx($z,{children:Z.jsxs("div",{className:"daily-item",children:[Z.jsx("img",{alt:"weather",className:"icon-small",src:`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}),Z.jsx("label",{className:"Date",children:"Now"}),Z.jsx("label",{className:"weather-general",children:e.weather[0].main}),Z.jsxs("label",{className:"min-max",children:[Math.round(e.main.temp_min),"°C/",Math.round(e.main.temp_max),"°C"]})]})})}),Z.jsx(Vz,{children:Z.jsxs("div",{className:"daily-details-grids",children:[Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Description:"}),Z.jsx("label",{className:"content",children:e.weather[0].description})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Pressure:"}),Z.jsxs("label",{className:"content",children:[e.main.pressure," hPa"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Humidity:"}),Z.jsxs("label",{className:"content",children:[e.main.humidity,"%"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Clouds:"}),Z.jsxs("label",{className:"content",children:[e.clouds.all,"%"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Wind speed:"}),Z.jsxs("label",{className:"content",children:[e.wind.speed," m/s"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Feels like:"}),Z.jsxs("label",{className:"content",children:[e.main.feels_like,"°C"]})]})]})})]})})]}),Rle=sb({palette:{primary:{main:"#004d40"},secondary:{main:"#004d40"}}});function Ole({inputValues:e,setInputValues:t}){const n=Pp(),i=()=>{n("/homepage")},[c,d]=K.useState(!1),f=()=>{c?(a(),setTimeout(()=>{d(!1)},1e3)):d(!0)},a=()=>{v()},v=()=>{document.querySelector(".popup-overlay").classList.add("hide"),document.querySelector(".additional-blocks-weather").classList.add("hide"),document.querySelector(".additional-block-close-weather").classList.add("hide"),document.querySelector(".w_current").classList.add("hide"),document.querySelector(".overlay-weatherwin").classList.add("hide")},[S,M]=K.useState(null),[R,N]=K.useState(null),W=()=>{const V=fetch(`https://${q2}/weather?lat=40.776676&lon=-73.971321&appid=${G2}&units=metric`),H=fetch(`https://${q2}/forecast?lat=40.776676&lon=-73.971321&appid=${G2}&units=metric`);Promise.all([V,H]).then(async le=>{const G=await le[0].json(),X=await le[1].json();M(G),N(X)}).catch(le=>console.log(le))};return K.useEffect(()=>{W()},[]),console.log(S),console.log(R),Z.jsx(eL,{theme:Rle,children:Z.jsxs("div",{children:[Z.jsx(xT,{}),Z.jsx("div",{className:"mapwrapper_routeplan",children:Z.jsx(RT,{zoom:14.4})}),c&&Z.jsx(Z.Fragment,{children:Z.jsxs("div",{className:"popup-overlay",children:[Z.jsxs("div",{className:"additional-blocks-weather",children:[Z.jsx("div",{className:"additional-block-text-preplan-weatherwin",children:Z.jsx("span",{className:"text_bar_2-preplan-weatherwin",children:"Weather Information"})}),Z.jsx("div",{className:"additional-block-close-weather",onClick:f,children:Z.jsx(C1,{sx:{fontSize:27,color:"white"}})})]}),Z.jsxs("div",{className:"w_current",children:[S&&Z.jsx(Dle,{data:S}),R&&Z.jsx(Mle,{data:R})]})]})}),c&&Z.jsx("div",{className:"overlay-weatherwin"}),Z.jsx("div",{className:"PlanWin",children:Z.jsxs("div",{className:"PlanMap",children:[Z.jsxs("div",{className:"additional-blocks",children:[Z.jsx("div",{className:"additional-block-text-preplan",children:Z.jsx("span",{className:"text_bar_2-preplan",children:"Choose Position"})}),Z.jsx("div",{className:"additional-block-weather",onClick:f,children:Z.jsx(Dz,{sx:{fontSize:24,color:"white"}})}),Z.jsx("div",{className:"additional-block-close",onClick:i,children:Z.jsx(C1,{sx:{fontSize:27,color:"white"}})})]}),Z.jsx(NL,{inputValues:e,setInputValues:t})]})})]})})}const Lle="pk.eyJ1IjoiZmluYmFyYWxsYW4iLCJhIjoiY2xqY3NtYWN6MjV0ODNqcXhhaTY4aGQxdSJ9.VeVQzxCCtpyP_MeT1CkjOg";ss.accessToken=Lle;const zle=()=>{K.useEffect(()=>{if(t.current)return;t.current=new ss.Map({container:e.current,style:"mapbox://styles/mapbox/streets-v12",center:[c,n],zoom:f});const M=zL.data.map(R=>({id:R.id,name:R.name,latitude:R.location.latitude,longitude:R.location.longitude}));S(M),console.log(M),t.current.on("load",()=>{M.forEach(R=>{const N=document.createElement("div");N.className="marker",new ss.Marker(N).setLngLat([R.longitude,R.latitude]).addTo(t.current)})})},[]),K.useEffect(()=>{t.current&&t.current.on("move",()=>{d(t.current.getCenter().lng.toFixed(4)),i(t.current.getCenter().lat.toFixed(4)),a(t.current.getZoom().toFixed(2))})});const e=K.useRef(null),t=K.useRef(null),[n,i]=K.useState(40.727872),[c,d]=K.useState(-73.993157),[f,a]=K.useState(12.4),[v,S]=K.useState([]);return Z.jsx("div",{children:Z.jsx("div",{ref:e,className:"map-container"})})};var BT={},Nle=eu;Object.defineProperty(BT,"__esModule",{value:!0});var Wz=BT.default=void 0,Fle=Nle(tu()),Ble=Z,jle=(0,Fle.default)((0,Ble.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");Wz=BT.default=jle;const $le=({data:e})=>Z.jsxs("div",{className:"weather",children:[Z.jsxs("div",{className:"top",children:[Z.jsx("img",{alt:"weather",className:"weather-icon",src:`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}),Z.jsxs("p",{className:"temperature",children:[Math.round(e.main.temp),"°C"]})]}),Z.jsx("div",{className:"parameter-row",children:Z.jsx("p",{className:"weather-description",children:e.weather[0].description})}),Z.jsxs("div",{className:"parameter-row",children:[Z.jsx("span",{className:"parameter-label",children:"Feels like"}),Z.jsx("div",{children:Z.jsxs("span",{className:"parameter-value",children:[Math.round(e.main.feels_like),"°C"]})})]}),Z.jsxs("div",{className:"parameter-row",children:[Z.jsx("span",{className:"parameter-label",children:"Wind"}),Z.jsx("div",{children:Z.jsxs("span",{className:"parameter-value",children:[e.wind.speed," m/s"]})})]}),Z.jsxs("div",{className:"parameter-row",children:[Z.jsx("span",{className:"parameter-label",children:"Humidity"}),Z.jsx("div",{children:Z.jsxs("span",{className:"parameter-value",children:[e.main.humidity,"%"]})})]})]}),Ule=sb({palette:{primary:{main:"#004d40"},secondary:{main:"#004d40"}}});function Vle(){const[e,t]=K.useState(null),[n,i]=K.useState(null),c=()=>{const d=fetch(`https://${q2}/weather?lat=40.776676&lon=-73.971321&appid=${G2}&units=metric`),f=fetch(`https://${q2}/forecast?lat=40.776676&lon=-73.971321&appid=${G2}&units=metric`);Promise.all([d,f]).then(async a=>{const v=await a[0].json(),S=await a[1].json();t(v),i(S)}).catch(a=>console.log(a))};return K.useEffect(()=>{c()},[]),console.log(e),console.log(n),Z.jsx(eL,{theme:Ule,children:Z.jsxs("div",{children:[Z.jsx(xT,{}),Z.jsx("div",{className:"mapwrapper_showroute",children:Z.jsx(RT,{zoom:15.5})}),Z.jsxs("div",{className:"PlanWin",children:[Z.jsx("div",{className:"green-weather-block",children:e&&Z.jsx($le,{data:e})}),Z.jsxs("div",{className:"PlanMap",children:[Z.jsxs("div",{className:"button-group-1",children:[Z.jsx(As,{variant:"contained",style:{borderRadius:0},sx:{width:"270px",height:"2.8rem"},size:"small",color:"primary",children:"Route Information"}),Z.jsx(As,{variant:"contained",style:{borderRadius:0},sx:{width:"270px",height:"2.8rem"},size:"small",color:"primary",children:"General Information"})]}),Z.jsxs("div",{className:"additional-blocks",children:[Z.jsx("div",{className:"additional-block-text",children:Z.jsx("span",{className:"text_bar_2",children:"Regernate Plan"})}),Z.jsx("div",{className:"additional-block-favorite",children:Z.jsx(Wz,{sx:{fontSize:24,color:"white"}})}),Z.jsx("div",{className:"additional-block-close",children:Z.jsx(C1,{sx:{fontSize:26,color:"white"}})})]}),Z.jsx(zle,{})]})]})]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let c=e.charCodeAt(i);c<128?t[n++]=c:c<2048?(t[n++]=c>>6|192,t[n++]=c&63|128):(c&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(c=65536+((c&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=c>>18|240,t[n++]=c>>12&63|128,t[n++]=c>>6&63|128,t[n++]=c&63|128):(t[n++]=c>>12|224,t[n++]=c>>6&63|128,t[n++]=c&63|128)}return t},Wle=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const c=e[n++];if(c<128)t[i++]=String.fromCharCode(c);else if(c>191&&c<224){const d=e[n++];t[i++]=String.fromCharCode((c&31)<<6|d&63)}else if(c>239&&c<365){const d=e[n++],f=e[n++],a=e[n++],v=((c&7)<<18|(d&63)<<12|(f&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(v>>10)),t[i++]=String.fromCharCode(56320+(v&1023))}else{const d=e[n++],f=e[n++];t[i++]=String.fromCharCode((c&15)<<12|(d&63)<<6|f&63)}}return t.join("")},qz={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let c=0;c<e.length;c+=3){const d=e[c],f=c+1<e.length,a=f?e[c+1]:0,v=c+2<e.length,S=v?e[c+2]:0,M=d>>2,R=(d&3)<<4|a>>4;let N=(a&15)<<2|S>>6,W=S&63;v||(W=64,f||(N=64)),i.push(n[M],n[R],n[N],n[W])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Hz(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Wle(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let c=0;c<e.length;){const d=n[e.charAt(c++)],a=c<e.length?n[e.charAt(c)]:0;++c;const S=c<e.length?n[e.charAt(c)]:64;++c;const R=c<e.length?n[e.charAt(c)]:64;if(++c,d==null||a==null||S==null||R==null)throw new Hle;const N=d<<2|a>>4;if(i.push(N),S!==64){const W=a<<4&240|S>>2;if(i.push(W),R!==64){const V=S<<6&192|R;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Hle extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qle=function(e){const t=Hz(e);return qz.encodeByteArray(t,!0)},Gz=function(e){return qle(e).replace(/\./g,"")},Zz=function(e){try{return qz.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gle(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zle=()=>Gle().__FIREBASE_DEFAULTS__,Xle=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Kle=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Zz(e[1]);return t&&JSON.parse(t)},jT=()=>{try{return Zle()||Xle()||Kle()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Yle=e=>{var t,n;return(n=(t=jT())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Xz=()=>{var e;return(e=jT())===null||e===void 0?void 0:e.config},Kz=e=>{var t;return(t=jT())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jle{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qle(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(La())}function ece(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function tce(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nce(){const e=La();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function rce(){try{return typeof indexedDB=="object"}catch{return!1}}function ice(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(i);c.onsuccess=()=>{c.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},c.onupgradeneeded=()=>{n=!1},c.onerror=()=>{var d;t(((d=c.error)===null||d===void 0?void 0:d.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oce="FirebaseError";class hh extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=oce,Object.setPrototypeOf(this,hh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E_.prototype.create)}}class E_{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},c=`${this.service}/${t}`,d=this.errors[t],f=d?ace(d,i):"Error",a=`${this.serviceName}: ${f} (${c}).`;return new hh(c,a,i)}}function ace(e,t){return e.replace(sce,(n,i)=>{const c=t[i];return c!=null?String(c):`<${i}?>`})}const sce=/\{\$([^}]+)}/g;function lce(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function X2(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const c of n){if(!i.includes(c))return!1;const d=e[c],f=t[c];if(gI(d)&&gI(f)){if(!X2(d,f))return!1}else if(d!==f)return!1}for(const c of i)if(!n.includes(c))return!1;return!0}function gI(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(c=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(c))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Rg(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[c,d]=i.split("=");t[decodeURIComponent(c)]=decodeURIComponent(d)}}),t}function Og(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function cce(e,t){const n=new uce(e,t);return n.subscribe.bind(n)}class uce{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let c;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");dce(t,["next","error","complete"])?c=t:c={next:t,error:n,complete:i},c.next===void 0&&(c.next=C4),c.error===void 0&&(c.error=C4),c.complete===void 0&&(c.complete=C4);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),d}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dce(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function C4(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(e){return e&&e._delegate?e._delegate:e}class R1{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hce{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Jle;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:n});c&&i.resolve(c)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),c=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(d){if(c)return null;throw d}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(fce(t))try{this.getOrInitializeService({instanceIdentifier:Zh})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(n);try{const d=this.getOrInitializeService({instanceIdentifier:c});i.resolve(d)}catch{}}}}clearInstance(t=Zh){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Zh){return this.instances.has(t)}getOptions(t=Zh){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[d,f]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(d);i===a&&f.resolve(c)}return c}onInit(t,n){var i;const c=this.normalizeInstanceIdentifier(n),d=(i=this.onInitCallbacks.get(c))!==null&&i!==void 0?i:new Set;d.add(t),this.onInitCallbacks.set(c,d);const f=this.instances.get(c);return f&&t(f,c),()=>{d.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const c of i)try{c(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pce(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Zh){return this.component?this.component.multipleInstances?t:Zh:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pce(e){return e===Zh?void 0:e}function fce(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mce{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new hce(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ti;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ti||(Ti={}));const gce={debug:Ti.DEBUG,verbose:Ti.VERBOSE,info:Ti.INFO,warn:Ti.WARN,error:Ti.ERROR,silent:Ti.SILENT},_ce=Ti.INFO,yce={[Ti.DEBUG]:"log",[Ti.VERBOSE]:"log",[Ti.INFO]:"info",[Ti.WARN]:"warn",[Ti.ERROR]:"error"},vce=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),c=yce[t];if(c)console[c](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Yz{constructor(t){this.name=t,this._logLevel=_ce,this._logHandler=vce,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ti))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?gce[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ti.DEBUG,...t),this._logHandler(this,Ti.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ti.VERBOSE,...t),this._logHandler(this,Ti.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ti.INFO,...t),this._logHandler(this,Ti.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ti.WARN,...t),this._logHandler(this,Ti.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ti.ERROR,...t),this._logHandler(this,Ti.ERROR,...t)}}const xce=(e,t)=>t.some(n=>e instanceof n);let _I,yI;function bce(){return _I||(_I=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wce(){return yI||(yI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jz=new WeakMap,z6=new WeakMap,Qz=new WeakMap,P4=new WeakMap,$T=new WeakMap;function Ece(e){const t=new Promise((n,i)=>{const c=()=>{e.removeEventListener("success",d),e.removeEventListener("error",f)},d=()=>{n(Zd(e.result)),c()},f=()=>{i(e.error),c()};e.addEventListener("success",d),e.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&Jz.set(n,e)}).catch(()=>{}),$T.set(t,e),t}function Tce(e){if(z6.has(e))return;const t=new Promise((n,i)=>{const c=()=>{e.removeEventListener("complete",d),e.removeEventListener("error",f),e.removeEventListener("abort",f)},d=()=>{n(),c()},f=()=>{i(e.error||new DOMException("AbortError","AbortError")),c()};e.addEventListener("complete",d),e.addEventListener("error",f),e.addEventListener("abort",f)});z6.set(e,t)}let N6={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return z6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Qz.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zd(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Sce(e){N6=e(N6)}function kce(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(I4(this),t,...n);return Qz.set(i,t.sort?t.sort():[t]),Zd(i)}:wce().includes(e)?function(...t){return e.apply(I4(this),t),Zd(Jz.get(this))}:function(...t){return Zd(e.apply(I4(this),t))}}function Cce(e){return typeof e=="function"?kce(e):(e instanceof IDBTransaction&&Tce(e),xce(e,bce())?new Proxy(e,N6):e)}function Zd(e){if(e instanceof IDBRequest)return Ece(e);if(P4.has(e))return P4.get(e);const t=Cce(e);return t!==e&&(P4.set(e,t),$T.set(t,e)),t}const I4=e=>$T.get(e);function Pce(e,t,{blocked:n,upgrade:i,blocking:c,terminated:d}={}){const f=indexedDB.open(e,t),a=Zd(f);return i&&f.addEventListener("upgradeneeded",v=>{i(Zd(f.result),v.oldVersion,v.newVersion,Zd(f.transaction),v)}),n&&f.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),a.then(v=>{d&&v.addEventListener("close",()=>d()),c&&v.addEventListener("versionchange",S=>c(S.oldVersion,S.newVersion,S))}).catch(()=>{}),a}const Ice=["get","getKey","getAll","getAllKeys","count"],Ace=["put","add","delete","clear"],A4=new Map;function vI(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(A4.get(t))return A4.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,c=Ace.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(c||Ice.includes(n)))return;const d=async function(f,...a){const v=this.transaction(f,c?"readwrite":"readonly");let S=v.store;return i&&(S=S.index(a.shift())),(await Promise.all([S[n](...a),c&&v.done]))[0]};return A4.set(t,d),d}Sce(e=>({...e,get:(t,n,i)=>vI(t,n)||e.get(t,n,i),has:(t,n)=>!!vI(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mce{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Dce(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Dce(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const F6="@firebase/app",xI="0.9.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=new Yz("@firebase/app"),Rce="@firebase/app-compat",Oce="@firebase/analytics-compat",Lce="@firebase/analytics",zce="@firebase/app-check-compat",Nce="@firebase/app-check",Fce="@firebase/auth",Bce="@firebase/auth-compat",jce="@firebase/database",$ce="@firebase/database-compat",Uce="@firebase/functions",Vce="@firebase/functions-compat",Wce="@firebase/installations",Hce="@firebase/installations-compat",qce="@firebase/messaging",Gce="@firebase/messaging-compat",Zce="@firebase/performance",Xce="@firebase/performance-compat",Kce="@firebase/remote-config",Yce="@firebase/remote-config-compat",Jce="@firebase/storage",Qce="@firebase/storage-compat",eue="@firebase/firestore",tue="@firebase/firestore-compat",nue="firebase",rue="10.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="[DEFAULT]",iue={[F6]:"fire-core",[Rce]:"fire-core-compat",[Lce]:"fire-analytics",[Oce]:"fire-analytics-compat",[Nce]:"fire-app-check",[zce]:"fire-app-check-compat",[Fce]:"fire-auth",[Bce]:"fire-auth-compat",[jce]:"fire-rtdb",[$ce]:"fire-rtdb-compat",[Uce]:"fire-fn",[Vce]:"fire-fn-compat",[Wce]:"fire-iid",[Hce]:"fire-iid-compat",[qce]:"fire-fcm",[Gce]:"fire-fcm-compat",[Zce]:"fire-perf",[Xce]:"fire-perf-compat",[Kce]:"fire-rc",[Yce]:"fire-rc-compat",[Jce]:"fire-gcs",[Qce]:"fire-gcs-compat",[eue]:"fire-fst",[tue]:"fire-fst-compat","fire-js":"fire-js",[nue]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new Map,j6=new Map;function oue(e,t){try{e.container.addComponent(t)}catch(n){Ep.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function X0(e){const t=e.name;if(j6.has(t))return Ep.debug(`There were multiple attempts to register component ${t}.`),!1;j6.set(t,e);for(const n of K2.values())oue(n,e);return!0}function eN(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aue={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xd=new E_("app","Firebase",aue);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sue{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new R1("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Xd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=rue;function tN(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:B6,automaticDataCollectionEnabled:!1},t),c=i.name;if(typeof c!="string"||!c)throw Xd.create("bad-app-name",{appName:String(c)});if(n||(n=Xz()),!n)throw Xd.create("no-options");const d=K2.get(c);if(d){if(X2(n,d.options)&&X2(i,d.config))return d;throw Xd.create("duplicate-app",{appName:c})}const f=new mce(c);for(const v of j6.values())f.addComponent(v);const a=new sue(n,i,f);return K2.set(c,a),a}function lue(e=B6){const t=K2.get(e);if(!t&&e===B6&&Xz())return tN();if(!t)throw Xd.create("no-app",{appName:e});return t}function c1(e,t,n){var i;let c=(i=iue[e])!==null&&i!==void 0?i:e;n&&(c+=`-${n}`);const d=c.match(/\s|\//),f=t.match(/\s|\//);if(d||f){const a=[`Unable to register library "${c}" with version "${t}":`];d&&a.push(`library name "${c}" contains illegal characters (whitespace or "/")`),d&&f&&a.push("and"),f&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ep.warn(a.join(" "));return}X0(new R1(`${c}-version`,()=>({library:c,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cue="firebase-heartbeat-database",uue=1,K0="firebase-heartbeat-store";let M4=null;function nN(){return M4||(M4=Pce(cue,uue,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(K0)}}}).catch(e=>{throw Xd.create("idb-open",{originalErrorMessage:e.message})})),M4}async function due(e){try{return await(await nN()).transaction(K0).objectStore(K0).get(rN(e))}catch(t){if(t instanceof hh)Ep.warn(t.message);else{const n=Xd.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ep.warn(n.message)}}}async function bI(e,t){try{const i=(await nN()).transaction(K0,"readwrite");await i.objectStore(K0).put(t,rN(e)),await i.done}catch(n){if(n instanceof hh)Ep.warn(n.message);else{const i=Xd.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ep.warn(i.message)}}}function rN(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hue=1024,pue=30*24*60*60*1e3;class fue{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gue(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wI();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(c=>c.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=pue}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wI(),{heartbeatsToSend:n,unsentEntries:i}=mue(this._heartbeatsCache.heartbeats),c=Gz(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}}function wI(){return new Date().toISOString().substring(0,10)}function mue(e,t=hue){const n=[];let i=e.slice();for(const c of e){const d=n.find(f=>f.agent===c.agent);if(d){if(d.dates.push(c.date),EI(n)>t){d.dates.pop();break}}else if(n.push({agent:c.agent,dates:[c.date]}),EI(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class gue{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rce()?ice().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await due(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const c=await this.read();return bI(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:c.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const c=await this.read();return bI(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...t.heartbeats]})}else return}}function EI(e){return Gz(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ue(e){X0(new R1("platform-logger",t=>new Mce(t),"PRIVATE")),X0(new R1("heartbeat",t=>new fue(t),"PRIVATE")),c1(F6,xI,e),c1(F6,xI,"esm2017"),c1("fire-js","")}_ue("");function UT(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,i=Object.getOwnPropertySymbols(e);c<i.length;c++)t.indexOf(i[c])<0&&Object.prototype.propertyIsEnumerable.call(e,i[c])&&(n[i[c]]=e[i[c]]);return n}function iN(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yue=iN,oN=new E_("auth","Firebase",iN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new Yz("@firebase/auth");function vue(e,...t){Y2.logLevel<=Ti.WARN&&Y2.warn(`Auth (${S_}): ${e}`,...t)}function Hv(e,...t){Y2.logLevel<=Ti.ERROR&&Y2.error(`Auth (${S_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(e,...t){throw VT(e,...t)}function Gc(e,...t){return VT(e,...t)}function xue(e,t,n){const i=Object.assign(Object.assign({},yue()),{[t]:n});return new E_("auth","Firebase",i).create(t,{appName:e.name})}function VT(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return oN.create(e,...t)}function vr(e,t,...n){if(!e)throw VT(t,...n)}function Mu(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hv(t),new Error(t)}function Uu(e,t){e||Mu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function bue(){return TI()==="http:"||TI()==="https:"}function TI(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wue(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bue()||ece()||"connection"in navigator)?navigator.onLine:!0}function Eue(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(t,n){this.shortDelay=t,this.longDelay=n,Uu(n>t,"Short delay should be less than long delay!"),this.isMobile=Qle()||tce()}get(){return wue()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(e,t){Uu(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Mu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Mu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Mu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tue={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sue=new k_(3e4,6e4);function tm(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function nm(e,t,n,i,c={}){return sN(e,c,async()=>{let d={},f={};i&&(t==="GET"?f=i:d={body:JSON.stringify(i)});const a=T_(Object.assign({key:e.config.apiKey},f)).slice(1),v=await e._getAdditionalHeaders();return v["Content-Type"]="application/json",e.languageCode&&(v["X-Firebase-Locale"]=e.languageCode),aN.fetch()(lN(e,e.config.apiHost,n,a),Object.assign({method:t,headers:v,referrerPolicy:"no-referrer"},d))})}async function sN(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Tue),t);try{const c=new kue(e),d=await Promise.race([n(),c.promise]);c.clearNetworkTimeout();const f=await d.json();if("needConfirmation"in f)throw yv(e,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{const a=d.ok?f.errorMessage:f.error.message,[v,S]=a.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw yv(e,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw yv(e,"email-already-in-use",f);if(v==="USER_DISABLED")throw yv(e,"user-disabled",f);const M=i[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(S)throw xue(e,M,S);sc(e,M)}}catch(c){if(c instanceof hh)throw c;sc(e,"network-request-failed",{message:String(c)})}}async function C_(e,t,n,i,c={}){const d=await nm(e,t,n,i,c);return"mfaPendingCredential"in d&&sc(e,"multi-factor-auth-required",{_serverResponse:d}),d}function lN(e,t,n,i){const c=`${t}${n}?${i}`;return e.config.emulator?WT(e.config,c):`${e.config.apiScheme}://${c}`}class kue{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Gc(this.auth,"network-request-failed")),Sue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yv(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const c=Gc(e,t,i);return c.customData._tokenResponse=n,c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cue(e,t){return nm(e,"POST","/v1/accounts:delete",t)}async function Pue(e,t){return nm(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Iue(e,t=!1){const n=Xu(e),i=await n.getIdToken(t),c=HT(i);vr(c&&c.exp&&c.auth_time&&c.iat,n.auth,"internal-error");const d=typeof c.firebase=="object"?c.firebase:void 0,f=d==null?void 0:d.sign_in_provider;return{claims:c,token:i,authTime:r0(D4(c.auth_time)),issuedAtTime:r0(D4(c.iat)),expirationTime:r0(D4(c.exp)),signInProvider:f||null,signInSecondFactor:(d==null?void 0:d.sign_in_second_factor)||null}}function D4(e){return Number(e)*1e3}function HT(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Hv("JWT malformed, contained fewer than 3 sections"),null;try{const c=Zz(n);return c?JSON.parse(c):(Hv("Failed to decode base64 JWT payload"),null)}catch(c){return Hv("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function Aue(e){const t=HT(e);return vr(t,"internal-error"),vr(typeof t.exp<"u","internal-error"),vr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof hh&&Mue(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function Mue({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Due{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const c=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,c)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=r0(this.lastLoginAt),this.creationTime=r0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(e){var t;const n=e.auth,i=await e.getIdToken(),c=await Y0(e,Pue(n,{idToken:i}));vr(c==null?void 0:c.users.length,n,"internal-error");const d=c.users[0];e._notifyReloadListener(d);const f=!((t=d.providerUserInfo)===null||t===void 0)&&t.length?Lue(d.providerUserInfo):[],a=Oue(e.providerData,f),v=e.isAnonymous,S=!(e.email&&d.passwordHash)&&!(a!=null&&a.length),M=v?S:!1,R={uid:d.localId,displayName:d.displayName||null,photoURL:d.photoUrl||null,email:d.email||null,emailVerified:d.emailVerified||!1,phoneNumber:d.phoneNumber||null,tenantId:d.tenantId||null,providerData:a,metadata:new cN(d.createdAt,d.lastLoginAt),isAnonymous:M};Object.assign(e,R)}async function Rue(e){const t=Xu(e);await J2(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Oue(e,t){return[...e.filter(i=>!t.some(c=>c.providerId===i.providerId)),...t]}function Lue(e){return e.map(t=>{var{providerId:n}=t,i=UT(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zue(e,t){const n=await sN(e,{},async()=>{const i=T_({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:c,apiKey:d}=e.config,f=lN(e,c,"/v1/token",`key=${d}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",aN.fetch()(f,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){vr(t.idToken,"internal-error"),vr(typeof t.idToken<"u","internal-error"),vr(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Aue(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return vr(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:c,expiresIn:d}=await zue(t,n);this.updateTokensAndExpiration(i,c,Number(d))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:c,expirationTime:d}=n,f=new J0;return i&&(vr(typeof i=="string","internal-error",{appName:t}),f.refreshToken=i),c&&(vr(typeof c=="string","internal-error",{appName:t}),f.accessToken=c),d&&(vr(typeof d=="number","internal-error",{appName:t}),f.expirationTime=d),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new J0,this.toJSON())}_performRefresh(){return Mu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(e,t){vr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class cp{constructor(t){var{uid:n,auth:i,stsTokenManager:c}=t,d=UT(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Due(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=c,this.accessToken=c.accessToken,this.displayName=d.displayName||null,this.email=d.email||null,this.emailVerified=d.emailVerified||!1,this.phoneNumber=d.phoneNumber||null,this.photoURL=d.photoURL||null,this.isAnonymous=d.isAnonymous||!1,this.tenantId=d.tenantId||null,this.providerData=d.providerData?[...d.providerData]:[],this.metadata=new cN(d.createdAt||void 0,d.lastLoginAt||void 0)}async getIdToken(t){const n=await Y0(this,this.stsTokenManager.getToken(this.auth,t));return vr(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Iue(this,t)}reload(){return Rue(this)}_assign(t){this!==t&&(vr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new cp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){vr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await J2(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Y0(this,Cue(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,c,d,f,a,v,S,M;const R=(i=n.displayName)!==null&&i!==void 0?i:void 0,N=(c=n.email)!==null&&c!==void 0?c:void 0,W=(d=n.phoneNumber)!==null&&d!==void 0?d:void 0,V=(f=n.photoURL)!==null&&f!==void 0?f:void 0,H=(a=n.tenantId)!==null&&a!==void 0?a:void 0,le=(v=n._redirectEventId)!==null&&v!==void 0?v:void 0,G=(S=n.createdAt)!==null&&S!==void 0?S:void 0,X=(M=n.lastLoginAt)!==null&&M!==void 0?M:void 0,{uid:Q,emailVerified:oe,isAnonymous:he,providerData:be,stsTokenManager:A}=n;vr(Q&&A,t,"internal-error");const Re=J0.fromJSON(this.name,A);vr(typeof Q=="string",t,"internal-error"),bd(R,t.name),bd(N,t.name),vr(typeof oe=="boolean",t,"internal-error"),vr(typeof he=="boolean",t,"internal-error"),bd(W,t.name),bd(V,t.name),bd(H,t.name),bd(le,t.name),bd(G,t.name),bd(X,t.name);const _e=new cp({uid:Q,auth:t,email:N,emailVerified:oe,displayName:R,isAnonymous:he,photoURL:V,phoneNumber:W,tenantId:H,stsTokenManager:Re,createdAt:G,lastLoginAt:X});return be&&Array.isArray(be)&&(_e.providerData=be.map(ze=>Object.assign({},ze))),le&&(_e._redirectEventId=le),_e}static async _fromIdTokenResponse(t,n,i=!1){const c=new J0;c.updateFromServerResponse(n);const d=new cp({uid:n.localId,auth:t,stsTokenManager:c,isAnonymous:i});return await J2(d),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=new Map;function Du(e){Uu(e instanceof Function,"Expected a class definition");let t=SI.get(e);return t?(Uu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,SI.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}uN.type="NONE";const kI=uN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(e,t,n){return`firebase:${e}:${t}:${n}`}class u1{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:c,name:d}=this.auth;this.fullUserKey=qv(this.userKey,c.apiKey,d),this.fullPersistenceKey=qv("persistence",c.apiKey,d),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?cp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new u1(Du(kI),t,i);const c=(await Promise.all(n.map(async S=>{if(await S._isAvailable())return S}))).filter(S=>S);let d=c[0]||Du(kI);const f=qv(i,t.config.apiKey,t.name);let a=null;for(const S of n)try{const M=await S._get(f);if(M){const R=cp._fromJSON(t,M);S!==d&&(a=R),d=S;break}}catch{}const v=c.filter(S=>S._shouldAllowMigration);return!d._shouldAllowMigration||!v.length?new u1(d,t,i):(d=v[0],a&&await d._set(f,a.toJSON()),await Promise.all(n.map(async S=>{if(S!==d)try{await S._remove(f)}catch{}})),new u1(d,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pN(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dN(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mN(t))return"Blackberry";if(gN(t))return"Webos";if(qT(t))return"Safari";if((t.includes("chrome/")||hN(t))&&!t.includes("edge/"))return"Chrome";if(fN(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function dN(e=La()){return/firefox\//i.test(e)}function qT(e=La()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hN(e=La()){return/crios\//i.test(e)}function pN(e=La()){return/iemobile/i.test(e)}function fN(e=La()){return/android/i.test(e)}function mN(e=La()){return/blackberry/i.test(e)}function gN(e=La()){return/webos/i.test(e)}function Lb(e=La()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Nue(e=La()){var t;return Lb(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Fue(){return nce()&&document.documentMode===10}function _N(e=La()){return Lb(e)||fN(e)||gN(e)||mN(e)||/windows phone/i.test(e)||pN(e)}function Bue(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(e,t=[]){let n;switch(e){case"Browser":n=CI(La());break;case"Worker":n=`${CI(La())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${S_}/${i}`}async function vN(e,t){return nm(e,"GET","/v2/recaptchaConfig",tm(e,t))}function PI(e){return e!==void 0&&e.enterprise!==void 0}class xN{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jue(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function bN(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=c=>{const d=Gc("internal-error");d.customData=c,n(d)},i.type="text/javascript",i.charset="UTF-8",jue().appendChild(i)})}function $ue(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const Uue="https://www.google.com/recaptcha/enterprise.js?render=",Vue="recaptcha-enterprise",Wue="NO_RECAPTCHA";class wN{constructor(t){this.type=Vue,this.auth=rm(t)}async verify(t="verify",n=!1){async function i(d){if(!n){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(f,a)=>{vN(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const S=new xN(v);return d.tenantId==null?d._agentRecaptchaConfig=S:d._tenantRecaptchaConfigs[d.tenantId]=S,f(S.siteKey)}}).catch(v=>{a(v)})})}function c(d,f,a){const v=window.grecaptcha;PI(v)?v.enterprise.ready(()=>{v.enterprise.execute(d,{action:t}).then(S=>{f(S)}).catch(()=>{f(Wue)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((d,f)=>{i(this.auth).then(a=>{if(!n&&PI(window.grecaptcha))c(a,d,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}bN(Uue+a).then(()=>{c(a,d,f)}).catch(v=>{f(v)})}}).catch(a=>{f(a)})})}}async function Q2(e,t,n,i=!1){const c=new wN(e);let d;try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const f=Object.assign({},t);return i?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hue{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=d=>new Promise((f,a)=>{try{const v=t(d);f(v)}catch(v){a(v)}});i.onAbort=n,this.queue.push(i);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const c of n)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class que{constructor(t,n,i,c){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new II(this),this.idTokenSubscription=new II(this),this.beforeStateQueue=new Hue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Du(n)),this._initializationPromise=this.queue(async()=>{var i,c;if(!this._deleted&&(this.persistenceManager=await u1.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const i=await this.assertedPersistence.getCurrentUser();let c=i,d=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=c==null?void 0:c._redirectEventId,v=await this.tryRedirectSignIn(t);(!f||f===a)&&(v!=null&&v.user)&&(c=v.user,d=!0)}if(!c)return this.directlySetCurrentUser(null);if(!c._redirectEventId){if(d)try{await this.beforeStateQueue.runMiddleware(c)}catch(f){c=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return c?this.reloadAndSetCurrentUserOrClear(c):this.directlySetCurrentUser(null)}return vr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===c._redirectEventId?this.directlySetCurrentUser(c):this.reloadAndSetCurrentUserOrClear(c)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await J2(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Eue()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?Xu(t):null;return n&&vr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&vr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Du(t))})}async initializeRecaptchaConfig(){const t=await vN(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new xN(t);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new wN(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new E_("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Du(t)||this._popupRedirectResolver;vr(n,this,"argument-error"),this.redirectPersistenceManager=await u1.create(this,[Du(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,c){if(this._deleted)return()=>{};const d=typeof n=="function"?n:n.next.bind(n),f=this._isInitialized?Promise.resolve():this._initializationPromise;return vr(f,this,"internal-error"),f.then(()=>d(this.currentUser)),typeof n=="function"?t.addObserver(n,i,c):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return vr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=yN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const c=await this._getAppCheckToken();return c&&(n["X-Firebase-AppCheck"]=c),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&vue(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function rm(e){return Xu(e)}class II{constructor(t){this.auth=t,this.observer=null,this.addObserver=cce(n=>this.observer=n)}get next(){return vr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gue(e,t){const n=eN(e,"auth");if(n.isInitialized()){const c=n.getImmediate(),d=n.getOptions();if(X2(d,t??{}))return c;sc(c,"already-initialized")}return n.initialize({options:t})}function Zue(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Du);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function Xue(e,t,n){const i=rm(e);vr(i._canInitEmulator,i,"emulator-config-failed"),vr(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const c=!!(n!=null&&n.disableWarnings),d=EN(t),{host:f,port:a}=Kue(t),v=a===null?"":`:${a}`;i.config.emulator={url:`${d}//${f}${v}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:f,port:a,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:c})}),c||Yue()}function EN(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Kue(e){const t=EN(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(i);if(c){const d=c[1];return{host:d,port:AI(i.substr(d.length+1))}}else{const[d,f]=i.split(":");return{host:d,port:AI(f)}}}function AI(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Yue(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Mu("not implemented")}_getIdTokenResponse(t){return Mu("not implemented")}_linkToIdToken(t,n){return Mu("not implemented")}_getReauthenticationResolver(t){return Mu("not implemented")}}async function Jue(e,t){return nm(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(e,t){return C_(e,"POST","/v1/accounts:signInWithPassword",tm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Que(e,t){return C_(e,"POST","/v1/accounts:signInWithEmailLink",tm(e,t))}async function ede(e,t){return C_(e,"POST","/v1/accounts:signInWithEmailLink",tm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0 extends GT{constructor(t,n,i,c=null){super("password",i),this._email=t,this._password=n,this._tenantId=c}static _fromEmailAndPassword(t,n){return new Q0(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new Q0(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){var n;switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=t._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const c=await Q2(t,i,"signInWithPassword");return R4(t,c)}else return R4(t,i).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const d=await Q2(t,i,"signInWithPassword");return R4(t,d)}else return Promise.reject(c)});case"emailLink":return Que(t,{email:this._email,oobCode:this._password});default:sc(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":return Jue(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return ede(t,{idToken:n,email:this._email,oobCode:this._password});default:sc(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(e,t){return C_(e,"POST","/v1/accounts:signInWithIdp",tm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tde="http://localhost";class Tp extends GT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Tp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):sc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:c}=n,d=UT(n,["providerId","signInMethod"]);if(!i||!c)return null;const f=new Tp(i,c);return f.idToken=d.idToken||void 0,f.accessToken=d.accessToken||void 0,f.secret=d.secret,f.nonce=d.nonce,f.pendingToken=d.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return d1(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,d1(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,d1(t,n)}buildRequest(){const t={requestUri:tde,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=T_(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nde(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rde(e){const t=Rg(Og(e)).link,n=t?Rg(Og(t)).deep_link_id:null,i=Rg(Og(e)).deep_link_id;return(i?Rg(Og(i)).link:null)||i||n||t||e}class ZT{constructor(t){var n,i,c,d,f,a;const v=Rg(Og(t)),S=(n=v.apiKey)!==null&&n!==void 0?n:null,M=(i=v.oobCode)!==null&&i!==void 0?i:null,R=nde((c=v.mode)!==null&&c!==void 0?c:null);vr(S&&M&&R,"argument-error"),this.apiKey=S,this.operation=R,this.code=M,this.continueUrl=(d=v.continueUrl)!==null&&d!==void 0?d:null,this.languageCode=(f=v.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(a=v.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const n=rde(t);try{return new ZT(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this.providerId=im.PROVIDER_ID}static credential(t,n){return Q0._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=ZT.parseLink(n);return vr(i,"argument-error"),Q0._fromEmailAndCode(t,i.code,i.tenantId)}}im.PROVIDER_ID="password";im.EMAIL_PASSWORD_SIGN_IN_METHOD="password";im.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends TN{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends P_{constructor(){super("facebook.com")}static credential(t){return Tp._fromParams({providerId:Cd.PROVIDER_ID,signInMethod:Cd.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cd.credentialFromTaggedObject(t)}static credentialFromError(t){return Cd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cd.credential(t.oauthAccessToken)}catch{return null}}}Cd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends P_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Tp._fromParams({providerId:Pd.PROVIDER_ID,signInMethod:Pd.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Pd.credentialFromTaggedObject(t)}static credentialFromError(t){return Pd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Pd.credential(n,i)}catch{return null}}}Pd.GOOGLE_SIGN_IN_METHOD="google.com";Pd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends P_{constructor(){super("github.com")}static credential(t){return Tp._fromParams({providerId:Id.PROVIDER_ID,signInMethod:Id.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Id.credentialFromTaggedObject(t)}static credentialFromError(t){return Id.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Id.credential(t.oauthAccessToken)}catch{return null}}}Id.GITHUB_SIGN_IN_METHOD="github.com";Id.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends P_{constructor(){super("twitter.com")}static credential(t,n){return Tp._fromParams({providerId:Ad.PROVIDER_ID,signInMethod:Ad.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ad.credentialFromTaggedObject(t)}static credentialFromError(t){return Ad.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Ad.credential(n,i)}catch{return null}}}Ad.TWITTER_SIGN_IN_METHOD="twitter.com";Ad.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(e,t){return C_(e,"POST","/v1/accounts:signUp",tm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,c=!1){const d=await cp._fromIdTokenResponse(t,i,c),f=MI(i);return new Sp({user:d,providerId:f,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const c=MI(i);return new Sp({user:t,providerId:c,_tokenResponse:i,operationType:n})}}function MI(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends hh{constructor(t,n,i,c){var d;super(n.code,n.message),this.operationType=i,this.user=c,Object.setPrototypeOf(this,ex.prototype),this.customData={appName:t.name,tenantId:(d=t.tenantId)!==null&&d!==void 0?d:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,c){return new ex(t,n,i,c)}}function SN(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?ex._fromErrorAndOperation(e,d,t,i):d})}async function ide(e,t,n=!1){const i=await Y0(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Sp._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ode(e,t,n=!1){const{auth:i}=e,c="reauthenticate";try{const d=await Y0(e,SN(i,c,t,e),n);vr(d.idToken,i,"internal-error");const f=HT(d.idToken);vr(f,i,"internal-error");const{sub:a}=f;return vr(e.uid===a,i,"user-mismatch"),Sp._forOperation(e,c,d)}catch(d){throw(d==null?void 0:d.code)==="auth/user-not-found"&&sc(i,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(e,t,n=!1){const i="signIn",c=await SN(e,i,t),d=await Sp._fromIdTokenResponse(e,i,c);return n||await e._updateCurrentUser(d.user),d}async function ade(e,t){return kN(rm(e),t)}async function sde(e,t,n){var i;const c=rm(e),d={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let f;if(!((i=c._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const S=await Q2(c,d,"signUpPassword");f=O4(c,S)}else f=O4(c,d).catch(async S=>{if(S.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const M=await Q2(c,d,"signUpPassword");return O4(c,M)}else return Promise.reject(S)});const a=await f.catch(S=>Promise.reject(S)),v=await Sp._fromIdTokenResponse(c,"signIn",a);return await c._updateCurrentUser(v.user),v}function lde(e,t,n){return ade(Xu(e),im.credential(t,n))}function cde(e,t,n,i){return Xu(e).onIdTokenChanged(t,n,i)}function ude(e,t,n){return Xu(e).beforeAuthStateChanged(t,n)}function dde(e,t,n,i){return Xu(e).onAuthStateChanged(t,n,i)}function hde(e){return Xu(e).signOut()}const tx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tx,"1"),this.storage.removeItem(tx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pde(){const e=La();return qT(e)||Lb(e)}const fde=1e3,mde=10;class PN extends CN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=pde()&&Bue(),this.fallbackToPolling=_N(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),c=this.localCache[n];i!==c&&t(n,c,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,a,v)=>{this.notifyListeners(f,v)});return}const i=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const f=this.storage.getItem(i);if(t.newValue!==f)t.newValue!==null?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!n)return}const c=()=>{const f=this.storage.getItem(i);!n&&this.localCache[i]===f||this.notifyListeners(i,f)},d=this.storage.getItem(i);Fue()&&d!==t.newValue&&t.newValue!==t.oldValue?setTimeout(c,mde):c()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const c of Array.from(i))c(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},fde)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}PN.type="LOCAL";const gde=PN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN extends CN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}IN.type="SESSION";const AN=IN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _de(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(c=>c.isListeningto(t));if(n)return n;const i=new zb(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:c,data:d}=n.data,f=this.handlersMap[c];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:c});const a=Array.from(f).map(async S=>S(n.origin,d)),v=await _de(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:c,response:v})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yde{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let d,f;return new Promise((a,v)=>{const S=XT("",20);c.port1.start();const M=setTimeout(()=>{v(new Error("unsupported_event"))},i);f={messageChannel:c,onMessage(R){const N=R;if(N.data.eventId===S)switch(N.data.status){case"ack":clearTimeout(M),d=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),a(N.data.response);break;default:clearTimeout(M),clearTimeout(d),v(new Error("invalid_response"));break}}},this.handlers.add(f),c.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:S,data:n},[c.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(){return window}function vde(e){Zc().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(){return typeof Zc().WorkerGlobalScope<"u"&&typeof Zc().importScripts=="function"}async function xde(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bde(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function wde(){return MN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="firebaseLocalStorageDb",Ede=1,nx="firebaseLocalStorage",RN="fbase_key";class I_{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nb(e,t){return e.transaction([nx],t?"readwrite":"readonly").objectStore(nx)}function Tde(){const e=indexedDB.deleteDatabase(DN);return new I_(e).toPromise()}function U6(){const e=indexedDB.open(DN,Ede);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(nx,{keyPath:RN})}catch(c){n(c)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(nx)?t(i):(i.close(),await Tde(),t(await U6()))})})}async function DI(e,t,n){const i=Nb(e,!0).put({[RN]:t,value:n});return new I_(i).toPromise()}async function Sde(e,t){const n=Nb(e,!1).get(t),i=await new I_(n).toPromise();return i===void 0?null:i.value}function RI(e,t){const n=Nb(e,!0).delete(t);return new I_(n).toPromise()}const kde=800,Cde=3;class ON{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await U6(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>Cde)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zb._getInstance(wde()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await xde(),!this.activeServiceWorker)return;this.sender=new yde(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||bde()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await U6();return await DI(t,tx,"1"),await RI(t,tx),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>DI(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>Sde(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>RI(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(c=>{const d=Nb(c,!1).getAll();return new I_(d).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:c,value:d}of t)i.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(d)&&(this.notifyListeners(c,d),n.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!i.has(c)&&(this.notifyListeners(c,null),n.push(c));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const c of Array.from(i))c(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kde)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ON.type="LOCAL";const Pde=ON;new k_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ide(e,t){return t?Du(t):(vr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends GT{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return d1(t,this._buildIdpRequest())}_linkToIdToken(t,n){return d1(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return d1(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Ade(e){return kN(e.auth,new KT(e),e.bypassAuthState)}function Mde(e){const{auth:t,user:n}=e;return vr(n,t,"internal-error"),ode(n,new KT(e),e.bypassAuthState)}async function Dde(e){const{auth:t,user:n}=e;return vr(n,t,"internal-error"),ide(n,new KT(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(t,n,i,c,d=!1){this.auth=t,this.resolver=i,this.user=c,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:c,tenantId:d,error:f,type:a}=t;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:n,sessionId:i,tenantId:d||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(v))}catch(S){this.reject(S)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ade;case"linkViaPopup":case"linkViaRedirect":return Dde;case"reauthViaPopup":case"reauthViaRedirect":return Mde;default:sc(this.auth,"internal-error")}}resolve(t){Uu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Uu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rde=new k_(2e3,1e4);class Kf extends LN{constructor(t,n,i,c,d){super(t,n,c,d),this.provider=i,this.authWindow=null,this.pollId=null,Kf.currentPopupAction&&Kf.currentPopupAction.cancel(),Kf.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return vr(t,this.auth,"internal-error"),t}async onExecution(){Uu(this.filter.length===1,"Popup operations only handle one event");const t=XT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Gc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kf.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Rde.get())};t()}}Kf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ode="pendingRedirect",Gv=new Map;class Lde extends LN{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Gv.get(this.auth._key());if(!t){try{const i=await zde(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Gv.set(this.auth._key(),t)}return this.bypassAuthState||Gv.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zde(e,t){const n=Bde(t),i=Fde(e);if(!await i._isAvailable())return!1;const c=await i._get(n)==="true";return await i._remove(n),c}function Nde(e,t){Gv.set(e._key(),t)}function Fde(e){return Du(e._redirectPersistence)}function Bde(e){return qv(Ode,e.config.apiKey,e.name)}async function jde(e,t,n=!1){const i=rm(e),c=Ide(i,t),f=await new Lde(i,c,n).execute();return f&&!n&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $de=10*60*1e3;class Ude{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Vde(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!zN(t)){const c=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Gc(this.auth,c))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=$de&&this.cachedEventUids.clear(),this.cachedEventUids.has(OI(t))}saveEventToCache(t){this.cachedEventUids.add(OI(t)),this.lastProcessedEventTime=Date.now()}}function OI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function zN({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Vde(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zN(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wde(e,t={}){return nm(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hde=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qde=/^https?/;async function Gde(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Wde(e);for(const n of t)try{if(Zde(n))return}catch{}sc(e,"unauthorized-domain")}function Zde(e){const t=$6(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const f=new URL(e);return f.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===i}if(!qde.test(n))return!1;if(Hde.test(e))return i===e;const c=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xde=new k_(3e4,6e4);function LI(){const e=Zc().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Kde(e){return new Promise((t,n)=>{var i,c,d;function f(){LI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{LI(),n(Gc(e,"network-request-failed"))},timeout:Xde.get()})}if(!((c=(i=Zc().gapi)===null||i===void 0?void 0:i.iframes)===null||c===void 0)&&c.Iframe)t(gapi.iframes.getContext());else if(!((d=Zc().gapi)===null||d===void 0)&&d.load)f();else{const a=$ue("iframefcb");return Zc()[a]=()=>{gapi.load?f():n(Gc(e,"network-request-failed"))},bN(`https://apis.google.com/js/api.js?onload=${a}`).catch(v=>n(v))}}).catch(t=>{throw Zv=null,t})}let Zv=null;function Yde(e){return Zv=Zv||Kde(e),Zv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jde=new k_(5e3,15e3),Qde="__/auth/iframe",ehe="emulator/auth/iframe",the={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nhe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rhe(e){const t=e.config;vr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?WT(t,ehe):`https://${e.config.authDomain}/${Qde}`,i={apiKey:t.apiKey,appName:e.name,v:S_},c=nhe.get(e.config.apiHost);c&&(i.eid=c);const d=e._getFrameworks();return d.length&&(i.fw=d.join(",")),`${n}?${T_(i).slice(1)}`}async function ihe(e){const t=await Yde(e),n=Zc().gapi;return vr(n,e,"internal-error"),t.open({where:document.body,url:rhe(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:the,dontclear:!0},i=>new Promise(async(c,d)=>{await i.restyle({setHideOnLeave:!1});const f=Gc(e,"network-request-failed"),a=Zc().setTimeout(()=>{d(f)},Jde.get());function v(){Zc().clearTimeout(a),c(i)}i.ping(v).then(v,()=>{d(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ohe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ahe=500,she=600,lhe="_blank",che="http://localhost";class zI{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uhe(e,t,n,i=ahe,c=she){const d=Math.max((window.screen.availHeight-c)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const v=Object.assign(Object.assign({},ohe),{width:i.toString(),height:c.toString(),top:d,left:f}),S=La().toLowerCase();n&&(a=hN(S)?lhe:n),dN(S)&&(t=t||che,v.scrollbars="yes");const M=Object.entries(v).reduce((N,[W,V])=>`${N}${W}=${V},`,"");if(Nue(S)&&a!=="_self")return dhe(t||"",a),new zI(null);const R=window.open(t||"",a,M);vr(R,e,"popup-blocked");try{R.focus()}catch{}return new zI(R)}function dhe(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hhe="__/auth/handler",phe="emulator/auth/handler",fhe=encodeURIComponent("fac");async function NI(e,t,n,i,c,d){vr(e.config.authDomain,e,"auth-domain-config-required"),vr(e.config.apiKey,e,"invalid-api-key");const f={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:S_,eventId:c};if(t instanceof TN){t.setDefaultLanguage(e.languageCode),f.providerId=t.providerId||"",lce(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[M,R]of Object.entries(d||{}))f[M]=R}if(t instanceof P_){const M=t.getScopes().filter(R=>R!=="");M.length>0&&(f.scopes=M.join(","))}e.tenantId&&(f.tid=e.tenantId);const a=f;for(const M of Object.keys(a))a[M]===void 0&&delete a[M];const v=await e._getAppCheckToken(),S=v?`#${fhe}=${encodeURIComponent(v)}`:"";return`${mhe(e)}?${T_(a).slice(1)}${S}`}function mhe({config:e}){return e.emulator?WT(e,phe):`https://${e.authDomain}/${hhe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="webStorageSupport";class ghe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AN,this._completeRedirectFn=jde,this._overrideRedirectResult=Nde}async _openPopup(t,n,i,c){var d;Uu((d=this.eventManagers[t._key()])===null||d===void 0?void 0:d.manager,"_initialize() not called before _openPopup()");const f=await NI(t,n,i,$6(),c);return uhe(t,f,XT())}async _openRedirect(t,n,i,c){await this._originValidation(t);const d=await NI(t,n,i,$6(),c);return vde(d),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:c,promise:d}=this.eventManagers[n];return c?Promise.resolve(c):(Uu(d,"If manager is not set, promise should be"),d)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await ihe(t),i=new Ude(t);return n.register("authEvent",c=>(vr(c==null?void 0:c.authEvent,t,"invalid-auth-event"),{status:i.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(L4,{type:L4},c=>{var d;const f=(d=c==null?void 0:c[0])===null||d===void 0?void 0:d[L4];f!==void 0&&n(!!f),sc(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Gde(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return _N()||qT()||Lb()}}const _he=ghe;var FI="@firebase/auth",BI="1.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){vr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vhe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function xhe(e){X0(new R1("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),c=t.getProvider("heartbeat"),d=t.getProvider("app-check-internal"),{apiKey:f,authDomain:a}=i.options;vr(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const v={apiKey:f,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yN(e)},S=new que(i,c,d,v);return Zue(S,n),S},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),X0(new R1("auth-internal",t=>{const n=rm(t.getProvider("auth").getImmediate());return(i=>new yhe(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),c1(FI,BI,vhe(e)),c1(FI,BI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bhe=5*60,whe=Kz("authIdTokenMaxAge")||bhe;let jI=null;const Ehe=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>whe)return;const c=n==null?void 0:n.token;jI!==c&&(jI=c,await fetch(e,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function The(e=lue()){const t=eN(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Gue(e,{popupRedirectResolver:_he,persistence:[Pde,gde,AN]}),i=Kz("authTokenSyncURL");if(i){const d=Ehe(i);ude(n,d,()=>d(n.currentUser)),cde(n,f=>d(f))}const c=Yle("auth");return c&&Xue(n,`http://${c}`),n}xhe("Browser");var She="firebase",khe="10.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */c1(She,khe,"app");const Che={apiKey:"AIzaSyCKFlLil4_yvpS8ocVgFA3ApN-6iKxHPSw",authDomain:"ucdsummerproject.firebaseapp.com",projectId:"ucdsummerproject",storageBucket:"ucdsummerproject.appspot.com",messagingSenderId:"676041294527",appId:"1:676041294527:web:a2db72965b6bc06600bc0a"},Phe=tN(Che),vv=The(Phe),NN=K.createContext(),Ihe=({children:e})=>{const[t,n]=K.useState({}),i=(f,a)=>sde(vv,f,a),c=(f,a)=>lde(vv,f,a),d=()=>hde(vv);return K.useEffect(()=>{const f=dde(vv,a=>{console.log(a),n(a)});return()=>{f()}},[]),Z.jsx(NN.Provider,{value:{createUser:i,user:t,logout:d,signIn:c},children:e})},Fb=()=>K.useContext(NN),Ahe=()=>{const{signIn:e}=Fb(),[t,n]=K.useState(""),[i,c]=K.useState(""),[d,f]=K.useState(""),a=Pp(),v=async S=>{S.preventDefault(),f("");try{await e(t,i),a("/account")}catch(M){f(M.message),console.log(M.message)}};return Z.jsxs("div",{className:"Signin-container",children:[Z.jsxs("div",{children:[Z.jsx("h1",{className:"signin-text1",children:"Sign in to your account"}),Z.jsxs("p",{className:"signin-text2",children:["Don't have an account yet? ",Z.jsx(sD,{to:"/signup",className:"signin-text3",children:"Sign up."})]})]}),Z.jsxs("form",{children:[Z.jsxs("div",{className:"email-container",children:[Z.jsx("label",{children:"Email Address"}),Z.jsx("input",{onChange:S=>n(S.target.value),type:"email",className:"email"})]}),Z.jsxs("div",{className:"password-container",children:[Z.jsx("label",{children:"Password"}),Z.jsx("input",{onChange:S=>c(S.target.value),type:"password",className:"password"})]}),Z.jsx("div",{className:"wrapper-function-signin",children:Z.jsx("a",{className:"wrapper-function-text-signin",onClick:v,href:"#",type:"submit",children:Z.jsx("span",{children:"Sign In"})})})]})]})};const Mhe=()=>{const[e,t]=K.useState(""),[n,i]=K.useState(""),[c,d]=K.useState(""),[f,a]=K.useState(""),[v,S]=K.useState(""),{createUser:M}=Fb(),R=Pp(),N=async W=>{W.preventDefault(),d("");try{await M(e,n,f,v),R("/account")}catch(V){d(V.message),console.log(V.message)}};return Z.jsxs("div",{className:"Signup-container",children:[Z.jsxs("div",{children:[Z.jsx("h1",{className:"signup-text1",children:"Sign up for a free account"}),Z.jsxs("p",{className:"signup-text2",children:["Already have an account yet?"," ",Z.jsx(sD,{to:"/signin",className:"signup-text3",children:"Sign in."})]})]}),Z.jsxs("form",{onSubmit:N,children:[Z.jsxs("div",{className:"email-container",children:[Z.jsx("label",{children:"Email Address"}),Z.jsx("input",{onChange:W=>t(W.target.value),type:"email",className:"email"})]}),Z.jsxs("div",{className:"name-container",children:[Z.jsx("label",{children:"User Name"}),Z.jsx("input",{onChange:W=>a(W.target.value),type:"text",className:"name"})]}),Z.jsxs("div",{className:"address-container",children:[Z.jsx("label",{children:"Address"}),Z.jsx("input",{onChange:W=>S(W.target.value),type:"text",className:"address"})]}),Z.jsxs("div",{className:"password-container",children:[Z.jsx("label",{children:"Password"}),Z.jsx("input",{onChange:W=>i(W.target.value),type:"password",className:"password"})]}),Z.jsx("div",{className:"wrapper-function-signup",children:Z.jsx("a",{className:"wrapper-function-text-signup",href:"#",type:"submit",onClick:N,children:Z.jsx("span",{children:"Sign Up"})})})]})]})};const Dhe=()=>{const e=Pp(),{user:t,logout:n}=Fb(),i=async()=>{try{await n(),e("/signin"),console.log("You are logged out")}catch(c){console.log(c.message)}};return Z.jsxs("div",{className:"account",children:[Z.jsx("h1",{className:"account-text1",children:"Account"}),Z.jsxs("p",{className:"account-text2",children:["User Email:",t&&t.email]}),Z.jsx("div",{className:"wrapper-function-logout",children:Z.jsx("a",{className:"wrapper-function-text-logout",href:"#",type:"submit",onClick:i,children:Z.jsx("span",{children:"Log Out"})})})]})},Rhe=({children:e})=>{const{user:t}=Fb();return t?e:Z.jsx(EV,{to:"/signin"})};function Ohe(){return Z.jsx("h2",{children:"The requested page does not exist"})}function Lhe(){const[e,t]=K.useState({latitude:40.74218481889335,longitude:-73.98786664009094,endLatitude:40.72540497175606,endLongitude:-74.01052594184875,hour:0,waypoints:[]});return Z.jsx("div",{children:Z.jsx(MV,{children:Z.jsx(Ihe,{children:Z.jsxs(SV,{children:[Z.jsx(ol,{exact:!0,path:"/",element:Z.jsx(pI,{})}),Z.jsx(ol,{exact:!0,path:"/interface",element:Z.jsx(Pae,{inputValues:e,setInputValues:t})}),Z.jsx(ol,{path:"/login",element:Z.jsx(FL,{})}),Z.jsx(ol,{path:"/latlondis",element:Z.jsx(Aae,{})}),Z.jsx(ol,{path:"*",element:Z.jsx(Ohe,{})}),Z.jsx(ol,{path:"/interface-two",element:Z.jsx(Ole,{inputValues:e,setInputValues:t})}),Z.jsx(ol,{path:"/showroute",element:Z.jsx(Vle,{})}),Z.jsx(ol,{path:"/homepage",element:Z.jsx(pI,{})}),Z.jsx(ol,{path:"/signin",element:Z.jsx(Ahe,{})}),Z.jsx(ol,{path:"/signup",element:Z.jsx(Mhe,{})}),Z.jsx(ol,{path:"/account",element:Z.jsx(Rhe,{children:Z.jsx(Dhe,{})})})]})})})})}const zhe=z4.createRoot(document.getElementById("root"));zhe.render(Z.jsx(Lhe,{}));
