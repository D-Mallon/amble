function Q$(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(e,a,u.get?u:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function C6(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var a=[null];a.push.apply(a,arguments);var u=Function.bind.apply(t,a);return new u}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var KA={exports:{}},kx={},YA={exports:{}},Br={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_=Symbol.for("react.element"),eU=Symbol.for("react.portal"),tU=Symbol.for("react.fragment"),nU=Symbol.for("react.strict_mode"),rU=Symbol.for("react.profiler"),iU=Symbol.for("react.provider"),oU=Symbol.for("react.context"),aU=Symbol.for("react.forward_ref"),sU=Symbol.for("react.suspense"),lU=Symbol.for("react.memo"),cU=Symbol.for("react.lazy"),m9=Symbol.iterator;function uU(e){return e===null||typeof e!="object"?null:(e=m9&&e[m9]||e["@@iterator"],typeof e=="function"?e:null)}var JA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QA=Object.assign,eM={};function W1(e,t,n){this.props=e,this.context=t,this.refs=eM,this.updater=n||JA}W1.prototype.isReactComponent={};W1.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};W1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tM(){}tM.prototype=W1.prototype;function k6(e,t,n){this.props=e,this.context=t,this.refs=eM,this.updater=n||JA}var P6=k6.prototype=new tM;P6.constructor=k6;QA(P6,W1.prototype);P6.isPureReactComponent=!0;var g9=Array.isArray,nM=Object.prototype.hasOwnProperty,I6={current:null},rM={key:!0,ref:!0,__self:!0,__source:!0};function iM(e,t,n){var i,a={},u=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(u=""+t.key),t)nM.call(t,i)&&!rM.hasOwnProperty(i)&&(a[i]=t[i]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var v=Array(o),E=0;E<o;E++)v[E]=arguments[E+2];a.children=v}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)a[i]===void 0&&(a[i]=o[i]);return{$$typeof:d_,type:e,key:u,ref:f,props:a,_owner:I6.current}}function dU(e,t){return{$$typeof:d_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function A6(e){return typeof e=="object"&&e!==null&&e.$$typeof===d_}function hU(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var _9=/\/+/g;function A3(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hU(""+e.key):t.toString(36)}function Fv(e,t,n,i,a){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(u){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case d_:case eU:f=!0}}if(f)return f=e,a=a(f),e=i===""?"."+A3(f,0):i,g9(a)?(n="",e!=null&&(n=e.replace(_9,"$&/")+"/"),Fv(a,t,n,"",function(E){return E})):a!=null&&(A6(a)&&(a=dU(a,n+(!a.key||f&&f.key===a.key?"":(""+a.key).replace(_9,"$&/")+"/")+e)),t.push(a)),1;if(f=0,i=i===""?".":i+":",g9(e))for(var o=0;o<e.length;o++){u=e[o];var v=i+A3(u,o);f+=Fv(u,t,n,v,a)}else if(v=uU(e),typeof v=="function")for(e=v.call(e),o=0;!(u=e.next()).done;)u=u.value,v=i+A3(u,o++),f+=Fv(u,t,n,v,a);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function qy(e,t,n){if(e==null)return e;var i=[],a=0;return Fv(e,i,"","",function(u){return t.call(n,u,a++)}),i}function pU(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ja={current:null},Nv={transition:null},fU={ReactCurrentDispatcher:Ja,ReactCurrentBatchConfig:Nv,ReactCurrentOwner:I6};Br.Children={map:qy,forEach:function(e,t,n){qy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qy(e,function(){t++}),t},toArray:function(e){return qy(e,function(t){return t})||[]},only:function(e){if(!A6(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Br.Component=W1;Br.Fragment=tU;Br.Profiler=rU;Br.PureComponent=k6;Br.StrictMode=nU;Br.Suspense=sU;Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fU;Br.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=QA({},e.props),a=e.key,u=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,f=I6.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(v in t)nM.call(t,v)&&!rM.hasOwnProperty(v)&&(i[v]=t[v]===void 0&&o!==void 0?o[v]:t[v])}var v=arguments.length-2;if(v===1)i.children=n;else if(1<v){o=Array(v);for(var E=0;E<v;E++)o[E]=arguments[E+2];i.children=o}return{$$typeof:d_,type:e.type,key:a,ref:u,props:i,_owner:f}};Br.createContext=function(e){return e={$$typeof:oU,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:iU,_context:e},e.Consumer=e};Br.createElement=iM;Br.createFactory=function(e){var t=iM.bind(null,e);return t.type=e,t};Br.createRef=function(){return{current:null}};Br.forwardRef=function(e){return{$$typeof:aU,render:e}};Br.isValidElement=A6;Br.lazy=function(e){return{$$typeof:cU,_payload:{_status:-1,_result:e},_init:pU}};Br.memo=function(e,t){return{$$typeof:lU,type:e,compare:t===void 0?null:t}};Br.startTransition=function(e){var t=Nv.transition;Nv.transition={};try{e()}finally{Nv.transition=t}};Br.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Br.useCallback=function(e,t){return Ja.current.useCallback(e,t)};Br.useContext=function(e){return Ja.current.useContext(e)};Br.useDebugValue=function(){};Br.useDeferredValue=function(e){return Ja.current.useDeferredValue(e)};Br.useEffect=function(e,t){return Ja.current.useEffect(e,t)};Br.useId=function(){return Ja.current.useId()};Br.useImperativeHandle=function(e,t,n){return Ja.current.useImperativeHandle(e,t,n)};Br.useInsertionEffect=function(e,t){return Ja.current.useInsertionEffect(e,t)};Br.useLayoutEffect=function(e,t){return Ja.current.useLayoutEffect(e,t)};Br.useMemo=function(e,t){return Ja.current.useMemo(e,t)};Br.useReducer=function(e,t,n){return Ja.current.useReducer(e,t,n)};Br.useRef=function(e){return Ja.current.useRef(e)};Br.useState=function(e){return Ja.current.useState(e)};Br.useSyncExternalStore=function(e,t,n){return Ja.current.useSyncExternalStore(e,t,n)};Br.useTransition=function(){return Ja.current.useTransition()};Br.version="18.2.0";YA.exports=Br;var q=YA.exports;const Ut=V1(q),h2=Q$({__proto__:null,default:Ut},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mU=q,gU=Symbol.for("react.element"),_U=Symbol.for("react.fragment"),yU=Object.prototype.hasOwnProperty,vU=mU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xU={key:!0,ref:!0,__self:!0,__source:!0};function oM(e,t,n){var i,a={},u=null,f=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)yU.call(t,i)&&!xU.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:gU,type:e,key:u,ref:f,props:a,_owner:vU.current}}kx.Fragment=_U;kx.jsx=oM;kx.jsxs=oM;KA.exports=kx;var Z=KA.exports,f5={},aM={exports:{}},Gs={},sM={exports:{}},lM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Le,Je){var it=Le.length;Le.push(Je);e:for(;0<it;){var kt=it-1>>>1,yt=Le[kt];if(0<a(yt,Je))Le[kt]=Je,Le[it]=yt,it=kt;else break e}}function n(Le){return Le.length===0?null:Le[0]}function i(Le){if(Le.length===0)return null;var Je=Le[0],it=Le.pop();if(it!==Je){Le[0]=it;e:for(var kt=0,yt=Le.length,wt=yt>>>1;kt<wt;){var jt=2*(kt+1)-1,Qt=Le[jt],en=jt+1,on=Le[en];if(0>a(Qt,it))en<yt&&0>a(on,Qt)?(Le[kt]=on,Le[en]=it,kt=en):(Le[kt]=Qt,Le[jt]=it,kt=jt);else if(en<yt&&0>a(on,it))Le[kt]=on,Le[en]=it,kt=en;else break e}}return Je}function a(Le,Je){var it=Le.sortIndex-Je.sortIndex;return it!==0?it:Le.id-Je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var f=Date,o=f.now();e.unstable_now=function(){return f.now()-o}}var v=[],E=[],k=1,D=null,R=3,j=!1,N=!1,$=!1,ee=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(Le){for(var Je=n(E);Je!==null;){if(Je.callback===null)i(E);else if(Je.startTime<=Le)i(E),Je.sortIndex=Je.expirationTime,t(v,Je);else break;Je=n(E)}}function ie(Le){if($=!1,Y(Le),!N)if(n(v)!==null)N=!0,tt(ue);else{var Je=n(E);Je!==null&&Ke(ie,Je.startTime-Le)}}function ue(Le,Je){N=!1,$&&($=!1,W(Te),Te=-1),j=!0;var it=R;try{for(Y(Je),D=n(v);D!==null&&(!(D.expirationTime>Je)||Le&&!rt());){var kt=D.callback;if(typeof kt=="function"){D.callback=null,R=D.priorityLevel;var yt=kt(D.expirationTime<=Je);Je=e.unstable_now(),typeof yt=="function"?D.callback=yt:D===n(v)&&i(v),Y(Je)}else i(v);D=n(v)}if(D!==null)var wt=!0;else{var jt=n(E);jt!==null&&Ke(ie,jt.startTime-Je),wt=!1}return wt}finally{D=null,R=it,j=!1}}var de=!1,M=null,Te=-1,fe=5,Oe=-1;function rt(){return!(e.unstable_now()-Oe<fe)}function at(){if(M!==null){var Le=e.unstable_now();Oe=Le;var Je=!0;try{Je=M(!0,Le)}finally{Je?qe():(de=!1,M=null)}}else de=!1}var qe;if(typeof K=="function")qe=function(){K(at)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Be=ze.port2;ze.port1.onmessage=at,qe=function(){Be.postMessage(null)}}else qe=function(){ee(at,0)};function tt(Le){M=Le,de||(de=!0,qe())}function Ke(Le,Je){Te=ee(function(){Le(e.unstable_now())},Je)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Le){Le.callback=null},e.unstable_continueExecution=function(){N||j||(N=!0,tt(ue))},e.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<Le?Math.floor(1e3/Le):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(Le){switch(R){case 1:case 2:case 3:var Je=3;break;default:Je=R}var it=R;R=Je;try{return Le()}finally{R=it}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Le,Je){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var it=R;R=Le;try{return Je()}finally{R=it}},e.unstable_scheduleCallback=function(Le,Je,it){var kt=e.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?kt+it:kt):it=kt,Le){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=it+yt,Le={id:k++,callback:Je,priorityLevel:Le,startTime:it,expirationTime:yt,sortIndex:-1},it>kt?(Le.sortIndex=it,t(E,Le),n(v)===null&&Le===n(E)&&($?(W(Te),Te=-1):$=!0,Ke(ie,it-kt))):(Le.sortIndex=yt,t(v,Le),N||j||(N=!0,tt(ue))),Le},e.unstable_shouldYield=rt,e.unstable_wrapCallback=function(Le){var Je=R;return function(){var it=R;R=Je;try{return Le.apply(this,arguments)}finally{R=it}}}})(lM);sM.exports=lM;var bU=sM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cM=q,Ws=bU;function cn(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uM=new Set,m0={};function Rp(e,t){b1(e,t),b1(e+"Capture",t)}function b1(e,t){for(m0[e]=t,e=0;e<t.length;e++)uM.add(t[e])}var $u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m5=Object.prototype.hasOwnProperty,wU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y9={},v9={};function EU(e){return m5.call(v9,e)?!0:m5.call(y9,e)?!1:wU.test(e)?v9[e]=!0:(y9[e]=!0,!1)}function SU(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TU(e,t,n,i){if(t===null||typeof t>"u"||SU(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qa(e,t,n,i,a,u,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=f}var pa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pa[e]=new Qa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pa[t]=new Qa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pa[e]=new Qa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pa[e]=new Qa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pa[e]=new Qa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pa[e]=new Qa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pa[e]=new Qa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pa[e]=new Qa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pa[e]=new Qa(e,5,!1,e.toLowerCase(),null,!1,!1)});var M6=/[\-:]([a-z])/g;function D6(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(M6,D6);pa[t]=new Qa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(M6,D6);pa[t]=new Qa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(M6,D6);pa[t]=new Qa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pa[e]=new Qa(e,1,!1,e.toLowerCase(),null,!1,!1)});pa.xlinkHref=new Qa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pa[e]=new Qa(e,1,!1,e.toLowerCase(),null,!0,!0)});function O6(e,t,n,i){var a=pa.hasOwnProperty(t)?pa[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TU(t,n,a,i)&&(n=null),i||a===null?EU(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Zu=cM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gy=Symbol.for("react.element"),Bf=Symbol.for("react.portal"),jf=Symbol.for("react.fragment"),R6=Symbol.for("react.strict_mode"),g5=Symbol.for("react.profiler"),dM=Symbol.for("react.provider"),hM=Symbol.for("react.context"),L6=Symbol.for("react.forward_ref"),_5=Symbol.for("react.suspense"),y5=Symbol.for("react.suspense_list"),z6=Symbol.for("react.memo"),Pd=Symbol.for("react.lazy"),pM=Symbol.for("react.offscreen"),x9=Symbol.iterator;function gg(e){return e===null||typeof e!="object"?null:(e=x9&&e[x9]||e["@@iterator"],typeof e=="function"?e:null)}var ao=Object.assign,M3;function Lg(e){if(M3===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M3=t&&t[1]||""}return`
`+M3+e}var D3=!1;function O3(e,t){if(!e||D3)return"";D3=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var i=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){i=E}e.call(t.prototype)}else{try{throw Error()}catch(E){i=E}e()}}catch(E){if(E&&i&&typeof E.stack=="string"){for(var a=E.stack.split(`
`),u=i.stack.split(`
`),f=a.length-1,o=u.length-1;1<=f&&0<=o&&a[f]!==u[o];)o--;for(;1<=f&&0<=o;f--,o--)if(a[f]!==u[o]){if(f!==1||o!==1)do if(f--,o--,0>o||a[f]!==u[o]){var v=`
`+a[f].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=f&&0<=o);break}}}finally{D3=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Lg(e):""}function CU(e){switch(e.tag){case 5:return Lg(e.type);case 16:return Lg("Lazy");case 13:return Lg("Suspense");case 19:return Lg("SuspenseList");case 0:case 2:case 15:return e=O3(e.type,!1),e;case 11:return e=O3(e.type.render,!1),e;case 1:return e=O3(e.type,!0),e;default:return""}}function v5(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jf:return"Fragment";case Bf:return"Portal";case g5:return"Profiler";case R6:return"StrictMode";case _5:return"Suspense";case y5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hM:return(e.displayName||"Context")+".Consumer";case dM:return(e._context.displayName||"Context")+".Provider";case L6:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z6:return t=e.displayName||null,t!==null?t:v5(e.type)||"Memo";case Pd:t=e._payload,e=e._init;try{return v5(e(t))}catch{}}return null}function kU(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v5(t);case 8:return t===R6?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fM(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PU(e){var t=fM(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(f){i=""+f,u.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zy(e){e._valueTracker||(e._valueTracker=PU(e))}function mM(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=fM(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function p2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function x5(e,t){var n=t.checked;return ao({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function b9(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=nh(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gM(e,t){t=t.checked,t!=null&&O6(e,"checked",t,!1)}function b5(e,t){gM(e,t);var n=nh(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?w5(e,t.type,n):t.hasOwnProperty("defaultValue")&&w5(e,t.type,nh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function w9(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function w5(e,t,n){(t!=="number"||p2(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zg=Array.isArray;function a1(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+nh(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function E5(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(cn(91));return ao({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function E9(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(cn(92));if(zg(n)){if(1<n.length)throw Error(cn(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:nh(n)}}function _M(e,t){var n=nh(t.value),i=nh(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function S9(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yM(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S5(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yM(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xy,vM=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xy=Xy||document.createElement("div"),Xy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function g0(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IU=["Webkit","ms","Moz","O"];Object.keys(qg).forEach(function(e){IU.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qg[t]=qg[e]})});function xM(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||qg.hasOwnProperty(e)&&qg[e]?(""+t).trim():t+"px"}function bM(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=xM(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var AU=ao({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T5(e,t){if(t){if(AU[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(cn(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(cn(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(cn(61))}if(t.style!=null&&typeof t.style!="object")throw Error(cn(62))}}function C5(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k5=null;function F6(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var P5=null,s1=null,l1=null;function T9(e){if(e=f_(e)){if(typeof P5!="function")throw Error(cn(280));var t=e.stateNode;t&&(t=Dx(t),P5(e.stateNode,e.type,t))}}function wM(e){s1?l1?l1.push(e):l1=[e]:s1=e}function EM(){if(s1){var e=s1,t=l1;if(l1=s1=null,T9(e),t)for(e=0;e<t.length;e++)T9(t[e])}}function SM(e,t){return e(t)}function TM(){}var R3=!1;function CM(e,t,n){if(R3)return e(t,n);R3=!0;try{return SM(e,t,n)}finally{R3=!1,(s1!==null||l1!==null)&&(TM(),EM())}}function _0(e,t){var n=e.stateNode;if(n===null)return null;var i=Dx(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(cn(231,t,typeof n));return n}var I5=!1;if($u)try{var _g={};Object.defineProperty(_g,"passive",{get:function(){I5=!0}}),window.addEventListener("test",_g,_g),window.removeEventListener("test",_g,_g)}catch{I5=!1}function MU(e,t,n,i,a,u,f,o,v){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(k){this.onError(k)}}var Gg=!1,f2=null,m2=!1,A5=null,DU={onError:function(e){Gg=!0,f2=e}};function OU(e,t,n,i,a,u,f,o,v){Gg=!1,f2=null,MU.apply(DU,arguments)}function RU(e,t,n,i,a,u,f,o,v){if(OU.apply(this,arguments),Gg){if(Gg){var E=f2;Gg=!1,f2=null}else throw Error(cn(198));m2||(m2=!0,A5=E)}}function Lp(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kM(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function C9(e){if(Lp(e)!==e)throw Error(cn(188))}function LU(e){var t=e.alternate;if(!t){if(t=Lp(e),t===null)throw Error(cn(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var u=a.alternate;if(u===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===n)return C9(a),e;if(u===i)return C9(a),t;u=u.sibling}throw Error(cn(188))}if(n.return!==i.return)n=a,i=u;else{for(var f=!1,o=a.child;o;){if(o===n){f=!0,n=a,i=u;break}if(o===i){f=!0,i=a,n=u;break}o=o.sibling}if(!f){for(o=u.child;o;){if(o===n){f=!0,n=u,i=a;break}if(o===i){f=!0,i=u,n=a;break}o=o.sibling}if(!f)throw Error(cn(189))}}if(n.alternate!==i)throw Error(cn(190))}if(n.tag!==3)throw Error(cn(188));return n.stateNode.current===n?e:t}function PM(e){return e=LU(e),e!==null?IM(e):null}function IM(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=IM(e);if(t!==null)return t;e=e.sibling}return null}var AM=Ws.unstable_scheduleCallback,k9=Ws.unstable_cancelCallback,zU=Ws.unstable_shouldYield,FU=Ws.unstable_requestPaint,xo=Ws.unstable_now,NU=Ws.unstable_getCurrentPriorityLevel,N6=Ws.unstable_ImmediatePriority,MM=Ws.unstable_UserBlockingPriority,g2=Ws.unstable_NormalPriority,BU=Ws.unstable_LowPriority,DM=Ws.unstable_IdlePriority,Px=null,Hc=null;function jU(e){if(Hc&&typeof Hc.onCommitFiberRoot=="function")try{Hc.onCommitFiberRoot(Px,e,void 0,(e.current.flags&128)===128)}catch{}}var ac=Math.clz32?Math.clz32:VU,$U=Math.log,UU=Math.LN2;function VU(e){return e>>>=0,e===0?32:31-($U(e)/UU|0)|0}var Ky=64,Yy=4194304;function Fg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _2(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,u=e.pingedLanes,f=n&268435455;if(f!==0){var o=f&~a;o!==0?i=Fg(o):(u&=f,u!==0&&(i=Fg(u)))}else f=n&~a,f!==0?i=Fg(f):u!==0&&(i=Fg(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,u=t&-t,a>=u||a===16&&(u&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-ac(t),a=1<<n,i|=e[n],t&=~a;return i}function WU(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HU(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var f=31-ac(u),o=1<<f,v=a[f];v===-1?(!(o&n)||o&i)&&(a[f]=WU(o,t)):v<=t&&(e.expiredLanes|=o),u&=~o}}function M5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function OM(){var e=Ky;return Ky<<=1,!(Ky&4194240)&&(Ky=64),e}function L3(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function h_(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ac(t),e[t]=n}function qU(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ac(n),u=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~u}}function B6(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ac(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var mi=0;function RM(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var LM,j6,zM,FM,NM,D5=!1,Jy=[],Vd=null,Wd=null,Hd=null,y0=new Map,v0=new Map,Ad=[],GU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P9(e,t){switch(e){case"focusin":case"focusout":Vd=null;break;case"dragenter":case"dragleave":Wd=null;break;case"mouseover":case"mouseout":Hd=null;break;case"pointerover":case"pointerout":y0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":v0.delete(t.pointerId)}}function yg(e,t,n,i,a,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:u,targetContainers:[a]},t!==null&&(t=f_(t),t!==null&&j6(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function ZU(e,t,n,i,a){switch(t){case"focusin":return Vd=yg(Vd,e,t,n,i,a),!0;case"dragenter":return Wd=yg(Wd,e,t,n,i,a),!0;case"mouseover":return Hd=yg(Hd,e,t,n,i,a),!0;case"pointerover":var u=a.pointerId;return y0.set(u,yg(y0.get(u)||null,e,t,n,i,a)),!0;case"gotpointercapture":return u=a.pointerId,v0.set(u,yg(v0.get(u)||null,e,t,n,i,a)),!0}return!1}function BM(e){var t=ip(e.target);if(t!==null){var n=Lp(t);if(n!==null){if(t=n.tag,t===13){if(t=kM(n),t!==null){e.blockedOn=t,NM(e.priority,function(){zM(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=O5(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);k5=i,n.target.dispatchEvent(i),k5=null}else return t=f_(n),t!==null&&j6(t),e.blockedOn=n,!1;t.shift()}return!0}function I9(e,t,n){Bv(e)&&n.delete(t)}function XU(){D5=!1,Vd!==null&&Bv(Vd)&&(Vd=null),Wd!==null&&Bv(Wd)&&(Wd=null),Hd!==null&&Bv(Hd)&&(Hd=null),y0.forEach(I9),v0.forEach(I9)}function vg(e,t){e.blockedOn===t&&(e.blockedOn=null,D5||(D5=!0,Ws.unstable_scheduleCallback(Ws.unstable_NormalPriority,XU)))}function x0(e){function t(a){return vg(a,e)}if(0<Jy.length){vg(Jy[0],e);for(var n=1;n<Jy.length;n++){var i=Jy[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Vd!==null&&vg(Vd,e),Wd!==null&&vg(Wd,e),Hd!==null&&vg(Hd,e),y0.forEach(t),v0.forEach(t),n=0;n<Ad.length;n++)i=Ad[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Ad.length&&(n=Ad[0],n.blockedOn===null);)BM(n),n.blockedOn===null&&Ad.shift()}var c1=Zu.ReactCurrentBatchConfig,y2=!0;function KU(e,t,n,i){var a=mi,u=c1.transition;c1.transition=null;try{mi=1,$6(e,t,n,i)}finally{mi=a,c1.transition=u}}function YU(e,t,n,i){var a=mi,u=c1.transition;c1.transition=null;try{mi=4,$6(e,t,n,i)}finally{mi=a,c1.transition=u}}function $6(e,t,n,i){if(y2){var a=O5(e,t,n,i);if(a===null)H3(e,t,i,v2,n),P9(e,i);else if(ZU(a,e,t,n,i))i.stopPropagation();else if(P9(e,i),t&4&&-1<GU.indexOf(e)){for(;a!==null;){var u=f_(a);if(u!==null&&LM(u),u=O5(e,t,n,i),u===null&&H3(e,t,i,v2,n),u===a)break;a=u}a!==null&&i.stopPropagation()}else H3(e,t,i,null,n)}}var v2=null;function O5(e,t,n,i){if(v2=null,e=F6(i),e=ip(e),e!==null)if(t=Lp(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kM(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return v2=e,null}function jM(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NU()){case N6:return 1;case MM:return 4;case g2:case BU:return 16;case DM:return 536870912;default:return 16}default:return 16}}var Fd=null,U6=null,jv=null;function $M(){if(jv)return jv;var e,t=U6,n=t.length,i,a="value"in Fd?Fd.value:Fd.textContent,u=a.length;for(e=0;e<n&&t[e]===a[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===a[u-i];i++);return jv=a.slice(e,1<i?1-i:void 0)}function $v(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qy(){return!0}function A9(){return!1}function Zs(e){function t(n,i,a,u,f){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=u,this.target=f,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(u):u[o]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Qy:A9,this.isPropagationStopped=A9,this}return ao(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qy)},persist:function(){},isPersistent:Qy}),t}var H1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V6=Zs(H1),p_=ao({},H1,{view:0,detail:0}),JU=Zs(p_),z3,F3,xg,Ix=ao({},p_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W6,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xg&&(xg&&e.type==="mousemove"?(z3=e.screenX-xg.screenX,F3=e.screenY-xg.screenY):F3=z3=0,xg=e),z3)},movementY:function(e){return"movementY"in e?e.movementY:F3}}),M9=Zs(Ix),QU=ao({},Ix,{dataTransfer:0}),eV=Zs(QU),tV=ao({},p_,{relatedTarget:0}),N3=Zs(tV),nV=ao({},H1,{animationName:0,elapsedTime:0,pseudoElement:0}),rV=Zs(nV),iV=ao({},H1,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),oV=Zs(iV),aV=ao({},H1,{data:0}),D9=Zs(aV),sV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uV(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cV[e])?!!t[e]:!1}function W6(){return uV}var dV=ao({},p_,{key:function(e){if(e.key){var t=sV[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$v(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lV[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W6,charCode:function(e){return e.type==="keypress"?$v(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$v(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hV=Zs(dV),pV=ao({},Ix,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O9=Zs(pV),fV=ao({},p_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W6}),mV=Zs(fV),gV=ao({},H1,{propertyName:0,elapsedTime:0,pseudoElement:0}),_V=Zs(gV),yV=ao({},Ix,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vV=Zs(yV),xV=[9,13,27,32],H6=$u&&"CompositionEvent"in window,Zg=null;$u&&"documentMode"in document&&(Zg=document.documentMode);var bV=$u&&"TextEvent"in window&&!Zg,UM=$u&&(!H6||Zg&&8<Zg&&11>=Zg),R9=String.fromCharCode(32),L9=!1;function VM(e,t){switch(e){case"keyup":return xV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $f=!1;function wV(e,t){switch(e){case"compositionend":return WM(t);case"keypress":return t.which!==32?null:(L9=!0,R9);case"textInput":return e=t.data,e===R9&&L9?null:e;default:return null}}function EV(e,t){if($f)return e==="compositionend"||!H6&&VM(e,t)?(e=$M(),jv=U6=Fd=null,$f=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return UM&&t.locale!=="ko"?null:t.data;default:return null}}var SV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z9(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!SV[e.type]:t==="textarea"}function HM(e,t,n,i){wM(i),t=x2(t,"onChange"),0<t.length&&(n=new V6("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Xg=null,b0=null;function TV(e){nD(e,0)}function Ax(e){var t=Wf(e);if(mM(t))return e}function CV(e,t){if(e==="change")return t}var qM=!1;if($u){var B3;if($u){var j3="oninput"in document;if(!j3){var F9=document.createElement("div");F9.setAttribute("oninput","return;"),j3=typeof F9.oninput=="function"}B3=j3}else B3=!1;qM=B3&&(!document.documentMode||9<document.documentMode)}function N9(){Xg&&(Xg.detachEvent("onpropertychange",GM),b0=Xg=null)}function GM(e){if(e.propertyName==="value"&&Ax(b0)){var t=[];HM(t,b0,e,F6(e)),CM(TV,t)}}function kV(e,t,n){e==="focusin"?(N9(),Xg=t,b0=n,Xg.attachEvent("onpropertychange",GM)):e==="focusout"&&N9()}function PV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ax(b0)}function IV(e,t){if(e==="click")return Ax(t)}function AV(e,t){if(e==="input"||e==="change")return Ax(t)}function MV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cc=typeof Object.is=="function"?Object.is:MV;function w0(e,t){if(cc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!m5.call(t,a)||!cc(e[a],t[a]))return!1}return!0}function B9(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function j9(e,t){var n=B9(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B9(n)}}function ZM(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ZM(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function XM(){for(var e=window,t=p2();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=p2(e.document)}return t}function q6(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function DV(e){var t=XM(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ZM(n.ownerDocument.documentElement,n)){if(i!==null&&q6(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,u=Math.min(i.start,a);i=i.end===void 0?u:Math.min(i.end,a),!e.extend&&u>i&&(a=i,i=u,u=a),a=j9(n,u);var f=j9(n,i);a&&f&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OV=$u&&"documentMode"in document&&11>=document.documentMode,Uf=null,R5=null,Kg=null,L5=!1;function $9(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;L5||Uf==null||Uf!==p2(i)||(i=Uf,"selectionStart"in i&&q6(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Kg&&w0(Kg,i)||(Kg=i,i=x2(R5,"onSelect"),0<i.length&&(t=new V6("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Uf)))}function ev(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vf={animationend:ev("Animation","AnimationEnd"),animationiteration:ev("Animation","AnimationIteration"),animationstart:ev("Animation","AnimationStart"),transitionend:ev("Transition","TransitionEnd")},$3={},KM={};$u&&(KM=document.createElement("div").style,"AnimationEvent"in window||(delete Vf.animationend.animation,delete Vf.animationiteration.animation,delete Vf.animationstart.animation),"TransitionEvent"in window||delete Vf.transitionend.transition);function Mx(e){if($3[e])return $3[e];if(!Vf[e])return e;var t=Vf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in KM)return $3[e]=t[n];return e}var YM=Mx("animationend"),JM=Mx("animationiteration"),QM=Mx("animationstart"),eD=Mx("transitionend"),tD=new Map,U9="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dh(e,t){tD.set(e,t),Rp(t,[e])}for(var U3=0;U3<U9.length;U3++){var V3=U9[U3],RV=V3.toLowerCase(),LV=V3[0].toUpperCase()+V3.slice(1);dh(RV,"on"+LV)}dh(YM,"onAnimationEnd");dh(JM,"onAnimationIteration");dh(QM,"onAnimationStart");dh("dblclick","onDoubleClick");dh("focusin","onFocus");dh("focusout","onBlur");dh(eD,"onTransitionEnd");b1("onMouseEnter",["mouseout","mouseover"]);b1("onMouseLeave",["mouseout","mouseover"]);b1("onPointerEnter",["pointerout","pointerover"]);b1("onPointerLeave",["pointerout","pointerover"]);Rp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ng="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ng));function V9(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,RU(i,t,void 0,e),e.currentTarget=null}function nD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var f=i.length-1;0<=f;f--){var o=i[f],v=o.instance,E=o.currentTarget;if(o=o.listener,v!==u&&a.isPropagationStopped())break e;V9(a,o,E),u=v}else for(f=0;f<i.length;f++){if(o=i[f],v=o.instance,E=o.currentTarget,o=o.listener,v!==u&&a.isPropagationStopped())break e;V9(a,o,E),u=v}}}if(m2)throw e=A5,m2=!1,A5=null,e}function Fi(e,t){var n=t[j5];n===void 0&&(n=t[j5]=new Set);var i=e+"__bubble";n.has(i)||(rD(t,e,2,!1),n.add(i))}function W3(e,t,n){var i=0;t&&(i|=4),rD(n,e,i,t)}var tv="_reactListening"+Math.random().toString(36).slice(2);function E0(e){if(!e[tv]){e[tv]=!0,uM.forEach(function(n){n!=="selectionchange"&&(zV.has(n)||W3(n,!1,e),W3(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tv]||(t[tv]=!0,W3("selectionchange",!1,t))}}function rD(e,t,n,i){switch(jM(t)){case 1:var a=KU;break;case 4:a=YU;break;default:a=$6}n=a.bind(null,t,n,e),a=void 0,!I5||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function H3(e,t,n,i,a){var u=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var o=i.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(f===4)for(f=i.return;f!==null;){var v=f.tag;if((v===3||v===4)&&(v=f.stateNode.containerInfo,v===a||v.nodeType===8&&v.parentNode===a))return;f=f.return}for(;o!==null;){if(f=ip(o),f===null)return;if(v=f.tag,v===5||v===6){i=u=f;continue e}o=o.parentNode}}i=i.return}CM(function(){var E=u,k=F6(n),D=[];e:{var R=tD.get(e);if(R!==void 0){var j=V6,N=e;switch(e){case"keypress":if($v(n)===0)break e;case"keydown":case"keyup":j=hV;break;case"focusin":N="focus",j=N3;break;case"focusout":N="blur",j=N3;break;case"beforeblur":case"afterblur":j=N3;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=M9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=eV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=mV;break;case YM:case JM:case QM:j=rV;break;case eD:j=_V;break;case"scroll":j=JU;break;case"wheel":j=vV;break;case"copy":case"cut":case"paste":j=oV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=O9}var $=(t&4)!==0,ee=!$&&e==="scroll",W=$?R!==null?R+"Capture":null:R;$=[];for(var K=E,Y;K!==null;){Y=K;var ie=Y.stateNode;if(Y.tag===5&&ie!==null&&(Y=ie,W!==null&&(ie=_0(K,W),ie!=null&&$.push(S0(K,ie,Y)))),ee)break;K=K.return}0<$.length&&(R=new j(R,N,null,n,k),D.push({event:R,listeners:$}))}}if(!(t&7)){e:{if(R=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",R&&n!==k5&&(N=n.relatedTarget||n.fromElement)&&(ip(N)||N[Uu]))break e;if((j||R)&&(R=k.window===k?k:(R=k.ownerDocument)?R.defaultView||R.parentWindow:window,j?(N=n.relatedTarget||n.toElement,j=E,N=N?ip(N):null,N!==null&&(ee=Lp(N),N!==ee||N.tag!==5&&N.tag!==6)&&(N=null)):(j=null,N=E),j!==N)){if($=M9,ie="onMouseLeave",W="onMouseEnter",K="mouse",(e==="pointerout"||e==="pointerover")&&($=O9,ie="onPointerLeave",W="onPointerEnter",K="pointer"),ee=j==null?R:Wf(j),Y=N==null?R:Wf(N),R=new $(ie,K+"leave",j,n,k),R.target=ee,R.relatedTarget=Y,ie=null,ip(k)===E&&($=new $(W,K+"enter",N,n,k),$.target=Y,$.relatedTarget=ee,ie=$),ee=ie,j&&N)t:{for($=j,W=N,K=0,Y=$;Y;Y=Pf(Y))K++;for(Y=0,ie=W;ie;ie=Pf(ie))Y++;for(;0<K-Y;)$=Pf($),K--;for(;0<Y-K;)W=Pf(W),Y--;for(;K--;){if($===W||W!==null&&$===W.alternate)break t;$=Pf($),W=Pf(W)}$=null}else $=null;j!==null&&W9(D,R,j,$,!1),N!==null&&ee!==null&&W9(D,ee,N,$,!0)}}e:{if(R=E?Wf(E):window,j=R.nodeName&&R.nodeName.toLowerCase(),j==="select"||j==="input"&&R.type==="file")var ue=CV;else if(z9(R))if(qM)ue=AV;else{ue=PV;var de=kV}else(j=R.nodeName)&&j.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(ue=IV);if(ue&&(ue=ue(e,E))){HM(D,ue,n,k);break e}de&&de(e,R,E),e==="focusout"&&(de=R._wrapperState)&&de.controlled&&R.type==="number"&&w5(R,"number",R.value)}switch(de=E?Wf(E):window,e){case"focusin":(z9(de)||de.contentEditable==="true")&&(Uf=de,R5=E,Kg=null);break;case"focusout":Kg=R5=Uf=null;break;case"mousedown":L5=!0;break;case"contextmenu":case"mouseup":case"dragend":L5=!1,$9(D,n,k);break;case"selectionchange":if(OV)break;case"keydown":case"keyup":$9(D,n,k)}var M;if(H6)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else $f?VM(e,n)&&(Te="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Te="onCompositionStart");Te&&(UM&&n.locale!=="ko"&&($f||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&$f&&(M=$M()):(Fd=k,U6="value"in Fd?Fd.value:Fd.textContent,$f=!0)),de=x2(E,Te),0<de.length&&(Te=new D9(Te,e,null,n,k),D.push({event:Te,listeners:de}),M?Te.data=M:(M=WM(n),M!==null&&(Te.data=M)))),(M=bV?wV(e,n):EV(e,n))&&(E=x2(E,"onBeforeInput"),0<E.length&&(k=new D9("onBeforeInput","beforeinput",null,n,k),D.push({event:k,listeners:E}),k.data=M))}nD(D,t)})}function S0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function x2(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,u=a.stateNode;a.tag===5&&u!==null&&(a=u,u=_0(e,n),u!=null&&i.unshift(S0(e,u,a)),u=_0(e,t),u!=null&&i.push(S0(e,u,a))),e=e.return}return i}function Pf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function W9(e,t,n,i,a){for(var u=t._reactName,f=[];n!==null&&n!==i;){var o=n,v=o.alternate,E=o.stateNode;if(v!==null&&v===i)break;o.tag===5&&E!==null&&(o=E,a?(v=_0(n,u),v!=null&&f.unshift(S0(n,v,o))):a||(v=_0(n,u),v!=null&&f.push(S0(n,v,o)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var FV=/\r\n?/g,NV=/\u0000|\uFFFD/g;function H9(e){return(typeof e=="string"?e:""+e).replace(FV,`
`).replace(NV,"")}function nv(e,t,n){if(t=H9(t),H9(e)!==t&&n)throw Error(cn(425))}function b2(){}var z5=null,F5=null;function N5(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var B5=typeof setTimeout=="function"?setTimeout:void 0,BV=typeof clearTimeout=="function"?clearTimeout:void 0,q9=typeof Promise=="function"?Promise:void 0,jV=typeof queueMicrotask=="function"?queueMicrotask:typeof q9<"u"?function(e){return q9.resolve(null).then(e).catch($V)}:B5;function $V(e){setTimeout(function(){throw e})}function q3(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),x0(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);x0(t)}function qd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function G9(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var q1=Math.random().toString(36).slice(2),$c="__reactFiber$"+q1,T0="__reactProps$"+q1,Uu="__reactContainer$"+q1,j5="__reactEvents$"+q1,UV="__reactListeners$"+q1,VV="__reactHandles$"+q1;function ip(e){var t=e[$c];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Uu]||n[$c]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=G9(e);e!==null;){if(n=e[$c])return n;e=G9(e)}return t}e=n,n=e.parentNode}return null}function f_(e){return e=e[$c]||e[Uu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(cn(33))}function Dx(e){return e[T0]||null}var $5=[],Hf=-1;function hh(e){return{current:e}}function ji(e){0>Hf||(e.current=$5[Hf],$5[Hf]=null,Hf--)}function Ri(e,t){Hf++,$5[Hf]=e.current,e.current=t}var rh={},za=hh(rh),ps=hh(!1),yp=rh;function w1(e,t){var n=e.type.contextTypes;if(!n)return rh;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},u;for(u in n)a[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function fs(e){return e=e.childContextTypes,e!=null}function w2(){ji(ps),ji(za)}function Z9(e,t,n){if(za.current!==rh)throw Error(cn(168));Ri(za,t),Ri(ps,n)}function iD(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(cn(108,kU(e)||"Unknown",a));return ao({},n,i)}function E2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rh,yp=za.current,Ri(za,e),Ri(ps,ps.current),!0}function X9(e,t,n){var i=e.stateNode;if(!i)throw Error(cn(169));n?(e=iD(e,t,yp),i.__reactInternalMemoizedMergedChildContext=e,ji(ps),ji(za),Ri(za,e)):ji(ps),Ri(ps,n)}var Du=null,Ox=!1,G3=!1;function oD(e){Du===null?Du=[e]:Du.push(e)}function WV(e){Ox=!0,oD(e)}function ph(){if(!G3&&Du!==null){G3=!0;var e=0,t=mi;try{var n=Du;for(mi=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Du=null,Ox=!1}catch(a){throw Du!==null&&(Du=Du.slice(e+1)),AM(N6,ph),a}finally{mi=t,G3=!1}}return null}var qf=[],Gf=0,S2=null,T2=0,pl=[],fl=0,vp=null,Ou=1,Ru="";function Jh(e,t){qf[Gf++]=T2,qf[Gf++]=S2,S2=e,T2=t}function aD(e,t,n){pl[fl++]=Ou,pl[fl++]=Ru,pl[fl++]=vp,vp=e;var i=Ou;e=Ru;var a=32-ac(i)-1;i&=~(1<<a),n+=1;var u=32-ac(t)+a;if(30<u){var f=a-a%5;u=(i&(1<<f)-1).toString(32),i>>=f,a-=f,Ou=1<<32-ac(t)+a|n<<a|i,Ru=u+e}else Ou=1<<u|n<<a|i,Ru=e}function G6(e){e.return!==null&&(Jh(e,1),aD(e,1,0))}function Z6(e){for(;e===S2;)S2=qf[--Gf],qf[Gf]=null,T2=qf[--Gf],qf[Gf]=null;for(;e===vp;)vp=pl[--fl],pl[fl]=null,Ru=pl[--fl],pl[fl]=null,Ou=pl[--fl],pl[fl]=null}var Us=null,$s=null,qi=!1,nc=null;function sD(e,t){var n=ml(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function K9(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Us=e,$s=qd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Us=e,$s=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=vp!==null?{id:Ou,overflow:Ru}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ml(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Us=e,$s=null,!0):!1;default:return!1}}function U5(e){return(e.mode&1)!==0&&(e.flags&128)===0}function V5(e){if(qi){var t=$s;if(t){var n=t;if(!K9(e,t)){if(U5(e))throw Error(cn(418));t=qd(n.nextSibling);var i=Us;t&&K9(e,t)?sD(i,n):(e.flags=e.flags&-4097|2,qi=!1,Us=e)}}else{if(U5(e))throw Error(cn(418));e.flags=e.flags&-4097|2,qi=!1,Us=e}}}function Y9(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Us=e}function rv(e){if(e!==Us)return!1;if(!qi)return Y9(e),qi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!N5(e.type,e.memoizedProps)),t&&(t=$s)){if(U5(e))throw lD(),Error(cn(418));for(;t;)sD(e,t),t=qd(t.nextSibling)}if(Y9(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(cn(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){$s=qd(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}$s=null}}else $s=Us?qd(e.stateNode.nextSibling):null;return!0}function lD(){for(var e=$s;e;)e=qd(e.nextSibling)}function E1(){$s=Us=null,qi=!1}function X6(e){nc===null?nc=[e]:nc.push(e)}var HV=Zu.ReactCurrentBatchConfig;function Ql(e,t){if(e&&e.defaultProps){t=ao({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var C2=hh(null),k2=null,Zf=null,K6=null;function Y6(){K6=Zf=k2=null}function J6(e){var t=C2.current;ji(C2),e._currentValue=t}function W5(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function u1(e,t){k2=e,K6=Zf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(us=!0),e.firstContext=null)}function El(e){var t=e._currentValue;if(K6!==e)if(e={context:e,memoizedValue:t,next:null},Zf===null){if(k2===null)throw Error(cn(308));Zf=e,k2.dependencies={lanes:0,firstContext:e}}else Zf=Zf.next=e;return t}var op=null;function Q6(e){op===null?op=[e]:op.push(e)}function cD(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,Q6(t)):(n.next=a.next,a.next=n),t.interleaved=n,Vu(e,i)}function Vu(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Id=!1;function eS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gd(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Wr&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Vu(e,n)}return a=i.interleaved,a===null?(t.next=t,Q6(i)):(t.next=a.next,a.next=t),i.interleaved=t,Vu(e,n)}function Uv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,B6(e,n)}}function J9(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?a=u=f:u=u.next=f,n=n.next}while(n!==null);u===null?a=u=t:u=u.next=t}else a=u=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function P2(e,t,n,i){var a=e.updateQueue;Id=!1;var u=a.firstBaseUpdate,f=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var v=o,E=v.next;v.next=null,f===null?u=E:f.next=E,f=v;var k=e.alternate;k!==null&&(k=k.updateQueue,o=k.lastBaseUpdate,o!==f&&(o===null?k.firstBaseUpdate=E:o.next=E,k.lastBaseUpdate=v))}if(u!==null){var D=a.baseState;f=0,k=E=v=null,o=u;do{var R=o.lane,j=o.eventTime;if((i&R)===R){k!==null&&(k=k.next={eventTime:j,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var N=e,$=o;switch(R=t,j=n,$.tag){case 1:if(N=$.payload,typeof N=="function"){D=N.call(j,D,R);break e}D=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=$.payload,R=typeof N=="function"?N.call(j,D,R):N,R==null)break e;D=ao({},D,R);break e;case 2:Id=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,R=a.effects,R===null?a.effects=[o]:R.push(o))}else j={eventTime:j,lane:R,tag:o.tag,payload:o.payload,callback:o.callback,next:null},k===null?(E=k=j,v=D):k=k.next=j,f|=R;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;R=o,o=R.next,R.next=null,a.lastBaseUpdate=R,a.shared.pending=null}}while(1);if(k===null&&(v=D),a.baseState=v,a.firstBaseUpdate=E,a.lastBaseUpdate=k,t=a.shared.interleaved,t!==null){a=t;do f|=a.lane,a=a.next;while(a!==t)}else u===null&&(a.shared.lanes=0);bp|=f,e.lanes=f,e.memoizedState=D}}function Q9(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(cn(191,a));a.call(i)}}}var dD=new cM.Component().refs;function H5(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:ao({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Rx={isMounted:function(e){return(e=e._reactInternals)?Lp(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ya(),a=Xd(e),u=Fu(i,a);u.payload=t,n!=null&&(u.callback=n),t=Gd(e,u,a),t!==null&&(sc(t,e,a,i),Uv(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ya(),a=Xd(e),u=Fu(i,a);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=Gd(e,u,a),t!==null&&(sc(t,e,a,i),Uv(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ya(),i=Xd(e),a=Fu(n,i);a.tag=2,t!=null&&(a.callback=t),t=Gd(e,a,i),t!==null&&(sc(t,e,i,n),Uv(t,e,i))}};function ek(e,t,n,i,a,u,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,f):t.prototype&&t.prototype.isPureReactComponent?!w0(n,i)||!w0(a,u):!0}function hD(e,t,n){var i=!1,a=rh,u=t.contextType;return typeof u=="object"&&u!==null?u=El(u):(a=fs(t)?yp:za.current,i=t.contextTypes,u=(i=i!=null)?w1(e,a):rh),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Rx,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=u),t}function tk(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Rx.enqueueReplaceState(t,t.state,null)}function q5(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=dD,eS(e);var u=t.contextType;typeof u=="object"&&u!==null?a.context=El(u):(u=fs(t)?yp:za.current,a.context=w1(e,u)),a.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(H5(e,t,u,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Rx.enqueueReplaceState(a,a.state,null),P2(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function bg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(cn(309));var i=n.stateNode}if(!i)throw Error(cn(147,e));var a=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(f){var o=a.refs;o===dD&&(o=a.refs={}),f===null?delete o[u]:o[u]=f},t._stringRef=u,t)}if(typeof e!="string")throw Error(cn(284));if(!n._owner)throw Error(cn(290,e))}return e}function iv(e,t){throw e=Object.prototype.toString.call(t),Error(cn(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nk(e){var t=e._init;return t(e._payload)}function pD(e){function t(W,K){if(e){var Y=W.deletions;Y===null?(W.deletions=[K],W.flags|=16):Y.push(K)}}function n(W,K){if(!e)return null;for(;K!==null;)t(W,K),K=K.sibling;return null}function i(W,K){for(W=new Map;K!==null;)K.key!==null?W.set(K.key,K):W.set(K.index,K),K=K.sibling;return W}function a(W,K){return W=Kd(W,K),W.index=0,W.sibling=null,W}function u(W,K,Y){return W.index=Y,e?(Y=W.alternate,Y!==null?(Y=Y.index,Y<K?(W.flags|=2,K):Y):(W.flags|=2,K)):(W.flags|=1048576,K)}function f(W){return e&&W.alternate===null&&(W.flags|=2),W}function o(W,K,Y,ie){return K===null||K.tag!==6?(K=e4(Y,W.mode,ie),K.return=W,K):(K=a(K,Y),K.return=W,K)}function v(W,K,Y,ie){var ue=Y.type;return ue===jf?k(W,K,Y.props.children,ie,Y.key):K!==null&&(K.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Pd&&nk(ue)===K.type)?(ie=a(K,Y.props),ie.ref=bg(W,K,Y),ie.return=W,ie):(ie=Zv(Y.type,Y.key,Y.props,null,W.mode,ie),ie.ref=bg(W,K,Y),ie.return=W,ie)}function E(W,K,Y,ie){return K===null||K.tag!==4||K.stateNode.containerInfo!==Y.containerInfo||K.stateNode.implementation!==Y.implementation?(K=t4(Y,W.mode,ie),K.return=W,K):(K=a(K,Y.children||[]),K.return=W,K)}function k(W,K,Y,ie,ue){return K===null||K.tag!==7?(K=cp(Y,W.mode,ie,ue),K.return=W,K):(K=a(K,Y),K.return=W,K)}function D(W,K,Y){if(typeof K=="string"&&K!==""||typeof K=="number")return K=e4(""+K,W.mode,Y),K.return=W,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Gy:return Y=Zv(K.type,K.key,K.props,null,W.mode,Y),Y.ref=bg(W,null,K),Y.return=W,Y;case Bf:return K=t4(K,W.mode,Y),K.return=W,K;case Pd:var ie=K._init;return D(W,ie(K._payload),Y)}if(zg(K)||gg(K))return K=cp(K,W.mode,Y,null),K.return=W,K;iv(W,K)}return null}function R(W,K,Y,ie){var ue=K!==null?K.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return ue!==null?null:o(W,K,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Gy:return Y.key===ue?v(W,K,Y,ie):null;case Bf:return Y.key===ue?E(W,K,Y,ie):null;case Pd:return ue=Y._init,R(W,K,ue(Y._payload),ie)}if(zg(Y)||gg(Y))return ue!==null?null:k(W,K,Y,ie,null);iv(W,Y)}return null}function j(W,K,Y,ie,ue){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return W=W.get(Y)||null,o(K,W,""+ie,ue);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Gy:return W=W.get(ie.key===null?Y:ie.key)||null,v(K,W,ie,ue);case Bf:return W=W.get(ie.key===null?Y:ie.key)||null,E(K,W,ie,ue);case Pd:var de=ie._init;return j(W,K,Y,de(ie._payload),ue)}if(zg(ie)||gg(ie))return W=W.get(Y)||null,k(K,W,ie,ue,null);iv(K,ie)}return null}function N(W,K,Y,ie){for(var ue=null,de=null,M=K,Te=K=0,fe=null;M!==null&&Te<Y.length;Te++){M.index>Te?(fe=M,M=null):fe=M.sibling;var Oe=R(W,M,Y[Te],ie);if(Oe===null){M===null&&(M=fe);break}e&&M&&Oe.alternate===null&&t(W,M),K=u(Oe,K,Te),de===null?ue=Oe:de.sibling=Oe,de=Oe,M=fe}if(Te===Y.length)return n(W,M),qi&&Jh(W,Te),ue;if(M===null){for(;Te<Y.length;Te++)M=D(W,Y[Te],ie),M!==null&&(K=u(M,K,Te),de===null?ue=M:de.sibling=M,de=M);return qi&&Jh(W,Te),ue}for(M=i(W,M);Te<Y.length;Te++)fe=j(M,W,Te,Y[Te],ie),fe!==null&&(e&&fe.alternate!==null&&M.delete(fe.key===null?Te:fe.key),K=u(fe,K,Te),de===null?ue=fe:de.sibling=fe,de=fe);return e&&M.forEach(function(rt){return t(W,rt)}),qi&&Jh(W,Te),ue}function $(W,K,Y,ie){var ue=gg(Y);if(typeof ue!="function")throw Error(cn(150));if(Y=ue.call(Y),Y==null)throw Error(cn(151));for(var de=ue=null,M=K,Te=K=0,fe=null,Oe=Y.next();M!==null&&!Oe.done;Te++,Oe=Y.next()){M.index>Te?(fe=M,M=null):fe=M.sibling;var rt=R(W,M,Oe.value,ie);if(rt===null){M===null&&(M=fe);break}e&&M&&rt.alternate===null&&t(W,M),K=u(rt,K,Te),de===null?ue=rt:de.sibling=rt,de=rt,M=fe}if(Oe.done)return n(W,M),qi&&Jh(W,Te),ue;if(M===null){for(;!Oe.done;Te++,Oe=Y.next())Oe=D(W,Oe.value,ie),Oe!==null&&(K=u(Oe,K,Te),de===null?ue=Oe:de.sibling=Oe,de=Oe);return qi&&Jh(W,Te),ue}for(M=i(W,M);!Oe.done;Te++,Oe=Y.next())Oe=j(M,W,Te,Oe.value,ie),Oe!==null&&(e&&Oe.alternate!==null&&M.delete(Oe.key===null?Te:Oe.key),K=u(Oe,K,Te),de===null?ue=Oe:de.sibling=Oe,de=Oe);return e&&M.forEach(function(at){return t(W,at)}),qi&&Jh(W,Te),ue}function ee(W,K,Y,ie){if(typeof Y=="object"&&Y!==null&&Y.type===jf&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Gy:e:{for(var ue=Y.key,de=K;de!==null;){if(de.key===ue){if(ue=Y.type,ue===jf){if(de.tag===7){n(W,de.sibling),K=a(de,Y.props.children),K.return=W,W=K;break e}}else if(de.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Pd&&nk(ue)===de.type){n(W,de.sibling),K=a(de,Y.props),K.ref=bg(W,de,Y),K.return=W,W=K;break e}n(W,de);break}else t(W,de);de=de.sibling}Y.type===jf?(K=cp(Y.props.children,W.mode,ie,Y.key),K.return=W,W=K):(ie=Zv(Y.type,Y.key,Y.props,null,W.mode,ie),ie.ref=bg(W,K,Y),ie.return=W,W=ie)}return f(W);case Bf:e:{for(de=Y.key;K!==null;){if(K.key===de)if(K.tag===4&&K.stateNode.containerInfo===Y.containerInfo&&K.stateNode.implementation===Y.implementation){n(W,K.sibling),K=a(K,Y.children||[]),K.return=W,W=K;break e}else{n(W,K);break}else t(W,K);K=K.sibling}K=t4(Y,W.mode,ie),K.return=W,W=K}return f(W);case Pd:return de=Y._init,ee(W,K,de(Y._payload),ie)}if(zg(Y))return N(W,K,Y,ie);if(gg(Y))return $(W,K,Y,ie);iv(W,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,K!==null&&K.tag===6?(n(W,K.sibling),K=a(K,Y),K.return=W,W=K):(n(W,K),K=e4(Y,W.mode,ie),K.return=W,W=K),f(W)):n(W,K)}return ee}var S1=pD(!0),fD=pD(!1),m_={},qc=hh(m_),C0=hh(m_),k0=hh(m_);function ap(e){if(e===m_)throw Error(cn(174));return e}function tS(e,t){switch(Ri(k0,t),Ri(C0,e),Ri(qc,m_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:S5(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=S5(t,e)}ji(qc),Ri(qc,t)}function T1(){ji(qc),ji(C0),ji(k0)}function mD(e){ap(k0.current);var t=ap(qc.current),n=S5(t,e.type);t!==n&&(Ri(C0,e),Ri(qc,n))}function nS(e){C0.current===e&&(ji(qc),ji(C0))}var ro=hh(0);function I2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Z3=[];function rS(){for(var e=0;e<Z3.length;e++)Z3[e]._workInProgressVersionPrimary=null;Z3.length=0}var Vv=Zu.ReactCurrentDispatcher,X3=Zu.ReactCurrentBatchConfig,xp=0,oo=null,Bo=null,ea=null,A2=!1,Yg=!1,P0=0,qV=0;function Ca(){throw Error(cn(321))}function iS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cc(e[n],t[n]))return!1;return!0}function oS(e,t,n,i,a,u){if(xp=u,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vv.current=e===null||e.memoizedState===null?KV:YV,e=n(i,a),Yg){u=0;do{if(Yg=!1,P0=0,25<=u)throw Error(cn(301));u+=1,ea=Bo=null,t.updateQueue=null,Vv.current=JV,e=n(i,a)}while(Yg)}if(Vv.current=M2,t=Bo!==null&&Bo.next!==null,xp=0,ea=Bo=oo=null,A2=!1,t)throw Error(cn(300));return e}function aS(){var e=P0!==0;return P0=0,e}function Fc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ea===null?oo.memoizedState=ea=e:ea=ea.next=e,ea}function Sl(){if(Bo===null){var e=oo.alternate;e=e!==null?e.memoizedState:null}else e=Bo.next;var t=ea===null?oo.memoizedState:ea.next;if(t!==null)ea=t,Bo=e;else{if(e===null)throw Error(cn(310));Bo=e,e={memoizedState:Bo.memoizedState,baseState:Bo.baseState,baseQueue:Bo.baseQueue,queue:Bo.queue,next:null},ea===null?oo.memoizedState=ea=e:ea=ea.next=e}return ea}function I0(e,t){return typeof t=="function"?t(e):t}function K3(e){var t=Sl(),n=t.queue;if(n===null)throw Error(cn(311));n.lastRenderedReducer=e;var i=Bo,a=i.baseQueue,u=n.pending;if(u!==null){if(a!==null){var f=a.next;a.next=u.next,u.next=f}i.baseQueue=a=u,n.pending=null}if(a!==null){u=a.next,i=i.baseState;var o=f=null,v=null,E=u;do{var k=E.lane;if((xp&k)===k)v!==null&&(v=v.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),i=E.hasEagerState?E.eagerState:e(i,E.action);else{var D={lane:k,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};v===null?(o=v=D,f=i):v=v.next=D,oo.lanes|=k,bp|=k}E=E.next}while(E!==null&&E!==u);v===null?f=i:v.next=o,cc(i,t.memoizedState)||(us=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=v,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do u=a.lane,oo.lanes|=u,bp|=u,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Y3(e){var t=Sl(),n=t.queue;if(n===null)throw Error(cn(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,u=t.memoizedState;if(a!==null){n.pending=null;var f=a=a.next;do u=e(u,f.action),f=f.next;while(f!==a);cc(u,t.memoizedState)||(us=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,i]}function gD(){}function _D(e,t){var n=oo,i=Sl(),a=t(),u=!cc(i.memoizedState,a);if(u&&(i.memoizedState=a,us=!0),i=i.queue,sS(xD.bind(null,n,i,e),[e]),i.getSnapshot!==t||u||ea!==null&&ea.memoizedState.tag&1){if(n.flags|=2048,A0(9,vD.bind(null,n,i,a,t),void 0,null),ta===null)throw Error(cn(349));xp&30||yD(n,t,a)}return a}function yD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=oo.updateQueue,t===null?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vD(e,t,n,i){t.value=n,t.getSnapshot=i,bD(t)&&wD(e)}function xD(e,t,n){return n(function(){bD(t)&&wD(e)})}function bD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cc(e,n)}catch{return!0}}function wD(e){var t=Vu(e,1);t!==null&&sc(t,e,1,-1)}function rk(e){var t=Fc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:I0,lastRenderedState:e},t.queue=e,e=e.dispatch=XV.bind(null,oo,e),[t.memoizedState,e]}function A0(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=oo.updateQueue,t===null?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function ED(){return Sl().memoizedState}function Wv(e,t,n,i){var a=Fc();oo.flags|=e,a.memoizedState=A0(1|t,n,void 0,i===void 0?null:i)}function Lx(e,t,n,i){var a=Sl();i=i===void 0?null:i;var u=void 0;if(Bo!==null){var f=Bo.memoizedState;if(u=f.destroy,i!==null&&iS(i,f.deps)){a.memoizedState=A0(t,n,u,i);return}}oo.flags|=e,a.memoizedState=A0(1|t,n,u,i)}function ik(e,t){return Wv(8390656,8,e,t)}function sS(e,t){return Lx(2048,8,e,t)}function SD(e,t){return Lx(4,2,e,t)}function TD(e,t){return Lx(4,4,e,t)}function CD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kD(e,t,n){return n=n!=null?n.concat([e]):null,Lx(4,4,CD.bind(null,t,e),n)}function lS(){}function PD(e,t){var n=Sl();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&iS(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function ID(e,t){var n=Sl();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&iS(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function AD(e,t,n){return xp&21?(cc(n,t)||(n=OM(),oo.lanes|=n,bp|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,us=!0),e.memoizedState=n)}function GV(e,t){var n=mi;mi=n!==0&&4>n?n:4,e(!0);var i=X3.transition;X3.transition={};try{e(!1),t()}finally{mi=n,X3.transition=i}}function MD(){return Sl().memoizedState}function ZV(e,t,n){var i=Xd(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},DD(e))OD(t,n);else if(n=cD(e,t,n,i),n!==null){var a=Ya();sc(n,e,i,a),RD(n,t,i)}}function XV(e,t,n){var i=Xd(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(DD(e))OD(t,a);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var f=t.lastRenderedState,o=u(f,n);if(a.hasEagerState=!0,a.eagerState=o,cc(o,f)){var v=t.interleaved;v===null?(a.next=a,Q6(t)):(a.next=v.next,v.next=a),t.interleaved=a;return}}catch{}finally{}n=cD(e,t,a,i),n!==null&&(a=Ya(),sc(n,e,i,a),RD(n,t,i))}}function DD(e){var t=e.alternate;return e===oo||t!==null&&t===oo}function OD(e,t){Yg=A2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function RD(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,B6(e,n)}}var M2={readContext:El,useCallback:Ca,useContext:Ca,useEffect:Ca,useImperativeHandle:Ca,useInsertionEffect:Ca,useLayoutEffect:Ca,useMemo:Ca,useReducer:Ca,useRef:Ca,useState:Ca,useDebugValue:Ca,useDeferredValue:Ca,useTransition:Ca,useMutableSource:Ca,useSyncExternalStore:Ca,useId:Ca,unstable_isNewReconciler:!1},KV={readContext:El,useCallback:function(e,t){return Fc().memoizedState=[e,t===void 0?null:t],e},useContext:El,useEffect:ik,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wv(4194308,4,CD.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wv(4,2,e,t)},useMemo:function(e,t){var n=Fc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Fc();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ZV.bind(null,oo,e),[i.memoizedState,e]},useRef:function(e){var t=Fc();return e={current:e},t.memoizedState=e},useState:rk,useDebugValue:lS,useDeferredValue:function(e){return Fc().memoizedState=e},useTransition:function(){var e=rk(!1),t=e[0];return e=GV.bind(null,e[1]),Fc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=oo,a=Fc();if(qi){if(n===void 0)throw Error(cn(407));n=n()}else{if(n=t(),ta===null)throw Error(cn(349));xp&30||yD(i,t,n)}a.memoizedState=n;var u={value:n,getSnapshot:t};return a.queue=u,ik(xD.bind(null,i,u,e),[e]),i.flags|=2048,A0(9,vD.bind(null,i,u,n,t),void 0,null),n},useId:function(){var e=Fc(),t=ta.identifierPrefix;if(qi){var n=Ru,i=Ou;n=(i&~(1<<32-ac(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=P0++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=qV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},YV={readContext:El,useCallback:PD,useContext:El,useEffect:sS,useImperativeHandle:kD,useInsertionEffect:SD,useLayoutEffect:TD,useMemo:ID,useReducer:K3,useRef:ED,useState:function(){return K3(I0)},useDebugValue:lS,useDeferredValue:function(e){var t=Sl();return AD(t,Bo.memoizedState,e)},useTransition:function(){var e=K3(I0)[0],t=Sl().memoizedState;return[e,t]},useMutableSource:gD,useSyncExternalStore:_D,useId:MD,unstable_isNewReconciler:!1},JV={readContext:El,useCallback:PD,useContext:El,useEffect:sS,useImperativeHandle:kD,useInsertionEffect:SD,useLayoutEffect:TD,useMemo:ID,useReducer:Y3,useRef:ED,useState:function(){return Y3(I0)},useDebugValue:lS,useDeferredValue:function(e){var t=Sl();return Bo===null?t.memoizedState=e:AD(t,Bo.memoizedState,e)},useTransition:function(){var e=Y3(I0)[0],t=Sl().memoizedState;return[e,t]},useMutableSource:gD,useSyncExternalStore:_D,useId:MD,unstable_isNewReconciler:!1};function C1(e,t){try{var n="",i=t;do n+=CU(i),i=i.return;while(i);var a=n}catch(u){a=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:a,digest:null}}function J3(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function G5(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var QV=typeof WeakMap=="function"?WeakMap:Map;function LD(e,t,n){n=Fu(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){O2||(O2=!0,rE=i),G5(e,t)},n}function zD(e,t,n){n=Fu(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){G5(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){G5(e,t),typeof i!="function"&&(Zd===null?Zd=new Set([this]):Zd.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function ok(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new QV;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=pW.bind(null,e,t,n),t.then(e,e))}function ak(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sk(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fu(-1,1),t.tag=2,Gd(n,t,1))),n.lanes|=1),e)}var eW=Zu.ReactCurrentOwner,us=!1;function Xa(e,t,n,i){t.child=e===null?fD(t,null,n,i):S1(t,e.child,n,i)}function lk(e,t,n,i,a){n=n.render;var u=t.ref;return u1(t,a),i=oS(e,t,n,i,u,a),n=aS(),e!==null&&!us?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wu(e,t,a)):(qi&&n&&G6(t),t.flags|=1,Xa(e,t,i,a),t.child)}function ck(e,t,n,i,a){if(e===null){var u=n.type;return typeof u=="function"&&!gS(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,FD(e,t,u,i,a)):(e=Zv(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&a)){var f=u.memoizedProps;if(n=n.compare,n=n!==null?n:w0,n(f,i)&&e.ref===t.ref)return Wu(e,t,a)}return t.flags|=1,e=Kd(u,i),e.ref=t.ref,e.return=t,t.child=e}function FD(e,t,n,i,a){if(e!==null){var u=e.memoizedProps;if(w0(u,i)&&e.ref===t.ref)if(us=!1,t.pendingProps=i=u,(e.lanes&a)!==0)e.flags&131072&&(us=!0);else return t.lanes=e.lanes,Wu(e,t,a)}return Z5(e,t,n,i,a)}function ND(e,t,n){var i=t.pendingProps,a=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ri(Kf,Ls),Ls|=n;else{if(!(n&1073741824))return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ri(Kf,Ls),Ls|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:n,Ri(Kf,Ls),Ls|=i}else u!==null?(i=u.baseLanes|n,t.memoizedState=null):i=n,Ri(Kf,Ls),Ls|=i;return Xa(e,t,a,n),t.child}function BD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Z5(e,t,n,i,a){var u=fs(n)?yp:za.current;return u=w1(t,u),u1(t,a),n=oS(e,t,n,i,u,a),i=aS(),e!==null&&!us?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wu(e,t,a)):(qi&&i&&G6(t),t.flags|=1,Xa(e,t,n,a),t.child)}function uk(e,t,n,i,a){if(fs(n)){var u=!0;E2(t)}else u=!1;if(u1(t,a),t.stateNode===null)Hv(e,t),hD(t,n,i),q5(t,n,i,a),i=!0;else if(e===null){var f=t.stateNode,o=t.memoizedProps;f.props=o;var v=f.context,E=n.contextType;typeof E=="object"&&E!==null?E=El(E):(E=fs(n)?yp:za.current,E=w1(t,E));var k=n.getDerivedStateFromProps,D=typeof k=="function"||typeof f.getSnapshotBeforeUpdate=="function";D||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==i||v!==E)&&tk(t,f,i,E),Id=!1;var R=t.memoizedState;f.state=R,P2(t,i,f,a),v=t.memoizedState,o!==i||R!==v||ps.current||Id?(typeof k=="function"&&(H5(t,n,k,i),v=t.memoizedState),(o=Id||ek(t,n,o,i,R,v,E))?(D||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=v),f.props=i,f.state=v,f.context=E,i=o):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,uD(e,t),o=t.memoizedProps,E=t.type===t.elementType?o:Ql(t.type,o),f.props=E,D=t.pendingProps,R=f.context,v=n.contextType,typeof v=="object"&&v!==null?v=El(v):(v=fs(n)?yp:za.current,v=w1(t,v));var j=n.getDerivedStateFromProps;(k=typeof j=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(o!==D||R!==v)&&tk(t,f,i,v),Id=!1,R=t.memoizedState,f.state=R,P2(t,i,f,a);var N=t.memoizedState;o!==D||R!==N||ps.current||Id?(typeof j=="function"&&(H5(t,n,j,i),N=t.memoizedState),(E=Id||ek(t,n,E,i,R,N,v)||!1)?(k||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,N,v),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,N,v)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||o===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=N),f.props=i,f.state=N,f.context=v,i=E):(typeof f.componentDidUpdate!="function"||o===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),i=!1)}return X5(e,t,n,i,u,a)}function X5(e,t,n,i,a,u){BD(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return a&&X9(t,n,!1),Wu(e,t,u);i=t.stateNode,eW.current=t;var o=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=S1(t,e.child,null,u),t.child=S1(t,null,o,u)):Xa(e,t,o,u),t.memoizedState=i.state,a&&X9(t,n,!0),t.child}function jD(e){var t=e.stateNode;t.pendingContext?Z9(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Z9(e,t.context,!1),tS(e,t.containerInfo)}function dk(e,t,n,i,a){return E1(),X6(a),t.flags|=256,Xa(e,t,n,i),t.child}var K5={dehydrated:null,treeContext:null,retryLane:0};function Y5(e){return{baseLanes:e,cachePool:null,transitions:null}}function $D(e,t,n){var i=t.pendingProps,a=ro.current,u=!1,f=(t.flags&128)!==0,o;if((o=f)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ri(ro,a&1),e===null)return V5(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,u?(i=t.mode,u=t.child,f={mode:"hidden",children:f},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=f):u=Nx(f,i,0,null),e=cp(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Y5(n),t.memoizedState=K5,e):cS(t,f));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return tW(e,t,f,i,o,a,n);if(u){u=i.fallback,f=t.mode,a=e.child,o=a.sibling;var v={mode:"hidden",children:i.children};return!(f&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=v,t.deletions=null):(i=Kd(a,v),i.subtreeFlags=a.subtreeFlags&14680064),o!==null?u=Kd(o,u):(u=cp(u,f,n,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,f=e.child.memoizedState,f=f===null?Y5(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},u.memoizedState=f,u.childLanes=e.childLanes&~n,t.memoizedState=K5,i}return u=e.child,e=u.sibling,i=Kd(u,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function cS(e,t){return t=Nx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ov(e,t,n,i){return i!==null&&X6(i),S1(t,e.child,null,n),e=cS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tW(e,t,n,i,a,u,f){if(n)return t.flags&256?(t.flags&=-257,i=J3(Error(cn(422))),ov(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,a=t.mode,i=Nx({mode:"visible",children:i.children},a,0,null),u=cp(u,a,f,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&S1(t,e.child,null,f),t.child.memoizedState=Y5(f),t.memoizedState=K5,u);if(!(t.mode&1))return ov(e,t,f,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var o=i.dgst;return i=o,u=Error(cn(419)),i=J3(u,i,void 0),ov(e,t,f,i)}if(o=(f&e.childLanes)!==0,us||o){if(i=ta,i!==null){switch(f&-f){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|f)?0:a,a!==0&&a!==u.retryLane&&(u.retryLane=a,Vu(e,a),sc(i,e,a,-1))}return mS(),i=J3(Error(cn(421))),ov(e,t,f,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=fW.bind(null,e),a._reactRetry=t,null):(e=u.treeContext,$s=qd(a.nextSibling),Us=t,qi=!0,nc=null,e!==null&&(pl[fl++]=Ou,pl[fl++]=Ru,pl[fl++]=vp,Ou=e.id,Ru=e.overflow,vp=t),t=cS(t,i.children),t.flags|=4096,t)}function hk(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),W5(e.return,t,n)}function Q3(e,t,n,i,a){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=n,u.tailMode=a)}function UD(e,t,n){var i=t.pendingProps,a=i.revealOrder,u=i.tail;if(Xa(e,t,i.children,n),i=ro.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hk(e,n,t);else if(e.tag===19)hk(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ri(ro,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&I2(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Q3(t,!1,a,n,u);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&I2(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Q3(t,!0,n,null,u);break;case"together":Q3(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),bp|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(cn(153));if(t.child!==null){for(e=t.child,n=Kd(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kd(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nW(e,t,n){switch(t.tag){case 3:jD(t),E1();break;case 5:mD(t);break;case 1:fs(t.type)&&E2(t);break;case 4:tS(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;Ri(C2,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ri(ro,ro.current&1),t.flags|=128,null):n&t.child.childLanes?$D(e,t,n):(Ri(ro,ro.current&1),e=Wu(e,t,n),e!==null?e.sibling:null);Ri(ro,ro.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return UD(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ri(ro,ro.current),i)break;return null;case 22:case 23:return t.lanes=0,ND(e,t,n)}return Wu(e,t,n)}var VD,J5,WD,HD;VD=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};J5=function(){};WD=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,ap(qc.current);var u=null;switch(n){case"input":a=x5(e,a),i=x5(e,i),u=[];break;case"select":a=ao({},a,{value:void 0}),i=ao({},i,{value:void 0}),u=[];break;case"textarea":a=E5(e,a),i=E5(e,i),u=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=b2)}T5(n,i);var f;n=null;for(E in a)if(!i.hasOwnProperty(E)&&a.hasOwnProperty(E)&&a[E]!=null)if(E==="style"){var o=a[E];for(f in o)o.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(m0.hasOwnProperty(E)?u||(u=[]):(u=u||[]).push(E,null));for(E in i){var v=i[E];if(o=a!=null?a[E]:void 0,i.hasOwnProperty(E)&&v!==o&&(v!=null||o!=null))if(E==="style")if(o){for(f in o)!o.hasOwnProperty(f)||v&&v.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in v)v.hasOwnProperty(f)&&o[f]!==v[f]&&(n||(n={}),n[f]=v[f])}else n||(u||(u=[]),u.push(E,n)),n=v;else E==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,o=o?o.__html:void 0,v!=null&&o!==v&&(u=u||[]).push(E,v)):E==="children"?typeof v!="string"&&typeof v!="number"||(u=u||[]).push(E,""+v):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(m0.hasOwnProperty(E)?(v!=null&&E==="onScroll"&&Fi("scroll",e),u||o===v||(u=[])):(u=u||[]).push(E,v))}n&&(u=u||[]).push("style",n);var E=u;(t.updateQueue=E)&&(t.flags|=4)}};HD=function(e,t,n,i){n!==i&&(t.flags|=4)};function wg(e,t){if(!qi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ka(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function rW(e,t,n){var i=t.pendingProps;switch(Z6(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ka(t),null;case 1:return fs(t.type)&&w2(),ka(t),null;case 3:return i=t.stateNode,T1(),ji(ps),ji(za),rS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(rv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nc!==null&&(aE(nc),nc=null))),J5(e,t),ka(t),null;case 5:nS(t);var a=ap(k0.current);if(n=t.type,e!==null&&t.stateNode!=null)WD(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(cn(166));return ka(t),null}if(e=ap(qc.current),rv(t)){i=t.stateNode,n=t.type;var u=t.memoizedProps;switch(i[$c]=t,i[T0]=u,e=(t.mode&1)!==0,n){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(a=0;a<Ng.length;a++)Fi(Ng[a],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":b9(i,u),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},Fi("invalid",i);break;case"textarea":E9(i,u),Fi("invalid",i)}T5(n,u),a=null;for(var f in u)if(u.hasOwnProperty(f)){var o=u[f];f==="children"?typeof o=="string"?i.textContent!==o&&(u.suppressHydrationWarning!==!0&&nv(i.textContent,o,e),a=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(u.suppressHydrationWarning!==!0&&nv(i.textContent,o,e),a=["children",""+o]):m0.hasOwnProperty(f)&&o!=null&&f==="onScroll"&&Fi("scroll",i)}switch(n){case"input":Zy(i),w9(i,u,!0);break;case"textarea":Zy(i),S9(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=b2)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yM(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[$c]=t,e[T0]=i,VD(e,t,!1,!1),t.stateNode=e;e:{switch(f=C5(n,i),n){case"dialog":Fi("cancel",e),Fi("close",e),a=i;break;case"iframe":case"object":case"embed":Fi("load",e),a=i;break;case"video":case"audio":for(a=0;a<Ng.length;a++)Fi(Ng[a],e);a=i;break;case"source":Fi("error",e),a=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),a=i;break;case"details":Fi("toggle",e),a=i;break;case"input":b9(e,i),a=x5(e,i),Fi("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=ao({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":E9(e,i),a=E5(e,i),Fi("invalid",e);break;default:a=i}T5(n,a),o=a;for(u in o)if(o.hasOwnProperty(u)){var v=o[u];u==="style"?bM(e,v):u==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&vM(e,v)):u==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&g0(e,v):typeof v=="number"&&g0(e,""+v):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(m0.hasOwnProperty(u)?v!=null&&u==="onScroll"&&Fi("scroll",e):v!=null&&O6(e,u,v,f))}switch(n){case"input":Zy(e),w9(e,i,!1);break;case"textarea":Zy(e),S9(e);break;case"option":i.value!=null&&e.setAttribute("value",""+nh(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?a1(e,!!i.multiple,u,!1):i.defaultValue!=null&&a1(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=b2)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ka(t),null;case 6:if(e&&t.stateNode!=null)HD(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(cn(166));if(n=ap(k0.current),ap(qc.current),rv(t)){if(i=t.stateNode,n=t.memoizedProps,i[$c]=t,(u=i.nodeValue!==n)&&(e=Us,e!==null))switch(e.tag){case 3:nv(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&nv(i.nodeValue,n,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[$c]=t,t.stateNode=i}return ka(t),null;case 13:if(ji(ro),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qi&&$s!==null&&t.mode&1&&!(t.flags&128))lD(),E1(),t.flags|=98560,u=!1;else if(u=rv(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(cn(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(cn(317));u[$c]=t}else E1(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ka(t),u=!1}else nc!==null&&(aE(nc),nc=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ro.current&1?$o===0&&($o=3):mS())),t.updateQueue!==null&&(t.flags|=4),ka(t),null);case 4:return T1(),J5(e,t),e===null&&E0(t.stateNode.containerInfo),ka(t),null;case 10:return J6(t.type._context),ka(t),null;case 17:return fs(t.type)&&w2(),ka(t),null;case 19:if(ji(ro),u=t.memoizedState,u===null)return ka(t),null;if(i=(t.flags&128)!==0,f=u.rendering,f===null)if(i)wg(u,!1);else{if($o!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=I2(e),f!==null){for(t.flags|=128,wg(u,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)u=n,e=i,u.flags&=14680066,f=u.alternate,f===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=f.childLanes,u.lanes=f.lanes,u.child=f.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=f.memoizedProps,u.memoizedState=f.memoizedState,u.updateQueue=f.updateQueue,u.type=f.type,e=f.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ri(ro,ro.current&1|2),t.child}e=e.sibling}u.tail!==null&&xo()>k1&&(t.flags|=128,i=!0,wg(u,!1),t.lanes=4194304)}else{if(!i)if(e=I2(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),wg(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!qi)return ka(t),null}else 2*xo()-u.renderingStartTime>k1&&n!==1073741824&&(t.flags|=128,i=!0,wg(u,!1),t.lanes=4194304);u.isBackwards?(f.sibling=t.child,t.child=f):(n=u.last,n!==null?n.sibling=f:t.child=f,u.last=f)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=xo(),t.sibling=null,n=ro.current,Ri(ro,i?n&1|2:n&1),t):(ka(t),null);case 22:case 23:return fS(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ls&1073741824&&(ka(t),t.subtreeFlags&6&&(t.flags|=8192)):ka(t),null;case 24:return null;case 25:return null}throw Error(cn(156,t.tag))}function iW(e,t){switch(Z6(t),t.tag){case 1:return fs(t.type)&&w2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return T1(),ji(ps),ji(za),rS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nS(t),null;case 13:if(ji(ro),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(cn(340));E1()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ji(ro),null;case 4:return T1(),null;case 10:return J6(t.type._context),null;case 22:case 23:return fS(),null;case 24:return null;default:return null}}var av=!1,Da=!1,oW=typeof WeakSet=="function"?WeakSet:Set,jn=null;function Xf(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ho(e,t,i)}else n.current=null}function Q5(e,t,n){try{n()}catch(i){ho(e,t,i)}}var pk=!1;function aW(e,t){if(z5=y2,e=XM(),q6(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var f=0,o=-1,v=-1,E=0,k=0,D=e,R=null;t:for(;;){for(var j;D!==n||a!==0&&D.nodeType!==3||(o=f+a),D!==u||i!==0&&D.nodeType!==3||(v=f+i),D.nodeType===3&&(f+=D.nodeValue.length),(j=D.firstChild)!==null;)R=D,D=j;for(;;){if(D===e)break t;if(R===n&&++E===a&&(o=f),R===u&&++k===i&&(v=f),(j=D.nextSibling)!==null)break;D=R,R=D.parentNode}D=j}n=o===-1||v===-1?null:{start:o,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(F5={focusedElem:e,selectionRange:n},y2=!1,jn=t;jn!==null;)if(t=jn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,jn=e;else for(;jn!==null;){t=jn;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var $=N.memoizedProps,ee=N.memoizedState,W=t.stateNode,K=W.getSnapshotBeforeUpdate(t.elementType===t.type?$:Ql(t.type,$),ee);W.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var Y=t.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(cn(163))}}catch(ie){ho(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,jn=e;break}jn=t.return}return N=pk,pk=!1,N}function Jg(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var u=a.destroy;a.destroy=void 0,u!==void 0&&Q5(t,n,u)}a=a.next}while(a!==i)}}function zx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function eE(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qD(e){var t=e.alternate;t!==null&&(e.alternate=null,qD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$c],delete t[T0],delete t[j5],delete t[UV],delete t[VV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function GD(e){return e.tag===5||e.tag===3||e.tag===4}function fk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||GD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tE(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=b2));else if(i!==4&&(e=e.child,e!==null))for(tE(e,t,n),e=e.sibling;e!==null;)tE(e,t,n),e=e.sibling}function nE(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(nE(e,t,n),e=e.sibling;e!==null;)nE(e,t,n),e=e.sibling}var ca=null,ec=!1;function Td(e,t,n){for(n=n.child;n!==null;)ZD(e,t,n),n=n.sibling}function ZD(e,t,n){if(Hc&&typeof Hc.onCommitFiberUnmount=="function")try{Hc.onCommitFiberUnmount(Px,n)}catch{}switch(n.tag){case 5:Da||Xf(n,t);case 6:var i=ca,a=ec;ca=null,Td(e,t,n),ca=i,ec=a,ca!==null&&(ec?(e=ca,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ca.removeChild(n.stateNode));break;case 18:ca!==null&&(ec?(e=ca,n=n.stateNode,e.nodeType===8?q3(e.parentNode,n):e.nodeType===1&&q3(e,n),x0(e)):q3(ca,n.stateNode));break;case 4:i=ca,a=ec,ca=n.stateNode.containerInfo,ec=!0,Td(e,t,n),ca=i,ec=a;break;case 0:case 11:case 14:case 15:if(!Da&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var u=a,f=u.destroy;u=u.tag,f!==void 0&&(u&2||u&4)&&Q5(n,t,f),a=a.next}while(a!==i)}Td(e,t,n);break;case 1:if(!Da&&(Xf(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){ho(n,t,o)}Td(e,t,n);break;case 21:Td(e,t,n);break;case 22:n.mode&1?(Da=(i=Da)||n.memoizedState!==null,Td(e,t,n),Da=i):Td(e,t,n);break;default:Td(e,t,n)}}function mk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new oW),t.forEach(function(i){var a=mW.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Zl(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var u=e,f=t,o=f;e:for(;o!==null;){switch(o.tag){case 5:ca=o.stateNode,ec=!1;break e;case 3:ca=o.stateNode.containerInfo,ec=!0;break e;case 4:ca=o.stateNode.containerInfo,ec=!0;break e}o=o.return}if(ca===null)throw Error(cn(160));ZD(u,f,a),ca=null,ec=!1;var v=a.alternate;v!==null&&(v.return=null),a.return=null}catch(E){ho(a,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)XD(t,e),t=t.sibling}function XD(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zl(t,e),Lc(e),i&4){try{Jg(3,e,e.return),zx(3,e)}catch($){ho(e,e.return,$)}try{Jg(5,e,e.return)}catch($){ho(e,e.return,$)}}break;case 1:Zl(t,e),Lc(e),i&512&&n!==null&&Xf(n,n.return);break;case 5:if(Zl(t,e),Lc(e),i&512&&n!==null&&Xf(n,n.return),e.flags&32){var a=e.stateNode;try{g0(a,"")}catch($){ho(e,e.return,$)}}if(i&4&&(a=e.stateNode,a!=null)){var u=e.memoizedProps,f=n!==null?n.memoizedProps:u,o=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{o==="input"&&u.type==="radio"&&u.name!=null&&gM(a,u),C5(o,f);var E=C5(o,u);for(f=0;f<v.length;f+=2){var k=v[f],D=v[f+1];k==="style"?bM(a,D):k==="dangerouslySetInnerHTML"?vM(a,D):k==="children"?g0(a,D):O6(a,k,D,E)}switch(o){case"input":b5(a,u);break;case"textarea":_M(a,u);break;case"select":var R=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var j=u.value;j!=null?a1(a,!!u.multiple,j,!1):R!==!!u.multiple&&(u.defaultValue!=null?a1(a,!!u.multiple,u.defaultValue,!0):a1(a,!!u.multiple,u.multiple?[]:"",!1))}a[T0]=u}catch($){ho(e,e.return,$)}}break;case 6:if(Zl(t,e),Lc(e),i&4){if(e.stateNode===null)throw Error(cn(162));a=e.stateNode,u=e.memoizedProps;try{a.nodeValue=u}catch($){ho(e,e.return,$)}}break;case 3:if(Zl(t,e),Lc(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{x0(t.containerInfo)}catch($){ho(e,e.return,$)}break;case 4:Zl(t,e),Lc(e);break;case 13:Zl(t,e),Lc(e),a=e.child,a.flags&8192&&(u=a.memoizedState!==null,a.stateNode.isHidden=u,!u||a.alternate!==null&&a.alternate.memoizedState!==null||(hS=xo())),i&4&&mk(e);break;case 22:if(k=n!==null&&n.memoizedState!==null,e.mode&1?(Da=(E=Da)||k,Zl(t,e),Da=E):Zl(t,e),Lc(e),i&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!k&&e.mode&1)for(jn=e,k=e.child;k!==null;){for(D=jn=k;jn!==null;){switch(R=jn,j=R.child,R.tag){case 0:case 11:case 14:case 15:Jg(4,R,R.return);break;case 1:Xf(R,R.return);var N=R.stateNode;if(typeof N.componentWillUnmount=="function"){i=R,n=R.return;try{t=i,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch($){ho(i,n,$)}}break;case 5:Xf(R,R.return);break;case 22:if(R.memoizedState!==null){_k(D);continue}}j!==null?(j.return=R,jn=j):_k(D)}k=k.sibling}e:for(k=null,D=e;;){if(D.tag===5){if(k===null){k=D;try{a=D.stateNode,E?(u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(o=D.stateNode,v=D.memoizedProps.style,f=v!=null&&v.hasOwnProperty("display")?v.display:null,o.style.display=xM("display",f))}catch($){ho(e,e.return,$)}}}else if(D.tag===6){if(k===null)try{D.stateNode.nodeValue=E?"":D.memoizedProps}catch($){ho(e,e.return,$)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;k===D&&(k=null),D=D.return}k===D&&(k=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:Zl(t,e),Lc(e),i&4&&mk(e);break;case 21:break;default:Zl(t,e),Lc(e)}}function Lc(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(GD(n)){var i=n;break e}n=n.return}throw Error(cn(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(g0(a,""),i.flags&=-33);var u=fk(e);nE(e,u,a);break;case 3:case 4:var f=i.stateNode.containerInfo,o=fk(e);tE(e,o,f);break;default:throw Error(cn(161))}}catch(v){ho(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sW(e,t,n){jn=e,KD(e)}function KD(e,t,n){for(var i=(e.mode&1)!==0;jn!==null;){var a=jn,u=a.child;if(a.tag===22&&i){var f=a.memoizedState!==null||av;if(!f){var o=a.alternate,v=o!==null&&o.memoizedState!==null||Da;o=av;var E=Da;if(av=f,(Da=v)&&!E)for(jn=a;jn!==null;)f=jn,v=f.child,f.tag===22&&f.memoizedState!==null?yk(a):v!==null?(v.return=f,jn=v):yk(a);for(;u!==null;)jn=u,KD(u),u=u.sibling;jn=a,av=o,Da=E}gk(e)}else a.subtreeFlags&8772&&u!==null?(u.return=a,jn=u):gk(e)}}function gk(e){for(;jn!==null;){var t=jn;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Da||zx(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Da)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ql(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&Q9(t,u,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Q9(t,f,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var k=E.memoizedState;if(k!==null){var D=k.dehydrated;D!==null&&x0(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(cn(163))}Da||t.flags&512&&eE(t)}catch(R){ho(t,t.return,R)}}if(t===e){jn=null;break}if(n=t.sibling,n!==null){n.return=t.return,jn=n;break}jn=t.return}}function _k(e){for(;jn!==null;){var t=jn;if(t===e){jn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,jn=n;break}jn=t.return}}function yk(e){for(;jn!==null;){var t=jn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zx(4,t)}catch(v){ho(t,n,v)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(v){ho(t,a,v)}}var u=t.return;try{eE(t)}catch(v){ho(t,u,v)}break;case 5:var f=t.return;try{eE(t)}catch(v){ho(t,f,v)}}}catch(v){ho(t,t.return,v)}if(t===e){jn=null;break}var o=t.sibling;if(o!==null){o.return=t.return,jn=o;break}jn=t.return}}var lW=Math.ceil,D2=Zu.ReactCurrentDispatcher,uS=Zu.ReactCurrentOwner,vl=Zu.ReactCurrentBatchConfig,Wr=0,ta=null,Ao=null,ha=0,Ls=0,Kf=hh(0),$o=0,M0=null,bp=0,Fx=0,dS=0,Qg=null,cs=null,hS=0,k1=1/0,Au=null,O2=!1,rE=null,Zd=null,sv=!1,Nd=null,R2=0,e0=0,iE=null,qv=-1,Gv=0;function Ya(){return Wr&6?xo():qv!==-1?qv:qv=xo()}function Xd(e){return e.mode&1?Wr&2&&ha!==0?ha&-ha:HV.transition!==null?(Gv===0&&(Gv=OM()),Gv):(e=mi,e!==0||(e=window.event,e=e===void 0?16:jM(e.type)),e):1}function sc(e,t,n,i){if(50<e0)throw e0=0,iE=null,Error(cn(185));h_(e,n,i),(!(Wr&2)||e!==ta)&&(e===ta&&(!(Wr&2)&&(Fx|=n),$o===4&&Md(e,ha)),ms(e,i),n===1&&Wr===0&&!(t.mode&1)&&(k1=xo()+500,Ox&&ph()))}function ms(e,t){var n=e.callbackNode;HU(e,t);var i=_2(e,e===ta?ha:0);if(i===0)n!==null&&k9(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&k9(n),t===1)e.tag===0?WV(vk.bind(null,e)):oD(vk.bind(null,e)),jV(function(){!(Wr&6)&&ph()}),n=null;else{switch(RM(i)){case 1:n=N6;break;case 4:n=MM;break;case 16:n=g2;break;case 536870912:n=DM;break;default:n=g2}n=iO(n,YD.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function YD(e,t){if(qv=-1,Gv=0,Wr&6)throw Error(cn(327));var n=e.callbackNode;if(d1()&&e.callbackNode!==n)return null;var i=_2(e,e===ta?ha:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=L2(e,i);else{t=i;var a=Wr;Wr|=2;var u=QD();(ta!==e||ha!==t)&&(Au=null,k1=xo()+500,lp(e,t));do try{dW();break}catch(o){JD(e,o)}while(1);Y6(),D2.current=u,Wr=a,Ao!==null?t=0:(ta=null,ha=0,t=$o)}if(t!==0){if(t===2&&(a=M5(e),a!==0&&(i=a,t=oE(e,a))),t===1)throw n=M0,lp(e,0),Md(e,i),ms(e,xo()),n;if(t===6)Md(e,i);else{if(a=e.current.alternate,!(i&30)&&!cW(a)&&(t=L2(e,i),t===2&&(u=M5(e),u!==0&&(i=u,t=oE(e,u))),t===1))throw n=M0,lp(e,0),Md(e,i),ms(e,xo()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(cn(345));case 2:Qh(e,cs,Au);break;case 3:if(Md(e,i),(i&130023424)===i&&(t=hS+500-xo(),10<t)){if(_2(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){Ya(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=B5(Qh.bind(null,e,cs,Au),t);break}Qh(e,cs,Au);break;case 4:if(Md(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var f=31-ac(i);u=1<<f,f=t[f],f>a&&(a=f),i&=~u}if(i=a,i=xo()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*lW(i/1960))-i,10<i){e.timeoutHandle=B5(Qh.bind(null,e,cs,Au),i);break}Qh(e,cs,Au);break;case 5:Qh(e,cs,Au);break;default:throw Error(cn(329))}}}return ms(e,xo()),e.callbackNode===n?YD.bind(null,e):null}function oE(e,t){var n=Qg;return e.current.memoizedState.isDehydrated&&(lp(e,t).flags|=256),e=L2(e,t),e!==2&&(t=cs,cs=n,t!==null&&aE(t)),e}function aE(e){cs===null?cs=e:cs.push.apply(cs,e)}function cW(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],u=a.getSnapshot;a=a.value;try{if(!cc(u(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Md(e,t){for(t&=~dS,t&=~Fx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ac(t),i=1<<n;e[n]=-1,t&=~i}}function vk(e){if(Wr&6)throw Error(cn(327));d1();var t=_2(e,0);if(!(t&1))return ms(e,xo()),null;var n=L2(e,t);if(e.tag!==0&&n===2){var i=M5(e);i!==0&&(t=i,n=oE(e,i))}if(n===1)throw n=M0,lp(e,0),Md(e,t),ms(e,xo()),n;if(n===6)throw Error(cn(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qh(e,cs,Au),ms(e,xo()),null}function pS(e,t){var n=Wr;Wr|=1;try{return e(t)}finally{Wr=n,Wr===0&&(k1=xo()+500,Ox&&ph())}}function wp(e){Nd!==null&&Nd.tag===0&&!(Wr&6)&&d1();var t=Wr;Wr|=1;var n=vl.transition,i=mi;try{if(vl.transition=null,mi=1,e)return e()}finally{mi=i,vl.transition=n,Wr=t,!(Wr&6)&&ph()}}function fS(){Ls=Kf.current,ji(Kf)}function lp(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,BV(n)),Ao!==null)for(n=Ao.return;n!==null;){var i=n;switch(Z6(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&w2();break;case 3:T1(),ji(ps),ji(za),rS();break;case 5:nS(i);break;case 4:T1();break;case 13:ji(ro);break;case 19:ji(ro);break;case 10:J6(i.type._context);break;case 22:case 23:fS()}n=n.return}if(ta=e,Ao=e=Kd(e.current,null),ha=Ls=t,$o=0,M0=null,dS=Fx=bp=0,cs=Qg=null,op!==null){for(t=0;t<op.length;t++)if(n=op[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,u=n.pending;if(u!==null){var f=u.next;u.next=a,i.next=f}n.pending=i}op=null}return e}function JD(e,t){do{var n=Ao;try{if(Y6(),Vv.current=M2,A2){for(var i=oo.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}A2=!1}if(xp=0,ea=Bo=oo=null,Yg=!1,P0=0,uS.current=null,n===null||n.return===null){$o=1,M0=t,Ao=null;break}e:{var u=e,f=n.return,o=n,v=t;if(t=ha,o.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var E=v,k=o,D=k.tag;if(!(k.mode&1)&&(D===0||D===11||D===15)){var R=k.alternate;R?(k.updateQueue=R.updateQueue,k.memoizedState=R.memoizedState,k.lanes=R.lanes):(k.updateQueue=null,k.memoizedState=null)}var j=ak(f);if(j!==null){j.flags&=-257,sk(j,f,o,u,t),j.mode&1&&ok(u,E,t),t=j,v=E;var N=t.updateQueue;if(N===null){var $=new Set;$.add(v),t.updateQueue=$}else N.add(v);break e}else{if(!(t&1)){ok(u,E,t),mS();break e}v=Error(cn(426))}}else if(qi&&o.mode&1){var ee=ak(f);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),sk(ee,f,o,u,t),X6(C1(v,o));break e}}u=v=C1(v,o),$o!==4&&($o=2),Qg===null?Qg=[u]:Qg.push(u),u=f;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var W=LD(u,v,t);J9(u,W);break e;case 1:o=v;var K=u.type,Y=u.stateNode;if(!(u.flags&128)&&(typeof K.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Zd===null||!Zd.has(Y)))){u.flags|=65536,t&=-t,u.lanes|=t;var ie=zD(u,o,t);J9(u,ie);break e}}u=u.return}while(u!==null)}tO(n)}catch(ue){t=ue,Ao===n&&n!==null&&(Ao=n=n.return);continue}break}while(1)}function QD(){var e=D2.current;return D2.current=M2,e===null?M2:e}function mS(){($o===0||$o===3||$o===2)&&($o=4),ta===null||!(bp&268435455)&&!(Fx&268435455)||Md(ta,ha)}function L2(e,t){var n=Wr;Wr|=2;var i=QD();(ta!==e||ha!==t)&&(Au=null,lp(e,t));do try{uW();break}catch(a){JD(e,a)}while(1);if(Y6(),Wr=n,D2.current=i,Ao!==null)throw Error(cn(261));return ta=null,ha=0,$o}function uW(){for(;Ao!==null;)eO(Ao)}function dW(){for(;Ao!==null&&!zU();)eO(Ao)}function eO(e){var t=rO(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,t===null?tO(e):Ao=t,uS.current=null}function tO(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=iW(n,t),n!==null){n.flags&=32767,Ao=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$o=6,Ao=null;return}}else if(n=rW(n,t,Ls),n!==null){Ao=n;return}if(t=t.sibling,t!==null){Ao=t;return}Ao=t=e}while(t!==null);$o===0&&($o=5)}function Qh(e,t,n){var i=mi,a=vl.transition;try{vl.transition=null,mi=1,hW(e,t,n,i)}finally{vl.transition=a,mi=i}return null}function hW(e,t,n,i){do d1();while(Nd!==null);if(Wr&6)throw Error(cn(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(cn(177));e.callbackNode=null,e.callbackPriority=0;var u=n.lanes|n.childLanes;if(qU(e,u),e===ta&&(Ao=ta=null,ha=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sv||(sv=!0,iO(g2,function(){return d1(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=vl.transition,vl.transition=null;var f=mi;mi=1;var o=Wr;Wr|=4,uS.current=null,aW(e,n),XD(n,e),DV(F5),y2=!!z5,F5=z5=null,e.current=n,sW(n),FU(),Wr=o,mi=f,vl.transition=u}else e.current=n;if(sv&&(sv=!1,Nd=e,R2=a),u=e.pendingLanes,u===0&&(Zd=null),jU(n.stateNode),ms(e,xo()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(O2)throw O2=!1,e=rE,rE=null,e;return R2&1&&e.tag!==0&&d1(),u=e.pendingLanes,u&1?e===iE?e0++:(e0=0,iE=e):e0=0,ph(),null}function d1(){if(Nd!==null){var e=RM(R2),t=vl.transition,n=mi;try{if(vl.transition=null,mi=16>e?16:e,Nd===null)var i=!1;else{if(e=Nd,Nd=null,R2=0,Wr&6)throw Error(cn(331));var a=Wr;for(Wr|=4,jn=e.current;jn!==null;){var u=jn,f=u.child;if(jn.flags&16){var o=u.deletions;if(o!==null){for(var v=0;v<o.length;v++){var E=o[v];for(jn=E;jn!==null;){var k=jn;switch(k.tag){case 0:case 11:case 15:Jg(8,k,u)}var D=k.child;if(D!==null)D.return=k,jn=D;else for(;jn!==null;){k=jn;var R=k.sibling,j=k.return;if(qD(k),k===E){jn=null;break}if(R!==null){R.return=j,jn=R;break}jn=j}}}var N=u.alternate;if(N!==null){var $=N.child;if($!==null){N.child=null;do{var ee=$.sibling;$.sibling=null,$=ee}while($!==null)}}jn=u}}if(u.subtreeFlags&2064&&f!==null)f.return=u,jn=f;else e:for(;jn!==null;){if(u=jn,u.flags&2048)switch(u.tag){case 0:case 11:case 15:Jg(9,u,u.return)}var W=u.sibling;if(W!==null){W.return=u.return,jn=W;break e}jn=u.return}}var K=e.current;for(jn=K;jn!==null;){f=jn;var Y=f.child;if(f.subtreeFlags&2064&&Y!==null)Y.return=f,jn=Y;else e:for(f=K;jn!==null;){if(o=jn,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:zx(9,o)}}catch(ue){ho(o,o.return,ue)}if(o===f){jn=null;break e}var ie=o.sibling;if(ie!==null){ie.return=o.return,jn=ie;break e}jn=o.return}}if(Wr=a,ph(),Hc&&typeof Hc.onPostCommitFiberRoot=="function")try{Hc.onPostCommitFiberRoot(Px,e)}catch{}i=!0}return i}finally{mi=n,vl.transition=t}}return!1}function xk(e,t,n){t=C1(n,t),t=LD(e,t,1),e=Gd(e,t,1),t=Ya(),e!==null&&(h_(e,1,t),ms(e,t))}function ho(e,t,n){if(e.tag===3)xk(e,e,n);else for(;t!==null;){if(t.tag===3){xk(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Zd===null||!Zd.has(i))){e=C1(n,e),e=zD(t,e,1),t=Gd(t,e,1),e=Ya(),t!==null&&(h_(t,1,e),ms(t,e));break}}t=t.return}}function pW(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Ya(),e.pingedLanes|=e.suspendedLanes&n,ta===e&&(ha&n)===n&&($o===4||$o===3&&(ha&130023424)===ha&&500>xo()-hS?lp(e,0):dS|=n),ms(e,t)}function nO(e,t){t===0&&(e.mode&1?(t=Yy,Yy<<=1,!(Yy&130023424)&&(Yy=4194304)):t=1);var n=Ya();e=Vu(e,t),e!==null&&(h_(e,t,n),ms(e,n))}function fW(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nO(e,n)}function mW(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(cn(314))}i!==null&&i.delete(t),nO(e,n)}var rO;rO=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ps.current)us=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return us=!1,nW(e,t,n);us=!!(e.flags&131072)}else us=!1,qi&&t.flags&1048576&&aD(t,T2,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Hv(e,t),e=t.pendingProps;var a=w1(t,za.current);u1(t,n),a=oS(null,t,i,e,a,n);var u=aS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fs(i)?(u=!0,E2(t)):u=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,eS(t),a.updater=Rx,t.stateNode=a,a._reactInternals=t,q5(t,i,e,n),t=X5(null,t,i,!0,u,n)):(t.tag=0,qi&&u&&G6(t),Xa(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Hv(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=_W(i),e=Ql(i,e),a){case 0:t=Z5(null,t,i,e,n);break e;case 1:t=uk(null,t,i,e,n);break e;case 11:t=lk(null,t,i,e,n);break e;case 14:t=ck(null,t,i,Ql(i.type,e),n);break e}throw Error(cn(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ql(i,a),Z5(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ql(i,a),uk(e,t,i,a,n);case 3:e:{if(jD(t),e===null)throw Error(cn(387));i=t.pendingProps,u=t.memoizedState,a=u.element,uD(e,t),P2(t,i,null,n);var f=t.memoizedState;if(i=f.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){a=C1(Error(cn(423)),t),t=dk(e,t,i,n,a);break e}else if(i!==a){a=C1(Error(cn(424)),t),t=dk(e,t,i,n,a);break e}else for($s=qd(t.stateNode.containerInfo.firstChild),Us=t,qi=!0,nc=null,n=fD(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(E1(),i===a){t=Wu(e,t,n);break e}Xa(e,t,i,n)}t=t.child}return t;case 5:return mD(t),e===null&&V5(t),i=t.type,a=t.pendingProps,u=e!==null?e.memoizedProps:null,f=a.children,N5(i,a)?f=null:u!==null&&N5(i,u)&&(t.flags|=32),BD(e,t),Xa(e,t,f,n),t.child;case 6:return e===null&&V5(t),null;case 13:return $D(e,t,n);case 4:return tS(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=S1(t,null,i,n):Xa(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ql(i,a),lk(e,t,i,a,n);case 7:return Xa(e,t,t.pendingProps,n),t.child;case 8:return Xa(e,t,t.pendingProps.children,n),t.child;case 12:return Xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,u=t.memoizedProps,f=a.value,Ri(C2,i._currentValue),i._currentValue=f,u!==null)if(cc(u.value,f)){if(u.children===a.children&&!ps.current){t=Wu(e,t,n);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var o=u.dependencies;if(o!==null){f=u.child;for(var v=o.firstContext;v!==null;){if(v.context===i){if(u.tag===1){v=Fu(-1,n&-n),v.tag=2;var E=u.updateQueue;if(E!==null){E=E.shared;var k=E.pending;k===null?v.next=v:(v.next=k.next,k.next=v),E.pending=v}}u.lanes|=n,v=u.alternate,v!==null&&(v.lanes|=n),W5(u.return,n,t),o.lanes|=n;break}v=v.next}}else if(u.tag===10)f=u.type===t.type?null:u.child;else if(u.tag===18){if(f=u.return,f===null)throw Error(cn(341));f.lanes|=n,o=f.alternate,o!==null&&(o.lanes|=n),W5(f,n,t),f=u.sibling}else f=u.child;if(f!==null)f.return=u;else for(f=u;f!==null;){if(f===t){f=null;break}if(u=f.sibling,u!==null){u.return=f.return,f=u;break}f=f.return}u=f}Xa(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,u1(t,n),a=El(a),i=i(a),t.flags|=1,Xa(e,t,i,n),t.child;case 14:return i=t.type,a=Ql(i,t.pendingProps),a=Ql(i.type,a),ck(e,t,i,a,n);case 15:return FD(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ql(i,a),Hv(e,t),t.tag=1,fs(i)?(e=!0,E2(t)):e=!1,u1(t,n),hD(t,i,a),q5(t,i,a,n),X5(null,t,i,!0,e,n);case 19:return UD(e,t,n);case 22:return ND(e,t,n)}throw Error(cn(156,t.tag))};function iO(e,t){return AM(e,t)}function gW(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ml(e,t,n,i){return new gW(e,t,n,i)}function gS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _W(e){if(typeof e=="function")return gS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===L6)return 11;if(e===z6)return 14}return 2}function Kd(e,t){var n=e.alternate;return n===null?(n=ml(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zv(e,t,n,i,a,u){var f=2;if(i=e,typeof e=="function")gS(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case jf:return cp(n.children,a,u,t);case R6:f=8,a|=8;break;case g5:return e=ml(12,n,t,a|2),e.elementType=g5,e.lanes=u,e;case _5:return e=ml(13,n,t,a),e.elementType=_5,e.lanes=u,e;case y5:return e=ml(19,n,t,a),e.elementType=y5,e.lanes=u,e;case pM:return Nx(n,a,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dM:f=10;break e;case hM:f=9;break e;case L6:f=11;break e;case z6:f=14;break e;case Pd:f=16,i=null;break e}throw Error(cn(130,e==null?e:typeof e,""))}return t=ml(f,n,t,a),t.elementType=e,t.type=i,t.lanes=u,t}function cp(e,t,n,i){return e=ml(7,e,i,t),e.lanes=n,e}function Nx(e,t,n,i){return e=ml(22,e,i,t),e.elementType=pM,e.lanes=n,e.stateNode={isHidden:!1},e}function e4(e,t,n){return e=ml(6,e,null,t),e.lanes=n,e}function t4(e,t,n){return t=ml(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yW(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L3(0),this.expirationTimes=L3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L3(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _S(e,t,n,i,a,u,f,o,v){return e=new yW(e,t,n,o,v),t===1?(t=1,u===!0&&(t|=8)):t=0,u=ml(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eS(u),e}function vW(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bf,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function oO(e){if(!e)return rh;e=e._reactInternals;e:{if(Lp(e)!==e||e.tag!==1)throw Error(cn(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(cn(171))}if(e.tag===1){var n=e.type;if(fs(n))return iD(e,n,t)}return t}function aO(e,t,n,i,a,u,f,o,v){return e=_S(n,i,!0,e,a,u,f,o,v),e.context=oO(null),n=e.current,i=Ya(),a=Xd(n),u=Fu(i,a),u.callback=t??null,Gd(n,u,a),e.current.lanes=a,h_(e,a,i),ms(e,i),e}function Bx(e,t,n,i){var a=t.current,u=Ya(),f=Xd(a);return n=oO(n),t.context===null?t.context=n:t.pendingContext=n,t=Fu(u,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Gd(a,t,f),e!==null&&(sc(e,a,f,u),Uv(e,a,f)),f}function z2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yS(e,t){bk(e,t),(e=e.alternate)&&bk(e,t)}function xW(){return null}var sO=typeof reportError=="function"?reportError:function(e){console.error(e)};function vS(e){this._internalRoot=e}jx.prototype.render=vS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(cn(409));Bx(e,t,null,null)};jx.prototype.unmount=vS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wp(function(){Bx(null,e,null,null)}),t[Uu]=null}};function jx(e){this._internalRoot=e}jx.prototype.unstable_scheduleHydration=function(e){if(e){var t=FM();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ad.length&&t!==0&&t<Ad[n].priority;n++);Ad.splice(n,0,e),n===0&&BM(e)}};function xS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wk(){}function bW(e,t,n,i,a){if(a){if(typeof i=="function"){var u=i;i=function(){var E=z2(f);u.call(E)}}var f=aO(t,i,e,0,null,!1,!1,"",wk);return e._reactRootContainer=f,e[Uu]=f.current,E0(e.nodeType===8?e.parentNode:e),wp(),f}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var o=i;i=function(){var E=z2(v);o.call(E)}}var v=_S(e,0,!1,null,null,!1,!1,"",wk);return e._reactRootContainer=v,e[Uu]=v.current,E0(e.nodeType===8?e.parentNode:e),wp(function(){Bx(t,v,n,i)}),v}function Ux(e,t,n,i,a){var u=n._reactRootContainer;if(u){var f=u;if(typeof a=="function"){var o=a;a=function(){var v=z2(f);o.call(v)}}Bx(t,f,e,a)}else f=bW(n,t,e,a,i);return z2(f)}LM=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fg(t.pendingLanes);n!==0&&(B6(t,n|1),ms(t,xo()),!(Wr&6)&&(k1=xo()+500,ph()))}break;case 13:wp(function(){var i=Vu(e,1);if(i!==null){var a=Ya();sc(i,e,1,a)}}),yS(e,1)}};j6=function(e){if(e.tag===13){var t=Vu(e,134217728);if(t!==null){var n=Ya();sc(t,e,134217728,n)}yS(e,134217728)}};zM=function(e){if(e.tag===13){var t=Xd(e),n=Vu(e,t);if(n!==null){var i=Ya();sc(n,e,t,i)}yS(e,t)}};FM=function(){return mi};NM=function(e,t){var n=mi;try{return mi=e,t()}finally{mi=n}};P5=function(e,t,n){switch(t){case"input":if(b5(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=Dx(i);if(!a)throw Error(cn(90));mM(i),b5(i,a)}}}break;case"textarea":_M(e,n);break;case"select":t=n.value,t!=null&&a1(e,!!n.multiple,t,!1)}};SM=pS;TM=wp;var wW={usingClientEntryPoint:!1,Events:[f_,Wf,Dx,wM,EM,pS]},Eg={findFiberByHostInstance:ip,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},EW={bundleType:Eg.bundleType,version:Eg.version,rendererPackageName:Eg.rendererPackageName,rendererConfig:Eg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=PM(e),e===null?null:e.stateNode},findFiberByHostInstance:Eg.findFiberByHostInstance||xW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lv.isDisabled&&lv.supportsFiber)try{Px=lv.inject(EW),Hc=lv}catch{}}Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wW;Gs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xS(t))throw Error(cn(200));return vW(e,t,null,n)};Gs.createRoot=function(e,t){if(!xS(e))throw Error(cn(299));var n=!1,i="",a=sO;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=_S(e,1,!1,null,null,n,!1,i,a),e[Uu]=t.current,E0(e.nodeType===8?e.parentNode:e),new vS(t)};Gs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(cn(188)):(e=Object.keys(e).join(","),Error(cn(268,e)));return e=PM(t),e=e===null?null:e.stateNode,e};Gs.flushSync=function(e){return wp(e)};Gs.hydrate=function(e,t,n){if(!$x(t))throw Error(cn(200));return Ux(null,e,t,!0,n)};Gs.hydrateRoot=function(e,t,n){if(!xS(e))throw Error(cn(405));var i=n!=null&&n.hydratedSources||null,a=!1,u="",f=sO;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=aO(t,null,e,1,n??null,a,!1,u,f),e[Uu]=t.current,E0(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new jx(t)};Gs.render=function(e,t,n){if(!$x(t))throw Error(cn(200));return Ux(null,e,t,!1,n)};Gs.unmountComponentAtNode=function(e){if(!$x(e))throw Error(cn(40));return e._reactRootContainer?(wp(function(){Ux(null,null,e,!1,function(){e._reactRootContainer=null,e[Uu]=null})}),!0):!1};Gs.unstable_batchedUpdates=pS;Gs.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!$x(n))throw Error(cn(200));if(e==null||e._reactInternals===void 0)throw Error(cn(38));return Ux(e,t,n,!1,i)};Gs.version="18.2.0-next-9e3b772b8-20220608";function lO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lO)}catch(e){console.error(e)}}lO(),aM.exports=Gs;var ih=aM.exports;const cv=V1(ih);var Ek=ih;f5.createRoot=Ek.createRoot,f5.hydrateRoot=Ek.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},D0.apply(this,arguments)}var Bd;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Bd||(Bd={}));const Sk="popstate";function SW(e){e===void 0&&(e={});function t(i,a){let{pathname:u,search:f,hash:o}=i.location;return sE("",{pathname:u,search:f,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:F2(a)}return CW(t,n,null,e)}function bo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TW(){return Math.random().toString(36).substr(2,8)}function Tk(e,t){return{usr:e.state,key:e.key,idx:t}}function sE(e,t,n,i){return n===void 0&&(n=null),D0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?G1(t):t,{state:n,key:t&&t.key||i||TW()})}function F2(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function G1(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function CW(e,t,n,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:u=!1}=i,f=a.history,o=Bd.Pop,v=null,E=k();E==null&&(E=0,f.replaceState(D0({},f.state,{idx:E}),""));function k(){return(f.state||{idx:null}).idx}function D(){o=Bd.Pop;let ee=k(),W=ee==null?null:ee-E;E=ee,v&&v({action:o,location:$.location,delta:W})}function R(ee,W){o=Bd.Push;let K=sE($.location,ee,W);n&&n(K,ee),E=k()+1;let Y=Tk(K,E),ie=$.createHref(K);try{f.pushState(Y,"",ie)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;a.location.assign(ie)}u&&v&&v({action:o,location:$.location,delta:1})}function j(ee,W){o=Bd.Replace;let K=sE($.location,ee,W);n&&n(K,ee),E=k();let Y=Tk(K,E),ie=$.createHref(K);f.replaceState(Y,"",ie),u&&v&&v({action:o,location:$.location,delta:0})}function N(ee){let W=a.location.origin!=="null"?a.location.origin:a.location.href,K=typeof ee=="string"?ee:F2(ee);return bo(W,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,W)}let $={get action(){return o},get location(){return e(a,f)},listen(ee){if(v)throw new Error("A history only accepts one active listener");return a.addEventListener(Sk,D),v=ee,()=>{a.removeEventListener(Sk,D),v=null}},createHref(ee){return t(a,ee)},createURL:N,encodeLocation(ee){let W=N(ee);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:R,replace:j,go(ee){return f.go(ee)}};return $}var Ck;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ck||(Ck={}));function kW(e,t,n){n===void 0&&(n="/");let i=typeof t=="string"?G1(t):t,a=wS(i.pathname||"/",n);if(a==null)return null;let u=cO(e);PW(u);let f=null;for(let o=0;f==null&&o<u.length;++o)f=FW(u[o],jW(a));return f}function cO(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let a=(u,f,o)=>{let v={relativePath:o===void 0?u.path||"":o,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};v.relativePath.startsWith("/")&&(bo(v.relativePath.startsWith(i),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(i.length));let E=Yd([i,v.relativePath]),k=n.concat(v);u.children&&u.children.length>0&&(bo(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),cO(u.children,t,k,E)),!(u.path==null&&!u.index)&&t.push({path:E,score:LW(E,u.index),routesMeta:k})};return e.forEach((u,f)=>{var o;if(u.path===""||!((o=u.path)!=null&&o.includes("?")))a(u,f);else for(let v of uO(u.path))a(u,f,v)}),t}function uO(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return a?[u,""]:[u];let f=uO(i.join("/")),o=[];return o.push(...f.map(v=>v===""?u:[u,v].join("/"))),a&&o.push(...f),o.map(v=>e.startsWith("/")&&v===""?"/":v)}function PW(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:zW(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const IW=/^:\w+$/,AW=3,MW=2,DW=1,OW=10,RW=-2,kk=e=>e==="*";function LW(e,t){let n=e.split("/"),i=n.length;return n.some(kk)&&(i+=RW),t&&(i+=MW),n.filter(a=>!kk(a)).reduce((a,u)=>a+(IW.test(u)?AW:u===""?DW:OW),i)}function zW(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function FW(e,t){let{routesMeta:n}=e,i={},a="/",u=[];for(let f=0;f<n.length;++f){let o=n[f],v=f===n.length-1,E=a==="/"?t:t.slice(a.length)||"/",k=NW({path:o.relativePath,caseSensitive:o.caseSensitive,end:v},E);if(!k)return null;Object.assign(i,k.params);let D=o.route;u.push({params:i,pathname:Yd([a,k.pathname]),pathnameBase:WW(Yd([a,k.pathnameBase])),route:D}),k.pathnameBase!=="/"&&(a=Yd([a,k.pathnameBase]))}return u}function NW(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=BW(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let u=a[0],f=u.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:i.reduce((E,k,D)=>{if(k==="*"){let R=o[D]||"";f=u.slice(0,u.length-R.length).replace(/(.)\/+$/,"$1")}return E[k]=$W(o[D]||"",k),E},{}),pathname:u,pathnameBase:f,pattern:e}}function BW(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),bS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(f,o)=>(i.push(o),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function jW(e){try{return decodeURI(e)}catch(t){return bS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function $W(e,t){try{return decodeURIComponent(e)}catch(n){return bS(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function wS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function UW(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?G1(e):e;return{pathname:n?n.startsWith("/")?n:VW(n,t):t,search:HW(i),hash:qW(a)}}function VW(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function n4(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ES(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function SS(e,t,n,i){i===void 0&&(i=!1);let a;typeof e=="string"?a=G1(e):(a=D0({},e),bo(!a.pathname||!a.pathname.includes("?"),n4("?","pathname","search",a)),bo(!a.pathname||!a.pathname.includes("#"),n4("#","pathname","hash",a)),bo(!a.search||!a.search.includes("#"),n4("#","search","hash",a)));let u=e===""||a.pathname==="",f=u?"/":a.pathname,o;if(i||f==null)o=n;else{let D=t.length-1;if(f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),D-=1;a.pathname=R.join("/")}o=D>=0?t[D]:"/"}let v=UW(a,o),E=f&&f!=="/"&&f.endsWith("/"),k=(u||f===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(E||k)&&(v.pathname+="/"),v}const Yd=e=>e.join("/").replace(/\/\/+/g,"/"),WW=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HW=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qW=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function GW(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const dO=["post","put","patch","delete"];new Set(dO);const ZW=["get",...dO];new Set(ZW);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N2(){return N2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},N2.apply(this,arguments)}const TS=q.createContext(null),XW=q.createContext(null),Z1=q.createContext(null),Vx=q.createContext(null),fh=q.createContext({outlet:null,matches:[],isDataRoute:!1}),hO=q.createContext(null);function KW(e,t){let{relative:n}=t===void 0?{}:t;X1()||bo(!1);let{basename:i,navigator:a}=q.useContext(Z1),{hash:u,pathname:f,search:o}=fO(e,{relative:n}),v=f;return i!=="/"&&(v=f==="/"?i:Yd([i,f])),a.createHref({pathname:v,search:o,hash:u})}function X1(){return q.useContext(Vx)!=null}function g_(){return X1()||bo(!1),q.useContext(Vx).location}function pO(e){q.useContext(Z1).static||q.useLayoutEffect(e)}function mh(){let{isDataRoute:e}=q.useContext(fh);return e?cH():YW()}function YW(){X1()||bo(!1);let e=q.useContext(TS),{basename:t,navigator:n}=q.useContext(Z1),{matches:i}=q.useContext(fh),{pathname:a}=g_(),u=JSON.stringify(ES(i).map(v=>v.pathnameBase)),f=q.useRef(!1);return pO(()=>{f.current=!0}),q.useCallback(function(v,E){if(E===void 0&&(E={}),!f.current)return;if(typeof v=="number"){n.go(v);return}let k=SS(v,JSON.parse(u),a,E.relative==="path");e==null&&t!=="/"&&(k.pathname=k.pathname==="/"?t:Yd([t,k.pathname])),(E.replace?n.replace:n.push)(k,E.state,E)},[t,n,u,a,e])}function fO(e,t){let{relative:n}=t===void 0?{}:t,{matches:i}=q.useContext(fh),{pathname:a}=g_(),u=JSON.stringify(ES(i).map(f=>f.pathnameBase));return q.useMemo(()=>SS(e,JSON.parse(u),a,n==="path"),[e,u,a,n])}function JW(e,t){return QW(e,t)}function QW(e,t,n){X1()||bo(!1);let{navigator:i}=q.useContext(Z1),{matches:a}=q.useContext(fh),u=a[a.length-1],f=u?u.params:{};u&&u.pathname;let o=u?u.pathnameBase:"/";u&&u.route;let v=g_(),E;if(t){var k;let $=typeof t=="string"?G1(t):t;o==="/"||(k=$.pathname)!=null&&k.startsWith(o)||bo(!1),E=$}else E=v;let D=E.pathname||"/",R=o==="/"?D:D.slice(o.length)||"/",j=kW(e,{pathname:R}),N=iH(j&&j.map($=>Object.assign({},$,{params:Object.assign({},f,$.params),pathname:Yd([o,i.encodeLocation?i.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?o:Yd([o,i.encodeLocation?i.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),a,n);return t&&N?q.createElement(Vx.Provider,{value:{location:N2({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Bd.Pop}},N):N}function eH(){let e=lH(),t=GW(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),n?q.createElement("pre",{style:a},n):null,u)}const tH=q.createElement(eH,null);class nH extends q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?q.createElement(fh.Provider,{value:this.props.routeContext},q.createElement(hO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rH(e){let{routeContext:t,match:n,children:i}=e,a=q.useContext(TS);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(fh.Provider,{value:t},i)}function iH(e,t,n){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var a;if((a=n)!=null&&a.errors)e=n.matches;else return null}let u=e,f=(i=n)==null?void 0:i.errors;if(f!=null){let o=u.findIndex(v=>v.route.id&&(f==null?void 0:f[v.route.id]));o>=0||bo(!1),u=u.slice(0,Math.min(u.length,o+1))}return u.reduceRight((o,v,E)=>{let k=v.route.id?f==null?void 0:f[v.route.id]:null,D=null;n&&(D=v.route.errorElement||tH);let R=t.concat(u.slice(0,E+1)),j=()=>{let N;return k?N=D:v.route.Component?N=q.createElement(v.route.Component,null):v.route.element?N=v.route.element:N=o,q.createElement(rH,{match:v,routeContext:{outlet:o,matches:R,isDataRoute:n!=null},children:N})};return n&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?q.createElement(nH,{location:n.location,revalidation:n.revalidation,component:D,error:k,children:j(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):j()},null)}var lE;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(lE||(lE={}));var O0;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(O0||(O0={}));function oH(e){let t=q.useContext(TS);return t||bo(!1),t}function aH(e){let t=q.useContext(XW);return t||bo(!1),t}function sH(e){let t=q.useContext(fh);return t||bo(!1),t}function mO(e){let t=sH(),n=t.matches[t.matches.length-1];return n.route.id||bo(!1),n.route.id}function lH(){var e;let t=q.useContext(hO),n=aH(O0.UseRouteError),i=mO(O0.UseRouteError);return t||((e=n.errors)==null?void 0:e[i])}function cH(){let{router:e}=oH(lE.UseNavigateStable),t=mO(O0.UseNavigateStable),n=q.useRef(!1);return pO(()=>{n.current=!0}),q.useCallback(function(a,u){u===void 0&&(u={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,N2({fromRouteId:t},u)))},[e,t])}function uH(e){let{to:t,replace:n,state:i,relative:a}=e;X1()||bo(!1);let{matches:u}=q.useContext(fh),{pathname:f}=g_(),o=mh(),v=SS(t,ES(u).map(k=>k.pathnameBase),f,a==="path"),E=JSON.stringify(v);return q.useEffect(()=>o(JSON.parse(E),{replace:n,state:i,relative:a}),[o,E,a,n,i]),null}function Ga(e){bo(!1)}function dH(e){let{basename:t="/",children:n=null,location:i,navigationType:a=Bd.Pop,navigator:u,static:f=!1}=e;X1()&&bo(!1);let o=t.replace(/^\/*/,"/"),v=q.useMemo(()=>({basename:o,navigator:u,static:f}),[o,u,f]);typeof i=="string"&&(i=G1(i));let{pathname:E="/",search:k="",hash:D="",state:R=null,key:j="default"}=i,N=q.useMemo(()=>{let $=wS(E,o);return $==null?null:{location:{pathname:$,search:k,hash:D,state:R,key:j},navigationType:a}},[o,E,k,D,R,j,a]);return N==null?null:q.createElement(Z1.Provider,{value:v},q.createElement(Vx.Provider,{children:n,value:N}))}function hH(e){let{children:t,location:n}=e;return JW(cE(t),n)}var Pk;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Pk||(Pk={}));new Promise(()=>{});function cE(e,t){t===void 0&&(t=[]);let n=[];return q.Children.forEach(e,(i,a)=>{if(!q.isValidElement(i))return;let u=[...t,a];if(i.type===q.Fragment){n.push.apply(n,cE(i.props.children,u));return}i.type!==Ga&&bo(!1),!i.props.index||!i.props.children||bo(!1);let f={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=cE(i.props.children,u)),n.push(f)}),n}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},uE.apply(this,arguments)}function pH(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,u;for(u=0;u<i.length;u++)a=i[u],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function fH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mH(e,t){return e.button===0&&(!t||t==="_self")&&!fH(e)}const gH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],_H="startTransition",Ik=h2[_H];function yH(e){let{basename:t,children:n,future:i,window:a}=e,u=q.useRef();u.current==null&&(u.current=SW({window:a,v5Compat:!0}));let f=u.current,[o,v]=q.useState({action:f.action,location:f.location}),{v7_startTransition:E}=i||{},k=q.useCallback(D=>{E&&Ik?Ik(()=>v(D)):v(D)},[v,E]);return q.useLayoutEffect(()=>f.listen(k),[f,k]),q.createElement(dH,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:f})}const vH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gO=q.forwardRef(function(t,n){let{onClick:i,relative:a,reloadDocument:u,replace:f,state:o,target:v,to:E,preventScrollReset:k}=t,D=pH(t,gH),{basename:R}=q.useContext(Z1),j,N=!1;if(typeof E=="string"&&xH.test(E)&&(j=E,vH))try{let K=new URL(window.location.href),Y=E.startsWith("//")?new URL(K.protocol+E):new URL(E),ie=wS(Y.pathname,R);Y.origin===K.origin&&ie!=null?E=ie+Y.search+Y.hash:N=!0}catch{}let $=KW(E,{relative:a}),ee=bH(E,{replace:f,state:o,target:v,preventScrollReset:k,relative:a});function W(K){i&&i(K),K.defaultPrevented||ee(K)}return q.createElement("a",uE({},D,{href:j||$,onClick:N||u?i:W,ref:n,target:v}))});var Ak;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Ak||(Ak={}));var Mk;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Mk||(Mk={}));function bH(e,t){let{target:n,replace:i,state:a,preventScrollReset:u,relative:f}=t===void 0?{}:t,o=mh(),v=g_(),E=fO(e,{relative:f});return q.useCallback(k=>{if(mH(k,n)){k.preventDefault();let D=i!==void 0?i:F2(v)===F2(E);o(e,{replace:D,state:a,preventScrollReset:u,relative:f})}},[v,o,E,i,a,n,e,u,f])}var _O={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(xn,function(){var n,i,a;function u(o,v){if(!n)n=v;else if(!i)i=v;else{var E="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",k={};n(k),a=v(k),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(a.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}u(["exports"],function(o){var v=typeof self<"u"?self:{},E="2.15.0";let k;const D={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(k==null){const s=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{k={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):s}catch{k=s}}return k},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!D.API_URL)return null;try{const s=new URL(D.API_URL);return s.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":s.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},R={supported:!1,testSupport:function(s){!$&&N&&(ee?W(s):j=s)}};let j,N,$=!1,ee=!1;function W(s){const r=s.createTexture();s.bindTexture(s.TEXTURE_2D,r);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,N),s.isContextLost())return;R.supported=!0}catch{}s.deleteTexture(r),$=!0}v.document&&(N=v.document.createElement("img"),N.onload=function(){j&&W(j),j=null,ee=!0},N.onerror=function(){$=!0,j=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const K="01";function Y(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ie=ue;function ue(s,r,l,d){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=r,this.p2x=l,this.p2y=d}ue.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,r){if(r===void 0&&(r=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,d=0;d<8;d++){var p=this.sampleCurveX(l)-s;if(Math.abs(p)<r)return l;var g=this.sampleCurveDerivativeX(l);if(Math.abs(g)<1e-6)break;l-=p/g}var y=0,b=1;for(l=s,d=0;d<20&&(p=this.sampleCurveX(l),!(Math.abs(p-s)<r));d++)s>p?y=l:b=l,l=.5*(b-y)+y;return l},solve:function(s,r){return this.sampleCurveY(this.solveCurveX(s,r))}};var de=Y(ie),M=Te;function Te(s,r){this.x=s,this.y=r}Te.prototype={clone:function(){return new Te(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,r){return this.clone()._rotateAround(s,r)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var r=s.x-this.x,l=s.y-this.y;return r*r+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,r){return Math.atan2(this.x*r-this.y*s,this.x*s+this.y*r)},_matMult:function(s){var r=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=r,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var r=Math.cos(s),l=Math.sin(s),d=l*this.x+r*this.y;return this.x=r*this.x-l*this.y,this.y=d,this},_rotateAround:function(s,r){var l=Math.cos(s),d=Math.sin(s),p=r.y+d*(this.x-r.x)+l*(this.y-r.y);return this.x=r.x+l*(this.x-r.x)-d*(this.y-r.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Te.convert=function(s){return s instanceof Te?s:Array.isArray(s)?new Te(s[0],s[1]):s};var fe=Y(M);const Oe=Math.PI/180,rt=180/Math.PI;function at(s){return s*Oe}function qe(s){return s*rt}const ze=[[0,0],[1,0],[1,1],[0,1]];function Be(s){if(s<=0)return 0;if(s>=1)return 1;const r=s*s,l=r*s;return 4*(s<.5?l:3*(s-r)+l-.75)}function tt(s,r,l,d){const p=new de(s,r,l,d);return function(g){return p.solve(g)}}const Ke=tt(.25,.1,.25,1);function Le(s,r,l){return Math.min(l,Math.max(r,s))}function Je(s,r,l){return(l=Le((l-s)/(r-s),0,1))*l*(3-2*l)}function it(s,r,l){const d=l-r,p=((s-r)%d+d)%d+r;return p===r?l:p}function kt(s,r,l){if(!s.length)return l(null,[]);let d=s.length;const p=new Array(s.length);let g=null;s.forEach((y,b)=>{r(y,(T,C)=>{T&&(g=T),p[b]=C,--d==0&&l(g,p)})})}function yt(s){const r=[];for(const l in s)r.push(s[l]);return r}function wt(s,...r){for(const l of r)for(const d in l)s[d]=l[d];return s}let jt=1;function Qt(){return jt++}function en(){return function s(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function on(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function Sn(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function Jt(s,r){s.forEach(l=>{r[l]&&(r[l]=r[l].bind(r))})}function yn(s,r){return s.indexOf(r,s.length-r.length)!==-1}function Ft(s,r,l){const d={};for(const p in s)d[p]=r.call(l||this,s[p],p,s);return d}function nn(s,r,l){const d={};for(const p in s)r.call(l||this,s[p],p,s)&&(d[p]=s[p]);return d}function bn(s){return Array.isArray(s)?s.map(bn):typeof s=="object"&&s?Ft(s,bn):s}const qt={};function It(s){qt[s]||(typeof console<"u"&&console.warn(s),qt[s]=!0)}function Rn(s,r,l){return(l.y-s.y)*(r.x-s.x)>(r.y-s.y)*(l.x-s.x)}function ln(s){let r=0;for(let l,d,p=0,g=s.length,y=g-1;p<g;y=p++)l=s[p],d=s[y],r+=(d.x-l.x)*(l.y+d.y);return r}function Zn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function tr(s){const r={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,p,g)=>{const y=p||g;return r[d]=!y||y.toLowerCase(),""}),r["max-age"]){const l=parseInt(r["max-age"],10);isNaN(l)?delete r["max-age"]:r["max-age"]=l}return r}let Fn=null;function Yn(s){if(Fn==null){const r=s.navigator?s.navigator.userAgent:null;Fn=!!s.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Fn}function Un(s){try{const r=v[s];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}function qn(s,r){return[s[4*r],s[4*r+1],s[4*r+2],s[4*r+3]]}const wn="mapbox-tiles";let Qe=500,Kt=50,an,Zt;function rn(){try{return v.caches}catch{}}function sn(){rn()&&!an&&(an=v.caches.open(wn))}function vn(s){const r=s.indexOf("?");if(r<0)return s;const l=function(p){const g=p.indexOf("?");return g>0?p.slice(g+1).split("&"):[]}(s),d=l.filter(p=>{const g=p.split("=");return g[0]==="language"||g[0]==="worldview"});return d.length?`${s.slice(0,r)}?${d.join("&")}`:s.slice(0,r)}let Dn=1/0;const Nn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Nn);class nr extends Error{constructor(r,l,d){l===401&&Ge(d)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=l,this.url=d}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Dr=Zn()?()=>self.worker&&self.worker.referrer:()=>(v.location.protocol==="blob:"?v.parent:v).location.href,yr=function(s,r){if(!(/^file:/.test(l=s.url)||/^file:/.test(Dr())&&!/^\w+:/.test(l))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(d,p){const g=new v.AbortController,y=new v.Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:Dr(),referrerPolicy:d.referrerPolicy,signal:g.signal});let b=!1,T=!1;const C=(O=y.url).indexOf("sku=")>0&&Ge(O);var O;d.type==="json"&&y.headers.set("Accept","application/json");const z=(G,X,te)=>{if(T)return;if(G&&G.message!=="SecurityError"&&It(G.toString()),X&&te)return B(X);const ce=Date.now();v.fetch(y).then(xe=>{if(xe.ok){const Me=C?xe.clone():null;return B(xe,Me,ce)}return p(new nr(xe.statusText,xe.status,d.url))}).catch(xe=>{xe.name!=="AbortError"&&p(new Error(`${xe.message} ${d.url}`))})},B=(G,X,te)=>{(d.type==="arrayBuffer"?G.arrayBuffer():d.type==="json"?G.json():G.text()).then(ce=>{T||(X&&te&&function(xe,Me,be){if(sn(),!an)return;const Ae={status:Me.status,statusText:Me.statusText,headers:new v.Headers};Me.headers.forEach((pt,lt)=>Ae.headers.set(lt,pt));const Ne=tr(Me.headers.get("Cache-Control")||"");if(Ne["no-store"])return;Ne["max-age"]&&Ae.headers.set("Expires",new Date(be+1e3*Ne["max-age"]).toUTCString());const Fe=Ae.headers.get("Expires");Fe&&(new Date(Fe).getTime()-be<42e4||function(pt,lt){if(Zt===void 0)try{new Response(new ReadableStream),Zt=!0}catch{Zt=!1}Zt?lt(pt.body):pt.blob().then(lt)}(Me,pt=>{const lt=new v.Response(pt,Ae);sn(),an&&an.then(Et=>Et.put(vn(xe.url),lt)).catch(Et=>It(Et.message))}))}(y,X,te),b=!0,p(null,ce,G.headers.get("Cache-Control"),G.headers.get("Expires")))}).catch(ce=>{T||p(new Error(ce.message))})};return C?function(G,X){if(sn(),!an)return X(null);const te=vn(G.url);an.then(ce=>{ce.match(te).then(xe=>{const Me=function(be){if(!be)return!1;const Ae=new Date(be.headers.get("Expires")||0),Ne=tr(be.headers.get("Cache-Control")||"");return Ae>Date.now()&&!Ne["no-cache"]}(xe);ce.delete(te),Me&&ce.put(te,xe.clone()),X(null,xe,Me)}).catch(X)}).catch(X)}(y,z):z(null,null),{cancel:()=>{T=!0,b||g.abort()}}}(s,r);if(Zn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,r,void 0,!0)}var l;return function(d,p){const g=new v.XMLHttpRequest;g.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const y in d.headers)g.setRequestHeader(y,d.headers[y]);return d.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=d.credentials==="include",g.onerror=()=>{p(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let y=g.response;if(d.type==="json")try{y=JSON.parse(g.response)}catch(b){return p(b)}p(null,y,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else p(new nr(g.statusText,g.status,d.url))},g.send(d.body),{cancel:()=>g.abort()}}(s,r)},bi=function(s,r){return yr(wt(s,{type:"arrayBuffer"}),r)};function pi(s){const r=v.document.createElement("a");return r.href=s,r.protocol===v.document.location.protocol&&r.host===v.document.location.host}const Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let oe,ae;oe=[],ae=0;const ye=function(s,r){if(R.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),ae>=D.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:s,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return oe.push(g),g}ae++;let l=!1;const d=()=>{if(!l)for(l=!0,ae--;oe.length&&ae<D.MAX_PARALLEL_IMAGE_REQUESTS;){const g=oe.shift(),{requestParameters:y,callback:b,cancelled:T}=g;T||(g.cancel=ye(y,b).cancel)}},p=bi(s,(g,y,b,T)=>{d(),g?r(g):y&&(v.createImageBitmap?function(C,O){const z=new v.Blob([new Uint8Array(C)],{type:"image/png"});v.createImageBitmap(z).then(B=>{O(null,B)}).catch(B=>{O(new Error(`Could not load image because of ${B.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(C,O)=>r(C,O,b,T)):function(C,O){const z=new v.Image,B=v.URL;z.onload=()=>{O(null,z),B.revokeObjectURL(z.src),z.onload=null,v.requestAnimationFrame(()=>{z.src=Ce})},z.onerror=()=>O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const G=new v.Blob([new Uint8Array(C)],{type:"image/png"});z.src=C.byteLength?B.createObjectURL(G):Ce}(y,(C,O)=>r(C,O,b,T)))});return{cancel:()=>{p.cancel(),d()}}},De="NO_ACCESS_TOKEN";function Re(s){return s.indexOf("mapbox:")===0}function Ge(s){return D.API_URL_REGEX.test(s)}function Xe(s){return D.API_CDN_URL_REGEX.test(s)}function Ue(s){return D.API_STYLE_REGEX.test(s)&&!je(s)}function je(s){return D.API_SPRITE_REGEX.test(s)}const ut=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function At(s){const r=s.match(ut);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function Tt(s){const r=s.params.length?`?${s.params.join("&")}`:"";return`${s.protocol}://${s.authority}${s.path}${r}`}const gn="mapbox.eventData";function On(s){if(!s)return null;const r=s.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(r[1]).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class An{constructor(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(r){const l=On(D.ACCESS_TOKEN);let d="";return d=l&&l.u?v.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,(p,g)=>String.fromCharCode(+("0x"+g)))):D.ACCESS_TOKEN||"",r?`${gn}.${r}:${d}`:`${gn}:${d}`}fetchEventData(){const r=Un("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(r)try{const p=v.localStorage.getItem(l);p&&(this.eventData=JSON.parse(p));const g=v.localStorage.getItem(d);g&&(this.anonId=g)}catch{It("Unable to read from LocalStorage")}}saveEventData(){const r=Un("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(r)try{v.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{It("Unable to write to LocalStorage")}}processRequests(r){}postEvent(r,l,d,p){if(!D.EVENTS_URL)return;const g=At(D.EVENTS_URL);g.params.push(`access_token=${p||D.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(r).toISOString()},b=l?wt(y,l):y,T={url:Tt(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=function(C,O){return yr(wt(C,{method:"POST"}),O)}(T,C=>{this.pendingRequest=null,d(C),this.saveEventData(),this.processRequests(p)})}queueRequest(r,l){this.queue.push(r),this.processRequests(l)}}const Ln=new class extends An{constructor(s){super("appUserTurnstile"),this._customAccessToken=s}postTurnstileEvent(s,r){D.EVENTS_URL&&D.ACCESS_TOKEN&&Array.isArray(s)&&s.some(l=>Re(l)||Ge(l))&&this.queueRequest(Date.now(),r)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const r=On(D.ACCESS_TOKEN),l=r?r.u:D.ACCESS_TOKEN;let d=l!==this.eventData.tokenU;Sn(this.anonId)||(this.anonId=en(),d=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),y=new Date(p),b=(p-this.eventData.lastSuccess)/864e5;d=d||b>=1||b<-1||g.getDate()!==y.getDate()}else d=!0;d?this.postEvent(p,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:K,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=p,this.eventData.tokenU=l)},s):this.processRequests()}},Xn=Ln.postTurnstileEvent.bind(Ln),wr=new class extends An{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(s,r,l,d){this.skuToken=r,this.errorCb=d,D.EVENTS_URL&&(l||D.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(De)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:l}=this.queue.shift();r&&this.success[r]||(this.anonId||this.fetchEventData(),Sn(this.anonId)||(this.anonId=en()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:K,skuToken:this.skuToken,userId:this.anonId},d=>{d?this.errorCb(d):r&&(this.success[r]=!0)},s))}},Er=wr.postMapLoadEvent.bind(wr),Or=new class extends An{constructor(){super("gljs.performance")}postPerformanceEvent(s,r){D.EVENTS_URL&&(s||D.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:r},s)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:r,performanceData:l}=this.queue.shift(),d=function(p){const g=v.performance.getEntriesByType("resource"),y=v.performance.getEntriesByType("mark"),b=function(B){const G={};if(B){for(const X in B)if(X!=="other")for(const te of B[X]){const ce=`${X}ResolveRangeMin`,xe=`${X}ResolveRangeMax`,Me=`${X}RequestCount`,be=`${X}RequestCachedCount`;G[ce]=Math.min(G[ce]||1/0,te.startTime),G[xe]=Math.max(G[xe]||-1/0,te.responseEnd);const Ae=Ne=>{G[Ne]===void 0&&(G[Ne]=0),++G[Ne]};te.transferSize!==void 0&&te.transferSize===0&&Ae(be),Ae(Me)}}return G}(function(B,G){const X={};if(B)for(const te of B){const ce=G(te);X[ce]===void 0&&(X[ce]=[]),X[ce].push(te)}return X}(g,Ar)),T=v.devicePixelRatio,C=v.navigator.connection||v.navigator.mozConnection||v.navigator.webkitConnection,O={counters:[],metadata:[],attributes:[]},z=(B,G,X)=>{X!=null&&B.push({name:G,value:X.toString()})};for(const B in b)z(O.counters,B,b[B]);if(p.interactionRange[0]!==1/0&&p.interactionRange[1]!==-1/0&&(z(O.counters,"interactionRangeMin",p.interactionRange[0]),z(O.counters,"interactionRangeMax",p.interactionRange[1])),y)for(const B of Object.keys(un)){const G=un[B],X=y.find(te=>te.name===G);X&&z(O.counters,G,X.startTime)}return z(O.counters,"visibilityHidden",p.visibilityHidden),z(O.attributes,"style",function(B){if(B)for(const G of B){const X=G.name.split("?")[0];if(Ue(X)){const te=X.split("/").slice(-2);if(te.length===2)return`mapbox://styles/${te[0]}/${te[1]}`}}}(g)),z(O.attributes,"terrainEnabled",p.terrainEnabled?"true":"false"),z(O.attributes,"fogEnabled",p.fogEnabled?"true":"false"),z(O.attributes,"projection",p.projection),z(O.attributes,"zoom",p.zoom),z(O.metadata,"devicePixelRatio",T),z(O.metadata,"connectionEffectiveType",C?C.effectiveType:void 0),z(O.metadata,"navigatorUserAgent",v.navigator.userAgent),z(O.metadata,"screenWidth",v.screen.width),z(O.metadata,"screenHeight",v.screen.height),z(O.metadata,"windowWidth",v.innerWidth),z(O.metadata,"windowHeight",v.innerHeight),z(O.metadata,"mapWidth",p.width/T),z(O.metadata,"mapHeight",p.height/T),z(O.metadata,"webglRenderer",p.renderer),z(O.metadata,"webglVendor",p.vendor),z(O.metadata,"sdkVersion",E),z(O.metadata,"sdkIdentifier","mapbox-gl-js"),O}(l);for(const p of d.metadata);for(const p of d.counters);for(const p of d.attributes);this.postEvent(r,d,()=>{},s)}},Ze=Or.postPerformanceEvent.bind(Or),Se=new class extends An{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(s,r,l,d){if(!D.API_URL||!D.SESSION_PATH)return;const p=At(D.API_URL+D.SESSION_PATH);p.params.push(`sku=${r||""}`),p.params.push(`access_token=${d||D.ACCESS_TOKEN||""}`);const g={url:Tt(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(y,b){return yr(wt(y,{method:"GET"}),b)}(g,y=>{this.pendingRequest=null,l(y),this.saveEventData(),this.processRequests(d)})}getSessionAPI(s,r,l,d){this.skuToken=r,this.errorCb=d,D.SESSION_PATH&&D.API_URL&&(l||D.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(De)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:l}=this.queue.shift();r&&this.success[r]||this.getSession(l,this.skuToken,d=>{d?this.errorCb(d):r&&(this.success[r]=!0)},s)}},ct=Se.getSessionAPI.bind(Se),Rt=new Set,un={create:"create",load:"load",fullLoad:"fullLoad"},fr={mark(s){v.performance.mark(s)},measure(s,r,l){v.performance.measure(s,r,l)}};function Ar(s){const r=s.name.split("?")[0];return Xe(r)&&r.includes("mapbox-gl.js")?"javascript":Xe(r)&&r.includes("mapbox-gl.css")?"css":function(l){return D.API_FONTS_REGEX.test(l)}(r)?"fontRange":je(r)?"sprite":Ue(r)?"style":function(l){return D.API_TILEJSON_REGEX.test(l)}(r)?"tilejson":"other"}const Vn=v.performance;function Do(s){const r=s?s.url.toString():void 0;return Vn.getEntriesByName(r)}let go,_o,ra,$i;const Ui={now:()=>ra!==void 0?ra:v.performance.now(),setNow(s){ra=s},restoreNow(){ra=void 0},frame(s){const r=v.requestAnimationFrame(s);return{cancel:()=>v.cancelAnimationFrame(r)}},getImageData(s,r=0){const{width:l,height:d}=s;$i||($i=v.document.createElement("canvas"));const p=$i.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(l>$i.width||d>$i.height)&&($i.width=l,$i.height=d),p.clearRect(-r,-r,l+2*r,d+2*r),p.drawImage(s,0,0,l,d),p.getImageData(-r,-r,l+2*r,d+2*r)},resolveURL:s=>(go||(go=v.document.createElement("a")),go.href=s,go.href),get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(_o==null&&(_o=v.matchMedia("(prefers-reduced-motion: reduce)")),_o.matches)}};function yo(s,r,l){l[s]&&l[s].indexOf(r)!==-1||(l[s]=l[s]||[],l[s].push(r))}function Vi(s,r,l){if(l&&l[s]){const d=l[s].indexOf(r);d!==-1&&l[s].splice(d,1)}}class Ba{constructor(r,l={}){wt(this,l),this.type=r}}class ja extends Ba{constructor(r,l={}){super("error",wt({error:r},l))}}class Al{on(r,l){return this._listeners=this._listeners||{},yo(r,l,this._listeners),this}off(r,l){return Vi(r,l,this._listeners),Vi(r,l,this._oneTimeListeners),this}once(r,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},yo(r,l,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,l){typeof r=="string"&&(r=new Ba(r,l||{}));const d=r.type;if(this.listens(d)){r.target=this;const p=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const b of p)b.call(this,r);const g=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const b of g)Vi(d,b,this._oneTimeListeners),b.call(this,r);const y=this._eventedParent;y&&(wt(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(r))}else r instanceof ja&&console.error(r.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,l){return this._eventedParent=r,this._eventedParentData=l,this}}var vt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function fa(s,...r){for(const l of r)for(const d in l)s[d]=l[d];return s}function ti(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Gi(s){if(Array.isArray(s))return s.map(Gi);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const r={};for(const l in s)r[l]=Gi(s[l]);return r}return ti(s)}class Oo extends Error{constructor(r,l){super(l),this.message=l,this.key=r}}var Ro=Oo;class hc{constructor(r,l=[]){this.parent=r,this.bindings={};for(const[d,p]of l)this.bindings[d]=p}concat(r){return new hc(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}var Up=hc;const pc={kind:"null"},dn={kind:"number"},vr={kind:"string"},dr={kind:"boolean"},Vo={kind:"color"},$a={kind:"object"},gr={kind:"value"},wi={kind:"collator"},fc={kind:"formatted"},Ua={kind:"resolvedImage"};function ma(s,r){return{kind:"array",itemType:s,N:r}}function ui(s){if(s.kind==="array"){const r=ui(s.itemType);return typeof s.N=="number"?`array<${r}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${r}>`}return s.kind}const Ks=[pc,dn,vr,dr,Vo,fc,$a,ma(gr),Ua];function Lo(s,r){if(r.kind==="error")return null;if(s.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Lo(s.itemType,r.itemType))&&(typeof s.N!="number"||s.N===r.N))return null}else{if(s.kind===r.kind)return null;if(s.kind==="value"){for(const l of Ks)if(!Lo(l,r))return null}}return`Expected ${ui(s)} but found ${ui(r)} instead.`}function Ml(s,r){return r.some(l=>l.kind===s.kind)}function au(s,r){return r.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}var Dl,bh={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ol(s){return(s=Math.round(s))<0?0:s>255?255:s}function mc(s){return Ol(s[s.length-1]==="%"?parseFloat(s)/100*255:parseInt(s))}function su(s){return(r=s[s.length-1]==="%"?parseFloat(s)/100:parseFloat(s))<0?0:r>1?1:r;var r}function gc(s,r,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?s+(r-s)*l*6:2*l<1?r:3*l<2?s+(r-s)*(2/3-l)*6:s}try{Dl={}.parseCSSColor=function(s){var r,l=s.replace(/ /g,"").toLowerCase();if(l in bh)return bh[l].slice();if(l[0]==="#")return l.length===4?(r=parseInt(l.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:l.length===7&&(r=parseInt(l.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var d=l.indexOf("("),p=l.indexOf(")");if(d!==-1&&p+1===l.length){var g=l.substr(0,d),y=l.substr(d+1,p-(d+1)).split(","),b=1;switch(g){case"rgba":if(y.length!==4)return null;b=su(y.pop());case"rgb":return y.length!==3?null:[mc(y[0]),mc(y[1]),mc(y[2]),b];case"hsla":if(y.length!==4)return null;b=su(y.pop());case"hsl":if(y.length!==3)return null;var T=(parseFloat(y[0])%360+360)%360/360,C=su(y[1]),O=su(y[2]),z=O<=.5?O*(C+1):O+C-O*C,B=2*O-z;return[Ol(255*gc(B,z,T+1/3)),Ol(255*gc(B,z,T)),Ol(255*gc(B,z,T-1/3)),b];default:return null}}return null}}catch{}class zo{constructor(r,l,d,p=1){this.r=r,this.g=l,this.b=d,this.a=p}static parse(r){if(!r)return;if(r instanceof zo)return r;if(typeof r!="string")return;const l=Dl(r);return l?new zo(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[r,l,d,p]=this.toArray();return`rgba(${Math.round(r)},${Math.round(l)},${Math.round(d)},${p})`}toArray(){const{r,g:l,b:d,a:p}=this;return p===0?[0,0,0,0]:[255*r/p,255*l/p,255*d/p,p]}toArray01(){const{r,g:l,b:d,a:p}=this;return p===0?[0,0,0,0]:[r/p,l/p,d/p,p]}toArray01PremultipliedAlpha(){const{r,g:l,b:d,a:p}=this;return[r,l,d,p]}}zo.black=new zo(0,0,0,1),zo.white=new zo(1,1,1,1),zo.transparent=new zo(0,0,0,0),zo.red=new zo(1,0,0,1),zo.blue=new zo(0,0,1,1);var Mi=zo;class wh{constructor(r,l,d){this.sensitivity=r?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,l){return this.collator.compare(r,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class lu{constructor(r,l,d,p,g){this.text=r.normalize?r.normalize():r,this.image=l,this.scale=d,this.fontStack=p,this.textColor=g}}class Wo{constructor(r){this.sections=r}static fromString(r){return new Wo([new lu(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Wo?r:Wo.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const l of this.sections){if(l.image){r.push(["image",l.image.name]);continue}r.push(l.text);const d={};l.fontStack&&(d["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(d["font-scale"]=l.scale),l.textColor&&(d["text-color"]=["rgba"].concat(l.textColor.toArray())),r.push(d)}return r}}class ga{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new ga({name:r,available:!1}):null}serialize(){return["image",this.name]}}function Vp(s,r,l,d){return typeof s=="number"&&s>=0&&s<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[s,r,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[s,r,l,d]:[s,r,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function cu(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Mi||s instanceof wh||s instanceof Wo||s instanceof ga)return!0;if(Array.isArray(s)){for(const r of s)if(!cu(r))return!1;return!0}if(typeof s=="object"){for(const r in s)if(!cu(s[r]))return!1;return!0}return!1}function Ei(s){if(s===null)return pc;if(typeof s=="string")return vr;if(typeof s=="boolean")return dr;if(typeof s=="number")return dn;if(s instanceof Mi)return Vo;if(s instanceof wh)return wi;if(s instanceof Wo)return fc;if(s instanceof ga)return Ua;if(Array.isArray(s)){const r=s.length;let l;for(const d of s){const p=Ei(d);if(l){if(l===p)continue;l=gr;break}l=p}return ma(l||gr,r)}return $a}function uu(s){const r=typeof s;return s===null?"":r==="string"||r==="number"||r==="boolean"?String(s):s instanceof Mi||s instanceof Wo||s instanceof ga?s.toString():JSON.stringify(s)}class Eh{constructor(r,l){this.type=r,this.value=l}static parse(r,l){if(r.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!cu(r[1]))return l.error("invalid value");const d=r[1];let p=Ei(d);const g=l.expectedType;return p.kind!=="array"||p.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(p=g),new Eh(p,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Mi?["rgba"].concat(this.value.toArray()):this.value instanceof Wo?this.value.serialize():this.value}}var Ys=Eh,Zi=class{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}};const nd={string:vr,number:dn,boolean:dr,object:$a};class du{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let d,p=1;const g=r[0];if(g==="array"){let b,T;if(r.length>2){const C=r[1];if(typeof C!="string"||!(C in nd)||C==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);b=nd[C],p++}else b=gr;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return l.error('The length argument to "array" must be a positive integer literal',2);T=r[2],p++}d=ma(b,T)}else d=nd[g];const y=[];for(;p<r.length;p++){const b=l.parse(r[p],p,gr);if(!b)return null;y.push(b)}return new du(d,y)}evaluate(r){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(r);if(!Lo(this.type,Ei(d)))return d;if(l===this.args.length-1)throw new Zi(`Expected value to be of type ${ui(this.type)}, but found ${ui(Ei(d))} instead.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,l=[r.kind];if(r.kind==="array"){const d=r.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){l.push(d.kind);const p=r.N;(typeof p=="number"||this.args.length>1)&&l.push(p)}}return l.concat(this.args.map(d=>d.serialize()))}}var es=du;class ws{constructor(r){this.type=fc,this.sections=r}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const p=[];let g=!1;for(let y=1;y<=r.length-1;++y){const b=r[y];if(g&&typeof b=="object"&&!Array.isArray(b)){g=!1;let T=null;if(b["font-scale"]&&(T=l.parse(b["font-scale"],1,dn),!T))return null;let C=null;if(b["text-font"]&&(C=l.parse(b["text-font"],1,ma(vr)),!C))return null;let O=null;if(b["text-color"]&&(O=l.parse(b["text-color"],1,Vo),!O))return null;const z=p[p.length-1];z.scale=T,z.font=C,z.textColor=O}else{const T=l.parse(r[y],1,gr);if(!T)return null;const C=T.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,p.push({content:T,scale:null,font:null,textColor:null})}}return new ws(p)}evaluate(r){return new Wo(this.sections.map(l=>{const d=l.content.evaluate(r);return Ei(d)===Ua?new lu("",d,null,null,null):new lu(uu(d),null,l.scale?l.scale.evaluate(r):null,l.font?l.font.evaluate(r).join(","):null,l.textColor?l.textColor.evaluate(r):null)}))}eachChild(r){for(const l of this.sections)r(l.content),l.scale&&r(l.scale),l.font&&r(l.font),l.textColor&&r(l.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const l of this.sections){r.push(l.content.serialize());const d={};l.scale&&(d["font-scale"]=l.scale.serialize()),l.font&&(d["text-font"]=l.font.serialize()),l.textColor&&(d["text-color"]=l.textColor.serialize()),r.push(d)}return r}}class _c{constructor(r){this.type=Ua,this.input=r}static parse(r,l){if(r.length!==2)return l.error("Expected two arguments.");const d=l.parse(r[1],1,vr);return d?new _c(d):l.error("No image name provided.")}evaluate(r){const l=this.input.evaluate(r),d=ga.fromString(l);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(l)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const fm={"to-boolean":dr,"to-color":Vo,"to-number":dn,"to-string":vr};class Sh{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[0];if((d==="to-boolean"||d==="to-string")&&r.length!==2)return l.error("Expected one argument.");const p=fm[d],g=[];for(let y=1;y<r.length;y++){const b=l.parse(r[y],y,gr);if(!b)return null;g.push(b)}return new Sh(p,g)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let l,d;for(const p of this.args){if(l=p.evaluate(r),d=null,l instanceof Mi)return l;if(typeof l=="string"){const g=r.parseColor(l);if(g)return g}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Vp(l[0],l[1],l[2],l[3]),!d))return new Mi(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Zi(d||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const d of this.args){if(l=d.evaluate(r),l===null)return 0;const p=Number(l);if(!isNaN(p))return p}throw new Zi(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?Wo.fromString(uu(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?ga.fromString(uu(this.args[0].evaluate(r))):uu(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ws([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new _c(this.args[0]).serialize();const r=[`to-${this.type.kind}`];return this.eachChild(l=>{r.push(l.serialize())}),r}}var yc=Sh;const Ho=["Unknown","Point","LineString","Polygon"];var rd=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ho[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:l,y:d}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*r-s[0])+this.featureDistanceData.bearing[1]*(d*r-s[1])}return 0}parseColor(s){let r=this._parseColorCache[s];return r||(r=this._parseColorCache[s]=Mi.parse(s)),r}};class Es{constructor(r,l,d,p){this.name=r,this.type=l,this._evaluate=d,this.args=p}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,l){const d=r[0],p=Es.definitions[d];if(!p)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(p)?p[0]:p.type,y=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,b=y.filter(([C])=>!Array.isArray(C)||C.length===r.length-1);let T=null;for(const[C,O]of b){T=new Mr(l.registry,l.path,null,l.scope);const z=[];let B=!1;for(let G=1;G<r.length;G++){const X=r[G],te=Array.isArray(C)?C[G-1]:C.type,ce=T.parse(X,1+z.length,te);if(!ce){B=!0;break}z.push(ce)}if(!B)if(Array.isArray(C)&&C.length!==z.length)T.error(`Expected ${C.length} arguments, but found ${z.length} instead.`);else{for(let G=0;G<z.length;G++){const X=Array.isArray(C)?C[G]:C.type,te=z[G];T.concat(G+1).checkSubtype(X,te.type)}if(T.errors.length===0)return new Es(d,g,O,z)}}if(b.length===1)l.errors.push(...T.errors);else{const C=(b.length?b:y).map(([z])=>{return B=z,Array.isArray(B)?`(${B.map(ui).join(", ")})`:`(${ui(B.type)}...)`;var B}).join(" | "),O=[];for(let z=1;z<r.length;z++){const B=l.parse(r[z],1+O.length);if(!B)return null;O.push(ui(B.type))}l.error(`Expected arguments of type ${C}, but found (${O.join(", ")}) instead.`)}return null}static register(r,l){Es.definitions=l;for(const d in l)r[d]=Es}}var Ss=Es;class hu{constructor(r,l,d){this.type=wi,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=l}static parse(r,l){if(r.length!==2)return l.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const p=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,dr);if(!p)return null;const g=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,dr);if(!g)return null;let y=null;return d.locale&&(y=l.parse(d.locale,1,vr),!y)?null:new hu(p,g,y)}evaluate(r){return new wh(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}const Ts=8192;function S(s,r){s[0]=Math.min(s[0],r[0]),s[1]=Math.min(s[1],r[1]),s[2]=Math.max(s[2],r[0]),s[3]=Math.max(s[3],r[1])}function I(s,r){return!(s[0]<=r[0]||s[2]>=r[2]||s[1]<=r[1]||s[3]>=r[3])}function F(s,r){const l=(180+s[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,p=Math.pow(2,r.z);return[Math.round(l*p*Ts),Math.round(d*p*Ts)]}function H(s,r,l){const d=s[0]-r[0],p=s[1]-r[1],g=s[0]-l[0],y=s[1]-l[1];return d*y-g*p==0&&d*g<=0&&p*y<=0}function ne(s,r){let l=!1;for(let y=0,b=r.length;y<b;y++){const T=r[y];for(let C=0,O=T.length;C<O-1;C++){if(H(s,T[C],T[C+1]))return!1;(p=T[C])[1]>(d=s)[1]!=(g=T[C+1])[1]>d[1]&&d[0]<(g[0]-p[0])*(d[1]-p[1])/(g[1]-p[1])+p[0]&&(l=!l)}}var d,p,g;return l}function re(s,r){for(let l=0;l<r.length;l++)if(ne(s,r[l]))return!0;return!1}function se(s,r,l,d){const p=d[0]-l[0],g=d[1]-l[1],y=(s[0]-l[0])*g-p*(s[1]-l[1]),b=(r[0]-l[0])*g-p*(r[1]-l[1]);return y>0&&b<0||y<0&&b>0}function $e(s,r,l){for(const C of l)for(let O=0;O<C.length-1;++O)if((b=[(y=C[O+1])[0]-(g=C[O])[0],y[1]-g[1]])[0]*(T=[(p=r)[0]-(d=s)[0],p[1]-d[1]])[1]-b[1]*T[0]!=0&&se(d,p,g,y)&&se(g,y,d,p))return!0;var d,p,g,y,b,T;return!1}function Pe(s,r){for(let l=0;l<s.length;++l)if(!ne(s[l],r))return!1;for(let l=0;l<s.length-1;++l)if($e(s[l],s[l+1],r))return!1;return!0}function ot(s,r){for(let l=0;l<r.length;l++)if(Pe(s,r[l]))return!0;return!1}function St(s,r,l){const d=[];for(let p=0;p<s.length;p++){const g=[];for(let y=0;y<s[p].length;y++){const b=F(s[p][y],l);S(r,b),g.push(b)}d.push(g)}return d}function Lt(s,r,l){const d=[];for(let p=0;p<s.length;p++){const g=St(s[p],r,l);d.push(g)}return d}function _t(s,r,l,d){if(s[0]<l[0]||s[0]>l[2]){const p=.5*d;let g=s[0]-l[0]>p?-d:l[0]-s[0]>p?d:0;g===0&&(g=s[0]-l[2]>p?-d:l[2]-s[0]>p?d:0),s[0]+=g}S(r,s)}function tn(s,r,l,d){const p=Math.pow(2,d.z)*Ts,g=[d.x*Ts,d.y*Ts],y=[];if(!s)return y;for(const b of s)for(const T of b){const C=[T.x+g[0],T.y+g[1]];_t(C,r,l,p),y.push(C)}return y}function ir(s,r,l,d){const p=Math.pow(2,d.z)*Ts,g=[d.x*Ts,d.y*Ts],y=[];if(!s)return y;for(const T of s){const C=[];for(const O of T){const z=[O.x+g[0],O.y+g[1]];S(r,z),C.push(z)}y.push(C)}if(r[2]-r[0]<=p/2){(b=r)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const T of y)for(const C of T)_t(C,r,l,p)}var b;return y}class Cr{constructor(r,l){this.type=dr,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(cu(r[1])){const d=r[1];if(d.type==="FeatureCollection")for(let p=0;p<d.features.length;++p){const g=d.features[p].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Cr(d,d.features[p].geometry)}else if(d.type==="Feature"){const p=d.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Cr(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Cr(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,d){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=l.canonicalID();if(!y)return!1;if(d.type==="Polygon"){const b=St(d.coordinates,g,y),T=tn(l.geometry(),p,g,y);if(!I(p,g))return!1;for(const C of T)if(!ne(C,b))return!1}if(d.type==="MultiPolygon"){const b=Lt(d.coordinates,g,y),T=tn(l.geometry(),p,g,y);if(!I(p,g))return!1;for(const C of T)if(!re(C,b))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,d){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=l.canonicalID();if(!y)return!1;if(d.type==="Polygon"){const b=St(d.coordinates,g,y),T=ir(l.geometry(),p,g,y);if(!I(p,g))return!1;for(const C of T)if(!Pe(C,b))return!1}if(d.type==="MultiPolygon"){const b=Lt(d.coordinates,g,y),T=ir(l.geometry(),p,g,y);if(!I(p,g))return!1;for(const C of T)if(!ot(C,b))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var _r=Cr;function Di(s){if(s instanceof Ss&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof _r)return!1;let r=!0;return s.eachChild(l=>{r&&!Di(l)&&(r=!1)}),r}function ni(s){if(s instanceof Ss&&s.name==="feature-state")return!1;let r=!0;return s.eachChild(l=>{r&&!ni(l)&&(r=!1)}),r}function Eo(s,r){if(s instanceof Ss&&r.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(d=>{l&&!Eo(d,r)&&(l=!1)}),l}class ia{constructor(r,l){this.type=l.type,this.name=r,this.boundExpression=l}static parse(r,l){if(r.length!==2||typeof r[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=r[1];return l.scope.has(d)?new ia(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var kr=ia;class Va{constructor(r,l=[],d,p=new Up,g=[]){this.registry=r,this.path=l,this.key=l.map(y=>`[${y}]`).join(""),this.scope=p,this.errors=g,this.expectedType=d}parse(r,l,d,p,g={}){return l?this.concat(l,d,p)._parse(r,g):this._parse(r,g)}_parse(r,l){function d(p,g,y){return y==="assert"?new es(g,[p]):y==="coerce"?new yc(g,[p]):p}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=r[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[p];if(g){let y=g.parse(r,this);if(!y)return null;if(this.expectedType){const b=this.expectedType,T=y.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||T.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string"){if(this.checkSubtype(b,T))return null}else y=d(y,b,l.typeAnnotation||"coerce");else y=d(y,b,l.typeAnnotation||"assert")}if(!(y instanceof Ys)&&y.type.kind!=="resolvedImage"&&_i(y)){const b=new rd;try{y=new Ys(y.type,y.evaluate(b))}catch(T){return this.error(T.message),null}}return y}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,l,d){const p=typeof r=="number"?this.path.concat(r):this.path,g=d?this.scope.concat(d):this.scope;return new Va(this.registry,p,l||null,g,this.errors)}error(r,...l){const d=`${this.key}${l.map(p=>`[${p}]`).join("")}`;this.errors.push(new Ro(d,r))}checkSubtype(r,l){const d=Lo(r,l);return d&&this.error(d),d}}var Mr=Va;function _i(s){if(s instanceof kr)return _i(s.boundExpression);if(s instanceof Ss&&s.name==="error"||s instanceof hu||s instanceof _r)return!1;const r=s instanceof yc||s instanceof es;let l=!0;return s.eachChild(d=>{l=r?l&&_i(d):l&&d instanceof Ys}),!!l&&Di(s)&&Eo(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Js(s,r){const l=s.length-1;let d,p,g=0,y=l,b=0;for(;g<=y;)if(b=Math.floor((g+y)/2),d=s[b],p=s[b+1],d<=r){if(b===l||r<p)return b;g=b+1}else{if(!(d>r))throw new Zi("Input is not a number.");y=b-1}return 0}class vc{constructor(r,l,d){this.type=r,this.input=l,this.labels=[],this.outputs=[];for(const[p,g]of d)this.labels.push(p),this.outputs.push(g)}static parse(r,l){if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(r[1],1,dn);if(!d)return null;const p=[];let g=null;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);for(let y=1;y<r.length;y+=2){const b=y===1?-1/0:r[y],T=r[y+1],C=y,O=y+1;if(typeof b!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(p.length&&p[p.length-1][0]>=b)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const z=l.parse(T,O,g);if(!z)return null;g=g||z.type,p.push([b,z])}return new vc(g,d,p)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const p=this.input.evaluate(r);if(p<=l[0])return d[0].evaluate(r);const g=l.length;return p>=l[g-1]?d[g-1].evaluate(r):d[Js(l,p)].evaluate(r)}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&r.push(this.labels[l]),r.push(this.outputs[l].serialize());return r}}var _a=vc;function Sr(s,r,l){return s*(1-l)+r*l}var qo=Object.freeze({__proto__:null,array:function(s,r,l){return s.map((d,p)=>Sr(d,r[p],l))},color:function(s,r,l){return new Mi(Sr(s.r,r.r,l),Sr(s.g,r.g,l),Sr(s.b,r.b,l),Sr(s.a,r.a,l))},number:Sr});const Cs=.95047,ts=1.08883,oa=4/29,ks=6/29,Wa=3*ks*ks,Ps=ks*ks*ks,mm=Math.PI/180,gm=180/Math.PI;function Th(s){return s>Ps?Math.pow(s,1/3):s/Wa+oa}function Ur(s){return s>ks?s*s*s:Wa*(s-oa)}function xc(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function Go(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Rl(s){const r=Go(s.r),l=Go(s.g),d=Go(s.b),p=Th((.4124564*r+.3575761*l+.1804375*d)/Cs),g=Th((.2126729*r+.7151522*l+.072175*d)/1);return{l:116*g-16,a:500*(p-g),b:200*(g-Th((.0193339*r+.119192*l+.9503041*d)/ts)),alpha:s.a}}function Wp(s){let r=(s.l+16)/116,l=isNaN(s.a)?r:r+s.a/500,d=isNaN(s.b)?r:r-s.b/200;return r=1*Ur(r),l=Cs*Ur(l),d=ts*Ur(d),new Mi(xc(3.2404542*l-1.5371385*r-.4985314*d),xc(-.969266*l+1.8760108*r+.041556*d),xc(.0556434*l-.2040259*r+1.0572252*d),s.alpha)}function _m(s,r,l){const d=r-s;return s+l*(d>180||d<-180?d-360*Math.round(d/360):d)}const bc={forward:Rl,reverse:Wp,interpolate:function(s,r,l){return{l:Sr(s.l,r.l,l),a:Sr(s.a,r.a,l),b:Sr(s.b,r.b,l),alpha:Sr(s.alpha,r.alpha,l)}}},ya={forward:function(s){const{l:r,a:l,b:d}=Rl(s),p=Math.atan2(d,l)*gm;return{h:p<0?p+360:p,c:Math.sqrt(l*l+d*d),l:r,alpha:s.a}},reverse:function(s){const r=s.h*mm,l=s.c;return Wp({l:s.l,a:Math.cos(r)*l,b:Math.sin(r)*l,alpha:s.alpha})},interpolate:function(s,r,l){return{h:_m(s.h,r.h,l),c:Sr(s.c,r.c,l),l:Sr(s.l,r.l,l),alpha:Sr(s.alpha,r.alpha,l)}}};var pu=Object.freeze({__proto__:null,hcl:ya,lab:bc});class va{constructor(r,l,d,p,g){this.type=r,this.operator=l,this.interpolation=d,this.input=p,this.labels=[],this.outputs=[];for(const[y,b]of g)this.labels.push(y),this.outputs.push(b)}static interpolationFactor(r,l,d,p){let g=0;if(r.name==="exponential")g=id(l,r.base,d,p);else if(r.name==="linear")g=id(l,1,d,p);else if(r.name==="cubic-bezier"){const y=r.controlPoints;g=new de(y[0],y[1],y[2],y[3]).solve(id(l,1,d,p))}return g}static parse(r,l){let[d,p,g,...y]=r;if(!Array.isArray(p)||p.length===0)return l.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const C=p[1];if(typeof C!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:C}}else{if(p[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const C=p.slice(1);if(C.length!==4||C.some(O=>typeof O!="number"||O<0||O>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:C}}}if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(g=l.parse(g,2,dn),!g)return null;const b=[];let T=null;d==="interpolate-hcl"||d==="interpolate-lab"?T=Vo:l.expectedType&&l.expectedType.kind!=="value"&&(T=l.expectedType);for(let C=0;C<y.length;C+=2){const O=y[C],z=y[C+1],B=C+3,G=C+4;if(typeof O!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(b.length&&b[b.length-1][0]>=O)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);const X=l.parse(z,G,T);if(!X)return null;T=T||X.type,b.push([O,X])}return T.kind==="number"||T.kind==="color"||T.kind==="array"&&T.itemType.kind==="number"&&typeof T.N=="number"?new va(T,d,p,g,b):l.error(`Type ${ui(T)} is not interpolatable.`)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const p=this.input.evaluate(r);if(p<=l[0])return d[0].evaluate(r);const g=l.length;if(p>=l[g-1])return d[g-1].evaluate(r);const y=Js(l,p),b=va.interpolationFactor(this.interpolation,p,l[y],l[y+1]),T=d[y].evaluate(r),C=d[y+1].evaluate(r);return this.operator==="interpolate"?qo[this.type.kind.toLowerCase()](T,C,b):this.operator==="interpolate-hcl"?ya.reverse(ya.interpolate(ya.forward(T),ya.forward(C),b)):bc.reverse(bc.interpolate(bc.forward(T),bc.forward(C),b))}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,r,this.input.serialize()];for(let d=0;d<this.labels.length;d++)l.push(this.labels[d],this.outputs[d].serialize());return l}}function id(s,r,l,d){const p=d-l,g=s-l;return p===0?0:r===1?g/p:(Math.pow(r,g)-1)/(Math.pow(r,p)-1)}var aa=va;class Ll{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expectected at least one argument.");let d=null;const p=l.expectedType;p&&p.kind!=="value"&&(d=p);const g=[];for(const b of r.slice(1)){const T=l.parse(b,1+g.length,d,void 0,{typeAnnotation:"omit"});if(!T)return null;d=d||T.type,g.push(T)}const y=p&&g.some(b=>Lo(p,b.type));return new Ll(y?gr:d,g)}evaluate(r){let l,d=null,p=0;for(const g of this.args){if(p++,d=g.evaluate(r),d&&d instanceof ga&&!d.available&&(l||(l=d),d=null,p===this.args.length))return l;if(d!==null)break}return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(l=>{r.push(l.serialize())}),r}}var wc=Ll;class Ec{constructor(r,l){this.type=l.type,this.bindings=[].concat(r),this.result=l}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const l of this.bindings)r(l[1]);r(this.result)}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let g=1;g<r.length-1;g+=2){const y=r[g];if(typeof y!="string")return l.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return l.error("Variable names must contain only alphanumeric characters or '_'.",g);const b=l.parse(r[g+1],g+1);if(!b)return null;d.push([y,b])}const p=l.parse(r[r.length-1],r.length-1,l.expectedType,d);return p?new Ec(d,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[l,d]of this.bindings)r.push(l,d.serialize());return r.push(this.result.serialize()),r}}var Hp=Ec;class Sc{constructor(r,l,d){this.type=r,this.index=l,this.input=d}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,dn),p=l.parse(r[2],2,ma(l.expectedType||gr));return d&&p?new Sc(p.type.itemType,d,p):null}evaluate(r){const l=this.index.evaluate(r),d=this.input.evaluate(r);if(l<0)throw new Zi(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new Zi(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new Zi(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Ch=Sc;class fu{constructor(r,l){this.type=dr,this.needle=r,this.haystack=l}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,gr),p=l.parse(r[2],2,gr);return d&&p?Ml(d.type,[dr,vr,dn,pc,gr])?new fu(d,p):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${ui(d.type)} instead`):null}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(d==null)return!1;if(!au(l,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${ui(Ei(l))} instead.`);if(!au(d,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${ui(Ei(d))} instead.`);return d.indexOf(l)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var od=fu;class zl{constructor(r,l,d){this.type=dn,this.needle=r,this.haystack=l,this.fromIndex=d}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,gr),p=l.parse(r[2],2,gr);if(!d||!p)return null;if(!Ml(d.type,[dr,vr,dn,pc,gr]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${ui(d.type)} instead`);if(r.length===4){const g=l.parse(r[3],3,dn);return g?new zl(d,p,g):null}return new zl(d,p)}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!au(l,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${ui(Ei(l))} instead.`);if(!au(d,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${ui(Ei(d))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(r);return d.indexOf(l,p)}return d.indexOf(l)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var kh=zl;class Ie{constructor(r,l,d,p,g,y){this.inputType=r,this.type=l,this.input=d,this.cases=p,this.outputs=g,this.otherwise=y}static parse(r,l){if(r.length<5)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return l.error("Expected an even number of arguments.");let d,p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);const g={},y=[];for(let C=2;C<r.length-1;C+=2){let O=r[C];const z=r[C+1];Array.isArray(O)||(O=[O]);const B=l.concat(C);if(O.length===0)return B.error("Expected at least one branch label.");for(const X of O){if(typeof X!="number"&&typeof X!="string")return B.error("Branch labels must be numbers or strings.");if(typeof X=="number"&&Math.abs(X)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof X=="number"&&Math.floor(X)!==X)return B.error("Numeric branch labels must be integer values.");if(d){if(B.checkSubtype(d,Ei(X)))return null}else d=Ei(X);if(g[String(X)]!==void 0)return B.error("Branch labels must be unique.");g[String(X)]=y.length}const G=l.parse(z,C,p);if(!G)return null;p=p||G.type,y.push(G)}const b=l.parse(r[1],1,gr);if(!b)return null;const T=l.parse(r[r.length-1],r.length-1,p);return T?b.type.kind!=="value"&&l.concat(1).checkSubtype(d,b.type)?null:new Ie(d,p,b,g,y,T):null}evaluate(r){const l=this.input.evaluate(r);return(Ei(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),d=[],p={};for(const y of l){const b=p[this.cases[y]];b===void 0?(p[this.cases[y]]=d.length,d.push([this.cases[y],[y]])):d[b][1].push(y)}const g=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,b]of d)r.push(b.length===1?g(b[0]):b.map(g)),r.push(this.outputs[y].serialize());return r.push(this.otherwise.serialize()),r}}var Ye=Ie;class ft{constructor(r,l,d){this.type=r,this.branches=l,this.otherwise=d}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const p=[];for(let y=1;y<r.length-1;y+=2){const b=l.parse(r[y],y,dr);if(!b)return null;const T=l.parse(r[y+1],y+1,d);if(!T)return null;p.push([b,T]),d=d||T.type}const g=l.parse(r[r.length-1],r.length-1,d);return g?new ft(d,p,g):null}evaluate(r){for(const[l,d]of this.branches)if(l.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[l,d]of this.branches)r(l),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(l=>{r.push(l.serialize())}),r}}var xt=ft;class Ot{constructor(r,l,d,p){this.type=r,this.input=l,this.beginIndex=d,this.endIndex=p}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,gr),p=l.parse(r[2],2,dn);if(!d||!p)return null;if(!Ml(d.type,[ma(gr),vr,gr]))return l.error(`Expected first argument to be of type array or string, but found ${ui(d.type)} instead`);if(r.length===4){const g=l.parse(r[3],3,dn);return g?new Ot(d.type,d,p,g):null}return new Ot(d.type,d,p)}evaluate(r){const l=this.input.evaluate(r),d=this.beginIndex.evaluate(r);if(!au(l,["string","array"]))throw new Zi(`Expected first argument to be of type array or string, but found ${ui(Ei(l))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(r);return l.slice(d,p)}return l.slice(d)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var mn=Ot;function Pn(s,r){return s==="=="||s==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Wn(s,r,l,d){return d.compare(r,l)===0}function Tn(s,r,l){const d=s!=="=="&&s!=="!=";return class yO{constructor(g,y,b){this.type=dr,this.lhs=g,this.rhs=y,this.collator=b,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");const b=g[0];let T=y.parse(g[1],1,gr);if(!T)return null;if(!Pn(b,T.type))return y.concat(1).error(`"${b}" comparisons are not supported for type '${ui(T.type)}'.`);let C=y.parse(g[2],2,gr);if(!C)return null;if(!Pn(b,C.type))return y.concat(2).error(`"${b}" comparisons are not supported for type '${ui(C.type)}'.`);if(T.type.kind!==C.type.kind&&T.type.kind!=="value"&&C.type.kind!=="value")return y.error(`Cannot compare types '${ui(T.type)}' and '${ui(C.type)}'.`);d&&(T.type.kind==="value"&&C.type.kind!=="value"?T=new es(C.type,[T]):T.type.kind!=="value"&&C.type.kind==="value"&&(C=new es(T.type,[C])));let O=null;if(g.length===4){if(T.type.kind!=="string"&&C.type.kind!=="string"&&T.type.kind!=="value"&&C.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(O=y.parse(g[3],3,wi),!O)return null}return new yO(T,C,O)}evaluate(g){const y=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(d&&this.hasUntypedArgument){const T=Ei(y),C=Ei(b);if(T.kind!==C.kind||T.kind!=="string"&&T.kind!=="number")throw new Zi(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${T.kind}, ${C.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const T=Ei(y),C=Ei(b);if(T.kind!=="string"||C.kind!=="string")return r(g,y,b)}return this.collator?l(g,y,b,this.collator.evaluate(g)):r(g,y,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[s];return this.eachChild(y=>{g.push(y.serialize())}),g}}}const Pr=Tn("==",function(s,r,l){return r===l},Wn),or=Tn("!=",function(s,r,l){return r!==l},function(s,r,l,d){return!Wn(0,r,l,d)}),mr=Tn("<",function(s,r,l){return r<l},function(s,r,l,d){return d.compare(r,l)<0}),Ir=Tn(">",function(s,r,l){return r>l},function(s,r,l,d){return d.compare(r,l)>0}),Jn=Tn("<=",function(s,r,l){return r<=l},function(s,r,l,d){return d.compare(r,l)<=0}),ri=Tn(">=",function(s,r,l){return r>=l},function(s,r,l,d){return d.compare(r,l)>=0});class vo{constructor(r,l,d,p,g,y){this.type=vr,this.number=r,this.locale=l,this.currency=d,this.unit=p,this.minFractionDigits=g,this.maxFractionDigits=y}static parse(r,l){if(r.length!==3)return l.error("Expected two arguments.");const d=l.parse(r[1],1,dn);if(!d)return null;const p=r[2];if(typeof p!="object"||Array.isArray(p))return l.error("NumberFormat options argument must be an object.");let g=null;if(p.locale&&(g=l.parse(p.locale,1,vr),!g))return null;let y=null;if(p.currency&&(y=l.parse(p.currency,1,vr),!y))return null;let b=null;if(p.unit&&(b=l.parse(p.unit,1,vr),!b))return null;let T=null;if(p["min-fraction-digits"]&&(T=l.parse(p["min-fraction-digits"],1,dn),!T))return null;let C=null;return p["max-fraction-digits"]&&(C=l.parse(p["max-fraction-digits"],1,dn),!C)?null:new vo(d,g,y,b,T,C)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class Li{constructor(r){this.type=dn,this.input=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=l.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${ui(d.type)} instead.`):new Li(d):null}evaluate(r){const l=this.input.evaluate(r);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Zi(`Expected value to be of type string or array, but found ${ui(Ei(l))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(l=>{r.push(l.serialize())}),r}}const sa={"==":Pr,"!=":or,">":Ir,"<":mr,">=":ri,"<=":Jn,array:es,at:Ch,boolean:es,case:xt,coalesce:wc,collator:hu,format:ws,image:_c,in:od,"index-of":kh,interpolate:aa,"interpolate-hcl":aa,"interpolate-lab":aa,length:Li,let:Hp,literal:Ys,match:Ye,number:es,"number-format":vo,object:es,slice:mn,step:_a,string:es,"to-boolean":yc,"to-color":yc,"to-number":yc,"to-string":yc,var:kr,within:_r};function Ha(s,[r,l,d,p]){r=r.evaluate(s),l=l.evaluate(s),d=d.evaluate(s);const g=p?p.evaluate(s):1,y=Vp(r,l,d,g);if(y)throw new Zi(y);return new Mi(r/255*g,l/255*g,d/255*g,g)}function Zo(s,r){return s in r}function so(s,r){const l=r[s];return l===void 0?null:l}function ns(s){return{type:s}}Ss.register(sa,{error:[{kind:"error"},[vr],(s,[r])=>{throw new Zi(r.evaluate(s))}],typeof:[vr,[gr],(s,[r])=>ui(Ei(r.evaluate(s)))],"to-rgba":[ma(dn,4),[Vo],(s,[r])=>r.evaluate(s).toArray()],rgb:[Vo,[dn,dn,dn],Ha],rgba:[Vo,[dn,dn,dn,dn],Ha],has:{type:dr,overloads:[[[vr],(s,[r])=>Zo(r.evaluate(s),s.properties())],[[vr,$a],(s,[r,l])=>Zo(r.evaluate(s),l.evaluate(s))]]},get:{type:gr,overloads:[[[vr],(s,[r])=>so(r.evaluate(s),s.properties())],[[vr,$a],(s,[r,l])=>so(r.evaluate(s),l.evaluate(s))]]},"feature-state":[gr,[vr],(s,[r])=>so(r.evaluate(s),s.featureState||{})],properties:[$a,[],s=>s.properties()],"geometry-type":[vr,[],s=>s.geometryType()],id:[gr,[],s=>s.id()],zoom:[dn,[],s=>s.globals.zoom],pitch:[dn,[],s=>s.globals.pitch||0],"distance-from-center":[dn,[],s=>s.distanceFromCenter()],"heatmap-density":[dn,[],s=>s.globals.heatmapDensity||0],"line-progress":[dn,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[dn,[],s=>s.globals.skyRadialProgress||0],accumulated:[gr,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[dn,ns(dn),(s,r)=>{let l=0;for(const d of r)l+=d.evaluate(s);return l}],"*":[dn,ns(dn),(s,r)=>{let l=1;for(const d of r)l*=d.evaluate(s);return l}],"-":{type:dn,overloads:[[[dn,dn],(s,[r,l])=>r.evaluate(s)-l.evaluate(s)],[[dn],(s,[r])=>-r.evaluate(s)]]},"/":[dn,[dn,dn],(s,[r,l])=>r.evaluate(s)/l.evaluate(s)],"%":[dn,[dn,dn],(s,[r,l])=>r.evaluate(s)%l.evaluate(s)],ln2:[dn,[],()=>Math.LN2],pi:[dn,[],()=>Math.PI],e:[dn,[],()=>Math.E],"^":[dn,[dn,dn],(s,[r,l])=>Math.pow(r.evaluate(s),l.evaluate(s))],sqrt:[dn,[dn],(s,[r])=>Math.sqrt(r.evaluate(s))],log10:[dn,[dn],(s,[r])=>Math.log(r.evaluate(s))/Math.LN10],ln:[dn,[dn],(s,[r])=>Math.log(r.evaluate(s))],log2:[dn,[dn],(s,[r])=>Math.log(r.evaluate(s))/Math.LN2],sin:[dn,[dn],(s,[r])=>Math.sin(r.evaluate(s))],cos:[dn,[dn],(s,[r])=>Math.cos(r.evaluate(s))],tan:[dn,[dn],(s,[r])=>Math.tan(r.evaluate(s))],asin:[dn,[dn],(s,[r])=>Math.asin(r.evaluate(s))],acos:[dn,[dn],(s,[r])=>Math.acos(r.evaluate(s))],atan:[dn,[dn],(s,[r])=>Math.atan(r.evaluate(s))],min:[dn,ns(dn),(s,r)=>Math.min(...r.map(l=>l.evaluate(s)))],max:[dn,ns(dn),(s,r)=>Math.max(...r.map(l=>l.evaluate(s)))],abs:[dn,[dn],(s,[r])=>Math.abs(r.evaluate(s))],round:[dn,[dn],(s,[r])=>{const l=r.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[dn,[dn],(s,[r])=>Math.floor(r.evaluate(s))],ceil:[dn,[dn],(s,[r])=>Math.ceil(r.evaluate(s))],"filter-==":[dr,[vr,gr],(s,[r,l])=>s.properties()[r.value]===l.value],"filter-id-==":[dr,[gr],(s,[r])=>s.id()===r.value],"filter-type-==":[dr,[vr],(s,[r])=>s.geometryType()===r.value],"filter-<":[dr,[vr,gr],(s,[r,l])=>{const d=s.properties()[r.value],p=l.value;return typeof d==typeof p&&d<p}],"filter-id-<":[dr,[gr],(s,[r])=>{const l=s.id(),d=r.value;return typeof l==typeof d&&l<d}],"filter->":[dr,[vr,gr],(s,[r,l])=>{const d=s.properties()[r.value],p=l.value;return typeof d==typeof p&&d>p}],"filter-id->":[dr,[gr],(s,[r])=>{const l=s.id(),d=r.value;return typeof l==typeof d&&l>d}],"filter-<=":[dr,[vr,gr],(s,[r,l])=>{const d=s.properties()[r.value],p=l.value;return typeof d==typeof p&&d<=p}],"filter-id-<=":[dr,[gr],(s,[r])=>{const l=s.id(),d=r.value;return typeof l==typeof d&&l<=d}],"filter->=":[dr,[vr,gr],(s,[r,l])=>{const d=s.properties()[r.value],p=l.value;return typeof d==typeof p&&d>=p}],"filter-id->=":[dr,[gr],(s,[r])=>{const l=s.id(),d=r.value;return typeof l==typeof d&&l>=d}],"filter-has":[dr,[gr],(s,[r])=>r.value in s.properties()],"filter-has-id":[dr,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[dr,[ma(vr)],(s,[r])=>r.value.indexOf(s.geometryType())>=0],"filter-id-in":[dr,[ma(gr)],(s,[r])=>r.value.indexOf(s.id())>=0],"filter-in-small":[dr,[vr,ma(gr)],(s,[r,l])=>l.value.indexOf(s.properties()[r.value])>=0],"filter-in-large":[dr,[vr,ma(gr)],(s,[r,l])=>function(d,p,g,y){for(;g<=y;){const b=g+y>>1;if(p[b]===d)return!0;p[b]>d?y=b-1:g=b+1}return!1}(s.properties()[r.value],l.value,0,l.value.length-1)],all:{type:dr,overloads:[[[dr,dr],(s,[r,l])=>r.evaluate(s)&&l.evaluate(s)],[ns(dr),(s,r)=>{for(const l of r)if(!l.evaluate(s))return!1;return!0}]]},any:{type:dr,overloads:[[[dr,dr],(s,[r,l])=>r.evaluate(s)||l.evaluate(s)],[ns(dr),(s,r)=>{for(const l of r)if(l.evaluate(s))return!0;return!1}]]},"!":[dr,[dr],(s,[r])=>!r.evaluate(s)],"is-supported-script":[dr,[vr],(s,[r])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(r.evaluate(s))}],upcase:[vr,[vr],(s,[r])=>r.evaluate(s).toUpperCase()],downcase:[vr,[vr],(s,[r])=>r.evaluate(s).toLowerCase()],concat:[vr,ns(gr),(s,r)=>r.map(l=>uu(l.evaluate(s))).join("")],"resolved-locale":[vr,[wi],(s,[r])=>r.evaluate(s).resolvedLocale()]});var Ph=sa;function V_(s){return{result:"success",value:s}}function mu(s){return{result:"error",value:s}}function ad(s){return s["property-type"]==="data-driven"}function qp(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Gp(s){return!!s.expression&&s.expression.interpolated}function Rr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Ih(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function W_(s){return s}function Zp(s,r){const l=r.type==="color",d=s.stops&&typeof s.stops[0][0]=="object",p=d||!(d||s.property!==void 0),g=s.type||(Gp(r)?"exponential":"interval");if(l&&((s=fa({},s)).stops&&(s.stops=s.stops.map(C=>[C[0],Mi.parse(C[1])])),s.default=Mi.parse(s.default?s.default:r.default)),s.colorSpace&&s.colorSpace!=="rgb"&&!pu[s.colorSpace])throw new Error(`Unknown color space: ${s.colorSpace}`);let y,b,T;if(g==="exponential")y=Fl;else if(g==="interval")y=Xp;else if(g==="categorical"){y=H_,b=Object.create(null);for(const C of s.stops)b[C[0]]=C[1];T=typeof s.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);y=q_}if(d){const C={},O=[];for(let G=0;G<s.stops.length;G++){const X=s.stops[G],te=X[0].zoom;C[te]===void 0&&(C[te]={zoom:te,type:s.type,property:s.property,default:s.default,stops:[]},O.push(te)),C[te].stops.push([X[0].value,X[1]])}const z=[];for(const G of O)z.push([C[G].zoom,Zp(C[G],r)]);const B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:aa.interpolationFactor.bind(void 0,B),zoomStops:z.map(G=>G[0]),evaluate:({zoom:G},X)=>Fl({stops:z,base:s.base},r,G).evaluate(G,X)}}if(p){const C=g==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:aa.interpolationFactor.bind(void 0,C),zoomStops:s.stops.map(O=>O[0]),evaluate:({zoom:O})=>y(s,r,O,b,T)}}return{kind:"source",evaluate(C,O){const z=O&&O.properties?O.properties[s.property]:void 0;return z===void 0?sd(s.default,r.default):y(s,r,z,b,T)}}}function sd(s,r,l){return s!==void 0?s:r!==void 0?r:l!==void 0?l:void 0}function H_(s,r,l,d,p){return sd(typeof l===p?d[l]:void 0,s.default,r.default)}function Xp(s,r,l){if(Rr(l)!=="number")return sd(s.default,r.default);const d=s.stops.length;if(d===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[d-1][0])return s.stops[d-1][1];const p=Js(s.stops.map(g=>g[0]),l);return s.stops[p][1]}function Fl(s,r,l){const d=s.base!==void 0?s.base:1;if(Rr(l)!=="number")return sd(s.default,r.default);const p=s.stops.length;if(p===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[p-1][0])return s.stops[p-1][1];const g=Js(s.stops.map(O=>O[0]),l),y=function(O,z,B,G){const X=G-B,te=O-B;return X===0?0:z===1?te/X:(Math.pow(z,te)-1)/(Math.pow(z,X)-1)}(l,d,s.stops[g][0],s.stops[g+1][0]),b=s.stops[g][1],T=s.stops[g+1][1];let C=qo[r.type]||W_;if(s.colorSpace&&s.colorSpace!=="rgb"){const O=pu[s.colorSpace];C=(z,B)=>O.reverse(O.interpolate(O.forward(z),O.forward(B),y))}return typeof b.evaluate=="function"?{evaluate(...O){const z=b.evaluate.apply(void 0,O),B=T.evaluate.apply(void 0,O);if(z!==void 0&&B!==void 0)return C(z,B,y)}}:C(b,T,y)}function q_(s,r,l){return r.type==="color"?l=Mi.parse(l):r.type==="formatted"?l=Wo.fromString(l.toString()):r.type==="resolvedImage"?l=ga.fromString(l.toString()):Rr(l)===r.type||r.type==="enum"&&r.values[l]||(l=void 0),sd(l,s.default,r.default)}class Kp{constructor(r,l){this.expression=r,this._warningHistory={},this._evaluator=new rd,this._defaultValue=l?function(d){return d.type==="color"&&(Ih(d.default)||Array.isArray(d.default))?new Mi(0,0,0,0):d.type==="color"?Mi.parse(d.default)||null:d.default===void 0?null:d.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(r,l,d,p,g,y,b,T){return this._evaluator.globals=r,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=p||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=T||null,this.expression.evaluate(this._evaluator)}evaluate(r,l,d,p,g,y,b,T){this._evaluator.globals=r,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=T||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Zi(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function ld(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Ph}function cd(s,r){const l=new Mr(Ph,[],r?function(p){const g={color:Vo,string:vr,number:dn,enum:vr,boolean:dr,formatted:fc,resolvedImage:Ua};return p.type==="array"?ma(g[p.value]||gr,p.length):g[p.type]}(r):void 0),d=l.parse(s,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?V_(new Kp(d,r)):mu(l.errors)}class ym{constructor(r,l){this.kind=r,this._styleExpression=l,this.isStateDependent=r!=="constant"&&!ni(l.expression)}evaluateWithoutErrorHandling(r,l,d,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,p,g,y)}evaluate(r,l,d,p,g,y){return this._styleExpression.evaluate(r,l,d,p,g,y)}}class Ah{constructor(r,l,d,p){this.kind=r,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=r!=="camera"&&!ni(l.expression),this.interpolationType=p}evaluateWithoutErrorHandling(r,l,d,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,p,g,y)}evaluate(r,l,d,p,g,y){return this._styleExpression.evaluate(r,l,d,p,g,y)}interpolationFactor(r,l,d){return this.interpolationType?aa.interpolationFactor(this.interpolationType,r,l,d):0}}function Mh(s,r){if((s=cd(s,r)).result==="error")return s;const l=s.value.expression,d=Di(l);if(!d&&!ad(r))return mu([new Ro("","data expressions not supported")]);const p=Eo(l,["zoom","pitch","distance-from-center"]);if(!p&&!qp(r))return mu([new Ro("","zoom expressions not supported")]);const g=Jp(l);return g||p?g instanceof Ro?mu([g]):g instanceof aa&&!Gp(r)?mu([new Ro("",'"interpolate" expressions cannot be used with this property')]):V_(g?new Ah(d?"camera":"composite",s.value,g.labels,g instanceof aa?g.interpolation:void 0):new ym(d?"constant":"source",s.value)):mu([new Ro("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Yp{constructor(r,l){this._parameters=r,this._specification=l,fa(this,Zp(this._parameters,this._specification))}static deserialize(r){return new Yp(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Jp(s){let r=null;if(s instanceof Hp)r=Jp(s.result);else if(s instanceof wc){for(const l of s.args)if(r=Jp(l),r)break}else(s instanceof _a||s instanceof aa)&&s.input instanceof Ss&&s.input.name==="zoom"&&(r=s);return r instanceof Ro||s.eachChild(l=>{const d=Jp(l);d instanceof Ro?r=d:!r&&d?r=new Ro("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new Ro("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}class _n{constructor(r,l,d,p){this.message=(r?`${r}: `:"")+d,p&&(this.identifier=p),l!=null&&l.__line__&&(this.line=l.__line__)}}function Is(s){const r=s.key,l=s.value,d=s.valueSpec||{},p=s.objectElementValidators||{},g=s.style,y=s.styleSpec;let b=[];const T=Rr(l);if(T!=="object")return[new _n(r,l,`object expected, ${T} found`)];for(const C in l){const O=C.split(".")[0];let z;p[O]?z=p[O]:d[O]?z=Xo:p["*"]?z=p["*"]:d["*"]&&(z=Xo),z?b=b.concat(z({key:(r&&`${r}.`)+C,value:l[C],valueSpec:d[O]||d["*"],style:g,styleSpec:y,object:l,objectKey:C},l)):b.push(new _n(r,l[C],`unknown property "${C}"`))}for(const C in d)p[C]||d[C].required&&d[C].default===void 0&&l[C]===void 0&&b.push(new _n(r,l,`missing required property "${C}"`));return b}function G_(s){const r=s.value,l=s.valueSpec,d=s.style,p=s.styleSpec,g=s.key,y=s.arrayElementValidator||Xo;if(Rr(r)!=="array")return[new _n(g,r,`array expected, ${Rr(r)} found`)];if(l.length&&r.length!==l.length)return[new _n(g,r,`array length ${l.length} expected, length ${r.length} found`)];if(l["min-length"]&&r.length<l["min-length"])return[new _n(g,r,`array length at least ${l["min-length"]} expected, length ${r.length} found`)];let b={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};p.$version<7&&(b.function=l.function),Rr(l.value)==="object"&&(b=l.value);let T=[];for(let C=0;C<r.length;C++)T=T.concat(y({array:r,arrayIndex:C,value:r[C],valueSpec:b,style:d,styleSpec:p,key:`${g}[${C}]`}));return T}function Dh(s){const r=s.key,l=s.value,d=s.valueSpec;let p=Rr(l);if(p==="number"&&l!=l&&(p="NaN"),p!=="number")return[new _n(r,l,`number expected, ${p} found`)];if("minimum"in d){let g=d.minimum;if(Rr(d.minimum)==="array"&&(g=d.minimum[s.arrayIndex]),l<g)return[new _n(r,l,`${l} is less than the minimum value ${g}`)]}if("maximum"in d){let g=d.maximum;if(Rr(d.maximum)==="array"&&(g=d.maximum[s.arrayIndex]),l>g)return[new _n(r,l,`${l} is greater than the maximum value ${g}`)]}return[]}function Oh(s){const r=s.valueSpec,l=ti(s.value.type);let d,p,g,y={};const b=l!=="categorical"&&s.value.property===void 0,T=!b,C=Rr(s.value.stops)==="array"&&Rr(s.value.stops[0])==="array"&&Rr(s.value.stops[0][0])==="object",O=Is({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(G){if(l==="identity")return[new _n(G.key,G.value,'identity function may not have a "stops" property')];let X=[];const te=G.value;return X=X.concat(G_({key:G.key,value:te,valueSpec:G.valueSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:z})),Rr(te)==="array"&&te.length===0&&X.push(new _n(G.key,te,"array must have at least one stop")),X},default:function(G){return Xo({key:G.key,value:G.value,valueSpec:r,style:G.style,styleSpec:G.styleSpec})}}});return l==="identity"&&b&&O.push(new _n(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||O.push(new _n(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!Gp(s.valueSpec)&&O.push(new _n(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(T&&!ad(s.valueSpec)?O.push(new _n(s.key,s.value,"property functions not supported")):b&&!qp(s.valueSpec)&&O.push(new _n(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!C||s.value.property!==void 0||O.push(new _n(s.key,s.value,'"property" property is required')),O;function z(G){let X=[];const te=G.value,ce=G.key;if(Rr(te)!=="array")return[new _n(ce,te,`array expected, ${Rr(te)} found`)];if(te.length!==2)return[new _n(ce,te,`array length 2 expected, length ${te.length} found`)];if(C){if(Rr(te[0])!=="object")return[new _n(ce,te,`object expected, ${Rr(te[0])} found`)];if(te[0].zoom===void 0)return[new _n(ce,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new _n(ce,te,"object stop key must have value")];const xe=ti(te[0].zoom);if(typeof xe!="number")return[new _n(ce,te[0].zoom,"stop zoom values must be numbers")];if(g&&g>xe)return[new _n(ce,te[0].zoom,"stop zoom values must appear in ascending order")];xe!==g&&(g=xe,p=void 0,y={}),X=X.concat(Is({key:`${ce}[0]`,value:te[0],valueSpec:{zoom:{}},style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:Dh,value:B}}))}else X=X.concat(B({key:`${ce}[0]`,value:te[0],valueSpec:{},style:G.style,styleSpec:G.styleSpec},te));return ld(Gi(te[1]))?X.concat([new _n(`${ce}[1]`,te[1],"expressions are not allowed in function stops.")]):X.concat(Xo({key:`${ce}[1]`,value:te[1],valueSpec:r,style:G.style,styleSpec:G.styleSpec}))}function B(G,X){const te=Rr(G.value),ce=ti(G.value),xe=G.value!==null?G.value:X;if(d){if(te!==d)return[new _n(G.key,xe,`${te} stop domain type must match previous stop domain type ${d}`)]}else d=te;if(te!=="number"&&te!=="string"&&te!=="boolean"&&typeof ce!="number"&&typeof ce!="string"&&typeof ce!="boolean")return[new _n(G.key,xe,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&l!=="categorical"){let Me=`number expected, ${te} found`;return ad(r)&&l===void 0&&(Me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _n(G.key,xe,Me)]}return l!=="categorical"||te!=="number"||typeof ce=="number"&&isFinite(ce)&&Math.floor(ce)===ce?l!=="categorical"&&te==="number"&&typeof ce=="number"&&typeof p=="number"&&p!==void 0&&ce<p?[new _n(G.key,xe,"stop domain values must appear in ascending order")]:(p=ce,l==="categorical"&&ce in y?[new _n(G.key,xe,"stop domain values must be unique")]:(y[ce]=!0,[])):[new _n(G.key,xe,`integer expected, found ${String(ce)}`)]}}function So(s){const r=(s.expressionContext==="property"?Mh:cd)(Gi(s.value),s.valueSpec);if(r.result==="error")return r.value.map(d=>new _n(`${s.key}${d.key}`,s.value,d.message));const l=r.value.expression||r.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new _n(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!ni(l))return[new _n(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter")return Rh(l,s);if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Eo(l,["zoom","feature-state"]))return[new _n(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Di(l))return[new _n(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Rh(s,r){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(r.valueSpec&&r.valueSpec.expression)for(const p of r.valueSpec.expression.parameters)l.delete(p);if(l.size===0)return[];const d=[];return s instanceof Ss&&l.has(s.name)?[new _n(r.key,r.value,`["${s.name}"] expression is not supported in a filter for a ${r.object.type} layer with id: ${r.object.id}`)]:(s.eachChild(p=>{d.push(...Rh(p,r))}),d)}function Qp(s){const r=s.key,l=s.value,d=s.valueSpec,p=[];return Array.isArray(d.values)?d.values.indexOf(ti(l))===-1&&p.push(new _n(r,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(ti(l))===-1&&p.push(new _n(r,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),p}function vm(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const r of s.slice(1))if(!vm(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function ef(s,r="fill"){if(s==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};vm(s)||(s=dd(s));const l=s;let d=!0;try{d=function(C){if(!ud(C))return C;let O=Gi(C);return tf(O),O=Z_(O),O}(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(l,null,2)}
        `)}const p=vt[`filter_${r}`],g=cd(d,p);let y=null;if(g.result==="error")throw new Error(g.value.map(C=>`${C.key}: ${C.message}`).join(", "));y=(C,O,z)=>g.value.evaluate(C,O,{},z);let b=null,T=null;if(d!==l){const C=cd(l,p);if(C.result==="error")throw new Error(C.value.map(O=>`${O.key}: ${O.message}`).join(", "));b=(O,z,B,G,X)=>C.value.evaluate(O,z,{},B,void 0,void 0,G,X),T=!Di(C.value.expression)}return{filter:y,dynamicFilter:b||void 0,needGeometry:X_(d),needFeature:!!T}}function Z_(s){if(!Array.isArray(s))return s;const r=function(l){if(xm.has(l[0])){for(let d=1;d<l.length;d++)if(ud(l[d]))return!0}return l}(s);return r===!0?r:r.map(l=>Z_(l))}function tf(s){let r=!1;const l=[];if(s[0]==="case"){for(let d=1;d<s.length-1;d+=2)r=r||ud(s[d]),l.push(s[d+1]);l.push(s[s.length-1])}else if(s[0]==="match"){r=r||ud(s[1]);for(let d=2;d<s.length-1;d+=2)l.push(s[d+1]);l.push(s[s.length-1])}else if(s[0]==="step"){r=r||ud(s[1]);for(let d=1;d<s.length-1;d+=2)l.push(s[d+1])}r&&(s.length=0,s.push("any",...l));for(let d=1;d<s.length;d++)tf(s[d])}function ud(s){if(!Array.isArray(s))return!1;if((r=s[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let l=1;l<s.length;l++)if(ud(s[l]))return!0;return!1}const xm=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function dw(s,r){return s<r?-1:s>r?1:0}function X_(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let r=1;r<s.length;r++)if(X_(s[r]))return!0;return!1}function dd(s){if(!s)return!0;const r=s[0];return s.length<=1?r!=="any":r==="=="?bm(s[1],s[2],"=="):r==="!="?nf(bm(s[1],s[2],"==")):r==="<"||r===">"||r==="<="||r===">="?bm(s[1],s[2],r):r==="any"?(l=s.slice(1),["any"].concat(l.map(dd))):r==="all"?["all"].concat(s.slice(1).map(dd)):r==="none"?["all"].concat(s.slice(1).map(dd).map(nf)):r==="in"?wm(s[1],s.slice(2)):r==="!in"?nf(wm(s[1],s.slice(2))):r==="has"?Em(s[1]):r==="!has"?nf(Em(s[1])):r!=="within"||s;var l}function bm(s,r,l){switch(s){case"$type":return[`filter-type-${l}`,r];case"$id":return[`filter-id-${l}`,r];default:return[`filter-${l}`,s,r]}}function wm(s,r){if(r.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(l=>typeof l!=typeof r[0])?["filter-in-large",s,["literal",r.sort(dw)]]:["filter-in-small",s,["literal",r]]}}function Em(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function nf(s){return["!",s]}function Lh(s){return vm(Gi(s.value))?So(fa({},s,{expressionContext:"filter",valueSpec:s.styleSpec[`filter_${s.layerType||"fill"}`]})):zh(s)}function zh(s){const r=s.value,l=s.key;if(Rr(r)!=="array")return[new _n(l,r,`array expected, ${Rr(r)} found`)];const d=s.styleSpec;let p,g=[];if(r.length<1)return[new _n(l,r,"filter array must have at least 1 element")];switch(g=g.concat(Qp({key:`${l}[0]`,value:r[0],valueSpec:d.filter_operator,style:s.style,styleSpec:s.styleSpec})),ti(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&ti(r[1])==="$type"&&g.push(new _n(l,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&g.push(new _n(l,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(p=Rr(r[1]),p!=="string"&&g.push(new _n(`${l}[1]`,r[1],`string expected, ${p} found`)));for(let y=2;y<r.length;y++)p=Rr(r[y]),ti(r[1])==="$type"?g=g.concat(Qp({key:`${l}[${y}]`,value:r[y],valueSpec:d.geometry_type,style:s.style,styleSpec:s.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&g.push(new _n(`${l}[${y}]`,r[y],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let y=1;y<r.length;y++)g=g.concat(zh({key:`${l}[${y}]`,value:r[y],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":p=Rr(r[1]),r.length!==2?g.push(new _n(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="string"&&g.push(new _n(`${l}[1]`,r[1],`string expected, ${p} found`));break;case"within":p=Rr(r[1]),r.length!==2?g.push(new _n(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="object"&&g.push(new _n(`${l}[1]`,r[1],`object expected, ${p} found`))}return g}function Sm(s,r){const l=s.key,d=s.style,p=s.styleSpec,g=s.value,y=s.objectKey,b=p[`${r}_${s.layerType}`];if(!b)return[];const T=y.match(/^(.*)-transition$/);if(r==="paint"&&T&&b[T[1]]&&b[T[1]].transition)return Xo({key:l,value:g,valueSpec:p.transition,style:d,styleSpec:p});const C=s.valueSpec||b[y];if(!C)return[new _n(l,g,`unknown property "${y}"`)];let O;if(Rr(g)==="string"&&ad(C)&&!C.tokens&&(O=/^{([^}]+)}$/.exec(g))){const B=`\`{ "type": "identity", "property": ${O?JSON.stringify(O[1]):'"_"'} }\``;return[new _n(l,g,`"${y}" does not support interpolation syntax
Use an identity property function instead: ${B}.`)]}const z=[];return s.layerType==="symbol"&&(y==="text-field"&&d&&!d.glyphs&&z.push(new _n(l,g,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&Ih(Gi(g))&&ti(g.type)==="identity"&&z.push(new _n(l,g,'"text-font" does not support identity functions'))),z.concat(Xo({key:s.key,value:g,valueSpec:C,style:d,styleSpec:p,expressionContext:"property",propertyType:r,propertyKey:y}))}function K_(s){return Sm(s,"paint")}function Tm(s){return Sm(s,"layout")}function Y_(s){let r=[];const l=s.value,d=s.key,p=s.style,g=s.styleSpec;l.type||l.ref||r.push(new _n(d,l,'either "type" or "ref" is required'));let y=ti(l.type);const b=ti(l.ref);if(l.id){const T=ti(l.id);for(let C=0;C<s.arrayIndex;C++){const O=p.layers[C];ti(O.id)===T&&r.push(new _n(d,l.id,`duplicate layer id "${l.id}", previously used at line ${O.id.__line__}`))}}if("ref"in l){let T;["type","source","source-layer","filter","layout"].forEach(C=>{C in l&&r.push(new _n(d,l[C],`"${C}" is prohibited for ref layers`))}),p.layers.forEach(C=>{ti(C.id)===b&&(T=C)}),T?T.ref?r.push(new _n(d,l.ref,"ref cannot reference another ref layer")):y=ti(T.type):typeof b=="string"&&r.push(new _n(d,l.ref,`ref layer "${b}" not found`))}else if(y!=="background"&&y!=="sky")if(l.source){const T=p.sources&&p.sources[l.source],C=T&&ti(T.type);T?C==="vector"&&y==="raster"?r.push(new _n(d,l.source,`layer "${l.id}" requires a raster source`)):C==="raster"&&y!=="raster"?r.push(new _n(d,l.source,`layer "${l.id}" requires a vector source`)):C!=="vector"||l["source-layer"]?C==="raster-dem"&&y!=="hillshade"?r.push(new _n(d,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||C==="geojson"&&T.lineMetrics||r.push(new _n(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new _n(d,l,`layer "${l.id}" must specify a "source-layer"`)):r.push(new _n(d,l.source,`source "${l.source}" not found`))}else r.push(new _n(d,l,'missing required property "source"'));return r=r.concat(Is({key:d,value:l,valueSpec:g.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Xo({key:`${d}.type`,value:l.type,valueSpec:g.layer.type,style:s.style,styleSpec:s.styleSpec,object:l,objectKey:"type"}),filter:T=>Lh(fa({layerType:y},T)),layout:T=>Is({layer:l,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":C=>Tm(fa({layerType:y},C))}}),paint:T=>Is({layer:l,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":C=>K_(fa({layerType:y},C))}})}})),r}function Tc(s){const r=s.value,l=s.key,d=Rr(r);return d!=="string"?[new _n(l,r,`string expected, ${d} found`)]:[]}const J_={promoteId:function({key:s,value:r}){if(Rr(r)==="string")return Tc({key:s,value:r});{const l=[];for(const d in r)l.push(...Tc({key:`${s}.${d}`,value:r[d]}));return l}}};function Q_(s){const r=s.value,l=s.key,d=s.styleSpec,p=s.style;if(!r.type)return[new _n(l,r,'"type" is required')];const g=ti(r.type);let y;switch(g){case"vector":case"raster":case"raster-dem":return y=Is({key:l,value:r,valueSpec:d[`source_${g.replace("-","_")}`],style:s.style,styleSpec:d,objectElementValidators:J_}),y;case"geojson":if(y=Is({key:l,value:r,valueSpec:d.source_geojson,style:p,styleSpec:d,objectElementValidators:J_}),r.cluster)for(const b in r.clusterProperties){const[T,C]=r.clusterProperties[b],O=typeof T=="string"?[T,["accumulated"],["get",b]]:T;y.push(...So({key:`${l}.${b}.map`,value:C,expressionContext:"cluster-map"})),y.push(...So({key:`${l}.${b}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return y;case"video":return Is({key:l,value:r,valueSpec:d.source_video,style:p,styleSpec:d});case"image":return Is({key:l,value:r,valueSpec:d.source_image,style:p,styleSpec:d});case"canvas":return[new _n(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qp({key:`${l}.type`,value:r.type,valueSpec:{values:hw(d)},style:p,styleSpec:d})}}function hw(s){return s.source.reduce((r,l)=>{const d=s[l];return d.type.type==="enum"&&(r=r.concat(Object.keys(d.type.values))),r},[])}function ey(s){const r=s.value,l=s.styleSpec,d=l.light,p=s.style;let g=[];const y=Rr(r);if(r===void 0)return g;if(y!=="object")return g=g.concat([new _n("light",r,`object expected, ${y} found`)]),g;for(const b in r){const T=b.match(/^(.*)-transition$/);g=g.concat(T&&d[T[1]]&&d[T[1]].transition?Xo({key:b,value:r[b],valueSpec:l.transition,style:p,styleSpec:l}):d[b]?Xo({key:b,value:r[b],valueSpec:d[b],style:p,styleSpec:l}):[new _n(b,r[b],`unknown property "${b}"`)])}return g}function Cm(s){const r=s.value,l=s.key,d=s.style,p=s.styleSpec,g=p.terrain;let y=[];const b=Rr(r);if(r===void 0)return y;if(b!=="object")return y=y.concat([new _n("terrain",r,`object expected, ${b} found`)]),y;for(const T in r){const C=T.match(/^(.*)-transition$/);y=y.concat(C&&g[C[1]]&&g[C[1]].transition?Xo({key:T,value:r[T],valueSpec:p.transition,style:d,styleSpec:p}):g[T]?Xo({key:T,value:r[T],valueSpec:g[T],style:d,styleSpec:p}):[new _n(T,r[T],`unknown property "${T}"`)])}if(r.source){const T=d.sources&&d.sources[r.source],C=T&&ti(T.type);T?C!=="raster-dem"&&y.push(new _n(l,r.source,`terrain cannot be used with a source of type ${String(C)}, it only be used with a "raster-dem" source type`)):y.push(new _n(l,r.source,`source "${r.source}" not found`))}else y.push(new _n(l,r,'terrain is missing required property "source"'));return y}function ty(s){const r=s.value,l=s.style,d=s.styleSpec,p=d.fog;let g=[];const y=Rr(r);if(r===void 0)return g;if(y!=="object")return g=g.concat([new _n("fog",r,`object expected, ${y} found`)]),g;for(const b in r){const T=b.match(/^(.*)-transition$/);g=g.concat(T&&p[T[1]]&&p[T[1]].transition?Xo({key:b,value:r[b],valueSpec:d.transition,style:l,styleSpec:d}):p[b]?Xo({key:b,value:r[b],valueSpec:p[b],style:l,styleSpec:d}):[new _n(b,r[b],`unknown property "${b}"`)])}return g}const ny={"*":()=>[],array:G_,boolean:function(s){const r=s.value,l=s.key,d=Rr(r);return d!=="boolean"?[new _n(l,r,`boolean expected, ${d} found`)]:[]},number:Dh,color:function(s){const r=s.key,l=s.value,d=Rr(l);return d!=="string"?[new _n(r,l,`color expected, ${d} found`)]:Dl(l)===null?[new _n(r,l,`color expected, "${l}" found`)]:[]},enum:Qp,filter:Lh,function:Oh,layer:Y_,object:Is,source:Q_,light:ey,terrain:Cm,fog:ty,string:Tc,formatted:function(s){return Tc(s).length===0?[]:So(s)},resolvedImage:function(s){return Tc(s).length===0?[]:So(s)},projection:function(s){const r=s.value,l=s.styleSpec,d=l.projection,p=s.style;let g=[];const y=Rr(r);if(y==="object")for(const b in r)g=g.concat(Xo({key:b,value:r[b],valueSpec:d[b],style:p,styleSpec:l}));else y!=="string"&&(g=g.concat([new _n("projection",r,`object or string expected, ${y} found`)]));return g}};function Xo(s){const r=s.value,l=s.valueSpec,d=s.styleSpec;return l.expression&&Ih(ti(r))?Oh(s):l.expression&&ld(Gi(r))?So(s):l.type&&ny[l.type]?ny[l.type](s):Is(fa({},s,{valueSpec:l.type?d[l.type]:l}))}function pw(s){const r=s.value,l=s.key,d=Tc(s);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new _n(l,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new _n(l,r,'"glyphs" url must include a "{range}" token'))),d}function ry(s,r=vt){return rs(Xo({key:"",value:s,valueSpec:r.$root,styleSpec:r,style:s,objectElementValidators:{glyphs:pw,"*":()=>[]}}))}const fw=s=>rs(K_(s)),mw=s=>rs(Tm(s));function rs(s){return s.slice().sort((r,l)=>r.line&&l.line?r.line-l.line:0)}function iy(s,r){let l=!1;if(r&&r.length)for(const d of r)s.fire(new ja(new Error(d.message))),l=!0;return l}var gw=Qs,As=3;function Qs(s,r,l){var d=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var p=new Int32Array(this.arrayBuffer);s=p[0],this.d=(r=p[1])+2*(l=p[2]);for(var g=0;g<this.d*this.d;g++){var y=p[As+g],b=p[As+g+1];d.push(y===b?null:p.subarray(y,b))}var T=p[As+d.length+1];this.keys=p.subarray(p[As+d.length],T),this.bboxes=p.subarray(T),this.insert=this._insertReadonly}else{this.d=r+2*l;for(var C=0;C<this.d*this.d;C++)d.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=s,this.padding=l,this.scale=r/s,this.uid=0;var O=l/r*s;this.min=-O,this.max=s+O}Qs.prototype.insert=function(s,r,l,d,p){this._forEachCell(r,l,d,p,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(p)},Qs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Qs.prototype._insertCell=function(s,r,l,d,p,g){this.cells[p].push(g)},Qs.prototype.query=function(s,r,l,d,p){var g=this.min,y=this.max;if(s<=g&&r<=g&&y<=l&&y<=d&&!p)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(s,r,l,d,this._queryCell,b,{},p),b},Qs.prototype._queryCell=function(s,r,l,d,p,g,y,b){var T=this.cells[p];if(T!==null)for(var C=this.keys,O=this.bboxes,z=0;z<T.length;z++){var B=T[z];if(y[B]===void 0){var G=4*B;(b?b(O[G+0],O[G+1],O[G+2],O[G+3]):s<=O[G+2]&&r<=O[G+3]&&l>=O[G+0]&&d>=O[G+1])?(y[B]=!0,g.push(C[B])):y[B]=!1}}},Qs.prototype._forEachCell=function(s,r,l,d,p,g,y,b){for(var T=this._convertToCellCoord(s),C=this._convertToCellCoord(r),O=this._convertToCellCoord(l),z=this._convertToCellCoord(d),B=T;B<=O;B++)for(var G=C;G<=z;G++){var X=this.d*G+B;if((!b||b(this._convertFromCellCoord(B),this._convertFromCellCoord(G),this._convertFromCellCoord(B+1),this._convertFromCellCoord(G+1)))&&p.call(this,s,r,l,d,X,g,y,b))return}},Qs.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},Qs.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},Qs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,r=As+this.cells.length+1+1,l=0,d=0;d<this.cells.length;d++)l+=this.cells[d].length;var p=new Int32Array(r+l+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var g=r,y=0;y<s.length;y++){var b=s[y];p[As+y]=g,p.set(b,g),g+=b.length}return p[As+s.length]=g,p.set(this.keys,g),p[As+s.length+1]=g+=this.keys.length,p.set(this.bboxes,g),g+=this.bboxes.length,p.buffer};var gu=Y(gw);const rf={};function En(s,r,l={}){Object.defineProperty(s,"_classRegistryKey",{value:r,writeable:!1}),rf[r]={klass:s,omit:l.omit||[]}}En(Object,"Object"),gu.serialize=function(s,r){const l=s.toArrayBuffer();return r&&r.push(l),{buffer:l}},gu.deserialize=function(s){return new gu(s.buffer)},Object.defineProperty(gu,"name",{value:"Grid"}),En(gu,"Grid"),En(Mi,"Color"),En(Error,"Error"),En(nr,"AJAXError"),En(ga,"ResolvedImage"),En(Yp,"StylePropertyFunction"),En(Kp,"StyleExpression",{omit:["_evaluator"]}),En(Ah,"ZoomDependentExpression"),En(ym,"ZoomConstantExpression"),En(Ss,"CompoundExpression",{omit:["_evaluate"]});for(const s in Ph)rf[Ph[s]._classRegistryKey]||En(Ph[s],`Expression${s}`);function km(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Pm(s){return v.ImageBitmap&&s instanceof v.ImageBitmap}function hd(s,r){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(km(s)||Pm(s))return r&&r.push(s),s;if(ArrayBuffer.isView(s)){const l=s;return r&&r.push(l.buffer),l}if(s instanceof v.ImageData)return r&&r.push(s.data.buffer),s;if(Array.isArray(s)){const l=[];for(const d of s)l.push(hd(d,r));return l}if(typeof s=="object"){const l=s.constructor,d=l._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${d}`);const p=l.serialize?l.serialize(s,r):{};if(!l.serialize){for(const g in s)s.hasOwnProperty(g)&&(rf[d].omit.indexOf(g)>=0||(p[g]=hd(s[g],r)));s instanceof Error&&(p.message=s.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(p.$name=d),p}throw new Error("can't serialize object of type "+typeof s)}function _u(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||km(s)||Pm(s)||ArrayBuffer.isView(s)||s instanceof v.ImageData)return s;if(Array.isArray(s))return s.map(_u);if(typeof s=="object"){const r=s.$name||"Object",{klass:l}=rf[r];if(!l)throw new Error(`can't deserialize unregistered class ${r}`);if(l.deserialize)return l.deserialize(s);const d=Object.create(l.prototype);for(const p of Object.keys(s))p!=="$name"&&(d[p]=_u(s[p]));return d}throw new Error("can't deserialize object of type "+typeof s)}const fn={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Im(s){for(const r of s)if(Am(r.charCodeAt(0)))return!0;return!1}function _w(s){for(const r of s)if(!oy(r.charCodeAt(0)))return!1;return!0}function oy(s){return!(fn.Arabic(s)||fn["Arabic Supplement"](s)||fn["Arabic Extended-A"](s)||fn["Arabic Presentation Forms-A"](s)||fn["Arabic Presentation Forms-B"](s))}function Am(s){return!(s!==746&&s!==747&&(s<4352||!(fn["Bopomofo Extended"](s)||fn.Bopomofo(s)||fn["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||fn["CJK Compatibility Ideographs"](s)||fn["CJK Compatibility"](s)||fn["CJK Radicals Supplement"](s)||fn["CJK Strokes"](s)||!(!fn["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||fn["CJK Unified Ideographs Extension A"](s)||fn["CJK Unified Ideographs"](s)||fn["Enclosed CJK Letters and Months"](s)||fn["Hangul Compatibility Jamo"](s)||fn["Hangul Jamo Extended-A"](s)||fn["Hangul Jamo Extended-B"](s)||fn["Hangul Jamo"](s)||fn["Hangul Syllables"](s)||fn.Hiragana(s)||fn["Ideographic Description Characters"](s)||fn.Kanbun(s)||fn["Kangxi Radicals"](s)||fn["Katakana Phonetic Extensions"](s)||fn.Katakana(s)&&s!==12540||!(!fn["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!fn["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||fn["Unified Canadian Aboriginal Syllabics"](s)||fn["Unified Canadian Aboriginal Syllabics Extended"](s)||fn["Vertical Forms"](s)||fn["Yijing Hexagram Symbols"](s)||fn["Yi Syllables"](s)||fn["Yi Radicals"](s))))}function ay(s){return!(Am(s)||function(r){return!!(fn["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||fn["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||fn["Letterlike Symbols"](r)||fn["Number Forms"](r)||fn["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||fn["Control Pictures"](r)&&r!==9251||fn["Optical Character Recognition"](r)||fn["Enclosed Alphanumerics"](r)||fn["Geometric Shapes"](r)||fn["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||fn["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||fn["CJK Symbols and Punctuation"](r)||fn.Katakana(r)||fn["Private Use Area"](r)||fn["CJK Compatibility Forms"](r)||fn["Small Form Variants"](r)||fn["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(s))}function sy(s){return s>=1424&&s<=2303||fn["Arabic Presentation Forms-A"](s)||fn["Arabic Presentation Forms-B"](s)}function yw(s,r){return!(!r&&sy(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||fn.Khmer(s))}function vw(s){for(const r of s)if(sy(r.charCodeAt(0)))return!0;return!1}const Mm="deferred",Dm="loading",Om="loaded";let pd=null,m="unavailable",c=null;const h=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(m="error"),pd&&pd(s)};function _(){x.fire(new Ba("pluginStateChange",{pluginStatus:m,pluginURL:c}))}const x=new Al,w=function(){return m},P=function(){if(m!==Mm||!c)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");m=Dm,_(),c&&bi({url:c},s=>{s?h(s):(m=Om,_())})},A={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>m===Om||A.applyArabicShaping!=null,isLoading:()=>m===Dm,setState(s){m=s.pluginStatus,c=s.pluginURL},isParsed:()=>A.applyArabicShaping!=null&&A.processBidirectionalText!=null&&A.processStyledBidirectionalText!=null,getPluginURL:()=>c};class L{constructor(r,l){this.zoom=r,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(r){return function(l,d){for(const p of l)if(!yw(p.charCodeAt(0),d))return!1;return!0}(r,A.isLoaded())}}class V{constructor(r,l){this.property=r,this.value=l,this.expression=function(d,p){if(Ih(d))return new Yp(d,p);if(ld(d)){const g=Mh(d,p);if(g.result==="error")throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=d;return typeof d=="string"&&p.type==="color"&&(g=Mi.parse(d)),{kind:"constant",evaluate:()=>g}}}(l===void 0?r.specification.default:l,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,l,d){return this.property.possiblyEvaluate(this,r,l,d)}}class U{constructor(r){this.property=r,this.value=new V(r,void 0)}transitioned(r,l){return new le(this.property,this.value,l,wt({},r.transition,this.transition),r.now)}untransitioned(){return new le(this.property,this.value,null,{},0)}}class J{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return bn(this._values[r].value.value)}setValue(r,l){this._values.hasOwnProperty(r)||(this._values[r]=new U(this._values[r].property)),this._values[r].value=new V(this._values[r].property,l===null?void 0:bn(l))}getTransition(r){return bn(this._values[r].transition)}setTransition(r,l){this._values.hasOwnProperty(r)||(this._values[r]=new U(this._values[r].property)),this._values[r].transition=bn(l)||void 0}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d);const p=this.getTransition(l);p!==void 0&&(r[`${l}-transition`]=p)}return r}transitioned(r,l){const d=new pe(this._properties);for(const p of Object.keys(this._values))d._values[p]=this._values[p].transitioned(r,l._values[p]);return d}untransitioned(){const r=new pe(this._properties);for(const l of Object.keys(this._values))r._values[l]=this._values[l].untransitioned();return r}}class le{constructor(r,l,d,p,g){const y=p.delay||0,b=p.duration||0;g=g||0,this.property=r,this.value=l,this.begin=g+y,this.end=this.begin+b,r.specification.transition&&(p.delay||p.duration)&&(this.prior=d)}possiblyEvaluate(r,l,d){const p=r.now||0,g=this.value.possiblyEvaluate(r,l,d),y=this.prior;if(y){if(p>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(p<this.begin)return y.possiblyEvaluate(r,l,d);{const b=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(r,l,d),g,Be(b))}}return g}}class pe{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,l,d){const p=new ve(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(r,l,d);return p}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class ge{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return bn(this._values[r].value)}setValue(r,l){this._values[r]=new V(this._values[r].property,l===null?void 0:bn(l))}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d)}return r}possiblyEvaluate(r,l,d){const p=new ve(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(r,l,d);return p}}class me{constructor(r,l,d){this.property=r,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,l,d,p){return this.property.evaluate(this.value,this.parameters,r,l,d,p)}}class ve{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Q{constructor(r){this.specification=r}possiblyEvaluate(r,l){return r.expression.evaluate(l)}interpolate(r,l,d){const p=qo[this.specification.type];return p?p(r,l,d):r}}class he{constructor(r,l){this.specification=r,this.overrides=l}possiblyEvaluate(r,l,d,p){return new me(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(l,null,{},d,p)}:r.expression,l)}interpolate(r,l,d){if(r.value.kind!=="constant"||l.value.kind!=="constant")return r;if(r.value.value===void 0||l.value.value===void 0)return new me(this,{kind:"constant",value:void 0},r.parameters);const p=qo[this.specification.type];return p?new me(this,{kind:"constant",value:p(r.value.value,l.value.value,d)},r.parameters):r}evaluate(r,l,d,p,g,y){return r.kind==="constant"?r.value:r.evaluate(l,d,p,g,y)}}class Ee{constructor(r){this.specification=r}possiblyEvaluate(r,l,d,p){return!!r.expression.evaluate(l,null,{},d,p)}interpolate(){return!1}}class ke{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new L(0,{});for(const d in r){const p=r[d];p.specification.overridable&&this.overridableProperties.push(d);const g=this.defaultPropertyValues[d]=new V(p,void 0),y=this.defaultTransitionablePropertyValues[d]=new U(p);this.defaultTransitioningPropertyValues[d]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=g.possiblyEvaluate(l)}}}function Ve(s,r){return 256*(s=Le(Math.floor(s),0,255))+Le(Math.floor(r),0,255)}En(he,"DataDrivenProperty"),En(Q,"DataConstantProperty"),En(Ee,"ColorRampProperty");const He={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class We{constructor(r,l){this._structArray=r,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class nt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,l){return r._trim(),l&&(r.isTransferred=!0,l.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const l=Object.create(this.prototype);return l.arrayBuffer=r.arrayBuffer,l.length=r.length,l.capacity=r.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function et(s,r=1){let l=0,d=0;return{members:s.map(p=>{const g=He[p.type].BYTES_PER_ELEMENT,y=l=ht(l,Math.max(r,g)),b=p.components||1;return d=Math.max(d,g),l+=g*b,{name:p.name,type:p.type,components:b,offset:y}}),size:ht(l,Math.max(d,r)),alignment:r}}function ht(s,r){return Math.ceil(s/r)*r}class Vt extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const p=2*r;return this.int16[p+0]=l,this.int16[p+1]=d,r}}Vt.prototype.bytesPerElement=4,En(Vt,"StructArrayLayout2i4");class st extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d){const p=this.length;return this.resize(p+1),this.emplace(p,r,l,d)}emplace(r,l,d,p){const g=3*r;return this.int16[g+0]=l,this.int16[g+1]=d,this.int16[g+2]=p,r}}st.prototype.bytesPerElement=6,En(st,"StructArrayLayout3i6");class Pt extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,l,d,p)}emplace(r,l,d,p,g){const y=4*r;return this.int16[y+0]=l,this.int16[y+1]=d,this.int16[y+2]=p,this.int16[y+3]=g,r}}Pt.prototype.bytesPerElement=8,En(Pt,"StructArrayLayout4i8");class mt extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g,y,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,l,d,p,g,y,b)}emplace(r,l,d,p,g,y,b,T){const C=6*r,O=12*r,z=3*r;return this.int16[C+0]=l,this.int16[C+1]=d,this.uint8[O+4]=p,this.uint8[O+5]=g,this.uint8[O+6]=y,this.uint8[O+7]=b,this.float32[z+2]=T,r}}mt.prototype.bytesPerElement=12,En(mt,"StructArrayLayout2i4ub1f12");class $t extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,l,d,p)}emplace(r,l,d,p,g){const y=4*r;return this.float32[y+0]=l,this.float32[y+1]=d,this.float32[y+2]=p,this.float32[y+3]=g,r}}$t.prototype.bytesPerElement=16,En($t,"StructArrayLayout4f16");class dt extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,d,p,g)}emplace(r,l,d,p,g,y){const b=6*r,T=3*r;return this.uint16[b+0]=l,this.uint16[b+1]=d,this.uint16[b+2]=p,this.uint16[b+3]=g,this.float32[T+2]=y,r}}dt.prototype.bytesPerElement=12,En(dt,"StructArrayLayout4ui1f12");class Ct extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,l,d,p)}emplace(r,l,d,p,g){const y=4*r;return this.uint16[y+0]=l,this.uint16[y+1]=d,this.uint16[y+2]=p,this.uint16[y+3]=g,r}}Ct.prototype.bytesPerElement=8,En(Ct,"StructArrayLayout4ui8");class Ht extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,r,l,d,p,g,y)}emplace(r,l,d,p,g,y,b){const T=6*r;return this.int16[T+0]=l,this.int16[T+1]=d,this.int16[T+2]=p,this.int16[T+3]=g,this.int16[T+4]=y,this.int16[T+5]=b,r}}Ht.prototype.bytesPerElement=12,En(Ht,"StructArrayLayout6i12");class zt extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g,y,b,T,C,O,z,B){const G=this.length;return this.resize(G+1),this.emplace(G,r,l,d,p,g,y,b,T,C,O,z,B)}emplace(r,l,d,p,g,y,b,T,C,O,z,B,G){const X=12*r;return this.int16[X+0]=l,this.int16[X+1]=d,this.int16[X+2]=p,this.int16[X+3]=g,this.uint16[X+4]=y,this.uint16[X+5]=b,this.uint16[X+6]=T,this.uint16[X+7]=C,this.int16[X+8]=O,this.int16[X+9]=z,this.int16[X+10]=B,this.int16[X+11]=G,r}}zt.prototype.bytesPerElement=24,En(zt,"StructArrayLayout4i4ui4i24");class Gt extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,r,l,d,p,g,y)}emplace(r,l,d,p,g,y,b){const T=10*r,C=5*r;return this.int16[T+0]=l,this.int16[T+1]=d,this.int16[T+2]=p,this.float32[C+2]=g,this.float32[C+3]=y,this.float32[C+4]=b,r}}Gt.prototype.bytesPerElement=20,En(Gt,"StructArrayLayout3i3f20");class zn extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint32[1*r+0]=l,r}}zn.prototype.bytesPerElement=4,En(zn,"StructArrayLayout1ul4");class er extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g,y,b,T,C,O,z,B,G){const X=this.length;return this.resize(X+1),this.emplace(X,r,l,d,p,g,y,b,T,C,O,z,B,G)}emplace(r,l,d,p,g,y,b,T,C,O,z,B,G,X){const te=20*r,ce=10*r;return this.int16[te+0]=l,this.int16[te+1]=d,this.int16[te+2]=p,this.int16[te+3]=g,this.int16[te+4]=y,this.float32[ce+3]=b,this.float32[ce+4]=T,this.float32[ce+5]=C,this.float32[ce+6]=O,this.int16[te+14]=z,this.uint32[ce+8]=B,this.uint16[te+18]=G,this.uint16[te+19]=X,r}}er.prototype.bytesPerElement=40,En(er,"StructArrayLayout5i4f1i1ul2ui40");class Cn extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g,y,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,l,d,p,g,y,b)}emplace(r,l,d,p,g,y,b,T){const C=8*r;return this.int16[C+0]=l,this.int16[C+1]=d,this.int16[C+2]=p,this.int16[C+4]=g,this.int16[C+5]=y,this.int16[C+6]=b,this.int16[C+7]=T,r}}Cn.prototype.bytesPerElement=16,En(Cn,"StructArrayLayout3i2i2i16");class Gn extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,d,p,g)}emplace(r,l,d,p,g,y){const b=4*r,T=8*r;return this.float32[b+0]=l,this.float32[b+1]=d,this.float32[b+2]=p,this.int16[T+6]=g,this.int16[T+7]=y,r}}Gn.prototype.bytesPerElement=16,En(Gn,"StructArrayLayout2f1f2i16");class Tr extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,l,d,p)}emplace(r,l,d,p,g){const y=12*r,b=3*r;return this.uint8[y+0]=l,this.uint8[y+1]=d,this.float32[b+1]=p,this.float32[b+2]=g,r}}Tr.prototype.bytesPerElement=12,En(Tr,"StructArrayLayout2ub2f12");class xr extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d){const p=this.length;return this.resize(p+1),this.emplace(p,r,l,d)}emplace(r,l,d,p){const g=3*r;return this.float32[g+0]=l,this.float32[g+1]=d,this.float32[g+2]=p,r}}xr.prototype.bytesPerElement=12,En(xr,"StructArrayLayout3f12");class Mn extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d){const p=this.length;return this.resize(p+1),this.emplace(p,r,l,d)}emplace(r,l,d,p){const g=3*r;return this.uint16[g+0]=l,this.uint16[g+1]=d,this.uint16[g+2]=p,r}}Mn.prototype.bytesPerElement=6,En(Mn,"StructArrayLayout3ui6");class jr extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g,y,b,T,C,O,z,B,G,X,te,ce,xe,Me,be,Ae,Ne){const Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,r,l,d,p,g,y,b,T,C,O,z,B,G,X,te,ce,xe,Me,be,Ae,Ne)}emplace(r,l,d,p,g,y,b,T,C,O,z,B,G,X,te,ce,xe,Me,be,Ae,Ne,Fe){const pt=30*r,lt=15*r,Et=60*r;return this.int16[pt+0]=l,this.int16[pt+1]=d,this.int16[pt+2]=p,this.float32[lt+2]=g,this.float32[lt+3]=y,this.uint16[pt+8]=b,this.uint16[pt+9]=T,this.uint32[lt+5]=C,this.uint32[lt+6]=O,this.uint32[lt+7]=z,this.uint16[pt+16]=B,this.uint16[pt+17]=G,this.uint16[pt+18]=X,this.float32[lt+10]=te,this.float32[lt+11]=ce,this.uint8[Et+48]=xe,this.uint8[Et+49]=Me,this.uint8[Et+50]=be,this.uint32[lt+13]=Ae,this.int16[pt+28]=Ne,this.uint8[Et+58]=Fe,r}}jr.prototype.bytesPerElement=60,En(jr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Hr extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g,y,b,T,C,O,z,B,G,X,te,ce,xe,Me,be,Ae,Ne,Fe,pt,lt,Et,Wt,gt,Mt,Dt,Nt){const Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,r,l,d,p,g,y,b,T,C,O,z,B,G,X,te,ce,xe,Me,be,Ae,Ne,Fe,pt,lt,Et,Wt,gt,Mt,Dt,Nt)}emplace(r,l,d,p,g,y,b,T,C,O,z,B,G,X,te,ce,xe,Me,be,Ae,Ne,Fe,pt,lt,Et,Wt,gt,Mt,Dt,Nt,Xt){const bt=38*r,hn=19*r;return this.int16[bt+0]=l,this.int16[bt+1]=d,this.int16[bt+2]=p,this.float32[hn+2]=g,this.float32[hn+3]=y,this.int16[bt+8]=b,this.int16[bt+9]=T,this.int16[bt+10]=C,this.int16[bt+11]=O,this.int16[bt+12]=z,this.int16[bt+13]=B,this.uint16[bt+14]=G,this.uint16[bt+15]=X,this.uint16[bt+16]=te,this.uint16[bt+17]=ce,this.uint16[bt+18]=xe,this.uint16[bt+19]=Me,this.uint16[bt+20]=be,this.uint16[bt+21]=Ae,this.uint16[bt+22]=Ne,this.uint16[bt+23]=Fe,this.uint16[bt+24]=pt,this.uint16[bt+25]=lt,this.uint16[bt+26]=Et,this.uint16[bt+27]=Wt,this.uint16[bt+28]=gt,this.uint32[hn+15]=Mt,this.float32[hn+16]=Dt,this.float32[hn+17]=Nt,this.float32[hn+18]=Xt,r}}Hr.prototype.bytesPerElement=76,En(Hr,"StructArrayLayout3i2f6i15ui1ul3f76");class qr extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.float32[1*r+0]=l,r}}qr.prototype.bytesPerElement=4,En(qr,"StructArrayLayout1f4");class Gr extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,p,g){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,d,p,g)}emplace(r,l,d,p,g,y){const b=5*r;return this.float32[b+0]=l,this.float32[b+1]=d,this.float32[b+2]=p,this.float32[b+3]=g,this.float32[b+4]=y,r}}Gr.prototype.bytesPerElement=20,En(Gr,"StructArrayLayout5f20");class Ko extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,p){const g=this.length;return this.resize(g+1),this.emplace(g,r,l,d,p)}emplace(r,l,d,p,g){const y=6*r;return this.uint32[3*r+0]=l,this.uint16[y+2]=d,this.uint16[y+3]=p,this.uint16[y+4]=g,r}}Ko.prototype.bytesPerElement=12,En(Ko,"StructArrayLayout1ul3ui12");class To extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const p=2*r;return this.uint16[p+0]=l,this.uint16[p+1]=d,r}}To.prototype.bytesPerElement=4,En(To,"StructArrayLayout2ui4");class is extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint16[1*r+0]=l,r}}is.prototype.bytesPerElement=2,En(is,"StructArrayLayout1ui2");class el extends nt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const p=2*r;return this.float32[p+0]=l,this.float32[p+1]=d,r}}el.prototype.bytesPerElement=8,En(el,"StructArrayLayout2f8");class yi extends We{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}yi.prototype.size=40;class Zr extends er{get(r){return new yi(this,r)}}En(Zr,"CollisionBoxArray");class zr extends We{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}zr.prototype.size=60;class Xi extends jr{get(r){return new zr(this,r)}}En(Xi,"PlacedSymbolArray");class la extends We{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(r){this._structArray.uint32[this._pos4+15]=r}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}la.prototype.size=76;class fi extends Hr{get(r){return new la(this,r)}}En(fi,"SymbolInstanceArray");class xa extends qr{getoffsetX(r){return this.float32[1*r+0]}}En(xa,"GlyphOffsetArray");class of extends Vt{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}En(of,"SymbolLineVertexArray");class yu extends We{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}yu.prototype.size=12;class Fh extends Ko{get(r){return new yu(this,r)}}En(Fh,"FeatureIndexArray");class Nl extends To{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}En(Nl,"FillExtrusionCentroidArray");const Cc=et([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),vu=et([{name:"a_dash",components:4,type:"Uint16"}]);var af={exports:{}},Nh={exports:{}};Nh.exports=function(s,r){var l,d,p,g,y,b,T,C;for(d=s.length-(l=3&s.length),p=r,y=3432918353,b=461845907,C=0;C<d;)T=255&s.charCodeAt(C)|(255&s.charCodeAt(++C))<<8|(255&s.charCodeAt(++C))<<16|(255&s.charCodeAt(++C))<<24,++C,p=27492+(65535&(g=5*(65535&(p=(p^=T=(65535&(T=(T=(65535&T)*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(T=0,l){case 3:T^=(255&s.charCodeAt(C+2))<<16;case 2:T^=(255&s.charCodeAt(C+1))<<8;case 1:p^=T=(65535&(T=(T=(65535&(T^=255&s.charCodeAt(C)))*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295}return p^=s.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Rm=Nh.exports,BT={exports:{}};BT.exports=function(s,r){for(var l,d=s.length,p=r^d,g=0;d>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(g)|(255&s.charCodeAt(++g))<<8|(255&s.charCodeAt(++g))<<16|(255&s.charCodeAt(++g))<<24))+((1540483477*(l>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),d-=4,++g;switch(d){case 3:p^=(255&s.charCodeAt(g+2))<<16;case 2:p^=(255&s.charCodeAt(g+1))<<8;case 1:p=1540483477*(65535&(p^=255&s.charCodeAt(g)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var jT=Rm,TB=BT.exports;af.exports=jT,af.exports.murmur3=jT,af.exports.murmur2=TB;var xw=Y(af.exports);class ly{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,l,d,p){this.ids.push($T(r)),this.positions.push(l,d,p)}getPositions(r){const l=$T(r);let d=0,p=this.ids.length-1;for(;d<p;){const y=d+p>>1;this.ids[y]>=l?p=y:d=y+1}const g=[];for(;this.ids[d]===l;)g.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return g}static serialize(r,l){const d=new Float64Array(r.ids),p=new Uint32Array(r.positions);return bw(d,p,0,d.length-1),l&&l.push(d.buffer,p.buffer),{ids:d,positions:p}}static deserialize(r){const l=new ly;return l.ids=r.ids,l.positions=r.positions,l.indexed=!0,l}}function $T(s){const r=+s;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:xw(String(s))}function bw(s,r,l,d){for(;l<d;){const p=s[l+d>>1];let g=l-1,y=d+1;for(;;){do g++;while(s[g]<p);do y--;while(s[y]>p);if(g>=y)break;cy(s,g,y),cy(r,3*g,3*y),cy(r,3*g+1,3*y+1),cy(r,3*g+2,3*y+2)}y-l<d-y?(bw(s,r,l,y),l=y+1):(bw(s,r,y+1,d),d=y)}}function cy(s,r,l){const d=s[r];s[r]=s[l],s[l]=d}En(ly,"FeaturePositionMap");class xu{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,l),this.initialized=!0),!!this.location}}class uy extends xu{constructor(r){super(r),this.current=0}set(r,l,d){this.fetchUniformLocation(r,l)&&this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class UT extends xu{constructor(r){super(r),this.current=[0,0,0,0]}set(r,l,d){this.fetchUniformLocation(r,l)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3])))}}class VT extends xu{constructor(r){super(r),this.current=Mi.transparent}set(r,l,d){this.fetchUniformLocation(r,l)&&(d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a)))}}const CB=new Float32Array(16),kB=new Float32Array(9),PB=new Float32Array(4);function ww(s){return[Ve(255*s.r,255*s.g),Ve(255*s.b,255*s.a)]}class Lm{constructor(r,l,d){this.value=r,this.uniformNames=l.map(p=>`u_${p}`),this.type=d}setUniform(r,l,d,p,g){l.set(r,g,p.constantOr(this.value))}getBinding(r,l){return this.type==="color"?new VT(r):new uy(r)}}class sf{constructor(r,l){this.uniformNames=l.map(d=>`u_${d}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,l,d,p,g){const y=g==="u_pattern"||g==="u_dash"?this.pattern:g==="u_pixel_ratio"?this.pixelRatio:null;y&&l.set(r,g,y)}getBinding(r,l){return l==="u_pattern"||l==="u_dash"?new UT(r):new uy(r)}}class bu{constructor(r,l,d,p){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(g=>({name:`a_${g}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(r,l,d,p,g,y){const b=this.paintVertexArray.length,T=this.expression.evaluate(new L(0),l,{},g,p,y);this.paintVertexArray.resize(r),this._setPaintValue(b,r,T)}updatePaintArray(r,l,d,p,g){const y=this.expression.evaluate({zoom:0},d,p,void 0,g);this._setPaintValue(r,l,y)}_setPaintValue(r,l,d){if(this.type==="color"){const p=ww(d);for(let g=r;g<l;g++)this.paintVertexArray.emplace(g,p[0],p[1])}else{for(let p=r;p<l;p++)this.paintVertexArray.emplace(p,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Bl{constructor(r,l,d,p,g,y){this.expression=r,this.uniformNames=l.map(b=>`u_${b}_t`),this.type=d,this.useIntegerZoom=p,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=l.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(r,l,d,p,g,y){const b=this.expression.evaluate(new L(this.zoom),l,{},g,p,y),T=this.expression.evaluate(new L(this.zoom+1),l,{},g,p,y),C=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(C,r,b,T)}updatePaintArray(r,l,d,p,g){const y=this.expression.evaluate({zoom:this.zoom},d,p,void 0,g),b=this.expression.evaluate({zoom:this.zoom+1},d,p,void 0,g);this._setPaintValue(r,l,y,b)}_setPaintValue(r,l,d,p){if(this.type==="color"){const g=ww(d),y=ww(p);for(let b=r;b<l;b++)this.paintVertexArray.emplace(b,g[0],g[1],y[0],y[1])}else{for(let g=r;g<l;g++)this.paintVertexArray.emplace(g,d,p);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,l,d,p,g){const y=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,b=Le(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);l.set(r,g,b)}getBinding(r,l){return new uy(r)}}class fd{constructor(r,l,d,p,g){this.expression=r,this.layerId=g,this.paintVertexAttributes=(d==="array"?vu:Cc).members;for(let y=0;y<l.length;++y);this.paintVertexArray=new p}populatePaintArray(r,l,d){const p=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(p,r,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(r,l,d,p,g,y){this._setPaintValues(r,l,d.patterns&&d.patterns[this.layerId],y)}_setPaintValues(r,l,d,p){if(!p||!d)return;const g=p[d];if(!g)return;const{tl:y,br:b,pixelRatio:T}=g;for(let C=r;C<l;C++)this.paintVertexArray.emplace(C,y[0],y[1],b[0],b[1],T)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class md{constructor(r,l,d=()=>!0){this.binders={},this._buffers=[];const p=[];for(const g in r.paint._values){if(!d(g))continue;const y=r.paint.get(g);if(!(y instanceof me&&ad(y.property.specification)))continue;const b=AB(g,r.type),T=y.value,C=y.property.specification.type,O=!!y.property.useIntegerZoom,z=g==="line-dasharray"||g.endsWith("pattern"),B=g==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant";if(T.kind!=="constant"||B)if(T.kind==="source"||B||z){const G=WT(g,C,"source");this.binders[g]=z?new fd(T,b,C,G,r.id):new bu(T,b,C,G),p.push(`/a_${g}`)}else{const G=WT(g,C,"composite");this.binders[g]=new Bl(T,b,C,O,l,G),p.push(`/z_${g}`)}else this.binders[g]=z?new sf(T.value,b):new Lm(T.value,b,C),p.push(`/u_${g}`)}this.cacheKey=p.sort().join("")}getMaxValue(r){const l=this.binders[r];return l instanceof bu||l instanceof Bl?l.maxValue:0}populatePaintArrays(r,l,d,p,g,y){for(const b in this.binders){const T=this.binders[b];(T instanceof bu||T instanceof Bl||T instanceof fd)&&T.populatePaintArray(r,l,d,p,g,y)}}setConstantPatternPositions(r){for(const l in this.binders){const d=this.binders[l];d instanceof sf&&d.setConstantPatternPositions(r)}}updatePaintArrays(r,l,d,p,g,y){let b=!1;for(const T in r){const C=l.getPositions(T);for(const O of C){const z=d.feature(O.index);for(const B in this.binders){const G=this.binders[B];if((G instanceof bu||G instanceof Bl||G instanceof fd)&&G.expression.isStateDependent===!0){const X=p.paint.get(B);G.expression=X.value,G.updatePaintArray(O.start,O.end,z,r[T],g,y),b=!0}}}}return b}defines(){const r=[];for(const l in this.binders){const d=this.binders[l];(d instanceof Lm||d instanceof sf)&&r.push(...d.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return r}getBinderAttributes(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof bu||d instanceof Bl||d instanceof fd)for(let p=0;p<d.paintVertexAttributes.length;p++)r.push(d.paintVertexAttributes[p].name)}return r}getBinderUniforms(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof Lm||d instanceof sf||d instanceof Bl)for(const p of d.uniformNames)r.push(p)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const l=[];for(const d in this.binders){const p=this.binders[d];if(p instanceof Lm||p instanceof sf||p instanceof Bl)for(const g of p.uniformNames)l.push({name:g,property:d,binding:p.getBinding(r,g)})}return l}setUniforms(r,l,d,p,g){for(const{name:y,property:b,binding:T}of d)this.binders[b].setUniform(r,T,g,p.get(b),y)}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const l=this.binders[r];(l instanceof bu||l instanceof Bl||l instanceof fd)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(r){for(const l in this.binders){const d=this.binders[l];(d instanceof bu||d instanceof Bl||d instanceof fd)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const l=this.binders[r];(l instanceof bu||l instanceof Bl||l instanceof fd)&&l.destroy()}}}class Bh{constructor(r,l,d=()=>!0){this.programConfigurations={};for(const p of r)this.programConfigurations[p.id]=new md(p,l,d);this.needsUpload=!1,this._featureMap=new ly,this._bufferOffset=0}populatePaintArrays(r,l,d,p,g,y,b){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(r,l,p,g,y,b);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,l,d,p,g){for(const y of d)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(r,this._featureMap,l,y,p,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const IB={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function AB(s,r){return IB[s]||[s.replace(`${r}-`,"").replace(/-/g,"_")]}const MB={"line-pattern":{source:dt,composite:dt},"fill-pattern":{source:dt,composite:dt},"fill-extrusion-pattern":{source:dt,composite:dt},"line-dasharray":{source:Ct,composite:Ct}},DB={color:{source:el,composite:$t},number:{source:qr,composite:el}};function WT(s,r,l){const d=MB[s];return d&&d[l]||DB[r][l]}En(Lm,"ConstantBinder"),En(sf,"PatternConstantBinder"),En(bu,"SourceExpressionBinder"),En(fd,"PatternCompositeBinder"),En(Bl,"CompositeExpressionBinder"),En(md,"ProgramConfiguration",{omit:["_buffers"]}),En(Bh,"ProgramConfigurationSet");const HT="-transition";class jl extends Al{constructor(r,l){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&r.type!=="sky"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),l.layout&&(this._unevaluatedLayout=new ge(l.layout)),l.paint)){this._transitionablePaint=new J(l.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ve(l.paint)}}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,l,d={}){l!=null&&this._validate(mw,`layers.${this.id}.layout.${r}`,r,l,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,l):this.visibility=l)}getPaintProperty(r){return yn(r,HT)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,l,d={}){if(l!=null&&this._validate(fw,`layers.${this.id}.paint.${r}`,r,l,d))return!1;if(yn(r,HT))return this._transitionablePaint.setTransition(r.slice(0,-11),l||void 0),!1;{const p=this._transitionablePaint._values[r],g=p.value.isDataDriven(),y=p.value;this._transitionablePaint.setValue(r,l),this._handleSpecialPaintPropertyUpdate(r);const b=this._transitionablePaint._values[r].value,T=b.isDataDriven(),C=yn(r,"pattern")||r==="line-dasharray";return T||g||C||this._handleOverridablePaintPropertyUpdate(r,y,b)}}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getProgramConfiguration(r){return null}_handleOverridablePaintPropertyUpdate(r,l,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,l)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),nn(r,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(r,l,d,p,g={}){return(!g||g.validate!==!1)&&iy(this,r.call(ry,{key:l,layerType:this.type,objectKey:d,value:p,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const l=this.paint.get(r);if(l instanceof me&&ad(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ef(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const OB=et([{name:"a_pos",components:2,type:"Int16"}],4),RB=et([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ki{constructor(r=[]){this.segments=r}prepareSegment(r,l,d,p){let g=this.segments[this.segments.length-1];return r>Ki.MAX_VERTEX_ARRAY_LENGTH&&It(`Max vertices per segment is ${Ki.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!g||g.vertexLength+r>Ki.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==p)&&(g={vertexOffset:l.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},p!==void 0&&(g.sortKey=p),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const r of this.segments)for(const l in r.vaos)r.vaos[l].destroy()}static simpleSegment(r,l,d,p){return new Ki([{vertexOffset:r,primitiveOffset:l,vertexLength:d,primitiveLength:p,vaos:{},sortKey:0}])}}Ki.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,En(Ki,"SegmentVector");var Hn=8192;class gd{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof Xr?new Xr(r.lng,r.lat):Xr.convert(r),this}setSouthWest(r){return this._sw=r instanceof Xr?new Xr(r.lng,r.lat):Xr.convert(r),this}extend(r){const l=this._sw,d=this._ne;let p,g;if(r instanceof Xr)p=r,g=r;else{if(!(r instanceof gd))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(gd.convert(r)):this.extend(Xr.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(Xr.convert(r)):this;if(p=r._sw,g=r._ne,!p||!g)return this}return l||d?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),d.lng=Math.max(g.lng,d.lng),d.lat=Math.max(g.lat,d.lat)):(this._sw=new Xr(p.lng,p.lat),this._ne=new Xr(g.lng,g.lat)),this}getCenter(){return new Xr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Xr(this.getWest(),this.getNorth())}getSouthEast(){return new Xr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:d}=Xr.convert(r);let p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&p}static convert(r){return!r||r instanceof gd?r:new gd(r)}}var dy=1e-6,os=typeof Float32Array<"u"?Float32Array:Array;function qT(){var s=new os(9);return os!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function GT(s,r,l){var d=r[0],p=r[1],g=r[2],y=r[3],b=r[4],T=r[5],C=r[6],O=r[7],z=r[8],B=l[0],G=l[1],X=l[2],te=l[3],ce=l[4],xe=l[5],Me=l[6],be=l[7],Ae=l[8];return s[0]=B*d+G*y+X*C,s[1]=B*p+G*b+X*O,s[2]=B*g+G*T+X*z,s[3]=te*d+ce*y+xe*C,s[4]=te*p+ce*b+xe*O,s[5]=te*g+ce*T+xe*z,s[6]=Me*d+be*y+Ae*C,s[7]=Me*p+be*b+Ae*O,s[8]=Me*g+be*T+Ae*z,s}function $l(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Ew(s,r){var l=r[0],d=r[1],p=r[2],g=r[3],y=r[4],b=r[5],T=r[6],C=r[7],O=r[8],z=r[9],B=r[10],G=r[11],X=r[12],te=r[13],ce=r[14],xe=r[15],Me=l*b-d*y,be=l*T-p*y,Ae=l*C-g*y,Ne=d*T-p*b,Fe=d*C-g*b,pt=p*C-g*T,lt=O*te-z*X,Et=O*ce-B*X,Wt=O*xe-G*X,gt=z*ce-B*te,Mt=z*xe-G*te,Dt=B*xe-G*ce,Nt=Me*Dt-be*Mt+Ae*gt+Ne*Wt-Fe*Et+pt*lt;return Nt?(s[0]=(b*Dt-T*Mt+C*gt)*(Nt=1/Nt),s[1]=(p*Mt-d*Dt-g*gt)*Nt,s[2]=(te*pt-ce*Fe+xe*Ne)*Nt,s[3]=(B*Fe-z*pt-G*Ne)*Nt,s[4]=(T*Wt-y*Dt-C*Et)*Nt,s[5]=(l*Dt-p*Wt+g*Et)*Nt,s[6]=(ce*Ae-X*pt-xe*be)*Nt,s[7]=(O*pt-B*Ae+G*be)*Nt,s[8]=(y*Mt-b*Wt+C*lt)*Nt,s[9]=(d*Wt-l*Mt-g*lt)*Nt,s[10]=(X*Fe-te*Ae+xe*Me)*Nt,s[11]=(z*Ae-O*Fe-G*Me)*Nt,s[12]=(b*Et-y*gt-T*lt)*Nt,s[13]=(l*gt-d*Et+p*lt)*Nt,s[14]=(te*be-X*Ne-ce*Me)*Nt,s[15]=(O*Ne-z*be+B*Me)*Nt,s):null}function jh(s,r,l){var d=r[0],p=r[1],g=r[2],y=r[3],b=r[4],T=r[5],C=r[6],O=r[7],z=r[8],B=r[9],G=r[10],X=r[11],te=r[12],ce=r[13],xe=r[14],Me=r[15],be=l[0],Ae=l[1],Ne=l[2],Fe=l[3];return s[0]=be*d+Ae*b+Ne*z+Fe*te,s[1]=be*p+Ae*T+Ne*B+Fe*ce,s[2]=be*g+Ae*C+Ne*G+Fe*xe,s[3]=be*y+Ae*O+Ne*X+Fe*Me,s[4]=(be=l[4])*d+(Ae=l[5])*b+(Ne=l[6])*z+(Fe=l[7])*te,s[5]=be*p+Ae*T+Ne*B+Fe*ce,s[6]=be*g+Ae*C+Ne*G+Fe*xe,s[7]=be*y+Ae*O+Ne*X+Fe*Me,s[8]=(be=l[8])*d+(Ae=l[9])*b+(Ne=l[10])*z+(Fe=l[11])*te,s[9]=be*p+Ae*T+Ne*B+Fe*ce,s[10]=be*g+Ae*C+Ne*G+Fe*xe,s[11]=be*y+Ae*O+Ne*X+Fe*Me,s[12]=(be=l[12])*d+(Ae=l[13])*b+(Ne=l[14])*z+(Fe=l[15])*te,s[13]=be*p+Ae*T+Ne*B+Fe*ce,s[14]=be*g+Ae*C+Ne*G+Fe*xe,s[15]=be*y+Ae*O+Ne*X+Fe*Me,s}function zm(s,r,l){var d,p,g,y,b,T,C,O,z,B,G,X,te=l[0],ce=l[1],xe=l[2];return r===s?(s[12]=r[0]*te+r[4]*ce+r[8]*xe+r[12],s[13]=r[1]*te+r[5]*ce+r[9]*xe+r[13],s[14]=r[2]*te+r[6]*ce+r[10]*xe+r[14],s[15]=r[3]*te+r[7]*ce+r[11]*xe+r[15]):(p=r[1],g=r[2],y=r[3],b=r[4],T=r[5],C=r[6],O=r[7],z=r[8],B=r[9],G=r[10],X=r[11],s[0]=d=r[0],s[1]=p,s[2]=g,s[3]=y,s[4]=b,s[5]=T,s[6]=C,s[7]=O,s[8]=z,s[9]=B,s[10]=G,s[11]=X,s[12]=d*te+b*ce+z*xe+r[12],s[13]=p*te+T*ce+B*xe+r[13],s[14]=g*te+C*ce+G*xe+r[14],s[15]=y*te+O*ce+X*xe+r[15]),s}function $h(s,r,l){var d=l[0],p=l[1],g=l[2];return s[0]=r[0]*d,s[1]=r[1]*d,s[2]=r[2]*d,s[3]=r[3]*d,s[4]=r[4]*p,s[5]=r[5]*p,s[6]=r[6]*p,s[7]=r[7]*p,s[8]=r[8]*g,s[9]=r[9]*g,s[10]=r[10]*g,s[11]=r[11]*g,s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s}function Sw(s,r,l){var d=Math.sin(l),p=Math.cos(l),g=r[4],y=r[5],b=r[6],T=r[7],C=r[8],O=r[9],z=r[10],B=r[11];return r!==s&&(s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[4]=g*p+C*d,s[5]=y*p+O*d,s[6]=b*p+z*d,s[7]=T*p+B*d,s[8]=C*p-g*d,s[9]=O*p-y*d,s[10]=z*p-b*d,s[11]=B*p-T*d,s}function hy(s,r,l){var d=Math.sin(l),p=Math.cos(l),g=r[0],y=r[1],b=r[2],T=r[3],C=r[8],O=r[9],z=r[10],B=r[11];return r!==s&&(s[4]=r[4],s[5]=r[5],s[6]=r[6],s[7]=r[7],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[0]=g*p-C*d,s[1]=y*p-O*d,s[2]=b*p-z*d,s[3]=T*p-B*d,s[8]=g*d+C*p,s[9]=y*d+O*p,s[10]=b*d+z*p,s[11]=T*d+B*p,s}function ZT(s,r){return s[0]=r[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=r[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=r[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function XT(s,r,l){var d,p,g,y=l[0],b=l[1],T=l[2],C=Math.hypot(y,b,T);return C<dy?null:(y*=C=1/C,b*=C,T*=C,d=Math.sin(r),p=Math.cos(r),s[0]=y*y*(g=1-p)+p,s[1]=b*y*g+T*d,s[2]=T*y*g-b*d,s[3]=0,s[4]=y*b*g-T*d,s[5]=b*b*g+p,s[6]=T*b*g+y*d,s[7]=0,s[8]=y*T*g+b*d,s[9]=b*T*g-y*d,s[10]=T*T*g+p,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}Math.hypot||(Math.hypot=function(){for(var s=0,r=arguments.length;r--;)s+=arguments[r]*arguments[r];return Math.sqrt(s)});var LB=jh;function Tw(){var s=new os(3);return os!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function KT(s){var r=new os(3);return r[0]=s[0],r[1]=s[1],r[2]=s[2],r}function Fm(s){return Math.hypot(s[0],s[1],s[2])}function lf(s,r,l){var d=new os(3);return d[0]=s,d[1]=r,d[2]=l,d}function wu(s,r,l){return s[0]=r[0]+l[0],s[1]=r[1]+l[1],s[2]=r[2]+l[2],s}function Cw(s,r,l){return s[0]=r[0]-l[0],s[1]=r[1]-l[1],s[2]=r[2]-l[2],s}function YT(s,r,l){return s[0]=r[0]*l[0],s[1]=r[1]*l[1],s[2]=r[2]*l[2],s}function Nm(s,r,l){return s[0]=Math.min(r[0],l[0]),s[1]=Math.min(r[1],l[1]),s[2]=Math.min(r[2],l[2]),s}function Bm(s,r,l){return s[0]=Math.max(r[0],l[0]),s[1]=Math.max(r[1],l[1]),s[2]=Math.max(r[2],l[2]),s}function Ms(s,r,l){return s[0]=r[0]*l,s[1]=r[1]*l,s[2]=r[2]*l,s}function jm(s,r,l,d){return s[0]=r[0]+l[0]*d,s[1]=r[1]+l[1]*d,s[2]=r[2]+l[2]*d,s}function ba(s,r){var l=r[0],d=r[1],p=r[2],g=l*l+d*d+p*p;return g>0&&(g=1/Math.sqrt(g)),s[0]=r[0]*g,s[1]=r[1]*g,s[2]=r[2]*g,s}function tl(s,r){return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]}function kw(s,r,l){var d=r[0],p=r[1],g=r[2],y=l[0],b=l[1],T=l[2];return s[0]=p*T-g*b,s[1]=g*y-d*T,s[2]=d*b-p*y,s}function Wi(s,r,l){var d=r[0],p=r[1],g=r[2],y=l[3]*d+l[7]*p+l[11]*g+l[15];return s[0]=(l[0]*d+l[4]*p+l[8]*g+l[12])/(y=y||1),s[1]=(l[1]*d+l[5]*p+l[9]*g+l[13])/y,s[2]=(l[2]*d+l[6]*p+l[10]*g+l[14])/y,s}function JT(s,r,l){var d=l[0],p=l[1],g=l[2],y=r[0],b=r[1],T=r[2],C=p*T-g*b,O=g*y-d*T,z=d*b-p*y,B=p*z-g*O,G=g*C-d*z,X=d*O-p*C,te=2*l[3];return O*=te,z*=te,G*=2,X*=2,s[0]=y+(C*=te)+(B*=2),s[1]=b+O+G,s[2]=T+z+X,s}var $m,Ul=Cw,zB=YT,FB=Fm;function QT(s,r,l){return s[0]=r[0]*l,s[1]=r[1]*l,s[2]=r[2]*l,s[3]=r[3]*l,s}function e8(s,r){var l=r[0],d=r[1],p=r[2],g=r[3],y=l*l+d*d+p*p+g*g;return y>0&&(y=1/Math.sqrt(y)),s[0]=l*y,s[1]=d*y,s[2]=p*y,s[3]=g*y,s}function Uh(s,r,l){var d=r[0],p=r[1],g=r[2],y=r[3];return s[0]=l[0]*d+l[4]*p+l[8]*g+l[12]*y,s[1]=l[1]*d+l[5]*p+l[9]*g+l[13]*y,s[2]=l[2]*d+l[6]*p+l[10]*g+l[14]*y,s[3]=l[3]*d+l[7]*p+l[11]*g+l[15]*y,s}function t8(){var s=new os(4);return os!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function n8(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=1,s}function r8(s,r,l){l*=.5;var d=r[0],p=r[1],g=r[2],y=r[3],b=Math.sin(l),T=Math.cos(l);return s[0]=d*T+y*b,s[1]=p*T+g*b,s[2]=g*T-p*b,s[3]=y*T-d*b,s}function i8(s,r,l){l*=.5;var d=r[0],p=r[1],g=r[2],y=r[3],b=Math.sin(l),T=Math.cos(l);return s[0]=d*T-g*b,s[1]=p*T+y*b,s[2]=g*T+d*b,s[3]=y*T-p*b,s}Tw(),$m=new os(4),os!=Float32Array&&($m[0]=0,$m[1]=0,$m[2]=0,$m[3]=0);var NB=e8;Tw(),lf(1,0,0),lf(0,1,0),t8(),t8(),qT();const BB=et([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:o8}=BB,a8=et([{name:"a_pos_3",components:3,type:"Int16"}]);var Um=et([{name:"a_pos",type:"Int16",components:2}]);class Pw{constructor(r,l){this.pos=r,this.dir=l}intersectsPlane(r,l,d){const p=tl(l,this.dir);if(Math.abs(p)<1e-6)return!1;const g=((r[0]-this.pos[0])*l[0]+(r[1]-this.pos[1])*l[1]+(r[2]-this.pos[2])*l[2])/p;return d[0]=this.pos[0]+this.dir[0]*g,d[1]=this.pos[1]+this.dir[1]*g,d[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(r,l,d){if(function(G,X){var te=G[0],ce=G[1],xe=G[2],Me=X[0],be=X[1],Ae=X[2];return Math.abs(te-Me)<=dy*Math.max(1,Math.abs(te),Math.abs(Me))&&Math.abs(ce-be)<=dy*Math.max(1,Math.abs(ce),Math.abs(be))&&Math.abs(xe-Ae)<=dy*Math.max(1,Math.abs(xe),Math.abs(Ae))}(this.pos,r)||l===0)return d[0]=d[1]=d[2]=0,!1;const[p,g,y]=this.dir,b=this.pos[0]-r[0],T=this.pos[1]-r[1],C=this.pos[2]-r[2],O=p*p+g*g+y*y,z=2*(b*p+T*g+C*y),B=z*z-4*O*(b*b+T*T+C*C-l*l);if(B<0){const G=Math.max(-z/2,0),X=b+p*G,te=T+g*G,ce=C+y*G,xe=Math.hypot(X,te,ce);return d[0]=X*l/xe,d[1]=te*l/xe,d[2]=ce*l/xe,!1}{const G=(-z-Math.sqrt(B))/(2*O);if(G<0){const X=Math.hypot(b,T,C);return d[0]=b*l/X,d[1]=T*l/X,d[2]=C*l/X,!1}return d[0]=b+p*G,d[1]=T+g*G,d[2]=C+y*G,!0}}}class Iw{constructor(r,l,d,p,g){this.TL=r,this.TR=l,this.BR=d,this.BL=p,this.horizon=g}static fromInvProjectionMatrix(r,l,d){const p=[-1,1,1],g=[1,1,1],y=[1,-1,1],b=[-1,-1,1],T=Wi(p,p,r),C=Wi(g,g,r),O=Wi(y,y,r),z=Wi(b,b,r);return new Iw(T,C,O,z,l/d)}}class Aw{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,d,p){const g=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const C=Uh([],T,r),O=1/C[3]/l*g;return function(z,B,G){return z[0]=B[0]*G[0],z[1]=B[1]*G[1],z[2]=B[2]*G[2],z[3]=B[3]*G[3],z}(C,C,[O,O,p?1/C[3]:O,O])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const C=ba([],kw([],Ul([],y[T[0]],y[T[1]]),Ul([],y[T[2]],y[T[1]]))),O=-tl(C,y[T[1]]);return C.concat(O)});return new Aw(y,b)}}class wa{static fromPoints(r){const l=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0];for(const p of r)Nm(l,l,p),Bm(d,d,p);return new wa(l,d)}static applyTransform(r,l){const d=r.getCorners();for(let p=0;p<d.length;++p)Wi(d[p],d[p],l);return wa.fromPoints(d)}constructor(r,l){this.min=r,this.max=l,this.center=Ms([],wu([],this.min,this.max),.5)}quadrant(r){const l=[r%2==0,r<2],d=KT(this.min),p=KT(this.max);for(let g=0;g<l.length;g++)d[g]=l[g]?this.min[g]:this.center[g],p[g]=l[g]?this.center[g]:this.max[g];return p[2]=this.max[2],new wa(d,p)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,l=this.max;return[[r[0],r[1],r[2]],[l[0],r[1],r[2]],[l[0],l[1],r[2]],[r[0],l[1],r[2]],[r[0],r[1],l[2]],[l[0],r[1],l[2]],[l[0],l[1],l[2]],[r[0],l[1],l[2]]]}intersects(r){const l=this.getCorners();let d=!0;for(let p=0;p<r.planes.length;p++){const g=r.planes[p];let y=0;for(let b=0;b<l.length;b++)y+=tl(g,l[b])+g[3]>=0;if(y===0)return 0;y!==l.length&&(d=!1)}if(d)return 2;for(let p=0;p<3;p++){let g=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(let b=0;b<r.points.length;b++){const T=r.points[b][p]-this.min[p];g=Math.min(g,T),y=Math.max(y,T)}if(y<0||g>this.max[p]-this.min[p])return 0}return 1}}const Mw=5,s8=6,kc=Hn/Math.PI/2,jB=16383,Vh=64,Vm=[Vh,32,16],nl=-kc,rl=kc,$B=[new wa([nl,nl,nl],[rl,rl,rl]),new wa([nl,nl,nl],[0,0,rl]),new wa([0,nl,nl],[rl,0,rl]),new wa([nl,0,nl],[0,rl,rl]),new wa([0,0,nl],[rl,rl,rl])];function py(s){return s*kc/qm}function l8(s,r,l,d=!0){const p=Ms([],s._camera.position,s.worldSize),g=[r,l,1,1];Uh(g,g,s.pixelMatrixInverse),QT(g,g,1/g[3]);const y=ba([],Ul([],g,p)),b=s.globeMatrix,T=[b[12],b[13],b[14]],C=Ul([],T,p),O=Fm(C),z=ba([],C),B=s.worldSize/(2*Math.PI),G=tl(z,y),X=Math.asin(B/O);if(X<Math.acos(G)){if(!d)return null;const Wt=[],gt=[];Ms(Wt,y,O/G),ba(gt,Ul(gt,Wt,C)),ba(y,wu(y,C,Ms(y,gt,Math.tan(X)*O)))}const te=[];new Pw(p,y).closestPointOnSphere(T,B,te);const ce=ba([],qn(b,0)),xe=ba([],qn(b,1)),Me=ba([],qn(b,2)),be=tl(ce,te),Ae=tl(xe,te),Ne=tl(Me,te),Fe=qe(Math.asin(-Ae/B));let pt=qe(Math.atan2(be,Ne));pt=s.center.lng+function(Wt,gt){const Mt=(gt-Wt+180)%360-180;return Mt<-180?Mt+360:Mt}(s.center.lng,pt);const lt=Ic(pt),Et=Le(Ac(Fe),0,1);return new hf(lt,Et)}class UB{constructor(r,l,d){this.a=Ul([],r,d),this.b=Ul([],l,d),this.center=d;const p=ba([],this.a),g=ba([],this.b);this.angle=Math.acos(tl(p,g))}}function Dw(s,r){if(s.angle===0)return null;let l;return l=s.a[r]===0?1/s.angle*.5*Math.PI:1/s.angle*Math.atan(s.b[r]/s.a[r]/Math.sin(s.angle)-1/Math.tan(s.angle)),l<0||l>1?null:function(d,p,g,y){const b=Math.sin(g);return d*(Math.sin((1-y)*g)/b)+p*(Math.sin(y*g)/b)}(s.a[r],s.b[r],s.angle,Le(l,0,1))+s.center[r]}function Pc(s){if(s.z<=1)return $B[s.z+2*s.y+s.x];const r=Ow(fy(s));return wa.fromPoints(r)}function Wh(s,r,l){return Ms(s,s,1-l),jm(s,s,r,l)}function c8(s,r){const l=df(r.zoom);if(l===0)return Pc(s);const d=fy(s),p=Ow(d),g=Ic(d.getWest())*r.worldSize,y=Ic(d.getEast())*r.worldSize,b=Ac(d.getNorth())*r.worldSize,T=Ac(d.getSouth())*r.worldSize,C=[g,b,0],O=[y,b,0],z=[g,T,0],B=[y,T,0],G=Ew([],r.globeMatrix);return Wi(C,C,G),Wi(O,O,G),Wi(z,z,G),Wi(B,B,G),p[0]=Wh(p[0],z,l),p[1]=Wh(p[1],B,l),p[2]=Wh(p[2],O,l),p[3]=Wh(p[3],C,l),wa.fromPoints(p)}function u8(s,r,l){for(const d of s)Wi(d,d,r),Ms(d,d,l)}function VB(s,r,l){const d=r/s.worldSize,p=s.globeMatrix;if(l.z<=1){const lt=Pc(l).getCorners();return u8(lt,p,d),wa.fromPoints(lt)}const g=fy(l),y=Ow(g);u8(y,p,d);const b=Number.MAX_VALUE,T=[-b,-b,-b],C=[b,b,b];if(g.contains(s.center)){for(const Wt of y)Nm(C,C,Wt),Bm(T,T,Wt);T[2]=0;const lt=s.point,Et=[lt.x*d,lt.y*d,0];return Nm(C,C,Et),Bm(T,T,Et),new wa(C,T)}const O=[p[12]*d,p[13]*d,p[14]*d],z=g.getCenter(),B=Le(s.center.lat,-Jo,Jo),G=Le(z.lat,-Jo,Jo),X=Ic(s.center.lng),te=Ac(B);let ce=X-Ic(z.lng);const xe=te-Ac(G);ce>.5?ce-=1:ce<-.5&&(ce+=1);let Me=0;Math.abs(ce)>Math.abs(xe)?Me=ce>=0?1:3:(Me=xe>=0?0:2,jm(O,O,[p[4]*d,p[5]*d,p[6]*d],-Math.sin(at(xe>=0?g.getSouth():g.getNorth()))*kc));const be=y[Me],Ae=y[(Me+1)%4],Ne=new UB(be,Ae,O),Fe=[Dw(Ne,0)||be[0],Dw(Ne,1)||be[1],Dw(Ne,2)||be[2]],pt=df(s.zoom);if(pt>0){const lt=function({x:Wt,y:gt,z:Mt},Dt,Nt,Xt,bt){const hn=1/(1<<Mt);let kn=Wt*hn,pn=kn+hn,sr=gt*hn,Yt=sr+hn,Bn=0;const lr=(kn+pn)/2-Xt;return lr>.5?Bn=-1:lr<-.5&&(Bn=1),kn=((kn+Bn)*Dt-(Xt*=Dt))*Nt+Xt,pn=((pn+Bn)*Dt-Xt)*Nt+Xt,sr=(sr*Dt-(bt*=Dt))*Nt+bt,Yt=(Yt*Dt-bt)*Nt+bt,[[kn,Yt,0],[pn,Yt,0],[pn,sr,0],[kn,sr,0]]}(l,r,s._pixelsPerMercatorPixel,X,te);for(let Wt=0;Wt<y.length;Wt++)Wh(y[Wt],lt[Wt],pt);const Et=wu([],lt[Me],lt[(Me+1)%4]);Ms(Et,Et,.5),Wh(Fe,Et,pt)}for(const lt of y)Nm(C,C,lt),Bm(T,T,lt);return C[2]=Math.min(be[2],Ae[2]),Nm(C,C,Fe),Bm(T,T,Fe),new wa(C,T)}function fy({x:s,y:r,z:l}){const d=1/(1<<l),p=new Xr(Ds(s*d),Yo((r+1)*d)),g=new Xr(Ds((s+1)*d),Yo(r*d));return new gd(p,g)}function Ow(s){const r=at(s.getNorth()),l=at(s.getSouth()),d=Math.cos(r),p=Math.cos(l),g=Math.sin(r),y=Math.sin(l),b=s.getWest(),T=s.getEast();return[cf(p,y,b),cf(p,y,T),cf(d,g,T),cf(d,g,b)]}function cf(s,r,l,d=kc){return l=at(l),[s*Math.sin(l)*d,-r*d,s*Math.cos(l)*d]}function uf(s,r,l){return cf(Math.cos(at(s)),Math.sin(at(s)),r,l)}function Wm(s,r,l,d){const p=1<<l.z,g=(s/Hn+l.x)/p;return uf(Yo((r/Hn+l.y)/p),Ds(g),d)}function my({min:s,max:r}){return jB/Math.max(r[0]-s[0],r[1]-s[1],r[2]-s[2])}const d8=new Float64Array(16);function Hm(s){const r=my(s),l=ZT(d8,[r,r,r]);return zm(l,l,((d=[])[0]=-(p=s.min)[0],d[1]=-p[1],d[2]=-p[2],d));var d,p}function Rw(s){const r=(d=s.min,(l=d8)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=d[0],l[13]=d[1],l[14]=d[2],l[15]=1,l);var l,d;const p=1/my(s);return $h(r,r,[p,p,p])}function h8(s,r,l,d,p){const g=function(T){const C=Hn/(2*Math.PI);return T/(2*Math.PI)/C}(l),y=[s,r,-l/(2*Math.PI)],b=$l(new Float64Array(16));return zm(b,b,y),$h(b,b,[g,g,g]),Sw(b,b,at(-p)),hy(b,b,at(-d)),b}function df(s){return Je(Mw,s8,s)}function p8(s,r){const l=uf(r.lat,r.lng),d=function(X){const te=uf(X._center.lat,X._center.lng);let ce=kw([],lf(0,1,0),te);const xe=XT([],-X.angle,te);ce=Wi(ce,ce,xe),XT(xe,-X._pitch,ce);const Me=ba([],te);return Ms(Me,Me,py(X.cameraToCenterDistance/X.pixelsPerMeter)),Wi(Me,Me,xe),wu([],te,Me)}(s);return y=(p=Cw([],d,l))[0],b=p[1],T=p[2],C=(g=l)[0],O=g[1],z=g[2],G=(B=Math.sqrt(y*y+b*b+T*T)*Math.sqrt(C*C+O*O+z*z))&&tl(p,g)/B,Math.acos(Math.min(Math.max(G,-1),1));var p,g,y,b,T,C,O,z,B,G}function Lw(s,r){return p8(s,r)>Math.PI/2*1.01}const f8=at(85),WB=Math.cos(f8),HB=Math.sin(f8),qm=63710088e-1,m8=2*Math.PI*qm;class _d{constructor(r,l){if(isNaN(r)||isNaN(l))throw new Error(`Invalid LngLat object: (${r}, ${l})`);if(this.lng=+r,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new _d(it(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const l=Math.PI/180,d=this.lat*l,p=r.lat*l,g=Math.sin(d)*Math.sin(p)+Math.cos(d)*Math.cos(p)*Math.cos((r.lng-this.lng)*l);return qm*Math.acos(Math.min(g,1))}toBounds(r=0){const l=360*r/40075017,d=l/Math.cos(Math.PI/180*this.lat);return new gd(new _d(this.lng-d,this.lat-l),new _d(this.lng+d,this.lat+l))}toEcef(r){const l=py(r);return uf(this.lat,this.lng,kc+l)}static convert(r){if(r instanceof _d)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new _d(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new _d(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Xr=_d;function zw(s){return m8*Math.cos(s*Math.PI/180)}function Ic(s){return(180+s)/360}function Ac(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Vl(s,r){return s/zw(r)}function Ds(s){return 360*s-180}function Yo(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function g8(s,r){return s*zw(Yo(r))}const Jo=85.051129;function _8(s){return 1/Math.cos(s*Math.PI/180)}class hf{constructor(r,l,d=0){this.x=+r,this.y=+l,this.z=+d}static fromLngLat(r,l=0){const d=Xr.convert(r);return new hf(Ic(d.lng),Ac(d.lat),Vl(l,d.lat))}toLngLat(){return new Xr(Ds(this.x),Yo(this.y))}toAltitude(){return g8(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/m8*_8(Yo(this.y))}}function Fw(s,r,l,d,p,g,y,b,T){const C=(r+d)/2,O=(l+p)/2,z=new fe(C,O);b(z),function(B,G,X,te,ce,xe){const Me=X-ce,be=te-xe;return Math.abs((te-G)*Me-(X-B)*be)/Math.hypot(Me,be)}(z.x,z.y,g.x,g.y,y.x,y.y)>=T?(Fw(s,r,l,C,O,g,z,b,T),Fw(s,C,O,d,p,z,y,b,T)):s.push(y)}function y8(s,r,l){let d=s[0],p=d.x,g=d.y;r(d);const y=[d];for(let b=1;b<s.length;b++){const T=s[b],{x:C,y:O}=T;r(T),Fw(y,p,g,C,O,d,T,r,l),p=C,g=O,d=T}return y}function Nw(s,r,l,d){if(d(r,l)){const p=r.add(l)._mult(.5);Nw(s,r,p,d),Nw(s,p,l,d)}else s.push(l)}function qB(s,r){let l=s[0];const d=[l];for(let p=1;p<s.length;p++){const g=s[p];Nw(d,l,g,r),l=g}return d}const Bw=Math.pow(2,14)-1,v8=-Bw-1;function GB(s,r){const l=Math.round(s.x*r),d=Math.round(s.y*r);return s.x=Le(l,v8,Bw),s.y=Le(d,v8,Bw),(l<s.x||l>s.x+1||d<s.y||d>s.y+1)&&It("Geometry exceeds allowed extent, reduce your vector tile buffer size"),s}function Eu(s,r,l){const d=s.loadGeometry(),p=s.extent,g=Hn/p;if(r&&l&&l.projection.isReprojectedInTileSpace){const y=1<<r.z,{scale:b,x:T,y:C,projection:O}=l,z=B=>{const G=Ds((r.x+B.x/p)/y),X=Yo((r.y+B.y/p)/y),te=O.project(G,X);B.x=(te.x*b-T)*p,B.y=(te.y*b-C)*p};for(let B=0;B<d.length;B++)if(s.type!==1)d[B]=y8(d[B],z,1);else{const G=[];for(const X of d[B])X.x<0||X.x>=p||X.y<0||X.y>=p||(z(X),G.push(X));d[B]=G}}for(const y of d)for(const b of y)GB(b,g);return d}function Hh(s,r){return{type:s.type,id:s.id,properties:s.properties,geometry:r?Eu(s):[]}}function gy(s,r,l,d,p){s.emplaceBack(2*r+(d+1)/2,2*l+(p+1)/2)}function _y(s,r,l){s.emplaceBack(r.x,r.y,r.z,l[0]*16384,l[1]*16384,l[2]*16384)}class jw{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new Vt,this.indexArray=new Mn,this.segments=new Ki,this.programConfigurations=new Bh(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d,p){const g=this.layers[0],y=[];let b=null;g.type==="circle"&&(b=g.layout.get("circle-sort-key"));for(const{feature:C,id:O,index:z,sourceLayerIndex:B}of r){const G=this.layers[0]._featureFilter.needGeometry,X=Hh(C,G);if(!this.layers[0]._featureFilter.filter(new L(this.zoom),X,d))continue;const te=b?b.evaluate(X,{},d):void 0,ce={id:O,properties:C.properties,type:C.type,sourceLayerIndex:B,index:z,geometry:G?X.geometry:Eu(C,d,p),patterns:{},sortKey:te};y.push(ce)}b&&y.sort((C,O)=>C.sortKey-O.sortKey);let T=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new Ht,T=p.projection);for(const C of y){const{geometry:O,index:z,sourceLayerIndex:B}=C,G=r[z].feature;this.addFeature(C,O,z,l.availableImages,d,T),l.featureIndex.insert(G,O,z,B,this.index)}}update(r,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,OB.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,RB.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,l,d,p,g,y){for(const b of l)for(const T of b){const C=T.x,O=T.y;if(C<0||C>=Hn||O<0||O>=Hn)continue;if(y){const G=y.projectTilePoint(C,O,g),X=y.upVector(g,C,O),te=this.globeExtVertexArray;_y(te,G,X),_y(te,G,X),_y(te,G,X),_y(te,G,X)}const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),B=z.vertexLength;gy(this.layoutVertexArray,C,O,-1,-1),gy(this.layoutVertexArray,C,O,1,-1),gy(this.layoutVertexArray,C,O,1,1),gy(this.layoutVertexArray,C,O,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+2,B+3),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},p,g)}}function x8(s,r){for(let l=0;l<s.length;l++)if(qh(r,s[l]))return!0;for(let l=0;l<r.length;l++)if(qh(s,r[l]))return!0;return!!$w(s,r)}function ZB(s,r,l){return!!qh(s,r)||!!Uw(r,s,l)}function b8(s,r){if(s.length===1)return E8(r,s[0]);for(let l=0;l<r.length;l++){const d=r[l];for(let p=0;p<d.length;p++)if(qh(s,d[p]))return!0}for(let l=0;l<s.length;l++)if(E8(r,s[l]))return!0;for(let l=0;l<r.length;l++)if($w(s,r[l]))return!0;return!1}function XB(s,r,l){if(s.length>1){if($w(s,r))return!0;for(let d=0;d<r.length;d++)if(Uw(r[d],s,l))return!0}for(let d=0;d<s.length;d++)if(Uw(s[d],r,l))return!0;return!1}function $w(s,r){if(s.length===0||r.length===0)return!1;for(let l=0;l<s.length-1;l++){const d=s[l],p=s[l+1];for(let g=0;g<r.length-1;g++)if(KB(d,p,r[g],r[g+1]))return!0}return!1}function KB(s,r,l,d){return Rn(s,l,d)!==Rn(r,l,d)&&Rn(s,r,l)!==Rn(s,r,d)}function Uw(s,r,l){const d=l*l;if(r.length===1)return s.distSqr(r[0])<d;for(let p=1;p<r.length;p++)if(w8(s,r[p-1],r[p])<d)return!0;return!1}function w8(s,r,l){const d=r.distSqr(l);if(d===0)return s.distSqr(r);const p=((s.x-r.x)*(l.x-r.x)+(s.y-r.y)*(l.y-r.y))/d;return s.distSqr(p<0?r:p>1?l:l.sub(r)._mult(p)._add(r))}function E8(s,r){let l,d,p,g=!1;for(let y=0;y<s.length;y++){l=s[y];for(let b=0,T=l.length-1;b<l.length;T=b++)d=l[b],p=l[T],d.y>r.y!=p.y>r.y&&r.x<(p.x-d.x)*(r.y-d.y)/(p.y-d.y)+d.x&&(g=!g)}return g}function qh(s,r){let l=!1;for(let d=0,p=s.length-1;d<s.length;p=d++){const g=s[d],y=s[p];g.y>r.y!=y.y>r.y&&r.x<(y.x-g.x)*(r.y-g.y)/(y.y-g.y)+g.x&&(l=!l)}return l}function S8(s,r,l,d,p){for(const y of s)if(r<=y.x&&l<=y.y&&d>=y.x&&p>=y.y)return!0;const g=[new fe(r,l),new fe(r,p),new fe(d,p),new fe(d,l)];if(s.length>2){for(const y of g)if(qh(s,y))return!0}for(let y=0;y<s.length-1;y++)if(YB(s[y],s[y+1],g))return!0;return!1}function YB(s,r,l){const d=l[0],p=l[2];if(s.x<d.x&&r.x<d.x||s.x>p.x&&r.x>p.x||s.y<d.y&&r.y<d.y||s.y>p.y&&r.y>p.y)return!1;const g=Rn(s,r,l[0]);return g!==Rn(s,r,l[1])||g!==Rn(s,r,l[2])||g!==Rn(s,r,l[3])}function pf(s,r,l){const d=r.paint.get(s).value;return d.kind==="constant"?d.value:l.programConfigurations.get(r.id).getMaxValue(s)}function yy(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function T8(s,r,l,d,p){if(!r[0]&&!r[1])return s;const g=fe.convert(r)._mult(p);l==="viewport"&&g._rotate(-d);const y=[];for(let b=0;b<s.length;b++)y.push(s[b].sub(g));return y}function C8(s,r,l,d){const p=fe.convert(s)._mult(d);return r==="viewport"&&p._rotate(-l),p}En(jw,"CircleBucket",{omit:["layers"]});const JB=new ke({"circle-sort-key":new he(vt.layout_circle["circle-sort-key"])});var QB={paint:new ke({"circle-radius":new he(vt.paint_circle["circle-radius"]),"circle-color":new he(vt.paint_circle["circle-color"]),"circle-blur":new he(vt.paint_circle["circle-blur"]),"circle-opacity":new he(vt.paint_circle["circle-opacity"]),"circle-translate":new Q(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new Q(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Q(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Q(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new he(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new he(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new he(vt.paint_circle["circle-stroke-opacity"])}),layout:JB};function k8(s,r,l,d,p,g,y,b,T){if(g&&s.queryGeometry.isAboveHorizon)return!1;g&&(T*=s.pixelToTileUnitsFactor);const C=s.tileID.canonical,O=l.projection.upVectorScale(C,l.center.lat,l.worldSize).metersToTile;for(const z of r)for(const B of z){const G=B.add(b),X=p&&l.elevation?l.elevation.exaggeration()*p.getElevationAt(G.x,G.y,!0):0,te=l.projection.projectTilePoint(G.x,G.y,C);if(X>0){const be=l.projection.upVector(C,G.x,G.y);te.x+=be[0]*O*X,te.y+=be[1]*O*X,te.z+=be[2]*O*X}const ce=g?G:ej(te.x,te.y,te.z,d),xe=g?s.tilespaceRays.map(be=>nj(be,X)):s.queryGeometry.screenGeometry,Me=Uh([],[te.x,te.y,te.z,1],d);if(!y&&g?T*=Me[3]/l.cameraToCenterDistance:y&&!g&&(T*=l.cameraToCenterDistance/Me[3]),g){const be=Yo((B.y/Hn+C.y)/(1<<C.z));T/=l.projection.pixelsPerMeter(be,1)/Vl(1,be)}if(ZB(xe,ce,T))return!0}return!1}function ej(s,r,l,d){const p=Uh([],[s,r,l,1],d);return new fe(p[0]/p[3],p[1]/p[3])}const P8=lf(0,0,0),tj=lf(0,0,1);function nj(s,r){const l=Tw();return P8[2]=r,s.intersectsPlane(P8,tj,l),new fe(l[0],l[1])}class I8 extends jw{}function A8(s,{width:r,height:l},d,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==r*l*d)throw new RangeError("mismatched image size")}else p=new Uint8Array(r*l*d);return s.width=r,s.height=l,s.data=p,s}function M8(s,r,l){const{width:d,height:p}=r;d===s.width&&p===s.height||(Vw(s,r,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,d),height:Math.min(s.height,p)},l),s.width=d,s.height=p,s.data=r.data)}function Vw(s,r,l,d,p,g){if(p.width===0||p.height===0)return r;if(p.width>s.width||p.height>s.height||l.x>s.width-p.width||l.y>s.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>r.width||p.height>r.height||d.x>r.width-p.width||d.y>r.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const y=s.data,b=r.data;for(let T=0;T<p.height;T++){const C=((l.y+T)*s.width+l.x)*g,O=((d.y+T)*r.width+d.x)*g;for(let z=0;z<p.width*g;z++)b[O+z]=y[C+z]}return r}En(I8,"HeatmapBucket",{omit:["layers"]});class Su{constructor(r,l){A8(this,r,1,l)}resize(r){M8(this,new Su(r),1)}clone(){return new Su({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,p,g){Vw(r,l,d,p,g,1)}}class as{constructor(r,l){A8(this,r,4,l)}resize(r){M8(this,new as(r),4)}replace(r,l){l?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new as({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,p,g){Vw(r,l,d,p,g,4)}}En(Su,"AlphaImage"),En(as,"RGBAImage");var rj={paint:new ke({"heatmap-radius":new he(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new he(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Q(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ee(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Q(vt.paint_heatmap["heatmap-opacity"])})};function Ww(s){const r={},l=s.resolution||256,d=s.clips?s.clips.length:1,p=s.image||new as({width:l,height:d}),g=(y,b,T)=>{r[s.evaluationKey]=T;const C=s.expression.evaluate(r);p.data[y+b+0]=Math.floor(255*C.r/C.a),p.data[y+b+1]=Math.floor(255*C.g/C.a),p.data[y+b+2]=Math.floor(255*C.b/C.a),p.data[y+b+3]=Math.floor(255*C.a)};if(s.clips)for(let y=0,b=0;y<d;++y,b+=4*l)for(let T=0,C=0;T<l;T++,C+=4){const O=T/(l-1),{start:z,end:B}=s.clips[y];g(b,C,z*(1-O)+B*O)}else for(let y=0,b=0;y<l;y++,b+=4)g(0,b,y/(l-1));return p}var ij={paint:new ke({"hillshade-illumination-direction":new Q(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Q(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Q(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Q(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Q(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Q(vt.paint_hillshade["hillshade-accent-color"])})};const oj=et([{name:"a_pos",components:2,type:"Int16"}],4),{members:aj}=oj;var Hw={exports:{}};function vy(s,r,l){l=l||2;var d,p,g,y,b,T,C,O=r&&r.length,z=O?r[0]*l:s.length,B=D8(s,0,z,l,!0),G=[];if(!B||B.next===B.prev)return G;if(O&&(B=function(te,ce,xe,Me){var be,Ae,Ne,Fe=[];for(be=0,Ae=ce.length;be<Ae;be++)(Ne=D8(te,ce[be]*Me,be<Ae-1?ce[be+1]*Me:te.length,Me,!1))===Ne.next&&(Ne.steiner=!0),Fe.push(fj(Ne));for(Fe.sort(dj),be=0;be<Fe.length;be++)xe=hj(Fe[be],xe);return xe}(s,r,B,l)),s.length>80*l){d=g=s[0],p=y=s[1];for(var X=l;X<z;X+=l)(b=s[X])<d&&(d=b),(T=s[X+1])<p&&(p=T),b>g&&(g=b),T>y&&(y=T);C=(C=Math.max(g-d,y-p))!==0?32767/C:0}return Gm(B,G,l,d,p,C,0),G}function D8(s,r,l,d,p){var g,y;if(p===Zw(s,r,l,d)>0)for(g=r;g<l;g+=d)y=L8(g,s[g],s[g+1],y);else for(g=l-d;g>=r;g-=d)y=L8(g,s[g],s[g+1],y);return y&&xy(y,y.next)&&(Xm(y),y=y.next),y}function Gh(s,r){if(!s)return s;r||(r=s);var l,d=s;do if(l=!1,d.steiner||!xy(d,d.next)&&Yi(d.prev,d,d.next)!==0)d=d.next;else{if(Xm(d),(d=r=d.prev)===d.next)break;l=!0}while(l||d!==r);return r}function Gm(s,r,l,d,p,g,y){if(s){!y&&g&&function(O,z,B,G){var X=O;do X.z===0&&(X.z=qw(X.x,X.y,z,B,G)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==O);X.prevZ.nextZ=null,X.prevZ=null,function(te){var ce,xe,Me,be,Ae,Ne,Fe,pt,lt=1;do{for(xe=te,te=null,Ae=null,Ne=0;xe;){for(Ne++,Me=xe,Fe=0,ce=0;ce<lt&&(Fe++,Me=Me.nextZ);ce++);for(pt=lt;Fe>0||pt>0&&Me;)Fe!==0&&(pt===0||!Me||xe.z<=Me.z)?(be=xe,xe=xe.nextZ,Fe--):(be=Me,Me=Me.nextZ,pt--),Ae?Ae.nextZ=be:te=be,be.prevZ=Ae,Ae=be;xe=Me}Ae.nextZ=null,lt*=2}while(Ne>1)}(X)}(s,d,p,g);for(var b,T,C=s;s.prev!==s.next;)if(b=s.prev,T=s.next,g?lj(s,d,p,g):sj(s))r.push(b.i/l|0),r.push(s.i/l|0),r.push(T.i/l|0),Xm(s),s=T.next,C=T.next;else if((s=T)===C){y?y===1?Gm(s=cj(Gh(s),r,l),r,l,d,p,g,2):y===2&&uj(s,r,l,d,p,g):Gm(Gh(s),r,l,d,p,g,1);break}}}function sj(s){var r=s.prev,l=s,d=s.next;if(Yi(r,l,d)>=0)return!1;for(var p=r.x,g=l.x,y=d.x,b=r.y,T=l.y,C=d.y,O=p<g?p<y?p:y:g<y?g:y,z=b<T?b<C?b:C:T<C?T:C,B=p>g?p>y?p:y:g>y?g:y,G=b>T?b>C?b:C:T>C?T:C,X=d.next;X!==r;){if(X.x>=O&&X.x<=B&&X.y>=z&&X.y<=G&&ff(p,b,g,T,y,C,X.x,X.y)&&Yi(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function lj(s,r,l,d){var p=s.prev,g=s,y=s.next;if(Yi(p,g,y)>=0)return!1;for(var b=p.x,T=g.x,C=y.x,O=p.y,z=g.y,B=y.y,G=b<T?b<C?b:C:T<C?T:C,X=O<z?O<B?O:B:z<B?z:B,te=b>T?b>C?b:C:T>C?T:C,ce=O>z?O>B?O:B:z>B?z:B,xe=qw(G,X,r,l,d),Me=qw(te,ce,r,l,d),be=s.prevZ,Ae=s.nextZ;be&&be.z>=xe&&Ae&&Ae.z<=Me;){if(be.x>=G&&be.x<=te&&be.y>=X&&be.y<=ce&&be!==p&&be!==y&&ff(b,O,T,z,C,B,be.x,be.y)&&Yi(be.prev,be,be.next)>=0||(be=be.prevZ,Ae.x>=G&&Ae.x<=te&&Ae.y>=X&&Ae.y<=ce&&Ae!==p&&Ae!==y&&ff(b,O,T,z,C,B,Ae.x,Ae.y)&&Yi(Ae.prev,Ae,Ae.next)>=0))return!1;Ae=Ae.nextZ}for(;be&&be.z>=xe;){if(be.x>=G&&be.x<=te&&be.y>=X&&be.y<=ce&&be!==p&&be!==y&&ff(b,O,T,z,C,B,be.x,be.y)&&Yi(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Ae&&Ae.z<=Me;){if(Ae.x>=G&&Ae.x<=te&&Ae.y>=X&&Ae.y<=ce&&Ae!==p&&Ae!==y&&ff(b,O,T,z,C,B,Ae.x,Ae.y)&&Yi(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.nextZ}return!0}function cj(s,r,l){var d=s;do{var p=d.prev,g=d.next.next;!xy(p,g)&&O8(p,d,d.next,g)&&Zm(p,g)&&Zm(g,p)&&(r.push(p.i/l|0),r.push(d.i/l|0),r.push(g.i/l|0),Xm(d),Xm(d.next),d=s=g),d=d.next}while(d!==s);return Gh(d)}function uj(s,r,l,d,p,g){var y=s;do{for(var b=y.next.next;b!==y.prev;){if(y.i!==b.i&&mj(y,b)){var T=R8(y,b);return y=Gh(y,y.next),T=Gh(T,T.next),Gm(y,r,l,d,p,g,0),void Gm(T,r,l,d,p,g,0)}b=b.next}y=y.next}while(y!==s)}function dj(s,r){return s.x-r.x}function hj(s,r){var l=function(p,g){var y,b=g,T=p.x,C=p.y,O=-1/0;do{if(C<=b.y&&C>=b.next.y&&b.next.y!==b.y){var z=b.x+(C-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(z<=T&&z>O&&(O=z,y=b.x<b.next.x?b:b.next,z===T))return y}b=b.next}while(b!==g);if(!y)return null;var B,G=y,X=y.x,te=y.y,ce=1/0;b=y;do T>=b.x&&b.x>=X&&T!==b.x&&ff(C<te?T:O,C,X,te,C<te?O:T,C,b.x,b.y)&&(B=Math.abs(C-b.y)/(T-b.x),Zm(b,p)&&(B<ce||B===ce&&(b.x>y.x||b.x===y.x&&pj(y,b)))&&(y=b,ce=B)),b=b.next;while(b!==G);return y}(s,r);if(!l)return r;var d=R8(l,s);return Gh(d,d.next),Gh(l,l.next)}function pj(s,r){return Yi(s.prev,s,r.prev)<0&&Yi(r.next,s,s.next)<0}function qw(s,r,l,d,p){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*p|0)|s<<8))|s<<4))|s<<2))|s<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function fj(s){var r=s,l=s;do(r.x<l.x||r.x===l.x&&r.y<l.y)&&(l=r),r=r.next;while(r!==s);return l}function ff(s,r,l,d,p,g,y,b){return(p-y)*(r-b)>=(s-y)*(g-b)&&(s-y)*(d-b)>=(l-y)*(r-b)&&(l-y)*(g-b)>=(p-y)*(d-b)}function mj(s,r){return s.next.i!==r.i&&s.prev.i!==r.i&&!function(l,d){var p=l;do{if(p.i!==l.i&&p.next.i!==l.i&&p.i!==d.i&&p.next.i!==d.i&&O8(p,p.next,l,d))return!0;p=p.next}while(p!==l);return!1}(s,r)&&(Zm(s,r)&&Zm(r,s)&&function(l,d){var p=l,g=!1,y=(l.x+d.x)/2,b=(l.y+d.y)/2;do p.y>b!=p.next.y>b&&p.next.y!==p.y&&y<(p.next.x-p.x)*(b-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next;while(p!==l);return g}(s,r)&&(Yi(s.prev,s,r.prev)||Yi(s,r.prev,r))||xy(s,r)&&Yi(s.prev,s,s.next)>0&&Yi(r.prev,r,r.next)>0)}function Yi(s,r,l){return(r.y-s.y)*(l.x-r.x)-(r.x-s.x)*(l.y-r.y)}function xy(s,r){return s.x===r.x&&s.y===r.y}function O8(s,r,l,d){var p=wy(Yi(s,r,l)),g=wy(Yi(s,r,d)),y=wy(Yi(l,d,s)),b=wy(Yi(l,d,r));return p!==g&&y!==b||!(p!==0||!by(s,l,r))||!(g!==0||!by(s,d,r))||!(y!==0||!by(l,s,d))||!(b!==0||!by(l,r,d))}function by(s,r,l){return r.x<=Math.max(s.x,l.x)&&r.x>=Math.min(s.x,l.x)&&r.y<=Math.max(s.y,l.y)&&r.y>=Math.min(s.y,l.y)}function wy(s){return s>0?1:s<0?-1:0}function Zm(s,r){return Yi(s.prev,s,s.next)<0?Yi(s,r,s.next)>=0&&Yi(s,s.prev,r)>=0:Yi(s,r,s.prev)<0||Yi(s,s.next,r)<0}function R8(s,r){var l=new Gw(s.i,s.x,s.y),d=new Gw(r.i,r.x,r.y),p=s.next,g=r.prev;return s.next=r,r.prev=s,l.next=p,p.prev=l,d.next=l,l.prev=d,g.next=d,d.prev=g,d}function L8(s,r,l,d){var p=new Gw(s,r,l);return d?(p.next=d.next,p.prev=d,d.next.prev=p,d.next=p):(p.prev=p,p.next=p),p}function Xm(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Gw(s,r,l){this.i=s,this.x=r,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zw(s,r,l,d){for(var p=0,g=r,y=l-d;g<l;g+=d)p+=(s[y]-s[g])*(s[g+1]+s[y+1]),y=g;return p}Hw.exports=vy,Hw.exports.default=vy,vy.deviation=function(s,r,l,d){var p=r&&r.length,g=Math.abs(Zw(s,0,p?r[0]*l:s.length,l));if(p)for(var y=0,b=r.length;y<b;y++)g-=Math.abs(Zw(s,r[y]*l,y<b-1?r[y+1]*l:s.length,l));var T=0;for(y=0;y<d.length;y+=3){var C=d[y]*l,O=d[y+1]*l,z=d[y+2]*l;T+=Math.abs((s[C]-s[z])*(s[O+1]-s[C+1])-(s[C]-s[O])*(s[z+1]-s[C+1]))}return g===0&&T===0?0:Math.abs((T-g)/g)},vy.flatten=function(s){for(var r=s[0][0].length,l={vertices:[],holes:[],dimensions:r},d=0,p=0;p<s.length;p++){for(var g=0;g<s[p].length;g++)for(var y=0;y<r;y++)l.vertices.push(s[p][g][y]);p>0&&l.holes.push(d+=s[p-1].length)}return l};var Xw=Y(Hw.exports);function gj(s,r,l,d,p){z8(s,r,l||0,d||s.length-1,p||_j)}function z8(s,r,l,d,p){for(;d>l;){if(d-l>600){var g=d-l+1,y=r-l+1,b=Math.log(g),T=.5*Math.exp(2*b/3),C=.5*Math.sqrt(b*T*(g-T)/g)*(y-g/2<0?-1:1);z8(s,r,Math.max(l,Math.floor(r-y*T/g+C)),Math.min(d,Math.floor(r+(g-y)*T/g+C)),p)}var O=s[r],z=l,B=d;for(Km(s,l,r),p(s[d],O)>0&&Km(s,l,d);z<B;){for(Km(s,z,B),z++,B--;p(s[z],O)<0;)z++;for(;p(s[B],O)>0;)B--}p(s[l],O)===0?Km(s,l,B):Km(s,++B,d),B<=r&&(l=B+1),r<=B&&(d=B-1)}}function Km(s,r,l){var d=s[r];s[r]=s[l],s[l]=d}function _j(s,r){return s<r?-1:s>r?1:0}function Kw(s,r){const l=s.length;if(l<=1)return[s];const d=[];let p,g;for(let y=0;y<l;y++){const b=ln(s[y]);b!==0&&(s[y].area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(p&&d.push(p),p=[s[y]]):p.push(s[y]))}if(p&&d.push(p),r>1)for(let y=0;y<d.length;y++)d[y].length<=r||(gj(d[y],r,1,d[y].length-1,yj),d[y]=d[y].slice(0,r));return d}function yj(s,r){return r.area-s.area}function Yw(s,r,l){const d=l.patternDependencies;let p=!1;for(const g of r){const y=g.paint.get(`${s}-pattern`);y.isConstant()||(p=!0);const b=y.constantOr(null);b&&(p=!0,d[b]=!0)}return p}function Jw(s,r,l,d,p){const g=p.patternDependencies;for(const y of r){const b=y.paint.get(`${s}-pattern`).value;if(b.kind!=="constant"){let T=b.evaluate({zoom:d},l,{},p.availableImages);T=T&&T.name?T.name:T,g[T]=!0,l.patterns[y.id]=T}}return l}class Ey{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vt,this.indexArray=new Mn,this.indexArray2=new To,this.programConfigurations=new Bh(r.layers,r.zoom),this.segments=new Ki,this.segments2=new Ki,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=r.projection}populate(r,l,d,p){this.hasPattern=Yw("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:b,id:T,index:C,sourceLayerIndex:O}of r){const z=this.layers[0]._featureFilter.needGeometry,B=Hh(b,z);if(!this.layers[0]._featureFilter.filter(new L(this.zoom),B,d))continue;const G=g?g.evaluate(B,{},d,l.availableImages):void 0,X={id:T,properties:b.properties,type:b.type,sourceLayerIndex:O,index:C,geometry:z?B.geometry:Eu(b,d,p),patterns:{},sortKey:G};y.push(X)}g&&y.sort((b,T)=>b.sortKey-T.sortKey);for(const b of y){const{geometry:T,index:C,sourceLayerIndex:O}=b;if(this.hasPattern){const z=Jw("fill",this.layers,b,this.zoom,l);this.patternFeatures.push(z)}else this.addFeature(b,T,C,d,{},l.availableImages);l.featureIndex.insert(r[C].feature,T,C,O,this.index)}}update(r,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d,p)}addFeatures(r,l,d,p,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,l,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,aj),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,l,d,p,g,y=[]){for(const b of Kw(l,500)){let T=0;for(const X of b)T+=X.length;const C=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),O=C.vertexLength,z=[],B=[];for(const X of b){if(X.length===0)continue;X!==b[0]&&B.push(z.length/2);const te=this.segments2.prepareSegment(X.length,this.layoutVertexArray,this.indexArray2),ce=te.vertexLength;this.layoutVertexArray.emplaceBack(X[0].x,X[0].y),this.indexArray2.emplaceBack(ce+X.length-1,ce),z.push(X[0].x),z.push(X[0].y);for(let xe=1;xe<X.length;xe++)this.layoutVertexArray.emplaceBack(X[xe].x,X[xe].y),this.indexArray2.emplaceBack(ce+xe-1,ce+xe),z.push(X[xe].x),z.push(X[xe].y);te.vertexLength+=X.length,te.primitiveLength+=X.length}const G=Xw(z,B);for(let X=0;X<G.length;X+=3)this.indexArray.emplaceBack(O+G[X],O+G[X+1],O+G[X+2]);C.vertexLength+=T,C.primitiveLength+=G.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,g,y,p)}}En(Ey,"FillBucket",{omit:["layers","patternFeatures"]});const vj=new ke({"fill-sort-key":new he(vt.layout_fill["fill-sort-key"])});var xj={paint:new ke({"fill-antialias":new Q(vt.paint_fill["fill-antialias"]),"fill-opacity":new he(vt.paint_fill["fill-opacity"]),"fill-color":new he(vt.paint_fill["fill-color"]),"fill-outline-color":new he(vt.paint_fill["fill-outline-color"]),"fill-translate":new Q(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new Q(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new he(vt.paint_fill["fill-pattern"])}),layout:vj};const bj=et([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),wj=et([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Ej=et([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Sj}=bj;var Sy={},Tj=M,F8=mf;function mf(s,r,l,d,p){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=d,this._values=p,s.readFields(Cj,this,r)}function Cj(s,r,l){s==1?r.id=l.readVarint():s==2?function(d,p){for(var g=d.readVarint()+d.pos;d.pos<g;){var y=p._keys[d.readVarint()],b=p._values[d.readVarint()];p.properties[y]=b}}(l,r):s==3?r.type=l.readVarint():s==4&&(r._geometry=l.pos)}function kj(s){for(var r,l,d=0,p=0,g=s.length,y=g-1;p<g;y=p++)d+=((l=s[y]).x-(r=s[p]).x)*(r.y+l.y);return d}mf.types=["Unknown","Point","LineString","Polygon"],mf.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var r,l=s.readVarint()+s.pos,d=1,p=0,g=0,y=0,b=[];s.pos<l;){if(p<=0){var T=s.readVarint();d=7&T,p=T>>3}if(p--,d===1||d===2)g+=s.readSVarint(),y+=s.readSVarint(),d===1&&(r&&b.push(r),r=[]),r.push(new Tj(g,y));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&b.push(r),b},mf.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var r=s.readVarint()+s.pos,l=1,d=0,p=0,g=0,y=1/0,b=-1/0,T=1/0,C=-1/0;s.pos<r;){if(d<=0){var O=s.readVarint();l=7&O,d=O>>3}if(d--,l===1||l===2)(p+=s.readSVarint())<y&&(y=p),p>b&&(b=p),(g+=s.readSVarint())<T&&(T=g),g>C&&(C=g);else if(l!==7)throw new Error("unknown command "+l)}return[y,T,b,C]},mf.prototype.toGeoJSON=function(s,r,l){var d,p,g=this.extent*Math.pow(2,l),y=this.extent*s,b=this.extent*r,T=this.loadGeometry(),C=mf.types[this.type];function O(G){for(var X=0;X<G.length;X++){var te=G[X];G[X]=[360*(te.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+b)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(d=0;d<T.length;d++)z[d]=T[d][0];O(T=z);break;case 2:for(d=0;d<T.length;d++)O(T[d]);break;case 3:for(T=function(G){var X=G.length;if(X<=1)return[G];for(var te,ce,xe=[],Me=0;Me<X;Me++){var be=kj(G[Me]);be!==0&&(ce===void 0&&(ce=be<0),ce===be<0?(te&&xe.push(te),te=[G[Me]]):te.push(G[Me]))}return te&&xe.push(te),xe}(T),d=0;d<T.length;d++)for(p=0;p<T[d].length;p++)O(T[d][p])}T.length===1?T=T[0]:C="Multi"+C;var B={type:"Feature",geometry:{type:C,coordinates:T},properties:this.properties};return"id"in this&&(B.id=this.id),B};var Pj=F8,N8=B8;function B8(s,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(Ij,this,r),this.length=this._features.length}function Ij(s,r,l){s===15?r.version=l.readVarint():s===1?r.name=l.readString():s===5?r.extent=l.readVarint():s===2?r._features.push(l.pos):s===3?r._keys.push(l.readString()):s===4&&r._values.push(function(d){for(var p=null,g=d.readVarint()+d.pos;d.pos<g;){var y=d.readVarint()>>3;p=y===1?d.readString():y===2?d.readFloat():y===3?d.readDouble():y===4?d.readVarint64():y===5?d.readVarint():y===6?d.readSVarint():y===7?d.readBoolean():null}return p}(l))}B8.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var r=this._pbf.readVarint()+this._pbf.pos;return new Pj(this._pbf,r,this.extent,this._keys,this._values)};var Aj=N8;function Mj(s,r,l){if(s===3){var d=new Aj(l,l.readVarint()+l.pos);d.length&&(r[d.name]=d)}}var Qw=Sy.VectorTile=function(s,r){this.layers=s.readFields(Mj,{},r)},Ty=Sy.VectorTileFeature=F8;function Cy(s,r,l,d){const p=[],g=d===0?(y,b,T,C,O,z)=>{y.push(new fe(z,T+(z-b)/(C-b)*(O-T)))}:(y,b,T,C,O,z)=>{y.push(new fe(b+(z-T)/(O-T)*(C-b),z))};for(const y of s){const b=[];for(const T of y){if(T.length<=2)continue;const C=[];for(let B=0;B<T.length-1;B++){const G=T[B].x,X=T[B].y,te=T[B+1].x,ce=T[B+1].y,xe=d===0?G:X,Me=d===0?te:ce;xe<r?Me>r&&g(C,G,X,te,ce,r):xe>l?Me<l&&g(C,G,X,te,ce,l):C.push(T[B]),Me<r&&xe>=r&&g(C,G,X,te,ce,r),Me>l&&xe<=l&&g(C,G,X,te,ce,l)}let O=T[T.length-1];const z=d===0?O.x:O.y;z>=r&&z<=l&&C.push(O),C.length&&(O=C[C.length-1],C[0].x===O.x&&C[0].y===O.y||C.push(C[0]),b.push(C))}b.length&&p.push(b)}return p}Sy.VectorTileLayer=N8;const Dj=Ty.types,Oj=Math.pow(2,13);function Ym(s,r,l,d,p,g,y,b){s.emplaceBack((r<<1)+y,(l<<1)+g,(Math.floor(d*Oj)<<1)+p,Math.round(b))}function Jm(s,r,l){s.emplaceBack(r.x,r.y,r.z,l[0]*16384,l[1]*16384,l[2]*16384)}class j8{constructor(){this.acc=new fe(0,0),this.polyCount=[]}startRing(r){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new fe(r.x,r.y),this.max=new fe(r.x,r.y))}append(r,l){this.currentPolyCount.edges++,this.acc._add(r);const d=this.min,p=this.max;r.x<d.x?d.x=r.x:r.x>p.x&&(p.x=r.x),r.y<d.y?d.y=r.y:r.y>p.y&&(p.y=r.y),((r.x===0||r.x===Hn)&&r.x===l.x)!=((r.y===0||r.y===Hn)&&r.y===l.y)&&this.processBorderOverlap(r,l),l.x<0!=r.x<0&&this.addBorderIntersection(0,Sr(l.y,r.y,(0-l.x)/(r.x-l.x))),l.x>Hn!=r.x>Hn&&this.addBorderIntersection(1,Sr(l.y,r.y,(Hn-l.x)/(r.x-l.x))),l.y<0!=r.y<0&&this.addBorderIntersection(2,Sr(l.x,r.x,(0-l.y)/(r.y-l.y))),l.y>Hn!=r.y>Hn&&this.addBorderIntersection(3,Sr(l.x,r.x,(Hn-l.y)/(r.y-l.y)))}addBorderIntersection(r,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const d=this.borders[r];l<d[0]&&(d[0]=l),l>d[1]&&(d[1]=l)}processBorderOverlap(r,l){if(r.x===l.x){if(r.y===l.y)return;const d=r.x===0?0:1;this.addBorderIntersection(d,l.y),this.addBorderIntersection(d,r.y)}else{const d=r.y===0?2:3;this.addBorderIntersection(d,l.x),this.addBorderIntersection(d,r.x)}}centroid(){const r=this.polyCount.reduce((l,d)=>l+d.edges,0);return r!==0?this.acc.div(r)._round():new fe(0,0)}span(){return new fe(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((r,l)=>r+ +(l[0]!==Number.MAX_VALUE),0)}}class Qm{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.layoutVertexArray=new Pt,this.centroidVertexArray=new Nl,this.indexArray=new Mn,this.programConfigurations=new Bh(r.layers,r.zoom),this.segments=new Ki,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.enableTerrain=r.enableTerrain}populate(r,l,d,p){this.features=[],this.hasPattern=Yw("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const y=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*y/(y*y+1)/Hn/(1<<g.z)}(d),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:y,index:b,sourceLayerIndex:T}of r){const C=this.layers[0]._featureFilter.needGeometry,O=Hh(g,C);if(!this.layers[0]._featureFilter.filter(new L(this.zoom),O,d))continue;const z={id:y,sourceLayerIndex:T,index:b,geometry:C?O.geometry:Eu(g,d,p),properties:g.properties,type:g.type,patterns:{}},B=this.layoutVertexArray.length;this.hasPattern?this.features.push(Jw("fill-extrusion",this.layers,z,this.zoom,l)):this.addFeature(z,z.geometry,b,d,{},l.availableImages,p),l.featureIndex.insert(g,z.geometry,b,T,this.index,B)}this.sortBorders()}addFeatures(r,l,d,p,g){for(const y of this.features){const{geometry:b}=y;this.addFeature(y,b,y.index,l,d,p,g)}this.sortBorders()}update(r,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Sj),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,Ej.members,!0))),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,wj.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,l,d,p,g,y,b){const T=[new fe(0,0),new fe(Hn,Hn)],C=b.projection,O=C.name==="globe",z=this.enableTerrain&&!O?new j8:null,B=Dj[r.type]==="Polygon";O&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ht);const G=Kw(l,500);for(let xe=G.length-1;xe>=0;xe--){const Me=G[xe];(Me.length===0||(X=Me[0]).every(be=>be.x<=0)||X.every(be=>be.x>=Hn)||X.every(be=>be.y<=0)||X.every(be=>be.y>=Hn))&&G.splice(xe,1)}var X;let te;if(O)te=G8(G,T,p);else{te=[];for(const xe of G)te.push({polygon:xe,bounds:T})}const ce=B?this.edgeRadius:0;for(const{polygon:xe,bounds:Me}of te){let be=0,Ae=0;for(const Fe of xe)B&&!Fe[0].equals(Fe[Fe.length-1])&&Fe.push(Fe[0]),Ae+=B?Fe.length-1:Fe.length;const Ne=this.segments.prepareSegment((B?5:4)*Ae,this.layoutVertexArray,this.indexArray);if(B){const Fe=[],pt=[];be=Ne.vertexLength;for(const Et of xe){let Wt,gt;Et.length&&Et!==xe[0]&&pt.push(Fe.length/2),Wt=Et[1].sub(Et[0])._perp()._unit();for(let Mt=1;Mt<Et.length;Mt++){const Dt=Et[Mt],Nt=Et[Mt===Et.length-1?1:Mt+1];let{x:Xt,y:bt}=Dt;if(ce){gt=Nt.sub(Dt)._perp()._unit();const hn=Wt.add(gt)._unit(),kn=ce*Math.min(4,1/(Wt.x*hn.x+Wt.y*hn.y));Xt+=kn*hn.x,bt+=kn*hn.y,Wt=gt}Ym(this.layoutVertexArray,Xt,bt,0,0,1,1,0),Ne.vertexLength++,Fe.push(Dt.x,Dt.y),O&&Jm(this.layoutVertexExtArray,C.projectTilePoint(Xt,bt,p),C.upVector(p,Xt,bt))}}const lt=Xw(Fe,pt);for(let Et=0;Et<lt.length;Et+=3)this.indexArray.emplaceBack(be+lt[Et],be+lt[Et+2],be+lt[Et+1]),Ne.primitiveLength++}for(const Fe of xe){z&&Fe.length&&z.startRing(Fe[0]);let pt,lt,Et,Wt=Fe.length>4&&W8(Fe[Fe.length-2],Fe[0],Fe[1]),gt=ce?Rj(Fe[Fe.length-2],Fe[0],Fe[1],ce):0;lt=Fe[1].sub(Fe[0])._perp()._unit();let Mt=!0;for(let Dt=1,Nt=0;Dt<Fe.length;Dt++){let Xt=Fe[Dt-1],bt=Fe[Dt];const hn=Fe[Dt===Fe.length-1?1:Dt+1];if(z&&B&&z.currentPolyCount.top++,V8(bt,Xt,Me)){ce&&(lt=hn.sub(bt)._perp()._unit(),Mt=!Mt);continue}z&&z.append(bt,Xt);const kn=bt.sub(Xt)._perp(),pn=kn.x/(Math.abs(kn.x)+Math.abs(kn.y)),sr=kn.y>0?1:0,Yt=Xt.dist(bt);if(Nt+Yt>32768&&(Nt=0),ce){Et=hn.sub(bt)._perp()._unit();let cr=U8(Xt,bt,hn,$8(lt,Et),ce);isNaN(cr)&&(cr=0);const Kn=bt.sub(Xt)._unit();Xt=Xt.add(Kn.mult(gt))._round(),bt=bt.add(Kn.mult(-cr))._round(),gt=cr,lt=Et}const Bn=Ne.vertexLength,lr=Fe.length>4&&W8(Xt,bt,hn);let Lr=H8(Nt,Wt,Mt);if(Ym(this.layoutVertexArray,Xt.x,Xt.y,pn,sr,0,0,Lr),Ym(this.layoutVertexArray,Xt.x,Xt.y,pn,sr,0,1,Lr),Nt+=Yt,Lr=H8(Nt,lr,!Mt),Wt=lr,Ym(this.layoutVertexArray,bt.x,bt.y,pn,sr,0,0,Lr),Ym(this.layoutVertexArray,bt.x,bt.y,pn,sr,0,1,Lr),Ne.vertexLength+=4,this.indexArray.emplaceBack(Bn+0,Bn+1,Bn+2),this.indexArray.emplaceBack(Bn+1,Bn+3,Bn+2),Ne.primitiveLength+=2,ce){const cr=be+(Dt===1?Fe.length-2:Dt-2),Kn=Dt===1?be:cr+1;if(this.indexArray.emplaceBack(Bn+1,cr,Bn+3),this.indexArray.emplaceBack(cr,Kn,Bn+3),Ne.primitiveLength+=2,pt===void 0&&(pt=Bn),!V8(hn,Fe[Dt],Me)){const di=Dt===Fe.length-1?pt:Ne.vertexLength;this.indexArray.emplaceBack(Bn+2,Bn+3,di),this.indexArray.emplaceBack(Bn+3,di+1,di),this.indexArray.emplaceBack(Bn+3,Kn,di+1),Ne.primitiveLength+=3}Mt=!Mt}if(O){const cr=this.layoutVertexExtArray,Kn=C.projectTilePoint(Xt.x,Xt.y,p),di=C.projectTilePoint(bt.x,bt.y,p),hr=C.upVector(p,Xt.x,Xt.y),pr=C.upVector(p,bt.x,bt.y);Jm(cr,Kn,hr),Jm(cr,Kn,hr),Jm(cr,di,pr),Jm(cr,di,pr)}}B&&(be+=Fe.length-1)}}if(z&&z.polyCount.length>0){if(z.borders){z.vertexArrayOffset=this.centroidVertexArray.length;const xe=z.borders,Me=this.featuresOnBorder.push(z)-1;for(let be=0;be<4;be++)xe[be][0]!==Number.MAX_VALUE&&this.borders[be].push(Me)}this.encodeCentroid(z.borders?void 0:z.centroid(),z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,g,y,p)}sortBorders(){for(let r=0;r<4;r++)this.borders[r].sort((l,d)=>this.featuresOnBorder[l].borders[r][0]-this.featuresOnBorder[d].borders[r][0])}encodeCentroid(r,l,d=!0){let p,g;if(r)if(r.y!==0){const b=l.span()._mult(this.tileToMeter);p=(Math.max(r.x,1)<<3)+Math.min(7,Math.round(b.x/10)),g=(Math.max(r.y,1)<<3)+Math.min(7,Math.round(b.y/10))}else p=Math.ceil(7*(r.x+450)),g=0;else p=0,g=+d;let y=d?this.centroidVertexArray.length:l.vertexArrayOffset;for(const b of l.polyCount){d&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*b.edges+b.top);for(let T=0;T<b.top;T++)this.centroidVertexArray.emplace(y++,p,g);for(let T=0;T<2*b.edges;T++)this.centroidVertexArray.emplace(y++,0,g),this.centroidVertexArray.emplace(y++,p,g)}}}function $8(s,r){const l=s.add(r)._unit();return s.x*l.x+s.y*l.y}function Rj(s,r,l,d){const p=r.sub(s)._perp()._unit(),g=l.sub(r)._perp()._unit();return U8(s,r,l,$8(p,g),d)}function U8(s,r,l,d,p){const g=Math.sqrt(1-d*d);return Math.min(s.dist(r)/3,r.dist(l)/3,p*g/d)}function V8(s,r,l){return s.x<l[0].x&&r.x<l[0].x||s.x>l[1].x&&r.x>l[1].x||s.y<l[0].y&&r.y<l[0].y||s.y>l[1].y&&r.y>l[1].y}function W8(s,r,l){if(s.x<0||s.x>=Hn||r.x<0||r.x>=Hn||l.x<0||l.x>=Hn)return!1;const d=l.sub(r),p=d.perp(),g=s.sub(r);return(d.x*g.x+d.y*g.y)/Math.sqrt((d.x*d.x+d.y*d.y)*(g.x*g.x+g.y*g.y))>-.866&&p.x*g.x+p.y*g.y<0}function H8(s,r,l){const d=r?2|s:-3&s;return l?1|d:-2&d}function q8(){const s=Math.PI/32,r=Math.tan(s),l=qm;return l*Math.sqrt(1+2*r*r)-l}function G8(s,r,l){const d=1<<l.z,p=Ds(l.x/d),g=Ds((l.x+1)/d),y=Yo(l.y/d),b=Yo((l.y+1)/d);return function(T,C,O,z,B=0,G){const X=[];if(!T.length||!O||!z)return X;const te=(Fe,pt)=>{for(const lt of Fe)X.push({polygon:lt,bounds:pt})},ce=Math.ceil(Math.log2(O)),xe=Math.ceil(Math.log2(z)),Me=ce-xe,be=[];for(let Fe=0;Fe<Math.abs(Me);Fe++)be.push(Me>0?0:1);for(let Fe=0;Fe<Math.min(ce,xe);Fe++)be.push(0),be.push(1);let Ae=T;if(Ae=Cy(Ae,C[0].y-B,C[1].y+B,1),Ae=Cy(Ae,C[0].x-B,C[1].x+B,0),!Ae.length)return X;const Ne=[];for(be.length?Ne.push({polygons:Ae,bounds:C,depth:0}):te(Ae,C);Ne.length;){const Fe=Ne.pop(),pt=Fe.depth,lt=be[pt],Et=Fe.bounds[0],Wt=Fe.bounds[1],gt=lt===0?Et.x:Et.y,Mt=lt===0?Wt.x:Wt.y,Dt=G?G(lt,gt,Mt):.5*(gt+Mt),Nt=Cy(Fe.polygons,gt-B,Dt+B,lt),Xt=Cy(Fe.polygons,Dt-B,Mt+B,lt);if(Nt.length){const bt=[Et,new fe(lt===0?Dt:Wt.x,lt===1?Dt:Wt.y)];be.length>pt+1?Ne.push({polygons:Nt,bounds:bt,depth:pt+1}):te(Nt,bt)}if(Xt.length){const bt=[new fe(lt===0?Dt:Et.x,lt===1?Dt:Et.y),Wt];be.length>pt+1?Ne.push({polygons:Xt,bounds:bt,depth:pt+1}):te(Xt,bt)}}return X}(s,r,Math.ceil((g-p)/11.25),Math.ceil((y-b)/11.25),1,(T,C,O)=>{if(T===0)return .5*(C+O);{const z=Yo((l.y+C/Hn)/d);return(Ac(.5*(Yo((l.y+O/Hn)/d)+z))*d-l.y)*Hn}})}En(Qm,"FillExtrusionBucket",{omit:["layers","features"]}),En(j8,"PartMetadata");const Lj=new ke({"fill-extrusion-edge-radius":new Q(vt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var zj={paint:new ke({"fill-extrusion-opacity":new Q(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new he(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Q(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Q(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new he(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new he(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new he(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Q(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Q(vt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Q(vt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Q(vt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Lj};function Z8(s,r,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[s*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class ky{constructor(r,l,d){this.z=r,this.x=l,this.y=d,this.key=eg(0,r,r,l,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,l){const d=function(g,y,b){var T=Z8(256*g,256*(y=Math.pow(2,b)-y-1),b),C=Z8(256*(g+1),256*(y+1),b);return T[0]+","+T[1]+","+C[0]+","+C[1]}(this.x,this.y,this.z),p=function(g,y,b){let T,C="";for(let O=g;O>0;O--)T=1<<O-1,C+=(y&T?1:0)+(b&T?2:0);return C}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",d)}toString(){return`${this.z}/${this.x}/${this.y}`}}class X8{constructor(r,l){this.wrap=r,this.canonical=l,this.key=eg(r,l.z,l.z,l.x,l.y)}}class Ea{constructor(r,l,d,p,g){this.overscaledZ=r,this.wrap=l,this.canonical=new ky(d,+p,+g),this.key=l===0&&r===d?this.canonical.key:eg(l,r,d,p,g)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const l=this.canonical.z-r;return r>this.canonical.z?new Ea(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ea(r,this.wrap,r,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(r,l=!0){if(this.overscaledZ===r&&l)return this.key;if(r>this.canonical.z)return eg(this.wrap*+l,r,this.canonical.z,this.canonical.x,this.canonical.y);{const d=this.canonical.z-r;return eg(this.wrap*+l,r,r,this.canonical.x>>d,this.canonical.y>>d)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const l=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>l&&r.canonical.y===this.canonical.y>>l}children(r){if(this.overscaledZ>=r)return[new Ea(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,p=2*this.canonical.y;return[new Ea(l,this.wrap,l,d,p),new Ea(l,this.wrap,l,d+1,p),new Ea(l,this.wrap,l,d,p+1),new Ea(l,this.wrap,l,d+1,p+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Ea(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Ea(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new X8(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function eg(s,r,l,d,p){const g=1<<Math.min(l,22);let y=g*(p%g)+d%g;return s&&l<22&&(y+=g*g*((s<0?-2*s-1:2*s)%(1<<2*(22-l)))),16*(32*y+l)+(r-l)}En(ky,"CanonicalTileID"),En(Ea,"OverscaledTileID",{omit:["projMatrix"]});class gf extends fe{constructor(r,l,d){super(r,l),this.z=d}}function tg(s,r){return s.x*r.x+s.y*r.y}function K8(s,r){if(s.length===1){let l=0;const d=r[l++];let p;for(;!p||d.equals(p);)if(p=r[l++],!p)return 1/0;for(;l<r.length;l++){const g=r[l],y=s[0],b=p.sub(d),T=g.sub(d),C=y.sub(d),O=tg(b,b),z=tg(b,T),B=tg(T,T),G=tg(C,b),X=tg(C,T),te=O*B-z*z,ce=(B*G-z*X)/te,xe=(O*X-z*G)/te,Me=d.z*(1-ce-xe)+p.z*ce+g.z*xe;if(isFinite(Me))return Me}return 1/0}{let l=1/0;for(const d of r)l=Math.min(l,d.z);return l}}function Y8(s,r,l,d,p,g,y,b){const T=y*p.getElevationAt(s,r,!0,!0),C=g[0]!==0,O=C?g[1]===0?y*(g[0]/7-450):y*function(z,B,G){const X=Math.floor(B[0]/8),te=Math.floor(B[1]/8),ce=10*(B[0]-8*X),xe=10*(B[1]-8*te),Me=z.getElevationAt(X,te,!0,!0),be=z.getMeterToDEM(G),Ae=Math.floor(.5*(ce*be-1)),Ne=Math.floor(.5*(xe*be-1)),Fe=z.tileCoordToPixel(X,te),pt=2*Ae+1,lt=2*Ne+1,Et=function(Xt,bt,hn,kn,pn){return[Xt.getElevationAtPixel(bt,hn,!0),Xt.getElevationAtPixel(bt+pn,hn,!0),Xt.getElevationAtPixel(bt,hn+pn,!0),Xt.getElevationAtPixel(bt+kn,hn+pn,!0)]}(z,Fe.x-Ae,Fe.y-Ne,pt,lt),Wt=Math.abs(Et[0]-Et[1]),gt=Math.abs(Et[2]-Et[3]),Mt=Math.abs(Et[0]-Et[2])+Math.abs(Et[1]-Et[3]),Dt=Math.min(.25,.5*be*(Wt+gt)/pt),Nt=Math.min(.25,.5*be*Mt/lt);return Me+Math.max(Dt*ce,Nt*xe)}(p,g,b):T;return{base:T+(l===0)?-1:l,top:C?Math.max(O+d,T+l+2):T+d}}const Fj=et([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Nj}=Fj,Bj=et([{name:"a_packed",components:4,type:"Float32"}]),{members:jj}=Bj,$j=Ty.types,Uj=Math.cos(Math.PI/180*37.5);class Py{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new mt,this.layoutVertexArray2=new $t,this.indexArray=new Mn,this.programConfigurations=new Bh(r.layers,r.zoom),this.segments=new Ki,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d,p){this.hasPattern=Yw("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),y=[];for(const{feature:O,id:z,index:B,sourceLayerIndex:G}of r){const X=this.layers[0]._featureFilter.needGeometry,te=Hh(O,X);if(!this.layers[0]._featureFilter.filter(new L(this.zoom),te,d))continue;const ce=g?g.evaluate(te,{},d):void 0,xe={id:z,properties:O.properties,type:O.type,sourceLayerIndex:G,index:B,geometry:X?te.geometry:Eu(O,d,p),patterns:{},sortKey:ce};y.push(xe)}g&&y.sort((O,z)=>O.sortKey-z.sortKey);const{lineAtlas:b,featureIndex:T}=l,C=this.addConstantDashes(b);for(const O of y){const{geometry:z,index:B,sourceLayerIndex:G}=O;if(C&&this.addFeatureDashes(O,b),this.hasPattern){const X=Jw("line",this.layers,O,this.zoom,l);this.patternFeatures.push(X)}else this.addFeature(O,z,B,d,b.positions,l.availableImages);T.insert(r[B].feature,z,B,G,this.index)}}addConstantDashes(r){let l=!1;for(const d of this.layers){const p=d.paint.get("line-dasharray").value,g=d.layout.get("line-cap").value;if(p.kind!=="constant"||g.kind!=="constant")l=!0;else{const y=g.value,b=p.value;if(!b)continue;r.addDash(b,y)}}return l}addFeatureDashes(r,l){const d=this.zoom;for(const p of this.layers){const g=p.paint.get("line-dasharray").value,y=p.layout.get("line-cap").value;if(g.kind==="constant"&&y.kind==="constant")continue;let b,T;if(g.kind==="constant"){if(b=g.value,!b)continue}else b=g.evaluate({zoom:d},r);T=y.kind==="constant"?y.value:y.evaluate({zoom:d},r),l.addDash(b,T),r.patterns[p.id]=l.getKey(b,T)}}update(r,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d,p)}addFeatures(r,l,d,p,g){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,l,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,jj)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Nj),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,l,d,p,g,y){const b=this.layers[0].layout,T=b.get("line-join").evaluate(r,{}),C=b.get("line-cap").evaluate(r,{}),O=b.get("line-miter-limit"),z=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const B of l)this.addLine(B,r,T,C,O,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,g,y,p)}addLine(r,l,d,p,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<r.length-1;xe++)this.totalDistance+=r[xe].dist(r[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=$j[l.type]==="Polygon";let T=r.length;for(;T>=2&&r[T-1].equals(r[T-2]);)T--;let C=0;for(;C<T-1&&r[C].equals(r[C+1]);)C++;if(T<(b?3:2))return;d==="bevel"&&(g=1.05);const O=this.overscaling<=16?15*Hn/(512*this.overscaling):0,z=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let B,G,X,te,ce;this.e1=this.e2=-1,b&&(B=r[T-2],ce=r[C].sub(B)._unit()._perp());for(let xe=C;xe<T;xe++){if(X=xe===T-1?b?r[C+1]:void 0:r[xe+1],X&&r[xe].equals(X))continue;ce&&(te=ce),B&&(G=B),B=r[xe],ce=X?X.sub(B)._unit()._perp():te,te=te||ce;let Me=te.add(ce);Me.x===0&&Me.y===0||Me._unit();const be=te.x*ce.x+te.y*ce.y,Ae=Me.x*ce.x+Me.y*ce.y,Ne=Ae!==0?1/Ae:1/0,Fe=2*Math.sqrt(2-2*Ae),pt=Ae<Uj&&G&&X,lt=te.x*ce.y-te.y*ce.x>0;if(pt&&xe>C){const gt=B.dist(G);if(gt>2*O){const Mt=B.sub(B.sub(G)._mult(O/gt)._round());this.updateDistance(G,Mt),this.addCurrentVertex(Mt,te,0,0,z),G=Mt}}const Et=G&&X;let Wt=Et?d:b?"butt":p;if(Et&&Wt==="round"&&(Ne<y?Wt="miter":Ne<=2&&(Wt="fakeround")),Wt==="miter"&&Ne>g&&(Wt="bevel"),Wt==="bevel"&&(Ne>2&&(Wt="flipbevel"),Ne<g&&(Wt="miter")),G&&this.updateDistance(G,B),Wt==="miter")Me._mult(Ne),this.addCurrentVertex(B,Me,0,0,z);else if(Wt==="flipbevel"){if(Ne>100)Me=ce.mult(-1);else{const gt=Ne*te.add(ce).mag()/te.sub(ce).mag();Me._perp()._mult(gt*(lt?-1:1))}this.addCurrentVertex(B,Me,0,0,z),this.addCurrentVertex(B,Me.mult(-1),0,0,z)}else if(Wt==="bevel"||Wt==="fakeround"){const gt=-Math.sqrt(Ne*Ne-1),Mt=lt?gt:0,Dt=lt?0:gt;if(G&&this.addCurrentVertex(B,te,Mt,Dt,z),Wt==="fakeround"){const Nt=Math.round(180*Fe/Math.PI/20);for(let Xt=1;Xt<Nt;Xt++){let bt=Xt/Nt;if(bt!==.5){const kn=bt-.5;bt+=bt*kn*(bt-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*kn*kn+(.848013+be*(.215638*be-1.06021)))}const hn=ce.sub(te)._mult(bt)._add(te)._unit()._mult(lt?-1:1);this.addHalfVertex(B,hn.x,hn.y,!1,lt,0,z)}}X&&this.addCurrentVertex(B,ce,-Mt,-Dt,z)}else if(Wt==="butt")this.addCurrentVertex(B,Me,0,0,z);else if(Wt==="square"){const gt=G?1:-1;G||this.addCurrentVertex(B,Me,gt,gt,z),this.addCurrentVertex(B,Me,0,0,z),G&&this.addCurrentVertex(B,Me,gt,gt,z)}else Wt==="round"&&(G&&(this.addCurrentVertex(B,te,0,0,z),this.addCurrentVertex(B,te,1,1,z,!0)),X&&(this.addCurrentVertex(B,ce,-1,-1,z,!0),this.addCurrentVertex(B,ce,0,0,z)));if(pt&&xe<T-1){const gt=B.dist(X);if(gt>2*O){const Mt=B.add(X.sub(B)._mult(O/gt)._round());this.updateDistance(B,Mt),this.addCurrentVertex(Mt,ce,0,0,z),B=Mt}}}}addCurrentVertex(r,l,d,p,g,y=!1){const b=l.y*p-l.x,T=-l.y-l.x*p;this.addHalfVertex(r,l.x+l.y*d,l.y-l.x*d,y,!1,d,g),this.addHalfVertex(r,b,T,y,!0,-p,g)}addHalfVertex({x:r,y:l},d,p,g,y,b,T){this.layoutVertexArray.emplaceBack((r<<1)+(g?1:0),(l<<1)+(y?1:0),Math.round(63*d)+128,Math.round(63*p)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const C=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),T.primitiveLength++),y?this.e2=C:this.e1=C}updateScaledDistance(){if(this.lineClips){const r=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=r*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(r,l){this.distance+=r.dist(l),this.updateScaledDistance()}}En(Py,"LineBucket",{omit:["layers","patternFeatures"]});const Vj=new ke({"line-cap":new he(vt.layout_line["line-cap"]),"line-join":new he(vt.layout_line["line-join"]),"line-miter-limit":new Q(vt.layout_line["line-miter-limit"]),"line-round-limit":new Q(vt.layout_line["line-round-limit"]),"line-sort-key":new he(vt.layout_line["line-sort-key"])});var J8={paint:new ke({"line-opacity":new he(vt.paint_line["line-opacity"]),"line-color":new he(vt.paint_line["line-color"]),"line-translate":new Q(vt.paint_line["line-translate"]),"line-translate-anchor":new Q(vt.paint_line["line-translate-anchor"]),"line-width":new he(vt.paint_line["line-width"]),"line-gap-width":new he(vt.paint_line["line-gap-width"]),"line-offset":new he(vt.paint_line["line-offset"]),"line-blur":new he(vt.paint_line["line-blur"]),"line-dasharray":new he(vt.paint_line["line-dasharray"]),"line-pattern":new he(vt.paint_line["line-pattern"]),"line-gradient":new Ee(vt.paint_line["line-gradient"]),"line-trim-offset":new Q(vt.paint_line["line-trim-offset"])}),layout:Vj};const Q8=new class extends he{possiblyEvaluate(s,r){return r=new L(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,transition:r.transition}),super.possiblyEvaluate(s,r)}evaluate(s,r,l,d){return r=wt({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(s,r,l,d)}}(J8.paint.properties["line-width"].specification);function eC(s,r){return r>0?r+2*s:s}Q8.useIntegerZoom=!0;const Wj=et([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hj=et([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),qj=et([{name:"a_projected_pos",components:4,type:"Float32"}],4);et([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Gj=et([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Zj=et([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);et([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const tC=et([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Xj=et([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);et([{name:"triangle",components:3,type:"Uint16"}]),et([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),et([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),et([{type:"Float32",name:"offsetX"}]),et([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Fo=24;const Wl=128;function e3(s,r){const{expression:l}=r;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new L(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:p}=l;let g=0;for(;g<d.length&&d[g]<=s;)g++;g=Math.max(0,g-1);let y=g;for(;y<d.length&&d[y]<s+1;)y++;y=Math.min(d.length-1,y);const b=d[g],T=d[y];return l.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:T,interpolationType:p}:{kind:"camera",minZoom:b,maxZoom:T,minSize:l.evaluate(new L(b)),maxSize:l.evaluate(new L(T)),interpolationType:p}}}function Iy(s,{uSize:r,uSizeT:l},{lowerSize:d,upperSize:p}){return s.kind==="source"?d/Wl:s.kind==="composite"?Sr(d/Wl,p/Wl,l):r}function _f(s,r){let l=0,d=0;if(s.kind==="constant")d=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:p,minZoom:g,maxZoom:y}=s,b=p?Le(aa.interpolationFactor(p,r,g,y),0,1):0;s.kind==="camera"?d=Sr(s.minSize,s.maxSize,b):l=b}return{uSizeT:l,uSize:d}}var Kj=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Wl,evaluateSizeForFeature:Iy,evaluateSizeForZoom:_f,getSizeData:e3});function Yj(s,r,l){return s.sections.forEach(d=>{d.text=function(p,g,y){const b=g.layout.get("text-transform").evaluate(y,{});return b==="uppercase"?p=p.toLocaleUpperCase():b==="lowercase"&&(p=p.toLocaleLowerCase()),A.applyArabicShaping&&(p=A.applyArabicShaping(p)),p}(d.text,r,l)}),s}const ng={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Jj(s){return s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""}function Qj(s){return s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""||s===""}var nC=ii,rC=function(s,r,l,d,p){var g,y,b=8*p-d-1,T=(1<<b)-1,C=T>>1,O=-7,z=l?p-1:0,B=l?-1:1,G=s[r+z];for(z+=B,g=G&(1<<-O)-1,G>>=-O,O+=b;O>0;g=256*g+s[r+z],z+=B,O-=8);for(y=g&(1<<-O)-1,g>>=-O,O+=d;O>0;y=256*y+s[r+z],z+=B,O-=8);if(g===0)g=1-C;else{if(g===T)return y?NaN:1/0*(G?-1:1);y+=Math.pow(2,d),g-=C}return(G?-1:1)*y*Math.pow(2,g-d)},iC=function(s,r,l,d,p,g){var y,b,T,C=8*g-p-1,O=(1<<C)-1,z=O>>1,B=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=d?0:g-1,X=d?1:-1,te=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,y=O):(y=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-y))<1&&(y--,T*=2),(r+=y+z>=1?B/T:B*Math.pow(2,1-z))*T>=2&&(y++,T/=2),y+z>=O?(b=0,y=O):y+z>=1?(b=(r*T-1)*Math.pow(2,p),y+=z):(b=r*Math.pow(2,z-1)*Math.pow(2,p),y=0));p>=8;s[l+G]=255&b,G+=X,b/=256,p-=8);for(y=y<<p|b,C+=p;C>0;s[l+G]=255&y,G+=X,y/=256,C-=8);s[l+G-X]|=128*te};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function ii(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}ii.Varint=0,ii.Fixed64=1,ii.Bytes=2,ii.Fixed32=5;var t3=4294967296,oC=1/t3,aC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Tu(s){return s.type===ii.Bytes?s.readVarint()+s.pos:s.pos+1}function yf(s,r,l){return l?4294967296*r+(s>>>0):4294967296*(r>>>0)+(s>>>0)}function sC(s,r,l){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));l.realloc(d);for(var p=l.pos-1;p>=s;p--)l.buf[p+d]=l.buf[p]}function e$(s,r){for(var l=0;l<s.length;l++)r.writeVarint(s[l])}function t$(s,r){for(var l=0;l<s.length;l++)r.writeSVarint(s[l])}function n$(s,r){for(var l=0;l<s.length;l++)r.writeFloat(s[l])}function r$(s,r){for(var l=0;l<s.length;l++)r.writeDouble(s[l])}function i$(s,r){for(var l=0;l<s.length;l++)r.writeBoolean(s[l])}function o$(s,r){for(var l=0;l<s.length;l++)r.writeFixed32(s[l])}function a$(s,r){for(var l=0;l<s.length;l++)r.writeSFixed32(s[l])}function s$(s,r){for(var l=0;l<s.length;l++)r.writeFixed64(s[l])}function l$(s,r){for(var l=0;l<s.length;l++)r.writeSFixed64(s[l])}function Ay(s,r){return(s[r]|s[r+1]<<8|s[r+2]<<16)+16777216*s[r+3]}function vf(s,r,l){s[l]=r,s[l+1]=r>>>8,s[l+2]=r>>>16,s[l+3]=r>>>24}function lC(s,r){return(s[r]|s[r+1]<<8|s[r+2]<<16)+(s[r+3]<<24)}ii.prototype={destroy:function(){this.buf=null},readFields:function(s,r,l){for(l=l||this.length;this.pos<l;){var d=this.readVarint(),p=d>>3,g=this.pos;this.type=7&d,s(p,r,this),this.pos===g&&this.skip(d)}return r},readMessage:function(s,r){return this.readFields(s,r,this.readVarint()+this.pos)},readFixed32:function(){var s=Ay(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=lC(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Ay(this.buf,this.pos)+Ay(this.buf,this.pos+4)*t3;return this.pos+=8,s},readSFixed64:function(){var s=Ay(this.buf,this.pos)+lC(this.buf,this.pos+4)*t3;return this.pos+=8,s},readFloat:function(){var s=rC(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=rC(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var r,l,d=this.buf;return r=127&(l=d[this.pos++]),l<128?r:(r|=(127&(l=d[this.pos++]))<<7,l<128?r:(r|=(127&(l=d[this.pos++]))<<14,l<128?r:(r|=(127&(l=d[this.pos++]))<<21,l<128?r:function(p,g,y){var b,T,C=y.buf;if(b=(112&(T=C[y.pos++]))>>4,T<128||(b|=(127&(T=C[y.pos++]))<<3,T<128)||(b|=(127&(T=C[y.pos++]))<<10,T<128)||(b|=(127&(T=C[y.pos++]))<<17,T<128)||(b|=(127&(T=C[y.pos++]))<<24,T<128)||(b|=(1&(T=C[y.pos++]))<<31,T<128))return yf(p,b,g);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(l=d[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,r=this.pos;return this.pos=s,s-r>=12&&aC?function(l,d,p){return aC.decode(l.subarray(d,p))}(this.buf,r,s):function(l,d,p){for(var g="",y=d;y<p;){var b,T,C,O=l[y],z=null,B=O>239?4:O>223?3:O>191?2:1;if(y+B>p)break;B===1?O<128&&(z=O):B===2?(192&(b=l[y+1]))==128&&(z=(31&O)<<6|63&b)<=127&&(z=null):B===3?(T=l[y+2],(192&(b=l[y+1]))==128&&(192&T)==128&&((z=(15&O)<<12|(63&b)<<6|63&T)<=2047||z>=55296&&z<=57343)&&(z=null)):B===4&&(T=l[y+2],C=l[y+3],(192&(b=l[y+1]))==128&&(192&T)==128&&(192&C)==128&&((z=(15&O)<<18|(63&b)<<12|(63&T)<<6|63&C)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,B=1):z>65535&&(z-=65536,g+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),g+=String.fromCharCode(z),y+=B}return g}(this.buf,r,s)},readBytes:function(){var s=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,s);return this.pos=s,r},readPackedVarint:function(s,r){if(this.type!==ii.Bytes)return s.push(this.readVarint(r));var l=Tu(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(r));return s},readPackedSVarint:function(s){if(this.type!==ii.Bytes)return s.push(this.readSVarint());var r=Tu(this);for(s=s||[];this.pos<r;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==ii.Bytes)return s.push(this.readBoolean());var r=Tu(this);for(s=s||[];this.pos<r;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==ii.Bytes)return s.push(this.readFloat());var r=Tu(this);for(s=s||[];this.pos<r;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==ii.Bytes)return s.push(this.readDouble());var r=Tu(this);for(s=s||[];this.pos<r;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==ii.Bytes)return s.push(this.readFixed32());var r=Tu(this);for(s=s||[];this.pos<r;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==ii.Bytes)return s.push(this.readSFixed32());var r=Tu(this);for(s=s||[];this.pos<r;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==ii.Bytes)return s.push(this.readFixed64());var r=Tu(this);for(s=s||[];this.pos<r;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==ii.Bytes)return s.push(this.readSFixed64());var r=Tu(this);for(s=s||[];this.pos<r;)s.push(this.readSFixed64());return s},skip:function(s){var r=7&s;if(r===ii.Varint)for(;this.buf[this.pos++]>127;);else if(r===ii.Bytes)this.pos=this.readVarint()+this.pos;else if(r===ii.Fixed32)this.pos+=4;else{if(r!==ii.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(s,r){this.writeVarint(s<<3|r)},realloc:function(s){for(var r=this.length||16;r<this.pos+s;)r*=2;if(r!==this.length){var l=new Uint8Array(r);l.set(this.buf),this.buf=l,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),vf(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),vf(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),vf(this.buf,-1&s,this.pos),vf(this.buf,Math.floor(s*oC),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),vf(this.buf,-1&s,this.pos),vf(this.buf,Math.floor(s*oC),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(r,l){var d,p;if(r>=0?(d=r%4294967296|0,p=r/4294967296|0):(p=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,p=p+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(g,y,b){b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,b.buf[b.pos]=127&(g>>>=7)}(d,0,l),function(g,y){var b=(7&g)<<4;y.buf[y.pos++]|=b|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))}(p,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var r=this.pos;this.pos=function(d,p,g){for(var y,b,T=0;T<p.length;T++){if((y=p.charCodeAt(T))>55295&&y<57344){if(!b){y>56319||T+1===p.length?(d[g++]=239,d[g++]=191,d[g++]=189):b=y;continue}if(y<56320){d[g++]=239,d[g++]=191,d[g++]=189,b=y;continue}y=b-55296<<10|y-56320|65536,b=null}else b&&(d[g++]=239,d[g++]=191,d[g++]=189,b=null);y<128?d[g++]=y:(y<2048?d[g++]=y>>6|192:(y<65536?d[g++]=y>>12|224:(d[g++]=y>>18|240,d[g++]=y>>12&63|128),d[g++]=y>>6&63|128),d[g++]=63&y|128)}return g}(this.buf,s,this.pos);var l=this.pos-r;l>=128&&sC(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),iC(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),iC(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var r=s.length;this.writeVarint(r),this.realloc(r);for(var l=0;l<r;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,r){this.pos++;var l=this.pos;s(r,this);var d=this.pos-l;d>=128&&sC(l,d,this),this.pos=l-1,this.writeVarint(d),this.pos+=d},writeMessage:function(s,r,l){this.writeTag(s,ii.Bytes),this.writeRawMessage(r,l)},writePackedVarint:function(s,r){r.length&&this.writeMessage(s,e$,r)},writePackedSVarint:function(s,r){r.length&&this.writeMessage(s,t$,r)},writePackedBoolean:function(s,r){r.length&&this.writeMessage(s,i$,r)},writePackedFloat:function(s,r){r.length&&this.writeMessage(s,n$,r)},writePackedDouble:function(s,r){r.length&&this.writeMessage(s,r$,r)},writePackedFixed32:function(s,r){r.length&&this.writeMessage(s,o$,r)},writePackedSFixed32:function(s,r){r.length&&this.writeMessage(s,a$,r)},writePackedFixed64:function(s,r){r.length&&this.writeMessage(s,s$,r)},writePackedSFixed64:function(s,r){r.length&&this.writeMessage(s,l$,r)},writeBytesField:function(s,r){this.writeTag(s,ii.Bytes),this.writeBytes(r)},writeFixed32Field:function(s,r){this.writeTag(s,ii.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(s,r){this.writeTag(s,ii.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(s,r){this.writeTag(s,ii.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(s,r){this.writeTag(s,ii.Fixed64),this.writeSFixed64(r)},writeVarintField:function(s,r){this.writeTag(s,ii.Varint),this.writeVarint(r)},writeSVarintField:function(s,r){this.writeTag(s,ii.Varint),this.writeSVarint(r)},writeStringField:function(s,r){this.writeTag(s,ii.Bytes),this.writeString(r)},writeFloatField:function(s,r){this.writeTag(s,ii.Fixed32),this.writeFloat(r)},writeDoubleField:function(s,r){this.writeTag(s,ii.Fixed64),this.writeDouble(r)},writeBooleanField:function(s,r){this.writeVarintField(s,!!r)}};var My=Y(nC);const n3=3;function c$(s,r,l){r.glyphs=[],s===1&&l.readMessage(u$,r)}function u$(s,r,l){if(s===3){const{id:d,bitmap:p,width:g,height:y,left:b,top:T,advance:C}=l.readMessage(d$,{});r.glyphs.push({id:d,bitmap:new Su({width:g+2*n3,height:y+2*n3},p),metrics:{width:g,height:y,left:b,top:T,advance:C}})}else s===4?r.ascender=l.readSVarint():s===5&&(r.descender=l.readSVarint())}function d$(s,r,l){s===1?r.id=l.readVarint():s===2?r.bitmap=l.readBytes():s===3?r.width=l.readVarint():s===4?r.height=l.readVarint():s===5?r.left=l.readSVarint():s===6?r.top=l.readSVarint():s===7&&(r.advance=l.readVarint())}const cC=n3;function r3(s){let r=0,l=0;for(const y of s)r+=y.w*y.h,l=Math.max(l,y.w);s.sort((y,b)=>b.h-y.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),l),h:1/0}];let p=0,g=0;for(const y of s)for(let b=d.length-1;b>=0;b--){const T=d[b];if(!(y.w>T.w||y.h>T.h)){if(y.x=T.x,y.y=T.y,g=Math.max(g,y.y+y.h),p=Math.max(p,y.x+y.w),y.w===T.w&&y.h===T.h){const C=d.pop();b<d.length&&(d[b]=C)}else y.h===T.h?(T.x+=y.w,T.w-=y.w):y.w===T.w?(T.y+=y.h,T.h-=y.h):(d.push({x:T.x+y.w,y:T.y,w:T.w-y.w,h:y.h}),T.y+=y.h,T.h-=y.h);break}}return{w:p,h:g,fill:r/(p*g)||0}}const qa=1;class i3{constructor(r,{pixelRatio:l,version:d,stretchX:p,stretchY:g,content:y}){this.paddedRect=r,this.pixelRatio=l,this.stretchX=p,this.stretchY=g,this.content=y,this.version=d}get tl(){return[this.paddedRect.x+qa,this.paddedRect.y+qa]}get br(){return[this.paddedRect.x+this.paddedRect.w-qa,this.paddedRect.y+this.paddedRect.h-qa]}get displaySize(){return[(this.paddedRect.w-2*qa)/this.pixelRatio,(this.paddedRect.h-2*qa)/this.pixelRatio]}}class uC{constructor(r,l){const d={},p={};this.haveRenderCallbacks=[];const g=[];this.addImages(r,d,g),this.addImages(l,p,g);const{w:y,h:b}=r3(g),T=new as({width:y||1,height:b||1});for(const C in r){const O=r[C],z=d[C].paddedRect;as.copy(O.data,T,{x:0,y:0},{x:z.x+qa,y:z.y+qa},O.data)}for(const C in l){const O=l[C],z=p[C].paddedRect,B=z.x+qa,G=z.y+qa,X=O.data.width,te=O.data.height;as.copy(O.data,T,{x:0,y:0},{x:B,y:G},O.data),as.copy(O.data,T,{x:0,y:te-1},{x:B,y:G-1},{width:X,height:1}),as.copy(O.data,T,{x:0,y:0},{x:B,y:G+te},{width:X,height:1}),as.copy(O.data,T,{x:X-1,y:0},{x:B-1,y:G},{width:1,height:te}),as.copy(O.data,T,{x:0,y:0},{x:B+X,y:G},{width:1,height:te})}this.image=T,this.iconPositions=d,this.patternPositions=p}addImages(r,l,d){for(const p in r){const g=r[p],y={x:0,y:0,w:g.data.width+2*qa,h:g.data.height+2*qa};d.push(y),l[p]=new i3(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(r,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(d=>r.hasImage(d)),r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),l)}patchUpdatedImage(r,l,d){if(!r||!l||r.version===l.version)return;r.version=l.version;const[p,g]=r.tl;d.update(l.data,void 0,{x:p,y:g})}}En(i3,"ImagePosition"),En(uC,"ImageAtlas");const Os={horizontal:1,vertical:2,horizontalOnly:3},dC=-17;class rg{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,l){const d=new rg;return d.scale=r||1,d.fontStack=l,d}static forImage(r){const l=new rg;return l.imageName=r,l}}class xf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,l){const d=new xf;for(let p=0;p<r.sections.length;p++){const g=r.sections[p];g.image?d.addImageSection(g):d.addTextSection(g,l)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(r){this.text=function(l,d){let p="";for(let g=0;g<l.length;g++){const y=l.charCodeAt(g+1)||null,b=l.charCodeAt(g-1)||null;p+=!d&&(y&&ay(y)&&!ng[l[g+1]]||b&&ay(b)&&!ng[l[g-1]])||!ng[l[g]]?l[g]:ng[l[g]]}return p}(this.text,r)}trim(){let r=0;for(let d=0;d<this.text.length&&Dy[this.text.charCodeAt(d)];d++)r++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&Dy[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)}substring(r,l){const d=new xf;return d.text=this.text.substring(r,l),d.sectionIndex=this.sectionIndex.slice(r,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,l)=>Math.max(r,this.sections[l].scale),0)}addTextSection(r,l){this.text+=r.text,this.sections.push(rg.forText(r.scale,r.fontStack||l));const d=this.sections.length-1;for(let p=0;p<r.text.length;++p)this.sectionIndex.push(d)}addImageSection(r){const l=r.image?r.image.name:"";if(l.length===0)return void It("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(rg.forImage(l)),this.sectionIndex.push(this.sections.length-1)):It("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function o3(s,r,l,d,p,g,y,b,T,C,O,z,B,G,X){const te=xf.fromFeature(s,p);z===Os.vertical&&te.verticalizePunctuation(B);let ce=[];const xe=function(Fe,pt,lt,Et,Wt,gt){if(!Fe)return[];const Mt=[],Dt=function(hn,kn,pn,sr,Yt,Bn){let lr=0;for(let Lr=0;Lr<hn.length();Lr++){const cr=hn.getSection(Lr);lr+=hC(hn.getCharCode(Lr),cr,sr,Yt,kn,Bn)}return lr/Math.max(1,Math.ceil(lr/pn))}(Fe,pt,lt,Et,Wt,gt),Nt=Fe.text.indexOf("")>=0;let Xt=0;for(let hn=0;hn<Fe.length();hn++){const kn=Fe.getSection(hn),pn=Fe.getCharCode(hn);if(Dy[pn]||(Xt+=hC(pn,kn,Et,Wt,pt,gt)),hn<Fe.length()-1){const sr=!((bt=pn)<11904||!(fn["Bopomofo Extended"](bt)||fn.Bopomofo(bt)||fn["CJK Compatibility Forms"](bt)||fn["CJK Compatibility Ideographs"](bt)||fn["CJK Compatibility"](bt)||fn["CJK Radicals Supplement"](bt)||fn["CJK Strokes"](bt)||fn["CJK Symbols and Punctuation"](bt)||fn["CJK Unified Ideographs Extension A"](bt)||fn["CJK Unified Ideographs"](bt)||fn["Enclosed CJK Letters and Months"](bt)||fn["Halfwidth and Fullwidth Forms"](bt)||fn.Hiragana(bt)||fn["Ideographic Description Characters"](bt)||fn["Kangxi Radicals"](bt)||fn["Katakana Phonetic Extensions"](bt)||fn.Katakana(bt)||fn["Vertical Forms"](bt)||fn["Yi Radicals"](bt)||fn["Yi Syllables"](bt)));(h$[pn]||sr||kn.imageName)&&Mt.push(fC(hn+1,Xt,Dt,Mt,p$(pn,Fe.getCharCode(hn+1),sr&&Nt),!1))}}var bt;return mC(fC(Fe.length(),Xt,Dt,Mt,0,!0))}(te,C,g,r,d,G),{processBidirectionalText:Me,processStyledBidirectionalText:be}=A;if(Me&&te.sections.length===1){const Fe=Me(te.toString(),xe);for(const pt of Fe){const lt=new xf;lt.text=pt,lt.sections=te.sections;for(let Et=0;Et<pt.length;Et++)lt.sectionIndex.push(0);ce.push(lt)}}else if(be){const Fe=be(te.text,te.sectionIndex,xe);for(const pt of Fe){const lt=new xf;lt.text=pt[0],lt.sectionIndex=pt[1],lt.sections=te.sections,ce.push(lt)}}else ce=function(Fe,pt){const lt=[],Et=Fe.text;let Wt=0;for(const gt of pt)lt.push(Fe.substring(Wt,gt)),Wt=gt;return Wt<Et.length&&lt.push(Fe.substring(Wt,Et.length)),lt}(te,xe);const Ae=[],Ne={positionedLines:Ae,text:te.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:z,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Fe,pt,lt,Et,Wt,gt,Mt,Dt,Nt,Xt,bt,hn){let kn=0,pn=0,sr=0;const Yt=Dt==="right"?1:Dt==="left"?0:.5;let Bn=!1;for(const hr of Wt){const pr=hr.getSections();for(const Kr of pr){if(Kr.imageName)continue;const oi=pt[Kr.fontStack];if(oi&&(Bn=oi.ascender!==void 0&&oi.descender!==void 0,!Bn))break}if(!Bn)break}let lr=0;for(const hr of Wt){hr.trim();const pr=hr.getMaxScale(),Kr=(pr-1)*Fo,oi={positionedGlyphs:[],lineOffset:0};Fe.positionedLines[lr]=oi;const ai=oi.positionedGlyphs;let Yr=0;if(!hr.length()){pn+=gt,++lr;continue}let Si=0,zi=0;for(let Jr=0;Jr<hr.length();Jr++){const lo=hr.getSection(Jr),Qi=hr.getSectionIndex(Jr),Oi=hr.getCharCode(Jr);let Fr=lo.scale,eo=null,si=null,Sa=null,to=Fo,No=0;const Co=!(Nt===Os.horizontal||!bt&&!Am(Oi)||bt&&(Dy[Oi]||(Lr=Oi,fn.Arabic(Lr)||fn["Arabic Supplement"](Lr)||fn["Arabic Extended-A"](Lr)||fn["Arabic Presentation Forms-A"](Lr)||fn["Arabic Presentation Forms-B"](Lr))));if(lo.imageName){const Ta=Et[lo.imageName];if(!Ta)continue;Sa=lo.imageName,Fe.iconsInText=Fe.iconsInText||!0,si=Ta.paddedRect;const ko=Ta.displaySize;Fr=Fr*Fo/hn,eo={width:ko[0],height:ko[1],left:qa,top:-cC,advance:Co?ko[1]:ko[0],localGlyph:!1},No=Bn?-eo.height*Fr:dC+pr*Fo-ko[1]*Fr,to=eo.advance;const Gl=(Co?ko[0]:ko[1])*Fr-Fo*pr;Gl>0&&Gl>Yr&&(Yr=Gl)}else{const Ta=lt[lo.fontStack];if(!Ta)continue;Ta[Oi]&&(si=Ta[Oi]);const ko=pt[lo.fontStack];if(!ko)continue;const Gl=ko.glyphs[Oi];if(!Gl)continue;if(eo=Gl.metrics,to=Oi!==8203?Fo:0,Bn){const kf=ko.ascender!==void 0?Math.abs(ko.ascender):0,pg=ko.descender!==void 0?Math.abs(ko.descender):0,fg=(kf+pg)*Fr;Si<fg&&(Si=fg,zi=(kf-pg)/2*Fr),No=-kf*Fr}else No=dC+(pr-Fr)*Fo}Co?(Fe.verticalizable=!0,ai.push({glyph:Oi,imageName:Sa,x:kn,y:pn+No,vertical:Co,scale:Fr,localGlyph:eo.localGlyph,fontStack:lo.fontStack,sectionIndex:Qi,metrics:eo,rect:si}),kn+=to*Fr+Xt):(ai.push({glyph:Oi,imageName:Sa,x:kn,y:pn+No,vertical:Co,scale:Fr,localGlyph:eo.localGlyph,fontStack:lo.fontStack,sectionIndex:Qi,metrics:eo,rect:si}),kn+=eo.advance*Fr+Xt)}ai.length!==0&&(sr=Math.max(kn-Xt,sr),Bn?gC(ai,Yt,Yr,zi,gt*pr/2):gC(ai,Yt,Yr,0,gt/2)),kn=0;const Ji=gt*pr+Yr;oi.lineOffset=Math.max(Yr,Kr),pn+=Ji,++lr}var Lr;const cr=pn,{horizontalAlign:Kn,verticalAlign:di}=a3(Mt);(function(hr,pr,Kr,oi,ai,Yr){const Si=(pr-Kr)*ai,zi=-Yr*oi;for(const Ji of hr)for(const Jr of Ji.positionedGlyphs)Jr.x+=Si,Jr.y+=zi})(Fe.positionedLines,Yt,Kn,di,sr,cr),Fe.top+=-di*cr,Fe.bottom=Fe.top+cr,Fe.left+=-Kn*sr,Fe.right=Fe.left+sr,Fe.hasBaseline=Bn}(Ne,r,l,d,ce,y,b,T,z,C,B,X),!function(Fe){for(const pt of Fe)if(pt.positionedGlyphs.length!==0)return!1;return!0}(Ae)&&Ne}const Dy={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},h$={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function hC(s,r,l,d,p,g){if(r.imageName){const y=d[r.imageName];return y?y.displaySize[0]*r.scale*Fo/g+p:0}{const y=l[r.fontStack],b=y&&y.glyphs[s];return b?b.metrics.advance*r.scale+p:0}}function pC(s,r,l,d){const p=Math.pow(s-r,2);return d?s<r?p/2:2*p:p+Math.abs(l)*l}function p$(s,r,l){let d=0;return s===10&&(d-=1e4),l&&(d+=150),s!==40&&s!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function fC(s,r,l,d,p,g){let y=null,b=pC(r,l,p,g);for(const T of d){const C=pC(r-T.x,l,p,g)+T.badness;C<=b&&(y=T,b=C)}return{index:s,x:r,priorBreak:y,badness:b}}function mC(s){return s?mC(s.priorBreak).concat(s.index):[]}function a3(s){let r=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:r,verticalAlign:l}}function gC(s,r,l,d,p){if(!(r||l||d||p))return;const g=s.length-1,y=s[g],b=(y.x+y.metrics.advance*y.scale)*r;for(let T=0;T<=g;T++)s[T].x-=b,s[T].y+=l+d+p}function f$(s,r,l){const{horizontalAlign:d,verticalAlign:p}=a3(l),g=r[0]-s.displaySize[0]*d,y=r[1]-s.displaySize[1]*p;return{image:s,top:y,bottom:y+s.displaySize[1],left:g,right:g+s.displaySize[0]}}function _C(s,r,l,d,p,g){const y=s.image;let b;if(y.content){const ce=y.content,xe=y.pixelRatio||1;b=[ce[0]/xe,ce[1]/xe,y.displaySize[0]-ce[2]/xe,y.displaySize[1]-ce[3]/xe]}const T=r.left*g,C=r.right*g;let O,z,B,G;l==="width"||l==="both"?(G=p[0]+T-d[3],z=p[0]+C+d[1]):(G=p[0]+(T+C-y.displaySize[0])/2,z=G+y.displaySize[0]);const X=r.top*g,te=r.bottom*g;return l==="height"||l==="both"?(O=p[1]+X-d[0],B=p[1]+te+d[2]):(O=p[1]+(X+te-y.displaySize[1])/2,B=O+y.displaySize[1]),{image:y,top:O,right:z,bottom:B,left:G,collisionPadding:b}}class Cu extends fe{constructor(r,l,d,p,g){super(r,l),this.angle=p,this.z=d,g!==void 0&&(this.segment=g)}clone(){return new Cu(this.x,this.y,this.z,this.angle,this.segment)}}function yC(s,r,l,d,p){if(r.segment===void 0)return!0;let g=r,y=r.segment+1,b=0;for(;b>-l/2;){if(y--,y<0)return!1;b-=s[y].dist(g),g=s[y]}b+=s[y].dist(s[y+1]),y++;const T=[];let C=0;for(;b<l/2;){const O=s[y],z=s[y+1];if(!z)return!1;let B=s[y-1].angleTo(O)-O.angleTo(z);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:b,angleDelta:B}),C+=B;b-T[0].distance>d;)C-=T.shift().angleDelta;if(C>p)return!1;y++,b+=O.dist(z)}return!0}function vC(s){let r=0;for(let l=0;l<s.length-1;l++)r+=s[l].dist(s[l+1]);return r}function xC(s,r,l){return s?.6*r*l:0}function bC(s,r){return Math.max(s?s.right-s.left:0,r?r.right-r.left:0)}function m$(s,r,l,d,p,g){const y=xC(l,p,g),b=bC(l,d)*g;let T=0;const C=vC(s)/2;for(let O=0;O<s.length-1;O++){const z=s[O],B=s[O+1],G=z.dist(B);if(T+G>C){const X=(C-T)/G,te=Sr(z.x,B.x,X),ce=Sr(z.y,B.y,X),xe=new Cu(te,ce,0,B.angleTo(z),O);return!y||yC(s,xe,b,y,r)?xe:void 0}T+=G}}function g$(s,r,l,d,p,g,y,b,T){const C=xC(d,g,y),O=bC(d,p),z=O*y,B=s[0].x===0||s[0].x===T||s[0].y===0||s[0].y===T;return r-z<r/4&&(r=z+r/4),wC(s,B?r/2*b%r:(O/2+2*g)*y*b%r,r,C,l,z,B,!1,T)}function wC(s,r,l,d,p,g,y,b,T){const C=g/2,O=vC(s);let z=0,B=r-l,G=[];for(let X=0;X<s.length-1;X++){const te=s[X],ce=s[X+1],xe=te.dist(ce),Me=ce.angleTo(te);for(;B+l<z+xe;){B+=l;const be=(B-z)/xe,Ae=Sr(te.x,ce.x,be),Ne=Sr(te.y,ce.y,be);if(Ae>=0&&Ae<T&&Ne>=0&&Ne<T&&B-C>=0&&B+C<=O){const Fe=new Cu(Ae,Ne,0,Me,X);Fe._round(),d&&!yC(s,Fe,g,d,p)||G.push(Fe)}}z+=xe}return b||G.length||y||(G=wC(s,z/2,l,d,p,g,y,!0,T)),G}function EC(s,r,l,d,p){const g=[];for(let y=0;y<s.length;y++){const b=s[y];let T;for(let C=0;C<b.length-1;C++){let O=b[C],z=b[C+1];O.x<r&&z.x<r||(O.x<r?O=new fe(r,O.y+(r-O.x)/(z.x-O.x)*(z.y-O.y))._round():z.x<r&&(z=new fe(r,O.y+(r-O.x)/(z.x-O.x)*(z.y-O.y))._round()),O.y<l&&z.y<l||(O.y<l?O=new fe(O.x+(l-O.y)/(z.y-O.y)*(z.x-O.x),l)._round():z.y<l&&(z=new fe(O.x+(l-O.y)/(z.y-O.y)*(z.x-O.x),l)._round()),O.x>=d&&z.x>=d||(O.x>=d?O=new fe(d,O.y+(d-O.x)/(z.x-O.x)*(z.y-O.y))._round():z.x>=d&&(z=new fe(d,O.y+(d-O.x)/(z.x-O.x)*(z.y-O.y))._round()),O.y>=p&&z.y>=p||(O.y>=p?O=new fe(O.x+(p-O.y)/(z.y-O.y)*(z.x-O.x),p)._round():z.y>=p&&(z=new fe(O.x+(p-O.y)/(z.y-O.y)*(z.x-O.x),p)._round()),T&&O.equals(T[T.length-1])||(T=[O],g.push(T)),T.push(z)))))}}return g}En(Cu,"Anchor");const ig=1e20;function SC(s,r,l,d,p,g,y,b,T){for(let C=r;C<r+d;C++)TC(s,l*g+C,g,p,y,b,T);for(let C=l;C<l+p;C++)TC(s,C*g+r,1,d,y,b,T)}function TC(s,r,l,d,p,g,y){g[0]=0,y[0]=-ig,y[1]=ig,p[0]=s[r];for(let b=1,T=0,C=0;b<d;b++){p[b]=s[r+b*l];const O=b*b;do{const z=g[T];C=(p[b]-p[z]+O-z*z)/(b-z)/2}while(C<=y[T]&&--T>-1);T++,g[T]=b,y[T]=C,y[T+1]=ig}for(let b=0,T=0;b<d;b++){for(;y[T+1]<b;)T++;const C=g[T],O=b-C;s[r+b*l]=p[C]+O*O}}const Hl=2,s3={none:0,ideographs:1,all:2};class bf{constructor(r,l,d){this.requestManager=r,this.localGlyphMode=l,this.localFontFamily=d,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r){this.url=r}getGlyphs(r,l){const d=[];for(const p in r)for(const g of r[p])d.push({stack:p,id:g});kt(d,({stack:p,id:g},y)=>{let b=this.entries[p];b||(b=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=b.glyphs[g];if(T!==void 0)return void y(null,{stack:p,id:g,glyph:T});if(T=this._tinySDF(b,p,g),T)return b.glyphs[g]=T,void y(null,{stack:p,id:g,glyph:T});const C=Math.floor(g/256);if(256*C>65535)return void y(new Error("glyphs > 65535 not supported"));if(b.ranges[C])return void y(null,{stack:p,id:g,glyph:T});let O=b.requests[C];O||(O=b.requests[C]=[],bf.loadGlyphRange(p,C,this.url,this.requestManager,(z,B)=>{if(B){b.ascender=B.ascender,b.descender=B.descender;for(const G in B.glyphs)this._doesCharSupportLocalGlyph(+G)||(b.glyphs[+G]=B.glyphs[+G]);b.ranges[C]=!0}for(const G of O)G(z,B);delete b.requests[C]})),O.push((z,B)=>{z?y(z):B&&y(null,{stack:p,id:g,glyph:B.glyphs[g]||null})})},(p,g)=>{if(p)l(p);else if(g){const y={};for(const{stack:b,id:T,glyph:C}of g)y[b]===void 0&&(y[b]={}),y[b].glyphs===void 0&&(y[b].glyphs={}),y[b].glyphs[T]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics},y[b].ascender=this.entries[b].ascender,y[b].descender=this.entries[b].descender;l(null,y)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==s3.none&&(this.localGlyphMode===s3.all?!!this.localFontFamily:!!this.localFontFamily&&(fn["CJK Unified Ideographs"](r)||fn["Hangul Syllables"](r)||fn.Hiragana(r)||fn.Katakana(r)||fn["CJK Symbols and Punctuation"](r)))}_tinySDF(r,l,d){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(d))return;let g=r.tinySDF;if(!g){let te="400";/bold/i.test(l)?te="900":/medium/i.test(l)?te="500":/light/i.test(l)&&(te="200"),g=r.tinySDF=new bf.TinySDF({fontFamily:p,fontWeight:te,fontSize:24*Hl,buffer:3*Hl,radius:8*Hl}),g.fontWeight=te}if(this.localGlyphs[g.fontWeight][d])return this.localGlyphs[g.fontWeight][d];const y=String.fromCharCode(d),{data:b,width:T,height:C,glyphWidth:O,glyphHeight:z,glyphLeft:B,glyphTop:G,glyphAdvance:X}=g.draw(y);return this.localGlyphs[g.fontWeight][d]={id:d,bitmap:new Su({width:T,height:C},b),metrics:{width:O/Hl,height:z/Hl,left:B/Hl,top:G/Hl-27,advance:X/Hl,localGlyph:!0}}}}bf.loadGlyphRange=function(s,r,l,d,p){const g=256*r,y=g+255,b=d.transformRequest(d.normalizeGlyphsURL(l).replace("{fontstack}",s).replace("{range}",`${g}-${y}`),Nn.Glyphs);bi(b,(T,C)=>{if(T)p(T);else if(C){const O={},z=function(B){return new My(B).readFields(c$,{})}(C);for(const B of z.glyphs)O[B.id]=B;p(null,{glyphs:O,ascender:z.ascender,descender:z.descender})}})},bf.TinySDF=class{constructor({fontSize:s=24,buffer:r=3,radius:l=8,cutoff:d=.25,fontFamily:p="sans-serif",fontWeight:g="normal",fontStyle:y="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=l;const b=this.size=s+4*r,T=this._createCanvas(b),C=this.ctx=T.getContext("2d",{willReadFrequently:!0});C.font=`${y} ${g} ${s}px ${p}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(s){const r=document.createElement("canvas");return r.width=r.height=s,r}draw(s){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:p,actualBoundingBoxRight:g}=this.ctx.measureText(s),y=Math.ceil(l),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-p))),T=Math.min(this.size-this.buffer,y+Math.ceil(d)),C=b+2*this.buffer,O=T+2*this.buffer,z=Math.max(C*O,0),B=new Uint8ClampedArray(z),G={data:B,width:C,height:O,glyphWidth:b,glyphHeight:T,glyphTop:y,glyphLeft:0,glyphAdvance:r};if(b===0||T===0)return G;const{ctx:X,buffer:te,gridInner:ce,gridOuter:xe}=this;X.clearRect(te,te,b,T),X.fillText(s,te,te+y);const Me=X.getImageData(te,te,b,T);xe.fill(ig,0,z),ce.fill(0,0,z);for(let be=0;be<T;be++)for(let Ae=0;Ae<b;Ae++){const Ne=Me.data[4*(be*b+Ae)+3]/255;if(Ne===0)continue;const Fe=(be+te)*C+Ae+te;if(Ne===1)xe[Fe]=0,ce[Fe]=ig;else{const pt=.5-Ne;xe[Fe]=pt>0?pt*pt:0,ce[Fe]=pt<0?pt*pt:0}}SC(xe,0,0,C,O,C,this.f,this.v,this.z),SC(ce,te,te,b,T,C,this.f,this.v,this.z);for(let be=0;be<z;be++){const Ae=Math.sqrt(xe[be])-Math.sqrt(ce[be]);B[be]=Math.round(255-255*(Ae/this.radius+this.cutoff))}return G}};const wf=qa;function CC(s,r,l,d){const p=[],g=s.image,y=g.pixelRatio,b=g.paddedRect.w-2*wf,T=g.paddedRect.h-2*wf,C=s.right-s.left,O=s.bottom-s.top,z=g.stretchX||[[0,b]],B=g.stretchY||[[0,T]],G=(gt,Mt)=>gt+Mt[1]-Mt[0],X=z.reduce(G,0),te=B.reduce(G,0),ce=b-X,xe=T-te;let Me=0,be=X,Ae=0,Ne=te,Fe=0,pt=ce,lt=0,Et=xe;if(g.content&&d){const gt=g.content;Me=Oy(z,0,gt[0]),Ae=Oy(B,0,gt[1]),be=Oy(z,gt[0],gt[2]),Ne=Oy(B,gt[1],gt[3]),Fe=gt[0]-Me,lt=gt[1]-Ae,pt=gt[2]-gt[0]-be,Et=gt[3]-gt[1]-Ne}const Wt=(gt,Mt,Dt,Nt)=>{const Xt=Ry(gt.stretch-Me,be,C,s.left),bt=Ly(gt.fixed-Fe,pt,gt.stretch,X),hn=Ry(Mt.stretch-Ae,Ne,O,s.top),kn=Ly(Mt.fixed-lt,Et,Mt.stretch,te),pn=Ry(Dt.stretch-Me,be,C,s.left),sr=Ly(Dt.fixed-Fe,pt,Dt.stretch,X),Yt=Ry(Nt.stretch-Ae,Ne,O,s.top),Bn=Ly(Nt.fixed-lt,Et,Nt.stretch,te),lr=new fe(Xt,hn),Lr=new fe(pn,hn),cr=new fe(pn,Yt),Kn=new fe(Xt,Yt),di=new fe(bt/y,kn/y),hr=new fe(sr/y,Bn/y),pr=r*Math.PI/180;if(pr){const ai=Math.sin(pr),Yr=Math.cos(pr),Si=[Yr,-ai,ai,Yr];lr._matMult(Si),Lr._matMult(Si),Kn._matMult(Si),cr._matMult(Si)}const Kr=gt.stretch+gt.fixed,oi=Mt.stretch+Mt.fixed;return{tl:lr,tr:Lr,bl:Kn,br:cr,tex:{x:g.paddedRect.x+wf+Kr,y:g.paddedRect.y+wf+oi,w:Dt.stretch+Dt.fixed-Kr,h:Nt.stretch+Nt.fixed-oi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:di,pixelOffsetBR:hr,minFontScaleX:pt/y/C,minFontScaleY:Et/y/O,isSDF:l}};if(d&&(g.stretchX||g.stretchY)){const gt=kC(z,ce,X),Mt=kC(B,xe,te);for(let Dt=0;Dt<gt.length-1;Dt++){const Nt=gt[Dt],Xt=gt[Dt+1];for(let bt=0;bt<Mt.length-1;bt++)p.push(Wt(Nt,Mt[bt],Xt,Mt[bt+1]))}}else p.push(Wt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:T+1}));return p}function Oy(s,r,l){let d=0;for(const p of s)d+=Math.max(r,Math.min(l,p[1]))-Math.max(r,Math.min(l,p[0]));return d}function kC(s,r,l){const d=[{fixed:-wf,stretch:0}];for(const[p,g]of s){const y=d[d.length-1];d.push({fixed:p-y.stretch,stretch:y.stretch}),d.push({fixed:p-y.stretch,stretch:y.stretch+(g-p)})}return d.push({fixed:r+wf,stretch:l}),d}function Ry(s,r,l,d){return s/r*l+d}function Ly(s,r,l,d){return s-r*l/d}function _$(s,r,l,d){const p=r+s.positionedLines[d].lineOffset;return d===0?l+p/2:l+(p+(r+s.positionedLines[d-1].lineOffset))/2}class y${constructor(r=[],l=v$){if(this.data=r,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:l,compare:d}=this,p=l[r];for(;r>0;){const g=r-1>>1,y=l[g];if(d(p,y)>=0)break;l[r]=y,r=g}l[r]=p}_down(r){const{data:l,compare:d}=this,p=this.length>>1,g=l[r];for(;r<p;){let y=1+(r<<1),b=l[y];const T=y+1;if(T<this.length&&d(l[T],b)<0&&(y=T,b=l[T]),d(b,g)>=0)break;l[r]=b,r=y}l[r]=g}}function v$(s,r){return s<r?-1:s>r?1:0}function x$(s,r=1,l=!1){let d=1/0,p=1/0,g=-1/0,y=-1/0;const b=s[0];for(let G=0;G<b.length;G++){const X=b[G];(!G||X.x<d)&&(d=X.x),(!G||X.y<p)&&(p=X.y),(!G||X.x>g)&&(g=X.x),(!G||X.y>y)&&(y=X.y)}const T=Math.min(g-d,y-p);let C=T/2;const O=new y$([],b$);if(T===0)return new fe(d,p);for(let G=d;G<g;G+=T)for(let X=p;X<y;X+=T)O.push(new Ef(G+C,X+C,C,s));let z=function(G){let X=0,te=0,ce=0;const xe=G[0];for(let Me=0,be=xe.length,Ae=be-1;Me<be;Ae=Me++){const Ne=xe[Me],Fe=xe[Ae],pt=Ne.x*Fe.y-Fe.x*Ne.y;te+=(Ne.x+Fe.x)*pt,ce+=(Ne.y+Fe.y)*pt,X+=3*pt}return new Ef(te/X,ce/X,0,G)}(s),B=O.length;for(;O.length;){const G=O.pop();(G.d>z.d||!z.d)&&(z=G,l&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,B)),G.max-z.d<=r||(C=G.h/2,O.push(new Ef(G.p.x-C,G.p.y-C,C,s)),O.push(new Ef(G.p.x+C,G.p.y-C,C,s)),O.push(new Ef(G.p.x-C,G.p.y+C,C,s)),O.push(new Ef(G.p.x+C,G.p.y+C,C,s)),B+=4)}return l&&(console.log(`num probes: ${B}`),console.log(`best distance: ${z.d}`)),z.p}function b$(s,r){return r.max-s.max}class Ef{constructor(r,l,d,p){this.p=new fe(r,l),this.h=d,this.d=function(g,y){let b=!1,T=1/0;for(let C=0;C<y.length;C++){const O=y[C];for(let z=0,B=O.length,G=B-1;z<B;G=z++){const X=O[z],te=O[G];X.y>g.y!=te.y>g.y&&g.x<(te.x-X.x)*(g.y-X.y)/(te.y-X.y)+X.x&&(b=!b),T=Math.min(T,w8(g,X,te))}}return(b?1:-1)*Math.sqrt(T)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}}const Sf=7,l3=Number.POSITIVE_INFINITY,w$=Math.sqrt(2);function PC(s,[r,l]){let d=0,p=0;if(l===l3){r<0&&(r=0);const g=r/w$;switch(s){case"top-right":case"top-left":p=g-Sf;break;case"bottom-right":case"bottom-left":p=-g+Sf;break;case"bottom":p=-r+Sf;break;case"top":p=r-Sf}switch(s){case"top-right":case"bottom-right":d=-g;break;case"top-left":case"bottom-left":d=g;break;case"left":d=r;break;case"right":d=-r}}else{switch(r=Math.abs(r),l=Math.abs(l),s){case"top-right":case"top-left":case"top":p=l-Sf;break;case"bottom-right":case"bottom-left":case"bottom":p=-l+Sf}switch(s){case"top-right":case"bottom-right":case"right":d=-r;break;case"top-left":case"bottom-left":case"left":d=r}}return[d,p]}function E$(s,r,l,d,p,g,y,b,T,C){s.createArrays(),s.tilePixelRatio=Hn/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;const O=s.layers[0].layout,z=s.layers[0]._unevaluatedLayout._values,B={};if(s.textSizeData.kind==="composite"){const{minZoom:te,maxZoom:ce}=s.textSizeData;B.compositeTextSizes=[z["text-size"].possiblyEvaluate(new L(te),b),z["text-size"].possiblyEvaluate(new L(ce),b)]}if(s.iconSizeData.kind==="composite"){const{minZoom:te,maxZoom:ce}=s.iconSizeData;B.compositeIconSizes=[z["icon-size"].possiblyEvaluate(new L(te),b),z["icon-size"].possiblyEvaluate(new L(ce),b)]}B.layoutTextSize=z["text-size"].possiblyEvaluate(new L(T+1),b),B.layoutIconSize=z["icon-size"].possiblyEvaluate(new L(T+1),b),B.textMaxSize=z["text-size"].possiblyEvaluate(new L(18),b);const G=O.get("text-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",X=O.get("text-size");for(const te of s.features){const ce=O.get("text-font").evaluate(te,{},b).join(","),xe=X.evaluate(te,{},b),Me=B.layoutTextSize.evaluate(te,{},b),be=(B.layoutIconSize.evaluate(te,{},b),{horizontal:{},vertical:void 0}),Ae=te.text;let Ne,Fe=[0,0];if(Ae){const Et=Ae.toString(),Wt=O.get("text-letter-spacing").evaluate(te,{},b)*Fo,gt=O.get("text-line-height").evaluate(te,{},b)*Fo,Mt=_w(Et)?Wt:0,Dt=O.get("text-anchor").evaluate(te,{},b),Nt=O.get("text-variable-anchor");if(!Nt){const pn=O.get("text-radial-offset").evaluate(te,{},b);Fe=pn?PC(Dt,[pn*Fo,l3]):O.get("text-offset").evaluate(te,{},b).map(sr=>sr*Fo)}let Xt=G?"center":O.get("text-justify").evaluate(te,{},b);const bt=O.get("symbol-placement")==="point",hn=bt?O.get("text-max-width").evaluate(te,{},b)*Fo:1/0,kn=pn=>{s.allowVerticalPlacement&&Im(Et)&&(be.vertical=o3(Ae,r,l,p,ce,hn,gt,Dt,pn,Mt,Fe,Os.vertical,!0,Me,xe))};if(!G&&Nt){const pn=Xt==="auto"?Nt.map(Yt=>c3(Yt)):[Xt];let sr=!1;for(let Yt=0;Yt<pn.length;Yt++){const Bn=pn[Yt];if(!be.horizontal[Bn])if(sr)be.horizontal[Bn]=be.horizontal[0];else{const lr=o3(Ae,r,l,p,ce,hn,gt,"center",Bn,Mt,Fe,Os.horizontal,!1,Me,xe);lr&&(be.horizontal[Bn]=lr,sr=lr.positionedLines.length===1)}}kn("left")}else{if(Xt==="auto"&&(Xt=c3(Dt)),bt||O.get("text-writing-mode").indexOf("horizontal")>=0||!Im(Et)){const pn=o3(Ae,r,l,p,ce,hn,gt,Dt,Xt,Mt,Fe,Os.horizontal,!1,Me,xe);pn&&(be.horizontal[Xt]=pn)}kn(bt?"left":Xt)}}let pt=!1;if(te.icon&&te.icon.name){const Et=d[te.icon.name];Et&&(Ne=f$(p[te.icon.name],O.get("icon-offset").evaluate(te,{},b),O.get("icon-anchor").evaluate(te,{},b)),pt=Et.sdf,s.sdfIcons===void 0?s.sdfIcons=Et.sdf:s.sdfIcons!==Et.sdf&&It("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Et.pixelRatio!==s.pixelRatio||O.get("icon-rotate").constantOr(1)!==0)&&(s.iconsNeedLinear=!0))}const lt=AC(be.horizontal)||be.vertical;s.iconsInText||(s.iconsInText=!!lt&&lt.iconsInText),(lt||Ne)&&S$(s,te,be,Ne,d,B,Me,0,Fe,pt,y,b,C)}g&&s.generateCollisionDebugBuffers(T,s.collisionBoxArray)}function c3(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function S$(s,r,l,d,p,g,y,b,T,C,O,z,B){let G=g.textMaxSize.evaluate(r,{},z);G===void 0&&(G=y);const X=s.layers[0].layout,te=X.get("icon-offset").evaluate(r,{},z),ce=AC(l.horizontal)||l.vertical,xe=B.name==="globe",Me=Fo,be=y/Me,Ae=s.tilePixelRatio*G/Me,Ne=(Dt=s.overscaling,s.zoom>18&&Dt>2&&(Dt>>=1),Math.max(Hn/(512*Dt),1)*X.get("symbol-spacing")),Fe=X.get("text-padding")*s.tilePixelRatio,pt=X.get("icon-padding")*s.tilePixelRatio,lt=at(X.get("text-max-angle")),Et=X.get("text-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",Wt=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",gt=X.get("symbol-placement"),Mt=Ne/2;var Dt;const Nt=X.get("icon-text-fit");let Xt;d&&Nt!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(Xt=_C(d,l.vertical,Nt,X.get("icon-text-fit-padding"),te,be)),ce&&(d=_C(d,ce,Nt,X.get("icon-text-fit-padding"),te,be)));const bt=(hn,kn,pn)=>{if(kn.x<0||kn.x>=Hn||kn.y<0||kn.y>=Hn)return;let sr=null;if(xe){const{x:Yt,y:Bn,z:lr}=B.projectTilePoint(kn.x,kn.y,pn);sr={anchor:new Cu(Yt,Bn,lr,0,void 0),up:B.upVector(pn,kn.x,kn.y)}}(function(Yt,Bn,lr,Lr,cr,Kn,di,hr,pr,Kr,oi,ai,Yr,Si,zi,Ji,Jr,lo,Qi,Oi,Fr,eo,si,Sa,to){const No=Yt.addToLineVertexArray(Bn,Lr);let Co,Ta,ko,Gl,kf,pg,fg,c9=0,u9=0,d9=0,h9=0,S3=-1,T3=-1;const Rc={};let p9=xw("");const Kh=lr?lr.anchor:Bn;let C3=0,k3=0;if(pr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[C3,k3]=pr.layout.get("text-offset").evaluate(Fr,{},to).map(ss=>ss*Fo):(C3=pr.layout.get("text-radial-offset").evaluate(Fr,{},to)*Fo,k3=l3),Yt.allowVerticalPlacement&&cr.vertical){const ss=cr.vertical;if(zi)pg=u3(ss),hr&&(fg=u3(hr));else{const ls=pr.layout.get("text-rotate").evaluate(Fr,{},to)+90;ko=zy(Kr,Kh,Bn,oi,ai,Yr,ss,Si,ls,Ji),hr&&(Gl=zy(Kr,Kh,Bn,oi,ai,Yr,hr,lo,ls))}}if(Kn){const ss=pr.layout.get("icon-rotate").evaluate(Fr,{},to),ls=pr.layout.get("icon-text-fit")!=="none",mg=CC(Kn,ss,si,ls),I3=hr?CC(hr,ss,si,ls):void 0;Ta=zy(Kr,Kh,Bn,oi,ai,Yr,Kn,lo,ss),c9=4*mg.length;const f9=Yt.iconSizeData;let Yh=null;f9.kind==="source"?(Yh=[Wl*pr.layout.get("icon-size").evaluate(Fr,{},to)],Yh[0]>yd&&It(`${Yt.layerIds[0]}: Value for "icon-size" is >= ${og}. Reduce your "icon-size".`)):f9.kind==="composite"&&(Yh=[Wl*eo.compositeIconSizes[0].evaluate(Fr,{},to),Wl*eo.compositeIconSizes[1].evaluate(Fr,{},to)],(Yh[0]>yd||Yh[1]>yd)&&It(`${Yt.layerIds[0]}: Value for "icon-size" is >= ${og}. Reduce your "icon-size".`)),Yt.addSymbols(Yt.icon,mg,Yh,Oi,Qi,Fr,!1,lr,Bn,No.lineStartIndex,No.lineLength,-1,Sa,to),S3=Yt.icon.placedSymbolArray.length-1,I3&&(u9=4*I3.length,Yt.addSymbols(Yt.icon,I3,Yh,Oi,Qi,Fr,Os.vertical,lr,Bn,No.lineStartIndex,No.lineLength,-1,Sa,to),T3=Yt.icon.placedSymbolArray.length-1)}for(const ss in cr.horizontal){const ls=cr.horizontal[ss];Co||(p9=xw(ls.text),zi?kf=u3(ls):Co=zy(Kr,Kh,Bn,oi,ai,Yr,ls,Si,pr.layout.get("text-rotate").evaluate(Fr,{},to),Ji));const mg=ls.positionedLines.length===1;if(d9+=IC(Yt,lr,Bn,ls,di,pr,zi,Fr,Ji,No,cr.vertical?Os.horizontal:Os.horizontalOnly,mg?Object.keys(cr.horizontal):[ss],Rc,S3,eo,Sa,to),mg)break}cr.vertical&&(h9+=IC(Yt,lr,Bn,cr.vertical,di,pr,zi,Fr,Ji,No,Os.vertical,["vertical"],Rc,T3,eo,Sa,to));let Sd=-1;const P3=(ss,ls)=>ss?Math.max(ss,ls):ls;Sd=P3(kf,Sd),Sd=P3(pg,Sd),Sd=P3(fg,Sd);const J$=Sd>-1?1:0;Yt.glyphOffsetArray.length>=xd.MAX_GLYPHS&&It("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fr.sortKey!==void 0&&Yt.addToSortKeyRanges(Yt.symbolInstances.length,Fr.sortKey),Yt.symbolInstances.emplaceBack(Kh.x,Kh.y,Kh.z,Bn.x,Bn.y,Rc.right>=0?Rc.right:-1,Rc.center>=0?Rc.center:-1,Rc.left>=0?Rc.left:-1,Rc.vertical>=0?Rc.vertical:-1,S3,T3,p9,Co!==void 0?Co:Yt.collisionBoxArray.length,Co!==void 0?Co+1:Yt.collisionBoxArray.length,ko!==void 0?ko:Yt.collisionBoxArray.length,ko!==void 0?ko+1:Yt.collisionBoxArray.length,Ta!==void 0?Ta:Yt.collisionBoxArray.length,Ta!==void 0?Ta+1:Yt.collisionBoxArray.length,Gl||Yt.collisionBoxArray.length,Gl?Gl+1:Yt.collisionBoxArray.length,oi,d9,h9,c9,u9,J$,0,C3,k3,Sd)})(s,kn,sr,hn,l,d,p,Xt,s.layers[0],s.collisionBoxArray,r.index,r.sourceLayerIndex,s.index,Fe,Et,T,0,pt,Wt,te,r,g,C,O,z)};if(gt==="line")for(const hn of EC(r.geometry,0,0,Hn,Hn)){const kn=g$(hn,Ne,lt,l.vertical||ce,d,Me,Ae,s.overscaling,Hn);for(const pn of kn)ce&&T$(s,ce.text,Mt,pn)||bt(hn,pn,z)}else if(gt==="line-center"){for(const hn of r.geometry)if(hn.length>1){const kn=m$(hn,lt,l.vertical||ce,d,Me,Ae);kn&&bt(hn,kn,z)}}else if(r.type==="Polygon")for(const hn of Kw(r.geometry,0)){const kn=x$(hn,16);bt(hn[0],new Cu(kn.x,kn.y,0,0,void 0),z)}else if(r.type==="LineString")for(const hn of r.geometry)bt(hn,new Cu(hn[0].x,hn[0].y,0,0,void 0),z);else if(r.type==="Point")for(const hn of r.geometry)for(const kn of hn)bt([kn],new Cu(kn.x,kn.y,0,0,void 0),z)}const og=255,yd=og*Wl;function IC(s,r,l,d,p,g,y,b,T,C,O,z,B,G,X,te,ce){const xe=function(Ae,Ne,Fe,pt,lt,Et,Wt,gt){const Mt=[];if(Ne.positionedLines.length===0)return Mt;const Dt=pt.layout.get("text-rotate").evaluate(Et,{})*Math.PI/180,Nt=function(pn){const sr=pn[0],Yt=pn[1],Bn=sr*Yt;return Bn>0?[sr,-Yt]:Bn<0?[-sr,Yt]:sr===0?[Yt,sr]:[Yt,-sr]}(Fe);let Xt=Math.abs(Ne.top-Ne.bottom);for(const pn of Ne.positionedLines)Xt-=pn.lineOffset;const bt=Ne.positionedLines.length,hn=Xt/bt;let kn=Ne.top-Fe[1];for(let pn=0;pn<bt;++pn){const sr=Ne.positionedLines[pn];kn=_$(Ne,hn,kn,pn);for(const Yt of sr.positionedGlyphs){if(!Yt.rect)continue;const Bn=Yt.rect||{};let lr=cC+1,Lr=!0,cr=1,Kn=0;if(Yt.imageName){const si=Wt[Yt.imageName];if(!si)continue;if(si.sdf){It("SDF images are not supported in formatted text and will be ignored.");continue}Lr=!1,cr=si.pixelRatio,lr=qa/cr}const di=(lt||gt)&&Yt.vertical,hr=Yt.metrics.advance*Yt.scale/2,pr=Yt.metrics,Kr=Yt.rect;if(Kr===null)continue;gt&&Ne.verticalizable&&(Kn=Yt.imageName?hr-Yt.metrics.width*Yt.scale/2:0);const oi=lt?[Yt.x+hr,Yt.y]:[0,0];let ai=[0,0],Yr=[0,0],Si=!1;lt||(di?(Yr=[Yt.x+hr+Nt[0],Yt.y+Nt[1]-Kn],Si=!0):ai=[Yt.x+hr+Fe[0],Yt.y+Fe[1]-Kn]);const zi=Kr.w*Yt.scale/(cr*(Yt.localGlyph?Hl:1)),Ji=Kr.h*Yt.scale/(cr*(Yt.localGlyph?Hl:1));let Jr,lo,Qi,Oi;if(di){const si=Yt.y-kn,Sa=new fe(-hr,hr-si),to=-Math.PI/2,No=new fe(...Yr);Jr=new fe(-hr+ai[0],ai[1]),Jr._rotateAround(to,Sa)._add(No),Jr.x+=-si+hr,Jr.y-=(pr.left-lr)*Yt.scale;const Co=Yt.imageName?pr.advance*Yt.scale:Fo*Yt.scale,Ta=String.fromCharCode(Yt.glyph);Jj(Ta)?Jr.x+=(1-lr)*Yt.scale:Qj(Ta)?Jr.x+=Co-pr.height*Yt.scale+(-lr-1)*Yt.scale:Jr.x+=Yt.imageName||pr.width+2*lr===Kr.w&&pr.height+2*lr===Kr.h?(Co-Ji)/2:(Co-(pr.height+2*lr)*Yt.scale)/2,lo=new fe(Jr.x,Jr.y-zi),Qi=new fe(Jr.x+Ji,Jr.y),Oi=new fe(Jr.x+Ji,Jr.y-zi)}else{const si=(pr.left-lr)*Yt.scale-hr+ai[0],Sa=(-pr.top-lr)*Yt.scale+ai[1],to=si+zi,No=Sa+Ji;Jr=new fe(si,Sa),lo=new fe(to,Sa),Qi=new fe(si,No),Oi=new fe(to,No)}if(Dt){let si;si=lt?new fe(0,0):Si?new fe(Nt[0],Nt[1]):new fe(Fe[0],Fe[1]),Jr._rotateAround(Dt,si),lo._rotateAround(Dt,si),Qi._rotateAround(Dt,si),Oi._rotateAround(Dt,si)}const Fr=new fe(0,0),eo=new fe(0,0);Mt.push({tl:Jr,tr:lo,bl:Qi,br:Oi,tex:Bn,writingMode:Ne.writingMode,glyphOffset:oi,sectionIndex:Yt.sectionIndex,isSDF:Lr,pixelOffsetTL:Fr,pixelOffsetBR:eo,minFontScaleX:0,minFontScaleY:0})}}return Mt}(0,d,T,g,y,b,p,s.allowVerticalPlacement),Me=s.textSizeData;let be=null;Me.kind==="source"?(be=[Wl*g.layout.get("text-size").evaluate(b,{},ce)],be[0]>yd&&It(`${s.layerIds[0]}: Value for "text-size" is >= ${og}. Reduce your "text-size".`)):Me.kind==="composite"&&(be=[Wl*X.compositeTextSizes[0].evaluate(b,{},ce),Wl*X.compositeTextSizes[1].evaluate(b,{},ce)],(be[0]>yd||be[1]>yd)&&It(`${s.layerIds[0]}: Value for "text-size" is >= ${og}. Reduce your "text-size".`)),s.addSymbols(s.text,xe,be,T,y,b,O,r,l,C.lineStartIndex,C.lineLength,G,te,ce);for(const Ae of z)B[Ae]=s.text.placedSymbolArray.length-1;return 4*xe.length}function AC(s){for(const r in s)return s[r];return null}function zy(s,r,l,d,p,g,y,b,T,C){let O=y.top,z=y.bottom,B=y.left,G=y.right;const X=y.collisionPadding;if(X&&(B-=X[0],O-=X[1],G+=X[2],z+=X[3]),T){const te=new fe(B,O),ce=new fe(G,O),xe=new fe(B,z),Me=new fe(G,z),be=at(T);let Ae=new fe(0,0);C&&(Ae=new fe(C[0],C[1])),te._rotateAround(be,Ae),ce._rotateAround(be,Ae),xe._rotateAround(be,Ae),Me._rotateAround(be,Ae),B=Math.min(te.x,ce.x,xe.x,Me.x),G=Math.max(te.x,ce.x,xe.x,Me.x),O=Math.min(te.y,ce.y,xe.y,Me.y),z=Math.max(te.y,ce.y,xe.y,Me.y)}return s.emplaceBack(r.x,r.y,r.z,l.x,l.y,B,O,G,z,b,d,p,g),s.length-1}function u3(s){s.collisionPadding&&(s.top-=s.collisionPadding[1],s.bottom+=s.collisionPadding[3]);const r=s.bottom-s.top;return r>0?Math.max(10,r):null}function T$(s,r,l,d){const p=s.compareText;if(r in p){const g=p[r];for(let y=g.length-1;y>=0;y--)if(d.dist(g[y])<l)return!0}else p[r]=[];return p[r].push(d),!1}function MC(s,r){const l=s.fovAboveCenter,d=s.elevation?s.elevation.getMinElevationBelowMSL()*r:0,p=(s._camera.position[2]*s.worldSize-d)/Math.cos(s._pitch),g=Math.sin(l)*p/Math.sin(Math.max(Math.PI/2-s._pitch-l,.01)),y=Math.sin(s._pitch)*g+p;return Math.min(1.01*y,p*(1/s._horizonShift))}function Zh(s,r){if(!r.isReprojectedInTileSpace)return{scale:1<<s.z,x:s.x,y:s.y,x2:s.x+1,y2:s.y+1,projection:r};const l=Math.pow(2,-s.z),d=s.x*l,p=(s.x+1)*l,g=s.y*l,y=(s.y+1)*l,b=Ds(d),T=Ds(p),C=Yo(g),O=Yo(y),z=r.project(b,C),B=r.project(T,C),G=r.project(T,O),X=r.project(b,O);let te=Math.min(z.x,B.x,G.x,X.x),ce=Math.min(z.y,B.y,G.y,X.y),xe=Math.max(z.x,B.x,G.x,X.x),Me=Math.max(z.y,B.y,G.y,X.y);const be=l/16;function Ae(Fe,pt,lt,Et,Wt,gt){const Mt=(lt+Wt)/2,Dt=(Et+gt)/2,Nt=r.project(Ds(Mt),Yo(Dt)),Xt=Math.max(0,te-Nt.x,ce-Nt.y,Nt.x-xe,Nt.y-Me);te=Math.min(te,Nt.x),xe=Math.max(xe,Nt.x),ce=Math.min(ce,Nt.y),Me=Math.max(Me,Nt.y),Xt>be&&(Ae(Fe,Nt,lt,Et,Mt,Dt),Ae(Nt,pt,Mt,Dt,Wt,gt))}Ae(z,B,d,g,p,g),Ae(B,G,p,g,p,y),Ae(G,X,p,y,d,y),Ae(X,z,d,y,d,g),te-=be,ce-=be,xe+=be,Me+=be;const Ne=1/Math.max(xe-te,Me-ce);return{scale:Ne,x:te*Ne,y:ce*Ne,x2:xe*Ne,y2:Me*Ne,projection:r}}const C$=$l(new Float32Array(16));class vd{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,l){return{x:0,y:0,z:0}}unproject(r,l){return new Xr(0,0)}projectTilePoint(r,l,d){return{x:r,y:l,z:0}}locationPoint(r,l,d=!0){return r._coordinatePoint(r.locationCoordinate(l),d)}pixelsPerMeter(r,l){return Vl(1,r)*l}pixelSpaceConversion(r,l,d){return 1}farthestPixelDistance(r){return MC(r,r.pixelsPerMeter)}pointCoordinate(r,l,d,p){const g=r.horizonLineFromTop(!1),y=new fe(l,Math.max(g,d));return r.rayIntersectionCoordinate(r.pointRayIntersection(y,p))}pointCoordinate3D(r,l,d){const p=new fe(l,d);if(r.elevation)return r.elevation.pointCoordinate(p);{const g=this.pointCoordinate(r,p.x,p.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(r,l){if(r.elevation)return!this.pointCoordinate3D(r,l.x,l.y);const d=r.horizonLineFromTop();return l.y<d}createInversionMatrix(r,l){return C$}createTileMatrix(r,l,d){let p,g,y;const b=d.canonical,T=$l(new Float64Array(16));if(this.isReprojectedInTileSpace){const C=Zh(b,this);p=1,g=C.x+d.wrap*C.scale,y=C.y,$h(T,T,[p/C.scale,p/C.scale,r.pixelsPerMeter/l])}else p=l/r.zoomScale(b.z),g=(b.x+Math.pow(2,b.z)*d.wrap)*p,y=b.y*p;return zm(T,T,[g,y,0]),$h(T,T,[p/Hn,p/Hn,1]),T}upVector(r,l,d){return[0,0,1]}upVectorScale(r,l,d){return{metersToTile:1}}}class k$ extends vd{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[l,d]=this.parallels=r.parallels||[29.5,45.5],p=Math.sin(at(l));this.n=(p+Math.sin(at(d)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(r,l){const{n:d,c:p,r0:g}=this,y=at(r-this.center[0]),b=at(l),T=Math.sqrt(p-2*d*Math.sin(b))/d;return{x:T*Math.sin(y*d),y:T*Math.cos(y*d)-g,z:0}}unproject(r,l){const{n:d,c:p,r0:g}=this,y=g+l;let b=Math.atan2(r,Math.abs(y))*Math.sign(y);y*d<0&&(b-=Math.PI*Math.sign(r)*Math.sign(y));const T=at(this.center[0])*d;b=it(b,-Math.PI-T,Math.PI-T);const C=Le(qe(b/d)+this.center[0],-180,180),O=Math.asin(Le((p-(r*r+y*y)*d*d)/(2*d),-1,1)),z=Le(qe(O),-Jo,Jo);return new Xr(C,z)}}const ag=1.340264,sg=-.081106,lg=893e-6,cg=.003796,Fy=Math.sqrt(3)/2;class P$ extends vd{project(r,l){l=l/180*Math.PI,r=r/180*Math.PI;const d=Math.asin(Fy*Math.sin(l)),p=d*d,g=p*p*p;return{x:.5*(r*Math.cos(d)/(Fy*(ag+3*sg*p+g*(7*lg+9*cg*p)))/Math.PI+.5),y:1-.5*(d*(ag+sg*p+g*(lg+cg*p))/Math.PI+1),z:0}}unproject(r,l){r=(2*r-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,p=d*d,g=p*p*p;for(let O,z,B,G=0;G<12&&(z=d*(ag+sg*p+g*(lg+cg*p))-l,B=ag+3*sg*p+g*(7*lg+9*cg*p),O=z/B,d=Le(d-O,-Math.PI/3,Math.PI/3),p=d*d,g=p*p*p,!(Math.abs(O)<1e-12));++G);const y=Fy*r*(ag+3*sg*p+g*(7*lg+9*cg*p))/Math.cos(d),b=Math.asin(Math.sin(d)/Fy),T=Le(180*y/Math.PI,-180,180),C=Le(180*b/Math.PI,-Jo,Jo);return new Xr(T,C)}}class I$ extends vd{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,l){return{x:.5+r/360,y:.5-l/360,z:0}}unproject(r,l){const d=360*(r-.5),p=Le(360*(.5-l),-Jo,Jo);return new Xr(d,p)}}const Tf=Math.PI/2;function Ny(s){return Math.tan((Tf+s)/2)}class A$ extends vd{constructor(r){super(r),this.center=r.center||[0,30];const[l,d]=this.parallels=r.parallels||[30,30];let p=at(l),g=at(d);this.southernCenter=p+g<0,this.southernCenter&&(p=-p,g=-g);const y=Math.cos(p),b=Ny(p);this.n=p===g?Math.sin(p):Math.log(y/Math.cos(g))/Math.log(Ny(g)/b),this.f=y*Math.pow(Ny(p),this.n)/this.n}project(r,l){l=at(l),this.southernCenter&&(l=-l),r=at(r-this.center[0]);const d=1e-6,{n:p,f:g}=this;g>0?l<-Tf+d&&(l=-Tf+d):l>Tf-d&&(l=Tf-d);const y=g/Math.pow(Ny(l),p);let b=y*Math.sin(p*r),T=g-y*Math.cos(p*r);return b=.5*(b/Math.PI+.5),T=.5*(T/Math.PI+.5),{x:b,y:this.southernCenter?T:1-T,z:0}}unproject(r,l){r=(2*r-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:d,f:p}=this,g=p-l,y=Math.sign(g),b=Math.sign(d)*Math.sqrt(r*r+g*g);let T=Math.atan2(r,Math.abs(g))*y;g*d<0&&(T-=Math.PI*Math.sign(r)*y);const C=Le(qe(T/d)+this.center[0],-180,180),O=Le(qe(2*Math.atan(Math.pow(p/b,1/d))-Tf),-Jo,Jo);return new Xr(C,this.southernCenter?-O:O)}}class DC extends vd{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,l){return{x:Ic(r),y:Ac(l),z:0}}unproject(r,l){const d=Ds(r),p=Yo(l);return new Xr(d,p)}}const OC=at(Jo);class M$ extends vd{project(r,l){const d=(l=at(l))*l,p=d*d;return{x:.5*((r=at(r))*(.8707-.131979*d+p*(p*(.003971*d-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+d*(.015085+p*(.028874*d-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(r,l){r=(2*r-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,p=25,g=0,y=d*d;do{y=d*d;const C=y*y;g=(d*(1.007226+y*(.015085+C*(.028874*y-.044475-.005916*C)))-l)/(1.007226+y*(.045255+C*(.259866*y-.311325-.005916*11*C))),d=Le(d-g,-OC,OC)}while(Math.abs(g)>1e-6&&--p>0);y=d*d;const b=Le(qe(r/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),T=qe(d);return new Xr(b,T)}}const RC=at(Jo);class D$ extends vd{project(r,l){l=at(l),r=at(r);const d=Math.cos(l),p=2/Math.PI,g=Math.acos(d*Math.cos(r/2)),y=Math.sin(g)/g,b=.5*(r*p+2*d*Math.sin(r/2)/y)||0,T=.5*(l+Math.sin(l)/y)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(T/Math.PI+1),z:0}}unproject(r,l){let d=r=(2*r-.5)*Math.PI,p=l=(2*(1-l)-1)*Math.PI,g=25;const y=1e-6;let b=0,T=0;do{const C=Math.cos(p),O=Math.sin(p),z=2*O*C,B=O*O,G=C*C,X=Math.cos(d/2),te=Math.sin(d/2),ce=2*X*te,xe=te*te,Me=1-G*X*X,be=Me?1/Me:0,Ae=Me?Math.acos(C*X)*Math.sqrt(1/Me):0,Ne=.5*(2*Ae*C*te+2*d/Math.PI)-r,Fe=.5*(Ae*O+p)-l,pt=.5*be*(G*xe+Ae*C*X*B)+1/Math.PI,lt=be*(ce*z/4-Ae*O*te),Et=.125*be*(z*te-Ae*O*G*ce),Wt=.5*be*(B*X+Ae*xe*C)+.5,gt=lt*Et-Wt*pt;b=(Fe*lt-Ne*Wt)/gt,T=(Ne*Et-Fe*pt)/gt,d=Le(d-b,-Math.PI,Math.PI),p=Le(p-T,-RC,RC)}while((Math.abs(b)>y||Math.abs(T)>y)&&--g>0);return new Xr(qe(d),qe(p))}}class LC extends vd{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(at(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,l){const{scale:d,cosPhi:p}=this;return{x:at(r)*p*d+.5,y:-Math.sin(at(l))/p*d+.5,z:0}}unproject(r,l){const{scale:d,cosPhi:p}=this,g=-(l-.5)/d,y=Le(qe((r-.5)/d)/p,-180,180),b=Math.asin(Le(g*p,-1,1)),T=Le(qe(b),-Jo,Jo);return new Xr(y,T)}}class O$ extends DC{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,l,d){const p=Wm(r,l,d);return Wi(p,p,Hm(Pc(d))),{x:p[0],y:p[1],z:p[2]}}locationPoint(r,l){const d=uf(l.lat,l.lng),p=ba([],d),g=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(l),r._centerAltitude):r._centerAltitude;jm(d,d,p,Vl(1,0)*Hn*g);const y=$l(new Float64Array(16));return jh(y,r.pixelMatrix,r.globeMatrix),Wi(d,d,y),new fe(d[0],d[1])}pixelsPerMeter(r,l){return Vl(1,0)*l}pixelSpaceConversion(r,l,d){const p=Vl(1,r)*l,g=Sr(Vl(1,45)*l,p,d);return this.pixelsPerMeter(r,l)/g}createTileMatrix(r,l,d){const p=Rw(Pc(d.canonical));return jh(new Float64Array(16),r.globeMatrix,p)}createInversionMatrix(r,l){const{center:d}=r,p=Hm(Pc(l));return hy(p,p,at(d.lng)),Sw(p,p,at(d.lat)),$h(p,p,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(r,l,d,p){return l8(r,l,d,!0)||new hf(0,0)}pointCoordinate3D(r,l,d){const p=this.pointCoordinate(r,l,d,0);return[p.x,p.y,p.z]}isPointAboveHorizon(r,l){return!l8(r,l.x,l.y,!1)}farthestPixelDistance(r){const l=function(p,g){const y=p.cameraToCenterDistance,b=p._centerAltitude*g,T=p._camera,C=p._camera.forward(),O=wu([],Ms([],C,-y),[0,0,b]),z=p.worldSize/(2*Math.PI),B=[0,0,-z],G=p.width/p.height,X=Math.tan(p.fovAboveCenter),te=Ms([],T.up(),X),ce=Ms([],T.right(),X*G),xe=ba([],wu([],wu([],C,te),ce)),Me=[];let be;if(new Pw(O,xe).closestPointOnSphere(B,z,Me)){const Ae=wu([],Me,B),Ne=Ul([],Ae,O);be=Math.cos(p.fovAboveCenter)*Fm(Ne)}else{const Ae=Ul([],O,B),Ne=Ul([],B,O);ba(Ne,Ne);const Fe=Fm(Ae)-z;be=Math.sqrt(Fe*(Fe+2*z));const pt=Math.acos(be/(z+Fe))-Math.acos(tl(C,Ne));be*=Math.cos(pt)}return 1.01*be}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),d=df(r.zoom);if(d>0){const p=MC(r,Vl(1,r.center.lat)*r.worldSize),g=r.worldSize/(2*Math.PI),y=Math.max(r.width,r.height)/r.worldSize*Math.PI;return Sr(l,p+g*(1-Math.cos(y)),Math.pow(d,10))}return l}upVector(r,l,d){return Wm(l,d,r,1)}upVectorScale(r){return{metersToTile:py(my(Pc(r)))}}}function zC(s){const r=s.parallels,l=!!r&&Math.abs(r[0]+r[1])<.01;switch(s.name){case"mercator":return new DC(s);case"equirectangular":return new I$(s);case"naturalEarth":return new M$(s);case"equalEarth":return new P$(s);case"winkelTripel":return new D$(s);case"albers":return l?new LC(s):new k$(s);case"lambertConformalConic":return l?new LC(s):new A$(s);case"globe":return new O$(s)}throw new Error(`Invalid projection name: ${s.name}`)}const R$=Ty.types,L$=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function By(s,r,l,d,p,g,y,b,T,C,O,z,B){const G=b?Math.min(yd,Math.round(b[0])):0,X=b?Math.min(yd,Math.round(b[1])):0;s.emplaceBack(r,l,Math.round(32*d),Math.round(32*p),g,y,(G<<1)+(T?1:0),X,16*C,16*O,256*z,256*B)}function jy(s,r,l,d,p,g,y){s.emplaceBack(r,l,d,p,g,y)}function $y(s,r,l,d,p){s.emplaceBack(r,l,d,p),s.emplaceBack(r,l,d,p),s.emplaceBack(r,l,d,p),s.emplaceBack(r,l,d,p)}function z$(s){for(const r of s.sections)if(vw(r.text))return!0;return!1}class d3{constructor(r){this.layoutVertexArray=new zt,this.indexArray=new Mn,this.programConfigurations=r,this.segments=new Ki,this.dynamicLayoutVertexArray=new $t,this.opacityVertexArray=new zn,this.placedSymbolArray=new Xi,this.globeExtVertexArray=new Gt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,l,d,p){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Wj.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,qj.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,L$,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,Hj.members,!0)),this.opacityVertexBuffer.itemSize=1),(d||p)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}En(d3,"SymbolBuffers");class h3{constructor(r,l,d){this.layoutVertexArray=new r,this.layoutAttributes=l,this.indexArray=new d,this.segments=new Ki,this.collisionVertexArray=new Tr,this.collisionVertexArrayExt=new xr}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Gj.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,Zj.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}En(h3,"CollisionBuffers");class xd{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(y=>y.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=$l([]),this.placementViewportMatrix=$l([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=e3(this.zoom,l["text-size"]),this.iconSizeData=e3(this.zoom,l["icon-size"]);const d=this.layers[0].layout,p=d.get("symbol-sort-key"),g=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=d.get("text-writing-mode").map(y=>Os[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=r.sourceID,this.projection=r.projection}createArrays(){this.text=new d3(new Bh(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new d3(new Bh(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new xa,this.lineVertexArray=new of,this.symbolInstances=new fi}calculateGlyphDependencies(r,l,d,p,g){for(let y=0;y<r.length;y++)if(l[r.charCodeAt(y)]=!0,p&&g){const b=ng[r.charAt(y)];b&&(l[b.charCodeAt(0)]=!0)}}populate(r,l,d,p){const g=this.layers[0],y=g.layout,b=this.projection.name==="globe",T=y.get("text-font"),C=y.get("text-field"),O=y.get("icon-image"),z=(C.value.kind!=="constant"||C.value.value instanceof Wo&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),B=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,G=y.get("symbol-sort-key");if(this.features=[],!z&&!B)return;const X=l.iconDependencies,te=l.glyphDependencies,ce=l.availableImages,xe=new L(this.zoom);for(const{feature:Me,id:be,index:Ae,sourceLayerIndex:Ne}of r){const Fe=g._featureFilter.needGeometry,pt=Hh(Me,Fe);if(!g._featureFilter.filter(xe,pt,d))continue;if(Fe||(pt.geometry=Eu(Me,d,p)),b&&Me.type!==1&&d.z<=5){const gt=pt.geometry,Mt=.98078528056,Dt=(Nt,Xt)=>tl(Wm(Nt.x,Nt.y,d,1),Wm(Xt.x,Xt.y,d,1))<Mt;for(let Nt=0;Nt<gt.length;Nt++)gt[Nt]=qB(gt[Nt],Dt)}let lt,Et;if(z){const gt=g.getValueAndResolveTokens("text-field",pt,d,ce),Mt=Wo.factory(gt);z$(Mt)&&(this.hasRTLText=!0),(!this.hasRTLText||w()==="unavailable"||this.hasRTLText&&A.isParsed())&&(lt=Yj(Mt,g,pt))}if(B){const gt=g.getValueAndResolveTokens("icon-image",pt,d,ce);Et=gt instanceof ga?gt:ga.fromString(gt)}if(!lt&&!Et)continue;const Wt=this.sortFeaturesByKey?G.evaluate(pt,{},d):void 0;if(this.features.push({id:be,text:lt,icon:Et,index:Ae,sourceLayerIndex:Ne,geometry:pt.geometry,properties:Me.properties,type:R$[Me.type],sortKey:Wt}),Et&&(X[Et.name]=!0),lt){const gt=T.evaluate(pt,{},d).join(","),Mt=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Os.vertical)>=0;for(const Dt of lt.sections)if(Dt.image)X[Dt.image.name]=!0;else{const Nt=Im(lt.toString()),Xt=Dt.fontStack||gt,bt=te[Xt]=te[Xt]||{};this.calculateGlyphDependencies(Dt.text,bt,Mt,this.allowVerticalPlacement,Nt)}}}y.get("symbol-placement")==="line"&&(this.features=function(Me){const be={},Ae={},Ne=[];let Fe=0;function pt(gt){Ne.push(Me[gt]),Fe++}function lt(gt,Mt,Dt){const Nt=Ae[gt];return delete Ae[gt],Ae[Mt]=Nt,Ne[Nt].geometry[0].pop(),Ne[Nt].geometry[0]=Ne[Nt].geometry[0].concat(Dt[0]),Nt}function Et(gt,Mt,Dt){const Nt=be[Mt];return delete be[Mt],be[gt]=Nt,Ne[Nt].geometry[0].shift(),Ne[Nt].geometry[0]=Dt[0].concat(Ne[Nt].geometry[0]),Nt}function Wt(gt,Mt,Dt){const Nt=Dt?Mt[0][Mt[0].length-1]:Mt[0][0];return`${gt}:${Nt.x}:${Nt.y}`}for(let gt=0;gt<Me.length;gt++){const Mt=Me[gt],Dt=Mt.geometry,Nt=Mt.text?Mt.text.toString():null;if(!Nt){pt(gt);continue}const Xt=Wt(Nt,Dt),bt=Wt(Nt,Dt,!0);if(Xt in Ae&&bt in be&&Ae[Xt]!==be[bt]){const hn=Et(Xt,bt,Dt),kn=lt(Xt,bt,Ne[hn].geometry);delete be[Xt],delete Ae[bt],Ae[Wt(Nt,Ne[kn].geometry,!0)]=kn,Ne[hn].geometry=null}else Xt in Ae?lt(Xt,bt,Dt):bt in be?Et(Xt,bt,Dt):(pt(gt),be[Xt]=Fe-1,Ae[bt]=Fe-1)}return Ne.filter(gt=>gt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Me,be)=>Me.sortKey-be.sortKey)}update(r,l,d,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,l,this.layers,d,p),this.icon.programConfigurations.updatePaintArrays(r,l,this.layers,d,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=zC(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,l){const d=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:p,y:g}of l)this.lineVertexArray.emplaceBack(p,g);return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,l,d,p,g,y,b,T,C,O,z,B,G,X){const te=r.indexArray,ce=r.layoutVertexArray,xe=r.globeExtVertexArray,Me=r.segments.prepareSegment(4*l.length,ce,te,this.canOverlap?y.sortKey:void 0),be=this.glyphOffsetArray.length,Ae=Me.vertexLength,Ne=this.allowVerticalPlacement&&b===Os.vertical?Math.PI/2:0,Fe=y.text&&y.text.sections;for(let lt=0;lt<l.length;lt++){const{tl:Et,tr:Wt,bl:gt,br:Mt,tex:Dt,pixelOffsetTL:Nt,pixelOffsetBR:Xt,minFontScaleX:bt,minFontScaleY:hn,glyphOffset:kn,isSDF:pn,sectionIndex:sr}=l[lt],Yt=Me.vertexLength,Bn=kn[1];if(By(ce,C.x,C.y,Et.x,Bn+Et.y,Dt.x,Dt.y,d,pn,Nt.x,Nt.y,bt,hn),By(ce,C.x,C.y,Wt.x,Bn+Wt.y,Dt.x+Dt.w,Dt.y,d,pn,Xt.x,Nt.y,bt,hn),By(ce,C.x,C.y,gt.x,Bn+gt.y,Dt.x,Dt.y+Dt.h,d,pn,Nt.x,Xt.y,bt,hn),By(ce,C.x,C.y,Mt.x,Bn+Mt.y,Dt.x+Dt.w,Dt.y+Dt.h,d,pn,Xt.x,Xt.y,bt,hn),T){const{x:lr,y:Lr,z:cr}=T.anchor,[Kn,di,hr]=T.up;jy(xe,lr,Lr,cr,Kn,di,hr),jy(xe,lr,Lr,cr,Kn,di,hr),jy(xe,lr,Lr,cr,Kn,di,hr),jy(xe,lr,Lr,cr,Kn,di,hr),$y(r.dynamicLayoutVertexArray,lr,Lr,cr,Ne)}else $y(r.dynamicLayoutVertexArray,C.x,C.y,C.z,Ne);te.emplaceBack(Yt,Yt+1,Yt+2),te.emplaceBack(Yt+1,Yt+2,Yt+3),Me.vertexLength+=4,Me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kn[0]),lt!==l.length-1&&sr===l[lt+1].sectionIndex||r.programConfigurations.populatePaintArrays(ce.length,y,y.index,{},G,X,Fe&&Fe[sr])}const pt=T?T.anchor:C;r.placedSymbolArray.emplaceBack(pt.x,pt.y,pt.z,C.x,C.y,be,this.glyphOffsetArray.length-be,Ae,O,z,C.segment,d?d[0]:0,d?d[1]:0,p[0],p[1],b,0,!1,0,B,0)}_commitLayoutVertex(r,l,d,p,g,y,b){r.emplaceBack(l,d,p,g,y,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(r,l,d,p,g,y,b){const T=d.segments.prepareSegment(4,d.layoutVertexArray,d.indexArray),C=T.vertexLength,O=b.tileAnchorX,z=b.tileAnchorY;for(let G=0;G<4;G++)d.collisionVertexArray.emplaceBack(0,0,0,0);d.collisionVertexArrayExt.emplaceBack(l,-r.padding,-r.padding),d.collisionVertexArrayExt.emplaceBack(l,r.padding,-r.padding),d.collisionVertexArrayExt.emplaceBack(l,r.padding,r.padding),d.collisionVertexArrayExt.emplaceBack(l,-r.padding,r.padding),this._commitLayoutVertex(d.layoutVertexArray,p,g,y,O,z,new fe(r.x1,r.y1)),this._commitLayoutVertex(d.layoutVertexArray,p,g,y,O,z,new fe(r.x2,r.y1)),this._commitLayoutVertex(d.layoutVertexArray,p,g,y,O,z,new fe(r.x2,r.y2)),this._commitLayoutVertex(d.layoutVertexArray,p,g,y,O,z,new fe(r.x1,r.y2)),T.vertexLength+=4;const B=d.indexArray;B.emplaceBack(C,C+1),B.emplaceBack(C+1,C+2),B.emplaceBack(C+2,C+3),B.emplaceBack(C+3,C),T.primitiveLength+=4}_addTextDebugCollisionBoxes(r,l,d,p,g,y){for(let b=p;b<g;b++){const T=d.get(b),C=this.getSymbolInstanceTextSize(r,y,l,b);this._addCollisionDebugVertices(T,C,this.textCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(r,l,d,p,g,y){for(let b=p;b<g;b++){const T=d.get(b),C=this.getSymbolInstanceIconSize(r,l,y.placedIconSymbolIndex);this._addCollisionDebugVertices(T,C,this.iconCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,y)}}generateCollisionDebugBuffers(r,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new h3(Cn,tC.members,To),this.iconCollisionBox=new h3(Cn,tC.members,To);const d=_f(this.iconSizeData,r),p=_f(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(p,r,l,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(p,r,l,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(d,r,l,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(d,r,l,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(r,l,d,p){const g=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:p),y=Iy(this.textSizeData,r,g)/Fo;return this.tilePixelRatio*y}getSymbolInstanceIconSize(r,l,d){const p=this.icon.placedSymbolArray.get(d),g=Iy(this.iconSizeData,r,p);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(r,l,d){r.emplaceBack(l,-d,-d),r.emplaceBack(l,d,-d),r.emplaceBack(l,d,d),r.emplaceBack(l,-d,d)}_updateTextDebugCollisionBoxes(r,l,d,p,g,y){for(let b=p;b<g;b++){const T=d.get(b),C=this.getSymbolInstanceTextSize(r,y,l,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,C,T.padding)}}_updateIconDebugCollisionBoxes(r,l,d,p,g,y){for(let b=p;b<g;b++){const T=d.get(b),C=this.getSymbolInstanceIconSize(r,l,y);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,C,T.padding)}}updateCollisionDebugBuffers(r,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const d=_f(this.iconSizeData,r),p=_f(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const y=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(p,r,l,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(p,r,l,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(d,r,l,y.iconBoxStartIndex,y.iconBoxEndIndex,y.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(d,r,l,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,l,d,p,g,y,b,T,C){const O={};if(l<d){const{x1:z,y1:B,x2:G,y2:X,padding:te,projectedAnchorX:ce,projectedAnchorY:xe,projectedAnchorZ:Me,tileAnchorX:be,tileAnchorY:Ae,featureIndex:Ne}=r.get(l);O.textBox={x1:z,y1:B,x2:G,y2:X,padding:te,projectedAnchorX:ce,projectedAnchorY:xe,projectedAnchorZ:Me,tileAnchorX:be,tileAnchorY:Ae},O.textFeatureIndex=Ne}if(p<g){const{x1:z,y1:B,x2:G,y2:X,padding:te,projectedAnchorX:ce,projectedAnchorY:xe,projectedAnchorZ:Me,tileAnchorX:be,tileAnchorY:Ae,featureIndex:Ne}=r.get(p);O.verticalTextBox={x1:z,y1:B,x2:G,y2:X,padding:te,projectedAnchorX:ce,projectedAnchorY:xe,projectedAnchorZ:Me,tileAnchorX:be,tileAnchorY:Ae},O.verticalTextFeatureIndex=Ne}if(y<b){const{x1:z,y1:B,x2:G,y2:X,padding:te,projectedAnchorX:ce,projectedAnchorY:xe,projectedAnchorZ:Me,tileAnchorX:be,tileAnchorY:Ae,featureIndex:Ne}=r.get(y);O.iconBox={x1:z,y1:B,x2:G,y2:X,padding:te,projectedAnchorX:ce,projectedAnchorY:xe,projectedAnchorZ:Me,tileAnchorX:be,tileAnchorY:Ae},O.iconFeatureIndex=Ne}if(T<C){const{x1:z,y1:B,x2:G,y2:X,padding:te,projectedAnchorX:ce,projectedAnchorY:xe,projectedAnchorZ:Me,tileAnchorX:be,tileAnchorY:Ae,featureIndex:Ne}=r.get(T);O.verticalIconBox={x1:z,y1:B,x2:G,y2:X,padding:te,projectedAnchorX:ce,projectedAnchorY:xe,projectedAnchorZ:Me,tileAnchorX:be,tileAnchorY:Ae},O.verticalIconFeatureIndex=Ne}return O}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,l){const d=r.placedSymbolArray.get(l),p=d.vertexStartIndex+4*d.numGlyphs;for(let g=d.vertexStartIndex;g<p;g+=4)r.indexArray.emplaceBack(g,g+1,g+2),r.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(r),d=Math.cos(r),p=[],g=[],y=[];for(let b=0;b<this.symbolInstances.length;++b){y.push(b);const T=this.symbolInstances.get(b);p.push(0|Math.round(l*T.tileAnchorX+d*T.tileAnchorY)),g.push(T.featureIndex)}return y.sort((b,T)=>p[b]-p[T]||g[T]-g[b]),y}addToSortKeyRanges(r,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:T,verticalPlacedIconSymbolIndex:C}=d;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),g>=0&&g!==p&&this.addIndicesForPlacedSymbol(this.text,g),y>=0&&y!==g&&y!==p&&this.addIndicesForPlacedSymbol(this.text,y),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T),C>=0&&this.addIndicesForPlacedSymbol(this.icon,C)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}En(xd,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),xd.MAX_GLYPHS=65535,xd.addDynamicAttributes=$y;const F$=new ke({"symbol-placement":new Q(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new Q(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Q(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new he(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Q(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Q(vt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Q(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Q(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Q(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new he(vt.layout_symbol["icon-size"]),"icon-text-fit":new Q(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Q(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new he(vt.layout_symbol["icon-image"]),"icon-rotate":new he(vt.layout_symbol["icon-rotate"]),"icon-padding":new Q(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new Q(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new he(vt.layout_symbol["icon-offset"]),"icon-anchor":new he(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Q(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Q(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Q(vt.layout_symbol["text-rotation-alignment"]),"text-field":new he(vt.layout_symbol["text-field"]),"text-font":new he(vt.layout_symbol["text-font"]),"text-size":new he(vt.layout_symbol["text-size"]),"text-max-width":new he(vt.layout_symbol["text-max-width"]),"text-line-height":new he(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new he(vt.layout_symbol["text-letter-spacing"]),"text-justify":new he(vt.layout_symbol["text-justify"]),"text-radial-offset":new he(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Q(vt.layout_symbol["text-variable-anchor"]),"text-anchor":new he(vt.layout_symbol["text-anchor"]),"text-max-angle":new Q(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new Q(vt.layout_symbol["text-writing-mode"]),"text-rotate":new he(vt.layout_symbol["text-rotate"]),"text-padding":new Q(vt.layout_symbol["text-padding"]),"text-keep-upright":new Q(vt.layout_symbol["text-keep-upright"]),"text-transform":new he(vt.layout_symbol["text-transform"]),"text-offset":new he(vt.layout_symbol["text-offset"]),"text-allow-overlap":new Q(vt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Q(vt.layout_symbol["text-ignore-placement"]),"text-optional":new Q(vt.layout_symbol["text-optional"])});var p3={paint:new ke({"icon-opacity":new he(vt.paint_symbol["icon-opacity"]),"icon-color":new he(vt.paint_symbol["icon-color"]),"icon-halo-color":new he(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new he(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new he(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new Q(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Q(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new he(vt.paint_symbol["text-opacity"]),"text-color":new he(vt.paint_symbol["text-color"],{runtimeType:Vo,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new he(vt.paint_symbol["text-halo-color"]),"text-halo-width":new he(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new he(vt.paint_symbol["text-halo-blur"]),"text-translate":new Q(vt.paint_symbol["text-translate"]),"text-translate-anchor":new Q(vt.paint_symbol["text-translate-anchor"])}),layout:F$};class FC{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:pc,this.defaultValue=r}evaluate(r){if(r.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(r.formattedSection))return l.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}En(FC,"FormatSectionOverride",{omit:["defaultValue"]});class Uy extends jl{constructor(r){super(r,p3)}recalculate(r,l){super.recalculate(r,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const d=this.layout.get("text-writing-mode");if(d){const p=[];for(const g of d)p.indexOf(g)<0&&p.push(g);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(r,l,d,p){const g=this.layout.get(r).evaluate(l,{},d,p),y=this._unevaluatedLayout._values[r];return y.isDataDriven()||ld(y.value)||!g?g:function(b,T){return T.replace(/{([^{}]+)}/g,(C,O)=>O in b?String(b[O]):"")}(l.properties,g)}createBucket(r){return new xd(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of p3.paint.overridableProperties){if(!Uy.hasPaintOverride(this.layout,r))continue;const l=this.paint.get(r),d=new FC(l),p=new Kp(d,l.property.specification);let g=null;g=l.value.kind==="constant"||l.value.kind==="source"?new ym("source",p):new Ah("composite",p,l.value.zoomStops,l.value._interpolationType),this.paint._values[r]=new me(l.property,g,l.parameters)}}_handleOverridablePaintPropertyUpdate(r,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&Uy.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,l){const d=r.get("text-field"),p=p3.paint.properties[l];let g=!1;const y=b=>{for(const T of b)if(p.overrides&&p.overrides.hasOverride(T))return void(g=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Wo)y(d.value.value.sections);else if(d.value.kind==="source"){const b=C=>{g||(C instanceof Ys&&Ei(C.value)===fc?y(C.value.sections):C instanceof ws?y(C.sections):C.eachChild(b))},T=d.value;T._styleExpression&&b(T._styleExpression.expression)}return g}getProgramConfiguration(r){return new md(this,r)}}var N$={paint:new ke({"background-color":new Q(vt.paint_background["background-color"]),"background-pattern":new Q(vt.paint_background["background-pattern"]),"background-opacity":new Q(vt.paint_background["background-opacity"])})},B$={paint:new ke({"raster-opacity":new Q(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Q(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Q(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Q(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new Q(vt.paint_raster["raster-saturation"]),"raster-contrast":new Q(vt.paint_raster["raster-contrast"]),"raster-resampling":new Q(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new Q(vt.paint_raster["raster-fade-duration"])})};class j$ extends jl{constructor(r){super(r,{}),this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}var $$={paint:new ke({"sky-type":new Q(vt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Q(vt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Q(vt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Q(vt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Q(vt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ee(vt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Q(vt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Q(vt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Q(vt.paint_sky["sky-opacity"])})};function f3(s,r,l){const d=[0,0,1],p=n8([]);return i8(p,p,l?-at(s)+Math.PI:at(s)),r8(p,p,-at(r)),JT(d,d,p),ba(d,d)}const U$={circle:class extends jl{constructor(s){super(s,QB)}createBucket(s){return new jw(s)}queryRadius(s){const r=s;return pf("circle-radius",this,r)+pf("circle-stroke-width",this,r)+yy(this.paint.get("circle-translate"))}queryIntersectsFeature(s,r,l,d,p,g,y,b){const T=C8(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,s.pixelToTileUnitsFactor),C=this.paint.get("circle-radius").evaluate(r,l)+this.paint.get("circle-stroke-width").evaluate(r,l);return k8(s,d,g,y,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",T,C)}getProgramIds(){return["circle"]}getProgramConfiguration(s){return new md(this,s)}},heatmap:class extends jl{createBucket(s){return new I8(s)}constructor(s){super(s,rj),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ww({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(s){return pf("heatmap-radius",this,s)}queryIntersectsFeature(s,r,l,d,p,g,y,b){const T=this.paint.get("heatmap-radius").evaluate(r,l);return k8(s,d,g,y,b,!0,!0,new fe(0,0),T)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(s){return new md(this,s)}},hillshade:class extends jl{constructor(s){super(s,ij)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends jl{constructor(s){super(s,xj)}getProgramIds(){const s=this.paint.get("fill-pattern"),r=s&&s.constantOr(1),l=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(s){return new md(this,s)}recalculate(s,r){super.recalculate(s,r);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new Ey(s)}queryRadius(){return yy(this.paint.get("fill-translate"))}queryIntersectsFeature(s,r,l,d,p,g){return!s.queryGeometry.isAboveHorizon&&b8(T8(s.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,s.pixelToTileUnitsFactor),d)}isTileClipped(){return!0}},"fill-extrusion":class extends jl{constructor(s){super(s,zj)}createBucket(s){return new Qm(s)}queryRadius(){return yy(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(s){return new md(this,s)}queryIntersectsFeature(s,r,l,d,p,g,y,b,T){const C=C8(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,s.pixelToTileUnitsFactor),O=this.paint.get("fill-extrusion-height").evaluate(r,l),z=this.paint.get("fill-extrusion-base").evaluate(r,l),B=[0,0],G=b&&g.elevation,X=g.elevation?g.elevation.exaggeration():1,te=s.tile.getBucket(this);if(G&&te instanceof Qm){const Ae=te.centroidVertexArray,Ne=T+1;Ne<Ae.length&&(B[0]=Ae.geta_centroid_pos0(Ne),B[1]=Ae.geta_centroid_pos1(Ne))}if(B[0]===0&&B[1]===1)return!1;g.projection.name==="globe"&&(d=G8([d],[new fe(0,0),new fe(Hn,Hn)],s.tileID.canonical).map(Ae=>Ae.polygon).flat());const ce=G?b:null,[xe,Me]=function(Ae,Ne,Fe,pt,lt,Et,Wt,gt,Mt,Dt,Nt){return Ae.projection.name==="globe"?function(Xt,bt,hn,kn,pn,sr,Yt,Bn,lr,Lr,cr){const Kn=[],di=[],hr=Xt.projection.upVectorScale(cr,Xt.center.lat,Xt.worldSize).metersToTile,pr=[0,0,0,1],Kr=[0,0,0,1],oi=(Yr,Si,zi,Ji)=>{Yr[0]=Si,Yr[1]=zi,Yr[2]=Ji,Yr[3]=1},ai=q8();hn>0&&(hn+=ai),kn+=ai;for(const Yr of bt){const Si=[],zi=[];for(const Ji of Yr){const Jr=Ji.x+pn.x,lo=Ji.y+pn.y,Qi=Xt.projection.projectTilePoint(Jr,lo,cr),Oi=Xt.projection.upVector(cr,Ji.x,Ji.y);let Fr=hn,eo=kn;if(Yt){const si=Y8(Jr,lo,hn,kn,Yt,Bn,lr,Lr);Fr+=si.base,eo+=si.top}hn!==0?oi(pr,Qi.x+Oi[0]*hr*Fr,Qi.y+Oi[1]*hr*Fr,Qi.z+Oi[2]*hr*Fr):oi(pr,Qi.x,Qi.y,Qi.z),oi(Kr,Qi.x+Oi[0]*hr*eo,Qi.y+Oi[1]*hr*eo,Qi.z+Oi[2]*hr*eo),Wi(pr,pr,sr),Wi(Kr,Kr,sr),Si.push(new gf(pr[0],pr[1],pr[2])),zi.push(new gf(Kr[0],Kr[1],Kr[2]))}Kn.push(Si),di.push(zi)}return[Kn,di]}(Ae,Ne,Fe,pt,lt,Et,Wt,gt,Mt,Dt,Nt):Wt?function(Xt,bt,hn,kn,pn,sr,Yt,Bn,lr){const Lr=[],cr=[],Kn=[0,0,0,1];for(const di of Xt){const hr=[],pr=[];for(const Kr of di){const oi=Kr.x+kn.x,ai=Kr.y+kn.y,Yr=Y8(oi,ai,bt,hn,sr,Yt,Bn,lr);Kn[0]=oi,Kn[1]=ai,Kn[2]=Yr.base,Kn[3]=1,Uh(Kn,Kn,pn),Kn[3]=Math.max(Kn[3],1e-5);const Si=new gf(Kn[0]/Kn[3],Kn[1]/Kn[3],Kn[2]/Kn[3]);Kn[0]=oi,Kn[1]=ai,Kn[2]=Yr.top,Kn[3]=1,Uh(Kn,Kn,pn),Kn[3]=Math.max(Kn[3],1e-5);const zi=new gf(Kn[0]/Kn[3],Kn[1]/Kn[3],Kn[2]/Kn[3]);hr.push(Si),pr.push(zi)}Lr.push(hr),cr.push(pr)}return[Lr,cr]}(Ne,Fe,pt,lt,Et,Wt,gt,Mt,Dt):function(Xt,bt,hn,kn,pn){const sr=[],Yt=[],Bn=pn[8]*bt,lr=pn[9]*bt,Lr=pn[10]*bt,cr=pn[11]*bt,Kn=pn[8]*hn,di=pn[9]*hn,hr=pn[10]*hn,pr=pn[11]*hn;for(const Kr of Xt){const oi=[],ai=[];for(const Yr of Kr){const Si=Yr.x+kn.x,zi=Yr.y+kn.y,Ji=pn[0]*Si+pn[4]*zi+pn[12],Jr=pn[1]*Si+pn[5]*zi+pn[13],lo=pn[2]*Si+pn[6]*zi+pn[14],Qi=pn[3]*Si+pn[7]*zi+pn[15],Oi=Ji+Bn,Fr=Jr+lr,eo=lo+Lr,si=Math.max(Qi+cr,1e-5),Sa=Ji+Kn,to=Jr+di,No=lo+hr,Co=Math.max(Qi+pr,1e-5);oi.push(new gf(Oi/si,Fr/si,eo/si)),ai.push(new gf(Sa/Co,to/Co,No/Co))}sr.push(oi),Yt.push(ai)}return[sr,Yt]}(Ne,Fe,pt,lt,Et)}(g,d,z,O,C,y,ce,B,X,g.center.lat,s.tileID.canonical),be=s.queryGeometry;return function(Ae,Ne,Fe){let pt=1/0;b8(Fe,Ne)&&(pt=K8(Fe,Ne[0]));for(let lt=0;lt<Ne.length;lt++){const Et=Ne[lt],Wt=Ae[lt];for(let gt=0;gt<Et.length-1;gt++){const Mt=Et[gt],Dt=[Mt,Et[gt+1],Wt[gt+1],Wt[gt],Mt];x8(Fe,Dt)&&(pt=Math.min(pt,K8(Fe,Dt)))}}return pt!==1/0&&pt}(xe,Me,be.isPointQuery()?be.screenBounds:be.screenGeometry)}},line:class extends jl{constructor(s){super(s,J8),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof _a,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(s,r){super.recalculate(s,r),this.paint._values["line-floorwidth"]=Q8.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new Py(s)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(s){return new md(this,s)}queryRadius(s){const r=s,l=eC(pf("line-width",this,r),pf("line-gap-width",this,r)),d=pf("line-offset",this,r);return l/2+Math.abs(d)+yy(this.paint.get("line-translate"))}queryIntersectsFeature(s,r,l,d,p,g){if(s.queryGeometry.isAboveHorizon)return!1;const y=T8(s.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,s.pixelToTileUnitsFactor),b=s.pixelToTileUnitsFactor/2*eC(this.paint.get("line-width").evaluate(r,l),this.paint.get("line-gap-width").evaluate(r,l)),T=this.paint.get("line-offset").evaluate(r,l);return T&&(d=function(C,O){const z=[],B=new fe(0,0);for(let G=0;G<C.length;G++){const X=C[G],te=[];for(let ce=0;ce<X.length;ce++){const xe=X[ce],Me=X[ce+1],be=ce===0?B:xe.sub(X[ce-1])._unit()._perp(),Ae=ce===X.length-1?B:Me.sub(xe)._unit()._perp(),Ne=be._add(Ae)._unit();Ne._mult(1/(Ne.x*Ae.x+Ne.y*Ae.y)),te.push(Ne._mult(O)._add(xe))}z.push(te)}return z}(d,T*s.pixelToTileUnitsFactor)),function(C,O,z){for(let B=0;B<O.length;B++){const G=O[B];if(C.length>=3){for(let X=0;X<G.length;X++)if(qh(C,G[X]))return!0}if(XB(C,G,z))return!0}return!1}(y,d,b)}isTileClipped(){return!0}},symbol:Uy,background:class extends jl{constructor(s){super(s,N$)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends jl{constructor(s){super(s,B$)}getProgramIds(){return["raster"]}},sky:class extends jl{constructor(s){super(s,$$),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="sky-gradient"?this._updateColorRamp():s!=="sky-atmosphere-sun"&&s!=="sky-atmosphere-halo-color"&&s!=="sky-atmosphere-color"&&s!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Ww({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(s){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=s.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(s,r){if(this.paint.get("sky-type")==="atmosphere"){const d=this.paint.get("sky-atmosphere-sun"),p=!d,g=s.style.light,y=g.properties.get("position");return p&&g.properties.get("anchor")==="viewport"&&It("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?f3(y.azimuthal,90-y.polar,r):f3(d[0],90-d[1],r)}const l=this.paint.get("sky-gradient-center");return f3(l[0],90-l[1],r)}is3D(){return!1}isSky(){return!0}markSkyboxValid(s){this._skyboxInvalidated=!1,this._lightPosition=s.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const s=this.paint.get("sky-type");return s==="atmosphere"?["skyboxCapture","skybox"]:s==="gradient"?["skyboxGradient"]:null}}};class ug{constructor(r,l,d,p){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(l,p)}update(r,l,d){const{width:p,height:g}=r,{context:y}=this,{gl:b}=y,{HTMLImageElement:T,HTMLCanvasElement:C,HTMLVideoElement:O,ImageData:z,ImageBitmap:B}=v;if(b.bindTexture(b.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!l||l.premultiply!==!1)),d||this.size&&this.size[0]===p&&this.size[1]===g){const{x:G,y:X}=d||{x:0,y:0};r instanceof T||r instanceof C||r instanceof O||r instanceof z||B&&r instanceof B?b.texSubImage2D(b.TEXTURE_2D,0,G,X,b.RGBA,b.UNSIGNED_BYTE,r):b.texSubImage2D(b.TEXTURE_2D,0,G,X,p,g,b.RGBA,b.UNSIGNED_BYTE,r.data)}else this.size=[p,g],r instanceof T||r instanceof C||r instanceof O||r instanceof z||B&&r instanceof B?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,r):b.texImage2D(b.TEXTURE_2D,0,this.format,p,g,0,this.format,b.UNSIGNED_BYTE,r.data);this.useMipmap=!!(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(r,l){const{context:d}=this,{gl:p}=d;p.bindTexture(p.TEXTURE_2D,this.texture),r!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,r),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?r===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:r),this.filter=r),l!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,l),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class V${constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class W${constructor(){this.tasks={},this.taskQueue=[],Jt(["process"],this),this.invoker=new V$(this.process),this.nextId=0}add(r,l){const d=this.nextId++,p=function({type:g,isSymbolTile:y,zoom:b}){return b=b||0,g==="message"?0:g!=="maybePrepare"||y?g!=="parseTile"||y?g==="parseTile"&&y?300-b:g==="maybePrepare"&&y?400-b:500:200-b:100-b}(l);if(p===0){Zn();try{r()}finally{}return{cancel:()=>{}}}return this.tasks[d]={fn:r,metadata:l,priority:p,id:d},this.taskQueue.push(d),this.invoker.trigger(),{cancel:()=>{delete this.tasks[d]}}}process(){Zn();try{if(this.taskQueue=this.taskQueue.filter(d=>!!this.tasks[d]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const l=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let r=null,l=1/0;for(let p=0;p<this.taskQueue.length;p++){const g=this.tasks[this.taskQueue[p]];g.priority<l&&(l=g.priority,r=p)}if(r===null)return null;const d=this.taskQueue[r];return this.taskQueue.splice(r,1),d}remove(){this.invoker.remove()}}class NC{constructor(r){this._stringToNumber={},this._numberToString=[];for(let l=0;l<r.length;l++){const d=r[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const H$=["tile","layer","source","sourceLayer","state"];class BC{constructor(r,l,d,p,g){this.type="Feature",this._vectorTileFeature=r,this._z=l,this._x=d,this._y=p,this.properties=r.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(r.id=this.id);for(const l of H$)this[l]!==void 0&&(r[l]=this[l]);return r}}const il=32,Mc=33,bd=new Uint16Array(8184);for(let s=0;s<2046;s++){let r=s+2,l=0,d=0,p=0,g=0,y=0,b=0;for(1&r?p=g=y=il:l=d=b=il;(r>>=1)>1;){const C=l+p>>1,O=d+g>>1;1&r?(p=l,g=d,l=y,d=b):(l=p,d=g,p=y,g=b),y=C,b=O}const T=4*s;bd[T+0]=l,bd[T+1]=d,bd[T+2]=p,bd[T+3]=g}const Dc=new Uint16Array(2178),wd=new Uint8Array(1089),Vy=new Uint16Array(1089);function jC(s){return s===0?-.03125:s===32?.03125:0}var $C=et([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const UC={type:2,extent:Hn,loadGeometry:()=>[[new fe(0,0),new fe(Hn+1,0),new fe(Hn+1,Hn+1),new fe(0,Hn+1),new fe(0,0)]]};class m3{constructor(r,l,d,p,g){this.tileID=r,this.uid=Qt(),this.uses=0,this.tileSize=l,this.tileZoom=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(r){const l=r+this.timeAdded;l<Ui.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Zh(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(r,l,d){if(this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(p,g){const y={};if(!g)return y;for(const b of p){const T=b.layerIds.map(C=>g.getLayer(C)).filter(Boolean);if(T.length!==0){b.layers=T,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(C=>T.filter(O=>O.id===C)[0]));for(const C of T)y[C.id]=b}}return y}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const g=this.buckets[p];if(g instanceof xd){if(this.hasSymbolBuckets=!0,!d)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const g=this.buckets[p];if(g instanceof xd&&g.hasRTLText){this.hasRTLText=!0,A.isLoading()||A.isLoaded()||w()!=="deferred"||P();break}}this.queryPadding=0;for(const p in this.buckets){const g=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(g))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),r.lineAtlas&&(this.lineAtlas=r.lineAtlas)}else this.collisionBoxArray=new Zr}unloadVectorData(){if(this.hasData()){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const p=this.buckets[d];p.uploadPending()&&p.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ug(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ug(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new ug(r,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,d,p,g,y,b,T){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:b,transform:y,params:g,tileTransform:this.tileTransform},r,l,d):{}}querySourceFeatures(r,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const p=d.loadVTLayers(),g=l?l.sourceLayer:"",y=p._geojsonTileLayer||p[g];if(!y)return;const b=ef(l&&l.filter),{z:T,x:C,y:O}=this.tileID.canonical,z={z:T,x:C,y:O};for(let B=0;B<y.length;B++){const G=y.feature(B);if(b.needGeometry){const ce=Hh(G,!0);if(!b.filter(new L(this.tileID.overscaledZ),ce,this.tileID.canonical))continue}else if(!b.filter(new L(this.tileID.overscaledZ),G))continue;const X=d.getId(G,g),te=new BC(G,T,C,O,X);te.tile=z,r.push(te)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const d=tr(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let p=!1;if(this.expirationTime>d)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{const g=this.expirationTime-l;g?this.expirationTime=d+Math.max(g,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0||!l)return;const d=this.latestFeatureIndex.loadVTLayers(),p=l.style.listImages();for(const g in this.buckets){if(!l.style.hasLayer(g))continue;const y=this.buckets[g],b=y.layers[0].sourceLayer||"_geojsonTileLayer",T=d[b],C=r[b];if(!T||!C||Object.keys(C).length===0)continue;if(y.update(C,T,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),y instanceof Py||y instanceof Ey){const z=l.style._getSourceCache(y.layers[0].source);l._terrain&&l._terrain.enabled&&z&&y.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(z.id,this.tileID)}const O=l&&l.style&&l.style.getLayer(g);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ui.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=Ui.now()+r}setTexture(r,l){const d=l.context,p=d.gl;this.texture=this.texture||l.getTileTexture(r.width),this.texture?this.texture.update(r,{useMipmap:!0}):(this.texture=new ug(d,r,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE))}setDependencies(r,l){const d={};for(const p of l)d[p]=!0;this.dependencies[r]=d}hasDependency(r,l){for(const d of r){const p=this.dependencies[d];if(p){for(const g of l)if(p[g])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(r,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const d=Eu(UC,this.tileID.canonical,this.tileTransform)[0],p=new Vt,g=new is;for(let y=0;y<d.length;y++){const{x:b,y:T}=d[y];p.emplaceBack(b,T),g.emplaceBack(y)}g.emplaceBack(0),this._tileDebugIndexBuffer=r.createIndexBuffer(g),this._tileDebugBuffer=r.createVertexBuffer(p,Um.members),this._tileDebugSegments=Ki.simpleSegment(0,0,p.length,g.length)}_makeTileBoundsBuffers(r,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const d=Eu(UC,this.tileID.canonical,this.tileTransform)[0];let p,g;if(this.isRaster){const y=function(b,T){const C=Zh(b,T),O=Math.pow(2,b.z);for(let ce=0;ce<Mc;ce++)for(let xe=0;xe<Mc;xe++){const Me=Ds((b.x+(xe+jC(xe))/il)/O),be=Yo((b.y+(ce+jC(ce))/il)/O),Ae=T.project(Me,be),Ne=ce*Mc+xe;Dc[2*Ne+0]=Math.round((Ae.x*C.scale-C.x)*Hn),Dc[2*Ne+1]=Math.round((Ae.y*C.scale-C.y)*Hn)}wd.fill(0),Vy.fill(0);for(let ce=2045;ce>=0;ce--){const xe=4*ce,Me=bd[xe+0],be=bd[xe+1],Ae=bd[xe+2],Ne=bd[xe+3],Fe=Me+Ae>>1,pt=be+Ne>>1,lt=Fe+pt-be,Et=pt+Me-Fe,Wt=be*Mc+Me,gt=Ne*Mc+Ae,Mt=pt*Mc+Fe,Dt=Math.hypot((Dc[2*Wt+0]+Dc[2*gt+0])/2-Dc[2*Mt+0],(Dc[2*Wt+1]+Dc[2*gt+1])/2-Dc[2*Mt+1])>=16;wd[Mt]=wd[Mt]||(Dt?1:0),ce<1022&&(wd[Mt]=wd[Mt]||wd[(be+Et>>1)*Mc+(Me+lt>>1)]||wd[(Ne+Et>>1)*Mc+(Ae+lt>>1)])}const z=new Pt,B=new Mn;let G=0;function X(ce,xe){const Me=xe*Mc+ce;return Vy[Me]===0&&(z.emplaceBack(Dc[2*Me+0],Dc[2*Me+1],ce*Hn/il,xe*Hn/il),Vy[Me]=++G),Vy[Me]-1}function te(ce,xe,Me,be,Ae,Ne){const Fe=ce+Me>>1,pt=xe+be>>1;if(Math.abs(ce-Ae)+Math.abs(xe-Ne)>1&&wd[pt*Mc+Fe])te(Ae,Ne,ce,xe,Fe,pt),te(Me,be,Ae,Ne,Fe,pt);else{const lt=X(ce,xe),Et=X(Me,be),Wt=X(Ae,Ne);B.emplaceBack(lt,Et,Wt)}}return te(0,0,il,il,il,0),te(il,il,0,0,0,il),{vertices:z,indices:B}}(this.tileID.canonical,l);p=y.vertices,g=y.indices}else{p=new Pt,g=new Mn;for(const{x:b,y:T}of d)p.emplaceBack(b,T,0,0);const y=Xw(p.int16,void 0,4);for(let b=0;b<y.length;b+=3)g.emplaceBack(y[b],y[b+1],y[b+2])}this._tileBoundsBuffer=r.createVertexBuffer(p,$C.members),this._tileBoundsIndexBuffer=r.createIndexBuffer(g),this._tileBoundsSegments=Ki.simpleSegment(0,0,p.length,g.length)}_makeGlobeTileDebugBuffers(r,l){const d=l.projection;if(!d||d.name!=="globe"||l.freezeTileCoverage)return;const p=this.tileID.canonical,g=Hm(c8(p,l)),y=df(l.zoom);let b;y>0&&(b=Ew(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(r,p,l,g,b,y),this._makeGlobeTileDebugTextBuffer(r,p,l,g,b,y)}_globePoint(r,l,d,p,g,y,b){let T=Wm(r,l,d);if(y){const C=1<<d.z,O=Ic(p.center.lng),z=Ac(p.center.lat),B=(d.x+.5)/C-O;let G=0;B>.5?G=-1:B<-.5&&(G=1);let X=(r/Hn+d.x)/C+G,te=(l/Hn+d.y)/C;X=(X-O)*p._pixelsPerMercatorPixel+O,te=(te-z)*p._pixelsPerMercatorPixel+z;const ce=[X*p.worldSize,te*p.worldSize,0];Wi(ce,ce,y),T=Wh(T,ce,b)}return Wi(T,T,g)}_makeGlobeTileDebugBorderBuffer(r,l,d,p,g,y){const b=new Vt,T=new is,C=new st,O=(B,G,X,te,ce)=>{const xe=(X-B)/(ce-1),Me=(te-G)/(ce-1),be=b.length;for(let Ae=0;Ae<ce;Ae++){const Ne=B+Ae*xe,Fe=G+Ae*Me;b.emplaceBack(Ne,Fe);const pt=this._globePoint(Ne,Fe,l,d,p,g,y);C.emplaceBack(pt[0],pt[1],pt[2]),T.emplaceBack(be+Ae)}},z=Hn;O(0,0,z,0,16),O(z,0,z,z,16),O(z,z,0,z,16),O(0,z,0,0,16),this._tileDebugIndexBuffer=r.createIndexBuffer(T),this._tileDebugBuffer=r.createVertexBuffer(b,Um.members),this._globeTileDebugBorderBuffer=r.createVertexBuffer(C,a8.members),this._tileDebugSegments=Ki.simpleSegment(0,0,b.length,T.length)}_makeGlobeTileDebugTextBuffer(r,l,d,p,g,y){const b=Hn/4,T=new Vt,C=new Mn,O=new st,z=25;C.reserve(32),T.reserve(z),O.reserve(z);const B=(G,X)=>z*G+X;for(let G=0;G<z;G++){const X=G*b;for(let te=0;te<z;te++){const ce=te*b;T.emplaceBack(ce,X);const xe=this._globePoint(ce,X,l,d,p,g,y);O.emplaceBack(xe[0],xe[1],xe[2])}}for(let G=0;G<4;G++)for(let X=0;X<4;X++){const te=B(G,X),ce=B(G,X+1),xe=B(G+1,X),Me=B(G+1,X+1);C.emplaceBack(te,ce,xe),C.emplaceBack(xe,ce,Me)}this._tileDebugTextIndexBuffer=r.createIndexBuffer(C),this._tileDebugTextBuffer=r.createVertexBuffer(T,Um.members),this._globeTileDebugTextBuffer=r.createVertexBuffer(O,a8.members),this._tileDebugTextSegments=Ki.simpleSegment(0,0,z,32)}}class q${constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,d){const p=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][p]=this.stateChanges[r][p]||{},wt(this.stateChanges[r][p],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const g in this.state[r])g!==p&&(this.deletedStates[r][g]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][p]===null){this.deletedStates[r][p]={};for(const g in this.state[r][p])d[g]||(this.deletedStates[r][p][g]=null)}else for(const g in d)this.deletedStates[r]&&this.deletedStates[r][p]&&this.deletedStates[r][p][g]===null&&delete this.deletedStates[r][p][g]}removeFeatureState(r,l,d){if(this.deletedStates[r]===null)return;const p=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&l!==void 0)this.deletedStates[r][p]!==null&&(this.deletedStates[r][p]=this.deletedStates[r][p]||{},this.deletedStates[r][p][d]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][p])for(d in this.deletedStates[r][p]={},this.stateChanges[r][p])this.deletedStates[r][p][d]=null;else this.deletedStates[r][p]=null;else this.deletedStates[r]=null}getState(r,l){const d=String(l),p=wt({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const g=this.deletedStates[r][l];if(g===null)return{};for(const y in g)delete p[y]}return p}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const d={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const g={};for(const y in this.stateChanges[p])this.state[p][y]||(this.state[p][y]={}),wt(this.state[p][y],this.stateChanges[p][y]),g[y]=this.state[p][y];d[p]=g}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const g={};if(this.deletedStates[p]===null)for(const y in this.state[p])g[y]={},this.state[p][y]={};else for(const y in this.deletedStates[p]){if(this.deletedStates[p][y]===null)this.state[p][y]={};else if(this.state[p][y])for(const b of Object.keys(this.deletedStates[p][y]))delete this.state[p][y][b];g[y]=this.state[p][y]}d[p]=d[p]||{},wt(d[p],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const p in r)r[p].setFeatureState(d,l)}}class VC{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,l){const d=this.toIdx(r,l);return{min:this.minimums[d],max:this.maximums[d]}}isLeaf(r,l){return this.leaves[this.toIdx(r,l)]}toIdx(r,l){return l*this.size+r}}function WC(s,r,l,d){let p=0,g=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(d[y])<1e-15){if(l[y]<s[y]||l[y]>r[y])return null}else{const b=1/d[y];let T=(s[y]-l[y])*b,C=(r[y]-l[y])*b;if(T>C){const O=T;T=C,C=O}if(T>p&&(p=T),C<g&&(g=C),p>g)return null}return p}function HC(s,r,l,d,p,g,y,b,T,C,O){const z=d-s,B=p-r,G=g-l,X=y-s,te=b-r,ce=T-l,xe=O[1]*ce-O[2]*te,Me=O[2]*X-O[0]*ce,be=O[0]*te-O[1]*X,Ae=z*xe+B*Me+G*be;if(Math.abs(Ae)<1e-15)return null;const Ne=1/Ae,Fe=C[0]-s,pt=C[1]-r,lt=C[2]-l,Et=(Fe*xe+pt*Me+lt*be)*Ne;if(Et<0||Et>1)return null;const Wt=pt*G-lt*B,gt=lt*z-Fe*G,Mt=Fe*B-pt*z,Dt=(O[0]*Wt+O[1]*gt+O[2]*Mt)*Ne;return Dt<0||Et+Dt>1?null:(X*Wt+te*gt+ce*Mt)*Ne}function qC(s,r,l){return(s-r)/(l-r)}function GC(s,r,l,d,p,g,y,b,T){const C=1<<l,O=g-d,z=y-p,B=(s+1)/C*O+d,G=(r+0)/C*z+p,X=(r+1)/C*z+p;b[0]=(s+0)/C*O+d,b[1]=G,T[0]=B,T[1]=X}class ZC{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(g){const y=Math.ceil(Math.log2(g.dim/8)),b=[];let T=Math.ceil(Math.pow(2,y));const C=1/T,O=(G,X,te,ce,xe)=>{const Me=ce?1:0,be=(G+1)*te-Me,Ae=X*te,Ne=(X+1)*te-Me;xe[0]=G*te,xe[1]=Ae,xe[2]=be,xe[3]=Ne};let z=new VC(T);const B=[];for(let G=0;G<T*T;G++){O(G%T,Math.floor(G/T),C,!1,B);const X=Ed(B[0],B[1],g),te=Ed(B[2],B[1],g),ce=Ed(B[2],B[3],g),xe=Ed(B[0],B[3],g);z.minimums.push(Math.min(X,te,ce,xe)),z.maximums.push(Math.max(X,te,ce,xe)),z.leaves.push(1)}for(b.push(z),T/=2;T>=1;T/=2){const G=b[b.length-1];z=new VC(T);for(let X=0;X<T*T;X++){O(X%T,Math.floor(X/T),2,!0,B);const te=G.getElevation(B[0],B[1]),ce=G.getElevation(B[2],B[1]),xe=G.getElevation(B[2],B[3]),Me=G.getElevation(B[0],B[3]),be=G.isLeaf(B[0],B[1]),Ae=G.isLeaf(B[2],B[1]),Ne=G.isLeaf(B[2],B[3]),Fe=G.isLeaf(B[0],B[3]),pt=Math.min(te.min,ce.min,xe.min,Me.min),lt=Math.max(te.max,ce.max,xe.max,Me.max),Et=be&&Ae&&Ne&&Fe;z.maximums.push(lt),z.minimums.push(pt),z.leaves.push(lt-pt<=5&&Et?1:0)}b.push(z)}return b}(this.dem),d=l.length-1,p=l[d];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(l,0,0,d,0)}raycastRoot(r,l,d,p,g,y,b=1){return WC([r,l,-100],[d,p,this.maximums[0]*b],g,y)}raycast(r,l,d,p,g,y,b=1){if(!this.nodeCount)return null;const T=this.raycastRoot(r,l,d,p,g,y,b);if(T==null)return null;const C=[],O=[],z=[],B=[],G=[{idx:0,t:T,nodex:0,nodey:0,depth:0}];for(;G.length>0;){const{idx:X,t:te,nodex:ce,nodey:xe,depth:Me}=G.pop();if(this.leaves[X]){GC(ce,xe,Me,r,l,d,p,z,B);const Ae=1<<Me,Ne=(ce+0)/Ae,Fe=(ce+1)/Ae,pt=(xe+0)/Ae,lt=(xe+1)/Ae,Et=Ed(Ne,pt,this.dem)*b,Wt=Ed(Fe,pt,this.dem)*b,gt=Ed(Fe,lt,this.dem)*b,Mt=Ed(Ne,lt,this.dem)*b,Dt=HC(z[0],z[1],Et,B[0],z[1],Wt,B[0],B[1],gt,g,y),Nt=HC(B[0],B[1],gt,z[0],B[1],Mt,z[0],z[1],Et,g,y),Xt=Math.min(Dt!==null?Dt:Number.MAX_VALUE,Nt!==null?Nt:Number.MAX_VALUE);if(Xt!==Number.MAX_VALUE)return Xt;{const bt=jm([],g,y,te);if(XC(Et,Wt,Mt,gt,qC(bt[0],z[0],B[0]),qC(bt[1],z[1],B[1]))>=bt[2])return te}continue}let be=0;for(let Ae=0;Ae<this._siblingOffset.length;Ae++){GC((ce<<1)+this._siblingOffset[Ae][0],(xe<<1)+this._siblingOffset[Ae][1],Me+1,r,l,d,p,z,B),z[2]=-100,B[2]=this.maximums[this.childOffsets[X]+Ae]*b;const Ne=WC(z,B,g,y);if(Ne!=null){const Fe=Ne;C[Ae]=Fe;let pt=!1;for(let lt=0;lt<be&&!pt;lt++)Fe>=C[O[lt]]&&(O.splice(lt,0,Ae),pt=!0);pt||(O[be]=Ae),be++}}for(let Ae=0;Ae<be;Ae++){const Ne=O[Ae];G.push({idx:this.childOffsets[X]+Ne,t:C[Ne],nodex:(ce<<1)+this._siblingOffset[Ne][0],nodey:(xe<<1)+this._siblingOffset[Ne][1],depth:Me+1})}}return null}_addNode(r,l,d){return this.minimums.push(r),this.maximums.push(l),this.leaves.push(d),this.childOffsets.push(0),this.nodeCount++}_construct(r,l,d,p,g){if(r[p].isLeaf(l,d)===1)return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const y=p-1,b=r[y];let T=0,C=0;for(let O=0;O<this._siblingOffset.length;O++){const z=2*l+this._siblingOffset[O][0],B=2*d+this._siblingOffset[O][1],G=b.getElevation(z,B),X=b.isLeaf(z,B),te=this._addNode(G.min,G.max,X);X&&(T|=1<<O),C||(C=te)}for(let O=0;O<this._siblingOffset.length;O++)T&1<<O||this._construct(r,2*l+this._siblingOffset[O][0],2*d+this._siblingOffset[O][1],y,C+O)}}function XC(s,r,l,d,p,g){return Sr(Sr(s,l,g),Sr(r,d,g),p)}function Ed(s,r,l){const d=l.dim,p=Le(s*d-.5,0,d-1),g=Le(r*d-.5,0,d-1),y=Math.floor(p),b=Math.floor(g),T=Math.min(y+1,d-1),C=Math.min(b+1,d-1);return XC(l.get(y,b),l.get(T,b),l.get(y,C),l.get(T,C),p-y,g-b)}const KC={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function G$(s,r,l){return(256*s*256+256*r+l)/10-1e4}function Z$(s,r,l){return 256*s+r+l/256-32768}class Wy{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,l,d,p=!1,g=!1){if(this.uid=r,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return It(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const y=this.dim=l.height-2,b=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=d||"mapbox",this.borderReady=p,!p){for(let T=0;T<y;T++)b[this._idx(-1,T)]=b[this._idx(0,T)],b[this._idx(y,T)]=b[this._idx(y-1,T)],b[this._idx(T,-1)]=b[this._idx(T,0)],b[this._idx(T,y)]=b[this._idx(T,y-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(y,-1)]=b[this._idx(y-1,0)],b[this._idx(-1,y)]=b[this._idx(0,y-1)],b[this._idx(y,y)]=b[this._idx(y-1,y-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ZC(this)}get(r,l,d=!1){d&&(r=Le(r,-1,this.dim),l=Le(l,-1,this.dim));const p=4*this._idx(r,l);return(this.encoding==="terrarium"?Z$:G$)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(r){return KC[r]}get unpackVector(){return KC[this.encoding]}_idx(r,l){if(r<-1||r>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(r+1)}static pack(r,l){const d=[0,0,0,0],p=Wy.getUnpackVector(l);let g=Math.floor((r+p[3])/p[2]);return d[2]=g%256,g=Math.floor(g/256),d[1]=g%256,g=Math.floor(g/256),d[0]=g,d}getPixels(){return new as({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,l,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let p=l*this.dim,g=l*this.dim+this.dim,y=d*this.dim,b=d*this.dim+this.dim;switch(l){case-1:p=g-1;break;case 1:g=p+1}switch(d){case-1:y=b-1;break;case 1:b=y+1}const T=-l*this.dim,C=-d*this.dim;for(let O=y;O<b;O++)for(let z=p;z<g;z++){const B=4*this._idx(z,O),G=4*this._idx(z+T,O+C);this.pixels[B+0]=r.pixels[G+0],this.pixels[B+1]=r.pixels[G+1],this.pixels[B+2]=r.pixels[G+2],this.pixels[B+3]=r.pixels[G+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}En(Wy,"DEMData"),En(ZC,"DemMinMaxQuadTree",{omit:["dem"]});class X${constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,d){const p=r.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const g={value:l,timeout:void 0};if(d!==void 0&&(g.timeout=setTimeout(()=>{this.remove(r,g)},d)),this.data[p].push(g),this.order.push(p),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const d=r.wrapped().key,p=l===void 0?0:this.data[d].indexOf(l),g=this.data[d][p];return this.data[d].splice(p,1),g.timeout&&clearTimeout(g.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(g.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const d in this.data)for(const p of this.data[d])r(p.value)||l.push(p);for(const d of l)this.remove(d.value.tileID,d)}}class Cf{constructor(r,l,d){this.func=r,this.mask=l,this.range=d}}Cf.ReadOnly=!1,Cf.ReadWrite=!0,Cf.disabled=new Cf(519,Cf.ReadOnly,[0,1]);const g3=7680;class _3{constructor(r,l,d,p,g,y){this.test=r,this.ref=l,this.mask=d,this.fail=p,this.depthFail=g,this.pass=y}}_3.disabled=new _3({func:519,mask:0},0,0,g3,g3,g3);class Oc{constructor(r,l,d){this.blendFunction=r,this.blendColor=l,this.mask=d}}Oc.Replace=[1,0],Oc.disabled=new Oc(Oc.Replace,Mi.transparent,[!1,!1,!1,!1]),Oc.unblended=new Oc(Oc.Replace,Mi.transparent,[!0,!0,!0,!0]),Oc.alphaBlended=new Oc([1,771],Mi.transparent,[!0,!0,!0,!0]);const y3=1029,v3=2305;class ql{constructor(r,l,d){this.enable=r,this.mode=l,this.frontFace=d}}ql.disabled=new ql(!1,y3,v3),ql.backCCW=new ql(!0,y3,v3),ql.backCW=new ql(!0,y3,2304),ql.frontCW=new ql(!0,1028,2304),ql.frontCCW=new ql(!0,1028,v3);class Xh extends Al{constructor(r,l,d){super(),this.id=r,this._onlySymbols=d,l.on("data",p=>{p.dataType==="source"&&p.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&p.dataType==="source"&&p.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new X$(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new q$,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(r){this.map=r,this._minTileCacheSize=this._minTileCacheSize===void 0&&r?r._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&r?r._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(r,l){return r.isSymbolTile=this._onlySymbols,this._source.loadTile(r,l)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){if(this._source.abortTile)return this._source.abortTile(r,()=>{})}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return yt(this._tiles).map(r=>r.tileID).sort(YC).map(r=>r.key)}getRenderableIds(r){const l=[];for(const d in this._tiles)this._isIdRenderable(+d,r)&&l.push(this._tiles[d]);return r?l.sort((d,p)=>{const g=d.tileID,y=p.tileID,b=new fe(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),T=new fe(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-y.overscaledZ||T.y-b.y||T.x-b.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(YC).map(d=>d.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(+r,"reloading")}}_reloadTile(r,l){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=l),this._loadTile(d,this._tileLoaded.bind(this,d,r,l)))}_tileLoaded(r,l,d,p){if(p)if(r.state="errored",p.status!==404)this._source.fire(new ja(p,{tile:r}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else r.timeAdded=Ui.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this._source.type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new Ba("data",{dataType:"source",tile:r,coord:r.tileID,sourceCacheId:this.id}))}_backfillDEM(r){const l=this.getRenderableIds();for(let p=0;p<l.length;p++){const g=l[p];if(r.neighboringTiles&&r.neighboringTiles[g]){const y=this.getTileByID(g);d(r,y),d(y,r)}}function d(p,g){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let y=g.tileID.canonical.x-p.tileID.canonical.x;const b=g.tileID.canonical.y-p.tileID.canonical.y,T=Math.pow(2,p.tileID.canonical.z),C=g.tileID.key;y===0&&b===0||Math.abs(b)>1||(Math.abs(y)>1&&(Math.abs(y+T)===1?y+=T:Math.abs(y-T)===1&&(y-=T)),g.dem&&p.dem&&(p.dem.backfillBorder(g.dem,y,b),p.neighboringTiles&&p.neighboringTiles[C]&&(p.neighboringTiles[C].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,d,p){for(const g in this._tiles){let y=this._tiles[g];if(p[g]||!y.hasData()||y.tileID.overscaledZ<=l||y.tileID.overscaledZ>d)continue;let b=y.tileID;for(;y&&y.tileID.overscaledZ>l+1;){const C=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[C.key],y&&y.hasData()&&(b=C)}let T=b;for(;T.overscaledZ>l;)if(T=T.scaledTo(T.overscaledZ-1),r[T.key]){p[b.key]=b;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=r.overscaledZ-1;d>=l;d--){const p=r.scaledTo(d),g=this._getLoadedTile(p);if(g)return g}}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?r.wrapped().key:r.canonical.key)}updateCacheSize(r,l){l=l||this._source.tileSize;const d=Math.ceil(r.width/l)+1,p=Math.ceil(r.height/l)+1,g=Math.floor(d*p*5),y=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,g):g,b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const d={};for(const p in this._tiles){const g=this._tiles[p];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+l),d[g.tileID.key]=g}this._tiles=d;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(r,l,d){if(this.transform=r,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!d)return;let p;this.updateCacheSize(r,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(b=>new Ea(b.canonical.z,b.wrap,b.canonical.z,b.canonical.x,b.canonical.y)):(p=r.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(b=>this._source.hasTile(b)))):p=[];const g=this._updateRetainedTiles(p);if(JC(this._source.type)&&p.length!==0){const b={},T={},C=Object.keys(g);for(const z of C){const B=g[z],G=this._tiles[z];if(!G||G.fadeEndTime&&G.fadeEndTime<=Ui.now())continue;const X=this.findLoadedParent(B,Math.max(B.overscaledZ-Xh.maxOverzooming,this._source.minzoom));X&&(this._addTile(X.tileID),b[X.tileID.key]=X.tileID),T[z]=B}const O=p[p.length-1].overscaledZ;for(const z in this._tiles){const B=this._tiles[z];if(g[z]||!B.hasData())continue;let G=B.tileID;for(;G.overscaledZ>O;){G=G.scaledTo(G.overscaledZ-1);const X=this._tiles[G.key];if(X&&X.hasData()&&T[G.key]){g[z]=B.tileID;break}}}for(const z in b)g[z]||(this._coveredTiles[z]=!0,g[z]=b[z])}for(const b in g)this._tiles[b].clearFadeHold();const y=function(b,T){const C=[];for(const O in b)O in T||C.push(O);return C}(this._tiles,g);for(const b of y){const T=this._tiles[b];T.hasSymbolBuckets&&!T.holdingForFade()?T.setHoldDuration(this.map._fadeDuration):T.hasSymbolBuckets&&!T.symbolFadeFinished()||this._removeTile(+b)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(+r)}_updateRetainedTiles(r){const l={};if(r.length===0)return l;const d={},p=r.reduce((C,O)=>Math.min(C,O.overscaledZ),1/0),g=r[0].overscaledZ,y=Math.max(g-Xh.maxOverzooming,this._source.minzoom),b=Math.max(g+Xh.maxUnderzooming,this._source.minzoom),T={};for(const C of r){const O=this._addTile(C);l[C.key]=C,O.hasData()||p<this._source.maxzoom&&(T[C.key]=C)}this._retainLoadedChildren(T,p,b,l);for(const C of r){let O=this._tiles[C.key];if(O.hasData())continue;if(C.canonical.z>=this._source.maxzoom){const B=C.children(this._source.maxzoom)[0],G=this.getTile(B);if(G&&G.hasData()){l[B.key]=B;continue}}else{const B=C.children(this._source.maxzoom);if(l[B[0].key]&&l[B[1].key]&&l[B[2].key]&&l[B[3].key])continue}let z=O.wasRequested();for(let B=C.overscaledZ-1;B>=y;--B){const G=C.scaledTo(B);if(d[G.key]||(d[G.key]=!0,O=this.getTile(G),!O&&z&&(O=this._addTile(G)),O&&(l[G.key]=G,z=O.wasRequested(),O.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let d,p=this._tiles[r].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){d=this._loadedParentTiles[p.key];break}l.push(p.key);const g=p.scaledTo(p.overscaledZ-1);if(d=this._getLoadedTile(g),d)break;p=g}for(const g of l)this._loadedParentTiles[g]=d}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const d=!!l;if(!d){const p=this.map?this.map.painter:null;l=new m3(r,this._source.tileSize*r.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,r.key,l.state))}return l?(l.uses++,this._tiles[r.key]=l,d||this._source.fire(new Ba("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=l.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(+r);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(r,l,d){const p=[],g=this.transform;if(!g)return p;const y=g.projection.name==="globe",b=Ic(g.center.lng);for(const T in this._tiles){const C=this._tiles[T];if(d&&C.clearQueryDebugViz(),C.holdingForFade())continue;let O;if(y){const z=C.tileID.canonical;if(z.z===0){const B=[Math.abs(Le(b,...dg(z,-1))-b),Math.abs(Le(b,...dg(z,1))-b)];O=[0,2*B.indexOf(Math.min(...B))-1]}else{const B=[Math.abs(Le(b,...dg(z,-1))-b),Math.abs(Le(b,...dg(z,0))-b),Math.abs(Le(b,...dg(z,1))-b)];O=[B.indexOf(Math.min(...B))-1]}}else O=[0];for(const z of O){const B=r.containsTile(C,g,l,z);B&&p.push(B)}}return p}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of l)d.projMatrix=this.transform.calculateProjMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(JC(this._source.type))for(const r in this._tiles){const l=this._tiles[r];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=Ui.now())return!0}return!1}setFeatureState(r,l,d){this._state.updateState(r=r||"_geojsonTileLayer",l,d)}removeFeatureState(r,l,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,d)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,d){const p=this._tiles[r];p&&p.setDependencies(l,d)}reloadTilesForDependencies(r,l){for(const d in this._tiles)this._tiles[d].hasDependency(r,l)&&this._reloadTile(+d,"reloading");this._cache.filter(d=>!d.hasDependency(r,l))}_preloadTiles(r,l){if(!this._sourceLoaded){const b=()=>{this._sourceLoaded&&(this._source.off("data",b),this._preloadTiles(r,l))};return void this._source.on("data",b)}const d=new Map,p=Array.isArray(r)?r:[r],g=this.map.painter.terrain,y=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const b of p){const T=b.coveringTiles({tileSize:y,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const C of T)d.set(C.key,C);this.usedForTerrain&&b.updateElevation(!1)}kt(Array.from(d.values()),(b,T)=>{const C=new m3(b,this._source.tileSize*b.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(C,O=>{this._source.type==="raster-dem"&&C.dem&&this._backfillDEM(C),T(O,C)})},l)}}function YC(s,r){const l=Math.abs(2*s.wrap)-+(s.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return s.overscaledZ-r.overscaledZ||d-l||r.canonical.y-s.canonical.y||r.canonical.x-s.canonical.x}function JC(s){return s==="raster"||s==="image"||s==="video"||s==="custom"}function dg(s,r){const l=1<<s.z;return[s.x/l+r,(s.x+1)/l+r]}Xh.maxOverzooming=10,Xh.maxUnderzooming=3;class Hy{constructor(r,l,d){this._demTile=r,this._dem=this._demTile.dem,this._scale=l,this._offset=d}static create(r,l,d){const p=d||r.findDEMTileFor(l);if(!p||!p.dem)return;const g=p.dem,y=p.tileID,b=1<<l.canonical.z-y.canonical.z;return new Hy(p,p.tileSize/Hn/b,[(l.canonical.x/b-y.canonical.x)*g.dim,(l.canonical.y/b-y.canonical.y)*g.dim])}tileCoordToPixel(r,l){const d=l*this._scale+this._offset[1],p=Math.floor(r*this._scale+this._offset[0]),g=Math.floor(d);return new fe(p,g)}getElevationAt(r,l,d,p){const g=r*this._scale+this._offset[0],y=l*this._scale+this._offset[1],b=Math.floor(g),T=Math.floor(y),C=this._dem;return p=!!p,d?Sr(Sr(C.get(b,T,p),C.get(b,T+1,p),y-T),Sr(C.get(b+1,T,p),C.get(b+1,T+1,p),y-T),g-b):C.get(b,T,p)}getElevationAtPixel(r,l,d){return this._dem.get(r,l,!!d)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*Vl(1,r)*this._dem.stride}}class QC{constructor(r,l){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new gu(Hn,16,0),this.featureIndexArray=new Fh,this.promoteId=l}insert(r,l,d,p,g,y=0){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,p,g,y);const T=this.grid;for(let C=0;C<l.length;C++){const O=l[C],z=[1/0,1/0,-1/0,-1/0];for(let B=0;B<O.length;B++){const G=O[B];z[0]=Math.min(z[0],G.x),z[1]=Math.min(z[1],G.y),z[2]=Math.max(z[2],G.x),z[3]=Math.max(z[3],G.y)}z[0]<Hn&&z[1]<Hn&&z[2]>=0&&z[3]>=0&&T.insert(b,z[0],z[1],z[2],z[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Qw(new My(this.rawTileData)).layers,this.sourceLayerCoder=new NC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,l,d,p){this.loadVTLayers();const g=r.params||{},y=ef(g.filter),b=r.tileResult,T=r.transform,C=b.bufferedTilespaceBounds,O=this.grid.query(C.min.x,C.min.y,C.max.x,C.max.y,(X,te,ce,xe)=>S8(b.bufferedTilespaceGeometry,X,te,ce,xe));O.sort(K$);let z=null;T.elevation&&O.length>0&&(z=Hy.create(T.elevation,this.tileID));const B={};let G;for(let X=0;X<O.length;X++){const te=O[X];if(te===G)continue;G=te;const ce=this.featureIndexArray.get(te);let xe=null;this.loadMatchingFeature(B,ce,y,g.layers,g.availableImages,l,d,p,(Me,be,Ae,Ne=0)=>(xe||(xe=Eu(Me,this.tileID.canonical,r.tileTransform)),be.queryIntersectsFeature(b,Me,Ae,xe,this.z,r.transform,r.pixelPosMatrix,z,Ne)))}return B}loadMatchingFeature(r,l,d,p,g,y,b,T,C){const{featureIndex:O,bucketIndex:z,sourceLayerIndex:B,layoutVertexArrayOffset:G}=l,X=this.bucketLayerIDs[z];if(p&&!function(Me,be){for(let Ae=0;Ae<Me.length;Ae++)if(be.indexOf(Me[Ae])>=0)return!0;return!1}(p,X))return;const te=this.sourceLayerCoder.decode(B),ce=this.vtLayers[te].feature(O);if(d.needGeometry){const Me=Hh(ce,!0);if(!d.filter(new L(this.tileID.overscaledZ),Me,this.tileID.canonical))return}else if(!d.filter(new L(this.tileID.overscaledZ),ce))return;const xe=this.getId(ce,te);for(let Me=0;Me<X.length;Me++){const be=X[Me];if(p&&p.indexOf(be)<0)continue;const Ae=y[be];if(!Ae)continue;let Ne={};xe!==void 0&&T&&(Ne=T.getState(Ae.sourceLayer||"_geojsonTileLayer",xe));const Fe=wt({},b[be]);Fe.paint=e9(Fe.paint,Ae.paint,ce,Ne,g),Fe.layout=e9(Fe.layout,Ae.layout,ce,Ne,g);const pt=!C||C(ce,Ae,Ne,G);if(!pt)continue;const lt=new BC(ce,this.z,this.x,this.y,xe);lt.layer=Fe;let Et=r[be];Et===void 0&&(Et=r[be]=[]),Et.push({featureIndex:O,feature:lt,intersectionZ:pt})}}lookupSymbolFeatures(r,l,d,p,g,y,b,T){const C={};this.loadVTLayers();const O=ef(g);for(const z of r)this.loadMatchingFeature(C,{bucketIndex:d,sourceLayerIndex:p,featureIndex:z,layoutVertexArrayOffset:0},O,y,b,T,l);return C}loadFeature(r){const{featureIndex:l,sourceLayerIndex:d}=r;this.loadVTLayers();const p=this.sourceLayerCoder.decode(d),g=this.vtFeatures[p];if(g[l])return g[l];const y=this.vtLayers[p].feature(l);return g[l]=y,y}hasLayer(r){for(const l of this.bucketLayerIDs)for(const d of l)if(r===d)return!0;return!1}getId(r,l){let d=r.id;if(this.promoteId){const p=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];p!=null&&(d=r.properties[p]),typeof d=="boolean"&&(d=Number(d))}return d}}function e9(s,r,l,d,p){return Ft(s,(g,y)=>{const b=r instanceof ve?r.get(y):null;return b&&b.evaluate?b.evaluate(l,d,p):b})}function K$(s,r){return r-s}En(QC,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class t9{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.image=new Su({width:r,height:l}),this.positions={},this.uploaded=!1}getDash(r,l){const d=this.getKey(r,l);return this.positions[d]}trim(){const r=this.width,l=this.height=on(this.nextRow);this.image.resize({width:r,height:l})}getKey(r,l){return r.join(",")+l}getDashRanges(r,l,d){const p=[];let g=r.length%2==1?-r[r.length-1]*d:0,y=r[0]*d,b=!0;p.push({left:g,right:y,isDash:b,zeroLength:r[0]===0});let T=r[0];for(let C=1;C<r.length;C++){b=!b;const O=r[C];g=T*d,T+=O,y=T*d,p.push({left:g,right:y,isDash:b,zeroLength:O===0})}return p}addRoundDash(r,l,d){const p=l/2;for(let g=-d;g<=d;g++){const y=this.width*(this.nextRow+d+g);let b=0,T=r[b];for(let C=0;C<this.width;C++){C/T.right>1&&(T=r[++b]);const O=Math.abs(C-T.left),z=Math.abs(C-T.right),B=Math.min(O,z);let G;const X=g/d*(p+1);if(T.isDash){const te=p-Math.abs(X);G=Math.sqrt(B*B+te*te)}else G=p-Math.sqrt(B*B+X*X);this.image.data[y+C]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(r,l){for(let T=r.length-1;T>=0;--T){const C=r[T],O=r[T+1];C.zeroLength?r.splice(T,1):O&&O.isDash===C.isDash&&(O.left=C.left,r.splice(T,1))}const d=r[0],p=r[r.length-1];d.isDash===p.isDash&&(d.left=p.left-this.width,p.right=d.right+this.width);const g=this.width*this.nextRow;let y=0,b=r[y];for(let T=0;T<this.width;T++){T/b.right>1&&(b=r[++y]);const C=Math.abs(T-b.left),O=Math.abs(T-b.right),z=Math.min(C,O);this.image.data[g+T]=Math.max(0,Math.min(255,(b.isDash?z:-z)+l+128))}}addDash(r,l){const d=this.getKey(r,l);if(this.positions[d])return this.positions[d];const p=l==="round",g=p?7:0,y=2*g+1;if(this.nextRow+y>this.height)return It("LineAtlas out of space"),null;r.length===0&&r.push(1);let b=0;for(let O=0;O<r.length;O++)r[O]<0&&(It("Negative value is found in line dasharray, replacing values with 0"),r[O]=0),b+=r[O];if(b!==0){const O=this.width/b,z=this.getDashRanges(r,this.width,O);p?this.addRoundDash(z,O,g):this.addRegularDash(z,l==="square"?.5*O:0)}const T=this.nextRow+g;this.nextRow+=y;const C={tl:[T,g],br:[b,0]};return this.positions[d]=C,C}}En(t9,"LineAtlas");const n9=1*Hl;class r9{constructor(r){const l={},d=[];for(const b in r){const T=r[b],C=l[b]={};for(const O in T.glyphs){const z=T.glyphs[+O];if(!z||z.bitmap.width===0||z.bitmap.height===0)continue;const B=z.metrics.localGlyph?n9:1,G={x:0,y:0,w:z.bitmap.width+2*B,h:z.bitmap.height+2*B};d.push(G),C[O]=G}}const{w:p,h:g}=r3(d),y=new Su({width:p||1,height:g||1});for(const b in r){const T=r[b];for(const C in T.glyphs){const O=T.glyphs[+C];if(!O||O.bitmap.width===0||O.bitmap.height===0)continue;const z=l[b][C],B=O.metrics.localGlyph?n9:1;Su.copy(O.bitmap,y,{x:0,y:0},{x:z.x+B,y:z.y+B},O.bitmap)}}this.image=y,this.positions=l}}En(r9,"GlyphAtlas");class Y${constructor(r){this.tileID=new Ea(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y),this.tileZoom=r.tileZoom,this.uid=r.uid,this.zoom=r.zoom,this.canonical=r.tileID.canonical,this.pixelRatio=r.pixelRatio,this.tileSize=r.tileSize,this.source=r.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=r.showCollisionBoxes,this.collectResourceTiming=!!r.collectResourceTiming,this.returnDependencies=!!r.returnDependencies,this.promoteId=r.promoteId,this.enableTerrain=!!r.enableTerrain,this.isSymbolTile=r.isSymbolTile,this.tileTransform=Zh(r.tileID.canonical,r.projection),this.projection=r.projection}parse(r,l,d,p,g){this.status="parsing",this.data=r,this.collisionBoxArray=new Zr;const y=new NC(Object.keys(r.layers).sort()),b=new QC(this.tileID,this.promoteId);b.bucketLayerIDs=[];const T={},C=new t9(256,256),O={featureIndex:b,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:C,availableImages:d},z=l.familiesBySource[this.source];for(const Ne in z){const Fe=r.layers[Ne];if(!Fe)continue;let pt=!1,lt=!1;for(const gt of z[Ne])gt[0].type==="symbol"?pt=!0:lt=!0;if(this.isSymbolTile===!0&&!pt||this.isSymbolTile===!1&&!lt)continue;Fe.version===1&&It(`Vector tile source "${this.source}" layer "${Ne}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Et=y.encode(Ne),Wt=[];for(let gt=0;gt<Fe.length;gt++){const Mt=Fe.feature(gt),Dt=b.getId(Mt,Ne);Wt.push({feature:Mt,id:Dt,index:gt,sourceLayerIndex:Et})}for(const gt of z[Ne]){const Mt=gt[0];this.isSymbolTile!==void 0&&Mt.type==="symbol"!==this.isSymbolTile||Mt.minzoom&&this.zoom<Math.floor(Mt.minzoom)||Mt.maxzoom&&this.zoom>=Mt.maxzoom||Mt.visibility!=="none"&&(x3(gt,this.zoom,d),(T[Mt.id]=Mt.createBucket({index:b.bucketLayerIDs.length,layers:gt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Et,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:d})).populate(Wt,O,this.tileID.canonical,this.tileTransform),b.bucketLayerIDs.push(gt.map(Dt=>Dt.id)))}}let B,G,X,te;C.trim();const ce={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},xe=()=>{if(B)return g(B);if(G&&X&&te){const Ne=new r9(G),Fe=new uC(X,te);for(const pt in T){const lt=T[pt];lt instanceof xd?(x3(lt.layers,this.zoom,d),E$(lt,G,Ne.positions,X,Fe.iconPositions,this.showCollisionBoxes,d,this.tileID.canonical,this.tileZoom,this.projection)):lt.hasPattern&&(lt instanceof Py||lt instanceof Ey||lt instanceof Qm)&&(x3(lt.layers,this.zoom,d),lt.addFeatures(O,this.tileID.canonical,Fe.patternPositions,d,this.tileTransform))}this.status="done",g(null,{buckets:yt(T).filter(pt=>!pt.isEmpty()),featureIndex:b,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ne.image,lineAtlas:C,imageAtlas:Fe,glyphMap:this.returnDependencies?G:null,iconMap:this.returnDependencies?X:null,glyphPositions:this.returnDependencies?Ne.positions:null})}},Me=Ft(O.glyphDependencies,Ne=>Object.keys(Ne).map(Number));Object.keys(Me).length?p.send("getGlyphs",{uid:this.uid,stacks:Me},(Ne,Fe)=>{B||(B=Ne,G=Fe,xe())},void 0,!1,ce):G={};const be=Object.keys(O.iconDependencies);be.length?p.send("getImages",{icons:be,source:this.source,tileID:this.tileID,type:"icons"},(Ne,Fe)=>{B||(B=Ne,X=Fe,xe())},void 0,!1,ce):X={};const Ae=Object.keys(O.patternDependencies);Ae.length?p.send("getImages",{icons:Ae,source:this.source,tileID:this.tileID,type:"patterns"},(Ne,Fe)=>{B||(B=Ne,te=Fe,xe())},void 0,!1,ce):te={},xe()}}function x3(s,r,l){const d=new L(r);for(const p of s)p.recalculate(d,l)}class i9{constructor(r){this.entries={},this.scheduler=r}request(r,l,d,p){const g=this.entries[r]=this.entries[r]||{callbacks:[]};if(g.result){const[y,b]=g.result;return this.scheduler?this.scheduler.add(()=>{p(y,b)},l):p(y,b),()=>{}}return g.callbacks.push(p),g.cancel||(g.cancel=d((y,b)=>{g.result=[y,b];for(const T of g.callbacks)this.scheduler?this.scheduler.add(()=>{T(y,b)},l):T(y,b);setTimeout(()=>delete this.entries[r],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(y=>y!==p),g.callbacks.length||(g.cancel(),delete this.entries[r]))}}}function o9(s,r,l){const d=JSON.stringify(s.request);return s.data&&(this.deduped.entries[d]={result:[null,s.data]}),this.deduped.request(d,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom},p=>{const g=bi(s.request,(y,b,T,C)=>{y?p(y):b&&p(null,{vectorTile:l?void 0:new Qw(new My(b)),rawData:b,cacheControl:T,expires:C})});return()=>{g.cancel(),p()}},r)}const a9=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class b3{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,d]=new Uint8Array(r,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=d>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const g=a9[15&d];if(!g)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(r,2,1),[b]=new Uint32Array(r,4,1);return new b3(b,y,g,r)}constructor(r,l=64,d=Float64Array,p){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const g=a9.indexOf(this.ArrayType),y=2*r*this.ArrayType.BYTES_PER_ELEMENT,b=r*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-b%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${d}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+T,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+y+b+T),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+T,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=r)}add(r,l){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=l,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return w3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,l,d,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:y,nodeSize:b}=this,T=[0,g.length-1,0],C=[];for(;T.length;){const O=T.pop()||0,z=T.pop()||0,B=T.pop()||0;if(z-B<=b){for(let ce=B;ce<=z;ce++){const xe=y[2*ce],Me=y[2*ce+1];xe>=r&&xe<=d&&Me>=l&&Me<=p&&C.push(g[ce])}continue}const G=B+z>>1,X=y[2*G],te=y[2*G+1];X>=r&&X<=d&&te>=l&&te<=p&&C.push(g[G]),(O===0?r<=X:l<=te)&&(T.push(B),T.push(G-1),T.push(1-O)),(O===0?d>=X:p>=te)&&(T.push(G+1),T.push(z),T.push(1-O))}return C}within(r,l,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:g,nodeSize:y}=this,b=[0,p.length-1,0],T=[],C=d*d;for(;b.length;){const O=b.pop()||0,z=b.pop()||0,B=b.pop()||0;if(z-B<=y){for(let ce=B;ce<=z;ce++)l9(g[2*ce],g[2*ce+1],r,l)<=C&&T.push(p[ce]);continue}const G=B+z>>1,X=g[2*G],te=g[2*G+1];l9(X,te,r,l)<=C&&T.push(p[G]),(O===0?r-d<=X:l-d<=te)&&(b.push(B),b.push(G-1),b.push(1-O)),(O===0?r+d>=X:l+d>=te)&&(b.push(G+1),b.push(z),b.push(1-O))}return T}}function w3(s,r,l,d,p,g){if(p-d<=l)return;const y=d+p>>1;s9(s,r,y,d,p,g),w3(s,r,l,d,y-1,1-g),w3(s,r,l,y+1,p,1-g)}function s9(s,r,l,d,p,g){for(;p>d;){if(p-d>600){const C=p-d+1,O=l-d+1,z=Math.log(C),B=.5*Math.exp(2*z/3),G=.5*Math.sqrt(z*B*(C-B)/C)*(O-C/2<0?-1:1);s9(s,r,l,Math.max(d,Math.floor(l-O*B/C+G)),Math.min(p,Math.floor(l+(C-O)*B/C+G)),g)}const y=r[2*l+g];let b=d,T=p;for(hg(s,r,d,l),r[2*p+g]>y&&hg(s,r,d,p);b<T;){for(hg(s,r,b,T),b++,T--;r[2*b+g]<y;)b++;for(;r[2*T+g]>y;)T--}r[2*d+g]===y?hg(s,r,d,T):(T++,hg(s,r,T,p)),T<=l&&(d=T+1),l<=T&&(p=T-1)}}function hg(s,r,l,d){E3(s,l,d),E3(r,2*l,2*d),E3(r,2*l+1,2*d+1)}function E3(s,r,l){const d=s[r];s[r]=s[l],s[l]=d}function l9(s,r,l,d){const p=s-l,g=r-d;return p*p+g*g}o.ARRAY_TYPE=os,o.AUTH_ERR_MSG=De,o.Aabb=wa,o.Actor=class{constructor(s,r,l){this.target=s,this.parent=r,this.mapId=l,this.callbacks={},this.cancelCallbacks={},Jt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Zn()?s:v,this.scheduler=new W$}send(s,r,l,d,p=!1,g){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=g,this.callbacks[y]=l);const b=Yn(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:s,hasCallback:!!l,targetMapId:d,mustQueue:p,sourceMapId:this.mapId,data:hd(r,b)},b),{cancel:()=>{l&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(s){const r=s.data,l=r.id;if(l&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){const d=this.cancelCallbacks[l];delete this.cancelCallbacks[l],d&&d.cancel()}else if(r.mustQueue||Zn()){const d=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add(()=>this.processTask(l,r),d&&d.metadata||{type:"message"})}else this.processTask(l,r)}processTask(s,r){if(r.type==="<response>"){const l=this.callbacks[s];delete this.callbacks[s],l&&(r.error?l(_u(r.error)):l(null,_u(r.data)))}else{const l=Yn(this.globalScope)?void 0:[],d=r.hasCallback?(g,y)=>{delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:g?hd(g):null,data:hd(y,l)},l)}:g=>{},p=_u(r.data);if(this.parent[r.type])this.parent[r.type](r.sourceMapId,p,d);else if(this.parent.getWorkerSource){const g=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,g[0],p.source)[g[1]](p,d)}else d(new Error(`Could not find function ${r.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=ky,o.Color=Mi,o.ColorMode=Oc,o.CullFaceMode=ql,o.DEMData=Wy,o.DataConstantProperty=Q,o.DedupedRequest=i9,o.DepthMode=Cf,o.EXTENT=Hn,o.Elevation=class{isDataAvailableAtPoint(s){const r=this._source();if(this.isUsingMockSource()||!r||s.y<0||s.y>1)return!1;const l=r.getSource().maxzoom,d=1<<l,p=Math.floor(s.x),g=Math.floor((s.x-p)*d),y=Math.floor(s.y*d),b=this.findDEMTileFor(new Ea(l,p,l,g,y));return!(!b||!b.dem)}getAtPointOrZero(s,r=0){return this.getAtPoint(s,r)||0}getAtPoint(s,r,l=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const d=this._source();if(!d||s.y<0||s.y>1)return r;const p=d.getSource().maxzoom,g=1<<p,y=Math.floor(s.x),b=s.x-y,T=new Ea(p,y,p,Math.floor(b*g),Math.floor(s.y*g)),C=this.findDEMTileFor(T);if(!C||!C.dem)return r;const O=C.dem,z=1<<C.tileID.canonical.z,B=(b*z-C.tileID.canonical.x)*O.dim,G=(s.y*z-C.tileID.canonical.y)*O.dim,X=Math.floor(B),te=Math.floor(G);return(l?this.exaggeration():1)*Sr(Sr(O.get(X,te),O.get(X,te+1),G-te),Sr(O.get(X+1,te),O.get(X+1,te+1),G-te),B-X)}getAtTileOffset(s,r,l){const d=1<<s.canonical.z;return this.getAtPointOrZero(new hf(s.wrap+(s.canonical.x+r/Hn)/d,(s.canonical.y+l/Hn)/d))}getAtTileOffsetFunc(s,r,l,d){return p=>{const g=this.getAtTileOffset(s,p.x,p.y),y=d.upVector(s.canonical,p.x,p.y);return Ms(y,y,g*d.upVectorScale(s.canonical,r,l).metersToTile),y}}getForTilePoints(s,r,l,d){if(this.isUsingMockSource())return!1;const p=Hy.create(this,s,d);return!!p&&(r.forEach(g=>{g[2]=this.exaggeration()*p.getElevationAt(g[0],g[1],l)}),!0)}getMinMaxForTile(s){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(s);if(!r||!r.dem)return null;const l=r.dem.tree,d=r.tileID,p=1<<s.canonical.z-d.canonical.z;let g=s.canonical.x/p-d.canonical.x,y=s.canonical.y/p-d.canonical.y,b=0;for(let T=0;T<s.canonical.z-d.canonical.z&&!l.leaves[b];T++){g*=2,y*=2;const C=2*Math.floor(y)+Math.floor(g);b=l.childOffsets[b]+C,g%=1,y%=1}return{min:this.exaggeration()*l.minimums[b],max:this.exaggeration()*l.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(s,r,l){throw new Error("Pure virtual method called.")}pointCoordinate(s){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(s){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=ja,o.EvaluationParameters=L,o.Event=Ba,o.Evented=Al,o.FillExtrusionBucket=Qm,o.Frustum=Aw,o.FrustumCorners=Iw,o.GLOBE_RADIUS=kc,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=s8,o.GLOBE_ZOOM_THRESHOLD_MIN=Mw,o.GlobeSharedBuffers=class{constructor(s){this._createGrid(s),this._createPoles(s)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const s of this._poleSegments)s.destroy();for(const s of this._gridSegments)s.withSkirts.destroy(),s.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const s of this._wireframeSegments)s.destroy()}}_fillGridMeshWithLods(s,r){const l=new Vt,d=new Mn,p=[],g=s+1+2,y=r[0]+1,b=r[0]+1+(1+r.length),T=(C,O,z)=>{let B=C===g-1?C-2:C===0?C:C-1;return B+=z?24575:0,[B,O]};for(let C=0;C<g;++C)l.emplaceBack(...T(C,0,!0));for(let C=0;C<y;++C)for(let O=0;O<g;++O)l.emplaceBack(...T(O,C,(O===0||O===g-1)&&!0));for(let C=0;C<r.length;++C){const O=r[C];for(let z=0;z<g;++z)l.emplaceBack(...T(z,O,!0))}for(let C=0;C<r.length;++C){const O=d.length,z=r[C]+1+2,B=new Mn;for(let te=0;te<z-1;te++){const ce=te===z-2,xe=ce?g*(b-r.length+C-te):g;for(let Me=0;Me<g-1;Me++){const be=te*g+Me;te===0||ce||Me===0||Me===g-2?(B.emplaceBack(be+1,be,be+xe),B.emplaceBack(be+xe,be+xe+1,be+1)):(d.emplaceBack(be+1,be,be+xe),d.emplaceBack(be+xe,be+xe+1,be+1))}}const G=Ki.simpleSegment(0,O,l.length,d.length-O);for(let te=0;te<B.uint16.length;te+=3)d.emplaceBack(B.uint16[te],B.uint16[te+1],B.uint16[te+2]);const X=Ki.simpleSegment(0,O,l.length,d.length-O);p.push({withoutSkirts:G,withSkirts:X})}return{vertices:l,indices:d,segments:p}}_createGrid(s){const r=this._fillGridMeshWithLods(Vh,Vm);this._gridSegments=r.segments,this._gridBuffer=s.createVertexBuffer(r.vertices,Um.members),this._gridIndexBuffer=s.createIndexBuffer(r.indices,!0)}_createPoles(s){const r=new Mn;for(let p=0;p<=Vh;p++)r.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=s.createIndexBuffer(r,!0);const l=new Gr,d=new Gr;this._poleSegments=[];for(let p=0,g=0;p<Mw;p++){const y=360/(1<<p);l.emplaceBack(0,-kc,0,.5,0),d.emplaceBack(0,-kc,0,.5,1);for(let b=0;b<=Vh;b++){const T=b/Vh,C=Sr(0,y,T),[O,z,B]=cf(WB,HB,C,kc);l.emplaceBack(O,z,B,T,0),d.emplaceBack(O,z,B,T,1)}this._poleSegments.push(Ki.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=s.createVertexBuffer(l,o8,!1),this._poleSouthVertexBuffer=s.createVertexBuffer(d,o8,!1)}getGridBuffers(s,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[s].withSkirts:this._gridSegments[s].withoutSkirts]}getPoleBuffers(s){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[s]]}getWirefameBuffers(s,r){if(!this._wireframeSegments){const l=new To,d=Vh,p=d+1+2,g=1;this._wireframeSegments=[];for(let y=0,b=0;y<Vm.length;y++){const T=Vm[y];for(let O=g;O<T+g;O++)for(let z=g;z<d+g;z++){const B=O*p+z;l.emplaceBack(B,B+1),l.emplaceBack(B,B+p),l.emplaceBack(B,B+p+1)}const C=T*d*3;this._wireframeSegments.push(Ki.simpleSegment(0,b,(T+1)*p,C)),b+=C}this._wireframeIndexBuffer=s.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[r]]}},o.GlyphManager=bf,o.ImagePosition=i3,o.KDBush=b3,o.LivePerformanceUtils=fr,o.LngLat=Xr,o.LngLatBounds=gd,o.LocalGlyphMode=s3,o.MAX_MERCATOR_LATITUDE=Jo,o.MercatorCoordinate=hf,o.ONE_EM=Fo,o.OverscaledTileID=Ea,o.PerformanceMarkers=un,o.Point=fe,o.Properties=ke,o.RGBAImage=as,o.Ray=Pw,o.RequestManager=class{constructor(s,r,l){this._transformRequestFn=s,this._customAccessToken=r,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const s=function(){let r="";for(let l=0;l<10;l++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",K,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,r){return this._transformRequestFn&&this._transformRequestFn(s,r)||{url:s}}normalizeStyleURL(s,r){if(!Re(s))return s;const l=At(s);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||r)}normalizeGlyphsURL(s,r){if(!Re(s))return s;const l=At(s);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||r)}normalizeSourceURL(s,r,l,d){if(!Re(s))return s;const p=At(s);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),l&&p.params.push(`language=${l}`),d&&p.params.push(`worldview=${d}`),this._makeAPIURL(p,this._customAccessToken||r)}normalizeSpriteURL(s,r,l,d){const p=At(s);return Re(s)?(p.path=`/styles/v1${p.path}/sprite${r}${l}`,this._makeAPIURL(p,this._customAccessToken||d)):(p.path+=`${r}${l}`,Tt(p))}normalizeTileURL(s,r,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!Re(s))return s;const d=At(s);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${r||l&&d.authority!=="raster"&&l===512?"@2x":""}${R.supported?".webp":"$1"}`),d.authority==="raster"?d.path=`/${D.RASTER_URL_PREFIX}${d.path}`:(d.path=d.path.replace(/^.+\/v4\//,"/"),d.path=`/${D.TILE_URL_VERSION}${d.path}`);const p=this._customAccessToken||function(g){for(const y of g){const b=y.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(d.params)||D.ACCESS_TOKEN;return D.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&d.params.push(`sku=${this._skuToken}`),this._makeAPIURL(d,p)}canonicalizeTileURL(s,r){const l=At(s);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return s;let d="mapbox://";l.path.match(/^\/raster\/v1\//)?d+=`raster/${l.path.replace(`/${D.RASTER_URL_PREFIX}/`,"")}`:d+=`tiles/${l.path.replace(`/${D.TILE_URL_VERSION}/`,"")}`;let p=l.params;return r&&(p=p.filter(g=>!g.match(/^access_token=/))),p.length&&(d+=`?${p.join("&")}`),d}canonicalizeTileset(s,r){const l=!!r&&Re(r),d=[];for(const p of s.tiles||[])Ge(p)?d.push(this.canonicalizeTileURL(p,l)):d.push(p);return d}_makeAPIURL(s,r){const l="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",d=At(D.API_URL);if(s.protocol=d.protocol,s.authority=d.authority,s.protocol==="http"){const p=s.params.indexOf("secure");p>=0&&s.params.splice(p,1)}if(d.path!=="/"&&(s.path=`${d.path}${s.path}`),!D.REQUIRE_ACCESS_TOKEN)return Tt(s);if(r=r||D.ACCESS_TOKEN,!this._silenceAuthErrors){if(!r)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if(r[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return s.params=s.params.filter(p=>p.indexOf("access_token")===-1),s.params.push(`access_token=${r||""}`),Tt(s)}},o.ResourceType=Nn,o.SegmentVector=Ki,o.SourceCache=Xh,o.StencilMode=_3,o.StructArrayLayout1ui2=is,o.StructArrayLayout2f1f2i16=Gn,o.StructArrayLayout2i4=Vt,o.StructArrayLayout2ui4=To,o.StructArrayLayout3f12=xr,o.StructArrayLayout3ui6=Mn,o.StructArrayLayout4i8=Pt,o.StructArrayLayout5f20=Gr,o.Texture=ug,o.Tile=m3,o.Transitionable=J,o.Uniform1f=uy,o.Uniform1i=class extends xu{constructor(s){super(s),this.current=0}set(s,r,l){this.fetchUniformLocation(s,r)&&this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},o.Uniform2f=class extends xu{constructor(s){super(s),this.current=[0,0]}set(s,r,l){this.fetchUniformLocation(s,r)&&(l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1])))}},o.Uniform3f=class extends xu{constructor(s){super(s),this.current=[0,0,0]}set(s,r,l){this.fetchUniformLocation(s,r)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2])))}},o.Uniform4f=UT,o.UniformColor=VT,o.UniformMatrix2f=class extends xu{constructor(s){super(s),this.current=PB}set(s,r,l){if(this.fetchUniformLocation(s,r)){for(let d=0;d<4;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix2fv(this.location,!1,l);break}}}},o.UniformMatrix3f=class extends xu{constructor(s){super(s),this.current=kB}set(s,r,l){if(this.fetchUniformLocation(s,r)){for(let d=0;d<9;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},o.UniformMatrix4f=class extends xu{constructor(s){super(s),this.current=CB}set(s,r,l){if(this.fetchUniformLocation(s,r)){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let d=1;d<16;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}}},o.UnwrappedTileID=X8,o.ValidationError=_n,o.VectorTileFeature=Ty,o.VectorTileWorkerSource=class extends Al{constructor(s,r,l,d,p){super(),this.actor=s,this.layerIndex=r,this.availableImages=l,this.loadVectorData=p||o9,this.loading={},this.loaded={},this.deduped=new i9(s.scheduler),this.isSpriteLoaded=d,this.scheduler=s.scheduler}loadTile(s,r){const l=s.uid,d=s&&s.request,p=d&&d.collectResourceTiming,g=this.loading[l]=new Y$(s);g.abort=this.loadVectorData(s,(y,b)=>{const T=!this.loading[l];if(delete this.loading[l],T||y||!b)return g.status="done",T||(this.loaded[l]=g),r(y);const C=b.rawData,O={};b.expires&&(O.expires=b.expires),b.cacheControl&&(O.cacheControl=b.cacheControl),g.vectorTile=b.vectorTile||new Qw(new My(C));const z=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(B,G)=>{if(B||!G)return r(B);const X={};if(p){const te=Do(d);te.length>0&&(X.resourceTiming=JSON.parse(JSON.stringify(te)))}r(null,wt({rawTileData:C.slice(0)},G,O,X))})};this.isSpriteLoaded?z():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(z,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom}):z()}),this.loaded=this.loaded||{},this.loaded[l]=g})}reloadTile(s,r){const l=this.loaded,d=s.uid,p=this;if(l&&l[d]){const g=l[d];g.showCollisionBoxes=s.showCollisionBoxes,g.enableTerrain=!!s.enableTerrain,g.projection=s.projection,g.tileTransform=Zh(s.tileID.canonical,s.projection);const y=(b,T)=>{const C=g.reloadCallback;C&&(delete g.reloadCallback,g.parse(g.vectorTile,p.layerIndex,this.availableImages,p.actor,C)),r(b,T)};g.status==="parsing"?g.reloadCallback=y:g.status==="done"&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,y):y())}}abortTile(s,r){const l=s.uid,d=this.loading[l];d&&(d.abort&&d.abort(),delete this.loading[l]),r()}removeTile(s,r){const l=this.loaded,d=s.uid;l&&l[d]&&delete l[d],r()}},o.WritingMode=Os,o.ZoomDependentExpression=Ah,o.add=wu,o.addDynamicAttributes=$y,o.adjoint=function(s,r){var l=r[0],d=r[1],p=r[2],g=r[3],y=r[4],b=r[5],T=r[6],C=r[7],O=r[8];return s[0]=y*O-b*C,s[1]=p*C-d*O,s[2]=d*b-p*y,s[3]=b*T-g*O,s[4]=l*O-p*T,s[5]=p*g-l*b,s[6]=g*C-y*T,s[7]=d*T-l*C,s[8]=l*y-d*g,s},o.asyncAll=kt,o.bezier=tt,o.bindAll=Jt,o.boundsAttributes=$C,o.bufferConvexPolygon=function(s,r){const l=[];for(let d=0;d<s.length;d++){const p=it(d-1,-1,s.length-1),g=it(d+1,-1,s.length-1),y=s[d],b=s[g],T=s[p].sub(y).unit(),C=b.sub(y).unit(),O=C.angleWithSep(T.x,T.y),z=T.add(C).unit().mult(-1*r/Math.sin(O/2));l.push(y.add(z))}return l},o.cacheEntryPossiblyAdded=function(s){Dn++,Dn>Kt&&(s.getActor().send("enforceCacheSizeLimit",Qe),Dn=0)},o.calculateGlobeLabelMatrix=function(s,r){const{x:l,y:d}=s.point,p=h8(l,d,s.worldSize/s._pixelsPerMercatorPixel,0,0);return jh(p,p,Rw(Pc(r)))},o.calculateGlobeMatrix=function(s){const{x:r,y:l}=s.point,{lng:d,lat:p}=s._center;return h8(r,l,s.worldSize,d,p)},o.calculateGlobeMercatorMatrix=function(s){const r=s.pixelsPerMeter,l=r/Vl(1,s.center.lat),d=$l(new Float64Array(16));return zm(d,d,[s.point.x,s.point.y,0]),$h(d,d,[l,l,r]),Float32Array.from(d)},o.circumferenceAtLatitude=zw,o.clamp=Le,o.clearTileCache=function(s){if(!rn())return;const r=v.caches.delete(wn);s&&r.catch(s).then(()=>s())},o.clipLine=EC,o.clone=function(s){var r=new os(16);return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],r},o.clone$1=bn,o.collisionCircleLayout=Xj,o.config=D,o.conjugate=function(s,r){return s[0]=-r[0],s[1]=-r[1],s[2]=-r[2],s[3]=r[3],s},o.create=function(){var s=new os(16);return os!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},o.create$1=qT,o.createExpression=cd,o.createLayout=et,o.createStyleLayer=function(s){return s.type==="custom"?new j$(s):new U$[s.type](s)},o.cross=kw,o.degToRad=at,o.distance=function(s,r){return Math.hypot(r[0]-s[0],r[1]-s[1],r[2]-s[2])},o.div=function(s,r,l){return s[0]=r[0]/l[0],s[1]=r[1]/l[1],s[2]=r[2]/l[2],s},o.dot=tl,o.earthRadius=qm,o.ease=Ke,o.easeCubicInOut=Be,o.ecefToLatLng=function([s,r,l]){const d=Math.hypot(s,r,l),p=Math.atan2(s,l),g=.5*Math.PI-Math.acos(-r/d);return new Xr(qe(p),qe(g))},o.emitValidationErrors=iy,o.endsWith=yn,o.enforceCacheSizeLimit=function(s){sn(),an&&an.then(r=>{r.keys().then(l=>{for(let d=0;d<l.length-s;d++)r.delete(l[d])})})},o.evaluateSizeForFeature=Iy,o.evaluateSizeForZoom=_f,o.evaluateVariableOffset=PC,o.evented=x,o.exactEquals=function(s,r){return s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]&&s[3]===r[3]},o.exactEquals$1=function(s,r){return s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]},o.exported=Ui,o.exported$1=R,o.extend=wt,o.extend$1=fa,o.fillExtrusionHeightLift=q8,o.filterObject=nn,o.fromMat4=function(s,r){return s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[4],s[4]=r[5],s[5]=r[6],s[6]=r[8],s[7]=r[9],s[8]=r[10],s},o.fromQuat=function(s,r){var l=r[0],d=r[1],p=r[2],g=r[3],y=l+l,b=d+d,T=p+p,C=l*y,O=d*y,z=d*b,B=p*y,G=p*b,X=p*T,te=g*y,ce=g*b,xe=g*T;return s[0]=1-z-X,s[1]=O+xe,s[2]=B-ce,s[3]=0,s[4]=O-xe,s[5]=1-C-X,s[6]=G+te,s[7]=0,s[8]=B+ce,s[9]=G-te,s[10]=1-C-z,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},o.fromRotation=function(s,r){var l=Math.sin(r),d=Math.cos(r);return s[0]=d,s[1]=l,s[2]=0,s[3]=-l,s[4]=d,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},o.fromScaling=ZT,o.furthestTileCorner=function(s){const r=Math.round((s+45+360)%360/90)%4;return ze[r]},o.getAABBPointSquareDist=function(s,r,l){let d=0;for(let p=0;p<2;++p){const g=l?l[p]:0;s[p]>g&&(d+=(s[p]-g)*(s[p]-g)),r[p]<g&&(d+=(g-r[p])*(g-r[p]))}return d},o.getAnchorAlignment=a3,o.getAnchorJustification=c3,o.getBounds=function(s){let r=1/0,l=1/0,d=-1/0,p=-1/0;for(const g of s)r=Math.min(r,g.x),l=Math.min(l,g.y),d=Math.max(d,g.x),p=Math.max(p,g.y);return{min:new fe(r,l),max:new fe(d,p)}},o.getColumn=qn,o.getDefaultExportFromCjs=Y,o.getGridMatrix=function(s,r,l,d){const p=r.getNorth(),g=r.getSouth(),y=r.getWest(),b=r.getEast(),T=1<<s.z,C=b-y,O=p-g,z=C/Vh,B=-O/Vm[l],G=[0,z,0,B,0,0,p,y,0];if(s.z>0){const X=180/d;GT(G,G,[X/C+1,0,0,0,X/O+1,0,-.5*X/z,.5*X/B,1])}return G[2]=T,G[5]=s.x,G[8]=s.y,G},o.getImage=ye,o.getJSON=function(s,r){return yr(wt(s,{type:"json"}),r)},o.getLatitudinalLod=function(s){const r=Jo-5;s=Le(s,-r,r)/r*90;const l=Math.pow(Math.abs(Math.sin(at(s))),3);return Math.round(l*(Vm.length-1))},o.getMapSessionAPI=ct,o.getPerformanceMeasurement=Do,o.getProjection=zC,o.getRTLTextPluginStatus=w,o.getReferrer=Dr,o.getTilePoint=function(s,{x:r,y:l},d=0){return new fe(((r-d)*s.scale-s.x)*Hn,(l*s.scale-s.y)*Hn)},o.getTileVec3=function(s,r,l=0){return lf(((r.x-l)*s.scale-s.x)*Hn,(r.y*s.scale-s.y)*Hn,g8(r.z,r.y))},o.getVideo=function(s,r){const l=v.document.createElement("video");l.muted=!0,l.onloadstart=function(){r(null,l)};for(let d=0;d<s.length;d++){const p=v.document.createElement("source");pi(s[d])||(l.crossOrigin="Anonymous"),p.src=s[d],l.appendChild(p)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(s){const r=[0,0,0],l=$l(new Float64Array(16));return jh(l,s.pixelMatrix,s.globeMatrix),Wi(r,r,l),new fe(r[0],r[1])},o.globeDenormalizeECEF=Rw,o.globeECEFOrigin=function(s,r){const l=[0,0,0];return Wi(l,l,Hm(Pc(r.canonical))),Wi(l,l,s),l},o.globeMetersToEcef=py,o.globeNormalizeECEF=Hm,o.globePixelsToTileUnits=function(s,r){return Hn/(512*Math.pow(2,s))*my(Pc(r))},o.globePoleMatrixForTile=function(s,r,l){const d=$l(new Float64Array(16)),p=(r/(1<<s)-.5)*Math.PI*2;return hy(d,l.globeMatrix,p),Float32Array.from(d)},o.globeTileBounds=Pc,o.globeTiltAtLngLat=p8,o.globeToMercatorTransition=df,o.globeUseCustomAntiAliasing=function(s,r,l){const d=df(l.zoom),p=s.style.map._antialias,g=!!r.extStandardDerivatives,y=r.extStandardDerivativesForceOff||s.terrain&&s.terrain.exaggeration()>0;return d===0&&!p&&!y&&g},o.identity=$l,o.identity$1=n8,o.invert=Ew,o.isFullscreen=function(){return!!v.document.fullscreenElement||!!v.document.webkitFullscreenElement},o.isLngLatBehindGlobe=Lw,o.isMapAuthenticated=function(s){return Rt.has(s)},o.isMapboxURL=Re,o.isSafariWithAntialiasingBug=function(s){const r=s.navigator?s.navigator.userAgent:null;return!!Yn(s)&&r&&(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=Yo,o.latLngToECEF=uf,o.len=FB,o.length=Fm,o.length$1=function(s){return Math.hypot(s[0],s[1],s[2],s[3])},o.lngFromMercatorX=Ds,o.loadVectorTile=o9,o.makeRequest=yr,o.mapValue=function(s,r,l,d,p){return Le((s-r)/(l-r)*(p-d)+d,d,p)},o.mercatorScale=_8,o.mercatorXfromLng=Ic,o.mercatorYfromLat=Ac,o.mercatorZfromAltitude=Vl,o.mul=LB,o.mul$1=zB,o.multiply=jh,o.multiply$1=GT,o.multiply$2=YT,o.nextPowerOfTwo=on,o.normalize=ba,o.normalize$1=NB,o.normalize$2=e8,o.number=Sr,o.ortho=function(s,r,l,d,p,g,y){var b=1/(r-l),T=1/(d-p),C=1/(g-y);return s[0]=-2*b,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*T,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*C,s[11]=0,s[12]=(r+l)*b,s[13]=(p+d)*T,s[14]=(y+g)*C,s[15]=1,s},o.pbf=nC,o.perspective=function(s,r,l,d,p){var g,y=1/Math.tan(r/2);return s[0]=y/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=y,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,p!=null&&p!==1/0?(s[10]=(p+d)*(g=1/(d-p)),s[14]=2*p*d*g):(s[10]=-1,s[14]=-2*d),s},o.pick=function(s,r){const l={};for(let d=0;d<r.length;d++){const p=r[d];p in s&&(l[p]=s[p])}return l},o.plugin=A,o.pointGeometry=M,o.polesInViewport=function(s){const r=$l(new Float64Array(16));jh(r,s.pixelMatrix,s.globeMatrix);const l=[0,nl,0],d=[0,rl,0];return Wi(l,l,r),Wi(d,d,r),[l[0]>0&&l[0]<=s.width&&l[1]>0&&l[1]<=s.height&&!Lw(s,new Xr(s.center.lat,90)),d[0]>0&&d[0]<=s.width&&d[1]>0&&d[1]<=s.height&&!Lw(s,new Xr(s.center.lat,-90))]},o.polygonContainsPoint=qh,o.polygonIntersectsBox=S8,o.polygonIntersectsPolygon=x8,o.polygonizeBounds=function(s,r,l=0,d=!0){const p=new fe(l,l),g=s.sub(p),y=r.add(p),b=[g,new fe(y.x,g.y),y,new fe(g.x,y.y)];return d&&b.push(g.clone()),b},o.posAttributes=Um,o.postMapLoadEvent=Er,o.postPerformanceEvent=Ze,o.postTurnstileEvent=Xn,o.potpack=r3,o.prevPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},o.radToDeg=qe,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(s){return s({pluginStatus:m,pluginURL:c}),x.on("pluginStateChange",s),s},o.removeAuthState=function(s){Rt.delete(s)},o.renderColorRamp=Ww,o.resample=y8,o.rotateX=Sw,o.rotateX$1=r8,o.rotateY=hy,o.rotateY$1=i8,o.rotateZ=function(s,r,l){var d=Math.sin(l),p=Math.cos(l),g=r[0],y=r[1],b=r[2],T=r[3],C=r[4],O=r[5],z=r[6],B=r[7];return r!==s&&(s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[0]=g*p+C*d,s[1]=y*p+O*d,s[2]=b*p+z*d,s[3]=T*p+B*d,s[4]=C*p-g*d,s[5]=O*p-y*d,s[6]=z*p-b*d,s[7]=B*p-T*d,s},o.rotateZ$1=function(s,r,l){l*=.5;var d=r[0],p=r[1],g=r[2],y=r[3],b=Math.sin(l),T=Math.cos(l);return s[0]=d*T+p*b,s[1]=p*T-d*b,s[2]=g*T+y*b,s[3]=y*T-g*b,s},o.scale=$h,o.scale$1=QT,o.scale$2=Ms,o.scaleAndAdd=jm,o.set=function(s,r,l,d){return s[0]=r,s[1]=l,s[2]=d,s},o.setCacheLimits=function(s,r){Qe=s,Kt=r},o.setColumn=function(s,r,l){s[4*r+0]=l[0],s[4*r+1]=l[1],s[4*r+2]=l[2],s[4*r+3]=l[3]},o.setRTLTextPlugin=function(s,r,l=!1){if(m===Mm||m===Dm||m===Om)throw new Error("setRTLTextPlugin cannot be called multiple times.");c=Ui.resolveURL(s),m=Mm,pd=r,_(),l||P()},o.smoothstep=Je,o.spec=vt,o.squaredLength=function(s){var r=s[0],l=s[1],d=s[2];return r*r+l*l+d*d},o.storeAuthState=function(s,r){r?Rt.add(s):Rt.delete(s)},o.sub=Ul,o.subtract=Cw,o.symbolSize=Kj,o.tileAABB=function(s,r,l,d,p,g,y,b,T){if(T.name==="globe")return VB(s,r,new ky(l,d,p));const C=Zh({z:l,x:d,y:p},T);return new wa([(g+C.x/C.scale)*r,r*(C.y/C.scale),y],[(g+C.x2/C.scale)*r,r*(C.y2/C.scale),b])},o.tileCornersToBounds=fy,o.tileTransform=Zh,o.transformMat3=function(s,r,l){var d=r[0],p=r[1],g=r[2];return s[0]=d*l[0]+p*l[3]+g*l[6],s[1]=d*l[1]+p*l[4]+g*l[7],s[2]=d*l[2]+p*l[5]+g*l[8],s},o.transformMat4=Wi,o.transformMat4$1=Uh,o.transformQuat=JT,o.transitionTileAABBinECEF=c8,o.translate=zm,o.transpose=function(s,r){if(s===r){var l=r[1],d=r[2],p=r[5];s[1]=r[3],s[2]=r[6],s[3]=l,s[5]=r[7],s[6]=d,s[7]=p}else s[0]=r[0],s[1]=r[3],s[2]=r[6],s[3]=r[1],s[4]=r[4],s[5]=r[7],s[6]=r[2],s[7]=r[5],s[8]=r[8];return s},o.triggerPluginCompletionEvent=h,o.uniqueId=Qt,o.updateGlobeVertexNormal=function(s,r,l,d,p){const g=5*r+2;s.float32[g+0]=l,s.float32[g+1]=d,s.float32[g+2]=p},o.validateCustomStyleLayer=function(s){const r=[],l=s.id;return l===void 0&&r.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&r.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&r.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),r},o.validateFilter=s=>rs(Lh(s)),o.validateFog=s=>rs(ty(s)),o.validateLayer=s=>rs(Y_(s)),o.validateLight=s=>rs(ey(s)),o.validateSource=s=>rs(Q_(s)),o.validateStyle=ry,o.validateTerrain=s=>rs(Cm(s)),o.values=yt,o.vectorTile=Sy,o.version=E,o.warnOnce=It,o.window=v,o.wrap=it}),u(["./shared"],function(o){function v(Ce){if(typeof Ce=="number"||typeof Ce=="boolean"||typeof Ce=="string"||Ce==null)return JSON.stringify(Ce);if(Array.isArray(Ce)){let ae="[";for(const ye of Ce)ae+=`${v(ye)},`;return`${ae}]`}let oe="{";for(const ae of Object.keys(Ce).sort())oe+=`${ae}:${v(Ce[ae])},`;return`${oe}}`}function E(Ce){let oe="";for(const ae of o.refProperties)oe+=`/${v(Ce[ae])}`;return oe}class k{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,ae){for(const De of oe)this._layerConfigs[De.id]=De,(this._layers[De.id]=o.createStyleLayer(De)).compileFilter(),this.keyCache[De.id]&&delete this.keyCache[De.id];for(const De of ae)delete this.keyCache[De],delete this._layerConfigs[De],delete this._layers[De];this.familiesBySource={};const ye=function(De,Re){const Ge={};for(let Ue=0;Ue<De.length;Ue++){const je=Re&&Re[De[Ue].id]||E(De[Ue]);Re&&(Re[De[Ue].id]=je);let ut=Ge[je];ut||(ut=Ge[je]=[]),ut.push(De[Ue])}const Xe=[];for(const Ue in Ge)Xe.push(Ge[Ue]);return Xe}(o.values(this._layerConfigs),this.keyCache);for(const De of ye){const Re=De.map(At=>this._layers[At.id]),Ge=Re[0];if(Ge.visibility==="none")continue;const Xe=Ge.source||"";let Ue=this.familiesBySource[Xe];Ue||(Ue=this.familiesBySource[Xe]={});const je=Ge.sourceLayer||"_geojsonTileLayer";let ut=Ue[je];ut||(ut=Ue[je]=[]),ut.push(Re)}}}class D{loadTile(oe,ae){const{uid:ye,encoding:De,rawImageData:Re,padding:Ge,buildQuadTree:Xe}=oe,Ue=o.window.ImageBitmap&&Re instanceof o.window.ImageBitmap?this.getImageData(Re,Ge):Re;ae(null,new o.DEMData(ye,Ue,De,Ge<1,Xe))}getImageData(oe,ae){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(oe.width,oe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=oe.width,this.offscreenCanvas.height=oe.height,this.offscreenCanvasContext.drawImage(oe,0,0,oe.width,oe.height);const ye=this.offscreenCanvasContext.getImageData(-ae,-ae,oe.width+2*ae,oe.height+2*ae);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ye}}function R(Ce,oe){if(Ce.length!==0){j(Ce[0],oe);for(var ae=1;ae<Ce.length;ae++)j(Ce[ae],!oe)}}function j(Ce,oe){for(var ae=0,ye=0,De=0,Re=Ce.length,Ge=Re-1;De<Re;Ge=De++){var Xe=(Ce[De][0]-Ce[Ge][0])*(Ce[Ge][1]+Ce[De][1]),Ue=ae+Xe;ye+=Math.abs(ae)>=Math.abs(Xe)?ae-Ue+Xe:Xe-Ue+ae,ae=Ue}ae+ye>=0!=!!oe&&Ce.reverse()}var N=o.getDefaultExportFromCjs(function Ce(oe,ae){var ye,De=oe&&oe.type;if(De==="FeatureCollection")for(ye=0;ye<oe.features.length;ye++)Ce(oe.features[ye],ae);else if(De==="GeometryCollection")for(ye=0;ye<oe.geometries.length;ye++)Ce(oe.geometries[ye],ae);else if(De==="Feature")Ce(oe.geometry,ae);else if(De==="Polygon")R(oe.coordinates,ae);else if(De==="MultiPolygon")for(ye=0;ye<oe.coordinates.length;ye++)R(oe.coordinates[ye],ae);return oe});const $=o.VectorTileFeature.prototype.toGeoJSON;var ee={exports:{}},W=o.pointGeometry,K=o.vectorTile.VectorTileFeature,Y=ie;function ie(Ce,oe){this.options=oe||{},this.features=Ce,this.length=Ce.length}function ue(Ce,oe){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=oe||4096}ie.prototype.feature=function(Ce){return new ue(this.features[Ce],this.options.extent)},ue.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var oe=0;oe<Ce.length;oe++){for(var ae=Ce[oe],ye=[],De=0;De<ae.length;De++)ye.push(new W(ae[De][0],ae[De][1]));this.geometry.push(ye)}return this.geometry},ue.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,oe=1/0,ae=-1/0,ye=1/0,De=-1/0,Re=0;Re<Ce.length;Re++)for(var Ge=Ce[Re],Xe=0;Xe<Ge.length;Xe++){var Ue=Ge[Xe];oe=Math.min(oe,Ue.x),ae=Math.max(ae,Ue.x),ye=Math.min(ye,Ue.y),De=Math.max(De,Ue.y)}return[oe,ye,ae,De]},ue.prototype.toGeoJSON=K.prototype.toGeoJSON;var de=o.pbf,M=Y;function Te(Ce){var oe=new de;return function(ae,ye){for(var De in ae.layers)ye.writeMessage(3,fe,ae.layers[De])}(Ce,oe),oe.finish()}function fe(Ce,oe){var ae;oe.writeVarintField(15,Ce.version||1),oe.writeStringField(1,Ce.name||""),oe.writeVarintField(5,Ce.extent||4096);var ye={keys:[],values:[],keycache:{},valuecache:{}};for(ae=0;ae<Ce.length;ae++)ye.feature=Ce.feature(ae),oe.writeMessage(2,Oe,ye);var De=ye.keys;for(ae=0;ae<De.length;ae++)oe.writeStringField(3,De[ae]);var Re=ye.values;for(ae=0;ae<Re.length;ae++)oe.writeMessage(4,Be,Re[ae])}function Oe(Ce,oe){var ae=Ce.feature;ae.id!==void 0&&oe.writeVarintField(1,ae.id),oe.writeMessage(2,rt,Ce),oe.writeVarintField(3,ae.type),oe.writeMessage(4,ze,ae)}function rt(Ce,oe){var ae=Ce.feature,ye=Ce.keys,De=Ce.values,Re=Ce.keycache,Ge=Ce.valuecache;for(var Xe in ae.properties){var Ue=ae.properties[Xe],je=Re[Xe];if(Ue!==null){je===void 0&&(ye.push(Xe),Re[Xe]=je=ye.length-1),oe.writeVarint(je);var ut=typeof Ue;ut!=="string"&&ut!=="boolean"&&ut!=="number"&&(Ue=JSON.stringify(Ue));var At=ut+":"+Ue,Tt=Ge[At];Tt===void 0&&(De.push(Ue),Ge[At]=Tt=De.length-1),oe.writeVarint(Tt)}}}function at(Ce,oe){return(oe<<3)+(7&Ce)}function qe(Ce){return Ce<<1^Ce>>31}function ze(Ce,oe){for(var ae=Ce.loadGeometry(),ye=Ce.type,De=0,Re=0,Ge=ae.length,Xe=0;Xe<Ge;Xe++){var Ue=ae[Xe],je=1;ye===1&&(je=Ue.length),oe.writeVarint(at(1,je));for(var ut=ye===3?Ue.length-1:Ue.length,At=0;At<ut;At++){At===1&&ye!==1&&oe.writeVarint(at(2,ut-1));var Tt=Ue[At].x-De,gn=Ue[At].y-Re;oe.writeVarint(qe(Tt)),oe.writeVarint(qe(gn)),De+=Tt,Re+=gn}ye===3&&oe.writeVarint(at(7,1))}}function Be(Ce,oe){var ae=typeof Ce;ae==="string"?oe.writeStringField(1,Ce):ae==="boolean"?oe.writeBooleanField(7,Ce):ae==="number"&&(Ce%1!=0?oe.writeDoubleField(3,Ce):Ce<0?oe.writeSVarintField(6,Ce):oe.writeVarintField(5,Ce))}ee.exports=Te,ee.exports.fromVectorTileJs=Te,ee.exports.fromGeojsonVt=function(Ce,oe){oe=oe||{};var ae={};for(var ye in Ce)ae[ye]=new M(Ce[ye].features,oe),ae[ye].name=ye,ae[ye].version=oe.version,ae[ye].extent=oe.extent;return Te({layers:ae})},ee.exports.GeoJSONWrapper=M;var tt=o.getDefaultExportFromCjs(ee.exports);const Ke={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ce=>Ce},Le=Math.fround||(Je=new Float32Array(1),Ce=>(Je[0]=+Ce,Je[0]));var Je;const it=3,kt=5,yt=6;class wt{constructor(oe){this.options=Object.assign(Object.create(Ke),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:ae,minZoom:ye,maxZoom:De}=this.options;ae&&console.time("total time");const Re=`prepare ${oe.length} points`;ae&&console.time(Re),this.points=oe;const Ge=[];for(let Ue=0;Ue<oe.length;Ue++){const je=oe[Ue];if(!je.geometry)continue;const[ut,At]=je.geometry.coordinates,Tt=Le(en(ut)),gn=Le(on(At));Ge.push(Tt,gn,1/0,Ue,-1,1),this.options.reduce&&Ge.push(0)}let Xe=this.trees[De+1]=this._createTree(Ge);ae&&console.timeEnd(Re);for(let Ue=De;Ue>=ye;Ue--){const je=+Date.now();Xe=this.trees[Ue]=this._createTree(this._cluster(Xe,Ue)),ae&&console.log("z%d: %d clusters in %dms",Ue,Xe.numItems,+Date.now()-je)}return ae&&console.timeEnd("total time"),this}getClusters(oe,ae){let ye=((oe[0]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,oe[1]));let Re=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)ye=-180,Re=180;else if(ye>Re){const At=this.getClusters([ye,De,180,Ge],ae),Tt=this.getClusters([-180,De,Re,Ge],ae);return At.concat(Tt)}const Xe=this.trees[this._limitZoom(ae)],Ue=Xe.range(en(ye),on(Ge),en(Re),on(De)),je=Xe.data,ut=[];for(const At of Ue){const Tt=this.stride*At;ut.push(je[Tt+kt]>1?jt(je,Tt,this.clusterProps):this.points[je[Tt+it]])}return ut}getChildren(oe){const ae=this._getOriginId(oe),ye=this._getOriginZoom(oe),De="No cluster with the specified id.",Re=this.trees[ye];if(!Re)throw new Error(De);const Ge=Re.data;if(ae*this.stride>=Ge.length)throw new Error(De);const Xe=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Ue=Re.within(Ge[ae*this.stride],Ge[ae*this.stride+1],Xe),je=[];for(const ut of Ue){const At=ut*this.stride;Ge[At+4]===oe&&je.push(Ge[At+kt]>1?jt(Ge,At,this.clusterProps):this.points[Ge[At+it]])}if(je.length===0)throw new Error(De);return je}getLeaves(oe,ae,ye){const De=[];return this._appendLeaves(De,oe,ae=ae||10,ye=ye||0,0),De}getTile(oe,ae,ye){const De=this.trees[this._limitZoom(oe)],Re=Math.pow(2,oe),{extent:Ge,radius:Xe}=this.options,Ue=Xe/Ge,je=(ye-Ue)/Re,ut=(ye+1+Ue)/Re,At={features:[]};return this._addTileFeatures(De.range((ae-Ue)/Re,je,(ae+1+Ue)/Re,ut),De.data,ae,ye,Re,At),ae===0&&this._addTileFeatures(De.range(1-Ue/Re,je,1,ut),De.data,Re,ye,Re,At),ae===Re-1&&this._addTileFeatures(De.range(0,je,Ue/Re,ut),De.data,-1,ye,Re,At),At.features.length?At:null}getClusterExpansionZoom(oe){let ae=this._getOriginZoom(oe)-1;for(;ae<=this.options.maxZoom;){const ye=this.getChildren(oe);if(ae++,ye.length!==1)break;oe=ye[0].properties.cluster_id}return ae}_appendLeaves(oe,ae,ye,De,Re){const Ge=this.getChildren(ae);for(const Xe of Ge){const Ue=Xe.properties;if(Ue&&Ue.cluster?Re+Ue.point_count<=De?Re+=Ue.point_count:Re=this._appendLeaves(oe,Ue.cluster_id,ye,De,Re):Re<De?Re++:oe.push(Xe),oe.length===ye)break}return Re}_createTree(oe){const ae=new o.KDBush(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<oe.length;ye+=this.stride)ae.add(oe[ye],oe[ye+1]);return ae.finish(),ae.data=oe,ae}_addTileFeatures(oe,ae,ye,De,Re,Ge){for(const Xe of oe){const Ue=Xe*this.stride,je=ae[Ue+kt]>1;let ut,At,Tt;if(je)ut=Qt(ae,Ue,this.clusterProps),At=ae[Ue],Tt=ae[Ue+1];else{const An=this.points[ae[Ue+it]];ut=An.properties;const[Ln,Xn]=An.geometry.coordinates;At=en(Ln),Tt=on(Xn)}const gn={type:1,geometry:[[Math.round(this.options.extent*(At*Re-ye)),Math.round(this.options.extent*(Tt*Re-De))]],tags:ut};let On;On=je||this.options.generateId?ae[Ue+it]:this.points[ae[Ue+it]].id,On!==void 0&&(gn.id=On),Ge.features.push(gn)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,ae){const{radius:ye,extent:De,reduce:Re,minPoints:Ge}=this.options,Xe=ye/(De*Math.pow(2,ae)),Ue=oe.data,je=[],ut=this.stride;for(let At=0;At<Ue.length;At+=ut){if(Ue[At+2]<=ae)continue;Ue[At+2]=ae;const Tt=Ue[At],gn=Ue[At+1],On=oe.within(Ue[At],Ue[At+1],Xe),An=Ue[At+kt];let Ln=An;for(const Xn of On){const wr=Xn*ut;Ue[wr+2]>ae&&(Ln+=Ue[wr+kt])}if(Ln>An&&Ln>=Ge){let Xn,wr=Tt*An,Er=gn*An,Or=-1;const Ze=((At/ut|0)<<5)+(ae+1)+this.points.length;for(const Se of On){const ct=Se*ut;if(Ue[ct+2]<=ae)continue;Ue[ct+2]=ae;const Rt=Ue[ct+kt];wr+=Ue[ct]*Rt,Er+=Ue[ct+1]*Rt,Ue[ct+4]=Ze,Re&&(Xn||(Xn=this._map(Ue,At,!0),Or=this.clusterProps.length,this.clusterProps.push(Xn)),Re(Xn,this._map(Ue,ct)))}Ue[At+4]=Ze,je.push(wr/Ln,Er/Ln,1/0,Ze,-1,Ln),Re&&je.push(Or)}else{for(let Xn=0;Xn<ut;Xn++)je.push(Ue[At+Xn]);if(Ln>1)for(const Xn of On){const wr=Xn*ut;if(!(Ue[wr+2]<=ae)){Ue[wr+2]=ae;for(let Er=0;Er<ut;Er++)je.push(Ue[wr+Er])}}}}return je}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,ae,ye){if(oe[ae+kt]>1){const Ge=this.clusterProps[oe[ae+yt]];return ye?Object.assign({},Ge):Ge}const De=this.points[oe[ae+it]].properties,Re=this.options.map(De);return ye&&Re===De?Object.assign({},Re):Re}}function jt(Ce,oe,ae){return{type:"Feature",id:Ce[oe+it],properties:Qt(Ce,oe,ae),geometry:{type:"Point",coordinates:[(ye=Ce[oe],360*(ye-.5)),Sn(Ce[oe+1])]}};var ye}function Qt(Ce,oe,ae){const ye=Ce[oe+kt],De=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,Re=Ce[oe+yt],Ge=Re===-1?{}:Object.assign({},ae[Re]);return Object.assign(Ge,{cluster:!0,cluster_id:Ce[oe+it],point_count:ye,point_count_abbreviated:De})}function en(Ce){return Ce/360+.5}function on(Ce){const oe=Math.sin(Ce*Math.PI/180),ae=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ae<0?0:ae>1?1:ae}function Sn(Ce){const oe=(180-360*Ce)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Jt(Ce,oe,ae,ye){for(var De,Re=ye,Ge=ae-oe>>1,Xe=ae-oe,Ue=Ce[oe],je=Ce[oe+1],ut=Ce[ae],At=Ce[ae+1],Tt=oe+3;Tt<ae;Tt+=3){var gn=yn(Ce[Tt],Ce[Tt+1],Ue,je,ut,At);if(gn>Re)De=Tt,Re=gn;else if(gn===Re){var On=Math.abs(Tt-Ge);On<Xe&&(De=Tt,Xe=On)}}Re>ye&&(De-oe>3&&Jt(Ce,oe,De,ye),Ce[De+2]=Re,ae-De>3&&Jt(Ce,De,ae,ye))}function yn(Ce,oe,ae,ye,De,Re){var Ge=De-ae,Xe=Re-ye;if(Ge!==0||Xe!==0){var Ue=((Ce-ae)*Ge+(oe-ye)*Xe)/(Ge*Ge+Xe*Xe);Ue>1?(ae=De,ye=Re):Ue>0&&(ae+=Ge*Ue,ye+=Xe*Ue)}return(Ge=Ce-ae)*Ge+(Xe=oe-ye)*Xe}function Ft(Ce,oe,ae,ye){var De={id:Ce===void 0?null:Ce,type:oe,geometry:ae,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Re){var Ge=Re.geometry,Xe=Re.type;if(Xe==="Point"||Xe==="MultiPoint"||Xe==="LineString")nn(Re,Ge);else if(Xe==="Polygon"||Xe==="MultiLineString")for(var Ue=0;Ue<Ge.length;Ue++)nn(Re,Ge[Ue]);else if(Xe==="MultiPolygon")for(Ue=0;Ue<Ge.length;Ue++)for(var je=0;je<Ge[Ue].length;je++)nn(Re,Ge[Ue][je])}(De),De}function nn(Ce,oe){for(var ae=0;ae<oe.length;ae+=3)Ce.minX=Math.min(Ce.minX,oe[ae]),Ce.minY=Math.min(Ce.minY,oe[ae+1]),Ce.maxX=Math.max(Ce.maxX,oe[ae]),Ce.maxY=Math.max(Ce.maxY,oe[ae+1])}function bn(Ce,oe,ae,ye){if(oe.geometry){var De=oe.geometry.coordinates,Re=oe.geometry.type,Ge=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2),Xe=[],Ue=oe.id;if(ae.promoteId?Ue=oe.properties[ae.promoteId]:ae.generateId&&(Ue=ye||0),Re==="Point")qt(De,Xe);else if(Re==="MultiPoint")for(var je=0;je<De.length;je++)qt(De[je],Xe);else if(Re==="LineString")It(De,Xe,Ge,!1);else if(Re==="MultiLineString"){if(ae.lineMetrics){for(je=0;je<De.length;je++)It(De[je],Xe=[],Ge,!1),Ce.push(Ft(Ue,"LineString",Xe,oe.properties));return}Rn(De,Xe,Ge,!1)}else if(Re==="Polygon")Rn(De,Xe,Ge,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(je=0;je<oe.geometry.geometries.length;je++)bn(Ce,{id:Ue,geometry:oe.geometry.geometries[je],properties:oe.properties},ae,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(je=0;je<De.length;je++){var ut=[];Rn(De[je],ut,Ge,!0),Xe.push(ut)}}Ce.push(Ft(Ue,Re,Xe,oe.properties))}}function qt(Ce,oe){oe.push(ln(Ce[0])),oe.push(Zn(Ce[1])),oe.push(0)}function It(Ce,oe,ae,ye){for(var De,Re,Ge=0,Xe=0;Xe<Ce.length;Xe++){var Ue=ln(Ce[Xe][0]),je=Zn(Ce[Xe][1]);oe.push(Ue),oe.push(je),oe.push(0),Xe>0&&(Ge+=ye?(De*je-Ue*Re)/2:Math.sqrt(Math.pow(Ue-De,2)+Math.pow(je-Re,2))),De=Ue,Re=je}var ut=oe.length-3;oe[2]=1,Jt(oe,0,ut,ae),oe[ut+2]=1,oe.size=Math.abs(Ge),oe.start=0,oe.end=oe.size}function Rn(Ce,oe,ae,ye){for(var De=0;De<Ce.length;De++){var Re=[];It(Ce[De],Re,ae,ye),oe.push(Re)}}function ln(Ce){return Ce/360+.5}function Zn(Ce){var oe=Math.sin(Ce*Math.PI/180),ae=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ae<0?0:ae>1?1:ae}function tr(Ce,oe,ae,ye,De,Re,Ge,Xe){if(ye/=oe,Re>=(ae/=oe)&&Ge<ye)return Ce;if(Ge<ae||Re>=ye)return null;for(var Ue=[],je=0;je<Ce.length;je++){var ut=Ce[je],At=ut.geometry,Tt=ut.type,gn=De===0?ut.minX:ut.minY,On=De===0?ut.maxX:ut.maxY;if(gn>=ae&&On<ye)Ue.push(ut);else if(!(On<ae||gn>=ye)){var An=[];if(Tt==="Point"||Tt==="MultiPoint")Fn(At,An,ae,ye,De);else if(Tt==="LineString")Yn(At,An,ae,ye,De,!1,Xe.lineMetrics);else if(Tt==="MultiLineString")qn(At,An,ae,ye,De,!1);else if(Tt==="Polygon")qn(At,An,ae,ye,De,!0);else if(Tt==="MultiPolygon")for(var Ln=0;Ln<At.length;Ln++){var Xn=[];qn(At[Ln],Xn,ae,ye,De,!0),Xn.length&&An.push(Xn)}if(An.length){if(Xe.lineMetrics&&Tt==="LineString"){for(Ln=0;Ln<An.length;Ln++)Ue.push(Ft(ut.id,Tt,An[Ln],ut.tags));continue}Tt!=="LineString"&&Tt!=="MultiLineString"||(An.length===1?(Tt="LineString",An=An[0]):Tt="MultiLineString"),Tt!=="Point"&&Tt!=="MultiPoint"||(Tt=An.length===3?"Point":"MultiPoint"),Ue.push(Ft(ut.id,Tt,An,ut.tags))}}}return Ue.length?Ue:null}function Fn(Ce,oe,ae,ye,De){for(var Re=0;Re<Ce.length;Re+=3){var Ge=Ce[Re+De];Ge>=ae&&Ge<=ye&&(oe.push(Ce[Re]),oe.push(Ce[Re+1]),oe.push(Ce[Re+2]))}}function Yn(Ce,oe,ae,ye,De,Re,Ge){for(var Xe,Ue,je=Un(Ce),ut=De===0?Qe:Kt,At=Ce.start,Tt=0;Tt<Ce.length-3;Tt+=3){var gn=Ce[Tt],On=Ce[Tt+1],An=Ce[Tt+2],Ln=Ce[Tt+3],Xn=Ce[Tt+4],wr=De===0?gn:On,Er=De===0?Ln:Xn,Or=!1;Ge&&(Xe=Math.sqrt(Math.pow(gn-Ln,2)+Math.pow(On-Xn,2))),wr<ae?Er>ae&&(Ue=ut(je,gn,On,Ln,Xn,ae),Ge&&(je.start=At+Xe*Ue)):wr>ye?Er<ye&&(Ue=ut(je,gn,On,Ln,Xn,ye),Ge&&(je.start=At+Xe*Ue)):wn(je,gn,On,An),Er<ae&&wr>=ae&&(Ue=ut(je,gn,On,Ln,Xn,ae),Or=!0),Er>ye&&wr<=ye&&(Ue=ut(je,gn,On,Ln,Xn,ye),Or=!0),!Re&&Or&&(Ge&&(je.end=At+Xe*Ue),oe.push(je),je=Un(Ce)),Ge&&(At+=Xe)}var Ze=Ce.length-3;gn=Ce[Ze],On=Ce[Ze+1],An=Ce[Ze+2],(wr=De===0?gn:On)>=ae&&wr<=ye&&wn(je,gn,On,An),Ze=je.length-3,Re&&Ze>=3&&(je[Ze]!==je[0]||je[Ze+1]!==je[1])&&wn(je,je[0],je[1],je[2]),je.length&&oe.push(je)}function Un(Ce){var oe=[];return oe.size=Ce.size,oe.start=Ce.start,oe.end=Ce.end,oe}function qn(Ce,oe,ae,ye,De,Re){for(var Ge=0;Ge<Ce.length;Ge++)Yn(Ce[Ge],oe,ae,ye,De,Re,!1)}function wn(Ce,oe,ae,ye){Ce.push(oe),Ce.push(ae),Ce.push(ye)}function Qe(Ce,oe,ae,ye,De,Re){var Ge=(Re-oe)/(ye-oe);return Ce.push(Re),Ce.push(ae+(De-ae)*Ge),Ce.push(1),Ge}function Kt(Ce,oe,ae,ye,De,Re){var Ge=(Re-ae)/(De-ae);return Ce.push(oe+(ye-oe)*Ge),Ce.push(Re),Ce.push(1),Ge}function an(Ce,oe){for(var ae=[],ye=0;ye<Ce.length;ye++){var De,Re=Ce[ye],Ge=Re.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")De=Zt(Re.geometry,oe);else if(Ge==="MultiLineString"||Ge==="Polygon"){De=[];for(var Xe=0;Xe<Re.geometry.length;Xe++)De.push(Zt(Re.geometry[Xe],oe))}else if(Ge==="MultiPolygon")for(De=[],Xe=0;Xe<Re.geometry.length;Xe++){for(var Ue=[],je=0;je<Re.geometry[Xe].length;je++)Ue.push(Zt(Re.geometry[Xe][je],oe));De.push(Ue)}ae.push(Ft(Re.id,Ge,De,Re.tags))}return ae}function Zt(Ce,oe){var ae=[];ae.size=Ce.size,Ce.start!==void 0&&(ae.start=Ce.start,ae.end=Ce.end);for(var ye=0;ye<Ce.length;ye+=3)ae.push(Ce[ye]+oe,Ce[ye+1],Ce[ye+2]);return ae}function rn(Ce,oe){if(Ce.transformed)return Ce;var ae,ye,De,Re=1<<Ce.z,Ge=Ce.x,Xe=Ce.y;for(ae=0;ae<Ce.features.length;ae++){var Ue=Ce.features[ae],je=Ue.geometry,ut=Ue.type;if(Ue.geometry=[],ut===1)for(ye=0;ye<je.length;ye+=2)Ue.geometry.push(sn(je[ye],je[ye+1],oe,Re,Ge,Xe));else for(ye=0;ye<je.length;ye++){var At=[];for(De=0;De<je[ye].length;De+=2)At.push(sn(je[ye][De],je[ye][De+1],oe,Re,Ge,Xe));Ue.geometry.push(At)}}return Ce.transformed=!0,Ce}function sn(Ce,oe,ae,ye,De,Re){return[Math.round(ae*(Ce*ye-De)),Math.round(ae*(oe*ye-Re))]}function vn(Ce,oe,ae,ye,De){for(var Re=oe===De.maxZoom?0:De.tolerance/((1<<oe)*De.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ae,y:ye,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Xe=0;Xe<Ce.length;Xe++){Ge.numFeatures++,Dn(Ge,Ce[Xe],Re,De);var Ue=Ce[Xe].minX,je=Ce[Xe].minY,ut=Ce[Xe].maxX,At=Ce[Xe].maxY;Ue<Ge.minX&&(Ge.minX=Ue),je<Ge.minY&&(Ge.minY=je),ut>Ge.maxX&&(Ge.maxX=ut),At>Ge.maxY&&(Ge.maxY=At)}return Ge}function Dn(Ce,oe,ae,ye){var De=oe.geometry,Re=oe.type,Ge=[];if(Re==="Point"||Re==="MultiPoint")for(var Xe=0;Xe<De.length;Xe+=3)Ge.push(De[Xe]),Ge.push(De[Xe+1]),Ce.numPoints++,Ce.numSimplified++;else if(Re==="LineString")Nn(Ge,De,Ce,ae,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(Xe=0;Xe<De.length;Xe++)Nn(Ge,De[Xe],Ce,ae,Re==="Polygon",Xe===0);else if(Re==="MultiPolygon")for(var Ue=0;Ue<De.length;Ue++){var je=De[Ue];for(Xe=0;Xe<je.length;Xe++)Nn(Ge,je[Xe],Ce,ae,!0,Xe===0)}if(Ge.length){var ut=oe.tags||null;if(Re==="LineString"&&ye.lineMetrics){for(var At in ut={},oe.tags)ut[At]=oe.tags[At];ut.mapbox_clip_start=De.start/De.size,ut.mapbox_clip_end=De.end/De.size}var Tt={geometry:Ge,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:ut};oe.id!==null&&(Tt.id=oe.id),Ce.features.push(Tt)}}function Nn(Ce,oe,ae,ye,De,Re){var Ge=ye*ye;if(ye>0&&oe.size<(De?Ge:ye))ae.numPoints+=oe.length/3;else{for(var Xe=[],Ue=0;Ue<oe.length;Ue+=3)(ye===0||oe[Ue+2]>Ge)&&(ae.numSimplified++,Xe.push(oe[Ue]),Xe.push(oe[Ue+1])),ae.numPoints++;De&&function(je,ut){for(var At=0,Tt=0,gn=je.length,On=gn-2;Tt<gn;On=Tt,Tt+=2)At+=(je[Tt]-je[On])*(je[Tt+1]+je[On+1]);if(At>0===ut)for(Tt=0,gn=je.length;Tt<gn/2;Tt+=2){var An=je[Tt],Ln=je[Tt+1];je[Tt]=je[gn-2-Tt],je[Tt+1]=je[gn-1-Tt],je[gn-2-Tt]=An,je[gn-1-Tt]=Ln}}(Xe,Re),Ce.push(Xe)}}function nr(Ce,oe){var ae=(oe=this.options=function(De,Re){for(var Ge in Re)De[Ge]=Re[Ge];return De}(Object.create(this.options),oe)).debug;if(ae&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=function(De,Re){var Ge=[];if(De.type==="FeatureCollection")for(var Xe=0;Xe<De.features.length;Xe++)bn(Ge,De.features[Xe],Re,Xe);else bn(Ge,De.type==="Feature"?De:{geometry:De},Re);return Ge}(Ce,oe);this.tiles={},this.tileCoords=[],ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(De,Re){var Ge=Re.buffer/Re.extent,Xe=De,Ue=tr(De,1,-1-Ge,Ge,0,-1,2,Re),je=tr(De,1,1-Ge,2+Ge,0,-1,2,Re);return(Ue||je)&&(Xe=tr(De,1,-Ge,1+Ge,0,-1,2,Re)||[],Ue&&(Xe=an(Ue,1).concat(Xe)),je&&(Xe=Xe.concat(an(je,-1)))),Xe}(ye,oe),ye.length&&this.splitTile(ye,0,0,0),ae&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Dr(Ce,oe,ae){return 32*((1<<Ce)*ae+oe)+Ce}function yr(Ce,oe){const ae=Ce.tileID.canonical;if(!this._geoJSONIndex)return oe(null,null);const ye=this._geoJSONIndex.getTile(ae.z,ae.x,ae.y);if(!ye)return oe(null,null);const De=new class{constructor(Ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=Ge.length,this._features=Ge}feature(Ge){return new class{constructor(Xe){this._feature=Xe,this.extent=o.EXTENT,this.type=Xe.type,this.properties=Xe.tags,"id"in Xe&&!isNaN(Xe.id)&&(this.id=parseInt(Xe.id,10))}loadGeometry(){if(this._feature.type===1){const Xe=[];for(const Ue of this._feature.geometry)Xe.push([new o.Point(Ue[0],Ue[1])]);return Xe}{const Xe=[];for(const Ue of this._feature.geometry){const je=[];for(const ut of Ue)je.push(new o.Point(ut[0],ut[1]));Xe.push(je)}return Xe}}toGeoJSON(Xe,Ue,je){return $.call(this,Xe,Ue,je)}}(this._features[Ge])}}(ye.features);let Re=tt(De);Re.byteOffset===0&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),oe(null,{vectorTile:De,rawData:Re.buffer})}nr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},nr.prototype.splitTile=function(Ce,oe,ae,ye,De,Re,Ge){for(var Xe=[Ce,oe,ae,ye],Ue=this.options,je=Ue.debug;Xe.length;){ye=Xe.pop(),ae=Xe.pop(),oe=Xe.pop(),Ce=Xe.pop();var ut=1<<oe,At=Dr(oe,ae,ye),Tt=this.tiles[At];if(!Tt&&(je>1&&console.time("creation"),Tt=this.tiles[At]=vn(Ce,oe,ae,ye,Ue),this.tileCoords.push({z:oe,x:ae,y:ye}),je)){je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,ae,ye,Tt.numFeatures,Tt.numPoints,Tt.numSimplified),console.timeEnd("creation"));var gn="z"+oe;this.stats[gn]=(this.stats[gn]||0)+1,this.total++}if(Tt.source=Ce,De){if(oe===Ue.maxZoom||oe===De)continue;var On=1<<De-oe;if(ae!==Math.floor(Re/On)||ye!==Math.floor(Ge/On))continue}else if(oe===Ue.indexMaxZoom||Tt.numPoints<=Ue.indexMaxPoints)continue;if(Tt.source=null,Ce.length!==0){je>1&&console.time("clipping");var An,Ln,Xn,wr,Er,Or,Ze=.5*Ue.buffer/Ue.extent,Se=.5-Ze,ct=.5+Ze,Rt=1+Ze;An=Ln=Xn=wr=null,Er=tr(Ce,ut,ae-Ze,ae+ct,0,Tt.minX,Tt.maxX,Ue),Or=tr(Ce,ut,ae+Se,ae+Rt,0,Tt.minX,Tt.maxX,Ue),Ce=null,Er&&(An=tr(Er,ut,ye-Ze,ye+ct,1,Tt.minY,Tt.maxY,Ue),Ln=tr(Er,ut,ye+Se,ye+Rt,1,Tt.minY,Tt.maxY,Ue),Er=null),Or&&(Xn=tr(Or,ut,ye-Ze,ye+ct,1,Tt.minY,Tt.maxY,Ue),wr=tr(Or,ut,ye+Se,ye+Rt,1,Tt.minY,Tt.maxY,Ue),Or=null),je>1&&console.timeEnd("clipping"),Xe.push(An||[],oe+1,2*ae,2*ye),Xe.push(Ln||[],oe+1,2*ae,2*ye+1),Xe.push(Xn||[],oe+1,2*ae+1,2*ye),Xe.push(wr||[],oe+1,2*ae+1,2*ye+1)}}},nr.prototype.getTile=function(Ce,oe,ae){var ye=this.options,De=ye.extent,Re=ye.debug;if(Ce<0||Ce>24)return null;var Ge=1<<Ce,Xe=Dr(Ce,oe=(oe%Ge+Ge)%Ge,ae);if(this.tiles[Xe])return rn(this.tiles[Xe],De);Re>1&&console.log("drilling down to z%d-%d-%d",Ce,oe,ae);for(var Ue,je=Ce,ut=oe,At=ae;!Ue&&je>0;)je--,ut=Math.floor(ut/2),At=Math.floor(At/2),Ue=this.tiles[Dr(je,ut,At)];return Ue&&Ue.source?(Re>1&&console.log("found parent tile z%d-%d-%d",je,ut,At),Re>1&&console.time("drilling down"),this.splitTile(Ue.source,je,ut,At,Ce,oe,ae),Re>1&&console.timeEnd("drilling down"),this.tiles[Xe]?rn(this.tiles[Xe],De):null):null};class bi extends o.VectorTileWorkerSource{constructor(oe,ae,ye,De,Re){super(oe,ae,ye,De,yr),Re&&(this.loadGeoJSON=Re)}loadData(oe,ae){const ye=oe&&oe.request,De=ye&&ye.collectResourceTiming;this.loadGeoJSON(oe,(Re,Ge)=>{if(Re||!Ge)return ae(Re);if(typeof Ge!="object")return ae(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{N(Ge,!0);try{if(oe.filter){const Ue=o.createExpression(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ue.result==="error")throw new Error(Ue.value.map(ut=>`${ut.key}: ${ut.message}`).join(", "));Ge={type:"FeatureCollection",features:Ge.features.filter(ut=>Ue.value.evaluate({zoom:0},ut))}}this._geoJSONIndex=oe.cluster?new wt(function({superclusterOptions:Ue,clusterProperties:je}){if(!je||!Ue)return Ue;const ut={},At={},Tt={accumulated:null,zoom:0},gn={properties:null},On=Object.keys(je);for(const An of On){const[Ln,Xn]=je[An],wr=o.createExpression(Xn),Er=o.createExpression(typeof Ln=="string"?[Ln,["accumulated"],["get",An]]:Ln);ut[An]=wr.value,At[An]=Er.value}return Ue.map=An=>{gn.properties=An;const Ln={};for(const Xn of On)Ln[Xn]=ut[Xn].evaluate(Tt,gn);return Ln},Ue.reduce=(An,Ln)=>{gn.properties=Ln;for(const Xn of On)Tt.accumulated=An[Xn],An[Xn]=At[Xn].evaluate(Tt,gn)},Ue}(oe)).load(Ge.features):function(Ue,je){return new nr(Ue,je)}(Ge,oe.geojsonVtOptions)}catch(Ue){return ae(Ue)}this.loaded={};const Xe={};if(De){const Ue=o.getPerformanceMeasurement(ye);Ue&&(Xe.resourceTiming={},Xe.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Ue)))}ae(null,Xe)}})}reloadTile(oe,ae){const ye=this.loaded;return ye&&ye[oe.uid]?super.reloadTile(oe,ae):this.loadTile(oe,ae)}loadGeoJSON(oe,ae){if(oe.request)o.getJSON(oe.request,ae);else{if(typeof oe.data!="string")return ae(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));try{return ae(null,JSON.parse(oe.data))}catch{return ae(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(oe,ae){try{ae(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(ye){ae(ye)}}getClusterChildren(oe,ae){try{ae(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(ye){ae(ye)}}getClusterLeaves(oe,ae){try{ae(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(ye){ae(ye)}}}class pi{constructor(oe){this.self=oe,this.actor=new o.Actor(oe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:bi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ae,ye)=>{if(this.workerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.workerSourceTypes[ae]=ye},this.self.registerRTLTextPlugin=ae=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=ae.applyArabicShaping,o.plugin.processBidirectionalText=ae.processBidirectionalText,o.plugin.processStyledBidirectionalText=ae.processStyledBidirectionalText}}clearCaches(oe,ae,ye){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe],ye()}checkIfReady(oe,ae,ye){ye()}setReferrer(oe,ae){this.referrer=ae}spriteLoaded(oe,ae){this.isSpriteLoaded[oe]=ae;for(const ye in this.workerSources[oe]){const De=this.workerSources[oe][ye];for(const Re in De)De[Re]instanceof o.VectorTileWorkerSource&&(De[Re].isSpriteLoaded=ae,De[Re].fire(new o.Event("isSpriteLoaded")))}}setImages(oe,ae,ye){this.availableImages[oe]=ae;for(const De in this.workerSources[oe]){const Re=this.workerSources[oe][De];for(const Ge in Re)Re[Ge].availableImages=ae}ye()}enableTerrain(oe,ae,ye){this.terrain=ae,ye()}setProjection(oe,ae){this.projections[oe]=o.getProjection(ae)}setLayers(oe,ae,ye){this.getLayerIndex(oe).replace(ae),ye()}updateLayers(oe,ae,ye){this.getLayerIndex(oe).update(ae.layers,ae.removedIds),ye()}loadTile(oe,ae,ye){const De=this.enableTerrain?o.extend({enableTerrain:this.terrain},ae):ae;De.projection=this.projections[oe]||this.defaultProjection,this.getWorkerSource(oe,ae.type,ae.source).loadTile(De,ye)}loadDEMTile(oe,ae,ye){const De=this.enableTerrain?o.extend({buildQuadTree:this.terrain},ae):ae;this.getDEMWorkerSource(oe,ae.source).loadTile(De,ye)}reloadTile(oe,ae,ye){const De=this.enableTerrain?o.extend({enableTerrain:this.terrain},ae):ae;De.projection=this.projections[oe]||this.defaultProjection,this.getWorkerSource(oe,ae.type,ae.source).reloadTile(De,ye)}abortTile(oe,ae,ye){this.getWorkerSource(oe,ae.type,ae.source).abortTile(ae,ye)}removeTile(oe,ae,ye){this.getWorkerSource(oe,ae.type,ae.source).removeTile(ae,ye)}removeSource(oe,ae,ye){if(!this.workerSources[oe]||!this.workerSources[oe][ae.type]||!this.workerSources[oe][ae.type][ae.source])return;const De=this.workerSources[oe][ae.type][ae.source];delete this.workerSources[oe][ae.type][ae.source],De.removeSource!==void 0?De.removeSource(ae,ye):ye()}loadWorkerSource(oe,ae,ye){try{this.self.importScripts(ae.url),ye()}catch(De){ye(De.toString())}}syncRTLPluginState(oe,ae,ye){try{o.plugin.setState(ae);const De=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&De!=null){this.self.importScripts(De);const Re=o.plugin.isParsed();ye(Re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${De}`),Re)}}catch(De){ye(De.toString())}}getAvailableImages(oe){let ae=this.availableImages[oe];return ae||(ae=[]),ae}getLayerIndex(oe){let ae=this.layerIndexes[oe];return ae||(ae=this.layerIndexes[oe]=new k),ae}getWorkerSource(oe,ae,ye){if(this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][ae]||(this.workerSources[oe][ae]={}),!this.workerSources[oe][ae][ye]){const De={send:(Re,Ge,Xe,Ue,je,ut)=>{this.actor.send(Re,Ge,Xe,oe,je,ut)},scheduler:this.actor.scheduler};this.workerSources[oe][ae][ye]=new this.workerSourceTypes[ae](De,this.getLayerIndex(oe),this.getAvailableImages(oe),this.isSpriteLoaded[oe])}return this.workerSources[oe][ae][ye]}getDEMWorkerSource(oe,ae){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][ae]||(this.demWorkerSources[oe][ae]=new D),this.demWorkerSources[oe][ae]}enforceCacheSizeLimit(oe,ae){o.enforceCacheSizeLimit(ae)}getWorkerPerformanceMetrics(oe,ae,ye){ye(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new pi(self)),pi}),u(["./shared"],function(o){function v(m,c){if(Array.isArray(m)){if(!Array.isArray(c)||m.length!==c.length)return!1;for(let h=0;h<m.length;h++)if(!v(m[h],c[h]))return!1;return!0}if(typeof m=="object"&&m!==null&&c!==null){if(typeof c!="object"||Object.keys(m).length!==Object.keys(c).length)return!1;for(const h in m)if(!v(m[h],c[h]))return!1;return!0}return m===c}var E=k;function k(m){return!function(c){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,x,w=new Blob([""],{type:"text/javascript"}),P=URL.createObjectURL(w);try{x=new Worker(P),_=!0}catch{_=!1}return x&&x.terminate(),URL.revokeObjectURL(P),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var x=_.getContext("2d");if(!x)return!1;var w=x.getImageData(0,0,1,1);return w&&w.width===_.width}()?(D[h=c&&c.failIfMajorPerformanceCaveat]===void 0&&(D[h]=function(_){var x,w=function(P){var A=document.createElement("canvas"),L=Object.create(k.webGLContextAttributes);return L.failIfMajorPerformanceCaveat=P,A.getContext("webgl",L)||A.getContext("experimental-webgl",L)}(_);if(!w)return!1;try{x=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!x||w.isContextLost())&&(w.shaderSource(x,"void main() {}"),w.compileShader(x),w.getShaderParameter(x,w.COMPILE_STATUS)===!0)}(h)),D[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(m)}var D={};function R(m,c,h){const _=o.window.document.createElement(m);return c!==void 0&&(_.className=c),h&&h.appendChild(_),_}function j(m,c,h){const _=o.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const x of Object.keys(c))_.setAttributeNS(null,x,c[x]);return h&&h.appendChild(_),_}k.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const N=o.window.document&&o.window.document.documentElement.style,$=N&&N.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ee;function W(){N&&$&&(ee=N[$],N[$]="none")}function K(){N&&$&&(N[$]=ee)}function Y(m){m.preventDefault(),m.stopPropagation(),o.window.removeEventListener("click",Y,!0)}function ie(){o.window.addEventListener("click",Y,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",Y,!0)},0)}function ue(m,c){const h=m.getBoundingClientRect();return Te(m,h,c)}function de(m,c){const h=m.getBoundingClientRect(),_=[];for(let x=0;x<c.length;x++)_.push(Te(m,h,c[x]));return _}function M(m){return o.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function Te(m,c,h){const _=m.offsetWidth===c.width?1:m.offsetWidth/c.width;return new o.Point((h.clientX-c.left)*_,(h.clientY-c.top)*_)}function fe(m,c){var h=c[0],_=c[1],x=c[2],w=c[3],P=h*w-x*_;return P?(m[0]=w*(P=1/P),m[1]=-_*P,m[2]=-x*P,m[3]=h*P,m):null}function Oe(m){const{userImage:c}=m;return!!(c&&c.render&&c.render())&&(m.data.replace(new Uint8Array(c.data.buffer)),!0)}class rt extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:h,callback:_}of this.requestors)this._notify(h,_);this.requestors=[]}}hasImage(c){return!!this.getImage(c)}getImage(c){return this.images[c]}addImage(c,h){this._validate(c,h)&&(this.images[c]=h)}_validate(c,h){let _=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),_=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),_=!1),this._validateContent(h.content,h)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),_=!1),_}_validateStretch(c,h){if(!c)return!0;let _=0;for(const x of c){if(x[0]<_||x[1]<x[0]||h<x[1])return!1;_=x[1]}return!0}_validateContent(c,h){return!(c&&(c.length!==4||c[0]<0||h.data.width<c[0]||c[1]<0||h.data.height<c[1]||c[2]<0||h.data.width<c[2]||c[3]<0||h.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,h){h.version=this.images[c].version+1,this.images[c]=h,this.updatedImages[c]=!0}removeImage(c){const h=this.images[c];delete this.images[c],delete this.patterns[c],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,h){let _=!0;if(!this.isLoaded())for(const x of c)this.images[x]||(_=!1);this.isLoaded()||_?this._notify(c,h):this.requestors.push({ids:c,callback:h})}_notify(c,h){const _={};for(const x of c){this.images[x]||this.fire(new o.Event("styleimagemissing",{id:x}));const w=this.images[x];w?_[x]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:o.warnOnce(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,_)}getPixelSize(){const{width:c,height:h}=this.atlasImage;return{width:c,height:h}}getPattern(c){const h=this.patterns[c],_=this.getImage(c);if(!_)return null;if(h&&h.position.version===_.version)return h.position;if(h)h.position.version=_.version;else{const x={w:_.data.width+2,h:_.data.height+2,x:0,y:0},w=new o.ImagePosition(x,_);this.patterns[c]={bin:x,position:w}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const h=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(c,this.atlasImage,h.RGBA),this.atlasTexture&&this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const w in this.patterns)c.push(this.patterns[w].bin);const{w:h,h:_}=o.potpack(c),x=this.atlasImage;x.resize({width:h||1,height:_||1});for(const w in this.patterns){const{bin:P}=this.patterns[w],A=P.x+1,L=P.y+1,V=this.images[w].data,U=V.width,J=V.height;o.RGBAImage.copy(V,x,{x:0,y:0},{x:A,y:L},{width:U,height:J}),o.RGBAImage.copy(V,x,{x:0,y:J-1},{x:A,y:L-1},{width:U,height:1}),o.RGBAImage.copy(V,x,{x:0,y:0},{x:A,y:L+J},{width:U,height:1}),o.RGBAImage.copy(V,x,{x:U-1,y:0},{x:A-1,y:L},{width:1,height:J}),o.RGBAImage.copy(V,x,{x:0,y:0},{x:A+U,y:L},{width:1,height:J})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const h of c){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const _=this.images[h];Oe(_)&&this.updateImage(h,_)}}}const at=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(m,c){return function([h,_,x]){const w=o.degToRad(_+90),P=o.degToRad(x);return{x:h*Math.cos(w)*Math.sin(P),y:h*Math.sin(w)*Math.sin(P),z:h*Math.cos(P),azimuthal:_,polar:x}}(m.expression.evaluate(c))}interpolate(m,c,h){return{x:o.number(m.x,c.x,h),y:o.number(m.y,c.y,h),z:o.number(m.z,c.z,h),azimuthal:o.number(m.azimuthal,c.azimuthal,h),polar:o.number(m.polar,c.polar,h)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)});class qe extends o.Evented{constructor(c){super(),this._transitionable=new o.Transitionable(at),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,h={}){if(!this._validate(o.validateLight,c,h))for(const _ in c){const x=c[_];o.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),x):this._transitionable.setValue(_,x)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,h,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const ze=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)});let Be=class extends o.Evented{constructor(m,c){super(),this._transitionable=new o.Transitionable(ze),this.set(m),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(m){for(const c in m){const h=m[c];o.endsWith(c,"-transition")?this._transitionable.setTransition(c.slice(0,-11),h):this._transitionable.setValue(c,h)}}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}};function tt(m,c,h,_){const x=o.smoothstep(45,65,h),[w,P]=Ke(m,_),A=o.length(c);let L=1-Math.min(1,Math.exp((A-w)/(P-w)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*x*m.alpha}function Ke(m,c){const h=.5/Math.tan(.5*c);return[m.range[0]+h,m.range[1]+h]}const Le=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])});class Je extends o.Evented{constructor(c,h){super(),this._transitionable=new o.Transitionable(Le),this.set(c),this._transitioning=this._transitionable.untransitioned(),this._transform=h}get state(){const c=this._transform,h=c.projection.name==="globe",_=o.globeToMercatorTransition(c.zoom),x=this.properties.get("range"),w=[.5,3];return{range:h?[o.number(w[0],x[0],_),o.number(w[1],x[1],_)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,h={}){if(!this._validate(o.validateFog,c,h)){for(const _ of Object.keys(o.spec.fog))c&&c[_]===void 0&&(c[_]=o.spec.fog[_].default);for(const _ in c){const x=c[_];o.endsWith(_,"-transition")?this._transitionable.setTransition(_.slice(0,-11),x):this._transitionable.setValue(_,x)}}}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,c))*h.a}getOpacityAtLatLng(c,h){return this._transform.projection.supportsFog?function(_,x,w){const P=o.MercatorCoordinate.fromLngLat(x),A=w.elevation?w.elevation.getAtPointOrZero(P):0,L=[P.x,P.y,A];return o.transformMat4(L,L,w.mercatorFogMatrix),tt(_,L,w.pitch,w._fov)}(this.state,c,h):0}getFovAdjustedRange(c){return this._transform.projection.supportsFog?Ke(this.state,c):[0,1]}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,h,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class it{constructor(c,h){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const _=this.workerPool.acquire(this.id);for(let x=0;x<_.length;x++){const w=new it.Actor(_[x],h,this.id);w.name=`Worker ${x}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(c,h,_){o.asyncAll(this.actors,(x,w)=>{x.send(c,h,w)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}function kt(m,c,h){return c*(o.EXTENT/(m.tileSize*Math.pow(2,h-m.tileID.overscaledZ)))}it.Actor=o.Actor;class yt{constructor(c,h,_,x){this.screenBounds=c,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(c,h){let _,x;if(c instanceof o.Point||typeof c[0]=="number"){const w=o.Point.convert(c);_=[w],x=h.isPointAboveHorizon(w)}else{const w=o.Point.convert(c[0]),P=o.Point.convert(c[1]);_=[w,P],x=o.polygonizeBounds(w,P).every(A=>h.isPointAboveHorizon(A))}return new yt(_,h.getCameraPoint(),x,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(c){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const h=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],x=o.polygonizeBounds(h,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<_.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?x[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(x[3]=this.cameraPoint)),o.bufferConvexPolygon(x,c)}bufferedCameraGeometryGlobe(c){const h=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],x=o.polygonizeBounds(h,_,c),w=this.cameraPoint.clone();switch(3*((w.y>h.y)+(w.y>_.y))+((w.x>h.x)+(w.x>_.x))){case 0:x[0]=w,x[4]=w.clone();break;case 1:x.splice(1,0,w);break;case 2:x[1]=w;break;case 3:x.splice(4,0,w);break;case 5:x.splice(2,0,w);break;case 6:x[3]=w;break;case 7:x.splice(3,0,w);break;case 8:x[2]=w}return x}containsTile(c,h,_,x=0){const w=c.queryPadding/h._pixelsPerMercatorPixel+1,P=_?this._bufferedCameraMercator(w,h):this._bufferedScreenMercator(w,h);let A=c.tileID.wrap+(P.unwrapped?x:0);const L=P.polygon.map(ve=>o.getTilePoint(c.tileTransform,ve,A));if(!o.polygonIntersectsBox(L,0,0,o.EXTENT,o.EXTENT))return;A=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const V=this.screenGeometryMercator.polygon.map(ve=>o.getTileVec3(c.tileTransform,ve,A)),U=V.map(ve=>new o.Point(ve[0],ve[1])),J=h.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),le=o.getTileVec3(c.tileTransform,J,A),pe=V.map(ve=>{const Q=o.sub(ve,ve,le);return o.normalize(Q,Q),new o.Ray(le,Q)}),ge=kt(c,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:U,tilespaceRays:pe,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(me=o.getBounds(L),me.min.x=o.clamp(me.min.x,0,o.EXTENT),me.min.y=o.clamp(me.min.y,0,o.EXTENT),me.max.x=o.clamp(me.max.x,0,o.EXTENT),me.max.y=o.clamp(me.max.y,0,o.EXTENT),me),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:ge};var me}_bufferedScreenMercator(c,h){const _=Qt(c);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let x;return x=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(c),h):{polygon:this.bufferedScreenGeometry(c).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[_]=x,x}}_bufferedCameraMercator(c,h){const _=Qt(c);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let x;return x=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),h):{polygon:this.bufferedCameraGeometry(c).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[_]=x,x}}_projectAndResample(c,h){const _=function(w,P){const A=o.multiply([],P.pixelMatrix,P.globeMatrix),L=[0,-o.GLOBE_RADIUS,0,1],V=[0,o.GLOBE_RADIUS,0,1],U=[0,0,0,1];o.transformMat4$1(L,L,A),o.transformMat4$1(V,V,A),o.transformMat4$1(U,U,A);const J=new o.Point(L[0]/L[3],L[1]/L[3]),le=new o.Point(V[0]/V[3],V[1]/V[3]),pe=o.polygonContainsPoint(w,J)&&L[3]<U[3],ge=o.polygonContainsPoint(w,le)&&V[3]<U[3];if(!pe&&!ge)return null;const me=function(We,nt,et){for(let ht=1;ht<We.length;ht++){const Vt=jt(nt.pointCoordinate3D(We[ht-1]).x),st=jt(nt.pointCoordinate3D(We[ht]).x);if(et<0){if(Vt<st)return{idx:ht,t:-Vt/(st-1-Vt)}}else if(st<Vt)return{idx:ht,t:(1-Vt)/(st+1-Vt)}}return null}(w,P,pe?-1:1);if(!me)return null;const{idx:ve,t:Q}=me;let he=ve>1?wt(w.slice(0,ve),P):[],Ee=ve<w.length?wt(w.slice(ve),P):[];he=he.map(We=>new o.Point(jt(We.x),We.y)),Ee=Ee.map(We=>new o.Point(jt(We.x),We.y));const ke=[...he];ke.length===0&&ke.push(Ee[Ee.length-1]);const Ve=o.number(ke[ke.length-1].y,(Ee.length===0?he[0]:Ee[0]).y,Q);let He;return He=pe?[new o.Point(0,Ve),new o.Point(0,0),new o.Point(1,0),new o.Point(1,Ve)]:[new o.Point(1,Ve),new o.Point(1,1),new o.Point(0,1),new o.Point(0,Ve)],ke.push(...He),Ee.length===0?ke.push(he[0]):ke.push(...Ee),{polygon:ke.map(We=>new o.MercatorCoordinate(We.x,We.y)),unwrapped:!1}}(c,h);if(_)return _;const x=function(w,P){let A=!1,L=-1/0,V=0;for(let J=0;J<w.length-1;J++)w[J].x>L&&(L=w[J].x,V=J);for(let J=0;J<w.length-1;J++){const le=(V+J)%(w.length-1),pe=w[le],ge=w[le+1];Math.abs(pe.x-ge.x)>.5&&(pe.x<ge.x?(pe.x+=1,le===0&&(w[w.length-1].x+=1)):(ge.x+=1,le+1===w.length-1&&(w[0].x+=1)),A=!0)}const U=o.mercatorXfromLng(P.center.lng);return A&&U<Math.abs(U-1)&&w.forEach(J=>{J.x-=1}),{polygon:w,unwrapped:A}}(wt(c,h).map(w=>new o.Point(jt(w.x),w.y)),h);return{polygon:x.polygon.map(w=>new o.MercatorCoordinate(w.x,w.y)),unwrapped:x.unwrapped}}}function wt(m,c){return o.resample(m,h=>{const _=c.pointCoordinate3D(h);h.x=_.x,h.y=_.y},1/256)}function jt(m){return m<0?1+m%1:m%1}function Qt(m){return 100*m|0}function en(m,c,h,_,x){const w=function(P,A){if(P)return x(P);if(A){m.url&&A.tiles&&m.tiles&&delete m.tiles;const L=o.pick(o.extend(A,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);A.vector_layers&&(L.vectorLayers=A.vector_layers,L.vectorLayerIds=L.vectorLayers.map(V=>V.id)),L.tiles=c.canonicalizeTileset(L,m.url),x(null,L)}};return m.url?o.getJSON(c.transformRequest(c.normalizeSourceURL(m.url,null,h,_),o.ResourceType.Source),w):o.exported.frame(()=>w(null,m))}class on{constructor(c,h,_){this.bounds=o.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=h||0,this.maxzoom=_||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const h=Math.pow(2,c.z),_=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*h),x=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*h),w=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*h),P=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*h);return c.x>=_&&c.x<w&&c.y>=x&&c.y<P}}class Sn{constructor(c,h,_){this.context=c;const x=c.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Jt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yn{constructor(c,h,_,x){this.length=h.length,this.attributes=_,this.itemSize=h.bytesPerElement,this.dynamicDraw=x,this.context=c;const w=c.gl;this.buffer=w.createBuffer(),c.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,h){for(let _=0;_<this.attributes.length;_++){const x=h.attributes[this.attributes[_].name];x!==void 0&&c.enableVertexAttribArray(x)}}setVertexAttribPointers(c,h,_){for(let x=0;x<this.attributes.length;x++){const w=this.attributes[x],P=h.attributes[w.name];P!==void 0&&c.vertexAttribPointer(P,w.components,c[Jt[w.type]],!1,this.itemSize,w.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ft{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class nn extends Ft{getDefault(){return o.Color.transparent}set(c){const h=this.current;(c.r!==h.r||c.g!==h.g||c.b!==h.b||c.a!==h.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class bn extends Ft{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class qt extends Ft{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class It extends Ft{getDefault(){return[!0,!0,!0,!0]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Rn extends Ft{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class ln extends Ft{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Zn extends Ft{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const h=this.current;(c.func!==h.func||c.ref!==h.ref||c.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class tr extends Ft{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class Fn extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=c,this.dirty=!1}}class Yn extends Ft{getDefault(){return[0,1]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class Un extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=c,this.dirty=!1}}class qn extends Ft{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class wn extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.BLEND):h.disable(h.BLEND),this.current=c,this.dirty=!1}}class Qe extends Ft{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class Kt extends Ft{getDefault(){return o.Color.transparent}set(c){const h=this.current;(c.r!==h.r||c.g!==h.g||c.b!==h.b||c.a!==h.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class an extends Ft{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class Zt extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=c,this.dirty=!1}}class rn extends Ft{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class sn extends Ft{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}let vn,Dn=class extends Ft{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class Nn extends Ft{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class nr extends Ft{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Dr extends Ft{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class yr extends Ft{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class bi extends Ft{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class pi extends Ft{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Ce extends Ft{getDefault(){return null}set(c){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class oe extends Ft{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class ae extends Ft{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class ye extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class De extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Re extends Ft{constructor(c,h){super(c),this.context=c,this.parent=h}getDefault(){return null}}class Ge extends Re{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class Xe extends Re{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Ue extends Xe{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class je{constructor(c,h,_,x){this.context=c,this.width=h,this.height=_;const w=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new Ge(c,w),x&&(this.depthAttachment=new Xe(c,w))}destroy(){const c=this.context.gl,h=this.colorAttachment.get();if(h&&c.deleteTexture(h),this.depthAttachment){const _=this.depthAttachment.get();_&&c.deleteRenderbuffer(_)}c.deleteFramebuffer(this.framebuffer)}}class ut{constructor(c,h=!1){if(this.gl=c,this.isWebGL2=h,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),h){const _=c;this.extVertexArrayObject={createVertexArrayOES:_.createVertexArray.bind(c),deleteVertexArrayOES:_.deleteVertexArray.bind(c),bindVertexArrayOES:_.bindVertexArray.bind(c)}}this.clearColor=new nn(this),this.clearDepth=new bn(this),this.clearStencil=new qt(this),this.colorMask=new It(this),this.depthMask=new Rn(this),this.stencilMask=new ln(this),this.stencilFunc=new Zn(this),this.stencilOp=new tr(this),this.stencilTest=new Fn(this),this.depthRange=new Yn(this),this.depthTest=new Un(this),this.depthFunc=new qn(this),this.blend=new wn(this),this.blendFunc=new Qe(this),this.blendColor=new Kt(this),this.blendEquation=new an(this),this.cullFace=new Zt(this),this.cullFaceSide=new rn(this),this.frontFace=new sn(this),this.program=new Dn(this),this.activeTexture=new Nn(this),this.viewport=new nr(this),this.bindFramebuffer=new Dr(this),this.bindRenderbuffer=new yr(this),this.bindTexture=new bi(this),this.bindVertexBuffer=new pi(this),this.bindElementBuffer=new Ce(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new oe(this),this.pixelStoreUnpack=new ae(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new De(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=c.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=c.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=c.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),h||(this.extTextureHalfFloat=c.getExtension("OES_texture_half_float")),(h||this.extTextureHalfFloat&&c.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=h||c.getExtension("OES_standard_derivatives"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,h){return new Sn(this,c,h)}createVertexBuffer(c,h,_){return new yn(this,c,h,_)}createRenderbuffer(c,h,_){const x=this.gl,w=x.createRenderbuffer();return this.bindRenderbuffer.set(w),x.renderbufferStorage(x.RENDERBUFFER,c,h,_),this.bindRenderbuffer.set(null),w}createFramebuffer(c,h,_){return new je(this,c,h,_)}clear({color:c,depth:h,stencil:_}){const x=this.gl;let w=0;c&&(w|=x.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(w|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),_!==void 0&&(w|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),x.clear(w)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){v(c.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class At extends o.Evented{constructor(c,h,_,x){if(super(),this.id=c,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(h,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=en(this._options,this.map._requestManager,h,_,(x,w)=>{this._tileJSONRequest=null,this._loaded=!0,x?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new o.ErrorEvent(x))):w&&(o.extend(this,w),w.bounds&&(this.tileBounds=new on(w.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(x)})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(c,h){const _=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(_,o.ResourceType.Tile),data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:c.isSymbolTile};if(x.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired")c.state==="loading"?c.reloadCallback=h:c.request=c.actor.send("reloadTile",x,w.bind(this));else if(c.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)c.request=c.actor.send("loadTile",x,w.bind(this),void 0,!0);else{const P=o.loadVectorTile.call({deduped:this._deduped},x,(A,L)=>{A||!L?w.call(this,A):(x.data={cacheControl:L.cacheControl,expires:L.expires,rawData:L.rawData.slice(0)},c.actor&&c.actor.send("loadTile",x,w.bind(this),void 0,!0))},!0);c.request={cancel:P}}function w(P,A){return delete c.request,c.aborted?h(null):P&&P.status!==404?h(P):(A&&A.resourceTiming&&(c.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&c.setExpiryData(A),c.loadVectorData(A,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id})}unloadTile(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Tt extends o.Evented{constructor(c,h,_,x){super(),this.id=c,this.dispatcher=_,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},h),o.extend(this,o.pick(h,["url","scheme","tileSize"]))}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=en(this._options,this.map._requestManager,null,null,(h,_)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new o.ErrorEvent(h)):_&&(o.extend(this,_),_.bounds&&(this.tileBounds=new on(_.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(_.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(h)})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,h){const _=o.exported.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);c.request=o.getImage(this.map._requestManager.transformRequest(x,o.ResourceType.Tile),(w,P,A,L)=>(delete c.request,c.aborted?(c.state="unloaded",h(null)):w?(c.state="errored",h(w)):P?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:A,expires:L}),c.setTexture(P,this.map.painter),c.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void h(null)):h(null)))}static loadTileData(c,h,_){c.setTexture(h,_)}static unloadTileData(c,h){c.texture&&h.saveTileTexture(c.texture)}abortTile(c,h){c.request&&(c.request.cancel(),delete c.request),h()}unloadTile(c,h){c.texture&&this.map.painter.saveTileTexture(c.texture),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function gn(m,c,h,_,x,w,P,A){const L=[m,h,x,c,_,w,1,1,1],V=[P,A,1],U=o.adjoint([],L),[J,le,pe]=o.transformMat3(V,V,o.transpose(U,U));return o.multiply$1(L,[J,0,0,0,le,0,0,0,pe],L)}class On extends o.Evented{constructor(c,h,_,x){super(),this.id=c,this.dispatcher=_,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=h,this._dirty=!1}load(c,h){this._loaded=h||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(_,x)=>{if(this._imageRequest=null,this._loaded=!0,_)this.fire(new o.ErrorEvent(_));else if(x){const{HTMLImageElement:w}=o.window;this.image=x instanceof w?o.exported.getImageData(x):x,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,c&&(this.coordinates=c),this._finishLoading()}})}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this._imageRequest&&c.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=c.url,this.load(c.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(c){this.coordinates=c,this._boundsArray=void 0;const h=c.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(_){let x=1/0,w=1/0,P=-1/0,A=-1/0;for(const J of _)x=Math.min(x,J.x),w=Math.min(w,J.y),P=Math.max(P,J.x),A=Math.max(A,J.y);const L=Math.max(P-x,A-w),V=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),U=Math.pow(2,V);return new o.CanonicalTileID(V,Math.floor((x+P)/2*U),Math.floor((w+A)/2*U))}(h),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(c){for(const L in this.tiles){const V=this.tiles[L];V.state!=="loaded"&&(V.state="loaded",V.texture=this.texture)}if(this._boundsArray)return;const h=o.tileTransform(this.tileID,this.map.transform.projection),[_,x,w,P]=this.coordinates.map(L=>{const V=h.projection.project(L[0],L[1]);return o.getTilePoint(h,V)._round()});this.perspectiveTransform=function(L,V,U,J,le,pe,ge,me,ve,Q){const he=gn(0,0,L,0,0,V,L,V),Ee=gn(U,J,le,pe,ge,me,ve,Q);return o.multiply$1(Ee,o.adjoint(he,he),Ee),[Ee[6]/Ee[8]*L/o.EXTENT,Ee[7]/Ee[8]*V/o.EXTENT]}(this.width,this.height,_.x,_.y,x.x,x.y,P.x,P.y,w.x,w.y);const A=this._boundsArray=new o.StructArrayLayout4i8;A.emplaceBack(_.x,_.y,0,0),A.emplaceBack(x.x,x.y,o.EXTENT,0),A.emplaceBack(P.x,P.y,0,o.EXTENT),A.emplaceBack(w.x,w.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=c.createVertexBuffer(A,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,h=c.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(c,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(c)}loadTile(c,h){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},h(null)):(c.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const An={vector:At,raster:Tt,"raster-dem":class extends Tt{constructor(m,c,h,_){super(m,c,h,_),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(m,c){const h=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(x,w){x&&(m.state="errored",c(x)),w&&(m.dem=w,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",c(null))}m.request=o.getImage(this.map._requestManager.transformRequest(h,o.ResourceType.Tile),function(x,w,P,A){if(delete m.request,m.aborted)m.state="unloaded",c(null);else if(x)m.state="errored",c(x);else if(w){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:P,expires:A});const L=o.window.ImageBitmap&&w instanceof o.window.ImageBitmap&&(vn==null&&(vn=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),vn),V=1-(w.width-o.prevPowerOfTwo(w.width))/2;V<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const U=L?w:o.exported.getImageData(w,V),J={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:U,encoding:this.encoding,padding:V};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",J,_.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(m){const c=m.canonical,h=Math.pow(2,c.z),_=(c.x-1+h)%h,x=c.x===0?m.wrap-1:m.wrap,w=(c.x+1+h)%h,P=c.x+1===h?m.wrap+1:m.wrap,A={};return A[new o.OverscaledTileID(m.overscaledZ,x,c.z,_,c.y).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,P,c.z,w,c.y).key]={backfilled:!1},c.y>0&&(A[new o.OverscaledTileID(m.overscaledZ,x,c.z,_,c.y-1).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,m.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,P,c.z,w,c.y-1).key]={backfilled:!1}),c.y+1<h&&(A[new o.OverscaledTileID(m.overscaledZ,x,c.z,_,c.y+1).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,m.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,P,c.z,w,c.y+1).key]={backfilled:!1}),A}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends o.Evented{constructor(m,c,h,_){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(_),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const x=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*x,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*x,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius!==void 0?c.clusterRadius:50)*x,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},c),this}getClusterChildren(m,c){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},c),this}getClusterLeaves(m,c,h,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:c,offset:h},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=o.extend({},this.workerOptions),c=this._data;typeof c=="string"?(m.request=this.map._requestManager.transformRequest(o.exported.resolveURL(c),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(h,_)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new o.ErrorEvent(h));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(x.resourceTiming=_.resourceTiming[this.id]),this.fire(new o.Event("data",x)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,c){const h=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(h,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(_,x)=>(delete m.request,m.unloadVectorData(),m.aborted?c(null):_?c(_):(m.loadVectorData(x,this.map.painter,h==="reloadTile"),c(null))),void 0,h==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends On{constructor(m,c,h,_){super(m,c,h,_),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const c of m.urls)this.urls.push(this.map._requestManager.transformRequest(c,o.ResourceType.Source).url);o.getVideo(this.urls,(c,h)=>{this._loaded=!0,c?this.fire(new o.ErrorEvent(c)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const c=this.video.seekable;m<c.start(0)||m>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,c=m.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(m,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:On,canvas:class extends On{constructor(m,c,h,_){super(m,c,h,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(w=>typeof w!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends o.Evented{constructor(m,c,h,_){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=c,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new on(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.clearTiles=this._clearTiles.bind(this),c.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:c,y:h,z:_}=m.canonical;return this._implementation.hasTile({x:c,y:h,z:_})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,c){const{x:h,y:_,z:x}=m.tileID.canonical,w=new o.window.AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:h,y:_,z:x},{signal:w.signal})).then(function(P){return delete m.request,m.aborted?(m.state="unloaded",c(null)):P===void 0?(m.state="errored",c(null)):P===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",c(null)):function(A){return A instanceof o.window.ImageData||A instanceof o.window.HTMLCanvasElement||A instanceof o.window.ImageBitmap||A instanceof o.window.HTMLImageElement}(P)?(this.loadTileData(m,P),m.state="loaded",void c(null)):(m.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(P=>{P.code!==20&&(m.state="errored",c(P))}),m.request.cancel=()=>w.abort()}loadTileData(m,c){Tt.loadTileData(m,c,this._map.painter)}unloadTileData(m){Tt.unloadTileData(m,this._map.painter)}unloadTile(m,c){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:h,y:_,z:x}=m.tileID.canonical;this._implementation.unloadTile({x:h,y:_,z:x})}c()}abortTile(m,c){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ln=function(m,c,h,_){const x=new An[c.type](m,c,h,_);if(x.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${x.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],x),x};function Xn(m,c){const h=o.identity([]);return o.scale(h,h,[.5*m.width,.5*-m.height,1]),o.translate(h,h,[1,-1,0]),o.multiply(h,h,m.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(h)}function wr(m,c,h,_,x,w,P,A=!1){const L=m.tilesIn(_,P,A);L.sort(Or);const V=[];for(const J of L)V.push({wrappedTileID:J.tile.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(c,h,m._state,J,x,w,Xn(m.transform,J.tile.tileID),A)});const U=function(J){const le={},pe={};for(const ge of J){const me=ge.queryResults,ve=ge.wrappedTileID,Q=pe[ve]=pe[ve]||{};for(const he in me){const Ee=me[he],ke=Q[he]=Q[he]||{},Ve=le[he]=le[he]||[];for(const He of Ee)ke[He.featureIndex]||(ke[He.featureIndex]=!0,Ve.push(He))}}return le}(V);for(const J in U)U[J].forEach(le=>{const pe=le.feature,ge=pe.layer;ge&&ge.type!=="background"&&ge.type!=="sky"&&(pe.source=ge.source,ge["source-layer"]&&(pe.sourceLayer=ge["source-layer"]),pe.state=pe.id!==void 0?m.getFeatureState(ge["source-layer"],pe.id):{})});return U}function Er(m,c){const h=m.getRenderableIds().map(w=>m.getTileByID(w)),_=[],x={};for(let w=0;w<h.length;w++){const P=h[w],A=P.tileID.canonical.key;x[A]||(x[A]=!0,P.querySourceFeatures(_,c))}return _}function Or(m,c){const h=m.tileID,_=c.tileID;return h.overscaledZ-_.overscaledZ||h.canonical.y-_.canonical.y||h.wrap-_.wrap||h.canonical.x-_.canonical.x}function Ze(){return pd.workerClass!=null?new pd.workerClass:new o.window.Worker(pd.workerUrl)}const Se="mapboxgl_preloaded_worker_pool";class ct{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<ct.workerCount;)this.workers.push(new Ze);return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Se]}numActive(){return Object.keys(this.active).length}}let Rt;function un(){return Rt||(Rt=new ct),Rt}function fr(m,c){const h={};for(const _ in m)_!=="ref"&&(h[_]=m[_]);return o.refProperties.forEach(_=>{_ in c&&(h[_]=c[_])}),h}function Ar(m){m=m.slice();const c=Object.create(null);for(let h=0;h<m.length;h++)c[m[h].id]=m[h];for(let h=0;h<m.length;h++)"ref"in m[h]&&(m[h]=fr(m[h],c[m[h].ref]));return m}ct.workerCount=2;const Vn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Do(m,c,h){h.push({command:Vn.addSource,args:[m,c[m]]})}function go(m,c,h){c.push({command:Vn.removeSource,args:[m]}),h[m]=!0}function _o(m,c,h,_){go(m,h,_),Do(m,c,h)}function ra(m,c,h){let _;for(_ in m[h])if(m[h].hasOwnProperty(_)&&_!=="data"&&!v(m[h][_],c[h][_]))return!1;for(_ in c[h])if(c[h].hasOwnProperty(_)&&_!=="data"&&!v(m[h][_],c[h][_]))return!1;return!0}function $i(m,c,h,_,x,w){let P;for(P in c=c||{},m=m||{})m.hasOwnProperty(P)&&(v(m[P],c[P])||h.push({command:w,args:[_,P,c[P],x]}));for(P in c)c.hasOwnProperty(P)&&!m.hasOwnProperty(P)&&(v(m[P],c[P])||h.push({command:w,args:[_,P,c[P],x]}))}function Ui(m){return m.id}function yo(m,c){return m[c.id]=c,m}class Vi{constructor(c,h){this.reset(c,h)}reset(c,h){this.points=c||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=o.clamp(c,0,1);let h=1,_=this._distances[h];const x=c*this.paddedLength+this.padding;for(;_<x&&h<this._distances.length;)_=this._distances[++h];const w=h-1,P=this._distances[w],A=_-P,L=A>0?(x-P)/A:0;return this.points[w].mult(1-L).add(this.points[h].mult(L))}}class Ba{constructor(c,h,_){const x=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(c/_),this.yCellCount=Math.ceil(h/_);for(let P=0;P<this.xCellCount*this.yCellCount;P++)x.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=h,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,h,_,x,w){this._forEachCell(h,_,x,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(h),this.bboxes.push(_),this.bboxes.push(x),this.bboxes.push(w)}insertCircle(c,h,_,x){this._forEachCell(h-x,_-x,h+x,_+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(h),this.circles.push(_),this.circles.push(x)}_insertBoxCell(c,h,_,x,w,P){this.boxCells[w].push(P)}_insertCircleCell(c,h,_,x,w,P){this.circleCells[w].push(P)}_query(c,h,_,x,w,P){if(_<0||c>this.width||x<0||h>this.height)return!w&&[];const A=[];if(c<=0&&h<=0&&this.width<=_&&this.height<=x){if(w)return!0;for(let L=0;L<this.boxKeys.length;L++)A.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const V=this.circles[3*L],U=this.circles[3*L+1],J=this.circles[3*L+2];A.push({key:this.circleKeys[L],x1:V-J,y1:U-J,x2:V+J,y2:U+J})}return P?A.filter(P):A}return this._forEachCell(c,h,_,x,this._queryCell,A,{hitTest:w,seenUids:{box:{},circle:{}}},P),w?A.length>0:A}_queryCircle(c,h,_,x,w){const P=c-_,A=c+_,L=h-_,V=h+_;if(A<0||P>this.width||V<0||L>this.height)return!x&&[];const U=[];return this._forEachCell(P,L,A,V,this._queryCellCircle,U,{hitTest:x,circle:{x:c,y:h,radius:_},seenUids:{box:{},circle:{}}},w),x?U.length>0:U}query(c,h,_,x,w){return this._query(c,h,_,x,!1,w)}hitTest(c,h,_,x,w){return this._query(c,h,_,x,!0,w)}hitTestCircle(c,h,_,x){return this._queryCircle(c,h,_,!0,x)}_queryCell(c,h,_,x,w,P,A,L){const V=A.seenUids,U=this.boxCells[w];if(U!==null){const le=this.bboxes;for(const pe of U)if(!V.box[pe]){V.box[pe]=!0;const ge=4*pe;if(c<=le[ge+2]&&h<=le[ge+3]&&_>=le[ge+0]&&x>=le[ge+1]&&(!L||L(this.boxKeys[pe]))){if(A.hitTest)return P.push(!0),!0;P.push({key:this.boxKeys[pe],x1:le[ge],y1:le[ge+1],x2:le[ge+2],y2:le[ge+3]})}}}const J=this.circleCells[w];if(J!==null){const le=this.circles;for(const pe of J)if(!V.circle[pe]){V.circle[pe]=!0;const ge=3*pe;if(this._circleAndRectCollide(le[ge],le[ge+1],le[ge+2],c,h,_,x)&&(!L||L(this.circleKeys[pe]))){if(A.hitTest)return P.push(!0),!0;{const me=le[ge],ve=le[ge+1],Q=le[ge+2];P.push({key:this.circleKeys[pe],x1:me-Q,y1:ve-Q,x2:me+Q,y2:ve+Q})}}}}}_queryCellCircle(c,h,_,x,w,P,A,L){const V=A.circle,U=A.seenUids,J=this.boxCells[w];if(J!==null){const pe=this.bboxes;for(const ge of J)if(!U.box[ge]){U.box[ge]=!0;const me=4*ge;if(this._circleAndRectCollide(V.x,V.y,V.radius,pe[me+0],pe[me+1],pe[me+2],pe[me+3])&&(!L||L(this.boxKeys[ge])))return P.push(!0),!0}}const le=this.circleCells[w];if(le!==null){const pe=this.circles;for(const ge of le)if(!U.circle[ge]){U.circle[ge]=!0;const me=3*ge;if(this._circlesCollide(pe[me],pe[me+1],pe[me+2],V.x,V.y,V.radius)&&(!L||L(this.circleKeys[ge])))return P.push(!0),!0}}}_forEachCell(c,h,_,x,w,P,A,L){const V=this._convertToXCellCoord(c),U=this._convertToYCellCoord(h),J=this._convertToXCellCoord(_),le=this._convertToYCellCoord(x);for(let pe=V;pe<=J;pe++)for(let ge=U;ge<=le;ge++)if(w.call(this,c,h,_,x,this.xCellCount*ge+pe,P,A,L))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,h,_,x,w,P){const A=x-c,L=w-h,V=_+P;return V*V>A*A+L*L}_circleAndRectCollide(c,h,_,x,w,P,A){const L=(P-x)/2,V=Math.abs(c-(x+L));if(V>L+_)return!1;const U=(A-w)/2,J=Math.abs(h-(w+U));if(J>U+_)return!1;if(V<=L||J<=U)return!0;const le=V-L,pe=J-U;return le*le+pe*pe<=_*_}}const ja={unknown:0,flipRequired:1,flipNotRequired:2},Al=Math.tan(85*Math.PI/180);function vt(m,c,h,_,x,w,P){const A=o.create();if(h)if(w.name==="globe"){const L=o.calculateGlobeLabelMatrix(x,c);o.multiply(A,A,L)}else{const L=fe([],P);A[0]=L[0],A[1]=L[1],A[4]=L[2],A[5]=L[3],_||o.rotateZ(A,A,x.angle)}else o.multiply(A,x.labelPlaneMatrix,m);return A}function fa(m,c,h,_,x,w,P){const A=vt(m,c,h,_,x,w,P);return w.name==="globe"&&h||(A[2]=A[6]=A[10]=A[14]=0),A}function ti(m,c,h,_,x,w,P){if(h){if(w.name==="globe"){const A=vt(m,c,h,_,x,w,P);return o.invert(A,A),o.multiply(A,m,A),A}{const A=o.clone(m),L=o.identity([]);return L[0]=P[0],L[1]=P[1],L[4]=P[2],L[5]=P[3],o.multiply(A,A,L),_||o.rotateZ(A,A,-x.angle),A}}return x.glCoordMatrix}function Gi(m,c,h,_){const x=[m,c,h,1];h?o.transformMat4$1(x,x,_):gr(x,x,_);const w=x[3];return x[0]/=w,x[1]/=w,x[2]/=w,x}function Oo(m,c){return Math.min(.5+m/c*.5,1.5)}function Ro(m,c){const h=m[0]/m[3],_=m[1]/m[3];return h>=-c[0]&&h<=c[0]&&_>=-c[1]&&_<=c[1]}function hc(m,c,h,_,x,w,P,A,L,V){const U=h.transform,J=_?m.textSizeData:m.iconSizeData,le=o.evaluateSizeForZoom(J,h.transform.zoom),pe=U.projection.name==="globe",ge=[256/h.width*2+1,256/h.height*2+1],me=_?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;me.clear();let ve=null;pe&&(ve=_?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const Q=m.lineVertexArray,he=_?m.text.placedSymbolArray:m.icon.placedSymbolArray,Ee=h.transform.width/h.transform.height;let ke,Ve=!1;for(let He=0;He<he.length;He++){const We=he.get(He),{numGlyphs:nt,writingMode:et}=We;if(et!==o.WritingMode.vertical||Ve||ke===o.WritingMode.horizontal||(Ve=!0),ke=et,(We.hidden||et===o.WritingMode.vertical)&&!Ve){$a(nt,me);continue}Ve=!1;const ht=new o.Point(We.tileAnchorX,We.tileAnchorY);let{x:Vt,y:st,z:Pt}=U.projection.projectTilePoint(ht.x,ht.y,V.canonical);if(L){const[er,Cn,Gn]=L(ht);Vt+=er,st+=Cn,Pt+=Gn}const mt=[Vt,st,Pt,1];if(o.transformMat4$1(mt,mt,c),!Ro(mt,ge)){$a(nt,me);continue}const $t=Oo(h.transform.cameraToCenterDistance,mt[3]),dt=o.evaluateSizeForFeature(J,le,We),Ct=P?dt/$t:dt*$t,Ht=Gi(Vt,st,Pt,x);if(Ht[3]<=0){$a(nt,me);continue}let zt={};const Gt=P?null:L,zn=dn(We,Ct,!1,A,c,x,w,m.glyphOffsetArray,Q,me,ve,Ht,ht,zt,Ee,Gt,U.projection,V,P);Ve=zn.useVertical,Gt&&zn.needsFlipping&&(zt={}),(zn.notEnoughRoom||Ve||zn.needsFlipping&&dn(We,Ct,!0,A,c,x,w,m.glyphOffsetArray,Q,me,ve,Ht,ht,zt,Ee,Gt,U.projection,V,P).notEnoughRoom)&&$a(nt,me)}_?(m.text.dynamicLayoutVertexBuffer.updateData(me),ve&&m.text.globeExtVertexBuffer.updateData(ve)):(m.icon.dynamicLayoutVertexBuffer.updateData(me),ve&&m.icon.globeExtVertexBuffer.updateData(ve))}function Up(m,c,h,_,x,w,P,A,L,V,U,J,le,pe,ge,me){const{lineStartIndex:ve,glyphStartIndex:Q,segment:he}=A,Ee=Q+A.numGlyphs,ke=ve+A.lineLength,Ve=c.getoffsetX(Q),He=c.getoffsetX(Ee-1),We=Vo(m*Ve,h,_,x,w,P,he,ve,ke,L,V,U,J,le,!0,pe,ge,me);if(!We)return null;const nt=Vo(m*He,h,_,x,w,P,he,ve,ke,L,V,U,J,le,!0,pe,ge,me);return nt?{first:We,last:nt}:null}function pc(m,c,h,_){return m===o.WritingMode.horizontal&&Math.abs(_)>Math.abs(h)?{useVertical:!0}:m===o.WritingMode.vertical?_>0?{needsFlipping:!0}:null:c!==ja.unknown&&function(x,w){return x===0||Math.abs(w/x)>Al}(h,_)?c===ja.flipRequired?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function dn(m,c,h,_,x,w,P,A,L,V,U,J,le,pe,ge,me,ve,Q,he){const Ee=c/24,ke=m.lineOffsetX*Ee,Ve=m.lineOffsetY*Ee,{lineStartIndex:He,glyphStartIndex:We,numGlyphs:nt,segment:et,writingMode:ht,flipState:Vt}=m,st=He+m.lineLength,Pt=mt=>{if(U){const[Ht,zt,Gt]=mt.up,zn=V.length;o.updateGlobeVertexNormal(U,zn+0,Ht,zt,Gt),o.updateGlobeVertexNormal(U,zn+1,Ht,zt,Gt),o.updateGlobeVertexNormal(U,zn+2,Ht,zt,Gt),o.updateGlobeVertexNormal(U,zn+3,Ht,zt,Gt)}const[$t,dt,Ct]=mt.point;o.addDynamicAttributes(V,$t,dt,Ct,mt.angle)};if(nt>1){const mt=Up(Ee,A,ke,Ve,h,J,le,m,L,w,pe,me,!1,ve,Q,he);if(!mt)return{notEnoughRoom:!0};if(_&&!h){let[$t,dt,Ct]=mt.first.point,[Ht,zt,Gt]=mt.last.point;[$t,dt]=Gi($t,dt,Ct,P),[Ht,zt]=Gi(Ht,zt,Gt,P);const zn=pc(ht,Vt,(Ht-$t)*ge,zt-dt);if(m.flipState=zn&&zn.needsFlipping?ja.flipRequired:ja.flipNotRequired,zn)return zn}Pt(mt.first);for(let $t=We+1;$t<We+nt-1;$t++){const dt=Vo(Ee*A.getoffsetX($t),ke,Ve,h,J,le,et,He,st,L,w,pe,me,!1,!1,ve,Q,he);if(!dt)return V.length-=4*($t-We),{notEnoughRoom:!0};Pt(dt)}Pt(mt.last)}else{if(_&&!h){const $t=Gi(le.x,le.y,0,x),dt=He+et+1,Ct=new o.Point(L.getx(dt),L.gety(dt)),Ht=Gi(Ct.x,Ct.y,0,x),zt=Ht[3]>0?Ht:dr(le,Ct,$t,1,x,void 0,ve,Q.canonical),Gt=pc(ht,Vt,(zt[0]-$t[0])*ge,zt[1]-$t[1]);if(m.flipState=Gt&&Gt.needsFlipping?ja.flipRequired:ja.flipNotRequired,Gt)return Gt}const mt=Vo(Ee*A.getoffsetX(We),ke,Ve,h,J,le,et,He,st,L,w,pe,me,!1,!1,ve,Q,he);if(!mt)return{notEnoughRoom:!0};Pt(mt)}return{}}function vr(m,c,h,_,x){const{x:w,y:P,z:A}=_.projectTilePoint(m.x,m.y,c);if(!x)return Gi(w,P,A,h);const[L,V,U]=x(m);return Gi(w+L,P+V,A+U,h)}function dr(m,c,h,_,x,w,P,A){const L=vr(m.sub(c)._unit()._add(m),A,x,P,w);return o.sub(L,h,L),o.normalize(L,L),o.scaleAndAdd(L,h,L,_)}function Vo(m,c,h,_,x,w,P,A,L,V,U,J,le,pe,ge,me,ve,Q){const he=_?m-c:m+c;let Ee=he>0?1:-1,ke=0;_&&(Ee*=-1,ke=Math.PI),Ee<0&&(ke+=Math.PI);let Ve=A+P+(Ee>0?0:1)|0,He=x,We=x,nt=0,et=0;const ht=Math.abs(he),Vt=[],st=[];let Pt=w,mt=Pt;const $t=()=>dr(mt,Pt,We,ht-nt+1,U,le,me,ve.canonical);for(;nt+et<=ht;){if(Ve+=Ee,Ve<A||Ve>=L)return null;if(We=He,mt=Pt,Vt.push(We),pe&&st.push(mt),Pt=new o.Point(V.getx(Ve),V.gety(Ve)),He=J[Ve],!He){const Gn=vr(Pt,ve.canonical,U,me,le);He=Gn[3]>0?J[Ve]=Gn:$t()}nt+=et,et=o.distance(We,He)}ge&&le&&(J[Ve]&&(He=$t(),et=o.distance(We,He)),J[Ve]=He);const dt=(ht-nt)/et,Ct=Pt.sub(mt)._mult(dt)._add(mt),Ht=o.sub([],He,We),zt=o.scaleAndAdd([],We,Ht,dt);let Gt=[0,0,1],zn=Ht[0],er=Ht[1];if(Q&&(Gt=me.upVector(ve.canonical,Ct.x,Ct.y),Gt[0]!==0||Gt[1]!==0||Gt[2]!==1)){const Gn=[Gt[2],0,-Gt[0]],Tr=o.cross([],Gt,Gn);o.normalize(Gn,Gn),o.normalize(Tr,Tr),zn=o.dot(Ht,Gn),er=o.dot(Ht,Tr)}if(h){const Gn=o.cross([],Gt,Ht);o.normalize(Gn,Gn),o.scaleAndAdd(zt,zt,Gn,h*Ee)}const Cn=ke+Math.atan2(er,zn);return Vt.push(zt),pe&&st.push(Ct),{point:zt,angle:Cn,path:Vt,tilePath:st,up:Gt}}function $a(m,c){const h=c.length,_=h+4*m;c.resize(_),c.float32.fill(-1/0,4*h,4*_)}function gr(m,c,h){const _=c[0],x=c[1];return m[0]=h[0]*_+h[4]*x+h[12],m[1]=h[1]*_+h[5]*x+h[13],m[3]=h[3]*_+h[7]*x+h[15],m}const wi=100;class fc{constructor(c,h,_=new Ba(c.width+200,c.height+200,25),x=new Ba(c.width+200,c.height+200,25)){this.transform=c,this.grid=_,this.ignoredGrid=x,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+wi,this.screenBottomBoundary=c.height+wi,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=h}placeCollisionBox(c,h,_,x,w,P,A,L){let V=_.projectedAnchorX,U=_.projectedAnchorY,J=_.projectedAnchorZ;const le=_.elevation,pe=_.tileID,ge=c.getProjection();if(le&&pe){const[He,We,nt]=ge.upVector(pe.canonical,_.tileAnchorX,_.tileAnchorY),et=ge.upVectorScale(pe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;V+=He*le*et,U+=We*le*et,J+=nt*le*et}const me=this.projectAndGetPerspectiveRatio(A,V,U,J,_.tileID,ge.name==="globe"||!!le||this.transform.pitch>0,ge),ve=P*me.perspectiveRatio,Q=(_.x1*h+x.x-_.padding)*ve+me.point.x,he=(_.y1*h+x.y-_.padding)*ve+me.point.y,Ee=(_.x2*h+x.x+_.padding)*ve+me.point.x,ke=(_.y2*h+x.y+_.padding)*ve+me.point.y,Ve=me.perspectiveRatio<=.55||me.occluded;return!this.isInsideGrid(Q,he,Ee,ke)||!w&&this.grid.hitTest(Q,he,Ee,ke,L)||Ve?{box:[],offscreen:!1,occluded:me.occluded}:{box:[Q,he,Ee,ke],offscreen:this.isOffscreen(Q,he,Ee,ke),occluded:!1}}placeCollisionCircles(c,h,_,x,w,P,A,L,V,U,J,le,pe,ge,me){const ve=[],Q=this.transform.elevation,he=c.getProjection(),Ee=Q?Q.getAtTileOffsetFunc(me,this.transform.center.lat,this.transform.worldSize,he):null,ke=new o.Point(_.tileAnchorX,_.tileAnchorY);let{x:Ve,y:He,z:We}=he.projectTilePoint(ke.x,ke.y,me.canonical);if(Ee){const[Ct,Ht,zt]=Ee(ke);Ve+=Ct,He+=Ht,We+=zt}const nt=he.name==="globe",et=this.projectAndGetPerspectiveRatio(A,Ve,He,We,me,nt||!!Q||this.transform.pitch>0,he),{perspectiveRatio:ht}=et,Vt=(J?P/ht:P*ht)/o.ONE_EM,st=Gi(Ve,He,We,L),Pt=et.signedDistanceFromCamera>0?Up(Vt,w,_.lineOffsetX*Vt,_.lineOffsetY*Vt,!1,st,ke,_,x,L,{},Q&&!J?Ee:null,J&&!!Q,he,me,J):null;let mt=!1,$t=!1,dt=!0;if(Pt&&!et.occluded){const Ct=.5*pe*ht+ge,Ht=new o.Point(-100,-100),zt=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),Gt=new Vi,{first:zn,last:er}=Pt,Cn=zn.path.length;let Gn=[];for(let Mn=Cn-1;Mn>=1;Mn--)Gn.push(zn.path[Mn]);for(let Mn=1;Mn<er.path.length;Mn++)Gn.push(er.path[Mn]);const Tr=2.5*Ct;V&&(Gn=Gn.map(([Mn,jr,Hr],qr)=>(Ee&&!nt&&(Hr=Ee(qr<Cn-1?zn.tilePath[Cn-1-qr]:er.tilePath[qr-Cn+2])[2]),Gi(Mn,jr,Hr,V))),Gn.some(Mn=>Mn[3]<=0)&&(Gn=[]));let xr=[];if(Gn.length>0){let Mn=1/0,jr=-1/0,Hr=1/0,qr=-1/0;for(const Gr of Gn)Mn=Math.min(Mn,Gr[0]),Hr=Math.min(Hr,Gr[1]),jr=Math.max(jr,Gr[0]),qr=Math.max(qr,Gr[1]);jr>=Ht.x&&Mn<=zt.x&&qr>=Ht.y&&Hr<=zt.y&&(xr=[Gn.map(Gr=>new o.Point(Gr[0],Gr[1]))],(Mn<Ht.x||jr>zt.x||Hr<Ht.y||qr>zt.y)&&(xr=o.clipLine(xr,Ht.x,Ht.y,zt.x,zt.y)))}for(const Mn of xr){Gt.reset(Mn,.25*Ct);let jr=0;jr=Gt.length<=.5*Ct?1:Math.ceil(Gt.paddedLength/Tr)+1;for(let Hr=0;Hr<jr;Hr++){const qr=Hr/Math.max(jr-1,1),Gr=Gt.lerp(qr),Ko=Gr.x+wi,To=Gr.y+wi;ve.push(Ko,To,Ct,0);const is=Ko-Ct,el=To-Ct,yi=Ko+Ct,Zr=To+Ct;if(dt=dt&&this.isOffscreen(is,el,yi,Zr),$t=$t||this.isInsideGrid(is,el,yi,Zr),!h&&this.grid.hitTestCircle(Ko,To,Ct,le)&&(mt=!0,!U))return{circles:[],offscreen:!1,collisionDetected:mt,occluded:!1}}}}return{circles:!U&&mt||!$t?[]:ve,offscreen:dt,collisionDetected:mt,occluded:et.occluded}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let _=1/0,x=1/0,w=-1/0,P=-1/0;for(const U of c){const J=new o.Point(U.x+wi,U.y+wi);_=Math.min(_,J.x),x=Math.min(x,J.y),w=Math.max(w,J.x),P=Math.max(P,J.y),h.push(J)}const A=this.grid.query(_,x,w,P).concat(this.ignoredGrid.query(_,x,w,P)),L={},V={};for(const U of A){const J=U.key;if(L[J.bucketInstanceId]===void 0&&(L[J.bucketInstanceId]={}),L[J.bucketInstanceId][J.featureIndex])continue;const le=[new o.Point(U.x1,U.y1),new o.Point(U.x2,U.y1),new o.Point(U.x2,U.y2),new o.Point(U.x1,U.y2)];o.polygonIntersectsPolygon(h,le)&&(L[J.bucketInstanceId][J.featureIndex]=!0,V[J.bucketInstanceId]===void 0&&(V[J.bucketInstanceId]=[]),V[J.bucketInstanceId].push(J.featureIndex))}return V}insertCollisionBox(c,h,_,x,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:x,collisionGroupID:w},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,h,_,x,w){const P=h?this.ignoredGrid:this.grid,A={bucketInstanceId:_,featureIndex:x,collisionGroupID:w};for(let L=0;L<c.length;L+=4)P.insertCircle(A,c[L],c[L+1],c[L+2])}projectAndGetPerspectiveRatio(c,h,_,x,w,P,A){const L=[h,_,x,1];let V=!1;x||this.transform.pitch>0?(o.transformMat4$1(L,L,c),this.fogState&&w&&A.name!=="globe"&&(V=function(le,pe,ge,me,ve,Q){const he=Q.calculateFogTileMatrix(ve),Ee=[pe,ge,me];return o.transformMat4(Ee,Ee,he),tt(le,Ee,Q.pitch,Q._fov)}(this.fogState,h,_,x,w.toUnwrapped(),this.transform)>.9)):gr(L,L,c);const U=L[3];return{point:new o.Point((L[0]/U+1)/2*this.transform.width+wi,(-L[1]/U+1)/2*this.transform.height+wi),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(A)/U*.5,1.5),signedDistanceFromCamera:U,occluded:P&&L[2]>U||V}}isOffscreen(c,h,_,x){return _<wi||c>=this.screenRightBoundary||x<wi||h>this.screenBottomBoundary}isInsideGrid(c,h,_,x){return _>=0&&c<this.gridRightBoundary&&x>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const c=o.identity([]);return o.translate(c,c,[-100,-100,0]),c}}function Ua(m,c,h){const _=c.createTileMatrix(m,m.worldSize,h.toUnwrapped());return o.multiply(new Float32Array(16),m.projMatrix,_)}function ma(m,c,h){if(c.projection.name===h.projection.name)return m.projMatrix;const _=h.clone();return _.setProjection(c.projection),Ua(_,c.getProjection(),m)}function ui(m,c,h){return c.name===h.projection.name?m.projMatrix:Ua(h,c,m)}class Ks{constructor(c,h,_,x){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?h:-h))):x&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Lo{constructor(c,h,_,x,w,P=!1){this.text=new Ks(c?c.text:null,h,_,w),this.icon=new Ks(c?c.icon:null,h,x,w),this.clipped=P}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ml{constructor(c,h,_,x=!1){this.text=c,this.icon=h,this.skipFade=_,this.clipped=x}}class au{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Dl{constructor(c,h,_,x,w){this.bucketInstanceId=c,this.featureIndex=h,this.sourceLayerIndex=_,this.bucketIndex=x,this.tileID=w}}class bh{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const h=++this.maxGroupID;this.collisionGroups[c]={ID:h,predicate:_=>_.collisionGroupID===h}}return this.collisionGroups[c]}}function Ol(m,c,h,_,x){const{horizontalAlign:w,verticalAlign:P}=o.getAnchorAlignment(m),A=-(w-.5)*c,L=-(P-.5)*h,V=o.evaluateVariableOffset(m,_);return new o.Point(A+V[0]*x,L+V[1]*x)}function mc(m,c,h,_,x){const w=new o.Point(m,c);return h&&w._rotate(_?x:-x),w}class su{constructor(c,h,_,x,w){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new fc(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new bh(_),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,h,_,x){const w=_.getBucket(h),P=_.latestFeatureIndex;if(!w||!P||h.id!==w.layerIds[0])return;const A=w.layers[0].layout,L=_.collisionBoxArray,V=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),U=_.tileSize/o.EXTENT,J=_.tileID.toUnwrapped();this.transform.setProjection(w.projection);const le=(pe=_.tileID,ge=w.getProjection(),me=this.transform,ge.name===this.projection?me.calculateProjMatrix(pe.toUnwrapped()):Ua(me,ge,pe));var pe,ge,me;const ve=A.get("text-pitch-alignment")==="map",Q=A.get("text-rotation-alignment")==="map";h.compileFilter();const he=h.dynamicFilter(),Ee=h.dynamicFilterNeedsFeature(),ke=this.transform.calculatePixelsToTileUnitsMatrix(_),Ve=fa(le,_.tileID.canonical,ve,Q,this.transform,w.getProjection(),ke);let He=null;if(ve){const et=ti(le,_.tileID.canonical,ve,Q,this.transform,w.getProjection(),ke);He=o.multiply([],this.transform.labelPlaneMatrix,et)}let We=null;he&&_.latestFeatureIndex&&(We={unwrappedTileID:J,dynamicFilter:he,dynamicFilterNeedsFeature:Ee,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Dl(w.bucketInstanceId,P,w.sourceLayerIndex,w.index,_.tileID);const nt={bucket:w,layout:A,posMatrix:le,textLabelPlaneMatrix:Ve,labelToScreenMatrix:He,clippingData:We,scale:V,textPixelRatio:U,holdingForFade:_.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(x)for(const et of w.sortKeyRanges){const{sortKey:ht,symbolInstanceStart:Vt,symbolInstanceEnd:st}=et;c.push({sortKey:ht,symbolInstanceStart:Vt,symbolInstanceEnd:st,parameters:nt})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:nt})}attemptAnchorPlacement(c,h,_,x,w,P,A,L,V,U,J,le,pe,ge,me,ve,Q,he){const{textOffset0:Ee,textOffset1:ke,crossTileID:Ve}=le,He=[Ee,ke],We=Ol(c,_,x,He,w),nt=this.collisionIndex.placeCollisionBox(ge,w,h,mc(We.x,We.y,P,A,this.transform.angle),J,L,V,U.predicate);if(ve){const et=ge.getSymbolInstanceIconSize(he,this.transform.zoom,le.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ge,et,ve,mc(We.x,We.y,P,A,this.transform.angle),J,L,V,U.predicate).box.length===0)return}if(nt.box.length>0){let et;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ve]&&this.prevPlacement.placements[Ve]&&this.prevPlacement.placements[Ve].text&&(et=this.prevPlacement.variableOffsets[Ve].anchor),this.variableOffsets[Ve]={textOffset:He,width:_,height:x,anchor:c,textScale:w,prevAnchor:et},this.markUsedJustification(ge,c,le,me),ge.allowVerticalPlacement&&(this.markUsedOrientation(ge,me,le),this.placedOrientations[Ve]=me),{shift:We,placedGlyphBoxes:nt}}}placeLayerBucketPart(c,h,_,x){const{bucket:w,layout:P,posMatrix:A,textLabelPlaneMatrix:L,labelToScreenMatrix:V,clippingData:U,textPixelRatio:J,holdingForFade:le,collisionBoxArray:pe,partiallyEvaluatedTextSize:ge,partiallyEvaluatedIconSize:me,collisionGroup:ve}=c.parameters,Q=P.get("text-optional"),he=P.get("icon-optional"),Ee=P.get("text-allow-overlap"),ke=P.get("icon-allow-overlap"),Ve=P.get("text-rotation-alignment")==="map",He=P.get("text-pitch-alignment")==="map",We=P.get("icon-text-fit")!=="none",nt=P.get("symbol-z-order")==="viewport-y";this.transform.setProjection(w.projection);let et=Ee&&(ke||!w.hasIconData()||he),ht=ke&&(Ee||!w.hasTextData()||Q);!w.collisionArrays&&pe&&w.deserializeCollisionBoxes(pe),_&&x&&w.updateCollisionDebugBuffers(this.transform.zoom,pe);const Vt=(st,Pt,mt)=>{const{crossTileID:$t,numVerticalGlyphVertices:dt}=st;if(U){const yi={zoom:this.transform.zoom,pitch:this.transform.pitch};let Zr=null;if(U.dynamicFilterNeedsFeature){const zr=this.retainedQueryData[w.bucketInstanceId];Zr=U.featureIndex.loadFeature({featureIndex:st.featureIndex,bucketIndex:zr.bucketIndex,sourceLayerIndex:zr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,U.dynamicFilter)(yi,Zr,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new o.Point(st.tileAnchorX,st.tileAnchorY),this.transform.calculateDistanceTileData(U.unwrappedTileID)))return this.placements[$t]=new Ml(!1,!1,!1,!0),void h.add($t)}if(h.has($t))return;if(le)return void(this.placements[$t]=new Ml(!1,!1,!1));let Ct=!1,Ht=!1,zt=!0,Gt=!1,zn=!1,er=null,Cn={box:null,offscreen:null,occluded:null},Gn={box:null,offscreen:null,occluded:null},Tr=null,xr=null,Mn=null,jr=0,Hr=0,qr=0;mt.textFeatureIndex?jr=mt.textFeatureIndex:st.useRuntimeCollisionCircles&&(jr=st.featureIndex),mt.verticalTextFeatureIndex&&(Hr=mt.verticalTextFeatureIndex);const Gr=yi=>{yi.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const Zr=this.transform.elevation;(Zr||yi.elevation)&&(yi.elevation=Zr?Zr.getAtTileOffset(yi.tileID,yi.tileAnchorX,yi.tileAnchorY):0)},Ko=mt.textBox;if(Ko){Gr(Ko);const yi=zr=>{let Xi=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!zr&&this.prevPlacement){const la=this.prevPlacement.placedOrientations[$t];la&&(this.placedOrientations[$t]=la,Xi=la,this.markUsedOrientation(w,Xi,st))}return Xi},Zr=(zr,Xi)=>{if(w.allowVerticalPlacement&&dt>0&&mt.verticalTextBox){for(const la of w.writingModes)if(la===o.WritingMode.vertical?(Cn=Xi(),Gn=Cn):Cn=zr(),Cn&&Cn.box&&Cn.box.length)break}else Cn=zr()};if(P.get("text-variable-anchor")){let zr=P.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[$t]){const fi=this.prevPlacement.variableOffsets[$t];zr.indexOf(fi.anchor)>0&&(zr=zr.filter(xa=>xa!==fi.anchor),zr.unshift(fi.anchor))}const Xi=(fi,xa,of)=>{const yu=w.getSymbolInstanceTextSize(ge,st,this.transform.zoom,Pt),Fh=(fi.x2-fi.x1)*yu+2*fi.padding,Nl=(fi.y2-fi.y1)*yu+2*fi.padding,Cc=We&&!ke?xa:null;Cc&&Gr(Cc);let vu={box:[],offscreen:!1,occluded:!1};const af=Ee?2*zr.length:zr.length;for(let Nh=0;Nh<af;++Nh){const Rm=this.attemptAnchorPlacement(zr[Nh%zr.length],fi,Fh,Nl,yu,Ve,He,J,A,ve,Nh>=zr.length,st,Pt,w,of,Cc,ge,me);if(Rm&&(vu=Rm.placedGlyphBoxes,vu&&vu.box&&vu.box.length)){Ct=!0,er=Rm.shift;break}}return vu};Zr(()=>Xi(Ko,mt.iconBox,o.WritingMode.horizontal),()=>{const fi=mt.verticalTextBox;return fi&&Gr(fi),w.allowVerticalPlacement&&!(Cn&&Cn.box&&Cn.box.length)&&dt>0&&fi?Xi(fi,mt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Cn&&(Ct=Cn.box,zt=Cn.offscreen,Gt=Cn.occluded);const la=yi(!(!Cn||!Cn.box));if(!Ct&&this.prevPlacement){const fi=this.prevPlacement.variableOffsets[$t];fi&&(this.variableOffsets[$t]=fi,this.markUsedJustification(w,fi.anchor,st,la))}}else{const zr=(Xi,la)=>{const fi=w.getSymbolInstanceTextSize(ge,st,this.transform.zoom,Pt),xa=this.collisionIndex.placeCollisionBox(w,fi,Xi,new o.Point(0,0),Ee,J,A,ve.predicate);return xa&&xa.box&&xa.box.length&&(this.markUsedOrientation(w,la,st),this.placedOrientations[$t]=la),xa};Zr(()=>zr(Ko,o.WritingMode.horizontal),()=>{const Xi=mt.verticalTextBox;return w.allowVerticalPlacement&&dt>0&&Xi?(Gr(Xi),zr(Xi,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),yi(!!(Cn&&Cn.box&&Cn.box.length))}}if(Tr=Cn,Ct=Tr&&Tr.box&&Tr.box.length>0,zt=Tr&&Tr.offscreen,Gt=Tr&&Tr.occluded,st.useRuntimeCollisionCircles){const yi=w.text.placedSymbolArray.get(st.centerJustifiedTextSymbolIndex>=0?st.centerJustifiedTextSymbolIndex:st.verticalPlacedTextSymbolIndex),Zr=o.evaluateSizeForFeature(w.textSizeData,ge,yi),zr=P.get("text-padding");xr=this.collisionIndex.placeCollisionCircles(w,Ee,yi,w.lineVertexArray,w.glyphOffsetArray,Zr,A,L,V,_,He,ve.predicate,st.collisionCircleDiameter*Zr/o.ONE_EM,zr,this.retainedQueryData[w.bucketInstanceId].tileID),Ct=Ee||xr.circles.length>0&&!xr.collisionDetected,zt=zt&&xr.offscreen,Gt=xr.occluded}if(mt.iconFeatureIndex&&(qr=mt.iconFeatureIndex),mt.iconBox){const yi=Zr=>{Gr(Zr);const zr=We&&er?mc(er.x,er.y,Ve,He,this.transform.angle):new o.Point(0,0),Xi=w.getSymbolInstanceIconSize(me,this.transform.zoom,st.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,Xi,Zr,zr,ke,J,A,ve.predicate)};Gn&&Gn.box&&Gn.box.length&&mt.verticalIconBox?(Mn=yi(mt.verticalIconBox),Ht=Mn.box.length>0):(Mn=yi(mt.iconBox),Ht=Mn.box.length>0),zt=zt&&Mn.offscreen,zn=Mn.occluded}const To=Q||st.numHorizontalGlyphVertices===0&&dt===0,is=he||st.numIconVertices===0;if(To||is?is?To||(Ht=Ht&&Ct):Ct=Ht&&Ct:Ht=Ct=Ht&&Ct,Ct&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,P.get("text-ignore-placement"),w.bucketInstanceId,Gn&&Gn.box&&Hr?Hr:jr,ve.ID),Ht&&Mn&&this.collisionIndex.insertCollisionBox(Mn.box,P.get("icon-ignore-placement"),w.bucketInstanceId,qr,ve.ID),xr&&(Ct&&this.collisionIndex.insertCollisionCircles(xr.circles,P.get("text-ignore-placement"),w.bucketInstanceId,jr,ve.ID),_)){const yi=w.bucketInstanceId;let Zr=this.collisionCircleArrays[yi];Zr===void 0&&(Zr=this.collisionCircleArrays[yi]=new au);for(let zr=0;zr<xr.circles.length;zr+=4)Zr.circles.push(xr.circles[zr+0]),Zr.circles.push(xr.circles[zr+1]),Zr.circles.push(xr.circles[zr+2]),Zr.circles.push(xr.collisionDetected?1:0)}const el=w.projection.name!=="globe";et=et&&(el||!Gt),ht=ht&&(el||!zn),this.placements[$t]=new Ml(Ct||et,Ht||ht,zt||w.justReloaded),h.add($t)};if(nt){const st=w.getSortedSymbolIndexes(this.transform.angle);for(let Pt=st.length-1;Pt>=0;--Pt){const mt=st[Pt];Vt(w.symbolInstances.get(mt),mt,w.collisionArrays[mt])}}else for(let st=c.symbolInstanceStart;st<c.symbolInstanceEnd;st++)Vt(w.symbolInstances.get(st),st,w.collisionArrays[st]);if(_&&w.bucketInstanceId in this.collisionCircleArrays){const st=this.collisionCircleArrays[w.bucketInstanceId];o.invert(st.invProjMatrix,A),st.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(c,h,_,x){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:P,rightJustifiedTextSymbolIndex:A,verticalPlacedTextSymbolIndex:L,crossTileID:V}=_,U=o.getAnchorJustification(h),J=x===o.WritingMode.vertical?L:U==="left"?w:U==="center"?P:U==="right"?A:-1;w>=0&&(c.text.placedSymbolArray.get(w).crossTileID=J>=0&&w!==J?0:V),P>=0&&(c.text.placedSymbolArray.get(P).crossTileID=J>=0&&P!==J?0:V),A>=0&&(c.text.placedSymbolArray.get(A).crossTileID=J>=0&&A!==J?0:V),L>=0&&(c.text.placedSymbolArray.get(L).crossTileID=J>=0&&L!==J?0:V)}markUsedOrientation(c,h,_){const x=h===o.WritingMode.horizontal||h===o.WritingMode.horizontalOnly?h:0,w=h===o.WritingMode.vertical?h:0,{leftJustifiedTextSymbolIndex:P,centerJustifiedTextSymbolIndex:A,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:V}=_,U=c.text.placedSymbolArray;P>=0&&(U.get(P).placedOrientation=x),A>=0&&(U.get(A).placedOrientation=x),L>=0&&(U.get(L).placedOrientation=x),V>=0&&(U.get(V).placedOrientation=w)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let _=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const x=h?h.symbolFadeChange(c):1,w=h?h.opacities:{},P=h?h.variableOffsets:{},A=h?h.placedOrientations:{};for(const L in this.placements){const V=this.placements[L],U=w[L];U?(this.opacities[L]=new Lo(U,x,V.text,V.icon,null,V.clipped),_=_||V.text!==U.text.placed||V.icon!==U.icon.placed):(this.opacities[L]=new Lo(null,x,V.text,V.icon,V.skipFade,V.clipped),_=_||V.text||V.icon)}for(const L in w){const V=w[L];if(!this.opacities[L]){const U=new Lo(V,x,!1,!1);U.isHidden()||(this.opacities[L]=U,_=_||V.text.placed||V.icon.placed)}}for(const L in P)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=P[L]);for(const L in A)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=A[L]);_?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:c)}updateLayerOpacities(c,h){const _=new Set;for(const x of h){const w=x.getBucket(c);w&&x.latestFeatureIndex&&c.id===w.layerIds[0]&&this.updateBucketOpacities(w,_,x.collisionBoxArray)}}updateBucketOpacities(c,h,_){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const x=c.layers[0].layout,w=!!c.layers[0].dynamicFilter(),P=new Lo(null,0,!1,!1,!0),A=x.get("text-allow-overlap"),L=x.get("icon-allow-overlap"),V=x.get("text-variable-anchor"),U=x.get("text-rotation-alignment")==="map",J=x.get("text-pitch-alignment")==="map",le=x.get("icon-text-fit")!=="none",pe=new Lo(null,0,A&&(L||!c.hasIconData()||x.get("icon-optional")),L&&(A||!c.hasTextData()||x.get("text-optional")),!0);!c.collisionArrays&&_&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(_);const ge=(ve,Q,he)=>{for(let Ee=0;Ee<Q/4;Ee++)ve.opacityVertexArray.emplaceBack(he)};let me=0;for(let ve=0;ve<c.symbolInstances.length;ve++){const Q=c.symbolInstances.get(ve),{numHorizontalGlyphVertices:he,numVerticalGlyphVertices:Ee,crossTileID:ke,numIconVertices:Ve}=Q,He=h.has(ke);let We=this.opacities[ke];He?We=P:We||(We=pe,this.opacities[ke]=We),h.add(ke);const nt=he>0||Ee>0,et=Ve>0,ht=this.placedOrientations[ke],Vt=ht===o.WritingMode.vertical,st=ht===o.WritingMode.horizontal||ht===o.WritingMode.horizontalOnly;if(!nt&&!et||We.isHidden()||me++,nt){const Pt=cu(We.text);ge(c.text,he,Vt?Ei:Pt),ge(c.text,Ee,st?Ei:Pt);const mt=We.text.isHidden(),{leftJustifiedTextSymbolIndex:$t,centerJustifiedTextSymbolIndex:dt,rightJustifiedTextSymbolIndex:Ct,verticalPlacedTextSymbolIndex:Ht}=Q,zt=c.text.placedSymbolArray,Gt=mt||Vt?1:0;$t>=0&&(zt.get($t).hidden=Gt),dt>=0&&(zt.get(dt).hidden=Gt),Ct>=0&&(zt.get(Ct).hidden=Gt),Ht>=0&&(zt.get(Ht).hidden=mt||st?1:0);const zn=this.variableOffsets[ke];zn&&this.markUsedJustification(c,zn.anchor,Q,ht);const er=this.placedOrientations[ke];er&&(this.markUsedJustification(c,"left",Q,er),this.markUsedOrientation(c,er,Q))}if(et){const Pt=cu(We.icon),{placedIconSymbolIndex:mt,verticalPlacedIconSymbolIndex:$t}=Q,dt=c.icon.placedSymbolArray,Ct=We.icon.isHidden()?1:0;mt>=0&&(ge(c.icon,Ve,Vt?Ei:Pt),dt.get(mt).hidden=Ct),$t>=0&&(ge(c.icon,Q.numVerticalIconVertices,st?Ei:Pt),dt.get($t).hidden=Ct)}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const Pt=c.collisionArrays[ve];if(Pt){let mt=new o.Point(0,0),$t=!0;if(Pt.textBox||Pt.verticalTextBox){if(V){const Ct=this.variableOffsets[ke];Ct?(mt=Ol(Ct.anchor,Ct.width,Ct.height,Ct.textOffset,Ct.textScale),U&&mt._rotate(J?this.transform.angle:-this.transform.angle)):$t=!1}w&&($t=!We.clipped),Pt.textBox&&gc(c.textCollisionBox.collisionVertexArray,We.text.placed,!$t||Vt,mt.x,mt.y),Pt.verticalTextBox&&gc(c.textCollisionBox.collisionVertexArray,We.text.placed,!$t||st,mt.x,mt.y)}const dt=$t&&!!(!st&&Pt.verticalIconBox);Pt.iconBox&&gc(c.iconCollisionBox.collisionVertexArray,We.icon.placed,dt,le?mt.x:0,le?mt.y:0),Pt.verticalIconBox&&gc(c.iconCollisionBox.collisionVertexArray,We.icon.placed,!dt,le?mt.x:0,le?mt.y:0)}}}if(c.fullyClipped=me===0,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const ve=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=ve.invProjMatrix,c.placementViewportMatrix=ve.viewportMatrix,c.collisionCircleArray=ve.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,h){const _=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*_>c}setStale(){this.stale=!0}}function gc(m,c,h,_,x){m.emplaceBack(c?1:0,h?1:0,_||0,x||0),m.emplaceBack(c?1:0,h?1:0,_||0,x||0),m.emplaceBack(c?1:0,h?1:0,_||0,x||0),m.emplaceBack(c?1:0,h?1:0,_||0,x||0)}const zo=Math.pow(2,25),Mi=Math.pow(2,24),wh=Math.pow(2,17),lu=Math.pow(2,16),Wo=Math.pow(2,9),ga=Math.pow(2,8),Vp=Math.pow(2,1);function cu(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const c=m.placed?1:0,h=Math.floor(127*m.opacity);return h*zo+c*Mi+h*wh+c*lu+h*Wo+c*ga+h*Vp+c}const Ei=0;class uu{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(c,h,_,x,w){const P=this._bucketParts;for(;this._currentTileIndex<c.length;)if(h.getBucketParts(P,x,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((A,L)=>A.sortKey-L.sortKey));this._currentPartIndex<P.length;){const A=P[this._currentPartIndex];if(h.placeLayerBucketPart(A,this._seenCrossTileIDs,_,A.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class Eh{constructor(c,h,_,x,w,P,A,L){this.placement=new su(c,w,P,A,L),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(c,h,_){const x=o.exported.now(),w=()=>{const P=o.exported.now()-x;return!this._forceFullPlacement&&P>2};for(;this._currentPlacementIndex>=0;){const P=h[c[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=A)&&(!P.maxzoom||P.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new uu(P)),this._inProgressLayer.continuePlacement(_[P.source],this.placement,this._showCollisionBoxes,P,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const Ys=512/o.EXTENT/2;class Zi{constructor(c,h,_){this.tileID=c,this.bucketInstanceId=_,this.index=new o.KDBush(h.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const x=c.canonical.x*o.EXTENT,w=c.canonical.y*o.EXTENT;for(let P=0;P<h.length;P++){const{key:A,crossTileID:L,tileAnchorX:V,tileAnchorY:U}=h.get(P),J=Math.floor((x+V)*Ys),le=Math.floor((w+U)*Ys);this.index.add(J,le),this.keys.push(A),this.crossTileIDs.push(L)}this.index.finish()}findMatches(c,h,_){const x=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),w=Ys/Math.pow(2,h.canonical.z-this.tileID.canonical.z),P=h.canonical.x*o.EXTENT,A=h.canonical.y*o.EXTENT;for(let L=0;L<c.length;L++){const V=c.get(L);if(V.crossTileID)continue;const{key:U,tileAnchorX:J,tileAnchorY:le}=V,pe=Math.floor((P+J)*w),ge=Math.floor((A+le)*w),me=this.index.range(pe-x,ge-x,pe+x,ge+x);for(const ve of me){const Q=this.crossTileIDs[ve];if(this.keys[ve]===U&&!_.has(Q)){_.add(Q),V.crossTileID=Q;break}}}}}class nd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class du{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const h=Math.round((c-this.lng)/360);if(h!==0)for(const _ in this.indexes){const x=this.indexes[_],w={};for(const P in x){const A=x[P];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+h),w[A.tileID.key]=A}this.indexes[_]=w}this.lng=c}addBucket(c,h,_){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let w=0;w<h.symbolInstances.length;w++)h.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]=new Set);const x=this.usedCrossTileIDs[c.overscaledZ];for(const w in this.indexes){const P=this.indexes[w];if(Number(w)>c.overscaledZ)for(const A in P){const L=P[A];L.tileID.isChildOf(c)&&L.findMatches(h.symbolInstances,c,x)}else{const A=P[c.scaledTo(Number(w)).key];A&&A.findMatches(h.symbolInstances,c,x)}}for(let w=0;w<h.symbolInstances.length;w++){const P=h.symbolInstances.get(w);P.crossTileID||(P.crossTileID=_.generate(),x.add(P.crossTileID))}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Zi(c,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(c,h){for(const _ of h.crossTileIDs)this.usedCrossTileIDs[c].delete(_)}removeStaleBuckets(c){let h=!1;for(const _ in this.indexes){const x=this.indexes[_];for(const w in x)c[x[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,x[w]),delete x[w],h=!0)}return h}}class es{constructor(){this.layerIndexes={},this.crossTileIDs=new nd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,h,_,x){let w=this.layerIndexes[c.id];w===void 0&&(w=this.layerIndexes[c.id]=new du);let P=!1;const A={};x.name!=="globe"&&w.handleWrapJump(_);for(const L of h){const V=L.getBucket(c);V&&c.id===V.layerIds[0]&&(V.bucketInstanceId||(V.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(L.tileID,V,this.crossTileIDs)&&(P=!0),A[V.bucketInstanceId]=!0)}return w.removeStaleBuckets(A)&&(P=!0),P}pruneUnusedLayers(c){const h={};c.forEach(_=>{h[_]=!0});for(const _ in this.layerIndexes)h[_]||delete this.layerIndexes[_]}}const ws=(m,c)=>o.emitValidationErrors(m,c&&c.filter(h=>h.identifier!=="source.canvas")),_c=o.pick(Vn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),fm=o.pick(Vn,["setCenter","setZoom","setBearing","setPitch"]),Sh={version:8,layers:[],sources:{}},yc={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ho extends o.Evented{constructor(c,h={}){super(),this.map=c,this.dispatcher=new it(un(),this),this.imageManager=new rt,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(c._requestManager,h.localFontFamily?o.LocalGlyphMode.all:h.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,h.localFontFamily||h.localIdeographFontFamily),this.crossTileSymbolIndex=new es,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const _=this;this._rtlTextPluginCallback=Ho.registerForPluginStateChange(x=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(w,P)=>{if(o.triggerPluginCompletionEvent(w),P&&P.every(A=>A))for(const A in _._sourceCaches){const L=_._sourceCaches[A],V=L.getSource().type;V!=="vector"&&V!=="geojson"||L.reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const w=this.getSource(x.sourceId);if(w&&w.vectorLayerIds)for(const P in this._layers){const A=this._layers[P];A.source===w.id&&this._validateLayer(A)}})}loadURL(c,h={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const _=typeof h.validate=="boolean"?h.validate:!o.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,h.accessToken);const x=this.map._requestManager.transformRequest(c,o.ResourceType.Style);this._request=o.getJSON(x,(w,P)=>{this._request=null,w?this.fire(new o.ErrorEvent(w)):P&&this._load(P,_)})}loadJSON(c,h={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(c,h.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Sh,!1)}_updateLayerCount(c,h){const _=h?1:-1;c.is3D()&&(this._num3DLayers+=_),c.type==="circle"&&(this._numCircleLayers+=_),c.type==="symbol"&&(this._numSymbolLayers+=_)}_load(c,h){if(h&&ws(this,o.validateStyle(c)))return;this._loaded=!0,this.stylesheet=o.clone$1(c),this._updateMapProjection();for(const x in c.sources)this.addSource(x,c.sources[x],{validate:!1});this._changed=!1,c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(c.glyphs);const _=Ar(this.stylesheet.layers);this._order=_.map(x=>x.id),this._layers={},this._serializedLayers={};for(const x of _){const w=o.createStyleLayer(x);w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new qe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(c){this._spriteRequest=function(h,_,x){let w,P,A;const L=o.exported.devicePixelRatio>1?"@2x":"";let V=o.getJSON(_.transformRequest(_.normalizeSpriteURL(h,L,".json"),o.ResourceType.SpriteJSON),(le,pe)=>{V=null,A||(A=le,w=pe,J())}),U=o.getImage(_.transformRequest(_.normalizeSpriteURL(h,L,".png"),o.ResourceType.SpriteImage),(le,pe)=>{U=null,A||(A=le,P=pe,J())});function J(){if(A)x(A);else if(w&&P){const le=o.exported.getImageData(P),pe={};for(const ge in w){const{width:me,height:ve,x:Q,y:he,sdf:Ee,pixelRatio:ke,stretchX:Ve,stretchY:He,content:We}=w[ge],nt=new o.RGBAImage({width:me,height:ve});o.RGBAImage.copy(le,nt,{x:Q,y:he},{x:0,y:0},{width:me,height:ve}),pe[ge]={data:nt,pixelRatio:ke,sdf:Ee,stretchX:Ve,stretchY:He,content:We}}x(null,pe)}}return{cancel(){V&&(V.cancel(),V=null),U&&(U.cancel(),U=null)}}}(c,this.map._requestManager,(h,_)=>{if(this._spriteRequest=null,h)this.fire(new o.ErrorEvent(h));else if(_)for(const x in _)this.imageManager.addImage(x,_[x]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(c){const h=this.getSource(c.source);if(!h)return;const _=c.sourceLayer;_&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${h.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const h=[];for(const _ of c){const x=this._layers[_];x.type!=="custom"&&h.push(x.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(c){return!!this.terrain&&(typeof c.isLayerDraped=="function"?c.isLayerDraped():yc[c.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(c){if(!this._loaded)return;const h=this._changed;if(this._changed){const x=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(x.length||w.length)&&this._updateWorkerLayers(x,w);for(const P in this._updatedSources){const A=this._updatedSources[P];A==="reload"?this._reloadSource(P):A==="clear"&&this._clearSource(P)}this._updateTilesForChangedImages();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(c);this.light.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._resetUpdates()}const _={};for(const x in this._sourceCaches){const w=this._sourceCaches[x];_[x]=w.used,w.used=!1}for(const x of this._order){const w=this._layers[x];if(w.recalculate(c,this._availableImages),!w.isHidden(c.zoom)){const A=this._getLayerSourceCache(w);A&&(A.used=!0)}const P=this.map.painter;if(P){const A=w.getProgramIds();if(!A)continue;const L=w.getProgramConfiguration(c.zoom);for(const V of A)P.useProgram(V,L)}}for(const x in _){const w=this._sourceCaches[x];_[x]!==w.used&&w.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),h&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(c){if(this._checkLoaded(),ws(this,o.validateStyle(c)))return!1;(c=o.clone$1(c)).layers=Ar(c.layers);const h=function(x,w){if(!x)return[{command:Vn.setStyle,args:[w]}];let P=[];try{if(!v(x.version,w.version))return[{command:Vn.setStyle,args:[w]}];v(x.center,w.center)||P.push({command:Vn.setCenter,args:[w.center]}),v(x.zoom,w.zoom)||P.push({command:Vn.setZoom,args:[w.zoom]}),v(x.bearing,w.bearing)||P.push({command:Vn.setBearing,args:[w.bearing]}),v(x.pitch,w.pitch)||P.push({command:Vn.setPitch,args:[w.pitch]}),v(x.sprite,w.sprite)||P.push({command:Vn.setSprite,args:[w.sprite]}),v(x.glyphs,w.glyphs)||P.push({command:Vn.setGlyphs,args:[w.glyphs]}),v(x.transition,w.transition)||P.push({command:Vn.setTransition,args:[w.transition]}),v(x.light,w.light)||P.push({command:Vn.setLight,args:[w.light]}),v(x.fog,w.fog)||P.push({command:Vn.setFog,args:[w.fog]}),v(x.projection,w.projection)||P.push({command:Vn.setProjection,args:[w.projection]});const A={},L=[];(function(J,le,pe,ge){let me;for(me in le=le||{},J=J||{})J.hasOwnProperty(me)&&(le.hasOwnProperty(me)||go(me,pe,ge));for(me in le){if(!le.hasOwnProperty(me))continue;const ve=le[me];J.hasOwnProperty(me)?v(J[me],ve)||(J[me].type==="geojson"&&ve.type==="geojson"&&ra(J,le,me)?pe.push({command:Vn.setGeoJSONSourceData,args:[me,ve.data]}):_o(me,le,pe,ge)):Do(me,le,pe)}})(x.sources,w.sources,L,A);const V=[];x.layers&&x.layers.forEach(J=>{J.source&&A[J.source]?P.push({command:Vn.removeLayer,args:[J.id]}):V.push(J)});let U=x.terrain;U&&A[U.source]&&(P.push({command:Vn.setTerrain,args:[void 0]}),U=void 0),P=P.concat(L),v(U,w.terrain)||P.push({command:Vn.setTerrain,args:[w.terrain]}),function(J,le,pe){le=le||[];const ge=(J=J||[]).map(Ui),me=le.map(Ui),ve=J.reduce(yo,{}),Q=le.reduce(yo,{}),he=ge.slice(),Ee=Object.create(null);let ke,Ve,He,We,nt,et,ht;for(ke=0,Ve=0;ke<ge.length;ke++)He=ge[ke],Q.hasOwnProperty(He)?Ve++:(pe.push({command:Vn.removeLayer,args:[He]}),he.splice(he.indexOf(He,Ve),1));for(ke=0,Ve=0;ke<me.length;ke++)He=me[me.length-1-ke],he[he.length-1-ke]!==He&&(ve.hasOwnProperty(He)?(pe.push({command:Vn.removeLayer,args:[He]}),he.splice(he.lastIndexOf(He,he.length-Ve),1)):Ve++,et=he[he.length-ke],pe.push({command:Vn.addLayer,args:[Q[He],et]}),he.splice(he.length-ke,0,He),Ee[He]=!0);for(ke=0;ke<me.length;ke++)if(He=me[ke],We=ve[He],nt=Q[He],!Ee[He]&&!v(We,nt))if(v(We.source,nt.source)&&v(We["source-layer"],nt["source-layer"])&&v(We.type,nt.type)){for(ht in $i(We.layout,nt.layout,pe,He,null,Vn.setLayoutProperty),$i(We.paint,nt.paint,pe,He,null,Vn.setPaintProperty),v(We.filter,nt.filter)||pe.push({command:Vn.setFilter,args:[He,nt.filter]}),v(We.minzoom,nt.minzoom)&&v(We.maxzoom,nt.maxzoom)||pe.push({command:Vn.setLayerZoomRange,args:[He,nt.minzoom,nt.maxzoom]}),We)We.hasOwnProperty(ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&(ht.indexOf("paint.")===0?$i(We[ht],nt[ht],pe,He,ht.slice(6),Vn.setPaintProperty):v(We[ht],nt[ht])||pe.push({command:Vn.setLayerProperty,args:[He,ht,nt[ht]]}));for(ht in nt)nt.hasOwnProperty(ht)&&!We.hasOwnProperty(ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&(ht.indexOf("paint.")===0?$i(We[ht],nt[ht],pe,He,ht.slice(6),Vn.setPaintProperty):v(We[ht],nt[ht])||pe.push({command:Vn.setLayerProperty,args:[He,ht,nt[ht]]}))}else pe.push({command:Vn.removeLayer,args:[He]}),et=he[he.lastIndexOf(He)+1],pe.push({command:Vn.addLayer,args:[nt,et]})}(V,w.layers,P)}catch(A){console.warn("Unable to compute style diff:",A),P=[{command:Vn.setStyle,args:[w]}]}return P}(this.serialize(),c).filter(x=>!(x.command in fm));if(h.length===0)return!1;const _=h.filter(x=>!(x.command in _c));if(_.length>0)throw new Error(`Unimplemented: ${_.map(x=>x.command).join(", ")}.`);return h.forEach(x=>{x.command!=="setTransition"&&x.command!=="setProjection"&&this[x.command].apply(this,x.args)}),this.stylesheet=c,this._updateMapProjection(),!0}addImage(c,h){return this.getImage(c)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,h),this._afterImageUpdated(c),this)}updateImage(c,h){this.imageManager.updateImage(c,h)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c),this._afterImageUpdated(c),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(c,h,_={}){if(this._checkLoaded(),this.getSource(c)!==void 0)throw new Error("There is already a source with this ID");if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(o.validateSource,`sources.${c}`,h,null,_))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const x=Ln(c,h,this.dispatcher,this);x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(c),source:x.serialize(),sourceId:c}));const w=P=>{const A=(P?"symbol:":"other:")+c,L=this._sourceCaches[A]=new o.SourceCache(A,x,P);(P?this._symbolSourceCaches:this._otherSourceCaches)[c]=L,L.style=this,L.onAdd(this.map)};w(!1),h.type!=="vector"&&h.type!=="geojson"||w(!0),x.onAdd&&x.onAdd(this.map),this._changed=!0}removeSource(c){this._checkLoaded();const h=this.getSource(c);if(!h)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.get().source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const _=this._getSourceCaches(c);for(const x of _)delete this._sourceCaches[x.id],delete this._updatedSources[x.id],x.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles();return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(c,h){this._checkLoaded(),this.getSource(c).setData(h),this._changed=!0}getSource(c){const h=this._getSourceCache(c);return h&&h.getSource()}_getSources(){const c=[];for(const h in this._otherSourceCaches){const _=this._getSourceCache(h);_&&c.push(_.getSource())}return c}addLayer(c,h,_={}){this._checkLoaded();const x=c.id;if(this.getLayer(x))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${x}" already exists on this map`)));let w;if(c.type==="custom"){if(ws(this,o.validateCustomStyleLayer(c)))return;w=o.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(x,c.source),c=o.clone$1(c),c=o.extend(c,{source:x})),this._validate(o.validateLayer,`layers.${x}`,c,{arrayIndex:-1},_))return;w=o.createStyleLayer(c),this._validateLayer(w),w.setEventedParent(this,{layer:{id:x}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const P=h?this._order.indexOf(h):this._order.length;if(h&&P===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`)));this._order.splice(P,0,x),this._layerOrderChanged=!0,this._layers[x]=w;const A=this._getLayerSourceCache(w);if(this._removedLayers[x]&&w.source&&A&&w.type!=="custom"){const L=this._removedLayers[x];delete this._removedLayers[x],L.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",A.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(c,h){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===h)return;const _=this._order.indexOf(c);this._order.splice(_,1);const x=h?this._order.indexOf(h):this._order.length;h&&x===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`))):(this._order.splice(x,0,c),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(c){this._checkLoaded();const h=this._layers[c];if(!h)return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be removed.`)));h.setEventedParent(null),this._updateLayerCount(h,!1);const _=this._order.indexOf(c);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=h,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],h.onRemove&&h.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}hasLayerType(c){for(const h in this._layers)if(this._layers[h].type===c)return!0;return!1}setLayerZoomRange(c,h,_){this._checkLoaded();const x=this.getLayer(c);x?x.minzoom===h&&x.maxzoom===_||(h!=null&&(x.minzoom=h),_!=null&&(x.maxzoom=_),this._updateLayer(x)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(c,h,_={}){this._checkLoaded();const x=this.getLayer(c);if(x){if(!v(x.filter,h))return h==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(o.validateFilter,`layers.${x.id}.filter`,h,{layerType:x.type},_)||(x.filter=o.clone$1(h),this._updateLayer(x)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be filtered.`)))}getFilter(c){const h=this.getLayer(c);return h&&o.clone$1(h.filter)}setLayoutProperty(c,h,_,x={}){this._checkLoaded();const w=this.getLayer(c);w?v(w.getLayoutProperty(h),_)||(w.setLayoutProperty(h,_,x),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(c,h){const _=this.getLayer(c);if(_)return _.getLayoutProperty(h);this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style.`)))}setPaintProperty(c,h,_,x={}){this._checkLoaded();const w=this.getLayer(c);w?v(w.getPaintProperty(h),_)||(w.setPaintProperty(h,_,x)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(c,h){const _=this.getLayer(c);return _&&_.getPaintProperty(h)}setFeatureState(c,h){this._checkLoaded();const _=c.source,x=c.sourceLayer,w=this.getSource(_);if(!w)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const P=w.type;if(P==="geojson"&&x)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(P==="vector"&&!x)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const A=this._getSourceCaches(_);for(const L of A)L.setFeatureState(x,c.id,h)}removeFeatureState(c,h){this._checkLoaded();const _=c.source,x=this.getSource(_);if(!x)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const w=x.type,P=w==="vector"?c.sourceLayer:void 0;if(w==="vector"&&!P)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof c.id!="string"&&typeof c.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const A=this._getSourceCaches(_);for(const L of A)L.removeFeatureState(P,c.id,h)}getFeatureState(c){this._checkLoaded();const h=c.source,_=c.sourceLayer,x=this.getSource(h);if(x){if(x.type!=="vector"||_)return c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(h)[0].getFeatureState(_,c.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const c={};for(const h in this._sourceCaches){const _=this._sourceCaches[h].getSource();c[_.id]||(c[_.id]=_.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:c,layers:this._serializeLayers(this._order)},h=>h!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0;const h=this._getLayerSourceCache(c);c.source&&!this._updatedSources[c.source]&&h&&h.getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",h.pause()),this._changed=!0,c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const h=P=>this._layers[P].type==="fill-extrusion",_={},x=[];for(let P=this._order.length-1;P>=0;P--){const A=this._order[P];if(h(A)){_[A]=P;for(const L of c){const V=L[A];if(V)for(const U of V)x.push(U)}}}x.sort((P,A)=>A.intersectionZ-P.intersectionZ);const w=[];for(let P=this._order.length-1;P>=0;P--){const A=this._order[P];if(h(A))for(let L=x.length-1;L>=0;L--){const V=x[L].feature;if(_[V.layer.id]<P)break;w.push(V),x.pop()}else for(const L of c){const V=L[A];if(V)for(const U of V)w.push(U.feature)}}return w}queryRenderedFeatures(c,h,_){h&&h.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",h.filter,null,h);const x={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const L of h.layers){const V=this._layers[L];if(!V)return this.fire(new o.ErrorEvent(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];x[V.source]=!0}}const w=[];h.availableImages=this._availableImages;const P=h&&h.layers?h.layers.some(L=>{const V=this.getLayer(L);return V&&V.is3D()}):this.has3DLayers(),A=yt.createFromScreenPoints(c,_);for(const L in this._sourceCaches){const V=this._sourceCaches[L].getSource().id;h.layers&&!x[V]||w.push(wr(this._sourceCaches[L],this._layers,this._serializedLayers,A,h,_,P,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(L,V,U,J,le,pe,ge){const me={},ve=pe.queryRenderedSymbols(J),Q=[];for(const he of Object.keys(ve).map(Number))Q.push(ge[he]);Q.sort(Or);for(const he of Q){const Ee=he.featureIndex.lookupSymbolFeatures(ve[he.bucketInstanceId],V,he.bucketIndex,he.sourceLayerIndex,le.filter,le.layers,le.availableImages,L);for(const ke in Ee){const Ve=me[ke]=me[ke]||[],He=Ee[ke];He.sort((We,nt)=>{const et=he.featureSortOrder;if(et){const ht=et.indexOf(We.featureIndex);return et.indexOf(nt.featureIndex)-ht}return nt.featureIndex-We.featureIndex});for(const We of He)Ve.push(We)}}for(const he in me)me[he].forEach(Ee=>{const ke=Ee.feature,Ve=U(L[he]);if(!Ve)return;const He=Ve.getFeatureState(ke.layer["source-layer"],ke.id);ke.source=ke.layer.source,ke.layer["source-layer"]&&(ke.sourceLayer=ke.layer["source-layer"]),ke.state=He});return me}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),A.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(c,h){h&&h.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",h.filter,null,h);const _=this._getSourceCaches(c);let x=[];for(const w of _)x=x.concat(Er(w,h));return x}addSourceType(c,h,_){return Ho.getSourceType(c)?_(new Error(`A source type called "${c}" already exists.`)):(Ho.setSourceType(c,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:h.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(c,h={}){this._checkLoaded();const _=this.light.getLight();let x=!1;for(const P in c)if(!v(c[P],_[P])){x=!0;break}if(!x)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(c,h),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,h=1){if(this._checkLoaded(),!c)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=c;if(h===1){if(typeof _.source=="object"){const x="terrain-dem-src";this.addSource(x,_.source),_=o.clone$1(_),_=o.extend(_,{source:x})}if(this._validate(o.validateTerrain,"terrain",_))return}if(!this.terrain||this.terrain&&h!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,h)}else{const x=this.terrain,w=x.get();for(const P of Object.keys(o.spec.terrain))!_.hasOwnProperty(P)&&o.spec.terrain[P].default&&(_[P]=o.spec.terrain[P].default);for(const P in _)if(!v(_[P],w[P])){x.set(_),this.stylesheet.terrain=_;const A=this._setTransitionParameters({duration:0});x.updateTransitions(A);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const h=this.fog=new Je(c,this.map.transform);this.stylesheet.fog=c;const _=this._setTransitionParameters({duration:0});h.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog,_=h.get();Object.keys(c).length===0&&h.set(c);for(const x in c)if(!v(c[x],_[x])){h.set(c),this.stylesheet.fog=c;const w=this._setTransitionParameters({duration:0});h.updateTransitions(w);break}}else this._createFog(c);this._markersNeedUpdate=!0}_setTransitionParameters(c){return{now:o.exported.now(),transition:o.extend(c,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const c=this._order.filter(_=>this.isLayerDraped(this._layers[_])),h=this._order.filter(_=>!this.isLayerDraped(this._layers[_]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...h)}_createTerrain(c,h){const _=this.terrain=new Be(c,h);this.stylesheet.terrain=c,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const x=this._setTransitionParameters({duration:0});_.updateTransitions(x)}_force3DLayerUpdate(){for(const c in this._layers){const h=this._layers[c];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const h=this._layers[c];h.type==="symbol"&&this._updateLayer(h)}}_validate(c,h,_,x,w={}){return(!w||w.validate!==!1)&&ws(this,c.call(o.validateStyle,o.extend({key:h,style:this.serialize(),value:_,styleSpec:o.spec},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this._sourceCaches)this._sourceCaches[c].clearTiles(),this._sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){const h=this._getSourceCaches(c);for(const _ of h)_.clearTiles()}_reloadSource(c){const h=this._getSourceCaches(c);for(const _ of h)_.resume(),_.reload()}_reloadSources(){for(const c of this._getSources())c.reload&&c.reload()}_updateSources(c){for(const h in this._sourceCaches)this._sourceCaches[h].update(c)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const h=this._sourceCaches[c];h.resume(),h.reload()}}_updatePlacement(c,h,_,x,w=!1){let P=!1,A=!1;const L={};for(const V of this._order){const U=this._layers[V];if(U.type!=="symbol")continue;if(!L[U.source]){const le=this._getLayerSourceCache(U);if(!le)continue;L[U.source]=le.getRenderableIds(!0).map(pe=>le.getTileByID(pe)).sort((pe,ge)=>ge.tileID.overscaledZ-pe.tileID.overscaledZ||(pe.tileID.isLessThan(ge.tileID)?-1:1))}const J=this.crossTileSymbolIndex.addLayer(U,L[U.source],c.center.lng,c.projection);P=P||J}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),c.zoom))&&(this.pauseablePlacement=new Eh(c,this._order,w,h,_,x,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),A=!0),P&&this.pauseablePlacement.placement.setStale()),A||P)for(const V of this._order){const U=this._layers[V];U.type==="symbol"&&this.placement.updateLayerOpacities(U,L[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,h,_){this.imageManager.getImages(h.icons,_),this._updateTilesForChangedImages();const x=w=>{w&&w.setDependencies(h.tileID.key,h.type,h.icons)};x(this._otherSourceCaches[h.source]),x(this._symbolSourceCaches[h.source])}getGlyphs(c,h,_){this.glyphManager.getGlyphs(h.stacks,_)}getResource(c,h,_){return o.makeRequest(h,_)}_getSourceCache(c){return this._otherSourceCaches[c]}_getLayerSourceCache(c){return c.type==="symbol"?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}_getSourceCaches(c){const h=[];return this._otherSourceCaches[c]&&h.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&h.push(this._symbolSourceCaches[c]),h}_isSourceCacheLoaded(c){const h=this._getSourceCaches(c);return h.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${c}'`))),!1):h.every(_=>_.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ho.getSourceType=function(m){return An[m]},Ho.setSourceType=function(m,c){An[m]=c},Ho.registerForPluginStateChange=o.registerForPluginStateChange;var rd=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Es="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Ss=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,hu=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ts=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let S={},I={};const F=[];$e(rd,F),$e(Ss,F),$e(hu,F),$e(Ts,F),S=Pe("",Ss),I=Pe(Ts,hu);const H=Pe(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),ne=rd,re=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var se={background:Pe(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Pe(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Pe(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Pe("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Pe(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Pe(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Pe("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Pe("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Pe("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Pe(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Pe(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Pe(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Pe(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Pe(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Pe(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Pe(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Pe(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Pe(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Pe(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Pe(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Pe(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Pe(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Pe(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Pe(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Pe(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Pe(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Es),skyboxGradient:Pe(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Es),skyboxCapture:Pe(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Pe(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Pe(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function $e(m,c){const h=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of h)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=_.split(" ");for(const w of x)c.includes(w)||c.push(w)}}function Pe(m,c){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=c.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),x={},w=[...F];return $e(m,w),$e(c,w),{fragmentSource:m=m.replace(h,(P,A,L,V,U)=>(x[U]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${U}
varying ${L} ${V} ${U};
#else
uniform ${L} ${V} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${L} ${V} ${U} = u_${U};
#endif
`)),vertexSource:c=c.replace(h,(P,A,L,V,U)=>{const J=V==="float"?"vec2":"vec4",le=U.match(/color/)?"color":J;return x[U]?A==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${L} ${J} a_${U};
varying ${L} ${V} ${U};
#else
uniform ${L} ${V} u_${U};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${L} ${V} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${le}(a_${U}, u_${U}_t);
#else
    ${L} ${V} ${U} = u_${U};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${L} ${J} a_${U};
#else
uniform ${L} ${V} u_${U};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${L} ${V} ${U} = a_${U};
#else
    ${L} ${V} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${L} ${V} ${U} = unpack_mix_${le}(a_${U}, u_${U}_t);
#else
    ${L} ${V} ${U} = u_${U};
#endif
`}),staticAttributes:_,usedDefines:w}}class ot{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,h,_,x,w,P,A){this.context=c;let L=this.boundPaintVertexBuffers.length!==x.length;for(let U=0;!L&&U<x.length;U++)this.boundPaintVertexBuffers[U]!==x[U]&&(L=!0);let V=this.boundDynamicVertexBuffers.length!==A.length;for(let U=0;!V&&U<A.length;U++)this.boundDynamicVertexBuffers[U]!==A[U]&&(V=!0);if(!c.extVertexArrayObject||!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==_||L||V||this.boundIndexBuffer!==w||this.boundVertexOffset!==P)this.freshBind(h,_,x,w,P,A);else{c.bindVertexArrayOES.set(this.vao);for(const U of A)U&&U.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(c,h,_,x,w,P){let A;const L=c.numAttributes,V=this.context,U=V.gl;if(V.extVertexArrayObject)this.vao&&this.destroy(),this.vao=V.extVertexArrayObject.createVertexArrayOES(),V.bindVertexArrayOES.set(this.vao),A=0,this.boundProgram=c,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=x,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=P;else{A=V.currentNumAttributes||0;for(let J=L;J<A;J++)U.disableVertexAttribArray(J)}h.enableAttributes(U,c),h.bind(),h.setVertexAttribPointers(U,c,w);for(const J of _)J.enableAttributes(U,c),J.bind(),J.setVertexAttribPointers(U,c,w);for(const J of P)J&&(J.enableAttributes(U,c),J.bind(),J.setVertexAttribPointers(U,c,w));x&&x.bind(),V.currentNumAttributes=L}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function St(m,c){const h=Math.pow(2,c.canonical.z),_=c.canonical.y;return[new o.MercatorCoordinate(0,_/h).toLngLat().lat,new o.MercatorCoordinate(0,(_+1)/h).toLngLat().lat]}function Lt(m,c,h,_,x,w,P){const A=m.context,L=A.gl,V=h.fbo;if(!V)return;m.prepareDrawTile();const U=m.useProgram("hillshade");A.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,V.colorAttachment.get());const J=((me,ve,Q,he)=>{const Ee=Q.paint.get("hillshade-shadow-color"),ke=Q.paint.get("hillshade-highlight-color"),Ve=Q.paint.get("hillshade-accent-color");let He=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(He-=me.transform.angle);const We=!me.options.moving;return{u_matrix:he||me.transform.calculateProjMatrix(ve.tileID.toUnwrapped(),We),u_image:0,u_latrange:St(0,ve.tileID),u_light:[Q.paint.get("hillshade-exaggeration"),He],u_shadow:Ee,u_highlight:ke,u_accent:Ve}})(m,h,_,m.terrain?c.projMatrix:null);m.prepareDrawProgram(A,U,c.toUnwrapped());const{tileBoundsBuffer:le,tileBoundsIndexBuffer:pe,tileBoundsSegments:ge}=m.getTileBoundsBuffers(h);U.draw(A,L.TRIANGLES,x,w,P,o.CullFaceMode.disabled,J,_.id,le,pe,ge)}function _t(m,c,h){if(!c.needsDEMTextureUpload)return;const _=m.context,x=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||m.getTileTexture(h.stride);const w=h.getPixels();c.demTexture?c.demTexture.update(w,{premultiply:!1}):c.demTexture=new o.Texture(_,w,x.RGBA,{premultiply:!1}),c.needsDEMTextureUpload=!1}function tn(m,c,h,_,x,w){const P=m.context,A=P.gl;if(!c.dem)return;const L=c.dem;if(P.activeTexture.set(A.TEXTURE1),_t(m,c,L),!c.demTexture)return;c.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);const V=L.dim;P.activeTexture.set(A.TEXTURE0);let U=c.fbo;if(!U){const ge=new o.Texture(P,{width:V,height:V,data:null},A.RGBA);ge.bind(A.LINEAR,A.CLAMP_TO_EDGE),U=c.fbo=P.createFramebuffer(V,V,!0),U.colorAttachment.set(ge.texture)}P.bindFramebuffer.set(U.framebuffer),P.viewport.set([0,0,V,V]);const{tileBoundsBuffer:J,tileBoundsIndexBuffer:le,tileBoundsSegments:pe}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(P,A.TRIANGLES,_,x,w,o.CullFaceMode.disabled,((ge,me)=>{const ve=me.stride,Q=o.create();return o.ortho(Q,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(Q,Q,[0,-o.EXTENT,0]),{u_matrix:Q,u_image:1,u_dimension:[ve,ve],u_zoom:ge.overscaledZ,u_unpack:me.unpackVector}})(c.tileID,L),h.id,J,le,pe),c.needsHillshadePrepare=!1}const ir=m=>({u_matrix:new o.UniformMatrix4f(m),u_image0:new o.Uniform1i(m),u_skirt_height:new o.Uniform1f(m)}),Cr=(m,c)=>({u_matrix:m,u_image0:0,u_skirt_height:c}),_r=(m,c,h,_,x,w,P,A,L,V,U,J,le,pe,ge)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:h,u_zoom_transition:x,u_merc_center:w,u_image0:0,u_frustum_tl:P,u_frustum_tr:A,u_frustum_br:L,u_frustum_bl:V,u_globe_pos:U,u_globe_radius:J,u_viewport:le,u_grid_matrix:ge?Float32Array.from(ge):new Float32Array(9),u_skirt_height:pe});function Di(m,c){return m!=null&&c!=null&&!(!m.hasData()||!c.hasData())&&m.demTexture!=null&&c.demTexture!=null&&m.tileID.key!==c.tileID.key}const ni=new class{constructor(){this.operations={}}newMorphing(m,c,h,_,x){if(m in this.operations){const w=this.operations[m];w.to.tileID.key!==h.tileID.key&&(w.queued=h)}else this.operations[m]={startTime:_,phase:0,duration:x,from:c,to:h,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const c=this.operations[m];return{from:c.from,to:c.to,phase:c.phase}}update(m){for(const c in this.operations){const h=this.operations[c];for(h.phase=(m-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,m)){delete this.operations[c];break}}}_nextOp(m,c){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=c,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},Eo={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function ia(m){return 6*Math.pow(1.5,22-m)}function kr(m,c){const h=1<<m.z;return!c&&(m.x===0||m.x===h-1)||m.y===0||m.y===h-1}const Va=m=>({u_matrix:m});function Mr(m,c,h,_,x){if(x>0){const w=o.exported.now(),P=(w-m.timeAdded)/x,A=c?(w-c.timeAdded)/x:-1,L=h.getSource(),V=_.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),U=!c||Math.abs(c.tileID.overscaledZ-V)>Math.abs(m.tileID.overscaledZ-V),J=U&&m.refreshedUponExpiration?1:o.clamp(U?P:1-A,0,1);return m.refreshedUponExpiration&&P>=1&&(m.refreshedUponExpiration=!1),c?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}class _i extends o.SourceCache{constructor(c){const h={type:"raster-dem",maxzoom:c.transform.maxZoom},_=new it(un(),null),x=Ln("mock-dem",h,_,c.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,h){c.state="loaded",h(null)}}class Js extends o.SourceCache{constructor(c){const h=Ln("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new it(un(),null),c.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,h,_){if(c.freezeTileCoverage)return;this.transform=c;const x=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,P)=>{if(w[P.key]="",!this._tiles[P.key]){const A=new o.Tile(P,this._source.tileSize*P.overscaleFactor(),c.tileZoom);A.state="loaded",this._tiles[P.key]=A}return w},{});for(const w in this._tiles)w in x||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(c){const h=this.proxyCachedFBO[c];if(h!==void 0){const _=Object.values(h);this.renderCachePool.push(..._),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class vc extends o.OverscaledTileID{constructor(c,h,_){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=h,this.projMatrix=_}}class _a extends o.Elevation{constructor(c,h){super(),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,x,w]=function(L){const V=new o.StructArrayLayout2i4,U=new o.StructArrayLayout3ui6,J=131;V.reserve(17161),U.reserve(33800);const le=o.EXTENT/128,pe=o.EXTENT+le/2,ge=pe+le;for(let ve=-le;ve<ge;ve+=le)for(let Q=-le;Q<ge;Q+=le){const he=Q<0||Q>pe||ve<0||ve>pe?24575:0,Ee=o.clamp(Math.round(Q),0,o.EXTENT),ke=o.clamp(Math.round(ve),0,o.EXTENT);V.emplaceBack(Ee+he,ke)}const me=(ve,Q)=>{const he=Q*J+ve;U.emplaceBack(he+1,he,he+J),U.emplaceBack(he+J,he+J+1,he+1)};for(let ve=1;ve<129;ve++)for(let Q=1;Q<129;Q++)me(Q,ve);return[0,129].forEach(ve=>{for(let Q=0;Q<130;Q++)me(Q,ve),me(ve,Q)}),[V,U,32768]}(),P=c.context;this.gridBuffer=P.createVertexBuffer(_,o.posAttributes.members),this.gridIndexBuffer=P.createIndexBuffer(x),this.gridSegments=o.SegmentVector.simpleSegment(0,0,_.length,x.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,_.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Js(h.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const A=P.gl;this._overlapStencilMode=new o.StencilMode({func:A.GEQUAL,mask:255},0,255,A.KEEP,A.KEEP,A.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new _i(h.map)}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),c.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=c,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(c,h,_){if(c&&c.terrain){this._style!==c&&(this.style=c),this.enabled=!0;const x=c.terrain.properties;this.sourceCache=c.terrain.drapeRenderMode===0?this._mockSourceCache:c._getSourceCache(x.get("source")),this._exaggeration=x.get("exaggeration");const w=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const P=this.getScaledDemTileSize();this.sourceCache.update(h,P,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),h.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const c=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||c.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${c.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${c.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(c){c.coord&&c.dataType==="source"?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):c.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._sourceCaches)this._style._sourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=h.getIds().map(L=>{const V=h.getTileByID(L).tileID;return V.projMatrix=_.calculateProjMatrix(V.toUnwrapped()),V});(function(L,V){const U=V.transform.pointCoordinate(V.transform.getCameraPoint()),J=new o.Point(U.x,U.y);L.sort((le,pe)=>{if(pe.overscaledZ-le.overscaledZ)return pe.overscaledZ-le.overscaledZ;const ge=new o.Point(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),me=new o.Point(pe.canonical.x+(1<<pe.canonical.z)*pe.wrap,pe.canonical.y),ve=J.mult(1<<le.canonical.z);return ve.x-=.5,ve.y-=.5,ve.distSqr(ge)-ve.distSqr(me)})})(x,this.painter),this._previousZoom=_.zoom;const w=this.proxyToSource||{};this.proxyToSource={},x.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const P=this._style._sourceCaches;for(const L in P){const V=P[L];if(!V.used||(V!==this.sourceCache&&this.resetTileLookupCache(V.id),this._setupProxiedCoordsForOrtho(V,c[L],w),V.usedForTerrain))continue;const U=c[L];V.getSource().reparseOverscaled&&this._assignTerrainTiles(U)}this.proxiedCoords[h.id]=x.map(L=>new vc(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const A={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const V=this.terrainTileForTile[L.key];if(!V)continue;const U=V.tileID.key;U in A||(this._visibleDemTiles.push(V),A[U]=U)}}_assignTerrainTiles(c){this._initializing||c.forEach(h=>{if(this.terrainTileForTile[h.key])return;const _=this._findTileCoveringTileID(h,this.sourceCache);_&&(this.terrainTileForTile[h.key]=_)})}_prepareDEMTextures(){const c=this.painter.context,h=c.gl;for(const _ in this.terrainTileForTile){const x=this.terrainTileForTile[_],w=x.dem;!w||x.demTexture&&!x.needsDEMTextureUpload||(c.activeTexture.set(h.TEXTURE1),_t(this.painter,x,w))}}_prepareDemTileUniforms(c,h,_,x){if(!h||h.demTexture==null)return!1;const w=c.tileID.canonical,P=Math.pow(2,h.tileID.canonical.z-w.z),A=x||"";return _[`u_dem_tl${A}`]=[w.x*P%1,w.y*P%1],_[`u_dem_scale${A}`]=P,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,h=c.gl;if(!this._emptyDepthBufferTexture){const _=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(c,_,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const h=this._visibleDemTiles.reduce((_,x)=>{if(!x.dem)return _;const w=x.dem.tree.minimums[0];return w>0&&c++,_+w},0);return c?h/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,h=c.gl;c.activeTexture.set(h.TEXTURE2);const _=this._getLoadedAreaMinimum(),x=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(_,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(x,{premultiply:!1}):w=this._emptyDEMTexture=new o.Texture(c,x,h.RGBA,{premultiply:!1}),w}setupElevationDraw(c,h,_){const x=this.painter.context,w=x.gl,P=(A=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(A),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var A;P.u_dem_size=this.sourceCache.getSource().tileSize,P.u_exaggeration=this.exaggeration();let L=null,V=null,U=1;if(_&&_.morphing&&this._useVertexMorphing){const J=_.morphing.srcDemTile,le=_.morphing.dstDemTile;U=_.morphing.phase,J&&le&&(this._prepareDemTileUniforms(c,J,P,"_prev")&&(V=J),this._prepareDemTileUniforms(c,le,P)&&(L=le))}if(V&&L?(x.activeTexture.set(w.TEXTURE2),L.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),x.activeTexture.set(w.TEXTURE4),V.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),P.u_dem_lerp=U):(L=this.terrainTileForTile[c.tileID.key],x.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(c,L,P)?L.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),x.activeTexture.set(w.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(P.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),P.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&L){const J=(1<<L.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;P.u_meter_to_dem=J}if(_&&_.labelPlaneMatrixInv&&(P.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),h.setTerrainUniformValues(x,P),this.painter.transform.projection.name==="globe"){const J=this.globeUniformValues(this.painter.transform,c.tileID.canonical,_&&_.useDenormalizedUpVectorScale);h.setGlobeUniformValues(x,J)}}globeUniformValues(c,h,_){const x=c.projection;return{u_tile_tl_up:x.upVector(h,0,0),u_tile_tr_up:x.upVector(h,o.EXTENT,0),u_tile_br_up:x.upVector(h,o.EXTENT,o.EXTENT),u_tile_bl_up:x.upVector(h,0,o.EXTENT),u_tile_up_scale:_?o.globeMetersToEcef(1):x.upVectorScale(h,c.center.lat,c.worldSize).metersToTile}}renderToBackBuffer(c){const h=this.painter,_=this.painter.context;c.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,w,P,A,L){if(x.transform.projection.name==="globe")(function(V,U,J,le,pe){const ge=V.context,me=ge.gl;let ve,Q;const he=V.options.showTerrainWireframe?2:0,Ee=V.transform,ke=o.globeUseCustomAntiAliasing(V,ge,Ee),Ve=($t,dt)=>{if(Q===$t)return;const Ct=[Eo[$t],"PROJECTION_GLOBE_VIEW"];ke&&Ct.push("CUSTOM_ANTIALIASING"),dt&&Ct.push(Eo[he]),ve=V.useProgram("globeRaster",null,Ct),Q=$t},He=V.colorModeForRenderPass(),We=new o.DepthMode(me.LEQUAL,o.DepthMode.ReadWrite,V.depthRangeFor3D);ni.update(pe);const nt=o.calculateGlobeMercatorMatrix(Ee),et=[o.mercatorXfromLng(Ee.center.lng),o.mercatorYfromLat(Ee.center.lat)],ht=he?[!1,!0]:[!1],Vt=V.globeSharedBuffers,st=[Ee.width*o.exported.devicePixelRatio,Ee.height*o.exported.devicePixelRatio],Pt=Float32Array.from(Ee.globeMatrix),mt={useDenormalizedUpVectorScale:!0};if(ht.forEach($t=>{const dt=V.transform,Ct=ia(dt.zoom)*U.exaggeration();Q=-1;const Ht=$t?me.LINES:me.TRIANGLES;for(const zt of le){const Gt=J.getTile(zt),zn=o.StencilMode.disabled,er=U.prevTerrainTileForTile[zt.key],Cn=U.terrainTileForTile[zt.key];Di(er,Cn)&&ni.newMorphing(zt.key,er,Cn,pe,250),ge.activeTexture.set(me.TEXTURE0),Gt.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE);const Gn=ni.getMorphValuesForProxy(zt.key),Tr=Gn?1:0;Gn&&o.extend$1(mt,{morphing:{srcDemTile:Gn.from,dstDemTile:Gn.to,phase:o.easeCubicInOut(Gn.phase)}});const xr=o.tileCornersToBounds(zt.canonical),Mn=o.getLatitudinalLod(xr.getCenter().lat),jr=o.getGridMatrix(zt.canonical,xr,Mn,dt.worldSize/dt._pixelsPerMercatorPixel),Hr=o.globeNormalizeECEF(o.globeTileBounds(zt.canonical)),qr=_r(dt.projMatrix,Pt,nt,Hr,o.globeToMercatorTransition(dt.zoom),et,dt.frustumCorners.TL,dt.frustumCorners.TR,dt.frustumCorners.BR,dt.frustumCorners.BL,dt.globeCenterInViewSpace,dt.globeRadius,st,Ct,jr);if(Ve(Tr,$t),U.setupElevationDraw(Gt,ve,mt),V.prepareDrawProgram(ge,ve,zt.toUnwrapped()),Vt){const[Gr,Ko,To]=$t?Vt.getWirefameBuffers(V.context,Mn):Vt.getGridBuffers(Mn,Ct!==0);ve.draw(ge,Ht,We,zn,He,o.CullFaceMode.backCCW,qr,"globe_raster",Gr,Ko,To)}}}),Vt){const $t=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ke&&$t.push("CUSTOM_ANTIALIASING"),ve=V.useProgram("globeRaster",null,$t);for(const dt of le){const{x:Ct,y:Ht,z:zt}=dt.canonical,Gt=Ht===0,zn=Ht===(1<<zt)-1,[er,Cn,Gn,Tr]=Vt.getPoleBuffers(zt);if(Tr&&(Gt||zn)){const xr=J.getTile(dt);ge.activeTexture.set(me.TEXTURE0),xr.texture.bind(me.LINEAR,me.CLAMP_TO_EDGE);let Mn=o.globePoleMatrixForTile(zt,Ct,Ee);const jr=o.globeNormalizeECEF(o.globeTileBounds(dt.canonical)),Hr=(qr,Gr)=>qr.draw(ge,me.TRIANGLES,We,o.StencilMode.disabled,He,o.CullFaceMode.disabled,_r(Ee.projMatrix,Mn,Mn,jr,0,et,Ee.frustumCorners.TL,Ee.frustumCorners.TR,Ee.frustumCorners.BR,Ee.frustumCorners.BL,Ee.globeCenterInViewSpace,Ee.globeRadius,st,0),"globe_pole_raster",Gr,Gn,Tr);U.setupElevationDraw(xr,ve,mt),V.prepareDrawProgram(ge,ve,dt.toUnwrapped()),Gt&&Hr(ve,er),zn&&(Mn=o.scale(o.create(),Mn,[1,-1,1]),Hr(ve,Cn))}}}})(x,w,P,A,L);else{const V=x.context,U=V.gl;let J,le;const pe=x.options.showTerrainWireframe?2:0,ge=(Ee,ke)=>{if(le===Ee)return;const Ve=[Eo[Ee]];ke&&Ve.push(Eo[pe]),J=x.useProgram("terrainRaster",null,Ve),le=Ee},me=x.colorModeForRenderPass(),ve=new o.DepthMode(U.LEQUAL,o.DepthMode.ReadWrite,x.depthRangeFor3D);ni.update(L);const Q=x.transform,he=ia(Q.zoom)*w.exaggeration();(pe?[!1,!0]:[!1]).forEach(Ee=>{le=-1;const ke=Ee?U.LINES:U.TRIANGLES,[Ve,He]=Ee?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const We of A){const nt=P.getTile(We),et=o.StencilMode.disabled,ht=w.prevTerrainTileForTile[We.key],Vt=w.terrainTileForTile[We.key];Di(ht,Vt)&&ni.newMorphing(We.key,ht,Vt,L,250),V.activeTexture.set(U.TEXTURE0),nt.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const st=ni.getMorphValuesForProxy(We.key),Pt=st?1:0;let mt;st&&(mt={morphing:{srcDemTile:st.from,dstDemTile:st.to,phase:o.easeCubicInOut(st.phase)}});const $t=Cr(We.projMatrix,kr(We.canonical,Q.renderWorldCopies)?he/10:he);ge(Pt,Ee),w.setupElevationDraw(nt,J,mt),x.prepareDrawProgram(V,J,We.toUnwrapped()),J.draw(V,ke,ve,et,me,o.CullFaceMode.backCCW,$t,"terrain_raster",w.gridBuffer,Ve,He)}})}}(h,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(this._drapedRenderBatches.length===0)return c+1;this.renderingToTexture=!0;const h=this.painter,_=this.painter.context,x=this.proxySourceCache,w=this.proxiedCoords[x.id],P=this._drapedRenderBatches.shift(),A=[],L=h.style.order;let V=0;for(const U of w){const J=x.getTileByID(U.proxyTileKey),le=x.proxyCachedFBO[U.key]?x.proxyCachedFBO[U.key][c]:void 0,pe=le!==void 0?x.renderCache[le]:this.pool[V++],ge=le!==void 0;if(J.texture=pe.tex,ge&&!pe.dirty){A.push(J.tileID);continue}let me;_.bindFramebuffer.set(pe.fb.framebuffer),this.renderedToTile=!1,pe.dirty&&(_.clear({color:o.Color.transparent,stencil:0}),pe.dirty=!1);for(let ve=P.start;ve<=P.end;++ve){const Q=h.style._layers[L[ve]];if(Q.isHidden(h.transform.zoom))continue;const he=h.style._getLayerSourceCache(Q),Ee=he?this.proxyToSource[U.key][he.id]:[U];if(!Ee)continue;const ke=Ee;_.viewport.set([0,0,pe.fb.width,pe.fb.height]),me!==(he?he.id:null)&&(this._setupStencil(pe,Ee,Q,he),me=he?he.id:null),h.renderLayer(h,he,Q,ke)}this.renderedToTile?(pe.dirty=!0,A.push(J.tileID)):ge||--V,V===5&&(V=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,h.width,h.height]),P.end+1}postRender(){}renderCacheEfficiency(c){const h=c.order.length;if(h===0)return{efficiency:100};let _,x=0,w=0,P=!1;for(let A=0;A<h;++A){const L=c._layers[c.order[A]];this._style.isLayerDraped(L)?(P&&++x,++w):P||(P=!0,_=L.id)}return w===0?{efficiency:100}:{efficiency:100*(1-x/w),firstUndrapedLayer:_}}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{c=Math.min(c,h.dem.tree.minimums[0])}),c===0?c:(c-30)*this._exaggeration}raycast(c,h,_){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const P=w.tileID,A=1<<P.overscaledZ,{x:L,y:V}=P.canonical,U=L/A,J=(L+1)/A,le=V/A,pe=(V+1)/A;return{minx:U,miny:le,maxx:J,maxy:pe,t:w.dem.tree.raycastRoot(U,le,J,pe,c,h,_),tile:w}});x.sort((w,P)=>(w.t!==null?w.t:Number.MAX_VALUE)-(P.t!==null?P.t:Number.MAX_VALUE));for(const w of x){if(w.t==null)return null;const P=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,c,h,_);if(P!=null)return P}return null}_createFBO(){const c=this.painter.context,h=c.gl,_=this.drapeBufferSize;c.activeTexture.set(h.TEXTURE0);const x=new o.Texture(c,{width:_[0],height:_[1],data:null},h.RGBA);x.bind(h.LINEAR,h.CLAMP_TO_EDGE);const w=c.createFramebuffer(_[0],_[1],!1);return w.colorAttachment.set(x.texture),w.depthAttachment=new Ue(c,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&!c.extTextureFilterAnisotropicForceOff&&h.texParameterf(h.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:w,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const h=this._style._layers[c],_=h.isHidden(this.painter.transform.zoom);return h.type==="custom"?!_&&h.shouldRedrape():!_&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let c=!1;for(const _ of this._style._getSources())if(_ instanceof At){c=!0;break}if(!c)return;const h={};for(let _=0;_<this._style.order.length;++_){const x=this._style._layers[this._style.order[_]],w=this._style._getLayerSourceCache(x);if(w&&!h[w.id]&&!x.isHidden(this.painter.transform.zoom)&&x.type==="line"&&x.widthExpression()instanceof o.ZoomDependentExpression){h[w.id]=!0;for(const P of this.proxyCoords){const A=this.proxyToSource[P.key][w.id];if(A)for(const L of A)this._clearRenderCacheForTile(w.id,L)}}}}_clearRasterLayersFromRenderCache(){let c=!1;for(const _ in this._style._sourceCaches)if(this._style._sourceCaches[_]._source instanceof Tt){c=!0;break}if(!c)return;const h={};for(let _=0;_<this._style.order.length;++_){const x=this._style._layers[this._style.order[_]],w=this._style._getLayerSourceCache(x);if(!w||h[w.id]||x.isHidden(this.painter.transform.zoom)||x.type!=="raster")continue;const P=x.paint.get("raster-fade-duration");for(const A of this.proxyCoords){const L=this.proxyToSource[A.key][w.id];if(L)for(const V of L){const U=Mr(w.getTile(V),w.findLoadedParent(V,0),w,this.painter.transform,P);(U.opacity!==1||U.mix!==0)&&this._clearRenderCacheForTile(w.id,V)}}}}_setupDrapedRenderBatches(){const c=this._style.order,h=c.length;if(h===0)return;const _=[];let x,w=0,P=this._style._layers[c[w]];for(;!this._style.isLayerDraped(P)&&P.isHidden(this.painter.transform.zoom)&&++w<h;)P=this._style._layers[c[w]];for(;w<h;++w){const A=this._style._layers[c[w]];A.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(A)?x===void 0&&(x=w):x!==void 0&&(_.push({start:x,end:w-1}),x=void 0))}x!==void 0&&_.push({start:x,end:w-1}),this._drapedRenderBatches=_}_setupRenderCache(c){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const P=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let A=0;A<P.length;++A){const L=Object.values(P[A]);h.renderCachePool.push(...L)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,x=this._tilesDirty;for(let P=_.length-1;P>=0;P--){const A=_[P];if(h.getTileByID(A.key),h.proxyCachedFBO[A.key]!==void 0){const L=c[A.key],V=this.proxyToSource[A.key];let U=0;for(const J in V){const le=V[J],pe=L[J];if(!pe||pe.length!==le.length||le.some((ge,me)=>ge!==pe[me]||x[J]&&x[J].hasOwnProperty(ge.key))){U=-1;break}++U}for(const J in h.proxyCachedFBO[A.key])h.renderCache[h.proxyCachedFBO[A.key][J]].dirty=U<0||U!==Object.values(L).length}}const w=[...this._drapedRenderBatches];w.sort((P,A)=>A.end-A.start-(P.end-P.start));for(const P of w)for(const A of _){if(h.proxyCachedFBO[A.key])continue;let L=h.renderCachePool.pop();L===void 0&&h.renderCache.length<50&&(L=h.renderCache.length,h.renderCache.push(this._createFBO())),L!==void 0&&(h.proxyCachedFBO[A.key]={},h.proxyCachedFBO[A.key][P.start]=L,h.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(c,h,_,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,P=w.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let A;if(_.isTileClipped())A=h.length,this._overlapStencilMode.test={func:P.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);A=1,this._overlapStencilMode.test={func:P.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+A>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=A,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(c,h){const _=this.painter,x=this.painter.context,w=x.gl;_._tileClippingMaskIDs={},x.setColorMode(o.ColorMode.disabled),x.setDepthMode(o.DepthMode.disabled);const P=_.useProgram("clippingMask");for(const A of c){const L=_._tileClippingMaskIDs[A.key]=--h;P.draw(x,w.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:w.ALWAYS,mask:0},L,255,w.KEEP,w.KEEP,w.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Va(A.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(c){const h=this.painter.transform;if(c.x<0||c.x>h.width||c.y<0||c.y>h.height)return null;const _=[c.x,c.y,1,1];o.transformMat4$1(_,_,h.pixelMatrixInverse),o.scale$1(_,_,1/_[3]),_[0]/=h.worldSize,_[1]/=h.worldSize;const x=h._camera.position,w=o.mercatorZfromAltitude(1,h.center.lat),P=[x[0],x[1],x[2]/w,0],A=o.subtract([],_.slice(0,3),P);o.normalize(A,A);const L=this.raycast(P,A,this._exaggeration);return L!==null&&L?(o.scaleAndAdd(P,P,A,L),P[3]=P[2],P[2]*=w,P):null}drawDepth(){const c=this.painter,h=c.context,_=this.proxySourceCache,x=Math.ceil(c.width),w=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===x&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const P=h.gl,A=h.createFramebuffer(x,w,!0);h.activeTexture.set(P.TEXTURE0);const L=new o.Texture(h,{width:x,height:w,data:null},P.RGBA);L.bind(P.NEAREST,P.CLAMP_TO_EDGE),A.colorAttachment.set(L.texture);const V=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,x,w);A.depthAttachment.set(V),this._depthFBO=A,this._depthTexture=L}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,x,w]),function(P,A,L,V){if(P.transform.projection.name==="globe")return;const U=P.context,J=U.gl;U.clear({depth:1});const le=P.useProgram("terrainDepth"),pe=new o.DepthMode(J.LESS,o.DepthMode.ReadWrite,P.depthRangeFor3D);for(const ge of V){const me=L.getTile(ge),ve=Cr(ge.projMatrix,0);A.setupElevationDraw(me,le),le.draw(U,J.TRIANGLES,pe,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,ve,"terrain_depth",A.gridBuffer,A.gridIndexBuffer,A.gridNoSkirtSegments)}}(c,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,h,_){if(c.getSource()instanceof On)return this._setupProxiedCoordsForImageSource(c,h,_);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const x=this.proxiedCoords[c.id]=[],w=this.proxyCoords;for(let A=0;A<w.length;A++){const L=w[A],V=this._findTileCoveringTileID(L,c);if(V){const U=this._createProxiedId(L,V,_[L.key]&&_[L.key][c.id]);x.push(U),this.proxyToSource[L.key][c.id]=[U]}}let P=!1;for(let A=0;A<h.length;A++){const L=c.getTile(h[A]);if(!L||!L.hasData())continue;const V=this._findTileCoveringTileID(L.tileID,this.proxySourceCache);if(V&&V.tileID.canonical.z!==L.tileID.canonical.z){const U=this.proxyToSource[V.tileID.key][c.id],J=this._createProxiedId(V.tileID,L,_[V.tileID.key]&&_[V.tileID.key][c.id]);U?U.splice(U.length-1,0,J):this.proxyToSource[V.tileID.key][c.id]=[J],x.push(J),P=!0}}this._sourceTilesOverlap[c.id]=P}_setupProxiedCoordsForImageSource(c,h,_){if(!c.getSource().loaded())return;const x=this.proxiedCoords[c.id]=[],w=this.proxyCoords,P=c.getSource(),A=new o.Point(P.tileID.x,P.tileID.y)._div(1<<P.tileID.z),L=P.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((U,J)=>(U.min.x=Math.min(U.min.x,J.x-A.x),U.min.y=Math.min(U.min.y,J.y-A.y),U.max.x=Math.max(U.max.x,J.x-A.x),U.max.y=Math.max(U.max.y,J.y-A.y),U),{min:new o.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),V=(U,J)=>{const le=U.wrap+U.canonical.x/(1<<U.canonical.z),pe=U.canonical.y/(1<<U.canonical.z),ge=o.EXTENT/(1<<U.canonical.z),me=J.wrap+J.canonical.x/(1<<J.canonical.z),ve=J.canonical.y/(1<<J.canonical.z);return le+ge<me+L.min.x||le>me+L.max.x||pe+ge<ve+L.min.y||pe>ve+L.max.y};for(let U=0;U<w.length;U++){const J=w[U];for(let le=0;le<h.length;le++){const pe=c.getTile(h[le]);if(!pe||!pe.hasData()||V(J,pe.tileID))continue;const ge=this._createProxiedId(J,pe,_[J.key]&&_[J.key][c.id]),me=this.proxyToSource[J.key][c.id];me?me.push(ge):this.proxyToSource[J.key][c.id]=[ge],x.push(ge)}}}_createProxiedId(c,h,_){let x=this.orthoMatrix;if(_){const w=_.find(P=>P.key===h.tileID.key);if(w)return w}if(h.tileID.key!==c.key){const w=c.canonical.z-h.tileID.canonical.z;let P,A,L;x=o.create();const V=h.tileID.wrap-c.wrap<<c.overscaledZ;w>0?(P=o.EXTENT>>w,A=P*((h.tileID.canonical.x<<w)-c.canonical.x+V),L=P*((h.tileID.canonical.y<<w)-c.canonical.y)):(P=o.EXTENT<<-w,A=o.EXTENT*(h.tileID.canonical.x-(c.canonical.x+V<<-w)),L=o.EXTENT*(h.tileID.canonical.y-(c.canonical.y<<-w))),o.ortho(x,0,P,0,P,0,1),o.translate(x,x,[A,L,0])}return new vc(h.tileID,c.key,x)}_findTileCoveringTileID(c,h){let _=h.getTile(c);if(_&&_.hasData())return _;const x=this._findCoveringTileCache[h.id],w=x[c.key];if(_=w?h.getTileByID(w):null,_&&_.hasData()||w===null)return _;let P=_?_.tileID:c,A=P.overscaledZ;const L=h.getSource().minzoom,V=[];if(!w){const J=h.getSource().maxzoom;if(c.canonical.z>=J){const le=c.canonical.z-J;h.getSource().reparseOverscaled?(A=Math.max(c.canonical.z+2,h.transform.tileZoom),P=new o.OverscaledTileID(A,c.wrap,J,c.canonical.x>>le,c.canonical.y>>le)):le!==0&&(A=J,P=new o.OverscaledTileID(A,c.wrap,J,c.canonical.x>>le,c.canonical.y>>le))}P.key!==c.key&&(V.push(P.key),_=h.getTile(P))}const U=J=>{V.forEach(le=>{x[le]=J}),V.length=0};for(A-=1;A>=L&&(!_||!_.hasData());A--){_&&U(_.tileID.key);const J=P.calculateScaledKey(A);if(_=h.getTileByID(J),_&&_.hasData())break;const le=x[J];if(le===null)break;le===void 0?V.push(J):_=h.getTileByID(le)}return U(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,h){let _=this._tilesDirty[c];_||(_=this._tilesDirty[c]={}),_[h.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const c=function(h){let _=0;const x=new o.StructArrayLayout2ui4,w=131;for(let P=1;P<129;P++){for(let A=1;A<129;A++)_=P*w+A,x.emplaceBack(_,_+1),x.emplaceBack(_,_+w),x.emplaceBack(_+1,_+w),P===128&&x.emplaceBack(_+w,_+w+1);x.emplaceBack(_+1,_+1+w)}return x}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(c),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,c.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Sr{static cacheKey(c,h,_,x){let w=`${h}${x?x.cacheKey:""}`;for(const P of _)c.usedDefines.includes(P)&&(w+=`/${P}`);return w}constructor(c,h,_,x,w,P){const A=c.gl;this.program=A.createProgram();const L=function(Q){const he=[];for(let Ee=0;Ee<Q.length;Ee++){if(Q[Ee]===null)continue;const ke=Q[Ee].split(" ");he.push(ke.pop())}return he}(_.staticAttributes),V=x?x.getBinderAttributes():[],U=L.concat(V);let J=x?x.defines():[];J=J.concat(P.map(Q=>`#define ${Q}`));const le=c.isWebGL2?`#version 300 es
`:"",pe=le+J.concat(c.extStandardDerivatives&&le.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(re):re,re,ne,H.fragmentSource,I.fragmentSource,_.fragmentSource).join(`
`),ge=le+J.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,ne,H.vertexSource,I.vertexSource,S.vertexSource,_.vertexSource).join(`
`),me=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(me,pe),A.compileShader(me),A.attachShader(this.program,me);const ve=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{A.shaderSource(ve,ge),A.compileShader(ve),A.attachShader(this.program,ve),this.attributes={},this.numAttributes=U.length;for(let Q=0;Q<this.numAttributes;Q++)U[Q]&&(A.bindAttribLocation(this.program,Q,U[Q]),this.attributes[U[Q]]=Q);A.linkProgram(this.program),A.deleteShader(ve),A.deleteShader(me),this.fixedUniforms=w(c),this.binderUniforms=x?x.getUniforms(c):[],P.includes("TERRAIN")&&(this.terrainUniforms=(Q=>({u_dem:new o.Uniform1i(Q),u_dem_prev:new o.Uniform1i(Q),u_dem_unpack:new o.Uniform4f(Q),u_dem_tl:new o.Uniform2f(Q),u_dem_scale:new o.Uniform1f(Q),u_dem_tl_prev:new o.Uniform2f(Q),u_dem_scale_prev:new o.Uniform1f(Q),u_dem_size:new o.Uniform1f(Q),u_dem_lerp:new o.Uniform1f(Q),u_exaggeration:new o.Uniform1f(Q),u_depth:new o.Uniform1i(Q),u_depth_size_inv:new o.Uniform2f(Q),u_meter_to_dem:new o.Uniform1f(Q),u_label_plane_matrix_inv:new o.UniformMatrix4f(Q)}))(c)),P.includes("GLOBE")&&(this.globeUniforms=(Q=>({u_tile_tl_up:new o.Uniform3f(Q),u_tile_tr_up:new o.Uniform3f(Q),u_tile_br_up:new o.Uniform3f(Q),u_tile_bl_up:new o.Uniform3f(Q),u_tile_up_scale:new o.Uniform1f(Q)}))(c)),P.includes("FOG")&&(this.fogUniforms=(Q=>({u_fog_matrix:new o.UniformMatrix4f(Q),u_fog_range:new o.Uniform2f(Q),u_fog_color:new o.Uniform4f(Q),u_fog_horizon_blend:new o.Uniform1f(Q),u_fog_temporal_offset:new o.Uniform1f(Q),u_frustum_tl:new o.Uniform3f(Q),u_frustum_tr:new o.Uniform3f(Q),u_frustum_br:new o.Uniform3f(Q),u_frustum_bl:new o.Uniform3f(Q),u_globe_pos:new o.Uniform3f(Q),u_globe_radius:new o.Uniform1f(Q),u_globe_transition:new o.Uniform1f(Q),u_is_globe:new o.Uniform1i(Q),u_viewport:new o.Uniform2f(Q)}))(c))}}setTerrainUniformValues(c,h){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const x in h)_[x]&&_[x].set(this.program,x,h[x])}}setGlobeUniformValues(c,h){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const x in h)_[x]&&_[x].set(this.program,x,h[x])}}setFogUniformValues(c,h){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const x in h)_[x].set(this.program,x,h[x])}}draw(c,h,_,x,w,P,A,L,V,U,J,le,pe,ge,me){const ve=c.gl;if(this.failedToCreate)return;c.program.set(this.program),c.setDepthMode(_),c.setStencilMode(x),c.setColorMode(w),c.setCullFace(P);for(const he of Object.keys(this.fixedUniforms))this.fixedUniforms[he].set(this.program,he,A[he]);ge&&ge.setUniforms(this.program,c,this.binderUniforms,le,{zoom:pe});const Q={[ve.LINES]:2,[ve.TRIANGLES]:3,[ve.LINE_STRIP]:1}[h];for(const he of J.get()){const Ee=he.vaos||(he.vaos={});(Ee[L]||(Ee[L]=new ot)).bind(c,this,V,ge?ge.getPaintVertexBuffers():[],U,he.vertexOffset,me||[]),ve.drawElements(h,he.primitiveLength*Q,ve.UNSIGNED_SHORT,he.primitiveOffset*Q*2)}}}function qo(m,c){const h=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,m.transform.tileZoom)/h,x=_*(c.tileID.canonical.x+c.tileID.wrap*h),w=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_tile_units_to_pixels:1/kt(c,1,m.transform.tileZoom),u_pixel_coord_upper:[x>>16,w>>16],u_pixel_coord_lower:[65535&x,65535&w]}}const Cs=o.create(),ts=(m,c,h,_,x,w,P,A,L,V,U)=>{const J=c.style.light,le=J.properties.get("position"),pe=[le.x,le.y,le.z],ge=o.create$1();J.properties.get("anchor")==="viewport"&&(o.fromRotation(ge,-c.transform.angle),o.transformMat3(pe,pe,ge));const me=J.properties.get("color"),ve=c.transform,Q={u_matrix:m,u_lightpos:pe,u_lightintensity:J.properties.get("intensity"),u_lightcolor:[me.r,me.g,me.b],u_vertical_gradient:+h,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Cs,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:x,u_edge_radius:w};return ve.projection.name==="globe"&&(Q.u_tile_id=[P.canonical.x,P.canonical.y,1<<P.canonical.z],Q.u_zoom_transition=L,Q.u_inv_rot_matrix=U,Q.u_merc_center=V,Q.u_up_dir=ve.projection.upVector(new o.CanonicalTileID(0,0,0),V[0]*o.EXTENT,V[1]*o.EXTENT),Q.u_height_lift=A),Q},oa=(m,c,h,_,x,w,P,A,L,V,U,J)=>{const le=ts(m,c,h,_,x,w,P,L,V,U,J),pe={u_height_factor:-Math.pow(2,P.overscaledZ)/A.tileSize/8};return o.extend(le,qo(c,A),pe)},ks=m=>({u_matrix:m}),Wa=(m,c,h)=>o.extend(ks(m),qo(c,h)),Ps=(m,c)=>({u_matrix:m,u_world:c}),mm=(m,c,h,_)=>o.extend(Wa(m,c,h),{u_world:_}),gm=o.create(),Th=(m,c,h,_,x,w)=>{const P=m.transform,A=P.projection.name==="globe";let L;if(w.paint.get("circle-pitch-alignment")==="map")if(A){const U=o.globePixelsToTileUnits(P.zoom,c.canonical)*P._pixelsPerMercatorPixel;L=Float32Array.from([U,0,0,U])}else L=P.calculatePixelsToTileUnitsMatrix(h);else L=new Float32Array([P.pixelsToGLUnits[0],0,0,P.pixelsToGLUnits[1]]);const V={u_camera_to_center_distance:P.cameraToCenterDistance,u_matrix:m.translatePosMatrix(c.projMatrix,h,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:L,u_inv_rot_matrix:gm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(A){V.u_inv_rot_matrix=_,V.u_merc_center=x,V.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],V.u_zoom_transition=o.globeToMercatorTransition(P.zoom);const U=x[0]*o.EXTENT,J=x[1]*o.EXTENT;V.u_up_dir=P.projection.upVector(new o.CanonicalTileID(0,0,0),U,J)}return V},Ur=m=>{const c=[];return m.paint.get("circle-pitch-alignment")==="map"&&c.push("PITCH_WITH_MAP"),m.paint.get("circle-pitch-scale")==="map"&&c.push("SCALE_WITH_MAP"),c},xc=(m,c,h,_)=>{const x=o.EXTENT/h.tileSize;return{u_matrix:m,u_camera_to_center_distance:c.getCameraToCenterDistance(_),u_extrude_scale:[c.pixelsToGLUnits[0]/x,c.pixelsToGLUnits[1]/x]}},Go=(m,c,h=1)=>({u_matrix:m,u_color:c,u_overlay:0,u_overlay_scale:h}),Rl=o.create(),Wp=(m,c,h,_,x,w,P)=>{const A=m.transform,L=A.projection.name==="globe",V=L?o.globePixelsToTileUnits(A.zoom,c.canonical)*A._pixelsPerMercatorPixel:kt(h,1,w),U={u_matrix:c.projMatrix,u_extrude_scale:V,u_intensity:P,u_inv_rot_matrix:Rl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){U.u_inv_rot_matrix=_,U.u_merc_center=x,U.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],U.u_zoom_transition=o.globeToMercatorTransition(A.zoom);const J=x[0]*o.EXTENT,le=x[1]*o.EXTENT;U.u_up_dir=A.projection.upVector(new o.CanonicalTileID(0,0,0),J,le)}return U},_m=(m,c,h,_,x,w,P)=>{const A=m.transform,L=A.calculatePixelsToTileUnitsMatrix(c);return{u_matrix:pu(m,c,h,_),u_pixels_to_tile_units:L,u_device_pixel_ratio:w,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:va(h)?c.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ya(c,m.transform),u_alpha_discard_threshold:0,u_trim_offset:P}},bc=(m,c,h,_,x)=>{const w=m.transform;return{u_matrix:pu(m,c,h,_),u_texsize:c.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(c),u_device_pixel_ratio:x,u_image:0,u_tile_units_to_pixels:ya(c,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ya(m,c){return 1/kt(m,1,c.tileZoom)}function pu(m,c,h,_){return m.translatePosMatrix(_||c.tileID.projMatrix,c,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}function va(m){const c=m.paint.get("line-dasharray").value;return c.value||c.kind!=="constant"}const id=(m,c,h,_,x,w)=>{return{u_matrix:m,u_tl_parent:c,u_scale_parent:h,u_fade_t:_.mix,u_opacity:_.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(A=x.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(P=x.paint.get("raster-contrast"),P>0?1/(1-P):1+P),u_spin_weights:aa(x.paint.get("raster-hue-rotate")),u_perspective_transform:w};var P,A};function aa(m){m*=Math.PI/180;const c=Math.sin(m),h=Math.cos(m);return[(2*h+1)/3,(-Math.sqrt(3)*c-h+1)/3,(Math.sqrt(3)*c-h+1)/3]}const Ll=o.create(),wc=(m,c,h,_,x,w,P,A,L,V,U,J,le,pe,ge,me)=>{const ve=x.transform,Q={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:ve.cameraToCenterDistance,u_rotate_symbol:+h,u_aspect_ratio:ve.width/ve.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:P,u_coord_matrix:A,u_is_text:+L,u_pitch_with_map:+_,u_texsize:V,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ll,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ll,u_up_vector:[0,-1,0]};return me.name==="globe"&&(Q.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],Q.u_zoom_transition=J,Q.u_inv_rot_matrix=pe,Q.u_merc_center=le,Q.u_camera_forward=ve._camera.forward(),Q.u_ecef_origin=o.globeECEFOrigin(ve.globeMatrix,U.toUnwrapped()),Q.u_tile_matrix=Float32Array.from(ve.globeMatrix),Q.u_up_vector=ge),Q},Ec=(m,c,h,_,x,w,P,A,L,V,U,J,le,pe,ge,me,ve)=>o.extend(wc(m,c,h,_,x,w,P,A,L,V,J,le,pe,ge,me,ve),{u_gamma_scale:_?x.transform.cameraToCenterDistance*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+U}),Hp=(m,c,h,_,x,w,P,A,L,V,U,J,le,pe,ge,me)=>o.extend(Ec(m,c,h,_,x,w,P,A,!0,L,!0,U,J,le,pe,ge,me),{u_texsize_icon:V,u_texture_icon:1}),Sc=(m,c,h)=>({u_matrix:m,u_opacity:c,u_color:h}),Ch=(m,c,h,_,x)=>o.extend(function(w,P,A){const L=P.imageManager.getPattern(w.toString()),{width:V,height:U}=P.imageManager.getPixelSize(),J=Math.pow(2,A.tileID.overscaledZ),le=A.tileSize*Math.pow(2,P.transform.tileZoom)/J,pe=le*(A.tileID.canonical.x+A.tileID.wrap*J),ge=le*A.tileID.canonical.y;return{u_image:0,u_pattern_tl:L.tl,u_pattern_br:L.br,u_texsize:[V,U],u_pattern_size:L.displaySize,u_tile_units_to_pixels:1/kt(A,1,P.transform.tileZoom),u_pixel_coord_upper:[pe>>16,ge>>16],u_pixel_coord_lower:[65535&pe,65535&ge]}}(_,h,x),{u_matrix:m,u_opacity:c}),fu={fillExtrusion:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_height_factor:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m)}),fill:m=>({u_matrix:new o.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),fillOutline:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),collisionBox:m=>({u_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new o.UniformMatrix4f(m),u_inv_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_viewport_size:new o.Uniform2f(m)}),debug:m=>({u_color:new o.UniformColor(m),u_matrix:new o.UniformMatrix4f(m),u_overlay:new o.Uniform1i(m),u_overlay_scale:new o.Uniform1f(m)}),clippingMask:m=>({u_matrix:new o.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new o.Uniform1f(m),u_intensity:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),heatmapTexture:m=>({u_image:new o.Uniform1i(m),u_color_ramp:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m)}),hillshade:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_latrange:new o.Uniform2f(m),u_light:new o.Uniform2f(m),u_shadow:new o.UniformColor(m),u_highlight:new o.UniformColor(m),u_accent:new o.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_dimension:new o.Uniform2f(m),u_zoom:new o.Uniform1f(m),u_unpack:new o.Uniform4f(m)}),line:m=>({u_matrix:new o.UniformMatrix4f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_units_to_pixels:new o.Uniform2f(m),u_dash_image:new o.Uniform1i(m),u_gradient_image:new o.Uniform1i(m),u_image_height:new o.Uniform1f(m),u_texsize:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m),u_trim_offset:new o.Uniform2f(m)}),linePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_texsize:new o.Uniform2f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_units_to_pixels:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m)}),raster:m=>({u_matrix:new o.UniformMatrix4f(m),u_tl_parent:new o.Uniform2f(m),u_scale_parent:new o.Uniform1f(m),u_fade_t:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_image0:new o.Uniform1i(m),u_image1:new o.Uniform1i(m),u_brightness_low:new o.Uniform1f(m),u_brightness_high:new o.Uniform1f(m),u_saturation_factor:new o.Uniform1f(m),u_contrast_factor:new o.Uniform1f(m),u_spin_weights:new o.Uniform3f(m),u_perspective_transform:new o.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_texture:new o.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_is_halo:new o.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texsize_icon:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_texture_icon:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_is_halo:new o.Uniform1i(m)}),background:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_color:new o.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_pattern_tl:new o.Uniform2f(m),u_pattern_br:new o.Uniform2f(m),u_texsize:new o.Uniform2f(m),u_pattern_size:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),terrainRaster:ir,terrainDepth:ir,skybox:m=>({u_matrix:new o.UniformMatrix4f(m),u_sun_direction:new o.Uniform3f(m),u_cubemap:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new o.UniformMatrix4f(m),u_color_ramp:new o.Uniform1i(m),u_center_direction:new o.Uniform3f(m),u_radius:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new o.UniformMatrix3f(m),u_sun_direction:new o.Uniform3f(m),u_sun_intensity:new o.Uniform1f(m),u_color_tint_r:new o.Uniform4f(m),u_color_tint_m:new o.Uniform4f(m),u_luminance:new o.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new o.UniformMatrix4f(m),u_globe_matrix:new o.UniformMatrix4f(m),u_normalize_matrix:new o.UniformMatrix4f(m),u_merc_matrix:new o.UniformMatrix4f(m),u_zoom_transition:new o.Uniform1f(m),u_merc_center:new o.Uniform2f(m),u_image0:new o.Uniform1i(m),u_grid_matrix:new o.UniformMatrix3f(m),u_skirt_height:new o.Uniform1f(m),u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_globe_pos:new o.Uniform3f(m),u_globe_radius:new o.Uniform1f(m),u_viewport:new o.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_horizon:new o.Uniform1f(m),u_transition:new o.Uniform1f(m),u_fadeout_range:new o.Uniform1f(m),u_color:new o.Uniform4f(m),u_high_color:new o.Uniform4f(m),u_space_color:new o.Uniform4f(m),u_star_intensity:new o.Uniform1f(m),u_star_density:new o.Uniform1f(m),u_star_size:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m),u_horizon_angle:new o.Uniform1f(m),u_rotation_matrix:new o.UniformMatrix4f(m)})};let od;function zl(m,c,h,_,x,w,P){const A=m.context,L=A.gl,V=m.transform,U=m.useProgram("collisionBox"),J=[];let le=0,pe=0;for(let ke=0;ke<_.length;ke++){const Ve=_[ke],He=c.getTile(Ve),We=He.getBucket(h);if(!We)continue;const nt=ma(Ve,We,V);let et=nt;x[0]===0&&x[1]===0||(et=m.translatePosMatrix(nt,He,x,w));const ht=P?We.textCollisionBox:We.iconCollisionBox,Vt=We.collisionCircleArray;if(Vt.length>0){const st=o.create(),Pt=et;o.mul(st,We.placementInvProjMatrix,V.glCoordMatrix),o.mul(st,st,We.placementViewportMatrix),J.push({circleArray:Vt,circleOffset:pe,transform:Pt,invTransform:st,projection:We.getProjection()}),le+=Vt.length/4,pe=le}ht&&(m.terrain&&m.terrain.setupElevationDraw(He,U),U.draw(A,L.LINES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,xc(et,V,He,We.getProjection()),h.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,null,V.zoom,null,[ht.collisionVertexBuffer,ht.collisionVertexBufferExt]))}if(!P||!J.length)return;const ge=m.useProgram("collisionCircle"),me=new o.StructArrayLayout2f1f2i16;me.resize(4*le),me._trim();let ve=0;for(const ke of J)for(let Ve=0;Ve<ke.circleArray.length/4;Ve++){const He=4*Ve,We=ke.circleArray[He+0],nt=ke.circleArray[He+1],et=ke.circleArray[He+2],ht=ke.circleArray[He+3];me.emplace(ve++,We,nt,et,ht,0),me.emplace(ve++,We,nt,et,ht,1),me.emplace(ve++,We,nt,et,ht,2),me.emplace(ve++,We,nt,et,ht,3)}(!od||od.length<2*le)&&(od=function(ke){const Ve=2*ke,He=new o.StructArrayLayout3ui6;He.resize(Ve),He._trim();for(let We=0;We<Ve;We++){const nt=6*We;He.uint16[nt+0]=4*We+0,He.uint16[nt+1]=4*We+1,He.uint16[nt+2]=4*We+2,He.uint16[nt+3]=4*We+2,He.uint16[nt+4]=4*We+3,He.uint16[nt+5]=4*We+0}return He}(le));const Q=A.createIndexBuffer(od,!0),he=A.createVertexBuffer(me,o.collisionCircleLayout.members,!0);for(const ke of J){const Ve={u_matrix:ke.transform,u_inv_matrix:ke.invTransform,u_camera_to_center_distance:(Ee=V).getCameraToCenterDistance(ke.projection),u_viewport_size:[Ee.width,Ee.height]};ge.draw(A,L.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,Ve,h.id,he,Q,o.SegmentVector.simpleSegment(0,2*ke.circleOffset,ke.circleArray.length,ke.circleArray.length/2),null,V.zoom)}var Ee;he.destroy(),Q.destroy()}const kh=o.create();function Ie({width:m,height:c,anchor:h,textOffset:_,textScale:x},w){const{horizontalAlign:P,verticalAlign:A}=o.getAnchorAlignment(h),L=-(P-.5)*m,V=-(A-.5)*c,U=o.evaluateVariableOffset(h,_);return new o.Point((L/x+U[0])*w,(V/x+U[1])*w)}function Ye(m,c,h,_,x,w,P,A,L,V,U){const J=m.text.placedSymbolArray,le=m.text.dynamicLayoutVertexArray,pe=m.icon.dynamicLayoutVertexArray,ge={},me=m.getProjection(),ve=ui(A,me,w),Q=w.elevation,he=me.upVectorScale(A.canonical,w.center.lat,w.worldSize).metersToTile;le.clear();for(let Ee=0;Ee<J.length;Ee++){const ke=J.get(Ee),{tileAnchorX:Ve,tileAnchorY:He,numGlyphs:We}=ke,nt=ke.hidden||!ke.crossTileID||m.allowVerticalPlacement&&!ke.placedOrientation?null:_[ke.crossTileID];if(nt){let et=0,ht=0,Vt=0;if(Q){const Gt=Q?Q.getAtTileOffset(A,Ve,He):0,[zn,er,Cn]=me.upVector(A.canonical,Ve,He);et=Gt*zn*he,ht=Gt*er*he,Vt=Gt*Cn*he}let[st,Pt,mt,$t]=Gi(ke.projectedAnchorX+et,ke.projectedAnchorY+ht,ke.projectedAnchorZ+Vt,h?ve:P);const dt=Oo(w.getCameraToCenterDistance(me),$t);let Ct=x.evaluateSizeForFeature(m.textSizeData,V,ke)*dt/o.ONE_EM;h&&(Ct*=m.tilePixelRatio/L);const Ht=Ie(nt,Ct);h?({x:st,y:Pt,z:mt}=me.projectTilePoint(Ve+Ht.x,He+Ht.y,A.canonical),[st,Pt,mt]=Gi(st+et,Pt+ht,mt+Vt,P)):(c&&Ht._rotate(-w.angle),st+=Ht.x,Pt+=Ht.y,mt=0);const zt=m.allowVerticalPlacement&&ke.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let Gt=0;Gt<We;Gt++)o.addDynamicAttributes(le,st,Pt,mt,zt);U&&ke.associatedIconIndex>=0&&(ge[ke.associatedIconIndex]={x:st,y:Pt,z:mt,angle:zt})}else $a(We,le)}if(U){pe.clear();const Ee=m.icon.placedSymbolArray;for(let ke=0;ke<Ee.length;ke++){const Ve=Ee.get(ke),{numGlyphs:He}=Ve,We=ge[ke];if(Ve.hidden||!We)$a(He,pe);else{const{x:nt,y:et,z:ht,angle:Vt}=We;for(let st=0;st<He;st++)o.addDynamicAttributes(pe,nt,et,ht,Vt)}}m.icon.dynamicLayoutVertexBuffer.updateData(pe)}m.text.dynamicLayoutVertexBuffer.updateData(le)}function ft(m,c,h){return h.iconsInText&&c?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function xt(m,c,h,_,x,w,P,A,L,V,U,J){const le=m.context,pe=le.gl,ge=m.transform,me=A==="map",ve=L==="map",Q=me&&h.layout.get("symbol-placement")!=="point",he=me&&!ve&&!Q,Ee=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ke=!1;const Ve=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),He=[o.mercatorXfromLng(ge.center.lng),o.mercatorYfromLat(ge.center.lat)],We=h.layout.get("text-variable-anchor"),nt=ge.projection.name==="globe",et=[],ht=[0,-1,0];let Vt=ht;!nt&&!ge.mercatorFromTransition||me||(Vt=function(st){const Pt=st._camera.getWorldToCamera(st.worldSize,1),mt=o.multiply([],Pt,st.globeMatrix);o.invert(mt,mt);const $t=[0,0,0],dt=[0,1,0,0];return o.transformMat4$1(dt,dt,mt),$t[0]=dt[0],$t[1]=dt[1],$t[2]=dt[2],o.normalize($t,$t),$t}(ge));for(const st of _){const Pt=c.getTile(st),mt=Pt.getBucket(h);if(!mt||mt.projection.name==="mercator"&&nt)continue;const $t=x?mt.text:mt.icon;if(!$t||mt.fullyClipped||!$t.segments.get().length)continue;const dt=$t.programConfigurations.get(h.id),Ct=x||mt.sdfIcons,Ht=x?mt.textSizeData:mt.iconSizeData,zt=ve||ge.pitch!==0,Gt=o.evaluateSizeForZoom(Ht,ge.zoom);let zn,er,Cn,Gn,Tr=[0,0],xr=null;if(x)er=Pt.glyphAtlasTexture,Cn=pe.LINEAR,zn=Pt.glyphAtlasTexture.size,mt.iconsInText&&(Tr=Pt.imageAtlasTexture.size,xr=Pt.imageAtlasTexture,Gn=zt||m.options.rotating||m.options.zooming||Ht.kind==="composite"||Ht.kind==="camera"?pe.LINEAR:pe.NEAREST);else{const Nl=h.layout.get("icon-size").constantOr(0)!==1||mt.iconsNeedLinear;er=Pt.imageAtlasTexture,Cn=Ct||m.options.rotating||m.options.zooming||Nl||zt?pe.LINEAR:pe.NEAREST,zn=Pt.imageAtlasTexture.size}const Mn=mt.projection.name==="globe",jr=Mn?Vt:ht,Hr=Mn?o.globeToMercatorTransition(ge.zoom):0,qr=ui(st,mt.getProjection(),ge),Gr=ge.calculatePixelsToTileUnitsMatrix(Pt),Ko=vt(qr,Pt.tileID.canonical,ve,me,ge,mt.getProjection(),Gr),To=m.terrain&&ve&&Q?o.invert(o.create(),Ko):kh,is=ti(qr,Pt.tileID.canonical,ve,me,ge,mt.getProjection(),Gr),el=We&&mt.hasTextData(),yi=h.layout.get("icon-text-fit")!=="none"&&el&&mt.hasIconData();if(Q){const Nl=ge.elevation,Cc=Nl?Nl.getAtTileOffsetFunc(st,ge.center.lat,ge.worldSize,mt.getProjection()):null,vu=fa(qr,Pt.tileID.canonical,ve,me,ge,mt.getProjection(),Gr);hc(mt,qr,m,x,vu,is,ve,V,Cc,st)}const Zr=Q||x&&We||yi,zr=m.translatePosMatrix(qr,Pt,w,P),Xi=Zr?kh:Ko,la=m.translatePosMatrix(is,Pt,w,P,!0),fi=mt.getProjection().createInversionMatrix(ge,st.canonical),xa=[];m.terrainRenderModeElevated()&&ve&&xa.push("PITCH_WITH_MAP_TERRAIN"),Mn&&xa.push("PROJECTION_GLOBE_VIEW"),Zr&&xa.push("PROJECTED_POS_ON_VIEWPORT");const of=Ct&&h.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let yu;yu=Ct?mt.iconsInText?Hp(Ht.kind,Gt,he,ve,m,zr,Xi,la,zn,Tr,st,Hr,He,fi,jr,mt.getProjection()):Ec(Ht.kind,Gt,he,ve,m,zr,Xi,la,x,zn,!0,st,Hr,He,fi,jr,mt.getProjection()):wc(Ht.kind,Gt,he,ve,m,zr,Xi,la,x,zn,st,Hr,He,fi,jr,mt.getProjection());const Fh={program:m.useProgram(ft(Ct,x,mt),dt,xa),buffers:$t,uniformValues:yu,atlasTexture:er,atlasTextureIcon:xr,atlasInterpolation:Cn,atlasInterpolationIcon:Gn,isSDF:Ct,hasHalo:of,tile:Pt,labelPlaneMatrixInv:To};if(Ee&&mt.canOverlap){ke=!0;const Nl=$t.segments.get();for(const Cc of Nl)et.push({segments:new o.SegmentVector([Cc]),sortKey:Cc.sortKey,state:Fh})}else et.push({segments:$t.segments,sortKey:0,state:Fh})}ke&&et.sort((st,Pt)=>st.sortKey-Pt.sortKey);for(const st of et){const Pt=st.state;if(m.terrain&&m.terrain.setupElevationDraw(Pt.tile,Pt.program,{useDepthForOcclusion:!nt,labelPlaneMatrixInv:Pt.labelPlaneMatrixInv}),le.activeTexture.set(pe.TEXTURE0),Pt.atlasTexture.bind(Pt.atlasInterpolation,pe.CLAMP_TO_EDGE),Pt.atlasTextureIcon&&(le.activeTexture.set(pe.TEXTURE1),Pt.atlasTextureIcon&&Pt.atlasTextureIcon.bind(Pt.atlasInterpolationIcon,pe.CLAMP_TO_EDGE)),Pt.isSDF){const mt=Pt.uniformValues;Pt.hasHalo&&(mt.u_is_halo=1,Ot(Pt.buffers,st.segments,h,m,Pt.program,Ve,U,J,mt)),mt.u_is_halo=0}Ot(Pt.buffers,st.segments,h,m,Pt.program,Ve,U,J,Pt.uniformValues)}}function Ot(m,c,h,_,x,w,P,A,L){const V=_.context,U=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];x.draw(V,V.gl.TRIANGLES,w,P,A,o.CullFaceMode.disabled,L,h.id,m.layoutVertexBuffer,m.indexBuffer,c,h.paint,_.transform.zoom,m.programConfigurations.get(h.id),U)}function mn(m,c,h,_,x,w,P){const A=m.context.gl,L=h.paint.get("fill-pattern"),V=L&&L.constantOr(1);let U,J,le,pe,ge;P?(J=V&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=A.LINES):(J=V?"fillPattern":"fill",U=A.TRIANGLES);for(const me of _){const ve=c.getTile(me);if(V&&!ve.patternsLoaded())continue;const Q=ve.getBucket(h);if(!Q)continue;m.prepareDrawTile();const he=Q.programConfigurations.get(h.id),Ee=m.useProgram(J,he);V&&(m.context.activeTexture.set(A.TEXTURE0),ve.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),he.updatePaintBuffers());const ke=L.constantOr(null);if(ke&&ve.imageAtlas){const He=ve.imageAtlas.patternPositions[ke.toString()];He&&he.setConstantPatternPositions(He)}const Ve=m.translatePosMatrix(me.projMatrix,ve,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(P){pe=Q.indexBuffer2,ge=Q.segments2;const He=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[A.drawingBufferWidth,A.drawingBufferHeight];le=J==="fillOutlinePattern"&&V?mm(Ve,m,ve,He):Ps(Ve,He)}else pe=Q.indexBuffer,ge=Q.segments,le=V?Wa(Ve,m,ve):ks(Ve);m.prepareDrawProgram(m.context,Ee,me.toUnwrapped()),Ee.draw(m.context,U,x,m.stencilModeForClipping(me),w,o.CullFaceMode.disabled,le,h.id,Q.layoutVertexBuffer,pe,ge,h.paint,m.transform.zoom,he)}}function Pn(m,c,h,_,x,w,P){const A=m.context,L=A.gl,V=m.transform,U=h.paint.get("fill-extrusion-pattern"),J=U.constantOr(1),le=h.paint.get("fill-extrusion-opacity"),pe=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),h.paint.get("fill-extrusion-ambient-occlusion-radius")],ge=h.layout.get("fill-extrusion-edge-radius"),me=ge>0&&!h.paint.get("fill-extrusion-rounded-roof"),ve=me?0:ge,Q=V.projection.name==="globe"?o.fillExtrusionHeightLift():0,he=V.projection.name==="globe",Ee=he?o.globeToMercatorTransition(V.zoom):0,ke=[o.mercatorXfromLng(V.center.lng),o.mercatorYfromLat(V.center.lat)],Ve=[];he&&Ve.push("PROJECTION_GLOBE_VIEW"),pe[0]>0&&Ve.push("FAUX_AO"),me&&Ve.push("ZERO_ROOF_RADIUS");for(const He of _){const We=c.getTile(He),nt=We.getBucket(h);if(!nt||nt.projection.name!==V.projection.name)continue;const et=nt.programConfigurations.get(h.id),ht=m.useProgram(J?"fillExtrusionPattern":"fillExtrusion",et,Ve);if(m.terrain){const Ct=m.terrain;if(m.style.terrainSetForDrapingOnly())Ct.setupElevationDraw(We,ht,{useMeterToDem:!0});else{if(!nt.enableTerrain)continue;if(Ct.setupElevationDraw(We,ht,{useMeterToDem:!0}),Wn(A,c,He,nt,h,Ct),!nt.centroidVertexBuffer){const Ht=ht.attributes.a_centroid_pos;Ht!==void 0&&L.vertexAttrib2f(Ht,0,0)}}}J&&(m.context.activeTexture.set(L.TEXTURE0),We.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),et.updatePaintBuffers());const Vt=U.constantOr(null);if(Vt&&We.imageAtlas){const Ct=We.imageAtlas.patternPositions[Vt.toString()];Ct&&et.setConstantPatternPositions(Ct)}const st=m.translatePosMatrix(He.projMatrix,We,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Pt=V.projection.createInversionMatrix(V,He.canonical),mt=h.paint.get("fill-extrusion-vertical-gradient"),$t=J?oa(st,m,mt,le,pe,ve,He,We,Q,Ee,ke,Pt):ts(st,m,mt,le,pe,ve,He,Q,Ee,ke,Pt);m.prepareDrawProgram(A,ht,He.toUnwrapped());const dt=[];m.terrain&&dt.push(nt.centroidVertexBuffer),he&&dt.push(nt.layoutVertexExtBuffer),ht.draw(A,A.gl.TRIANGLES,x,w,P,o.CullFaceMode.backCCW,$t,h.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,h.paint,m.transform.zoom,et,dt)}}function Wn(m,c,h,_,x,w){const P=[Q=>{let he=Q.canonical.x-1,Ee=Q.wrap;return he<0&&(he=(1<<Q.canonical.z)-1,Ee--),new o.OverscaledTileID(Q.overscaledZ,Ee,Q.canonical.z,he,Q.canonical.y)},Q=>{let he=Q.canonical.x+1,Ee=Q.wrap;return he===1<<Q.canonical.z&&(he=0,Ee++),new o.OverscaledTileID(Q.overscaledZ,Ee,Q.canonical.z,he,Q.canonical.y)},Q=>new o.OverscaledTileID(Q.overscaledZ,Q.wrap,Q.canonical.z,Q.canonical.x,(Q.canonical.y===0?1<<Q.canonical.z:Q.canonical.y)-1),Q=>new o.OverscaledTileID(Q.overscaledZ,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y===(1<<Q.canonical.z)-1?0:Q.canonical.y+1)],A=Q=>{const he=c.getSource().minzoom,Ee=Ve=>{const He=c.getTileByID(Ve);if(He&&He.hasData())return He.getBucket(x)},ke=[0,-1,1];for(const Ve of ke){if(Q.overscaledZ+Ve<he)continue;const He=Ee(Q.calculateScaledKey(Q.overscaledZ+Ve));if(He)return He}},L=[0,0,0],V=(Q,he)=>(L[0]=Math.min(Q.min.y,he.min.y),L[1]=Math.max(Q.max.y,he.max.y),L[2]=o.EXTENT-he.min.x>Q.max.x?he.min.x-o.EXTENT:Q.max.x,L),U=(Q,he)=>(L[0]=Math.min(Q.min.x,he.min.x),L[1]=Math.max(Q.max.x,he.max.x),L[2]=o.EXTENT-he.min.y>Q.max.y?he.min.y-o.EXTENT:Q.max.y,L),J=[(Q,he)=>V(Q,he),(Q,he)=>V(he,Q),(Q,he)=>U(Q,he),(Q,he)=>U(he,Q)],le=new o.Point(0,0);let pe,ge,me;const ve=(Q,he,Ee,ke,Ve)=>{const He=[[ke?Ee:Q,ke?Q:Ee,0],[ke?Ee:he,ke?he:Ee,0]],We=Ve<0?o.EXTENT+Ve:Ve,nt=[ke?We:(Q+he)/2,ke?(Q+he)/2:We,0];return Ee===0&&Ve<0||Ee!==0&&Ve>0?w.getForTilePoints(me,[nt],!0,ge):He.push(nt),w.getForTilePoints(h,He,!0,pe),Math.max(He[0][2],He[1][2],nt[2])/w.exaggeration()};for(let Q=0;Q<4;Q++){const he=(Q<2?1:5)-Q,Ee=_.borders[Q];if(Ee.length===0)continue;const ke=me=P[Q](h),Ve=A(ke);if(!(Ve&&Ve instanceof o.FillExtrusionBucket&&Ve.enableTerrain)||_.borderDoneWithNeighborZ[Q]===Ve.canonical.z&&Ve.borderDoneWithNeighborZ[he]===_.canonical.z||(ge=w.findDEMTileFor(ke),!ge||!ge.dem))continue;if(!pe){const et=w.findDEMTileFor(h);if(!et||!et.dem)return;pe=et}const He=Ve.borders[he];let We=0;const nt=Ve.borderDoneWithNeighborZ[he]!==_.canonical.z;if(_.canonical.z===Ve.canonical.z){for(let et=0;et<Ee.length;et++){const ht=_.featuresOnBorder[Ee[et]],Vt=ht.borders[Q];let st;for(;We<He.length&&(st=Ve.featuresOnBorder[He[We]],!(st.borders[he][1]>Vt[0]+3));)nt&&Ve.encodeCentroid(void 0,st,!1),We++;if(st&&We<He.length){const Pt=We;let mt=0;for(;!(st.borders[he][0]>Vt[1]-3)&&(mt++,++We!==He.length);)st=Ve.featuresOnBorder[He[We]];if(st=Ve.featuresOnBorder[He[Pt]],ht.intersectsCount()>1||st.intersectsCount()>1||mt!==1){mt!==1&&(We=Pt),_.encodeCentroid(void 0,ht,!1),nt&&Ve.encodeCentroid(void 0,st,!1);continue}const $t=J[Q](ht,st),dt=Q%2?o.EXTENT-1:0;le.x=ve($t[0],Math.min(o.EXTENT-1,$t[1]),dt,Q<2,$t[2]),le.y=0,_.encodeCentroid(le,ht,!1),nt&&Ve.encodeCentroid(le,st,!1)}else _.encodeCentroid(void 0,ht,!1)}_.borderDoneWithNeighborZ[Q]=Ve.canonical.z,_.needsCentroidUpdate=!0,nt&&(Ve.borderDoneWithNeighborZ[he]=_.canonical.z,Ve.needsCentroidUpdate=!0)}else{for(const et of Ee)_.encodeCentroid(void 0,_.featuresOnBorder[et],!1);if(nt){for(const et of He)Ve.encodeCentroid(void 0,Ve.featuresOnBorder[et],!1);Ve.borderDoneWithNeighborZ[he]=_.canonical.z,Ve.needsCentroidUpdate=!0}_.borderDoneWithNeighborZ[Q]=Ve.canonical.z,_.needsCentroidUpdate=!0}}(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(m)}const Tn=new o.Color(1,0,0,1),Pr=new o.Color(0,1,0,1),or=new o.Color(0,0,1,1),mr=new o.Color(1,0,1,1),Ir=new o.Color(0,1,1,1);function Jn(m,c,h){const _=m.context,x=m.transform,w=_.gl,P=x.projection.name==="globe",A=P?["PROJECTION_GLOBE_VIEW"]:null;let L=h.projMatrix;if(P&&o.globeToMercatorTransition(x.zoom)>0){const ht=o.transitionTileAABBinECEF(h.canonical,x),Vt=o.globeDenormalizeECEF(ht);L=o.multiply(new Float32Array(16),x.globeMatrix,Vt),o.multiply(L,x.projMatrix,L)}const V=m.useProgram("debug",null,A),U=c.getTileByID(h.key);m.terrain&&m.terrain.setupElevationDraw(U,V);const J=o.DepthMode.disabled,le=o.StencilMode.disabled,pe=m.colorModeForRenderPass(),ge="$debug";_.activeTexture.set(w.TEXTURE0),m.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),P?U._makeGlobeTileDebugBuffers(m.context,x):U._makeDebugTileBoundsBuffers(m.context,x.projection);const me=U._tileDebugBuffer||m.debugBuffer,ve=U._tileDebugIndexBuffer||m.debugIndexBuffer,Q=U._tileDebugSegments||m.debugSegments;V.draw(_,w.LINE_STRIP,J,le,pe,o.CullFaceMode.disabled,Go(L,o.Color.red),ge,me,ve,Q,null,null,null,[U._globeTileDebugBorderBuffer]);const he=U.latestRawTileData,Ee=Math.floor((he&&he.byteLength||0)/1024),ke=c.getTile(h).tileSize,Ve=512/Math.min(ke,512)*(h.overscaledZ/x.zoom)*.5;let He=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(He+=` => ${h.overscaledZ}`),He+=` ${Ee}kb`,function(ht,Vt){ht.initDebugOverlayCanvas();const st=ht.debugOverlayCanvas,Pt=ht.context.gl,mt=ht.debugOverlayCanvas.getContext("2d");mt.clearRect(0,0,st.width,st.height),mt.shadowColor="white",mt.shadowBlur=2,mt.lineWidth=1.5,mt.strokeStyle="white",mt.textBaseline="top",mt.font="bold 36px Open Sans, sans-serif",mt.fillText(Vt,5,5),mt.strokeText(Vt,5,5),ht.debugOverlayTexture.update(st),ht.debugOverlayTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE)}(m,He);const We=U._tileDebugTextBuffer||m.debugBuffer,nt=U._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,et=U._tileDebugTextSegments||m.debugSegments;V.draw(_,w.TRIANGLES,J,le,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,Go(L,o.Color.transparent,Ve),ge,We,nt,et,null,null,null,[U._globeTileDebugTextBuffer])}function ri(m,c,h,_){Li(m,0,c+h/2,m.transform.width,h,_)}function vo(m,c,h,_){Li(m,c-h/2,0,h,m.transform.height,_)}function Li(m,c,h,_,x,w){const P=m.context,A=P.gl;A.enable(A.SCISSOR_TEST),A.scissor(c*o.exported.devicePixelRatio,h*o.exported.devicePixelRatio,_*o.exported.devicePixelRatio,x*o.exported.devicePixelRatio),P.clear({color:w}),A.disable(A.SCISSOR_TEST)}const sa=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ha}=sa;function Zo(m,c,h,_){m.emplaceBack(c,h,_)}class so{constructor(c){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,Zo(this.vertexArray,-1,-1,1),Zo(this.vertexArray,1,-1,1),Zo(this.vertexArray,-1,1,1),Zo(this.vertexArray,1,1,1),Zo(this.vertexArray,-1,-1,-1),Zo(this.vertexArray,1,-1,-1),Zo(this.vertexArray,-1,1,-1),Zo(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,Ha),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function ns(m,c,h,_,x,w){const P=m.gl,A=c.paint.get("sky-atmosphere-color"),L=c.paint.get("sky-atmosphere-halo-color"),V=c.paint.get("sky-atmosphere-sun-intensity"),U=((J,le,pe,ge,me)=>({u_matrix_3f:J,u_sun_direction:le,u_sun_intensity:pe,u_color_tint_r:[ge.r,ge.g,ge.b,ge.a],u_color_tint_m:[me.r,me.g,me.b,me.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),_),x,V,A,L);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+w,c.skyboxTexture,0),h.draw(m,P.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,U,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const Ph=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class V_{constructor(c){const h=new o.StructArrayLayout5f20;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const _=new o.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(h,Ph.members),this.indexBuffer=c.createIndexBuffer(_),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const mu={symbol:function(m,c,h,_,x){if(m.renderPass!=="translucent")return;const w=o.StencilMode.disabled,P=m.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(A,L,V,U,J,le,pe){const ge=L.transform,me=J==="map",ve=le==="map";for(const Q of A){const he=U.getTile(Q),Ee=he.getBucket(V);if(!Ee||!Ee.text||!Ee.text.segments.get().length)continue;const ke=o.evaluateSizeForZoom(Ee.textSizeData,ge.zoom),Ve=ui(Q,Ee.getProjection(),ge),He=ge.calculatePixelsToTileUnitsMatrix(he),We=vt(Ve,he.tileID.canonical,ve,me,ge,Ee.getProjection(),He),nt=V.layout.get("icon-text-fit")!=="none"&&Ee.hasIconData();if(ke){const et=Math.pow(2,ge.zoom-he.tileID.overscaledZ);Ye(Ee,me,ve,pe,o.symbolSize,ge,We,Q,et,ke,nt)}}}(_,m,h,c,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),x),h.paint.get("icon-opacity").constantOr(1)!==0&&xt(m,c,h,_,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),w,P),h.paint.get("text-opacity").constantOr(1)!==0&&xt(m,c,h,_,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),w,P),c.map.showCollisionBoxes&&(zl(m,c,h,_,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),zl(m,c,h,_,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(m,c,h,_){if(m.renderPass!=="translucent")return;const x=h.paint.get("circle-opacity"),w=h.paint.get("circle-stroke-width"),P=h.paint.get("circle-stroke-opacity"),A=h.layout.get("circle-sort-key").constantOr(1)!==void 0;if(x.constantOr(1)===0&&(w.constantOr(1)===0||P.constantOr(1)===0))return;const L=m.context,V=L.gl,U=m.transform,J=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),le=o.StencilMode.disabled,pe=m.colorModeForRenderPass(),ge=U.projection.name==="globe",me=[o.mercatorXfromLng(U.center.lng),o.mercatorYfromLat(U.center.lat)],ve=[];for(let he=0;he<_.length;he++){const Ee=_[he],ke=c.getTile(Ee),Ve=ke.getBucket(h);if(!Ve||Ve.projection.name!==U.projection.name)continue;const He=Ve.programConfigurations.get(h.id),We=Ur(h);ge&&We.push("PROJECTION_GLOBE_VIEW");const nt=m.useProgram("circle",He,We),et=Ve.layoutVertexBuffer,ht=Ve.globeExtVertexBuffer,Vt=Ve.indexBuffer,st=U.projection.createInversionMatrix(U,Ee.canonical),Pt={programConfiguration:He,program:nt,layoutVertexBuffer:et,globeExtVertexBuffer:ht,indexBuffer:Vt,uniformValues:Th(m,Ee,ke,st,me,h),tile:ke};if(A){const mt=Ve.segments.get();for(const $t of mt)ve.push({segments:new o.SegmentVector([$t]),sortKey:$t.sortKey,state:Pt})}else ve.push({segments:Ve.segments,sortKey:0,state:Pt})}A&&ve.sort((he,Ee)=>he.sortKey-Ee.sortKey);const Q={useDepthForOcclusion:!ge};for(const he of ve){const{programConfiguration:Ee,program:ke,layoutVertexBuffer:Ve,globeExtVertexBuffer:He,indexBuffer:We,uniformValues:nt,tile:et}=he.state,ht=he.segments;m.terrain&&m.terrain.setupElevationDraw(et,ke,Q),m.prepareDrawProgram(L,ke,et.tileID.toUnwrapped()),ke.draw(L,V.TRIANGLES,J,le,pe,o.CullFaceMode.disabled,nt,h.id,Ve,We,ht,h.paint,U.zoom,Ee,[He])}},heatmap:function(m,c,h,_){if(h.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const x=m.context,w=x.gl,P=o.StencilMode.disabled,A=new o.ColorMode([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(pe,ge,me,ve){const Q=pe.gl,he=ge.width*ve,Ee=ge.height*ve;pe.activeTexture.set(Q.TEXTURE1),pe.viewport.set([0,0,he,Ee]);let ke=me.heatmapFbo;if(!ke||ke&&(ke.width!==he||ke.height!==Ee)){ke&&ke.destroy();const Ve=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,Ve),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),ke=me.heatmapFbo=pe.createFramebuffer(he,Ee,!1),function(He,We,nt,et,ht,Vt){const st=He.gl;st.texImage2D(st.TEXTURE_2D,0,He.isWebGL2&&He.extRenderToTextureHalfFloat?st.RGBA16F:st.RGBA,ht,Vt,0,st.RGBA,He.extRenderToTextureHalfFloat?He.isWebGL2?st.HALF_FLOAT:He.extTextureHalfFloat.HALF_FLOAT_OES:st.UNSIGNED_BYTE,null),et.colorAttachment.set(nt)}(pe,0,Ve,ke,he,Ee)}else Q.bindTexture(Q.TEXTURE_2D,ke.colorAttachment.get()),pe.bindFramebuffer.set(ke.framebuffer)})(x,m,h,m.transform.projection.name==="globe"?.5:.25),x.clear({color:o.Color.transparent});const L=m.transform,V=L.projection.name==="globe",U=V?["PROJECTION_GLOBE_VIEW"]:null,J=V?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,le=[o.mercatorXfromLng(L.center.lng),o.mercatorYfromLat(L.center.lat)];for(let pe=0;pe<_.length;pe++){const ge=_[pe];if(c.hasRenderableParent(ge))continue;const me=c.getTile(ge),ve=me.getBucket(h);if(!ve||ve.projection.name!==L.projection.name)continue;const Q=ve.programConfigurations.get(h.id),he=m.useProgram("heatmap",Q,U),{zoom:Ee}=m.transform;m.terrain&&m.terrain.setupElevationDraw(me,he),m.prepareDrawProgram(x,he,ge.toUnwrapped());const ke=L.projection.createInversionMatrix(L,ge.canonical);he.draw(x,w.TRIANGLES,o.DepthMode.disabled,P,A,J,Wp(m,ge,me,ke,le,Ee,h.paint.get("heatmap-intensity")),h.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,h.paint,m.transform.zoom,Q,V?[ve.globeExtVertexBuffer]:null)}x.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(x,w){const P=x.context,A=P.gl,L=w.heatmapFbo;if(!L)return;P.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,L.colorAttachment.get()),P.activeTexture.set(A.TEXTURE1);let V=w.colorRampTexture;V||(V=w.colorRampTexture=new o.Texture(P,w.colorRamp,A.RGBA)),V.bind(A.LINEAR,A.CLAMP_TO_EDGE),x.useProgram("heatmapTexture").draw(P,A.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,x.colorModeForRenderPass(),o.CullFaceMode.disabled,((U,J,le,pe)=>({u_image:0,u_color_ramp:1,u_opacity:J.paint.get("heatmap-opacity")}))(0,w),w.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,w.paint,x.transform.zoom)}(m,h))},line:function(m,c,h,_){if(m.renderPass!=="translucent")return;const x=h.paint.get("line-opacity"),w=h.paint.get("line-width");if(x.constantOr(1)===0||w.constantOr(1)===0)return;const P=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),A=m.colorModeForRenderPass(),L=m.terrain&&m.terrain.renderingToTexture?1:o.exported.devicePixelRatio,V=h.paint.get("line-dasharray"),U=V.constantOr(1),J=h.layout.get("line-cap"),le=h.paint.get("line-pattern"),pe=le.constantOr(1),ge=h.paint.get("line-gradient"),me=pe?"linePattern":"line",ve=m.context,Q=ve.gl,he=(ke=>{const Ve=[];va(ke)&&Ve.push("RENDER_LINE_DASH"),ke.paint.get("line-gradient")&&Ve.push("RENDER_LINE_GRADIENT");const He=ke.paint.get("line-trim-offset");He[0]===0&&He[1]===0||Ve.push("RENDER_LINE_TRIM_OFFSET");const We=ke.paint.get("line-pattern").constantOr(1),nt=ke.paint.get("line-opacity").constantOr(1)!==1;return!We&&nt&&Ve.push("RENDER_LINE_ALPHA_DISCARD"),Ve})(h);let Ee=he.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(Ee=!1);for(const ke of _){const Ve=c.getTile(ke);if(pe&&!Ve.patternsLoaded())continue;const He=Ve.getBucket(h);if(!He)continue;m.prepareDrawTile();const We=He.programConfigurations.get(h.id),nt=m.useProgram(me,We,he),et=le.constantOr(null);if(et&&Ve.imageAtlas){const Ct=Ve.imageAtlas.patternPositions[et.toString()];Ct&&We.setConstantPatternPositions(Ct)}const ht=V.constantOr(null),Vt=J.constantOr(null);if(!pe&&ht&&Vt&&Ve.lineAtlas){const Ct=Ve.lineAtlas.getDash(ht,Vt);Ct&&We.setConstantPatternPositions(Ct)}let[st,Pt]=h.paint.get("line-trim-offset");(Vt==="round"||Vt==="square")&&st!==Pt&&(st===0&&(st-=1),Pt===1&&(Pt+=1));const mt=m.terrain?ke.projMatrix:null,$t=pe?bc(m,Ve,h,mt,L):_m(m,Ve,h,mt,He.lineClipsArray.length,L,[st,Pt]);if(ge){const Ct=He.gradients[h.id];let Ht=Ct.texture;if(h.gradientVersion!==Ct.version){let zt=256;if(h.stepInterpolant){const Gt=c.getSource().maxzoom,zn=ke.canonical.z===Gt?Math.ceil(1<<m.transform.maxZoom-ke.canonical.z):1;zt=o.clamp(o.nextPowerOfTwo(He.maxLineLength/o.EXTENT*1024*zn),256,ve.maxTextureSize)}Ct.gradient=o.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:zt,image:Ct.gradient||void 0,clips:He.lineClipsArray}),Ct.texture?Ct.texture.update(Ct.gradient):Ct.texture=new o.Texture(ve,Ct.gradient,Q.RGBA),Ct.version=h.gradientVersion,Ht=Ct.texture}ve.activeTexture.set(Q.TEXTURE1),Ht.bind(h.stepInterpolant?Q.NEAREST:Q.LINEAR,Q.CLAMP_TO_EDGE)}U&&(ve.activeTexture.set(Q.TEXTURE0),Ve.lineAtlasTexture.bind(Q.LINEAR,Q.REPEAT),We.updatePaintBuffers()),pe&&(ve.activeTexture.set(Q.TEXTURE0),Ve.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),We.updatePaintBuffers()),m.prepareDrawProgram(ve,nt,ke.toUnwrapped());const dt=Ct=>{nt.draw(ve,Q.TRIANGLES,P,Ct,A,o.CullFaceMode.disabled,$t,h.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,h.paint,m.transform.zoom,We,[He.layoutVertexBuffer2])};if(Ee){const Ct=m.stencilModeForClipping(ke).ref;Ct===0&&m.terrain&&ve.clear({stencil:0});const Ht={func:Q.EQUAL,mask:255};$t.u_alpha_discard_threshold=.8,dt(new o.StencilMode(Ht,Ct,255,Q.KEEP,Q.KEEP,Q.INVERT)),$t.u_alpha_discard_threshold=0,dt(new o.StencilMode(Ht,Ct,255,Q.KEEP,Q.KEEP,Q.KEEP))}else dt(m.stencilModeForClipping(ke))}Ee&&(m.resetStencilClippingMasks(),m.terrain&&ve.clear({stencil:0}))},fill:function(m,c,h,_){const x=h.paint.get("fill-color"),w=h.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const P=m.colorModeForRenderPass(),A=h.paint.get("fill-pattern"),L=m.opaquePassEnabledForLayer()&&!A.constantOr(1)&&x.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===L){const V=m.depthModeForSublayer(1,m.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);mn(m,c,h,_,V,P,!1)}if(m.renderPass==="translucent"&&h.paint.get("fill-antialias")){const V=m.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);mn(m,c,h,_,V,P,!0)}},"fill-extrusion":function(m,c,h,_){const x=h.paint.get("fill-extrusion-opacity");if(x!==0&&m.renderPass==="translucent"){const w=new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D);if(x!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))Pn(m,c,h,_,w,o.StencilMode.disabled,o.ColorMode.disabled),Pn(m,c,h,_,w,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const P=m.colorModeForRenderPass();Pn(m,c,h,_,w,o.StencilMode.disabled,P)}}},hillshade:function(m,c,h,_){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const x=m.context,w=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),P=m.colorModeForRenderPass(),A=m.terrain&&m.terrain.renderingToTexture,[L,V]=m.renderPass!=="translucent"||A?[{},_]:m.stencilConfigForOverlap(_);for(const U of V){const J=c.getTile(U);if(J.needsHillshadePrepare&&m.renderPass==="offscreen")tn(m,J,h,w,o.StencilMode.disabled,P);else if(m.renderPass==="translucent"){const le=A&&m.terrain?m.terrain.stencilModeForRTTOverlap(U):L[U.overscaledZ];Lt(m,U,J,h,w,le,P)}}x.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,c,h,_,x,w){if(m.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!_.length)return;const P=m.context,A=P.gl,L=c.getSource(),V=m.useProgram("raster"),U=m.colorModeForRenderPass(),J=m.terrain&&m.terrain.renderingToTexture,[le,pe]=L instanceof On||J?[{},_]:m.stencilConfigForOverlap(_),ge=pe[pe.length-1].overscaledZ,me=!m.options.moving;for(const ve of pe){const Q=J?o.DepthMode.disabled:m.depthModeForSublayer(ve.overscaledZ-ge,h.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,A.LESS),he=ve.toUnwrapped(),Ee=c.getTile(ve);if(J&&(!Ee||!Ee.hasData()))continue;const ke=J?ve.projMatrix:m.transform.calculateProjMatrix(he,me),Ve=m.terrain&&J?m.terrain.stencilModeForRTTOverlap(ve):le[ve.overscaledZ],He=w?0:h.paint.get("raster-fade-duration");Ee.registerFadeDuration(He);const We=c.findLoadedParent(ve,0),nt=Mr(Ee,We,c,m.transform,He);let et,ht;m.terrain&&m.terrain.prepareDrawTile();const Vt=h.paint.get("raster-resampling")==="nearest"?A.NEAREST:A.LINEAR;P.activeTexture.set(A.TEXTURE0),Ee.texture.bind(Vt,A.CLAMP_TO_EDGE),P.activeTexture.set(A.TEXTURE1),We?(We.texture.bind(Vt,A.CLAMP_TO_EDGE),et=Math.pow(2,We.tileID.overscaledZ-Ee.tileID.overscaledZ),ht=[Ee.tileID.canonical.x*et%1,Ee.tileID.canonical.y*et%1]):Ee.texture.bind(Vt,A.CLAMP_TO_EDGE),Ee.texture.useMipmap&&P.extTextureFilterAnisotropic&&m.transform.pitch>20&&A.texParameterf(A.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax);const st=id(ke,ht||[0,0],et||1,nt,h,L instanceof On?L.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(P,V,he),L instanceof On)L.boundsBuffer&&L.boundsSegments&&V.draw(P,A.TRIANGLES,Q,o.StencilMode.disabled,U,o.CullFaceMode.disabled,st,h.id,L.boundsBuffer,m.quadTriangleIndexBuffer,L.boundsSegments);else{const{tileBoundsBuffer:Pt,tileBoundsIndexBuffer:mt,tileBoundsSegments:$t}=m.getTileBoundsBuffers(Ee);V.draw(P,A.TRIANGLES,Q,Ve,U,o.CullFaceMode.disabled,st,h.id,Pt,mt,$t)}}m.resetStencilClippingMasks()},background:function(m,c,h,_){const x=h.paint.get("background-color"),w=h.paint.get("background-opacity");if(w===0)return;const P=m.context,A=P.gl,L=m.transform,V=L.tileSize,U=h.paint.get("background-pattern");if(m.isPatternMissing(U))return;const J=!U&&x.a===1&&w===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==J)return;const le=o.StencilMode.disabled,pe=m.depthModeForSublayer(0,J==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),ge=m.colorModeForRenderPass(),me=m.useProgram(U?"backgroundPattern":"background");let ve,Q=_;Q||(ve=m.getBackgroundTiles(),Q=Object.values(ve).map(he=>he.tileID)),U&&(P.activeTexture.set(A.TEXTURE0),m.imageManager.bind(m.context));for(const he of Q){const Ee=he.toUnwrapped(),ke=_?he.projMatrix:m.transform.calculateProjMatrix(Ee);m.prepareDrawTile();const Ve=c?c.getTile(he):ve?ve[he.key]:new o.Tile(he,V,L.zoom,m),He=U?Ch(ke,w,m,U,{tileID:he,tileSize:V}):Sc(ke,w,x);m.prepareDrawProgram(P,me,Ee);const{tileBoundsBuffer:We,tileBoundsIndexBuffer:nt,tileBoundsSegments:et}=m.getTileBoundsBuffers(Ve);me.draw(P,A.TRIANGLES,pe,le,ge,o.CullFaceMode.disabled,He,h.id,We,nt,et)}},sky:function(m,c,h){const _=m.transform,x=_.projection.name==="mercator"||_.projection.name==="globe"?1:o.smoothstep(7,8,_.zoom),w=h.paint.get("sky-opacity")*x;if(w===0)return;const P=m.context,A=h.paint.get("sky-type"),L=new o.DepthMode(P.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),V=m.frameCounter/1e3%1;A==="atmosphere"?m.renderPass==="offscreen"?h.needsSkyboxCapture(m)&&(function(U,J,le,pe){const ge=U.context,me=ge.gl;let ve=J.skyboxFbo;if(!ve){ve=J.skyboxFbo=ge.createFramebuffer(32,32,!1),J.skyboxGeometry=new so(ge),J.skyboxTexture=ge.gl.createTexture(),me.bindTexture(me.TEXTURE_CUBE_MAP,J.skyboxTexture),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_MAG_FILTER,me.LINEAR);for(let ke=0;ke<6;++ke)me.texImage2D(me.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,me.RGBA,32,32,0,me.RGBA,me.UNSIGNED_BYTE,null)}ge.bindFramebuffer.set(ve.framebuffer),ge.viewport.set([0,0,32,32]);const Q=J.getCenter(U,!0),he=U.useProgram("skyboxCapture"),Ee=new Float64Array(16);o.identity(Ee),o.rotateY(Ee,Ee,.5*-Math.PI),ns(ge,J,he,Ee,Q,0),o.identity(Ee),o.rotateY(Ee,Ee,.5*Math.PI),ns(ge,J,he,Ee,Q,1),o.identity(Ee),o.rotateX(Ee,Ee,.5*-Math.PI),ns(ge,J,he,Ee,Q,2),o.identity(Ee),o.rotateX(Ee,Ee,.5*Math.PI),ns(ge,J,he,Ee,Q,3),o.identity(Ee),ns(ge,J,he,Ee,Q,4),o.identity(Ee),o.rotateY(Ee,Ee,Math.PI),ns(ge,J,he,Ee,Q,5),ge.viewport.set([0,0,U.width,U.height])}(m,h),h.markSkyboxValid(m)):m.renderPass==="sky"&&function(U,J,le,pe,ge){const me=U.context,ve=me.gl,Q=U.transform,he=U.useProgram("skybox");me.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_CUBE_MAP,J.skyboxTexture);const Ee=((ke,Ve,He,We,nt)=>({u_matrix:ke,u_sun_direction:Ve,u_cubemap:0,u_opacity:We,u_temporal_offset:nt}))(Q.skyboxMatrix,J.getCenter(U,!1),0,pe,ge);U.prepareDrawProgram(me,he),he.draw(me,ve.TRIANGLES,le,o.StencilMode.disabled,U.colorModeForRenderPass(),o.CullFaceMode.backCW,Ee,"skybox",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(m,h,L,w,V):A==="gradient"&&m.renderPass==="sky"&&function(U,J,le,pe,ge){const me=U.context,ve=me.gl,Q=U.transform,he=U.useProgram("skyboxGradient");J.skyboxGeometry||(J.skyboxGeometry=new so(me)),me.activeTexture.set(ve.TEXTURE0);let Ee=J.colorRampTexture;Ee||(Ee=J.colorRampTexture=new o.Texture(me,J.colorRamp,ve.RGBA)),Ee.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const ke=((Ve,He,We,nt,et)=>({u_matrix:Ve,u_color_ramp:0,u_center_direction:He,u_radius:o.degToRad(We),u_opacity:nt,u_temporal_offset:et}))(Q.skyboxMatrix,J.getCenter(U,!1),J.paint.get("sky-gradient-radius"),pe,ge);U.prepareDrawProgram(me,he),he.draw(me,ve.TRIANGLES,le,o.StencilMode.disabled,U.colorModeForRenderPass(),o.CullFaceMode.backCW,ke,"skyboxGradient",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(m,h,L,w,V)},debug:function(m,c,h){for(let _=0;_<h.length;_++)Jn(m,c,h[_])},custom:function(m,c,h,_){const x=m.context,w=h.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&h.isLayerDraped()){if(m.renderPass==="offscreen"){const P=w.prerender;if(P){if(m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const A=m.transform.pointMerc;P.call(w,x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(m.transform.zoom),[A.x,A.y],m.transform.pixelsPerMeterRatio)}else P.call(w,x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const A=w.renderToTile;if(A){const L=_[0].canonical,V=new o.MercatorCoordinate(L.x+_[0].wrap*(1<<L.z),L.y,L.z);x.setDepthMode(o.DepthMode.disabled),x.setStencilMode(o.StencilMode.disabled),x.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),A.call(w,x.gl,V),x.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),x.setStencilMode(o.StencilMode.disabled);const P=w.renderingMode==="3d"?new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(x.setDepthMode(P),m.transform.projection.name==="globe"){const A=m.transform.pointMerc;w.render(x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(m.transform.zoom),[A.x,A.y],m.transform.pixelsPerMeterRatio)}else w.render(x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState(),x.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class ad{constructor(c,h,_=!1){this.context=new ut(c,_),this.transform=h,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(c,h){const _=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new _a(this,c));const x=this._terrain;this.transform.elevation=_?x:null,x.update(c,this.transform,h)}_updateFog(c){const h=c.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,x]=h.getFovAdjustedRange(this.transform._fov);if(_>x)return void(this.transform.fogCullDistSq=null);const w=_+.78*(x-_);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(c,h){if(this.width=c*o.exported.devicePixelRatio,this.height=h*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._layers[_].resize()}setup(){const c=this.context,h=new o.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(o.EXTENT,0),h.emplaceBack(0,o.EXTENT),h.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(h,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const _=new o.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(o.EXTENT,0),_.emplaceBack(0,o.EXTENT),_.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=c.createVertexBuffer(_,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const x=new o.StructArrayLayout2i4;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(x,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const w=new o.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(o.EXTENT,0,o.EXTENT,0),w.emplaceBack(0,o.EXTENT,0,o.EXTENT),w.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=c.createVertexBuffer(w,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const P=new o.StructArrayLayout3ui6;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(P);const A=new o.StructArrayLayout1ui2;for(const V of[0,1,3,2,0])A.emplaceBack(V);this.debugIndexBuffer=c.createIndexBuffer(A),this.emptyTexture=new o.Texture(c,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=o.create();const L=this.context.gl;this.stencilClearMode=new o.StencilMode({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new V_(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context,h=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(c,h.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,Va(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,h,_){if(!h||this.currentStencilSource===h.id||!c.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let A=!1;for(const L of _)if(this._tileClippingMaskIDs[L.key]===void 0){A=!0;break}if(!A)return}this.currentStencilSource=h.id;const x=this.context,w=x.gl;this.nextStencilID+_.length>256&&this.clearStencil(),x.setColorMode(o.ColorMode.disabled),x.setDepthMode(o.DepthMode.disabled);const P=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of _){const L=h.getTile(A),V=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,{tileBoundsBuffer:U,tileBoundsIndexBuffer:J,tileBoundsSegments:le}=this.getTileBoundsBuffers(L);P.draw(x,w.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:w.ALWAYS,mask:0},V,255,w.KEEP,w.KEEP,w.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Va(A.projMatrix),"$clipping",U,J,le)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,h=this.context.gl;return new o.StencilMode({func:h.NOTEQUAL,mask:255},c,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const h=this.context.gl;return new o.StencilMode({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(c){const h=this.context.gl,_=c.sort((P,A)=>A.overscaledZ-P.overscaledZ),x=_[_.length-1].overscaledZ,w=_[0].overscaledZ-x+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const P={};for(let A=0;A<w;A++)P[A+x]=new o.StencilMode({func:h.GEQUAL,mask:255},A+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=w,[P,_]}return[{[x]:o.StencilMode.disabled},_]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([c.CONSTANT_COLOR,c.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(c,h,_){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new o.DepthMode(_||this.context.gl.LEQUAL,h,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,h){this.style=c,this.options=h,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const _=this.style.order,x=this.style._sourceCaches;for(const V in x){const U=x[V];U.used&&U.prepare(this.context)}const w={},P={},A={};for(const V in x){const U=x[V];w[V]=U.getVisibleCoordinates(),P[V]=w[V].slice().reverse(),A[V]=U.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let V=0;V<_.length;V++)if(this.style._layers[_[V]].is3D()){this.opaquePassCutoff=V;break}if(this.terrain&&(this.terrain.updateTileBinding(A),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const V of _){const U=this.style._layers[V],J=c._getLayerSourceCache(U);if(!U.hasOffscreenPass()||U.isHidden(this.transform.zoom))continue;const le=J?P[J.id]:void 0;(U.type==="custom"||U.isSky()||le&&le.length)&&this.renderLayer(this,J,U,le)}this.depthRangeFor3D=[0,1-(c.order.length+2)*this.numSublayers*this.depthEpsilon];const L=this.terrain;if(L&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&L.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:h.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const V=this.style._layers[_[this.currentLayer]],U=c._getLayerSourceCache(V);if(V.isSky())continue;const J=U?P[U.id]:void 0;this._renderTileClippingMasks(V,U,J),this.renderLayer(this,U,V,J)}if(this.style.fog&&this.transform.projection.supportsFog&&function(V,U){const J=V.context,le=J.gl,pe=V.transform,ge=new o.DepthMode(le.LEQUAL,o.DepthMode.ReadOnly,[0,1]),me=V.useProgram("globeAtmosphere",null,pe.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ve=o.globeToMercatorTransition(pe.zoom),Q=U.properties.get("color").toArray01(),he=U.properties.get("high-color").toArray01(),Ee=U.properties.get("space-color").toArray01PremultipliedAlpha(),ke=o.identity$1([]);o.rotateY$1(ke,ke,-o.degToRad(pe._center.lng)),o.rotateX$1(ke,ke,o.degToRad(pe._center.lat)),o.rotateZ$1(ke,ke,pe.angle),o.rotateX$1(ke,ke,-pe._pitch);const Ve=o.fromQuat(new Float32Array(16),ke),He=o.mapValue(U.properties.get("star-intensity"),0,1,0,.25),We=5e-4,nt=o.mapValue(U.properties.get("horizon-blend"),0,1,We,.25),et=o.globeUseCustomAntiAliasing(V,J,pe)&&nt===We?pe.worldSize/(2*Math.PI*1.025)-1:pe.globeRadius,ht=V.frameCounter/1e3%1,Vt=o.length(pe.globeCenterInViewSpace),st=Math.sqrt(Math.pow(Vt,2)-Math.pow(et,2)),Pt=Math.acos(st/Vt),mt=((dt,Ct,Ht,zt,Gt,zn,er,Cn,Gn,Tr,xr,Mn,jr,Hr)=>({u_frustum_tl:dt,u_frustum_tr:Ct,u_frustum_br:Ht,u_frustum_bl:zt,u_horizon:Gt,u_transition:zn,u_fadeout_range:er,u_color:Cn,u_high_color:Gn,u_space_color:Tr,u_star_intensity:xr,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Mn,u_horizon_angle:jr,u_rotation_matrix:Hr}))(pe.frustumCorners.TL,pe.frustumCorners.TR,pe.frustumCorners.BR,pe.frustumCorners.BL,pe.frustumCorners.horizon,ve,nt,Q,he,Ee,He,ht,Pt,Ve);V.prepareDrawProgram(J,me);const $t=V.atmosphereBuffer;$t&&me.draw(J,le.TRIANGLES,ge,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,mt,"skybox",$t.vertexBuffer,$t.indexBuffer,$t.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const V=this.style._layers[_[this.currentLayer]],U=c._getLayerSourceCache(V);V.isSky()&&this.renderLayer(this,U,V,U?P[U.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;){const V=this.style._layers[_[this.currentLayer]],U=c._getLayerSourceCache(V);if(V.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(V)){if(V.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const J=U?(V.type==="symbol"?A:P)[U.id]:void 0;this._renderTileClippingMasks(V,U,U?w[U.id]:void 0),this.renderLayer(this,U,V,J),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let V=null;o.values(this.style._layers).forEach(U=>{const J=c._getLayerSourceCache(U);J&&!U.isHidden(this.transform.zoom)&&(!V||V.getSource().maxzoom<J.getSource().maxzoom)&&(V=J)}),V&&this.options.showTileBoundaries&&mu.debug(this,V,V.getVisibleCoordinates())}this.options.showPadding&&function(V){const U=V.transform.padding;ri(V,V.transform.height-(U.top||0),3,Tn),ri(V,U.bottom||0,3,Pr),vo(V,U.left||0,3,or),vo(V,V.transform.width-(U.right||0),3,mr);const J=V.transform.centerPoint;(function(le,pe,ge,me){Li(le,pe-1,ge-10,2,20,me),Li(le,pe-10,ge-1,20,2,me)})(V,J.x,V.transform.height-J.y,Ir)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(c,h,_,x){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||x&&x.length)&&(this.id=_.id,this.gpuTimingStart(_),(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes(_.type)||c.terrain&&_.type==="custom")&&mu[_.type](c,h,_,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let _=this.gpuTimers[c.id];_||(_=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),_.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,h=c.createQueryEXT();this.deferredRenderGpuTimeQueries.push(h),c.beginQueryEXT(c.TIME_ELAPSED_EXT,h)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const h={};for(const _ in c){const x=c[_],w=this.context.extTimerQuery,P=w.getQueryObjectEXT(x.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(x.query),h[_]=P}return h}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery;let _=0;for(const x of c)_+=h.getQueryObjectEXT(x,h.QUERY_RESULT_EXT)/1e6,h.deleteQueryEXT(x);return _}translatePosMatrix(c,h,_,x,w){if(!_[0]&&!_[1])return c;const P=w?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(P){const V=Math.sin(P),U=Math.cos(P);_=[_[0]*U-_[1]*V,_[0]*V+_[1]*U]}const A=[w?_[0]:kt(h,_[0],this.transform.zoom),w?_[1]:kt(h,_[1],this.transform.zoom),0],L=new Float32Array(16);return o.translate(L,c,A),L}saveTileTexture(c){const h=this._tileTextures[c.size[0]];h?h.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const h=this._tileTextures[c];return h&&h.length>0?h.pop():null}isPatternMissing(c){return c===null||c!==void 0&&!this.imageManager.getPattern(c.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const c=this.terrain&&this.terrain.renderingToTexture,h=this.terrain&&this.terrain.exaggeration()===0,_=this.style&&this.style.fog,x=[];return this.terrainRenderModeElevated()&&x.push("TERRAIN"),this.transform.projection.name==="globe"&&x.push("GLOBE"),h&&x.push("ZERO_EXAGGERATION"),_&&!c&&_.getOpacity(this.transform.pitch)!==0&&x.push("FOG"),c&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}useProgram(c,h,_){this.cache=this.cache||{};const x=_||[],w=this.currentGlobalDefines().concat(x),P=Sr.cacheKey(se[c],c,w,h);return this.cache[P]||(this.cache[P]=new Sr(this.context,c,se[c],h,fu[c],w)),this.cache[P]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(c,h,_){if(this.terrain&&this.terrain.renderingToTexture)return;const x=this.style.fog;if(x){const w=x.getOpacity(this.transform.pitch),P=((A,L,V,U,J,le,pe,ge,me,ve,Q)=>{const he=A.transform,Ee=L.properties.get("color").toArray01();Ee[3]=U;const ke=A.frameCounter/1e3%1;return{u_fog_matrix:V?he.calculateFogTileMatrix(V):A.identityMat,u_fog_range:L.getFovAdjustedRange(he._fov),u_fog_color:Ee,u_fog_horizon_blend:L.properties.get("horizon-blend"),u_fog_temporal_offset:ke,u_frustum_tl:J,u_frustum_tr:le,u_frustum_br:pe,u_frustum_bl:ge,u_globe_pos:me,u_globe_radius:ve,u_viewport:Q,u_globe_transition:o.globeToMercatorTransition(he.zoom),u_is_globe:+(he.projection.name==="globe")}})(this,x,_,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);h.setFogUniformValues(c,P)}}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){const c=this.canvasCopy();c&&(this.frameCopies.push(c),this.tileLoaded=!1)}canvasCopy(){const c=this.context.gl,h=c.createTexture();return c.bindTexture(c.TEXTURE_2D,h),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&c.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const c=this._backgroundTiles,h=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const x of _)h[x.key]=c[x.key]||new o.Tile(x,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}}class qp{constructor(c=0,h=0,_=0,x=0){if(isNaN(c)||c<0||isNaN(h)||h<0||isNaN(_)||_<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=h,this.left=_,this.right=x}interpolate(c,h,_){return h.top!=null&&c.top!=null&&(this.top=o.number(c.top,h.top,_)),h.bottom!=null&&c.bottom!=null&&(this.bottom=o.number(c.bottom,h.bottom,_)),h.left!=null&&c.left!=null&&(this.left=o.number(c.left,h.left,_)),h.right!=null&&c.right!=null&&(this.right=o.number(c.right,h.right,_)),this}getCenter(c,h){const _=o.clamp((this.left+c-this.right)/2,0,c),x=o.clamp((this.top+h-this.bottom)/2,0,h);return new o.Point(_,x)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new qp(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Gp(m,c){const h=o.getColumn(m,3);o.fromQuat(m,c),o.setColumn(m,3,h)}function Rr(m,c){const h=o.identity$1([]);return o.rotateZ$1(h,h,-c),o.rotateX$1(h,h,-m),h}function Ih(m,c){const h=[m[0],m[1],0],_=[c[0],c[1],0];if(o.length(h)>=1e-15){const P=o.normalize([],h);o.scale$2(_,P,o.dot(_,P)),c[0]=_[0],c[1]=_[1]}const x=o.cross([],c,m);if(o.len(x)<1e-15)return null;const w=Math.atan2(-x[1],x[0]);return Rr(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),w)}class W_{constructor(c,h){this.position=c,this.orientation=h}get position(){return this._position}set position(c){if(c){const h=c instanceof o.MercatorCoordinate?c:new o.MercatorCoordinate(c[0],c[1],c[2]);this._renderWorldCopies&&(h.x=o.wrap(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(c,h){if(this.orientation=null,!this.position)return;const _=this.position,x=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(c)):0,w=o.MercatorCoordinate.fromLngLat(c,x),P=[w.x-_.x,w.y-_.y,w.z-_.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=Ih(P,h)}setPitchBearing(c,h){this.orientation=Rr(o.degToRad(c),o.degToRad(-h))}}class Zp{constructor(c,h){this._transform=o.identity([]),this.orientation=h,this.position=c}get mercatorPosition(){const c=this.position;return new o.MercatorCoordinate(c[0],c[1],c[2])}get position(){const c=o.getColumn(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var h;c&&o.setColumn(this._transform,3,[(h=c)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||o.identity$1([]),c&&Gp(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,h){this._orientation=Rr(c,h),Gp(this._transform,this._orientation)}forward(){const c=o.getColumn(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=o.getColumn(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=o.getColumn(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,h){const _=new Float64Array(16);return o.invert(_,this.getWorldToCamera(c,h)),_}getWorldToCameraPosition(c,h,_){const x=this.position;o.scale$2(x,x,-c);const w=new Float64Array(16);return o.fromScaling(w,[_,_,_]),o.translate(w,w,x),w[10]*=h,w}getWorldToCamera(c,h){const _=new Float64Array(16),x=new Float64Array(4),w=this.position;return o.conjugate(x,this._orientation),o.scale$2(w,w,-c),o.fromQuat(_,x),o.translate(_,_,w),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=h,_[9]*=h,_[10]*=h,_[11]*=h,_}getCameraToClipPerspective(c,h,_,x){const w=new Float64Array(16);return o.perspective(w,c,h,_,x),w}getDistanceToElevation(c,h=!1){const _=c===0?0:o.mercatorZfromAltitude(c,h?o.latFromMercatorY(this.position[1]):this.position[1]),x=this.forward();return(_-this.position[2])/x[2]}clone(){return new Zp([...this.position],[...this.orientation])}}function sd(m,c){const h=Xp(m.projection,m.zoom,m.width,m.height),_=function(w,P,A,L,V){const U=new o.LngLat(A.lng-180*Fl,A.lat),J=new o.LngLat(A.lng+180*Fl,A.lat),le=w.project(U.lng,U.lat),pe=w.project(J.lng,J.lat),ge=-Math.atan2(pe.y-le.y,pe.x-le.x),me=o.MercatorCoordinate.fromLngLat(A);me.y=o.clamp(me.y,-1+Fl,1-Fl);const ve=me.toLngLat(),Q=w.project(ve.lng,ve.lat),he=o.MercatorCoordinate.fromLngLat(ve);he.x+=Fl;const Ee=he.toLngLat(),ke=w.project(Ee.lng,Ee.lat),Ve=Kp(ke.x-Q.x,ke.y-Q.y,ge),He=o.MercatorCoordinate.fromLngLat(ve);He.y+=Fl;const We=He.toLngLat(),nt=w.project(We.lng,We.lat),et=Kp(nt.x-Q.x,nt.y-Q.y,ge),ht=Math.abs(Ve.x)/Math.abs(et.y),Vt=o.identity([]);o.rotateZ(Vt,Vt,-ge*(1-(V?0:L)));const st=o.identity([]);return o.scale(st,st,[1,1-(1-ht)*L,1]),st[4]=-et.x/et.y*L,o.rotateZ(st,st,ge),o.multiply(st,Vt,st),st}(m.projection,0,m.center,h,c),x=H_(m);return o.scale(_,_,[x,x,1]),_}function H_(m){const c=m.projection,h=Xp(m.projection,m.zoom,m.width,m.height),_=q_(c,m.center),x=q_(c,o.LngLat.convert(c.center));return Math.pow(2,_*h+(1-h)*x)}function Xp(m,c,h,_,x=1/0){const w=m.range;if(!w)return 0;const P=Math.min(x,Math.max(h,_)),A=Math.log(P/1024)/Math.LN2;return o.smoothstep(w[0]+A,w[1]+A,c)}const Fl=1/4e4;function q_(m,c){const h=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=new o.LngLat(c.lng-180*Fl,h),x=new o.LngLat(c.lng+180*Fl,h),w=m.project(_.lng,h),P=m.project(x.lng,h),A=o.MercatorCoordinate.fromLngLat(_),L=o.MercatorCoordinate.fromLngLat(x),V=P.x-w.x,U=P.y-w.y,J=L.x-A.x,le=L.y-A.y,pe=Math.sqrt((J*J+le*le)/(V*V+U*U));return Math.log(pe)/Math.LN2}function Kp(m,c,h){const _=Math.cos(h),x=Math.sin(h);return{x:m*_-c*x,y:m*x+c*_}}class ld{constructor(c,h,_,x,w,P,A){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=c||0,this._maxZoom=h||22,this._minPitch=_??0,this._maxPitch=x??60,this.setProjection(P),this.setMaxBounds(A),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new qp,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Zp,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const c=new ld(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.mercatorFromTransition=this.mercatorFromTransition,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(c,h=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||_)&&this._updateCameraOnTerrain(),(c||_)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const _=!v(h,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const h=c!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.Point(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const h=-c*Math.PI/180;var _;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(_=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(x,w,P){var A=w[0],L=w[1],V=w[2],U=w[3],J=Math.sin(P),le=Math.cos(P);x[0]=A*le+V*J,x[1]=L*le+U*J,x[2]=A*-J+V*le,x[3]=L*-J+U*le}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const h=o.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const c=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/c)}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=o.degToRad(c),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const h=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const c=this._elevation;this._centerAltitude=c.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=c.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let x=0,w=0;for(let P=0;P<h.length;P++){const A=new o.Point(h[P][0]*this.width,_+h[P][1]*(this.height-_)),L=c.pointCoordinate(A);if(!L)continue;const V=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);x+=L[3]*V,w+=V}return w===0?NaN:x/w}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const c=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*h,x=this._mercatorZfromZoom(c),w=this._mercatorZfromZoom(this._maxZoom),P=Math.max(x-_,w);this._setZoom(this._zoomFromMercatorZ(P))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let _;_=c.z<this._camera.position[2]?[h.x,h.y,h.z]:[c.x,c.y,c.z];const x=o.length(o.sub([],this._camera.position,_));return o.clamp(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let h=!1;if(c.orientation&&!o.exactEquals(c.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(c.orientation)),c.position){const _=[c.position.x,c.position.y,c.position.z];o.exactEquals$1(_,this._camera.position)||(this._setCameraPosition(_),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,h=new W_;return h.position=new o.MercatorCoordinate(c[0],c[1],c[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(c){if(!o.length$1(c))return!1;o.normalize$1(c,c);const h=o.transformQuat([],[0,0,-1],c),_=o.transformQuat([],[0,-1,0],c);if(_[2]<0)return!1;const x=Ih(h,_);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(c){const h=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;c[2]=o.clamp(c[2],x/_,x/h),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,h,_){this._unmodified=!1,this._edgeInsets.interpolate(c,h,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const h=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(c){const h=[new o.UnwrappedTileID(0,c)];if(this.renderWorldCopies){const _=this.pointCoordinate(new o.Point(0,0)),x=this.pointCoordinate(new o.Point(this.width,0)),w=this.pointCoordinate(new o.Point(this.width,this.height)),P=this.pointCoordinate(new o.Point(0,this.height)),A=Math.floor(Math.min(_.x,x.x,w.x,P.x)),L=Math.floor(Math.max(_.x,x.x,w.x,P.x)),V=1;for(let U=A-V;U<=L+V;U++)U!==0&&h.push(new o.UnwrappedTileID(U,c))}return h}coveringTiles(c){let h=this.coveringZoomLevel(c);const _=h,x=this.elevation&&!c.isTerrainDEM,w=this.projection.name==="mercator";if(c.minzoom!==void 0&&h<c.minzoom)return[];c.maxzoom!==void 0&&h>c.maxzoom&&(h=c.maxzoom);const P=this.locationCoordinate(this.center),A=this.center.lat,L=1<<h,V=[L*P.x,L*P.y,0],U=this.projection.name==="globe",J=!U,le=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,J),pe=U?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ge=L*o.mercatorZfromAltitude(1,this.center.lat),me=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),ve=[L*pe.x,L*pe.y,me*(J?1:ge)],Q=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),he=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?h:0,Ee=c.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ke=c.isTerrainDEM?-Ee:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ve=this.projection.isReprojectedInTileSpace?H_(this):1,He=dt=>{const Ht=new o.MercatorCoordinate(dt.x+25e-6,dt.y,dt.z),zt=new o.MercatorCoordinate(dt.x,dt.y+25e-6,dt.z),Gt=dt.toLngLat(),zn=Ht.toLngLat(),er=zt.toLngLat(),Cn=this.locationCoordinate(Gt),Gn=this.locationCoordinate(zn),Tr=this.locationCoordinate(er),xr=Math.hypot(Gn.x-Cn.x,Gn.y-Cn.y),Mn=Math.hypot(Tr.x-Cn.x,Tr.y-Cn.y);return Math.sqrt(xr*Mn)*Ve/25e-6},We=dt=>{const Ct=Ee,Ht=ke;return{aabb:o.tileAABB(this,L,0,0,0,dt,Ht,Ct,this.projection),zoom:0,x:0,y:0,minZ:Ht,maxZ:Ct,wrap:dt,fullyVisible:!1}},nt=[];let et=[];const ht=h,Vt=c.reparseOverscaled?_:h,st=dt=>dt*dt,Pt=st((me-this._centerAltitude)*ge),mt=dt=>{if(!this._elevation||!dt.tileID||!w)return;const Ct=this._elevation.getMinMaxForTile(dt.tileID),Ht=dt.aabb;Ct?(Ht.min[2]=Ct.min,Ht.max[2]=Ct.max,Ht.center[2]=(Ht.min[2]+Ht.max[2])/2):(dt.shouldSplit=$t(dt),dt.shouldSplit||(Ht.min[2]=Ht.max[2]=Ht.center[2]=this._centerAltitude))},$t=dt=>{if(dt.zoom<he)return!0;if(dt.zoom===ht)return!1;if(dt.shouldSplit!=null)return dt.shouldSplit;const Ct=dt.aabb.distanceX(ve),Ht=dt.aabb.distanceY(ve);let zt=Pt,Gt=1;if(U){zt=st(dt.aabb.distanceZ(ve));const Cn=Math.pow(2,dt.zoom),Gn=o.latFromMercatorY((dt.y+1)/Cn),Tr=o.latFromMercatorY(dt.y/Cn),xr=Math.min(Math.max(A,Gn),Tr),Mn=o.circumferenceAtLatitude(xr)/o.circumferenceAtLatitude(A);if(Gt=xr===A?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Mn/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&dt.zoom===ht-1&&Mn>=.9)return!0}else if(x&&(zt=st(dt.aabb.distanceZ(ve)*ge)),this.projection.isReprojectedInTileSpace&&_<=5){const Cn=Math.pow(2,dt.zoom),Gn=He(new o.MercatorCoordinate((dt.x+.5)/Cn,(dt.y+.5)/Cn));Gt=Gn>.85?1:Gn}const zn=Ct*Ct+Ht*Ht+zt,er=st((1<<ht-dt.zoom)*Q*Gt*((Cn,Gn)=>{if(Gn*st(.707)<Cn)return 1;const Tr=Math.sqrt(Gn/Cn);return Tr/(1.4144271570014144+(Math.pow(1.1,Tr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(zt,Pt),zn));return zn<er};if(this.renderWorldCopies)for(let dt=1;dt<=3;dt++)nt.push(We(-dt)),nt.push(We(dt));for(nt.push(We(0));nt.length>0;){const dt=nt.pop(),Ct=dt.x,Ht=dt.y;let zt=dt.fullyVisible;if(!zt){const Gt=dt.aabb.intersects(le);if(Gt===0)continue;zt=Gt===2}if(dt.zoom!==ht&&$t(dt))for(let Gt=0;Gt<4;Gt++){const zn=(Ct<<1)+Gt%2,er=(Ht<<1)+(Gt>>1),Cn={aabb:w?dt.aabb.quadrant(Gt):o.tileAABB(this,L,dt.zoom+1,zn,er,dt.wrap,dt.minZ,dt.maxZ,this.projection),zoom:dt.zoom+1,x:zn,y:er,wrap:dt.wrap,fullyVisible:zt,tileID:void 0,shouldSplit:void 0,minZ:dt.minZ,maxZ:dt.maxZ};x&&!U&&(Cn.tileID=new o.OverscaledTileID(dt.zoom+1===ht?Vt:dt.zoom+1,dt.wrap,dt.zoom+1,zn,er),mt(Cn)),nt.push(Cn)}else{const Gt=dt.zoom===ht?Vt:dt.zoom;if(c.minzoom&&c.minzoom>Gt)continue;const zn=V[0]-(.5+Ct+(dt.wrap<<dt.zoom))*(1<<h-dt.zoom),er=V[1]-.5-Ht,Cn=dt.tileID?dt.tileID:new o.OverscaledTileID(Gt,dt.wrap,dt.zoom,Ct,Ht);et.push({tileID:Cn,distanceSq:zn*zn+er*er})}}if(this.fogCullDistSq){const dt=this.fogCullDistSq,Ct=this.horizonLineFromTop();et=et.filter(Ht=>{const zt=[0,0,0,1],Gt=[o.EXTENT,o.EXTENT,0,1],zn=this.calculateFogTileMatrix(Ht.tileID.toUnwrapped());o.transformMat4$1(zt,zt,zn),o.transformMat4$1(Gt,Gt,zn);const er=o.getAABBPointSquareDist(zt,Gt);if(er===0)return!0;let Cn=!1;const Gn=this._elevation;if(Gn&&er>dt&&Ct!==0){const Tr=this.calculateProjMatrix(Ht.tileID.toUnwrapped());let xr;c.isTerrainDEM||(xr=Gn.getMinMaxForTile(Ht.tileID)),xr||(xr={min:ke,max:Ee});const Mn=o.furthestTileCorner(this.rotation),jr=[Mn[0]*o.EXTENT,Mn[1]*o.EXTENT,xr.max];o.transformMat4(jr,jr,Tr),Cn=(1-jr[1])*this.height*.5<Ct}return er<dt||Cn})}return et.sort((dt,Ct)=>dt.distanceSq-Ct.distanceSq).map(dt=>dt.tileID)}resize(c,h){this.width=c,this.height=h,this.pixelsToGLUnits=[2/c,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const h=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=this.projection.project(c.lng,h);return new o.Point(_.x*this.worldSize,_.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(c,h){let _,x;const w=this.centerPoint;if(this.projection.name==="globe"){const A=this.worldSize;_=(h.x-w.x)/A,x=(h.y-w.y)/A}else{const A=this.pointCoordinate(h),L=this.pointCoordinate(w);_=A.x-L.x,x=A.y-L.y}const P=this.locationCoordinate(c);this.setLocation(new o.MercatorCoordinate(P.x-_,P.y-x))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,h){const _=h?o.mercatorZfromAltitude(h,c.lat):void 0,x=this.projection.project(c.lng,c.lat);return new o.MercatorCoordinate(x.x,x.y,_)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,h){const _=h??this._centerAltitude,x=[c.x,c.y,0,1],w=[c.x,c.y,1,1];o.transformMat4$1(x,x,this.pixelMatrixInverse),o.transformMat4$1(w,w,this.pixelMatrixInverse);const P=w[3];o.scale$1(x,x,1/x[3]),o.scale$1(w,w,1/P);const A=x[2],L=w[2];return{p0:x,p1:w,t:A===L?0:(_-A)/(L-A)}}screenPointToMercatorRay(c){const h=[c.x,c.y,0,1],_=[c.x,c.y,1,1];return o.transformMat4$1(h,h,this.pixelMatrixInverse),o.transformMat4$1(_,_,this.pixelMatrixInverse),o.scale$1(h,h,1/h[3]),o.scale$1(_,_,1/_[3]),h[2]=o.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,_[2]=o.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,o.scale$1(h,h,1/this.worldSize),o.scale$1(_,_,1/this.worldSize),new o.Ray([h[0],h[1],h[2]],o.normalize([],o.sub([],_,h)))}rayIntersectionCoordinate(c){const{p0:h,p1:_,t:x}=c,w=o.mercatorZfromAltitude(h[2],this._center.lat),P=o.mercatorZfromAltitude(_[2],this._center.lat);return new o.MercatorCoordinate(o.number(h[0],_[0],x)/this.worldSize,o.number(h[1],_[1],x)/this.worldSize,o.number(w,P,x))}pointCoordinate(c,h=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,h)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let h=this.projection.pointCoordinate3D(this,c.x,c.y);if(h)return new o.MercatorCoordinate(h[0],h[1],h[2]);let _=0,x=this.horizonLineFromTop();if(c.y>x)return this.pointCoordinate(c);const w=.02*x,P=c.clone();for(let A=0;A<10&&x-_>w;A++){P.y=o.number(_,x,.66);const L=this.projection.pointCoordinate3D(this,P.x,P.y);L?(x=P.y,h=L):_=P.y}return h?new o.MercatorCoordinate(h[0],h[1],h[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}isPointOnSurface(c){if(c.y<0||c.y>this.height||c.x<0||c.x>this.width)return!1;if(this.elevation||this.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(c);const h=this.pointCoordinate(c);return h.y>=0&&h.y<=1}_coordinatePoint(c,h){const _=h&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,x=[c.x*this.worldSize,c.y*this.worldSize,_+c.toAltitude(),1];return o.transformMat4$1(x,x,this.pixelMatrix),x[3]>0?new o.Point(x[0]/x[3],x[1]/x[3]):new o.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:c,left:h}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,w=this.pointLocation3D(new o.Point(h,c)),P=this.pointLocation3D(new o.Point(x,c)),A=this.pointLocation3D(new o.Point(x,_)),L=this.pointLocation3D(new o.Point(h,_));let V=Math.min(w.lng,P.lng,A.lng,L.lng),U=Math.max(w.lng,P.lng,A.lng,L.lng),J=Math.min(w.lat,P.lat,A.lat,L.lat),le=Math.max(w.lat,P.lat,A.lat,L.lat);const pe=Math.pow(2,-this.zoom)/16*270,ge=this.projection.name==="globe"?1:4,me=(ve,Q,he,Ee,ke)=>{const Ve=(ve+he)/2,He=(Q+Ee)/2,We=new o.Point(Ve,He),{lng:nt,lat:et}=this.pointLocation3D(We),ht=Math.max(0,V-nt,J-et,nt-U,et-le);V=Math.min(V,nt),U=Math.max(U,nt),J=Math.min(J,et),le=Math.max(le,et),(ke<ge||ht>pe)&&(me(ve,Q,Ve,He,ke+1),me(Ve,He,he,Ee,ke+1))};if(me(h,c,x,c,1),me(x,c,x,_,1),me(x,_,h,_,1),me(h,_,h,c,1),this.projection.name==="globe"){const[ve,Q]=o.polesInViewport(this);ve?(le=90,U=180,V=-180):Q&&(J=-90,U=180,V=-180)}return new o.LngLatBounds(new o.LngLat(V,J),new o.LngLat(U,le))}_getBoundsRectangular(c,h){const{top:_,left:x}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,P=this.width-this._edgeInsets.right,A=new o.Point(x,_),L=new o.Point(P,_),V=new o.Point(P,w),U=new o.Point(x,w);let J=this.pointCoordinate(A,c),le=this.pointCoordinate(L,c);const pe=this.pointCoordinate(V,h),ge=this.pointCoordinate(U,h),me=(ve,Q)=>(Q.y-ve.y)/(Q.x-ve.x);return J.y>1&&le.y>=0?J=new o.MercatorCoordinate((1-ge.y)/me(ge,J)+ge.x,1):J.y<0&&le.y<=1&&(J=new o.MercatorCoordinate(-ge.y/me(ge,J)+ge.x,0)),le.y>1&&J.y>=0?le=new o.MercatorCoordinate((1-pe.y)/me(pe,le)+pe.x,1):le.y<0&&J.y<=1&&(le=new o.MercatorCoordinate(-pe.y/me(pe,le)+pe.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(J)).extend(this.coordinateLocation(le)).extend(this.coordinateLocation(ge)).extend(this.coordinateLocation(pe))}_getBoundsRectangularTerrain(){const c=this.elevation;if(!c.visibleDemTiles.length||c.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=c.visibleDemTiles.reduce((_,x)=>{if(x.dem){const w=x.dem.tree;_.min=Math.min(_.min,w.minimums[0]),_.max=Math.max(_.max,w.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*c.exaggeration(),h.max*c.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(c=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,_=this.height/2-h*(1-this._horizonShift);return c?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,h){return this.projection.createTileMatrix(this,h,c)}calculateDistanceTileData(c){const h=c.key,_=this._distanceTileDataCache;if(_[h])return _[h];const x=c.canonical,w=1/this.height,P=this.cameraWorldSize,A=P/this.zoomScale(x.z),L=(x.x+Math.pow(2,x.z)*c.wrap)*A,V=x.y*A,U=this.point;U.x*=P/this.worldSize,U.y*=P/this.worldSize;const J=this.angle,le=Math.sin(-J),pe=-Math.cos(-J);return _[h]={bearing:[le,pe],center:[(U.x-L)*w,(U.y-V)*w],scale:A/o.EXTENT*w},_[h]}calculateFogTileMatrix(c){const h=c.key,_=this._fogTileMatrixCache;if(_[h])return _[h];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,c);return o.multiply(x,this.worldToFogMatrix,x),_[h]=new Float32Array(x),_[h]}calculateProjMatrix(c,h=!1){const _=c.key,x=h?this._alignedProjMatrixCache:this._projMatrixCache;if(x[_])return x[_];const w=this.calculatePosMatrix(c,this.worldSize);return o.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:h?this.alignedProjMatrix:this.projMatrix,w),x[_]=new Float32Array(w),x[_]}calculatePixelsToTileUnitsMatrix(c){const h=c.tileID.key,_=this._pixelsToTileUnitsCache;if(_[h])return _[h];const x=function(w,P){const{scale:A}=w.tileTransform,L=A*o.EXTENT/(w.tileSize*Math.pow(2,P.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return V=new Float32Array(4),le=(U=P.inverseAdjustmentMatrix)[1],pe=U[2],ge=U[3],ve=(J=[L,L])[1],V[0]=U[0]*(me=J[0]),V[1]=le*me,V[2]=pe*ve,V[3]=ge*ve,V;var V,U,J,le,pe,ge,me,ve}(c,this);return _[h]=x,_[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const c=1/this.worldSize,h=o.fromScaling([],[c,c,c]);return o.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const c=this._elevation;this._updateCameraState();const h=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(h),x=this._camera.forward(),w=o.mercatorZfromAltitude(1,this._center.lat);_[2]/=w,x[2]/=w,o.normalize(x,x);const P=c.raycast(_,x,c.exaggeration());if(P){const A=o.scaleAndAdd([],_,x,P),L=new o.MercatorCoordinate(A[0],A[1],o.mercatorZfromAltitude(A[2],o.latFromMercatorY(A[1]))),V=(L.z+o.length([L.x-_[0],L.y-_[1],L.z-_[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(V),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(c=!1){if(!this._elevation)return;const h=this._elevation,_=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(_),w=h.getAtPointOrZero(new o.MercatorCoordinate(...x)),P=this.pixelsPerMeter/this.worldSize*w,A=this._minimumHeightOverTerrain(),L=x[2]-P;if(L<=A)if(L<0||c){const V=this.locationCoordinate(this._center,this._centerAltitude),U=[x[0],x[1],V.z-x[2]],J=o.length(U);U[2]-=(A-L)/this._pixelsPerMercatorPixel;const le=o.length(U);if(le===0)return;o.scale$2(U,U,J/le*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],V.z*this._pixelsPerMercatorPixel-U[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const le=this.center;return le.lat=o.clamp(le.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(le.lng=o.clamp(le.lng,this.minLng,this.maxLng)),this.center=le,void(this._constraining=!1)}const h=this._unmodified,{x:_,y:x}=this.point;let w=0,P=_,A=x;const L=this.width/2,V=this.height/2,U=this.worldMinY*this.scale,J=this.worldMaxY*this.scale;if(x-V<U&&(A=U+V),x+V>J&&(A=J-V),J-U<this.height&&(w=Math.max(w,this.height/(J-U)),A=(J+U)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const le=this.worldMinX*this.scale,pe=this.worldMaxX*this.scale,ge=this.worldSize/2-(le+pe)/2;P=(_+ge+this.worldSize)%this.worldSize-ge,P-L<le&&(P=le+L),P+L>pe&&(P=pe-L),pe-le<this.width&&(w=Math.max(w,this.width/(pe-le)),P=(pe+le)/2)}P===_&&A===x||(this.center=this.unproject(new o.Point(P,A))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,h=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const _=Xp(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x=this.projection.zAxisUnit==="meters"?h:1,w=this._camera.getWorldToCamera(this.worldSize,x),P=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);P[8]=2*-c.x/this.width,P[9]=2*c.y/this.height;let A=o.mul([],P,w);if(this.projection.isReprojectedInTileSpace){const He=this.locationCoordinate(this.center),We=o.identity([]);o.translate(We,We,[He.x*this.worldSize,He.y*this.worldSize,0]),o.multiply(We,We,sd(this)),o.translate(We,We,[-He.x*this.worldSize,-He.y*this.worldSize,0]),o.multiply(A,A,We),this.inverseAdjustmentMatrix=function(nt){const et=sd(nt,!0);return fe([],[et[0],et[1],et[4],et[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],A,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=A,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const L=o.invert([],P);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(L,this.horizonLineFromTop(),this.height);const V=new Float32Array(16);o.identity(V),o.scale(V,V,[1,-1,1]),o.rotateX(V,V,this._pitch),o.rotateZ(V,V,this.angle);const U=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),J=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;U[8]=2*-c.x/this.width,U[9]=2*(c.y+J)/this.height,this.skyboxMatrix=o.multiply(V,U,V);const le=this.point,pe=le.x,ge=le.y,me=this.width%2/2,ve=this.height%2/2,Q=Math.cos(this.angle),he=Math.sin(this.angle),Ee=pe-Math.round(pe)+Q*me+he*ve,ke=ge-Math.round(ge)+Q*ve+he*me,Ve=new Float64Array(A);if(o.translate(Ve,Ve,[Ee>.5?Ee-1:Ee,ke>.5?ke-1:ke,0]),this.alignedProjMatrix=Ve,A=o.create(),o.scale(A,A,[this.width/2,-this.height/2,1]),o.translate(A,A,[1,-1,0]),this.labelPlaneMatrix=A,A=o.create(),o.scale(A,A,[1,-1,1]),o.translate(A,A,[-1,-1,0]),o.scale(A,A,[2/this.width,2/this.height,1]),this.glCoordMatrix=A,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},A=o.invert(new Float64Array(16),this.pixelMatrix),!A)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=A,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const He=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(He,He,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=A;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,_=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,w=[c,c,h];o.scale$2(w,w,x),o.scale$2(_,_,-1),o.multiply$2(_,_,w);const P=o.create();o.translate(P,P,_),o.scale(P,P,w),this.mercatorFogMatrix=P,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,h,x)}_computeCameraPosition(c){const h=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),x=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-c/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-_[0]*w,x.y/this.worldSize-_[1]*w,c/this.worldSize*this._centerAltitude-_[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],x=c[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(w=Math.min((h-_)/x,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,c,w),this._updateStateFromCamera()}_updateStateFromCamera(){const c=this._camera.position,h=this._camera.forward(),{pitch:_,bearing:x}=this._camera.getPitchBearing(),w=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,P=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),A=Math.max((c[2]-w)/Math.cos(_),P),L=this._zoomFromMercatorZ(A);o.scaleAndAdd(c,c,h,A),this._pitch=o.clamp(_,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(x,-Math.PI,Math.PI),this._setZoom(o.clamp(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}zoomFromMercatorZAdjusted(c){let h=0,_=o.GLOBE_ZOOM_THRESHOLD_MAX,x=0,w=1/0;for(;_-h>1e-6&&_>h;){const P=h+.5*(_-h),A=this.tileSize*Math.pow(2,P),L=this.getCameraToCenterDistance(this.projection,P,A),V=this.scaleZoom(L/(c*this.tileSize)),U=Math.abs(P-V);U<w&&(w=U,x=P),P<V?h=P:_=P}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,h){const _=Math.min(c.x,h.x),x=Math.max(c.x,h.x),w=Math.min(c.y,h.y),P=Math.max(c.y,h.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const A=[new o.Point(_,w),new o.Point(x,P),new o.Point(_,P),new o.Point(x,w)],L=this.renderWorldCopies?-3:0,V=this.renderWorldCopies?4:1;for(const U of A){const J=this.pointRayIntersection(U);if(J.t<0)return!0;const le=this.rayIntersectionCoordinate(J);if(le.x<L||le.y<0||le.x>V||le.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.Point(0,0),new o.Point(this.width,this.height))}zoomDeltaToMovement(c,h){const _=o.length(o.sub([],this._camera.position,c)),x=this._zoomFromMercatorZ(_)+h;return _-this._mercatorZfromZoom(x)}getCameraPoint(){if(this.projection.name==="globe"){const c=function([h,_,x],w){const P=[h,_,x,1];o.transformMat4$1(P,P,w);const A=P[3]=Math.max(P[3],1e-6);return P[0]/=A,P[1]/=A,P[2]/=A,P}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.Point(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,c))}}getCameraToCenterDistance(c,h=this.zoom,_=this.worldSize){const x=Xp(c,h,this.width,this.height,1024),w=c.pixelSpaceConversion(this.center.lat,_,x);return .5/Math.tan(.5*this._fov)*this.height*w}getWorldToCameraMatrix(){const c=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(c,c,this.globeMatrix),c}}function cd(m,c){let h=!1,_=null;const x=()=>{_=null,h&&(m(),_=setTimeout(x,c),h=!1)};return()=>(h=!0,_||x(),_)}class ym{constructor(c){this._hashName=c&&encodeURIComponent(c),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=cd(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,o.window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const h=Ah(c);if(this._hashName){const _=this._hashName;let x=!1;const w=o.window.location.hash.slice(1).split("&").map(P=>{const A=P.split("=")[0];return A===_?(x=!0,`${A}=${h}`):P}).filter(P=>P);return x||w.push(`${_}=${h}`),`#${w.join("&")}`}return`#${h}`}_getCurrentHash(){const c=o.window.location.hash.replace("#","");if(this._hashName){let h;return c.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(h=_)}),(h&&h[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(_=>isNaN(_))){const _=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(h[3]||0):c.getBearing();return c.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:_,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,c)}}function Ah(m,c){const h=m.getCenter(),_=Math.round(100*m.getZoom())/100,x=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,x),P=Math.round(h.lng*w)/w,A=Math.round(h.lat*w)/w,L=m.getBearing(),V=m.getPitch();let U=c?`/${P}/${A}/${_}`:`${_}/${A}/${P}`;return(L||V)&&(U+="/"+Math.round(10*L)/10),V&&(U+=`/${Math.round(V)}`),U}const Mh={linearity:.3,easing:o.bezier(0,0,.3,1)},Yp=o.extend({deceleration:2500,maxSpeed:1400},Mh),Jp=o.extend({deceleration:20,maxSpeed:1400},Mh),_n=o.extend({deceleration:1e3,maxSpeed:360},Mh),Is=o.extend({deceleration:1e3,maxSpeed:90},Mh);class G_{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,h=o.exported.now();for(;c.length>0&&h-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)h.zoom+=w.zoomDelta||0,h.bearing+=w.bearingDelta||0,h.pitch+=w.pitchDelta||0,w.panDelta&&h.pan._add(w.panDelta),w.around&&(h.around=w.around),w.pinchAround&&(h.pinchAround=w.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(h.pan.mag()){const w=Oh(h.pan.mag(),_,o.extend({},Yp,c||{}));x.offset=h.pan.mult(w.amount/h.pan.mag()),x.center=this._map.transform.center,Dh(x,w)}if(h.zoom){const w=Oh(h.zoom,_,Jp);x.zoom=this._map.transform.zoom+w.amount,Dh(x,w)}if(h.bearing){const w=Oh(h.bearing,_,_n);x.bearing=this._map.transform.bearing+o.clamp(w.amount,-179,179),Dh(x,w)}if(h.pitch){const w=Oh(h.pitch,_,Is);x.pitch=this._map.transform.pitch+w.amount,Dh(x,w)}if(x.zoom||x.bearing){const w=h.pinchAround===void 0?h.around:h.pinchAround;x.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function Dh(m,c){(!m.duration||m.duration<c.duration)&&(m.duration=c.duration,m.easing=c.easing)}function Oh(m,c,h){const{maxSpeed:_,linearity:x,deceleration:w}=h,P=o.clamp(m*x/(c/1e3),-_,_),A=Math.abs(P)/(w*x);return{easing:h.easing,duration:1e3*A,amount:P*(A/2)}}class So extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,_,x={}){const w=ue(h.getCanvasContainer(),_),P=h.unproject(w);super(c,o.extend({point:w,lngLat:P,originalEvent:_},x)),this._defaultPrevented=!1,this.target=h}}class Rh extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,_){const x=c==="touchend"?_.changedTouches:_.touches,w=de(h.getCanvasContainer(),x),P=w.map(L=>h.unproject(L)),A=w.reduce((L,V,U,J)=>L.add(V.div(J.length)),new o.Point(0,0));super(c,{points:w,point:A,lngLats:P,lngLat:h.unproject(A),originalEvent:_}),this._defaultPrevented=!1}}class Qp extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,_){super(c,{originalEvent:_}),this._defaultPrevented=!1}}class vm{constructor(c,h){this._map=c,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new Qp(c.type,this._map,c))}mousedown(c,h){return this._mousedownPos=h,this._firePreventable(new So(c.type,this._map,c))}mouseup(c){this._map.fire(new So(c.type,this._map,c))}preclick(c){const h=o.extend({},c);h.type="preclick",this._map.fire(new So(h.type,this._map,h))}click(c,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(c),this._map.fire(new So(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new So(c.type,this._map,c))}mouseover(c){this._map.fire(new So(c.type,this._map,c))}mouseout(c){this._map.fire(new So(c.type,this._map,c))}touchstart(c){return this._firePreventable(new Rh(c.type,this._map,c))}touchmove(c){this._map.fire(new Rh(c.type,this._map,c))}touchend(c){this._map.fire(new Rh(c.type,this._map,c))}touchcancel(c){this._map.fire(new Rh(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ef{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new So(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new So("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new So(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Z_{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,h){this.isEnabled()&&c.shiftKey&&c.button===0&&(W(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(c,h){if(!this._active)return;const _=h,x=this._startPos,w=this._lastPos;if(!x||!w||w.equals(_)||!this._box&&_.dist(x)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=R("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const P=Math.min(x.x,_.x),A=Math.max(x.x,_.x),L=Math.min(x.y,_.y),V=Math.max(x.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${P}px,${L}px)`,this._box.style.width=A-P+"px",this._box.style.height=V-L+"px")})}mouseupWindow(c,h){if(!this._active)return;const _=this._startPos,x=h;if(_&&c.button===0){if(this.reset(),ie(),_.x!==x.x||_.y!==x.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:w=>w.fitScreenCoordinates(_,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),K(),delete this._startPos,delete this._lastPos}_fireEvent(c,h){return this._map.fire(new o.Event(c,{originalEvent:h}))}}function tf(m,c){const h={};for(let _=0;_<m.length;_++)h[m[_].identifier]=c[_];return h}class ud{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,h,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=c.timeStamp),_.length===this.numTouches&&(this.centroid=function(x){const w=new o.Point(0,0);for(const P of x)w._add(P);return w.div(x.length)}(h),this.touches=tf(_,h)))}touchmove(c,h,_){if(this.aborted||!this.centroid)return;const x=tf(_,h);for(const w in this.touches){const P=x[w];(!P||P.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(c,h,_){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class xm{constructor(c){this.singleTap=new ud(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,h,_){this.singleTap.touchstart(c,h,_)}touchmove(c,h,_){this.singleTap.touchmove(c,h,_)}touchend(c,h,_){const x=this.singleTap.touchend(c,h,_);if(x){const w=c.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(x)<30;if(w&&P||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class dw{constructor(){this._zoomIn=new xm({numTouches:1,numTaps:2}),this._zoomOut=new xm({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,h,_){this._zoomIn.touchstart(c,h,_),this._zoomOut.touchstart(c,h,_)}touchmove(c,h,_){this._zoomIn.touchmove(c,h,_),this._zoomOut.touchmove(c,h,_)}touchend(c,h,_){const x=this._zoomIn.touchend(c,h,_),w=this._zoomOut.touchend(c,h,_);return x?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(x)},{originalEvent:c})}):w?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(w)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const X_={0:1,2:2};class dd{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,h){return!1}_move(c,h){return{}}mousedown(c,h){if(this._lastPoint)return;const _=M(c);this._correctButton(c,_)&&(this._lastPoint=h,this._eventButton=_)}mousemoveWindow(c,h){const _=this._lastPoint;if(_){if(c.preventDefault(),this._eventButton!=null&&function(x,w){const P=X_[w];return x.buttons===void 0||(x.buttons&P)!==P}(c,this._eventButton))this.reset();else if(this._moved||!(h.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(_,h)}}mouseupWindow(c){this._lastPoint&&M(c)===this._eventButton&&(this._moved&&ie(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bm extends dd{mousedown(c,h){super.mousedown(c,h),this._lastPoint&&(this._active=!0)}_correctButton(c,h){return h===0&&!c.ctrlKey}_move(c,h){return{around:h,panDelta:h.sub(c)}}}class wm extends dd{_correctButton(c,h){return h===0&&c.ctrlKey||h===2}_move(c,h){const _=.8*(h.x-c.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(c){c.preventDefault()}}class Em extends dd{_correctButton(c,h){return h===0&&c.ctrlKey||h===2}_move(c,h){const _=-.5*(h.y-c.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(c){c.preventDefault()}}class nf{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)}touchstart(c,h,_){return this._calculateTransform(c,h,_)}touchmove(c,h,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,h,_)}}touchend(c,h,_){this._calculateTransform(c,h,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,h,_){_.length>0&&(this._active=!0);const x=tf(_,h),w=new o.Point(0,0),P=new o.Point(0,0);let A=0;for(const V in x){const U=x[V],J=this._touches[V];J&&(w._add(U),P._add(U.sub(J)),A++,x[V]=U)}if(this._touches=x,A<this._minTouches||!P.mag())return;const L=P.div(A);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(A),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=R("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Lh{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,h,_){return{}}touchstart(c,h,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([h[0],h[1]]))}touchmove(c,h,_){const x=this._firstTwoTouches;if(!x)return;c.preventDefault();const[w,P]=x,A=zh(_,h,w),L=zh(_,h,P);if(!A||!L)return;const V=this._aroundCenter?null:A.add(L).div(2);return this._move([A,L],V,c)}touchend(c,h,_){if(!this._firstTwoTouches)return;const[x,w]=this._firstTwoTouches,P=zh(_,h,x),A=zh(_,h,w);P&&A||(this._active&&ie(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function zh(m,c,h){for(let _=0;_<m.length;_++)if(m[_].identifier===h)return c[_]}function Sm(m,c){return Math.log(m/c)/Math.LN2}class K_ extends Lh{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,h){const _=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Sm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sm(this._distance,_),pinchAround:h}}}function Tm(m,c){return 180*m.angleWith(c)/Math.PI}class Y_ extends Lh{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,h){const _=this._vector;if(this._vector=c[0].sub(c[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Tm(this._vector,_),pinchAround:h}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const h=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const x=Tm(c,_);return Math.abs(x)<h}}function Tc(m){return Math.abs(m.y)>Math.abs(m.x)}class J_ extends Lh{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,Tc(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,h,_){const x=this._lastPoints;if(!x)return;const w=c[0].sub(x[0]),P=c[1].sub(x[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(w,P,_.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(w.y+P.y)/2*-.5})}gestureBeginsVertically(c,h,_){if(this._valid!==void 0)return this._valid;const x=c.mag()>=2,w=h.mag()>=2;if(!x&&!w)return;if(!x||!w)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const P=c.y>0==h.y>0;return Tc(c)&&Tc(h)&&P}}const Q_={panStep:100,bearingStep:15,pitchStep:10};class hw{constructor(){const c=Q_;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let h=0,_=0,x=0,w=0,P=0;switch(c.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:c.shiftKey?_=-1:(c.preventDefault(),w=-1);break;case 39:c.shiftKey?_=1:(c.preventDefault(),w=1);break;case 38:c.shiftKey?x=1:(c.preventDefault(),P=-1);break;case 40:c.shiftKey?x=-1:(c.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(_=0,x=0),{cameraAnimation:A=>{const L=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:ey,zoom:h?Math.round(L)+h*(c.shiftKey?2:1):L,bearing:A.getBearing()+_*this._bearingStep,pitch:A.getPitch()+x*this._pitchStep,offset:[-w*this._panStep,-P*this._panStep],center:A.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ey(m){return m*(2-m)}const Cm=4.000244140625;class ty{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=c.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const _=o.exported.now(),x=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,h!==0&&h%Cm==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(x*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),c.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=c,this._delta-=h,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=ue(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;this._type==="wheel"&&c.projection.wrap&&(c._center.lng>=180||c._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Cm?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&V!==0&&(V=1/V);const U=h(),J=Math.pow(2,U),le=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):J;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(le*V))),this._type==="wheel"&&(this._startZoom=U,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:h(),x=this._startZoom,w=this._easing;let P,A=!1;if(this._type==="wheel"&&x&&w){const L=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),V=w(L);P=o.number(x,_,V),L<1?this._frameId||(this._frameId=!0):A=!0}else P=_,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:P-h(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let h=o.ease;if(this._prevEase){const _=this._prevEase,x=(o.exported.now()-_.start)/_.duration,w=_.easing(x+.01)-_.easing(x),P=.27/Math.sqrt(w*w+1e-4)*.01,A=Math.sqrt(.0729-P*P);h=o.bezier(P,A,.25,1)}return this._prevEase={start:o.exported.now(),duration:c,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=R("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class ny{constructor(c,h){this._clickZoom=c,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Xo{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,h){return c.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(c.shiftKey?-1:1),around:_.unproject(h)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pw{constructor(){this._tap=new xm({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,h,_){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=h[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(c,h,_))}touchmove(c,h,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const x=h[0],w=x.y-this._swipePoint.y;return this._swipePoint=x,c.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(c,h,_)}touchend(c,h,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(c,h,_)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ry{constructor(c,h,_){this._el=c,this._mousePan=h,this._touchPan=_}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fw{constructor(c,h,_){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=h,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class mw{constructor(c,h,_,x){this._el=c,this._touchZoom=h,this._touchRotate=_,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const rs=m=>m.zoom||m.drag||m.pitch||m.rotate;class iy extends o.Event{}class gw{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,h){const _=o.sub([],h,c);this.radius=o.length(_[2]<0?o.div([],_,this.constants):[_[0],_[1],0])}projectRay(c){o.div(c,c,this.constants),o.normalize(c,c),o.mul$1(c,c,this.constants);const h=o.scale$2([],c,this.radius);if(h[2]>0){const _=o.scale$2([],[0,0,1],o.dot(h,[0,0,1])),x=o.scale$2([],o.normalize([],[h[0],h[1],0]),this.radius),w=o.add([],h,o.scale$2([],o.sub([],o.add([],x,_),h),2));h[0]=w[0],h[1]=w[1]}return h}}function As(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class Qs{constructor(c,h){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new G_(c),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new gw,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),o.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[x,w,P]of this._listeners)x.addEventListener(w,x===o.window.document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[c,h,_]of this._listeners)c.removeEventListener(h,c===o.window.document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(c){const h=this._map,_=h.getCanvasContainer();this._add("mapEvent",new vm(h,c));const x=h.boxZoom=new Z_(h,c);this._add("boxZoom",x);const w=new dw,P=new Xo;h.doubleClickZoom=new ny(P,w),this._add("tapZoom",w),this._add("clickZoom",P);const A=new pw;this._add("tapDragZoom",A);const L=h.touchPitch=new J_(h);this._add("touchPitch",L);const V=new wm(c),U=new Em(c);h.dragRotate=new fw(c,V,U),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]);const J=new bm(c),le=new nf(h,c);h.dragPan=new ry(_,J,le),this._add("mousePan",J),this._add("touchPan",le,["touchZoom","touchRotate"]);const pe=new Y_,ge=new K_;h.touchZoomRotate=new mw(_,ge,pe,A),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",ge,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ef(h));const me=h.scrollZoom=new ty(h,this);this._add("scrollZoom",me,["mousePan"]);const ve=h.keyboard=new hw;this._add("keyboard",ve);for(const Q of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[Q]&&h[Q].enable(c[Q])}_add(c,h,_){this._handlers.push({handlerName:c,handler:h,allowed:_}),this._handlersById[c]=h}stop(c){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!rs(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(c,h,_){for(const x in c)if(x!==_&&(!h||h.indexOf(x)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const h=[];for(const _ of c)this._el.contains(_.target)&&h.push(_);return h}handleEvent(c,h){this._updatingCamera=!0;const _=c.type==="renderFrame",x=_?void 0:c,w={needsRenderFrame:!1},P={},A={},L=c.touches?this._getMapTouches(c.touches):void 0,V=L?de(this._el,L):_?void 0:ue(this._el,c);for(const{handlerName:le,handler:pe,allowed:ge}of this._handlers){if(!pe.isEnabled())continue;let me;this._blockedByActive(A,ge,le)?pe.reset():pe[h||c.type]&&(me=pe[h||c.type](c,V,L),this.mergeHandlerResult(w,P,me,le,x),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||pe.isActive())&&(A[le]=pe)}const U={};for(const le in this._previousActiveHandlers)A[le]||(U[le]=x);this._previousActiveHandlers=A,(Object.keys(U).length||As(w))&&(this._changes.push([w,P,U]),this._triggerRenderFrame()),(Object.keys(A).length||As(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:J}=w;J&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],J(this._map))}mergeHandlerResult(c,h,_,x,w){if(!_)return;o.extend(c,_);const P={handlerName:x,originalEvent:_.originalEvent||w};_.zoomDelta!==void 0&&(h.zoom=P),_.panDelta!==void 0&&(h.drag=P),_.pitchDelta!==void 0&&(h.pitch=P),_.bearingDelta!==void 0&&(h.rotate=P)}_applyChanges(){const c={},h={},_={};for(const[x,w,P]of this._changes)x.panDelta&&(c.panDelta=(c.panDelta||new o.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(c.around=x.around),x.aroundCoord!==void 0&&(c.aroundCoord=x.aroundCoord),x.pinchAround!==void 0&&(c.pinchAround=x.pinchAround),x.noInertia&&(c.noInertia=x.noInertia),o.extend(h,w),o.extend(_,P);this._updateMapTransform(c,h,_),this._changes=[]}_updateMapTransform(c,h,_){const x=this._map,w=x.transform,P=he=>[he.x,he.y,he.z];if((he=>{const Ee=this._eventsInProgress.drag;return Ee&&!this._handlersById[Ee.handlerName].isActive()})()&&!As(c)){const he=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",he!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&x._stop(!0),!As(c))return void this._fireEvents(h,_,!0);let{panDelta:A,zoomDelta:L,bearingDelta:V,pitchDelta:U,around:J,aroundCoord:le,pinchAround:pe}=c;w._isCameraConstrained&&(L>0&&(L=0),w._isCameraConstrained=!1),pe!==void 0&&(J=pe),(L||(he=>h[he]&&!this._eventsInProgress[he])("drag"))&&J&&(this._dragOrigin=P(w.pointCoordinate3D(J)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",x._stop(!0),J=J||x.transform.centerPoint,V&&(w.bearing+=V),U&&(w.pitch+=U),w._updateCameraState();const ge=[0,0,0];if(A)if(w.projection.name==="mercator"){const he=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(J).dir),Ee=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(J.sub(A)).dir);ge[0]=Ee[0]-he[0],ge[1]=Ee[1]-he[1]}else{const he=w.pointCoordinate(J);if(w.projection.name==="globe"){A=A.rotate(-w.angle);const Ee=w._pixelsPerMercatorPixel/w.worldSize;ge[0]=-A.x*o.mercatorScale(o.latFromMercatorY(he.y))*Ee,ge[1]=-A.y*o.mercatorScale(w.center.lat)*Ee}else{const Ee=w.pointCoordinate(J.sub(A));he&&Ee&&(ge[0]=Ee.x-he.x,ge[1]=Ee.y-he.y)}}const me=w.zoom,ve=[0,0,0];if(L){const he=P(le||w.pointCoordinate3D(J)),Ee={dir:o.normalize([],o.sub([],he,w._camera.position))};if(Ee.dir[2]<0){const ke=w.zoomDeltaToMovement(he,L);o.scale$2(ve,Ee.dir,ke)}}const Q=o.add(ge,ge,ve);w._translateCameraConstrained(Q),L&&Math.abs(w.zoom-me)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(h,_,!0)}_fireEvents(c,h,_){const x=rs(this._eventsInProgress),w=rs(c),P={};for(const U in c){const{originalEvent:J}=c[U];this._eventsInProgress[U]||(P[`${U}start`]=J),this._eventsInProgress[U]=c[U]}!x&&w&&this._fireEvent("movestart",w.originalEvent);for(const U in P)this._fireEvent(U,P[U]);w&&this._fireEvent("move",w.originalEvent);for(const U in c){const{originalEvent:J}=c[U];this._fireEvent(U,J)}const A={};let L;for(const U in this._eventsInProgress){const{handlerName:J,originalEvent:le}=this._eventsInProgress[U];this._handlersById[J].isActive()||(delete this._eventsInProgress[U],L=h[J]||le,A[`${U}end`]=L)}for(const U in A)this._fireEvent(U,A[U]);const V=rs(this._eventsInProgress);if(_&&(x||w)&&!V){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),J=le=>le!==0&&-this._bearingSnap<le&&le<this._bearingSnap;U?(J(U.bearing||this._map.getBearing())&&(U.bearing=0),this._map.easeTo(U,{originalEvent:L})):(this._map.fire(new o.Event("moveend",{originalEvent:L})),J(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,h){this._map.fire(new o.Event(c,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new iy("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const gu="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class rf extends o.Evented{constructor(c,h){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=h.bearingSnap,this._respectPrefersReducedMotion=h.respectPrefersReducedMotion!==!1,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,h){return this.jumpTo({center:c},h)}panBy(c,h,_){return c=o.Point.convert(c).mult(-1),this.panTo(this.transform.center,o.extend({offset:c},h),_)}panTo(c,h,_){return this.easeTo(o.extend({center:c},h),_)}getZoom(){return this.transform.zoom}setZoom(c,h){return this.jumpTo({zoom:c},h),this}zoomTo(c,h,_){return this.easeTo(o.extend({zoom:c},h),_)}zoomIn(c,h){return this.zoomTo(this.getZoom()+1,c,h),this}zoomOut(c,h){return this.zoomTo(this.getZoom()-1,c,h),this}getBearing(){return this.transform.bearing}setBearing(c,h){return this.jumpTo({bearing:c},h),this}getPadding(){return this.transform.padding}setPadding(c,h){return this.jumpTo({padding:c},h),this}rotateTo(c,h,_){return this.easeTo(o.extend({bearing:c},h),_)}resetNorth(c,h){return this.rotateTo(0,o.extend({duration:1e3},c),h),this}resetNorthPitch(c,h){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},c),h),this}snapToNorth(c,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,h):this}getPitch(){return this.transform.pitch}setPitch(c,h){return this.jumpTo({pitch:c},h),this}cameraForBounds(c,h){c=o.LngLatBounds.convert(c);const _=h&&h.bearing||0,x=h&&h.pitch||0,w=c.getNorthWest(),P=c.getSouthEast();return this._cameraForBounds(this.transform,w,P,_,x,h)}_extendCameraOptions(c){const h={top:0,bottom:0,right:0,left:0};if(typeof(c=o.extend({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding=="number"){const _=c.padding;c.padding={top:_,bottom:_,right:_,left:_}}return c.padding=o.extend(h,c.padding),c}_minimumAABBFrustumDistance(c,h){const _=h.max[0]-h.min[0],x=h.max[1]-h.min[1];return _/x>c.aspect?_/(2*Math.tan(.5*c.fovX)*c.aspect):x/(2*Math.tan(.5*c.fovY)*c.aspect)}_cameraForBoundsOnGlobe(c,h,_,x,w,P){const A=c.clone(),L=this._extendCameraOptions(P);A.bearing=x,A.pitch=w;const V=o.LngLat.convert(h),U=o.LngLat.convert(_),J=.5*(V.lat+U.lat),le=.5*(V.lng+U.lng),pe=o.latLngToECEF(J,le),ge=o.normalize([],pe),me=o.normalize([],o.cross([],ge,[0,1,0])),ve=o.cross([],me,ge),Q=[me[0],me[1],me[2],0,ve[0],ve[1],ve[2],0,ge[0],ge[1],ge[2],0,0,0,0,1],he=[pe,o.latLngToECEF(V.lat,V.lng),o.latLngToECEF(U.lat,V.lng),o.latLngToECEF(U.lat,U.lng),o.latLngToECEF(V.lat,U.lng),o.latLngToECEF(J,V.lng),o.latLngToECEF(J,U.lng),o.latLngToECEF(V.lat,le),o.latLngToECEF(U.lat,le)];let Ee=o.Aabb.fromPoints(he.map(zt=>[o.dot(me,zt),o.dot(ve,zt),o.dot(ge,zt)]));const ke=o.transformMat4([],Ee.center,Q);o.squaredLength(ke)===0&&o.set(ke,0,0,1),o.normalize(ke,ke),o.scale$2(ke,ke,o.GLOBE_RADIUS),A.center=o.ecefToLatLng(ke);const Ve=A.getWorldToCameraMatrix(),He=o.invert(new Float64Array(16),Ve);Ee=o.Aabb.applyTransform(Ee,o.multiply([],Ve,Q)),o.transformMat4(ke,ke,Ve);const We=.5*(Ee.max[2]-Ee.min[2]),nt=this._minimumAABBFrustumDistance(A,Ee),et=o.scale$2([],[0,0,1],We),ht=o.add(et,ke,et),Vt=nt+(A.pitch===0?0:o.distance(ke,ht)),st=A.globeCenterInViewSpace,Pt=o.sub([],ke,[st[0],st[1],st[2]]);o.normalize(Pt,Pt),o.scale$2(Pt,Pt,Vt);const mt=o.add([],ke,Pt);o.transformMat4(mt,mt,He);const $t=o.earthRadius/o.GLOBE_RADIUS,dt=o.length(mt),Ct=o.mercatorZfromAltitude(Math.max(dt*$t-o.earthRadius,Number.EPSILON),0),Ht=Math.min(A.zoomFromMercatorZAdjusted(Ct),L.maxZoom);return Ht>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"mercator"}),A.zoom=Ht,this._cameraForBounds(A,h,_,x,w,P)):{center:A.center,zoom:Ht,bearing:x,pitch:w}}queryTerrainElevation(c,h){const _=this.transform.elevation;return _?(h=o.extend({},{exaggerated:!0},h),_.getAtPoint(o.MercatorCoordinate.fromLngLat(c),null,h.exaggerated)):null}_cameraForBounds(c,h,_,x,w,P){if(c.projection.name==="globe")return this._cameraForBoundsOnGlobe(c,h,_,x,w,P);const A=c.clone(),L=this._extendCameraOptions(P),V=A.padding;A.bearing=x,A.pitch=w;const U=o.LngLat.convert(h),J=o.LngLat.convert(_),le=new o.LngLat(U.lng,J.lat),pe=new o.LngLat(J.lng,U.lat),ge=A.project(U),me=A.project(J),ve=this.queryTerrainElevation(U),Q=this.queryTerrainElevation(J),he=this.queryTerrainElevation(le),Ee=this.queryTerrainElevation(pe),ke=[[ge.x,ge.y,Math.min(ve||0,Q||0,he||0,Ee||0)],[me.x,me.y,Math.max(ve||0,Q||0,he||0,Ee||0)]];let Ve=o.Aabb.fromPoints(ke);const He=A.getWorldToCameraMatrix(),We=o.invert(new Float64Array(16),He);Ve=o.Aabb.applyTransform(Ve,He);const nt=o.sub([],Ve.max,Ve.min),et=V.left||0,ht=V.right||0,Vt=V.bottom||0,st=V.top||0,{left:Pt,right:mt,top:$t,bottom:dt}=L.padding,Ct=.5*(et+ht),Ht=.5*(st+Vt),zt=Math.min(A.scaleZoom(A.scale*Math.min((A.width-(et+ht+Pt+mt))/nt[0],(A.height-(Vt+st+dt+$t))/nt[1])),L.maxZoom),Gt=A.scale/A.zoomScale(zt);Ve=new o.Aabb([Ve.min[0]-(Pt+Ct)*Gt,Ve.min[1]-(dt+Ht)*Gt,Ve.min[2]],[Ve.max[0]+(mt+Ct)*Gt,Ve.max[1]+($t+Ht)*Gt,Ve.max[2]]);const zn=.5*nt[2],er=this._minimumAABBFrustumDistance(A,Ve),Cn=[0,0,1,0];o.transformMat4$1(Cn,Cn,He),o.normalize$2(Cn,Cn);const Gn=o.scale$2([],Cn,er+zn),Tr=o.add([],Ve.center,Gn),xr=(typeof L.offset.x=="number"&&typeof L.offset.y=="number"?new o.Point(L.offset.x,L.offset.y):o.Point.convert(L.offset)).rotate(-o.degToRad(x));Ve.center[0]-=xr.x*Gt,Ve.center[1]+=xr.y*Gt,o.transformMat4(Ve.center,Ve.center,We),o.transformMat4(Tr,Tr,We);const Mn=[Ve.center[0],Ve.center[1],Tr[2]*A.pixelsPerMeter];o.scale$2(Mn,Mn,1/A.worldSize);const jr=o.lngFromMercatorX(Mn[0]),Hr=o.latFromMercatorY(Mn[1]),qr=Math.min(A._zoomFromMercatorZ(Mn[2]),L.maxZoom),Gr=new o.LngLat(jr,Hr);return A.mercatorFromTransition&&qr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(A.setProjection({name:"globe"}),A.zoom=qr,this._cameraForBounds(A,h,_,x,w,P)):{center:Gr,zoom:qr,bearing:x,pitch:w}}fitBounds(c,h,_){const x=this.cameraForBounds(c,h);return this._fitInternal(x,h,_)}fitScreenCoordinates(c,h,_,x,w){const P=o.Point.convert(c),A=o.Point.convert(h),L=new o.Point(Math.min(P.x,A.x),Math.min(P.y,A.y)),V=new o.Point(Math.max(P.x,A.x),Math.max(P.y,A.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(P,A))return this;const U=this.transform.pointLocation3D(L),J=this.transform.pointLocation3D(V),le=this.transform.pointLocation3D(new o.Point(L.x,V.y)),pe=this.transform.pointLocation3D(new o.Point(V.x,L.y)),ge=[Math.min(U.lng,J.lng,le.lng,pe.lng),Math.min(U.lat,J.lat,le.lat,pe.lat)],me=[Math.max(U.lng,J.lng,le.lng,pe.lng),Math.max(U.lat,J.lat,le.lat,pe.lat)],ve=x&&x.pitch?x.pitch:this.getPitch(),Q=this._cameraForBounds(this.transform,ge,me,_,ve,x);return this._fitInternal(Q,x,w)}_fitInternal(c,h,_){return c?(delete(h=o.extend(c,h)).padding,h.linear?this.easeTo(h,_):this.flyTo(h,_)):this}jumpTo(c,h){this.stop();const _=c.preloadOnly?this.transform.clone():this.transform;let x=!1,w=!1,P=!1;return"zoom"in c&&_.zoom!==+c.zoom&&(x=!0,_.zoom=+c.zoom),c.center!==void 0&&(_.center=o.LngLat.convert(c.center)),"bearing"in c&&_.bearing!==+c.bearing&&(w=!0,_.bearing=+c.bearing),"pitch"in c&&_.pitch!==+c.pitch&&(P=!0,_.pitch=+c.pitch),c.padding==null||_.isPaddingEqual(c.padding)||(_.padding=c.padding),c.preloadOnly?(this._preloadTiles(_),this):(this.fire(new o.Event("movestart",h)).fire(new o.Event("move",h)),x&&this.fire(new o.Event("zoomstart",h)).fire(new o.Event("zoom",h)).fire(new o.Event("zoomend",h)),w&&this.fire(new o.Event("rotatestart",h)).fire(new o.Event("rotate",h)).fire(new o.Event("rotateend",h)),P&&this.fire(new o.Event("pitchstart",h)).fire(new o.Event("pitch",h)).fire(new o.Event("pitchend",h)),this.fire(new o.Event("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(gu),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,h){const _=this.transform;if(!_.projection.supportsFreeCamera)return o.warnOnce(gu),this;this.stop();const x=_.zoom,w=_.pitch,P=_.bearing;_.setFreeCameraOptions(c);const A=x!==_.zoom,L=w!==_.pitch,V=P!==_.bearing;return this.fire(new o.Event("movestart",h)).fire(new o.Event("move",h)),A&&this.fire(new o.Event("zoomstart",h)).fire(new o.Event("zoom",h)).fire(new o.Event("zoomend",h)),V&&this.fire(new o.Event("rotatestart",h)).fire(new o.Event("rotate",h)).fire(new o.Event("rotateend",h)),L&&this.fire(new o.Event("pitchstart",h)).fire(new o.Event("pitch",h)).fire(new o.Event("pitchend",h)),this.fire(new o.Event("moveend",h)),this}easeTo(c,h){this._stop(!1,c.easeId),((c=o.extend({offset:[0,0],duration:500,easing:o.ease},c)).animate===!1||this._prefersReducedMotion(c))&&(c.duration=0);const _=this.transform,x=this.getZoom(),w=this.getBearing(),P=this.getPitch(),A=this.getPadding(),L="zoom"in c?+c.zoom:x,V="bearing"in c?this._normalizeBearing(c.bearing,w):w,U="pitch"in c?+c.pitch:P,J="padding"in c?c.padding:_.padding,le=o.Point.convert(c.offset);let pe,ge,me;if(_.projection.name==="globe"){const et=o.MercatorCoordinate.fromLngLat(_.center),ht=le.rotate(-_.angle);et.x+=ht.x/_.worldSize,et.y+=ht.y/_.worldSize;const Vt=et.toLngLat(),st=o.LngLat.convert(c.center||Vt);this._normalizeCenter(st),pe=_.centerPoint.add(ht),ge=new o.Point(et.x,et.y).mult(_.worldSize),me=new o.Point(o.mercatorXfromLng(st.lng),o.mercatorYfromLat(st.lat)).mult(_.worldSize).sub(ge)}else{pe=_.centerPoint.add(le);const et=_.pointLocation(pe),ht=o.LngLat.convert(c.center||et);this._normalizeCenter(ht),ge=_.project(et),me=_.project(ht).sub(ge)}const ve=_.zoomScale(L-x);let Q,he;c.around&&(Q=o.LngLat.convert(c.around),he=_.locationPoint(Q));const Ee=this._zooming||L!==x,ke=this._rotating||w!==V,Ve=this._pitching||U!==P,He=!_.isPaddingEqual(J),We=et=>ht=>{if(Ee&&(et.zoom=o.number(x,L,ht)),ke&&(et.bearing=o.number(w,V,ht)),Ve&&(et.pitch=o.number(P,U,ht)),He&&(et.interpolatePadding(A,J,ht),pe=et.centerPoint.add(le)),Q)et.setLocationAtPoint(Q,he);else{const Vt=et.zoomScale(et.zoom-x),st=L>x?Math.min(2,ve):Math.max(.5,ve),Pt=Math.pow(st,1-ht),mt=et.unproject(ge.add(me.mult(ht*Pt)).mult(Vt));et.setLocationAtPoint(et.renderWorldCopies?mt.wrap():mt,pe)}return c.preloadOnly||this._fireMoveEvents(h),et};if(c.preloadOnly){const et=this._emulate(We,c.duration,_);return this._preloadTiles(et),this}const nt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ee,this._rotating=ke,this._pitching=Ve,this._padding=He,this._easeId=c.easeId,this._prepareEase(h,c.noMoveStart,nt),this._ease(We(_),et=>{_.recenterOnTerrain(),this._afterEase(h,et)},c),this}_prepareEase(c,h,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",h||_.moving||this.fire(new o.Event("movestart",c)),this._zooming&&!_.zooming&&this.fire(new o.Event("zoomstart",c)),this._rotating&&!_.rotating&&this.fire(new o.Event("rotatestart",c)),this._pitching&&!_.pitching&&this.fire(new o.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new o.Event("move",c)),this._zooming&&this.fire(new o.Event("zoom",c)),this._rotating&&this.fire(new o.Event("rotate",c)),this._pitching&&this.fire(new o.Event("pitch",c))}_afterEase(c,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,x=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new o.Event("zoomend",c)),x&&this.fire(new o.Event("rotateend",c)),w&&this.fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))}flyTo(c,h){if(this._prefersReducedMotion(c)){const zt=o.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(zt,h)}this.stop(),c=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},c);const _=this.transform,x=this.getZoom(),w=this.getBearing(),P=this.getPitch(),A=this.getPadding(),L="zoom"in c?o.clamp(+c.zoom,_.minZoom,_.maxZoom):x,V="bearing"in c?this._normalizeBearing(c.bearing,w):w,U="pitch"in c?+c.pitch:P,J="padding"in c?c.padding:_.padding,le=_.zoomScale(L-x),pe=o.Point.convert(c.offset);let ge=_.centerPoint.add(pe);const me=_.pointLocation(ge),ve=o.LngLat.convert(c.center||me);this._normalizeCenter(ve);const Q=_.project(me),he=_.project(ve).sub(Q);let Ee=c.curve;const ke=Math.max(_.width,_.height),Ve=ke/le,He=he.mag();if("minZoom"in c){const zt=o.clamp(Math.min(c.minZoom,x,L),_.minZoom,_.maxZoom),Gt=ke/_.zoomScale(zt-x);Ee=Math.sqrt(Gt/He*2)}const We=Ee*Ee;function nt(zt){const Gt=(Ve*Ve-ke*ke+(zt?-1:1)*We*We*He*He)/(2*(zt?Ve:ke)*We*He);return Math.log(Math.sqrt(Gt*Gt+1)-Gt)}function et(zt){return(Math.exp(zt)-Math.exp(-zt))/2}function ht(zt){return(Math.exp(zt)+Math.exp(-zt))/2}const Vt=nt(0);let st=function(zt){return ht(Vt)/ht(Vt+Ee*zt)},Pt=function(zt){return ke*((ht(Vt)*(et(Gt=Vt+Ee*zt)/ht(Gt))-et(Vt))/We)/He;var Gt},mt=(nt(1)-Vt)/Ee;if(Math.abs(He)<1e-6||!isFinite(mt)){if(Math.abs(ke-Ve)<1e-6)return this.easeTo(c,h);const zt=Ve<ke?-1:1;mt=Math.abs(Math.log(Ve/ke))/Ee,Pt=function(){return 0},st=function(Gt){return Math.exp(zt*Ee*Gt)}}c.duration="duration"in c?+c.duration:1e3*mt/("screenSpeed"in c?+c.screenSpeed/Ee:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const $t=w!==V,dt=U!==P,Ct=!_.isPaddingEqual(J),Ht=zt=>Gt=>{const zn=Gt*mt,er=1/st(zn);zt.zoom=Gt===1?L:x+zt.scaleZoom(er),$t&&(zt.bearing=o.number(w,V,Gt)),dt&&(zt.pitch=o.number(P,U,Gt)),Ct&&(zt.interpolatePadding(A,J,Gt),ge=zt.centerPoint.add(pe));const Cn=Gt===1?ve:zt.unproject(Q.add(he.mult(Pt(zn))).mult(er));return zt.setLocationAtPoint(zt.renderWorldCopies?Cn.wrap():Cn,ge),zt._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(h),zt};if(c.preloadOnly){const zt=this._emulate(Ht,c.duration,_);return this._preloadTiles(zt),this}return this._zooming=!0,this._rotating=$t,this._pitching=dt,this._padding=Ct,this._prepareEase(h,!1),this._ease(Ht(_),()=>this._afterEase(h),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,h)}if(!c){const _=this.handlers;_&&_.stop(!1)}return this}_ease(c,h,_){_.animate===!1||_.duration===0?(c(1),h()):(this._easeStart=o.exported.now(),this._easeOptions=_,this._onEaseFrame=c,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,h){c=o.wrap(c,-180,180);const _=Math.abs(c-h);return Math.abs(c-360-h)<_&&(c-=360),Math.abs(c+360-h)<_&&(c+=360),c}_normalizeCenter(c){const h=this.transform;if(!h.renderWorldCopies||h.maxBounds)return;const _=c.lng-h.center.lng;c.lng+=_>180?-360:_<-180?360:0}_prefersReducedMotion(c){return this._respectPrefersReducedMotion&&o.exported.prefersReducedMotion&&!(c&&c.essential)}_emulate(c,h,_){const x=Math.ceil(15*h/1e3),w=[],P=c(_.clone());for(let A=0;A<=x;A++){const L=P(A/x);w.push(L.clone())}return w}}class En{constructor(c={}){this.options=c,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const h=this.options&&this.options.compact;return this._map=c,this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=R("button","mapboxgl-ctrl-attrib-button",this._container),R("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,h){const _=this._map._getUIString(`AttributionControl.${h}`);c.setAttribute("aria-label",_),c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(c){const _=h.reduce((x,w,P)=>(w.value&&(x+=`${w.key}=${w.value}${P<h.length-1?"&":""}`),x),"?");c.href=`${o.config.FEEDBACK_URL}/${_}#${Ah(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const h=this._map.style._sourceCaches;for(const x in h){const w=h[x];if(w.used){const P=w.getSource();P.attribution&&c.indexOf(P.attribution)<0&&c.push(P.attribution)}}c.sort((x,w)=>x.length-w.length),c=c.filter((x,w)=>{for(let P=w+1;P<c.length;P++)if(c[P].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const _=c.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,c.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class km{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=R("div","mapboxgl-ctrl");const h=R("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(Object.entries(c).length===0)return!0;for(const h in c){const _=c[h].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const h=c[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class Pm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const h=++this._id;return this._queue.push({callback:c,id:h,cancelled:!1}),h}remove(c){const h=this._currentlyRunning,_=h?this._queue.concat(h):this._queue;for(const x of _)if(x.id===c)return void(x.cancelled=!0)}run(c=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const _ of h)if(!_.cancelled&&(_.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function hd(m,c,h){if(m=new o.LngLat(m.lng,m.lat),c){const _=new o.LngLat(m.lng-360,m.lat),x=new o.LngLat(m.lng+360,m.lat),w=360*Math.ceil(Math.abs(m.lng-h.center.lng)/360),P=h.locationPoint(m).distSqr(c),A=c.x<0||c.y<0||c.x>h.width||c.y>h.height;h.locationPoint(_).distSqr(c)<P&&(A||Math.abs(_.lng-h.center.lng)<w)?m=_:h.locationPoint(x).distSqr(c)<P&&(A||Math.abs(x.lng-h.center.lng)<w)&&(m=x)}for(;Math.abs(m.lng-h.center.lng)>180;){const _=h.locationPoint(m);if(_.x>=0&&_.y>=0&&_.x<=h.width&&_.y<=h.height)break;m.lng>h.center.lng?m.lng-=360:m.lng+=360}return m}const _u={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class fn extends o.Evented{constructor(c,h){if(super(),(c instanceof o.window.HTMLElement||h)&&(c=o.extend({element:c},h)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=c&&c.occludedOpacity||.2,c&&c.element)this._element=c.element,this._offset=o.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=R("div");const x=41,w=27,P=j("svg",{display:"block",height:x*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${x}`},this._element),A=j("radialGradient",{id:"shadowGradient"},j("defs",{},P));j("stop",{offset:"10%","stop-opacity":.4},A),j("stop",{offset:"100%","stop-opacity":.05},A),j("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},P),j("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},P),j("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},P),j("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},P),this._offset=o.Point.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const _=this._element.classList;for(const x in _u)_.remove(`mapboxgl-marker-anchor-${x}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const h=c.code,_=c.charCode||c.keyCode;h!=="Space"&&h!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(c){const h=c.originalEvent.target,_=this._element;this._popup&&(h===_||_.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map,h=this._pos;if(!c||!h)return!1;const _=c.unproject(h),x=c.getFreeCameraOptions();if(!x.position)return!1;const w=x.position.toLngLat();return w.distanceTo(_)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const h=this._pos;if(!h||h.x<0||h.x>c.transform.width||h.y<0||h.y>c.transform.height)return void this._clearFadeTimer();const _=c.unproject(h);let x;c._showingGlobe()&&o.isLngLatBehindGlobe(c.transform,this._lngLat)?x=0:(x=1-c._queryFogOpacity(_),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${c.x}px,${c.y}px)
            ${_u[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const c=this._pos,h=this._map,_=this.getPitchAlignment();if(!h||!c||_!=="map")return"";if(!h._showingGlobe()){const L=h.getPitch();return L?`rotateX(${L}deg)`:""}const x=o.radToDeg(o.globeTiltAtLngLat(h.transform,this._lngLat)),w=c.sub(o.globeCenterToScreenPoint(h.transform)),P=Math.abs(w.x)+Math.abs(w.y);if(P===0)return"";const A=x/P;return`rotateX(${-w.y*A}deg) rotateY(${w.x*A}deg)`}_calculateZTransform(){const c=this._pos,h=this._map;if(!h||!c)return"";let _=0;const x=this.getRotationAlignment();if(x==="map")if(h._showingGlobe()){const w=h.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),P=h.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);_=o.radToDeg(Math.atan2(P.y,P.x))-90}else _=-h.getBearing();else if(x==="horizon"){const w=o.smoothstep(4,6,h.getZoom()),P=o.globeCenterToScreenPoint(h.transform);P.y+=w*h.transform.height;const A=c.sub(P),L=o.radToDeg(Math.atan2(A.y,A.x));_=(L>90?L-270:L+90)*(1-w)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(c){o.window.cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=hd(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),c===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=o.Point.convert(c),this._update(),this}_onMove(c){const h=this._map;if(!h)return;const _=this._pointerdownPos,x=this._positionDelta;if(_&&x){if(!this._isDragging){const w=this._clickTolerance||h._clickTolerance;if(c.point.dist(_)<w)return;this._isDragging=!0}this._pos=c.point.sub(x),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(c){const h=this._map,_=this._pos;h&&_&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(_),this._pointerdownPos=c.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const h=this._map;return h&&(c?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(c){return this._occludedOpacity=c||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Im={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},_w=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oy(m=new o.Point(0,0),c="bottom"){if(typeof m=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(c){case"top":return new o.Point(0,m);case"top-left":return new o.Point(h,h);case"top-right":return new o.Point(-h,h);case"bottom":return new o.Point(0,-m);case"bottom-left":return new o.Point(h,-h);case"bottom-right":return new o.Point(-h,-h);case"left":return new o.Point(m,0);case"right":return new o.Point(-m,0)}return new o.Point(0,0)}return m instanceof o.Point||Array.isArray(m)?o.Point.convert(m):o.Point.convert(m[c]||[0,0])}class Am{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const h=o.easeCubicInOut((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,h,_){this._start=this.getValue(h),this._end=c,this._startTime=h,this._endTime=h+_}}const ay={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},sy={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},yw={showCompass:!0,showZoom:!0,visualizePitch:!1};class vw{constructor(c,h,_=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new wm({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,_&&(this.mousePitch=new Em({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(c,h){this.mouseRotate.mousedown(c,h),this.mousePitch&&this.mousePitch.mousedown(c,h),W()}move(c,h){const _=this.map,x=this.mouseRotate.mousemoveWindow(c,h),w=x&&x.bearingDelta;if(w&&_.setBearing(_.getBearing()+w),this.mousePitch){const P=this.mousePitch.mousemoveWindow(c,h),A=P&&P.pitchDelta;A&&_.setPitch(_.getPitch()+A)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){K(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(o.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),ue(this.element,c)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,ue(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=de(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=de(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Mm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Dm={maxWidth:100,unit:"metric"},Om={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},pd={version:o.version,supported:E,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends rf{constructor(m){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(m=o.extend({},sy,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(m.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ld(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._useWebGL2=m.useWebGL2,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new Pm,this._domRenderTaskQueue=new Pm,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},ay,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Am(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,typeof m.container=="string"){if(this._container=o.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Qs(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new ym(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new En({customAttribution:m.customAttribution})),this._logoControl=new km,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new o.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new o.Event(`${c.dataType}dataloading`,c))})}_getMapId(){return this._mapId}addControl(m,c){if(c===void 0&&(c=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=m.onAdd(this);this._controls.push(m);const _=this._controlPositions[c];return c.indexOf("bottom")!==-1?_.insertBefore(h,_.firstChild):_.appendChild(h),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(m);return c>-1&&this._controls.splice(c,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),this.fire(new o.Event("resize",m)),c&&this.fire(new o.Event("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(o.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?o.window.navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(c=>c==="auto"?o.window.navigator.language:c):m}setLanguage(m){const c=this._parseLanguage(m);if(!this.style||c===this._language)return this;this._language=c,this.style._reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,c=m.projection.name;let h;c==="globe"&&m.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),h=!0):c==="mercator"&&m.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,c){return this._updateProjection(m||c||{name:"mercator"})}_updateProjection(m){let c;if(c=m.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),c){this.painter.clearBackgroundTiles();for(const h in this.style._sourceCaches)this.style._sourceCaches[h].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(m){return this.transform.locationPoint3D(o.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(o.Point.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,c,h){if(m==="mouseenter"||m==="mouseover"){let _=!1;const x=P=>{const A=c.filter(V=>this.getLayer(V)),L=A.length?this.queryRenderedFeatures(P.point,{layers:A}):[];L.length?_||(_=!0,h.call(this,new So(m,this,P.originalEvent,{features:L}))):_=!1},w=()=>{_=!1};return{layers:new Set(c),listener:h,delegates:{mousemove:x,mouseout:w}}}if(m==="mouseleave"||m==="mouseout"){let _=!1;const x=P=>{const A=c.filter(L=>this.getLayer(L));(A.length?this.queryRenderedFeatures(P.point,{layers:A}):[]).length?_=!0:_&&(_=!1,h.call(this,new So(m,this,P.originalEvent)))},w=P=>{_&&(_=!1,h.call(this,new So(m,this,P.originalEvent)))};return{layers:new Set(c),listener:h,delegates:{mousemove:x,mouseout:w}}}{const _=x=>{const w=c.filter(A=>this.getLayer(A)),P=w.length?this.queryRenderedFeatures(x.point,{layers:w}):[];P.length&&(x.features=P,h.call(this,x),delete x.features)};return{layers:new Set(c),listener:h,delegates:{[m]:_}}}}on(m,c,h){if(h===void 0)return super.on(m,c);Array.isArray(c)||(c=[c]);const _=this._createDelegatedListener(m,c,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(_);for(const x in _.delegates)this.on(x,_.delegates[x]);return this}once(m,c,h){if(h===void 0)return super.once(m,c);Array.isArray(c)||(c=[c]);const _=this._createDelegatedListener(m,c,h);for(const x in _.delegates)this.once(x,_.delegates[x]);return this}off(m,c,h){if(h===void 0)return super.off(m,c);c=new Set(Array.isArray(c)?c:[c]);const _=(w,P)=>{if(w.size!==P.size)return!1;for(const A of w)if(!P.has(A))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[m]:void 0;return x&&(w=>{for(let P=0;P<w.length;P++){const A=w[P];if(A.listener===h&&_(A.layers,c)){for(const L in A.delegates)this.off(L,A.delegates[L]);return w.splice(P,1),this}}})(x),this}queryRenderedFeatures(m,c){return this.style?(c!==void 0||m===void 0||m instanceof o.Point||Array.isArray(m)||(c=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],c=c||{},this.transform)):[]}querySourceFeatures(m,c){return this.style.querySourceFeatures(m,c)}isPointOnSurface(m){const{name:c}=this.transform.projection;return c!=="globe"&&c!=="mercator"&&o.warnOnce(`${c} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.Point.convert(m))}setStyle(m,c){return(c=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(m,c))}_getUIString(m){const c=this._locale[m];if(c==null)throw new Error(`Missing UI string '${m}'`);return c}_updateStyle(m,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new Ho(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ho(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,c){if(typeof m=="string"){const h=this._requestManager.normalizeStyleURL(m),_=this._requestManager.transformRequest(h,o.ResourceType.Style);o.getJSON(_,(x,w)=>{x?this.fire(new o.ErrorEvent(x)):w&&this._updateDiff(w,c)})}else typeof m=="object"&&this._updateDiff(m,c)}_updateDiff(m,c){try{this.style.setState(m)&&this._update(!0)}catch(h){o.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(m,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(m,c){return this._lazyInitEmptyStyle(),this.style.addSource(m,c),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const c in m){const h=m[c]._tiles;for(const _ in h){const x=h[_];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}addSourceType(m,c,h){this._lazyInitEmptyStyle(),this.style.addSourceType(m,c,h)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,c,{pixelRatio:h=1,sdf:_=!1,stretchX:x,stretchY:w,content:P}={}){if(this._lazyInitEmptyStyle(),c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap){const{width:A,height:L,data:V}=o.exported.getImageData(c);this.style.addImage(m,{data:new o.RGBAImage({width:A,height:L},V),pixelRatio:h,stretchX:x,stretchY:w,content:P,sdf:_,version:0})}else if(c.width===void 0||c.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:A,height:L}=c,V=c;this.style.addImage(m,{data:new o.RGBAImage({width:A,height:L},new Uint8Array(V.data)),pixelRatio:h,stretchX:x,stretchY:w,content:P,sdf:_,version:0,userImage:V}),V.onAdd&&V.onAdd(this,m)}}updateImage(m,c){const h=this.style.getImage(m);if(!h)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap?o.exported.getImageData(c):c,{width:x,height:w}=_;x!==void 0&&w!==void 0?x===h.data.width&&w===h.data.height?(h.data.replace(_.data,!(c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap)),this.style.updateImage(m,h)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${x}, ${w})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,c){o.getImage(this._requestManager.transformRequest(m,o.ResourceType.Image),(h,_)=>{c(h,_ instanceof o.window.HTMLImageElement?o.exported.getImageData(_):_)})}listImages(){return this.style.listImages()}addLayer(m,c){return this._lazyInitEmptyStyle(),this.style.addLayer(m,c),this._update(!0)}moveLayer(m,c){return this.style.moveLayer(m,c),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,c,h){return this.style.setLayerZoomRange(m,c,h),this._update(!0)}setFilter(m,c,h={}){return this.style.setFilter(m,c,h),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,c,h,_={}){return this.style.setPaintProperty(m,c,h,_),this._update(!0)}getPaintProperty(m,c){return this.style.getPaintProperty(m,c)}setLayoutProperty(m,c,h,_={}){return this.style.setLayoutProperty(m,c,h,_),this._update(!0)}getLayoutProperty(m,c){return this.style.getLayoutProperty(m,c)}setLight(m,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,c),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(m),this.transform):0}setFeatureState(m,c){return this.style.setFeatureState(m,c),this._update()}removeFeatureState(m,c){return this.style.removeFeatureState(m,c),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let h,_,x,w=this._container;for(;w&&(!_||!x);){const P=o.window.getComputedStyle(w).transform;P&&P!=="none"&&(h=P.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(_=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(x=h[3])),w=w.parentElement}this._containerWidth=_?Math.abs(m/_):m,this._containerHeight=x?Math.abs(c/x):c}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=R("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=R("div","mapboxgl-canvas-container",m);this._interactive&&c.classList.add("mapboxgl-interactive"),this._canvas=R("canvas","mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=R("div","mapboxgl-control-container",m),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{_[x]=R("div",`mapboxgl-ctrl-${x}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,c){const h=o.exported.devicePixelRatio||1;this._canvas.width=h*Math.ceil(m),this._canvas.height=h*Math.ceil(c),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${c}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const c=this._markers.indexOf(m);c!==-1&&this._markers.splice(c,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const c=this._popups.indexOf(m);c!==-1&&this._popups.splice(c,1)}_setupPainter(){const m=o.extend({},E.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._useWebGL2&&this._canvas.getContext("webgl2",m),h=c||this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);h?(this._useWebGL2&&!c&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(h,!0),this.painter=new ad(h,this.transform,!!c),this.on("data",_=>{_.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(h)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let c;const h=this.painter.context.extTimerQuery,_=o.exported.now();if(this.listens("gpu-timing-frame")&&(c=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const A=this.transform.zoom,L=this.transform.pitch,V=o.exported.now(),U=new o.EvaluationParameters(A,{now:V,fadeDuration:x,pitch:L,transition:this.style.getTransition()});this.style.update(U)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(_),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const A=o.exported.now()-_;h.endQueryEXT(h.TIME_ELAPSED_EXT,c),setTimeout(()=>{const L=h.getQueryObjectEXT(c,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(c),this.fire(new o.Event("gpu-timing-frame",{cpuTime:A,gpuTime:L})),o.window.performance.mark("frame-gpu",{startTime:_,detail:{gpuTime:L}})},50)}if(this.listens("gpu-timing-layer")){const A=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(A);this.fire(new o.Event("gpu-timing-layer",{layerTimes:L}))},50)}if(this.listens("gpu-timing-deferred-render")){const A=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const L=this.painter.queryGpuTimeDeferredRender(A);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:L}))},50)}const P=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(P||this._repaint)this.triggerRepaint();else{const A=!this.isMoving()&&this.loaded();if(A&&(w=this._updateAverageElevation(_,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),A&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const L=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:L})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||P||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const c of this._markers)m&&!this.getRenderWorldCopies()&&(c._lngLat=c._lngLat.wrap()),c._update();for(const c of this._popups)!m||this.getRenderWorldCopies()||c._trackPointer||(c._lngLat=c._lngLat.wrap()),c._update()}_updateAverageElevation(m,c=!1){const h=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);if((c||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const _=this.transform.averageElevation;let x=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=m;const P=Math.abs(_-x);if(P>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(x),h(x);this._averageElevation.easeTo(x,m,300)}else if(P>1e-4)return this._averageElevation.jumpTo(x),h(x)}return!!this._averageElevation.isEasing(m)&&h(this._averageElevation.getValue(m))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===o.AUTH_ERR_MSG||m.status===401)){const c=this.painter.context.gl;o.storeAuthState(c,!1),this._logoControl instanceof km&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const h=this.painter.context.gl,_=h.createFramebuffer();function x(w){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,w,0);const P=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,P),P}return h.bindFramebuffer(h.FRAMEBUFFER,_),this._canvasPixelComparison(x(m),c.canvasCopies.map(x),c.timeStamps)}_canvasPixelComparison(m,c,h){let _=h[1]-h[0];const x=m.length/4;for(let w=0;w<c.length;w++){const P=c[w];let A=0;for(let L=0;L<P.length;L+=4)P[L]===m[L]&&P[L+1]===m[L+1]&&P[L+2]===m[L+2]&&P[L+3]===m[L+3]&&(A+=1);_+=(h[w+2]-h[w+1])*(1-A/x)}return _}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=o.exported.frame(c=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(c)}))}_preloadTiles(m){const c=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(c,(h,_)=>h._preloadTiles(m,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,c){o.setCacheLimits(m,c)}get version(){return o.version}},NavigationControl:class{constructor(m){this.options=o.extend({},yw,m),this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),R("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),R("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:c}):h.resetNorth({},{originalEvent:c}))}),this._compassIcon=R("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const c=m.getZoom(),h=c===m.getMaxZoom(),_=c===m.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new vw(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,c){const h=R("button",m,this._container);return h.type="button",h.addEventListener("click",c),h}_setButtonTitle(m,c){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${c}`);m.setAttribute("aria-label",h),m.firstElementChild&&m.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends o.Evented{constructor(m){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},Mm,m),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=cd(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const c=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,m(h)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(h=>c(h.state!=="denied")).catch(()=>c()):c()}_isOutOfMapMaxBounds(m){const c=this._map.getMaxBounds(),h=m.coords;return!!c&&(h.longitude<c.getWest()||h.longitude>c.getEast()||h.latitude<c.getSouth()||h.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",m)),this._finish()}}_updateCamera(m){const c=new o.LngLat(m.coords.longitude,m.coords.latitude),h=m.coords.accuracy,_=this._map.getBearing(),x=o.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(h),x,{geolocateSource:!0})}_updateMarker(m){if(m){const c=new o.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,c=o.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,h=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=R("button","mapboxgl-ctrl-geolocate",this._container),R("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R("div","mapboxgl-user-location"),this._dotElement.appendChild(R("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(R("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new fn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=R("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(c=>{c==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:En,ScaleControl:class{constructor(m){this.options=o.extend({},Dm,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,c=this._map,h=c._containerHeight/2,_=c._containerWidth/2-m/2,x=c.unproject([_,h]),w=c.unproject([_+m,h]),P=x.distanceTo(w);if(this.options.unit==="imperial"){const A=3.2808*P;A>5280?this._setScale(m,A/5280,"mile"):this._setScale(m,A,"foot")}else this.options.unit==="nautical"?this._setScale(m,P/1852,"nautical-mile"):P>=1e3?this._setScale(m,P/1e3,"kilometer"):this._setScale(m,P,"meter")}_setScale(m,c,h){this._map._requestDomTask(()=>{const _=function(w){const P=Math.pow(10,`${Math.floor(w)}`.length-1);let A=w/P;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(L){const V=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*V)/V}(A),P*A}(c),x=_/c;this._container.innerHTML=this._isNumberFormatSupported&&h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:h}).format(_):`${_}&nbsp;${Om[h]}`,this._container.style.width=m*x+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof o.window.HTMLElement?this._container=m.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=R("button","mapboxgl-ctrl-fullscreen",this._controlContainer);R("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(m){super(),this.options=o.extend(Object.create(Im),m),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=o.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(o.window.document.createTextNode(m))}setHTML(m){const c=o.window.document.createDocumentFragment(),h=o.window.document.createElement("body");let _;for(h.innerHTML=m;_=h.firstChild,_;)c.appendChild(_);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=R("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(m),this.options.closeButton){const h=this._closeButton=R("button","mapboxgl-popup-close-button",c);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let c;return this._classList.delete(m)?c=!1:(this._classList.add(m),c=!0),this._updateClassList(),c}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const c=this._map,h=this._container,_=this._pos;if(!c||!h||!_)return"bottom";const x=h.offsetWidth,w=h.offsetHeight,P=_.x<x/2,A=_.x>c.transform.width-x/2;if(_.y+m<w)return P?"top-left":A?"top-right":"top";if(_.y>c.transform.height-w){if(P)return"bottom-left";if(A)return"bottom-right"}return P?"left":A?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),m.className=c.join(" ")}_update(m){const c=this._map,h=this._content;if(!c||!this._lngLat&&!this._trackPointer||!h)return;let _=this._container;if(_||(_=this._container=R("div","mapboxgl-popup",c.getContainer()),this._tip=R("div","mapboxgl-popup-tip",_),_.appendChild(h)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=hd(this._lngLat,this._pos,c.transform)),!this._trackPointer||m){const x=this._pos=this._trackPointer&&m?m:c.project(this._lngLat),w=oy(this.options.offset),P=this._anchor=this._getAnchor(w.y),A=oy(this.options.offset,P),L=x.add(A).round();c._requestDomTask(()=>{this._container&&P&&(this._container.style.transform=`${_u[P]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&c._showingGlobe()){const x=o.isLngLatBehindGlobe(c.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(_w);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:fn,Style:Ho,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:W_,Evented:o.Evented,config:o.config,prewarm:function(){un().acquire(Se)},clearPrewarmedResources:function(){const m=Rt;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(Se),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(m){o.config.ACCESS_TOKEN=m},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(m){o.config.API_URL=m},get workerCount(){return ct.workerCount},set workerCount(m){ct.workerCount=m},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){o.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){o.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return pd});var f=a;return f})})(_O);var wH=_O.exports;const ds=V1(wH);var vO={exports:{}},EH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SH=EH,TH=SH;function xO(){}function bO(){}bO.resetWarningCache=xO;var CH=function(){function e(i,a,u,f,o,v){if(v!==TH){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:bO,resetWarningCache:xO};return n.PropTypes=n,n};vO.exports=CH();var bs=vO.exports;const we=V1(bs);var Qo=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},kH=["onCopy","onCut","onPaste"],PH=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],IH=["onFocus","onBlur"],AH=["onInput","onInvalid","onReset","onSubmit"],MH=["onLoad","onError"],DH=["onKeyDown","onKeyPress","onKeyUp"],OH=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],RH=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],LH=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],zH=["onSelect"],FH=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],NH=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],BH=["onScroll"],jH=["onWheel"],$H=["onAnimationStart","onAnimationEnd","onAnimationIteration"],UH=["onTransitionEnd"],VH=["onToggle"],WH=["onChange"],HH=Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo(Qo([],kH,!0),PH,!0),IH,!0),AH,!0),MH,!0),DH,!0),OH,!0),RH,!0),LH,!0),zH,!0),FH,!0),NH,!0),BH,!0),jH,!0),$H,!0),UH,!0),WH,!0),VH,!0);function qH(e,t){var n={};return HH.forEach(function(i){var a=e[i];a&&(t?n[i]=function(u){return a(u,t(i))}:n[i]=a)}),n}function wO(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=wO(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function r4(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=wO(e))&&(i&&(i+=" "),i+=t);return i}function EO(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=EO(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function Wx(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=EO(e))&&(i&&(i+=" "),i+=t);return i}var GH="Expected a function",SO="__lodash_hash_undefined__",ZH="[object Function]",XH="[object GeneratorFunction]",KH=/[\\^$.*+?()[\]{}|]/g,YH=/^\[object .+?Constructor\]$/,JH=typeof xn=="object"&&xn&&xn.Object===Object&&xn,QH=typeof self=="object"&&self&&self.Object===Object&&self,TO=JH||QH||Function("return this")();function eq(e,t){return e==null?void 0:e[t]}function tq(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var nq=Array.prototype,rq=Function.prototype,CO=Object.prototype,i4=TO["__core-js_shared__"],Dk=function(){var e=/[^.]+$/.exec(i4&&i4.keys&&i4.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),kO=rq.toString,CS=CO.hasOwnProperty,iq=CO.toString,oq=RegExp("^"+kO.call(CS).replace(KH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aq=nq.splice,sq=PO(TO,"Map"),R0=PO(Object,"create");function Ep(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function lq(){this.__data__=R0?R0(null):{}}function cq(e){return this.has(e)&&delete this.__data__[e]}function uq(e){var t=this.__data__;if(R0){var n=t[e];return n===SO?void 0:n}return CS.call(t,e)?t[e]:void 0}function dq(e){var t=this.__data__;return R0?t[e]!==void 0:CS.call(t,e)}function hq(e,t){var n=this.__data__;return n[e]=R0&&t===void 0?SO:t,this}Ep.prototype.clear=lq;Ep.prototype.delete=cq;Ep.prototype.get=uq;Ep.prototype.has=dq;Ep.prototype.set=hq;function K1(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function pq(){this.__data__=[]}function fq(e){var t=this.__data__,n=Hx(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():aq.call(t,n,1),!0}function mq(e){var t=this.__data__,n=Hx(t,e);return n<0?void 0:t[n][1]}function gq(e){return Hx(this.__data__,e)>-1}function _q(e,t){var n=this.__data__,i=Hx(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}K1.prototype.clear=pq;K1.prototype.delete=fq;K1.prototype.get=mq;K1.prototype.has=gq;K1.prototype.set=_q;function zp(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function yq(){this.__data__={hash:new Ep,map:new(sq||K1),string:new Ep}}function vq(e){return qx(this,e).delete(e)}function xq(e){return qx(this,e).get(e)}function bq(e){return qx(this,e).has(e)}function wq(e,t){return qx(this,e).set(e,t),this}zp.prototype.clear=yq;zp.prototype.delete=vq;zp.prototype.get=xq;zp.prototype.has=bq;zp.prototype.set=wq;function Hx(e,t){for(var n=e.length;n--;)if(kq(e[n][0],t))return n;return-1}function Eq(e){if(!IO(e)||Tq(e))return!1;var t=Pq(e)||tq(e)?oq:YH;return t.test(Cq(e))}function qx(e,t){var n=e.__data__;return Sq(t)?n[typeof t=="string"?"string":"hash"]:n.map}function PO(e,t){var n=eq(e,t);return Eq(n)?n:void 0}function Sq(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Tq(e){return!!Dk&&Dk in e}function Cq(e){if(e!=null){try{return kO.call(e)}catch{}try{return e+""}catch{}}return""}function kS(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(GH);var n=function(){var i=arguments,a=t?t.apply(this,i):i[0],u=n.cache;if(u.has(a))return u.get(a);var f=e.apply(this,i);return n.cache=u.set(a,f),f};return n.cache=new(kS.Cache||zp),n}kS.Cache=zp;function kq(e,t){return e===t||e!==e&&t!==t}function Pq(e){var t=IO(e)?iq.call(e):"";return t==ZH||t==XH}function IO(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}var Iq=kS;const AO=V1(Iq);function MO(e){return JSON.stringify(e)}function Aq(e){return typeof e=="string"}function Mq(e,t,n){return n.indexOf(e)===t}function Dq(e){return e.toLowerCase()===e}function Ok(e){return e.indexOf(",")===-1?e:e.split(",")}function dE(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return dE(n)}if(e.indexOf("@")!==-1){var i=e.split("@")[0],n=i===void 0?"":i;return dE(n)}if(e.indexOf("-")===-1||!Dq(e))return e;var a=e.split("-"),u=a[0],f=a[1],o=f===void 0?"":f;return"".concat(u,"-").concat(o.toUpperCase())}function Oq(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,i=n===void 0?!0:n,a=t.fallbackLocale,u=a===void 0?"en-US":a,f=[];if(typeof navigator<"u"){for(var o=navigator.languages||[],v=[],E=0,k=o;E<k.length;E++){var D=k[E];v=v.concat(Ok(D))}var R=navigator.language,j=R&&Ok(R);f=f.concat(v,j)}return i&&f.push(u),f.filter(Aq).map(dE).filter(Mq)}var DO=AO(Oq,MO);function Rq(e){return DO(e)[0]||null}var PS=AO(Rq,MO);const __=PS,Lq=Object.freeze(Object.defineProperty({__proto__:null,default:__,getUserLocale:PS,getUserLocales:DO},Symbol.toStringTag,{value:"Module"}));function Pl(e,t,n){return function(a,u){u===void 0&&(u=n);var f=e(a)+u;return t(f)}}function y_(e){return function(n){return new Date(e(n).getTime()-1)}}function v_(e,t){return function(i){return[e(i),t(i)]}}function ei(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function Xu(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function x_(e){if(e instanceof Date)return e.getMonth()+1;throw new Error("Failed to get human-readable month from date: ".concat(e,"."))}function gh(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function oh(e){if(e instanceof Date)return e.getHours();if(typeof e=="string"){var t=e.split(":");if(t.length>=2){var n=t[0];if(n){var i=parseInt(n,10);if(!isNaN(i))return i}}}throw new Error("Failed to get hours from date: ".concat(e,"."))}function up(e){if(e instanceof Date)return e.getMinutes();if(typeof e=="string"){var t=e.split(":");if(t.length>=2){var n=t[1]||"0",i=parseInt(n,10);if(!isNaN(i))return i}}throw new Error("Failed to get minutes from date: ".concat(e,"."))}function h1(e){if(e instanceof Date)return e.getSeconds();if(typeof e=="string"){var t=e.split(":");if(t.length>=2){var n=t[2]||"0",i=parseInt(n,10);if(!isNaN(i))return i}}throw new Error("Failed to get seconds from date: ".concat(e,"."))}function Y1(e){var t=ei(e),n=t+(-t+1)%100,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var OO=Pl(ei,Y1,-100),IS=Pl(ei,Y1,100),b_=y_(IS),RO=Pl(ei,b_,-100),zq=Pl(ei,b_,100),AS=v_(Y1,b_);function _h(e){var t=ei(e),n=t+(-t+1)%10,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var MS=Pl(ei,_h,-10),Gx=Pl(ei,_h,10),J1=y_(Gx),DS=Pl(ei,J1,-10),Fq=Pl(ei,J1,10),OS=v_(_h,J1);function Q1(e){var t=ei(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var RS=Pl(ei,Q1,-1),Zx=Pl(ei,Q1,1),em=y_(Zx),LS=Pl(ei,em,-1),Nq=Pl(ei,em,1),LO=v_(Q1,em);function Xx(e,t){return function(i,a){a===void 0&&(a=t);var u=ei(i),f=Xu(i)+a,o=new Date;return o.setFullYear(u,f,1),o.setHours(0,0,0,0),e(o)}}function Fp(e){var t=ei(e),n=Xu(e),i=new Date;return i.setFullYear(t,n,1),i.setHours(0,0,0,0),i}var zS=Xx(Fp,-1),Kx=Xx(Fp,1),Np=y_(Kx),FS=Xx(Np,-1),Bq=Xx(Np,1),zO=v_(Fp,Np);function Yx(e,t){return function(i,a){a===void 0&&(a=t);var u=ei(i),f=Xu(i),o=gh(i)+a,v=new Date;return v.setFullYear(u,f,o),v.setHours(0,0,0,0),e(v)}}function tm(e){var t=ei(e),n=Xu(e),i=gh(e),a=new Date;return a.setFullYear(t,n,i),a.setHours(0,0,0,0),a}var jq=Yx(tm,-1),FO=Yx(tm,1),nm=y_(FO),$q=Yx(nm,-1),Uq=Yx(nm,1),NO=v_(tm,nm);function NS(e){return gh(Np(e))}function Gc(e,t){t===void 0&&(t=2);var n="".concat(e);return n.length>=t?e:"0000".concat(n).slice(-t)}function BO(e){var t=Gc(oh(e)),n=Gc(up(e));return"".concat(t,":").concat(n)}function B2(e){var t=Gc(oh(e)),n=Gc(up(e)),i=Gc(h1(e));return"".concat(t,":").concat(n,":").concat(i)}function Vq(e){var t=Gc(ei(e),4),n=Gc(x_(e));return"".concat(t,"-").concat(n)}function j2(e){var t=Gc(ei(e),4),n=Gc(x_(e)),i=Gc(gh(e));return"".concat(t,"-").concat(n,"-").concat(i)}function jO(e){return"".concat(j2(e),"T").concat(B2(e))}const Wq=Object.freeze(Object.defineProperty({__proto__:null,getCenturyEnd:b_,getCenturyRange:AS,getCenturyStart:Y1,getDate:gh,getDayEnd:nm,getDayRange:NO,getDayStart:tm,getDaysInMonth:NS,getDecadeEnd:J1,getDecadeRange:OS,getDecadeStart:_h,getHours:oh,getHoursMinutes:BO,getHoursMinutesSeconds:B2,getISOLocalDate:j2,getISOLocalDateTime:jO,getISOLocalMonth:Vq,getMinutes:up,getMonth:Xu,getMonthEnd:Np,getMonthHuman:x_,getMonthRange:zO,getMonthStart:Fp,getNextCenturyEnd:zq,getNextCenturyStart:IS,getNextDayEnd:Uq,getNextDayStart:FO,getNextDecadeEnd:Fq,getNextDecadeStart:Gx,getNextMonthEnd:Bq,getNextMonthStart:Kx,getNextYearEnd:Nq,getNextYearStart:Zx,getPreviousCenturyEnd:RO,getPreviousCenturyStart:OO,getPreviousDayEnd:$q,getPreviousDayStart:jq,getPreviousDecadeEnd:DS,getPreviousDecadeStart:MS,getPreviousMonthEnd:FS,getPreviousMonthStart:zS,getPreviousYearEnd:LS,getPreviousYearStart:RS,getSeconds:h1,getYear:ei,getYearEnd:em,getYearRange:LO,getYearStart:Q1},Symbol.toStringTag,{value:"Module"}));var Sg,Bi={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},Yf={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},Hq=(Sg={},Sg[Bi.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],Sg[Bi.HEBREW]=["he","he-IL"],Sg[Bi.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],Sg),BS=[0,1,2,3,4,5,6],o4=new Map;function qq(e){return function(n,i){var a=n||__();o4.has(a)||o4.set(a,new Map);var u=o4.get(a);return u.has(e)||u.set(e,new Intl.DateTimeFormat(a||void 0,e).format),u.get(e)(i)}}function Gq(e){var t=new Date(e);return new Date(t.setHours(12))}function Bp(e){return function(t,n){return qq(e)(t,Gq(n))}}var Zq={day:"numeric"},Xq={day:"numeric",month:"long",year:"numeric"},Kq={month:"long"},Yq={month:"long",year:"numeric"},Jq={weekday:"short"},Qq={weekday:"long"},eG={year:"numeric"},tG=Bp(Zq),nG=Bp(Xq),rG=Bp(Kq),$O=Bp(Yq),iG=Bp(Jq),oG=Bp(Qq),Jx=Bp(eG),aG=BS[0],sG=BS[5],Rk=BS[6];function L0(e,t){t===void 0&&(t=Bi.ISO_8601);var n=e.getDay();switch(t){case Bi.ISO_8601:return(n+6)%7;case Bi.ISLAMIC:return(n+1)%7;case Bi.HEBREW:case Bi.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function lG(e){var t=Y1(e);return ei(t)}function cG(e){var t=_h(e);return ei(t)}function hE(e,t){t===void 0&&(t=Bi.ISO_8601);var n=ei(e),i=Xu(e),a=e.getDate()-L0(e,t);return new Date(n,i,a)}function uG(e,t){t===void 0&&(t=Bi.ISO_8601);var n=t===Bi.GREGORY?Bi.GREGORY:Bi.ISO_8601,i=hE(e,t),a=ei(e)+1,u,f;do u=new Date(a,0,n===Bi.ISO_8601?4:1),f=hE(u,t),a-=1;while(e<f);return Math.round((i.getTime()-f.getTime())/(864e5*7))+1}function dp(e,t){switch(e){case"century":return Y1(t);case"decade":return _h(t);case"year":return Q1(t);case"month":return Fp(t);case"day":return tm(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function dG(e,t){switch(e){case"century":return OO(t);case"decade":return MS(t);case"year":return RS(t);case"month":return zS(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function UO(e,t){switch(e){case"century":return IS(t);case"decade":return Gx(t);case"year":return Zx(t);case"month":return Kx(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function hG(e,t){switch(e){case"decade":return MS(t,-100);case"year":return RS(t,-10);case"month":return zS(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function pG(e,t){switch(e){case"decade":return Gx(t,100);case"year":return Zx(t,10);case"month":return Kx(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function VO(e,t){switch(e){case"century":return b_(t);case"decade":return J1(t);case"year":return em(t);case"month":return Np(t);case"day":return nm(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function fG(e,t){switch(e){case"century":return RO(t);case"decade":return DS(t);case"year":return LS(t);case"month":return FS(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function mG(e,t){switch(e){case"decade":return DS(t,-100);case"year":return LS(t,-10);case"month":return FS(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Lk(e,t){switch(e){case"century":return AS(t);case"decade":return OS(t);case"year":return LO(t);case"month":return zO(t);case"day":return NO(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function gG(e,t,n){var i=[t,n].sort(function(a,u){return a.getTime()-u.getTime()});return[dp(e,i[0]),VO(e,i[1])]}function WO(e,t,n){return t===void 0&&(t=Jx),n.map(function(i){return t(e,i)}).join("  ")}function _G(e,t,n){return WO(e,t,AS(n))}function HO(e,t,n){return WO(e,t,OS(n))}function yG(e){return e.getDay()===new Date().getDay()}function qO(e,t){t===void 0&&(t=Bi.ISO_8601);var n=e.getDay();switch(t){case Bi.ISLAMIC:case Bi.HEBREW:return n===sG||n===Rk;case Bi.ISO_8601:case Bi.GREGORY:return n===Rk||n===aG;default:throw new Error("Unsupported calendar type.")}}var zk=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},vG=Object.values(Bi),xG=Object.values(Yf),pE=["century","decade","year","month"],w_=we.oneOf(zk(zk([],vG,!0),xG,!0)),$2=we.oneOfType([we.string,we.arrayOf(we.string)]),jS=function(t,n,i){var a=t,u=n,f=a[u];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var o=t.maxDate;return o&&f>o?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, minDate cannot be larger than maxDate.")):null},$S=function(t,n,i){var a=t,u=n,f=a[u];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var o=t.minDate;return o&&f<o?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, maxDate cannot be smaller than minDate.")):null},bG=we.oneOfType([we.func,we.exact({current:we.any})]),wG=we.oneOfType([we.instanceOf(Date),we.arrayOf(we.instanceOf(Date))]),EG=we.arrayOf(we.oneOf(pE)),z0=function(t,n,i){var a=t,u=n,f=a[u];return f!==void 0&&(typeof f!="string"||pE.indexOf(f)===-1)?new Error("Invalid prop `".concat(n,"` of value `").concat(f,"` supplied to `").concat(i,"`, expected one of [").concat(pE.map(function(o){return'"'.concat(o,'"')}).join(", "),"].")):null};z0.isRequired=function(t,n,i,a,u){var f=t,o=n,v=f[o];return v?z0(t,n,i):new Error("The prop `".concat(n,"` is marked as required in `").concat(i,"`, but its value is `").concat(v,"`."))};var SG=function(e){return we.arrayOf(e)},rm={activeStartDate:we.instanceOf(Date).isRequired,hover:we.instanceOf(Date),locale:we.string,maxDate:$S,minDate:jS,onClick:we.func,onMouseOver:we.func,tileClassName:we.oneOfType([we.func,$2]),tileContent:we.oneOfType([we.func,we.node]),value:wG,valueType:we.string},E_={activeStartDate:we.instanceOf(Date).isRequired,classes:we.arrayOf(we.string).isRequired,date:we.instanceOf(Date).isRequired,locale:we.string,maxDate:$S,minDate:jS,onClick:we.func,onMouseOver:we.func,style:we.objectOf(we.oneOfType([we.string,we.number])),tileClassName:we.oneOfType([we.func,$2]),tileContent:we.oneOfType([we.func,we.node]),tileDisabled:we.func},zc="react-calendar__navigation";function GO(e){var t=e.activeStartDate,n=e.drillUp,i=e.formatMonthYear,a=i===void 0?$O:i,u=e.formatYear,f=u===void 0?Jx:u,o=e.locale,v=e.maxDate,E=e.minDate,k=e.navigationAriaLabel,D=k===void 0?"":k,R=e.navigationAriaLive,j=e.navigationLabel,N=e.next2AriaLabel,$=N===void 0?"":N,ee=e.next2Label,W=ee===void 0?"":ee,K=e.nextAriaLabel,Y=K===void 0?"":K,ie=e.nextLabel,ue=ie===void 0?"":ie,de=e.prev2AriaLabel,M=de===void 0?"":de,Te=e.prev2Label,fe=Te===void 0?"":Te,Oe=e.prevAriaLabel,rt=Oe===void 0?"":Oe,at=e.prevLabel,qe=at===void 0?"":at,ze=e.setActiveStartDate,Be=e.showDoubleView,tt=e.view,Ke=e.views,Le=Ke.indexOf(tt)>0,Je=tt!=="century",it=dG(tt,t),kt=Je?hG(tt,t):void 0,yt=UO(tt,t),wt=Je?pG(tt,t):void 0,jt=function(){if(it.getFullYear()<0)return!0;var qt=fG(tt,t);return E&&E>=qt}(),Qt=Je&&function(){if(kt.getFullYear()<0)return!0;var qt=mG(tt,t);return E&&E>=qt}(),en=v&&v<yt,on=Je&&v&&v<wt;function Sn(){ze(it,"prev")}function Jt(){ze(kt,"prev2")}function yn(){ze(yt,"next")}function Ft(){ze(wt,"next2")}function nn(qt){var It=function(){switch(tt){case"century":return _G(o,f,qt);case"decade":return HO(o,f,qt);case"year":return f(o,qt);case"month":return a(o,qt);default:throw new Error("Invalid view: ".concat(tt,"."))}}();return j?j({date:qt,label:It,locale:o||PS()||void 0,view:tt}):It}function bn(){var qt="".concat(zc,"__label");return Ut.createElement("button",{"aria-label":D,"aria-live":R,className:qt,disabled:!Le,onClick:n,style:{flexGrow:1},type:"button"},Ut.createElement("span",{className:"".concat(qt,"__labelText ").concat(qt,"__labelText--from")},nn(t)),Be?Ut.createElement(Ut.Fragment,null,Ut.createElement("span",{className:"".concat(qt,"__divider")},"  "),Ut.createElement("span",{className:"".concat(qt,"__labelText ").concat(qt,"__labelText--to")},nn(yt))):null)}return Ut.createElement("div",{className:zc},fe!==null&&Je?Ut.createElement("button",{"aria-label":M,className:"".concat(zc,"__arrow ").concat(zc,"__prev2-button"),disabled:Qt,onClick:Jt,type:"button"},fe):null,qe!==null&&Ut.createElement("button",{"aria-label":rt,className:"".concat(zc,"__arrow ").concat(zc,"__prev-button"),disabled:jt,onClick:Sn,type:"button"},qe),bn(),ue!==null&&Ut.createElement("button",{"aria-label":Y,className:"".concat(zc,"__arrow ").concat(zc,"__next-button"),disabled:en,onClick:yn,type:"button"},ue),W!==null&&Je?Ut.createElement("button",{"aria-label":$,className:"".concat(zc,"__arrow ").concat(zc,"__next2-button"),disabled:on,onClick:Ft,type:"button"},W):null)}GO.propTypes={activeStartDate:we.instanceOf(Date).isRequired,drillUp:we.func.isRequired,formatMonthYear:we.func,formatYear:we.func,locale:we.string,maxDate:we.instanceOf(Date),minDate:we.instanceOf(Date),navigationAriaLabel:we.string,navigationAriaLive:we.string,navigationLabel:we.func,next2AriaLabel:we.string,next2Label:we.node,nextAriaLabel:we.string,nextLabel:we.node,prev2AriaLabel:we.string,prev2Label:we.node,prevAriaLabel:we.string,prevLabel:we.node,setActiveStartDate:we.func.isRequired,showDoubleView:we.bool,view:z0.isRequired,views:EG.isRequired};var Jf=globalThis&&globalThis.__assign||function(){return Jf=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Jf.apply(this,arguments)},TG=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function Fk(e){return"".concat(e,"%")}function Qx(e){var t=e.children,n=e.className,i=e.count,a=e.direction,u=e.offset,f=e.style,o=e.wrap,v=TG(e,["children","className","count","direction","offset","style","wrap"]);return Ut.createElement("div",Jf({className:n,style:Jf({display:"flex",flexDirection:a,flexWrap:o?"wrap":"nowrap"},f)},v),Ut.Children.map(t,function(E,k){var D=u&&k===0?Fk(100*u/i):null;return Ut.cloneElement(E,Jf(Jf({},E.props),{style:{flexBasis:Fk(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:D,marginInlineStart:D,marginInlineEnd:0}}))}))}Qx.propTypes={children:we.node,className:we.string,count:we.number.isRequired,direction:we.string,offset:we.number,style:we.objectOf(we.oneOfType([we.string,we.number])),wrap:we.bool};var CG=!0;function fE(e,t){if(!CG){if(e)return;var n="Warning: "+t;typeof console<"u"&&console.warn(n);try{throw Error(n)}catch{}}}var If;function kG(e,t,n){return t&&t>e?t:n&&n<e?n:e}function F0(e,t){return t[0]<=e&&t[1]>=e}function PG(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function ZO(e,t){return F0(e[0],t)||F0(e[1],t)}function Nk(e,t,n){var i=ZO(t,e),a=[];if(i){a.push(n);var u=F0(e[0],t),f=F0(e[1],t);u&&a.push("".concat(n,"Start")),f&&a.push("".concat(n,"End")),u&&f&&a.push("".concat(n,"BothEnds"))}return a}function IG(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,i=e.hover,a="react-calendar__tile",u=[a];if(!n)return u;var f=new Date,o=function(){if(Array.isArray(n))return n;var j=e.dateType;if(!j)throw new Error("dateType is required when date is not an array of two dates");return Lk(j,n)}();if(F0(f,o)&&u.push("".concat(a,"--now")),!t)return u;var v=function(){if(Array.isArray(t))return t;var j=e.valueType;if(!j)throw new Error("valueType is required when value is not an array of two dates");return Lk(j,t)}();PG(v,o)?u.push("".concat(a,"--active")):ZO(v,o)&&u.push("".concat(a,"--hasActive"));var E=Nk(v,o,"".concat(a,"--range"));u.push.apply(u,E);var k=Array.isArray(t)?t:[t];if(i&&k.length===1){var D=i>v[0]?[v[0],i]:[i,v[0]],R=Nk(D,o,"".concat(a,"--hover"));u.push.apply(u,R)}return u}var AG=(If={},If[Yf.ARABIC]=Bi.ISLAMIC,If[Yf.HEBREW]=Bi.HEBREW,If[Yf.ISO_8601]=Bi.ISO_8601,If[Yf.US]=Bi.GREGORY,If);function MG(e){return e!==void 0&&e in Yf}var Bk=!1;function eb(e){if(MG(e)){var t=AG[e];return fE(Bk,'Specifying calendarType="'.concat(e,'" is deprecated. Use calendarType="').concat(t,'" instead.')),Bk=!0,t}return e}var N0=globalThis&&globalThis.__assign||function(){return N0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},N0.apply(this,arguments)},DG=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function S_(e){for(var t=e.className,n=e.count,i=n===void 0?3:n,a=e.dateTransform,u=e.dateType,f=e.end,o=e.hover,v=e.offset,E=e.start,k=e.step,D=k===void 0?1:k,R=e.tile,j=e.value,N=e.valueType,$=DG(e,["className","count","dateTransform","dateType","end","hover","offset","start","step","tile","value","valueType"]),ee=[],W=E;W<=f;W+=D){var K=a(W);ee.push(Ut.createElement(R,N0({key:K.getTime(),classes:IG({value:j,valueType:N,date:K,dateType:u,hover:o}),date:K,point:W},$)))}return Ut.createElement(Qx,{className:t,count:i,offset:v,wrap:!0},ee)}S_.propTypes=N0(N0({},rm),{className:we.string,count:we.number,dateTransform:we.func.isRequired,dateType:we.string,end:we.number.isRequired,offset:we.number,step:we.number,start:we.number.isRequired,tile:we.func.isRequired});var U2=globalThis&&globalThis.__assign||function(){return U2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},U2.apply(this,arguments)};function T_(e){var t=e.activeStartDate,n=e.children,i=e.classes,a=e.date,u=e.formatAbbr,f=e.locale,o=e.maxDate,v=e.maxDateTransform,E=e.minDate,k=e.minDateTransform,D=e.onClick,R=e.onMouseOver,j=e.style,N=e.tileClassName,$=e.tileContent,ee=e.tileDisabled,W=e.view,K=q.useMemo(function(){var ie={activeStartDate:t,date:a,view:W};return typeof N=="function"?N(ie):N},[t,a,N,W]),Y=q.useMemo(function(){var ie={activeStartDate:t,date:a,view:W};return typeof $=="function"?$(ie):$},[t,a,$,W]);return Ut.createElement("button",{className:Wx(i,K),disabled:E&&k(E)>a||o&&v(o)<a||ee&&ee({activeStartDate:t,date:a,view:W}),onClick:D?function(ie){return D(a,ie)}:void 0,onFocus:R?function(){return R(a)}:void 0,onMouseOver:R?function(){return R(a)}:void 0,style:j,type:"button"},u?Ut.createElement("abbr",{"aria-label":u(f,a)},n):n,Y)}T_.propTypes=U2(U2({},E_),{children:we.node.isRequired,formatAbbr:we.func,maxDateTransform:we.func.isRequired,minDateTransform:we.func.isRequired});var B0=globalThis&&globalThis.__assign||function(){return B0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},B0.apply(this,arguments)},OG=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},jk=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},RG="react-calendar__century-view__decades__decade";function XO(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatYear,a=i===void 0?Jx:i,u=OG(e,["classes","formatYear"]),f=u.date,o=u.locale;return Ut.createElement(T_,B0({},u,{classes:jk(jk([],n,!0),[RG],!1),maxDateTransform:J1,minDateTransform:_h,view:"century"}),HO(o,a,f))}XO.propTypes=B0(B0({},E_),{formatYear:we.func});var V2=globalThis&&globalThis.__assign||function(){return V2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},V2.apply(this,arguments)};function KO(e){var t=e.activeStartDate,n=lG(t),i=n+99;return Ut.createElement(S_,V2({},e,{className:"react-calendar__century-view__decades",dateTransform:_h,dateType:"decade",end:i,start:n,step:10,tile:XO}))}KO.propTypes=V2({},rm);var mE=globalThis&&globalThis.__assign||function(){return mE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},mE.apply(this,arguments)};function LG(e){function t(){return Ut.createElement(KO,mE({},e))}return Ut.createElement("div",{className:"react-calendar__century-view"},t())}var j0=globalThis&&globalThis.__assign||function(){return j0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},j0.apply(this,arguments)},zG=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},$k=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},FG="react-calendar__decade-view__years__year";function YO(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatYear,a=i===void 0?Jx:i,u=zG(e,["classes","formatYear"]),f=u.date,o=u.locale;return Ut.createElement(T_,j0({},u,{classes:$k($k([],n,!0),[FG],!1),maxDateTransform:em,minDateTransform:Q1,view:"decade"}),a(o,f))}YO.propTypes=j0(j0({},E_),{formatYear:we.func});var W2=globalThis&&globalThis.__assign||function(){return W2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},W2.apply(this,arguments)};function JO(e){var t=e.activeStartDate,n=cG(t),i=n+9;return Ut.createElement(S_,W2({},e,{className:"react-calendar__decade-view__years",dateTransform:function(a){var u=new Date;return u.setFullYear(a,0,1),u.setHours(0,0,0,0),u},dateType:"year",end:i,start:n,tile:YO}))}JO.propTypes=W2({},rm);var gE=globalThis&&globalThis.__assign||function(){return gE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},gE.apply(this,arguments)};function NG(e){function t(){return Ut.createElement(JO,gE({},e))}return Ut.createElement("div",{className:"react-calendar__decade-view"},t())}var $0=globalThis&&globalThis.__assign||function(){return $0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$0.apply(this,arguments)},BG=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},Uk=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},jG="react-calendar__year-view__months__month";function QO(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatMonth,a=i===void 0?rG:i,u=e.formatMonthYear,f=u===void 0?$O:u,o=BG(e,["classes","formatMonth","formatMonthYear"]),v=o.date,E=o.locale;return Ut.createElement(T_,$0({},o,{classes:Uk(Uk([],n,!0),[jG],!1),formatAbbr:f,maxDateTransform:Np,minDateTransform:Fp,view:"year"}),a(E,v))}QO.propTypes=$0($0({},E_),{formatMonth:we.func,formatMonthYear:we.func});var U0=globalThis&&globalThis.__assign||function(){return U0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},U0.apply(this,arguments)};function eR(e){var t=e.activeStartDate,n=0,i=11,a=ei(t);return Ut.createElement(S_,U0({},e,{className:"react-calendar__year-view__months",dateTransform:function(u){var f=new Date;return f.setFullYear(a,u,1),f.setHours(0,0,0,0),f},dateType:"month",end:i,start:n,tile:QO}))}eR.propTypes=U0(U0({},rm),{locale:we.string});var _E=globalThis&&globalThis.__assign||function(){return _E=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},_E.apply(this,arguments)};function $G(e){function t(){return Ut.createElement(eR,_E({},e))}return Ut.createElement("div",{className:"react-calendar__year-view"},t())}var V0=globalThis&&globalThis.__assign||function(){return V0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},V0.apply(this,arguments)},UG=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},uv="react-calendar__month-view__days__day";function tR(e){var t=e.calendarType,n=e.classes,i=n===void 0?[]:n,a=e.currentMonthIndex,u=e.formatDay,f=u===void 0?tG:u,o=e.formatLongDate,v=o===void 0?nG:o,E=UG(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),k=eb(t),D=E.date,R=E.locale,j=[];return i&&j.push.apply(j,i),uv&&j.push(uv),qO(D,k)&&j.push("".concat(uv,"--weekend")),D.getMonth()!==a&&j.push("".concat(uv,"--neighboringMonth")),Ut.createElement(T_,V0({},E,{classes:j,formatAbbr:v,maxDateTransform:nm,minDateTransform:tm,view:"month"}),f(R,D))}tR.propTypes=V0(V0({},E_),{currentMonthIndex:we.number.isRequired,formatDay:we.func,formatLongDate:we.func});var H2=globalThis&&globalThis.__assign||function(){return H2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},H2.apply(this,arguments)},VG=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function nR(e){var t=e.activeStartDate,n=e.calendarType,i=e.showFixedNumberOfWeeks,a=e.showNeighboringMonth,u=VG(e,["showFixedNumberOfWeeks","showNeighboringMonth"]),f=eb(n),o=ei(t),v=Xu(t),E=i||a,k=L0(t,f),D=E?0:k,R=(E?-k:0)+1,j=function(){if(i)return R+6*7-1;var N=NS(t);if(a){var $=new Date;$.setFullYear(o,v,N),$.setHours(0,0,0,0);var ee=7-L0($,f)-1;return N+ee}return N}();return Ut.createElement(S_,H2({},u,{className:"react-calendar__month-view__days",count:7,currentMonthIndex:v,dateTransform:function(N){var $=new Date;return $.setFullYear(o,v,N),$.setHours(0,0,0,0),$},dateType:"day",end:j,offset:D,start:R,tile:tR}))}nR.propTypes=H2({calendarType:w_,showFixedNumberOfWeeks:we.bool,showNeighboringMonth:we.bool},rm);var rR="react-calendar__month-view__weekdays",a4="".concat(rR,"__weekday");function iR(e){for(var t=e.calendarType,n=e.formatShortWeekday,i=n===void 0?iG:n,a=e.formatWeekday,u=a===void 0?oG:a,f=e.locale,o=e.onMouseLeave,v=eb(t),E=new Date,k=Fp(E),D=ei(k),R=Xu(k),j=[],N=1;N<=7;N+=1){var $=new Date(D,R,N-L0(k,v)),ee=u(f,$);j.push(Ut.createElement("div",{key:N,className:Wx(a4,yG($)&&"".concat(a4,"--current"),qO($,v)&&"".concat(a4,"--weekend"))},Ut.createElement("abbr",{"aria-label":ee,title:ee},i(f,$).replace(".",""))))}return Ut.createElement(Qx,{className:rR,count:7,onFocus:o,onMouseOver:o},j)}iR.propTypes={calendarType:w_,formatShortWeekday:we.func,formatWeekday:we.func,locale:we.string,onMouseLeave:we.func};var q2=globalThis&&globalThis.__assign||function(){return q2=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},q2.apply(this,arguments)},Vk=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},Wk="react-calendar__tile";function oR(e){var t=e.onClickWeekNumber,n=e.weekNumber,i=Ut.createElement("span",null,n);if(t){var a=e.date,u=e.onClickWeekNumber,f=e.weekNumber,o=Vk(e,["date","onClickWeekNumber","weekNumber"]);return Ut.createElement("button",q2({},o,{className:Wk,onClick:function(v){return u(f,a,v)},type:"button"}),i)}else{e.date,e.onClickWeekNumber,e.weekNumber;var o=Vk(e,["date","onClickWeekNumber","weekNumber"]);return Ut.createElement("div",q2({},o,{className:Wk}),i)}}oR.propTypes={date:we.instanceOf(Date).isRequired,onClickWeekNumber:we.func,weekNumber:we.node.isRequired};function aR(e){var t=e.activeStartDate,n=e.calendarType,i=e.onClickWeekNumber,a=e.onMouseLeave,u=e.showFixedNumberOfWeeks,f=eb(n),o=function(){if(u)return 6;var k=NS(t),D=L0(t,f),R=k-(7-D);return 1+Math.ceil(R/7)}(),v=function(){for(var k=ei(t),D=Xu(t),R=gh(t),j=[],N=0;N<o;N+=1)j.push(hE(new Date(k,D,R+N*7),f));return j}(),E=v.map(function(k){return uG(k,f)});return Ut.createElement(Qx,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},E.map(function(k,D){var R=v[D];if(!R)throw new Error("date is not defined");return Ut.createElement(oR,{key:k,date:R,onClickWeekNumber:i,weekNumber:k})}))}aR.propTypes={activeStartDate:we.instanceOf(Date).isRequired,calendarType:w_,onClickWeekNumber:we.func,onMouseLeave:we.func,showFixedNumberOfWeeks:we.bool};var W0=globalThis&&globalThis.__assign||function(){return W0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},W0.apply(this,arguments)},WG=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function HG(e){for(var t=0,n=Object.entries(Hq);t<n.length;t++){var i=n[t],a=i[0],u=i[1];if(u.includes(e))return a}return Bi.ISO_8601}function sR(e){var t=e.activeStartDate,n=e.locale,i=e.onMouseLeave,a=e.showFixedNumberOfWeeks,u=e.calendarType,f=u===void 0?HG(n):u,o=e.formatShortWeekday,v=e.formatWeekday,E=e.onClickWeekNumber,k=e.showWeekNumbers,D=WG(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function R(){return Ut.createElement(iR,{calendarType:f,formatShortWeekday:o,formatWeekday:v,locale:n,onMouseLeave:i})}function j(){return k?Ut.createElement(aR,{activeStartDate:t,calendarType:f,onClickWeekNumber:E,onMouseLeave:i,showFixedNumberOfWeeks:a}):null}function N(){return Ut.createElement(nR,W0({calendarType:f},D))}var $="react-calendar__month-view";return Ut.createElement("div",{className:Wx($,k?"".concat($,"--weekNumbers"):"")},Ut.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},j(),Ut.createElement("div",{style:{flexGrow:1,width:"100%"}},R(),N())))}sR.propTypes=W0(W0({},rm),{calendarType:w_,formatDay:we.func,formatLongDate:we.func,formatShortWeekday:we.func,formatWeekday:we.func,onClickWeekNumber:we.func,onMouseLeave:we.func,showFixedNumberOfWeeks:we.bool,showNeighboringMonth:we.bool,showWeekNumbers:we.bool});var Qf=globalThis&&globalThis.__assign||function(){return Qf=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Qf.apply(this,arguments)},dv="react-calendar",p1=["century","decade","year","month"],qG=["decade","year","month","day"],US=new Date;US.setFullYear(1,0,1);US.setHours(0,0,0,0);var GG=new Date(864e13);function Bg(e){return e instanceof Date?e:new Date(e)}function lR(e,t){return p1.slice(p1.indexOf(e),p1.indexOf(t)+1)}function ZG(e,t,n){var i=lR(t,n);return i.indexOf(e)!==-1}function VS(e,t,n){return e&&ZG(e,t,n)?e:n}function cR(e){var t=p1.indexOf(e);return qG[t]}function XG(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var i=Bg(n);if(isNaN(i.getTime()))throw new Error("Invalid date: ".concat(e));return i}function uR(e,t){var n=e.value,i=e.minDate,a=e.maxDate,u=e.maxDetail,f=XG(n,t);if(!f)return null;var o=cR(u),v=function(){switch(t){case 0:return dp(o,f);case 1:return VO(o,f);default:throw new Error("Invalid index value: ".concat(t))}}();return kG(v,i,a)}var WS=function(e){return uR(e,0)},dR=function(e){return uR(e,1)},KG=function(e){return[WS,dR].map(function(t){return t(e)})};function hR(e){var t=e.maxDate,n=e.maxDetail,i=e.minDate,a=e.minDetail,u=e.value,f=e.view,o=VS(f,a,n),v=WS({value:u,minDate:i,maxDate:t,maxDetail:n})||new Date;return dp(o,v)}function YG(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,i=e.defaultValue,a=e.defaultView,u=e.maxDate,f=e.maxDetail,o=e.minDate,v=e.minDetail,E=e.value,k=e.view,D=VS(k,v,f),R=t||n;return R?dp(D,R):hR({maxDate:u,maxDetail:f,minDate:o,minDetail:v,value:E||i,view:k||a})}function s4(e){return e&&(!Array.isArray(e)||e.length===1)}function hv(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var pR=q.forwardRef(function(t,n){var i=t.activeStartDate,a=t.allowPartialRange,u=t.calendarType,f=t.className,o=t.defaultActiveStartDate,v=t.defaultValue,E=t.defaultView,k=t.formatDay,D=t.formatLongDate,R=t.formatMonth,j=t.formatMonthYear,N=t.formatShortWeekday,$=t.formatWeekday,ee=t.formatYear,W=t.goToRangeStartOnSelect,K=W===void 0?!0:W,Y=t.inputRef,ie=t.locale,ue=t.maxDate,de=ue===void 0?GG:ue,M=t.maxDetail,Te=M===void 0?"month":M,fe=t.minDate,Oe=fe===void 0?US:fe,rt=t.minDetail,at=rt===void 0?"century":rt,qe=t.navigationAriaLabel,ze=t.navigationAriaLive,Be=t.navigationLabel,tt=t.next2AriaLabel,Ke=t.next2Label,Le=t.nextAriaLabel,Je=t.nextLabel,it=t.onActiveStartDateChange,kt=t.onChange,yt=t.onClickDay,wt=t.onClickDecade,jt=t.onClickMonth,Qt=t.onClickWeekNumber,en=t.onClickYear,on=t.onDrillDown,Sn=t.onDrillUp,Jt=t.onViewChange,yn=t.prev2AriaLabel,Ft=t.prev2Label,nn=t.prevAriaLabel,bn=t.prevLabel,qt=t.returnValue,It=qt===void 0?"start":qt,Rn=t.selectRange,ln=t.showDoubleView,Zn=t.showFixedNumberOfWeeks,tr=t.showNavigation,Fn=tr===void 0?!0:tr,Yn=t.showNeighboringMonth,Un=Yn===void 0?!0:Yn,qn=t.showWeekNumbers,wn=t.tileClassName,Qe=t.tileContent,Kt=t.tileDisabled,an=t.value,Zt=t.view,rn=q.useState(o),sn=rn[0],vn=rn[1],Dn=q.useState(null),Nn=Dn[0],nr=Dn[1],Dr=q.useState(Array.isArray(v)?v.map(function(Ze){return Ze!==null?Bg(Ze):Ze}):v!=null?Bg(v):v),yr=Dr[0],bi=Dr[1],pi=q.useState(E),Ce=pi[0],oe=pi[1],ae=i||sn||YG({activeStartDate:i,defaultActiveStartDate:o,defaultValue:v,defaultView:E,maxDate:de,maxDetail:Te,minDate:Oe,minDetail:at,value:an,view:Zt}),ye=function(){var Ze=function(){return Rn&&s4(yr)?yr:an!==void 0?an:yr}();return Ze?Array.isArray(Ze)?Ze.map(function(Se){return Se!==null?Bg(Se):Se}):Ze!==null?Bg(Ze):Ze:null}(),De=cR(Te),Re=VS(Zt||Ce,at,Te),Ge=lR(at,Te),Xe=Rn?Nn:null,Ue=Ge.indexOf(Re)<Ge.length-1,je=Ge.indexOf(Re)>0,ut=q.useCallback(function(Ze){var Se=function(){switch(It){case"start":return WS;case"end":return dR;case"range":return KG;default:throw new Error("Invalid returnValue.")}}();return Se({maxDate:de,maxDetail:Te,minDate:Oe,value:Ze})},[de,Te,Oe,It]),At=q.useCallback(function(Ze,Se){vn(Ze);var ct={action:Se,activeStartDate:Ze,value:ye,view:Re};it&&!hv(ae,Ze)&&it(ct)},[ae,it,ye,Re]),Tt=q.useCallback(function(Ze,Se){var ct=function(){switch(Re){case"century":return wt;case"decade":return en;case"year":return jt;case"month":return yt;default:throw new Error("Invalid view: ".concat(Re,"."))}}();ct&&ct(Ze,Se)},[yt,wt,jt,en,Re]),gn=q.useCallback(function(Ze,Se){if(Ue){Tt(Ze,Se);var ct=Ge[Ge.indexOf(Re)+1];if(!ct)throw new Error("Attempted to drill down from the lowest view.");vn(Ze),oe(ct);var Rt={action:"drillDown",activeStartDate:Ze,value:ye,view:ct};it&&!hv(ae,Ze)&&it(Rt),Jt&&Re!==ct&&Jt(Rt),on&&on(Rt)}},[ae,Ue,it,Tt,on,Jt,ye,Re,Ge]),On=q.useCallback(function(){if(je){var Ze=Ge[Ge.indexOf(Re)-1];if(!Ze)throw new Error("Attempted to drill up from the highest view.");var Se=dp(Ze,ae);vn(Se),oe(Ze);var ct={action:"drillUp",activeStartDate:Se,value:ye,view:Ze};it&&!hv(ae,Se)&&it(ct),Jt&&Re!==Ze&&Jt(ct),Sn&&Sn(ct)}},[ae,je,it,Sn,Jt,ye,Re,Ge]),An=q.useCallback(function(Ze,Se){var ct=ye;Tt(Ze,Se);var Rt=Rn&&!s4(ct),un;if(Rn)if(Rt)un=dp(De,Ze);else{if(!ct)throw new Error("previousValue is required");if(Array.isArray(ct))throw new Error("previousValue must not be an array");un=gG(De,ct,Ze)}else un=ut(Ze);var fr=!Rn||Rt||K?hR({maxDate:de,maxDetail:Te,minDate:Oe,minDetail:at,value:un,view:Re}):null;Se.persist(),vn(fr),bi(un);var Ar={action:"onChange",activeStartDate:fr,value:un,view:Re};if(it&&!hv(ae,fr)&&it(Ar),kt)if(Rn){var Vn=s4(un);if(!Vn)kt(un||null,Se);else if(a){if(Array.isArray(un))throw new Error("value must not be an array");kt([un||null,null],Se)}}else kt(un||null,Se)},[ae,a,ut,K,de,Te,Oe,at,it,kt,Tt,Rn,ye,De,Re]);function Ln(Ze){nr(Ze)}function Xn(){nr(null)}q.useImperativeHandle(n,function(){return{activeStartDate:ae,drillDown:gn,drillUp:On,onChange:An,setActiveStartDate:At,value:ye,view:Re}},[ae,gn,On,An,At,ye,Re]);function wr(Ze){var Se=Ze?UO(Re,ae):dp(Re,ae),ct=Ue?gn:An,Rt={activeStartDate:Se,hover:Xe,locale:ie,maxDate:de,minDate:Oe,onClick:ct,onMouseOver:Rn?Ln:null,tileClassName:wn,tileContent:Qe,tileDisabled:Kt,value:ye,valueType:De};switch(Re){case"century":return Ut.createElement(LG,Qf({formatYear:ee},Rt));case"decade":return Ut.createElement(NG,Qf({formatYear:ee},Rt));case"year":return Ut.createElement($G,Qf({formatMonth:R,formatMonthYear:j},Rt));case"month":return Ut.createElement(sR,Qf({calendarType:u,formatDay:k,formatLongDate:D,formatShortWeekday:N,formatWeekday:$,onClickWeekNumber:Qt,onMouseLeave:Rn?Xn:null,showFixedNumberOfWeeks:typeof Zn<"u"?Zn:ln,showNeighboringMonth:Un,showWeekNumbers:qn},Rt));default:throw new Error("Invalid view: ".concat(Re,"."))}}function Er(){return Fn?Ut.createElement(GO,{activeStartDate:ae,drillUp:On,formatMonthYear:j,formatYear:ee,locale:ie,maxDate:de,minDate:Oe,navigationAriaLabel:qe,navigationAriaLive:ze,navigationLabel:Be,next2AriaLabel:tt,next2Label:Ke,nextAriaLabel:Le,nextLabel:Je,prev2AriaLabel:yn,prev2Label:Ft,prevAriaLabel:nn,prevLabel:bn,setActiveStartDate:At,showDoubleView:ln,view:Re,views:Ge}):null}var Or=Array.isArray(ye)?ye:[ye];return Ut.createElement("div",{className:Wx(dv,Rn&&Or.length===1&&"".concat(dv,"--selectRange"),ln&&"".concat(dv,"--doubleView"),f),ref:Y},Er(),Ut.createElement("div",{className:"".concat(dv,"__viewContainer"),onBlur:Rn?Xn:void 0,onMouseLeave:Rn?Xn:void 0},wr(),ln?wr(!0):null))}),Hk=we.instanceOf(Date),qk=we.oneOfType([we.string,we.instanceOf(Date)]),Gk=we.oneOfType([qk,SG(qk)]);pR.propTypes={activeStartDate:Hk,allowPartialRange:we.bool,calendarType:w_,className:$2,defaultActiveStartDate:Hk,defaultValue:Gk,defaultView:z0,formatDay:we.func,formatLongDate:we.func,formatMonth:we.func,formatMonthYear:we.func,formatShortWeekday:we.func,formatWeekday:we.func,formatYear:we.func,goToRangeStartOnSelect:we.bool,inputRef:bG,locale:we.string,maxDate:$S,maxDetail:we.oneOf(p1),minDate:jS,minDetail:we.oneOf(p1),navigationAriaLabel:we.string,navigationAriaLive:we.oneOf(["off","polite","assertive"]),navigationLabel:we.func,next2AriaLabel:we.string,next2Label:we.node,nextAriaLabel:we.string,nextLabel:we.node,onActiveStartDateChange:we.func,onChange:we.func,onClickDay:we.func,onClickDecade:we.func,onClickMonth:we.func,onClickWeekNumber:we.func,onClickYear:we.func,onDrillDown:we.func,onDrillUp:we.func,onViewChange:we.func,prev2AriaLabel:we.string,prev2Label:we.node,prevAriaLabel:we.string,prevLabel:we.node,returnValue:we.oneOf(["start","end","range"]),selectRange:we.bool,showDoubleView:we.bool,showFixedNumberOfWeeks:we.bool,showNavigation:we.bool,showNeighboringMonth:we.bool,showWeekNumbers:we.bool,tileClassName:we.oneOfType([we.func,$2]),tileContent:we.oneOfType([we.func,we.node]),tileDisabled:we.func,value:Gk,view:z0};const JG=pR;function fR(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=fR(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function QG(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=fR(e))&&(i&&(i+=" "),i+=t);return i}function mR(e,t){return function(n,i,a){var u=n,f=i,o=u[f];if(typeof o<"u"){if(typeof o!="number")return new Error("Invalid prop `".concat(i,"` of type `").concat(typeof o,"` supplied to `").concat(a,"`, expected `number`."));if(o<e||o>t)return new Error("Invalid prop `".concat(i,"` of type `").concat(typeof o,"` supplied to `").concat(a,"`, length must be between ").concat(e," and ").concat(t,"."))}return null}}var f1=mR(0,100),l4=mR(-100,100),t0=function(t,n,i){var a=t,u=n,f=a[u];if(typeof f<"u"){if(typeof f!="number")return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected `number`."));if(f<0)return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, width must be greater or equal to 0."))}return null},yE=f1,vE=t0;function Xv(e){var t=e.angle,n=t===void 0?0:t,i=e.name,a=e.length,u=a===void 0?100:a,f=e.oppositeLength,o=f===void 0?10:f,v=e.width,E=v===void 0?1:v;return Ut.createElement("div",{className:"react-clock__hand react-clock__".concat(i,"-hand"),style:{transform:"rotate(".concat(n,"deg)")}},Ut.createElement("div",{className:"react-clock__hand__body react-clock__".concat(i,"-hand__body"),style:{width:"".concat(E,"px"),top:"".concat(50-u/2,"%"),bottom:"".concat(50-o/2,"%")}}))}Xv.propTypes={angle:we.number,length:f1,name:we.string.isRequired,oppositeLength:f1,width:t0};function HS(e){var t=e.angle,n=t===void 0?0:t,i=e.length,a=i===void 0?10:i,u=e.name,f=e.width,o=f===void 0?1:f,v=e.number;return Ut.createElement("div",{className:"react-clock__mark react-clock__".concat(u,"-mark"),style:{transform:"rotate(".concat(n,"deg)")}},Ut.createElement("div",{className:"react-clock__mark__body react-clock__".concat(u,"-mark__body"),style:{width:"".concat(o,"px"),top:0,bottom:"".concat(100-a/2,"%")}}),v?Ut.createElement("div",{className:"react-clock__mark__number",style:{transform:"rotate(-".concat(n,"deg)"),top:"".concat(a/2,"%")}},v):null)}HS.propTypes={angle:we.number,length:yE,name:we.string.isRequired,number:we.node,width:vE};var xE=globalThis&&globalThis.__assign||function(){return xE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},xE.apply(this,arguments)};function eZ(e){return Ut.createElement(HS,xE({},e))}function tZ(e,t){return t.toLocaleString(e||__()||void 0)}var bE=globalThis&&globalThis.__assign||function(){return bE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},bE.apply(this,arguments)},nZ=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function gR(e){var t=e.formatHour,n=t===void 0?tZ:t,i=e.locale,a=e.number,u=nZ(e,["formatHour","locale","number"]);return Ut.createElement(HS,bE({number:a?n(i,a):null},u))}gR.propTypes={formatHour:we.func,locale:we.string,number:we.number};function _R(e){var t=e.className,n=e.formatHour,i=e.hourHandLength,a=i===void 0?50:i,u=e.hourHandOppositeLength,f=e.hourHandWidth,o=f===void 0?4:f,v=e.hourMarksLength,E=v===void 0?10:v,k=e.hourMarksWidth,D=k===void 0?3:k,R=e.locale,j=e.minuteHandLength,N=j===void 0?70:j,$=e.minuteHandOppositeLength,ee=e.minuteHandWidth,W=ee===void 0?2:ee,K=e.minuteMarksLength,Y=K===void 0?6:K,ie=e.minuteMarksWidth,ue=ie===void 0?1:ie,de=e.renderHourMarks,M=de===void 0?!0:de,Te=e.renderMinuteHand,fe=Te===void 0?!0:Te,Oe=e.renderMinuteMarks,rt=Oe===void 0?!0:Oe,at=e.renderNumbers,qe=e.renderSecondHand,ze=qe===void 0?!0:qe,Be=e.secondHandLength,tt=Be===void 0?90:Be,Ke=e.secondHandOppositeLength,Le=e.secondHandWidth,Je=Le===void 0?1:Le,it=e.size,kt=it===void 0?150:it,yt=e.value;function wt(){if(!rt)return null;for(var Jt=[],yn=1;yn<=60;yn+=1){var Ft=M&&!(yn%5);Ft||Jt.push(Ut.createElement(eZ,{key:"minute_".concat(yn),angle:yn*6,length:Y,name:"minute",width:ue}))}return Jt}function jt(){if(!M)return null;for(var Jt=[],yn=1;yn<=12;yn+=1)Jt.push(Ut.createElement(gR,{key:"hour_".concat(yn),angle:yn*30,formatHour:n,length:E,locale:R,name:"hour",number:at?yn:void 0,width:D}));return Jt}function Qt(){return Ut.createElement("div",{className:"react-clock__face"},wt(),jt())}function en(){var Jt=yt?oh(yt)*30+up(yt)/2+h1(yt)/600:0;return Ut.createElement(Xv,{angle:Jt,length:a,name:"hour",oppositeLength:u,width:o})}function on(){if(!fe)return null;var Jt=yt?oh(yt)*360+up(yt)*6+h1(yt)/10:0;return Ut.createElement(Xv,{angle:Jt,length:N,name:"minute",oppositeLength:$,width:W})}function Sn(){if(!ze)return null;var Jt=yt?up(yt)*360+h1(yt)*6:0;return Ut.createElement(Xv,{angle:Jt,length:tt,name:"second",oppositeLength:Ke,width:Je})}return Ut.createElement("time",{className:QG("react-clock",t),dateTime:yt instanceof Date?yt.toISOString():yt||void 0,style:{width:kt,height:kt}},Qt(),en(),on(),Sn())}_R.propTypes={className:we.oneOfType([we.string,we.arrayOf(we.string)]),formatHour:we.func,hourHandLength:f1,hourHandOppositeLength:l4,hourHandWidth:t0,hourMarksLength:yE,hourMarksWidth:vE,locale:we.string,minuteHandLength:f1,minuteHandOppositeLength:l4,minuteHandWidth:t0,minuteMarksLength:yE,minuteMarksWidth:vE,renderHourMarks:we.bool,renderMinuteHand:we.bool,renderMinuteMarks:we.bool,renderNumbers:we.bool,renderSecondHand:we.bool,secondHandLength:f1,secondHandOppositeLength:l4,secondHandWidth:t0,size:we.oneOfType([we.number,we.string]),value:we.oneOfType([we.string,we.instanceOf(Date)])};function Pa(e){return e.getBoundingClientRect()}function Zk(e,t){return{get collidedTop(){return Pa(e).top<Pa(t).top},get collidedBottom(){return Pa(e).bottom>Pa(t).bottom},get collidedLeft(){return Pa(e).left<Pa(t).left},get collidedRight(){return Pa(e).right>Pa(t).right},get overflowTop(){return Pa(t).top-Pa(e).top},get overflowBottom(){return Pa(e).bottom-Pa(t).bottom},get overflowLeft(){return Pa(t).left-Pa(e).left},get overflowRight(){return Pa(e).right-Pa(t).right}}}var rZ=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),jd=globalThis&&globalThis.__assign||function(){return jd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},jd.apply(this,arguments)},iZ=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},yR=typeof document<"u",Xk=yR&&"CSS"in window&&"supports"in window.CSS&&CSS.supports("display","contents"),oZ=yR&&"MutationObserver"in window;function pv(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Kk(e){for(var t=e.parentElement;t;){var n=window.getComputedStyle(t).overflow;if(n.split(" ").every(function(i){return i==="auto"||i==="scroll"}))return t;t=t.parentElement}return document.documentElement}function vR(e){var t=e.axis,n=e.container,i=e.element,a=e.invertAxis,u=e.secondary,f=e.scrollContainer,o=e.spacing,v=window.getComputedStyle(i),E=n.parentElement;if(!E)return;var k=Zk(E,f),D=Zk(E,document.documentElement),R=t==="x",j=R?"left":"top",N=R?"right":"bottom",$=R?"width":"height",ee="overflow".concat(pv(j)),W="overflow".concat(pv(N)),K="scroll".concat(pv(j)),Y=pv($),ie="offset".concat(Y),ue="client".concat(Y),de="min-".concat($),M=f[ie]-f[ue],Te=typeof o=="object"?o[j]:o,fe=-Math.max(k[ee],D[ee]+document.documentElement[K])-Te,Oe=typeof o=="object"?o[N]:o,rt=-Math.max(k[W],D[W]-document.documentElement[K])-Oe-M;u&&(fe+=E[ue],rt+=E[ue]);var at=i[ie];function qe(){i.style[j]="auto",i.style[N]=u?"0":"100%"}function ze(){i.style[j]=u?"0":"100%",i.style[N]="auto"}function Be(it,kt){var yt=at<=it;return yt&&kt(),yt}function tt(){return Be(fe,qe)}function Ke(){return Be(rt,ze)}function Le(){var it=fe>rt,kt=v.getPropertyValue(de),yt=kt?parseInt(kt,10):null;function wt(jt){fE(!yt||jt>=yt,"<Fit />'s child will not fit anywhere with its current ".concat(de," of ").concat(yt,"px."));var Qt=Math.max(jt,yt||0);fE(!1,"<Fit />'s child needed to have its ".concat($," decreased to ").concat(Qt,"px.")),i.style[$]="".concat(Qt,"px")}it?(wt(fe),qe()):(wt(rt),ze())}var Je;a?Je=tt()||Ke():Je=Ke()||tt(),Je||Le()}function aZ(e){vR(e)}function sZ(e){vR(jd(jd({},e),{axis:e.axis==="x"?"y":"x",secondary:!0}))}function lZ(e){var t=e.invertAxis,n=e.invertSecondaryAxis,i=iZ(e,["invertAxis","invertSecondaryAxis"]);aZ(jd(jd({},i),{invertAxis:t})),sZ(jd(jd({},i),{invertAxis:n}))}var Yk=function(e){rZ(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.fit=function(){var i=n,a=i.scrollContainer,u=i.container,f=i.element;if(!(!a||!u||!f)){var o=f.clientWidth,v=f.clientHeight;if(!(n.elementWidth===o&&n.elementHeight===v)){n.elementWidth=o,n.elementHeight=v;var E=u.parentElement;if(E){var k=window.getComputedStyle(f),D=k.position;D!=="absolute"&&(f.style.position="absolute");var R=window.getComputedStyle(E),j=R.position;j!=="relative"&&j!=="absolute"&&(E.style.position="relative");var N=n.props,$=N.invertAxis,ee=N.invertSecondaryAxis,W=N.mainAxis,K=W===void 0?"y":W,Y=N.spacing,ie=Y===void 0?8:Y;lZ({container:u,element:f,invertAxis:$,invertSecondaryAxis:ee,axis:K,scrollContainer:a,spacing:ie})}}}},n}return t.prototype.componentDidMount=function(){var n=this;if(!Xk){var i=ih.findDOMNode(this);if(!i||!(i instanceof HTMLElement))return;this.container=i,this.element=i,this.scrollContainer=Kk(i)}this.fit();var a=function(){n.fit()};if(oZ&&this.element){var u=new MutationObserver(a);u.observe(this.element,{attributes:!0,attributeFilter:["class","style"]})}},t.prototype.render=function(){var n=this,i=this.props.children,a=Ut.Children.only(i);return Xk?Ut.createElement("span",{ref:function(u){n.container=u;var f=u&&u.firstElementChild;!f||!(f instanceof HTMLElement)||(n.element=f,n.scrollContainer=Kk(f))},style:{display:"contents"}},a):a},t.propTypes={children:we.node.isRequired,invertAxis:we.bool,invertSecondaryAxis:we.bool,mainAxis:we.oneOf(["x","y"]),spacing:we.oneOfType([we.number,we.shape({bottom:we.number.isRequired,left:we.number.isRequired,right:we.number.isRequired,top:we.number.isRequired})])},t}(q.Component);function xR(e){var t=e.children;return Ut.createElement("span",{className:"react-datetime-picker__inputGroup__divider"},t)}xR.propTypes={children:we.node};var bR={};const Ku=C6(Wq);var C_={},wE={exports:{}};function wR(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=wR(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function Jk(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=wR(e))&&(i&&(i+=" "),i+=t);return i}wE.exports=Jk,wE.exports.clsx=Jk;var ER=wE.exports,Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});Zc.updateInputWidth=Zc.measureText=Zc.getFontShorthand=void 0;var cZ=["normal","small-caps"];function SR(e){if(!e)return"";var t=window.getComputedStyle(e);if(t.font)return t.font;var n=t.fontFamily!=="";if(!n)return"";var i=cZ.includes(t.fontVariant)?t.fontVariant:"normal";return"".concat(t.fontStyle," ").concat(i," ").concat(t.fontWeight," ").concat(t.fontSize," / ").concat(t.lineHeight," ").concat(t.fontFamily)}Zc.getFontShorthand=SR;var Qk;function TR(e,t){var n=Qk||(Qk=document.createElement("canvas")),i=n.getContext("2d");if(!i)return null;i.font=t;var a=i.measureText(e).width;return Math.ceil(a)}Zc.measureText=TR;function CR(e){if(typeof document>"u"||!e)return null;var t=SR(e),n=e.value||e.placeholder,i=TR(n,t);return i===null?null:(e.style.width="".concat(i,"px"),i)}Zc.updateInputWidth=CR;Zc.default=CR;var Oa={},eP=xn&&xn.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},uZ=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.rangeOf=Oa.isRef=Oa.isMaxDate=Oa.isMinDate=Oa.isValueType=void 0;var e1=uZ(bs),dZ=["century","decade","year","month"],hZ=eP(eP([],dZ.slice(1),!0),["day"],!1);Oa.isValueType=e1.default.oneOf(hZ);var pZ=function(t,n,i){var a=t,u=n,f=a[u];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var o=t.maxDate;return o&&f>o?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, minDate cannot be larger than maxDate.")):null};Oa.isMinDate=pZ;var fZ=function(t,n,i){var a=t,u=n,f=a[u];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var o=t.minDate;return o&&f<o?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, maxDate cannot be smaller than minDate.")):null};Oa.isMaxDate=fZ;Oa.isRef=e1.default.oneOfType([e1.default.func,e1.default.exact({current:e1.default.any})]);var mZ=function(e){return e1.default.arrayOf(e)};Oa.rangeOf=mZ;var gZ=xn&&xn.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),_Z=xn&&xn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),kR=xn&&xn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&gZ(t,e,n);return _Z(t,e),t},PR=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(C_,"__esModule",{value:!0});var t1=kR(q),Ia=PR(bs),yZ=PR(ER),H0=kR(Zc),vZ=Oa,qS=typeof document<"u",xZ=qS?t1.useLayoutEffect:t1.useEffect,bZ=qS&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),wZ=qS&&/Firefox/.test(navigator.userAgent);function EZ(e){var t=e.target;bZ?requestAnimationFrame(function(){return t.select()}):t.select()}function SZ(e){if(document.readyState==="complete")return;function t(){(0,H0.default)(e)}window.addEventListener("load",t)}function TZ(e){if(!document.fonts)return;var t=(0,H0.getFontShorthand)(e);if(!t)return;var n=document.fonts.check(t);if(n)return;function i(){(0,H0.default)(e)}document.fonts.addEventListener("loadingdone",i)}function CZ(e){if(e&&"selectionStart"in e&&e.selectionStart!==null&&"selectionEnd"in e&&e.selectionEnd!==null)return e.value.slice(e.selectionStart,e.selectionEnd);if("getSelection"in window){var t=window.getSelection();return t&&t.toString()}return null}function kZ(e){if(e!==null)return function(n){if(!wZ){var i=n.key,a=n.target,u=a.value,f=i.length===1&&/\d/.test(i),o=CZ(a);(!f||!(o||u.length<e))&&n.preventDefault()}}}function IR(e){var t=e.ariaLabel,n=e.autoFocus,i=e.className,a=e.disabled,u=e.inputRef,f=e.max,o=e.min,v=e.name,E=e.nameForClass,k=e.onChange,D=e.onKeyDown,R=e.onKeyUp,j=e.placeholder,N=j===void 0?"--":j,$=e.required,ee=e.showLeadingZeros,W=e.step,K=e.value;xZ(function(){!u||!u.current||((0,H0.default)(u.current),SZ(u.current),TZ(u.current))},[u,K]);var Y=ee&&K&&Number(K)<10&&(K==="0"||!K.toString().startsWith("0")),ie=f?f.toString().length:null;return t1.default.createElement(t1.default.Fragment,null,Y?t1.default.createElement("span",{className:"".concat(i,"__leadingZero")},"0"):null,t1.default.createElement("input",{"aria-label":t,autoComplete:"off",autoFocus:n,className:(0,yZ.default)("".concat(i,"__input"),"".concat(i,"__").concat(E||v),Y&&"".concat(i,"__input--hasLeadingZero")),"data-input":"true",disabled:a,inputMode:"numeric",max:f,min:o,name:v,onChange:k,onFocus:EZ,onKeyDown:D,onKeyPress:kZ(ie),onKeyUp:function(ue){(0,H0.default)(ue.target),R&&R(ue)},placeholder:N,ref:u,required:$,step:W,type:"number",value:K!==null?K:""}))}C_.default=IR;IR.propTypes={ariaLabel:Ia.default.string,autoFocus:Ia.default.bool,className:Ia.default.string.isRequired,disabled:Ia.default.bool,inputRef:vZ.isRef,max:Ia.default.number,min:Ia.default.number,name:Ia.default.string,nameForClass:Ia.default.string,onChange:Ia.default.func,onKeyDown:Ia.default.func,onKeyUp:Ia.default.func,placeholder:Ia.default.string,required:Ia.default.bool,showLeadingZeros:Ia.default.bool,step:Ia.default.number,value:Ia.default.string};var lc={};Object.defineProperty(lc,"__esModule",{value:!0});lc.safeMax=lc.safeMin=lc.between=void 0;function PZ(e,t,n){return t&&t>e?t:n&&n<e?n:e}lc.between=PZ;function AR(e){return e!==null&&e!==!1&&!Number.isNaN(Number(e))}function IZ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.min.apply(Math,e.filter(AR))}lc.safeMin=IZ;function AZ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.max.apply(Math,e.filter(AR))}lc.safeMax=AZ;var EE=xn&&xn.__assign||function(){return EE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},EE.apply(this,arguments)},MZ=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},GS=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bR,"__esModule",{value:!0});var DZ=GS(q),ol=GS(bs),Tg=Ku,OZ=GS(C_),c4=Oa,tP=lc;function MR(e){var t=e.maxDate,n=e.minDate,i=e.month,a=e.year,u=MZ(e,["maxDate","minDate","month","year"]),f=function(){return i?(0,Tg.getDaysInMonth)(new Date(Number(a),Number(i)-1,1)):31}();function o(k){return a===(0,Tg.getYear)(k).toString()&&i===(0,Tg.getMonthHuman)(k).toString()}var v=(0,tP.safeMin)(f,t&&o(t)&&(0,Tg.getDate)(t)),E=(0,tP.safeMax)(1,n&&o(n)&&(0,Tg.getDate)(n));return DZ.default.createElement(OZ.default,EE({max:v,min:E,name:"day"},u))}var RZ=bR.default=MR;MR.propTypes={ariaLabel:ol.default.string,className:ol.default.string.isRequired,disabled:ol.default.bool,inputRef:c4.isRef,maxDate:c4.isMaxDate,minDate:c4.isMinDate,month:ol.default.string,onChange:ol.default.func,onKeyDown:ol.default.func,onKeyUp:ol.default.func,placeholder:ol.default.string,required:ol.default.bool,showLeadingZeros:ol.default.bool,value:ol.default.string,year:ol.default.string};var DR={},SE=xn&&xn.__assign||function(){return SE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},SE.apply(this,arguments)},LZ=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},ZS=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(DR,"__esModule",{value:!0});var zZ=ZS(q),Xl=ZS(bs),u4=Ku,FZ=ZS(C_),d4=Oa,nP=lc;function OR(e){var t=e.maxDate,n=e.minDate,i=e.year,a=LZ(e,["maxDate","minDate","year"]);function u(v){return v&&i===(0,u4.getYear)(v).toString()}var f=(0,nP.safeMin)(12,t&&u(t)&&(0,u4.getMonthHuman)(t)),o=(0,nP.safeMax)(1,n&&u(n)&&(0,u4.getMonthHuman)(n));return zZ.default.createElement(FZ.default,SE({max:f,min:o,name:"month"},a))}var NZ=DR.default=OR;OR.propTypes={ariaLabel:Xl.default.string,className:Xl.default.string.isRequired,disabled:Xl.default.bool,inputRef:d4.isRef,maxDate:d4.isMaxDate,minDate:d4.isMinDate,onChange:Xl.default.func,onKeyDown:Xl.default.func,onKeyUp:Xl.default.func,placeholder:Xl.default.string,required:Xl.default.bool,showLeadingZeros:Xl.default.bool,value:Xl.default.string,year:Xl.default.string};var RR={},Jd={};const LR=C6(Lq);var BZ=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jd,"__esModule",{value:!0});Jd.formatShortMonth=Jd.formatMonth=Jd.getFormatter=void 0;var jZ=BZ(LR),h4=new Map;function zR(e){return function(n,i){var a=n||(0,jZ.default)();h4.has(a)||h4.set(a,new Map);var u=h4.get(a);return u.has(e)||u.set(e,new Intl.DateTimeFormat(a||void 0,e).format),u.get(e)(i)}}Jd.getFormatter=zR;function $Z(e){var t=new Date(e);return new Date(t.setHours(12))}function FR(e){return function(t,n){return zR(e)(t,$Z(n))}}var UZ={month:"long"},VZ={month:"short"};Jd.formatMonth=FR(UZ);Jd.formatShortMonth=FR(VZ);var WZ=xn&&xn.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},XS=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(RR,"__esModule",{value:!0});var p4=XS(q),al=XS(bs),HZ=XS(ER),fv=Ku,rP=Jd,f4=Oa,iP=lc;function NR(e){var t=e.ariaLabel,n=e.autoFocus,i=e.className,a=e.disabled,u=e.inputRef,f=e.locale,o=e.maxDate,v=e.minDate,E=e.onChange,k=e.onKeyDown,D=e.placeholder,R=D===void 0?"--":D,j=e.required,N=e.short,$=e.value,ee=e.year;function W(M){return M&&ee===(0,fv.getYear)(M).toString()}var K=(0,iP.safeMin)(12,o&&W(o)&&(0,fv.getMonthHuman)(o)),Y=(0,iP.safeMax)(1,v&&W(v)&&(0,fv.getMonthHuman)(v)),ie=WZ([],Array(12),!0).map(function(M,Te){return new Date(2019,Te,1)}),ue="month",de=N?rP.formatShortMonth:rP.formatMonth;return p4.default.createElement("select",{"aria-label":t,autoFocus:n,className:(0,HZ.default)("".concat(i,"__input"),"".concat(i,"__").concat(ue)),"data-input":"true","data-select":"true",disabled:a,name:ue,onChange:E,onKeyDown:k,ref:u,required:j,value:$!==null?$:""},!$&&p4.default.createElement("option",{value:""},R),ie.map(function(M){var Te=(0,fv.getMonthHuman)(M),fe=Te<Y||Te>K;return p4.default.createElement("option",{key:Te,disabled:fe,value:Te},de(f,M))}))}var qZ=RR.default=NR;NR.propTypes={ariaLabel:al.default.string,autoFocus:al.default.bool,className:al.default.string.isRequired,disabled:al.default.bool,inputRef:f4.isRef,locale:al.default.string,maxDate:f4.isMaxDate,minDate:f4.isMinDate,onChange:al.default.func,onKeyDown:al.default.func,placeholder:al.default.string,required:al.default.bool,short:al.default.bool,value:al.default.string,year:al.default.string};var BR={},TE=xn&&xn.__assign||function(){return TE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},TE.apply(this,arguments)},GZ=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},KS=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(BR,"__esModule",{value:!0});var ZZ=KS(q),ku=KS(bs),oP=Ku,XZ=KS(C_),mv=Oa,aP=lc;function jR(e){var t=e.maxDate,n=e.minDate,i=e.placeholder,a=i===void 0?"----":i,u=e.valueType,f=GZ(e,["maxDate","minDate","placeholder","valueType"]),o=(0,aP.safeMin)(275760,t&&(0,oP.getYear)(t)),v=(0,aP.safeMax)(1,n&&(0,oP.getYear)(n)),E=function(){return u==="century"?10:1}();return ZZ.default.createElement(XZ.default,TE({max:o,min:v,name:"year",placeholder:a,step:E},f))}var KZ=BR.default=jR;jR.propTypes={ariaLabel:ku.default.string,className:ku.default.string.isRequired,disabled:ku.default.bool,inputRef:mv.isRef,maxDate:mv.isMaxDate,minDate:mv.isMinDate,onChange:ku.default.func,onKeyDown:ku.default.func,onKeyUp:ku.default.func,placeholder:ku.default.string,required:ku.default.bool,value:ku.default.string,valueType:mv.isValueType};var $R={},im={},CE={exports:{}};function UR(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=UR(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function sP(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=UR(e))&&(i&&(i+=" "),i+=t);return i}CE.exports=sP,CE.exports.clsx=sP;var VR=CE.exports,Ka={},YZ=xn&&xn.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},JZ=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.rangeOf=Ka.isRef=Ka.isValueType=Ka.isTime=void 0;var n1=JZ(bs),QZ=["hour","minute","second"],eX=YZ([],QZ,!0),tX=/^(([0-1])?[0-9]|2[0-3]):[0-5][0-9](:([0-5][0-9]))?$/,nX=function(t,n,i){var a=t,u=n,f=a[u];return f&&(typeof f!="string"||!tX.test(f))?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected time in HH:mm(:ss) format.")):null};Ka.isTime=nX;Ka.isValueType=n1.default.oneOf(eX);Ka.isRef=n1.default.oneOfType([n1.default.func,n1.default.exact({current:n1.default.any})]);var rX=function(e){return n1.default.arrayOf(e)};Ka.rangeOf=rX;var iX=xn&&xn.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),oX=xn&&xn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),WR=xn&&xn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&iX(t,e,n);return oX(t,e),t},HR=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(im,"__esModule",{value:!0});var r1=WR(q),Aa=HR(bs),aX=HR(VR),q0=WR(Zc),sX=Ka,YS=typeof document<"u",lX=YS?r1.useLayoutEffect:r1.useEffect,cX=YS&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),uX=YS&&/Firefox/.test(navigator.userAgent);function dX(e){var t=e.target;cX?requestAnimationFrame(function(){return t.select()}):t.select()}function hX(e){if(document.readyState==="complete")return;function t(){(0,q0.default)(e)}window.addEventListener("load",t)}function pX(e){if(!document.fonts)return;var t=(0,q0.getFontShorthand)(e);if(!t)return;var n=document.fonts.check(t);if(n)return;function i(){(0,q0.default)(e)}document.fonts.addEventListener("loadingdone",i)}function fX(e){if(e&&"selectionStart"in e&&e.selectionStart!==null&&"selectionEnd"in e&&e.selectionEnd!==null)return e.value.slice(e.selectionStart,e.selectionEnd);if("getSelection"in window){var t=window.getSelection();return t&&t.toString()}return null}function mX(e){if(e!==null)return function(n){if(!uX){var i=n.key,a=n.target,u=a.value,f=i.length===1&&/\d/.test(i),o=fX(a);(!f||!(o||u.length<e))&&n.preventDefault()}}}function qR(e){var t=e.ariaLabel,n=e.autoFocus,i=e.className,a=e.disabled,u=e.inputRef,f=e.max,o=e.min,v=e.name,E=e.nameForClass,k=e.onChange,D=e.onKeyDown,R=e.onKeyUp,j=e.placeholder,N=j===void 0?"--":j,$=e.required,ee=e.showLeadingZeros,W=e.step,K=e.value;lX(function(){!u||!u.current||((0,q0.default)(u.current),hX(u.current),pX(u.current))},[u,K]);var Y=ee&&K&&Number(K)<10&&(K==="0"||!K.toString().startsWith("0")),ie=f?f.toString().length:null;return r1.default.createElement(r1.default.Fragment,null,Y?r1.default.createElement("span",{className:"".concat(i,"__leadingZero")},"0"):null,r1.default.createElement("input",{"aria-label":t,autoComplete:"off",autoFocus:n,className:(0,aX.default)("".concat(i,"__input"),"".concat(i,"__").concat(E||v),Y&&"".concat(i,"__input--hasLeadingZero")),"data-input":"true",disabled:a,inputMode:"numeric",max:f,min:o,name:v,onChange:k,onFocus:dX,onKeyDown:D,onKeyPress:mX(ie),onKeyUp:function(ue){(0,q0.default)(ue.target),R&&R(ue)},placeholder:N,ref:u,required:$,step:W,type:"number",value:K!==null?K:""}))}im.default=qR;qR.propTypes={ariaLabel:Aa.default.string,autoFocus:Aa.default.bool,className:Aa.default.string.isRequired,disabled:Aa.default.bool,inputRef:sX.isRef,max:Aa.default.number,min:Aa.default.number,name:Aa.default.string,nameForClass:Aa.default.string,onChange:Aa.default.func,onKeyDown:Aa.default.func,onKeyUp:Aa.default.func,placeholder:Aa.default.string,required:Aa.default.bool,showLeadingZeros:Aa.default.bool,step:Aa.default.number,value:Aa.default.string};var Sp={};Object.defineProperty(Sp,"__esModule",{value:!0});Sp.convert24to12=Sp.convert12to24=void 0;function gX(e,t){var n=Number(e);return t==="am"&&n===12?n=0:t==="pm"&&n<12&&(n+=12),n}Sp.convert12to24=gX;function _X(e){var t=Number(e)%12||12;return[t,Number(e)<12?"am":"pm"]}Sp.convert24to12=_X;var xl={},P1={},yX=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P1,"__esModule",{value:!0});P1.getNumberFormatter=P1.getFormatter=void 0;var GR=yX(LR),m4=new Map;function vX(e){return function(n,i){var a=n||(0,GR.default)();m4.has(a)||m4.set(a,new Map);var u=m4.get(a);return u.has(e)||u.set(e,new Intl.DateTimeFormat(a||void 0,e).format),u.get(e)(i)}}P1.getFormatter=vX;var g4=new Map;function xX(e){return function(t,n){var i=t||(0,GR.default)();g4.has(i)||g4.set(i,new Map);var a=g4.get(i);return a.has(e)||a.set(e,new Intl.NumberFormat(i||void 0,e).format),a.get(e)(n)}}P1.getNumberFormatter=xX;Object.defineProperty(xl,"__esModule",{value:!0});xl.safeMax=xl.safeMin=xl.getAmPmLabels=void 0;var bX=P1,wX=["9",""],lP=new RegExp("[".concat(wX.join(""),"]")),cP=(0,bX.getFormatter)({hour:"numeric"});function EX(e){var t=cP(e,new Date(2017,0,1,9)),n=cP(e,new Date(2017,0,1,21)),i=t.split(lP),a=i[0],u=i[1],f=n.split(lP),o=f[0],v=f[1];if(v!==void 0){if(a!==o)return[a,o].map(function(E){return E.trim()});if(u!==v)return[u,v].map(function(E){return E.trim()})}return["AM","PM"]}xl.getAmPmLabels=EX;function ZR(e){return e!==null&&e!==!1&&!Number.isNaN(Number(e))}function SX(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.min.apply(Math,e.filter(ZR))}xl.safeMin=SX;function TX(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.max.apply(Math,e.filter(ZR))}xl.safeMax=TX;var kE=xn&&xn.__assign||function(){return kE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},kE.apply(this,arguments)},CX=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},JS=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($R,"__esModule",{value:!0});var kX=JS(q),sl=JS(bs),uP=Ku,PX=JS(im),_4=Sp,y4=Ka,dP=xl;function XR(e){var t=e.amPm,n=e.maxTime,i=e.minTime,a=e.value,u=CX(e,["amPm","maxTime","minTime","value"]),f=(0,dP.safeMin)(12,n&&function(){var E=(0,_4.convert24to12)((0,uP.getHours)(n)),k=E[0],D=E[1];return D!==t?null:k}()),o=(0,dP.safeMax)(1,i&&function(){var E=(0,_4.convert24to12)((0,uP.getHours)(i)),k=E[0],D=E[1];return D!==t||k===12?null:k}()),v=a?(0,_4.convert24to12)(a)[0].toString():"";return kX.default.createElement(PX.default,kE({max:f,min:o,name:"hour12",nameForClass:"hour",value:v},u))}var IX=$R.default=XR;XR.propTypes={amPm:sl.default.string,ariaLabel:sl.default.string,className:sl.default.string.isRequired,disabled:sl.default.bool,hour:sl.default.string,inputRef:y4.isRef,maxTime:y4.isTime,minTime:y4.isTime,onChange:sl.default.func,onKeyDown:sl.default.func,onKeyUp:sl.default.func,placeholder:sl.default.string,required:sl.default.bool,showLeadingZeros:sl.default.bool,value:sl.default.string};var KR={},PE=xn&&xn.__assign||function(){return PE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},PE.apply(this,arguments)},AX=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},QS=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(KR,"__esModule",{value:!0});var MX=QS(q),Kl=QS(bs),hP=Ku,DX=QS(im),v4=Ka,pP=xl;function YR(e){var t=e.maxTime,n=e.minTime,i=AX(e,["maxTime","minTime"]),a=(0,pP.safeMin)(23,t&&(0,hP.getHours)(t)),u=(0,pP.safeMax)(0,n&&(0,hP.getHours)(n));return MX.default.createElement(DX.default,PE({max:a,min:u,name:"hour24",nameForClass:"hour"},i))}var OX=KR.default=YR;YR.propTypes={ariaLabel:Kl.default.string,className:Kl.default.string.isRequired,disabled:Kl.default.bool,hour:Kl.default.string,inputRef:v4.isRef,maxTime:v4.isTime,minTime:v4.isTime,onChange:Kl.default.func,onKeyDown:Kl.default.func,onKeyUp:Kl.default.func,placeholder:Kl.default.string,required:Kl.default.bool,showLeadingZeros:Kl.default.bool,value:Kl.default.string};var JR={},IE=xn&&xn.__assign||function(){return IE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},IE.apply(this,arguments)},RX=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},e7=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(JR,"__esModule",{value:!0});var LX=e7(q),Yl=e7(bs),x4=Ku,zX=e7(im),b4=Ka,fP=xl;function QR(e){var t=e.hour,n=e.maxTime,i=e.minTime,a=e.showLeadingZeros,u=a===void 0?!0:a,f=RX(e,["hour","maxTime","minTime","showLeadingZeros"]);function o(k){return t===(0,x4.getHours)(k).toString()}var v=(0,fP.safeMin)(59,n&&o(n)&&(0,x4.getMinutes)(n)),E=(0,fP.safeMax)(0,i&&o(i)&&(0,x4.getMinutes)(i));return LX.default.createElement(zX.default,IE({max:v,min:E,name:"minute",showLeadingZeros:u},f))}var FX=JR.default=QR;QR.propTypes={ariaLabel:Yl.default.string,className:Yl.default.string.isRequired,disabled:Yl.default.bool,hour:Yl.default.string,inputRef:b4.isRef,maxTime:b4.isTime,minTime:b4.isTime,onChange:Yl.default.func,onKeyDown:Yl.default.func,onKeyUp:Yl.default.func,placeholder:Yl.default.string,required:Yl.default.bool,showLeadingZeros:Yl.default.bool,value:Yl.default.string};var eL={},AE=xn&&xn.__assign||function(){return AE=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},AE.apply(this,arguments)},NX=xn&&xn.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},t7=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eL,"__esModule",{value:!0});var BX=t7(q),ll=t7(bs),gv=Ku,jX=t7(im),w4=Ka,mP=xl;function tL(e){var t=e.hour,n=e.maxTime,i=e.minTime,a=e.minute,u=e.showLeadingZeros,f=u===void 0?!0:u,o=NX(e,["hour","maxTime","minTime","minute","showLeadingZeros"]);function v(D){return t===(0,gv.getHours)(D).toString()&&a===(0,gv.getMinutes)(D).toString()}var E=(0,mP.safeMin)(59,n&&v(n)&&(0,gv.getSeconds)(n)),k=(0,mP.safeMax)(0,i&&v(i)&&(0,gv.getSeconds)(i));return BX.default.createElement(jX.default,AE({max:E,min:k,name:"second",showLeadingZeros:f},o))}var $X=eL.default=tL;tL.propTypes={ariaLabel:ll.default.string,className:ll.default.string.isRequired,disabled:ll.default.bool,hour:ll.default.string,inputRef:w4.isRef,maxTime:w4.isTime,minTime:w4.isTime,minute:ll.default.string,onChange:ll.default.func,onKeyDown:ll.default.func,onKeyUp:ll.default.func,placeholder:ll.default.string,required:ll.default.bool,showLeadingZeros:ll.default.bool,value:ll.default.string};var nL={},n7=xn&&xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nL,"__esModule",{value:!0});var _v=n7(q),Pu=n7(bs),UX=n7(VR),gP=Ku,_P=Sp,E4=Ka,VX=xl;function rL(e){var t=e.ariaLabel,n=e.autoFocus,i=e.className,a=e.disabled,u=e.inputRef,f=e.locale,o=e.maxTime,v=e.minTime,E=e.onChange,k=e.onKeyDown,D=e.required,R=e.value,j=v?(0,_P.convert24to12)((0,gP.getHours)(v))[1]==="pm":!1,N=o?(0,_P.convert24to12)((0,gP.getHours)(o))[1]==="am":!1,$="amPm",ee=(0,VX.getAmPmLabels)(f),W=ee[0],K=ee[1];return _v.default.createElement("select",{"aria-label":t,autoFocus:n,className:(0,UX.default)("".concat(i,"__input"),"".concat(i,"__").concat($)),"data-input":"true","data-select":"true",disabled:a,name:$,onChange:E,onKeyDown:k,ref:u,required:D,value:R!==null?R:""},!R&&_v.default.createElement("option",{value:""},"--"),_v.default.createElement("option",{disabled:j,value:"am"},W),_v.default.createElement("option",{disabled:N,value:"pm"},K))}var WX=nL.default=rL;rL.propTypes={ariaLabel:Pu.default.string,autoFocus:Pu.default.bool,className:Pu.default.string.isRequired,disabled:Pu.default.bool,inputRef:E4.isRef,locale:Pu.default.string,maxTime:E4.isTime,minTime:E4.isTime,onChange:Pu.default.func,onKeyDown:Pu.default.func,required:Pu.default.bool,value:Pu.default.oneOf(["am","pm"])};var HX=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},qX=["hour","minute","second"],GX=HX([],qX,!0),r7=function(t,n,i){var a=t,u=n,f=a[u];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var o=t.maxDate;return o&&f>o?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, minDate cannot be larger than maxDate.")):null},i7=function(t,n,i){var a=t,u=n,f=a[u];if(!f)return null;if(!(f instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, expected instance of `Date`."));var o=t.minDate;return o&&f<o?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof f,"` supplied to `").concat(i,"`, maxDate cannot be smaller than minDate.")):null},ZX=we.oneOf(GX),XX=function(e){return we.arrayOf(e)};function iL(e){var t=e.ariaLabel,n=e.disabled,i=e.maxDate,a=e.minDate,u=e.name,f=e.onChange,o=e.required,v=e.value,E=e.valueType,k=function(){switch(E){case"hour":return function(j){return"".concat(j2(j),"T").concat(oh(j),":00")};case"minute":return function(j){return"".concat(j2(j),"T").concat(BO(j))};case"second":return jO;default:throw new Error("Invalid valueType")}}(),D=function(){switch(E){case"hour":return 3600;case"minute":return 60;case"second":return 1;default:throw new Error("Invalid valueType")}}();function R(j){j.stopPropagation()}return Ut.createElement("input",{"aria-label":t,disabled:n,hidden:!0,max:i?k(i):void 0,min:a?k(a):void 0,name:u,onChange:f,onFocus:R,required:o,step:D,style:{visibility:"hidden",position:"absolute",zIndex:"-999"},type:"datetime-local",value:v?k(v):""})}iL.propTypes={ariaLabel:we.string,disabled:we.bool,maxDate:i7,minDate:r7,name:we.string,onChange:we.func,required:we.bool,value:we.oneOfType([we.string,we.instanceOf(Date)]),valueType:ZX};var S4=new Map;function G2(e){return function(n,i){var a=n||__();S4.has(a)||S4.set(a,new Map);var u=S4.get(a);return u.has(e)||u.set(e,new Intl.DateTimeFormat(a||void 0,e).format),u.get(e)(i)}}var T4=new Map;function KX(e){return function(t,n){var i=t||__();T4.has(i)||T4.set(i,new Map);var a=T4.get(i);return a.has(e)||a.set(e,new Intl.NumberFormat(i||void 0,e).format),a.get(e)(n)}}var YX={day:"numeric",month:"numeric",year:"numeric"},JX=G2(YX);function yP(e,t){var n=Number(e);return t==="am"&&n===12?n=0:t==="pm"&&n<12&&(n+=12),n}function QX(e){var t=Number(e)%12||12;return[t,Number(e)<12?"am":"pm"]}function eK(e,t,n){return t&&t>e?t:n&&n<e?n:e}var tK=["9",""],vP=new RegExp("[".concat(tK.join(""),"]")),xP=G2({hour:"numeric"});function nK(e){var t=xP(e,new Date(2017,0,1,9)),n=xP(e,new Date(2017,0,1,21)),i=t.split(vP),a=i[0],u=i[1],f=n.split(vP),o=f[0],v=f[1];if(v!==void 0){if(a!==o)return[a,o].map(function(E){return E.trim()});if(u!==v)return[u,v].map(function(E){return E.trim()})}return["AM","PM"]}var Jl=globalThis&&globalThis.__assign||function(){return Jl=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Jl.apply(this,arguments)},bP=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},yv={},n0=new Date;n0.setFullYear(1,0,1);n0.setHours(0,0,0,0);var C4=new Date(864e13),oL=["hour","minute","second"];function aL(e){return e instanceof Date?e:new Date(e)}function wP(e,t,n,i){return t===ei(e).toString()&&n===x_(e).toString()&&i===gh(e).toString()}function rK(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var i=aL(n);if(isNaN(i.getTime()))throw new Error("Invalid date: ".concat(e));return i}function iK(e,t){var n=e.value,i=e.minDate,a=e.maxDate,u=rK(n,t);return u?eK(u,i,a):null}var oK=function(e){return iK(e,0)};function aK(e){return e.dataset.input==="true"}function EP(e,t){var n=e;do n=n[t];while(n&&!aK(n));return n}function k4(e){e&&e.focus()}function sK(e,t,n){var i=[],a=new RegExp(Object.keys(t).map(function(f){return"".concat(f,"+")}).join("|"),"g"),u=e.match(a);return e.split(a).reduce(function(f,o,v){var E=o&&Ut.createElement(xR,{key:"separator_".concat(v)},o),k=bP(bP([],f,!0),[E],!1),D=u&&u[v];if(D){var R=t[D]||t[Object.keys(t).find(function(j){return D.match(j)})];if(!R)return k;!n&&i.includes(R)?k.push(D):(k.push(R(D,v)),i.push(R))}return k},[])}var vv=KX({useGrouping:!1});function sL(e){var t=e.amPmAriaLabel,n=e.autoFocus,i=e.className,a=e.dayAriaLabel,u=e.dayPlaceholder,f=e.disabled,o=e.format,v=e.hourAriaLabel,E=e.hourPlaceholder,k=e.isWidgetOpen,D=e.locale,R=e.maxDate,j=e.maxDetail,N=j===void 0?"minute":j,$=e.minDate,ee=e.minuteAriaLabel,W=e.minutePlaceholder,K=e.monthAriaLabel,Y=e.monthPlaceholder,ie=e.name,ue=ie===void 0?"datetime":ie,de=e.nativeInputAriaLabel,M=e.onChange,Te=e.onInvalidChange,fe=e.required,Oe=e.secondAriaLabel,rt=e.secondPlaceholder,at=e.showLeadingZeros,qe=e.value,ze=e.yearAriaLabel,Be=e.yearPlaceholder,tt=q.useState(null),Ke=tt[0],Le=tt[1],Je=q.useState(null),it=Je[0],kt=Je[1],yt=q.useState(null),wt=yt[0],jt=yt[1],Qt=q.useState(null),en=Qt[0],on=Qt[1],Sn=q.useState(null),Jt=Sn[0],yn=Sn[1],Ft=q.useState(null),nn=Ft[0],bn=Ft[1],qt=q.useState(null),It=qt[0],Rn=qt[1],ln=q.useState(null),Zn=ln[0],tr=ln[1],Fn=q.useRef(null),Yn=q.useRef(null),Un=q.useRef(null),qn=q.useRef(null),wn=q.useRef(null),Qe=q.useRef(null),Kt=q.useRef(null),an=q.useRef(null),Zt=q.useRef(null),rn=q.useState(k),sn=rn[0],vn=rn[1],Dn=q.useRef();q.useEffect(function(){vn(k)},[k]),q.useEffect(function(){var Se=oK({value:qe,minDate:$,maxDate:R});Se?(Le(QX(oh(Se))[1]),kt(ei(Se).toString()),jt(x_(Se).toString()),on(gh(Se).toString()),yn(oh(Se).toString()),bn(up(Se).toString()),Rn(h1(Se).toString()),tr(aL(Se))):(Le(null),kt(null),jt(null),on(null),yn(null),bn(null),Rn(null),tr(null))},[qe,$,R,sn]);var Nn=N,nr=function(){var Se=oL.indexOf(N),ct=yv[Se]||function(){var Rt={hour:"numeric"};return Se>=1&&(Rt.minute="numeric"),Se>=2&&(Rt.second="numeric"),yv[Se]=Rt,Rt}();return G2(ct)}(),Dr=function(){var Se=2017,ct=11,Rt=11,un=new Date(Se,ct,Rt),fr=JX(D,un),Ar=["year","month","day"],Vn=["y","M","d"];function Do(_o,ra){var $i=yv[_o]||function(){var Ui,yo=(Ui={},Ui[_o]="numeric",Ui);return yv[_o]=yo,yo}();return G2($i)(D,ra).match(/\d{1,}/)}var go=fr;return Ar.forEach(function(_o,ra){var $i=Do(_o,un);if($i){var Ui=$i[0],yo=Vn[ra];go=go.replace(Ui,yo)}}),go=go.replace("17","y"),go}(),yr=function(){var Se=21,ct=9,Rt=13,un=14,fr=new Date(2017,0,1,Se,Rt,un);return nr(D,fr).replace(vv(D,ct),"h").replace(vv(D,Se),"H").replace(vv(D,Rt),"mm").replace(vv(D,un),"ss").replace(new RegExp(nK(D).join("|")),"a")}(),bi=o||"".concat(Dr,"").concat(yr),pi=function(){var Se=Dr.match(/[^0-9a-z]/i);return Se?Se[0]:null}(),Ce=function(){var Se=yr.match(/[^0-9a-z]/i);return Se?Se[0]:null}(),oe=function(){if(R&&wP(R,it,wt,en))return B2(R||C4)}(),ae=function(){if($&&wP($,it,wt,en))return B2($||n0)}();function ye(Se){if(Se.target===Se.currentTarget){var ct=Se.target.children[1];k4(ct)}}function De(Se){switch(Dn.current=Se.key,Se.key){case"ArrowLeft":case"ArrowRight":case pi:case Ce:{Se.preventDefault();var ct=Se.target,Rt=Se.key==="ArrowLeft"?"previousElementSibling":"nextElementSibling",un=EP(ct,Rt);k4(un);break}}}function Re(Se){var ct=Se.key,Rt=Se.target,un=Dn.current===ct;if(un){var fr=!isNaN(Number(ct));if(fr){var Ar=Rt.getAttribute("max");if(Ar){var Vn=Rt.value;if(Number(Vn)*10>Number(Ar)||Vn.length>=Ar.length){var Do="nextElementSibling",go=EP(Rt,Do);k4(go)}}}}}function Ge(){if(!M)return;function Se(Vi){return!!Vi}var ct=[Fn.current,wn.current,Un.current,qn.current,Yn.current,Qe.current,Kt.current,an.current,Zt.current].filter(Se),Rt=ct.slice(1),un={};ct.forEach(function(Vi){un[Vi.name]=Vi.type==="number"?"valueAsNumber"in Vi?Vi.valueAsNumber:Number(Vi.value):Vi.value});var fr=Rt.every(function(Vi){return!Vi.value});if(fr){M(null,!1);return}var Ar=ct.every(function(Vi){return Vi.value}),Vn=ct.every(function(Vi){return Vi.validity.valid});if(Ar&&Vn){var Do=Number(un.year||new Date().getFullYear()),go=Number(un.month||1)-1,_o=Number(un.day||1),ra=Number(un.hour24||un.hour12&&un.amPm&&yP(un.hour12,un.amPm)||0),$i=Number(un.minute||0),Ui=Number(un.second||0),yo=new Date;yo.setFullYear(Do,go,_o),yo.setHours(ra,$i,Ui,0),M(yo,!1);return}Te&&Te()}function Xe(Se){var ct=Se.target,Rt=ct.name,un=ct.value;switch(Rt){case"amPm":Le(un);break;case"year":kt(un);break;case"month":jt(un);break;case"day":on(un);break;case"hour12":yn(un?yP(un,Ke||"am").toString():"");break;case"hour24":yn(un);break;case"minute":bn(un);break;case"second":Rn(un);break}Ge()}function Ue(Se){var ct=Se.target.value;if(M){var Rt=function(){if(!ct)return null;var un=ct.split("T"),fr=un[0],Ar=un[1],Vn=fr.split("-"),Do=Vn[0],go=Vn[1],_o=Vn[2],ra=Number(Do),$i=Number(go)-1||0,Ui=Number(_o)||1,yo=Ar.split(":"),Vi=yo[0],Ba=yo[1],ja=yo[2],Al=Number(Vi)||0,vt=Number(Ba)||0,fa=Number(ja)||0,ti=new Date;return ti.setFullYear(ra,$i,Ui),ti.setHours(Al,vt,fa,0),ti}();M(Rt,!1)}}var je={className:i,disabled:f,maxDate:R||C4,minDate:$||n0,onChange:Xe,onKeyDown:De,onKeyUp:Re,required:!!(fe||sn)},ut={maxTime:oe,minTime:ae};function At(Se,ct){if(Se&&Se.length>2)throw new Error("Unsupported token: ".concat(Se));var Rt=Se&&Se.length===2;return Ut.createElement(RZ,Jl({key:"day"},je,{ariaLabel:a,autoFocus:ct===0&&n,inputRef:wn,month:wt,placeholder:u,showLeadingZeros:Rt||at,value:en,year:it}))}function Tt(Se,ct){if(Se&&Se.length>4)throw new Error("Unsupported token: ".concat(Se));if(Se.length>2)return Ut.createElement(qZ,Jl({key:"month"},je,{ariaLabel:K,autoFocus:ct===0&&n,inputRef:qn,locale:D,placeholder:Y,short:Se.length===3,value:wt,year:it}));var Rt=Se&&Se.length===2;return Ut.createElement(NZ,Jl({key:"month"},je,{ariaLabel:K,autoFocus:ct===0&&n,inputRef:Un,placeholder:Y,showLeadingZeros:Rt||at,value:wt,year:it}))}function gn(Se,ct){return Ut.createElement(KZ,Jl({key:"year"},je,{ariaLabel:ze,autoFocus:ct===0&&n,inputRef:Yn,placeholder:Be,value:it,valueType:"day"}))}function On(Se,ct){if(Se&&Se.length>2)throw new Error("Unsupported token: ".concat(Se));var Rt=Se?Se.length===2:!1;return Ut.createElement(IX,Jl({key:"hour12"},je,ut,{amPm:Ke,ariaLabel:v,autoFocus:ct===0&&n,inputRef:Qe,placeholder:E,showLeadingZeros:Rt,value:Jt}))}function An(Se,ct){if(Se&&Se.length>2)throw new Error("Unsupported token: ".concat(Se));var Rt=Se?Se.length===2:!1;return Ut.createElement(OX,Jl({key:"hour24"},je,ut,{ariaLabel:v,autoFocus:ct===0&&n,inputRef:Kt,placeholder:E,showLeadingZeros:Rt,value:Jt}))}function Ln(Se,ct){return/h/.test(Se)?On(Se,ct):An(Se,ct)}function Xn(Se,ct){if(Se&&Se.length>2)throw new Error("Unsupported token: ".concat(Se));var Rt=Se?Se.length===2:!1;return Ut.createElement(FX,Jl({key:"minute"},je,ut,{ariaLabel:ee,autoFocus:ct===0&&n,hour:Jt,inputRef:an,placeholder:W,showLeadingZeros:Rt,value:nn}))}function wr(Se,ct){if(Se&&Se.length>2)throw new Error("Unsupported token: ".concat(Se));var Rt=Se?Se.length===2:!0;return Ut.createElement($X,Jl({key:"second"},je,ut,{ariaLabel:Oe,autoFocus:ct===0&&n,hour:Jt,inputRef:Zt,minute:nn,placeholder:rt,showLeadingZeros:Rt,value:It}))}function Er(Se,ct){return Ut.createElement(WX,Jl({key:"ampm"},je,ut,{ariaLabel:t,autoFocus:ct===0&&n,inputRef:Fn,locale:D,onChange:Xe,value:Ke}))}function Or(){var Se={d:At,M:Tt,y:gn,h:Ln,H:Ln,m:Xn,s:wr,a:Er},ct=typeof o<"u";return sK(bi,Se,ct)}function Ze(){return Ut.createElement(iL,{key:"datetime",ariaLabel:de,disabled:f,maxDate:R||C4,minDate:$||n0,name:ue,onChange:Ue,required:fe,value:Zn,valueType:Nn})}return Ut.createElement("div",{className:i,onClick:ye},Ze(),Or())}var lK=we.oneOfType([we.string,we.instanceOf(Date)]);sL.propTypes={amPmAriaLabel:we.string,autoFocus:we.bool,className:we.string.isRequired,dayAriaLabel:we.string,dayPlaceholder:we.string,disabled:we.bool,format:we.string,hourAriaLabel:we.string,hourPlaceholder:we.string,isWidgetOpen:we.bool,locale:we.string,maxDate:i7,maxDetail:we.oneOf(oL),minDate:r7,minuteAriaLabel:we.string,minutePlaceholder:we.string,monthAriaLabel:we.string,monthPlaceholder:we.string,name:we.string,nativeInputAriaLabel:we.string,onChange:we.func,required:we.bool,secondAriaLabel:we.string,secondPlaceholder:we.string,showLeadingZeros:we.bool,value:lK,yearAriaLabel:we.string,yearPlaceholder:we.string};var $d=globalThis&&globalThis.__assign||function(){return $d=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$d.apply(this,arguments)},P4=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},Za="react-datetime-picker",cK=["mousedown","focusin","touchstart"],lL=["hour","minute","second"],cL={xmlns:"http://www.w3.org/2000/svg",width:19,height:19,viewBox:"0 0 19 19",stroke:"black",strokeWidth:2},uK=Ut.createElement("svg",$d({},cL,{className:"".concat(Za,"__calendar-button__icon ").concat(Za,"__button__icon")}),Ut.createElement("rect",{fill:"none",height:"15",width:"15",x:"2",y:"2"}),Ut.createElement("line",{x1:"6",x2:"6",y1:"0",y2:"4"}),Ut.createElement("line",{x1:"13",x2:"13",y1:"0",y2:"4"})),dK=Ut.createElement("svg",$d({},cL,{className:"".concat(Za,"__clear-button__icon ").concat(Za,"__button__icon")}),Ut.createElement("line",{x1:"4",x2:"15",y1:"4",y2:"15"}),Ut.createElement("line",{x1:"15",x2:"4",y1:"4",y2:"15"}));function uL(e){var t=e.amPmAriaLabel,n=e.autoFocus,i=e.calendarAriaLabel,a=e.calendarIcon,u=a===void 0?uK:a,f=e.className,o=e.clearAriaLabel,v=e.clearIcon,E=v===void 0?dK:v,k=e.closeWidgets,D=k===void 0?!0:k,R=e["data-testid"],j=e.dayAriaLabel,N=e.dayPlaceholder,$=e.disableCalendar,ee=e.disableClock,W=e.disabled,K=e.format,Y=e.hourAriaLabel,ie=e.hourPlaceholder,ue=e.id,de=e.isCalendarOpen,M=de===void 0?null:de,Te=e.isClockOpen,fe=Te===void 0?null:Te,Oe=e.locale,rt=e.maxDate,at=e.maxDetail,qe=at===void 0?"minute":at,ze=e.minDate,Be=e.minuteAriaLabel,tt=e.minutePlaceholder,Ke=e.monthAriaLabel,Le=e.monthPlaceholder,Je=e.name,it=Je===void 0?"datetime":Je,kt=e.nativeInputAriaLabel,yt=e.onCalendarClose,wt=e.onCalendarOpen,jt=e.onChange,Qt=e.onClockClose,en=e.onClockOpen,on=e.onFocus,Sn=e.onInvalidChange,Jt=e.openWidgetsOnFocus,yn=Jt===void 0?!0:Jt,Ft=e.required,nn=e.secondAriaLabel,bn=e.secondPlaceholder,qt=e.shouldCloseWidgets,It=e.shouldOpenWidgets,Rn=e.showLeadingZeros,ln=e.value,Zn=e.yearAriaLabel,tr=e.yearPlaceholder,Fn=P4(e,["amPmAriaLabel","autoFocus","calendarAriaLabel","calendarIcon","className","clearAriaLabel","clearIcon","closeWidgets","data-testid","dayAriaLabel","dayPlaceholder","disableCalendar","disableClock","disabled","format","hourAriaLabel","hourPlaceholder","id","isCalendarOpen","isClockOpen","locale","maxDate","maxDetail","minDate","minuteAriaLabel","minutePlaceholder","monthAriaLabel","monthPlaceholder","name","nativeInputAriaLabel","onCalendarClose","onCalendarOpen","onChange","onClockClose","onClockOpen","onFocus","onInvalidChange","openWidgetsOnFocus","required","secondAriaLabel","secondPlaceholder","shouldCloseWidgets","shouldOpenWidgets","showLeadingZeros","value","yearAriaLabel","yearPlaceholder"]),Yn=q.useState(M),Un=Yn[0],qn=Yn[1],wn=q.useState(fe),Qe=wn[0],Kt=wn[1],an=q.useRef(null),Zt=q.useRef(null),rn=q.useRef(null);q.useEffect(function(){qn(M)},[M]),q.useEffect(function(){Kt(fe)},[fe]);function sn(je){var ut=je.reason;It&&!It({reason:ut,widget:"calendar"})||(Kt(Qe&&!1),qn(!0),wt&&wt())}var vn=q.useCallback(function(je){var ut=je.reason;qt&&!qt({reason:ut,widget:"calendar"})||(qn(!1),yt&&yt())},[yt,qt]);function Dn(){Un?vn({reason:"buttonClick"}):sn({reason:"buttonClick"})}function Nn(je){var ut=je.reason;It&&!It({reason:ut,widget:"clock"})||(qn(Un&&!1),Kt(!0),en&&en())}var nr=q.useCallback(function(je){var ut=je.reason;qt&&!qt({reason:ut,widget:"clock"})||(Kt(!1),Qt&&Qt())},[Qt,qt]),Dr=q.useCallback(function(je){var ut=je.reason;vn({reason:ut}),nr({reason:ut})},[vn,nr]);function yr(je,ut){ut===void 0&&(ut=D),ut&&Dr({reason:"select"}),jt&&jt(je)}function bi(je,ut){var At=(Array.isArray(je)?je:[je])[0],Tt=(Array.isArray(ln)?ln:[ln])[0];if(Tt&&At){var gn=new Date(Tt),On=new Date(At);On.setHours(gn.getHours(),gn.getMinutes(),gn.getSeconds(),gn.getMilliseconds()),yr(On,ut)}else yr(At,ut)}function pi(je){if(on&&on(je),!(W||!yn||je.target.dataset.select==="true"))switch(je.target.name){case"day":case"month":case"year":{if(Un)return;sn({reason:"focus"});break}case"hour12":case"hour24":case"minute":case"second":{if(Qe)return;Nn({reason:"focus"});break}}}var Ce=q.useCallback(function(je){je.key==="Escape"&&Dr({reason:"escape"})},[Dr]);function oe(){yr(null)}function ae(je){je.stopPropagation()}var ye=q.useCallback(function(je){var ut=an.current,At=Zt.current,Tt=rn.current,gn="composedPath"in je?je.composedPath()[0]:je.target;gn&&ut&&!ut.contains(gn)&&(!At||!At.contains(gn))&&(!Tt||!Tt.contains(gn))&&Dr({reason:"outsideAction"})},[Zt,rn,Dr,an]),De=q.useCallback(function(je){je===void 0&&(je=Un||Qe),cK.forEach(function(ut){je?document.addEventListener(ut,ye):document.removeEventListener(ut,ye)}),je?document.addEventListener("keydown",Ce):document.removeEventListener("keydown",Ce)},[Un,Qe,ye,Ce]);q.useEffect(function(){return De(),function(){De(!1)}},[De]);function Re(){var je=(Array.isArray(ln)?ln:[ln])[0],ut={amPmAriaLabel:t,dayAriaLabel:j,hourAriaLabel:Y,minuteAriaLabel:Be,monthAriaLabel:Ke,nativeInputAriaLabel:kt,secondAriaLabel:nn,yearAriaLabel:Zn},At={dayPlaceholder:N,hourPlaceholder:ie,minutePlaceholder:tt,monthPlaceholder:Le,secondPlaceholder:bn,yearPlaceholder:tr};return Ut.createElement("div",{className:"".concat(Za,"__wrapper")},Ut.createElement(sL,$d({},ut,At,{autoFocus:n,className:"".concat(Za,"__inputGroup"),disabled:W,format:K,isWidgetOpen:Un||Qe,locale:Oe,maxDate:rt,maxDetail:qe,minDate:ze,name:it,onChange:yr,onInvalidChange:Sn,required:Ft,showLeadingZeros:Rn,value:je})),E!==null&&Ut.createElement("button",{"aria-label":o,className:"".concat(Za,"__clear-button ").concat(Za,"__button"),disabled:W,onClick:oe,onFocus:ae,type:"button"},typeof E=="function"?Ut.createElement(E):E),u!==null&&!$&&Ut.createElement("button",{"aria-label":i,className:"".concat(Za,"__calendar-button ").concat(Za,"__button"),disabled:W,onClick:Dn,onFocus:ae,type:"button"},typeof u=="function"?Ut.createElement(u):u))}function Ge(){if(Un===null||$)return null;var je=e.calendarClassName;e.className,e.maxDetail,e.onChange;var ut=e.portalContainer,At=e.value,Tt=P4(e,["calendarClassName","className","maxDetail","onChange","portalContainer","value"]),gn="".concat(Za,"__calendar"),On=r4(gn,"".concat(gn,"--").concat(Un?"open":"closed")),An=Ut.createElement(JG,$d({className:je,onChange:function(Ln){return bi(Ln)},value:At},Tt));return ut?ih.createPortal(Ut.createElement("div",{ref:Zt,className:On},An),ut):Ut.createElement(Yk,null,Ut.createElement("div",{ref:function(Ln){Ln&&!Un&&Ln.removeAttribute("style")},className:On},An))}function Xe(){if(Qe===null||ee)return null;var je=e.clockClassName;e.className;var ut=e.maxDetail,At=ut===void 0?"minute":ut;e.onChange;var Tt=e.portalContainer,gn=e.value,On=P4(e,["clockClassName","className","maxDetail","onChange","portalContainer","value"]),An="".concat(Za,"__clock"),Ln=r4(An,"".concat(An,"--").concat(Qe?"open":"closed")),Xn=(Array.isArray(gn)?gn:[gn])[0],wr=lL.indexOf(At),Er=Ut.createElement(_R,$d({className:je,renderMinuteHand:wr>0,renderSecondHand:wr>1,value:Xn},On));return Tt?ih.createPortal(Ut.createElement("div",{ref:rn,className:Ln},Er),Tt):Ut.createElement(Yk,null,Ut.createElement("div",{ref:function(Or){Or&&!Qe&&Or.removeAttribute("style")},className:Ln},Er))}var Ue=q.useMemo(function(){return qH(Fn)},[Fn]);return Ut.createElement("div",$d({className:r4(Za,"".concat(Za,"--").concat(Un||Qe?"open":"closed"),"".concat(Za,"--").concat(W?"disabled":"enabled"),f),"data-testid":R,id:ue},Ue,{onFocus:pi,ref:an}),Re(),Ge(),Xe())}var SP=we.oneOfType([we.string,we.instanceOf(Date)]),hK=we.oneOfType([SP,XX(SP)]);uL.propTypes={amPmAriaLabel:we.string,autoFocus:we.bool,calendarAriaLabel:we.string,calendarClassName:we.oneOfType([we.string,we.arrayOf(we.string)]),calendarIcon:we.oneOfType([we.node,we.func]),className:we.oneOfType([we.string,we.arrayOf(we.string)]),clearAriaLabel:we.string,clearIcon:we.oneOfType([we.node,we.func]),clockClassName:we.oneOfType([we.string,we.arrayOf(we.string)]),closeWidgets:we.bool,"data-testid":we.string,dayAriaLabel:we.string,dayPlaceholder:we.string,disableCalendar:we.bool,disableClock:we.bool,disabled:we.bool,format:we.string,hourAriaLabel:we.string,hourPlaceholder:we.string,id:we.string,isCalendarOpen:we.bool,isClockOpen:we.bool,locale:we.string,maxDate:i7,maxDetail:we.oneOf(lL),minDate:r7,minuteAriaLabel:we.string,minutePlaceholder:we.string,monthAriaLabel:we.string,monthPlaceholder:we.string,name:we.string,nativeInputAriaLabel:we.string,onCalendarClose:we.func,onCalendarOpen:we.func,onChange:we.func,onClockClose:we.func,onClockOpen:we.func,onFocus:we.func,openWidgetsOnFocus:we.bool,portalContainer:we.object,required:we.bool,secondAriaLabel:we.string,secondPlaceholder:we.string,showLeadingZeros:we.bool,value:hK,yearAriaLabel:we.string,yearPlaceholder:we.string};function dL(e,t){return function(){return e.apply(t,arguments)}}const{toString:pK}=Object.prototype,{getPrototypeOf:o7}=Object,tb=(e=>t=>{const n=pK.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ru=e=>(e=e.toLowerCase(),t=>tb(t)===e),nb=e=>t=>typeof t===e,{isArray:om}=Array,G0=nb("undefined");function fK(e){return e!==null&&!G0(e)&&e.constructor!==null&&!G0(e.constructor)&&bl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const hL=ru("ArrayBuffer");function mK(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&hL(e.buffer),t}const gK=nb("string"),bl=nb("function"),pL=nb("number"),rb=e=>e!==null&&typeof e=="object",_K=e=>e===!0||e===!1,Kv=e=>{if(tb(e)!=="object")return!1;const t=o7(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yK=ru("Date"),vK=ru("File"),xK=ru("Blob"),bK=ru("FileList"),wK=e=>rb(e)&&bl(e.pipe),EK=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||bl(e.append)&&((t=tb(e))==="formdata"||t==="object"&&bl(e.toString)&&e.toString()==="[object FormData]"))},SK=ru("URLSearchParams"),TK=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function k_(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,a;if(typeof e!="object"&&(e=[e]),om(e))for(i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else{const u=n?Object.getOwnPropertyNames(e):Object.keys(e),f=u.length;let o;for(i=0;i<f;i++)o=u[i],t.call(null,e[o],o,e)}}function fL(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,a;for(;i-- >0;)if(a=n[i],t===a.toLowerCase())return a;return null}const mL=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),gL=e=>!G0(e)&&e!==mL;function ME(){const{caseless:e}=gL(this)&&this||{},t={},n=(i,a)=>{const u=e&&fL(t,a)||a;Kv(t[u])&&Kv(i)?t[u]=ME(t[u],i):Kv(i)?t[u]=ME({},i):om(i)?t[u]=i.slice():t[u]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&k_(arguments[i],n);return t}const CK=(e,t,n,{allOwnKeys:i}={})=>(k_(t,(a,u)=>{n&&bl(a)?e[u]=dL(a,n):e[u]=a},{allOwnKeys:i}),e),kK=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),PK=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},IK=(e,t,n,i)=>{let a,u,f;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),u=a.length;u-- >0;)f=a[u],(!i||i(f,e,t))&&!o[f]&&(t[f]=e[f],o[f]=!0);e=n!==!1&&o7(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},AK=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},MK=e=>{if(!e)return null;if(om(e))return e;let t=e.length;if(!pL(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},DK=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&o7(Uint8Array)),OK=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=i.next())&&!a.done;){const u=a.value;t.call(e,u[0],u[1])}},RK=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},LK=ru("HTMLFormElement"),zK=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),TP=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),FK=ru("RegExp"),_L=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};k_(n,(a,u)=>{t(a,u,e)!==!1&&(i[u]=a)}),Object.defineProperties(e,i)},NK=e=>{_L(e,(t,n)=>{if(bl(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(bl(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},BK=(e,t)=>{const n={},i=a=>{a.forEach(u=>{n[u]=!0})};return om(e)?i(e):i(String(e).split(t)),n},jK=()=>{},$K=(e,t)=>(e=+e,Number.isFinite(e)?e:t),I4="abcdefghijklmnopqrstuvwxyz",CP="0123456789",yL={DIGIT:CP,ALPHA:I4,ALPHA_DIGIT:I4+I4.toUpperCase()+CP},UK=(e=16,t=yL.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function VK(e){return!!(e&&bl(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const WK=e=>{const t=new Array(10),n=(i,a)=>{if(rb(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[a]=i;const u=om(i)?[]:{};return k_(i,(f,o)=>{const v=n(f,a+1);!G0(v)&&(u[o]=v)}),t[a]=void 0,u}}return i};return n(e,0)},HK=ru("AsyncFunction"),qK=e=>e&&(rb(e)||bl(e))&&bl(e.then)&&bl(e.catch),Bt={isArray:om,isArrayBuffer:hL,isBuffer:fK,isFormData:EK,isArrayBufferView:mK,isString:gK,isNumber:pL,isBoolean:_K,isObject:rb,isPlainObject:Kv,isUndefined:G0,isDate:yK,isFile:vK,isBlob:xK,isRegExp:FK,isFunction:bl,isStream:wK,isURLSearchParams:SK,isTypedArray:DK,isFileList:bK,forEach:k_,merge:ME,extend:CK,trim:TK,stripBOM:kK,inherits:PK,toFlatObject:IK,kindOf:tb,kindOfTest:ru,endsWith:AK,toArray:MK,forEachEntry:OK,matchAll:RK,isHTMLForm:LK,hasOwnProperty:TP,hasOwnProp:TP,reduceDescriptors:_L,freezeMethods:NK,toObjectSet:BK,toCamelCase:zK,noop:jK,toFiniteNumber:$K,findKey:fL,global:mL,isContextDefined:gL,ALPHABET:yL,generateString:UK,isSpecCompliantForm:VK,toJSONObject:WK,isAsyncFn:HK,isThenable:qK};function Vr(e,t,n,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),a&&(this.response=a)}Bt.inherits(Vr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Bt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const vL=Vr.prototype,xL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xL[e]={value:e}});Object.defineProperties(Vr,xL);Object.defineProperty(vL,"isAxiosError",{value:!0});Vr.from=(e,t,n,i,a,u)=>{const f=Object.create(vL);return Bt.toFlatObject(e,f,function(v){return v!==Error.prototype},o=>o!=="isAxiosError"),Vr.call(f,e.message,t,n,i,a),f.cause=e,f.name=e.name,u&&Object.assign(f,u),f};const GK=null;function DE(e){return Bt.isPlainObject(e)||Bt.isArray(e)}function bL(e){return Bt.endsWith(e,"[]")?e.slice(0,-2):e}function kP(e,t,n){return e?e.concat(t).map(function(a,u){return a=bL(a),!n&&u?"["+a+"]":a}).join(n?".":""):t}function ZK(e){return Bt.isArray(e)&&!e.some(DE)}const XK=Bt.toFlatObject(Bt,{},null,function(t){return/^is[A-Z]/.test(t)});function ib(e,t,n){if(!Bt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Bt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,ee){return!Bt.isUndefined(ee[$])});const i=n.metaTokens,a=n.visitor||k,u=n.dots,f=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&Bt.isSpecCompliantForm(t);if(!Bt.isFunction(a))throw new TypeError("visitor must be a function");function E(N){if(N===null)return"";if(Bt.isDate(N))return N.toISOString();if(!v&&Bt.isBlob(N))throw new Vr("Blob is not supported. Use a Buffer instead.");return Bt.isArrayBuffer(N)||Bt.isTypedArray(N)?v&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function k(N,$,ee){let W=N;if(N&&!ee&&typeof N=="object"){if(Bt.endsWith($,"{}"))$=i?$:$.slice(0,-2),N=JSON.stringify(N);else if(Bt.isArray(N)&&ZK(N)||(Bt.isFileList(N)||Bt.endsWith($,"[]"))&&(W=Bt.toArray(N)))return $=bL($),W.forEach(function(Y,ie){!(Bt.isUndefined(Y)||Y===null)&&t.append(f===!0?kP([$],ie,u):f===null?$:$+"[]",E(Y))}),!1}return DE(N)?!0:(t.append(kP(ee,$,u),E(N)),!1)}const D=[],R=Object.assign(XK,{defaultVisitor:k,convertValue:E,isVisitable:DE});function j(N,$){if(!Bt.isUndefined(N)){if(D.indexOf(N)!==-1)throw Error("Circular reference detected in "+$.join("."));D.push(N),Bt.forEach(N,function(W,K){(!(Bt.isUndefined(W)||W===null)&&a.call(t,W,Bt.isString(K)?K.trim():K,$,R))===!0&&j(W,$?$.concat(K):[K])}),D.pop()}}if(!Bt.isObject(e))throw new TypeError("data must be an object");return j(e),t}function PP(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function a7(e,t){this._pairs=[],e&&ib(e,this,t)}const wL=a7.prototype;wL.append=function(t,n){this._pairs.push([t,n])};wL.toString=function(t){const n=t?function(i){return t.call(this,i,PP)}:PP;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function KK(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function EL(e,t,n){if(!t)return e;const i=n&&n.encode||KK,a=n&&n.serialize;let u;if(a?u=a(t,n):u=Bt.isURLSearchParams(t)?t.toString():new a7(t,n).toString(i),u){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class YK{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Bt.forEach(this.handlers,function(i){i!==null&&t(i)})}}const IP=YK,SL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JK=typeof URLSearchParams<"u"?URLSearchParams:a7,QK=typeof FormData<"u"?FormData:null,eY=typeof Blob<"u"?Blob:null,tY=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),nY=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Wc={isBrowser:!0,classes:{URLSearchParams:JK,FormData:QK,Blob:eY},isStandardBrowserEnv:tY,isStandardBrowserWebWorkerEnv:nY,protocols:["http","https","file","blob","url","data"]};function rY(e,t){return ib(e,new Wc.classes.URLSearchParams,Object.assign({visitor:function(n,i,a,u){return Wc.isNode&&Bt.isBuffer(n)?(this.append(i,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function iY(e){return Bt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function oY(e){const t={},n=Object.keys(e);let i;const a=n.length;let u;for(i=0;i<a;i++)u=n[i],t[u]=e[u];return t}function TL(e){function t(n,i,a,u){let f=n[u++];const o=Number.isFinite(+f),v=u>=n.length;return f=!f&&Bt.isArray(a)?a.length:f,v?(Bt.hasOwnProp(a,f)?a[f]=[a[f],i]:a[f]=i,!o):((!a[f]||!Bt.isObject(a[f]))&&(a[f]=[]),t(n,i,a[f],u)&&Bt.isArray(a[f])&&(a[f]=oY(a[f])),!o)}if(Bt.isFormData(e)&&Bt.isFunction(e.entries)){const n={};return Bt.forEachEntry(e,(i,a)=>{t(iY(i),a,n,0)}),n}return null}const aY={"Content-Type":void 0};function sY(e,t,n){if(Bt.isString(e))try{return(t||JSON.parse)(e),Bt.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const ob={transitional:SL,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,u=Bt.isObject(t);if(u&&Bt.isHTMLForm(t)&&(t=new FormData(t)),Bt.isFormData(t))return a&&a?JSON.stringify(TL(t)):t;if(Bt.isArrayBuffer(t)||Bt.isBuffer(t)||Bt.isStream(t)||Bt.isFile(t)||Bt.isBlob(t))return t;if(Bt.isArrayBufferView(t))return t.buffer;if(Bt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(u){if(i.indexOf("application/x-www-form-urlencoded")>-1)return rY(t,this.formSerializer).toString();if((o=Bt.isFileList(t))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return ib(o?{"files[]":t}:t,v&&new v,this.formSerializer)}}return u||a?(n.setContentType("application/json",!1),sY(t)):t}],transformResponse:[function(t){const n=this.transitional||ob.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(t&&Bt.isString(t)&&(i&&!this.responseType||a)){const f=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(o){if(f)throw o.name==="SyntaxError"?Vr.from(o,Vr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wc.classes.FormData,Blob:Wc.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Bt.forEach(["delete","get","head"],function(t){ob.headers[t]={}});Bt.forEach(["post","put","patch"],function(t){ob.headers[t]=Bt.merge(aY)});const s7=ob,lY=Bt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cY=e=>{const t={};let n,i,a;return e&&e.split(`
`).forEach(function(f){a=f.indexOf(":"),n=f.substring(0,a).trim().toLowerCase(),i=f.substring(a+1).trim(),!(!n||t[n]&&lY[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},AP=Symbol("internals");function Cg(e){return e&&String(e).trim().toLowerCase()}function Yv(e){return e===!1||e==null?e:Bt.isArray(e)?e.map(Yv):String(e)}function uY(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const dY=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function A4(e,t,n,i,a){if(Bt.isFunction(i))return i.call(this,t,n);if(a&&(t=n),!!Bt.isString(t)){if(Bt.isString(i))return t.indexOf(i)!==-1;if(Bt.isRegExp(i))return i.test(t)}}function hY(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function pY(e,t){const n=Bt.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(a,u,f){return this[i].call(this,t,a,u,f)},configurable:!0})})}class ab{constructor(t){t&&this.set(t)}set(t,n,i){const a=this;function u(o,v,E){const k=Cg(v);if(!k)throw new Error("header name must be a non-empty string");const D=Bt.findKey(a,k);(!D||a[D]===void 0||E===!0||E===void 0&&a[D]!==!1)&&(a[D||v]=Yv(o))}const f=(o,v)=>Bt.forEach(o,(E,k)=>u(E,k,v));return Bt.isPlainObject(t)||t instanceof this.constructor?f(t,n):Bt.isString(t)&&(t=t.trim())&&!dY(t)?f(cY(t),n):t!=null&&u(n,t,i),this}get(t,n){if(t=Cg(t),t){const i=Bt.findKey(this,t);if(i){const a=this[i];if(!n)return a;if(n===!0)return uY(a);if(Bt.isFunction(n))return n.call(this,a,i);if(Bt.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Cg(t),t){const i=Bt.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||A4(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let a=!1;function u(f){if(f=Cg(f),f){const o=Bt.findKey(i,f);o&&(!n||A4(i,i[o],o,n))&&(delete i[o],a=!0)}}return Bt.isArray(t)?t.forEach(u):u(t),a}clear(t){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const u=n[i];(!t||A4(this,this[u],u,t,!0))&&(delete this[u],a=!0)}return a}normalize(t){const n=this,i={};return Bt.forEach(this,(a,u)=>{const f=Bt.findKey(i,u);if(f){n[f]=Yv(a),delete n[u];return}const o=t?hY(u):String(u).trim();o!==u&&delete n[u],n[o]=Yv(a),i[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Bt.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=t&&Bt.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[AP]=this[AP]={accessors:{}}).accessors,a=this.prototype;function u(f){const o=Cg(f);i[o]||(pY(a,f),i[o]=!0)}return Bt.isArray(t)?t.forEach(u):u(t),this}}ab.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Bt.freezeMethods(ab.prototype);Bt.freezeMethods(ab);const Nu=ab;function M4(e,t){const n=this||s7,i=t||n,a=Nu.from(i.headers);let u=i.data;return Bt.forEach(e,function(o){u=o.call(n,u,a.normalize(),t?t.status:void 0)}),a.normalize(),u}function CL(e){return!!(e&&e.__CANCEL__)}function P_(e,t,n){Vr.call(this,e??"canceled",Vr.ERR_CANCELED,t,n),this.name="CanceledError"}Bt.inherits(P_,Vr,{__CANCEL__:!0});function fY(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new Vr("Request failed with status code "+n.status,[Vr.ERR_BAD_REQUEST,Vr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const mY=Wc.isStandardBrowserEnv?function(){return{write:function(n,i,a,u,f,o){const v=[];v.push(n+"="+encodeURIComponent(i)),Bt.isNumber(a)&&v.push("expires="+new Date(a).toGMTString()),Bt.isString(u)&&v.push("path="+u),Bt.isString(f)&&v.push("domain="+f),o===!0&&v.push("secure"),document.cookie=v.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function gY(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _Y(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function kL(e,t){return e&&!gY(t)?_Y(e,t):t}const yY=Wc.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function a(u){let f=u;return t&&(n.setAttribute("href",f),f=n.href),n.setAttribute("href",f),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(f){const o=Bt.isString(f)?a(f):f;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}();function vY(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function xY(e,t){e=e||10;const n=new Array(e),i=new Array(e);let a=0,u=0,f;return t=t!==void 0?t:1e3,function(v){const E=Date.now(),k=i[u];f||(f=E),n[a]=v,i[a]=E;let D=u,R=0;for(;D!==a;)R+=n[D++],D=D%e;if(a=(a+1)%e,a===u&&(u=(u+1)%e),E-f<t)return;const j=k&&E-k;return j?Math.round(R*1e3/j):void 0}}function MP(e,t){let n=0;const i=xY(50,250);return a=>{const u=a.loaded,f=a.lengthComputable?a.total:void 0,o=u-n,v=i(o),E=u<=f;n=u;const k={loaded:u,total:f,progress:f?u/f:void 0,bytes:o,rate:v||void 0,estimated:v&&f&&E?(f-u)/v:void 0,event:a};k[t?"download":"upload"]=!0,e(k)}}const bY=typeof XMLHttpRequest<"u",wY=bY&&function(e){return new Promise(function(n,i){let a=e.data;const u=Nu.from(e.headers).normalize(),f=e.responseType;let o;function v(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}Bt.isFormData(a)&&(Wc.isStandardBrowserEnv||Wc.isStandardBrowserWebWorkerEnv?u.setContentType(!1):u.setContentType("multipart/form-data;",!1));let E=new XMLHttpRequest;if(e.auth){const j=e.auth.username||"",N=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.set("Authorization","Basic "+btoa(j+":"+N))}const k=kL(e.baseURL,e.url);E.open(e.method.toUpperCase(),EL(k,e.params,e.paramsSerializer),!0),E.timeout=e.timeout;function D(){if(!E)return;const j=Nu.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),$={data:!f||f==="text"||f==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:j,config:e,request:E};fY(function(W){n(W),v()},function(W){i(W),v()},$),E=null}if("onloadend"in E?E.onloadend=D:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(D)},E.onabort=function(){E&&(i(new Vr("Request aborted",Vr.ECONNABORTED,e,E)),E=null)},E.onerror=function(){i(new Vr("Network Error",Vr.ERR_NETWORK,e,E)),E=null},E.ontimeout=function(){let N=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const $=e.transitional||SL;e.timeoutErrorMessage&&(N=e.timeoutErrorMessage),i(new Vr(N,$.clarifyTimeoutError?Vr.ETIMEDOUT:Vr.ECONNABORTED,e,E)),E=null},Wc.isStandardBrowserEnv){const j=(e.withCredentials||yY(k))&&e.xsrfCookieName&&mY.read(e.xsrfCookieName);j&&u.set(e.xsrfHeaderName,j)}a===void 0&&u.setContentType(null),"setRequestHeader"in E&&Bt.forEach(u.toJSON(),function(N,$){E.setRequestHeader($,N)}),Bt.isUndefined(e.withCredentials)||(E.withCredentials=!!e.withCredentials),f&&f!=="json"&&(E.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&E.addEventListener("progress",MP(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",MP(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=j=>{E&&(i(!j||j.type?new P_(null,e,E):j),E.abort(),E=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const R=vY(k);if(R&&Wc.protocols.indexOf(R)===-1){i(new Vr("Unsupported protocol "+R+":",Vr.ERR_BAD_REQUEST,e));return}E.send(a||null)})},Jv={http:GK,xhr:wY};Bt.forEach(Jv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const EY={getAdapter:e=>{e=Bt.isArray(e)?e:[e];const{length:t}=e;let n,i;for(let a=0;a<t&&(n=e[a],!(i=Bt.isString(n)?Jv[n.toLowerCase()]:n));a++);if(!i)throw i===!1?new Vr(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Bt.hasOwnProp(Jv,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!Bt.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:Jv};function D4(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new P_(null,e)}function DP(e){return D4(e),e.headers=Nu.from(e.headers),e.data=M4.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),EY.getAdapter(e.adapter||s7.adapter)(e).then(function(i){return D4(e),i.data=M4.call(e,e.transformResponse,i),i.headers=Nu.from(i.headers),i},function(i){return CL(i)||(D4(e),i&&i.response&&(i.response.data=M4.call(e,e.transformResponse,i.response),i.response.headers=Nu.from(i.response.headers))),Promise.reject(i)})}const OP=e=>e instanceof Nu?e.toJSON():e;function I1(e,t){t=t||{};const n={};function i(E,k,D){return Bt.isPlainObject(E)&&Bt.isPlainObject(k)?Bt.merge.call({caseless:D},E,k):Bt.isPlainObject(k)?Bt.merge({},k):Bt.isArray(k)?k.slice():k}function a(E,k,D){if(Bt.isUndefined(k)){if(!Bt.isUndefined(E))return i(void 0,E,D)}else return i(E,k,D)}function u(E,k){if(!Bt.isUndefined(k))return i(void 0,k)}function f(E,k){if(Bt.isUndefined(k)){if(!Bt.isUndefined(E))return i(void 0,E)}else return i(void 0,k)}function o(E,k,D){if(D in t)return i(E,k);if(D in e)return i(void 0,E)}const v={url:u,method:u,data:u,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:o,headers:(E,k)=>a(OP(E),OP(k),!0)};return Bt.forEach(Object.keys(Object.assign({},e,t)),function(k){const D=v[k]||a,R=D(e[k],t[k],k);Bt.isUndefined(R)&&D!==o||(n[k]=R)}),n}const PL="1.4.0",l7={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{l7[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const RP={};l7.transitional=function(t,n,i){function a(u,f){return"[Axios v"+PL+"] Transitional option '"+u+"'"+f+(i?". "+i:"")}return(u,f,o)=>{if(t===!1)throw new Vr(a(f," has been removed"+(n?" in "+n:"")),Vr.ERR_DEPRECATED);return n&&!RP[f]&&(RP[f]=!0,console.warn(a(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(u,f,o):!0}};function SY(e,t,n){if(typeof e!="object")throw new Vr("options must be an object",Vr.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let a=i.length;for(;a-- >0;){const u=i[a],f=t[u];if(f){const o=e[u],v=o===void 0||f(o,u,e);if(v!==!0)throw new Vr("option "+u+" must be "+v,Vr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Vr("Unknown option "+u,Vr.ERR_BAD_OPTION)}}const OE={assertOptions:SY,validators:l7},Cd=OE.validators;class Z2{constructor(t){this.defaults=t,this.interceptors={request:new IP,response:new IP}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=I1(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:u}=n;i!==void 0&&OE.assertOptions(i,{silentJSONParsing:Cd.transitional(Cd.boolean),forcedJSONParsing:Cd.transitional(Cd.boolean),clarifyTimeoutError:Cd.transitional(Cd.boolean)},!1),a!=null&&(Bt.isFunction(a)?n.paramsSerializer={serialize:a}:OE.assertOptions(a,{encode:Cd.function,serialize:Cd.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f;f=u&&Bt.merge(u.common,u[n.method]),f&&Bt.forEach(["delete","get","head","post","put","patch","common"],N=>{delete u[N]}),n.headers=Nu.concat(f,u);const o=[];let v=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(n)===!1||(v=v&&$.synchronous,o.unshift($.fulfilled,$.rejected))});const E=[];this.interceptors.response.forEach(function($){E.push($.fulfilled,$.rejected)});let k,D=0,R;if(!v){const N=[DP.bind(this),void 0];for(N.unshift.apply(N,o),N.push.apply(N,E),R=N.length,k=Promise.resolve(n);D<R;)k=k.then(N[D++],N[D++]);return k}R=o.length;let j=n;for(D=0;D<R;){const N=o[D++],$=o[D++];try{j=N(j)}catch(ee){$.call(this,ee);break}}try{k=DP.call(this,j)}catch(N){return Promise.reject(N)}for(D=0,R=E.length;D<R;)k=k.then(E[D++],E[D++]);return k}getUri(t){t=I1(this.defaults,t);const n=kL(t.baseURL,t.url);return EL(n,t.params,t.paramsSerializer)}}Bt.forEach(["delete","get","head","options"],function(t){Z2.prototype[t]=function(n,i){return this.request(I1(i||{},{method:t,url:n,data:(i||{}).data}))}});Bt.forEach(["post","put","patch"],function(t){function n(i){return function(u,f,o){return this.request(I1(o||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:u,data:f}))}}Z2.prototype[t]=n(),Z2.prototype[t+"Form"]=n(!0)});const Qv=Z2;class c7{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(u){n=u});const i=this;this.promise.then(a=>{if(!i._listeners)return;let u=i._listeners.length;for(;u-- >0;)i._listeners[u](a);i._listeners=null}),this.promise.then=a=>{let u;const f=new Promise(o=>{i.subscribe(o),u=o}).then(a);return f.cancel=function(){i.unsubscribe(u)},f},t(function(u,f,o){i.reason||(i.reason=new P_(u,f,o),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new c7(function(a){t=a}),cancel:t}}}const TY=c7;function CY(e){return function(n){return e.apply(null,n)}}function kY(e){return Bt.isObject(e)&&e.isAxiosError===!0}const RE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(RE).forEach(([e,t])=>{RE[t]=e});const PY=RE;function IL(e){const t=new Qv(e),n=dL(Qv.prototype.request,t);return Bt.extend(n,Qv.prototype,t,{allOwnKeys:!0}),Bt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return IL(I1(e,a))},n}const Uo=IL(s7);Uo.Axios=Qv;Uo.CanceledError=P_;Uo.CancelToken=TY;Uo.isCancel=CL;Uo.VERSION=PL;Uo.toFormData=ib;Uo.AxiosError=Vr;Uo.Cancel=Uo.CanceledError;Uo.all=function(t){return Promise.all(t)};Uo.spread=CY;Uo.isAxiosError=kY;Uo.mergeConfig=I1;Uo.AxiosHeaders=Nu;Uo.formToJSON=e=>TL(Bt.isHTMLForm(e)?new FormData(e):e);Uo.HttpStatusCode=PY;Uo.default=Uo;const I_=Uo;function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_e.apply(this,arguments)}function rp(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function AL(e){if(!rp(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=AL(e[n])}),t}function gs(e,t,n={clone:!0}){const i=n.clone?_e({},e):e;return rp(e)&&rp(t)&&Object.keys(t).forEach(a=>{a!=="__proto__"&&(rp(t[a])&&a in e&&rp(e[a])?i[a]=gs(e[a],t[a],n):n.clone?i[a]=rp(t[a])?AL(t[a]):t[a]:i[a]=t[a])}),i}function ah(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function In(e){if(typeof e!="string")throw new Error(ah(7));return e.charAt(0).toUpperCase()+e.slice(1)}function LE(...e){return e.reduce((t,n)=>n==null?t:function(...a){t.apply(this,a),n.apply(this,a)},()=>{})}function u7(e,t=166){let n;function i(...a){const u=()=>{e.apply(this,a)};clearTimeout(n),n=setTimeout(u,t)}return i.clear=()=>{clearTimeout(n)},i}function IY(e,t){return()=>null}function e2(e,t){return q.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function Mo(e){return e&&e.ownerDocument||document}function sh(e){return Mo(e).defaultView||window}function AY(e,t){return()=>null}function Z0(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const MY=typeof window<"u"?q.useLayoutEffect:q.useEffect,Qc=MY;let LP=0;function DY(e){const[t,n]=q.useState(e),i=e||t;return q.useEffect(()=>{t==null&&(LP+=1,n(`mui-${LP}`))},[t]),i}const zP=h2["useId".toString()];function d7(e){if(zP!==void 0){const t=zP();return e??t}return DY(e)}function OY(e,t,n,i,a){return null}function hp({controlled:e,default:t,name:n,state:i="value"}){const{current:a}=q.useRef(e!==void 0),[u,f]=q.useState(t),o=a?e:u,v=q.useCallback(E=>{a||f(E)},[]);return[o,v]}function hs(e){const t=q.useRef(e);return Qc(()=>{t.current=e}),q.useCallback((...n)=>(0,t.current)(...n),[])}function wo(...e){return q.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{Z0(n,t)})},e)}let sb=!0,zE=!1,FP;const RY={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function LY(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&RY[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function zY(e){e.metaKey||e.altKey||e.ctrlKey||(sb=!0)}function O4(){sb=!1}function FY(){this.visibilityState==="hidden"&&zE&&(sb=!0)}function NY(e){e.addEventListener("keydown",zY,!0),e.addEventListener("mousedown",O4,!0),e.addEventListener("pointerdown",O4,!0),e.addEventListener("touchstart",O4,!0),e.addEventListener("visibilitychange",FY,!0)}function BY(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return sb||LY(t)}function h7(){const e=q.useCallback(a=>{a!=null&&NY(a.ownerDocument)},[]),t=q.useRef(!1);function n(){return t.current?(zE=!0,window.clearTimeout(FP),FP=window.setTimeout(()=>{zE=!1},100),t.current=!1,!0):!1}function i(a){return BY(a)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:i,onBlur:n,ref:e}}function ML(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const jY=e=>{const t=q.useRef({});return q.useEffect(()=>{t.current=e}),t.current},$Y=jY,UY={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},VY=UY;function p7(e,t){const n=_e({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]=_e({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const a=e[i]||{},u=t[i];n[i]={},!u||!Object.keys(u)?n[i]=a:!a||!Object.keys(a)?n[i]=u:(n[i]=_e({},u),Object.keys(a).forEach(f=>{n[i][f]=p7(a[f],u[f])}))}else n[i]===void 0&&(n[i]=e[i])}),n}function Pi(e,t,n=void 0){const i={};return Object.keys(e).forEach(a=>{i[a]=e[a].reduce((u,f)=>{if(f){const o=t(f);o!==""&&u.push(o),n&&n[f]&&u.push(n[f])}return u},[]).join(" ")}),i}const NP=e=>e,WY=()=>{let e=NP;return{configure(t){e=t},generate(t){return e(t)},reset(){e=NP}}},HY=WY(),DL=HY,qY={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function vi(e,t,n="Mui"){const i=qY[t];return i?`${n}-${i}`:`${DL.generate(e)}-${t}`}function Ii(e,t,n="Mui"){const i={};return t.forEach(a=>{i[a]=vi(e,a,n)}),i}function OL(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var GY=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ZY=OL(function(e){return GY.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function XY(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function KY(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var YY=function(){function e(n){var i=this;this._insertTag=function(a){var u;i.tags.length===0?i.insertionPoint?u=i.insertionPoint.nextSibling:i.prepend?u=i.container.firstChild:u=i.before:u=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(a,u),i.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(KY(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var u=XY(a);try{u.insertRule(i,u.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),Ma="-ms-",X2="-moz-",li="-webkit-",RL="comm",f7="rule",m7="decl",JY="@import",LL="@keyframes",QY="@layer",eJ=Math.abs,lb=String.fromCharCode,tJ=Object.assign;function nJ(e,t){return ua(e,0)^45?(((t<<2^ua(e,0))<<2^ua(e,1))<<2^ua(e,2))<<2^ua(e,3):0}function zL(e){return e.trim()}function rJ(e,t){return(e=t.exec(e))?e[0]:e}function ci(e,t,n){return e.replace(t,n)}function FE(e,t){return e.indexOf(t)}function ua(e,t){return e.charCodeAt(t)|0}function X0(e,t,n){return e.slice(t,n)}function Bc(e){return e.length}function g7(e){return e.length}function xv(e,t){return t.push(e),e}function iJ(e,t){return e.map(t).join("")}var cb=1,A1=1,FL=0,xs=0,Io=0,am="";function ub(e,t,n,i,a,u,f){return{value:e,root:t,parent:n,type:i,props:a,children:u,line:cb,column:A1,length:f,return:""}}function kg(e,t){return tJ(ub("",null,null,"",null,null,0),e,{length:-e.length},t)}function oJ(){return Io}function aJ(){return Io=xs>0?ua(am,--xs):0,A1--,Io===10&&(A1=1,cb--),Io}function Vs(){return Io=xs<FL?ua(am,xs++):0,A1++,Io===10&&(A1=1,cb++),Io}function Xc(){return ua(am,xs)}function t2(){return xs}function A_(e,t){return X0(am,e,t)}function K0(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NL(e){return cb=A1=1,FL=Bc(am=e),xs=0,[]}function BL(e){return am="",e}function n2(e){return zL(A_(xs-1,NE(e===91?e+2:e===40?e+1:e)))}function sJ(e){for(;(Io=Xc())&&Io<33;)Vs();return K0(e)>2||K0(Io)>3?"":" "}function lJ(e,t){for(;--t&&Vs()&&!(Io<48||Io>102||Io>57&&Io<65||Io>70&&Io<97););return A_(e,t2()+(t<6&&Xc()==32&&Vs()==32))}function NE(e){for(;Vs();)switch(Io){case e:return xs;case 34:case 39:e!==34&&e!==39&&NE(Io);break;case 40:e===41&&NE(e);break;case 92:Vs();break}return xs}function cJ(e,t){for(;Vs()&&e+Io!==47+10;)if(e+Io===42+42&&Xc()===47)break;return"/*"+A_(t,xs-1)+"*"+lb(e===47?e:Vs())}function uJ(e){for(;!K0(Xc());)Vs();return A_(e,xs)}function dJ(e){return BL(r2("",null,null,null,[""],e=NL(e),0,[0],e))}function r2(e,t,n,i,a,u,f,o,v){for(var E=0,k=0,D=f,R=0,j=0,N=0,$=1,ee=1,W=1,K=0,Y="",ie=a,ue=u,de=i,M=Y;ee;)switch(N=K,K=Vs()){case 40:if(N!=108&&ua(M,D-1)==58){FE(M+=ci(n2(K),"&","&\f"),"&\f")!=-1&&(W=-1);break}case 34:case 39:case 91:M+=n2(K);break;case 9:case 10:case 13:case 32:M+=sJ(N);break;case 92:M+=lJ(t2()-1,7);continue;case 47:switch(Xc()){case 42:case 47:xv(hJ(cJ(Vs(),t2()),t,n),v);break;default:M+="/"}break;case 123*$:o[E++]=Bc(M)*W;case 125*$:case 59:case 0:switch(K){case 0:case 125:ee=0;case 59+k:W==-1&&(M=ci(M,/\f/g,"")),j>0&&Bc(M)-D&&xv(j>32?jP(M+";",i,n,D-1):jP(ci(M," ","")+";",i,n,D-2),v);break;case 59:M+=";";default:if(xv(de=BP(M,t,n,E,k,a,o,Y,ie=[],ue=[],D),u),K===123)if(k===0)r2(M,t,de,de,ie,u,D,o,ue);else switch(R===99&&ua(M,3)===110?100:R){case 100:case 108:case 109:case 115:r2(e,de,de,i&&xv(BP(e,de,de,0,0,a,o,Y,a,ie=[],D),ue),a,ue,D,o,i?ie:ue);break;default:r2(M,de,de,de,[""],ue,0,o,ue)}}E=k=j=0,$=W=1,Y=M="",D=f;break;case 58:D=1+Bc(M),j=N;default:if($<1){if(K==123)--$;else if(K==125&&$++==0&&aJ()==125)continue}switch(M+=lb(K),K*$){case 38:W=k>0?1:(M+="\f",-1);break;case 44:o[E++]=(Bc(M)-1)*W,W=1;break;case 64:Xc()===45&&(M+=n2(Vs())),R=Xc(),k=D=Bc(Y=M+=uJ(t2())),K++;break;case 45:N===45&&Bc(M)==2&&($=0)}}return u}function BP(e,t,n,i,a,u,f,o,v,E,k){for(var D=a-1,R=a===0?u:[""],j=g7(R),N=0,$=0,ee=0;N<i;++N)for(var W=0,K=X0(e,D+1,D=eJ($=f[N])),Y=e;W<j;++W)(Y=zL($>0?R[W]+" "+K:ci(K,/&\f/g,R[W])))&&(v[ee++]=Y);return ub(e,t,n,a===0?f7:o,v,E,k)}function hJ(e,t,n){return ub(e,t,n,RL,lb(oJ()),X0(e,2,-2),0)}function jP(e,t,n,i){return ub(e,t,n,m7,X0(e,0,i),X0(e,i+1,-1),i)}function m1(e,t){for(var n="",i=g7(e),a=0;a<i;a++)n+=t(e[a],a,e,t)||"";return n}function pJ(e,t,n,i){switch(e.type){case QY:if(e.children.length)break;case JY:case m7:return e.return=e.return||e.value;case RL:return"";case LL:return e.return=e.value+"{"+m1(e.children,i)+"}";case f7:e.value=e.props.join(",")}return Bc(n=m1(e.children,i))?e.return=e.value+"{"+n+"}":""}function fJ(e){var t=g7(e);return function(n,i,a,u){for(var f="",o=0;o<t;o++)f+=e[o](n,i,a,u)||"";return f}}function mJ(e){return function(t){t.root||(t=t.return)&&e(t)}}var gJ=function(t,n,i){for(var a=0,u=0;a=u,u=Xc(),a===38&&u===12&&(n[i]=1),!K0(u);)Vs();return A_(t,xs)},_J=function(t,n){var i=-1,a=44;do switch(K0(a)){case 0:a===38&&Xc()===12&&(n[i]=1),t[i]+=gJ(xs-1,n,i);break;case 2:t[i]+=n2(a);break;case 4:if(a===44){t[++i]=Xc()===58?"&\f":"",n[i]=t[i].length;break}default:t[i]+=lb(a)}while(a=Vs());return t},yJ=function(t,n){return BL(_J(NL(t),n))},$P=new WeakMap,vJ=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,i=t.parent,a=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!$P.get(i))&&!a){$P.set(t,!0);for(var u=[],f=yJ(n,u),o=i.props,v=0,E=0;v<f.length;v++)for(var k=0;k<o.length;k++,E++)t.props[E]=u[v]?f[v].replace(/&\f/g,o[k]):o[k]+" "+f[v]}}},xJ=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function jL(e,t){switch(nJ(e,t)){case 5103:return li+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return li+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return li+e+X2+e+Ma+e+e;case 6828:case 4268:return li+e+Ma+e+e;case 6165:return li+e+Ma+"flex-"+e+e;case 5187:return li+e+ci(e,/(\w+).+(:[^]+)/,li+"box-$1$2"+Ma+"flex-$1$2")+e;case 5443:return li+e+Ma+"flex-item-"+ci(e,/flex-|-self/,"")+e;case 4675:return li+e+Ma+"flex-line-pack"+ci(e,/align-content|flex-|-self/,"")+e;case 5548:return li+e+Ma+ci(e,"shrink","negative")+e;case 5292:return li+e+Ma+ci(e,"basis","preferred-size")+e;case 6060:return li+"box-"+ci(e,"-grow","")+li+e+Ma+ci(e,"grow","positive")+e;case 4554:return li+ci(e,/([^-])(transform)/g,"$1"+li+"$2")+e;case 6187:return ci(ci(ci(e,/(zoom-|grab)/,li+"$1"),/(image-set)/,li+"$1"),e,"")+e;case 5495:case 3959:return ci(e,/(image-set\([^]*)/,li+"$1$`$1");case 4968:return ci(ci(e,/(.+:)(flex-)?(.*)/,li+"box-pack:$3"+Ma+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+li+e+e;case 4095:case 3583:case 4068:case 2532:return ci(e,/(.+)-inline(.+)/,li+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bc(e)-1-t>6)switch(ua(e,t+1)){case 109:if(ua(e,t+4)!==45)break;case 102:return ci(e,/(.+:)(.+)-([^]+)/,"$1"+li+"$2-$3$1"+X2+(ua(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~FE(e,"stretch")?jL(ci(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ua(e,t+1)!==115)break;case 6444:switch(ua(e,Bc(e)-3-(~FE(e,"!important")&&10))){case 107:return ci(e,":",":"+li)+e;case 101:return ci(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+li+(ua(e,14)===45?"inline-":"")+"box$3$1"+li+"$2$3$1"+Ma+"$2box$3")+e}break;case 5936:switch(ua(e,t+11)){case 114:return li+e+Ma+ci(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return li+e+Ma+ci(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return li+e+Ma+ci(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return li+e+Ma+e+e}return e}var bJ=function(t,n,i,a){if(t.length>-1&&!t.return)switch(t.type){case m7:t.return=jL(t.value,t.length);break;case LL:return m1([kg(t,{value:ci(t.value,"@","@"+li)})],a);case f7:if(t.length)return iJ(t.props,function(u){switch(rJ(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return m1([kg(t,{props:[ci(u,/:(read-\w+)/,":"+X2+"$1")]})],a);case"::placeholder":return m1([kg(t,{props:[ci(u,/:(plac\w+)/,":"+li+"input-$1")]}),kg(t,{props:[ci(u,/:(plac\w+)/,":"+X2+"$1")]}),kg(t,{props:[ci(u,/:(plac\w+)/,Ma+"input-$1")]})],a)}return""})}},wJ=[bJ],EJ=function(t){var n=t.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function($){var ee=$.getAttribute("data-emotion");ee.indexOf(" ")!==-1&&(document.head.appendChild($),$.setAttribute("data-s",""))})}var a=t.stylisPlugins||wJ,u={},f,o=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function($){for(var ee=$.getAttribute("data-emotion").split(" "),W=1;W<ee.length;W++)u[ee[W]]=!0;o.push($)});var v,E=[vJ,xJ];{var k,D=[pJ,mJ(function($){k.insert($)})],R=fJ(E.concat(a,D)),j=function(ee){return m1(dJ(ee),R)};v=function(ee,W,K,Y){k=K,j(ee?ee+"{"+W.styles+"}":W.styles),Y&&(N.inserted[W.name]=!0)}}var N={key:n,sheet:new YY({key:n,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:v};return N.sheet.hydrate(o),N},$L={exports:{}},gi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=typeof Symbol=="function"&&Symbol.for,_7=na?Symbol.for("react.element"):60103,y7=na?Symbol.for("react.portal"):60106,db=na?Symbol.for("react.fragment"):60107,hb=na?Symbol.for("react.strict_mode"):60108,pb=na?Symbol.for("react.profiler"):60114,fb=na?Symbol.for("react.provider"):60109,mb=na?Symbol.for("react.context"):60110,v7=na?Symbol.for("react.async_mode"):60111,gb=na?Symbol.for("react.concurrent_mode"):60111,_b=na?Symbol.for("react.forward_ref"):60112,yb=na?Symbol.for("react.suspense"):60113,SJ=na?Symbol.for("react.suspense_list"):60120,vb=na?Symbol.for("react.memo"):60115,xb=na?Symbol.for("react.lazy"):60116,TJ=na?Symbol.for("react.block"):60121,CJ=na?Symbol.for("react.fundamental"):60117,kJ=na?Symbol.for("react.responder"):60118,PJ=na?Symbol.for("react.scope"):60119;function Xs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case _7:switch(e=e.type,e){case v7:case gb:case db:case pb:case hb:case yb:return e;default:switch(e=e&&e.$$typeof,e){case mb:case _b:case xb:case vb:case fb:return e;default:return t}}case y7:return t}}}function UL(e){return Xs(e)===gb}gi.AsyncMode=v7;gi.ConcurrentMode=gb;gi.ContextConsumer=mb;gi.ContextProvider=fb;gi.Element=_7;gi.ForwardRef=_b;gi.Fragment=db;gi.Lazy=xb;gi.Memo=vb;gi.Portal=y7;gi.Profiler=pb;gi.StrictMode=hb;gi.Suspense=yb;gi.isAsyncMode=function(e){return UL(e)||Xs(e)===v7};gi.isConcurrentMode=UL;gi.isContextConsumer=function(e){return Xs(e)===mb};gi.isContextProvider=function(e){return Xs(e)===fb};gi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===_7};gi.isForwardRef=function(e){return Xs(e)===_b};gi.isFragment=function(e){return Xs(e)===db};gi.isLazy=function(e){return Xs(e)===xb};gi.isMemo=function(e){return Xs(e)===vb};gi.isPortal=function(e){return Xs(e)===y7};gi.isProfiler=function(e){return Xs(e)===pb};gi.isStrictMode=function(e){return Xs(e)===hb};gi.isSuspense=function(e){return Xs(e)===yb};gi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===db||e===gb||e===pb||e===hb||e===yb||e===SJ||typeof e=="object"&&e!==null&&(e.$$typeof===xb||e.$$typeof===vb||e.$$typeof===fb||e.$$typeof===mb||e.$$typeof===_b||e.$$typeof===CJ||e.$$typeof===kJ||e.$$typeof===PJ||e.$$typeof===TJ)};gi.typeOf=Xs;$L.exports=gi;var IJ=$L.exports,VL=IJ,AJ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MJ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},WL={};WL[VL.ForwardRef]=AJ;WL[VL.Memo]=MJ;var DJ=!0;function HL(e,t,n){var i="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):i+=a+" "}),i}var x7=function(t,n,i){var a=t.key+"-"+n.name;(i===!1||DJ===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},b7=function(t,n,i){x7(t,n,i);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var u=n;do t.insert(n===u?"."+a:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function OJ(e){for(var t=0,n,i=0,a=e.length;a>=4;++i,a-=4)n=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var RJ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},LJ=/[A-Z]|^ms/g,zJ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,qL=function(t){return t.charCodeAt(1)===45},UP=function(t){return t!=null&&typeof t!="boolean"},R4=OL(function(e){return qL(e)?e:e.replace(LJ,"-$&").toLowerCase()}),VP=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(zJ,function(i,a,u){return jc={name:a,styles:u,next:jc},a})}return RJ[t]!==1&&!qL(t)&&typeof n=="number"&&n!==0?n+"px":n};function Y0(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return jc={name:n.name,styles:n.styles,next:jc},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)jc={name:i.name,styles:i.styles,next:jc},i=i.next;var a=n.styles+";";return a}return FJ(e,t,n)}case"function":{if(e!==void 0){var u=jc,f=n(e);return jc=u,Y0(e,t,f)}break}}if(t==null)return n;var o=t[n];return o!==void 0?o:n}function FJ(e,t,n){var i="";if(Array.isArray(n))for(var a=0;a<n.length;a++)i+=Y0(e,t,n[a])+";";else for(var u in n){var f=n[u];if(typeof f!="object")t!=null&&t[f]!==void 0?i+=u+"{"+t[f]+"}":UP(f)&&(i+=R4(u)+":"+VP(u,f)+";");else if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var o=0;o<f.length;o++)UP(f[o])&&(i+=R4(u)+":"+VP(u,f[o])+";");else{var v=Y0(e,t,f);switch(u){case"animation":case"animationName":{i+=R4(u)+":"+v+";";break}default:i+=u+"{"+v+"}"}}}return i}var WP=/label:\s*([^\s;\n{]+)\s*(;|$)/g,jc,bb=function(t,n,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,u="";jc=void 0;var f=t[0];f==null||f.raw===void 0?(a=!1,u+=Y0(i,n,f)):u+=f[0];for(var o=1;o<t.length;o++)u+=Y0(i,n,t[o]),a&&(u+=f[o]);WP.lastIndex=0;for(var v="",E;(E=WP.exec(u))!==null;)v+="-"+E[1];var k=OJ(u)+v;return{name:k,styles:u,next:jc}},NJ=function(t){return t()},GL=h2["useInsertionEffect"]?h2["useInsertionEffect"]:!1,ZL=GL||NJ,HP=GL||q.useLayoutEffect,w7={}.hasOwnProperty,XL=q.createContext(typeof HTMLElement<"u"?EJ({key:"css"}):null);XL.Provider;var E7=function(t){return q.forwardRef(function(n,i){var a=q.useContext(XL);return t(n,a,i)})},M_=q.createContext({}),BE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",BJ=function(t,n){var i={};for(var a in n)w7.call(n,a)&&(i[a]=n[a]);return i[BE]=t,i},jJ=function(t){var n=t.cache,i=t.serialized,a=t.isStringTag;return x7(n,i,a),ZL(function(){return b7(n,i,a)}),null},$J=E7(function(e,t,n){var i=e.css;typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var a=e[BE],u=[i],f="";typeof e.className=="string"?f=HL(t.registered,u,e.className):e.className!=null&&(f=e.className+" ");var o=bb(u,void 0,q.useContext(M_));f+=t.key+"-"+o.name;var v={};for(var E in e)w7.call(e,E)&&E!=="css"&&E!==BE&&(v[E]=e[E]);return v.ref=n,v.className=f,q.createElement(q.Fragment,null,q.createElement(jJ,{cache:t,serialized:o,isStringTag:typeof a=="string"}),q.createElement(a,v))}),UJ=$J,ur=function(t,n){var i=arguments;if(n==null||!w7.call(n,"css"))return q.createElement.apply(void 0,i);var a=i.length,u=new Array(a);u[0]=UJ,u[1]=BJ(t,n);for(var f=2;f<a;f++)u[f]=i[f];return q.createElement.apply(null,u)},VJ=E7(function(e,t){var n=e.styles,i=bb([n],void 0,q.useContext(M_)),a=q.useRef();return HP(function(){var u=t.key+"-global",f=new t.sheet.constructor({key:u,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,v=document.querySelector('style[data-emotion="'+u+" "+i.name+'"]');return t.sheet.tags.length&&(f.before=t.sheet.tags[0]),v!==null&&(o=!0,v.setAttribute("data-emotion",u),f.hydrate([v])),a.current=[f,o],function(){f.flush()}},[t]),HP(function(){var u=a.current,f=u[0],o=u[1];if(o){u[1]=!1;return}if(i.next!==void 0&&b7(t,i.next,!0),f.tags.length){var v=f.tags[f.tags.length-1].nextElementSibling;f.before=v,f.flush()}t.insert("",i,f,!1)},[t,i.name]),null});function S7(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bb(t)}var wb=function(){var t=S7.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},WJ=ZY,HJ=function(t){return t!=="theme"},qP=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?WJ:HJ},GP=function(t,n,i){var a;if(n){var u=n.shouldForwardProp;a=t.__emotion_forwardProp&&u?function(f){return t.__emotion_forwardProp(f)&&u(f)}:u}return typeof a!="function"&&i&&(a=t.__emotion_forwardProp),a},qJ=function(t){var n=t.cache,i=t.serialized,a=t.isStringTag;return x7(n,i,a),ZL(function(){return b7(n,i,a)}),null},GJ=function e(t,n){var i=t.__emotion_real===t,a=i&&t.__emotion_base||t,u,f;n!==void 0&&(u=n.label,f=n.target);var o=GP(t,n,i),v=o||qP(a),E=!v("as");return function(){var k=arguments,D=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(u!==void 0&&D.push("label:"+u+";"),k[0]==null||k[0].raw===void 0)D.push.apply(D,k);else{D.push(k[0][0]);for(var R=k.length,j=1;j<R;j++)D.push(k[j],k[0][j])}var N=E7(function($,ee,W){var K=E&&$.as||a,Y="",ie=[],ue=$;if($.theme==null){ue={};for(var de in $)ue[de]=$[de];ue.theme=q.useContext(M_)}typeof $.className=="string"?Y=HL(ee.registered,ie,$.className):$.className!=null&&(Y=$.className+" ");var M=bb(D.concat(ie),ee.registered,ue);Y+=ee.key+"-"+M.name,f!==void 0&&(Y+=" "+f);var Te=E&&o===void 0?qP(K):v,fe={};for(var Oe in $)E&&Oe==="as"||Te(Oe)&&(fe[Oe]=$[Oe]);return fe.className=Y,fe.ref=W,q.createElement(q.Fragment,null,q.createElement(qJ,{cache:ee,serialized:M,isStringTag:typeof K=="string"}),q.createElement(K,fe))});return N.displayName=u!==void 0?u:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=a,N.__emotion_styles=D,N.__emotion_forwardProp=o,Object.defineProperty(N,"toString",{value:function(){return"."+f}}),N.withComponent=function($,ee){return e($,_e({},n,ee,{shouldForwardProp:GP(N,ee,!0)})).apply(void 0,D)},N}},ZJ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],jE=GJ.bind();ZJ.forEach(function(e){jE[e]=jE(e)});function XJ(e){return e==null||Object.keys(e).length===0}function KJ(e){const{styles:t,defaultTheme:n={}}=e,i=typeof t=="function"?a=>t(XJ(a)?n:a):t;return Z.jsx(VJ,{styles:i})}/**
 * @mui/styled-engine v5.13.2
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function YJ(e,t){return jE(e,t)}const JJ=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Qn(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,u;for(u=0;u<i.length;u++)a=i[u],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}const QJ=["values","unit","step"],eQ=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,i)=>n.val-i.val),t.reduce((n,i)=>_e({},n,{[i.key]:i.val}),{})};function tQ(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=e,a=Qn(e,QJ),u=eQ(t),f=Object.keys(u);function o(R){return`@media (min-width:${typeof t[R]=="number"?t[R]:R}${n})`}function v(R){return`@media (max-width:${(typeof t[R]=="number"?t[R]:R)-i/100}${n})`}function E(R,j){const N=f.indexOf(j);return`@media (min-width:${typeof t[R]=="number"?t[R]:R}${n}) and (max-width:${(N!==-1&&typeof t[f[N]]=="number"?t[f[N]]:j)-i/100}${n})`}function k(R){return f.indexOf(R)+1<f.length?E(R,f[f.indexOf(R)+1]):o(R)}function D(R){const j=f.indexOf(R);return j===0?o(f[1]):j===f.length-1?v(f[j]):E(R,f[f.indexOf(R)+1]).replace("@media","@media not all and")}return _e({keys:f,values:u,up:o,down:v,between:E,only:k,not:D,unit:n},a)}const nQ={borderRadius:4},rQ=nQ;function r0(e,t){return t?gs(e,t,{clone:!1}):e}const T7={xs:0,sm:600,md:900,lg:1200,xl:1536},ZP={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${T7[e]}px)`};function uc(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const u=i.breakpoints||ZP;return t.reduce((f,o,v)=>(f[u.up(u.keys[v])]=n(t[v]),f),{})}if(typeof t=="object"){const u=i.breakpoints||ZP;return Object.keys(t).reduce((f,o)=>{if(Object.keys(u.values||T7).indexOf(o)!==-1){const v=u.up(o);f[v]=n(t[o],o)}else{const v=o;f[v]=t[v]}return f},{})}return n(t)}function KL(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((i,a)=>{const u=e.up(a);return i[u]={},i},{}))||{}}function YL(e,t){return e.reduce((n,i)=>{const a=n[i];return(!a||Object.keys(a).length===0)&&delete n[i],n},t)}function iQ(e,...t){const n=KL(e),i=[n,...t].reduce((a,u)=>gs(a,u),{});return YL(Object.keys(n),i)}function oQ(e,t){if(typeof e!="object")return{};const n={},i=Object.keys(t);return Array.isArray(e)?i.forEach((a,u)=>{u<e.length&&(n[a]=!0)}):i.forEach(a=>{e[a]!=null&&(n[a]=!0)}),n}function L4({values:e,breakpoints:t,base:n}){const i=n||oQ(e,t),a=Object.keys(i);if(a.length===0)return e;let u;return a.reduce((f,o,v)=>(Array.isArray(e)?(f[o]=e[v]!=null?e[v]:e[u],u=v):typeof e=="object"?(f[o]=e[o]!=null?e[o]:e[u],u=o):f[o]=e,f),{})}function Eb(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const i=`vars.${t}`.split(".").reduce((a,u)=>a&&a[u]?a[u]:null,e);if(i!=null)return i}return t.split(".").reduce((i,a)=>i&&i[a]!=null?i[a]:null,e)}function K2(e,t,n,i=n){let a;return typeof e=="function"?a=e(n):Array.isArray(e)?a=e[n]||i:a=Eb(e,n)||i,t&&(a=t(a,i,e)),a}function hi(e){const{prop:t,cssProperty:n=e.prop,themeKey:i,transform:a}=e,u=f=>{if(f[t]==null)return null;const o=f[t],v=f.theme,E=Eb(v,i)||{};return uc(f,o,D=>{let R=K2(E,a,D);return D===R&&typeof D=="string"&&(R=K2(E,a,`${t}${D==="default"?"":In(D)}`,D)),n===!1?R:{[n]:R}})};return u.propTypes={},u.filterProps=[t],u}function aQ(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const sQ={m:"margin",p:"padding"},lQ={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},XP={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},cQ=aQ(e=>{if(e.length>2)if(XP[e])e=XP[e];else return[e];const[t,n]=e.split(""),i=sQ[t],a=lQ[n]||"";return Array.isArray(a)?a.map(u=>i+u):[i+a]}),C7=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],k7=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...C7,...k7];function D_(e,t,n,i){var a;const u=(a=Eb(e,t,!1))!=null?a:n;return typeof u=="number"?f=>typeof f=="string"?f:u*f:Array.isArray(u)?f=>typeof f=="string"?f:u[f]:typeof u=="function"?u:()=>{}}function P7(e){return D_(e,"spacing",8)}function Tp(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),i=e(n);return t>=0?i:typeof i=="number"?-i:`-${i}`}function uQ(e,t){return n=>e.reduce((i,a)=>(i[a]=Tp(t,n),i),{})}function dQ(e,t,n,i){if(t.indexOf(n)===-1)return null;const a=cQ(n),u=uQ(a,i),f=e[n];return uc(e,f,u)}function JL(e,t){const n=P7(e.theme);return Object.keys(e).map(i=>dQ(e,t,i,n)).reduce(r0,{})}function co(e){return JL(e,C7)}co.propTypes={};co.filterProps=C7;function uo(e){return JL(e,k7)}uo.propTypes={};uo.filterProps=k7;function hQ(e=8){if(e.mui)return e;const t=P7({spacing:e}),n=(...i)=>(i.length===0?[1]:i).map(u=>{const f=t(u);return typeof f=="number"?`${f}px`:f}).join(" ");return n.mui=!0,n}function Sb(...e){const t=e.reduce((i,a)=>(a.filterProps.forEach(u=>{i[u]=a}),i),{}),n=i=>Object.keys(i).reduce((a,u)=>t[u]?r0(a,t[u](i)):a,{});return n.propTypes={},n.filterProps=e.reduce((i,a)=>i.concat(a.filterProps),[]),n}function Uc(e){return typeof e!="number"?e:`${e}px solid`}const pQ=hi({prop:"border",themeKey:"borders",transform:Uc}),fQ=hi({prop:"borderTop",themeKey:"borders",transform:Uc}),mQ=hi({prop:"borderRight",themeKey:"borders",transform:Uc}),gQ=hi({prop:"borderBottom",themeKey:"borders",transform:Uc}),_Q=hi({prop:"borderLeft",themeKey:"borders",transform:Uc}),yQ=hi({prop:"borderColor",themeKey:"palette"}),vQ=hi({prop:"borderTopColor",themeKey:"palette"}),xQ=hi({prop:"borderRightColor",themeKey:"palette"}),bQ=hi({prop:"borderBottomColor",themeKey:"palette"}),wQ=hi({prop:"borderLeftColor",themeKey:"palette"}),Tb=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=D_(e.theme,"shape.borderRadius",4),n=i=>({borderRadius:Tp(t,i)});return uc(e,e.borderRadius,n)}return null};Tb.propTypes={};Tb.filterProps=["borderRadius"];Sb(pQ,fQ,mQ,gQ,_Q,yQ,vQ,xQ,bQ,wQ,Tb);const Cb=e=>{if(e.gap!==void 0&&e.gap!==null){const t=D_(e.theme,"spacing",8),n=i=>({gap:Tp(t,i)});return uc(e,e.gap,n)}return null};Cb.propTypes={};Cb.filterProps=["gap"];const kb=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=D_(e.theme,"spacing",8),n=i=>({columnGap:Tp(t,i)});return uc(e,e.columnGap,n)}return null};kb.propTypes={};kb.filterProps=["columnGap"];const Pb=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=D_(e.theme,"spacing",8),n=i=>({rowGap:Tp(t,i)});return uc(e,e.rowGap,n)}return null};Pb.propTypes={};Pb.filterProps=["rowGap"];const EQ=hi({prop:"gridColumn"}),SQ=hi({prop:"gridRow"}),TQ=hi({prop:"gridAutoFlow"}),CQ=hi({prop:"gridAutoColumns"}),kQ=hi({prop:"gridAutoRows"}),PQ=hi({prop:"gridTemplateColumns"}),IQ=hi({prop:"gridTemplateRows"}),AQ=hi({prop:"gridTemplateAreas"}),MQ=hi({prop:"gridArea"});Sb(Cb,kb,Pb,EQ,SQ,TQ,CQ,kQ,PQ,IQ,AQ,MQ);function g1(e,t){return t==="grey"?t:e}const DQ=hi({prop:"color",themeKey:"palette",transform:g1}),OQ=hi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:g1}),RQ=hi({prop:"backgroundColor",themeKey:"palette",transform:g1});Sb(DQ,OQ,RQ);function Bs(e){return e<=1&&e!==0?`${e*100}%`:e}const LQ=hi({prop:"width",transform:Bs}),I7=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var i;return{maxWidth:((i=e.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[n])||T7[n]||Bs(n)}};return uc(e,e.maxWidth,t)}return null};I7.filterProps=["maxWidth"];const zQ=hi({prop:"minWidth",transform:Bs}),FQ=hi({prop:"height",transform:Bs}),NQ=hi({prop:"maxHeight",transform:Bs}),BQ=hi({prop:"minHeight",transform:Bs});hi({prop:"size",cssProperty:"width",transform:Bs});hi({prop:"size",cssProperty:"height",transform:Bs});const jQ=hi({prop:"boxSizing"});Sb(LQ,I7,zQ,FQ,NQ,BQ,jQ);const $Q={border:{themeKey:"borders",transform:Uc},borderTop:{themeKey:"borders",transform:Uc},borderRight:{themeKey:"borders",transform:Uc},borderBottom:{themeKey:"borders",transform:Uc},borderLeft:{themeKey:"borders",transform:Uc},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Tb},color:{themeKey:"palette",transform:g1},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:g1},backgroundColor:{themeKey:"palette",transform:g1},p:{style:uo},pt:{style:uo},pr:{style:uo},pb:{style:uo},pl:{style:uo},px:{style:uo},py:{style:uo},padding:{style:uo},paddingTop:{style:uo},paddingRight:{style:uo},paddingBottom:{style:uo},paddingLeft:{style:uo},paddingX:{style:uo},paddingY:{style:uo},paddingInline:{style:uo},paddingInlineStart:{style:uo},paddingInlineEnd:{style:uo},paddingBlock:{style:uo},paddingBlockStart:{style:uo},paddingBlockEnd:{style:uo},m:{style:co},mt:{style:co},mr:{style:co},mb:{style:co},ml:{style:co},mx:{style:co},my:{style:co},margin:{style:co},marginTop:{style:co},marginRight:{style:co},marginBottom:{style:co},marginLeft:{style:co},marginX:{style:co},marginY:{style:co},marginInline:{style:co},marginInlineStart:{style:co},marginInlineEnd:{style:co},marginBlock:{style:co},marginBlockStart:{style:co},marginBlockEnd:{style:co},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Cb},rowGap:{style:Pb},columnGap:{style:kb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Bs},maxWidth:{style:I7},minWidth:{transform:Bs},height:{transform:Bs},maxHeight:{transform:Bs},minHeight:{transform:Bs},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Ib=$Q;function UQ(...e){const t=e.reduce((i,a)=>i.concat(Object.keys(a)),[]),n=new Set(t);return e.every(i=>n.size===Object.keys(i).length)}function VQ(e,t){return typeof e=="function"?e(t):e}function WQ(){function e(n,i,a,u){const f={[n]:i,theme:a},o=u[n];if(!o)return{[n]:i};const{cssProperty:v=n,themeKey:E,transform:k,style:D}=o;if(i==null)return null;if(E==="typography"&&i==="inherit")return{[n]:i};const R=Eb(a,E)||{};return D?D(f):uc(f,i,N=>{let $=K2(R,k,N);return N===$&&typeof N=="string"&&($=K2(R,k,`${n}${N==="default"?"":In(N)}`,N)),v===!1?$:{[v]:$}})}function t(n){var i;const{sx:a,theme:u={}}=n||{};if(!a)return null;const f=(i=u.unstable_sxConfig)!=null?i:Ib;function o(v){let E=v;if(typeof v=="function")E=v(u);else if(typeof v!="object")return v;if(!E)return null;const k=KL(u.breakpoints),D=Object.keys(k);let R=k;return Object.keys(E).forEach(j=>{const N=VQ(E[j],u);if(N!=null)if(typeof N=="object")if(f[j])R=r0(R,e(j,N,u,f));else{const $=uc({theme:u},N,ee=>({[j]:ee}));UQ($,N)?R[j]=t({sx:N,theme:u}):R=r0(R,$)}else R=r0(R,e(j,N,u,f))}),YL(D,R)}return Array.isArray(a)?a.map(o):o(a)}return t}const QL=WQ();QL.filterProps=["sx"];const A7=QL,HQ=["breakpoints","palette","spacing","shape"];function Ab(e={},...t){const{breakpoints:n={},palette:i={},spacing:a,shape:u={}}=e,f=Qn(e,HQ),o=tQ(n),v=hQ(a);let E=gs({breakpoints:o,direction:"ltr",components:{},palette:_e({mode:"light"},i),spacing:v,shape:_e({},rQ,u)},f);return E=t.reduce((k,D)=>gs(k,D),E),E.unstable_sxConfig=_e({},Ib,f==null?void 0:f.unstable_sxConfig),E.unstable_sx=function(D){return A7({sx:D,theme:this})},E}function qQ(e){return Object.keys(e).length===0}function M7(e=null){const t=q.useContext(M_);return!t||qQ(t)?e:t}const GQ=Ab();function D7(e=GQ){return M7(e)}function ZQ({styles:e,themeId:t,defaultTheme:n={}}){const i=D7(n),a=typeof e=="function"?e(t&&i[t]||i):e;return Z.jsx(KJ,{styles:a})}const XQ=["sx"],KQ=e=>{var t,n;const i={systemProps:{},otherProps:{}},a=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Ib;return Object.keys(e).forEach(u=>{a[u]?i.systemProps[u]=e[u]:i.otherProps[u]=e[u]}),i};function YQ(e){const{sx:t}=e,n=Qn(e,XQ),{systemProps:i,otherProps:a}=KQ(n);let u;return Array.isArray(t)?u=[i,...t]:typeof t=="function"?u=(...f)=>{const o=t(...f);return rp(o)?_e({},i,o):i}:u=_e({},i,t),_e({},a,{sx:u})}function ez(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ez(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function rr(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=ez(e))&&(i&&(i+=" "),i+=t);return i}const JQ=["variant"];function KP(e){return e.length===0}function tz(e){const{variant:t}=e,n=Qn(e,JQ);let i=t||"";return Object.keys(n).sort().forEach(a=>{a==="color"?i+=KP(i)?e[a]:In(e[a]):i+=`${KP(i)?a:In(a)}${In(e[a].toString())}`}),i}const QQ=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function eee(e){return Object.keys(e).length===0}function tee(e){return typeof e=="string"&&e.charCodeAt(0)>96}const nee=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,ree=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const i={};return n.forEach(a=>{const u=tz(a.props);i[u]=a.style}),i},iee=(e,t,n,i)=>{var a;const{ownerState:u={}}=e,f=[],o=n==null||(a=n.components)==null||(a=a[i])==null?void 0:a.variants;return o&&o.forEach(v=>{let E=!0;Object.keys(v.props).forEach(k=>{u[k]!==v.props[k]&&e[k]!==v.props[k]&&(E=!1)}),E&&f.push(t[tz(v.props)])}),f};function i0(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const oee=Ab();function Pg({defaultTheme:e,theme:t,themeId:n}){return eee(t)?e:t[n]||t}function nz(e={}){const{themeId:t,defaultTheme:n=oee,rootShouldForwardProp:i=i0,slotShouldForwardProp:a=i0}=e,u=f=>A7(_e({},f,{theme:Pg(_e({},f,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,(f,o={})=>{JJ(f,ie=>ie.filter(ue=>!(ue!=null&&ue.__mui_systemSx)));const{name:v,slot:E,skipVariantsResolver:k,skipSx:D,overridesResolver:R}=o,j=Qn(o,QQ),N=k!==void 0?k:E&&E!=="Root"||!1,$=D||!1;let ee,W=i0;E==="Root"?W=i:E?W=a:tee(f)&&(W=void 0);const K=YJ(f,_e({shouldForwardProp:W,label:ee},j)),Y=(ie,...ue)=>{const de=ue?ue.map(Oe=>typeof Oe=="function"&&Oe.__emotion_real!==Oe?rt=>Oe(_e({},rt,{theme:Pg(_e({},rt,{defaultTheme:n,themeId:t}))})):Oe):[];let M=ie;v&&R&&de.push(Oe=>{const rt=Pg(_e({},Oe,{defaultTheme:n,themeId:t})),at=nee(v,rt);if(at){const qe={};return Object.entries(at).forEach(([ze,Be])=>{qe[ze]=typeof Be=="function"?Be(_e({},Oe,{theme:rt})):Be}),R(Oe,qe)}return null}),v&&!N&&de.push(Oe=>{const rt=Pg(_e({},Oe,{defaultTheme:n,themeId:t}));return iee(Oe,ree(v,rt),rt,v)}),$||de.push(u);const Te=de.length-ue.length;if(Array.isArray(ie)&&Te>0){const Oe=new Array(Te).fill("");M=[...ie,...Oe],M.raw=[...ie.raw,...Oe]}else typeof ie=="function"&&ie.__emotion_real!==ie&&(M=Oe=>ie(_e({},Oe,{theme:Pg(_e({},Oe,{defaultTheme:n,themeId:t}))})));const fe=K(M,...de);return f.muiName&&(fe.muiName=f.muiName),fe};return K.withConfig&&(Y.withConfig=K.withConfig),Y}}const aee=nz(),see=aee;function lee(e){const{theme:t,name:n,props:i}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?i:p7(t.components[n].defaultProps,i)}function rz({props:e,name:t,defaultTheme:n,themeId:i}){let a=D7(n);return i&&(a=a[i]||a),lee({theme:a,name:t,props:e})}function O7(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function cee(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,a)=>a<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Cp(e){if(e.type)return e;if(e.charAt(0)==="#")return Cp(cee(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(ah(9,e));let i=e.substring(t+1,e.length-1),a;if(n==="color"){if(i=i.split(" "),a=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a)===-1)throw new Error(ah(10,a))}else i=i.split(",");return i=i.map(u=>parseFloat(u)),{type:n,values:i,colorSpace:a}}function Mb(e){const{type:t,colorSpace:n}=e;let{values:i}=e;return t.indexOf("rgb")!==-1?i=i.map((a,u)=>u<3?parseInt(a,10):a):t.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.indexOf("color")!==-1?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function uee(e){e=Cp(e);const{values:t}=e,n=t[0],i=t[1]/100,a=t[2]/100,u=i*Math.min(a,1-a),f=(E,k=(E+n/30)%12)=>a-u*Math.max(Math.min(k-3,9-k,1),-1);let o="rgb";const v=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return e.type==="hsla"&&(o+="a",v.push(t[3])),Mb({type:o,values:v})}function YP(e){e=Cp(e);let t=e.type==="hsl"||e.type==="hsla"?Cp(uee(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function dee(e,t){const n=YP(e),i=YP(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function no(e,t){return e=Cp(e),t=O7(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Mb(e)}function iz(e,t){if(e=Cp(e),t=O7(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Mb(e)}function oz(e,t){if(e=Cp(e),t=O7(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Mb(e)}const hee=q.createContext(null),az=hee;function sz(){return q.useContext(az)}const pee=typeof Symbol=="function"&&Symbol.for,fee=pee?Symbol.for("mui.nested"):"__THEME_NESTED__";function mee(e,t){return typeof t=="function"?t(e):_e({},e,t)}function gee(e){const{children:t,theme:n}=e,i=sz(),a=q.useMemo(()=>{const u=i===null?n:mee(i,n);return u!=null&&(u[fee]=i!==null),u},[n,i]);return Z.jsx(az.Provider,{value:a,children:t})}const JP={};function QP(e,t,n,i=!1){return q.useMemo(()=>{const a=e&&t[e]||t;if(typeof n=="function"){const u=n(a),f=e?_e({},t,{[e]:u}):u;return i?()=>f:f}return e?_e({},t,{[e]:n}):_e({},t,n)},[e,t,n,i])}function _ee(e){const{children:t,theme:n,themeId:i}=e,a=M7(JP),u=sz()||JP,f=QP(i,a,n),o=QP(i,u,n,!0);return Z.jsx(gee,{theme:o,children:Z.jsx(M_.Provider,{value:f,children:t})})}const yee=["component","direction","spacing","divider","children","className","useFlexGap"],vee=Ab(),xee=see("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function bee(e){return rz({props:e,name:"MuiStack",defaultTheme:vee})}function wee(e,t){const n=q.Children.toArray(e).filter(Boolean);return n.reduce((i,a,u)=>(i.push(a),u<n.length-1&&i.push(q.cloneElement(t,{key:`separator-${u}`})),i),[])}const Eee=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],See=({ownerState:e,theme:t})=>{let n=_e({display:"flex",flexDirection:"column"},uc({theme:t},L4({values:e.direction,breakpoints:t.breakpoints.values}),i=>({flexDirection:i})));if(e.spacing){const i=P7(t),a=Object.keys(t.breakpoints.values).reduce((v,E)=>((typeof e.spacing=="object"&&e.spacing[E]!=null||typeof e.direction=="object"&&e.direction[E]!=null)&&(v[E]=!0),v),{}),u=L4({values:e.direction,base:a}),f=L4({values:e.spacing,base:a});typeof u=="object"&&Object.keys(u).forEach((v,E,k)=>{if(!u[v]){const R=E>0?u[k[E-1]]:"column";u[v]=R}}),n=gs(n,uc({theme:t},f,(v,E)=>e.useFlexGap?{gap:Tp(i,v)}:{"& > :not(style) ~ :not(style)":{margin:0,[`margin${Eee(E?u[E]:e.direction)}`]:Tp(i,v)}}))}return n=iQ(t.breakpoints,n),n};function Tee(e={}){const{createStyledComponent:t=xee,useThemeProps:n=bee,componentName:i="MuiStack"}=e,a=()=>Pi({root:["root"]},v=>vi(i,v),{}),u=t(See);return q.forwardRef(function(v,E){const k=n(v),D=YQ(k),{component:R="div",direction:j="column",spacing:N=0,divider:$,children:ee,className:W,useFlexGap:K=!1}=D,Y=Qn(D,yee),ie={direction:j,spacing:N,useFlexGap:K},ue=a();return Z.jsx(u,_e({as:R,ownerState:ie,ref:E,className:rr(ue.root,W)},Y,{children:$?wee(ee,$):ee}))})}const M1="$$material";function Cee(e,t){return _e({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const kee={black:"#000",white:"#fff"},J0=kee,Pee={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Iee=Pee,Aee={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Af=Aee,Mee={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Mf=Mee,Dee={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ig=Dee,Oee={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Df=Oee,Ree={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Of=Ree,Lee={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Rf=Lee,zee=["mode","contrastThreshold","tonalOffset"],eI={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:J0.white,default:J0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},z4={text:{primary:J0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:J0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function tI(e,t,n,i){const a=i.light||i,u=i.dark||i*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=oz(e.main,a):t==="dark"&&(e.dark=iz(e.main,u)))}function Fee(e="light"){return e==="dark"?{main:Df[200],light:Df[50],dark:Df[400]}:{main:Df[700],light:Df[400],dark:Df[800]}}function Nee(e="light"){return e==="dark"?{main:Af[200],light:Af[50],dark:Af[400]}:{main:Af[500],light:Af[300],dark:Af[700]}}function Bee(e="light"){return e==="dark"?{main:Mf[500],light:Mf[300],dark:Mf[700]}:{main:Mf[700],light:Mf[400],dark:Mf[800]}}function jee(e="light"){return e==="dark"?{main:Of[400],light:Of[300],dark:Of[700]}:{main:Of[700],light:Of[500],dark:Of[900]}}function $ee(e="light"){return e==="dark"?{main:Rf[400],light:Rf[300],dark:Rf[700]}:{main:Rf[800],light:Rf[500],dark:Rf[900]}}function Uee(e="light"){return e==="dark"?{main:Ig[400],light:Ig[300],dark:Ig[700]}:{main:"#ed6c02",light:Ig[500],dark:Ig[900]}}function Vee(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:i=.2}=e,a=Qn(e,zee),u=e.primary||Fee(t),f=e.secondary||Nee(t),o=e.error||Bee(t),v=e.info||jee(t),E=e.success||$ee(t),k=e.warning||Uee(t);function D($){return dee($,z4.text.primary)>=n?z4.text.primary:eI.text.primary}const R=({color:$,name:ee,mainShade:W=500,lightShade:K=300,darkShade:Y=700})=>{if($=_e({},$),!$.main&&$[W]&&($.main=$[W]),!$.hasOwnProperty("main"))throw new Error(ah(11,ee?` (${ee})`:"",W));if(typeof $.main!="string")throw new Error(ah(12,ee?` (${ee})`:"",JSON.stringify($.main)));return tI($,"light",K,i),tI($,"dark",Y,i),$.contrastText||($.contrastText=D($.main)),$},j={dark:z4,light:eI};return gs(_e({common:_e({},J0),mode:t,primary:R({color:u,name:"primary"}),secondary:R({color:f,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:o,name:"error"}),warning:R({color:k,name:"warning"}),info:R({color:v,name:"info"}),success:R({color:E,name:"success"}),grey:Iee,contrastThreshold:n,getContrastText:D,augmentColor:R,tonalOffset:i},j[t]),a)}const Wee=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Hee(e){return Math.round(e*1e5)/1e5}const nI={textTransform:"uppercase"},rI='"Roboto", "Helvetica", "Arial", sans-serif';function qee(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:i=rI,fontSize:a=14,fontWeightLight:u=300,fontWeightRegular:f=400,fontWeightMedium:o=500,fontWeightBold:v=700,htmlFontSize:E=16,allVariants:k,pxToRem:D}=n,R=Qn(n,Wee),j=a/14,N=D||(W=>`${W/E*j}rem`),$=(W,K,Y,ie,ue)=>_e({fontFamily:i,fontWeight:W,fontSize:N(K),lineHeight:Y},i===rI?{letterSpacing:`${Hee(ie/K)}em`}:{},ue,k),ee={h1:$(u,96,1.167,-1.5),h2:$(u,60,1.2,-.5),h3:$(f,48,1.167,0),h4:$(f,34,1.235,.25),h5:$(f,24,1.334,0),h6:$(o,20,1.6,.15),subtitle1:$(f,16,1.75,.15),subtitle2:$(o,14,1.57,.1),body1:$(f,16,1.5,.15),body2:$(f,14,1.43,.15),button:$(o,14,1.75,.4,nI),caption:$(f,12,1.66,.4),overline:$(f,12,2.66,1,nI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return gs(_e({htmlFontSize:E,pxToRem:N,fontFamily:i,fontSize:a,fontWeightLight:u,fontWeightRegular:f,fontWeightMedium:o,fontWeightBold:v},ee),R,{clone:!1})}const Gee=.2,Zee=.14,Xee=.12;function Hi(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Gee})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Zee})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Xee})`].join(",")}const Kee=["none",Hi(0,2,1,-1,0,1,1,0,0,1,3,0),Hi(0,3,1,-2,0,2,2,0,0,1,5,0),Hi(0,3,3,-2,0,3,4,0,0,1,8,0),Hi(0,2,4,-1,0,4,5,0,0,1,10,0),Hi(0,3,5,-1,0,5,8,0,0,1,14,0),Hi(0,3,5,-1,0,6,10,0,0,1,18,0),Hi(0,4,5,-2,0,7,10,1,0,2,16,1),Hi(0,5,5,-3,0,8,10,1,0,3,14,2),Hi(0,5,6,-3,0,9,12,1,0,3,16,2),Hi(0,6,6,-3,0,10,14,1,0,4,18,3),Hi(0,6,7,-4,0,11,15,1,0,4,20,3),Hi(0,7,8,-4,0,12,17,2,0,5,22,4),Hi(0,7,8,-4,0,13,19,2,0,5,24,4),Hi(0,7,9,-4,0,14,21,2,0,5,26,4),Hi(0,8,9,-5,0,15,22,2,0,6,28,5),Hi(0,8,10,-5,0,16,24,2,0,6,30,5),Hi(0,8,11,-5,0,17,26,2,0,6,32,5),Hi(0,9,11,-5,0,18,28,2,0,7,34,6),Hi(0,9,12,-6,0,19,29,2,0,7,36,6),Hi(0,10,13,-6,0,20,31,3,0,8,38,7),Hi(0,10,13,-6,0,21,33,3,0,8,40,7),Hi(0,10,14,-6,0,22,35,3,0,8,42,7),Hi(0,11,14,-7,0,23,36,3,0,9,44,8),Hi(0,11,15,-7,0,24,38,3,0,9,46,8)],Yee=Kee,Jee=["duration","easing","delay"],Qee={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},ete={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function iI(e){return`${Math.round(e)}ms`}function tte(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function nte(e){const t=_e({},Qee,e.easing),n=_e({},ete,e.duration);return _e({getAutoHeightDuration:tte,create:(a=["all"],u={})=>{const{duration:f=n.standard,easing:o=t.easeInOut,delay:v=0}=u;return Qn(u,Jee),(Array.isArray(a)?a:[a]).map(E=>`${E} ${typeof f=="string"?f:iI(f)} ${o} ${typeof v=="string"?v:iI(v)}`).join(",")}},e,{easing:t,duration:n})}const rte={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},ite=rte,ote=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function jp(e={},...t){const{mixins:n={},palette:i={},transitions:a={},typography:u={}}=e,f=Qn(e,ote);if(e.vars)throw new Error(ah(18));const o=Vee(i),v=Ab(e);let E=gs(v,{mixins:Cee(v.breakpoints,n),palette:o,shadows:Yee.slice(),typography:qee(o,u),transitions:nte(a),zIndex:_e({},ite)});return E=gs(E,f),E=t.reduce((k,D)=>gs(k,D),E),E.unstable_sxConfig=_e({},Ib,f==null?void 0:f.unstable_sxConfig),E.unstable_sx=function(D){return A7({sx:D,theme:this})},E}const ate=jp(),Db=ate;function Ob(){const e=D7(Db);return e[M1]||e}function Ai({props:e,name:t}){return rz({props:e,name:t,defaultTheme:Db,themeId:M1})}const Yu=e=>i0(e)&&e!=="classes",R7=i0,ste=nz({themeId:M1,defaultTheme:Db,rootShouldForwardProp:Yu}),$n=ste,lte=["theme"];function L7(e){let{theme:t}=e,n=Qn(e,lte);const i=t[M1];return Z.jsx(_ee,_e({},n,{themeId:i?M1:void 0,theme:i||t}))}const cte=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},oI=cte;function Bu(e){return typeof e=="string"}function ute(e,t,n){return e===void 0||Bu(e)?t:_e({},t,{ownerState:_e({},t.ownerState,n)})}function dte(e,t,n=(i,a)=>i===a){return e.length===t.length&&e.every((i,a)=>n(i,t[a]))}const hte={disableDefaultClasses:!1},pte=q.createContext(hte);function lz(e){const{disableDefaultClasses:t}=q.useContext(pte);return n=>t?"":e(n)}function fte(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&typeof e[i]=="function"&&!t.includes(i)).forEach(i=>{n[i]=e[i]}),n}function $E(e,t,n){return typeof e=="function"?e(t,n):e}function aI(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function mte(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:a,className:u}=e;if(!t){const j=rr(a==null?void 0:a.className,i==null?void 0:i.className,u,n==null?void 0:n.className),N=_e({},n==null?void 0:n.style,a==null?void 0:a.style,i==null?void 0:i.style),$=_e({},n,a,i);return j.length>0&&($.className=j),Object.keys(N).length>0&&($.style=N),{props:$,internalRef:void 0}}const f=fte(_e({},a,i)),o=aI(i),v=aI(a),E=t(f),k=rr(E==null?void 0:E.className,n==null?void 0:n.className,u,a==null?void 0:a.className,i==null?void 0:i.className),D=_e({},E==null?void 0:E.style,n==null?void 0:n.style,a==null?void 0:a.style,i==null?void 0:i.style),R=_e({},E,n,v,o);return k.length>0&&(R.className=k),Object.keys(D).length>0&&(R.style=D),{props:R,internalRef:E.ref}}const gte=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function zs(e){var t;const{elementType:n,externalSlotProps:i,ownerState:a,skipResolvingSlotProps:u=!1}=e,f=Qn(e,gte),o=u?{}:$E(i,a),{props:v,internalRef:E}=mte(_e({},f,{externalSlotProps:o})),k=wo(E,o==null?void 0:o.ref,(t=e.additionalProps)==null?void 0:t.ref);return ute(n,_e({},v,{ref:k}),a)}const _te=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function yte(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function vte(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=i=>e.ownerDocument.querySelector(`input[type="radio"]${i}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function xte(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||vte(e))}function bte(e){const t=[],n=[];return Array.from(e.querySelectorAll(_te)).forEach((i,a)=>{const u=yte(i);u===-1||!xte(i)||(u===0?t.push(i):n.push({documentOrder:a,tabIndex:u,node:i}))}),n.sort((i,a)=>i.tabIndex===a.tabIndex?i.documentOrder-a.documentOrder:i.tabIndex-a.tabIndex).map(i=>i.node).concat(t)}function wte(){return!0}function Ete(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:a=!1,getTabbable:u=bte,isEnabled:f=wte,open:o}=e,v=q.useRef(!1),E=q.useRef(null),k=q.useRef(null),D=q.useRef(null),R=q.useRef(null),j=q.useRef(!1),N=q.useRef(null),$=wo(t.ref,N),ee=q.useRef(null);q.useEffect(()=>{!o||!N.current||(j.current=!n)},[n,o]),q.useEffect(()=>{if(!o||!N.current)return;const Y=Mo(N.current);return N.current.contains(Y.activeElement)||(N.current.hasAttribute("tabIndex")||N.current.setAttribute("tabIndex","-1"),j.current&&N.current.focus()),()=>{a||(D.current&&D.current.focus&&(v.current=!0,D.current.focus()),D.current=null)}},[o]),q.useEffect(()=>{if(!o||!N.current)return;const Y=Mo(N.current),ie=M=>{const{current:Te}=N;if(Te!==null){if(!Y.hasFocus()||i||!f()||v.current){v.current=!1;return}if(!Te.contains(Y.activeElement)){if(M&&R.current!==M.target||Y.activeElement!==R.current)R.current=null;else if(R.current!==null)return;if(!j.current)return;let rt=[];if((Y.activeElement===E.current||Y.activeElement===k.current)&&(rt=u(N.current)),rt.length>0){var fe,Oe;const at=!!((fe=ee.current)!=null&&fe.shiftKey&&((Oe=ee.current)==null?void 0:Oe.key)==="Tab"),qe=rt[0],ze=rt[rt.length-1];typeof qe!="string"&&typeof ze!="string"&&(at?ze.focus():qe.focus())}else Te.focus()}}},ue=M=>{ee.current=M,!(i||!f()||M.key!=="Tab")&&Y.activeElement===N.current&&M.shiftKey&&(v.current=!0,k.current&&k.current.focus())};Y.addEventListener("focusin",ie),Y.addEventListener("keydown",ue,!0);const de=setInterval(()=>{Y.activeElement&&Y.activeElement.tagName==="BODY"&&ie(null)},50);return()=>{clearInterval(de),Y.removeEventListener("focusin",ie),Y.removeEventListener("keydown",ue,!0)}},[n,i,a,f,o,u]);const W=Y=>{D.current===null&&(D.current=Y.relatedTarget),j.current=!0,R.current=Y.target;const ie=t.props.onFocus;ie&&ie(Y)},K=Y=>{D.current===null&&(D.current=Y.relatedTarget),j.current=!0};return Z.jsxs(q.Fragment,{children:[Z.jsx("div",{tabIndex:o?0:-1,onFocus:K,ref:E,"data-testid":"sentinelStart"}),q.cloneElement(t,{ref:$,onFocus:W}),Z.jsx("div",{tabIndex:o?0:-1,onFocus:K,ref:k,"data-testid":"sentinelEnd"})]})}var _s="top",Tl="bottom",Cl="right",ys="left",z7="auto",O_=[_s,Tl,Cl,ys],D1="start",Q0="end",Ste="clippingParents",cz="viewport",Ag="popper",Tte="reference",sI=O_.reduce(function(e,t){return e.concat([t+"-"+D1,t+"-"+Q0])},[]),uz=[].concat(O_,[z7]).reduce(function(e,t){return e.concat([t,t+"-"+D1,t+"-"+Q0])},[]),Cte="beforeRead",kte="read",Pte="afterRead",Ite="beforeMain",Ate="main",Mte="afterMain",Dte="beforeWrite",Ote="write",Rte="afterWrite",Lte=[Cte,kte,Pte,Ite,Ate,Mte,Dte,Ote,Rte];function eu(e){return e?(e.nodeName||"").toLowerCase():null}function Hs(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function kp(e){var t=Hs(e).Element;return e instanceof t||e instanceof Element}function wl(e){var t=Hs(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function F7(e){if(typeof ShadowRoot>"u")return!1;var t=Hs(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function zte(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},a=t.attributes[n]||{},u=t.elements[n];!wl(u)||!eu(u)||(Object.assign(u.style,i),Object.keys(a).forEach(function(f){var o=a[f];o===!1?u.removeAttribute(f):u.setAttribute(f,o===!0?"":o)}))})}function Fte(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var a=t.elements[i],u=t.attributes[i]||{},f=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),o=f.reduce(function(v,E){return v[E]="",v},{});!wl(a)||!eu(a)||(Object.assign(a.style,o),Object.keys(u).forEach(function(v){a.removeAttribute(v)}))})}}const Nte={name:"applyStyles",enabled:!0,phase:"write",fn:zte,effect:Fte,requires:["computeStyles"]};function Kc(e){return e.split("-")[0]}var pp=Math.max,Y2=Math.min,O1=Math.round;function UE(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function dz(){return!/^((?!chrome|android).)*safari/i.test(UE())}function R1(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),a=1,u=1;t&&wl(e)&&(a=e.offsetWidth>0&&O1(i.width)/e.offsetWidth||1,u=e.offsetHeight>0&&O1(i.height)/e.offsetHeight||1);var f=kp(e)?Hs(e):window,o=f.visualViewport,v=!dz()&&n,E=(i.left+(v&&o?o.offsetLeft:0))/a,k=(i.top+(v&&o?o.offsetTop:0))/u,D=i.width/a,R=i.height/u;return{width:D,height:R,top:k,right:E+D,bottom:k+R,left:E,x:E,y:k}}function N7(e){var t=R1(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function hz(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&F7(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Hu(e){return Hs(e).getComputedStyle(e)}function Bte(e){return["table","td","th"].indexOf(eu(e))>=0}function yh(e){return((kp(e)?e.ownerDocument:e.document)||window.document).documentElement}function Rb(e){return eu(e)==="html"?e:e.assignedSlot||e.parentNode||(F7(e)?e.host:null)||yh(e)}function lI(e){return!wl(e)||Hu(e).position==="fixed"?null:e.offsetParent}function jte(e){var t=/firefox/i.test(UE()),n=/Trident/i.test(UE());if(n&&wl(e)){var i=Hu(e);if(i.position==="fixed")return null}var a=Rb(e);for(F7(a)&&(a=a.host);wl(a)&&["html","body"].indexOf(eu(a))<0;){var u=Hu(a);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||t&&u.willChange==="filter"||t&&u.filter&&u.filter!=="none")return a;a=a.parentNode}return null}function R_(e){for(var t=Hs(e),n=lI(e);n&&Bte(n)&&Hu(n).position==="static";)n=lI(n);return n&&(eu(n)==="html"||eu(n)==="body"&&Hu(n).position==="static")?t:n||jte(e)||t}function B7(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function o0(e,t,n){return pp(e,Y2(t,n))}function $te(e,t,n){var i=o0(e,t,n);return i>n?n:i}function pz(){return{top:0,right:0,bottom:0,left:0}}function fz(e){return Object.assign({},pz(),e)}function mz(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var Ute=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,fz(typeof t!="number"?t:mz(t,O_))};function Vte(e){var t,n=e.state,i=e.name,a=e.options,u=n.elements.arrow,f=n.modifiersData.popperOffsets,o=Kc(n.placement),v=B7(o),E=[ys,Cl].indexOf(o)>=0,k=E?"height":"width";if(!(!u||!f)){var D=Ute(a.padding,n),R=N7(u),j=v==="y"?_s:ys,N=v==="y"?Tl:Cl,$=n.rects.reference[k]+n.rects.reference[v]-f[v]-n.rects.popper[k],ee=f[v]-n.rects.reference[v],W=R_(u),K=W?v==="y"?W.clientHeight||0:W.clientWidth||0:0,Y=$/2-ee/2,ie=D[j],ue=K-R[k]-D[N],de=K/2-R[k]/2+Y,M=o0(ie,de,ue),Te=v;n.modifiersData[i]=(t={},t[Te]=M,t.centerOffset=M-de,t)}}function Wte(e){var t=e.state,n=e.options,i=n.element,a=i===void 0?"[data-popper-arrow]":i;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||hz(t.elements.popper,a)&&(t.elements.arrow=a))}const Hte={name:"arrow",enabled:!0,phase:"main",fn:Vte,effect:Wte,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function L1(e){return e.split("-")[1]}var qte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gte(e,t){var n=e.x,i=e.y,a=t.devicePixelRatio||1;return{x:O1(n*a)/a||0,y:O1(i*a)/a||0}}function cI(e){var t,n=e.popper,i=e.popperRect,a=e.placement,u=e.variation,f=e.offsets,o=e.position,v=e.gpuAcceleration,E=e.adaptive,k=e.roundOffsets,D=e.isFixed,R=f.x,j=R===void 0?0:R,N=f.y,$=N===void 0?0:N,ee=typeof k=="function"?k({x:j,y:$}):{x:j,y:$};j=ee.x,$=ee.y;var W=f.hasOwnProperty("x"),K=f.hasOwnProperty("y"),Y=ys,ie=_s,ue=window;if(E){var de=R_(n),M="clientHeight",Te="clientWidth";if(de===Hs(n)&&(de=yh(n),Hu(de).position!=="static"&&o==="absolute"&&(M="scrollHeight",Te="scrollWidth")),de=de,a===_s||(a===ys||a===Cl)&&u===Q0){ie=Tl;var fe=D&&de===ue&&ue.visualViewport?ue.visualViewport.height:de[M];$-=fe-i.height,$*=v?1:-1}if(a===ys||(a===_s||a===Tl)&&u===Q0){Y=Cl;var Oe=D&&de===ue&&ue.visualViewport?ue.visualViewport.width:de[Te];j-=Oe-i.width,j*=v?1:-1}}var rt=Object.assign({position:o},E&&qte),at=k===!0?Gte({x:j,y:$},Hs(n)):{x:j,y:$};if(j=at.x,$=at.y,v){var qe;return Object.assign({},rt,(qe={},qe[ie]=K?"0":"",qe[Y]=W?"0":"",qe.transform=(ue.devicePixelRatio||1)<=1?"translate("+j+"px, "+$+"px)":"translate3d("+j+"px, "+$+"px, 0)",qe))}return Object.assign({},rt,(t={},t[ie]=K?$+"px":"",t[Y]=W?j+"px":"",t.transform="",t))}function Zte(e){var t=e.state,n=e.options,i=n.gpuAcceleration,a=i===void 0?!0:i,u=n.adaptive,f=u===void 0?!0:u,o=n.roundOffsets,v=o===void 0?!0:o,E={placement:Kc(t.placement),variation:L1(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,cI(Object.assign({},E,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:v})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,cI(Object.assign({},E,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:v})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Xte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Zte,data:{}};var bv={passive:!0};function Kte(e){var t=e.state,n=e.instance,i=e.options,a=i.scroll,u=a===void 0?!0:a,f=i.resize,o=f===void 0?!0:f,v=Hs(t.elements.popper),E=[].concat(t.scrollParents.reference,t.scrollParents.popper);return u&&E.forEach(function(k){k.addEventListener("scroll",n.update,bv)}),o&&v.addEventListener("resize",n.update,bv),function(){u&&E.forEach(function(k){k.removeEventListener("scroll",n.update,bv)}),o&&v.removeEventListener("resize",n.update,bv)}}const Yte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Kte,data:{}};var Jte={left:"right",right:"left",bottom:"top",top:"bottom"};function i2(e){return e.replace(/left|right|bottom|top/g,function(t){return Jte[t]})}var Qte={start:"end",end:"start"};function uI(e){return e.replace(/start|end/g,function(t){return Qte[t]})}function j7(e){var t=Hs(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function $7(e){return R1(yh(e)).left+j7(e).scrollLeft}function ene(e,t){var n=Hs(e),i=yh(e),a=n.visualViewport,u=i.clientWidth,f=i.clientHeight,o=0,v=0;if(a){u=a.width,f=a.height;var E=dz();(E||!E&&t==="fixed")&&(o=a.offsetLeft,v=a.offsetTop)}return{width:u,height:f,x:o+$7(e),y:v}}function tne(e){var t,n=yh(e),i=j7(e),a=(t=e.ownerDocument)==null?void 0:t.body,u=pp(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),f=pp(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),o=-i.scrollLeft+$7(e),v=-i.scrollTop;return Hu(a||n).direction==="rtl"&&(o+=pp(n.clientWidth,a?a.clientWidth:0)-u),{width:u,height:f,x:o,y:v}}function U7(e){var t=Hu(e),n=t.overflow,i=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+i)}function gz(e){return["html","body","#document"].indexOf(eu(e))>=0?e.ownerDocument.body:wl(e)&&U7(e)?e:gz(Rb(e))}function a0(e,t){var n;t===void 0&&(t=[]);var i=gz(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),u=Hs(i),f=a?[u].concat(u.visualViewport||[],U7(i)?i:[]):i,o=t.concat(f);return a?o:o.concat(a0(Rb(f)))}function VE(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function nne(e,t){var n=R1(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function dI(e,t,n){return t===cz?VE(ene(e,n)):kp(t)?nne(t,n):VE(tne(yh(e)))}function rne(e){var t=a0(Rb(e)),n=["absolute","fixed"].indexOf(Hu(e).position)>=0,i=n&&wl(e)?R_(e):e;return kp(i)?t.filter(function(a){return kp(a)&&hz(a,i)&&eu(a)!=="body"}):[]}function ine(e,t,n,i){var a=t==="clippingParents"?rne(e):[].concat(t),u=[].concat(a,[n]),f=u[0],o=u.reduce(function(v,E){var k=dI(e,E,i);return v.top=pp(k.top,v.top),v.right=Y2(k.right,v.right),v.bottom=Y2(k.bottom,v.bottom),v.left=pp(k.left,v.left),v},dI(e,f,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function _z(e){var t=e.reference,n=e.element,i=e.placement,a=i?Kc(i):null,u=i?L1(i):null,f=t.x+t.width/2-n.width/2,o=t.y+t.height/2-n.height/2,v;switch(a){case _s:v={x:f,y:t.y-n.height};break;case Tl:v={x:f,y:t.y+t.height};break;case Cl:v={x:t.x+t.width,y:o};break;case ys:v={x:t.x-n.width,y:o};break;default:v={x:t.x,y:t.y}}var E=a?B7(a):null;if(E!=null){var k=E==="y"?"height":"width";switch(u){case D1:v[E]=v[E]-(t[k]/2-n[k]/2);break;case Q0:v[E]=v[E]+(t[k]/2-n[k]/2);break}}return v}function e_(e,t){t===void 0&&(t={});var n=t,i=n.placement,a=i===void 0?e.placement:i,u=n.strategy,f=u===void 0?e.strategy:u,o=n.boundary,v=o===void 0?Ste:o,E=n.rootBoundary,k=E===void 0?cz:E,D=n.elementContext,R=D===void 0?Ag:D,j=n.altBoundary,N=j===void 0?!1:j,$=n.padding,ee=$===void 0?0:$,W=fz(typeof ee!="number"?ee:mz(ee,O_)),K=R===Ag?Tte:Ag,Y=e.rects.popper,ie=e.elements[N?K:R],ue=ine(kp(ie)?ie:ie.contextElement||yh(e.elements.popper),v,k,f),de=R1(e.elements.reference),M=_z({reference:de,element:Y,strategy:"absolute",placement:a}),Te=VE(Object.assign({},Y,M)),fe=R===Ag?Te:de,Oe={top:ue.top-fe.top+W.top,bottom:fe.bottom-ue.bottom+W.bottom,left:ue.left-fe.left+W.left,right:fe.right-ue.right+W.right},rt=e.modifiersData.offset;if(R===Ag&&rt){var at=rt[a];Object.keys(Oe).forEach(function(qe){var ze=[Cl,Tl].indexOf(qe)>=0?1:-1,Be=[_s,Tl].indexOf(qe)>=0?"y":"x";Oe[qe]+=at[Be]*ze})}return Oe}function one(e,t){t===void 0&&(t={});var n=t,i=n.placement,a=n.boundary,u=n.rootBoundary,f=n.padding,o=n.flipVariations,v=n.allowedAutoPlacements,E=v===void 0?uz:v,k=L1(i),D=k?o?sI:sI.filter(function(N){return L1(N)===k}):O_,R=D.filter(function(N){return E.indexOf(N)>=0});R.length===0&&(R=D);var j=R.reduce(function(N,$){return N[$]=e_(e,{placement:$,boundary:a,rootBoundary:u,padding:f})[Kc($)],N},{});return Object.keys(j).sort(function(N,$){return j[N]-j[$]})}function ane(e){if(Kc(e)===z7)return[];var t=i2(e);return[uI(e),t,uI(t)]}function sne(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var a=n.mainAxis,u=a===void 0?!0:a,f=n.altAxis,o=f===void 0?!0:f,v=n.fallbackPlacements,E=n.padding,k=n.boundary,D=n.rootBoundary,R=n.altBoundary,j=n.flipVariations,N=j===void 0?!0:j,$=n.allowedAutoPlacements,ee=t.options.placement,W=Kc(ee),K=W===ee,Y=v||(K||!N?[i2(ee)]:ane(ee)),ie=[ee].concat(Y).reduce(function(jt,Qt){return jt.concat(Kc(Qt)===z7?one(t,{placement:Qt,boundary:k,rootBoundary:D,padding:E,flipVariations:N,allowedAutoPlacements:$}):Qt)},[]),ue=t.rects.reference,de=t.rects.popper,M=new Map,Te=!0,fe=ie[0],Oe=0;Oe<ie.length;Oe++){var rt=ie[Oe],at=Kc(rt),qe=L1(rt)===D1,ze=[_s,Tl].indexOf(at)>=0,Be=ze?"width":"height",tt=e_(t,{placement:rt,boundary:k,rootBoundary:D,altBoundary:R,padding:E}),Ke=ze?qe?Cl:ys:qe?Tl:_s;ue[Be]>de[Be]&&(Ke=i2(Ke));var Le=i2(Ke),Je=[];if(u&&Je.push(tt[at]<=0),o&&Je.push(tt[Ke]<=0,tt[Le]<=0),Je.every(function(jt){return jt})){fe=rt,Te=!1;break}M.set(rt,Je)}if(Te)for(var it=N?3:1,kt=function(Qt){var en=ie.find(function(on){var Sn=M.get(on);if(Sn)return Sn.slice(0,Qt).every(function(Jt){return Jt})});if(en)return fe=en,"break"},yt=it;yt>0;yt--){var wt=kt(yt);if(wt==="break")break}t.placement!==fe&&(t.modifiersData[i]._skip=!0,t.placement=fe,t.reset=!0)}}const lne={name:"flip",enabled:!0,phase:"main",fn:sne,requiresIfExists:["offset"],data:{_skip:!1}};function hI(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function pI(e){return[_s,Cl,Tl,ys].some(function(t){return e[t]>=0})}function cne(e){var t=e.state,n=e.name,i=t.rects.reference,a=t.rects.popper,u=t.modifiersData.preventOverflow,f=e_(t,{elementContext:"reference"}),o=e_(t,{altBoundary:!0}),v=hI(f,i),E=hI(o,a,u),k=pI(v),D=pI(E);t.modifiersData[n]={referenceClippingOffsets:v,popperEscapeOffsets:E,isReferenceHidden:k,hasPopperEscaped:D},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":k,"data-popper-escaped":D})}const une={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cne};function dne(e,t,n){var i=Kc(e),a=[ys,_s].indexOf(i)>=0?-1:1,u=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,f=u[0],o=u[1];return f=f||0,o=(o||0)*a,[ys,Cl].indexOf(i)>=0?{x:o,y:f}:{x:f,y:o}}function hne(e){var t=e.state,n=e.options,i=e.name,a=n.offset,u=a===void 0?[0,0]:a,f=uz.reduce(function(k,D){return k[D]=dne(D,t.rects,u),k},{}),o=f[t.placement],v=o.x,E=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=v,t.modifiersData.popperOffsets.y+=E),t.modifiersData[i]=f}const pne={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:hne};function fne(e){var t=e.state,n=e.name;t.modifiersData[n]=_z({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const mne={name:"popperOffsets",enabled:!0,phase:"read",fn:fne,data:{}};function gne(e){return e==="x"?"y":"x"}function _ne(e){var t=e.state,n=e.options,i=e.name,a=n.mainAxis,u=a===void 0?!0:a,f=n.altAxis,o=f===void 0?!1:f,v=n.boundary,E=n.rootBoundary,k=n.altBoundary,D=n.padding,R=n.tether,j=R===void 0?!0:R,N=n.tetherOffset,$=N===void 0?0:N,ee=e_(t,{boundary:v,rootBoundary:E,padding:D,altBoundary:k}),W=Kc(t.placement),K=L1(t.placement),Y=!K,ie=B7(W),ue=gne(ie),de=t.modifiersData.popperOffsets,M=t.rects.reference,Te=t.rects.popper,fe=typeof $=="function"?$(Object.assign({},t.rects,{placement:t.placement})):$,Oe=typeof fe=="number"?{mainAxis:fe,altAxis:fe}:Object.assign({mainAxis:0,altAxis:0},fe),rt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,at={x:0,y:0};if(de){if(u){var qe,ze=ie==="y"?_s:ys,Be=ie==="y"?Tl:Cl,tt=ie==="y"?"height":"width",Ke=de[ie],Le=Ke+ee[ze],Je=Ke-ee[Be],it=j?-Te[tt]/2:0,kt=K===D1?M[tt]:Te[tt],yt=K===D1?-Te[tt]:-M[tt],wt=t.elements.arrow,jt=j&&wt?N7(wt):{width:0,height:0},Qt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:pz(),en=Qt[ze],on=Qt[Be],Sn=o0(0,M[tt],jt[tt]),Jt=Y?M[tt]/2-it-Sn-en-Oe.mainAxis:kt-Sn-en-Oe.mainAxis,yn=Y?-M[tt]/2+it+Sn+on+Oe.mainAxis:yt+Sn+on+Oe.mainAxis,Ft=t.elements.arrow&&R_(t.elements.arrow),nn=Ft?ie==="y"?Ft.clientTop||0:Ft.clientLeft||0:0,bn=(qe=rt==null?void 0:rt[ie])!=null?qe:0,qt=Ke+Jt-bn-nn,It=Ke+yn-bn,Rn=o0(j?Y2(Le,qt):Le,Ke,j?pp(Je,It):Je);de[ie]=Rn,at[ie]=Rn-Ke}if(o){var ln,Zn=ie==="x"?_s:ys,tr=ie==="x"?Tl:Cl,Fn=de[ue],Yn=ue==="y"?"height":"width",Un=Fn+ee[Zn],qn=Fn-ee[tr],wn=[_s,ys].indexOf(W)!==-1,Qe=(ln=rt==null?void 0:rt[ue])!=null?ln:0,Kt=wn?Un:Fn-M[Yn]-Te[Yn]-Qe+Oe.altAxis,an=wn?Fn+M[Yn]+Te[Yn]-Qe-Oe.altAxis:qn,Zt=j&&wn?$te(Kt,Fn,an):o0(j?Kt:Un,Fn,j?an:qn);de[ue]=Zt,at[ue]=Zt-Fn}t.modifiersData[i]=at}}const yne={name:"preventOverflow",enabled:!0,phase:"main",fn:_ne,requiresIfExists:["offset"]};function vne(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function xne(e){return e===Hs(e)||!wl(e)?j7(e):vne(e)}function bne(e){var t=e.getBoundingClientRect(),n=O1(t.width)/e.offsetWidth||1,i=O1(t.height)/e.offsetHeight||1;return n!==1||i!==1}function wne(e,t,n){n===void 0&&(n=!1);var i=wl(t),a=wl(t)&&bne(t),u=yh(t),f=R1(e,a,n),o={scrollLeft:0,scrollTop:0},v={x:0,y:0};return(i||!i&&!n)&&((eu(t)!=="body"||U7(u))&&(o=xne(t)),wl(t)?(v=R1(t,!0),v.x+=t.clientLeft,v.y+=t.clientTop):u&&(v.x=$7(u))),{x:f.left+o.scrollLeft-v.x,y:f.top+o.scrollTop-v.y,width:f.width,height:f.height}}function Ene(e){var t=new Map,n=new Set,i=[];e.forEach(function(u){t.set(u.name,u)});function a(u){n.add(u.name);var f=[].concat(u.requires||[],u.requiresIfExists||[]);f.forEach(function(o){if(!n.has(o)){var v=t.get(o);v&&a(v)}}),i.push(u)}return e.forEach(function(u){n.has(u.name)||a(u)}),i}function Sne(e){var t=Ene(e);return Lte.reduce(function(n,i){return n.concat(t.filter(function(a){return a.phase===i}))},[])}function Tne(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Cne(e){var t=e.reduce(function(n,i){var a=n[i.name];return n[i.name]=a?Object.assign({},a,i,{options:Object.assign({},a.options,i.options),data:Object.assign({},a.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var fI={placement:"bottom",modifiers:[],strategy:"absolute"};function mI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function kne(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,a=t.defaultOptions,u=a===void 0?fI:a;return function(o,v,E){E===void 0&&(E=u);var k={placement:"bottom",orderedModifiers:[],options:Object.assign({},fI,u),modifiersData:{},elements:{reference:o,popper:v},attributes:{},styles:{}},D=[],R=!1,j={state:k,setOptions:function(W){var K=typeof W=="function"?W(k.options):W;$(),k.options=Object.assign({},u,k.options,K),k.scrollParents={reference:kp(o)?a0(o):o.contextElement?a0(o.contextElement):[],popper:a0(v)};var Y=Sne(Cne([].concat(i,k.options.modifiers)));return k.orderedModifiers=Y.filter(function(ie){return ie.enabled}),N(),j.update()},forceUpdate:function(){if(!R){var W=k.elements,K=W.reference,Y=W.popper;if(mI(K,Y)){k.rects={reference:wne(K,R_(Y),k.options.strategy==="fixed"),popper:N7(Y)},k.reset=!1,k.placement=k.options.placement,k.orderedModifiers.forEach(function(Oe){return k.modifiersData[Oe.name]=Object.assign({},Oe.data)});for(var ie=0;ie<k.orderedModifiers.length;ie++){if(k.reset===!0){k.reset=!1,ie=-1;continue}var ue=k.orderedModifiers[ie],de=ue.fn,M=ue.options,Te=M===void 0?{}:M,fe=ue.name;typeof de=="function"&&(k=de({state:k,options:Te,name:fe,instance:j})||k)}}}},update:Tne(function(){return new Promise(function(ee){j.forceUpdate(),ee(k)})}),destroy:function(){$(),R=!0}};if(!mI(o,v))return j;j.setOptions(E).then(function(ee){!R&&E.onFirstUpdate&&E.onFirstUpdate(ee)});function N(){k.orderedModifiers.forEach(function(ee){var W=ee.name,K=ee.options,Y=K===void 0?{}:K,ie=ee.effect;if(typeof ie=="function"){var ue=ie({state:k,name:W,instance:j,options:Y}),de=function(){};D.push(ue||de)}})}function $(){D.forEach(function(ee){return ee()}),D=[]}return j}}var Pne=[Yte,mne,Xte,Nte,pne,lne,yne,Hte,une],Ine=kne({defaultModifiers:Pne});function Ane(e){return typeof e=="function"?e():e}const Mne=q.forwardRef(function(t,n){const{children:i,container:a,disablePortal:u=!1}=t,[f,o]=q.useState(null),v=wo(q.isValidElement(i)?i.ref:null,n);if(Qc(()=>{u||o(Ane(a)||document.body)},[a,u]),Qc(()=>{if(f&&!u)return Z0(n,f),()=>{Z0(n,null)}},[n,f,u]),u){if(q.isValidElement(i)){const E={ref:v};return q.cloneElement(i,E)}return Z.jsx(q.Fragment,{children:i})}return Z.jsx(q.Fragment,{children:f&&ih.createPortal(i,f)})}),yz=Mne;function Dne(e){return vi("MuiPopper",e)}Ii("MuiPopper",["root"]);const One=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Rne=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Lne(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function WE(e){return typeof e=="function"?e():e}function zne(e){return e.nodeType!==void 0}const Fne=()=>Pi({root:["root"]},lz(Dne)),Nne={},Bne=q.forwardRef(function(t,n){var i;const{anchorEl:a,children:u,direction:f,disablePortal:o,modifiers:v,open:E,placement:k,popperOptions:D,popperRef:R,slotProps:j={},slots:N={},TransitionProps:$}=t,ee=Qn(t,One),W=q.useRef(null),K=wo(W,n),Y=q.useRef(null),ie=wo(Y,R),ue=q.useRef(ie);Qc(()=>{ue.current=ie},[ie]),q.useImperativeHandle(R,()=>Y.current,[]);const de=Lne(k,f),[M,Te]=q.useState(de),[fe,Oe]=q.useState(WE(a));q.useEffect(()=>{Y.current&&Y.current.forceUpdate()}),q.useEffect(()=>{a&&Oe(WE(a))},[a]),Qc(()=>{if(!fe||!E)return;const Be=Le=>{Te(Le.placement)};let tt=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Le})=>{Be(Le)}}];v!=null&&(tt=tt.concat(v)),D&&D.modifiers!=null&&(tt=tt.concat(D.modifiers));const Ke=Ine(fe,W.current,_e({placement:de},D,{modifiers:tt}));return ue.current(Ke),()=>{Ke.destroy(),ue.current(null)}},[fe,o,v,E,D,de]);const rt={placement:M};$!==null&&(rt.TransitionProps=$);const at=Fne(),qe=(i=N.root)!=null?i:"div",ze=zs({elementType:qe,externalSlotProps:j.root,externalForwardedProps:ee,additionalProps:{role:"tooltip",ref:K},ownerState:t,className:at.root});return Z.jsx(qe,_e({},ze,{children:typeof u=="function"?u(rt):u}))}),jne=q.forwardRef(function(t,n){const{anchorEl:i,children:a,container:u,direction:f="ltr",disablePortal:o=!1,keepMounted:v=!1,modifiers:E,open:k,placement:D="bottom",popperOptions:R=Nne,popperRef:j,style:N,transition:$=!1,slotProps:ee={},slots:W={}}=t,K=Qn(t,Rne),[Y,ie]=q.useState(!0),ue=()=>{ie(!1)},de=()=>{ie(!0)};if(!v&&!k&&(!$||Y))return null;let M;if(u)M=u;else if(i){const Oe=WE(i);M=Oe&&zne(Oe)?Mo(Oe).body:Mo(null).body}const Te=!k&&v&&(!$||Y)?"none":void 0,fe=$?{in:k,onEnter:ue,onExited:de}:void 0;return Z.jsx(yz,{disablePortal:o,container:M,children:Z.jsx(Bne,_e({anchorEl:i,direction:f,disablePortal:o,modifiers:E,ref:n,open:$?!Y:k,placement:D,popperOptions:R,popperRef:j,slotProps:ee,slots:W},K,{style:_e({position:"fixed",top:0,left:0,display:Te},N),TransitionProps:fe,children:a}))})}),$ne=jne;function Une(e){const t=Mo(e);return t.body===e?sh(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function s0(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function gI(e){return parseInt(sh(e).getComputedStyle(e).paddingRight,10)||0}function Vne(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,i=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||i}function _I(e,t,n,i,a){const u=[t,n,...i];[].forEach.call(e.children,f=>{const o=u.indexOf(f)===-1,v=!Vne(f);o&&v&&s0(f,a)})}function F4(e,t){let n=-1;return e.some((i,a)=>t(i)?(n=a,!0):!1),n}function Wne(e,t){const n=[],i=e.container;if(!t.disableScrollLock){if(Une(i)){const f=ML(Mo(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${gI(i)+f}px`;const o=Mo(i).querySelectorAll(".mui-fixed");[].forEach.call(o,v=>{n.push({value:v.style.paddingRight,property:"padding-right",el:v}),v.style.paddingRight=`${gI(v)+f}px`})}let u;if(i.parentNode instanceof DocumentFragment)u=Mo(i).body;else{const f=i.parentElement,o=sh(i);u=(f==null?void 0:f.nodeName)==="HTML"&&o.getComputedStyle(f).overflowY==="scroll"?f:i}n.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return()=>{n.forEach(({value:u,el:f,property:o})=>{u?f.style.setProperty(o,u):f.style.removeProperty(o)})}}function Hne(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class qne{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&s0(t.modalRef,!1);const a=Hne(n);_I(n,t.mount,t.modalRef,a,!0);const u=F4(this.containers,f=>f.container===n);return u!==-1?(this.containers[u].modals.push(t),i):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:a}),i)}mount(t,n){const i=F4(this.containers,u=>u.modals.indexOf(t)!==-1),a=this.containers[i];a.restore||(a.restore=Wne(a,n))}remove(t,n=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const a=F4(this.containers,f=>f.modals.indexOf(t)!==-1),u=this.containers[a];if(u.modals.splice(u.modals.indexOf(t),1),this.modals.splice(i,1),u.modals.length===0)u.restore&&u.restore(),t.modalRef&&s0(t.modalRef,n),_I(u.container,t.mount,t.modalRef,u.hiddenSiblings,!1),this.containers.splice(a,1);else{const f=u.modals[u.modals.length-1];f.modalRef&&s0(f.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function Gne(e){return vi("MuiModal",e)}Ii("MuiModal",["root","hidden","backdrop"]);const Zne=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],Xne=e=>{const{open:t,exited:n}=e;return Pi({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},lz(Gne))};function Kne(e){return typeof e=="function"?e():e}function Yne(e){return e?e.props.hasOwnProperty("in"):!1}const Jne=new qne,Qne=q.forwardRef(function(t,n){var i,a;const{children:u,closeAfterTransition:f=!1,container:o,disableAutoFocus:v=!1,disableEnforceFocus:E=!1,disableEscapeKeyDown:k=!1,disablePortal:D=!1,disableRestoreFocus:R=!1,disableScrollLock:j=!1,hideBackdrop:N=!1,keepMounted:$=!1,manager:ee=Jne,onBackdropClick:W,onClose:K,onKeyDown:Y,open:ie,onTransitionEnter:ue,onTransitionExited:de,slotProps:M={},slots:Te={}}=t,fe=Qn(t,Zne),Oe=ee,[rt,at]=q.useState(!ie),qe=q.useRef({}),ze=q.useRef(null),Be=q.useRef(null),tt=wo(Be,n),Ke=Yne(u),Le=(i=t["aria-hidden"])!=null?i:!0,Je=()=>Mo(ze.current),it=()=>(qe.current.modalRef=Be.current,qe.current.mountNode=ze.current,qe.current),kt=()=>{Oe.mount(it(),{disableScrollLock:j}),Be.current&&(Be.current.scrollTop=0)},yt=hs(()=>{const ln=Kne(o)||Je().body;Oe.add(it(),ln),Be.current&&kt()}),wt=q.useCallback(()=>Oe.isTopModal(it()),[Oe]),jt=hs(ln=>{ze.current=ln,!(!ln||!Be.current)&&(ie&&wt()?kt():s0(Be.current,Le))}),Qt=q.useCallback(()=>{Oe.remove(it(),Le)},[Oe,Le]);q.useEffect(()=>()=>{Qt()},[Qt]),q.useEffect(()=>{ie?yt():(!Ke||!f)&&Qt()},[ie,Qt,Ke,f,yt]);const en=_e({},t,{closeAfterTransition:f,disableAutoFocus:v,disableEnforceFocus:E,disableEscapeKeyDown:k,disablePortal:D,disableRestoreFocus:R,disableScrollLock:j,exited:rt,hideBackdrop:N,keepMounted:$}),on=Xne(en),Sn=()=>{at(!1),ue&&ue()},Jt=()=>{at(!0),de&&de(),f&&Qt()},yn=ln=>{ln.target===ln.currentTarget&&(W&&W(ln),K&&K(ln,"backdropClick"))},Ft=ln=>{Y&&Y(ln),!(ln.key!=="Escape"||!wt())&&(k||(ln.stopPropagation(),K&&K(ln,"escapeKeyDown")))},nn={};u.props.tabIndex===void 0&&(nn.tabIndex="-1"),Ke&&(nn.onEnter=LE(Sn,u.props.onEnter),nn.onExited=LE(Jt,u.props.onExited));const bn=(a=Te.root)!=null?a:"div",qt=zs({elementType:bn,externalSlotProps:M.root,externalForwardedProps:fe,additionalProps:{ref:tt,role:"presentation",onKeyDown:Ft},className:on.root,ownerState:en}),It=Te.backdrop,Rn=zs({elementType:It,externalSlotProps:M.backdrop,additionalProps:{"aria-hidden":!0,onClick:yn,open:ie},className:on.backdrop,ownerState:en});return!$&&!ie&&(!Ke||rt)?null:Z.jsx(yz,{ref:jt,container:o,disablePortal:D,children:Z.jsxs(bn,_e({},qt,{children:[!N&&It?Z.jsx(It,_e({},Rn)):null,Z.jsx(Ete,{disableEnforceFocus:E,disableAutoFocus:v,disableRestoreFocus:R,isEnabled:wt,open:ie,children:q.cloneElement(u,nn)})]}))})}),ere=Qne,tre=2;function vz(e,t){return e-t}function Mg(e,t,n){return e==null?t:Math.min(Math.max(t,e),n)}function yI(e,t){var n;const{index:i}=(n=e.reduce((a,u,f)=>{const o=Math.abs(t-u);return a===null||o<a.distance||o===a.distance?{distance:o,index:f}:a},null))!=null?n:{};return i}function wv(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let i=0;i<n.changedTouches.length;i+=1){const a=n.changedTouches[i];if(a.identifier===t.current)return{x:a.clientX,y:a.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function J2(e,t,n){return(e-t)*100/(n-t)}function nre(e,t,n){return(n-t)*e+t}function rre(e){if(Math.abs(e)<1){const n=e.toExponential().split("e-"),i=n[0].split(".")[1];return(i?i.length:0)+parseInt(n[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function ire(e,t,n){const i=Math.round((e-n)/t)*t+n;return Number(i.toFixed(rre(t)))}function vI({values:e,newValue:t,index:n}){const i=e.slice();return i[n]=t,i.sort(vz)}function Ev({sliderRef:e,activeIndex:t,setActive:n}){var i,a;const u=Mo(e.current);if(!((i=e.current)!=null&&i.contains(u.activeElement))||Number(u==null||(a=u.activeElement)==null?void 0:a.getAttribute("data-index"))!==t){var f;(f=e.current)==null||f.querySelector(`[type="range"][data-index="${t}"]`).focus()}n&&n(t)}function Sv(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?dte(e,t):!1}const ore={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},are=e=>e;let Tv;function N4(){return Tv===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Tv=CSS.supports("touch-action","none"):Tv=!0),Tv}function sre(e){const{"aria-labelledby":t,defaultValue:n,disabled:i=!1,disableSwap:a=!1,isRtl:u=!1,marks:f=!1,max:o=100,min:v=0,name:E,onChange:k,onChangeCommitted:D,orientation:R="horizontal",rootRef:j,scale:N=are,step:$=1,tabIndex:ee,value:W}=e,K=q.useRef(),[Y,ie]=q.useState(-1),[ue,de]=q.useState(-1),[M,Te]=q.useState(!1),fe=q.useRef(0),[Oe,rt]=hp({controlled:W,default:n??v,name:"Slider"}),at=k&&((Qe,Kt,an)=>{const Zt=Qe.nativeEvent||Qe,rn=new Zt.constructor(Zt.type,Zt);Object.defineProperty(rn,"target",{writable:!0,value:{value:Kt,name:E}}),k(rn,Kt,an)}),qe=Array.isArray(Oe);let ze=qe?Oe.slice().sort(vz):[Oe];ze=ze.map(Qe=>Mg(Qe,v,o));const Be=f===!0&&$!==null?[...Array(Math.floor((o-v)/$)+1)].map((Qe,Kt)=>({value:v+$*Kt})):f||[],tt=Be.map(Qe=>Qe.value),{isFocusVisibleRef:Ke,onBlur:Le,onFocus:Je,ref:it}=h7(),[kt,yt]=q.useState(-1),wt=q.useRef(),jt=wo(it,wt),Qt=wo(j,jt),en=Qe=>Kt=>{var an;const Zt=Number(Kt.currentTarget.getAttribute("data-index"));Je(Kt),Ke.current===!0&&yt(Zt),de(Zt),Qe==null||(an=Qe.onFocus)==null||an.call(Qe,Kt)},on=Qe=>Kt=>{var an;Le(Kt),Ke.current===!1&&yt(-1),de(-1),Qe==null||(an=Qe.onBlur)==null||an.call(Qe,Kt)};Qc(()=>{if(i&&wt.current.contains(document.activeElement)){var Qe;(Qe=document.activeElement)==null||Qe.blur()}},[i]),i&&Y!==-1&&ie(-1),i&&kt!==-1&&yt(-1);const Sn=Qe=>Kt=>{var an;(an=Qe.onChange)==null||an.call(Qe,Kt);const Zt=Number(Kt.currentTarget.getAttribute("data-index")),rn=ze[Zt],sn=tt.indexOf(rn);let vn=Kt.target.valueAsNumber;if(Be&&$==null){const Dn=tt[tt.length-1];vn>Dn?vn=Dn:vn<tt[0]?vn=tt[0]:vn=vn<rn?tt[sn-1]:tt[sn+1]}if(vn=Mg(vn,v,o),qe){a&&(vn=Mg(vn,ze[Zt-1]||-1/0,ze[Zt+1]||1/0));const Dn=vn;vn=vI({values:ze,newValue:vn,index:Zt});let Nn=Zt;a||(Nn=vn.indexOf(Dn)),Ev({sliderRef:wt,activeIndex:Nn})}rt(vn),yt(Zt),at&&!Sv(vn,Oe)&&at(Kt,vn,Zt),D&&D(Kt,vn)},Jt=q.useRef();let yn=R;u&&R==="horizontal"&&(yn+="-reverse");const Ft=({finger:Qe,move:Kt=!1})=>{const{current:an}=wt,{width:Zt,height:rn,bottom:sn,left:vn}=an.getBoundingClientRect();let Dn;yn.indexOf("vertical")===0?Dn=(sn-Qe.y)/rn:Dn=(Qe.x-vn)/Zt,yn.indexOf("-reverse")!==-1&&(Dn=1-Dn);let Nn;if(Nn=nre(Dn,v,o),$)Nn=ire(Nn,$,v);else{const Dr=yI(tt,Nn);Nn=tt[Dr]}Nn=Mg(Nn,v,o);let nr=0;if(qe){Kt?nr=Jt.current:nr=yI(ze,Nn),a&&(Nn=Mg(Nn,ze[nr-1]||-1/0,ze[nr+1]||1/0));const Dr=Nn;Nn=vI({values:ze,newValue:Nn,index:nr}),a&&Kt||(nr=Nn.indexOf(Dr),Jt.current=nr)}return{newValue:Nn,activeIndex:nr}},nn=hs(Qe=>{const Kt=wv(Qe,K);if(!Kt)return;if(fe.current+=1,Qe.type==="mousemove"&&Qe.buttons===0){bn(Qe);return}const{newValue:an,activeIndex:Zt}=Ft({finger:Kt,move:!0});Ev({sliderRef:wt,activeIndex:Zt,setActive:ie}),rt(an),!M&&fe.current>tre&&Te(!0),at&&!Sv(an,Oe)&&at(Qe,an,Zt)}),bn=hs(Qe=>{const Kt=wv(Qe,K);if(Te(!1),!Kt)return;const{newValue:an}=Ft({finger:Kt,move:!0});ie(-1),Qe.type==="touchend"&&de(-1),D&&D(Qe,an),K.current=void 0,It()}),qt=hs(Qe=>{if(i)return;N4()||Qe.preventDefault();const Kt=Qe.changedTouches[0];Kt!=null&&(K.current=Kt.identifier);const an=wv(Qe,K);if(an!==!1){const{newValue:rn,activeIndex:sn}=Ft({finger:an});Ev({sliderRef:wt,activeIndex:sn,setActive:ie}),rt(rn),at&&!Sv(rn,Oe)&&at(Qe,rn,sn)}fe.current=0;const Zt=Mo(wt.current);Zt.addEventListener("touchmove",nn),Zt.addEventListener("touchend",bn)}),It=q.useCallback(()=>{const Qe=Mo(wt.current);Qe.removeEventListener("mousemove",nn),Qe.removeEventListener("mouseup",bn),Qe.removeEventListener("touchmove",nn),Qe.removeEventListener("touchend",bn)},[bn,nn]);q.useEffect(()=>{const{current:Qe}=wt;return Qe.addEventListener("touchstart",qt,{passive:N4()}),()=>{Qe.removeEventListener("touchstart",qt,{passive:N4()}),It()}},[It,qt]),q.useEffect(()=>{i&&It()},[i,It]);const Rn=Qe=>Kt=>{var an;if((an=Qe.onMouseDown)==null||an.call(Qe,Kt),i||Kt.defaultPrevented||Kt.button!==0)return;Kt.preventDefault();const Zt=wv(Kt,K);if(Zt!==!1){const{newValue:sn,activeIndex:vn}=Ft({finger:Zt});Ev({sliderRef:wt,activeIndex:vn,setActive:ie}),rt(sn),at&&!Sv(sn,Oe)&&at(Kt,sn,vn)}fe.current=0;const rn=Mo(wt.current);rn.addEventListener("mousemove",nn),rn.addEventListener("mouseup",bn)},ln=J2(qe?ze[0]:v,v,o),Zn=J2(ze[ze.length-1],v,o)-ln,tr=(Qe={})=>{const Kt={onMouseDown:Rn(Qe||{})},an=_e({},Qe,Kt);return _e({ref:Qt},an)},Fn=Qe=>Kt=>{var an;(an=Qe.onMouseOver)==null||an.call(Qe,Kt);const Zt=Number(Kt.currentTarget.getAttribute("data-index"));de(Zt)},Yn=Qe=>Kt=>{var an;(an=Qe.onMouseLeave)==null||an.call(Qe,Kt),de(-1)};return{active:Y,axis:yn,axisProps:ore,dragging:M,focusedThumbIndex:kt,getHiddenInputProps:(Qe={})=>{var Kt;const an={onChange:Sn(Qe||{}),onFocus:en(Qe||{}),onBlur:on(Qe||{})},Zt=_e({},Qe,an);return _e({tabIndex:ee,"aria-labelledby":t,"aria-orientation":R,"aria-valuemax":N(o),"aria-valuemin":N(v),name:E,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(Kt=e.step)!=null?Kt:void 0,disabled:i},Zt,{style:_e({},VY,{direction:u?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:tr,getThumbProps:(Qe={})=>{const Kt={onMouseOver:Fn(Qe||{}),onMouseLeave:Yn(Qe||{})};return _e({},Qe,Kt)},marks:Be,open:ue,range:qe,rootRef:Qt,trackLeap:Zn,trackOffset:ln,values:ze,getThumbStyle:Qe=>({pointerEvents:Y!==-1&&Y!==Qe?"none":void 0})}}const lre=["onChange","maxRows","minRows","style","value"];function Cv(e){return parseInt(e,10)||0}const cre={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function xI(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const ure=q.forwardRef(function(t,n){const{onChange:i,maxRows:a,minRows:u=1,style:f,value:o}=t,v=Qn(t,lre),{current:E}=q.useRef(o!=null),k=q.useRef(null),D=wo(n,k),R=q.useRef(null),j=q.useRef(0),[N,$]=q.useState({outerHeightStyle:0}),ee=q.useCallback(()=>{const ue=k.current,M=sh(ue).getComputedStyle(ue);if(M.width==="0px")return{outerHeightStyle:0};const Te=R.current;Te.style.width=M.width,Te.value=ue.value||t.placeholder||"x",Te.value.slice(-1)===`
`&&(Te.value+=" ");const fe=M.boxSizing,Oe=Cv(M.paddingBottom)+Cv(M.paddingTop),rt=Cv(M.borderBottomWidth)+Cv(M.borderTopWidth),at=Te.scrollHeight;Te.value="x";const qe=Te.scrollHeight;let ze=at;u&&(ze=Math.max(Number(u)*qe,ze)),a&&(ze=Math.min(Number(a)*qe,ze)),ze=Math.max(ze,qe);const Be=ze+(fe==="border-box"?Oe+rt:0),tt=Math.abs(ze-at)<=1;return{outerHeightStyle:Be,overflow:tt}},[a,u,t.placeholder]),W=(ue,de)=>{const{outerHeightStyle:M,overflow:Te}=de;return j.current<20&&(M>0&&Math.abs((ue.outerHeightStyle||0)-M)>1||ue.overflow!==Te)?(j.current+=1,{overflow:Te,outerHeightStyle:M}):ue},K=q.useCallback(()=>{const ue=ee();xI(ue)||$(de=>W(de,ue))},[ee]),Y=()=>{const ue=ee();xI(ue)||ih.flushSync(()=>{$(de=>W(de,ue))})};q.useEffect(()=>{const ue=u7(()=>{j.current=0,k.current&&Y()});let de;const M=k.current,Te=sh(M);return Te.addEventListener("resize",ue),typeof ResizeObserver<"u"&&(de=new ResizeObserver(ue),de.observe(M)),()=>{ue.clear(),Te.removeEventListener("resize",ue),de&&de.disconnect()}}),Qc(()=>{K()}),q.useEffect(()=>{j.current=0},[o]);const ie=ue=>{j.current=0,E||K(),i&&i(ue)};return Z.jsxs(q.Fragment,{children:[Z.jsx("textarea",_e({value:o,onChange:ie,ref:D,rows:u,style:_e({height:N.outerHeightStyle,overflow:N.overflow?"hidden":void 0},f)},v)),Z.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:R,tabIndex:-1,style:_e({},cre.shadow,f,{paddingTop:0,paddingBottom:0})})]})}),dre=ure;function bI(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function hre(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:i,matchFrom:a="any",stringify:u,trim:f=!1}=e;return(o,{inputValue:v,getOptionLabel:E})=>{let k=f?v.trim():v;n&&(k=k.toLowerCase()),t&&(k=bI(k));const D=k?o.filter(R=>{let j=(u||E)(R);return n&&(j=j.toLowerCase()),t&&(j=bI(j)),a==="start"?j.indexOf(k)===0:j.indexOf(k)>-1}):o;return typeof i=="number"?D.slice(0,i):D}}function B4(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const pre=hre(),wI=5,fre=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function mre(e){const{unstable_isActiveElementInListbox:t=fre,unstable_classNamePrefix:n="Mui",autoComplete:i=!1,autoHighlight:a=!1,autoSelect:u=!1,blurOnSelect:f=!1,clearOnBlur:o=!e.freeSolo,clearOnEscape:v=!1,componentName:E="useAutocomplete",defaultValue:k=e.multiple?[]:null,disableClearable:D=!1,disableCloseOnSelect:R=!1,disabled:j,disabledItemsFocusable:N=!1,disableListWrap:$=!1,filterOptions:ee=pre,filterSelectedOptions:W=!1,freeSolo:K=!1,getOptionDisabled:Y,getOptionLabel:ie=Ze=>{var Se;return(Se=Ze.label)!=null?Se:Ze},groupBy:ue,handleHomeEndKeys:de=!e.freeSolo,id:M,includeInputInList:Te=!1,inputValue:fe,isOptionEqualToValue:Oe=(Ze,Se)=>Ze===Se,multiple:rt=!1,onChange:at,onClose:qe,onHighlightChange:ze,onInputChange:Be,onOpen:tt,open:Ke,openOnFocus:Le=!1,options:Je,readOnly:it=!1,selectOnFocus:kt=!e.freeSolo,value:yt}=e,wt=d7(M);let jt=ie;jt=Ze=>{const Se=ie(Ze);return typeof Se!="string"?String(Se):Se};const Qt=q.useRef(!1),en=q.useRef(!0),on=q.useRef(null),Sn=q.useRef(null),[Jt,yn]=q.useState(null),[Ft,nn]=q.useState(-1),bn=a?0:-1,qt=q.useRef(bn),[It,Rn]=hp({controlled:yt,default:k,name:E}),[ln,Zn]=hp({controlled:fe,default:"",name:E,state:"inputValue"}),[tr,Fn]=q.useState(!1),Yn=q.useCallback((Ze,Se)=>{if(!(rt?It.length<Se.length:Se!==null)&&!o)return;let Rt;if(rt)Rt="";else if(Se==null)Rt="";else{const un=jt(Se);Rt=typeof un=="string"?un:""}ln!==Rt&&(Zn(Rt),Be&&Be(Ze,Rt,"reset"))},[jt,ln,rt,Be,Zn,o,It]),[Un,qn]=hp({controlled:Ke,default:!1,name:E,state:"open"}),[wn,Qe]=q.useState(!0),Kt=!rt&&It!=null&&ln===jt(It),an=Un&&!it,Zt=an?ee(Je.filter(Ze=>!(W&&(rt?It:[It]).some(Se=>Se!==null&&Oe(Ze,Se)))),{inputValue:Kt&&wn?"":ln,getOptionLabel:jt}):[],rn=$Y({filteredOptions:Zt,value:It,inputValue:ln});q.useEffect(()=>{const Ze=It!==rn.value;tr&&!Ze||K&&!Ze||Yn(null,It)},[It,Yn,tr,rn.value,K]);const sn=Un&&Zt.length>0&&!it,vn=hs(Ze=>{Ze===-1?on.current.focus():Jt.querySelector(`[data-tag-index="${Ze}"]`).focus()});q.useEffect(()=>{rt&&Ft>It.length-1&&(nn(-1),vn(-1))},[It,rt,Ft,vn]);function Dn(Ze,Se){if(!Sn.current||Ze===-1)return-1;let ct=Ze;for(;;){if(Se==="next"&&ct===Zt.length||Se==="previous"&&ct===-1)return-1;const Rt=Sn.current.querySelector(`[data-option-index="${ct}"]`),un=N?!1:!Rt||Rt.disabled||Rt.getAttribute("aria-disabled")==="true";if(Rt&&!Rt.hasAttribute("tabindex")||un)ct+=Se==="next"?1:-1;else return ct}}const Nn=hs(({event:Ze,index:Se,reason:ct="auto"})=>{if(qt.current=Se,Se===-1?on.current.removeAttribute("aria-activedescendant"):on.current.setAttribute("aria-activedescendant",`${wt}-option-${Se}`),ze&&ze(Ze,Se===-1?null:Zt[Se],ct),!Sn.current)return;const Rt=Sn.current.querySelector(`[role="option"].${n}-focused`);Rt&&(Rt.classList.remove(`${n}-focused`),Rt.classList.remove(`${n}-focusVisible`));let un=Sn.current;if(Sn.current.getAttribute("role")!=="listbox"&&(un=Sn.current.parentElement.querySelector('[role="listbox"]')),!un)return;if(Se===-1){un.scrollTop=0;return}const fr=Sn.current.querySelector(`[data-option-index="${Se}"]`);if(fr&&(fr.classList.add(`${n}-focused`),ct==="keyboard"&&fr.classList.add(`${n}-focusVisible`),un.scrollHeight>un.clientHeight&&ct!=="mouse"&&ct!=="touch")){const Ar=fr,Vn=un.clientHeight+un.scrollTop,Do=Ar.offsetTop+Ar.offsetHeight;Do>Vn?un.scrollTop=Do-un.clientHeight:Ar.offsetTop-Ar.offsetHeight*(ue?1.3:0)<un.scrollTop&&(un.scrollTop=Ar.offsetTop-Ar.offsetHeight*(ue?1.3:0))}}),nr=hs(({event:Ze,diff:Se,direction:ct="next",reason:Rt="auto"})=>{if(!an)return;const fr=Dn((()=>{const Ar=Zt.length-1;if(Se==="reset")return bn;if(Se==="start")return 0;if(Se==="end")return Ar;const Vn=qt.current+Se;return Vn<0?Vn===-1&&Te?-1:$&&qt.current!==-1||Math.abs(Se)>1?0:Ar:Vn>Ar?Vn===Ar+1&&Te?-1:$||Math.abs(Se)>1?Ar:0:Vn})(),ct);if(Nn({index:fr,reason:Rt,event:Ze}),i&&Se!=="reset")if(fr===-1)on.current.value=ln;else{const Ar=jt(Zt[fr]);on.current.value=Ar,Ar.toLowerCase().indexOf(ln.toLowerCase())===0&&ln.length>0&&on.current.setSelectionRange(ln.length,Ar.length)}}),Dr=()=>{const Ze=(Se,ct)=>{const Rt=Se?jt(Se):"",un=ct?jt(ct):"";return Rt===un};if(qt.current!==-1&&rn.filteredOptions&&rn.filteredOptions.length!==Zt.length&&rn.inputValue===ln&&(rt?It.length===rn.value.length&&rn.value.every((Se,ct)=>jt(It[ct])===jt(Se)):Ze(rn.value,It))){const Se=rn.filteredOptions[qt.current];if(Se&&Zt.some(Rt=>jt(Rt)===jt(Se)))return!0}return!1},yr=q.useCallback(()=>{if(!an||Dr())return;const Ze=rt?It[0]:It;if(Zt.length===0||Ze==null){nr({diff:"reset"});return}if(Sn.current){if(Ze!=null){const Se=Zt[qt.current];if(rt&&Se&&B4(It,Rt=>Oe(Se,Rt))!==-1)return;const ct=B4(Zt,Rt=>Oe(Rt,Ze));ct===-1?nr({diff:"reset"}):Nn({index:ct});return}if(qt.current>=Zt.length-1){Nn({index:Zt.length-1});return}Nn({index:qt.current})}},[Zt.length,rt?!1:It,W,nr,Nn,an,ln,rt]),bi=hs(Ze=>{Z0(Sn,Ze),Ze&&yr()});q.useEffect(()=>{yr()},[yr]);const pi=Ze=>{Un||(qn(!0),Qe(!0),tt&&tt(Ze))},Ce=(Ze,Se)=>{Un&&(qn(!1),qe&&qe(Ze,Se))},oe=(Ze,Se,ct,Rt)=>{if(rt){if(It.length===Se.length&&It.every((un,fr)=>un===Se[fr]))return}else if(It===Se)return;at&&at(Ze,Se,ct,Rt),Rn(Se)},ae=q.useRef(!1),ye=(Ze,Se,ct="selectOption",Rt="options")=>{let un=ct,fr=Se;if(rt){fr=Array.isArray(It)?It.slice():[];const Ar=B4(fr,Vn=>Oe(Se,Vn));Ar===-1?fr.push(Se):Rt!=="freeSolo"&&(fr.splice(Ar,1),un="removeOption")}Yn(Ze,fr),oe(Ze,fr,un,{option:Se}),!R&&(!Ze||!Ze.ctrlKey&&!Ze.metaKey)&&Ce(Ze,un),(f===!0||f==="touch"&&ae.current||f==="mouse"&&!ae.current)&&on.current.blur()};function De(Ze,Se){if(Ze===-1)return-1;let ct=Ze;for(;;){if(Se==="next"&&ct===It.length||Se==="previous"&&ct===-1)return-1;const Rt=Jt.querySelector(`[data-tag-index="${ct}"]`);if(!Rt||!Rt.hasAttribute("tabindex")||Rt.disabled||Rt.getAttribute("aria-disabled")==="true")ct+=Se==="next"?1:-1;else return ct}}const Re=(Ze,Se)=>{if(!rt)return;ln===""&&Ce(Ze,"toggleInput");let ct=Ft;Ft===-1?ln===""&&Se==="previous"&&(ct=It.length-1):(ct+=Se==="next"?1:-1,ct<0&&(ct=0),ct===It.length&&(ct=-1)),ct=De(ct,Se),nn(ct),vn(ct)},Ge=Ze=>{Qt.current=!0,Zn(""),Be&&Be(Ze,"","clear"),oe(Ze,rt?[]:null,"clear")},Xe=Ze=>Se=>{if(Ze.onKeyDown&&Ze.onKeyDown(Se),!Se.defaultMuiPrevented&&(Ft!==-1&&["ArrowLeft","ArrowRight"].indexOf(Se.key)===-1&&(nn(-1),vn(-1)),Se.which!==229))switch(Se.key){case"Home":an&&de&&(Se.preventDefault(),nr({diff:"start",direction:"next",reason:"keyboard",event:Se}));break;case"End":an&&de&&(Se.preventDefault(),nr({diff:"end",direction:"previous",reason:"keyboard",event:Se}));break;case"PageUp":Se.preventDefault(),nr({diff:-wI,direction:"previous",reason:"keyboard",event:Se}),pi(Se);break;case"PageDown":Se.preventDefault(),nr({diff:wI,direction:"next",reason:"keyboard",event:Se}),pi(Se);break;case"ArrowDown":Se.preventDefault(),nr({diff:1,direction:"next",reason:"keyboard",event:Se}),pi(Se);break;case"ArrowUp":Se.preventDefault(),nr({diff:-1,direction:"previous",reason:"keyboard",event:Se}),pi(Se);break;case"ArrowLeft":Re(Se,"previous");break;case"ArrowRight":Re(Se,"next");break;case"Enter":if(qt.current!==-1&&an){const ct=Zt[qt.current],Rt=Y?Y(ct):!1;if(Se.preventDefault(),Rt)return;ye(Se,ct,"selectOption"),i&&on.current.setSelectionRange(on.current.value.length,on.current.value.length)}else K&&ln!==""&&Kt===!1&&(rt&&Se.preventDefault(),ye(Se,ln,"createOption","freeSolo"));break;case"Escape":an?(Se.preventDefault(),Se.stopPropagation(),Ce(Se,"escape")):v&&(ln!==""||rt&&It.length>0)&&(Se.preventDefault(),Se.stopPropagation(),Ge(Se));break;case"Backspace":if(rt&&!it&&ln===""&&It.length>0){const ct=Ft===-1?It.length-1:Ft,Rt=It.slice();Rt.splice(ct,1),oe(Se,Rt,"removeOption",{option:It[ct]})}break;case"Delete":if(rt&&!it&&ln===""&&It.length>0&&Ft!==-1){const ct=Ft,Rt=It.slice();Rt.splice(ct,1),oe(Se,Rt,"removeOption",{option:It[ct]})}break}},Ue=Ze=>{Fn(!0),Le&&!Qt.current&&pi(Ze)},je=Ze=>{if(t(Sn)){on.current.focus();return}Fn(!1),en.current=!0,Qt.current=!1,u&&qt.current!==-1&&an?ye(Ze,Zt[qt.current],"blur"):u&&K&&ln!==""?ye(Ze,ln,"blur","freeSolo"):o&&Yn(Ze,It),Ce(Ze,"blur")},ut=Ze=>{const Se=Ze.target.value;ln!==Se&&(Zn(Se),Qe(!1),Be&&Be(Ze,Se,"input")),Se===""?!D&&!rt&&oe(Ze,null,"clear"):pi(Ze)},At=Ze=>{const Se=Number(Ze.currentTarget.getAttribute("data-option-index"));qt.current!==Se&&Nn({event:Ze,index:Se,reason:"mouse"})},Tt=Ze=>{Nn({event:Ze,index:Number(Ze.currentTarget.getAttribute("data-option-index")),reason:"touch"}),ae.current=!0},gn=Ze=>{const Se=Number(Ze.currentTarget.getAttribute("data-option-index"));ye(Ze,Zt[Se],"selectOption"),ae.current=!1},On=Ze=>Se=>{const ct=It.slice();ct.splice(Ze,1),oe(Se,ct,"removeOption",{option:It[Ze]})},An=Ze=>{Un?Ce(Ze,"toggleInput"):pi(Ze)},Ln=Ze=>{Ze.currentTarget.contains(Ze.target)&&Ze.target.getAttribute("id")!==wt&&Ze.preventDefault()},Xn=Ze=>{Ze.currentTarget.contains(Ze.target)&&(on.current.focus(),kt&&en.current&&on.current.selectionEnd-on.current.selectionStart===0&&on.current.select(),en.current=!1)},wr=Ze=>{(ln===""||!Un)&&An(Ze)};let Er=K&&ln.length>0;Er=Er||(rt?It.length>0:It!==null);let Or=Zt;return ue&&(Or=Zt.reduce((Ze,Se,ct)=>{const Rt=ue(Se);return Ze.length>0&&Ze[Ze.length-1].group===Rt?Ze[Ze.length-1].options.push(Se):Ze.push({key:ct,index:ct,group:Rt,options:[Se]}),Ze},[])),j&&tr&&je(),{getRootProps:(Ze={})=>_e({"aria-owns":sn?`${wt}-listbox`:null},Ze,{onKeyDown:Xe(Ze),onMouseDown:Ln,onClick:Xn}),getInputLabelProps:()=>({id:`${wt}-label`,htmlFor:wt}),getInputProps:()=>({id:wt,value:ln,onBlur:je,onFocus:Ue,onChange:ut,onMouseDown:wr,"aria-activedescendant":an?"":null,"aria-autocomplete":i?"both":"list","aria-controls":sn?`${wt}-listbox`:void 0,"aria-expanded":sn,autoComplete:"off",ref:on,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:j}),getClearProps:()=>({tabIndex:-1,onClick:Ge}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:An}),getTagProps:({index:Ze})=>_e({key:Ze,"data-tag-index":Ze,tabIndex:-1},!it&&{onDelete:On(Ze)}),getListboxProps:()=>({role:"listbox",id:`${wt}-listbox`,"aria-labelledby":`${wt}-label`,ref:bi,onMouseDown:Ze=>{Ze.preventDefault()}}),getOptionProps:({index:Ze,option:Se})=>{const ct=(rt?It:[It]).some(un=>un!=null&&Oe(Se,un)),Rt=Y?Y(Se):!1;return{key:jt(Se),tabIndex:-1,role:"option",id:`${wt}-option-${Ze}`,onMouseMove:At,onClick:gn,onTouchStart:Tt,"data-option-index":Ze,"aria-disabled":Rt,"aria-selected":ct}},id:wt,inputValue:ln,value:It,dirty:Er,expanded:an&&Jt,popupOpen:an,focused:tr||Ft!==-1,anchorEl:Jt,setAnchorEl:yn,focusedTag:Ft,groupedOptions:Or}}const gre=e=>!e||!Bu(e),_re=gre;function yre(e){return vi("MuiSlider",e)}const vre=Ii("MuiSlider",["root","active","colorPrimary","colorSecondary","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),ic=vre,xre=e=>{const{open:t}=e;return{offset:rr(t&&ic.valueLabelOpen),circle:ic.valueLabelCircle,label:ic.valueLabelLabel}};function bre(e){const{children:t,className:n,value:i}=e,a=xre(e);return t?q.cloneElement(t,{className:rr(t.props.className)},Z.jsxs(q.Fragment,{children:[t.props.children,Z.jsx("span",{className:rr(a.offset,n),"aria-hidden":!0,children:Z.jsx("span",{className:a.circle,children:Z.jsx("span",{className:a.label,children:i})})})]})):null}const wre=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function EI(e){return e}const Ere=$n("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${In(n.color)}`],n.size!=="medium"&&t[`size${In(n.size)}`],n.marked&&t.marked,n.orientation==="vertical"&&t.vertical,n.track==="inverted"&&t.trackInverted,n.track===!1&&t.trackFalse]}})(({theme:e,ownerState:t})=>_e({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[t.color].main,WebkitTapHighlightColor:"transparent"},t.orientation==="horizontal"&&_e({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},t.size==="small"&&{height:2},t.marked&&{marginBottom:20}),t.orientation==="vertical"&&_e({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},t.size==="small"&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${ic.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${ic.dragging}`]:{[`& .${ic.thumb}, & .${ic.track}`]:{transition:"none"}}})),Sre=$n("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})(({ownerState:e})=>_e({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},e.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track==="inverted"&&{opacity:1})),Tre=$n("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?oz(e.palette[t.color].main,.62):iz(e.palette[t.color].main,.5);return _e({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{border:"none"},t.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track===!1&&{display:"none"},t.track==="inverted"&&{backgroundColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n,borderColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n})}),Cre=$n("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${In(n.color)}`],n.size!=="medium"&&t[`thumbSize${In(n.size)}`]]}})(({theme:e,ownerState:t})=>_e({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{width:12,height:12},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":_e({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},t.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${ic.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:no(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${ic.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:no(e.palette[t.color].main,.16)}`},[`&.${ic.disabled}`]:{"&:hover":{boxShadow:"none"}}})),kre=$n(bre,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e,ownerState:t})=>_e({[`&.${ic.valueLabelOpen}`]:{transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},t.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},t.orientation==="vertical"&&{right:t.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"}},t.size==="small"&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),Pre=$n("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>R7(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})(({theme:e,ownerState:t,markActive:n})=>_e({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8})),Ire=$n("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>R7(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e,ownerState:t,markLabelActive:n})=>_e({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},t.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},t.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(e.vars||e).palette.text.primary})),Are=e=>{const{disabled:t,dragging:n,marked:i,orientation:a,track:u,classes:f,color:o,size:v}=e,E={root:["root",t&&"disabled",n&&"dragging",i&&"marked",a==="vertical"&&"vertical",u==="inverted"&&"trackInverted",u===!1&&"trackFalse",o&&`color${In(o)}`,v&&`size${In(v)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",v&&`thumbSize${In(v)}`,o&&`thumbColor${In(o)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Pi(E,yre,f)},Mre=({children:e})=>e,Dre=q.forwardRef(function(t,n){var i,a,u,f,o,v,E,k,D,R,j,N,$,ee,W,K,Y,ie,ue,de,M,Te,fe,Oe;const rt=Ai({props:t,name:"MuiSlider"}),qe=Ob().direction==="rtl",{"aria-label":ze,"aria-valuetext":Be,"aria-labelledby":tt,component:Ke="span",components:Le={},componentsProps:Je={},color:it="primary",classes:kt,className:yt,disableSwap:wt=!1,disabled:jt=!1,getAriaLabel:Qt,getAriaValueText:en,marks:on=!1,max:Sn=100,min:Jt=0,orientation:yn="horizontal",size:Ft="medium",step:nn=1,scale:bn=EI,slotProps:qt,slots:It,track:Rn="normal",valueLabelDisplay:ln="off",valueLabelFormat:Zn=EI}=rt,tr=Qn(rt,wre),Fn=_e({},rt,{isRtl:qe,max:Sn,min:Jt,classes:kt,disabled:jt,disableSwap:wt,orientation:yn,marks:on,color:it,size:Ft,step:nn,scale:bn,track:Rn,valueLabelDisplay:ln,valueLabelFormat:Zn}),{axisProps:Yn,getRootProps:Un,getHiddenInputProps:qn,getThumbProps:wn,open:Qe,active:Kt,axis:an,focusedThumbIndex:Zt,range:rn,dragging:sn,marks:vn,values:Dn,trackOffset:Nn,trackLeap:nr,getThumbStyle:Dr}=sre(_e({},Fn,{rootRef:n}));Fn.marked=vn.length>0&&vn.some(Se=>Se.label),Fn.dragging=sn,Fn.focusedThumbIndex=Zt;const yr=Are(Fn),bi=(i=(a=It==null?void 0:It.root)!=null?a:Le.Root)!=null?i:Ere,pi=(u=(f=It==null?void 0:It.rail)!=null?f:Le.Rail)!=null?u:Sre,Ce=(o=(v=It==null?void 0:It.track)!=null?v:Le.Track)!=null?o:Tre,oe=(E=(k=It==null?void 0:It.thumb)!=null?k:Le.Thumb)!=null?E:Cre,ae=(D=(R=It==null?void 0:It.valueLabel)!=null?R:Le.ValueLabel)!=null?D:kre,ye=(j=(N=It==null?void 0:It.mark)!=null?N:Le.Mark)!=null?j:Pre,De=($=(ee=It==null?void 0:It.markLabel)!=null?ee:Le.MarkLabel)!=null?$:Ire,Re=(W=(K=It==null?void 0:It.input)!=null?K:Le.Input)!=null?W:"input",Ge=(Y=qt==null?void 0:qt.root)!=null?Y:Je.root,Xe=(ie=qt==null?void 0:qt.rail)!=null?ie:Je.rail,Ue=(ue=qt==null?void 0:qt.track)!=null?ue:Je.track,je=(de=qt==null?void 0:qt.thumb)!=null?de:Je.thumb,ut=(M=qt==null?void 0:qt.valueLabel)!=null?M:Je.valueLabel,At=(Te=qt==null?void 0:qt.mark)!=null?Te:Je.mark,Tt=(fe=qt==null?void 0:qt.markLabel)!=null?fe:Je.markLabel,gn=(Oe=qt==null?void 0:qt.input)!=null?Oe:Je.input,On=zs({elementType:bi,getSlotProps:Un,externalSlotProps:Ge,externalForwardedProps:tr,additionalProps:_e({},_re(bi)&&{as:Ke}),ownerState:_e({},Fn,Ge==null?void 0:Ge.ownerState),className:[yr.root,yt]}),An=zs({elementType:pi,externalSlotProps:Xe,ownerState:Fn,className:yr.rail}),Ln=zs({elementType:Ce,externalSlotProps:Ue,additionalProps:{style:_e({},Yn[an].offset(Nn),Yn[an].leap(nr))},ownerState:_e({},Fn,Ue==null?void 0:Ue.ownerState),className:yr.track}),Xn=zs({elementType:oe,getSlotProps:wn,externalSlotProps:je,ownerState:_e({},Fn,je==null?void 0:je.ownerState),className:yr.thumb}),wr=zs({elementType:ae,externalSlotProps:ut,ownerState:_e({},Fn,ut==null?void 0:ut.ownerState),className:yr.valueLabel}),Er=zs({elementType:ye,externalSlotProps:At,ownerState:Fn,className:yr.mark}),Or=zs({elementType:De,externalSlotProps:Tt,ownerState:Fn,className:yr.markLabel}),Ze=zs({elementType:Re,getSlotProps:qn,externalSlotProps:gn,ownerState:Fn});return Z.jsxs(bi,_e({},On,{children:[Z.jsx(pi,_e({},An)),Z.jsx(Ce,_e({},Ln)),vn.filter(Se=>Se.value>=Jt&&Se.value<=Sn).map((Se,ct)=>{const Rt=J2(Se.value,Jt,Sn),un=Yn[an].offset(Rt);let fr;return Rn===!1?fr=Dn.indexOf(Se.value)!==-1:fr=Rn==="normal"&&(rn?Se.value>=Dn[0]&&Se.value<=Dn[Dn.length-1]:Se.value<=Dn[0])||Rn==="inverted"&&(rn?Se.value<=Dn[0]||Se.value>=Dn[Dn.length-1]:Se.value>=Dn[0]),Z.jsxs(q.Fragment,{children:[Z.jsx(ye,_e({"data-index":ct},Er,!Bu(ye)&&{markActive:fr},{style:_e({},un,Er.style),className:rr(Er.className,fr&&yr.markActive)})),Se.label!=null?Z.jsx(De,_e({"aria-hidden":!0,"data-index":ct},Or,!Bu(De)&&{markLabelActive:fr},{style:_e({},un,Or.style),className:rr(yr.markLabel,Or.className,fr&&yr.markLabelActive),children:Se.label})):null]},ct)}),Dn.map((Se,ct)=>{const Rt=J2(Se,Jt,Sn),un=Yn[an].offset(Rt),fr=ln==="off"?Mre:ae;return Z.jsx(fr,_e({},!Bu(fr)&&{valueLabelFormat:Zn,valueLabelDisplay:ln,value:typeof Zn=="function"?Zn(bn(Se),ct):Zn,index:ct,open:Qe===ct||Kt===ct||ln==="on",disabled:jt},wr,{children:Z.jsx(oe,_e({"data-index":ct},Xn,{className:rr(yr.thumb,Xn.className,Kt===ct&&yr.active,Zt===ct&&yr.focusVisible),style:_e({},un,Dr(ct),Xn.style),children:Z.jsx(Re,_e({"data-index":ct,"aria-label":Qt?Qt(ct):ze,"aria-valuenow":bn(Se),"aria-labelledby":tt,"aria-valuetext":en?en(bn(Se),ct):Be,value:Dn[ct]},Ze))}))}),ct)})]}))}),Ore=Dre;function sm({props:e,states:t,muiFormControl:n}){return t.reduce((i,a)=>(i[a]=e[a],n&&typeof e[a]>"u"&&(i[a]=n[a]),i),{})}const Rre=q.createContext(void 0),V7=Rre;function lm(){return q.useContext(V7)}function Lre(e){return Z.jsx(ZQ,_e({},e,{defaultTheme:Db,themeId:M1}))}function SI(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Q2(e,t=!1){return e&&(SI(e.value)&&e.value!==""||t&&SI(e.defaultValue)&&e.defaultValue!=="")}function zre(e){return e.startAdornment}function Fre(e){return vi("MuiInputBase",e)}const Nre=Ii("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Fs=Nre,Bre=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Lb=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${In(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},zb=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},jre=e=>{const{classes:t,color:n,disabled:i,error:a,endAdornment:u,focused:f,formControl:o,fullWidth:v,hiddenLabel:E,multiline:k,readOnly:D,size:R,startAdornment:j,type:N}=e,$={root:["root",`color${In(n)}`,i&&"disabled",a&&"error",v&&"fullWidth",f&&"focused",o&&"formControl",R==="small"&&"sizeSmall",k&&"multiline",j&&"adornedStart",u&&"adornedEnd",E&&"hiddenLabel",D&&"readOnly"],input:["input",i&&"disabled",N==="search"&&"inputTypeSearch",k&&"inputMultiline",R==="small"&&"inputSizeSmall",E&&"inputHiddenLabel",j&&"inputAdornedStart",u&&"inputAdornedEnd",D&&"readOnly"]};return Pi($,Fre,t)},Fb=$n("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Lb})(({theme:e,ownerState:t})=>_e({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Fs.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&_e({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),Nb=$n("input",{name:"MuiInputBase",slot:"Input",overridesResolver:zb})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",i=_e({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),a={opacity:"0 !important"},u=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return _e({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Fs.formControl} &`]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":u,"&:focus::-moz-placeholder":u,"&:focus:-ms-input-placeholder":u,"&:focus::-ms-input-placeholder":u},[`&.${Fs.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),$re=Z.jsx(Lre,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Ure=q.forwardRef(function(t,n){var i;const a=Ai({props:t,name:"MuiInputBase"}),{"aria-describedby":u,autoComplete:f,autoFocus:o,className:v,components:E={},componentsProps:k={},defaultValue:D,disabled:R,disableInjectingGlobalStyles:j,endAdornment:N,fullWidth:$=!1,id:ee,inputComponent:W="input",inputProps:K={},inputRef:Y,maxRows:ie,minRows:ue,multiline:de=!1,name:M,onBlur:Te,onChange:fe,onClick:Oe,onFocus:rt,onKeyDown:at,onKeyUp:qe,placeholder:ze,readOnly:Be,renderSuffix:tt,rows:Ke,slotProps:Le={},slots:Je={},startAdornment:it,type:kt="text",value:yt}=a,wt=Qn(a,Bre),jt=K.value!=null?K.value:yt,{current:Qt}=q.useRef(jt!=null),en=q.useRef(),on=q.useCallback(Zt=>{},[]),Sn=wo(en,Y,K.ref,on),[Jt,yn]=q.useState(!1),Ft=lm(),nn=sm({props:a,muiFormControl:Ft,states:["color","disabled","error","hiddenLabel","size","required","filled"]});nn.focused=Ft?Ft.focused:Jt,q.useEffect(()=>{!Ft&&R&&Jt&&(yn(!1),Te&&Te())},[Ft,R,Jt,Te]);const bn=Ft&&Ft.onFilled,qt=Ft&&Ft.onEmpty,It=q.useCallback(Zt=>{Q2(Zt)?bn&&bn():qt&&qt()},[bn,qt]);Qc(()=>{Qt&&It({value:jt})},[jt,It,Qt]);const Rn=Zt=>{if(nn.disabled){Zt.stopPropagation();return}rt&&rt(Zt),K.onFocus&&K.onFocus(Zt),Ft&&Ft.onFocus?Ft.onFocus(Zt):yn(!0)},ln=Zt=>{Te&&Te(Zt),K.onBlur&&K.onBlur(Zt),Ft&&Ft.onBlur?Ft.onBlur(Zt):yn(!1)},Zn=(Zt,...rn)=>{if(!Qt){const sn=Zt.target||en.current;if(sn==null)throw new Error(ah(1));It({value:sn.value})}K.onChange&&K.onChange(Zt,...rn),fe&&fe(Zt,...rn)};q.useEffect(()=>{It(en.current)},[]);const tr=Zt=>{en.current&&Zt.currentTarget===Zt.target&&en.current.focus(),Oe&&!nn.disabled&&Oe(Zt)};let Fn=W,Yn=K;de&&Fn==="input"&&(Ke?Yn=_e({type:void 0,minRows:Ke,maxRows:Ke},Yn):Yn=_e({type:void 0,maxRows:ie,minRows:ue},Yn),Fn=dre);const Un=Zt=>{It(Zt.animationName==="mui-auto-fill-cancel"?en.current:{value:"x"})};q.useEffect(()=>{Ft&&Ft.setAdornedStart(!!it)},[Ft,it]);const qn=_e({},a,{color:nn.color||"primary",disabled:nn.disabled,endAdornment:N,error:nn.error,focused:nn.focused,formControl:Ft,fullWidth:$,hiddenLabel:nn.hiddenLabel,multiline:de,size:nn.size,startAdornment:it,type:kt}),wn=jre(qn),Qe=Je.root||E.Root||Fb,Kt=Le.root||k.root||{},an=Je.input||E.Input||Nb;return Yn=_e({},Yn,(i=Le.input)!=null?i:k.input),Z.jsxs(q.Fragment,{children:[!j&&$re,Z.jsxs(Qe,_e({},Kt,!Bu(Qe)&&{ownerState:_e({},qn,Kt.ownerState)},{ref:n,onClick:tr},wt,{className:rr(wn.root,Kt.className,v,Be&&"MuiInputBase-readOnly"),children:[it,Z.jsx(V7.Provider,{value:null,children:Z.jsx(an,_e({ownerState:qn,"aria-invalid":nn.error,"aria-describedby":u,autoComplete:f,autoFocus:o,defaultValue:D,disabled:nn.disabled,id:ee,onAnimationStart:Un,name:M,placeholder:ze,readOnly:Be,required:nn.required,rows:Ke,value:jt,onKeyDown:at,onKeyUp:qe,type:kt},Yn,!Bu(an)&&{as:Fn,ownerState:_e({},qn,Yn.ownerState)},{ref:Sn,className:rr(wn.input,Yn.className,Be&&"MuiInputBase-readOnly"),onBlur:ln,onChange:Zn,onFocus:Rn}))}),N,tt?tt(_e({},nn,{startAdornment:it})):null]}))]})}),W7=Ure;function Vre(e){return vi("MuiInput",e)}const Wre=_e({},Fs,Ii("MuiInput",["root","underline","input"])),Dd=Wre,Hre=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],qre=e=>{const{classes:t,disableUnderline:n}=e,a=Pi({root:["root",!n&&"underline"],input:["input"]},Vre,t);return _e({},t,a)},Gre=$n(Fb,{shouldForwardProp:e=>Yu(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Lb(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let i=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(i=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),_e({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Dd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Dd.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Dd.disabled}, .${Dd.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${Dd.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Zre=$n(Nb,{name:"MuiInput",slot:"Input",overridesResolver:zb})({}),xz=q.forwardRef(function(t,n){var i,a,u,f;const o=Ai({props:t,name:"MuiInput"}),{disableUnderline:v,components:E={},componentsProps:k,fullWidth:D=!1,inputComponent:R="input",multiline:j=!1,slotProps:N,slots:$={},type:ee="text"}=o,W=Qn(o,Hre),K=qre(o),ie={root:{ownerState:{disableUnderline:v}}},ue=N??k?gs(N??k,ie):ie,de=(i=(a=$.root)!=null?a:E.Root)!=null?i:Gre,M=(u=(f=$.input)!=null?f:E.Input)!=null?u:Zre;return Z.jsx(W7,_e({slots:{root:de,input:M},slotProps:ue,fullWidth:D,inputComponent:R,multiline:j,ref:n,type:ee},W,{classes:K}))});xz.muiName="Input";const bz=xz;function Xre(e){return vi("MuiFilledInput",e)}const Kre=_e({},Fs,Ii("MuiFilledInput",["root","underline","input"])),Ns=Kre,Yre=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Jre=e=>{const{classes:t,disableUnderline:n}=e,a=Pi({root:["root",!n&&"underline"],input:["input"]},Xre,t);return _e({},t,a)},Qre=$n(Fb,{shouldForwardProp:e=>Yu(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Lb(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const i=e.palette.mode==="light",a=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",u=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",f=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return _e({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:u,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:f,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:u}},[`&.${Ns.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:u},[`&.${Ns.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ns.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ns.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ns.disabled}, .${Ns.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Ns.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&_e({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),eie=$n(Nb,{name:"MuiFilledInput",slot:"Input",overridesResolver:zb})(({theme:e,ownerState:t})=>_e({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),wz=q.forwardRef(function(t,n){var i,a,u,f;const o=Ai({props:t,name:"MuiFilledInput"}),{components:v={},componentsProps:E,fullWidth:k=!1,inputComponent:D="input",multiline:R=!1,slotProps:j,slots:N={},type:$="text"}=o,ee=Qn(o,Yre),W=_e({},o,{fullWidth:k,inputComponent:D,multiline:R,type:$}),K=Jre(o),Y={root:{ownerState:W},input:{ownerState:W}},ie=j??E?gs(j??E,Y):Y,ue=(i=(a=N.root)!=null?a:v.Root)!=null?i:Qre,de=(u=(f=N.input)!=null?f:v.Input)!=null?u:eie;return Z.jsx(W7,_e({slots:{root:ue,input:de},componentsProps:ie,fullWidth:k,inputComponent:D,multiline:R,ref:n,type:$},ee,{classes:K}))});wz.muiName="Input";const Ez=wz;var TI;const tie=["children","classes","className","label","notched"],nie=$n("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),rie=$n("legend")(({ownerState:e,theme:t})=>_e({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&_e({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function iie(e){const{className:t,label:n,notched:i}=e,a=Qn(e,tie),u=n!=null&&n!=="",f=_e({},e,{notched:i,withLabel:u});return Z.jsx(nie,_e({"aria-hidden":!0,className:t,ownerState:f},a,{children:Z.jsx(rie,{ownerState:f,children:u?Z.jsx("span",{children:n}):TI||(TI=Z.jsx("span",{className:"notranslate",children:""}))})}))}function oie(e){return vi("MuiOutlinedInput",e)}const aie=_e({},Fs,Ii("MuiOutlinedInput",["root","notchedOutline","input"])),Nc=aie,sie=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],lie=e=>{const{classes:t}=e,i=Pi({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},oie,t);return _e({},t,i)},cie=$n(Fb,{shouldForwardProp:e=>Yu(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Lb})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return _e({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Nc.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Nc.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Nc.focused} .${Nc.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${Nc.error} .${Nc.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Nc.disabled} .${Nc.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&_e({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),uie=$n(iie,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),die=$n(Nb,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:zb})(({theme:e,ownerState:t})=>_e({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),Sz=q.forwardRef(function(t,n){var i,a,u,f,o;const v=Ai({props:t,name:"MuiOutlinedInput"}),{components:E={},fullWidth:k=!1,inputComponent:D="input",label:R,multiline:j=!1,notched:N,slots:$={},type:ee="text"}=v,W=Qn(v,sie),K=lie(v),Y=lm(),ie=sm({props:v,muiFormControl:Y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),ue=_e({},v,{color:ie.color||"primary",disabled:ie.disabled,error:ie.error,focused:ie.focused,formControl:Y,fullWidth:k,hiddenLabel:ie.hiddenLabel,multiline:j,size:ie.size,type:ee}),de=(i=(a=$.root)!=null?a:E.Root)!=null?i:cie,M=(u=(f=$.input)!=null?f:E.Input)!=null?u:die;return Z.jsx(W7,_e({slots:{root:de,input:M},renderSuffix:Te=>Z.jsx(uie,{ownerState:ue,className:K.notchedOutline,label:R!=null&&R!==""&&ie.required?o||(o=Z.jsxs(q.Fragment,{children:[R,"","*"]})):R,notched:typeof N<"u"?N:!!(Te.startAdornment||Te.filled||Te.focused)}),fullWidth:k,inputComponent:D,multiline:j,ref:n,type:ee},W,{classes:_e({},K,{notchedOutline:null})}))});Sz.muiName="Input";const Tz=Sz;function hie(e){return vi("MuiFormLabel",e)}const pie=Ii("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),l0=pie,fie=["children","className","color","component","disabled","error","filled","focused","required"],mie=e=>{const{classes:t,color:n,focused:i,disabled:a,error:u,filled:f,required:o}=e,v={root:["root",`color${In(n)}`,a&&"disabled",u&&"error",f&&"filled",i&&"focused",o&&"required"],asterisk:["asterisk",u&&"error"]};return Pi(v,hie,t)},gie=$n("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>_e({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>_e({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${l0.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${l0.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${l0.error}`]:{color:(e.vars||e).palette.error.main}})),_ie=$n("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${l0.error}`]:{color:(e.vars||e).palette.error.main}})),yie=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiFormLabel"}),{children:a,className:u,component:f="label"}=i,o=Qn(i,fie),v=lm(),E=sm({props:i,muiFormControl:v,states:["color","required","focused","disabled","error","filled"]}),k=_e({},i,{color:E.color||"primary",component:f,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),D=mie(k);return Z.jsxs(gie,_e({as:f,ownerState:k,className:rr(D.root,u),ref:n},o,{children:[a,E.required&&Z.jsxs(_ie,{ownerState:k,"aria-hidden":!0,className:D.asterisk,children:["","*"]})]}))}),vie=yie;function xie(e){return vi("MuiInputLabel",e)}Ii("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const bie=["disableAnimation","margin","shrink","variant","className"],wie=e=>{const{classes:t,formControl:n,size:i,shrink:a,disableAnimation:u,variant:f,required:o}=e,E=Pi({root:["root",n&&"formControl",!u&&"animated",a&&"shrink",i==="small"&&"sizeSmall",f],asterisk:[o&&"asterisk"]},xie,t);return _e({},t,E)},Eie=$n(vie,{shouldForwardProp:e=>Yu(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${l0.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})(({theme:e,ownerState:t})=>_e({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&_e({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&_e({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&_e({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Sie=q.forwardRef(function(t,n){const i=Ai({name:"MuiInputLabel",props:t}),{disableAnimation:a=!1,shrink:u,className:f}=i,o=Qn(i,bie),v=lm();let E=u;typeof E>"u"&&v&&(E=v.filled||v.focused||v.adornedStart);const k=sm({props:i,muiFormControl:v,states:["size","variant","required"]}),D=_e({},i,{disableAnimation:a,formControl:v,shrink:E,size:k.size,variant:k.variant,required:k.required}),R=wie(D);return Z.jsx(Eie,_e({"data-shrink":E,ownerState:D,ref:n,className:rr(R.root,f)},o,{classes:R}))}),Tie=Sie;function Cie(e){return vi("MuiFormControl",e)}Ii("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const kie=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Pie=e=>{const{classes:t,margin:n,fullWidth:i}=e,a={root:["root",n!=="none"&&`margin${In(n)}`,i&&"fullWidth"]};return Pi(a,Cie,t)},Iie=$n("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>_e({},t.root,t[`margin${In(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>_e({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),Aie=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiFormControl"}),{children:a,className:u,color:f="primary",component:o="div",disabled:v=!1,error:E=!1,focused:k,fullWidth:D=!1,hiddenLabel:R=!1,margin:j="none",required:N=!1,size:$="medium",variant:ee="outlined"}=i,W=Qn(i,kie),K=_e({},i,{color:f,component:o,disabled:v,error:E,fullWidth:D,hiddenLabel:R,margin:j,required:N,size:$,variant:ee}),Y=Pie(K),[ie,ue]=q.useState(()=>{let qe=!1;return a&&q.Children.forEach(a,ze=>{if(!e2(ze,["Input","Select"]))return;const Be=e2(ze,["Select"])?ze.props.input:ze;Be&&zre(Be.props)&&(qe=!0)}),qe}),[de,M]=q.useState(()=>{let qe=!1;return a&&q.Children.forEach(a,ze=>{e2(ze,["Input","Select"])&&(Q2(ze.props,!0)||Q2(ze.props.inputProps,!0))&&(qe=!0)}),qe}),[Te,fe]=q.useState(!1);v&&Te&&fe(!1);const Oe=k!==void 0&&!v?k:Te;let rt;const at=q.useMemo(()=>({adornedStart:ie,setAdornedStart:ue,color:f,disabled:v,error:E,filled:de,focused:Oe,fullWidth:D,hiddenLabel:R,size:$,onBlur:()=>{fe(!1)},onEmpty:()=>{M(!1)},onFilled:()=>{M(!0)},onFocus:()=>{fe(!0)},registerEffect:rt,required:N,variant:ee}),[ie,f,v,E,de,Oe,D,R,rt,N,$,ee]);return Z.jsx(V7.Provider,{value:at,children:Z.jsx(Iie,_e({as:o,ownerState:K,className:rr(Y.root,u),ref:n},W,{children:a}))})}),Mie=Aie;function Die(e){return vi("MuiFormHelperText",e)}const Oie=Ii("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),CI=Oie;var kI;const Rie=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Lie=e=>{const{classes:t,contained:n,size:i,disabled:a,error:u,filled:f,focused:o,required:v}=e,E={root:["root",a&&"disabled",u&&"error",i&&`size${In(i)}`,n&&"contained",o&&"focused",f&&"filled",v&&"required"]};return Pi(E,Die,t)},zie=$n("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${In(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>_e({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${CI.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${CI.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),Fie=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiFormHelperText"}),{children:a,className:u,component:f="p"}=i,o=Qn(i,Rie),v=lm(),E=sm({props:i,muiFormControl:v,states:["variant","size","disabled","error","filled","focused","required"]}),k=_e({},i,{component:f,contained:E.variant==="filled"||E.variant==="outlined",variant:E.variant,size:E.size,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),D=Lie(k);return Z.jsx(zie,_e({as:f,ownerState:k,className:rr(D.root,u),ref:n},o,{children:a===" "?kI||(kI=Z.jsx("span",{className:"notranslate",children:""})):a}))}),Nie=Fie;var xi={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H7=Symbol.for("react.element"),q7=Symbol.for("react.portal"),Bb=Symbol.for("react.fragment"),jb=Symbol.for("react.strict_mode"),$b=Symbol.for("react.profiler"),Ub=Symbol.for("react.provider"),Vb=Symbol.for("react.context"),Bie=Symbol.for("react.server_context"),Wb=Symbol.for("react.forward_ref"),Hb=Symbol.for("react.suspense"),qb=Symbol.for("react.suspense_list"),Gb=Symbol.for("react.memo"),Zb=Symbol.for("react.lazy"),jie=Symbol.for("react.offscreen"),Cz;Cz=Symbol.for("react.module.reference");function Il(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case H7:switch(e=e.type,e){case Bb:case $b:case jb:case Hb:case qb:return e;default:switch(e=e&&e.$$typeof,e){case Bie:case Vb:case Wb:case Zb:case Gb:case Ub:return e;default:return t}}case q7:return t}}}xi.ContextConsumer=Vb;xi.ContextProvider=Ub;xi.Element=H7;xi.ForwardRef=Wb;xi.Fragment=Bb;xi.Lazy=Zb;xi.Memo=Gb;xi.Portal=q7;xi.Profiler=$b;xi.StrictMode=jb;xi.Suspense=Hb;xi.SuspenseList=qb;xi.isAsyncMode=function(){return!1};xi.isConcurrentMode=function(){return!1};xi.isContextConsumer=function(e){return Il(e)===Vb};xi.isContextProvider=function(e){return Il(e)===Ub};xi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===H7};xi.isForwardRef=function(e){return Il(e)===Wb};xi.isFragment=function(e){return Il(e)===Bb};xi.isLazy=function(e){return Il(e)===Zb};xi.isMemo=function(e){return Il(e)===Gb};xi.isPortal=function(e){return Il(e)===q7};xi.isProfiler=function(e){return Il(e)===$b};xi.isStrictMode=function(e){return Il(e)===jb};xi.isSuspense=function(e){return Il(e)===Hb};xi.isSuspenseList=function(e){return Il(e)===qb};xi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Bb||e===$b||e===jb||e===Hb||e===qb||e===jie||typeof e=="object"&&e!==null&&(e.$$typeof===Zb||e.$$typeof===Gb||e.$$typeof===Ub||e.$$typeof===Vb||e.$$typeof===Wb||e.$$typeof===Cz||e.getModuleId!==void 0)};xi.typeOf=Il;const $ie=q.createContext({}),Uie=$ie;function Vie(e){return vi("MuiList",e)}Ii("MuiList",["root","padding","dense","subheader"]);const Wie=["children","className","component","dense","disablePadding","subheader"],Hie=e=>{const{classes:t,disablePadding:n,dense:i,subheader:a}=e;return Pi({root:["root",!n&&"padding",i&&"dense",a&&"subheader"]},Vie,t)},qie=$n("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>_e({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),Gie=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiList"}),{children:a,className:u,component:f="ul",dense:o=!1,disablePadding:v=!1,subheader:E}=i,k=Qn(i,Wie),D=q.useMemo(()=>({dense:o}),[o]),R=_e({},i,{component:f,dense:o,disablePadding:v}),j=Hie(R);return Z.jsx(Uie.Provider,{value:D,children:Z.jsxs(qie,_e({as:f,className:rr(j.root,u),ref:n,ownerState:R},k,{children:[E,a]}))})}),Zie=Gie,Xie=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function j4(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function PI(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function kz(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function Dg(e,t,n,i,a,u){let f=!1,o=a(e,t,t?n:!1);for(;o;){if(o===e.firstChild){if(f)return!1;f=!0}const v=i?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!kz(o,u)||v)o=a(e,o,n);else return o.focus(),!0}return!1}const Kie=q.forwardRef(function(t,n){const{actions:i,autoFocus:a=!1,autoFocusItem:u=!1,children:f,className:o,disabledItemsFocusable:v=!1,disableListWrap:E=!1,onKeyDown:k,variant:D="selectedMenu"}=t,R=Qn(t,Xie),j=q.useRef(null),N=q.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Qc(()=>{a&&j.current.focus()},[a]),q.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(Y,ie)=>{const ue=!j.current.style.width;if(Y.clientHeight<j.current.clientHeight&&ue){const de=`${ML(Mo(Y))}px`;j.current.style[ie.direction==="rtl"?"paddingLeft":"paddingRight"]=de,j.current.style.width=`calc(100% + ${de})`}return j.current}}),[]);const $=Y=>{const ie=j.current,ue=Y.key,de=Mo(ie).activeElement;if(ue==="ArrowDown")Y.preventDefault(),Dg(ie,de,E,v,j4);else if(ue==="ArrowUp")Y.preventDefault(),Dg(ie,de,E,v,PI);else if(ue==="Home")Y.preventDefault(),Dg(ie,null,E,v,j4);else if(ue==="End")Y.preventDefault(),Dg(ie,null,E,v,PI);else if(ue.length===1){const M=N.current,Te=ue.toLowerCase(),fe=performance.now();M.keys.length>0&&(fe-M.lastTime>500?(M.keys=[],M.repeating=!0,M.previousKeyMatched=!0):M.repeating&&Te!==M.keys[0]&&(M.repeating=!1)),M.lastTime=fe,M.keys.push(Te);const Oe=de&&!M.repeating&&kz(de,M);M.previousKeyMatched&&(Oe||Dg(ie,de,!1,v,j4,M))?Y.preventDefault():M.previousKeyMatched=!1}k&&k(Y)},ee=wo(j,n);let W=-1;q.Children.forEach(f,(Y,ie)=>{if(!q.isValidElement(Y)){W===ie&&(W+=1,W>=f.length&&(W=-1));return}Y.props.disabled||(D==="selectedMenu"&&Y.props.selected||W===-1)&&(W=ie),W===ie&&(Y.props.disabled||Y.props.muiSkipListHighlight||Y.type.muiSkipListHighlight)&&(W+=1,W>=f.length&&(W=-1))});const K=q.Children.map(f,(Y,ie)=>{if(ie===W){const ue={};return u&&(ue.autoFocus=!0),Y.props.tabIndex===void 0&&D==="selectedMenu"&&(ue.tabIndex=0),q.cloneElement(Y,ue)}return Y});return Z.jsx(Zie,_e({role:"menu",ref:ee,className:o,onKeyDown:$,tabIndex:a?0:-1},R,{children:K}))}),Yie=Kie;function ex(e,t){return ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},ex(e,t)}function Pz(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ex(e,t)}const II={disabled:!1},tx=Ut.createContext(null);var Jie=function(t){return t.scrollTop},jg="unmounted",ep="exited",tp="entering",Nf="entered",HE="exiting",Ju=function(e){Pz(t,e);function t(i,a){var u;u=e.call(this,i,a)||this;var f=a,o=f&&!f.isMounting?i.enter:i.appear,v;return u.appearStatus=null,i.in?o?(v=ep,u.appearStatus=tp):v=Nf:i.unmountOnExit||i.mountOnEnter?v=jg:v=ep,u.state={status:v},u.nextCallback=null,u}t.getDerivedStateFromProps=function(a,u){var f=a.in;return f&&u.status===jg?{status:ep}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var u=null;if(a!==this.props){var f=this.state.status;this.props.in?f!==tp&&f!==Nf&&(u=tp):(f===tp||f===Nf)&&(u=HE)}this.updateStatus(!1,u)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,u,f,o;return u=f=o=a,a!=null&&typeof a!="number"&&(u=a.exit,f=a.enter,o=a.appear!==void 0?a.appear:f),{exit:u,enter:f,appear:o}},n.updateStatus=function(a,u){if(a===void 0&&(a=!1),u!==null)if(this.cancelNextCallback(),u===tp){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:cv.findDOMNode(this);f&&Jie(f)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ep&&this.setState({status:jg})},n.performEnter=function(a){var u=this,f=this.props.enter,o=this.context?this.context.isMounting:a,v=this.props.nodeRef?[o]:[cv.findDOMNode(this),o],E=v[0],k=v[1],D=this.getTimeouts(),R=o?D.appear:D.enter;if(!a&&!f||II.disabled){this.safeSetState({status:Nf},function(){u.props.onEntered(E)});return}this.props.onEnter(E,k),this.safeSetState({status:tp},function(){u.props.onEntering(E,k),u.onTransitionEnd(R,function(){u.safeSetState({status:Nf},function(){u.props.onEntered(E,k)})})})},n.performExit=function(){var a=this,u=this.props.exit,f=this.getTimeouts(),o=this.props.nodeRef?void 0:cv.findDOMNode(this);if(!u||II.disabled){this.safeSetState({status:ep},function(){a.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:HE},function(){a.props.onExiting(o),a.onTransitionEnd(f.exit,function(){a.safeSetState({status:ep},function(){a.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,u){u=this.setNextCallback(u),this.setState(a,u)},n.setNextCallback=function(a){var u=this,f=!0;return this.nextCallback=function(o){f&&(f=!1,u.nextCallback=null,a(o))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},n.onTransitionEnd=function(a,u){this.setNextCallback(u);var f=this.props.nodeRef?this.props.nodeRef.current:cv.findDOMNode(this),o=a==null&&!this.props.addEndListener;if(!f||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var v=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],E=v[0],k=v[1];this.props.addEndListener(E,k)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===jg)return null;var u=this.props,f=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var o=Qn(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ut.createElement(tx.Provider,{value:null},typeof f=="function"?f(a,o):Ut.cloneElement(Ut.Children.only(f),o))},t}(Ut.Component);Ju.contextType=tx;Ju.propTypes={};function Lf(){}Ju.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Lf,onEntering:Lf,onEntered:Lf,onExit:Lf,onExiting:Lf,onExited:Lf};Ju.UNMOUNTED=jg;Ju.EXITED=ep;Ju.ENTERING=tp;Ju.ENTERED=Nf;Ju.EXITING=HE;const Iz=Ju;function Az(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G7(e,t){var n=function(u){return t&&q.isValidElement(u)?t(u):u},i=Object.create(null);return e&&q.Children.map(e,function(a){return a}).forEach(function(a){i[a.key]=n(a)}),i}function Qie(e,t){e=e||{},t=t||{};function n(k){return k in t?t[k]:e[k]}var i=Object.create(null),a=[];for(var u in e)u in t?a.length&&(i[u]=a,a=[]):a.push(u);var f,o={};for(var v in t){if(i[v])for(f=0;f<i[v].length;f++){var E=i[v][f];o[i[v][f]]=n(E)}o[v]=n(v)}for(f=0;f<a.length;f++)o[a[f]]=n(a[f]);return o}function sp(e,t,n){return n[t]!=null?n[t]:e.props[t]}function eoe(e,t){return G7(e.children,function(n){return q.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:sp(n,"appear",e),enter:sp(n,"enter",e),exit:sp(n,"exit",e)})})}function toe(e,t,n){var i=G7(e.children),a=Qie(t,i);return Object.keys(a).forEach(function(u){var f=a[u];if(q.isValidElement(f)){var o=u in t,v=u in i,E=t[u],k=q.isValidElement(E)&&!E.props.in;v&&(!o||k)?a[u]=q.cloneElement(f,{onExited:n.bind(null,f),in:!0,exit:sp(f,"exit",e),enter:sp(f,"enter",e)}):!v&&o&&!k?a[u]=q.cloneElement(f,{in:!1}):v&&o&&q.isValidElement(E)&&(a[u]=q.cloneElement(f,{onExited:n.bind(null,f),in:E.props.in,exit:sp(f,"exit",e),enter:sp(f,"enter",e)}))}}),a}var noe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},roe={component:"div",childFactory:function(t){return t}},Z7=function(e){Pz(t,e);function t(i,a){var u;u=e.call(this,i,a)||this;var f=u.handleExited.bind(Az(u));return u.state={contextValue:{isMounting:!0},handleExited:f,firstRender:!0},u}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,u){var f=u.children,o=u.handleExited,v=u.firstRender;return{children:v?eoe(a,o):toe(a,f,o),firstRender:!1}},n.handleExited=function(a,u){var f=G7(this.props.children);a.key in f||(a.props.onExited&&a.props.onExited(u),this.mounted&&this.setState(function(o){var v=_e({},o.children);return delete v[a.key],{children:v}}))},n.render=function(){var a=this.props,u=a.component,f=a.childFactory,o=Qn(a,["component","childFactory"]),v=this.state.contextValue,E=noe(this.state.children).map(f);return delete o.appear,delete o.enter,delete o.exit,u===null?Ut.createElement(tx.Provider,{value:v},E):Ut.createElement(tx.Provider,{value:v},Ut.createElement(u,o,E))},t}(Ut.Component);Z7.propTypes={};Z7.defaultProps=roe;const ioe=Z7,Mz=e=>e.scrollTop;function nx(e,t){var n,i;const{timeout:a,easing:u,style:f={}}=e;return{duration:(n=f.transitionDuration)!=null?n:typeof a=="number"?a:a[t.mode]||0,easing:(i=f.transitionTimingFunction)!=null?i:typeof u=="object"?u[t.mode]:u,delay:f.transitionDelay}}const ooe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function qE(e){return`scale(${e}, ${e**2})`}const aoe={entering:{opacity:1,transform:qE(1)},entered:{opacity:1,transform:"none"}},$4=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Dz=q.forwardRef(function(t,n){const{addEndListener:i,appear:a=!0,children:u,easing:f,in:o,onEnter:v,onEntered:E,onEntering:k,onExit:D,onExited:R,onExiting:j,style:N,timeout:$="auto",TransitionComponent:ee=Iz}=t,W=Qn(t,ooe),K=q.useRef(),Y=q.useRef(),ie=Ob(),ue=q.useRef(null),de=wo(ue,u.ref,n),M=Be=>tt=>{if(Be){const Ke=ue.current;tt===void 0?Be(Ke):Be(Ke,tt)}},Te=M(k),fe=M((Be,tt)=>{Mz(Be);const{duration:Ke,delay:Le,easing:Je}=nx({style:N,timeout:$,easing:f},{mode:"enter"});let it;$==="auto"?(it=ie.transitions.getAutoHeightDuration(Be.clientHeight),Y.current=it):it=Ke,Be.style.transition=[ie.transitions.create("opacity",{duration:it,delay:Le}),ie.transitions.create("transform",{duration:$4?it:it*.666,delay:Le,easing:Je})].join(","),v&&v(Be,tt)}),Oe=M(E),rt=M(j),at=M(Be=>{const{duration:tt,delay:Ke,easing:Le}=nx({style:N,timeout:$,easing:f},{mode:"exit"});let Je;$==="auto"?(Je=ie.transitions.getAutoHeightDuration(Be.clientHeight),Y.current=Je):Je=tt,Be.style.transition=[ie.transitions.create("opacity",{duration:Je,delay:Ke}),ie.transitions.create("transform",{duration:$4?Je:Je*.666,delay:$4?Ke:Ke||Je*.333,easing:Le})].join(","),Be.style.opacity=0,Be.style.transform=qE(.75),D&&D(Be)}),qe=M(R),ze=Be=>{$==="auto"&&(K.current=setTimeout(Be,Y.current||0)),i&&i(ue.current,Be)};return q.useEffect(()=>()=>{clearTimeout(K.current)},[]),Z.jsx(ee,_e({appear:a,in:o,nodeRef:ue,onEnter:fe,onEntered:Oe,onEntering:Te,onExit:at,onExited:qe,onExiting:rt,addEndListener:ze,timeout:$==="auto"?null:$},W,{children:(Be,tt)=>q.cloneElement(u,_e({style:_e({opacity:0,transform:qE(.75),visibility:Be==="exited"&&!o?"hidden":void 0},aoe[Be],N,u.props.style),ref:de},tt))}))});Dz.muiSupportAuto=!0;const soe=Dz,loe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],coe={entering:{opacity:1},entered:{opacity:1}},uoe=q.forwardRef(function(t,n){const i=Ob(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:u,appear:f=!0,children:o,easing:v,in:E,onEnter:k,onEntered:D,onEntering:R,onExit:j,onExited:N,onExiting:$,style:ee,timeout:W=a,TransitionComponent:K=Iz}=t,Y=Qn(t,loe),ie=q.useRef(null),ue=wo(ie,o.ref,n),de=ze=>Be=>{if(ze){const tt=ie.current;Be===void 0?ze(tt):ze(tt,Be)}},M=de(R),Te=de((ze,Be)=>{Mz(ze);const tt=nx({style:ee,timeout:W,easing:v},{mode:"enter"});ze.style.webkitTransition=i.transitions.create("opacity",tt),ze.style.transition=i.transitions.create("opacity",tt),k&&k(ze,Be)}),fe=de(D),Oe=de($),rt=de(ze=>{const Be=nx({style:ee,timeout:W,easing:v},{mode:"exit"});ze.style.webkitTransition=i.transitions.create("opacity",Be),ze.style.transition=i.transitions.create("opacity",Be),j&&j(ze)}),at=de(N),qe=ze=>{u&&u(ie.current,ze)};return Z.jsx(K,_e({appear:f,in:E,nodeRef:ie,onEnter:Te,onEntered:fe,onEntering:M,onExit:rt,onExited:at,onExiting:Oe,addEndListener:qe,timeout:W},Y,{children:(ze,Be)=>q.cloneElement(o,_e({style:_e({opacity:0,visibility:ze==="exited"&&!E?"hidden":void 0},coe[ze],ee,o.props.style),ref:ue},Be))}))}),doe=uoe;function hoe(e){return vi("MuiBackdrop",e)}Ii("MuiBackdrop",["root","invisible"]);const poe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],foe=e=>{const{classes:t,invisible:n}=e;return Pi({root:["root",n&&"invisible"]},hoe,t)},moe=$n("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>_e({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),goe=q.forwardRef(function(t,n){var i,a,u;const f=Ai({props:t,name:"MuiBackdrop"}),{children:o,className:v,component:E="div",components:k={},componentsProps:D={},invisible:R=!1,open:j,slotProps:N={},slots:$={},TransitionComponent:ee=doe,transitionDuration:W}=f,K=Qn(f,poe),Y=_e({},f,{component:E,invisible:R}),ie=foe(Y),ue=(i=N.root)!=null?i:D.root;return Z.jsx(ee,_e({in:j,timeout:W},K,{children:Z.jsx(moe,_e({"aria-hidden":!0},ue,{as:(a=(u=$.root)!=null?u:k.Root)!=null?a:E,className:rr(ie.root,v,ue==null?void 0:ue.className),ownerState:_e({},Y,ue==null?void 0:ue.ownerState),classes:ie,ref:n,children:o}))}))}),_oe=goe,yoe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],voe=$n("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>_e({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),xoe=$n(_oe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),boe=q.forwardRef(function(t,n){var i,a,u,f,o,v;const E=Ai({name:"MuiModal",props:t}),{BackdropComponent:k=xoe,BackdropProps:D,classes:R,className:j,closeAfterTransition:N=!1,children:$,container:ee,component:W,components:K={},componentsProps:Y={},disableAutoFocus:ie=!1,disableEnforceFocus:ue=!1,disableEscapeKeyDown:de=!1,disablePortal:M=!1,disableRestoreFocus:Te=!1,disableScrollLock:fe=!1,hideBackdrop:Oe=!1,keepMounted:rt=!1,onBackdropClick:at,onClose:qe,open:ze,slotProps:Be,slots:tt,theme:Ke}=E,Le=Qn(E,yoe),[Je,it]=q.useState(!0),kt={container:ee,closeAfterTransition:N,disableAutoFocus:ie,disableEnforceFocus:ue,disableEscapeKeyDown:de,disablePortal:M,disableRestoreFocus:Te,disableScrollLock:fe,hideBackdrop:Oe,keepMounted:rt,onBackdropClick:at,onClose:qe,open:ze},yt=_e({},E,kt,{exited:Je}),wt=(i=(a=tt==null?void 0:tt.root)!=null?a:K.Root)!=null?i:voe,jt=(u=(f=tt==null?void 0:tt.backdrop)!=null?f:K.Backdrop)!=null?u:k,Qt=(o=Be==null?void 0:Be.root)!=null?o:Y.root,en=(v=Be==null?void 0:Be.backdrop)!=null?v:Y.backdrop;return Z.jsx(ere,_e({slots:{root:wt,backdrop:jt},slotProps:{root:()=>_e({},$E(Qt,yt),!Bu(wt)&&{as:W,theme:Ke},{className:rr(j,Qt==null?void 0:Qt.className,R==null?void 0:R.root,!yt.open&&yt.exited&&(R==null?void 0:R.hidden))}),backdrop:()=>_e({},D,$E(en,yt),{className:rr(en==null?void 0:en.className,D==null?void 0:D.className,R==null?void 0:R.backdrop)})},onTransitionEnter:()=>it(!1),onTransitionExited:()=>it(!0),ref:n},Le,kt,{children:$}))}),woe=boe;function Eoe(e){return vi("MuiPaper",e)}Ii("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Soe=["className","component","elevation","square","variant"],Toe=e=>{const{square:t,elevation:n,variant:i,classes:a}=e,u={root:["root",i,!t&&"rounded",i==="elevation"&&`elevation${n}`]};return Pi(u,Eoe,a)},Coe=$n("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return _e({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&_e({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${no("#fff",oI(t.elevation))}, ${no("#fff",oI(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),koe=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiPaper"}),{className:a,component:u="div",elevation:f=1,square:o=!1,variant:v="elevation"}=i,E=Qn(i,Soe),k=_e({},i,{component:u,elevation:f,square:o,variant:v}),D=Toe(k);return Z.jsx(Coe,_e({as:u,ownerState:k,className:rr(D.root,a),ref:n},E))}),X7=koe;function Poe(e){return vi("MuiPopover",e)}Ii("MuiPopover",["root","paper"]);const Ioe=["onEntering"],Aoe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"],Moe=["slotProps"];function AI(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function MI(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function DI(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function U4(e){return typeof e=="function"?e():e}const Doe=e=>{const{classes:t}=e;return Pi({root:["root"],paper:["paper"]},Poe,t)},Ooe=$n(woe,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Oz=$n(X7,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Roe=q.forwardRef(function(t,n){var i,a,u;const f=Ai({props:t,name:"MuiPopover"}),{action:o,anchorEl:v,anchorOrigin:E={vertical:"top",horizontal:"left"},anchorPosition:k,anchorReference:D="anchorEl",children:R,className:j,container:N,elevation:$=8,marginThreshold:ee=16,open:W,PaperProps:K={},slots:Y,slotProps:ie,transformOrigin:ue={vertical:"top",horizontal:"left"},TransitionComponent:de=soe,transitionDuration:M="auto",TransitionProps:{onEntering:Te}={}}=f,fe=Qn(f.TransitionProps,Ioe),Oe=Qn(f,Aoe),rt=(i=ie==null?void 0:ie.paper)!=null?i:K,at=q.useRef(),qe=wo(at,rt.ref),ze=_e({},f,{anchorOrigin:E,anchorReference:D,elevation:$,marginThreshold:ee,externalPaperSlotProps:rt,transformOrigin:ue,TransitionComponent:de,transitionDuration:M,TransitionProps:fe}),Be=Doe(ze),tt=q.useCallback(()=>{if(D==="anchorPosition")return k;const nn=U4(v),qt=(nn&&nn.nodeType===1?nn:Mo(at.current).body).getBoundingClientRect();return{top:qt.top+AI(qt,E.vertical),left:qt.left+MI(qt,E.horizontal)}},[v,E.horizontal,E.vertical,k,D]),Ke=q.useCallback(nn=>({vertical:AI(nn,ue.vertical),horizontal:MI(nn,ue.horizontal)}),[ue.horizontal,ue.vertical]),Le=q.useCallback(nn=>{const bn={width:nn.offsetWidth,height:nn.offsetHeight},qt=Ke(bn);if(D==="none")return{top:null,left:null,transformOrigin:DI(qt)};const It=tt();let Rn=It.top-qt.vertical,ln=It.left-qt.horizontal;const Zn=Rn+bn.height,tr=ln+bn.width,Fn=sh(U4(v)),Yn=Fn.innerHeight-ee,Un=Fn.innerWidth-ee;if(Rn<ee){const qn=Rn-ee;Rn-=qn,qt.vertical+=qn}else if(Zn>Yn){const qn=Zn-Yn;Rn-=qn,qt.vertical+=qn}if(ln<ee){const qn=ln-ee;ln-=qn,qt.horizontal+=qn}else if(tr>Un){const qn=tr-Un;ln-=qn,qt.horizontal+=qn}return{top:`${Math.round(Rn)}px`,left:`${Math.round(ln)}px`,transformOrigin:DI(qt)}},[v,D,tt,Ke,ee]),[Je,it]=q.useState(W),kt=q.useCallback(()=>{const nn=at.current;if(!nn)return;const bn=Le(nn);bn.top!==null&&(nn.style.top=bn.top),bn.left!==null&&(nn.style.left=bn.left),nn.style.transformOrigin=bn.transformOrigin,it(!0)},[Le]),yt=(nn,bn)=>{Te&&Te(nn,bn),kt()},wt=()=>{it(!1)};q.useEffect(()=>{W&&kt()}),q.useImperativeHandle(o,()=>W?{updatePosition:()=>{kt()}}:null,[W,kt]),q.useEffect(()=>{if(!W)return;const nn=u7(()=>{kt()}),bn=sh(v);return bn.addEventListener("resize",nn),()=>{nn.clear(),bn.removeEventListener("resize",nn)}},[v,W,kt]);let jt=M;M==="auto"&&!de.muiSupportAuto&&(jt=void 0);const Qt=N||(v?Mo(U4(v)).body:void 0),en=(a=Y==null?void 0:Y.root)!=null?a:Ooe,on=(u=Y==null?void 0:Y.paper)!=null?u:Oz,Sn=zs({elementType:on,externalSlotProps:_e({},rt,{style:Je?rt.style:_e({},rt.style,{opacity:0})}),additionalProps:{elevation:$,ref:qe},ownerState:ze,className:rr(Be.paper,rt==null?void 0:rt.className)}),Jt=zs({elementType:en,externalSlotProps:(ie==null?void 0:ie.root)||{},externalForwardedProps:Oe,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:Qt,open:W},ownerState:ze,className:rr(Be.root,j)}),{slotProps:yn}=Jt,Ft=Qn(Jt,Moe);return Z.jsx(en,_e({},Ft,!Bu(en)&&{slotProps:yn},{children:Z.jsx(de,_e({appear:!0,in:W,onEntering:yt,onExited:wt,timeout:jt},fe,{children:Z.jsx(on,_e({},Sn,{children:R}))}))}))}),Loe=Roe;function zoe(e){return vi("MuiMenu",e)}Ii("MuiMenu",["root","paper","list"]);const Foe=["onEntering"],Noe=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Boe={vertical:"top",horizontal:"right"},joe={vertical:"top",horizontal:"left"},$oe=e=>{const{classes:t}=e;return Pi({root:["root"],paper:["paper"],list:["list"]},zoe,t)},Uoe=$n(Loe,{shouldForwardProp:e=>Yu(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Voe=$n(Oz,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Woe=$n(Yie,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Hoe=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:u,disableAutoFocusItem:f=!1,MenuListProps:o={},onClose:v,open:E,PaperProps:k={},PopoverClasses:D,transitionDuration:R="auto",TransitionProps:{onEntering:j}={},variant:N="selectedMenu"}=i,$=Qn(i.TransitionProps,Foe),ee=Qn(i,Noe),W=Ob(),K=W.direction==="rtl",Y=_e({},i,{autoFocus:a,disableAutoFocusItem:f,MenuListProps:o,onEntering:j,PaperProps:k,transitionDuration:R,TransitionProps:$,variant:N}),ie=$oe(Y),ue=a&&!f&&E,de=q.useRef(null),M=(Oe,rt)=>{de.current&&de.current.adjustStyleForScrollbar(Oe,W),j&&j(Oe,rt)},Te=Oe=>{Oe.key==="Tab"&&(Oe.preventDefault(),v&&v(Oe,"tabKeyDown"))};let fe=-1;return q.Children.map(u,(Oe,rt)=>{q.isValidElement(Oe)&&(Oe.props.disabled||(N==="selectedMenu"&&Oe.props.selected||fe===-1)&&(fe=rt))}),Z.jsx(Uoe,_e({onClose:v,anchorOrigin:{vertical:"bottom",horizontal:K?"right":"left"},transformOrigin:K?Boe:joe,slots:{paper:Voe},slotProps:{paper:_e({},k,{classes:_e({},k.classes,{root:ie.paper})})},className:ie.root,open:E,ref:n,transitionDuration:R,TransitionProps:_e({onEntering:M},$),ownerState:Y},ee,{classes:D,children:Z.jsx(Woe,_e({onKeyDown:Te,actions:de,autoFocus:a&&(fe===-1||f),autoFocusItem:ue,variant:N},o,{className:rr(ie.list,o.className),children:u}))}))}),qoe=Hoe;function Goe(e){return vi("MuiNativeSelect",e)}const Zoe=Ii("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),K7=Zoe,Xoe=["className","disabled","error","IconComponent","inputRef","variant"],Koe=e=>{const{classes:t,variant:n,disabled:i,multiple:a,open:u,error:f}=e,o={select:["select",n,i&&"disabled",a&&"multiple",f&&"error"],icon:["icon",`icon${In(n)}`,u&&"iconOpen",i&&"disabled"]};return Pi(o,Goe,t)},Rz=({ownerState:e,theme:t})=>_e({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":_e({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${K7.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),Yoe=$n("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Yu,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${K7.multiple}`]:t.multiple}]}})(Rz),Lz=({ownerState:e,theme:t})=>_e({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${K7.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),Joe=$n("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${In(n.variant)}`],n.open&&t.iconOpen]}})(Lz),Qoe=q.forwardRef(function(t,n){const{className:i,disabled:a,error:u,IconComponent:f,inputRef:o,variant:v="standard"}=t,E=Qn(t,Xoe),k=_e({},t,{disabled:a,variant:v,error:u}),D=Koe(k);return Z.jsxs(q.Fragment,{children:[Z.jsx(Yoe,_e({ownerState:k,className:rr(D.select,i),disabled:a,ref:o||n},E)),t.multiple?null:Z.jsx(Joe,{as:f,ownerState:k,className:D.icon})]})}),eae=Qoe;function tae(e){return vi("MuiSelect",e)}const nae=Ii("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Og=nae;var OI;const rae=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],iae=$n("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Og.select}`]:t.select},{[`&.${Og.select}`]:t[n.variant]},{[`&.${Og.error}`]:t.error},{[`&.${Og.multiple}`]:t.multiple}]}})(Rz,{[`&.${Og.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),oae=$n("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${In(n.variant)}`],n.open&&t.iconOpen]}})(Lz),aae=$n("input",{shouldForwardProp:e=>R7(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function RI(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function sae(e){return e==null||typeof e=="string"&&!e.trim()}const lae=e=>{const{classes:t,variant:n,disabled:i,multiple:a,open:u,error:f}=e,o={select:["select",n,i&&"disabled",a&&"multiple",f&&"error"],icon:["icon",`icon${In(n)}`,u&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return Pi(o,tae,t)},cae=q.forwardRef(function(t,n){const{"aria-describedby":i,"aria-label":a,autoFocus:u,autoWidth:f,children:o,className:v,defaultOpen:E,defaultValue:k,disabled:D,displayEmpty:R,error:j=!1,IconComponent:N,inputRef:$,labelId:ee,MenuProps:W={},multiple:K,name:Y,onBlur:ie,onChange:ue,onClose:de,onFocus:M,onOpen:Te,open:fe,readOnly:Oe,renderValue:rt,SelectDisplayProps:at={},tabIndex:qe,value:ze,variant:Be="standard"}=t,tt=Qn(t,rae),[Ke,Le]=hp({controlled:ze,default:k,name:"Select"}),[Je,it]=hp({controlled:fe,default:E,name:"Select"}),kt=q.useRef(null),yt=q.useRef(null),[wt,jt]=q.useState(null),{current:Qt}=q.useRef(fe!=null),[en,on]=q.useState(),Sn=wo(n,$),Jt=q.useCallback(sn=>{yt.current=sn,sn&&jt(sn)},[]),yn=wt==null?void 0:wt.parentNode;q.useImperativeHandle(Sn,()=>({focus:()=>{yt.current.focus()},node:kt.current,value:Ke}),[Ke]),q.useEffect(()=>{E&&Je&&wt&&!Qt&&(on(f?null:yn.clientWidth),yt.current.focus())},[wt,f]),q.useEffect(()=>{u&&yt.current.focus()},[u]),q.useEffect(()=>{if(!ee)return;const sn=Mo(yt.current).getElementById(ee);if(sn){const vn=()=>{getSelection().isCollapsed&&yt.current.focus()};return sn.addEventListener("click",vn),()=>{sn.removeEventListener("click",vn)}}},[ee]);const Ft=(sn,vn)=>{sn?Te&&Te(vn):de&&de(vn),Qt||(on(f?null:yn.clientWidth),it(sn))},nn=sn=>{sn.button===0&&(sn.preventDefault(),yt.current.focus(),Ft(!0,sn))},bn=sn=>{Ft(!1,sn)},qt=q.Children.toArray(o),It=sn=>{const vn=qt.find(Dn=>Dn.props.value===sn.target.value);vn!==void 0&&(Le(vn.props.value),ue&&ue(sn,vn))},Rn=sn=>vn=>{let Dn;if(vn.currentTarget.hasAttribute("tabindex")){if(K){Dn=Array.isArray(Ke)?Ke.slice():[];const Nn=Ke.indexOf(sn.props.value);Nn===-1?Dn.push(sn.props.value):Dn.splice(Nn,1)}else Dn=sn.props.value;if(sn.props.onClick&&sn.props.onClick(vn),Ke!==Dn&&(Le(Dn),ue)){const Nn=vn.nativeEvent||vn,nr=new Nn.constructor(Nn.type,Nn);Object.defineProperty(nr,"target",{writable:!0,value:{value:Dn,name:Y}}),ue(nr,sn)}K||Ft(!1,vn)}},ln=sn=>{Oe||[" ","ArrowUp","ArrowDown","Enter"].indexOf(sn.key)!==-1&&(sn.preventDefault(),Ft(!0,sn))},Zn=wt!==null&&Je,tr=sn=>{!Zn&&ie&&(Object.defineProperty(sn,"target",{writable:!0,value:{value:Ke,name:Y}}),ie(sn))};delete tt["aria-invalid"];let Fn,Yn;const Un=[];let qn=!1;(Q2({value:Ke})||R)&&(rt?Fn=rt(Ke):qn=!0);const wn=qt.map(sn=>{if(!q.isValidElement(sn))return null;let vn;if(K){if(!Array.isArray(Ke))throw new Error(ah(2));vn=Ke.some(Dn=>RI(Dn,sn.props.value)),vn&&qn&&Un.push(sn.props.children)}else vn=RI(Ke,sn.props.value),vn&&qn&&(Yn=sn.props.children);return q.cloneElement(sn,{"aria-selected":vn?"true":"false",onClick:Rn(sn),onKeyUp:Dn=>{Dn.key===" "&&Dn.preventDefault(),sn.props.onKeyUp&&sn.props.onKeyUp(Dn)},role:"option",selected:vn,value:void 0,"data-value":sn.props.value})});qn&&(K?Un.length===0?Fn=null:Fn=Un.reduce((sn,vn,Dn)=>(sn.push(vn),Dn<Un.length-1&&sn.push(", "),sn),[]):Fn=Yn);let Qe=en;!f&&Qt&&wt&&(Qe=yn.clientWidth);let Kt;typeof qe<"u"?Kt=qe:Kt=D?null:0;const an=at.id||(Y?`mui-component-select-${Y}`:void 0),Zt=_e({},t,{variant:Be,value:Ke,open:Zn,error:j}),rn=lae(Zt);return Z.jsxs(q.Fragment,{children:[Z.jsx(iae,_e({ref:Jt,tabIndex:Kt,role:"button","aria-disabled":D?"true":void 0,"aria-expanded":Zn?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[ee,an].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:ln,onMouseDown:D||Oe?null:nn,onBlur:tr,onFocus:M},at,{ownerState:Zt,className:rr(at.className,rn.select,v),id:an,children:sae(Fn)?OI||(OI=Z.jsx("span",{className:"notranslate",children:""})):Fn})),Z.jsx(aae,_e({"aria-invalid":j,value:Array.isArray(Ke)?Ke.join(","):Ke,name:Y,ref:kt,"aria-hidden":!0,onChange:It,tabIndex:-1,disabled:D,className:rn.nativeInput,autoFocus:u,ownerState:Zt},tt)),Z.jsx(oae,{as:N,className:rn.icon,ownerState:Zt}),Z.jsx(qoe,_e({id:`menu-${Y||""}`,anchorEl:yn,open:Zn,onClose:bn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},W,{MenuListProps:_e({"aria-labelledby":ee,role:"listbox",disableListWrap:!0},W.MenuListProps),PaperProps:_e({},W.PaperProps,{style:_e({minWidth:Qe},W.PaperProps!=null?W.PaperProps.style:null)}),children:wn}))]})}),uae=cae;function dae(e){return vi("MuiSvgIcon",e)}Ii("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const hae=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],pae=e=>{const{color:t,fontSize:n,classes:i}=e,a={root:["root",t!=="inherit"&&`color${In(t)}`,`fontSize${In(n)}`]};return Pi(a,dae,i)},fae=$n("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${In(n.color)}`],t[`fontSize${In(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,i,a,u,f,o,v,E,k,D,R,j,N;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(i=n.create)==null?void 0:i.call(n,"fill",{duration:(a=e.transitions)==null||(a=a.duration)==null?void 0:a.shorter}),fontSize:{inherit:"inherit",small:((u=e.typography)==null||(f=u.pxToRem)==null?void 0:f.call(u,20))||"1.25rem",medium:((o=e.typography)==null||(v=o.pxToRem)==null?void 0:v.call(o,24))||"1.5rem",large:((E=e.typography)==null||(k=E.pxToRem)==null?void 0:k.call(E,35))||"2.1875rem"}[t.fontSize],color:(D=(R=(e.vars||e).palette)==null||(R=R[t.color])==null?void 0:R.main)!=null?D:{action:(j=(e.vars||e).palette)==null||(j=j.action)==null?void 0:j.active,disabled:(N=(e.vars||e).palette)==null||(N=N.action)==null?void 0:N.disabled,inherit:void 0}[t.color]}}),zz=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiSvgIcon"}),{children:a,className:u,color:f="inherit",component:o="svg",fontSize:v="medium",htmlColor:E,inheritViewBox:k=!1,titleAccess:D,viewBox:R="0 0 24 24"}=i,j=Qn(i,hae),N=q.isValidElement(a)&&a.type==="svg",$=_e({},i,{color:f,component:o,fontSize:v,instanceFontSize:t.fontSize,inheritViewBox:k,viewBox:R,hasSvgAsChild:N}),ee={};k||(ee.viewBox=R);const W=pae($);return Z.jsxs(fae,_e({as:o,className:rr(W.root,u),focusable:"false",color:E,"aria-hidden":D?void 0:!0,role:D?"img":void 0,ref:n},ee,j,N&&a.props,{ownerState:$,children:[N?a.props.children:a,D?Z.jsx("title",{children:D}):null]}))});zz.muiName="SvgIcon";const LI=zz;function Xb(e,t){function n(i,a){return Z.jsx(LI,_e({"data-testid":`${t}Icon`,ref:a},i,{children:e}))}return n.muiName=LI.muiName,q.memo(q.forwardRef(n))}const Fz=Xb(Z.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),mae=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],gae=e=>{const{classes:t}=e;return t},Y7={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Yu(e)&&e!=="variant",slot:"Root"},_ae=$n(bz,Y7)(""),yae=$n(Tz,Y7)(""),vae=$n(Ez,Y7)(""),Nz=q.forwardRef(function(t,n){const i=Ai({name:"MuiSelect",props:t}),{autoWidth:a=!1,children:u,classes:f={},className:o,defaultOpen:v=!1,displayEmpty:E=!1,IconComponent:k=Fz,id:D,input:R,inputProps:j,label:N,labelId:$,MenuProps:ee,multiple:W=!1,native:K=!1,onClose:Y,onOpen:ie,open:ue,renderValue:de,SelectDisplayProps:M,variant:Te="outlined"}=i,fe=Qn(i,mae),Oe=K?eae:uae,rt=lm(),at=sm({props:i,muiFormControl:rt,states:["variant","error"]}),qe=at.variant||Te,ze=_e({},i,{variant:qe,classes:f}),Be=gae(ze),tt=R||{standard:Z.jsx(_ae,{ownerState:ze}),outlined:Z.jsx(yae,{label:N,ownerState:ze}),filled:Z.jsx(vae,{ownerState:ze})}[qe],Ke=wo(n,tt.ref);return Z.jsx(q.Fragment,{children:q.cloneElement(tt,_e({inputComponent:Oe,inputProps:_e({children:u,error:at.error,IconComponent:k,variant:qe,type:void 0,multiple:W},K?{id:D}:{autoWidth:a,defaultOpen:v,displayEmpty:E,labelId:$,MenuProps:ee,onClose:Y,onOpen:ie,open:ue,renderValue:de,SelectDisplayProps:_e({id:D},M)},j,{classes:j?gs(Be,j.classes):Be},R?R.props.inputProps:{})},W&&K&&qe==="outlined"?{notched:!0}:{},{ref:Ke,className:rr(tt.props.className,o)},!R&&{variant:qe},fe))})});Nz.muiName="Select";const xae=Nz;function bae(e){return vi("MuiTextField",e)}Ii("MuiTextField",["root"]);const wae=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Eae={standard:bz,filled:Ez,outlined:Tz},Sae=e=>{const{classes:t}=e;return Pi({root:["root"]},bae,t)},Tae=$n(Mie,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Cae=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiTextField"}),{autoComplete:a,autoFocus:u=!1,children:f,className:o,color:v="primary",defaultValue:E,disabled:k=!1,error:D=!1,FormHelperTextProps:R,fullWidth:j=!1,helperText:N,id:$,InputLabelProps:ee,inputProps:W,InputProps:K,inputRef:Y,label:ie,maxRows:ue,minRows:de,multiline:M=!1,name:Te,onBlur:fe,onChange:Oe,onClick:rt,onFocus:at,placeholder:qe,required:ze=!1,rows:Be,select:tt=!1,SelectProps:Ke,type:Le,value:Je,variant:it="outlined"}=i,kt=Qn(i,wae),yt=_e({},i,{autoFocus:u,color:v,disabled:k,error:D,fullWidth:j,multiline:M,required:ze,select:tt,variant:it}),wt=Sae(yt),jt={};it==="outlined"&&(ee&&typeof ee.shrink<"u"&&(jt.notched=ee.shrink),jt.label=ie),tt&&((!Ke||!Ke.native)&&(jt.id=void 0),jt["aria-describedby"]=void 0);const Qt=d7($),en=N&&Qt?`${Qt}-helper-text`:void 0,on=ie&&Qt?`${Qt}-label`:void 0,Sn=Eae[it],Jt=Z.jsx(Sn,_e({"aria-describedby":en,autoComplete:a,autoFocus:u,defaultValue:E,fullWidth:j,multiline:M,name:Te,rows:Be,maxRows:ue,minRows:de,type:Le,value:Je,id:Qt,inputRef:Y,onBlur:fe,onChange:Oe,onFocus:at,onClick:rt,placeholder:qe,inputProps:W},jt,K));return Z.jsxs(Tae,_e({className:rr(wt.root,o),disabled:k,error:D,fullWidth:j,ref:n,required:ze,color:v,variant:it,ownerState:yt},kt,{children:[ie!=null&&ie!==""&&Z.jsx(Tie,_e({htmlFor:Qt,id:on},ee,{children:ie})),tt?Z.jsx(xae,_e({"aria-describedby":en,id:Qt,labelId:on,value:Je,input:Jt},Ke,{children:f})):Jt,N&&Z.jsx(Nie,_e({id:en},R,{children:N}))]}))}),zI=Cae,kae=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Pae=$n($ne,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Iae=q.forwardRef(function(t,n){var i;const a=M7(),u=Ai({props:t,name:"MuiPopper"}),{anchorEl:f,component:o,components:v,componentsProps:E,container:k,disablePortal:D,keepMounted:R,modifiers:j,open:N,placement:$,popperOptions:ee,popperRef:W,transition:K,slots:Y,slotProps:ie}=u,ue=Qn(u,kae),de=(i=Y==null?void 0:Y.root)!=null?i:v==null?void 0:v.Root,M=_e({anchorEl:f,container:k,disablePortal:D,keepMounted:R,modifiers:j,open:N,placement:$,popperOptions:ee,popperRef:W,transition:K},ue);return Z.jsx(Pae,_e({as:o,direction:a==null?void 0:a.direction,slots:{root:de},slotProps:ie??E},M,{ref:n}))}),Bz=Iae;function Aae(e){return vi("MuiListSubheader",e)}Ii("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const Mae=["className","color","component","disableGutters","disableSticky","inset"],Dae=e=>{const{classes:t,color:n,disableGutters:i,inset:a,disableSticky:u}=e,f={root:["root",n!=="default"&&`color${In(n)}`,!i&&"gutters",a&&"inset",!u&&"sticky"]};return Pi(f,Aae,t)},Oae=$n("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${In(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>_e({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),jz=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiListSubheader"}),{className:a,color:u="default",component:f="li",disableGutters:o=!1,disableSticky:v=!1,inset:E=!1}=i,k=Qn(i,Mae),D=_e({},i,{color:u,component:f,disableGutters:o,disableSticky:v,inset:E}),R=Dae(D);return Z.jsx(Oae,_e({as:f,className:rr(R.root,a),ref:n,ownerState:D},k))});jz.muiSkipListHighlight=!0;const Rae=jz;function Lae(e){const{className:t,classes:n,pulsate:i=!1,rippleX:a,rippleY:u,rippleSize:f,in:o,onExited:v,timeout:E}=e,[k,D]=q.useState(!1),R=rr(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),j={width:f,height:f,top:-(f/2)+u,left:-(f/2)+a},N=rr(n.child,k&&n.childLeaving,i&&n.childPulsate);return!o&&!k&&D(!0),q.useEffect(()=>{if(!o&&v!=null){const $=setTimeout(v,E);return()=>{clearTimeout($)}}},[v,o,E]),Z.jsx("span",{className:R,style:j,children:Z.jsx("span",{className:N})})}const zae=Ii("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),dl=zae,Fae=["center","classes","className"];let Kb=e=>e,FI,NI,BI,jI;const GE=550,Nae=80,Bae=wb(FI||(FI=Kb`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),jae=wb(NI||(NI=Kb`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),$ae=wb(BI||(BI=Kb`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Uae=$n("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Vae=$n(Lae,{name:"MuiTouchRipple",slot:"Ripple"})(jI||(jI=Kb`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),dl.rippleVisible,Bae,GE,({theme:e})=>e.transitions.easing.easeInOut,dl.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,dl.child,dl.childLeaving,jae,GE,({theme:e})=>e.transitions.easing.easeInOut,dl.childPulsate,$ae,({theme:e})=>e.transitions.easing.easeInOut),Wae=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiTouchRipple"}),{center:a=!1,classes:u={},className:f}=i,o=Qn(i,Fae),[v,E]=q.useState([]),k=q.useRef(0),D=q.useRef(null);q.useEffect(()=>{D.current&&(D.current(),D.current=null)},[v]);const R=q.useRef(!1),j=q.useRef(0),N=q.useRef(null),$=q.useRef(null);q.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const ee=q.useCallback(ie=>{const{pulsate:ue,rippleX:de,rippleY:M,rippleSize:Te,cb:fe}=ie;E(Oe=>[...Oe,Z.jsx(Vae,{classes:{ripple:rr(u.ripple,dl.ripple),rippleVisible:rr(u.rippleVisible,dl.rippleVisible),ripplePulsate:rr(u.ripplePulsate,dl.ripplePulsate),child:rr(u.child,dl.child),childLeaving:rr(u.childLeaving,dl.childLeaving),childPulsate:rr(u.childPulsate,dl.childPulsate)},timeout:GE,pulsate:ue,rippleX:de,rippleY:M,rippleSize:Te},k.current)]),k.current+=1,D.current=fe},[u]),W=q.useCallback((ie={},ue={},de=()=>{})=>{const{pulsate:M=!1,center:Te=a||ue.pulsate,fakeElement:fe=!1}=ue;if((ie==null?void 0:ie.type)==="mousedown"&&R.current){R.current=!1;return}(ie==null?void 0:ie.type)==="touchstart"&&(R.current=!0);const Oe=fe?null:$.current,rt=Oe?Oe.getBoundingClientRect():{width:0,height:0,left:0,top:0};let at,qe,ze;if(Te||ie===void 0||ie.clientX===0&&ie.clientY===0||!ie.clientX&&!ie.touches)at=Math.round(rt.width/2),qe=Math.round(rt.height/2);else{const{clientX:Be,clientY:tt}=ie.touches&&ie.touches.length>0?ie.touches[0]:ie;at=Math.round(Be-rt.left),qe=Math.round(tt-rt.top)}if(Te)ze=Math.sqrt((2*rt.width**2+rt.height**2)/3),ze%2===0&&(ze+=1);else{const Be=Math.max(Math.abs((Oe?Oe.clientWidth:0)-at),at)*2+2,tt=Math.max(Math.abs((Oe?Oe.clientHeight:0)-qe),qe)*2+2;ze=Math.sqrt(Be**2+tt**2)}ie!=null&&ie.touches?N.current===null&&(N.current=()=>{ee({pulsate:M,rippleX:at,rippleY:qe,rippleSize:ze,cb:de})},j.current=setTimeout(()=>{N.current&&(N.current(),N.current=null)},Nae)):ee({pulsate:M,rippleX:at,rippleY:qe,rippleSize:ze,cb:de})},[a,ee]),K=q.useCallback(()=>{W({},{pulsate:!0})},[W]),Y=q.useCallback((ie,ue)=>{if(clearTimeout(j.current),(ie==null?void 0:ie.type)==="touchend"&&N.current){N.current(),N.current=null,j.current=setTimeout(()=>{Y(ie,ue)});return}N.current=null,E(de=>de.length>0?de.slice(1):de),D.current=ue},[]);return q.useImperativeHandle(n,()=>({pulsate:K,start:W,stop:Y}),[K,W,Y]),Z.jsx(Uae,_e({className:rr(dl.root,u.root,f),ref:$},o,{children:Z.jsx(ioe,{component:null,exit:!0,children:v})}))}),Hae=Wae;function qae(e){return vi("MuiButtonBase",e)}const Gae=Ii("MuiButtonBase",["root","disabled","focusVisible"]),Zae=Gae,Xae=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Kae=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:i,classes:a}=e,f=Pi({root:["root",t&&"disabled",n&&"focusVisible"]},qae,a);return n&&i&&(f.root+=` ${i}`),f},Yae=$n("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Zae.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Jae=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiButtonBase"}),{action:a,centerRipple:u=!1,children:f,className:o,component:v="button",disabled:E=!1,disableRipple:k=!1,disableTouchRipple:D=!1,focusRipple:R=!1,LinkComponent:j="a",onBlur:N,onClick:$,onContextMenu:ee,onDragLeave:W,onFocus:K,onFocusVisible:Y,onKeyDown:ie,onKeyUp:ue,onMouseDown:de,onMouseLeave:M,onMouseUp:Te,onTouchEnd:fe,onTouchMove:Oe,onTouchStart:rt,tabIndex:at=0,TouchRippleProps:qe,touchRippleRef:ze,type:Be}=i,tt=Qn(i,Xae),Ke=q.useRef(null),Le=q.useRef(null),Je=wo(Le,ze),{isFocusVisibleRef:it,onFocus:kt,onBlur:yt,ref:wt}=h7(),[jt,Qt]=q.useState(!1);E&&jt&&Qt(!1),q.useImperativeHandle(a,()=>({focusVisible:()=>{Qt(!0),Ke.current.focus()}}),[]);const[en,on]=q.useState(!1);q.useEffect(()=>{on(!0)},[]);const Sn=en&&!k&&!E;q.useEffect(()=>{jt&&R&&!k&&en&&Le.current.pulsate()},[k,R,jt,en]);function Jt(rn,sn,vn=D){return hs(Dn=>(sn&&sn(Dn),!vn&&Le.current&&Le.current[rn](Dn),!0))}const yn=Jt("start",de),Ft=Jt("stop",ee),nn=Jt("stop",W),bn=Jt("stop",Te),qt=Jt("stop",rn=>{jt&&rn.preventDefault(),M&&M(rn)}),It=Jt("start",rt),Rn=Jt("stop",fe),ln=Jt("stop",Oe),Zn=Jt("stop",rn=>{yt(rn),it.current===!1&&Qt(!1),N&&N(rn)},!1),tr=hs(rn=>{Ke.current||(Ke.current=rn.currentTarget),kt(rn),it.current===!0&&(Qt(!0),Y&&Y(rn)),K&&K(rn)}),Fn=()=>{const rn=Ke.current;return v&&v!=="button"&&!(rn.tagName==="A"&&rn.href)},Yn=q.useRef(!1),Un=hs(rn=>{R&&!Yn.current&&jt&&Le.current&&rn.key===" "&&(Yn.current=!0,Le.current.stop(rn,()=>{Le.current.start(rn)})),rn.target===rn.currentTarget&&Fn()&&rn.key===" "&&rn.preventDefault(),ie&&ie(rn),rn.target===rn.currentTarget&&Fn()&&rn.key==="Enter"&&!E&&(rn.preventDefault(),$&&$(rn))}),qn=hs(rn=>{R&&rn.key===" "&&Le.current&&jt&&!rn.defaultPrevented&&(Yn.current=!1,Le.current.stop(rn,()=>{Le.current.pulsate(rn)})),ue&&ue(rn),$&&rn.target===rn.currentTarget&&Fn()&&rn.key===" "&&!rn.defaultPrevented&&$(rn)});let wn=v;wn==="button"&&(tt.href||tt.to)&&(wn=j);const Qe={};wn==="button"?(Qe.type=Be===void 0?"button":Be,Qe.disabled=E):(!tt.href&&!tt.to&&(Qe.role="button"),E&&(Qe["aria-disabled"]=E));const Kt=wo(n,wt,Ke),an=_e({},i,{centerRipple:u,component:v,disabled:E,disableRipple:k,disableTouchRipple:D,focusRipple:R,tabIndex:at,focusVisible:jt}),Zt=Kae(an);return Z.jsxs(Yae,_e({as:wn,className:rr(Zt.root,o),ownerState:an,onBlur:Zn,onClick:$,onContextMenu:Ft,onFocus:tr,onKeyDown:Un,onKeyUp:qn,onMouseDown:yn,onMouseLeave:qt,onMouseUp:bn,onDragLeave:nn,onTouchEnd:Rn,onTouchMove:ln,onTouchStart:It,ref:Kt,tabIndex:E?-1:at,type:Be},Qe,tt,{children:[f,Sn?Z.jsx(Hae,_e({ref:Je,center:u},qe)):null]}))}),rx=Jae;function Qae(e){return vi("MuiIconButton",e)}const ese=Ii("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),tse=ese,nse=["edge","children","className","color","disabled","disableFocusRipple","size"],rse=e=>{const{classes:t,disabled:n,color:i,edge:a,size:u}=e,f={root:["root",n&&"disabled",i!=="default"&&`color${In(i)}`,a&&`edge${In(a)}`,`size${In(u)}`]};return Pi(f,Qae,t)},ise=$n(rx,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${In(n.color)}`],n.edge&&t[`edge${In(n.edge)}`],t[`size${In(n.size)}`]]}})(({theme:e,ownerState:t})=>_e({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:no(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const i=(n=(e.vars||e).palette)==null?void 0:n[t.color];return _e({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&_e({color:i==null?void 0:i.main},!t.disableRipple&&{"&:hover":_e({},i&&{backgroundColor:e.vars?`rgba(${i.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:no(i.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${tse.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),ose=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiIconButton"}),{edge:a=!1,children:u,className:f,color:o="default",disabled:v=!1,disableFocusRipple:E=!1,size:k="medium"}=i,D=Qn(i,nse),R=_e({},i,{edge:a,color:o,disabled:v,disableFocusRipple:E,size:k}),j=rse(R);return Z.jsx(ise,_e({className:rr(j.root,f),centerRipple:!0,focusRipple:!E,disabled:v,ref:n,ownerState:R},D,{children:u}))}),$z=ose,ase=Xb(Z.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function sse(e){return vi("MuiChip",e)}const lse=Ii("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Qr=lse,cse=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],use=e=>{const{classes:t,disabled:n,size:i,color:a,iconColor:u,onDelete:f,clickable:o,variant:v}=e,E={root:["root",v,n&&"disabled",`size${In(i)}`,`color${In(a)}`,o&&"clickable",o&&`clickableColor${In(a)}`,f&&"deletable",f&&`deletableColor${In(a)}`,`${v}${In(a)}`],label:["label",`label${In(i)}`],avatar:["avatar",`avatar${In(i)}`,`avatarColor${In(a)}`],icon:["icon",`icon${In(i)}`,`iconColor${In(u)}`],deleteIcon:["deleteIcon",`deleteIcon${In(i)}`,`deleteIconColor${In(a)}`,`deleteIcon${In(v)}Color${In(a)}`]};return Pi(E,sse,t)},dse=$n("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:i,iconColor:a,clickable:u,onDelete:f,size:o,variant:v}=n;return[{[`& .${Qr.avatar}`]:t.avatar},{[`& .${Qr.avatar}`]:t[`avatar${In(o)}`]},{[`& .${Qr.avatar}`]:t[`avatarColor${In(i)}`]},{[`& .${Qr.icon}`]:t.icon},{[`& .${Qr.icon}`]:t[`icon${In(o)}`]},{[`& .${Qr.icon}`]:t[`iconColor${In(a)}`]},{[`& .${Qr.deleteIcon}`]:t.deleteIcon},{[`& .${Qr.deleteIcon}`]:t[`deleteIcon${In(o)}`]},{[`& .${Qr.deleteIcon}`]:t[`deleteIconColor${In(i)}`]},{[`& .${Qr.deleteIcon}`]:t[`deleteIcon${In(v)}Color${In(i)}`]},t.root,t[`size${In(o)}`],t[`color${In(i)}`],u&&t.clickable,u&&i!=="default"&&t[`clickableColor${In(i)})`],f&&t.deletable,f&&i!=="default"&&t[`deletableColor${In(i)}`],t[v],t[`${v}${In(i)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return _e({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Qr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Qr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${Qr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Qr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Qr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Qr.icon}`]:_e({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&_e({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},t.color!=="default"&&{color:"inherit"})),[`& .${Qr.deleteIcon}`]:_e({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:no(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:no(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:no(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${Qr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:no(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${Qr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>_e({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:no(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Qr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:no(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${Qr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>_e({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Qr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Qr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Qr.avatar}`]:{marginLeft:4},[`& .${Qr.avatarSmall}`]:{marginLeft:2},[`& .${Qr.icon}`]:{marginLeft:4},[`& .${Qr.iconSmall}`]:{marginLeft:2},[`& .${Qr.deleteIcon}`]:{marginRight:5},[`& .${Qr.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:no(e.palette[t.color].main,.7)}`,[`&.${Qr.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:no(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${Qr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:no(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${Qr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:no(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),hse=$n("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:i}=n;return[t.label,t[`label${In(i)}`]]}})(({ownerState:e})=>_e({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function $I(e){return e.key==="Backspace"||e.key==="Delete"}const pse=q.forwardRef(function(t,n){const i=Ai({props:t,name:"MuiChip"}),{avatar:a,className:u,clickable:f,color:o="default",component:v,deleteIcon:E,disabled:k=!1,icon:D,label:R,onClick:j,onDelete:N,onKeyDown:$,onKeyUp:ee,size:W="medium",variant:K="filled",tabIndex:Y,skipFocusWhenDisabled:ie=!1}=i,ue=Qn(i,cse),de=q.useRef(null),M=wo(de,n),Te=Je=>{Je.stopPropagation(),N&&N(Je)},fe=Je=>{Je.currentTarget===Je.target&&$I(Je)&&Je.preventDefault(),$&&$(Je)},Oe=Je=>{Je.currentTarget===Je.target&&(N&&$I(Je)?N(Je):Je.key==="Escape"&&de.current&&de.current.blur()),ee&&ee(Je)},rt=f!==!1&&j?!0:f,at=rt||N?rx:v||"div",qe=_e({},i,{component:at,disabled:k,size:W,color:o,iconColor:q.isValidElement(D)&&D.props.color||o,onDelete:!!N,clickable:rt,variant:K}),ze=use(qe),Be=at===rx?_e({component:v||"div",focusVisibleClassName:ze.focusVisible},N&&{disableRipple:!0}):{};let tt=null;N&&(tt=E&&q.isValidElement(E)?q.cloneElement(E,{className:rr(E.props.className,ze.deleteIcon),onClick:Te}):Z.jsx(ase,{className:rr(ze.deleteIcon),onClick:Te}));let Ke=null;a&&q.isValidElement(a)&&(Ke=q.cloneElement(a,{className:rr(ze.avatar,a.props.className)}));let Le=null;return D&&q.isValidElement(D)&&(Le=q.cloneElement(D,{className:rr(ze.icon,D.props.className)})),Z.jsxs(dse,_e({as:at,className:rr(ze.root,u),disabled:rt&&k?!0:void 0,onClick:j,onKeyDown:fe,onKeyUp:Oe,ref:M,tabIndex:ie&&k?-1:Y,ownerState:qe},Be,ue,{children:[Ke||Le,Z.jsx(hse,{className:rr(ze.label),ownerState:qe,children:R}),tt]}))}),fse=pse,mse=Xb(Z.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function gse(e){return vi("MuiAutocomplete",e)}const _se=Ii("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),Nr=_se;var UI,VI;const yse=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],vse=["ref"],xse=e=>{const{classes:t,disablePortal:n,expanded:i,focused:a,fullWidth:u,hasClearIcon:f,hasPopupIcon:o,inputFocused:v,popupOpen:E,size:k}=e,D={root:["root",i&&"expanded",a&&"focused",u&&"fullWidth",f&&"hasClearIcon",o&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",v&&"inputFocused"],tag:["tag",`tagSize${In(k)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",E&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return Pi(D,gse,t)},bse=$n("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:i,hasClearIcon:a,hasPopupIcon:u,inputFocused:f,size:o}=n;return[{[`& .${Nr.tag}`]:t.tag},{[`& .${Nr.tag}`]:t[`tagSize${In(o)}`]},{[`& .${Nr.inputRoot}`]:t.inputRoot},{[`& .${Nr.input}`]:t.input},{[`& .${Nr.input}`]:f&&t.inputFocused},t.root,i&&t.fullWidth,u&&t.hasPopupIcon,a&&t.hasClearIcon]}})(({ownerState:e})=>_e({[`&.${Nr.focused} .${Nr.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${Nr.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${Nr.tag}`]:_e({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${Nr.inputRoot}`]:{flexWrap:"wrap",[`.${Nr.hasPopupIcon}&, .${Nr.hasClearIcon}&`]:{paddingRight:26+4},[`.${Nr.hasPopupIcon}.${Nr.hasClearIcon}&`]:{paddingRight:52+4},[`& .${Nr.input}`]:{width:0,minWidth:30}},[`& .${Dd.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Dd.root}.${Fs.sizeSmall}`]:{[`& .${Dd.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Nc.root}`]:{padding:9,[`.${Nr.hasPopupIcon}&, .${Nr.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${Nr.hasPopupIcon}.${Nr.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${Nr.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${Nr.endAdornment}`]:{right:9}},[`& .${Nc.root}.${Fs.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${Nr.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Ns.root}`]:{paddingTop:19,paddingLeft:8,[`.${Nr.hasPopupIcon}&, .${Nr.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${Nr.hasPopupIcon}.${Nr.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${Ns.input}`]:{padding:"7px 4px"},[`& .${Nr.endAdornment}`]:{right:9}},[`& .${Ns.root}.${Fs.sizeSmall}`]:{paddingBottom:1,[`& .${Ns.input}`]:{padding:"2.5px 4px"}},[`& .${Fs.hiddenLabel}`]:{paddingTop:8},[`& .${Ns.root}.${Fs.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${Nr.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Ns.root}.${Fs.hiddenLabel}.${Fs.sizeSmall}`]:{[`& .${Nr.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${Nr.input}`]:_e({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),wse=$n("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),Ese=$n($z,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Sse=$n($z,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>_e({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>_e({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),Tse=$n(Bz,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Nr.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>_e({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),Cse=$n(X7,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>_e({},e.typography.body1,{overflow:"auto"})),kse=$n("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Pse=$n("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Ise=$n("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${Nr.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${Nr.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Nr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:no(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Nr.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:no(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Nr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:no(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),Ase=$n(Rae,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),Mse=$n("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${Nr.option}`]:{paddingLeft:24}}),Dse=q.forwardRef(function(t,n){var i,a,u,f;const o=Ai({props:t,name:"MuiAutocomplete"}),{autoComplete:v=!1,autoHighlight:E=!1,autoSelect:k=!1,blurOnSelect:D=!1,ChipProps:R,className:j,clearIcon:N=UI||(UI=Z.jsx(mse,{fontSize:"small"})),clearOnBlur:$=!o.freeSolo,clearOnEscape:ee=!1,clearText:W="Clear",closeText:K="Close",componentsProps:Y={},defaultValue:ie=o.multiple?[]:null,disableClearable:ue=!1,disableCloseOnSelect:de=!1,disabled:M=!1,disabledItemsFocusable:Te=!1,disableListWrap:fe=!1,disablePortal:Oe=!1,filterSelectedOptions:rt=!1,forcePopupIcon:at="auto",freeSolo:qe=!1,fullWidth:ze=!1,getLimitTagsText:Be=Ze=>`+${Ze}`,getOptionLabel:tt=Ze=>{var Se;return(Se=Ze.label)!=null?Se:Ze},groupBy:Ke,handleHomeEndKeys:Le=!o.freeSolo,includeInputInList:Je=!1,limitTags:it=-1,ListboxComponent:kt="ul",ListboxProps:yt,loading:wt=!1,loadingText:jt="Loading",multiple:Qt=!1,noOptionsText:en="No options",openOnFocus:on=!1,openText:Sn="Open",PaperComponent:Jt=X7,PopperComponent:yn=Bz,popupIcon:Ft=VI||(VI=Z.jsx(Fz,{})),readOnly:nn=!1,renderGroup:bn,renderInput:qt,renderOption:It,renderTags:Rn,selectOnFocus:ln=!o.freeSolo,size:Zn="medium",slotProps:tr={}}=o,Fn=Qn(o,yse),{getRootProps:Yn,getInputProps:Un,getInputLabelProps:qn,getPopupIndicatorProps:wn,getClearProps:Qe,getTagProps:Kt,getListboxProps:an,getOptionProps:Zt,value:rn,dirty:sn,expanded:vn,id:Dn,popupOpen:Nn,focused:nr,focusedTag:Dr,anchorEl:yr,setAnchorEl:bi,inputValue:pi,groupedOptions:Ce}=mre(_e({},o,{componentName:"Autocomplete"})),oe=!ue&&!M&&sn&&!nn,ae=(!qe||at===!0)&&at!==!1,{onMouseDown:ye}=Un(),{ref:De}=yt??{},Re=an(),{ref:Ge}=Re,Xe=Qn(Re,vse),Ue=wo(Ge,De),je=_e({},o,{disablePortal:Oe,expanded:vn,focused:nr,fullWidth:ze,hasClearIcon:oe,hasPopupIcon:ae,inputFocused:Dr===-1,popupOpen:Nn,size:Zn}),ut=xse(je);let At;if(Qt&&rn.length>0){const Ze=Se=>_e({className:ut.tag,disabled:M},Kt(Se));Rn?At=Rn(rn,Ze,je):At=rn.map((Se,ct)=>Z.jsx(fse,_e({label:tt(Se),size:Zn},Ze({index:ct}),R)))}if(it>-1&&Array.isArray(At)){const Ze=At.length-it;!nr&&Ze>0&&(At=At.splice(0,it),At.push(Z.jsx("span",{className:ut.tag,children:Be(Ze)},At.length)))}const gn=bn||(Ze=>Z.jsxs("li",{children:[Z.jsx(Ase,{className:ut.groupLabel,ownerState:je,component:"div",children:Ze.group}),Z.jsx(Mse,{className:ut.groupUl,ownerState:je,children:Ze.children})]},Ze.key)),An=It||((Ze,Se)=>Z.jsx("li",_e({},Ze,{children:tt(Se)}))),Ln=(Ze,Se)=>{const ct=Zt({option:Ze,index:Se});return An(_e({},ct,{className:ut.option}),Ze,{selected:ct["aria-selected"],index:Se,inputValue:pi},je)},Xn=(i=tr.clearIndicator)!=null?i:Y.clearIndicator,wr=(a=tr.paper)!=null?a:Y.paper,Er=(u=tr.popper)!=null?u:Y.popper,Or=(f=tr.popupIndicator)!=null?f:Y.popupIndicator;return Z.jsxs(q.Fragment,{children:[Z.jsx(bse,_e({ref:n,className:rr(ut.root,j),ownerState:je},Yn(Fn),{children:qt({id:Dn,disabled:M,fullWidth:!0,size:Zn==="small"?"small":void 0,InputLabelProps:qn(),InputProps:_e({ref:bi,className:ut.inputRoot,startAdornment:At,onClick:Ze=>{Ze.target===Ze.currentTarget&&ye(Ze)}},(oe||ae)&&{endAdornment:Z.jsxs(wse,{className:ut.endAdornment,ownerState:je,children:[oe?Z.jsx(Ese,_e({},Qe(),{"aria-label":W,title:W,ownerState:je},Xn,{className:rr(ut.clearIndicator,Xn==null?void 0:Xn.className),children:N})):null,ae?Z.jsx(Sse,_e({},wn(),{disabled:M,"aria-label":Nn?K:Sn,title:Nn?K:Sn,ownerState:je},Or,{className:rr(ut.popupIndicator,Or==null?void 0:Or.className),children:Ft})):null]})}),inputProps:_e({className:ut.input,disabled:M,readOnly:nn},Un())})})),yr?Z.jsx(Tse,_e({as:yn,disablePortal:Oe,style:{width:yr?yr.clientWidth:null},ownerState:je,role:"presentation",anchorEl:yr,open:Nn},Er,{className:rr(ut.popper,Er==null?void 0:Er.className),children:Z.jsxs(Cse,_e({ownerState:je,as:Jt},wr,{className:rr(ut.paper,wr==null?void 0:wr.className),children:[wt&&Ce.length===0?Z.jsx(kse,{className:ut.loading,ownerState:je,children:jt}):null,Ce.length===0&&!qe&&!wt?Z.jsx(Pse,{className:ut.noOptions,ownerState:je,role:"presentation",onMouseDown:Ze=>{Ze.preventDefault()},children:en}):null,Ce.length>0?Z.jsx(Ise,_e({as:kt,className:ut.listbox,ownerState:je},Xe,yt,{ref:Ue,children:Ce.map((Ze,Se)=>Ke?gn({key:Ze.key,group:Ze.group,children:Ze.options.map((ct,Rt)=>Ln(ct,Ze.index+Rt))}):Ln(Ze,Se))})):null]}))})):null]})}),WI=Dse,Ose=Tee({createStyledComponent:$n("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Ai({props:e,name:"MuiStack"})}),kv=Ose;function Rse(e){return vi("MuiButton",e)}const Lse=Ii("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Pv=Lse,zse=q.createContext({}),Fse=zse,Nse=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Bse=e=>{const{color:t,disableElevation:n,fullWidth:i,size:a,variant:u,classes:f}=e,o={root:["root",u,`${u}${In(t)}`,`size${In(a)}`,`${u}Size${In(a)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${In(a)}`],endIcon:["endIcon",`iconSize${In(a)}`]},v=Pi(o,Rse,f);return _e({},f,v)},Uz=e=>_e({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),jse=$n(rx,{shouldForwardProp:e=>Yu(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${In(n.color)}`],t[`size${In(n.size)}`],t[`${n.variant}Size${In(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,i;const a=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],u=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return _e({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":_e({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:no(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:no(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:no(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:u,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":_e({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${Pv.focusVisible}`]:_e({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${Pv.disabled}`]:_e({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${no(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(i=e.palette).getContrastText)==null?void 0:n.call(i,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:a,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Pv.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Pv.disabled}`]:{boxShadow:"none"}}),$se=$n("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${In(n.size)}`]]}})(({ownerState:e})=>_e({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},Uz(e))),Use=$n("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${In(n.size)}`]]}})(({ownerState:e})=>_e({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},Uz(e))),Vse=q.forwardRef(function(t,n){const i=q.useContext(Fse),a=p7(i,t),u=Ai({props:a,name:"MuiButton"}),{children:f,color:o="primary",component:v="button",className:E,disabled:k=!1,disableElevation:D=!1,disableFocusRipple:R=!1,endIcon:j,focusVisibleClassName:N,fullWidth:$=!1,size:ee="medium",startIcon:W,type:K,variant:Y="text"}=u,ie=Qn(u,Nse),ue=_e({},u,{color:o,component:v,disabled:k,disableElevation:D,disableFocusRipple:R,fullWidth:$,size:ee,type:K,variant:Y}),de=Bse(ue),M=W&&Z.jsx($se,{className:de.startIcon,ownerState:ue,children:W}),Te=j&&Z.jsx(Use,{className:de.endIcon,ownerState:ue,children:j});return Z.jsxs(jse,_e({ownerState:ue,className:rr(i.className,de.root,E),component:v,disabled:k,focusRipple:!R,focusVisibleClassName:rr(de.focusVisible,N),ref:n,type:K},ie,{classes:de,children:[M,f,Te]}))}),Rs=Vse;var J7={},Vz={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Vz);var iu=Vz.exports,V4={};const Wse={configure:e=>{DL.configure(e)}},Hse=Object.freeze(Object.defineProperty({__proto__:null,capitalize:In,createChainedFunction:LE,createSvgIcon:Xb,debounce:u7,deprecatedPropType:IY,isMuiElement:e2,ownerDocument:Mo,ownerWindow:sh,requirePropFactory:AY,setRef:Z0,unstable_ClassNameGenerator:Wse,unstable_useEnhancedEffect:Qc,unstable_useId:d7,unsupportedProp:OY,useControlled:hp,useEventCallback:hs,useForkRef:wo,useIsFocusVisible:h7},Symbol.toStringTag,{value:"Module"})),qse=C6(Hse);var HI;function ou(){return HI||(HI=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=qse}(V4)),V4}var Gse=iu;Object.defineProperty(J7,"__esModule",{value:!0});var ZE=J7.default=void 0,Zse=Gse(ou()),Xse=Z,Kse=(0,Zse.default)((0,Xse.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");ZE=J7.default=Kse;var Q7={},Yse=iu;Object.defineProperty(Q7,"__esModule",{value:!0});var XE=Q7.default=void 0,Jse=Yse(ou()),Qse=Z,ele=(0,Jse.default)((0,Qse.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"}),"Map");XE=Q7.default=ele;var eT={},tle=iu;Object.defineProperty(eT,"__esModule",{value:!0});var KE=eT.default=void 0,nle=tle(ou()),rle=Z,ile=(0,nle.default)((0,rle.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");KE=eT.default=ile;var tT={},ole=iu;Object.defineProperty(tT,"__esModule",{value:!0});var YE=tT.default=void 0,ale=ole(ou()),sle=Z,lle=(0,ale.default)((0,sle.jsx)("path",{d:"M20.94 11c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}),"LocationSearching");YE=tT.default=lle;const cle=(e,t)=>{const[n,i]=q.useState([]),a=async()=>{if(console.log("displayRoute called"),!(!e||!t||!t.waypoints||!t.longitude||!t.latitude||!t.endLongitude||!t.endLatitude))try{let u="";t.waypoints.length>0&&(u=t.waypoints.map(R=>`${R[1]},${R[0]}`).join(";")),console.log(t.waypoints),console.log("ways:",u);const f=`https://api.mapbox.com/directions/v5/mapbox/walking/${t.longitude},${t.latitude};${u};${t.endLongitude},${t.endLatitude}?geometries=geojson&access_token=${ds.accessToken}`,E=(await(await fetch(f)).json()).routes[0].geometry.coordinates;if(!Array.isArray(E)||E.some(R=>R.length!==2||isNaN(R[0])||isNaN(R[1]))){console.error("Invalid route coordinates:",E);return}const k={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:E}};e.getSource("route")&&(e.removeLayer("route"),e.removeSource("route")),e.addSource("route",{type:"geojson",data:k}),e.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3b9ddd","line-width":4}});const D=new ds.LngLatBounds;E.forEach(R=>{Array.isArray(R)&&R.length===2&&!isNaN(R[0])&&!isNaN(R[1])?D.extend(R):console.error("Invalid coordinate:",R)}),D.isEmpty()?console.error("No valid coordinates to fit bounds"):(console.log("Bounds:",D.toArray()),e.fitBounds(D,{margin:100})),i(E)}catch(u){console.error("Error:",u)}};return q.useEffect(()=>{a()},[t.waypoints]),{route:n,displayRoute:a}},ule=(e,t,n,i,a,u,f,o,v,E)=>{const[k,D]=q.useState({lat:null,lng:null,address:""});return q.useEffect(()=>{if(e){const R=j=>{(t||i)&&(n(!1),a(!1),fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${j.lngLat.lng},${j.lngLat.lat}.json?access_token=${ds.accessToken}`).then(N=>N.json()).then(N=>{var ee;const $=((ee=N.features[0])==null?void 0:ee.place_name)||"Unknown location";D({lat:j.lngLat.lat,lng:j.lngLat.lng,address:$}),t?f(W=>({...W,latitude:j.lngLat.lat,longitude:j.lngLat.lng})):i&&f(W=>({...W,endLatitude:j.lngLat.lat,endLongitude:j.lngLat.lng})),v(!0),E(!0)}).catch(N=>console.error("Error:",N)))};return e.on("click",R),()=>{e.off("click",R)}}},[e,t,i]),{location:k,setLocation:D}},dle=[{id:"P5029111",name:"Battery Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":21,"taxi-zone":12,precinct:1,"b-score":{0:65,1:44,2:26,3:18,4:15,5:9,6:25,7:35,8:49,9:102,10:107,11:134,12:198,13:196,14:194,15:171,16:154,17:129,18:148,19:152,20:144,21:132,22:132,23:98},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7028143,longitude:-74.015775},last_updated:null},{id:"P22727025",name:"Bryant Park",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:"Mo-Su 07:00-23:00","grid-id":502,"taxi-zone":164,precinct:14,"b-score":{0:23,1:16,2:17,3:9,4:7,5:10,6:5,7:10,8:10,9:11,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:13,18:17,19:24,20:29,21:31,22:40,23:39},"c-score":1,rating:1.5,location:{latitude:40.7537508,longitude:-73.9835384},last_updated:null},{id:"P22899286",name:"Madison Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"06:00-23:00","grid-id":419,"taxi-zone":234,precinct:13,"b-score":{0:338,1:202,2:109,3:69,4:53,5:158,6:476,7:542,8:652,9:682,10:892,11:897,12:906,13:913,14:919,15:1092,16:1484,17:1589,18:1540,19:1557,20:1441,21:1446,22:1125,23:734},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7421868,longitude:-73.987872},last_updated:null},{id:"P22899302",name:"Washington Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":267,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.730896,longitude:-73.9975857},last_updated:null},{id:"P22900913",name:"Dr. Gertrude B. Kelly Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":184,"taxi-zone":68,precinct:10,"b-score":{0:317,1:195,2:130,3:66,4:78,5:112,6:207,7:304,8:534,9:501,10:519,11:598,12:693,13:697,14:827,15:843,16:831,17:863,18:860,19:818,20:837,21:828,22:729,23:552},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7416557,longitude:-74.0020105},last_updated:null},{id:"P22900959",name:"Chelsea Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":217,"taxi-zone":68,precinct:10,"b-score":{0:317,1:195,2:130,3:66,4:78,5:112,6:207,7:304,8:534,9:501,10:519,11:598,12:693,13:697,14:827,15:843,16:831,17:863,18:860,19:818,20:837,21:828,22:729,23:552},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7499194,longitude:-74.0006702},last_updated:null},{id:"P22901074",name:"Gramercy Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":465,"taxi-zone":107,precinct:13,"b-score":{0:69,1:71,2:26,3:19,4:16,5:20,6:40,7:68,8:66,9:110,10:111,11:117,12:121,13:127,14:146,15:145,16:144,17:180,18:181,19:163,20:150,21:146,22:144,23:103},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.737939,longitude:-73.9859225},last_updated:null},{id:"P22903972",name:"Chelsea Waterside Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":108,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7492535,longitude:-74.0074571},last_updated:null},{id:"P22904239",name:"14th Street Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":111,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.742717,longitude:-74.0082549},last_updated:null},{id:"P22926662",name:"Liberty Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":36,"taxi-zone":261,precinct:1,"b-score":{0:253,1:129,2:74,3:56,4:59,5:116,6:168,7:306,8:548,9:551,10:602,11:638,12:667,13:676,14:683,15:709,16:740,17:945,18:903,19:836,20:827,21:811,22:736,23:463},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7102299,longitude:-74.0135844},last_updated:null},{id:"P22926980",name:"Washington Market Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"Mo-Su 06:00-01:00","grid-id":61,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7170293,longitude:-74.0116375},last_updated:null},{id:"P22941918",name:"DeWitt Clinton Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":283,"taxi-zone":50,precinct:18,"b-score":{0:367,1:209,2:67,3:48,4:56,5:82,6:191,7:340,8:468,9:613,10:735,11:792,12:829,13:838,14:1161,15:1289,16:1151,17:1401,18:1419,19:1118,20:942,21:880,22:772,23:628},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7682011,longitude:-73.9942676},last_updated:null},{id:"P22961817",name:"Jackson Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":185,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7390049,longitude:-74.0028822},last_updated:null},{id:"P22961821",name:"Corporal John A. Seravalli Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":148,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7390844,longitude:-74.0048187},last_updated:null},{id:"P22961904",name:"Clement Clarke Moore Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":144,"taxi-zone":68,precinct:10,"b-score":{0:317,1:195,2:130,3:66,4:78,5:112,6:207,7:304,8:534,9:501,10:519,11:598,12:693,13:697,14:827,15:843,16:831,17:863,18:860,19:818,20:837,21:828,22:729,23:552},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.746629,longitude:-74.0043038},last_updated:null},{id:"P23048485",name:"Tudor City Greens - North Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":809,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7495583,longitude:-73.9705138},last_updated:null},{id:"P23048493",name:"Tudor City Greens - South Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":758,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7488541,longitude:-73.9710191},last_updated:null},{id:"P25026338",name:"Zuccotti Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":65,"taxi-zone":261,precinct:1,"b-score":{0:253,1:129,2:74,3:56,4:59,5:116,6:168,7:306,8:548,9:551,10:602,11:638,12:667,13:676,14:683,15:709,16:740,17:945,18:903,19:836,20:827,21:811,22:736,23:463},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7092314,longitude:-74.0112539},last_updated:null},{id:"P25162896",name:"Tompkins Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":565,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7264724,longitude:-73.9816871},last_updated:null},{id:"P30657456",name:"Christopher Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":188,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7335833,longitude:-74.0022513},last_updated:null},{id:"P30657462",name:"Sheridan Square Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":189,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7330286,longitude:-74.0021296},last_updated:null},{id:"P31009822",name:"Stuyvesant Cove Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":715,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7330953,longitude:-73.9739823},last_updated:null},{id:"P33804388",name:"East River Esplanade",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":811,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7449845,longitude:-73.9704672},last_updated:null},{id:"P33804405",name:"Asser Levy Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":661,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.8489244622311155,rating:1.5,location:{latitude:40.7364296,longitude:-73.9756472},last_updated:null},{id:"P36185652",name:"Bellevue Society Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":712,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7380949,longitude:-73.9745264},last_updated:null},{id:"P36865288",name:"Desalvio Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":309,"taxi-zone":144,precinct:5,"b-score":{0:329,1:200,2:133,3:76,4:95,5:86,6:169,7:345,8:381,9:354,10:356,11:360,12:385,13:395,14:420,15:440,16:452,17:420,18:401,19:399,20:404,21:420,22:542,23:518},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7216408,longitude:-73.9961097},last_updated:null},{id:"P37003318",name:"Riverside Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":531,"taxi-zone":239,precinct:20,"b-score":{0:98,1:114,2:40,3:25,4:24,5:35,6:96,7:152,8:156,9:189,10:297,11:307,12:323,13:334,14:329,15:340,16:328,17:334,18:309,19:302,20:299,21:307,22:299,23:278},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7880268,longitude:-73.982186},last_updated:null},{id:"P39243853",name:"Morningside Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":978,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8060522,longitude:-73.9580625},last_updated:null},{id:"P44225581",name:"Petrosino Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":272,"taxi-zone":144,precinct:5,"b-score":{0:329,1:200,2:133,3:76,4:95,5:86,6:169,7:345,8:381,9:354,10:356,11:360,12:385,13:395,14:420,15:440,16:452,17:420,18:401,19:399,20:404,21:420,22:542,23:518},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7217802,longitude:-73.9974692},last_updated:null},{id:"P53189828",name:"DeLury Square",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":165,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7091073,longitude:-74.0050236},last_updated:null},{id:"P66374787",name:"Columbus Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":237,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7151001,longitude:-74.0000509},last_updated:null},{id:"P75311774",name:"Battery Park City Ball Fields",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7160843,longitude:-74.0140082},last_updated:null},{id:"P75364733",name:"Bogardus Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":92,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7158736,longitude:-74.0090666},last_updated:null},{id:"P86144190",name:"Abingdon Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":149,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7372675,longitude:-74.0053868},last_updated:null},{id:"P86144198",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":150,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.736377,longitude:-74.0054892},last_updated:null},{id:"P86256760",name:"Arthur Strickler Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":150,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7368584,longitude:-74.0058066},last_updated:null},{id:"P86336886",name:"Sherman Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":489,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7773648,longitude:-73.9823502},last_updated:null},{id:"P86338375",name:"Greenacre Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"Mo-Su 08:00-20:00","grid-id":805,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7562735,longitude:-73.9692846},last_updated:null},{id:"P86714429",name:"Kimlau Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":277,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.713421,longitude:-73.9979986},last_updated:null},{id:"P95833119",name:"Cooper Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":384,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7288189,longitude:-73.9907764},last_updated:null},{id:"P104077634",name:"Gorman Memorial Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1448,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8556942,longitude:-73.9324027},last_updated:null},{id:"P104078386",name:"Bennett Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1311,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8528398,longitude:-73.938113},last_updated:null},{id:"P104169861",name:"Isham Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1544,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8696523,longitude:-73.9190761},last_updated:null},{id:"P105715154",name:"Fort Washington Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1267,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5962981490745373,rating:1.5,location:{latitude:40.8531632,longitude:-73.9398863},last_updated:null},{id:"P108153375",name:"Collect Pond Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"06:00-01:00","grid-id":198,"taxi-zone":231,precinct:5,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.4907453726863431,rating:1.5,location:{latitude:40.716328,longitude:-74.0018252},last_updated:null},{id:"P108153676",name:"Duarte Square",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"Mo-Su 06:00-01:00","grid-id":158,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7225449,longitude:-74.0055296},last_updated:null},{id:"P108159406",name:"Carl Schurz Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1262,"taxi-zone":262,precinct:19,"b-score":{0:714,1:440,2:234,3:161,4:180,5:308,6:696,7:567,8:592,9:657,10:727,11:1141,12:1111,13:1107,14:1115,15:1128,16:1120,17:1905,18:2049,19:1980,20:1680,21:1865,22:1940,23:1347},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7752127,longitude:-73.9437574},last_updated:null},{id:"P108159407",name:"Thomas Jefferson Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1389,"taxi-zone":74,precinct:23,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7932541,longitude:-73.9353945},last_updated:null},{id:"P108199253",name:"Robert Moses Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":447,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7707338,longitude:-73.9847792},last_updated:null},{id:"P108199260",name:"St. Peter's Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":447,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7711578,longitude:-73.9854676},last_updated:null},{id:"P108235832",name:"Corlears Hook Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":624,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7117122,longitude:-73.9792669},last_updated:null},{id:"P108235833",name:"Rector Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":17,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.709189,longitude:-74.016925},last_updated:null},{id:"P108235836",name:"Seward Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 06:00-22:00","grid-id":434,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.7858929464732366,rating:1.5,location:{latitude:40.7148304,longitude:-73.9891502},last_updated:null},{id:"P108235837",name:"Vietnam Veterans Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":100,"taxi-zone":88,precinct:1,"b-score":{0:108,1:43,2:30,3:21,4:23,5:29,6:60,7:133,8:165,9:366,10:405,11:499,12:506,13:511,14:569,15:522,16:441,17:421,18:416,19:367,20:308,21:301,22:330,23:200},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7027051,longitude:-74.0097651},last_updated:null},{id:"P108235842",name:"John V. Lindsay East River Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":671,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7185542,longitude:-73.976023},last_updated:null},{id:"P108237827",name:"Wallenberg Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1506,"taxi-zone":120,precinct:34,"b-score":{0:97,1:100,2:63,3:45,4:44,5:20,6:48,7:118,8:89,9:95,10:97,11:89,12:85,13:85,14:86,15:107,16:100,17:117,18:123,19:136,20:147,21:156,22:160,23:157},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8529616,longitude:-73.9267854},last_updated:null},{id:"P108237828",name:"Jackie Robinson Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1282,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8267343,longitude:-73.9412148},last_updated:null},{id:"P108239585",name:"Jacob H. Schiff Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1052,"taxi-zone":152,precinct:30,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8205186,longitude:-73.9520188},last_updated:null},{id:"P108239586",name:"Montefiore Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1052,"taxi-zone":152,precinct:30,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8214533,longitude:-73.9535643},last_updated:null},{id:"P108239588",name:"Alexander Hamilton Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1094,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.35367683841920955,rating:1.5,location:{latitude:40.8230955,longitude:-73.9512438},last_updated:null},{id:"P108239589",name:"Saint Nicholas Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1144,"taxi-zone":152,precinct:26,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8172175,longitude:-73.9489593},last_updated:null},{id:"P109267278",name:"Coenties Slip",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":99,"taxi-zone":88,precinct:1,"b-score":{0:108,1:43,2:30,3:21,4:23,5:29,6:60,7:133,8:165,9:366,10:405,11:499,12:506,13:511,14:569,15:522,16:441,17:421,18:416,19:367,20:308,21:301,22:330,23:200},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7034804,longitude:-74.01053},last_updated:null},{id:"P109269750",name:"Grand Army Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":697,"taxi-zone":163,precinct:18,"b-score":{0:21,1:32,2:20,3:5,4:3,5:17,6:6,7:6,8:7,9:6,10:5,11:7,12:6,13:5,14:5,15:5,16:4,17:4,18:4,19:3,20:4,21:4,22:4,23:4},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.764415,longitude:-73.9733608},last_updated:null},{id:"P109328312",name:"Joseph C. Sauer Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":614,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7281595,longitude:-73.9797195},last_updated:null},{id:"P109330342",name:"James Madison Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":239,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7114325,longitude:-74.0003718},last_updated:null},{id:"P109441961",name:"Titanic Memorial Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":166,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7075392,longitude:-74.0036904},last_updated:null},{id:"P109447376",name:"Louise Nevelson Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":131,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7076565,longitude:-74.0079164},last_updated:null},{id:"P111563947",name:"Peretz Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":429,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7229342,longitude:-73.9878534},last_updated:null},{id:"P112692313",name:"Bowling Green",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":39,"taxi-zone":261,precinct:1,"b-score":{0:253,1:129,2:74,3:56,4:59,5:116,6:168,7:306,8:548,9:551,10:602,11:638,12:667,13:676,14:683,15:709,16:740,17:945,18:903,19:836,20:827,21:811,22:736,23:463},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7050354,longitude:-74.0136629},last_updated:null},{id:"P113690621",name:"Marsh & McLennan Public Space",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":549,"taxi-zone":161,precinct:18,"b-score":{0:333,1:225,2:114,3:86,4:60,5:35,6:65,7:77,8:110,9:176,10:234,11:287,12:268,13:276,14:372,15:371,16:375,17:539,18:602,19:619,20:582,21:564,22:519,23:496},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.75669,longitude:-73.9815898},last_updated:null},{id:"P113723738",name:"Straus Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":779,"taxi-zone":24,precinct:24,"b-score":{0:574,1:281,2:240,3:118,4:163,5:241,6:1292,7:1081,8:1092,9:1276,10:1347,11:1364,12:1368,13:1393,14:1449,15:1448,16:1444,17:1489,18:1646,19:1649,20:1532,21:1558,22:1433,23:1037},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.8018962,longitude:-73.9682115},last_updated:null},{id:"P117994215",name:"Samuel N. Bennerson 2nd Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":445,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7738043,longitude:-73.9869758},last_updated:null},{id:"P117994217",name:"Damrosch Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":446,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7723209,longitude:-73.9850051},last_updated:null},{id:"P118116798",name:"Pier 84",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":210,"taxi-zone":50,precinct:18,"b-score":{0:367,1:209,2:67,3:48,4:56,5:82,6:191,7:340,8:468,9:613,10:735,11:792,12:829,13:838,14:1161,15:1289,16:1151,17:1401,18:1419,19:1118,20:942,21:880,22:772,23:628},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7637561,longitude:-74.0013936},last_updated:null},{id:"P118116802",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:"07:00-22:00","grid-id":401,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7746717,longitude:-73.9889625},last_updated:null},{id:"P118505053",name:"Clinton Cove",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:null,"grid-id":282,"taxi-zone":50,precinct:18,"b-score":{0:367,1:209,2:67,3:48,4:56,5:82,6:191,7:340,8:468,9:613,10:735,11:792,12:829,13:838,14:1161,15:1289,16:1151,17:1401,18:1419,19:1118,20:942,21:880,22:772,23:628},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7706616,longitude:-73.9954545},last_updated:null},{id:"P118524658",name:"Johnny Hartman Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1140,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8241497,longitude:-73.9486126},last_updated:null},{id:"P118524659",name:"Courtney Callender Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1291,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8100335,longitude:-73.9400997},last_updated:null},{id:"P118524660",name:"Alice Kornegay Triangle",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1382,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8064189,longitude:-73.9353004},last_updated:null},{id:"P118524662",name:"Colonel Charles Young Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1370,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8272244,longitude:-73.9358637},last_updated:null},{id:"P118524664",name:"Renaissance Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1285,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8212878,longitude:-73.9413653},last_updated:null},{id:"P118524667",name:"Harlem Lane Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1371,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8259868,longitude:-73.9349482},last_updated:null},{id:"P118524668",name:"Howard Bennett Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1333,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8136382,longitude:-73.9386348},last_updated:null},{id:"P118524669",name:"Moore Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1335,"taxi-zone":42,precinct:25,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8094037,longitude:-73.938501},last_updated:null},{id:"P118524671",name:"Colonel Charles Young Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1375,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8191237,longitude:-73.935624},last_updated:null},{id:"P118524675",name:"Riverside Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1047,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8290212,longitude:-73.953451},last_updated:null},{id:"P118524677",name:"Frederick Johnson Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1372,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8247169,longitude:-73.9355292},last_updated:null},{id:"P118524678",name:"Abraham Lincoln Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1379,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.812198,longitude:-73.9371517},last_updated:null},{id:"P118524689",name:"Holcombe Rucker Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1369,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.829198,longitude:-73.9361184},last_updated:null},{id:"P118524694",name:"Riverbank State Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"sunrise-sunset","grid-id":967,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.8254269,longitude:-73.9565197},last_updated:null},{id:"P118524697",name:"Crack Is Wack Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1459,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8044855,longitude:-73.9317785},last_updated:null},{id:"P118524700",name:"Harlem River Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1428,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8059758,longitude:-73.9336626},last_updated:null},{id:"P118524701",name:"Bradhurst Urban Renewal Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1284,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8226795,longitude:-73.9400884},last_updated:null},{id:"P118524706",name:"Convent Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1233,"taxi-zone":116,precinct:30,"b-score":{0:130,1:103,2:65,3:39,4:39,5:60,6:87,7:123,8:126,9:126,10:134,11:138,12:137,13:136,14:157,15:197,16:199,17:273,18:272,19:264,20:254,21:257,22:232,23:204},"c-score":.3465445209848195,rating:1.5,location:{latitude:40.828365,longitude:-73.9427004},last_updated:null},{id:"P118528233",name:"Sakura Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":892,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8130779,longitude:-73.962112},last_updated:null},{id:"P118528235",name:"West Harlem Piers Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":930,"taxi-zone":152,precinct:26,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8191647,longitude:-73.9611293},last_updated:null},{id:"P118528587",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":627,"taxi-zone":238,precinct:24,"b-score":{0:396,1:289,2:117,3:84,4:79,5:112,6:385,7:443,8:470,9:525,10:596,11:724,12:763,13:801,14:791,15:834,16:803,17:840,18:1072,19:997,20:975,21:964,22:993,23:808},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.7972777,longitude:-73.9768346},last_updated:null},{id:"P118529212",name:"Inwood Hill Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1513,"taxi-zone":128,precinct:34,"b-score":{0:201,1:127,2:97,3:105,4:99,5:98,6:271,7:217,8:266,9:324,10:334,11:360,12:385,13:392,14:393,15:394,16:396,17:400,18:446,19:431,20:412,21:407,22:410,23:422},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8722547,longitude:-73.9253479},last_updated:null},{id:"P124814434",name:"Bogardus Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":92,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7159015,longitude:-74.0092316},last_updated:null},{id:"P129700421",name:"Wagner Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":7,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.705538,longitude:-74.0183661},last_updated:null},{id:"P129700423",name:"South Cove Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":6,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7073325,longitude:-74.0184369},last_updated:null},{id:"P129700430",name:"The Esplanade",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":16,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.711556,longitude:-74.0171986},last_updated:null},{id:"P144333814",name:"Joseph Slifka Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":709,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.743948,longitude:-73.9729184},last_updated:null},{id:"P147035202",name:"Duane Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"Mo-Su 06:00-01:00","grid-id":92,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7171562,longitude:-74.0094215},last_updated:null},{id:"P147475917",name:"Hamilton Fish Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":569,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7197929,longitude:-73.9808332},last_updated:null},{id:"P154416663",name:"Dante Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":492,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.77192,longitude:-73.9825711},last_updated:null},{id:"P154416666",name:"Richard Tucker Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":539,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7734422,longitude:-73.9818886},last_updated:null},{id:"P159028631",name:"Channel Gardens",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":598,"taxi-zone":161,precinct:18,"b-score":{0:333,1:225,2:114,3:86,4:60,5:35,6:65,7:77,8:110,9:176,10:234,11:287,12:268,13:276,14:372,15:371,16:375,17:539,18:602,19:619,20:582,21:564,22:519,23:496},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.758446,longitude:-73.9779564},last_updated:null},{id:"P160903868",name:"McKinley Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":473,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7242531,longitude:-73.9857747},last_updated:null},{id:"P169483357",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":289,"taxi-zone":48,precinct:10,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7572689,longitude:-73.9947724},last_updated:null},{id:"P171562481",name:"Father Demo Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7302244,longitude:-74.0021376},last_updated:null},{id:"P171805412",name:"Luther Gulick Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":571,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7158754,longitude:-73.9818757},last_updated:null},{id:"P177068788",name:"Laurie M. Tisch Illumination Lawn",type:"park",address:null,internet_access:null,wheelchair_accessible:"no",opening_hours:null,"grid-id":491,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.3771885942971485,rating:1.5,location:{latitude:40.7733857,longitude:-73.9835496},last_updated:null},{id:"P178575123",name:"Riverside Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":816,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.45122561280640316,rating:1.5,location:{latitude:40.8068603,longitude:-73.9680684},last_updated:null},{id:"P194212578",name:"Tecumseh Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":585,"taxi-zone":239,precinct:20,"b-score":{0:98,1:114,2:40,3:25,4:24,5:35,6:96,7:152,8:156,9:189,10:297,11:307,12:323,13:334,14:329,15:340,16:328,17:334,18:309,19:302,20:299,21:307,22:299,23:278},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7818184,longitude:-73.9785715},last_updated:null},{id:"P197064614",name:"James J Walker Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":119,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7298088,longitude:-74.0061054},last_updated:null},{id:"P197066133",name:"Pier 45",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":52,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7331785,longitude:-74.0124101},last_updated:null},{id:"P199925533",name:"Marcus Garvey Memorial Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1246,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.8044864,longitude:-73.9436727},last_updated:null},{id:"P201158183",name:"Irish Hunger Memorial",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":14,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7151544,longitude:-74.0165528},last_updated:null},{id:"P208360494",name:"The Queen Elizabeth II September 11th Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":98,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.704797,longitude:-74.0093346},last_updated:null},{id:"P217722093",name:"J. Hood Wright Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1271,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8464722,longitude:-73.941255},last_updated:null},{id:"P218327131",name:"Verizon Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":456,"taxi-zone":100,precinct:14,"b-score":{0:84,1:75,2:46,3:40,4:29,5:19,6:34,7:42,8:67,9:68,10:71,11:75,12:90,13:95,14:124,15:128,16:125,17:167,18:235,19:235,20:235,21:244,22:240,23:177},"c-score":1,rating:1.5,location:{latitude:40.7548157,longitude:-73.9851583},last_updated:null},{id:"P219612698",name:"Finn Square",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":125,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7186426,longitude:-74.0068689},last_updated:null},{id:"P221922480",name:"Riverside Park South",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":357,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7772231,longitude:-73.9905567},last_updated:null},{id:"P224028029",name:"132nd Street Block Association Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1242,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8123187,longitude:-73.943153},last_updated:null},{id:"P224029303",name:"Rev. Linnette C Williamson Memorial Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1243,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8094612,longitude:-73.9429209},last_updated:null},{id:"P224031776",name:"Collyer Brothers Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1292,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5302651325662832,rating:1.5,location:{latitude:40.8085313,longitude:-73.9410487},last_updated:null},{id:"P224034804",name:"A Philip Randolph Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1061,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8038286,longitude:-73.952422},last_updated:null},{id:"P225132539",name:"Dr. Ronald E. McNair Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1339,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8025387,longitude:-73.9381332},last_updated:null},{id:"P225134048",name:"Dream Street Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1384,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8027407,longitude:-73.9350402},last_updated:null},{id:"P225134049",name:"Harlem Art Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1340,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.8834417208604302,rating:1.5,location:{latitude:40.8010442,longitude:-73.9388073},last_updated:null},{id:"P225135028",name:"Wagner Houses Pool",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1431,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8016837,longitude:-73.9325907},last_updated:null},{id:"P225143097",name:"Martin Luther King Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1106,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8002087,longitude:-73.9503857},last_updated:null},{id:"P225159200",name:"Hancock Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1058,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8095436,longitude:-73.9532979},last_updated:null},{id:"P225171034",name:"Peter Minuit Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1156,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7947722,longitude:-73.9472299},last_updated:null},{id:"P225173496",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1428,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8063252,longitude:-73.9344249},last_updated:null},{id:"P225173571",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1427,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8078192,longitude:-73.9346167},last_updated:null},{id:"P225173572",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1382,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8069688,longitude:-73.9353248},last_updated:null},{id:"P225173799",name:"Each One Teach One",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1428,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8071736,longitude:-73.9345657},last_updated:null},{id:"P225188061",name:"Mae Grant Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1111,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7924257,longitude:-73.9494365},last_updated:null},{id:"P225188879",name:"Sunshine Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1160,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7884898,longitude:-73.9478109},last_updated:null},{id:"P225188968",name:"Cherry Tree Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1161,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7872445,longitude:-73.9471949},last_updated:null},{id:"P225189359",name:"White Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1205,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7916462,longitude:-73.9458897},last_updated:null},{id:"P225189391",name:"103rd Street Community Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1159,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7909291,longitude:-73.9486547},last_updated:null},{id:"P225189513",name:"Poor Richard's Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1253,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7926185,longitude:-73.9426331},last_updated:null},{id:"P225190178",name:"Marx Brothers Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1209,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7842492,longitude:-73.9459882},last_updated:null},{id:"P225190195",name:"Stanley Isaacs Courts",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1258,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7834698,longitude:-73.9441011},last_updated:null},{id:"P225190397",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1257,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7853549,longitude:-73.9427366},last_updated:null},{id:"P225190636",name:"Playground 103",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1348,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7869524,longitude:-73.9390245},last_updated:null},{id:"P225190643",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1346,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7893497,longitude:-73.9382443},last_updated:null},{id:"P225191605",name:"Harlem River Drive Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1423,"taxi-zone":74,precinct:25,"b-score":{0:50,1:50,2:24,3:19,4:15,5:6,6:8,7:17,8:17,9:17,10:23,11:25,12:31,13:35,14:41,15:38,16:37,17:37,18:43,19:58,20:69,21:79,22:83,23:81},"c-score":.6253268911851002,rating:1.5,location:{latitude:40.8148592,longitude:-73.9343099},last_updated:null},{id:"P226010200",name:"Jacob K. Javits Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1353,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.9639819909954978,rating:1.5,location:{latitude:40.8589557,longitude:-73.9349368},last_updated:null},{id:"P237054245",name:"Plaza de las Americas",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1315,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8460987,longitude:-73.9381037},last_updated:null},{id:"P237397736",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":392,"taxi-zone":148,precinct:7,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7145611,longitude:-73.9910703},last_updated:null},{id:"P239982768",name:"LentSpace",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":157,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7227168,longitude:-74.0057708},last_updated:null},{id:"P239988106",name:"Spring Street Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":156,"taxi-zone":125,precinct:6,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.5142571285642822,rating:1.5,location:{latitude:40.724913,longitude:-74.0044414},last_updated:null},{id:"P239988114",name:"Minetta Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7298853,longitude:-74.0018589},last_updated:null},{id:"P239988118",name:"Father Fagan Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":192,"taxi-zone":125,precinct:6,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7267003,longitude:-74.0033094},last_updated:null},{id:"P239988120",name:"Jefferson Market Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":226,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7344325,longitude:-73.9995026},last_updated:null},{id:"P241883186",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":732,"taxi-zone":238,precinct:24,"b-score":{0:396,1:289,2:117,3:84,4:79,5:112,6:385,7:443,8:470,9:525,10:596,11:724,12:763,13:801,14:791,15:834,16:803,17:840,18:1072,19:997,20:975,21:964,22:993,23:808},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.7954341,longitude:-73.9721055},last_updated:null},{id:"P242113355",name:"Playground One",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":277,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7122529,longitude:-73.9974005},last_updated:null},{id:"P244977216",name:"William E. Passannante Ballfield",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":191,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.6358179089544772,rating:1.5,location:{latitude:40.728579,longitude:-74.0022425},last_updated:null},{id:"P244978444",name:"Winston Churchill Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7298571,longitude:-74.0024499},last_updated:null},{id:"P246964616",name:"Booker T Washington Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":859,"taxi-zone":24,precinct:24,"b-score":{0:574,1:281,2:240,3:118,4:163,5:241,6:1292,7:1081,8:1092,9:1276,10:1347,11:1364,12:1368,13:1393,14:1449,15:1448,16:1444,17:1489,18:1646,19:1649,20:1532,21:1558,22:1433,23:1037},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.8009598,longitude:-73.9637796},last_updated:null},{id:"P249665058",name:"Playground of the Americas",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":192,"taxi-zone":125,precinct:6,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.728006,longitude:-74.0026728},last_updated:null},{id:"P250049345",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":59,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7195161,longitude:-74.0109504},last_updated:null},{id:"P250051493",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":60,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7178178,longitude:-74.0112569},last_updated:null},{id:"P250265505",name:"Hartman Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":569,"taxi-zone":4,precinct:9,"b-score":{0:259,1:207,2:104,3:46,4:45,5:79,6:153,7:390,8:897,9:935,10:1024,11:1037,12:1248,13:1260,14:1480,15:1553,16:1512,17:1751,18:1747,19:1595,20:1162,21:1121,22:984,23:577},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7207559,longitude:-73.9806992},last_updated:null},{id:"P252823151",name:"Straus Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":392,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7142374,longitude:-73.9899111},last_updated:null},{id:"P254594895",name:"Audubon Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1317,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8416095,longitude:-73.9381178},last_updated:null},{id:"P257389723",name:"Twentyfour Sycamores Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1004,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7594475,longitude:-73.9586677},last_updated:null},{id:"P257671578",name:"Penn South Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":258,"taxi-zone":68,precinct:10,"b-score":{0:317,1:195,2:130,3:66,4:78,5:112,6:207,7:304,8:534,9:501,10:519,11:598,12:693,13:697,14:827,15:843,16:831,17:863,18:860,19:818,20:837,21:828,22:729,23:552},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7474929,longitude:-73.9987079},last_updated:null},{id:"P264003876",name:"Paley Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":700,"taxi-zone":161,precinct:18,"b-score":{0:333,1:225,2:114,3:86,4:60,5:35,6:65,7:77,8:110,9:176,10:234,11:287,12:268,13:276,14:372,15:371,16:375,17:539,18:602,19:619,20:582,21:564,22:519,23:496},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7603437,longitude:-73.9750748},last_updated:null},{id:"P264851981",name:"Big Screen Plaza1",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:"06:00-23:59","grid-id":374,"taxi-zone":186,precinct:14,"b-score":{0:151,1:113,2:67,3:43,4:60,5:78,6:513,7:508,8:652,9:602,10:621,11:621,12:622,13:618,14:632,15:642,16:586,17:658,18:647,19:614,20:555,21:630,22:449,23:326},"c-score":1,rating:1.5,location:{latitude:40.7472248,longitude:-73.990373},last_updated:null},{id:"P266077859",name:"Hells Kitchen Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":325,"taxi-zone":48,precinct:18,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.897448724362181,rating:1.5,location:{latitude:40.7629731,longitude:-73.9925633},last_updated:null},{id:"P266097823",name:"Matthews-Palmer Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":326,"taxi-zone":48,precinct:18,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.9449724862431216,rating:1.5,location:{latitude:40.7613978,longitude:-73.9927341},last_updated:null},{id:"P266113539",name:"Ramone Aponte Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":408,"taxi-zone":48,precinct:18,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7614489,longitude:-73.9893455},last_updated:null},{id:"P270791455",name:"Freeman Plaza West",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":122,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7242344,longitude:-74.0074749},last_updated:null},{id:"P281499420",name:"Lower East Side Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":516,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7293823,longitude:-73.9829156},last_updated:null},{id:"P287462475",name:"Bellevue South Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":608,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7400387,longitude:-73.9780496},last_updated:null},{id:"P292727035",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":164,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7111594,longitude:-74.0058691},last_updated:null},{id:"P293720019",name:"Balsley Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":449,"taxi-zone":48,precinct:18,"b-score":{0:238,1:164,2:54,3:42,4:26,5:117,6:490,7:954,8:901,9:1100,10:1494,11:2372,12:2451,13:2433,14:2550,15:2580,16:2431,17:2709,18:2543,19:1958,20:1476,21:1376,22:1153,23:757},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7674642,longitude:-73.9856951},last_updated:null},{id:"P295969929",name:"St. Catherine's Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":960,"taxi-zone":141,precinct:19,"b-score":{0:158,1:191,2:95,3:68,4:76,5:111,6:271,7:295,8:305,9:341,10:327,11:330,12:332,13:372,14:399,15:401,16:399,17:401,18:405,19:399,20:357,21:336,22:321,23:264},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7652136,longitude:-73.9587494},last_updated:null},{id:"P304129981",name:"Montgomery Triangle Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":478,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7142248,longitude:-73.9851113},last_updated:null},{id:"P317355661",name:"Henry M. Jackson Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":572,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7139646,longitude:-73.981496},last_updated:null},{id:"P318328998",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":981,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8005903,longitude:-73.9581806},last_updated:null},{id:"P318329003",name:"Roosevelt Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1015,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8113293,longitude:-73.9544008},last_updated:null},{id:"P324750157",name:"First Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":429,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7234173,longitude:-73.9892626},last_updated:null},{id:"P324975287",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":199,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.714787,longitude:-74.001878},last_updated:null},{id:"P324975291",name:"Canal Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":87,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7254013,longitude:-74.0105312},last_updated:null},{id:"P325008929",name:"Alfred E. Smith Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":278,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.710613,longitude:-73.9974893},last_updated:null},{id:"P325008930",name:"Tanahey Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":315,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7101263,longitude:-73.9953543},last_updated:null},{id:"P329041506",name:"Freeman Plaza East",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":122,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7240917,longitude:-74.0065116},last_updated:null},{id:"P329041537",name:"Freeman Plaza North",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":122,"taxi-zone":125,precinct:1,"b-score":{0:98,1:56,2:24,3:13,4:16,5:45,6:198,7:498,8:379,9:435,10:831,11:911,12:1095,13:1187,14:1306,15:1304,16:921,17:742,18:768,19:572,20:543,21:459,22:424,23:217},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7243541,longitude:-74.0065666},last_updated:null},{id:"P329988114",name:"Verdi Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":536,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7791313,longitude:-73.9816274},last_updated:null},{id:"P334715965",name:"Poses Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":878,"taxi-zone":237,precinct:19,"b-score":{0:434,1:286,2:183,3:154,4:154,5:181,6:214,7:535,8:438,9:481,10:550,11:917,12:1090,13:1105,14:1108,15:1152,16:1269,17:1289,18:1141,19:1182,20:1047,21:996,22:1052,23:780},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7674465,longitude:-73.9635001},last_updated:null},{id:"P343765233",name:"Peter Detmold Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":885,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7536627,longitude:-73.9635157},last_updated:null},{id:"P351201923",name:"Tramway Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":881,"taxi-zone":141,precinct:17,"b-score":{0:158,1:191,2:95,3:68,4:76,5:111,6:271,7:295,8:305,9:341,10:327,11:330,12:332,13:372,14:399,15:401,16:399,17:401,18:405,19:399,20:357,21:336,22:321,23:264},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7609599,longitude:-73.9644278},last_updated:null},{id:"P353000933",name:"Ruppert Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1117,"taxi-zone":263,precinct:19,"b-score":{0:214,1:125,2:86,3:48,4:55,5:55,6:241,7:169,8:194,9:247,10:385,11:503,12:520,13:530,14:539,15:531,16:521,17:530,18:514,19:496,20:445,21:451,22:446,23:528},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7809662,longitude:-73.9501489},last_updated:null},{id:"P353133685",name:"Park Avenue Malls",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1071,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.7869307,longitude:-73.9522659},last_updated:null},{id:"P357523569",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1182,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8339778,longitude:-73.9452121},last_updated:null},{id:"P362684406",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1020,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8033166,longitude:-73.954381},last_updated:null},{id:"P362826160",name:"Harlem Valley Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1240,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8145685,longitude:-73.9435785},last_updated:null},{id:"P362827398",name:"Mandela Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1101,"taxi-zone":42,precinct:28,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8107974,longitude:-73.9499718},last_updated:null},{id:"P371120098",name:"Chealsea Green",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":298,"taxi-zone":90,precinct:13,"b-score":{0:99,1:80,2:46,3:31,4:36,5:64,6:141,7:436,8:480,9:519,10:519,11:530,12:540,13:532,14:600,15:722,16:674,17:792,18:785,19:689,20:525,21:509,22:403,23:273},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7415933,longitude:-73.9960607},last_updated:null},{id:"P372721441",name:"Teardrop Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":13,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7167736,longitude:-74.0156166},last_updated:null},{id:"P375369088",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"sunrise-sunset","grid-id":130,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7090264,longitude:-74.0080705},last_updated:null},{id:"P375369089",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"sunrise-sunset","grid-id":130,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7091468,longitude:-74.0082314},last_updated:null},{id:"P376015439",name:"CU SIPA Commons",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":936,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.807298,longitude:-73.9599478},last_updated:null},{id:"P376015442",name:"CU SE Field",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":896,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.806367,longitude:-73.9623446},last_updated:null},{id:"P378359193",name:"Vincent F. Albano Jr. Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mar 2-Oct 31: Mo-Su 06:00-21:00; Nov 1-Mar 1: Mo-Su 06:00-18:00","grid-id":607,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7419438,longitude:-73.9783848},last_updated:null},{id:"P378364365",name:"Peter's Field",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":560,"taxi-zone":107,precinct:13,"b-score":{0:69,1:71,2:26,3:19,4:16,5:20,6:40,7:68,8:66,9:110,10:111,11:117,12:121,13:127,14:146,15:145,16:144,17:180,18:181,19:163,20:150,21:146,22:144,23:103},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7361158,longitude:-73.9815688},last_updated:null},{id:"P379634622",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":81,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.736497,longitude:-74.0103959},last_updated:null},{id:"P379634625",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":82,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7346149,longitude:-74.0105573},last_updated:null},{id:"P379657566",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":807,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7526667,longitude:-73.9704924},last_updated:null},{id:"P379747570",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":807,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7515363,longitude:-73.9697087},last_updated:null},{id:"P379749111",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":806,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7535038,longitude:-73.9704538},last_updated:null},{id:"P379758354",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"24/7","grid-id":654,"taxi-zone":170,precinct:17,"b-score":{0:121,1:84,2:52,3:41,4:40,5:42,6:87,7:225,8:204,9:302,10:311,11:313,12:318,13:344,14:402,15:460,16:458,17:561,18:562,19:483,20:466,21:438,22:321,23:329},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7495206,longitude:-73.9760712},last_updated:null},{id:"P380425199",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":704,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7516246,longitude:-73.9730606},last_updated:null},{id:"P385106972",name:"Ralph Bunche Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":809,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7493256,longitude:-73.969745},last_updated:null},{id:"P395678163",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 08:00-sunset","grid-id":461,"taxi-zone":164,precinct:13,"b-score":{0:23,1:16,2:17,3:9,4:7,5:10,6:5,7:10,8:10,9:11,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:13,18:17,19:24,20:29,21:31,22:40,23:39},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7445517,longitude:-73.9862513},last_updated:null},{id:"P400780940",name:"Teardrop Park South",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":13,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7157927,longitude:-74.0160302},last_updated:null},{id:"P400782867",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":34,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.714576,longitude:-74.0139461},last_updated:null},{id:"P400782868",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":19,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7063887,longitude:-74.0165613},last_updated:null},{id:"P400782869",name:"Vesey Green",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":14,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7149552,longitude:-74.0166948},last_updated:null},{id:"P400782871",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.71596,longitude:-74.0135378},last_updated:null},{id:"P400782872",name:"West Thames Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":17,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7088371,longitude:-74.0157564},last_updated:null},{id:"P410310399",name:"Coleman Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":354,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7111652,longitude:-73.9933311},last_updated:null},{id:"P413055246",name:"City Hall Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":128,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7128841,longitude:-74.0060845},last_updated:null},{id:"P427818536",name:"Central Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"06:00-01:00","grid-id":869,"taxi-zone":43,precinct:22,"b-score":{0:406,1:220,2:172,3:132,4:120,5:74,6:206,7:372,8:606,9:686,10:768,11:806,12:865,13:895,14:966,15:940,16:938,17:1175,18:1009,19:957,20:910,21:907,22:982,23:1109},"c-score":.047523761880940464,rating:1.5,location:{latitude:40.7825293,longitude:-73.9655068},last_updated:null},{id:"P440055119",name:"Minetta Green",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7303446,longitude:-74.0016029},last_updated:null},{id:"P440055120",name:"West Fourth Street Courts",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":228,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7312486,longitude:-74.0009604},last_updated:null},{id:"P449139914",name:"Urban Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":194,"taxi-zone":211,precinct:1,"b-score":{0:296,1:170,2:94,3:67,4:76,5:84,6:236,7:308,8:639,9:710,10:927,11:1099,12:1349,13:1348,14:1579,15:1617,16:1602,17:2019,18:2173,19:2096,20:1468,21:1513,22:1580,23:798},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7235239,longitude:-74.0034678},last_updated:null},{id:"P453456965",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":126,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7157919,longitude:-74.006181},last_updated:null},{id:"P453461400",name:"Elizabeth Street Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":309,"taxi-zone":144,precinct:5,"b-score":{0:329,1:200,2:133,3:76,4:95,5:86,6:169,7:345,8:381,9:354,10:356,11:360,12:385,13:395,14:420,15:440,16:452,17:420,18:401,19:399,20:404,21:420,22:542,23:518},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7221953,longitude:-73.9947837},last_updated:null},{id:"P453528989",name:"Dry Dock Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":667,"taxi-zone":4,precinct:9,"b-score":{0:259,1:207,2:104,3:46,4:45,5:79,6:153,7:390,8:897,9:935,10:1024,11:1037,12:1248,13:1260,14:1480,15:1553,16:1512,17:1751,18:1747,19:1595,20:1162,21:1121,22:984,23:577},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7254397,longitude:-73.9754832},last_updated:null},{id:"P455314804",name:"Trygve Lie Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":809,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7484918,longitude:-73.9704129},last_updated:null},{id:"P458511171",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":499,"taxi-zone":230,precinct:18,"b-score":{0:225,1:167,2:97,3:66,4:48,5:23,6:30,7:78,8:165,9:246,10:286,11:517,12:613,13:648,14:647,15:655,16:642,17:650,18:417,19:392,20:375,21:378,22:380,23:411},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7603632,longitude:-73.9823986},last_updated:null},{id:"P458642434",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":496,"taxi-zone":163,precinct:18,"b-score":{0:21,1:32,2:20,3:5,4:3,5:17,6:6,7:6,8:7,9:6,10:5,11:7,12:6,13:5,14:5,15:5,16:4,17:4,18:4,19:3,20:4,21:4,22:4,23:4},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7647609,longitude:-73.9828725},last_updated:null},{id:"P458642435",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":495,"taxi-zone":163,precinct:18,"b-score":{0:21,1:32,2:20,3:5,4:3,5:17,6:6,7:6,8:7,9:6,10:5,11:7,12:6,13:5,14:5,15:5,16:4,17:4,18:4,19:3,20:4,21:4,22:4,23:4},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7661451,longitude:-73.9830132},last_updated:null},{id:"P462302471",name:"Manuel Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 06:00-22:00","grid-id":345,"taxi-zone":113,precinct:9,"b-score":{0:9,1:5,2:4,3:4,4:3,5:5,6:13,7:25,8:48,9:52,10:54,11:58,12:61,13:57,14:57,15:58,16:38,17:42,18:37,19:11,20:10,21:8,22:10,23:11},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7276683,longitude:-73.9921173},last_updated:null},{id:"P468472672",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":596,"taxi-zone":161,precinct:18,"b-score":{0:333,1:225,2:114,3:86,4:60,5:35,6:65,7:77,8:110,9:176,10:234,11:287,12:268,13:276,14:372,15:371,16:375,17:539,18:602,19:619,20:582,21:564,22:519,23:496},"c-score":.7263601862482459,rating:1.5,location:{latitude:40.7610842,longitude:-73.9783735},last_updated:null},{id:"P468485719",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":716,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7305654,longitude:-73.9748081},last_updated:null},{id:"P468548548",name:"West 111th Street People's Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":857,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.803897,longitude:-73.9635414},last_updated:null},{id:"P468555499",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":891,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.81501,longitude:-73.9622763},last_updated:null},{id:"P468591558",name:"West 104th Street Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":901,"taxi-zone":151,precinct:24,"b-score":{0:278,1:195,2:108,3:73,4:94,5:172,6:783,7:444,8:566,9:584,10:862,11:877,12:880,13:846,14:889,15:945,16:910,17:926,18:971,19:938,20:929,21:848,22:739,23:533},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.7968848,longitude:-73.9619463},last_updated:null},{id:"P469101347",name:"Tenzer Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1481,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8498324,longitude:-73.9291411},last_updated:null},{id:"P469101348",name:"Danciger Quadrangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1481,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.850316,longitude:-73.928956},last_updated:null},{id:"P471549306",name:"NYC AIDS Memorial Park at St. Vincent's Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":224,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7371836,longitude:-74.0011967},last_updated:null},{id:"P473565702",name:"Rapkin-Gayle Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 06:00-22:00","grid-id":234,"taxi-zone":144,precinct:5,"b-score":{0:329,1:200,2:133,3:76,4:95,5:86,6:169,7:345,8:381,9:354,10:356,11:360,12:385,13:395,14:420,15:440,16:452,17:420,18:401,19:399,20:404,21:420,22:542,23:518},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7204001,longitude:-73.9991398},last_updated:null},{id:"P474169900",name:"Lieutenant William Tighe Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1472,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8658571,longitude:-73.9279994},last_updated:null},{id:"P474173970",name:"Sherman Creek",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1549,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8608411,longitude:-73.9182038},last_updated:null},{id:"P474175699",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1549,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8601542,longitude:-73.9185091},last_updated:null},{id:"P474199302",name:"Monsignor Kett Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1535,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8625304,longitude:-73.9209396},last_updated:null},{id:"P476650290",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1179,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8379833,longitude:-73.9459572},last_updated:null},{id:"P479358564",name:"Rooftop Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":804,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7576241,longitude:-73.9686533},last_updated:null},{id:"P480966277",name:"148th Street Block Association Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1327,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8243789,longitude:-73.9389915},last_updated:null},{id:"P483509921",name:"Poinsettia Community Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":936,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.808972,longitude:-73.9588785},last_updated:null},{id:"P483509926",name:"Ruggles Commons",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":896,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8056356,longitude:-73.9628429},last_updated:null},{id:"P483702983",name:"Augustus Saint-Gaudens Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":560,"taxi-zone":107,precinct:13,"b-score":{0:69,1:71,2:26,3:19,4:16,5:20,6:40,7:68,8:66,9:110,10:111,11:117,12:121,13:127,14:146,15:145,16:144,17:180,18:181,19:163,20:150,21:146,22:144,23:103},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7355499,longitude:-73.9821423},last_updated:null},{id:"P497484756",name:"Albert Capsouto Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":158,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7220549,longitude:-74.0059139},last_updated:null},{id:"P498671779",name:"Drumgoole Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"null","grid-id":164,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7110399,longitude:-74.0041141},last_updated:null},{id:"P504045549",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"null","grid-id":131,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7072581,longitude:-74.0083037},last_updated:null},{id:"P531272222",name:"CS Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":935,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8091383,longitude:-73.9599533},last_updated:null},{id:"P531580782",name:"Robert Moses Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":809,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7481156,longitude:-73.9692894},last_updated:null},{id:"P538080002",name:"Elizabeth H. Berger Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":38,"taxi-zone":261,precinct:1,"b-score":{0:253,1:129,2:74,3:56,4:59,5:116,6:168,7:306,8:548,9:551,10:602,11:638,12:667,13:676,14:683,15:709,16:740,17:945,18:903,19:836,20:827,21:811,22:736,23:463},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7066764,longitude:-74.0140208},last_updated:null},{id:"P539005582",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7156052,longitude:-74.0150931},last_updated:null},{id:"P544675664",name:"Mitchell Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1274,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8401868,longitude:-73.9400483},last_updated:null},{id:"P580123906",name:"Mulry Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":225,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7362506,longitude:-74.0010873},last_updated:null},{id:"P581666857",name:"Jane Street Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":149,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.738004,longitude:-74.0045481},last_updated:null},{id:"P585788256",name:"Central Park Carousel",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":642,"taxi-zone":43,precinct:22,"b-score":{0:406,1:220,2:172,3:132,4:120,5:74,6:206,7:372,8:606,9:686,10:768,11:806,12:865,13:895,14:966,15:940,16:938,17:1175,18:1009,19:957,20:910,21:907,22:982,23:1109},"c-score":.15157578789394696,rating:1.5,location:{latitude:40.7699426,longitude:-73.9752476},last_updated:null},{id:"P588483880",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1407,"taxi-zone":120,precinct:33,"b-score":{0:97,1:100,2:63,3:45,4:44,5:20,6:48,7:118,8:89,9:95,10:97,11:89,12:85,13:85,14:86,15:107,16:100,17:117,18:123,19:136,20:147,21:156,22:160,23:157},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8446978,longitude:-73.9329917},last_updated:null},{id:"P613509792",name:"Tribeca Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"Mo-Su 06:00-01:00","grid-id":159,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7202027,longitude:-74.0056402},last_updated:null},{id:"P664153164",name:'Bill "Bojangles" Robinson Playground',type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1327,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8252699,longitude:-73.9372963},last_updated:null},{id:"P664153165",name:"LaGuardia Corner Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":269,"taxi-zone":114,precinct:6,"b-score":{0:79,1:53,2:25,3:17,4:17,5:41,6:168,7:190,8:322,9:433,10:459,11:476,12:481,13:487,14:493,15:485,16:412,17:431,18:407,19:355,20:320,21:329,22:319,23:200},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7279235,longitude:-73.9988616},last_updated:null},{id:"P664697032",name:"Monterey Public Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"24/7","grid-id":1114,"taxi-zone":75,precinct:23,"b-score":{0:88,1:83,2:70,3:33,4:31,5:33,6:76,7:64,8:68,9:82,10:66,11:67,12:71,13:72,14:73,15:81,16:66,17:68,18:81,19:100,20:107,21:123,22:136,23:138},"c-score":.5149971297359357,rating:1.5,location:{latitude:40.785788,longitude:-73.949994},last_updated:null},{id:"P672251427",name:"Abe Lebewohl Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":469,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7300001,longitude:-73.9870591},last_updated:null},{id:"P675913161",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":393,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7123128,longitude:-73.9916567},last_updated:null},{id:"P675935774",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":352,"taxi-zone":148,precinct:7,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7147518,longitude:-73.9926339},last_updated:null},{id:"P675935775",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":390,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7187024,longitude:-73.9906477},last_updated:null},{id:"P675935776",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":390,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7178532,longitude:-73.9910848},last_updated:null},{id:"P675935777",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":391,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7167999,longitude:-73.9916173},last_updated:null},{id:"P675935778",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":351,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.715654,longitude:-73.9922088},last_updated:null},{id:"P675935779",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":354,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7113496,longitude:-73.9922318},last_updated:null},{id:"P675935780",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":353,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7120492,longitude:-73.9923541},last_updated:null},{id:"P675937259",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":276,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7142311,longitude:-73.9970905},last_updated:null},{id:"P675962287",name:"Sophie Irene Loeb Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":314,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7133595,longitude:-73.9943004},last_updated:null},{id:"P684670439",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":657,"taxi-zone":137,precinct:17,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7426586,longitude:-73.9756162},last_updated:null},{id:"P687661469",name:"First Street Green Cultural Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":387,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.723751,longitude:-73.9903251},last_updated:null},{id:"P702078581",name:"McMahon Lawn",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":446,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7713558,longitude:-73.9865241},last_updated:null},{id:"P705304809",name:"30 Lincoln Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"8:00-23:00","grid-id":541,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7707961,longitude:-73.9814012},last_updated:null},{id:"P718438725",name:"Murphy Brothers Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":716,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7302393,longitude:-73.973219},last_updated:null},{id:"P718471254",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1042,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7640426,longitude:-73.9544696},last_updated:null},{id:"P727964618",name:"Lafayette Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":980,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.8035524,longitude:-73.9580337},last_updated:null},{id:"P743395860",name:"The Elevated Acre",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":99,"taxi-zone":88,precinct:1,"b-score":{0:108,1:43,2:30,3:21,4:23,5:29,6:60,7:133,8:165,9:366,10:405,11:499,12:506,13:511,14:569,15:522,16:441,17:421,18:416,19:367,20:308,21:301,22:330,23:200},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7032051,longitude:-74.0087006},last_updated:null},{id:"P759460622",name:"Minerva Bernadino Green Street",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":858,"taxi-zone":24,precinct:24,"b-score":{0:574,1:281,2:240,3:118,4:163,5:241,6:1292,7:1081,8:1092,9:1276,10:1347,11:1364,12:1368,13:1393,14:1449,15:1448,16:1444,17:1489,18:1646,19:1649,20:1532,21:1558,22:1433,23:1037},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.8028294,longitude:-73.9640762},last_updated:null},{id:"P765274333",name:"Playground 11",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":664,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7310982,longitude:-73.9763847},last_updated:null},{id:"P765274338",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":612,"taxi-zone":224,precinct:13,"b-score":{0:55,1:45,2:27,3:18,4:17,5:14,6:29,7:55,8:49,9:36,10:41,11:44,12:45,13:46,14:46,15:47,16:52,17:87,18:85,19:73,20:74,21:74,22:76,23:75},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7324171,longitude:-73.9792686},last_updated:null},{id:"P769716502",name:"Hillman Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":572,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7151983,longitude:-73.982351},last_updated:null},{id:"P769716504",name:"Sol Lain Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":524,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7142341,longitude:-73.9838951},last_updated:null},{id:"P793720073",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":760,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7444405,longitude:-73.9717305},last_updated:null},{id:"P800212164",name:"Catherine Slip Malls",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":316,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7095081,longitude:-73.9961565},last_updated:null},{id:"P821278619",name:"Small Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":931,"taxi-zone":152,precinct:26,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8170021,longitude:-73.9588657},last_updated:null},{id:"P833335529",name:"Little Island",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"Mo-Su 06:00-23:00","grid-id":78,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7420048,longitude:-74.0106097},last_updated:null},{id:"P837603512",name:"Pier 26",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":30,"taxi-zone":231,precinct:1,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7212402,longitude:-74.0146496},last_updated:null},{id:"P890862707",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":277,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7127252,longitude:-73.9985494},last_updated:null},{id:"P890862858",name:"Fishbridge Park Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":202,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7090621,longitude:-74.0013335},last_updated:null},{id:"P890862859",name:"Pearl Street Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":166,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7079571,longitude:-74.003871},last_updated:null},{id:"P891074490",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":164,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7104212,longitude:-74.0058293},last_updated:null},{id:"P891134387",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7165399,longitude:-74.0148155},last_updated:null},{id:"P891134388",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":32,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7173682,longitude:-74.014168},last_updated:null},{id:"P893841834",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":188,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7352313,longitude:-74.0017222},last_updated:null},{id:"P893841889",name:"Washington Commons",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":114,"taxi-zone":158,precinct:6,"b-score":{0:250,1:120,2:70,3:42,4:45,5:38,6:103,7:175,8:347,9:393,10:486,11:520,12:628,13:628,14:640,15:642,16:668,17:683,18:552,19:551,20:524,21:523,22:535,23:554},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7384531,longitude:-74.0083015},last_updated:null},{id:"P894035808",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":190,"taxi-zone":249,precinct:6,"b-score":{0:58,1:36,2:26,3:16,4:18,5:35,6:87,7:93,8:119,9:125,10:129,11:130,12:142,13:141,14:144,15:148,16:145,17:198,18:187,19:199,20:196,21:191,22:193,23:106},"c-score":.5094001148105626,rating:1.5,location:{latitude:40.7298816,longitude:-74.002776},last_updated:null},{id:"P895611180",name:"West 87th Street Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":737,"taxi-zone":238,precinct:24,"b-score":{0:396,1:289,2:117,3:84,4:79,5:112,6:385,7:443,8:470,9:525,10:596,11:724,12:763,13:801,14:791,15:834,16:803,17:840,18:1072,19:997,20:975,21:964,22:993,23:808},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.787094,longitude:-73.9709212},last_updated:null},{id:"P895757747",name:"Joan of Arc Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":629,"taxi-zone":238,precinct:24,"b-score":{0:396,1:289,2:117,3:84,4:79,5:112,6:385,7:443,8:470,9:525,10:596,11:724,12:763,13:801,14:791,15:834,16:803,17:840,18:1072,19:997,20:975,21:964,22:993,23:808},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.7942118,longitude:-73.976389},last_updated:null},{id:"P904714816",name:"Happy Warrior Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":783,"taxi-zone":151,precinct:24,"b-score":{0:278,1:195,2:108,3:73,4:94,5:172,6:783,7:444,8:566,9:584,10:862,11:877,12:880,13:846,14:889,15:945,16:910,17:926,18:971,19:938,20:929,21:848,22:739,23:533},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7954197,longitude:-73.9684305},last_updated:null},{id:"P918302837",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":399,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7777983,longitude:-73.9873252},last_updated:null},{id:"P943557523",name:"Dorrence Brook Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1143,"taxi-zone":42,precinct:32,"b-score":{0:216,1:99,2:54,3:37,4:46,5:48,6:177,7:268,8:304,9:320,10:301,11:309,12:317,13:320,14:318,15:340,16:605,17:728,18:718,19:600,20:555,21:547,22:501,23:342},"c-score":.5270044010715652,rating:1.5,location:{latitude:40.8181963,longitude:-73.9472809},last_updated:null},{id:"P954250916",name:"Dekovats Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1260,"taxi-zone":262,precinct:19,"b-score":{0:714,1:440,2:234,3:161,4:180,5:308,6:696,7:567,8:592,9:657,10:727,11:1141,12:1111,13:1107,14:1115,15:1128,16:1120,17:1905,18:2049,19:1980,20:1680,21:1865,22:1940,23:1347},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7793517,longitude:-73.9442344},last_updated:null},{id:"P954250919",name:"Samuel Marx Triangle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1062,"taxi-zone":41,precinct:28,"b-score":{0:91,1:75,2:48,3:38,4:26,5:18,6:49,7:45,8:62,9:75,10:80,11:96,12:121,13:128,14:135,15:141,16:135,17:148,18:143,19:159,20:151,21:158,22:177,23:150},"c-score":.4653256155121827,rating:1.5,location:{latitude:40.802576,longitude:-73.9527698},last_updated:null},{id:"P959894788",name:"Roger Morris Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1321,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8345035,longitude:-73.9385228},last_updated:null},{id:"P959895071",name:"McKenna Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1319,"taxi-zone":244,precinct:33,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.6868434217108554,rating:1.5,location:{latitude:40.8383487,longitude:-73.9391569},last_updated:null},{id:"P964819132",name:"Seward Park Extension Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"dawn-dusk","grid-id":433,"taxi-zone":148,precinct:7,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.5297648824412206,rating:1.5,location:{latitude:40.7171165,longitude:-73.9884804},last_updated:null},{id:"P964822654",name:"Seward Park Extension Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"dawn-dusk","grid-id":477,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.6613306653326663,rating:1.5,location:{latitude:40.7168088,longitude:-73.9848922},last_updated:null},{id:"P973521995",name:"Ahearn Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":524,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7148022,longitude:-73.9834508},last_updated:null},{id:"P976724943",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":384,"taxi-zone":113,precinct:9,"b-score":{0:9,1:5,2:4,3:4,4:3,5:5,6:13,7:25,8:48,9:52,10:54,11:58,12:61,13:57,14:57,15:58,16:38,17:42,18:37,19:11,20:10,21:8,22:10,23:11},"c-score":.9999999999999999,rating:1.5,location:{latitude:40.7294006,longitude:-73.9911035},last_updated:null},{id:"P985281628",name:"Seward Park High School - Community Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":433,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.5297648824412206,rating:1.5,location:{latitude:40.7158595,longitude:-73.9891313},last_updated:null},{id:"P990936691",name:"Pier 42 Upland Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":574,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7105384,longitude:-73.981794},last_updated:null},{id:"P997819338",name:"Andrew Haswell Green Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1004,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7594825,longitude:-73.9575866},last_updated:null},{id:"P1015980340",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Apr-Oct 07:00-22:00; Nov-Mar 07:00-20:00","grid-id":477,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.6613306653326663,rating:1.5,location:{latitude:40.7168628,longitude:-73.9867292},last_updated:null},{id:"P1016487162",name:"Queensborough Oval",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":963,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7592353,longitude:-73.9600741},last_updated:null},{id:"P1018935492",name:"Vladeck Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":573,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7123997,longitude:-73.9820519},last_updated:null},{id:"P1021760821",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":176,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7562014,longitude:-74.0035176},last_updated:null},{id:"P1023817153",name:"Pier 76",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":137,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.38419209604802396,rating:1.5,location:{latitude:40.7591506,longitude:-74.005364},last_updated:null},{id:"P1025959315",name:"The Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":931,"taxi-zone":152,precinct:26,"b-score":{0:363,1:173,2:119,3:93,4:95,5:112,6:295,7:278,8:309,9:410,10:492,11:616,12:661,13:675,14:668,15:672,16:661,17:938,18:802,19:808,20:798,21:766,22:811,23:723},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8180211,longitude:-73.9589542},last_updated:null},{id:"P1059903962",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"24/7","grid-id":653,"taxi-zone":170,precinct:17,"b-score":{0:121,1:84,2:52,3:41,4:40,5:42,6:87,7:225,8:204,9:302,10:311,11:313,12:318,13:344,14:402,15:460,16:458,17:561,18:562,19:483,20:466,21:438,22:321,23:329},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7500032,longitude:-73.9756477},last_updated:null},{id:"P1068258666",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":605,"taxi-zone":137,precinct:17,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.3771885942971485,rating:1.5,location:{latitude:40.7443685,longitude:-73.9781439},last_updated:null},{id:"P1068603579",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":506,"taxi-zone":164,precinct:14,"b-score":{0:23,1:16,2:17,3:9,4:7,5:10,6:5,7:10,8:10,9:11,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:13,18:17,19:24,20:29,21:31,22:40,23:39},"c-score":1,rating:1.5,location:{latitude:40.7474521,longitude:-73.9837467},last_updated:null},{id:"P1077518596",name:"Hester Street Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":434,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.7858929464732366,rating:1.5,location:{latitude:40.7154087,longitude:-73.9893119},last_updated:null},{id:"P1082729243",name:"Saint Vartan Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":708,"taxi-zone":170,precinct:17,"b-score":{0:121,1:84,2:52,3:41,4:40,5:42,6:87,7:225,8:204,9:302,10:311,11:313,12:318,13:344,14:402,15:460,16:458,17:561,18:562,19:483,20:466,21:438,22:321,23:329},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7456086,longitude:-73.9748201},last_updated:null},{id:"P1083911850",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":429,"taxi-zone":79,precinct:9,"b-score":{0:171,1:196,2:161,3:143,4:101,5:135,6:331,7:170,8:160,9:185,10:207,11:233,12:246,13:257,14:263,15:264,16:254,17:258,18:234,19:235,20:231,21:596,22:451,23:366},"c-score":.48990623804056643,rating:1.5,location:{latitude:40.7231734,longitude:-73.987557},last_updated:null},{id:"P1087523912",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":607,"taxi-zone":137,precinct:13,"b-score":{0:622,1:398,2:287,3:232,4:206,5:117,6:185,7:420,8:346,9:532,10:457,11:456,12:596,13:587,14:779,15:784,16:780,17:920,18:1284,19:1286,20:1286,21:1310,22:1301,23:1048},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7408339,longitude:-73.9794828},last_updated:null},{id:"P1090764362",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"08:00-20:00","grid-id":1075,"taxi-zone":263,precinct:19,"b-score":{0:214,1:125,2:86,3:48,4:55,5:55,6:241,7:169,8:194,9:247,10:385,11:503,12:520,13:530,14:539,15:531,16:521,17:530,18:514,19:496,20:445,21:451,22:446,23:528},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7801006,longitude:-73.9524877},last_updated:null},{id:"P1095508395",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1532,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8674781,longitude:-73.9228727},last_updated:null},{id:"P1107165183",name:"Anibal Aviles Playground",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":899,"taxi-zone":24,precinct:24,"b-score":{0:574,1:281,2:240,3:118,4:163,5:241,6:1292,7:1081,8:1092,9:1276,10:1347,11:1364,12:1368,13:1393,14:1449,15:1448,16:1444,17:1489,18:1646,19:1649,20:1532,21:1558,22:1433,23:1037},"c-score":.4165709911978569,rating:1.5,location:{latitude:40.801159,longitude:-73.9627985},last_updated:null},{id:"P1121582607",name:"Herald Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":414,"taxi-zone":100,precinct:14,"b-score":{0:84,1:75,2:46,3:40,4:29,5:19,6:34,7:42,8:67,9:68,10:71,11:75,12:90,13:95,14:124,15:128,16:125,17:167,18:235,19:235,20:235,21:244,22:240,23:177},"c-score":1,rating:1.5,location:{latitude:40.750256,longitude:-73.987625},last_updated:null},{id:"P1121932385",name:"Greeley Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":415,"taxi-zone":164,precinct:14,"b-score":{0:23,1:16,2:17,3:9,4:7,5:10,6:5,7:10,8:10,9:11,10:10,11:11,12:11,13:13,14:16,15:16,16:16,17:13,18:17,19:24,20:29,21:31,22:40,23:39},"c-score":1,rating:1.5,location:{latitude:40.7487036,longitude:-73.9883472},last_updated:null},{id:"P1127559545",name:"Peck Slip",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":203,"taxi-zone":209,precinct:1,"b-score":{0:302,1:160,2:139,3:117,4:104,5:123,6:329,7:554,8:629,9:730,10:745,11:783,12:1106,13:1121,14:1193,15:1172,16:1121,17:1315,18:1304,19:1241,20:1174,21:1065,22:861,23:637},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7078001,longitude:-74.0015491},last_updated:null},{id:"P1127851294",name:"Imagination Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":167,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7061989,longitude:-74.0040983},last_updated:null},{id:"P1135559125",name:"Unknown Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1268,"taxi-zone":244,precinct:34,"b-score":{0:51,1:20,2:15,3:13,4:13,5:13,6:36,7:45,8:57,9:70,10:78,11:91,12:105,13:109,14:112,15:124,16:99,17:107,18:132,19:129,20:135,21:139,22:140,23:88},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8505811,longitude:-73.9407742},last_updated:null},{id:"P1141662701",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":843,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7569158,longitude:-73.9662011},last_updated:null},{id:"P1173199006",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"08:00-21:00","grid-id":1116,"taxi-zone":263,precinct:19,"b-score":{0:214,1:125,2:86,3:48,4:55,5:55,6:241,7:169,8:194,9:247,10:385,11:503,12:520,13:530,14:539,15:531,16:521,17:530,18:514,19:496,20:445,21:451,22:446,23:528},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7825984,longitude:-73.949957},last_updated:null},{id:"P1173199007",name:"Unknown Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"yes",opening_hours:"24/7","grid-id":1116,"taxi-zone":263,precinct:19,"b-score":{0:214,1:125,2:86,3:48,4:55,5:55,6:241,7:169,8:194,9:247,10:385,11:503,12:520,13:530,14:539,15:531,16:521,17:530,18:514,19:496,20:445,21:451,22:446,23:528},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7826106,longitude:-73.9501576},last_updated:null},{id:"P1183761752",name:"Clara Coffey Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":924,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.755163,longitude:-73.9621444},last_updated:null},{id:"P1183958467",name:"MacArthur Playground",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":886,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.752273,longitude:-73.9651557},last_updated:null},{id:"P1188665117",name:"Pier 42 Deck",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":527,"taxi-zone":232,precinct:7,"b-score":{0:299,1:167,2:103,3:77,4:42,5:20,6:92,7:88,8:126,9:161,10:262,11:330,12:400,13:412,14:433,15:443,16:398,17:518,18:578,19:537,20:472,21:455,22:473,23:463},"c-score":.4246954330909555,rating:1.5,location:{latitude:40.7099785,longitude:-73.9823839},last_updated:null},{id:"P1751075",name:"John Jay Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":1124,"taxi-zone":140,precinct:19,"b-score":{0:149,1:166,2:112,3:65,4:68,5:70,6:108,7:275,8:236,9:184,10:178,11:179,12:187,13:189,14:205,15:269,16:265,17:283,18:274,19:262,20:267,21:274,22:237,23:222},"c-score":.7237689756346473,rating:1.5,location:{latitude:40.7692516,longitude:-73.9496384},last_updated:null},{id:"P3690816",name:"Highbridge Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1453,"taxi-zone":120,precinct:33,"b-score":{0:97,1:100,2:63,3:45,4:44,5:20,6:48,7:118,8:89,9:95,10:97,11:89,12:85,13:85,14:86,15:107,16:100,17:117,18:123,19:136,20:147,21:156,22:160,23:157},"c-score":.3926999617298125,rating:1.5,location:{latitude:40.8460051,longitude:-73.9319502},last_updated:null},{id:"P4099553",name:"Sara D. Roosevelt Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":349,"taxi-zone":148,precinct:5,"b-score":{0:88,1:72,2:61,3:53,4:48,5:18,6:43,7:64,8:94,9:96,10:109,11:119,12:119,13:118,14:119,15:120,16:121,17:121,18:120,19:122,20:122,21:122,22:119,23:120},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7196275,longitude:-73.9925973},last_updated:null},{id:"P5625630",name:"Fort Tryon Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1397,"taxi-zone":243,precinct:34,"b-score":{0:9,1:14,2:21,3:7,4:6,5:3,6:9,7:6,8:6,9:6,10:8,11:10,12:11,13:11,14:10,15:11,16:12,17:16,18:19,19:22,20:24,21:26,22:24,23:22},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8619781,longitude:-73.9326365},last_updated:null},{id:"P6802606",name:"Mannahatta Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":132,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7047848,longitude:-74.006686},last_updated:null},{id:"P6992452",name:"Dag Hammarskjold Plaza",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":807,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7523203,longitude:-73.9688866},last_updated:null},{id:"P7095444",name:"Union Square Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":380,"taxi-zone":234,precinct:13,"b-score":{0:338,1:202,2:109,3:69,4:53,5:158,6:476,7:542,8:652,9:682,10:892,11:897,12:906,13:913,14:919,15:1092,16:1484,17:1589,18:1540,19:1557,20:1441,21:1446,22:1125,23:734},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7358088,longitude:-73.9904565},last_updated:null},{id:"P7095669",name:"Stuyvesant Square",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":513,"taxi-zone":107,precinct:13,"b-score":{0:69,1:71,2:26,3:19,4:16,5:20,6:40,7:68,8:66,9:110,10:111,11:117,12:121,13:127,14:146,15:145,16:144,17:180,18:181,19:163,20:150,21:146,22:144,23:103},"c-score":.6499952162265595,rating:1.5,location:{latitude:40.7336501,longitude:-73.9839997},last_updated:null},{id:"P7109446",name:"Theodore Roosevelt Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":688,"taxi-zone":239,precinct:20,"b-score":{0:98,1:114,2:40,3:25,4:24,5:35,6:96,7:152,8:156,9:189,10:297,11:307,12:323,13:334,14:329,15:340,16:328,17:334,18:309,19:302,20:299,21:307,22:299,23:278},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7813637,longitude:-73.9740819},last_updated:null},{id:"P7141751",name:"The High Line",type:"park",address:null,internet_access:null,wheelchair_accessible:"yes",opening_hours:"Mo-Su 07:00-19:00","grid-id":143,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7479527,longitude:-74.0039779},last_updated:null},{id:"P8176996",name:"Old Slip Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":99,"taxi-zone":87,precinct:1,"b-score":{0:468,1:296,2:214,3:137,4:128,5:58,6:143,7:125,8:231,9:277,10:341,11:437,12:463,13:472,14:516,15:521,16:515,17:833,18:902,19:924,20:923,21:903,22:920,23:780},"c-score":.613287728026534,rating:1.5,location:{latitude:40.7038707,longitude:-74.0085649},last_updated:null},{id:"P8456861",name:"Columbia University Well Garden",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":936,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8081586,longitude:-73.9607078},last_updated:null},{id:"P9340888",name:"United Nations Garden",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":847,"taxi-zone":233,precinct:17,"b-score":{0:323,1:428,2:89,3:72,4:107,5:161,6:641,7:773,8:777,9:850,10:937,11:1029,12:1157,13:1252,14:1285,15:1382,16:1848,17:1974,18:2076,19:1984,20:1986,21:1984,22:1469,23:1006},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7509687,longitude:-73.9664023},last_updated:null},{id:"P9643461",name:"Nelson A. Rockefeller Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":33,"taxi-zone":13,precinct:1,"b-score":{0:474,1:359,2:248,3:192,4:147,5:108,6:452,7:449,8:356,9:595,10:623,11:716,12:804,13:827,14:867,15:879,16:886,17:1116,18:1040,19:1006,20:924,21:906,22:845,23:779},"c-score":.613287728026534,rating:1.5,location:{latitude:40.716889,longitude:-74.0152879},last_updated:null},{id:"P10025591",name:"West 59th Street Recreation Center",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":403,"taxi-zone":143,precinct:20,"b-score":{0:69,1:39,2:28,3:18,4:18,5:16,6:43,7:74,8:273,9:291,10:242,11:249,12:237,13:240,14:236,15:193,16:159,17:162,18:147,19:123,20:113,21:115,22:112,23:130},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7712414,longitude:-73.988724},last_updated:null},{id:"P10170445",name:"Low Plaza",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":895,"taxi-zone":166,precinct:26,"b-score":{0:30,1:61,2:27,3:15,4:15,5:17,6:9,7:5,8:5,9:7,10:7,11:5,12:5,13:6,14:6,15:6,16:6,17:4,18:3,19:4,20:4,21:5,22:5,23:6},"c-score":.261656461283327,rating:1.5,location:{latitude:40.8076784,longitude:-73.9622466},last_updated:null},{id:"P10571875",name:"Duke Ellington Circle",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1108,"taxi-zone":43,precinct:22,"b-score":{0:406,1:220,2:172,3:132,4:120,5:74,6:206,7:372,8:606,9:686,10:768,11:806,12:865,13:895,14:966,15:940,16:938,17:1175,18:1009,19:957,20:910,21:907,22:982,23:1109},"c-score":.2061030515257629,rating:1.5,location:{latitude:40.7968563,longitude:-73.949257},last_updated:null},{id:"P11037505",name:"Charles B. Benenson Grove",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":492,"taxi-zone":142,precinct:20,"b-score":{0:131,1:84,2:47,3:29,4:33,5:31,6:74,7:96,8:142,9:187,10:238,11:244,12:252,13:258,14:258,15:255,16:243,17:289,18:221,19:232,20:229,21:228,22:227,23:255},"c-score":.36388569970659523,rating:1.5,location:{latitude:40.7714021,longitude:-73.9835705},last_updated:null},{id:"P11077079",name:"African Burial Ground National Monument",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":162,"taxi-zone":231,precinct:5,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.3986993496748374,rating:1.5,location:{latitude:40.7145261,longitude:-74.004464},last_updated:null},{id:"P11225305",name:"Honey Locust Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":922,"taxi-zone":141,precinct:17,"b-score":{0:158,1:191,2:95,3:68,4:76,5:111,6:271,7:295,8:305,9:341,10:327,11:330,12:332,13:372,14:399,15:401,16:399,17:401,18:405,19:399,20:357,21:336,22:321,23:264},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7601599,longitude:-73.9628992},last_updated:null},{id:"P13613032",name:"Thomas Paine Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:"Mo-Su 06:00-01:00","grid-id":199,"taxi-zone":231,precinct:5,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.714782,longitude:-74.0027707},last_updated:null},{id:"P13678220",name:"Bella Abzug Park",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":214,"taxi-zone":246,precinct:10,"b-score":{0:121,1:64,2:33,3:23,4:26,5:15,6:24,7:62,8:122,9:203,10:318,11:419,12:492,13:551,14:586,15:589,16:457,17:458,18:289,19:278,20:258,21:255,22:273,23:243},"c-score":.35804152315346344,rating:1.5,location:{latitude:40.7558415,longitude:-74.0003803},last_updated:null},{id:"P14374901",name:"Sherman Creek",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":1537,"taxi-zone":127,precinct:34,"b-score":{0:674,1:460,2:358,3:259,4:259,5:302,6:893,7:702,8:712,9:778,10:903,11:961,12:1189,13:1307,14:1317,15:1326,16:1301,17:1539,18:1271,19:1278,20:1267,21:1267,22:1275,23:1008},"c-score":.5172056384742952,rating:1.5,location:{latitude:40.8585719,longitude:-73.9216107},last_updated:null},{id:"P14425097",name:"Saint Vartan Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":708,"taxi-zone":170,precinct:17,"b-score":{0:121,1:84,2:52,3:41,4:40,5:42,6:87,7:225,8:204,9:302,10:311,11:313,12:318,13:344,14:402,15:460,16:458,17:561,18:562,19:483,20:466,21:438,22:321,23:329},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7452795,longitude:-73.9740145},last_updated:null},{id:"P15039698",name:"Silverstein Family Park",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":63,"taxi-zone":231,precinct:17,"b-score":{0:443,1:285,2:211,3:114,4:90,5:55,6:61,7:89,8:155,9:194,10:222,11:371,12:416,13:414,14:416,15:410,16:405,17:375,18:480,19:485,20:490,21:499,22:563,23:533},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7131852,longitude:-74.0114448},last_updated:null},{id:"P15902634",name:"Brooklyn Banks",type:"park",address:null,internet_access:null,wheelchair_accessible:null,opening_hours:null,"grid-id":201,"taxi-zone":45,precinct:5,"b-score":{0:407,1:224,2:78,3:38,4:71,5:190,6:509,7:1353,8:1776,9:1764,10:1835,11:1856,12:1914,13:1911,14:2582,15:2807,16:2520,17:2861,18:2906,19:1952,20:1497,21:1451,22:952,23:497},"c-score":.37779850746268656,rating:1.5,location:{latitude:40.7114732,longitude:-74.0027148},last_updated:null},{id:"P16000824",name:"Sutton Parks",type:"park",address:"null",internet_access:"null",wheelchair_accessible:"null",opening_hours:"null","grid-id":965,"taxi-zone":229,precinct:17,"b-score":{0:111,1:102,2:38,3:27,4:29,5:42,6:146,7:267,8:231,9:393,10:446,11:492,12:531,13:537,14:690,15:723,16:702,17:777,18:892,19:870,20:800,21:567,22:501,23:258},"c-score":.3421275035081005,rating:1.5,location:{latitude:40.7565069,longitude:-73.9605051},last_updated:null}],Wz={data:dle},hle=(e,t,n,i,a)=>{const u=q.useRef(null),[f,o]=q.useState([]),v=q.useRef(),E=q.useRef();return q.useEffect(()=>{u.current&&(v.current&&v.current.remove(),v.current=new ds.Marker().setLngLat([a.longitude,a.latitude]).addTo(u.current),console.log("Placing start marker at:",[a.longitude,a.latitude]))},[u,a.latitude,a.longitude]),q.useEffect(()=>{u.current&&(E.current&&E.current.remove(),E.current=new ds.Marker().setLngLat([a.endLongitude,a.endLatitude]).addTo(u.current),console.log("Placing end marker at:",[a.endLongitude,a.endLatitude]))},[u,a.endLatitude,a.endLongitude]),q.useEffect(()=>{if(u.current)return;u.current=new ds.Map({container:e.current,style:"mapbox://styles/mapbox/streets-v11",center:[n,t],zoom:i});const k=Wz.data.map(D=>({id:D.id,name:D.name,latitude:D.location.latitude,longitude:D.location.longitude}));o(k),u.current.on("load",()=>{u.current.loadImage("/static/tree.png",(D,R)=>{if(D)throw D;u.current.addImage("cat",R),u.current.addSource("markers",{type:"geojson",data:{type:"FeatureCollection",features:k.map(j=>({type:"Feature",geometry:{type:"Point",coordinates:[j.longitude,j.latitude]},properties:{id:j.id,name:j.name}}))}}),u.current.addLayer({id:"markers",type:"symbol",source:"markers",layout:{"icon-image":"cat","icon-size":.25},paint:{"icon-opacity":.8}}),u.current.on("mouseenter","markers",()=>{u.current.getCanvas().style.cursor="pointer"}),u.current.on("mouseleave","markers",()=>{u.current.getCanvas().style.cursor=""})}),u.current.on("click",D=>{const R=u.current.queryRenderedFeatures(D.point,{layers:["markers"]});if(R.length>0){const j=R[0].geometry.coordinates.slice(),N=R[0].properties.name,$=R[0].properties.id;new ds.Popup({className:"custom-popup"}).setLngLat(j).setHTML(`<div class="popup-content">${N}<br>${$}<br>${j}</div>`).addTo(u.current)}})})},[]),{map:u,markers:f}},ple=(e="",t)=>{const[n,i]=q.useState(e),[a,u]=q.useState([]);return{placeName:n,suggestions:a,handlePlaceNameChange:async(v,E)=>{if(i(E||""),E){const D=await(await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(E)}.json?access_token=${ds.accessToken}`)).json();D.features.length>0&&u(D.features.map(R=>({label:R.place_name,value:R.place_name,coordinates:R.center})))}else u([])},handlePlaceSelect:v=>{t(E=>({...E,latitude:v.coordinates[1],longitude:v.coordinates[0]}))}}},fle="pk.eyJ1IjoiZmluYmFyYWxsYW4iLCJhIjoiY2xqY3NtYWN6MjV0ODNqcXhhaTY4aGQxdSJ9.VeVQzxCCtpyP_MeT1CkjOg";ds.accessToken=fle;const Hz=({inputValues:e,setInputValues:t})=>{const n=q.useRef(null),[i,a]=q.useState(40.73),[u,f]=q.useState(-73.445),[o,v]=q.useState(12.4),[E,k]=q.useState(!1),[D,R]=q.useState(!1),[j,N]=q.useState(!1),[$,ee]=q.useState(1),[W,K]=q.useState("km"),[Y,ie]=q.useState(!1),[ue,de]=q.useState(!1),[M,Te]=q.useState(()=>{const wn=new Date;return wn.getMinutes()!==0&&wn.setHours(wn.getHours()+1,0,0,0),wn}),[fe,Oe]=q.useState(M),[rt,at]=q.useState(!1),[qe,ze]=q.useState(!1),[Be,tt]=q.useState(!1),[Ke,Le]=q.useState(!1),[Je,it]=q.useState(!1),[kt,yt]=q.useState(!1),[wt,jt]=q.useState(!1),[Qt,en]=q.useState(!1),[on,Sn]=q.useState(!1),[Jt,yn]=q.useState(!1),[Ft,nn]=q.useState(!1),[bn,qt]=q.useState(!1),{map:It,markers:Rn}=hle(n,i,u,o,e);cle(It.current,e),ule(It.current,E,k,D,R,e,t,Be,tt,Le);const{placeName:ln,suggestions:Zn,handlePlaceNameChange:tr,handlePlaceSelect:Fn}=ple("",t),Yn=()=>{it(!0),yt(!1);const wn=new Date,Qe=wn.getHours();t(an=>({...an,hour:Qe}));const Kt=Math.round(wn.getMinutes());wn.setMinutes(Kt),Oe(wn),N(!1),at(!0)},Un=()=>{it(!1),yt(!0);const wn=new Date;let Qe=wn.getHours();wn.getMinutes()>0&&(Qe+=1),wn.setHours(Qe,0,0,0),t(Kt=>({...Kt,hour:Qe})),Oe(wn),N(!0),at(!0)},qn=async wn=>{wn.preventDefault(),console.log("handleInputSubmit",e);try{const Qe=await I_.post("/users/handle_routeinpput_data",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});console.log("errorless:",Qe.data);const Kt=Qe.data.waypoints;console.log("waypoints:",Kt),t({...e,waypoints:Kt}),console.log("handleInputSubmit",e)}catch(Qe){Qe.response?(console.log(Qe.response),console.log("server responded with error")):Qe.request?console.log("network error"):console.log(Qe)}};return Z.jsxs("div",{children:[Z.jsxs("div",{className:"user-input",children:[Z.jsx("div",{className:"titlebox",children:Z.jsx("span",{className:"text_bar-mapfunction",children:"My Journey Planner"})}),Z.jsxs("div",{className:"when-input",children:[Z.jsx("p",{children:"When would you like to leave?"}),Z.jsxs(kv,{spacing:2,direction:"row",justifyContent:"center",paddingBottom:"15px",children:[Z.jsx(Rs,{className:"now-button",sx:{width:"100px",height:"2.5rem"},variant:Je?"contained":"outlined",style:Je?{borderRadius:0}:{backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none",borderRadius:0},onClick:Yn,children:"Now"}),Z.jsx(Rs,{variant:kt?"contained":"outlined",sx:{width:"100px",height:"2.5rem"},style:kt?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},onClick:Un,children:"Later"})]}),j&&Z.jsx(uL,{value:fe,onChange:wn=>{wn?(Oe(wn),t(Qe=>({...Qe,hour:wn.getHours()}))):Oe(M)}})]}),rt&&Z.jsxs("div",{children:[Z.jsx("p",{children:"How long would like to go for?"}),Z.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[Z.jsx(Ore,{style:{width:"150px"},value:$,min:W==="km"?1:10,max:W==="km"?10:100,step:W==="km"?.5:5,valueLabelDisplay:"auto",onChange:(wn,Qe)=>ee(Qe),onChangeCommitted:()=>{ze(!0)}}),Z.jsx(Rs,{sx:{width:"100px",height:"2.5rem"},variant:"outlined",style:Je?{borderColor:"black",color:"black",borderRadius:0}:{borderColor:"black",color:"black",borderRadius:0},onClick:()=>{if(W==="km"){const Qe=($-1)/9*(100-10)+10;ee(Qe),K("min")}else{const Qe=($-10)/90*(10-1)+1;ee(Qe),K("km")}},children:W==="km"?`${$} km`:`${$} mins`})]})]}),qe&&Z.jsxs("div",{children:[Z.jsx("p",{children:"Where would you like to begin?"}),Z.jsx("div",{style:{display:"flex",gap:"10px"},children:Z.jsxs(kv,{spacing:1,direction:"row",justifyContent:"center",paddingBottom:"15px",children:[Z.jsx(Rs,{onClick:()=>{t(wn=>({...wn,latitude:40.7505,longitude:-73.9934})),ie(!1),jt(!0),en(!1),Sn(!1),tt(!0)},sx:{width:"110px",height:"2.5rem"},startIcon:Z.jsx(ZE,{}),variant:wt?"contained":"outlined",style:wt?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:"Home"}),Z.jsx(Rs,{onClick:()=>{k(!E),ie(!1),jt(!1),en(!0),Sn(!1)},sx:{width:"110px",height:"2.5rem"},startIcon:E?Z.jsx(YE,{}):Z.jsx(XE,{}),variant:Qt?"contained":"outlined",style:Qt?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:E?"Click":"Map"}),Z.jsx(Rs,{onClick:()=>{ie(!0),jt(!1),en(!1),Sn(!0)},sx:{width:"110px",height:"2.5rem"},startIcon:Z.jsx(KE,{}),variant:on?"contained":"outlined",style:on?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:"Search"})]})}),Y&&Z.jsx(WI,{id:"address-input",options:Zn,getOptionLabel:wn=>wn.label,isOptionEqualToValue:()=>!0,style:{borderRadius:0,width:350,paddingBottom:"15px",color:"black",borderRadius:0},onInputChange:tr,onChange:(wn,Qe)=>{Qe&&Fn(Qe)},renderInput:wn=>Z.jsx(zI,{...wn,label:"Type Address",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"black"},"&:hover fieldset":{borderColor:"black"},"&.Mui-focused fieldset":{borderColor:"black"}},"& .MuiFormLabel-root":{color:"black","&.Mui-focused":{color:"black"}},"& .MuiInputBase-root":{color:"black"},"& .MuiAutocomplete-clearIndicator":{color:"black"},"& .MuiAutocomplete-popupIndicator":{color:"black"}}})})]}),Be&&Z.jsxs("div",{children:[Z.jsx("p",{children:"Where would you like to go?"}),Z.jsx("div",{style:{display:"flex",gap:"10px"},children:Z.jsxs(kv,{spacing:1,direction:"row",justifyContent:"center",paddingBottom:"15px",children:[Z.jsx(Rs,{onClick:()=>{t(wn=>({...wn,endLatitude:40.711667,endLongitude:-74.0125})),yn(!0),nn(!1),qt(!1),Le(!0),de(!1)},startIcon:Z.jsx(ZE,{}),sx:{width:"110px",height:"2.5rem"},variant:Jt?"contained":"outlined",style:Jt?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:"Home"}),Z.jsx(Rs,{onClick:()=>{R(!D),yn(!1),nn(!0),qt(!1),de(!1)},sx:{width:"110px",height:"2.5rem"},startIcon:D?Z.jsx(YE,{}):Z.jsx(XE,{}),variant:Ft?"contained":"outlined",style:Ft?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none"},children:D?"Click":"Map"}),Z.jsx(Rs,{onClick:()=>{yn(!1),nn(!1),qt(!0),de(!0)},sx:{width:"110px",height:"2.5rem"},startIcon:Z.jsx(KE,{}),variant:bn?"contained":"outlined",style:bn?{borderRadius:0}:{borderRadius:0,backgroundColor:"transparent",borderColor:"black",color:"black",boxShadow:"none",borderRadius:0},children:"Search"})]})}),ue&&Z.jsx(WI,{id:"address-input",options:Zn,getOptionLabel:wn=>wn.label,isOptionEqualToValue:()=>!0,style:{width:350,paddingBottom:"15px",color:"black",borderRadius:0},onInputChange:tr,onChange:(wn,Qe)=>{Qe&&Fn(Qe)},renderInput:wn=>Z.jsx(zI,{...wn,label:"Type Address",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"black"},"&:hover fieldset":{borderColor:"black"},"&.Mui-focused fieldset":{borderColor:"black"}},"& .MuiFormLabel-root":{color:"black","&.Mui-focused":{color:"black"}},"& .MuiInputBase-root":{color:"black"},"& .MuiAutocomplete-clearIndicator":{color:"black"},"& .MuiAutocomplete-popupIndicator":{color:"black"}}})})]}),Ke&&Z.jsx(kv,{spacing:1,direction:"row",justifyContent:"center",paddingBottom:"15px",children:Z.jsx(Rs,{sx:{width:"200px",height:"2.5rem"},variant:"contained",type:"submit",size:"large",style:{borderRadius:0},onClick:qn,children:"GO"})}),Z.jsx(Rs,{sx:{width:"200px",height:"2.5rem"},style:{borderRadius:0},variant:"outlined",onClick:()=>console.log("These were the inputValues:",e),children:"Tell me baby..."})]}),Z.jsx("div",{ref:n,className:"map-container"})]})};function mle({inputValues:e,setInputValues:t}){return Z.jsx("div",{children:Z.jsx("div",{className:"interface-container",children:Z.jsx("div",{className:"map-container",children:Z.jsx(Hz,{inputValues:e,setInputValues:t})})})})}const qz=()=>{const[e,t]=q.useState({first_name:"",last_name:"",email:"",address:"",password:""}),n=document.getElementById("error-message"),i=u=>{t({...e,[u.target.name]:u.target.value})},a=async u=>{u.preventDefault(),I_.post("/users/registration",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(f=>{console.log(f)}).catch(f=>{if(f.response.status===400){console.log("It may be that Username already exists.");const o="Username already exist! Please try entering a different email.";n.textContent=o}else f.response?(console.log(f.response),console.log("server responded")):f.request?console.log("network error"):console.log(f)})};return Z.jsx("div",{children:Z.jsxs("div",{className:"login-area",children:[Z.jsx("h3",{children:"Registration Form"}),Z.jsxs("form",{onSubmit:a,children:[Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"first_name",children:"First Name:"}),Z.jsx("input",{type:"text",name:"first_name",className:"first_name",id:"first_name",onChange:i})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"last_name",children:"Last Name:"}),Z.jsx("input",{type:"text",name:"last_name",className:"last_name",onChange:i})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"username",children:"Email (will be your username):"}),Z.jsx("input",{type:"text",name:"username",id:"username",onChange:i})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"address",children:"Address:"}),Z.jsx("input",{type:"text",name:"address",className:"address",id:"address",onChange:i})]}),Z.jsxs("div",{children:[Z.jsx("label",{htmlFor:"password",children:"Password:"}),Z.jsx("input",{type:"text",name:"password",className:"password",id:"password",onChange:i})]}),Z.jsx("div",{id:"error-message"}),Z.jsx("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})})},gle=()=>{const[e,t]=q.useState(""),[n,i]=q.useState(""),[a,u]=q.useState(""),f=o=>{console.log(e,n),o.preventDefault(),u(""),I_.post("users/logincheck",{username:e,password:n}).then(v=>{v.data.checks,console.log("Do the username and password match up =",v.data.checks),v.data.checks[0]==!0?console.log("Hi",v.data.checks[1],"and welcome back!"):console.log("Username and password do not match.  Please try again")}).catch(v=>{u("Invalid email or password"),console.log("Error:",v.response.data.error)})};return Z.jsxs("div",{className:"login-area",children:[Z.jsx("h3",{children:"Login"}),Z.jsxs("form",{onSubmit:f,children:[Z.jsxs("div",{children:[Z.jsx("label",{children:"Username (Email):"}),Z.jsx("input",{type:"text",value:e,onChange:o=>t(o.target.value)})]}),Z.jsxs("div",{children:[Z.jsx("label",{children:"Password:"}),Z.jsx("input",{type:"password",value:n,onChange:o=>i(o.target.value)})]}),Z.jsx("button",{type:"submit",className:"submit-button",children:"Login"}),a&&Z.jsx("p",{children:a})]})]})};function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function _le(e,t){if(Pp(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(Pp(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gz(e){var t=_le(e,"string");return Pp(t)==="symbol"?t:String(t)}function $g(e,t,n){return t=Gz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qI(Object(n),!0).forEach(function(i){$g(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qI(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function yle(e){if(Array.isArray(e))return e}function vle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,a,u,f,o=[],v=!0,E=!1;try{if(u=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;v=!1}else for(;!(v=(i=u.call(n)).done)&&(o.push(i.value),o.length!==t);v=!0);}catch(k){E=!0,a=k}finally{try{if(!v&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(E)throw a}}return o}}function JE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Zz(e,t){if(e){if(typeof e=="string")return JE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JE(e,t)}}function xle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ju(e,t){return yle(e)||vle(e,t)||Zz(e,t)||xle()}function Qu(e,t){if(e==null)return{};var n=Qn(e,t),i,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)i=u[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var ble=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function wle(e){var t=e.defaultInputValue,n=t===void 0?"":t,i=e.defaultMenuIsOpen,a=i===void 0?!1:i,u=e.defaultValue,f=u===void 0?null:u,o=e.inputValue,v=e.menuIsOpen,E=e.onChange,k=e.onInputChange,D=e.onMenuClose,R=e.onMenuOpen,j=e.value,N=Qu(e,ble),$=q.useState(o!==void 0?o:n),ee=ju($,2),W=ee[0],K=ee[1],Y=q.useState(v!==void 0?v:a),ie=ju(Y,2),ue=ie[0],de=ie[1],M=q.useState(j!==void 0?j:f),Te=ju(M,2),fe=Te[0],Oe=Te[1],rt=q.useCallback(function(Le,Je){typeof E=="function"&&E(Le,Je),Oe(Le)},[E]),at=q.useCallback(function(Le,Je){var it;typeof k=="function"&&(it=k(Le,Je)),K(it!==void 0?it:Le)},[k]),qe=q.useCallback(function(){typeof R=="function"&&R(),de(!0)},[R]),ze=q.useCallback(function(){typeof D=="function"&&D(),de(!1)},[D]),Be=o!==void 0?o:W,tt=v!==void 0?v:ue,Ke=j!==void 0?j:fe;return ar(ar({},N),{},{inputValue:Be,menuIsOpen:tt,onChange:rt,onInputChange:at,onMenuClose:ze,onMenuOpen:qe,value:Ke})}function Ele(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Gz(i.key),i)}}function Sle(e,t,n){return t&&GI(e.prototype,t),n&&GI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ex(e,t)}function ix(e){return ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ix(e)}function Cle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kle(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Az(e)}function Ple(e){var t=Cle();return function(){var i=ix(e),a;if(t){var u=ix(this).constructor;a=Reflect.construct(i,arguments,u)}else a=i.apply(this,arguments);return kle(this,a)}}function Ile(e){if(Array.isArray(e))return JE(e)}function Ale(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xz(e){return Ile(e)||Ale(e)||Zz(e)||Mle()}function Dle(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Ole(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}const Rle=["top","right","bottom","left"];Rle.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);function oc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Kz(e){return oc(e).getComputedStyle(e)}function Yz(e){return e instanceof oc(e).Node}function Jz(e){return Yz(e)?(e.nodeName||"").toLowerCase():"#document"}function nT(e){return e instanceof HTMLElement||e instanceof oc(e).HTMLElement}function ZI(e){return typeof ShadowRoot<"u"&&(e instanceof oc(e).ShadowRoot||e instanceof ShadowRoot)}function Qz(e){const{overflow:t,overflowX:n,overflowY:i,display:a}=Kz(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(a)}function Lle(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function zle(e){return["html","body","#document"].includes(Jz(e))}const Fle=Math.min,Nle=Math.max,ox=Math.round,Iv=Math.floor,ax=e=>({x:e,y:e});function Ble(e){const t=Kz(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const a=nT(e),u=a?e.offsetWidth:n,f=a?e.offsetHeight:i,o=ox(n)!==u||ox(i)!==f;return o&&(n=u,i=f),{width:n,height:i,$:o}}function QE(e){return e instanceof Element||e instanceof oc(e).Element}function rT(e){return QE(e)?e:e.contextElement}function W4(e){const t=rT(e);if(!nT(t))return ax(1);const n=t.getBoundingClientRect(),{width:i,height:a,$:u}=Ble(t);let f=(u?ox(n.width):n.width)/i,o=(u?ox(n.height):n.height)/a;return f&&Number.isFinite(f)||(f=1),o&&Number.isFinite(o)||(o=1),{x:f,y:o}}const jle=ax(0);function $le(e){const t=oc(e);return Lle()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:jle}function XI(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),u=rT(e);let f=ax(1);t&&(i?QE(i)&&(f=W4(i)):f=W4(e));const o=function(R,j,N){return j===void 0&&(j=!1),!(!N||j&&N!==oc(R))&&j}(u,n,i)?$le(u):ax(0);let v=(a.left+o.x)/f.x,E=(a.top+o.y)/f.y,k=a.width/f.x,D=a.height/f.y;if(u){const R=oc(u),j=i&&QE(i)?oc(i):i;let N=R.frameElement;for(;N&&i&&j!==R;){const $=W4(N),ee=N.getBoundingClientRect(),W=getComputedStyle(N),K=ee.left+(N.clientLeft+parseFloat(W.paddingLeft))*$.x,Y=ee.top+(N.clientTop+parseFloat(W.paddingTop))*$.y;v*=$.x,E*=$.y,k*=$.x,D*=$.y,v+=K,E+=Y,N=oc(N).frameElement}}return Ole({width:k,height:D,x:v,y:E})}function eF(e){var t;return(t=(Yz(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ule(e){if(Jz(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ZI(e)&&e.host||eF(e);return ZI(t)?t.host:t}function tF(e){const t=Ule(e);return zle(t)?e.ownerDocument?e.ownerDocument.body:e.body:nT(t)&&Qz(t)?t:tF(t)}function e6(e,t){var n;t===void 0&&(t=[]);const i=tF(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),u=oc(i);return a?t.concat(u,u.visualViewport||[],Qz(i)?i:[]):t.concat(i,e6(i))}function Vle(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:u=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:v=!1}=i,E=rT(e),k=a||u?[...E?e6(E):[],...e6(t)]:[];k.forEach(ee=>{a&&ee.addEventListener("scroll",n,{passive:!0}),u&&ee.addEventListener("resize",n)});const D=E&&o?function(ee,W){let K,Y=null;const ie=eF(ee);function ue(){clearTimeout(K),Y&&Y.disconnect(),Y=null}return function de(M,Te){M===void 0&&(M=!1),Te===void 0&&(Te=1),ue();const{left:fe,top:Oe,width:rt,height:at}=ee.getBoundingClientRect();if(M||W(),!rt||!at)return;const qe={rootMargin:-Iv(Oe)+"px "+-Iv(ie.clientWidth-(fe+rt))+"px "+-Iv(ie.clientHeight-(Oe+at))+"px "+-Iv(fe)+"px",threshold:Nle(0,Fle(1,Te))||1};let ze=!0;function Be(tt){const Ke=tt[0].intersectionRatio;if(Ke!==Te){if(!ze)return de();Ke?de(!1,Ke):K=setTimeout(()=>{de(!1,1e-7)},100)}ze=!1}try{Y=new IntersectionObserver(Be,{...qe,root:ie.ownerDocument})}catch{Y=new IntersectionObserver(Be,qe)}Y.observe(ee)}(!0),ue}(E,n):null;let R,j=-1,N=null;f&&(N=new ResizeObserver(ee=>{let[W]=ee;W&&W.target===E&&N&&(N.unobserve(t),cancelAnimationFrame(j),j=requestAnimationFrame(()=>{N&&N.observe(t)})),n()}),E&&!v&&N.observe(E),N.observe(t));let $=v?XI(e):null;return v&&function ee(){const W=XI(e);!$||W.x===$.x&&W.y===$.y&&W.width===$.width&&W.height===$.height||n(),$=W,R=requestAnimationFrame(ee)}(),n(),()=>{k.forEach(ee=>{a&&ee.removeEventListener("scroll",n),u&&ee.removeEventListener("resize",n)}),D&&D(),N&&N.disconnect(),N=null,v&&cancelAnimationFrame(R)}}var t6=q.useLayoutEffect,Wle=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],sx=function(){};function Hle(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function qle(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var u=[].concat(i);if(t&&e)for(var f in t)t.hasOwnProperty(f)&&t[f]&&u.push("".concat(Hle(e,f)));return u.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var KI=function(t){return tce(t)?t.filter(Boolean):Pp(t)==="object"&&t!==null?[t]:[]},nF=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var n=Qu(t,Wle);return ar({},n)},mo=function(t,n,i){var a=t.cx,u=t.getStyles,f=t.getClassNames,o=t.className;return{css:u(n,t),className:a(i??{},f(n,t),o)}};function Yb(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Gle(e){return Yb(e)?window.innerHeight:e.clientHeight}function rF(e){return Yb(e)?window.pageYOffset:e.scrollTop}function lx(e,t){if(Yb(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Zle(e){var t=getComputedStyle(e),n=t.position==="absolute",i=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var a=e;a=a.parentElement;)if(t=getComputedStyle(a),!(n&&t.position==="static")&&i.test(t.overflow+t.overflowY+t.overflowX))return a;return document.documentElement}function Xle(e,t,n,i){return n*((e=e/i-1)*e*e+1)+t}function Av(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:sx,a=rF(e),u=t-a,f=10,o=0;function v(){o+=f;var E=Xle(o,a,u,n);lx(e,E),o<n?window.requestAnimationFrame(v):i(e)}v()}function YI(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),a=t.offsetHeight/3;i.bottom+a>n.bottom?lx(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):i.top-a<n.top&&lx(e,Math.max(t.offsetTop-a,0))}function Kle(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function JI(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Yle(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var iF=!1,Jle={get passive(){return iF=!0}},Mv=typeof window<"u"?window:{};Mv.addEventListener&&Mv.removeEventListener&&(Mv.addEventListener("p",sx,Jle),Mv.removeEventListener("p",sx,!1));var Qle=iF;function ece(e){return e!=null}function tce(e){return Array.isArray(e)}function Dv(e,t,n){return e?t:n}var nce=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var u=Object.entries(t).filter(function(f){var o=ju(f,1),v=o[0];return!i.includes(v)});return u.reduce(function(f,o){var v=ju(o,2),E=v[0],k=v[1];return f[E]=k,f},{})},rce=["children","innerProps"],ice=["children","innerProps"];function oce(e){var t=e.maxHeight,n=e.menuEl,i=e.minHeight,a=e.placement,u=e.shouldScroll,f=e.isFixedPosition,o=e.controlHeight,v=Zle(n),E={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return E;var k=v.getBoundingClientRect(),D=k.height,R=n.getBoundingClientRect(),j=R.bottom,N=R.height,$=R.top,ee=n.offsetParent.getBoundingClientRect(),W=ee.top,K=f?window.innerHeight:Gle(v),Y=rF(v),ie=parseInt(getComputedStyle(n).marginBottom,10),ue=parseInt(getComputedStyle(n).marginTop,10),de=W-ue,M=K-$,Te=de+Y,fe=D-Y-$,Oe=j-K+Y+ie,rt=Y+$-ue,at=160;switch(a){case"auto":case"bottom":if(M>=N)return{placement:"bottom",maxHeight:t};if(fe>=N&&!f)return u&&Av(v,Oe,at),{placement:"bottom",maxHeight:t};if(!f&&fe>=i||f&&M>=i){u&&Av(v,Oe,at);var qe=f?M-ie:fe-ie;return{placement:"bottom",maxHeight:qe}}if(a==="auto"||f){var ze=t,Be=f?de:Te;return Be>=i&&(ze=Math.min(Be-ie-o,t)),{placement:"top",maxHeight:ze}}if(a==="bottom")return u&&lx(v,Oe),{placement:"bottom",maxHeight:t};break;case"top":if(de>=N)return{placement:"top",maxHeight:t};if(Te>=N&&!f)return u&&Av(v,rt,at),{placement:"top",maxHeight:t};if(!f&&Te>=i||f&&de>=i){var tt=t;return(!f&&Te>=i||f&&de>=i)&&(tt=f?de-ue:Te-ue),u&&Av(v,rt,at),{placement:"top",maxHeight:tt}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return E}function ace(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var oF=function(t){return t==="auto"?"bottom":t},sce=function(t,n){var i,a=t.placement,u=t.theme,f=u.borderRadius,o=u.spacing,v=u.colors;return ar((i={label:"menu"},$g(i,ace(a),"100%"),$g(i,"position","absolute"),$g(i,"width","100%"),$g(i,"zIndex",1),i),n?{}:{backgroundColor:v.neutral0,borderRadius:f,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},aF=q.createContext(null),lce=function(t){var n=t.children,i=t.minMenuHeight,a=t.maxMenuHeight,u=t.menuPlacement,f=t.menuPosition,o=t.menuShouldScrollIntoView,v=t.theme,E=q.useContext(aF)||{},k=E.setPortalPlacement,D=q.useRef(null),R=q.useState(a),j=ju(R,2),N=j[0],$=j[1],ee=q.useState(null),W=ju(ee,2),K=W[0],Y=W[1],ie=v.spacing.controlHeight;return t6(function(){var ue=D.current;if(ue){var de=f==="fixed",M=o&&!de,Te=oce({maxHeight:a,menuEl:ue,minHeight:i,placement:u,shouldScroll:M,isFixedPosition:de,controlHeight:ie});$(Te.maxHeight),Y(Te.placement),k==null||k(Te.placement)}},[a,u,f,o,i,k,ie]),n({ref:D,placerProps:ar(ar({},t),{},{placement:K||oF(u),maxHeight:N})})},cce=function(t){var n=t.children,i=t.innerRef,a=t.innerProps;return ur("div",_e({},mo(t,"menu",{menu:!0}),{ref:i},a),n)},uce=cce,dce=function(t,n){var i=t.maxHeight,a=t.theme.spacing.baseUnit;return ar({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:a,paddingTop:a})},hce=function(t){var n=t.children,i=t.innerProps,a=t.innerRef,u=t.isMulti;return ur("div",_e({},mo(t,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:a},i),n)},sF=function(t,n){var i=t.theme,a=i.spacing.baseUnit,u=i.colors;return ar({textAlign:"center"},n?{}:{color:u.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},pce=sF,fce=sF,mce=function(t){var n=t.children,i=n===void 0?"No options":n,a=t.innerProps,u=Qu(t,rce);return ur("div",_e({},mo(ar(ar({},u),{},{children:i,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),i)},gce=function(t){var n=t.children,i=n===void 0?"Loading...":n,a=t.innerProps,u=Qu(t,ice);return ur("div",_e({},mo(ar(ar({},u),{},{children:i,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),i)},_ce=function(t){var n=t.rect,i=t.offset,a=t.position;return{left:n.left,position:a,top:i,width:n.width,zIndex:1}},yce=function(t){var n=t.appendTo,i=t.children,a=t.controlElement,u=t.innerProps,f=t.menuPlacement,o=t.menuPosition,v=q.useRef(null),E=q.useRef(null),k=q.useState(oF(f)),D=ju(k,2),R=D[0],j=D[1],N=q.useMemo(function(){return{setPortalPlacement:j}},[]),$=q.useState(null),ee=ju($,2),W=ee[0],K=ee[1],Y=q.useCallback(function(){if(a){var M=Kle(a),Te=o==="fixed"?0:window.pageYOffset,fe=M[R]+Te;(fe!==(W==null?void 0:W.offset)||M.left!==(W==null?void 0:W.rect.left)||M.width!==(W==null?void 0:W.rect.width))&&K({offset:fe,rect:M})}},[a,o,R,W==null?void 0:W.offset,W==null?void 0:W.rect.left,W==null?void 0:W.rect.width]);t6(function(){Y()},[Y]);var ie=q.useCallback(function(){typeof E.current=="function"&&(E.current(),E.current=null),a&&v.current&&(E.current=Vle(a,v.current,Y,{elementResize:"ResizeObserver"in window}))},[a,Y]);t6(function(){ie()},[ie]);var ue=q.useCallback(function(M){v.current=M,ie()},[ie]);if(!n&&o!=="fixed"||!W)return null;var de=ur("div",_e({ref:ue},mo(ar(ar({},t),{},{offset:W.offset,position:o,rect:W.rect}),"menuPortal",{"menu-portal":!0}),u),i);return ur(aF.Provider,{value:N},n?ih.createPortal(de,n):de)},vce=function(t){var n=t.isDisabled,i=t.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},xce=function(t){var n=t.children,i=t.innerProps,a=t.isDisabled,u=t.isRtl;return ur("div",_e({},mo(t,"container",{"--is-disabled":a,"--is-rtl":u}),i),n)},bce=function(t,n){var i=t.theme.spacing,a=t.isMulti,u=t.hasValue,f=t.selectProps.controlShouldRenderValue;return ar({alignItems:"center",display:a&&u&&f?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},wce=function(t){var n=t.children,i=t.innerProps,a=t.isMulti,u=t.hasValue;return ur("div",_e({},mo(t,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":u}),i),n)},Ece=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Sce=function(t){var n=t.children,i=t.innerProps;return ur("div",_e({},mo(t,"indicatorsContainer",{indicators:!0}),i),n)},QI,Tce=["size"],Cce=["innerProps","isRtl","size"],kce={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},lF=function(t){var n=t.size,i=Qu(t,Tce);return ur("svg",_e({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:kce},i))},iT=function(t){return ur(lF,_e({size:20},t),ur("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},cF=function(t){return ur(lF,_e({size:20},t),ur("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},uF=function(t,n){var i=t.isFocused,a=t.theme,u=a.spacing.baseUnit,f=a.colors;return ar({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?f.neutral60:f.neutral20,padding:u*2,":hover":{color:i?f.neutral80:f.neutral40}})},Pce=uF,Ice=function(t){var n=t.children,i=t.innerProps;return ur("div",_e({},mo(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||ur(cF,null))},Ace=uF,Mce=function(t){var n=t.children,i=t.innerProps;return ur("div",_e({},mo(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||ur(iT,null))},Dce=function(t,n){var i=t.isDisabled,a=t.theme,u=a.spacing.baseUnit,f=a.colors;return ar({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?f.neutral10:f.neutral20,marginBottom:u*2,marginTop:u*2})},Oce=function(t){var n=t.innerProps;return ur("span",_e({},n,mo(t,"indicatorSeparator",{"indicator-separator":!0})))},Rce=wb(QI||(QI=Dle([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Lce=function(t,n){var i=t.isFocused,a=t.size,u=t.theme,f=u.colors,o=u.spacing.baseUnit;return ar({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?f.neutral60:f.neutral20,padding:o*2})},H4=function(t){var n=t.delay,i=t.offset;return ur("span",{css:S7({animation:"".concat(Rce," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},zce=function(t){var n=t.innerProps,i=t.isRtl,a=t.size,u=a===void 0?4:a,f=Qu(t,Cce);return ur("div",_e({},mo(ar(ar({},f),{},{innerProps:n,isRtl:i,size:u}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),ur(H4,{delay:0,offset:i}),ur(H4,{delay:160,offset:!0}),ur(H4,{delay:320,offset:!i}))},Fce=function(t,n){var i=t.isDisabled,a=t.isFocused,u=t.theme,f=u.colors,o=u.borderRadius,v=u.spacing;return ar({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:v.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?f.neutral5:f.neutral0,borderColor:i?f.neutral10:a?f.primary:f.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(f.primary):void 0,"&:hover":{borderColor:a?f.primary:f.neutral30}})},Nce=function(t){var n=t.children,i=t.isDisabled,a=t.isFocused,u=t.innerRef,f=t.innerProps,o=t.menuIsOpen;return ur("div",_e({ref:u},mo(t,"control",{control:!0,"control--is-disabled":i,"control--is-focused":a,"control--menu-is-open":o}),f),n)},Bce=Nce,jce=["data"],$ce=function(t,n){var i=t.theme.spacing;return n?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},Uce=function(t){var n=t.children,i=t.cx,a=t.getStyles,u=t.getClassNames,f=t.Heading,o=t.headingProps,v=t.innerProps,E=t.label,k=t.theme,D=t.selectProps;return ur("div",_e({},mo(t,"group",{group:!0}),v),ur(f,_e({},o,{selectProps:D,theme:k,getStyles:a,getClassNames:u,cx:i}),E),ur("div",null,n))},Vce=function(t,n){var i=t.theme,a=i.colors,u=i.spacing;return ar({label:"group",cursor:"default",display:"block"},n?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},Wce=function(t){var n=nF(t);n.data;var i=Qu(n,jce);return ur("div",_e({},mo(t,"groupHeading",{"group-heading":!0}),i))},Hce=Uce,qce=["innerRef","isDisabled","isHidden","inputClassName"],Gce=function(t,n){var i=t.isDisabled,a=t.value,u=t.theme,f=u.spacing,o=u.colors;return ar(ar({visibility:i?"hidden":"visible",transform:a?"translateZ(0)":""},Zce),n?{}:{margin:f.baseUnit/2,paddingBottom:f.baseUnit/2,paddingTop:f.baseUnit/2,color:o.neutral80})},dF={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Zce={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":ar({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},dF)},Xce=function(t){return ar({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},dF)},Kce=function(t){var n=t.cx,i=t.value,a=nF(t),u=a.innerRef,f=a.isDisabled,o=a.isHidden,v=a.inputClassName,E=Qu(a,qce);return ur("div",_e({},mo(t,"input",{"input-container":!0}),{"data-value":i||""}),ur("input",_e({className:n({input:!0},v),ref:u,style:Xce(o),disabled:f},E)))},Yce=Kce,Jce=function(t,n){var i=t.theme,a=i.spacing,u=i.borderRadius,f=i.colors;return ar({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:f.neutral10,borderRadius:u/2,margin:a.baseUnit/2})},Qce=function(t,n){var i=t.theme,a=i.borderRadius,u=i.colors,f=t.cropWithEllipsis;return ar({overflow:"hidden",textOverflow:f||f===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:a/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},eue=function(t,n){var i=t.theme,a=i.spacing,u=i.borderRadius,f=i.colors,o=t.isFocused;return ar({alignItems:"center",display:"flex"},n?{}:{borderRadius:u/2,backgroundColor:o?f.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:f.dangerLight,color:f.danger}})},hF=function(t){var n=t.children,i=t.innerProps;return ur("div",i,n)},tue=hF,nue=hF;function rue(e){var t=e.children,n=e.innerProps;return ur("div",_e({role:"button"},n),t||ur(iT,{size:14}))}var iue=function(t){var n=t.children,i=t.components,a=t.data,u=t.innerProps,f=t.isDisabled,o=t.removeProps,v=t.selectProps,E=i.Container,k=i.Label,D=i.Remove;return ur(E,{data:a,innerProps:ar(ar({},mo(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":f})),u),selectProps:v},ur(k,{data:a,innerProps:ar({},mo(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:v},n),ur(D,{data:a,innerProps:ar(ar({},mo(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},o),selectProps:v}))},oue=iue,aue=function(t,n){var i=t.isDisabled,a=t.isFocused,u=t.isSelected,f=t.theme,o=f.spacing,v=f.colors;return ar({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:u?v.primary:a?v.primary25:"transparent",color:i?v.neutral20:u?v.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:u?v.primary:v.primary50}})},sue=function(t){var n=t.children,i=t.isDisabled,a=t.isFocused,u=t.isSelected,f=t.innerRef,o=t.innerProps;return ur("div",_e({},mo(t,"option",{option:!0,"option--is-disabled":i,"option--is-focused":a,"option--is-selected":u}),{ref:f,"aria-disabled":i},o),n)},lue=sue,cue=function(t,n){var i=t.theme,a=i.spacing,u=i.colors;return ar({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:u.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},uue=function(t){var n=t.children,i=t.innerProps;return ur("div",_e({},mo(t,"placeholder",{placeholder:!0}),i),n)},due=uue,hue=function(t,n){var i=t.isDisabled,a=t.theme,u=a.spacing,f=a.colors;return ar({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?f.neutral40:f.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},pue=function(t){var n=t.children,i=t.isDisabled,a=t.innerProps;return ur("div",_e({},mo(t,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),a),n)},fue=pue,mue={ClearIndicator:Mce,Control:Bce,DropdownIndicator:Ice,DownChevron:cF,CrossIcon:iT,Group:Hce,GroupHeading:Wce,IndicatorsContainer:Sce,IndicatorSeparator:Oce,Input:Yce,LoadingIndicator:zce,Menu:uce,MenuList:hce,MenuPortal:yce,LoadingMessage:gce,NoOptionsMessage:mce,MultiValue:oue,MultiValueContainer:tue,MultiValueLabel:nue,MultiValueRemove:rue,Option:lue,Placeholder:due,SelectContainer:xce,SingleValue:fue,ValueContainer:wce},gue=function(t){return ar(ar({},mue),t.components)},eA=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function _ue(e,t){return!!(e===t||eA(e)&&eA(t))}function yue(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!_ue(e[n],t[n]))return!1;return!0}function vue(e,t){t===void 0&&(t=yue);var n=null;function i(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;var f=e.apply(this,a);return n={lastResult:f,lastArgs:a,lastThis:this},f}return i.clear=function(){n=null},i}var xue={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},bue=function(t){return ur("span",_e({css:xue},t))},tA=bue,wue={guidance:function(t){var n=t.isSearchable,i=t.isMulti,a=t.isDisabled,u=t.tabSelectsValue,f=t.context;switch(f){case"menu":return"Use Up and Down to choose options".concat(a?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(t["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var n=t.action,i=t.label,a=i===void 0?"":i,u=t.labels,f=t.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return f?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(t){var n=t.context,i=t.focused,a=t.options,u=t.label,f=u===void 0?"":u,o=t.selectValue,v=t.isDisabled,E=t.isSelected,k=function(N,$){return N&&N.length?"".concat(N.indexOf($)+1," of ").concat(N.length):""};if(n==="value"&&o)return"value ".concat(f," focused, ").concat(k(o,i),".");if(n==="menu"){var D=v?" disabled":"",R="".concat(E?"selected":"focused").concat(D);return"option ".concat(f," ").concat(R,", ").concat(k(a,i),".")}return""},onFilter:function(t){var n=t.inputValue,i=t.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},Eue=function(t){var n=t.ariaSelection,i=t.focusedOption,a=t.focusedValue,u=t.focusableOptions,f=t.isFocused,o=t.selectValue,v=t.selectProps,E=t.id,k=v.ariaLiveMessages,D=v.getOptionLabel,R=v.inputValue,j=v.isMulti,N=v.isOptionDisabled,$=v.isSearchable,ee=v.menuIsOpen,W=v.options,K=v.screenReaderStatus,Y=v.tabSelectsValue,ie=v["aria-label"],ue=v["aria-live"],de=q.useMemo(function(){return ar(ar({},wue),k||{})},[k]),M=q.useMemo(function(){var ze="";if(n&&de.onChange){var Be=n.option,tt=n.options,Ke=n.removedValue,Le=n.removedValues,Je=n.value,it=function(on){return Array.isArray(on)?null:on},kt=Ke||Be||it(Je),yt=kt?D(kt):"",wt=tt||Le||void 0,jt=wt?wt.map(D):[],Qt=ar({isDisabled:kt&&N(kt,o),label:yt,labels:jt},n);ze=de.onChange(Qt)}return ze},[n,de,N,o,D]),Te=q.useMemo(function(){var ze="",Be=i||a,tt=!!(i&&o&&o.includes(i));if(Be&&de.onFocus){var Ke={focused:Be,label:D(Be),isDisabled:N(Be,o),isSelected:tt,options:u,context:Be===i?"menu":"value",selectValue:o};ze=de.onFocus(Ke)}return ze},[i,a,D,N,de,u,o]),fe=q.useMemo(function(){var ze="";if(ee&&W.length&&de.onFilter){var Be=K({count:u.length});ze=de.onFilter({inputValue:R,resultsMessage:Be})}return ze},[u,R,ee,de,W,K]),Oe=q.useMemo(function(){var ze="";if(de.guidance){var Be=a?"value":ee?"menu":"input";ze=de.guidance({"aria-label":ie,context:Be,isDisabled:i&&N(i,o),isMulti:j,isSearchable:$,tabSelectsValue:Y})}return ze},[ie,i,a,j,N,$,ee,de,o,Y]),rt="".concat(Te," ").concat(fe," ").concat(Oe),at=ur(q.Fragment,null,ur("span",{id:"aria-selection"},M),ur("span",{id:"aria-context"},rt)),qe=(n==null?void 0:n.action)==="initial-input-focus";return ur(q.Fragment,null,ur(tA,{id:E},qe&&at),ur(tA,{"aria-live":ue,"aria-atomic":"false","aria-relevant":"additions text"},f&&!qe&&at))},Sue=Eue,n6=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Tue=new RegExp("["+n6.map(function(e){return e.letters}).join("")+"]","g"),pF={};for(var q4=0;q4<n6.length;q4++)for(var G4=n6[q4],Z4=0;Z4<G4.letters.length;Z4++)pF[G4.letters[Z4]]=G4.base;var fF=function(t){return t.replace(Tue,function(n){return pF[n]})},Cue=vue(fF),nA=function(t){return t.replace(/^\s+|\s+$/g,"")},kue=function(t){return"".concat(t.label," ").concat(t.value)},Pue=function(t){return function(n,i){if(n.data.__isNew__)return!0;var a=ar({ignoreCase:!0,ignoreAccents:!0,stringify:kue,trim:!0,matchFrom:"any"},t),u=a.ignoreCase,f=a.ignoreAccents,o=a.stringify,v=a.trim,E=a.matchFrom,k=v?nA(i):i,D=v?nA(o(n)):o(n);return u&&(k=k.toLowerCase(),D=D.toLowerCase()),f&&(k=Cue(k),D=fF(D)),E==="start"?D.substr(0,k.length)===k:D.indexOf(k)>-1}},Iue=["innerRef"];function Aue(e){var t=e.innerRef,n=Qu(e,Iue),i=nce(n,"onExited","in","enter","exit","appear");return ur("input",_e({ref:t},i,{css:S7({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Mue=function(t){t.preventDefault(),t.stopPropagation()};function Due(e){var t=e.isEnabled,n=e.onBottomArrive,i=e.onBottomLeave,a=e.onTopArrive,u=e.onTopLeave,f=q.useRef(!1),o=q.useRef(!1),v=q.useRef(0),E=q.useRef(null),k=q.useCallback(function(ee,W){if(E.current!==null){var K=E.current,Y=K.scrollTop,ie=K.scrollHeight,ue=K.clientHeight,de=E.current,M=W>0,Te=ie-ue-Y,fe=!1;Te>W&&f.current&&(i&&i(ee),f.current=!1),M&&o.current&&(u&&u(ee),o.current=!1),M&&W>Te?(n&&!f.current&&n(ee),de.scrollTop=ie,fe=!0,f.current=!0):!M&&-W>Y&&(a&&!o.current&&a(ee),de.scrollTop=0,fe=!0,o.current=!0),fe&&Mue(ee)}},[n,i,a,u]),D=q.useCallback(function(ee){k(ee,ee.deltaY)},[k]),R=q.useCallback(function(ee){v.current=ee.changedTouches[0].clientY},[]),j=q.useCallback(function(ee){var W=v.current-ee.changedTouches[0].clientY;k(ee,W)},[k]),N=q.useCallback(function(ee){if(ee){var W=Qle?{passive:!1}:!1;ee.addEventListener("wheel",D,W),ee.addEventListener("touchstart",R,W),ee.addEventListener("touchmove",j,W)}},[j,R,D]),$=q.useCallback(function(ee){ee&&(ee.removeEventListener("wheel",D,!1),ee.removeEventListener("touchstart",R,!1),ee.removeEventListener("touchmove",j,!1))},[j,R,D]);return q.useEffect(function(){if(t){var ee=E.current;return N(ee),function(){$(ee)}}},[t,N,$]),function(ee){E.current=ee}}var rA=["boxSizing","height","overflow","paddingRight","position"],iA={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function oA(e){e.preventDefault()}function aA(e){e.stopPropagation()}function sA(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;e===0?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function lA(){return"ontouchstart"in window||navigator.maxTouchPoints}var cA=!!(typeof window<"u"&&window.document&&window.document.createElement),Rg=0,zf={capture:!1,passive:!1};function Oue(e){var t=e.isEnabled,n=e.accountForScrollbars,i=n===void 0?!0:n,a=q.useRef({}),u=q.useRef(null),f=q.useCallback(function(v){if(cA){var E=document.body,k=E&&E.style;if(i&&rA.forEach(function(N){var $=k&&k[N];a.current[N]=$}),i&&Rg<1){var D=parseInt(a.current.paddingRight,10)||0,R=document.body?document.body.clientWidth:0,j=window.innerWidth-R+D||0;Object.keys(iA).forEach(function(N){var $=iA[N];k&&(k[N]=$)}),k&&(k.paddingRight="".concat(j,"px"))}E&&lA()&&(E.addEventListener("touchmove",oA,zf),v&&(v.addEventListener("touchstart",sA,zf),v.addEventListener("touchmove",aA,zf))),Rg+=1}},[i]),o=q.useCallback(function(v){if(cA){var E=document.body,k=E&&E.style;Rg=Math.max(Rg-1,0),i&&Rg<1&&rA.forEach(function(D){var R=a.current[D];k&&(k[D]=R)}),E&&lA()&&(E.removeEventListener("touchmove",oA,zf),v&&(v.removeEventListener("touchstart",sA,zf),v.removeEventListener("touchmove",aA,zf)))}},[i]);return q.useEffect(function(){if(t){var v=u.current;return f(v),function(){o(v)}}},[t,f,o]),function(v){u.current=v}}var Rue=function(){return document.activeElement&&document.activeElement.blur()},Lue={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function zue(e){var t=e.children,n=e.lockEnabled,i=e.captureEnabled,a=i===void 0?!0:i,u=e.onBottomArrive,f=e.onBottomLeave,o=e.onTopArrive,v=e.onTopLeave,E=Due({isEnabled:a,onBottomArrive:u,onBottomLeave:f,onTopArrive:o,onTopLeave:v}),k=Oue({isEnabled:n}),D=function(j){E(j),k(j)};return ur(q.Fragment,null,n&&ur("div",{onClick:Rue,css:Lue}),t(D))}var Fue={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Nue=function(t){var n=t.name,i=t.onFocus;return ur("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:Fue,value:"",onChange:function(){}})},Bue=Nue,jue=function(t){return t.label},$ue=function(t){return t.label},Uue=function(t){return t.value},Vue=function(t){return!!t.isDisabled},Wue={clearIndicator:Ace,container:vce,control:Fce,dropdownIndicator:Pce,group:$ce,groupHeading:Vce,indicatorsContainer:Ece,indicatorSeparator:Dce,input:Gce,loadingIndicator:Lce,loadingMessage:fce,menu:sce,menuList:dce,menuPortal:_ce,multiValue:Jce,multiValueLabel:Qce,multiValueRemove:eue,noOptionsMessage:pce,option:aue,placeholder:cue,singleValue:hue,valueContainer:bce},Hue={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},que=4,mF=4,Gue=38,Zue=mF*2,Xue={baseUnit:mF,controlHeight:Gue,menuGutter:Zue},X4={borderRadius:que,colors:Hue,spacing:Xue},Kue={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:JI(),captureMenuScroll:!JI(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Pue(),formatGroupLabel:jue,getOptionLabel:$ue,getOptionValue:Uue,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Vue,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Yle(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var n=t.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function uA(e,t,n,i){var a=vF(e,t,n),u=xF(e,t,n),f=yF(e,t),o=cx(e,t);return{type:"option",data:t,isDisabled:a,isSelected:u,label:f,value:o,index:i}}function gF(e,t){return e.options.map(function(n,i){if("options"in n){var a=n.options.map(function(f,o){return uA(e,f,t,o)}).filter(function(f){return dA(e,f)});return a.length>0?{type:"group",data:n,options:a,index:i}:void 0}var u=uA(e,n,t,i);return dA(e,u)?u:void 0}).filter(ece)}function _F(e){return e.reduce(function(t,n){return n.type==="group"?t.push.apply(t,Xz(n.options.map(function(i){return i.data}))):t.push(n.data),t},[])}function Yue(e,t){return _F(gF(e,t))}function dA(e,t){var n=e.inputValue,i=n===void 0?"":n,a=t.data,u=t.isSelected,f=t.label,o=t.value;return(!wF(e)||!u)&&bF(e,{label:f,value:o,data:a},i)}function Jue(e,t){var n=e.focusedValue,i=e.selectValue,a=i.indexOf(n);if(a>-1){var u=t.indexOf(n);if(u>-1)return n;if(a<t.length)return t[a]}return null}function Que(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}var yF=function(t,n){return t.getOptionLabel(n)},cx=function(t,n){return t.getOptionValue(n)};function vF(e,t,n){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,n):!1}function xF(e,t,n){if(n.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,n);var i=cx(e,t);return n.some(function(a){return cx(e,a)===i})}function bF(e,t,n){return e.filterOption?e.filterOption(t,n):!0}var wF=function(t){var n=t.hideSelectedOptions,i=t.isMulti;return n===void 0?i:n},ede=1,EF=function(e){Tle(n,e);var t=Ple(n);function n(i){var a;if(Ele(this,n),a=t.call(this,i),a.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.instancePrefix="",a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(o){a.controlRef=o},a.focusedOptionRef=null,a.getFocusedOptionRef=function(o){a.focusedOptionRef=o},a.menuListRef=null,a.getMenuListRef=function(o){a.menuListRef=o},a.inputRef=null,a.getInputRef=function(o){a.inputRef=o},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(o,v){var E=a.props,k=E.onChange,D=E.name;v.name=D,a.ariaOnChange(o,v),k(o,v)},a.setValue=function(o,v,E){var k=a.props,D=k.closeMenuOnSelect,R=k.isMulti,j=k.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:j}),D&&(a.setState({inputIsHiddenAfterUpdate:!R}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(o,{action:v,option:E})},a.selectOption=function(o){var v=a.props,E=v.blurInputOnSelect,k=v.isMulti,D=v.name,R=a.state.selectValue,j=k&&a.isOptionSelected(o,R),N=a.isOptionDisabled(o,R);if(j){var $=a.getOptionValue(o);a.setValue(R.filter(function(ee){return a.getOptionValue(ee)!==$}),"deselect-option",o)}else if(!N)k?a.setValue([].concat(Xz(R),[o]),"select-option",o):a.setValue(o,"select-option");else{a.ariaOnChange(o,{action:"select-option",option:o,name:D});return}E&&a.blurInput()},a.removeValue=function(o){var v=a.props.isMulti,E=a.state.selectValue,k=a.getOptionValue(o),D=E.filter(function(j){return a.getOptionValue(j)!==k}),R=Dv(v,D,D[0]||null);a.onChange(R,{action:"remove-value",removedValue:o}),a.focusInput()},a.clearValue=function(){var o=a.state.selectValue;a.onChange(Dv(a.props.isMulti,[],null),{action:"clear",removedValues:o})},a.popValue=function(){var o=a.props.isMulti,v=a.state.selectValue,E=v[v.length-1],k=v.slice(0,v.length-1),D=Dv(o,k,k[0]||null);a.onChange(D,{action:"pop-value",removedValue:E})},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var o=arguments.length,v=new Array(o),E=0;E<o;E++)v[E]=arguments[E];return qle.apply(void 0,[a.props.classNamePrefix].concat(v))},a.getOptionLabel=function(o){return yF(a.props,o)},a.getOptionValue=function(o){return cx(a.props,o)},a.getStyles=function(o,v){var E=a.props.unstyled,k=Wue[o](v,E);k.boxSizing="border-box";var D=a.props.styles[o];return D?D(k,v):k},a.getClassNames=function(o,v){var E,k;return(E=(k=a.props.classNames)[o])===null||E===void 0?void 0:E.call(k,v)},a.getElementId=function(o){return"".concat(a.instancePrefix,"-").concat(o)},a.getComponents=function(){return gue(a.props)},a.buildCategorizedOptions=function(){return gF(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return _F(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(o,v){a.setState({ariaSelection:ar({value:o},v)})},a.onMenuMouseDown=function(o){o.button===0&&(o.stopPropagation(),o.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(o){a.blockOptionHover=!1},a.onControlMouseDown=function(o){if(!o.defaultPrevented){var v=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&a.onMenuClose():v&&a.openMenu("first"):(v&&(a.openAfterFocus=!0),a.focusInput()),o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&o.preventDefault()}},a.onDropdownIndicatorMouseDown=function(o){if(!(o&&o.type==="mousedown"&&o.button!==0)&&!a.props.isDisabled){var v=a.props,E=v.isMulti,k=v.menuIsOpen;a.focusInput(),k?(a.setState({inputIsHiddenAfterUpdate:!E}),a.onMenuClose()):a.openMenu("first"),o.preventDefault()}},a.onClearIndicatorMouseDown=function(o){o&&o.type==="mousedown"&&o.button!==0||(a.clearValue(),o.preventDefault(),a.openAfterFocus=!1,o.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(o){typeof a.props.closeMenuOnScroll=="boolean"?o.target instanceof HTMLElement&&Yb(o.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(o)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(o){var v=o.touches,E=v&&v.item(0);E&&(a.initialTouchX=E.clientX,a.initialTouchY=E.clientY,a.userIsDragging=!1)},a.onTouchMove=function(o){var v=o.touches,E=v&&v.item(0);if(E){var k=Math.abs(E.clientX-a.initialTouchX),D=Math.abs(E.clientY-a.initialTouchY),R=5;a.userIsDragging=k>R||D>R}},a.onTouchEnd=function(o){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(o.target)&&a.menuListRef&&!a.menuListRef.contains(o.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(o){a.userIsDragging||a.onControlMouseDown(o)},a.onClearIndicatorTouchEnd=function(o){a.userIsDragging||a.onClearIndicatorMouseDown(o)},a.onDropdownIndicatorTouchEnd=function(o){a.userIsDragging||a.onDropdownIndicatorMouseDown(o)},a.handleInputChange=function(o){var v=a.props.inputValue,E=o.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(E,{action:"input-change",prevInputValue:v}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(o){a.props.onFocus&&a.props.onFocus(o),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(o){var v=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(o),a.onInputChange("",{action:"input-blur",prevInputValue:v}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(o){a.blockOptionHover||a.state.focusedOption===o||a.setState({focusedOption:o})},a.shouldHideSelectedOptions=function(){return wF(a.props)},a.onValueInputFocus=function(o){o.preventDefault(),o.stopPropagation(),a.focus()},a.onKeyDown=function(o){var v=a.props,E=v.isMulti,k=v.backspaceRemovesValue,D=v.escapeClearsValue,R=v.inputValue,j=v.isClearable,N=v.isDisabled,$=v.menuIsOpen,ee=v.onKeyDown,W=v.tabSelectsValue,K=v.openMenuOnFocus,Y=a.state,ie=Y.focusedOption,ue=Y.focusedValue,de=Y.selectValue;if(!N&&!(typeof ee=="function"&&(ee(o),o.defaultPrevented))){switch(a.blockOptionHover=!0,o.key){case"ArrowLeft":if(!E||R)return;a.focusValue("previous");break;case"ArrowRight":if(!E||R)return;a.focusValue("next");break;case"Delete":case"Backspace":if(R)return;if(ue)a.removeValue(ue);else{if(!k)return;E?a.popValue():j&&a.clearValue()}break;case"Tab":if(a.isComposing||o.shiftKey||!$||!W||!ie||K&&a.isOptionSelected(ie,de))return;a.selectOption(ie);break;case"Enter":if(o.keyCode===229)break;if($){if(!ie||a.isComposing)return;a.selectOption(ie);break}return;case"Escape":$?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:R}),a.onMenuClose()):j&&D&&a.clearValue();break;case" ":if(R)return;if(!$){a.openMenu("first");break}if(!ie)return;a.selectOption(ie);break;case"ArrowUp":$?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":$?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!$)return;a.focusOption("pageup");break;case"PageDown":if(!$)return;a.focusOption("pagedown");break;case"Home":if(!$)return;a.focusOption("first");break;case"End":if(!$)return;a.focusOption("last");break;default:return}o.preventDefault()}},a.instancePrefix="react-select-"+(a.props.instanceId||++ede),a.state.selectValue=KI(i.value),i.menuIsOpen&&a.state.selectValue.length){var u=a.buildFocusableOptions(),f=u.indexOf(a.state.selectValue[0]);a.state.focusedOption=u[f]}return a}return Sle(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&YI(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(a){var u=this.props,f=u.isDisabled,o=u.menuIsOpen,v=this.state.isFocused;(v&&!f&&a.isDisabled||v&&o&&!a.menuIsOpen)&&this.focusInput(),v&&f&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!v&&!f&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(YI(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,u){this.props.onInputChange(a,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var u=this,f=this.state,o=f.selectValue,v=f.isFocused,E=this.buildFocusableOptions(),k=a==="first"?0:E.length-1;if(!this.props.isMulti){var D=E.indexOf(o[0]);D>-1&&(k=D)}this.scrollToFocusedOptionOnUpdate=!(v&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:E[k]},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(a){var u=this.state,f=u.selectValue,o=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var v=f.indexOf(o);o||(v=-1);var E=f.length-1,k=-1;if(f.length){switch(a){case"previous":v===0?k=0:v===-1?k=E:k=v-1;break;case"next":v>-1&&v<E&&(k=v+1);break}this.setState({inputIsHidden:k!==-1,focusedValue:f[k]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,f=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var v=0,E=o.indexOf(f);f||(E=-1),a==="up"?v=E>0?E-1:o.length-1:a==="down"?v=(E+1)%o.length:a==="pageup"?(v=E-u,v<0&&(v=0)):a==="pagedown"?(v=E+u,v>o.length-1&&(v=o.length-1)):a==="last"&&(v=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[v],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(X4):ar(ar({},X4),this.props.theme):X4}},{key:"getCommonProps",value:function(){var a=this.clearValue,u=this.cx,f=this.getStyles,o=this.getClassNames,v=this.getValue,E=this.selectOption,k=this.setValue,D=this.props,R=D.isMulti,j=D.isRtl,N=D.options,$=this.hasValue();return{clearValue:a,cx:u,getStyles:f,getClassNames:o,getValue:v,hasValue:$,isMulti:R,isRtl:j,options:N,selectOption:E,selectProps:D,setValue:k,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,u=a.isClearable,f=a.isMulti;return u===void 0?f:u}},{key:"isOptionDisabled",value:function(a,u){return vF(this.props,a,u)}},{key:"isOptionSelected",value:function(a,u){return xF(this.props,a,u)}},{key:"filterOption",value:function(a,u){return bF(this.props,a,u)}},{key:"formatOptionLabel",value:function(a,u){if(typeof this.props.formatOptionLabel=="function"){var f=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(a,{context:u,inputValue:f,selectValue:o})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var a=this.props,u=a.isDisabled,f=a.isSearchable,o=a.inputId,v=a.inputValue,E=a.tabIndex,k=a.form,D=a.menuIsOpen,R=a.required,j=this.getComponents(),N=j.Input,$=this.state,ee=$.inputIsHidden,W=$.ariaSelection,K=this.commonProps,Y=o||this.getElementId("input"),ie=ar(ar(ar({"aria-autocomplete":"list","aria-expanded":D,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":R,role:"combobox"},D&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!f&&{"aria-readonly":!0}),this.hasValue()?(W==null?void 0:W.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return f?q.createElement(N,_e({},K,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Y,innerRef:this.getInputRef,isDisabled:u,isHidden:ee,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:E,form:k,type:"text",value:v},ie)):q.createElement(Aue,_e({id:Y,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:sx,onFocus:this.onInputFocus,disabled:u,tabIndex:E,inputMode:"none",form:k,value:""},ie))}},{key:"renderPlaceholderOrValue",value:function(){var a=this,u=this.getComponents(),f=u.MultiValue,o=u.MultiValueContainer,v=u.MultiValueLabel,E=u.MultiValueRemove,k=u.SingleValue,D=u.Placeholder,R=this.commonProps,j=this.props,N=j.controlShouldRenderValue,$=j.isDisabled,ee=j.isMulti,W=j.inputValue,K=j.placeholder,Y=this.state,ie=Y.selectValue,ue=Y.focusedValue,de=Y.isFocused;if(!this.hasValue()||!N)return W?null:q.createElement(D,_e({},R,{key:"placeholder",isDisabled:$,isFocused:de,innerProps:{id:this.getElementId("placeholder")}}),K);if(ee)return ie.map(function(Te,fe){var Oe=Te===ue,rt="".concat(a.getOptionLabel(Te),"-").concat(a.getOptionValue(Te));return q.createElement(f,_e({},R,{components:{Container:o,Label:v,Remove:E},isFocused:Oe,isDisabled:$,key:rt,index:fe,removeProps:{onClick:function(){return a.removeValue(Te)},onTouchEnd:function(){return a.removeValue(Te)},onMouseDown:function(qe){qe.preventDefault()}},data:Te}),a.formatOptionLabel(Te,"value"))});if(W)return null;var M=ie[0];return q.createElement(k,_e({},R,{data:M,isDisabled:$}),this.formatOptionLabel(M,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),u=a.ClearIndicator,f=this.commonProps,o=this.props,v=o.isDisabled,E=o.isLoading,k=this.state.isFocused;if(!this.isClearable()||!u||v||!this.hasValue()||E)return null;var D={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return q.createElement(u,_e({},f,{innerProps:D,isFocused:k}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),u=a.LoadingIndicator,f=this.commonProps,o=this.props,v=o.isDisabled,E=o.isLoading,k=this.state.isFocused;if(!u||!E)return null;var D={"aria-hidden":"true"};return q.createElement(u,_e({},f,{innerProps:D,isDisabled:v,isFocused:k}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),u=a.DropdownIndicator,f=a.IndicatorSeparator;if(!u||!f)return null;var o=this.commonProps,v=this.props.isDisabled,E=this.state.isFocused;return q.createElement(f,_e({},o,{isDisabled:v,isFocused:E}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),u=a.DropdownIndicator;if(!u)return null;var f=this.commonProps,o=this.props.isDisabled,v=this.state.isFocused,E={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return q.createElement(u,_e({},f,{innerProps:E,isDisabled:o,isFocused:v}))}},{key:"renderMenu",value:function(){var a=this,u=this.getComponents(),f=u.Group,o=u.GroupHeading,v=u.Menu,E=u.MenuList,k=u.MenuPortal,D=u.LoadingMessage,R=u.NoOptionsMessage,j=u.Option,N=this.commonProps,$=this.state.focusedOption,ee=this.props,W=ee.captureMenuScroll,K=ee.inputValue,Y=ee.isLoading,ie=ee.loadingMessage,ue=ee.minMenuHeight,de=ee.maxMenuHeight,M=ee.menuIsOpen,Te=ee.menuPlacement,fe=ee.menuPosition,Oe=ee.menuPortalTarget,rt=ee.menuShouldBlockScroll,at=ee.menuShouldScrollIntoView,qe=ee.noOptionsMessage,ze=ee.onMenuScrollToTop,Be=ee.onMenuScrollToBottom;if(!M)return null;var tt=function(wt,jt){var Qt=wt.type,en=wt.data,on=wt.isDisabled,Sn=wt.isSelected,Jt=wt.label,yn=wt.value,Ft=$===en,nn=on?void 0:function(){return a.onOptionHover(en)},bn=on?void 0:function(){return a.selectOption(en)},qt="".concat(a.getElementId("option"),"-").concat(jt),It={id:qt,onClick:bn,onMouseMove:nn,onMouseOver:nn,tabIndex:-1};return q.createElement(j,_e({},N,{innerProps:It,data:en,isDisabled:on,isSelected:Sn,key:qt,label:Jt,type:Qt,value:yn,isFocused:Ft,innerRef:Ft?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(wt.data,"menu"))},Ke;if(this.hasOptions())Ke=this.getCategorizedOptions().map(function(yt){if(yt.type==="group"){var wt=yt.data,jt=yt.options,Qt=yt.index,en="".concat(a.getElementId("group"),"-").concat(Qt),on="".concat(en,"-heading");return q.createElement(f,_e({},N,{key:en,data:wt,options:jt,Heading:o,headingProps:{id:on,data:yt.data},label:a.formatGroupLabel(yt.data)}),yt.options.map(function(Sn){return tt(Sn,"".concat(Qt,"-").concat(Sn.index))}))}else if(yt.type==="option")return tt(yt,"".concat(yt.index))});else if(Y){var Le=ie({inputValue:K});if(Le===null)return null;Ke=q.createElement(D,N,Le)}else{var Je=qe({inputValue:K});if(Je===null)return null;Ke=q.createElement(R,N,Je)}var it={minMenuHeight:ue,maxMenuHeight:de,menuPlacement:Te,menuPosition:fe,menuShouldScrollIntoView:at},kt=q.createElement(lce,_e({},N,it),function(yt){var wt=yt.ref,jt=yt.placerProps,Qt=jt.placement,en=jt.maxHeight;return q.createElement(v,_e({},N,it,{innerRef:wt,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove,id:a.getElementId("listbox")},isLoading:Y,placement:Qt}),q.createElement(zue,{captureEnabled:W,onTopArrive:ze,onBottomArrive:Be,lockEnabled:rt},function(on){return q.createElement(E,_e({},N,{innerRef:function(Jt){a.getMenuListRef(Jt),on(Jt)},isLoading:Y,maxHeight:en,focusedOption:$}),Ke)}))});return Oe||fe==="fixed"?q.createElement(k,_e({},N,{appendTo:Oe,controlElement:this.controlRef,menuPlacement:Te,menuPosition:fe}),kt):kt}},{key:"renderFormField",value:function(){var a=this,u=this.props,f=u.delimiter,o=u.isDisabled,v=u.isMulti,E=u.name,k=u.required,D=this.state.selectValue;if(k&&!this.hasValue()&&!o)return q.createElement(Bue,{name:E,onFocus:this.onValueInputFocus});if(!(!E||o))if(v)if(f){var R=D.map(function($){return a.getOptionValue($)}).join(f);return q.createElement("input",{name:E,type:"hidden",value:R})}else{var j=D.length>0?D.map(function($,ee){return q.createElement("input",{key:"i-".concat(ee),name:E,type:"hidden",value:a.getOptionValue($)})}):q.createElement("input",{name:E,type:"hidden",value:""});return q.createElement("div",null,j)}else{var N=D[0]?this.getOptionValue(D[0]):"";return q.createElement("input",{name:E,type:"hidden",value:N})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,u=this.state,f=u.ariaSelection,o=u.focusedOption,v=u.focusedValue,E=u.isFocused,k=u.selectValue,D=this.getFocusableOptions();return q.createElement(Sue,_e({},a,{id:this.getElementId("live-region"),ariaSelection:f,focusedOption:o,focusedValue:v,isFocused:E,selectValue:k,focusableOptions:D}))}},{key:"render",value:function(){var a=this.getComponents(),u=a.Control,f=a.IndicatorsContainer,o=a.SelectContainer,v=a.ValueContainer,E=this.props,k=E.className,D=E.id,R=E.isDisabled,j=E.menuIsOpen,N=this.state.isFocused,$=this.commonProps=this.getCommonProps();return q.createElement(o,_e({},$,{className:k,innerProps:{id:D,onKeyDown:this.onKeyDown},isDisabled:R,isFocused:N}),this.renderLiveRegion(),q.createElement(u,_e({},$,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:R,isFocused:N,menuIsOpen:j}),q.createElement(v,_e({},$,{isDisabled:R}),this.renderPlaceholderOrValue(),this.renderInput()),q.createElement(f,_e({},$,{isDisabled:R}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,u){var f=u.prevProps,o=u.clearFocusValueOnUpdate,v=u.inputIsHiddenAfterUpdate,E=u.ariaSelection,k=u.isFocused,D=u.prevWasFocused,R=a.options,j=a.value,N=a.menuIsOpen,$=a.inputValue,ee=a.isMulti,W=KI(j),K={};if(f&&(j!==f.value||R!==f.options||N!==f.menuIsOpen||$!==f.inputValue)){var Y=N?Yue(a,W):[],ie=o?Jue(u,W):null,ue=Que(u,Y);K={selectValue:W,focusedOption:ue,focusedValue:ie,clearFocusValueOnUpdate:!1}}var de=v!=null&&a!==f?{inputIsHidden:v,inputIsHiddenAfterUpdate:void 0}:{},M=E,Te=k&&D;return k&&!Te&&(M={value:Dv(ee,W,W[0]||null),options:W,action:"initial-input-focus"},Te=!D),(E==null?void 0:E.action)==="initial-input-focus"&&(M=null),ar(ar(ar({},K),de),{},{prevProps:a,ariaSelection:M,prevWasFocused:Te})}}]),n}(q.Component);EF.defaultProps=Kue;var tde=q.forwardRef(function(e,t){var n=wle(e);return q.createElement(EF,_e({ref:t},n))}),nde=tde;const rde=[{value:"library_locations",label:"Libraries"},{value:"worship_locations",label:"Places of Worship"},{value:"community_locations",label:"Community Centres"},{value:"museum_art_locations",label:"Museums & Art Galleries"},{value:"walking_node_locations",label:"Other Walking Nodes"},{value:"park_node_locations",label:"Other Park Nodes"}],ide=()=>{const[e,t]=q.useState([]),n=u=>{t(u)},i=e.map(u=>u.value),a=async u=>{u.preventDefault(),console.log("Selected Values:",i),console.log("Selected Options:",e),I_.post("/users/preferences",{selectedOptions:i}).then(f=>{console.log("Data:",f.data)}).catch(f=>{f.response?(console.log(f.response),console.log("Status code:",f.response.status),console.log("Error Message",f.message),console.log("Response Data:",f.response.data)):f.request?console.log("network error"):console.log(f)})};return Z.jsxs("div",{className:"preferences-area",children:[Z.jsx("h3",{children:"Select Amble Preferences"}),Z.jsxs("form",{onSubmit:a,children:[Z.jsx(nde,{options:rde,isMulti:"true",value:e,onChange:n}),Z.jsx("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})};var oT={},ode=iu;Object.defineProperty(oT,"__esModule",{value:!0});var SF=oT.default=void 0,ade=ode(ou()),sde=Z,lde=(0,ade.default)((0,sde.jsx)("path",{d:"M13 14v6c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1h-6c-.55 0-1 .45-1 1zm-9 7h6c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1zM3 4v6c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1zm12.95-1.6L11.7 6.64c-.39.39-.39 1.02 0 1.41l4.25 4.25c.39.39 1.02.39 1.41 0l4.25-4.25c.39-.39.39-1.02 0-1.41L17.37 2.4c-.39-.39-1.03-.39-1.42 0z"}),"WidgetsRounded");SF=oT.default=lde;var aT={},cde=iu;Object.defineProperty(aT,"__esModule",{value:!0});var z1=aT.default=void 0,ude=cde(ou()),dde=Z,hde=(0,ude.default)((0,dde.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");z1=aT.default=hde;var sT={},pde=iu;Object.defineProperty(sT,"__esModule",{value:!0});var TF=sT.default=void 0,fde=pde(ou()),mde=Z,gde=(0,fde.default)((0,mde.jsx)("path",{d:"m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zM7.88 8.75c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-2 11c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z"}),"StyleRounded");TF=sT.default=gde;var lT={},_de=iu;Object.defineProperty(lT,"__esModule",{value:!0});var CF=lT.default=void 0,yde=_de(ou()),vde=Z,xde=(0,yde.default)((0,vde.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4z"}),"PersonRounded");CF=lT.default=xde;const bde=jp({palette:{primary:{main:"#004d40"},secondary:{main:"#004d40"}}}),hA=["/static/images/LO1.png"];function kF(){const e=mh(),[t,n]=q.useState(0),i=()=>{e("/interface-two")},a=()=>{e("/landingpage")};return q.useEffect(()=>{const u=setInterval(()=>{n(f=>(f+1)%hA.length)},1e4);return()=>{clearInterval(u)}},[]),Z.jsx(L7,{theme:bde,children:Z.jsxs("div",{className:"menubar2",children:[Z.jsx("div",{className:"logo-wrapper",children:Z.jsx("img",{src:hA[t],className:"Logo-amble",alt:"Logo",onClick:a})}),Z.jsxs("div",{className:"menu-items",children:[Z.jsx("div",{className:"menu-item",onClick:i,children:"Create an amble"}),Z.jsx("div",{className:"menu-item",children:"Resources"}),Z.jsx("div",{className:"menu-item",children:"Login/Register"})]})]})})}var PF={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e){(function(t,n){e.exports=t.document?n(t,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return n(i)}})(typeof window<"u"?window:xn,function(t,n){var i=[],a=Object.getPrototypeOf,u=i.slice,f=i.flat?function(S){return i.flat.call(S)}:function(S){return i.concat.apply([],S)},o=i.push,v=i.indexOf,E={},k=E.toString,D=E.hasOwnProperty,R=D.toString,j=R.call(Object),N={},$=function(I){return typeof I=="function"&&typeof I.nodeType!="number"&&typeof I.item!="function"},ee=function(I){return I!=null&&I===I.window},W=t.document,K={type:!0,src:!0,nonce:!0,noModule:!0};function Y(S,I,F){F=F||W;var H,ne,re=F.createElement("script");if(re.text=S,I)for(H in K)ne=I[H]||I.getAttribute&&I.getAttribute(H),ne&&re.setAttribute(H,ne);F.head.appendChild(re).parentNode.removeChild(re)}function ie(S){return S==null?S+"":typeof S=="object"||typeof S=="function"?E[k.call(S)]||"object":typeof S}var ue="3.7.0",de=/HTML$/i,M=function(S,I){return new M.fn.init(S,I)};M.fn=M.prototype={jquery:ue,constructor:M,length:0,toArray:function(){return u.call(this)},get:function(S){return S==null?u.call(this):S<0?this[S+this.length]:this[S]},pushStack:function(S){var I=M.merge(this.constructor(),S);return I.prevObject=this,I},each:function(S){return M.each(this,S)},map:function(S){return this.pushStack(M.map(this,function(I,F){return S.call(I,F,I)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(M.grep(this,function(S,I){return(I+1)%2}))},odd:function(){return this.pushStack(M.grep(this,function(S,I){return I%2}))},eq:function(S){var I=this.length,F=+S+(S<0?I:0);return this.pushStack(F>=0&&F<I?[this[F]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:i.sort,splice:i.splice},M.extend=M.fn.extend=function(){var S,I,F,H,ne,re,se=arguments[0]||{},$e=1,Pe=arguments.length,ot=!1;for(typeof se=="boolean"&&(ot=se,se=arguments[$e]||{},$e++),typeof se!="object"&&!$(se)&&(se={}),$e===Pe&&(se=this,$e--);$e<Pe;$e++)if((S=arguments[$e])!=null)for(I in S)H=S[I],!(I==="__proto__"||se===H)&&(ot&&H&&(M.isPlainObject(H)||(ne=Array.isArray(H)))?(F=se[I],ne&&!Array.isArray(F)?re=[]:!ne&&!M.isPlainObject(F)?re={}:re=F,ne=!1,se[I]=M.extend(ot,re,H)):H!==void 0&&(se[I]=H));return se},M.extend({expando:"jQuery"+(ue+Math.random()).replace(/\D/g,""),isReady:!0,error:function(S){throw new Error(S)},noop:function(){},isPlainObject:function(S){var I,F;return!S||k.call(S)!=="[object Object]"?!1:(I=a(S),I?(F=D.call(I,"constructor")&&I.constructor,typeof F=="function"&&R.call(F)===j):!0)},isEmptyObject:function(S){var I;for(I in S)return!1;return!0},globalEval:function(S,I,F){Y(S,{nonce:I&&I.nonce},F)},each:function(S,I){var F,H=0;if(Te(S))for(F=S.length;H<F&&I.call(S[H],H,S[H])!==!1;H++);else for(H in S)if(I.call(S[H],H,S[H])===!1)break;return S},text:function(S){var I,F="",H=0,ne=S.nodeType;if(ne){if(ne===1||ne===9||ne===11)return S.textContent;if(ne===3||ne===4)return S.nodeValue}else for(;I=S[H++];)F+=M.text(I);return F},makeArray:function(S,I){var F=I||[];return S!=null&&(Te(Object(S))?M.merge(F,typeof S=="string"?[S]:S):o.call(F,S)),F},inArray:function(S,I,F){return I==null?-1:v.call(I,S,F)},isXMLDoc:function(S){var I=S&&S.namespaceURI,F=S&&(S.ownerDocument||S).documentElement;return!de.test(I||F&&F.nodeName||"HTML")},merge:function(S,I){for(var F=+I.length,H=0,ne=S.length;H<F;H++)S[ne++]=I[H];return S.length=ne,S},grep:function(S,I,F){for(var H,ne=[],re=0,se=S.length,$e=!F;re<se;re++)H=!I(S[re],re),H!==$e&&ne.push(S[re]);return ne},map:function(S,I,F){var H,ne,re=0,se=[];if(Te(S))for(H=S.length;re<H;re++)ne=I(S[re],re,F),ne!=null&&se.push(ne);else for(re in S)ne=I(S[re],re,F),ne!=null&&se.push(ne);return f(se)},guid:1,support:N}),typeof Symbol=="function"&&(M.fn[Symbol.iterator]=i[Symbol.iterator]),M.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(S,I){E["[object "+I+"]"]=I.toLowerCase()});function Te(S){var I=!!S&&"length"in S&&S.length,F=ie(S);return $(S)||ee(S)?!1:F==="array"||I===0||typeof I=="number"&&I>0&&I-1 in S}function fe(S,I){return S.nodeName&&S.nodeName.toLowerCase()===I.toLowerCase()}var Oe=i.pop,rt=i.sort,at=i.splice,qe="[\\x20\\t\\r\\n\\f]",ze=new RegExp("^"+qe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+qe+"+$","g");M.contains=function(S,I){var F=I&&I.parentNode;return S===F||!!(F&&F.nodeType===1&&(S.contains?S.contains(F):S.compareDocumentPosition&&S.compareDocumentPosition(F)&16))};var Be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function tt(S,I){return I?S==="\0"?"":S.slice(0,-1)+"\\"+S.charCodeAt(S.length-1).toString(16)+" ":"\\"+S}M.escapeSelector=function(S){return(S+"").replace(Be,tt)};var Ke=W,Le=o;(function(){var S,I,F,H,ne,re=Le,se,$e,Pe,ot,St,Lt=M.expando,_t=0,tn=0,ir=xc(),Cr=xc(),_r=xc(),Di=xc(),ni=function(Ie,Ye){return Ie===Ye&&(ne=!0),0},Eo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ia="(?:\\\\[\\da-fA-F]{1,6}"+qe+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",kr="\\["+qe+"*("+ia+")(?:"+qe+"*([*^$|!~]?=)"+qe+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ia+"))|)"+qe+"*\\]",Va=":("+ia+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+kr+")*)|.*)\\)|)",Mr=new RegExp(qe+"+","g"),_i=new RegExp("^"+qe+"*,"+qe+"*"),Js=new RegExp("^"+qe+"*([>+~]|"+qe+")"+qe+"*"),vc=new RegExp(qe+"|>"),_a=new RegExp(Va),Sr=new RegExp("^"+ia+"$"),qo={ID:new RegExp("^#("+ia+")"),CLASS:new RegExp("^\\.("+ia+")"),TAG:new RegExp("^("+ia+"|[*])"),ATTR:new RegExp("^"+kr),PSEUDO:new RegExp("^"+Va),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+qe+"*(even|odd|(([+-]|)(\\d*)n|)"+qe+"*(?:([+-]|)"+qe+"*(\\d+)|))"+qe+"*\\)|)","i"),bool:new RegExp("^(?:"+Eo+")$","i"),needsContext:new RegExp("^"+qe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+qe+"*((?:-\\d)?\\d*)"+qe+"*\\)|)(?=[^-]|$)","i")},Cs=/^(?:input|select|textarea|button)$/i,ts=/^h\d$/i,oa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ks=/[+~]/,Wa=new RegExp("\\\\[\\da-fA-F]{1,6}"+qe+"?|\\\\([^\\r\\n\\f])","g"),Ps=function(Ie,Ye){var ft="0x"+Ie.slice(1)-65536;return Ye||(ft<0?String.fromCharCode(ft+65536):String.fromCharCode(ft>>10|55296,ft&1023|56320))},mm=function(){va()},gm=wc(function(Ie){return Ie.disabled===!0&&fe(Ie,"fieldset")},{dir:"parentNode",next:"legend"});function Th(){try{return se.activeElement}catch{}}try{re.apply(i=u.call(Ke.childNodes),Ke.childNodes),i[Ke.childNodes.length].nodeType}catch{re={apply:function(Ye,ft){Le.apply(Ye,u.call(ft))},call:function(Ye){Le.apply(Ye,u.call(arguments,1))}}}function Ur(Ie,Ye,ft,xt){var Ot,mn,Pn,Wn,Tn,Pr,or,mr=Ye&&Ye.ownerDocument,Ir=Ye?Ye.nodeType:9;if(ft=ft||[],typeof Ie!="string"||!Ie||Ir!==1&&Ir!==9&&Ir!==11)return ft;if(!xt&&(va(Ye),Ye=Ye||se,Pe)){if(Ir!==11&&(Tn=oa.exec(Ie)))if(Ot=Tn[1]){if(Ir===9)if(Pn=Ye.getElementById(Ot)){if(Pn.id===Ot)return re.call(ft,Pn),ft}else return ft;else if(mr&&(Pn=mr.getElementById(Ot))&&Ur.contains(Ye,Pn)&&Pn.id===Ot)return re.call(ft,Pn),ft}else{if(Tn[2])return re.apply(ft,Ye.getElementsByTagName(Ie)),ft;if((Ot=Tn[3])&&Ye.getElementsByClassName)return re.apply(ft,Ye.getElementsByClassName(Ot)),ft}if(!Di[Ie+" "]&&(!ot||!ot.test(Ie))){if(or=Ie,mr=Ye,Ir===1&&(vc.test(Ie)||Js.test(Ie))){for(mr=ks.test(Ie)&&pu(Ye.parentNode)||Ye,(mr!=Ye||!N.scope)&&((Wn=Ye.getAttribute("id"))?Wn=M.escapeSelector(Wn):Ye.setAttribute("id",Wn=Lt)),Pr=aa(Ie),mn=Pr.length;mn--;)Pr[mn]=(Wn?"#"+Wn:":scope")+" "+Ll(Pr[mn]);or=Pr.join(",")}try{return re.apply(ft,mr.querySelectorAll(or)),ft}catch{Di(Ie,!0)}finally{Wn===Lt&&Ye.removeAttribute("id")}}}return kh(Ie.replace(ze,"$1"),Ye,ft,xt)}function xc(){var Ie=[];function Ye(ft,xt){return Ie.push(ft+" ")>I.cacheLength&&delete Ye[Ie.shift()],Ye[ft+" "]=xt}return Ye}function Go(Ie){return Ie[Lt]=!0,Ie}function Rl(Ie){var Ye=se.createElement("fieldset");try{return!!Ie(Ye)}catch{return!1}finally{Ye.parentNode&&Ye.parentNode.removeChild(Ye),Ye=null}}function Wp(Ie){return function(Ye){return fe(Ye,"input")&&Ye.type===Ie}}function _m(Ie){return function(Ye){return(fe(Ye,"input")||fe(Ye,"button"))&&Ye.type===Ie}}function bc(Ie){return function(Ye){return"form"in Ye?Ye.parentNode&&Ye.disabled===!1?"label"in Ye?"label"in Ye.parentNode?Ye.parentNode.disabled===Ie:Ye.disabled===Ie:Ye.isDisabled===Ie||Ye.isDisabled!==!Ie&&gm(Ye)===Ie:Ye.disabled===Ie:"label"in Ye?Ye.disabled===Ie:!1}}function ya(Ie){return Go(function(Ye){return Ye=+Ye,Go(function(ft,xt){for(var Ot,mn=Ie([],ft.length,Ye),Pn=mn.length;Pn--;)ft[Ot=mn[Pn]]&&(ft[Ot]=!(xt[Ot]=ft[Ot]))})})}function pu(Ie){return Ie&&typeof Ie.getElementsByTagName<"u"&&Ie}function va(Ie){var Ye,ft=Ie?Ie.ownerDocument||Ie:Ke;return ft==se||ft.nodeType!==9||!ft.documentElement||(se=ft,$e=se.documentElement,Pe=!M.isXMLDoc(se),St=$e.matches||$e.webkitMatchesSelector||$e.msMatchesSelector,Ke!=se&&(Ye=se.defaultView)&&Ye.top!==Ye&&Ye.addEventListener("unload",mm),N.getById=Rl(function(xt){return $e.appendChild(xt).id=M.expando,!se.getElementsByName||!se.getElementsByName(M.expando).length}),N.disconnectedMatch=Rl(function(xt){return St.call(xt,"*")}),N.scope=Rl(function(){return se.querySelectorAll(":scope")}),N.cssHas=Rl(function(){try{return se.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),N.getById?(I.filter.ID=function(xt){var Ot=xt.replace(Wa,Ps);return function(mn){return mn.getAttribute("id")===Ot}},I.find.ID=function(xt,Ot){if(typeof Ot.getElementById<"u"&&Pe){var mn=Ot.getElementById(xt);return mn?[mn]:[]}}):(I.filter.ID=function(xt){var Ot=xt.replace(Wa,Ps);return function(mn){var Pn=typeof mn.getAttributeNode<"u"&&mn.getAttributeNode("id");return Pn&&Pn.value===Ot}},I.find.ID=function(xt,Ot){if(typeof Ot.getElementById<"u"&&Pe){var mn,Pn,Wn,Tn=Ot.getElementById(xt);if(Tn){if(mn=Tn.getAttributeNode("id"),mn&&mn.value===xt)return[Tn];for(Wn=Ot.getElementsByName(xt),Pn=0;Tn=Wn[Pn++];)if(mn=Tn.getAttributeNode("id"),mn&&mn.value===xt)return[Tn]}return[]}}),I.find.TAG=function(xt,Ot){return typeof Ot.getElementsByTagName<"u"?Ot.getElementsByTagName(xt):Ot.querySelectorAll(xt)},I.find.CLASS=function(xt,Ot){if(typeof Ot.getElementsByClassName<"u"&&Pe)return Ot.getElementsByClassName(xt)},ot=[],Rl(function(xt){var Ot;$e.appendChild(xt).innerHTML="<a id='"+Lt+"' href='' disabled='disabled'></a><select id='"+Lt+"-\r\\' disabled='disabled'><option selected=''></option></select>",xt.querySelectorAll("[selected]").length||ot.push("\\["+qe+"*(?:value|"+Eo+")"),xt.querySelectorAll("[id~="+Lt+"-]").length||ot.push("~="),xt.querySelectorAll("a#"+Lt+"+*").length||ot.push(".#.+[+~]"),xt.querySelectorAll(":checked").length||ot.push(":checked"),Ot=se.createElement("input"),Ot.setAttribute("type","hidden"),xt.appendChild(Ot).setAttribute("name","D"),$e.appendChild(xt).disabled=!0,xt.querySelectorAll(":disabled").length!==2&&ot.push(":enabled",":disabled"),Ot=se.createElement("input"),Ot.setAttribute("name",""),xt.appendChild(Ot),xt.querySelectorAll("[name='']").length||ot.push("\\["+qe+"*name"+qe+"*="+qe+`*(?:''|"")`)}),N.cssHas||ot.push(":has"),ot=ot.length&&new RegExp(ot.join("|")),ni=function(xt,Ot){if(xt===Ot)return ne=!0,0;var mn=!xt.compareDocumentPosition-!Ot.compareDocumentPosition;return mn||(mn=(xt.ownerDocument||xt)==(Ot.ownerDocument||Ot)?xt.compareDocumentPosition(Ot):1,mn&1||!N.sortDetached&&Ot.compareDocumentPosition(xt)===mn?xt===se||xt.ownerDocument==Ke&&Ur.contains(Ke,xt)?-1:Ot===se||Ot.ownerDocument==Ke&&Ur.contains(Ke,Ot)?1:H?v.call(H,xt)-v.call(H,Ot):0:mn&4?-1:1)}),se}Ur.matches=function(Ie,Ye){return Ur(Ie,null,null,Ye)},Ur.matchesSelector=function(Ie,Ye){if(va(Ie),Pe&&!Di[Ye+" "]&&(!ot||!ot.test(Ye)))try{var ft=St.call(Ie,Ye);if(ft||N.disconnectedMatch||Ie.document&&Ie.document.nodeType!==11)return ft}catch{Di(Ye,!0)}return Ur(Ye,se,null,[Ie]).length>0},Ur.contains=function(Ie,Ye){return(Ie.ownerDocument||Ie)!=se&&va(Ie),M.contains(Ie,Ye)},Ur.attr=function(Ie,Ye){(Ie.ownerDocument||Ie)!=se&&va(Ie);var ft=I.attrHandle[Ye.toLowerCase()],xt=ft&&D.call(I.attrHandle,Ye.toLowerCase())?ft(Ie,Ye,!Pe):void 0;return xt!==void 0?xt:Ie.getAttribute(Ye)},Ur.error=function(Ie){throw new Error("Syntax error, unrecognized expression: "+Ie)},M.uniqueSort=function(Ie){var Ye,ft=[],xt=0,Ot=0;if(ne=!N.sortStable,H=!N.sortStable&&u.call(Ie,0),rt.call(Ie,ni),ne){for(;Ye=Ie[Ot++];)Ye===Ie[Ot]&&(xt=ft.push(Ot));for(;xt--;)at.call(Ie,ft[xt],1)}return H=null,Ie},M.fn.uniqueSort=function(){return this.pushStack(M.uniqueSort(u.apply(this)))},I=M.expr={cacheLength:50,createPseudo:Go,match:qo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ie){return Ie[1]=Ie[1].replace(Wa,Ps),Ie[3]=(Ie[3]||Ie[4]||Ie[5]||"").replace(Wa,Ps),Ie[2]==="~="&&(Ie[3]=" "+Ie[3]+" "),Ie.slice(0,4)},CHILD:function(Ie){return Ie[1]=Ie[1].toLowerCase(),Ie[1].slice(0,3)==="nth"?(Ie[3]||Ur.error(Ie[0]),Ie[4]=+(Ie[4]?Ie[5]+(Ie[6]||1):2*(Ie[3]==="even"||Ie[3]==="odd")),Ie[5]=+(Ie[7]+Ie[8]||Ie[3]==="odd")):Ie[3]&&Ur.error(Ie[0]),Ie},PSEUDO:function(Ie){var Ye,ft=!Ie[6]&&Ie[2];return qo.CHILD.test(Ie[0])?null:(Ie[3]?Ie[2]=Ie[4]||Ie[5]||"":ft&&_a.test(ft)&&(Ye=aa(ft,!0))&&(Ye=ft.indexOf(")",ft.length-Ye)-ft.length)&&(Ie[0]=Ie[0].slice(0,Ye),Ie[2]=ft.slice(0,Ye)),Ie.slice(0,3))}},filter:{TAG:function(Ie){var Ye=Ie.replace(Wa,Ps).toLowerCase();return Ie==="*"?function(){return!0}:function(ft){return fe(ft,Ye)}},CLASS:function(Ie){var Ye=ir[Ie+" "];return Ye||(Ye=new RegExp("(^|"+qe+")"+Ie+"("+qe+"|$)"))&&ir(Ie,function(ft){return Ye.test(typeof ft.className=="string"&&ft.className||typeof ft.getAttribute<"u"&&ft.getAttribute("class")||"")})},ATTR:function(Ie,Ye,ft){return function(xt){var Ot=Ur.attr(xt,Ie);return Ot==null?Ye==="!=":Ye?(Ot+="",Ye==="="?Ot===ft:Ye==="!="?Ot!==ft:Ye==="^="?ft&&Ot.indexOf(ft)===0:Ye==="*="?ft&&Ot.indexOf(ft)>-1:Ye==="$="?ft&&Ot.slice(-ft.length)===ft:Ye==="~="?(" "+Ot.replace(Mr," ")+" ").indexOf(ft)>-1:Ye==="|="?Ot===ft||Ot.slice(0,ft.length+1)===ft+"-":!1):!0}},CHILD:function(Ie,Ye,ft,xt,Ot){var mn=Ie.slice(0,3)!=="nth",Pn=Ie.slice(-4)!=="last",Wn=Ye==="of-type";return xt===1&&Ot===0?function(Tn){return!!Tn.parentNode}:function(Tn,Pr,or){var mr,Ir,Jn,ri,vo,Li=mn!==Pn?"nextSibling":"previousSibling",sa=Tn.parentNode,Ha=Wn&&Tn.nodeName.toLowerCase(),Zo=!or&&!Wn,so=!1;if(sa){if(mn){for(;Li;){for(Jn=Tn;Jn=Jn[Li];)if(Wn?fe(Jn,Ha):Jn.nodeType===1)return!1;vo=Li=Ie==="only"&&!vo&&"nextSibling"}return!0}if(vo=[Pn?sa.firstChild:sa.lastChild],Pn&&Zo){for(Ir=sa[Lt]||(sa[Lt]={}),mr=Ir[Ie]||[],ri=mr[0]===_t&&mr[1],so=ri&&mr[2],Jn=ri&&sa.childNodes[ri];Jn=++ri&&Jn&&Jn[Li]||(so=ri=0)||vo.pop();)if(Jn.nodeType===1&&++so&&Jn===Tn){Ir[Ie]=[_t,ri,so];break}}else if(Zo&&(Ir=Tn[Lt]||(Tn[Lt]={}),mr=Ir[Ie]||[],ri=mr[0]===_t&&mr[1],so=ri),so===!1)for(;(Jn=++ri&&Jn&&Jn[Li]||(so=ri=0)||vo.pop())&&!((Wn?fe(Jn,Ha):Jn.nodeType===1)&&++so&&(Zo&&(Ir=Jn[Lt]||(Jn[Lt]={}),Ir[Ie]=[_t,so]),Jn===Tn)););return so-=Ot,so===xt||so%xt===0&&so/xt>=0}}},PSEUDO:function(Ie,Ye){var ft,xt=I.pseudos[Ie]||I.setFilters[Ie.toLowerCase()]||Ur.error("unsupported pseudo: "+Ie);return xt[Lt]?xt(Ye):xt.length>1?(ft=[Ie,Ie,"",Ye],I.setFilters.hasOwnProperty(Ie.toLowerCase())?Go(function(Ot,mn){for(var Pn,Wn=xt(Ot,Ye),Tn=Wn.length;Tn--;)Pn=v.call(Ot,Wn[Tn]),Ot[Pn]=!(mn[Pn]=Wn[Tn])}):function(Ot){return xt(Ot,0,ft)}):xt}},pseudos:{not:Go(function(Ie){var Ye=[],ft=[],xt=zl(Ie.replace(ze,"$1"));return xt[Lt]?Go(function(Ot,mn,Pn,Wn){for(var Tn,Pr=xt(Ot,null,Wn,[]),or=Ot.length;or--;)(Tn=Pr[or])&&(Ot[or]=!(mn[or]=Tn))}):function(Ot,mn,Pn){return Ye[0]=Ot,xt(Ye,null,Pn,ft),Ye[0]=null,!ft.pop()}}),has:Go(function(Ie){return function(Ye){return Ur(Ie,Ye).length>0}}),contains:Go(function(Ie){return Ie=Ie.replace(Wa,Ps),function(Ye){return(Ye.textContent||M.text(Ye)).indexOf(Ie)>-1}}),lang:Go(function(Ie){return Sr.test(Ie||"")||Ur.error("unsupported lang: "+Ie),Ie=Ie.replace(Wa,Ps).toLowerCase(),function(Ye){var ft;do if(ft=Pe?Ye.lang:Ye.getAttribute("xml:lang")||Ye.getAttribute("lang"))return ft=ft.toLowerCase(),ft===Ie||ft.indexOf(Ie+"-")===0;while((Ye=Ye.parentNode)&&Ye.nodeType===1);return!1}}),target:function(Ie){var Ye=t.location&&t.location.hash;return Ye&&Ye.slice(1)===Ie.id},root:function(Ie){return Ie===$e},focus:function(Ie){return Ie===Th()&&se.hasFocus()&&!!(Ie.type||Ie.href||~Ie.tabIndex)},enabled:bc(!1),disabled:bc(!0),checked:function(Ie){return fe(Ie,"input")&&!!Ie.checked||fe(Ie,"option")&&!!Ie.selected},selected:function(Ie){return Ie.parentNode&&Ie.parentNode.selectedIndex,Ie.selected===!0},empty:function(Ie){for(Ie=Ie.firstChild;Ie;Ie=Ie.nextSibling)if(Ie.nodeType<6)return!1;return!0},parent:function(Ie){return!I.pseudos.empty(Ie)},header:function(Ie){return ts.test(Ie.nodeName)},input:function(Ie){return Cs.test(Ie.nodeName)},button:function(Ie){return fe(Ie,"input")&&Ie.type==="button"||fe(Ie,"button")},text:function(Ie){var Ye;return fe(Ie,"input")&&Ie.type==="text"&&((Ye=Ie.getAttribute("type"))==null||Ye.toLowerCase()==="text")},first:ya(function(){return[0]}),last:ya(function(Ie,Ye){return[Ye-1]}),eq:ya(function(Ie,Ye,ft){return[ft<0?ft+Ye:ft]}),even:ya(function(Ie,Ye){for(var ft=0;ft<Ye;ft+=2)Ie.push(ft);return Ie}),odd:ya(function(Ie,Ye){for(var ft=1;ft<Ye;ft+=2)Ie.push(ft);return Ie}),lt:ya(function(Ie,Ye,ft){var xt;for(ft<0?xt=ft+Ye:ft>Ye?xt=Ye:xt=ft;--xt>=0;)Ie.push(xt);return Ie}),gt:ya(function(Ie,Ye,ft){for(var xt=ft<0?ft+Ye:ft;++xt<Ye;)Ie.push(xt);return Ie})}},I.pseudos.nth=I.pseudos.eq;for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I.pseudos[S]=Wp(S);for(S in{submit:!0,reset:!0})I.pseudos[S]=_m(S);function id(){}id.prototype=I.filters=I.pseudos,I.setFilters=new id;function aa(Ie,Ye){var ft,xt,Ot,mn,Pn,Wn,Tn,Pr=Cr[Ie+" "];if(Pr)return Ye?0:Pr.slice(0);for(Pn=Ie,Wn=[],Tn=I.preFilter;Pn;){(!ft||(xt=_i.exec(Pn)))&&(xt&&(Pn=Pn.slice(xt[0].length)||Pn),Wn.push(Ot=[])),ft=!1,(xt=Js.exec(Pn))&&(ft=xt.shift(),Ot.push({value:ft,type:xt[0].replace(ze," ")}),Pn=Pn.slice(ft.length));for(mn in I.filter)(xt=qo[mn].exec(Pn))&&(!Tn[mn]||(xt=Tn[mn](xt)))&&(ft=xt.shift(),Ot.push({value:ft,type:mn,matches:xt}),Pn=Pn.slice(ft.length));if(!ft)break}return Ye?Pn.length:Pn?Ur.error(Ie):Cr(Ie,Wn).slice(0)}function Ll(Ie){for(var Ye=0,ft=Ie.length,xt="";Ye<ft;Ye++)xt+=Ie[Ye].value;return xt}function wc(Ie,Ye,ft){var xt=Ye.dir,Ot=Ye.next,mn=Ot||xt,Pn=ft&&mn==="parentNode",Wn=tn++;return Ye.first?function(Tn,Pr,or){for(;Tn=Tn[xt];)if(Tn.nodeType===1||Pn)return Ie(Tn,Pr,or);return!1}:function(Tn,Pr,or){var mr,Ir,Jn=[_t,Wn];if(or){for(;Tn=Tn[xt];)if((Tn.nodeType===1||Pn)&&Ie(Tn,Pr,or))return!0}else for(;Tn=Tn[xt];)if(Tn.nodeType===1||Pn)if(Ir=Tn[Lt]||(Tn[Lt]={}),Ot&&fe(Tn,Ot))Tn=Tn[xt]||Tn;else{if((mr=Ir[mn])&&mr[0]===_t&&mr[1]===Wn)return Jn[2]=mr[2];if(Ir[mn]=Jn,Jn[2]=Ie(Tn,Pr,or))return!0}return!1}}function Ec(Ie){return Ie.length>1?function(Ye,ft,xt){for(var Ot=Ie.length;Ot--;)if(!Ie[Ot](Ye,ft,xt))return!1;return!0}:Ie[0]}function Hp(Ie,Ye,ft){for(var xt=0,Ot=Ye.length;xt<Ot;xt++)Ur(Ie,Ye[xt],ft);return ft}function Sc(Ie,Ye,ft,xt,Ot){for(var mn,Pn=[],Wn=0,Tn=Ie.length,Pr=Ye!=null;Wn<Tn;Wn++)(mn=Ie[Wn])&&(!ft||ft(mn,xt,Ot))&&(Pn.push(mn),Pr&&Ye.push(Wn));return Pn}function Ch(Ie,Ye,ft,xt,Ot,mn){return xt&&!xt[Lt]&&(xt=Ch(xt)),Ot&&!Ot[Lt]&&(Ot=Ch(Ot,mn)),Go(function(Pn,Wn,Tn,Pr){var or,mr,Ir,Jn,ri=[],vo=[],Li=Wn.length,sa=Pn||Hp(Ye||"*",Tn.nodeType?[Tn]:Tn,[]),Ha=Ie&&(Pn||!Ye)?Sc(sa,ri,Ie,Tn,Pr):sa;if(ft?(Jn=Ot||(Pn?Ie:Li||xt)?[]:Wn,ft(Ha,Jn,Tn,Pr)):Jn=Ha,xt)for(or=Sc(Jn,vo),xt(or,[],Tn,Pr),mr=or.length;mr--;)(Ir=or[mr])&&(Jn[vo[mr]]=!(Ha[vo[mr]]=Ir));if(Pn){if(Ot||Ie){if(Ot){for(or=[],mr=Jn.length;mr--;)(Ir=Jn[mr])&&or.push(Ha[mr]=Ir);Ot(null,Jn=[],or,Pr)}for(mr=Jn.length;mr--;)(Ir=Jn[mr])&&(or=Ot?v.call(Pn,Ir):ri[mr])>-1&&(Pn[or]=!(Wn[or]=Ir))}}else Jn=Sc(Jn===Wn?Jn.splice(Li,Jn.length):Jn),Ot?Ot(null,Wn,Jn,Pr):re.apply(Wn,Jn)})}function fu(Ie){for(var Ye,ft,xt,Ot=Ie.length,mn=I.relative[Ie[0].type],Pn=mn||I.relative[" "],Wn=mn?1:0,Tn=wc(function(mr){return mr===Ye},Pn,!0),Pr=wc(function(mr){return v.call(Ye,mr)>-1},Pn,!0),or=[function(mr,Ir,Jn){var ri=!mn&&(Jn||Ir!=F)||((Ye=Ir).nodeType?Tn(mr,Ir,Jn):Pr(mr,Ir,Jn));return Ye=null,ri}];Wn<Ot;Wn++)if(ft=I.relative[Ie[Wn].type])or=[wc(Ec(or),ft)];else{if(ft=I.filter[Ie[Wn].type].apply(null,Ie[Wn].matches),ft[Lt]){for(xt=++Wn;xt<Ot&&!I.relative[Ie[xt].type];xt++);return Ch(Wn>1&&Ec(or),Wn>1&&Ll(Ie.slice(0,Wn-1).concat({value:Ie[Wn-2].type===" "?"*":""})).replace(ze,"$1"),ft,Wn<xt&&fu(Ie.slice(Wn,xt)),xt<Ot&&fu(Ie=Ie.slice(xt)),xt<Ot&&Ll(Ie))}or.push(ft)}return Ec(or)}function od(Ie,Ye){var ft=Ye.length>0,xt=Ie.length>0,Ot=function(mn,Pn,Wn,Tn,Pr){var or,mr,Ir,Jn=0,ri="0",vo=mn&&[],Li=[],sa=F,Ha=mn||xt&&I.find.TAG("*",Pr),Zo=_t+=sa==null?1:Math.random()||.1,so=Ha.length;for(Pr&&(F=Pn==se||Pn||Pr);ri!==so&&(or=Ha[ri])!=null;ri++){if(xt&&or){for(mr=0,!Pn&&or.ownerDocument!=se&&(va(or),Wn=!Pe);Ir=Ie[mr++];)if(Ir(or,Pn||se,Wn)){re.call(Tn,or);break}Pr&&(_t=Zo)}ft&&((or=!Ir&&or)&&Jn--,mn&&vo.push(or))}if(Jn+=ri,ft&&ri!==Jn){for(mr=0;Ir=Ye[mr++];)Ir(vo,Li,Pn,Wn);if(mn){if(Jn>0)for(;ri--;)vo[ri]||Li[ri]||(Li[ri]=Oe.call(Tn));Li=Sc(Li)}re.apply(Tn,Li),Pr&&!mn&&Li.length>0&&Jn+Ye.length>1&&M.uniqueSort(Tn)}return Pr&&(_t=Zo,F=sa),vo};return ft?Go(Ot):Ot}function zl(Ie,Ye){var ft,xt=[],Ot=[],mn=_r[Ie+" "];if(!mn){for(Ye||(Ye=aa(Ie)),ft=Ye.length;ft--;)mn=fu(Ye[ft]),mn[Lt]?xt.push(mn):Ot.push(mn);mn=_r(Ie,od(Ot,xt)),mn.selector=Ie}return mn}function kh(Ie,Ye,ft,xt){var Ot,mn,Pn,Wn,Tn,Pr=typeof Ie=="function"&&Ie,or=!xt&&aa(Ie=Pr.selector||Ie);if(ft=ft||[],or.length===1){if(mn=or[0]=or[0].slice(0),mn.length>2&&(Pn=mn[0]).type==="ID"&&Ye.nodeType===9&&Pe&&I.relative[mn[1].type]){if(Ye=(I.find.ID(Pn.matches[0].replace(Wa,Ps),Ye)||[])[0],Ye)Pr&&(Ye=Ye.parentNode);else return ft;Ie=Ie.slice(mn.shift().value.length)}for(Ot=qo.needsContext.test(Ie)?0:mn.length;Ot--&&(Pn=mn[Ot],!I.relative[Wn=Pn.type]);)if((Tn=I.find[Wn])&&(xt=Tn(Pn.matches[0].replace(Wa,Ps),ks.test(mn[0].type)&&pu(Ye.parentNode)||Ye))){if(mn.splice(Ot,1),Ie=xt.length&&Ll(mn),!Ie)return re.apply(ft,xt),ft;break}}return(Pr||zl(Ie,or))(xt,Ye,!Pe,ft,!Ye||ks.test(Ie)&&pu(Ye.parentNode)||Ye),ft}N.sortStable=Lt.split("").sort(ni).join("")===Lt,va(),N.sortDetached=Rl(function(Ie){return Ie.compareDocumentPosition(se.createElement("fieldset"))&1}),M.find=Ur,M.expr[":"]=M.expr.pseudos,M.unique=M.uniqueSort,Ur.compile=zl,Ur.select=kh,Ur.setDocument=va,Ur.escape=M.escapeSelector,Ur.getText=M.text,Ur.isXML=M.isXMLDoc,Ur.selectors=M.expr,Ur.support=M.support,Ur.uniqueSort=M.uniqueSort})();var Je=function(S,I,F){for(var H=[],ne=F!==void 0;(S=S[I])&&S.nodeType!==9;)if(S.nodeType===1){if(ne&&M(S).is(F))break;H.push(S)}return H},it=function(S,I){for(var F=[];S;S=S.nextSibling)S.nodeType===1&&S!==I&&F.push(S);return F},kt=M.expr.match.needsContext,yt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function wt(S,I,F){return $(I)?M.grep(S,function(H,ne){return!!I.call(H,ne,H)!==F}):I.nodeType?M.grep(S,function(H){return H===I!==F}):typeof I!="string"?M.grep(S,function(H){return v.call(I,H)>-1!==F}):M.filter(I,S,F)}M.filter=function(S,I,F){var H=I[0];return F&&(S=":not("+S+")"),I.length===1&&H.nodeType===1?M.find.matchesSelector(H,S)?[H]:[]:M.find.matches(S,M.grep(I,function(ne){return ne.nodeType===1}))},M.fn.extend({find:function(S){var I,F,H=this.length,ne=this;if(typeof S!="string")return this.pushStack(M(S).filter(function(){for(I=0;I<H;I++)if(M.contains(ne[I],this))return!0}));for(F=this.pushStack([]),I=0;I<H;I++)M.find(S,ne[I],F);return H>1?M.uniqueSort(F):F},filter:function(S){return this.pushStack(wt(this,S||[],!1))},not:function(S){return this.pushStack(wt(this,S||[],!0))},is:function(S){return!!wt(this,typeof S=="string"&&kt.test(S)?M(S):S||[],!1).length}});var jt,Qt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,en=M.fn.init=function(S,I,F){var H,ne;if(!S)return this;if(F=F||jt,typeof S=="string")if(S[0]==="<"&&S[S.length-1]===">"&&S.length>=3?H=[null,S,null]:H=Qt.exec(S),H&&(H[1]||!I))if(H[1]){if(I=I instanceof M?I[0]:I,M.merge(this,M.parseHTML(H[1],I&&I.nodeType?I.ownerDocument||I:W,!0)),yt.test(H[1])&&M.isPlainObject(I))for(H in I)$(this[H])?this[H](I[H]):this.attr(H,I[H]);return this}else return ne=W.getElementById(H[2]),ne&&(this[0]=ne,this.length=1),this;else return!I||I.jquery?(I||F).find(S):this.constructor(I).find(S);else{if(S.nodeType)return this[0]=S,this.length=1,this;if($(S))return F.ready!==void 0?F.ready(S):S(M)}return M.makeArray(S,this)};en.prototype=M.fn,jt=M(W);var on=/^(?:parents|prev(?:Until|All))/,Sn={children:!0,contents:!0,next:!0,prev:!0};M.fn.extend({has:function(S){var I=M(S,this),F=I.length;return this.filter(function(){for(var H=0;H<F;H++)if(M.contains(this,I[H]))return!0})},closest:function(S,I){var F,H=0,ne=this.length,re=[],se=typeof S!="string"&&M(S);if(!kt.test(S)){for(;H<ne;H++)for(F=this[H];F&&F!==I;F=F.parentNode)if(F.nodeType<11&&(se?se.index(F)>-1:F.nodeType===1&&M.find.matchesSelector(F,S))){re.push(F);break}}return this.pushStack(re.length>1?M.uniqueSort(re):re)},index:function(S){return S?typeof S=="string"?v.call(M(S),this[0]):v.call(this,S.jquery?S[0]:S):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(S,I){return this.pushStack(M.uniqueSort(M.merge(this.get(),M(S,I))))},addBack:function(S){return this.add(S==null?this.prevObject:this.prevObject.filter(S))}});function Jt(S,I){for(;(S=S[I])&&S.nodeType!==1;);return S}M.each({parent:function(S){var I=S.parentNode;return I&&I.nodeType!==11?I:null},parents:function(S){return Je(S,"parentNode")},parentsUntil:function(S,I,F){return Je(S,"parentNode",F)},next:function(S){return Jt(S,"nextSibling")},prev:function(S){return Jt(S,"previousSibling")},nextAll:function(S){return Je(S,"nextSibling")},prevAll:function(S){return Je(S,"previousSibling")},nextUntil:function(S,I,F){return Je(S,"nextSibling",F)},prevUntil:function(S,I,F){return Je(S,"previousSibling",F)},siblings:function(S){return it((S.parentNode||{}).firstChild,S)},children:function(S){return it(S.firstChild)},contents:function(S){return S.contentDocument!=null&&a(S.contentDocument)?S.contentDocument:(fe(S,"template")&&(S=S.content||S),M.merge([],S.childNodes))}},function(S,I){M.fn[S]=function(F,H){var ne=M.map(this,I,F);return S.slice(-5)!=="Until"&&(H=F),H&&typeof H=="string"&&(ne=M.filter(H,ne)),this.length>1&&(Sn[S]||M.uniqueSort(ne),on.test(S)&&ne.reverse()),this.pushStack(ne)}});var yn=/[^\x20\t\r\n\f]+/g;function Ft(S){var I={};return M.each(S.match(yn)||[],function(F,H){I[H]=!0}),I}M.Callbacks=function(S){S=typeof S=="string"?Ft(S):M.extend({},S);var I,F,H,ne,re=[],se=[],$e=-1,Pe=function(){for(ne=ne||S.once,H=I=!0;se.length;$e=-1)for(F=se.shift();++$e<re.length;)re[$e].apply(F[0],F[1])===!1&&S.stopOnFalse&&($e=re.length,F=!1);S.memory||(F=!1),I=!1,ne&&(F?re=[]:re="")},ot={add:function(){return re&&(F&&!I&&($e=re.length-1,se.push(F)),function St(Lt){M.each(Lt,function(_t,tn){$(tn)?(!S.unique||!ot.has(tn))&&re.push(tn):tn&&tn.length&&ie(tn)!=="string"&&St(tn)})}(arguments),F&&!I&&Pe()),this},remove:function(){return M.each(arguments,function(St,Lt){for(var _t;(_t=M.inArray(Lt,re,_t))>-1;)re.splice(_t,1),_t<=$e&&$e--}),this},has:function(St){return St?M.inArray(St,re)>-1:re.length>0},empty:function(){return re&&(re=[]),this},disable:function(){return ne=se=[],re=F="",this},disabled:function(){return!re},lock:function(){return ne=se=[],!F&&!I&&(re=F=""),this},locked:function(){return!!ne},fireWith:function(St,Lt){return ne||(Lt=Lt||[],Lt=[St,Lt.slice?Lt.slice():Lt],se.push(Lt),I||Pe()),this},fire:function(){return ot.fireWith(this,arguments),this},fired:function(){return!!H}};return ot};function nn(S){return S}function bn(S){throw S}function qt(S,I,F,H){var ne;try{S&&$(ne=S.promise)?ne.call(S).done(I).fail(F):S&&$(ne=S.then)?ne.call(S,I,F):I.apply(void 0,[S].slice(H))}catch(re){F.apply(void 0,[re])}}M.extend({Deferred:function(S){var I=[["notify","progress",M.Callbacks("memory"),M.Callbacks("memory"),2],["resolve","done",M.Callbacks("once memory"),M.Callbacks("once memory"),0,"resolved"],["reject","fail",M.Callbacks("once memory"),M.Callbacks("once memory"),1,"rejected"]],F="pending",H={state:function(){return F},always:function(){return ne.done(arguments).fail(arguments),this},catch:function(re){return H.then(null,re)},pipe:function(){var re=arguments;return M.Deferred(function(se){M.each(I,function($e,Pe){var ot=$(re[Pe[4]])&&re[Pe[4]];ne[Pe[1]](function(){var St=ot&&ot.apply(this,arguments);St&&$(St.promise)?St.promise().progress(se.notify).done(se.resolve).fail(se.reject):se[Pe[0]+"With"](this,ot?[St]:arguments)})}),re=null}).promise()},then:function(re,se,$e){var Pe=0;function ot(St,Lt,_t,tn){return function(){var ir=this,Cr=arguments,_r=function(){var ni,Eo;if(!(St<Pe)){if(ni=_t.apply(ir,Cr),ni===Lt.promise())throw new TypeError("Thenable self-resolution");Eo=ni&&(typeof ni=="object"||typeof ni=="function")&&ni.then,$(Eo)?tn?Eo.call(ni,ot(Pe,Lt,nn,tn),ot(Pe,Lt,bn,tn)):(Pe++,Eo.call(ni,ot(Pe,Lt,nn,tn),ot(Pe,Lt,bn,tn),ot(Pe,Lt,nn,Lt.notifyWith))):(_t!==nn&&(ir=void 0,Cr=[ni]),(tn||Lt.resolveWith)(ir,Cr))}},Di=tn?_r:function(){try{_r()}catch(ni){M.Deferred.exceptionHook&&M.Deferred.exceptionHook(ni,Di.error),St+1>=Pe&&(_t!==bn&&(ir=void 0,Cr=[ni]),Lt.rejectWith(ir,Cr))}};St?Di():(M.Deferred.getErrorHook?Di.error=M.Deferred.getErrorHook():M.Deferred.getStackHook&&(Di.error=M.Deferred.getStackHook()),t.setTimeout(Di))}}return M.Deferred(function(St){I[0][3].add(ot(0,St,$($e)?$e:nn,St.notifyWith)),I[1][3].add(ot(0,St,$(re)?re:nn)),I[2][3].add(ot(0,St,$(se)?se:bn))}).promise()},promise:function(re){return re!=null?M.extend(re,H):H}},ne={};return M.each(I,function(re,se){var $e=se[2],Pe=se[5];H[se[1]]=$e.add,Pe&&$e.add(function(){F=Pe},I[3-re][2].disable,I[3-re][3].disable,I[0][2].lock,I[0][3].lock),$e.add(se[3].fire),ne[se[0]]=function(){return ne[se[0]+"With"](this===ne?void 0:this,arguments),this},ne[se[0]+"With"]=$e.fireWith}),H.promise(ne),S&&S.call(ne,ne),ne},when:function(S){var I=arguments.length,F=I,H=Array(F),ne=u.call(arguments),re=M.Deferred(),se=function($e){return function(Pe){H[$e]=this,ne[$e]=arguments.length>1?u.call(arguments):Pe,--I||re.resolveWith(H,ne)}};if(I<=1&&(qt(S,re.done(se(F)).resolve,re.reject,!I),re.state()==="pending"||$(ne[F]&&ne[F].then)))return re.then();for(;F--;)qt(ne[F],se(F),re.reject);return re.promise()}});var It=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;M.Deferred.exceptionHook=function(S,I){t.console&&t.console.warn&&S&&It.test(S.name)&&t.console.warn("jQuery.Deferred exception: "+S.message,S.stack,I)},M.readyException=function(S){t.setTimeout(function(){throw S})};var Rn=M.Deferred();M.fn.ready=function(S){return Rn.then(S).catch(function(I){M.readyException(I)}),this},M.extend({isReady:!1,readyWait:1,ready:function(S){(S===!0?--M.readyWait:M.isReady)||(M.isReady=!0,!(S!==!0&&--M.readyWait>0)&&Rn.resolveWith(W,[M]))}}),M.ready.then=Rn.then;function ln(){W.removeEventListener("DOMContentLoaded",ln),t.removeEventListener("load",ln),M.ready()}W.readyState==="complete"||W.readyState!=="loading"&&!W.documentElement.doScroll?t.setTimeout(M.ready):(W.addEventListener("DOMContentLoaded",ln),t.addEventListener("load",ln));var Zn=function(S,I,F,H,ne,re,se){var $e=0,Pe=S.length,ot=F==null;if(ie(F)==="object"){ne=!0;for($e in F)Zn(S,I,$e,F[$e],!0,re,se)}else if(H!==void 0&&(ne=!0,$(H)||(se=!0),ot&&(se?(I.call(S,H),I=null):(ot=I,I=function(St,Lt,_t){return ot.call(M(St),_t)})),I))for(;$e<Pe;$e++)I(S[$e],F,se?H:H.call(S[$e],$e,I(S[$e],F)));return ne?S:ot?I.call(S):Pe?I(S[0],F):re},tr=/^-ms-/,Fn=/-([a-z])/g;function Yn(S,I){return I.toUpperCase()}function Un(S){return S.replace(tr,"ms-").replace(Fn,Yn)}var qn=function(S){return S.nodeType===1||S.nodeType===9||!+S.nodeType};function wn(){this.expando=M.expando+wn.uid++}wn.uid=1,wn.prototype={cache:function(S){var I=S[this.expando];return I||(I={},qn(S)&&(S.nodeType?S[this.expando]=I:Object.defineProperty(S,this.expando,{value:I,configurable:!0}))),I},set:function(S,I,F){var H,ne=this.cache(S);if(typeof I=="string")ne[Un(I)]=F;else for(H in I)ne[Un(H)]=I[H];return ne},get:function(S,I){return I===void 0?this.cache(S):S[this.expando]&&S[this.expando][Un(I)]},access:function(S,I,F){return I===void 0||I&&typeof I=="string"&&F===void 0?this.get(S,I):(this.set(S,I,F),F!==void 0?F:I)},remove:function(S,I){var F,H=S[this.expando];if(H!==void 0){if(I!==void 0)for(Array.isArray(I)?I=I.map(Un):(I=Un(I),I=I in H?[I]:I.match(yn)||[]),F=I.length;F--;)delete H[I[F]];(I===void 0||M.isEmptyObject(H))&&(S.nodeType?S[this.expando]=void 0:delete S[this.expando])}},hasData:function(S){var I=S[this.expando];return I!==void 0&&!M.isEmptyObject(I)}};var Qe=new wn,Kt=new wn,an=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Zt=/[A-Z]/g;function rn(S){return S==="true"?!0:S==="false"?!1:S==="null"?null:S===+S+""?+S:an.test(S)?JSON.parse(S):S}function sn(S,I,F){var H;if(F===void 0&&S.nodeType===1)if(H="data-"+I.replace(Zt,"-$&").toLowerCase(),F=S.getAttribute(H),typeof F=="string"){try{F=rn(F)}catch{}Kt.set(S,I,F)}else F=void 0;return F}M.extend({hasData:function(S){return Kt.hasData(S)||Qe.hasData(S)},data:function(S,I,F){return Kt.access(S,I,F)},removeData:function(S,I){Kt.remove(S,I)},_data:function(S,I,F){return Qe.access(S,I,F)},_removeData:function(S,I){Qe.remove(S,I)}}),M.fn.extend({data:function(S,I){var F,H,ne,re=this[0],se=re&&re.attributes;if(S===void 0){if(this.length&&(ne=Kt.get(re),re.nodeType===1&&!Qe.get(re,"hasDataAttrs"))){for(F=se.length;F--;)se[F]&&(H=se[F].name,H.indexOf("data-")===0&&(H=Un(H.slice(5)),sn(re,H,ne[H])));Qe.set(re,"hasDataAttrs",!0)}return ne}return typeof S=="object"?this.each(function(){Kt.set(this,S)}):Zn(this,function($e){var Pe;if(re&&$e===void 0)return Pe=Kt.get(re,S),Pe!==void 0||(Pe=sn(re,S),Pe!==void 0)?Pe:void 0;this.each(function(){Kt.set(this,S,$e)})},null,I,arguments.length>1,null,!0)},removeData:function(S){return this.each(function(){Kt.remove(this,S)})}}),M.extend({queue:function(S,I,F){var H;if(S)return I=(I||"fx")+"queue",H=Qe.get(S,I),F&&(!H||Array.isArray(F)?H=Qe.access(S,I,M.makeArray(F)):H.push(F)),H||[]},dequeue:function(S,I){I=I||"fx";var F=M.queue(S,I),H=F.length,ne=F.shift(),re=M._queueHooks(S,I),se=function(){M.dequeue(S,I)};ne==="inprogress"&&(ne=F.shift(),H--),ne&&(I==="fx"&&F.unshift("inprogress"),delete re.stop,ne.call(S,se,re)),!H&&re&&re.empty.fire()},_queueHooks:function(S,I){var F=I+"queueHooks";return Qe.get(S,F)||Qe.access(S,F,{empty:M.Callbacks("once memory").add(function(){Qe.remove(S,[I+"queue",F])})})}}),M.fn.extend({queue:function(S,I){var F=2;return typeof S!="string"&&(I=S,S="fx",F--),arguments.length<F?M.queue(this[0],S):I===void 0?this:this.each(function(){var H=M.queue(this,S,I);M._queueHooks(this,S),S==="fx"&&H[0]!=="inprogress"&&M.dequeue(this,S)})},dequeue:function(S){return this.each(function(){M.dequeue(this,S)})},clearQueue:function(S){return this.queue(S||"fx",[])},promise:function(S,I){var F,H=1,ne=M.Deferred(),re=this,se=this.length,$e=function(){--H||ne.resolveWith(re,[re])};for(typeof S!="string"&&(I=S,S=void 0),S=S||"fx";se--;)F=Qe.get(re[se],S+"queueHooks"),F&&F.empty&&(H++,F.empty.add($e));return $e(),ne.promise(I)}});var vn=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Dn=new RegExp("^(?:([+-])=|)("+vn+")([a-z%]*)$","i"),Nn=["Top","Right","Bottom","Left"],nr=W.documentElement,Dr=function(S){return M.contains(S.ownerDocument,S)},yr={composed:!0};nr.getRootNode&&(Dr=function(S){return M.contains(S.ownerDocument,S)||S.getRootNode(yr)===S.ownerDocument});var bi=function(S,I){return S=I||S,S.style.display==="none"||S.style.display===""&&Dr(S)&&M.css(S,"display")==="none"};function pi(S,I,F,H){var ne,re,se=20,$e=H?function(){return H.cur()}:function(){return M.css(S,I,"")},Pe=$e(),ot=F&&F[3]||(M.cssNumber[I]?"":"px"),St=S.nodeType&&(M.cssNumber[I]||ot!=="px"&&+Pe)&&Dn.exec(M.css(S,I));if(St&&St[3]!==ot){for(Pe=Pe/2,ot=ot||St[3],St=+Pe||1;se--;)M.style(S,I,St+ot),(1-re)*(1-(re=$e()/Pe||.5))<=0&&(se=0),St=St/re;St=St*2,M.style(S,I,St+ot),F=F||[]}return F&&(St=+St||+Pe||0,ne=F[1]?St+(F[1]+1)*F[2]:+F[2],H&&(H.unit=ot,H.start=St,H.end=ne)),ne}var Ce={};function oe(S){var I,F=S.ownerDocument,H=S.nodeName,ne=Ce[H];return ne||(I=F.body.appendChild(F.createElement(H)),ne=M.css(I,"display"),I.parentNode.removeChild(I),ne==="none"&&(ne="block"),Ce[H]=ne,ne)}function ae(S,I){for(var F,H,ne=[],re=0,se=S.length;re<se;re++)H=S[re],H.style&&(F=H.style.display,I?(F==="none"&&(ne[re]=Qe.get(H,"display")||null,ne[re]||(H.style.display="")),H.style.display===""&&bi(H)&&(ne[re]=oe(H))):F!=="none"&&(ne[re]="none",Qe.set(H,"display",F)));for(re=0;re<se;re++)ne[re]!=null&&(S[re].style.display=ne[re]);return S}M.fn.extend({show:function(){return ae(this,!0)},hide:function(){return ae(this)},toggle:function(S){return typeof S=="boolean"?S?this.show():this.hide():this.each(function(){bi(this)?M(this).show():M(this).hide()})}});var ye=/^(?:checkbox|radio)$/i,De=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Re=/^$|^module$|\/(?:java|ecma)script/i;(function(){var S=W.createDocumentFragment(),I=S.appendChild(W.createElement("div")),F=W.createElement("input");F.setAttribute("type","radio"),F.setAttribute("checked","checked"),F.setAttribute("name","t"),I.appendChild(F),N.checkClone=I.cloneNode(!0).cloneNode(!0).lastChild.checked,I.innerHTML="<textarea>x</textarea>",N.noCloneChecked=!!I.cloneNode(!0).lastChild.defaultValue,I.innerHTML="<option></option>",N.option=!!I.lastChild})();var Ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td,N.option||(Ge.optgroup=Ge.option=[1,"<select multiple='multiple'>","</select>"]);function Xe(S,I){var F;return typeof S.getElementsByTagName<"u"?F=S.getElementsByTagName(I||"*"):typeof S.querySelectorAll<"u"?F=S.querySelectorAll(I||"*"):F=[],I===void 0||I&&fe(S,I)?M.merge([S],F):F}function Ue(S,I){for(var F=0,H=S.length;F<H;F++)Qe.set(S[F],"globalEval",!I||Qe.get(I[F],"globalEval"))}var je=/<|&#?\w+;/;function ut(S,I,F,H,ne){for(var re,se,$e,Pe,ot,St,Lt=I.createDocumentFragment(),_t=[],tn=0,ir=S.length;tn<ir;tn++)if(re=S[tn],re||re===0)if(ie(re)==="object")M.merge(_t,re.nodeType?[re]:re);else if(!je.test(re))_t.push(I.createTextNode(re));else{for(se=se||Lt.appendChild(I.createElement("div")),$e=(De.exec(re)||["",""])[1].toLowerCase(),Pe=Ge[$e]||Ge._default,se.innerHTML=Pe[1]+M.htmlPrefilter(re)+Pe[2],St=Pe[0];St--;)se=se.lastChild;M.merge(_t,se.childNodes),se=Lt.firstChild,se.textContent=""}for(Lt.textContent="",tn=0;re=_t[tn++];){if(H&&M.inArray(re,H)>-1){ne&&ne.push(re);continue}if(ot=Dr(re),se=Xe(Lt.appendChild(re),"script"),ot&&Ue(se),F)for(St=0;re=se[St++];)Re.test(re.type||"")&&F.push(re)}return Lt}var At=/^([^.]*)(?:\.(.+)|)/;function Tt(){return!0}function gn(){return!1}function On(S,I,F,H,ne,re){var se,$e;if(typeof I=="object"){typeof F!="string"&&(H=H||F,F=void 0);for($e in I)On(S,$e,F,H,I[$e],re);return S}if(H==null&&ne==null?(ne=F,H=F=void 0):ne==null&&(typeof F=="string"?(ne=H,H=void 0):(ne=H,H=F,F=void 0)),ne===!1)ne=gn;else if(!ne)return S;return re===1&&(se=ne,ne=function(Pe){return M().off(Pe),se.apply(this,arguments)},ne.guid=se.guid||(se.guid=M.guid++)),S.each(function(){M.event.add(this,I,ne,H,F)})}M.event={global:{},add:function(S,I,F,H,ne){var re,se,$e,Pe,ot,St,Lt,_t,tn,ir,Cr,_r=Qe.get(S);if(qn(S))for(F.handler&&(re=F,F=re.handler,ne=re.selector),ne&&M.find.matchesSelector(nr,ne),F.guid||(F.guid=M.guid++),(Pe=_r.events)||(Pe=_r.events=Object.create(null)),(se=_r.handle)||(se=_r.handle=function(Di){return typeof M<"u"&&M.event.triggered!==Di.type?M.event.dispatch.apply(S,arguments):void 0}),I=(I||"").match(yn)||[""],ot=I.length;ot--;)$e=At.exec(I[ot])||[],tn=Cr=$e[1],ir=($e[2]||"").split(".").sort(),tn&&(Lt=M.event.special[tn]||{},tn=(ne?Lt.delegateType:Lt.bindType)||tn,Lt=M.event.special[tn]||{},St=M.extend({type:tn,origType:Cr,data:H,handler:F,guid:F.guid,selector:ne,needsContext:ne&&M.expr.match.needsContext.test(ne),namespace:ir.join(".")},re),(_t=Pe[tn])||(_t=Pe[tn]=[],_t.delegateCount=0,(!Lt.setup||Lt.setup.call(S,H,ir,se)===!1)&&S.addEventListener&&S.addEventListener(tn,se)),Lt.add&&(Lt.add.call(S,St),St.handler.guid||(St.handler.guid=F.guid)),ne?_t.splice(_t.delegateCount++,0,St):_t.push(St),M.event.global[tn]=!0)},remove:function(S,I,F,H,ne){var re,se,$e,Pe,ot,St,Lt,_t,tn,ir,Cr,_r=Qe.hasData(S)&&Qe.get(S);if(!(!_r||!(Pe=_r.events))){for(I=(I||"").match(yn)||[""],ot=I.length;ot--;){if($e=At.exec(I[ot])||[],tn=Cr=$e[1],ir=($e[2]||"").split(".").sort(),!tn){for(tn in Pe)M.event.remove(S,tn+I[ot],F,H,!0);continue}for(Lt=M.event.special[tn]||{},tn=(H?Lt.delegateType:Lt.bindType)||tn,_t=Pe[tn]||[],$e=$e[2]&&new RegExp("(^|\\.)"+ir.join("\\.(?:.*\\.|)")+"(\\.|$)"),se=re=_t.length;re--;)St=_t[re],(ne||Cr===St.origType)&&(!F||F.guid===St.guid)&&(!$e||$e.test(St.namespace))&&(!H||H===St.selector||H==="**"&&St.selector)&&(_t.splice(re,1),St.selector&&_t.delegateCount--,Lt.remove&&Lt.remove.call(S,St));se&&!_t.length&&((!Lt.teardown||Lt.teardown.call(S,ir,_r.handle)===!1)&&M.removeEvent(S,tn,_r.handle),delete Pe[tn])}M.isEmptyObject(Pe)&&Qe.remove(S,"handle events")}},dispatch:function(S){var I,F,H,ne,re,se,$e=new Array(arguments.length),Pe=M.event.fix(S),ot=(Qe.get(this,"events")||Object.create(null))[Pe.type]||[],St=M.event.special[Pe.type]||{};for($e[0]=Pe,I=1;I<arguments.length;I++)$e[I]=arguments[I];if(Pe.delegateTarget=this,!(St.preDispatch&&St.preDispatch.call(this,Pe)===!1)){for(se=M.event.handlers.call(this,Pe,ot),I=0;(ne=se[I++])&&!Pe.isPropagationStopped();)for(Pe.currentTarget=ne.elem,F=0;(re=ne.handlers[F++])&&!Pe.isImmediatePropagationStopped();)(!Pe.rnamespace||re.namespace===!1||Pe.rnamespace.test(re.namespace))&&(Pe.handleObj=re,Pe.data=re.data,H=((M.event.special[re.origType]||{}).handle||re.handler).apply(ne.elem,$e),H!==void 0&&(Pe.result=H)===!1&&(Pe.preventDefault(),Pe.stopPropagation()));return St.postDispatch&&St.postDispatch.call(this,Pe),Pe.result}},handlers:function(S,I){var F,H,ne,re,se,$e=[],Pe=I.delegateCount,ot=S.target;if(Pe&&ot.nodeType&&!(S.type==="click"&&S.button>=1)){for(;ot!==this;ot=ot.parentNode||this)if(ot.nodeType===1&&!(S.type==="click"&&ot.disabled===!0)){for(re=[],se={},F=0;F<Pe;F++)H=I[F],ne=H.selector+" ",se[ne]===void 0&&(se[ne]=H.needsContext?M(ne,this).index(ot)>-1:M.find(ne,this,null,[ot]).length),se[ne]&&re.push(H);re.length&&$e.push({elem:ot,handlers:re})}}return ot=this,Pe<I.length&&$e.push({elem:ot,handlers:I.slice(Pe)}),$e},addProp:function(S,I){Object.defineProperty(M.Event.prototype,S,{enumerable:!0,configurable:!0,get:$(I)?function(){if(this.originalEvent)return I(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[S]},set:function(F){Object.defineProperty(this,S,{enumerable:!0,configurable:!0,writable:!0,value:F})}})},fix:function(S){return S[M.expando]?S:new M.Event(S)},special:{load:{noBubble:!0},click:{setup:function(S){var I=this||S;return ye.test(I.type)&&I.click&&fe(I,"input")&&An(I,"click",!0),!1},trigger:function(S){var I=this||S;return ye.test(I.type)&&I.click&&fe(I,"input")&&An(I,"click"),!0},_default:function(S){var I=S.target;return ye.test(I.type)&&I.click&&fe(I,"input")&&Qe.get(I,"click")||fe(I,"a")}},beforeunload:{postDispatch:function(S){S.result!==void 0&&S.originalEvent&&(S.originalEvent.returnValue=S.result)}}}};function An(S,I,F){if(!F){Qe.get(S,I)===void 0&&M.event.add(S,I,Tt);return}Qe.set(S,I,!1),M.event.add(S,I,{namespace:!1,handler:function(H){var ne,re=Qe.get(this,I);if(H.isTrigger&1&&this[I]){if(re)(M.event.special[I]||{}).delegateType&&H.stopPropagation();else if(re=u.call(arguments),Qe.set(this,I,re),this[I](),ne=Qe.get(this,I),Qe.set(this,I,!1),re!==ne)return H.stopImmediatePropagation(),H.preventDefault(),ne}else re&&(Qe.set(this,I,M.event.trigger(re[0],re.slice(1),this)),H.stopPropagation(),H.isImmediatePropagationStopped=Tt)}})}M.removeEvent=function(S,I,F){S.removeEventListener&&S.removeEventListener(I,F)},M.Event=function(S,I){if(!(this instanceof M.Event))return new M.Event(S,I);S&&S.type?(this.originalEvent=S,this.type=S.type,this.isDefaultPrevented=S.defaultPrevented||S.defaultPrevented===void 0&&S.returnValue===!1?Tt:gn,this.target=S.target&&S.target.nodeType===3?S.target.parentNode:S.target,this.currentTarget=S.currentTarget,this.relatedTarget=S.relatedTarget):this.type=S,I&&M.extend(this,I),this.timeStamp=S&&S.timeStamp||Date.now(),this[M.expando]=!0},M.Event.prototype={constructor:M.Event,isDefaultPrevented:gn,isPropagationStopped:gn,isImmediatePropagationStopped:gn,isSimulated:!1,preventDefault:function(){var S=this.originalEvent;this.isDefaultPrevented=Tt,S&&!this.isSimulated&&S.preventDefault()},stopPropagation:function(){var S=this.originalEvent;this.isPropagationStopped=Tt,S&&!this.isSimulated&&S.stopPropagation()},stopImmediatePropagation:function(){var S=this.originalEvent;this.isImmediatePropagationStopped=Tt,S&&!this.isSimulated&&S.stopImmediatePropagation(),this.stopPropagation()}},M.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},M.event.addProp),M.each({focus:"focusin",blur:"focusout"},function(S,I){function F(H){if(W.documentMode){var ne=Qe.get(this,"handle"),re=M.event.fix(H);re.type=H.type==="focusin"?"focus":"blur",re.isSimulated=!0,ne(H),re.target===re.currentTarget&&ne(re)}else M.event.simulate(I,H.target,M.event.fix(H))}M.event.special[S]={setup:function(){var H;if(An(this,S,!0),W.documentMode)H=Qe.get(this,I),H||this.addEventListener(I,F),Qe.set(this,I,(H||0)+1);else return!1},trigger:function(){return An(this,S),!0},teardown:function(){var H;if(W.documentMode)H=Qe.get(this,I)-1,H?Qe.set(this,I,H):(this.removeEventListener(I,F),Qe.remove(this,I));else return!1},_default:function(H){return Qe.get(H.target,S)},delegateType:I},M.event.special[I]={setup:function(){var H=this.ownerDocument||this.document||this,ne=W.documentMode?this:H,re=Qe.get(ne,I);re||(W.documentMode?this.addEventListener(I,F):H.addEventListener(S,F,!0)),Qe.set(ne,I,(re||0)+1)},teardown:function(){var H=this.ownerDocument||this.document||this,ne=W.documentMode?this:H,re=Qe.get(ne,I)-1;re?Qe.set(ne,I,re):(W.documentMode?this.removeEventListener(I,F):H.removeEventListener(S,F,!0),Qe.remove(ne,I))}}}),M.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(S,I){M.event.special[S]={delegateType:I,bindType:I,handle:function(F){var H,ne=this,re=F.relatedTarget,se=F.handleObj;return(!re||re!==ne&&!M.contains(ne,re))&&(F.type=se.origType,H=se.handler.apply(this,arguments),F.type=I),H}}}),M.fn.extend({on:function(S,I,F,H){return On(this,S,I,F,H)},one:function(S,I,F,H){return On(this,S,I,F,H,1)},off:function(S,I,F){var H,ne;if(S&&S.preventDefault&&S.handleObj)return H=S.handleObj,M(S.delegateTarget).off(H.namespace?H.origType+"."+H.namespace:H.origType,H.selector,H.handler),this;if(typeof S=="object"){for(ne in S)this.off(ne,I,S[ne]);return this}return(I===!1||typeof I=="function")&&(F=I,I=void 0),F===!1&&(F=gn),this.each(function(){M.event.remove(this,S,F,I)})}});var Ln=/<script|<style|<link/i,Xn=/checked\s*(?:[^=]|=\s*.checked.)/i,wr=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Er(S,I){return fe(S,"table")&&fe(I.nodeType!==11?I:I.firstChild,"tr")&&M(S).children("tbody")[0]||S}function Or(S){return S.type=(S.getAttribute("type")!==null)+"/"+S.type,S}function Ze(S){return(S.type||"").slice(0,5)==="true/"?S.type=S.type.slice(5):S.removeAttribute("type"),S}function Se(S,I){var F,H,ne,re,se,$e,Pe;if(I.nodeType===1){if(Qe.hasData(S)&&(re=Qe.get(S),Pe=re.events,Pe)){Qe.remove(I,"handle events");for(ne in Pe)for(F=0,H=Pe[ne].length;F<H;F++)M.event.add(I,ne,Pe[ne][F])}Kt.hasData(S)&&(se=Kt.access(S),$e=M.extend({},se),Kt.set(I,$e))}}function ct(S,I){var F=I.nodeName.toLowerCase();F==="input"&&ye.test(S.type)?I.checked=S.checked:(F==="input"||F==="textarea")&&(I.defaultValue=S.defaultValue)}function Rt(S,I,F,H){I=f(I);var ne,re,se,$e,Pe,ot,St=0,Lt=S.length,_t=Lt-1,tn=I[0],ir=$(tn);if(ir||Lt>1&&typeof tn=="string"&&!N.checkClone&&Xn.test(tn))return S.each(function(Cr){var _r=S.eq(Cr);ir&&(I[0]=tn.call(this,Cr,_r.html())),Rt(_r,I,F,H)});if(Lt&&(ne=ut(I,S[0].ownerDocument,!1,S,H),re=ne.firstChild,ne.childNodes.length===1&&(ne=re),re||H)){for(se=M.map(Xe(ne,"script"),Or),$e=se.length;St<Lt;St++)Pe=ne,St!==_t&&(Pe=M.clone(Pe,!0,!0),$e&&M.merge(se,Xe(Pe,"script"))),F.call(S[St],Pe,St);if($e)for(ot=se[se.length-1].ownerDocument,M.map(se,Ze),St=0;St<$e;St++)Pe=se[St],Re.test(Pe.type||"")&&!Qe.access(Pe,"globalEval")&&M.contains(ot,Pe)&&(Pe.src&&(Pe.type||"").toLowerCase()!=="module"?M._evalUrl&&!Pe.noModule&&M._evalUrl(Pe.src,{nonce:Pe.nonce||Pe.getAttribute("nonce")},ot):Y(Pe.textContent.replace(wr,""),Pe,ot))}return S}function un(S,I,F){for(var H,ne=I?M.filter(I,S):S,re=0;(H=ne[re])!=null;re++)!F&&H.nodeType===1&&M.cleanData(Xe(H)),H.parentNode&&(F&&Dr(H)&&Ue(Xe(H,"script")),H.parentNode.removeChild(H));return S}M.extend({htmlPrefilter:function(S){return S},clone:function(S,I,F){var H,ne,re,se,$e=S.cloneNode(!0),Pe=Dr(S);if(!N.noCloneChecked&&(S.nodeType===1||S.nodeType===11)&&!M.isXMLDoc(S))for(se=Xe($e),re=Xe(S),H=0,ne=re.length;H<ne;H++)ct(re[H],se[H]);if(I)if(F)for(re=re||Xe(S),se=se||Xe($e),H=0,ne=re.length;H<ne;H++)Se(re[H],se[H]);else Se(S,$e);return se=Xe($e,"script"),se.length>0&&Ue(se,!Pe&&Xe(S,"script")),$e},cleanData:function(S){for(var I,F,H,ne=M.event.special,re=0;(F=S[re])!==void 0;re++)if(qn(F)){if(I=F[Qe.expando]){if(I.events)for(H in I.events)ne[H]?M.event.remove(F,H):M.removeEvent(F,H,I.handle);F[Qe.expando]=void 0}F[Kt.expando]&&(F[Kt.expando]=void 0)}}}),M.fn.extend({detach:function(S){return un(this,S,!0)},remove:function(S){return un(this,S)},text:function(S){return Zn(this,function(I){return I===void 0?M.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=I)})},null,S,arguments.length)},append:function(){return Rt(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var I=Er(this,S);I.appendChild(S)}})},prepend:function(){return Rt(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var I=Er(this,S);I.insertBefore(S,I.firstChild)}})},before:function(){return Rt(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this)})},after:function(){return Rt(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this.nextSibling)})},empty:function(){for(var S,I=0;(S=this[I])!=null;I++)S.nodeType===1&&(M.cleanData(Xe(S,!1)),S.textContent="");return this},clone:function(S,I){return S=S??!1,I=I??S,this.map(function(){return M.clone(this,S,I)})},html:function(S){return Zn(this,function(I){var F=this[0]||{},H=0,ne=this.length;if(I===void 0&&F.nodeType===1)return F.innerHTML;if(typeof I=="string"&&!Ln.test(I)&&!Ge[(De.exec(I)||["",""])[1].toLowerCase()]){I=M.htmlPrefilter(I);try{for(;H<ne;H++)F=this[H]||{},F.nodeType===1&&(M.cleanData(Xe(F,!1)),F.innerHTML=I);F=0}catch{}}F&&this.empty().append(I)},null,S,arguments.length)},replaceWith:function(){var S=[];return Rt(this,arguments,function(I){var F=this.parentNode;M.inArray(this,S)<0&&(M.cleanData(Xe(this)),F&&F.replaceChild(I,this))},S)}}),M.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(S,I){M.fn[S]=function(F){for(var H,ne=[],re=M(F),se=re.length-1,$e=0;$e<=se;$e++)H=$e===se?this:this.clone(!0),M(re[$e])[I](H),o.apply(ne,H.get());return this.pushStack(ne)}});var fr=new RegExp("^("+vn+")(?!px)[a-z%]+$","i"),Ar=/^--/,Vn=function(S){var I=S.ownerDocument.defaultView;return(!I||!I.opener)&&(I=t),I.getComputedStyle(S)},Do=function(S,I,F){var H,ne,re={};for(ne in I)re[ne]=S.style[ne],S.style[ne]=I[ne];H=F.call(S);for(ne in I)S.style[ne]=re[ne];return H},go=new RegExp(Nn.join("|"),"i");(function(){function S(){if(ot){Pe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ot.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nr.appendChild(Pe).appendChild(ot);var St=t.getComputedStyle(ot);F=St.top!=="1%",$e=I(St.marginLeft)===12,ot.style.right="60%",re=I(St.right)===36,H=I(St.width)===36,ot.style.position="absolute",ne=I(ot.offsetWidth/3)===12,nr.removeChild(Pe),ot=null}}function I(St){return Math.round(parseFloat(St))}var F,H,ne,re,se,$e,Pe=W.createElement("div"),ot=W.createElement("div");ot.style&&(ot.style.backgroundClip="content-box",ot.cloneNode(!0).style.backgroundClip="",N.clearCloneStyle=ot.style.backgroundClip==="content-box",M.extend(N,{boxSizingReliable:function(){return S(),H},pixelBoxStyles:function(){return S(),re},pixelPosition:function(){return S(),F},reliableMarginLeft:function(){return S(),$e},scrollboxSize:function(){return S(),ne},reliableTrDimensions:function(){var St,Lt,_t,tn;return se==null&&(St=W.createElement("table"),Lt=W.createElement("tr"),_t=W.createElement("div"),St.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Lt.style.cssText="border:1px solid",Lt.style.height="1px",_t.style.height="9px",_t.style.display="block",nr.appendChild(St).appendChild(Lt).appendChild(_t),tn=t.getComputedStyle(Lt),se=parseInt(tn.height,10)+parseInt(tn.borderTopWidth,10)+parseInt(tn.borderBottomWidth,10)===Lt.offsetHeight,nr.removeChild(St)),se}}))})();function _o(S,I,F){var H,ne,re,se,$e=Ar.test(I),Pe=S.style;return F=F||Vn(S),F&&(se=F.getPropertyValue(I)||F[I],$e&&se&&(se=se.replace(ze,"$1")||void 0),se===""&&!Dr(S)&&(se=M.style(S,I)),!N.pixelBoxStyles()&&fr.test(se)&&go.test(I)&&(H=Pe.width,ne=Pe.minWidth,re=Pe.maxWidth,Pe.minWidth=Pe.maxWidth=Pe.width=se,se=F.width,Pe.width=H,Pe.minWidth=ne,Pe.maxWidth=re)),se!==void 0?se+"":se}function ra(S,I){return{get:function(){if(S()){delete this.get;return}return(this.get=I).apply(this,arguments)}}}var $i=["Webkit","Moz","ms"],Ui=W.createElement("div").style,yo={};function Vi(S){for(var I=S[0].toUpperCase()+S.slice(1),F=$i.length;F--;)if(S=$i[F]+I,S in Ui)return S}function Ba(S){var I=M.cssProps[S]||yo[S];return I||(S in Ui?S:yo[S]=Vi(S)||S)}var ja=/^(none|table(?!-c[ea]).+)/,Al={position:"absolute",visibility:"hidden",display:"block"},vt={letterSpacing:"0",fontWeight:"400"};function fa(S,I,F){var H=Dn.exec(I);return H?Math.max(0,H[2]-(F||0))+(H[3]||"px"):I}function ti(S,I,F,H,ne,re){var se=I==="width"?1:0,$e=0,Pe=0,ot=0;if(F===(H?"border":"content"))return 0;for(;se<4;se+=2)F==="margin"&&(ot+=M.css(S,F+Nn[se],!0,ne)),H?(F==="content"&&(Pe-=M.css(S,"padding"+Nn[se],!0,ne)),F!=="margin"&&(Pe-=M.css(S,"border"+Nn[se]+"Width",!0,ne))):(Pe+=M.css(S,"padding"+Nn[se],!0,ne),F!=="padding"?Pe+=M.css(S,"border"+Nn[se]+"Width",!0,ne):$e+=M.css(S,"border"+Nn[se]+"Width",!0,ne));return!H&&re>=0&&(Pe+=Math.max(0,Math.ceil(S["offset"+I[0].toUpperCase()+I.slice(1)]-re-Pe-$e-.5))||0),Pe+ot}function Gi(S,I,F){var H=Vn(S),ne=!N.boxSizingReliable()||F,re=ne&&M.css(S,"boxSizing",!1,H)==="border-box",se=re,$e=_o(S,I,H),Pe="offset"+I[0].toUpperCase()+I.slice(1);if(fr.test($e)){if(!F)return $e;$e="auto"}return(!N.boxSizingReliable()&&re||!N.reliableTrDimensions()&&fe(S,"tr")||$e==="auto"||!parseFloat($e)&&M.css(S,"display",!1,H)==="inline")&&S.getClientRects().length&&(re=M.css(S,"boxSizing",!1,H)==="border-box",se=Pe in S,se&&($e=S[Pe])),$e=parseFloat($e)||0,$e+ti(S,I,F||(re?"border":"content"),se,H,$e)+"px"}M.extend({cssHooks:{opacity:{get:function(S,I){if(I){var F=_o(S,"opacity");return F===""?"1":F}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(S,I,F,H){if(!(!S||S.nodeType===3||S.nodeType===8||!S.style)){var ne,re,se,$e=Un(I),Pe=Ar.test(I),ot=S.style;if(Pe||(I=Ba($e)),se=M.cssHooks[I]||M.cssHooks[$e],F!==void 0){if(re=typeof F,re==="string"&&(ne=Dn.exec(F))&&ne[1]&&(F=pi(S,I,ne),re="number"),F==null||F!==F)return;re==="number"&&!Pe&&(F+=ne&&ne[3]||(M.cssNumber[$e]?"":"px")),!N.clearCloneStyle&&F===""&&I.indexOf("background")===0&&(ot[I]="inherit"),(!se||!("set"in se)||(F=se.set(S,F,H))!==void 0)&&(Pe?ot.setProperty(I,F):ot[I]=F)}else return se&&"get"in se&&(ne=se.get(S,!1,H))!==void 0?ne:ot[I]}},css:function(S,I,F,H){var ne,re,se,$e=Un(I),Pe=Ar.test(I);return Pe||(I=Ba($e)),se=M.cssHooks[I]||M.cssHooks[$e],se&&"get"in se&&(ne=se.get(S,!0,F)),ne===void 0&&(ne=_o(S,I,H)),ne==="normal"&&I in vt&&(ne=vt[I]),F===""||F?(re=parseFloat(ne),F===!0||isFinite(re)?re||0:ne):ne}}),M.each(["height","width"],function(S,I){M.cssHooks[I]={get:function(F,H,ne){if(H)return ja.test(M.css(F,"display"))&&(!F.getClientRects().length||!F.getBoundingClientRect().width)?Do(F,Al,function(){return Gi(F,I,ne)}):Gi(F,I,ne)},set:function(F,H,ne){var re,se=Vn(F),$e=!N.scrollboxSize()&&se.position==="absolute",Pe=$e||ne,ot=Pe&&M.css(F,"boxSizing",!1,se)==="border-box",St=ne?ti(F,I,ne,ot,se):0;return ot&&$e&&(St-=Math.ceil(F["offset"+I[0].toUpperCase()+I.slice(1)]-parseFloat(se[I])-ti(F,I,"border",!1,se)-.5)),St&&(re=Dn.exec(H))&&(re[3]||"px")!=="px"&&(F.style[I]=H,H=M.css(F,I)),fa(F,H,St)}}}),M.cssHooks.marginLeft=ra(N.reliableMarginLeft,function(S,I){if(I)return(parseFloat(_o(S,"marginLeft"))||S.getBoundingClientRect().left-Do(S,{marginLeft:0},function(){return S.getBoundingClientRect().left}))+"px"}),M.each({margin:"",padding:"",border:"Width"},function(S,I){M.cssHooks[S+I]={expand:function(F){for(var H=0,ne={},re=typeof F=="string"?F.split(" "):[F];H<4;H++)ne[S+Nn[H]+I]=re[H]||re[H-2]||re[0];return ne}},S!=="margin"&&(M.cssHooks[S+I].set=fa)}),M.fn.extend({css:function(S,I){return Zn(this,function(F,H,ne){var re,se,$e={},Pe=0;if(Array.isArray(H)){for(re=Vn(F),se=H.length;Pe<se;Pe++)$e[H[Pe]]=M.css(F,H[Pe],!1,re);return $e}return ne!==void 0?M.style(F,H,ne):M.css(F,H)},S,I,arguments.length>1)}});function Oo(S,I,F,H,ne){return new Oo.prototype.init(S,I,F,H,ne)}M.Tween=Oo,Oo.prototype={constructor:Oo,init:function(S,I,F,H,ne,re){this.elem=S,this.prop=F,this.easing=ne||M.easing._default,this.options=I,this.start=this.now=this.cur(),this.end=H,this.unit=re||(M.cssNumber[F]?"":"px")},cur:function(){var S=Oo.propHooks[this.prop];return S&&S.get?S.get(this):Oo.propHooks._default.get(this)},run:function(S){var I,F=Oo.propHooks[this.prop];return this.options.duration?this.pos=I=M.easing[this.easing](S,this.options.duration*S,0,1,this.options.duration):this.pos=I=S,this.now=(this.end-this.start)*I+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),F&&F.set?F.set(this):Oo.propHooks._default.set(this),this}},Oo.prototype.init.prototype=Oo.prototype,Oo.propHooks={_default:{get:function(S){var I;return S.elem.nodeType!==1||S.elem[S.prop]!=null&&S.elem.style[S.prop]==null?S.elem[S.prop]:(I=M.css(S.elem,S.prop,""),!I||I==="auto"?0:I)},set:function(S){M.fx.step[S.prop]?M.fx.step[S.prop](S):S.elem.nodeType===1&&(M.cssHooks[S.prop]||S.elem.style[Ba(S.prop)]!=null)?M.style(S.elem,S.prop,S.now+S.unit):S.elem[S.prop]=S.now}}},Oo.propHooks.scrollTop=Oo.propHooks.scrollLeft={set:function(S){S.elem.nodeType&&S.elem.parentNode&&(S.elem[S.prop]=S.now)}},M.easing={linear:function(S){return S},swing:function(S){return .5-Math.cos(S*Math.PI)/2},_default:"swing"},M.fx=Oo.prototype.init,M.fx.step={};var Ro,hc,Up=/^(?:toggle|show|hide)$/,pc=/queueHooks$/;function dn(){hc&&(W.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(dn):t.setTimeout(dn,M.fx.interval),M.fx.tick())}function vr(){return t.setTimeout(function(){Ro=void 0}),Ro=Date.now()}function dr(S,I){var F,H=0,ne={height:S};for(I=I?1:0;H<4;H+=2-I)F=Nn[H],ne["margin"+F]=ne["padding"+F]=S;return I&&(ne.opacity=ne.width=S),ne}function Vo(S,I,F){for(var H,ne=(wi.tweeners[I]||[]).concat(wi.tweeners["*"]),re=0,se=ne.length;re<se;re++)if(H=ne[re].call(F,I,S))return H}function $a(S,I,F){var H,ne,re,se,$e,Pe,ot,St,Lt="width"in I||"height"in I,_t=this,tn={},ir=S.style,Cr=S.nodeType&&bi(S),_r=Qe.get(S,"fxshow");F.queue||(se=M._queueHooks(S,"fx"),se.unqueued==null&&(se.unqueued=0,$e=se.empty.fire,se.empty.fire=function(){se.unqueued||$e()}),se.unqueued++,_t.always(function(){_t.always(function(){se.unqueued--,M.queue(S,"fx").length||se.empty.fire()})}));for(H in I)if(ne=I[H],Up.test(ne)){if(delete I[H],re=re||ne==="toggle",ne===(Cr?"hide":"show"))if(ne==="show"&&_r&&_r[H]!==void 0)Cr=!0;else continue;tn[H]=_r&&_r[H]||M.style(S,H)}if(Pe=!M.isEmptyObject(I),!(!Pe&&M.isEmptyObject(tn))){Lt&&S.nodeType===1&&(F.overflow=[ir.overflow,ir.overflowX,ir.overflowY],ot=_r&&_r.display,ot==null&&(ot=Qe.get(S,"display")),St=M.css(S,"display"),St==="none"&&(ot?St=ot:(ae([S],!0),ot=S.style.display||ot,St=M.css(S,"display"),ae([S]))),(St==="inline"||St==="inline-block"&&ot!=null)&&M.css(S,"float")==="none"&&(Pe||(_t.done(function(){ir.display=ot}),ot==null&&(St=ir.display,ot=St==="none"?"":St)),ir.display="inline-block")),F.overflow&&(ir.overflow="hidden",_t.always(function(){ir.overflow=F.overflow[0],ir.overflowX=F.overflow[1],ir.overflowY=F.overflow[2]})),Pe=!1;for(H in tn)Pe||(_r?"hidden"in _r&&(Cr=_r.hidden):_r=Qe.access(S,"fxshow",{display:ot}),re&&(_r.hidden=!Cr),Cr&&ae([S],!0),_t.done(function(){Cr||ae([S]),Qe.remove(S,"fxshow");for(H in tn)M.style(S,H,tn[H])})),Pe=Vo(Cr?_r[H]:0,H,_t),H in _r||(_r[H]=Pe.start,Cr&&(Pe.end=Pe.start,Pe.start=0))}}function gr(S,I){var F,H,ne,re,se;for(F in S)if(H=Un(F),ne=I[H],re=S[F],Array.isArray(re)&&(ne=re[1],re=S[F]=re[0]),F!==H&&(S[H]=re,delete S[F]),se=M.cssHooks[H],se&&"expand"in se){re=se.expand(re),delete S[H];for(F in re)F in S||(S[F]=re[F],I[F]=ne)}else I[H]=ne}function wi(S,I,F){var H,ne,re=0,se=wi.prefilters.length,$e=M.Deferred().always(function(){delete Pe.elem}),Pe=function(){if(ne)return!1;for(var Lt=Ro||vr(),_t=Math.max(0,ot.startTime+ot.duration-Lt),tn=_t/ot.duration||0,ir=1-tn,Cr=0,_r=ot.tweens.length;Cr<_r;Cr++)ot.tweens[Cr].run(ir);return $e.notifyWith(S,[ot,ir,_t]),ir<1&&_r?_t:(_r||$e.notifyWith(S,[ot,1,0]),$e.resolveWith(S,[ot]),!1)},ot=$e.promise({elem:S,props:M.extend({},I),opts:M.extend(!0,{specialEasing:{},easing:M.easing._default},F),originalProperties:I,originalOptions:F,startTime:Ro||vr(),duration:F.duration,tweens:[],createTween:function(Lt,_t){var tn=M.Tween(S,ot.opts,Lt,_t,ot.opts.specialEasing[Lt]||ot.opts.easing);return ot.tweens.push(tn),tn},stop:function(Lt){var _t=0,tn=Lt?ot.tweens.length:0;if(ne)return this;for(ne=!0;_t<tn;_t++)ot.tweens[_t].run(1);return Lt?($e.notifyWith(S,[ot,1,0]),$e.resolveWith(S,[ot,Lt])):$e.rejectWith(S,[ot,Lt]),this}}),St=ot.props;for(gr(St,ot.opts.specialEasing);re<se;re++)if(H=wi.prefilters[re].call(ot,S,St,ot.opts),H)return $(H.stop)&&(M._queueHooks(ot.elem,ot.opts.queue).stop=H.stop.bind(H)),H;return M.map(St,Vo,ot),$(ot.opts.start)&&ot.opts.start.call(S,ot),ot.progress(ot.opts.progress).done(ot.opts.done,ot.opts.complete).fail(ot.opts.fail).always(ot.opts.always),M.fx.timer(M.extend(Pe,{elem:S,anim:ot,queue:ot.opts.queue})),ot}M.Animation=M.extend(wi,{tweeners:{"*":[function(S,I){var F=this.createTween(S,I);return pi(F.elem,S,Dn.exec(I),F),F}]},tweener:function(S,I){$(S)?(I=S,S=["*"]):S=S.match(yn);for(var F,H=0,ne=S.length;H<ne;H++)F=S[H],wi.tweeners[F]=wi.tweeners[F]||[],wi.tweeners[F].unshift(I)},prefilters:[$a],prefilter:function(S,I){I?wi.prefilters.unshift(S):wi.prefilters.push(S)}}),M.speed=function(S,I,F){var H=S&&typeof S=="object"?M.extend({},S):{complete:F||!F&&I||$(S)&&S,duration:S,easing:F&&I||I&&!$(I)&&I};return M.fx.off?H.duration=0:typeof H.duration!="number"&&(H.duration in M.fx.speeds?H.duration=M.fx.speeds[H.duration]:H.duration=M.fx.speeds._default),(H.queue==null||H.queue===!0)&&(H.queue="fx"),H.old=H.complete,H.complete=function(){$(H.old)&&H.old.call(this),H.queue&&M.dequeue(this,H.queue)},H},M.fn.extend({fadeTo:function(S,I,F,H){return this.filter(bi).css("opacity",0).show().end().animate({opacity:I},S,F,H)},animate:function(S,I,F,H){var ne=M.isEmptyObject(S),re=M.speed(I,F,H),se=function(){var $e=wi(this,M.extend({},S),re);(ne||Qe.get(this,"finish"))&&$e.stop(!0)};return se.finish=se,ne||re.queue===!1?this.each(se):this.queue(re.queue,se)},stop:function(S,I,F){var H=function(ne){var re=ne.stop;delete ne.stop,re(F)};return typeof S!="string"&&(F=I,I=S,S=void 0),I&&this.queue(S||"fx",[]),this.each(function(){var ne=!0,re=S!=null&&S+"queueHooks",se=M.timers,$e=Qe.get(this);if(re)$e[re]&&$e[re].stop&&H($e[re]);else for(re in $e)$e[re]&&$e[re].stop&&pc.test(re)&&H($e[re]);for(re=se.length;re--;)se[re].elem===this&&(S==null||se[re].queue===S)&&(se[re].anim.stop(F),ne=!1,se.splice(re,1));(ne||!F)&&M.dequeue(this,S)})},finish:function(S){return S!==!1&&(S=S||"fx"),this.each(function(){var I,F=Qe.get(this),H=F[S+"queue"],ne=F[S+"queueHooks"],re=M.timers,se=H?H.length:0;for(F.finish=!0,M.queue(this,S,[]),ne&&ne.stop&&ne.stop.call(this,!0),I=re.length;I--;)re[I].elem===this&&re[I].queue===S&&(re[I].anim.stop(!0),re.splice(I,1));for(I=0;I<se;I++)H[I]&&H[I].finish&&H[I].finish.call(this);delete F.finish})}}),M.each(["toggle","show","hide"],function(S,I){var F=M.fn[I];M.fn[I]=function(H,ne,re){return H==null||typeof H=="boolean"?F.apply(this,arguments):this.animate(dr(I,!0),H,ne,re)}}),M.each({slideDown:dr("show"),slideUp:dr("hide"),slideToggle:dr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(S,I){M.fn[S]=function(F,H,ne){return this.animate(I,F,H,ne)}}),M.timers=[],M.fx.tick=function(){var S,I=0,F=M.timers;for(Ro=Date.now();I<F.length;I++)S=F[I],!S()&&F[I]===S&&F.splice(I--,1);F.length||M.fx.stop(),Ro=void 0},M.fx.timer=function(S){M.timers.push(S),M.fx.start()},M.fx.interval=13,M.fx.start=function(){hc||(hc=!0,dn())},M.fx.stop=function(){hc=null},M.fx.speeds={slow:600,fast:200,_default:400},M.fn.delay=function(S,I){return S=M.fx&&M.fx.speeds[S]||S,I=I||"fx",this.queue(I,function(F,H){var ne=t.setTimeout(F,S);H.stop=function(){t.clearTimeout(ne)}})},function(){var S=W.createElement("input"),I=W.createElement("select"),F=I.appendChild(W.createElement("option"));S.type="checkbox",N.checkOn=S.value!=="",N.optSelected=F.selected,S=W.createElement("input"),S.value="t",S.type="radio",N.radioValue=S.value==="t"}();var fc,Ua=M.expr.attrHandle;M.fn.extend({attr:function(S,I){return Zn(this,M.attr,S,I,arguments.length>1)},removeAttr:function(S){return this.each(function(){M.removeAttr(this,S)})}}),M.extend({attr:function(S,I,F){var H,ne,re=S.nodeType;if(!(re===3||re===8||re===2)){if(typeof S.getAttribute>"u")return M.prop(S,I,F);if((re!==1||!M.isXMLDoc(S))&&(ne=M.attrHooks[I.toLowerCase()]||(M.expr.match.bool.test(I)?fc:void 0)),F!==void 0){if(F===null){M.removeAttr(S,I);return}return ne&&"set"in ne&&(H=ne.set(S,F,I))!==void 0?H:(S.setAttribute(I,F+""),F)}return ne&&"get"in ne&&(H=ne.get(S,I))!==null?H:(H=M.find.attr(S,I),H??void 0)}},attrHooks:{type:{set:function(S,I){if(!N.radioValue&&I==="radio"&&fe(S,"input")){var F=S.value;return S.setAttribute("type",I),F&&(S.value=F),I}}}},removeAttr:function(S,I){var F,H=0,ne=I&&I.match(yn);if(ne&&S.nodeType===1)for(;F=ne[H++];)S.removeAttribute(F)}}),fc={set:function(S,I,F){return I===!1?M.removeAttr(S,F):S.setAttribute(F,F),F}},M.each(M.expr.match.bool.source.match(/\w+/g),function(S,I){var F=Ua[I]||M.find.attr;Ua[I]=function(H,ne,re){var se,$e,Pe=ne.toLowerCase();return re||($e=Ua[Pe],Ua[Pe]=se,se=F(H,ne,re)!=null?Pe:null,Ua[Pe]=$e),se}});var ma=/^(?:input|select|textarea|button)$/i,ui=/^(?:a|area)$/i;M.fn.extend({prop:function(S,I){return Zn(this,M.prop,S,I,arguments.length>1)},removeProp:function(S){return this.each(function(){delete this[M.propFix[S]||S]})}}),M.extend({prop:function(S,I,F){var H,ne,re=S.nodeType;if(!(re===3||re===8||re===2))return(re!==1||!M.isXMLDoc(S))&&(I=M.propFix[I]||I,ne=M.propHooks[I]),F!==void 0?ne&&"set"in ne&&(H=ne.set(S,F,I))!==void 0?H:S[I]=F:ne&&"get"in ne&&(H=ne.get(S,I))!==null?H:S[I]},propHooks:{tabIndex:{get:function(S){var I=M.find.attr(S,"tabindex");return I?parseInt(I,10):ma.test(S.nodeName)||ui.test(S.nodeName)&&S.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),N.optSelected||(M.propHooks.selected={get:function(S){var I=S.parentNode;return I&&I.parentNode&&I.parentNode.selectedIndex,null},set:function(S){var I=S.parentNode;I&&(I.selectedIndex,I.parentNode&&I.parentNode.selectedIndex)}}),M.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){M.propFix[this.toLowerCase()]=this});function Ks(S){var I=S.match(yn)||[];return I.join(" ")}function Lo(S){return S.getAttribute&&S.getAttribute("class")||""}function Ml(S){return Array.isArray(S)?S:typeof S=="string"?S.match(yn)||[]:[]}M.fn.extend({addClass:function(S){var I,F,H,ne,re,se;return $(S)?this.each(function($e){M(this).addClass(S.call(this,$e,Lo(this)))}):(I=Ml(S),I.length?this.each(function(){if(H=Lo(this),F=this.nodeType===1&&" "+Ks(H)+" ",F){for(re=0;re<I.length;re++)ne=I[re],F.indexOf(" "+ne+" ")<0&&(F+=ne+" ");se=Ks(F),H!==se&&this.setAttribute("class",se)}}):this)},removeClass:function(S){var I,F,H,ne,re,se;return $(S)?this.each(function($e){M(this).removeClass(S.call(this,$e,Lo(this)))}):arguments.length?(I=Ml(S),I.length?this.each(function(){if(H=Lo(this),F=this.nodeType===1&&" "+Ks(H)+" ",F){for(re=0;re<I.length;re++)for(ne=I[re];F.indexOf(" "+ne+" ")>-1;)F=F.replace(" "+ne+" "," ");se=Ks(F),H!==se&&this.setAttribute("class",se)}}):this):this.attr("class","")},toggleClass:function(S,I){var F,H,ne,re,se=typeof S,$e=se==="string"||Array.isArray(S);return $(S)?this.each(function(Pe){M(this).toggleClass(S.call(this,Pe,Lo(this),I),I)}):typeof I=="boolean"&&$e?I?this.addClass(S):this.removeClass(S):(F=Ml(S),this.each(function(){if($e)for(re=M(this),ne=0;ne<F.length;ne++)H=F[ne],re.hasClass(H)?re.removeClass(H):re.addClass(H);else(S===void 0||se==="boolean")&&(H=Lo(this),H&&Qe.set(this,"__className__",H),this.setAttribute&&this.setAttribute("class",H||S===!1?"":Qe.get(this,"__className__")||""))}))},hasClass:function(S){var I,F,H=0;for(I=" "+S+" ";F=this[H++];)if(F.nodeType===1&&(" "+Ks(Lo(F))+" ").indexOf(I)>-1)return!0;return!1}});var au=/\r/g;M.fn.extend({val:function(S){var I,F,H,ne=this[0];return arguments.length?(H=$(S),this.each(function(re){var se;this.nodeType===1&&(H?se=S.call(this,re,M(this).val()):se=S,se==null?se="":typeof se=="number"?se+="":Array.isArray(se)&&(se=M.map(se,function($e){return $e==null?"":$e+""})),I=M.valHooks[this.type]||M.valHooks[this.nodeName.toLowerCase()],(!I||!("set"in I)||I.set(this,se,"value")===void 0)&&(this.value=se))})):ne?(I=M.valHooks[ne.type]||M.valHooks[ne.nodeName.toLowerCase()],I&&"get"in I&&(F=I.get(ne,"value"))!==void 0?F:(F=ne.value,typeof F=="string"?F.replace(au,""):F??"")):void 0}}),M.extend({valHooks:{option:{get:function(S){var I=M.find.attr(S,"value");return I??Ks(M.text(S))}},select:{get:function(S){var I,F,H,ne=S.options,re=S.selectedIndex,se=S.type==="select-one",$e=se?null:[],Pe=se?re+1:ne.length;for(re<0?H=Pe:H=se?re:0;H<Pe;H++)if(F=ne[H],(F.selected||H===re)&&!F.disabled&&(!F.parentNode.disabled||!fe(F.parentNode,"optgroup"))){if(I=M(F).val(),se)return I;$e.push(I)}return $e},set:function(S,I){for(var F,H,ne=S.options,re=M.makeArray(I),se=ne.length;se--;)H=ne[se],(H.selected=M.inArray(M.valHooks.option.get(H),re)>-1)&&(F=!0);return F||(S.selectedIndex=-1),re}}}}),M.each(["radio","checkbox"],function(){M.valHooks[this]={set:function(S,I){if(Array.isArray(I))return S.checked=M.inArray(M(S).val(),I)>-1}},N.checkOn||(M.valHooks[this].get=function(S){return S.getAttribute("value")===null?"on":S.value})});var Dl=t.location,bh={guid:Date.now()},Ol=/\?/;M.parseXML=function(S){var I,F;if(!S||typeof S!="string")return null;try{I=new t.DOMParser().parseFromString(S,"text/xml")}catch{}return F=I&&I.getElementsByTagName("parsererror")[0],(!I||F)&&M.error("Invalid XML: "+(F?M.map(F.childNodes,function(H){return H.textContent}).join(`
`):S)),I};var mc=/^(?:focusinfocus|focusoutblur)$/,su=function(S){S.stopPropagation()};M.extend(M.event,{trigger:function(S,I,F,H){var ne,re,se,$e,Pe,ot,St,Lt,_t=[F||W],tn=D.call(S,"type")?S.type:S,ir=D.call(S,"namespace")?S.namespace.split("."):[];if(re=Lt=se=F=F||W,!(F.nodeType===3||F.nodeType===8)&&!mc.test(tn+M.event.triggered)&&(tn.indexOf(".")>-1&&(ir=tn.split("."),tn=ir.shift(),ir.sort()),Pe=tn.indexOf(":")<0&&"on"+tn,S=S[M.expando]?S:new M.Event(tn,typeof S=="object"&&S),S.isTrigger=H?2:3,S.namespace=ir.join("."),S.rnamespace=S.namespace?new RegExp("(^|\\.)"+ir.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,S.result=void 0,S.target||(S.target=F),I=I==null?[S]:M.makeArray(I,[S]),St=M.event.special[tn]||{},!(!H&&St.trigger&&St.trigger.apply(F,I)===!1))){if(!H&&!St.noBubble&&!ee(F)){for($e=St.delegateType||tn,mc.test($e+tn)||(re=re.parentNode);re;re=re.parentNode)_t.push(re),se=re;se===(F.ownerDocument||W)&&_t.push(se.defaultView||se.parentWindow||t)}for(ne=0;(re=_t[ne++])&&!S.isPropagationStopped();)Lt=re,S.type=ne>1?$e:St.bindType||tn,ot=(Qe.get(re,"events")||Object.create(null))[S.type]&&Qe.get(re,"handle"),ot&&ot.apply(re,I),ot=Pe&&re[Pe],ot&&ot.apply&&qn(re)&&(S.result=ot.apply(re,I),S.result===!1&&S.preventDefault());return S.type=tn,!H&&!S.isDefaultPrevented()&&(!St._default||St._default.apply(_t.pop(),I)===!1)&&qn(F)&&Pe&&$(F[tn])&&!ee(F)&&(se=F[Pe],se&&(F[Pe]=null),M.event.triggered=tn,S.isPropagationStopped()&&Lt.addEventListener(tn,su),F[tn](),S.isPropagationStopped()&&Lt.removeEventListener(tn,su),M.event.triggered=void 0,se&&(F[Pe]=se)),S.result}},simulate:function(S,I,F){var H=M.extend(new M.Event,F,{type:S,isSimulated:!0});M.event.trigger(H,null,I)}}),M.fn.extend({trigger:function(S,I){return this.each(function(){M.event.trigger(S,I,this)})},triggerHandler:function(S,I){var F=this[0];if(F)return M.event.trigger(S,I,F,!0)}});var gc=/\[\]$/,zo=/\r?\n/g,Mi=/^(?:submit|button|image|reset|file)$/i,wh=/^(?:input|select|textarea|keygen)/i;function lu(S,I,F,H){var ne;if(Array.isArray(I))M.each(I,function(re,se){F||gc.test(S)?H(S,se):lu(S+"["+(typeof se=="object"&&se!=null?re:"")+"]",se,F,H)});else if(!F&&ie(I)==="object")for(ne in I)lu(S+"["+ne+"]",I[ne],F,H);else H(S,I)}M.param=function(S,I){var F,H=[],ne=function(re,se){var $e=$(se)?se():se;H[H.length]=encodeURIComponent(re)+"="+encodeURIComponent($e??"")};if(S==null)return"";if(Array.isArray(S)||S.jquery&&!M.isPlainObject(S))M.each(S,function(){ne(this.name,this.value)});else for(F in S)lu(F,S[F],I,ne);return H.join("&")},M.fn.extend({serialize:function(){return M.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var S=M.prop(this,"elements");return S?M.makeArray(S):this}).filter(function(){var S=this.type;return this.name&&!M(this).is(":disabled")&&wh.test(this.nodeName)&&!Mi.test(S)&&(this.checked||!ye.test(S))}).map(function(S,I){var F=M(this).val();return F==null?null:Array.isArray(F)?M.map(F,function(H){return{name:I.name,value:H.replace(zo,`\r
`)}}):{name:I.name,value:F.replace(zo,`\r
`)}}).get()}});var Wo=/%20/g,ga=/#.*$/,Vp=/([?&])_=[^&]*/,cu=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ei=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,uu=/^(?:GET|HEAD)$/,Eh=/^\/\//,Ys={},Zi={},nd="*/".concat("*"),du=W.createElement("a");du.href=Dl.href;function es(S){return function(I,F){typeof I!="string"&&(F=I,I="*");var H,ne=0,re=I.toLowerCase().match(yn)||[];if($(F))for(;H=re[ne++];)H[0]==="+"?(H=H.slice(1)||"*",(S[H]=S[H]||[]).unshift(F)):(S[H]=S[H]||[]).push(F)}}function ws(S,I,F,H){var ne={},re=S===Zi;function se($e){var Pe;return ne[$e]=!0,M.each(S[$e]||[],function(ot,St){var Lt=St(I,F,H);if(typeof Lt=="string"&&!re&&!ne[Lt])return I.dataTypes.unshift(Lt),se(Lt),!1;if(re)return!(Pe=Lt)}),Pe}return se(I.dataTypes[0])||!ne["*"]&&se("*")}function _c(S,I){var F,H,ne=M.ajaxSettings.flatOptions||{};for(F in I)I[F]!==void 0&&((ne[F]?S:H||(H={}))[F]=I[F]);return H&&M.extend(!0,S,H),S}function fm(S,I,F){for(var H,ne,re,se,$e=S.contents,Pe=S.dataTypes;Pe[0]==="*";)Pe.shift(),H===void 0&&(H=S.mimeType||I.getResponseHeader("Content-Type"));if(H){for(ne in $e)if($e[ne]&&$e[ne].test(H)){Pe.unshift(ne);break}}if(Pe[0]in F)re=Pe[0];else{for(ne in F){if(!Pe[0]||S.converters[ne+" "+Pe[0]]){re=ne;break}se||(se=ne)}re=re||se}if(re)return re!==Pe[0]&&Pe.unshift(re),F[re]}function Sh(S,I,F,H){var ne,re,se,$e,Pe,ot={},St=S.dataTypes.slice();if(St[1])for(se in S.converters)ot[se.toLowerCase()]=S.converters[se];for(re=St.shift();re;)if(S.responseFields[re]&&(F[S.responseFields[re]]=I),!Pe&&H&&S.dataFilter&&(I=S.dataFilter(I,S.dataType)),Pe=re,re=St.shift(),re){if(re==="*")re=Pe;else if(Pe!=="*"&&Pe!==re){if(se=ot[Pe+" "+re]||ot["* "+re],!se){for(ne in ot)if($e=ne.split(" "),$e[1]===re&&(se=ot[Pe+" "+$e[0]]||ot["* "+$e[0]],se)){se===!0?se=ot[ne]:ot[ne]!==!0&&(re=$e[0],St.unshift($e[1]));break}}if(se!==!0)if(se&&S.throws)I=se(I);else try{I=se(I)}catch(Lt){return{state:"parsererror",error:se?Lt:"No conversion from "+Pe+" to "+re}}}}return{state:"success",data:I}}M.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dl.href,type:"GET",isLocal:Ei.test(Dl.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nd,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":M.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(S,I){return I?_c(_c(S,M.ajaxSettings),I):_c(M.ajaxSettings,S)},ajaxPrefilter:es(Ys),ajaxTransport:es(Zi),ajax:function(S,I){typeof S=="object"&&(I=S,S=void 0),I=I||{};var F,H,ne,re,se,$e,Pe,ot,St,Lt,_t=M.ajaxSetup({},I),tn=_t.context||_t,ir=_t.context&&(tn.nodeType||tn.jquery)?M(tn):M.event,Cr=M.Deferred(),_r=M.Callbacks("once memory"),Di=_t.statusCode||{},ni={},Eo={},ia="canceled",kr={readyState:0,getResponseHeader:function(Mr){var _i;if(Pe){if(!re)for(re={};_i=cu.exec(ne);)re[_i[1].toLowerCase()+" "]=(re[_i[1].toLowerCase()+" "]||[]).concat(_i[2]);_i=re[Mr.toLowerCase()+" "]}return _i==null?null:_i.join(", ")},getAllResponseHeaders:function(){return Pe?ne:null},setRequestHeader:function(Mr,_i){return Pe==null&&(Mr=Eo[Mr.toLowerCase()]=Eo[Mr.toLowerCase()]||Mr,ni[Mr]=_i),this},overrideMimeType:function(Mr){return Pe==null&&(_t.mimeType=Mr),this},statusCode:function(Mr){var _i;if(Mr)if(Pe)kr.always(Mr[kr.status]);else for(_i in Mr)Di[_i]=[Di[_i],Mr[_i]];return this},abort:function(Mr){var _i=Mr||ia;return F&&F.abort(_i),Va(0,_i),this}};if(Cr.promise(kr),_t.url=((S||_t.url||Dl.href)+"").replace(Eh,Dl.protocol+"//"),_t.type=I.method||I.type||_t.method||_t.type,_t.dataTypes=(_t.dataType||"*").toLowerCase().match(yn)||[""],_t.crossDomain==null){$e=W.createElement("a");try{$e.href=_t.url,$e.href=$e.href,_t.crossDomain=du.protocol+"//"+du.host!=$e.protocol+"//"+$e.host}catch{_t.crossDomain=!0}}if(_t.data&&_t.processData&&typeof _t.data!="string"&&(_t.data=M.param(_t.data,_t.traditional)),ws(Ys,_t,I,kr),Pe)return kr;ot=M.event&&_t.global,ot&&M.active++===0&&M.event.trigger("ajaxStart"),_t.type=_t.type.toUpperCase(),_t.hasContent=!uu.test(_t.type),H=_t.url.replace(ga,""),_t.hasContent?_t.data&&_t.processData&&(_t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(_t.data=_t.data.replace(Wo,"+")):(Lt=_t.url.slice(H.length),_t.data&&(_t.processData||typeof _t.data=="string")&&(H+=(Ol.test(H)?"&":"?")+_t.data,delete _t.data),_t.cache===!1&&(H=H.replace(Vp,"$1"),Lt=(Ol.test(H)?"&":"?")+"_="+bh.guid+++Lt),_t.url=H+Lt),_t.ifModified&&(M.lastModified[H]&&kr.setRequestHeader("If-Modified-Since",M.lastModified[H]),M.etag[H]&&kr.setRequestHeader("If-None-Match",M.etag[H])),(_t.data&&_t.hasContent&&_t.contentType!==!1||I.contentType)&&kr.setRequestHeader("Content-Type",_t.contentType),kr.setRequestHeader("Accept",_t.dataTypes[0]&&_t.accepts[_t.dataTypes[0]]?_t.accepts[_t.dataTypes[0]]+(_t.dataTypes[0]!=="*"?", "+nd+"; q=0.01":""):_t.accepts["*"]);for(St in _t.headers)kr.setRequestHeader(St,_t.headers[St]);if(_t.beforeSend&&(_t.beforeSend.call(tn,kr,_t)===!1||Pe))return kr.abort();if(ia="abort",_r.add(_t.complete),kr.done(_t.success),kr.fail(_t.error),F=ws(Zi,_t,I,kr),!F)Va(-1,"No Transport");else{if(kr.readyState=1,ot&&ir.trigger("ajaxSend",[kr,_t]),Pe)return kr;_t.async&&_t.timeout>0&&(se=t.setTimeout(function(){kr.abort("timeout")},_t.timeout));try{Pe=!1,F.send(ni,Va)}catch(Mr){if(Pe)throw Mr;Va(-1,Mr)}}function Va(Mr,_i,Js,vc){var _a,Sr,qo,Cs,ts,oa=_i;Pe||(Pe=!0,se&&t.clearTimeout(se),F=void 0,ne=vc||"",kr.readyState=Mr>0?4:0,_a=Mr>=200&&Mr<300||Mr===304,Js&&(Cs=fm(_t,kr,Js)),!_a&&M.inArray("script",_t.dataTypes)>-1&&M.inArray("json",_t.dataTypes)<0&&(_t.converters["text script"]=function(){}),Cs=Sh(_t,Cs,kr,_a),_a?(_t.ifModified&&(ts=kr.getResponseHeader("Last-Modified"),ts&&(M.lastModified[H]=ts),ts=kr.getResponseHeader("etag"),ts&&(M.etag[H]=ts)),Mr===204||_t.type==="HEAD"?oa="nocontent":Mr===304?oa="notmodified":(oa=Cs.state,Sr=Cs.data,qo=Cs.error,_a=!qo)):(qo=oa,(Mr||!oa)&&(oa="error",Mr<0&&(Mr=0))),kr.status=Mr,kr.statusText=(_i||oa)+"",_a?Cr.resolveWith(tn,[Sr,oa,kr]):Cr.rejectWith(tn,[kr,oa,qo]),kr.statusCode(Di),Di=void 0,ot&&ir.trigger(_a?"ajaxSuccess":"ajaxError",[kr,_t,_a?Sr:qo]),_r.fireWith(tn,[kr,oa]),ot&&(ir.trigger("ajaxComplete",[kr,_t]),--M.active||M.event.trigger("ajaxStop")))}return kr},getJSON:function(S,I,F){return M.get(S,I,F,"json")},getScript:function(S,I){return M.get(S,void 0,I,"script")}}),M.each(["get","post"],function(S,I){M[I]=function(F,H,ne,re){return $(H)&&(re=re||ne,ne=H,H=void 0),M.ajax(M.extend({url:F,type:I,dataType:re,data:H,success:ne},M.isPlainObject(F)&&F))}}),M.ajaxPrefilter(function(S){var I;for(I in S.headers)I.toLowerCase()==="content-type"&&(S.contentType=S.headers[I]||"")}),M._evalUrl=function(S,I,F){return M.ajax({url:S,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(H){M.globalEval(H,I,F)}})},M.fn.extend({wrapAll:function(S){var I;return this[0]&&($(S)&&(S=S.call(this[0])),I=M(S,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&I.insertBefore(this[0]),I.map(function(){for(var F=this;F.firstElementChild;)F=F.firstElementChild;return F}).append(this)),this},wrapInner:function(S){return $(S)?this.each(function(I){M(this).wrapInner(S.call(this,I))}):this.each(function(){var I=M(this),F=I.contents();F.length?F.wrapAll(S):I.append(S)})},wrap:function(S){var I=$(S);return this.each(function(F){M(this).wrapAll(I?S.call(this,F):S)})},unwrap:function(S){return this.parent(S).not("body").each(function(){M(this).replaceWith(this.childNodes)}),this}}),M.expr.pseudos.hidden=function(S){return!M.expr.pseudos.visible(S)},M.expr.pseudos.visible=function(S){return!!(S.offsetWidth||S.offsetHeight||S.getClientRects().length)},M.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var yc={0:200,1223:204},Ho=M.ajaxSettings.xhr();N.cors=!!Ho&&"withCredentials"in Ho,N.ajax=Ho=!!Ho,M.ajaxTransport(function(S){var I,F;if(N.cors||Ho&&!S.crossDomain)return{send:function(H,ne){var re,se=S.xhr();if(se.open(S.type,S.url,S.async,S.username,S.password),S.xhrFields)for(re in S.xhrFields)se[re]=S.xhrFields[re];S.mimeType&&se.overrideMimeType&&se.overrideMimeType(S.mimeType),!S.crossDomain&&!H["X-Requested-With"]&&(H["X-Requested-With"]="XMLHttpRequest");for(re in H)se.setRequestHeader(re,H[re]);I=function($e){return function(){I&&(I=F=se.onload=se.onerror=se.onabort=se.ontimeout=se.onreadystatechange=null,$e==="abort"?se.abort():$e==="error"?typeof se.status!="number"?ne(0,"error"):ne(se.status,se.statusText):ne(yc[se.status]||se.status,se.statusText,(se.responseType||"text")!=="text"||typeof se.responseText!="string"?{binary:se.response}:{text:se.responseText},se.getAllResponseHeaders()))}},se.onload=I(),F=se.onerror=se.ontimeout=I("error"),se.onabort!==void 0?se.onabort=F:se.onreadystatechange=function(){se.readyState===4&&t.setTimeout(function(){I&&F()})},I=I("abort");try{se.send(S.hasContent&&S.data||null)}catch($e){if(I)throw $e}},abort:function(){I&&I()}}}),M.ajaxPrefilter(function(S){S.crossDomain&&(S.contents.script=!1)}),M.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(S){return M.globalEval(S),S}}}),M.ajaxPrefilter("script",function(S){S.cache===void 0&&(S.cache=!1),S.crossDomain&&(S.type="GET")}),M.ajaxTransport("script",function(S){if(S.crossDomain||S.scriptAttrs){var I,F;return{send:function(H,ne){I=M("<script>").attr(S.scriptAttrs||{}).prop({charset:S.scriptCharset,src:S.url}).on("load error",F=function(re){I.remove(),F=null,re&&ne(re.type==="error"?404:200,re.type)}),W.head.appendChild(I[0])},abort:function(){F&&F()}}}});var rd=[],Es=/(=)\?(?=&|$)|\?\?/;M.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var S=rd.pop()||M.expando+"_"+bh.guid++;return this[S]=!0,S}}),M.ajaxPrefilter("json jsonp",function(S,I,F){var H,ne,re,se=S.jsonp!==!1&&(Es.test(S.url)?"url":typeof S.data=="string"&&(S.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Es.test(S.data)&&"data");if(se||S.dataTypes[0]==="jsonp")return H=S.jsonpCallback=$(S.jsonpCallback)?S.jsonpCallback():S.jsonpCallback,se?S[se]=S[se].replace(Es,"$1"+H):S.jsonp!==!1&&(S.url+=(Ol.test(S.url)?"&":"?")+S.jsonp+"="+H),S.converters["script json"]=function(){return re||M.error(H+" was not called"),re[0]},S.dataTypes[0]="json",ne=t[H],t[H]=function(){re=arguments},F.always(function(){ne===void 0?M(t).removeProp(H):t[H]=ne,S[H]&&(S.jsonpCallback=I.jsonpCallback,rd.push(H)),re&&$(ne)&&ne(re[0]),re=ne=void 0}),"script"}),N.createHTMLDocument=function(){var S=W.implementation.createHTMLDocument("").body;return S.innerHTML="<form></form><form></form>",S.childNodes.length===2}(),M.parseHTML=function(S,I,F){if(typeof S!="string")return[];typeof I=="boolean"&&(F=I,I=!1);var H,ne,re;return I||(N.createHTMLDocument?(I=W.implementation.createHTMLDocument(""),H=I.createElement("base"),H.href=W.location.href,I.head.appendChild(H)):I=W),ne=yt.exec(S),re=!F&&[],ne?[I.createElement(ne[1])]:(ne=ut([S],I,re),re&&re.length&&M(re).remove(),M.merge([],ne.childNodes))},M.fn.load=function(S,I,F){var H,ne,re,se=this,$e=S.indexOf(" ");return $e>-1&&(H=Ks(S.slice($e)),S=S.slice(0,$e)),$(I)?(F=I,I=void 0):I&&typeof I=="object"&&(ne="POST"),se.length>0&&M.ajax({url:S,type:ne||"GET",dataType:"html",data:I}).done(function(Pe){re=arguments,se.html(H?M("<div>").append(M.parseHTML(Pe)).find(H):Pe)}).always(F&&function(Pe,ot){se.each(function(){F.apply(this,re||[Pe.responseText,ot,Pe])})}),this},M.expr.pseudos.animated=function(S){return M.grep(M.timers,function(I){return S===I.elem}).length},M.offset={setOffset:function(S,I,F){var H,ne,re,se,$e,Pe,ot,St=M.css(S,"position"),Lt=M(S),_t={};St==="static"&&(S.style.position="relative"),$e=Lt.offset(),re=M.css(S,"top"),Pe=M.css(S,"left"),ot=(St==="absolute"||St==="fixed")&&(re+Pe).indexOf("auto")>-1,ot?(H=Lt.position(),se=H.top,ne=H.left):(se=parseFloat(re)||0,ne=parseFloat(Pe)||0),$(I)&&(I=I.call(S,F,M.extend({},$e))),I.top!=null&&(_t.top=I.top-$e.top+se),I.left!=null&&(_t.left=I.left-$e.left+ne),"using"in I?I.using.call(S,_t):Lt.css(_t)}},M.fn.extend({offset:function(S){if(arguments.length)return S===void 0?this:this.each(function(ne){M.offset.setOffset(this,S,ne)});var I,F,H=this[0];if(H)return H.getClientRects().length?(I=H.getBoundingClientRect(),F=H.ownerDocument.defaultView,{top:I.top+F.pageYOffset,left:I.left+F.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var S,I,F,H=this[0],ne={top:0,left:0};if(M.css(H,"position")==="fixed")I=H.getBoundingClientRect();else{for(I=this.offset(),F=H.ownerDocument,S=H.offsetParent||F.documentElement;S&&(S===F.body||S===F.documentElement)&&M.css(S,"position")==="static";)S=S.parentNode;S&&S!==H&&S.nodeType===1&&(ne=M(S).offset(),ne.top+=M.css(S,"borderTopWidth",!0),ne.left+=M.css(S,"borderLeftWidth",!0))}return{top:I.top-ne.top-M.css(H,"marginTop",!0),left:I.left-ne.left-M.css(H,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var S=this.offsetParent;S&&M.css(S,"position")==="static";)S=S.offsetParent;return S||nr})}}),M.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(S,I){var F=I==="pageYOffset";M.fn[S]=function(H){return Zn(this,function(ne,re,se){var $e;if(ee(ne)?$e=ne:ne.nodeType===9&&($e=ne.defaultView),se===void 0)return $e?$e[I]:ne[re];$e?$e.scrollTo(F?$e.pageXOffset:se,F?se:$e.pageYOffset):ne[re]=se},S,H,arguments.length)}}),M.each(["top","left"],function(S,I){M.cssHooks[I]=ra(N.pixelPosition,function(F,H){if(H)return H=_o(F,I),fr.test(H)?M(F).position()[I]+"px":H})}),M.each({Height:"height",Width:"width"},function(S,I){M.each({padding:"inner"+S,content:I,"":"outer"+S},function(F,H){M.fn[H]=function(ne,re){var se=arguments.length&&(F||typeof ne!="boolean"),$e=F||(ne===!0||re===!0?"margin":"border");return Zn(this,function(Pe,ot,St){var Lt;return ee(Pe)?H.indexOf("outer")===0?Pe["inner"+S]:Pe.document.documentElement["client"+S]:Pe.nodeType===9?(Lt=Pe.documentElement,Math.max(Pe.body["scroll"+S],Lt["scroll"+S],Pe.body["offset"+S],Lt["offset"+S],Lt["client"+S])):St===void 0?M.css(Pe,ot,$e):M.style(Pe,ot,St,$e)},I,se?ne:void 0,se)}})}),M.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(S,I){M.fn[I]=function(F){return this.on(I,F)}}),M.fn.extend({bind:function(S,I,F){return this.on(S,null,I,F)},unbind:function(S,I){return this.off(S,null,I)},delegate:function(S,I,F,H){return this.on(I,S,F,H)},undelegate:function(S,I,F){return arguments.length===1?this.off(S,"**"):this.off(I,S||"**",F)},hover:function(S,I){return this.mouseenter(S).mouseleave(I||S)}}),M.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(S,I){M.fn[I]=function(F,H){return arguments.length>0?this.on(I,null,F,H):this.trigger(I)}});var Ss=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;M.proxy=function(S,I){var F,H,ne;if(typeof I=="string"&&(F=S[I],I=S,S=F),!!$(S))return H=u.call(arguments,2),ne=function(){return S.apply(I||this,H.concat(u.call(arguments)))},ne.guid=S.guid=S.guid||M.guid++,ne},M.holdReady=function(S){S?M.readyWait++:M.ready(!0)},M.isArray=Array.isArray,M.parseJSON=JSON.parse,M.nodeName=fe,M.isFunction=$,M.isWindow=ee,M.camelCase=Un,M.type=ie,M.now=Date.now,M.isNumeric=function(S){var I=M.type(S);return(I==="number"||I==="string")&&!isNaN(S-parseFloat(S))},M.trim=function(S){return S==null?"":(S+"").replace(Ss,"$1")};var hu=t.jQuery,Ts=t.$;return M.noConflict=function(S){return t.$===M&&(t.$=Ts),S&&t.jQuery===M&&(t.jQuery=hu),M},typeof n>"u"&&(t.jQuery=t.$=M),M})})(PF);var wde=PF.exports;const Ff=V1(wde);function Mu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IF(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var F1={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},N1={duration:.5,overwrite:!1,delay:0},cT,Ra,po,gl=1e8,ki=1/gl,r6=Math.PI*2,Ede=r6/4,Sde=0,AF=Math.sqrt,Tde=Math.cos,Cde=Math.sin,Fa=function(t){return typeof t=="string"},fo=function(t){return typeof t=="function"},qu=function(t){return typeof t=="number"},MF=function(t){return typeof t>"u"},tu=function(t){return typeof t=="object"},vs=function(t){return t!==!1},uT=function(){return typeof window<"u"},Ov=function(t){return fo(t)||Fa(t)},DF=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},La=Array.isArray,i6=/(?:-?\.?\d|\.)+/gi,kde=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,OF=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,K4=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Pde=/[+-]=-?[.\d]+/,RF=/[^,'"\[\]\s]+/gi,Ide=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,io,ul,o6,dT,qs={},ux={},LF,zF=function(t){return(ux=Ip(t,qs))&&Ap},FF=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},dx=function(t,n){return!n&&console.warn(t)},NF=function(t,n){return t&&(qs[t]=n)&&ux&&(ux[t]=n)||qs},t_=function(){return 0},Ade={suppressEvents:!0,isStart:!0,kill:!1},o2={suppressEvents:!0,kill:!1},Mde={suppressEvents:!0},hT={},Qd=[],a6={},BF,hl={},Y4={},pA=30,a2=[],pT="",fT=function(t){var n=t[0],i,a;if(tu(n)||fo(n)||(t=[t]),!(i=(n._gsap||{}).harness)){for(a=a2.length;a--&&!a2[a].targetTest(n););i=a2[a]}for(a=t.length;a--;)t[a]&&(t[a]._gsap||(t[a]._gsap=new ihe(t[a],i)))||t.splice(a,1);return t},c0=function(t){return t._gsap||fT(_l(t))[0]._gsap},Dde=function(t,n,i){return(i=t[n])&&fo(i)?t[n]():MF(i)&&t.getAttribute&&t.getAttribute(n)||i},ed=function(t,n){return(t=t.split(",")).forEach(n)||t},Ode=function(t){return Math.round(t*1e5)/1e5||0},da=function(t){return Math.round(t*1e7)/1e7||0},jF=function(t,n){var i=n.charAt(0),a=parseFloat(n.substr(2));return t=parseFloat(t),i==="+"?t+a:i==="-"?t-a:i==="*"?t*a:t/a},Rde=function(t,n){for(var i=n.length,a=0;t.indexOf(n[a])<0&&++a<i;);return a<i},hx=function(){var t=Qd.length,n=Qd.slice(0),i,a;for(a6={},Qd.length=0,i=0;i<t;i++)a=n[i],a&&a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0)._lazy=0)},$F=function(t,n,i,a){Qd.length&&!Ra&&hx(),t.render(n,i,a||Ra&&n<0&&(t._initted||t._startAt)),Qd.length&&!Ra&&hx()},UF=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(RF).length<2?n:Fa(t)?t.trim():t},VF=function(t){return t},kl=function(t,n){for(var i in n)i in t||(t[i]=n[i]);return t},Lde=function(t){return function(n,i){for(var a in i)a in n||a==="duration"&&t||a==="ease"||(n[a]=i[a])}},Ip=function(t,n){for(var i in n)t[i]=n[i];return t},fA=function e(t,n){for(var i in n)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=tu(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},px=function(t,n){var i={},a;for(a in t)a in n||(i[a]=t[a]);return i},u0=function(t){var n=t.parent||io,i=t.keyframes?Lde(La(t.keyframes)):kl;if(vs(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},zde=function(t,n){for(var i=t.length,a=i===n.length;a&&i--&&t[i]===n[i];);return i<0},WF=function(t,n,i,a,u){i===void 0&&(i="_first"),a===void 0&&(a="_last");var f=t[a],o;if(u)for(o=n[u];f&&f[u]>o;)f=f._prev;return f?(n._next=f._next,f._next=n):(n._next=t[i],t[i]=n),n._next?n._next._prev=n:t[a]=n,n._prev=f,n.parent=n._dp=t,n},Jb=function(t,n,i,a){i===void 0&&(i="_first"),a===void 0&&(a="_last");var u=n._prev,f=n._next;u?u._next=f:t[i]===n&&(t[i]=f),f?f._prev=u:t[a]===n&&(t[a]=u),n._next=n._prev=n.parent=null},lh=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},fp=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Fde=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},s6=function(t,n,i,a){return t._startAt&&(Ra?t._startAt.revert(o2):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,a))},Nde=function e(t){return!t||t._ts&&e(t.parent)},mA=function(t){return t._repeat?B1(t._tTime,t=t.duration()+t._rDelay)*t:0},B1=function(t,n){var i=Math.floor(t/=n);return t&&i===t?i-1:i},fx=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},Qb=function(t){return t._end=da(t._start+(t._tDur/Math.abs(t._ts||t._rts||ki)||0))},ew=function(t,n){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=da(i._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),Qb(t),i._dirty||fp(i,t)),t},HF=function(t,n){var i;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(i=fx(t.rawTime(),n),(!n._dur||L_(0,n.totalDuration(),i)-n._tTime>ki)&&n.render(i,!0)),fp(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-ki}},Vc=function(t,n,i,a){return n.parent&&lh(n),n._start=da((qu(i)?i:i||t!==io?cl(t,i,n):t._time)+n._delay),n._end=da(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),WF(t,n,"_first","_last",t._sort?"_start":0),l6(n)||(t._recent=n),a||HF(t,n),t._ts<0&&ew(t,t._tTime),t},qF=function(t,n){return(qs.ScrollTrigger||FF("scrollTrigger",n))&&qs.ScrollTrigger.create(n,t)},GF=function(t,n,i,a,u){if(_T(t,n,u),!t._initted)return 1;if(!i&&t._pt&&!Ra&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&BF!==rc.frame)return Qd.push(t),t._lazy=[u,a],1},Bde=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},l6=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},jde=function(t,n,i,a){var u=t.ratio,f=n<0||!n&&(!t._start&&Bde(t)&&!(!t._initted&&l6(t))||(t._ts<0||t._dp._ts<0)&&!l6(t))?0:1,o=t._rDelay,v=0,E,k,D;if(o&&t._repeat&&(v=L_(0,t._tDur,n),k=B1(v,o),t._yoyo&&k&1&&(f=1-f),k!==B1(t._tTime,o)&&(u=1-f,t.vars.repeatRefresh&&t._initted&&t.invalidate())),f!==u||Ra||a||t._zTime===ki||!n&&t._zTime){if(!t._initted&&GF(t,n,a,i,v))return;for(D=t._zTime,t._zTime=n||(i?ki:0),i||(i=n&&!D),t.ratio=f,t._from&&(f=1-f),t._time=0,t._tTime=v,E=t._pt;E;)E.r(f,E.d),E=E._next;n<0&&s6(t,n,i,!0),t._onUpdate&&!i&&yl(t,"onUpdate"),v&&t._repeat&&!i&&t.parent&&yl(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===f&&(f&&lh(t,1),!i&&!Ra&&(yl(t,f?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},$de=function(t,n,i){var a;if(i>n)for(a=t._first;a&&a._start<=i;){if(a.data==="isPause"&&a._start>n)return a;a=a._next}else for(a=t._last;a&&a._start>=i;){if(a.data==="isPause"&&a._start<n)return a;a=a._prev}},j1=function(t,n,i,a){var u=t._repeat,f=da(n)||0,o=t._tTime/t._tDur;return o&&!a&&(t._time*=f/t._dur),t._dur=f,t._tDur=u?u<0?1e10:da(f*(u+1)+t._rDelay*u):f,o>0&&!a&&ew(t,t._tTime=t._tDur*o),t.parent&&Qb(t),i||fp(t.parent,t),t},gA=function(t){return t instanceof jo?fp(t):j1(t,t._dur)},Ude={_start:0,endTime:t_,totalDuration:t_},cl=function e(t,n,i){var a=t.labels,u=t._recent||Ude,f=t.duration()>=gl?u.endTime(!1):t._dur,o,v,E;return Fa(n)&&(isNaN(n)||n in a)?(v=n.charAt(0),E=n.substr(-1)==="%",o=n.indexOf("="),v==="<"||v===">"?(o>=0&&(n=n.replace(/=/,"")),(v==="<"?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(E?(o<0?u:i).totalDuration()/100:1)):o<0?(n in a||(a[n]=f),a[n]):(v=parseFloat(n.charAt(o-1)+n.substr(o+1)),E&&i&&(v=v/100*(La(i)?i[0]:i).totalDuration()),o>1?e(t,n.substr(0,o-1),i)+v:f+v)):n==null?f:+n},d0=function(t,n,i){var a=qu(n[1]),u=(a?2:1)+(t<2?0:1),f=n[u],o,v;if(a&&(f.duration=n[1]),f.parent=i,t){for(o=f,v=i;v&&!("immediateRender"in o);)o=v.vars.defaults||{},v=vs(v.vars.inherit)&&v.parent;f.immediateRender=vs(o.immediateRender),t<2?f.runBackwards=1:f.startAt=n[u-1]}return new Po(n[0],f,n[u+1])},vh=function(t,n){return t||t===0?n(t):n},L_=function(t,n,i){return i<t?t:i>n?n:i},ch=function(t,n){return!Fa(t)||!(n=Ide.exec(t))?"":n[1]},Vde=function(t,n,i){return vh(i,function(a){return L_(t,n,a)})},c6=[].slice,ZF=function(t,n){return t&&tu(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&tu(t[0]))&&!t.nodeType&&t!==ul},Wde=function(t,n,i){return i===void 0&&(i=[]),t.forEach(function(a){var u;return Fa(a)&&!n||ZF(a,1)?(u=i).push.apply(u,_l(a)):i.push(a)})||i},_l=function(t,n,i){return po&&!n&&po.selector?po.selector(t):Fa(t)&&!i&&(o6||!$1())?c6.call((n||dT).querySelectorAll(t),0):La(t)?Wde(t,i):ZF(t)?c6.call(t,0):t?[t]:[]},u6=function(t){return t=_l(t)[0]||dx("Invalid scope")||{},function(n){var i=t.current||t.nativeElement||t;return _l(n,i.querySelectorAll?i:i===t?dx("Invalid scope")||dT.createElement("div"):t)}},XF=function(t){return t.sort(function(){return .5-Math.random()})},KF=function(t){if(fo(t))return t;var n=tu(t)?t:{each:t},i=mp(n.ease),a=n.from||0,u=parseFloat(n.base)||0,f={},o=a>0&&a<1,v=isNaN(a)||o,E=n.axis,k=a,D=a;return Fa(a)?k=D={center:.5,edges:.5,end:1}[a]||0:!o&&v&&(k=a[0],D=a[1]),function(R,j,N){var $=(N||n).length,ee=f[$],W,K,Y,ie,ue,de,M,Te,fe;if(!ee){if(fe=n.grid==="auto"?0:(n.grid||[1,gl])[1],!fe){for(M=-gl;M<(M=N[fe++].getBoundingClientRect().left)&&fe<$;);fe--}for(ee=f[$]=[],W=v?Math.min(fe,$)*k-.5:a%fe,K=fe===gl?0:v?$*D/fe-.5:a/fe|0,M=0,Te=gl,de=0;de<$;de++)Y=de%fe-W,ie=K-(de/fe|0),ee[de]=ue=E?Math.abs(E==="y"?ie:Y):AF(Y*Y+ie*ie),ue>M&&(M=ue),ue<Te&&(Te=ue);a==="random"&&XF(ee),ee.max=M-Te,ee.min=Te,ee.v=$=(parseFloat(n.amount)||parseFloat(n.each)*(fe>$?$-1:E?E==="y"?$/fe:fe:Math.max(fe,$/fe))||0)*(a==="edges"?-1:1),ee.b=$<0?u-$:u,ee.u=ch(n.amount||n.each)||0,i=i&&$<0?oN(i):i}return $=(ee[R]-ee.min)/ee.max||0,da(ee.b+(i?i($):$)*ee.v)+ee.u}},d6=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var a=da(Math.round(parseFloat(i)/t)*t*n);return(a-a%1)/n+(qu(i)?0:ch(i))}},YF=function(t,n){var i=La(t),a,u;return!i&&tu(t)&&(a=i=t.radius||gl,t.values?(t=_l(t.values),(u=!qu(t[0]))&&(a*=a)):t=d6(t.increment)),vh(n,i?fo(t)?function(f){return u=t(f),Math.abs(u-f)<=a?u:f}:function(f){for(var o=parseFloat(u?f.x:f),v=parseFloat(u?f.y:0),E=gl,k=0,D=t.length,R,j;D--;)u?(R=t[D].x-o,j=t[D].y-v,R=R*R+j*j):R=Math.abs(t[D]-o),R<E&&(E=R,k=D);return k=!a||E<=a?t[k]:f,u||k===f||qu(f)?k:k+ch(f)}:d6(t))},JF=function(t,n,i,a){return vh(La(t)?!n:i===!0?!!(i=0):!a,function(){return La(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(a=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(n-t+i*.99))/i)*i*a)/a})},Hde=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(a){return n.reduce(function(u,f){return f(u)},a)}},qde=function(t,n){return function(i){return t(parseFloat(i))+(n||ch(i))}},Gde=function(t,n,i){return eN(t,n,0,1,i)},QF=function(t,n,i){return vh(i,function(a){return t[~~n(a)]})},Zde=function e(t,n,i){var a=n-t;return La(t)?QF(t,e(0,t.length),n):vh(i,function(u){return(a+(u-t)%a)%a+t})},Xde=function e(t,n,i){var a=n-t,u=a*2;return La(t)?QF(t,e(0,t.length-1),n):vh(i,function(f){return f=(u+(f-t)%u)%u||0,t+(f>a?u-f:f)})},mT=function(t){for(var n=0,i="",a,u,f,o;~(a=t.indexOf("random(",n));)f=t.indexOf(")",a),o=t.charAt(a+7)==="[",u=t.substr(a+7,f-a-7).match(o?RF:i6),i+=t.substr(n,a-n)+JF(o?u:+u[0],o?0:+u[1],+u[2]||1e-5),n=f+1;return i+t.substr(n,t.length-n)},eN=function(t,n,i,a,u){var f=n-t,o=a-i;return vh(u,function(v){return i+((v-t)/f*o||0)})},Kde=function e(t,n,i,a){var u=isNaN(t+n)?0:function(j){return(1-j)*t+j*n};if(!u){var f=Fa(t),o={},v,E,k,D,R;if(i===!0&&(a=1)&&(i=null),f)t={p:t},n={p:n};else if(La(t)&&!La(n)){for(k=[],D=t.length,R=D-2,E=1;E<D;E++)k.push(e(t[E-1],t[E]));D--,u=function(N){N*=D;var $=Math.min(R,~~N);return k[$](N-$)},i=n}else a||(t=Ip(La(t)?[]:{},t));if(!k){for(v in n)gT.call(o,t,v,"get",n[v]);u=function(N){return vT(N,o)||(f?t.p:t)}}}return vh(i,u)},_A=function(t,n,i){var a=t.labels,u=gl,f,o,v;for(f in a)o=a[f]-n,o<0==!!i&&o&&u>(o=Math.abs(o))&&(v=f,u=o);return v},yl=function(t,n,i){var a=t.vars,u=a[n],f=po,o=t._ctx,v,E,k;if(u)return v=a[n+"Params"],E=a.callbackScope||t,i&&Qd.length&&hx(),o&&(po=o),k=v?u.apply(E,v):u.call(E),po=f,k},Ug=function(t){return lh(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Ra),t.progress()<1&&yl(t,"onInterrupt"),t},i1,tN=[],nN=function(t){if(uT()&&t){t=!t.name&&t.default||t;var n=t.name,i=fo(t),a=n&&!i&&t.init?function(){this._props=[]}:t,u={init:t_,render:vT,add:gT,kill:ghe,modifier:mhe,rawVars:0},f={targetTest:0,get:0,getSetter:dN,aliases:{},register:0};if($1(),t!==a){if(hl[n])return;kl(a,kl(px(t,u),f)),Ip(a.prototype,Ip(u,px(t,f))),hl[a.prop=n]=a,t.targetTest&&(a2.push(a),hT[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}NF(n,a),t.register&&t.register(Ap,a,cm)}else t&&tN.push(t)},Ti=255,Vg={aqua:[0,Ti,Ti],lime:[0,Ti,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ti],navy:[0,0,128],white:[Ti,Ti,Ti],olive:[128,128,0],yellow:[Ti,Ti,0],orange:[Ti,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ti,0,0],pink:[Ti,192,203],cyan:[0,Ti,Ti],transparent:[Ti,Ti,Ti,0]},J4=function(t,n,i){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(i-n)*t*6:t<.5?i:t*3<2?n+(i-n)*(2/3-t)*6:n)*Ti+.5|0},rN=function(t,n,i){var a=t?qu(t)?[t>>16,t>>8&Ti,t&Ti]:0:Vg.black,u,f,o,v,E,k,D,R,j,N;if(!a){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Vg[t])a=Vg[t];else if(t.charAt(0)==="#"){if(t.length<6&&(u=t.charAt(1),f=t.charAt(2),o=t.charAt(3),t="#"+u+u+f+f+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return a=parseInt(t.substr(1,6),16),[a>>16,a>>8&Ti,a&Ti,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),a=[t>>16,t>>8&Ti,t&Ti]}else if(t.substr(0,3)==="hsl"){if(a=N=t.match(i6),!n)v=+a[0]%360/360,E=+a[1]/100,k=+a[2]/100,f=k<=.5?k*(E+1):k+E-k*E,u=k*2-f,a.length>3&&(a[3]*=1),a[0]=J4(v+1/3,u,f),a[1]=J4(v,u,f),a[2]=J4(v-1/3,u,f);else if(~t.indexOf("="))return a=t.match(kde),i&&a.length<4&&(a[3]=1),a}else a=t.match(i6)||Vg.transparent;a=a.map(Number)}return n&&!N&&(u=a[0]/Ti,f=a[1]/Ti,o=a[2]/Ti,D=Math.max(u,f,o),R=Math.min(u,f,o),k=(D+R)/2,D===R?v=E=0:(j=D-R,E=k>.5?j/(2-D-R):j/(D+R),v=D===u?(f-o)/j+(f<o?6:0):D===f?(o-u)/j+2:(u-f)/j+4,v*=60),a[0]=~~(v+.5),a[1]=~~(E*100+.5),a[2]=~~(k*100+.5)),i&&a.length<4&&(a[3]=1),a},iN=function(t){var n=[],i=[],a=-1;return t.split(_1).forEach(function(u){var f=u.match(OF)||[];n.push.apply(n,f),i.push(a+=f.length+1)}),n.c=i,n},yA=function(t,n,i){var a="",u=(t+a).match(_1),f=n?"hsla(":"rgba(",o=0,v,E,k,D;if(!u)return t;if(u=u.map(function(R){return(R=rN(R,n,1))&&f+(n?R[0]+","+R[1]+"%,"+R[2]+"%,"+R[3]:R.join(","))+")"}),i&&(k=iN(t),v=i.c,v.join(a)!==k.c.join(a)))for(E=t.replace(_1,"1").split(OF),D=E.length-1;o<D;o++)a+=E[o]+(~v.indexOf(o)?u.shift()||f+"0,0,0,0)":(k.length?k:u.length?u:i).shift());if(!E)for(E=t.split(_1),D=E.length-1;o<D;o++)a+=E[o]+u[o];return a+E[D]},_1=function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Vg)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Yde=/hsl[a]?\(/,Jde=function(t){var n=t.join(" "),i;if(_1.lastIndex=0,_1.test(n))return i=Yde.test(n),t[1]=yA(t[1],i),t[0]=yA(t[0],i,iN(t[1])),!0},n_,rc=function(){var e=Date.now,t=500,n=33,i=e(),a=i,u=1e3/240,f=u,o=[],v,E,k,D,R,j,N=function $(ee){var W=e()-a,K=ee===!0,Y,ie,ue,de;if(W>t&&(i+=W-n),a+=W,ue=a-i,Y=ue-f,(Y>0||K)&&(de=++D.frame,R=ue-D.time*1e3,D.time=ue=ue/1e3,f+=Y+(Y>=u?4:u-Y),ie=1),K||(v=E($)),ie)for(j=0;j<o.length;j++)o[j](ue,R,de,ee)};return D={time:0,frame:0,tick:function(){N(!0)},deltaRatio:function(ee){return R/(1e3/(ee||60))},wake:function(){LF&&(!o6&&uT()&&(ul=o6=window,dT=ul.document||{},qs.gsap=Ap,(ul.gsapVersions||(ul.gsapVersions=[])).push(Ap.version),zF(ux||ul.GreenSockGlobals||!ul.gsap&&ul||{}),k=ul.requestAnimationFrame,tN.forEach(nN)),v&&D.sleep(),E=k||function(ee){return setTimeout(ee,f-D.time*1e3+1|0)},n_=1,N(2))},sleep:function(){(k?ul.cancelAnimationFrame:clearTimeout)(v),n_=0,E=t_},lagSmoothing:function(ee,W){t=ee||1/0,n=Math.min(W||33,t)},fps:function(ee){u=1e3/(ee||240),f=D.time*1e3+u},add:function(ee,W,K){var Y=W?function(ie,ue,de,M){ee(ie,ue,de,M),D.remove(Y)}:ee;return D.remove(ee),o[K?"unshift":"push"](Y),$1(),Y},remove:function(ee,W){~(W=o.indexOf(ee))&&o.splice(W,1)&&j>=W&&j--},_listeners:o},D}(),$1=function(){return!n_&&rc.wake()},$r={},Qde=/^[\d.\-M][\d.\-,\s]/,ehe=/["']/g,the=function(t){for(var n={},i=t.substr(1,t.length-3).split(":"),a=i[0],u=1,f=i.length,o,v,E;u<f;u++)v=i[u],o=u!==f-1?v.lastIndexOf(","):v.length,E=v.substr(0,o),n[a]=isNaN(E)?E.replace(ehe,"").trim():+E,a=v.substr(o+1).trim();return n},nhe=function(t){var n=t.indexOf("(")+1,i=t.indexOf(")"),a=t.indexOf("(",n);return t.substring(n,~a&&a<i?t.indexOf(")",i+1):i)},rhe=function(t){var n=(t+"").split("("),i=$r[n[0]];return i&&n.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[the(n[1])]:nhe(t).split(",").map(UF)):$r._CE&&Qde.test(t)?$r._CE("",t):i},oN=function(t){return function(n){return 1-t(1-n)}},aN=function e(t,n){for(var i=t._first,a;i;)i instanceof jo?e(i,n):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==n&&(i.timeline?e(i.timeline,n):(a=i._ease,i._ease=i._yEase,i._yEase=a,i._yoyo=n)),i=i._next},mp=function(t,n){return t&&(fo(t)?t:$r[t]||rhe(t))||n},$p=function(t,n,i,a){i===void 0&&(i=function(v){return 1-n(1-v)}),a===void 0&&(a=function(v){return v<.5?n(v*2)/2:1-n((1-v)*2)/2});var u={easeIn:n,easeOut:i,easeInOut:a},f;return ed(t,function(o){$r[o]=qs[o]=u,$r[f=o.toLowerCase()]=i;for(var v in u)$r[f+(v==="easeIn"?".in":v==="easeOut"?".out":".inOut")]=$r[o+"."+v]=u[v]}),u},sN=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},Q4=function e(t,n,i){var a=n>=1?n:1,u=(i||(t?.3:.45))/(n<1?n:1),f=u/r6*(Math.asin(1/a)||0),o=function(k){return k===1?1:a*Math.pow(2,-10*k)*Cde((k-f)*u)+1},v=t==="out"?o:t==="in"?function(E){return 1-o(1-E)}:sN(o);return u=r6/u,v.config=function(E,k){return e(t,E,k)},v},e5=function e(t,n){n===void 0&&(n=1.70158);var i=function(f){return f?--f*f*((n+1)*f+n)+1:0},a=t==="out"?i:t==="in"?function(u){return 1-i(1-u)}:sN(i);return a.config=function(u){return e(t,u)},a};ed("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;$p(e+",Power"+(n-1),t?function(i){return Math.pow(i,n)}:function(i){return i},function(i){return 1-Math.pow(1-i,n)},function(i){return i<.5?Math.pow(i*2,n)/2:1-Math.pow((1-i)*2,n)/2})});$r.Linear.easeNone=$r.none=$r.Linear.easeIn;$p("Elastic",Q4("in"),Q4("out"),Q4());(function(e,t){var n=1/t,i=2*n,a=2.5*n,u=function(o){return o<n?e*o*o:o<i?e*Math.pow(o-1.5/t,2)+.75:o<a?e*(o-=2.25/t)*o+.9375:e*Math.pow(o-2.625/t,2)+.984375};$p("Bounce",function(f){return 1-u(1-f)},u)})(7.5625,2.75);$p("Expo",function(e){return e?Math.pow(2,10*(e-1)):0});$p("Circ",function(e){return-(AF(1-e*e)-1)});$p("Sine",function(e){return e===1?1:-Tde(e*Ede)+1});$p("Back",e5("in"),e5("out"),e5());$r.SteppedEase=$r.steps=qs.SteppedEase={config:function(t,n){t===void 0&&(t=1);var i=1/t,a=t+(n?0:1),u=n?1:0,f=1-ki;return function(o){return((a*L_(0,f,o)|0)+u)*i}}};N1.ease=$r["quad.out"];ed("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return pT+=e+","+e+"Params,"});var ihe=function(t,n){this.id=Sde++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:Dde,this.set=n?n.getSetter:dN},r_=function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,j1(this,+n.duration,1,1),this.data=n.data,po&&(this._ctx=po,po.data.push(this)),n_||rc.wake()}var t=e.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,j1(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,a){if($1(),!arguments.length)return this._tTime;var u=this._dp;if(u&&u.smoothChildTiming&&this._ts){for(ew(this,i),!u._dp||u.parent||HF(u,this);u&&u.parent;)u.parent._time!==u._start+(u._ts>=0?u._tTime/u._ts:(u.totalDuration()-u._tTime)/-u._ts)&&u.totalTime(u._tTime,!0),u=u.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Vc(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!a||this._initted&&Math.abs(this._zTime)===ki||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),$F(this,i,a)),this},t.time=function(i,a){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+mA(this))%(this._dur+this._rDelay)||(i?this._dur:0),a):this._time},t.totalProgress=function(i,a){return arguments.length?this.totalTime(this.totalDuration()*i,a):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(i,a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+mA(this),a):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(i,a){var u=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*u,a):this._repeat?B1(this._tTime,u)+1:1},t.timeScale=function(i){if(!arguments.length)return this._rts===-ki?0:this._rts;if(this._rts===i)return this;var a=this.parent&&this._ts?fx(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-ki?0:this._rts,this.totalTime(L_(-Math.abs(this._delay),this._tDur,a),!0),Qb(this),Fde(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):($1(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ki&&(this._tTime-=ki)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var a=this.parent||this._dp;return a&&(a._sort||!this.parent)&&Vc(a,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(vs(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var a=this.parent||this._dp;return a?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?fx(a.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=Mde);var a=Ra;return Ra=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ra=a,this},t.globalTime=function(i){for(var a=this,u=arguments.length?i:a.rawTime();a;)u=a._start+u/(a._ts||1),a=a._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(i):u},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,gA(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var a=this._time;return this._rDelay=i,gA(this),a?this.time(a):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,a){return this.totalTime(cl(this,i),vs(a))},t.restart=function(i,a){return this.play().totalTime(i?-this._delay:0,vs(a))},t.play=function(i,a){return i!=null&&this.seek(i,a),this.reversed(!1).paused(!1)},t.reverse=function(i,a){return i!=null&&this.seek(i||this.totalDuration(),a),this.reversed(!0).paused(!1)},t.pause=function(i,a){return i!=null&&this.seek(i,a),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-ki:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-ki,this},t.isActive=function(){var i=this.parent||this._dp,a=this._start,u;return!!(!i||this._ts&&this._initted&&i.isActive()&&(u=i.rawTime(!0))>=a&&u<this.endTime(!0)-ki)},t.eventCallback=function(i,a,u){var f=this.vars;return arguments.length>1?(a?(f[i]=a,u&&(f[i+"Params"]=u),i==="onUpdate"&&(this._onUpdate=a)):delete f[i],this):f[i]},t.then=function(i){var a=this;return new Promise(function(u){var f=fo(i)?i:VF,o=function(){var E=a.then;a.then=null,fo(f)&&(f=f(a))&&(f.then||f===a)&&(a.then=E),u(f),a.then=E};a._initted&&a.totalProgress()===1&&a._ts>=0||!a._tTime&&a._ts<0?o():a._prom=o})},t.kill=function(){Ug(this)},e}();kl(r_.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ki,_prom:0,_ps:!1,_rts:1});var jo=function(e){IF(t,e);function t(i,a){var u;return i===void 0&&(i={}),u=e.call(this,i)||this,u.labels={},u.smoothChildTiming=!!i.smoothChildTiming,u.autoRemoveChildren=!!i.autoRemoveChildren,u._sort=vs(i.sortChildren),io&&Vc(i.parent||io,Mu(u),a),i.reversed&&u.reverse(),i.paused&&u.paused(!0),i.scrollTrigger&&qF(Mu(u),i.scrollTrigger),u}var n=t.prototype;return n.to=function(a,u,f){return d0(0,arguments,this),this},n.from=function(a,u,f){return d0(1,arguments,this),this},n.fromTo=function(a,u,f,o){return d0(2,arguments,this),this},n.set=function(a,u,f){return u.duration=0,u.parent=this,u0(u).repeatDelay||(u.repeat=0),u.immediateRender=!!u.immediateRender,new Po(a,u,cl(this,f),1),this},n.call=function(a,u,f){return Vc(this,Po.delayedCall(0,a,u),f)},n.staggerTo=function(a,u,f,o,v,E,k){return f.duration=u,f.stagger=f.stagger||o,f.onComplete=E,f.onCompleteParams=k,f.parent=this,new Po(a,f,cl(this,v)),this},n.staggerFrom=function(a,u,f,o,v,E,k){return f.runBackwards=1,u0(f).immediateRender=vs(f.immediateRender),this.staggerTo(a,u,f,o,v,E,k)},n.staggerFromTo=function(a,u,f,o,v,E,k,D){return o.startAt=f,u0(o).immediateRender=vs(o.immediateRender),this.staggerTo(a,u,o,v,E,k,D)},n.render=function(a,u,f){var o=this._time,v=this._dirty?this.totalDuration():this._tDur,E=this._dur,k=a<=0?0:da(a),D=this._zTime<0!=a<0&&(this._initted||!E),R,j,N,$,ee,W,K,Y,ie,ue,de,M;if(this!==io&&k>v&&a>=0&&(k=v),k!==this._tTime||f||D){if(o!==this._time&&E&&(k+=this._time-o,a+=this._time-o),R=k,ie=this._start,Y=this._ts,W=!Y,D&&(E||(o=this._zTime),(a||!u)&&(this._zTime=a)),this._repeat){if(de=this._yoyo,ee=E+this._rDelay,this._repeat<-1&&a<0)return this.totalTime(ee*100+a,u,f);if(R=da(k%ee),k===v?($=this._repeat,R=E):($=~~(k/ee),$&&$===k/ee&&(R=E,$--),R>E&&(R=E)),ue=B1(this._tTime,ee),!o&&this._tTime&&ue!==$&&this._tTime-ue*ee-this._dur<=0&&(ue=$),de&&$&1&&(R=E-R,M=1),$!==ue&&!this._lock){var Te=de&&ue&1,fe=Te===(de&&$&1);if($<ue&&(Te=!Te),o=Te?0:k%E?E:k,this._lock=1,this.render(o||(M?0:da($*ee)),u,!E)._lock=0,this._tTime=k,!u&&this.parent&&yl(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),o&&o!==this._time||W!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(E=this._dur,v=this._tDur,fe&&(this._lock=2,o=Te?E:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!W)return this;aN(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(K=$de(this,da(o),da(R)),K&&(k-=R-(R=K._start))),this._tTime=k,this._time=R,this._act=!Y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=a,o=0),!o&&R&&!u&&!$&&(yl(this,"onStart"),this._tTime!==k))return this;if(R>=o&&a>=0)for(j=this._first;j;){if(N=j._next,(j._act||R>=j._start)&&j._ts&&K!==j){if(j.parent!==this)return this.render(a,u,f);if(j.render(j._ts>0?(R-j._start)*j._ts:(j._dirty?j.totalDuration():j._tDur)+(R-j._start)*j._ts,u,f),R!==this._time||!this._ts&&!W){K=0,N&&(k+=this._zTime=-ki);break}}j=N}else{j=this._last;for(var Oe=a<0?a:R;j;){if(N=j._prev,(j._act||Oe<=j._end)&&j._ts&&K!==j){if(j.parent!==this)return this.render(a,u,f);if(j.render(j._ts>0?(Oe-j._start)*j._ts:(j._dirty?j.totalDuration():j._tDur)+(Oe-j._start)*j._ts,u,f||Ra&&(j._initted||j._startAt)),R!==this._time||!this._ts&&!W){K=0,N&&(k+=this._zTime=Oe?-ki:ki);break}}j=N}}if(K&&!u&&(this.pause(),K.render(R>=o?0:-ki)._zTime=R>=o?1:-1,this._ts))return this._start=ie,Qb(this),this.render(a,u,f);this._onUpdate&&!u&&yl(this,"onUpdate",!0),(k===v&&this._tTime>=this.totalDuration()||!k&&o)&&(ie===this._start||Math.abs(Y)!==Math.abs(this._ts))&&(this._lock||((a||!E)&&(k===v&&this._ts>0||!k&&this._ts<0)&&lh(this,1),!u&&!(a<0&&!o)&&(k||o||!v)&&(yl(this,k===v&&a>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(k<v&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(a,u){var f=this;if(qu(u)||(u=cl(this,u,a)),!(a instanceof r_)){if(La(a))return a.forEach(function(o){return f.add(o,u)}),this;if(Fa(a))return this.addLabel(a,u);if(fo(a))a=Po.delayedCall(0,a);else return this}return this!==a?Vc(this,a,u):this},n.getChildren=function(a,u,f,o){a===void 0&&(a=!0),u===void 0&&(u=!0),f===void 0&&(f=!0),o===void 0&&(o=-gl);for(var v=[],E=this._first;E;)E._start>=o&&(E instanceof Po?u&&v.push(E):(f&&v.push(E),a&&v.push.apply(v,E.getChildren(!0,u,f)))),E=E._next;return v},n.getById=function(a){for(var u=this.getChildren(1,1,1),f=u.length;f--;)if(u[f].vars.id===a)return u[f]},n.remove=function(a){return Fa(a)?this.removeLabel(a):fo(a)?this.killTweensOf(a):(Jb(this,a),a===this._recent&&(this._recent=this._last),fp(this))},n.totalTime=function(a,u){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=da(rc.time-(this._ts>0?a/this._ts:(this.totalDuration()-a)/-this._ts))),e.prototype.totalTime.call(this,a,u),this._forcing=0,this):this._tTime},n.addLabel=function(a,u){return this.labels[a]=cl(this,u),this},n.removeLabel=function(a){return delete this.labels[a],this},n.addPause=function(a,u,f){var o=Po.delayedCall(0,u||t_,f);return o.data="isPause",this._hasPause=1,Vc(this,o,cl(this,a))},n.removePause=function(a){var u=this._first;for(a=cl(this,a);u;)u._start===a&&u.data==="isPause"&&lh(u),u=u._next},n.killTweensOf=function(a,u,f){for(var o=this.getTweensOf(a,f),v=o.length;v--;)Ud!==o[v]&&o[v].kill(a,u);return this},n.getTweensOf=function(a,u){for(var f=[],o=_l(a),v=this._first,E=qu(u),k;v;)v instanceof Po?Rde(v._targets,o)&&(E?(!Ud||v._initted&&v._ts)&&v.globalTime(0)<=u&&v.globalTime(v.totalDuration())>u:!u||v.isActive())&&f.push(v):(k=v.getTweensOf(o,u)).length&&f.push.apply(f,k),v=v._next;return f},n.tweenTo=function(a,u){u=u||{};var f=this,o=cl(f,a),v=u,E=v.startAt,k=v.onStart,D=v.onStartParams,R=v.immediateRender,j,N=Po.to(f,kl({ease:u.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:u.duration||Math.abs((o-(E&&"time"in E?E.time:f._time))/f.timeScale())||ki,onStart:function(){if(f.pause(),!j){var ee=u.duration||Math.abs((o-(E&&"time"in E?E.time:f._time))/f.timeScale());N._dur!==ee&&j1(N,ee,0,1).render(N._time,!0,!0),j=1}k&&k.apply(N,D||[])}},u));return R?N.render(0):N},n.tweenFromTo=function(a,u,f){return this.tweenTo(u,kl({startAt:{time:cl(this,a)}},f))},n.recent=function(){return this._recent},n.nextLabel=function(a){return a===void 0&&(a=this._time),_A(this,cl(this,a))},n.previousLabel=function(a){return a===void 0&&(a=this._time),_A(this,cl(this,a),1)},n.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.previousLabel(this._time+ki)},n.shiftChildren=function(a,u,f){f===void 0&&(f=0);for(var o=this._first,v=this.labels,E;o;)o._start>=f&&(o._start+=a,o._end+=a),o=o._next;if(u)for(E in v)v[E]>=f&&(v[E]+=a);return fp(this)},n.invalidate=function(a){var u=this._first;for(this._lock=0;u;)u.invalidate(a),u=u._next;return e.prototype.invalidate.call(this,a)},n.clear=function(a){a===void 0&&(a=!0);for(var u=this._first,f;u;)f=u._next,this.remove(u),u=f;return this._dp&&(this._time=this._tTime=this._pTime=0),a&&(this.labels={}),fp(this)},n.totalDuration=function(a){var u=0,f=this,o=f._last,v=gl,E,k,D;if(arguments.length)return f.timeScale((f._repeat<0?f.duration():f.totalDuration())/(f.reversed()?-a:a));if(f._dirty){for(D=f.parent;o;)E=o._prev,o._dirty&&o.totalDuration(),k=o._start,k>v&&f._sort&&o._ts&&!f._lock?(f._lock=1,Vc(f,o,k-o._delay,1)._lock=0):v=k,k<0&&o._ts&&(u-=k,(!D&&!f._dp||D&&D.smoothChildTiming)&&(f._start+=k/f._ts,f._time-=k,f._tTime-=k),f.shiftChildren(-k,!1,-1/0),v=0),o._end>u&&o._ts&&(u=o._end),o=E;j1(f,f===io&&f._time>u?f._time:u,1,1),f._dirty=0}return f._tDur},t.updateRoot=function(a){if(io._ts&&($F(io,fx(a,io)),BF=rc.frame),rc.frame>=pA){pA+=F1.autoSleep||120;var u=io._first;if((!u||!u._ts)&&F1.autoSleep&&rc._listeners.length<2){for(;u&&!u._ts;)u=u._next;u||rc.sleep()}}},t}(r_);kl(jo.prototype,{_lock:0,_hasPause:0,_forcing:0});var ohe=function(t,n,i,a,u,f,o){var v=new cm(this._pt,t,n,0,1,fhe,null,u),E=0,k=0,D,R,j,N,$,ee,W,K;for(v.b=i,v.e=a,i+="",a+="",(W=~a.indexOf("random("))&&(a=mT(a)),f&&(K=[i,a],f(K,t,n),i=K[0],a=K[1]),R=i.match(K4)||[];D=K4.exec(a);)N=D[0],$=a.substring(E,D.index),j?j=(j+1)%5:$.substr(-5)==="rgba("&&(j=1),N!==R[k++]&&(ee=parseFloat(R[k-1])||0,v._pt={_next:v._pt,p:$||k===1?$:",",s:ee,c:N.charAt(1)==="="?jF(ee,N)-ee:parseFloat(N)-ee,m:j&&j<4?Math.round:0},E=K4.lastIndex);return v.c=E<a.length?a.substring(E,a.length):"",v.fp=o,(Pde.test(a)||W)&&(v.e=0),this._pt=v,v},gT=function(t,n,i,a,u,f,o,v,E,k){fo(a)&&(a=a(u||0,t,f));var D=t[n],R=i!=="get"?i:fo(D)?E?t[n.indexOf("set")||!fo(t["get"+n.substr(3)])?n:"get"+n.substr(3)](E):t[n]():D,j=fo(D)?E?dhe:uN:yT,N;if(Fa(a)&&(~a.indexOf("random(")&&(a=mT(a)),a.charAt(1)==="="&&(N=jF(R,a)+(ch(R)||0),(N||N===0)&&(a=N))),!k||R!==a||h6)return!isNaN(R*a)&&a!==""?(N=new cm(this._pt,t,n,+R||0,a-(R||0),typeof D=="boolean"?phe:hN,0,j),E&&(N.fp=E),o&&N.modifier(o,this,t),this._pt=N):(!D&&!(n in t)&&FF(n,a),ohe.call(this,t,n,R,a,j,v||F1.stringFilter,E))},ahe=function(t,n,i,a,u){if(fo(t)&&(t=h0(t,u,n,i,a)),!tu(t)||t.style&&t.nodeType||La(t)||DF(t))return Fa(t)?h0(t,u,n,i,a):t;var f={},o;for(o in t)f[o]=h0(t[o],u,n,i,a);return f},she=function(t,n,i,a,u,f){var o,v,E,k;if(hl[t]&&(o=new hl[t]).init(u,o.rawVars?n[t]:ahe(n[t],a,u,f,i),i,a,f)!==!1&&(i._pt=v=new cm(i._pt,u,t,0,1,o.render,o,0,o.priority),i!==i1))for(E=i._ptLookup[i._targets.indexOf(u)],k=o._props.length;k--;)E[o._props[k]]=v;return o},Ud,h6,_T=function e(t,n,i){var a=t.vars,u=a.ease,f=a.startAt,o=a.immediateRender,v=a.lazy,E=a.onUpdate,k=a.onUpdateParams,D=a.callbackScope,R=a.runBackwards,j=a.yoyoEase,N=a.keyframes,$=a.autoRevert,ee=t._dur,W=t._startAt,K=t._targets,Y=t.parent,ie=Y&&Y.data==="nested"?Y.vars.targets:K,ue=t._overwrite==="auto"&&!cT,de=t.timeline,M,Te,fe,Oe,rt,at,qe,ze,Be,tt,Ke,Le,Je;if(de&&(!N||!u)&&(u="none"),t._ease=mp(u,N1.ease),t._yEase=j?oN(mp(j===!0?u:j,N1.ease)):0,j&&t._yoyo&&!t._repeat&&(j=t._yEase,t._yEase=t._ease,t._ease=j),t._from=!de&&!!a.runBackwards,!de||N&&!a.stagger){if(ze=K[0]?c0(K[0]).harness:0,Le=ze&&a[ze.prop],M=px(a,hT),W&&(W._zTime<0&&W.progress(1),n<0&&R&&o&&!$?W.render(-1,!0):W.revert(R&&ee?o2:Ade),W._lazy=0),f){if(lh(t._startAt=Po.set(K,kl({data:"isStart",overwrite:!1,parent:Y,immediateRender:!0,lazy:!W&&vs(v),startAt:null,delay:0,onUpdate:E,onUpdateParams:k,callbackScope:D,stagger:0},f))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Ra||!o&&!$)&&t._startAt.revert(o2),o&&ee&&n<=0&&i<=0){n&&(t._zTime=n);return}}else if(R&&ee&&!W){if(n&&(o=!1),fe=kl({overwrite:!1,data:"isFromStart",lazy:o&&!W&&vs(v),immediateRender:o,stagger:0,parent:Y},M),Le&&(fe[ze.prop]=Le),lh(t._startAt=Po.set(K,fe)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Ra?t._startAt.revert(o2):t._startAt.render(-1,!0)),t._zTime=n,!o)e(t._startAt,ki,ki);else if(!n)return}for(t._pt=t._ptCache=0,v=ee&&vs(v)||v&&!ee,Te=0;Te<K.length;Te++){if(rt=K[Te],qe=rt._gsap||fT(K)[Te]._gsap,t._ptLookup[Te]=tt={},a6[qe.id]&&Qd.length&&hx(),Ke=ie===K?Te:ie.indexOf(rt),ze&&(Be=new ze).init(rt,Le||M,t,Ke,ie)!==!1&&(t._pt=Oe=new cm(t._pt,rt,Be.name,0,1,Be.render,Be,0,Be.priority),Be._props.forEach(function(it){tt[it]=Oe}),Be.priority&&(at=1)),!ze||Le)for(fe in M)hl[fe]&&(Be=she(fe,M,t,Ke,rt,ie))?Be.priority&&(at=1):tt[fe]=Oe=gT.call(t,rt,fe,"get",M[fe],Ke,ie,0,a.stringFilter);t._op&&t._op[Te]&&t.kill(rt,t._op[Te]),ue&&t._pt&&(Ud=t,io.killTweensOf(rt,tt,t.globalTime(n)),Je=!t.parent,Ud=0),t._pt&&v&&(a6[qe.id]=1)}at&&yhe(t),t._onInit&&t._onInit(t)}t._onUpdate=E,t._initted=(!t._op||t._pt)&&!Je,N&&n<=0&&de.render(gl,!0,!0)},lhe=function(t,n,i,a,u,f,o){var v=(t._pt&&t._ptCache||(t._ptCache={}))[n],E,k,D,R;if(!v)for(v=t._ptCache[n]=[],D=t._ptLookup,R=t._targets.length;R--;){if(E=D[R][n],E&&E.d&&E.d._pt)for(E=E.d._pt;E&&E.p!==n&&E.fp!==n;)E=E._next;if(!E)return h6=1,t.vars[n]="+=0",_T(t,o),h6=0,1;v.push(E)}for(R=v.length;R--;)k=v[R],E=k._pt||k,E.s=(a||a===0)&&!u?a:E.s+(a||0)+f*E.c,E.c=i-E.s,k.e&&(k.e=Ode(i)+ch(k.e)),k.b&&(k.b=E.s+ch(k.b))},che=function(t,n){var i=t[0]?c0(t[0]).harness:0,a=i&&i.aliases,u,f,o,v;if(!a)return n;u=Ip({},n);for(f in a)if(f in u)for(v=a[f].split(","),o=v.length;o--;)u[v[o]]=u[f];return u},uhe=function(t,n,i,a){var u=n.ease||a||"power1.inOut",f,o;if(La(n))o=i[t]||(i[t]=[]),n.forEach(function(v,E){return o.push({t:E/(n.length-1)*100,v,e:u})});else for(f in n)o=i[f]||(i[f]=[]),f==="ease"||o.push({t:parseFloat(t),v:n[f],e:u})},h0=function(t,n,i,a,u){return fo(t)?t.call(n,i,a,u):Fa(t)&&~t.indexOf("random(")?mT(t):t},lN=pT+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",cN={};ed(lN+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return cN[e]=1});var Po=function(e){IF(t,e);function t(i,a,u,f){var o;typeof a=="number"&&(u.duration=a,a=u,u=null),o=e.call(this,f?a:u0(a))||this;var v=o.vars,E=v.duration,k=v.delay,D=v.immediateRender,R=v.stagger,j=v.overwrite,N=v.keyframes,$=v.defaults,ee=v.scrollTrigger,W=v.yoyoEase,K=a.parent||io,Y=(La(i)||DF(i)?qu(i[0]):"length"in a)?[i]:_l(i),ie,ue,de,M,Te,fe,Oe,rt;if(o._targets=Y.length?fT(Y):dx("GSAP target "+i+" not found. https://greensock.com",!F1.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=j,N||R||Ov(E)||Ov(k)){if(a=o.vars,ie=o.timeline=new jo({data:"nested",defaults:$||{},targets:K&&K.data==="nested"?K.vars.targets:Y}),ie.kill(),ie.parent=ie._dp=Mu(o),ie._start=0,R||Ov(E)||Ov(k)){if(M=Y.length,Oe=R&&KF(R),tu(R))for(Te in R)~lN.indexOf(Te)&&(rt||(rt={}),rt[Te]=R[Te]);for(ue=0;ue<M;ue++)de=px(a,cN),de.stagger=0,W&&(de.yoyoEase=W),rt&&Ip(de,rt),fe=Y[ue],de.duration=+h0(E,Mu(o),ue,fe,Y),de.delay=(+h0(k,Mu(o),ue,fe,Y)||0)-o._delay,!R&&M===1&&de.delay&&(o._delay=k=de.delay,o._start+=k,de.delay=0),ie.to(fe,de,Oe?Oe(ue,fe,Y):0),ie._ease=$r.none;ie.duration()?E=k=0:o.timeline=0}else if(N){u0(kl(ie.vars.defaults,{ease:"none"})),ie._ease=mp(N.ease||a.ease||"none");var at=0,qe,ze,Be;if(La(N))N.forEach(function(tt){return ie.to(Y,tt,">")}),ie.duration();else{de={};for(Te in N)Te==="ease"||Te==="easeEach"||uhe(Te,N[Te],de,N.easeEach);for(Te in de)for(qe=de[Te].sort(function(tt,Ke){return tt.t-Ke.t}),at=0,ue=0;ue<qe.length;ue++)ze=qe[ue],Be={ease:ze.e,duration:(ze.t-(ue?qe[ue-1].t:0))/100*E},Be[Te]=ze.v,ie.to(Y,Be,at),at+=Be.duration;ie.duration()<E&&ie.to({},{duration:E-ie.duration()})}}E||o.duration(E=ie.duration())}else o.timeline=0;return j===!0&&!cT&&(Ud=Mu(o),io.killTweensOf(Y),Ud=0),Vc(K,Mu(o),u),a.reversed&&o.reverse(),a.paused&&o.paused(!0),(D||!E&&!N&&o._start===da(K._time)&&vs(D)&&Nde(Mu(o))&&K.data!=="nested")&&(o._tTime=-ki,o.render(Math.max(0,-k)||0)),ee&&qF(Mu(o),ee),o}var n=t.prototype;return n.render=function(a,u,f){var o=this._time,v=this._tDur,E=this._dur,k=a<0,D=a>v-ki&&!k?v:a<ki?0:a,R,j,N,$,ee,W,K,Y,ie;if(!E)jde(this,a,u,f);else if(D!==this._tTime||!a||f||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==k){if(R=D,Y=this.timeline,this._repeat){if($=E+this._rDelay,this._repeat<-1&&k)return this.totalTime($*100+a,u,f);if(R=da(D%$),D===v?(N=this._repeat,R=E):(N=~~(D/$),N&&N===D/$&&(R=E,N--),R>E&&(R=E)),W=this._yoyo&&N&1,W&&(ie=this._yEase,R=E-R),ee=B1(this._tTime,$),R===o&&!f&&this._initted)return this._tTime=D,this;N!==ee&&(Y&&this._yEase&&aN(Y,W),this.vars.repeatRefresh&&!W&&!this._lock&&(this._lock=f=1,this.render(da($*N),!0).invalidate()._lock=0))}if(!this._initted){if(GF(this,k?a:R,f,u,D))return this._tTime=0,this;if(o!==this._time)return this;if(E!==this._dur)return this.render(a,u,f)}if(this._tTime=D,this._time=R,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=K=(ie||this._ease)(R/E),this._from&&(this.ratio=K=1-K),R&&!o&&!u&&!N&&(yl(this,"onStart"),this._tTime!==D))return this;for(j=this._pt;j;)j.r(K,j.d),j=j._next;Y&&Y.render(a<0?a:!R&&W?-ki:Y._dur*Y._ease(R/this._dur),u,f)||this._startAt&&(this._zTime=a),this._onUpdate&&!u&&(k&&s6(this,a,u,f),yl(this,"onUpdate")),this._repeat&&N!==ee&&this.vars.onRepeat&&!u&&this.parent&&yl(this,"onRepeat"),(D===this._tDur||!D)&&this._tTime===D&&(k&&!this._onUpdate&&s6(this,a,!0,!0),(a||!E)&&(D===this._tDur&&this._ts>0||!D&&this._ts<0)&&lh(this,1),!u&&!(k&&!o)&&(D||o||W)&&(yl(this,D===v?"onComplete":"onReverseComplete",!0),this._prom&&!(D<v&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(a){return(!a||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(a),e.prototype.invalidate.call(this,a)},n.resetTo=function(a,u,f,o){n_||rc.wake(),this._ts||this.play();var v=Math.min(this._dur,(this._dp._time-this._start)*this._ts),E;return this._initted||_T(this,v),E=this._ease(v/this._dur),lhe(this,a,u,f,o,E,v)?this.resetTo(a,u,f,o):(ew(this,0),this.parent||WF(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(a,u){if(u===void 0&&(u="all"),!a&&(!u||u==="all"))return this._lazy=this._pt=0,this.parent?Ug(this):this;if(this.timeline){var f=this.timeline.totalDuration();return this.timeline.killTweensOf(a,u,Ud&&Ud.vars.overwrite!==!0)._first||Ug(this),this.parent&&f!==this.timeline.totalDuration()&&j1(this,this._dur*this.timeline._tDur/f,0,1),this}var o=this._targets,v=a?_l(a):o,E=this._ptLookup,k=this._pt,D,R,j,N,$,ee,W;if((!u||u==="all")&&zde(o,v))return u==="all"&&(this._pt=0),Ug(this);for(D=this._op=this._op||[],u!=="all"&&(Fa(u)&&($={},ed(u,function(K){return $[K]=1}),u=$),u=che(o,u)),W=o.length;W--;)if(~v.indexOf(o[W])){R=E[W],u==="all"?(D[W]=u,N=R,j={}):(j=D[W]=D[W]||{},N=u);for($ in N)ee=R&&R[$],ee&&((!("kill"in ee.d)||ee.d.kill($)===!0)&&Jb(this,ee,"_pt"),delete R[$]),j!=="all"&&(j[$]=1)}return this._initted&&!this._pt&&k&&Ug(this),this},t.to=function(a,u){return new t(a,u,arguments[2])},t.from=function(a,u){return d0(1,arguments)},t.delayedCall=function(a,u,f,o){return new t(u,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:a,onComplete:u,onReverseComplete:u,onCompleteParams:f,onReverseCompleteParams:f,callbackScope:o})},t.fromTo=function(a,u,f){return d0(2,arguments)},t.set=function(a,u){return u.duration=0,u.repeatDelay||(u.repeat=0),new t(a,u)},t.killTweensOf=function(a,u,f){return io.killTweensOf(a,u,f)},t}(r_);kl(Po.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ed("staggerTo,staggerFrom,staggerFromTo",function(e){Po[e]=function(){var t=new jo,n=c6.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var yT=function(t,n,i){return t[n]=i},uN=function(t,n,i){return t[n](i)},dhe=function(t,n,i,a){return t[n](a.fp,i)},hhe=function(t,n,i){return t.setAttribute(n,i)},dN=function(t,n){return fo(t[n])?uN:MF(t[n])&&t.setAttribute?hhe:yT},hN=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},phe=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},fhe=function(t,n){var i=n._pt,a="";if(!t&&n.b)a=n.b;else if(t===1&&n.e)a=n.e;else{for(;i;)a=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+a,i=i._next;a+=n.c}n.set(n.t,n.p,a,n)},vT=function(t,n){for(var i=n._pt;i;)i.r(t,i.d),i=i._next},mhe=function(t,n,i,a){for(var u=this._pt,f;u;)f=u._next,u.p===a&&u.modifier(t,n,i),u=f},ghe=function(t){for(var n=this._pt,i,a;n;)a=n._next,n.p===t&&!n.op||n.op===t?Jb(this,n,"_pt"):n.dep||(i=1),n=a;return!i},_he=function(t,n,i,a){a.mSet(t,n,a.m.call(a.tween,i,a.mt),a)},yhe=function(t){for(var n=t._pt,i,a,u,f;n;){for(i=n._next,a=u;a&&a.pr>n.pr;)a=a._next;(n._prev=a?a._prev:f)?n._prev._next=n:u=n,(n._next=a)?a._prev=n:f=n,n=i}t._pt=u},cm=function(){function e(n,i,a,u,f,o,v,E,k){this.t=i,this.s=u,this.c=f,this.p=a,this.r=o||hN,this.d=v||this,this.set=E||yT,this.pr=k||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(i,a,u){this.mSet=this.mSet||this.set,this.set=_he,this.m=i,this.mt=u,this.tween=a},e}();ed(pT+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return hT[e]=1});qs.TweenMax=qs.TweenLite=Po;qs.TimelineLite=qs.TimelineMax=jo;io=new jo({sortChildren:!1,defaults:N1,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});F1.stringFilter=Jde;var gp=[],s2={},vhe=[],vA=0,xhe=0,t5=function(t){return(s2[t]||vhe).map(function(n){return n()})},p6=function(){var t=Date.now(),n=[];t-vA>2&&(t5("matchMediaInit"),gp.forEach(function(i){var a=i.queries,u=i.conditions,f,o,v,E;for(o in a)f=ul.matchMedia(a[o]).matches,f&&(v=1),f!==u[o]&&(u[o]=f,E=1);E&&(i.revert(),v&&n.push(i))}),t5("matchMediaRevert"),n.forEach(function(i){return i.onMatch(i)}),vA=t,t5("matchMedia"))},pN=function(){function e(n,i){this.selector=i&&u6(i),this.data=[],this._r=[],this.isReverted=!1,this.id=xhe++,n&&this.add(n)}var t=e.prototype;return t.add=function(i,a,u){fo(i)&&(u=a,a=i,i=fo);var f=this,o=function(){var E=po,k=f.selector,D;return E&&E!==f&&E.data.push(f),u&&(f.selector=u6(u)),po=f,D=a.apply(f,arguments),fo(D)&&f._r.push(D),po=E,f.selector=k,f.isReverted=!1,D};return f.last=o,i===fo?o(f):i?f[i]=o:o},t.ignore=function(i){var a=po;po=null,i(this),po=a},t.getTweens=function(){var i=[];return this.data.forEach(function(a){return a instanceof e?i.push.apply(i,a.getTweens()):a instanceof Po&&!(a.parent&&a.parent.data==="nested")&&i.push(a)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,a){var u=this;if(i){var f=this.getTweens();this.data.forEach(function(v){v.data==="isFlip"&&(v.revert(),v.getChildren(!0,!0,!1).forEach(function(E){return f.splice(f.indexOf(E),1)}))}),f.map(function(v){return{g:v.globalTime(0),t:v}}).sort(function(v,E){return E.g-v.g||-1/0}).forEach(function(v){return v.t.revert(i)}),this.data.forEach(function(v){return!(v instanceof Po)&&v.revert&&v.revert(i)}),this._r.forEach(function(v){return v(i,u)}),this.isReverted=!0}else this.data.forEach(function(v){return v.kill&&v.kill()});if(this.clear(),a)for(var o=gp.length;o--;)gp[o].id===this.id&&gp.splice(o,1)},t.revert=function(i){this.kill(i||{})},e}(),bhe=function(){function e(n){this.contexts=[],this.scope=n}var t=e.prototype;return t.add=function(i,a,u){tu(i)||(i={matches:i});var f=new pN(0,u||this.scope),o=f.conditions={},v,E,k;po&&!f.selector&&(f.selector=po.selector),this.contexts.push(f),a=f.add("onMatch",a),f.queries=i;for(E in i)E==="all"?k=1:(v=ul.matchMedia(i[E]),v&&(gp.indexOf(f)<0&&gp.push(f),(o[E]=v.matches)&&(k=1),v.addListener?v.addListener(p6):v.addEventListener("change",p6)));return k&&a(f),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(a){return a.kill(i,!0)})},e}(),mx={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(a){return nN(a)})},timeline:function(t){return new jo(t)},getTweensOf:function(t,n){return io.getTweensOf(t,n)},getProperty:function(t,n,i,a){Fa(t)&&(t=_l(t)[0]);var u=c0(t||{}).get,f=i?VF:UF;return i==="native"&&(i=""),t&&(n?f((hl[n]&&hl[n].get||u)(t,n,i,a)):function(o,v,E){return f((hl[o]&&hl[o].get||u)(t,o,v,E))})},quickSetter:function(t,n,i){if(t=_l(t),t.length>1){var a=t.map(function(k){return Ap.quickSetter(k,n,i)}),u=a.length;return function(k){for(var D=u;D--;)a[D](k)}}t=t[0]||{};var f=hl[n],o=c0(t),v=o.harness&&(o.harness.aliases||{})[n]||n,E=f?function(k){var D=new f;i1._pt=0,D.init(t,i?k+i:k,i1,0,[t]),D.render(1,D),i1._pt&&vT(1,i1)}:o.set(t,v);return f?E:function(k){return E(t,v,i?k+i:k,o,1)}},quickTo:function(t,n,i){var a,u=Ap.to(t,Ip((a={},a[n]="+=0.1",a.paused=!0,a),i||{})),f=function(v,E,k){return u.resetTo(n,v,E,k)};return f.tween=u,f},isTweening:function(t){return io.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=mp(t.ease,N1.ease)),fA(N1,t||{})},config:function(t){return fA(F1,t||{})},registerEffect:function(t){var n=t.name,i=t.effect,a=t.plugins,u=t.defaults,f=t.extendTimeline;(a||"").split(",").forEach(function(o){return o&&!hl[o]&&!qs[o]&&dx(n+" effect requires "+o+" plugin.")}),Y4[n]=function(o,v,E){return i(_l(o),kl(v||{},u),E)},f&&(jo.prototype[n]=function(o,v,E){return this.add(Y4[n](o,tu(v)?v:(E=v)&&{},this),E)})},registerEase:function(t,n){$r[t]=mp(n)},parseEase:function(t,n){return arguments.length?mp(t,n):$r},getById:function(t){return io.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var i=new jo(t),a,u;for(i.smoothChildTiming=vs(t.smoothChildTiming),io.remove(i),i._dp=0,i._time=i._tTime=io._time,a=io._first;a;)u=a._next,(n||!(!a._dur&&a instanceof Po&&a.vars.onComplete===a._targets[0]))&&Vc(i,a,a._start-a._delay),a=u;return Vc(io,i,0),i},context:function(t,n){return t?new pN(t,n):po},matchMedia:function(t){return new bhe(t)},matchMediaRefresh:function(){return gp.forEach(function(t){var n=t.conditions,i,a;for(a in n)n[a]&&(n[a]=!1,i=1);i&&t.revert()})||p6()},addEventListener:function(t,n){var i=s2[t]||(s2[t]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function(t,n){var i=s2[t],a=i&&i.indexOf(n);a>=0&&i.splice(a,1)},utils:{wrap:Zde,wrapYoyo:Xde,distribute:KF,random:JF,snap:YF,normalize:Gde,getUnit:ch,clamp:Vde,splitColor:rN,toArray:_l,selector:u6,mapRange:eN,pipe:Hde,unitize:qde,interpolate:Kde,shuffle:XF},install:zF,effects:Y4,ticker:rc,updateRoot:jo.updateRoot,plugins:hl,globalTimeline:io,core:{PropTween:cm,globals:NF,Tween:Po,Timeline:jo,Animation:r_,getCache:c0,_removeLinkedListItem:Jb,reverting:function(){return Ra},context:function(t){return t&&po&&(po.data.push(t),t._ctx=po),po},suppressOverwrites:function(t){return cT=t}}};ed("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return mx[e]=Po[e]});rc.add(jo.updateRoot);i1=mx.to({},{duration:0});var whe=function(t,n){for(var i=t._pt;i&&i.p!==n&&i.op!==n&&i.fp!==n;)i=i._next;return i},Ehe=function(t,n){var i=t._targets,a,u,f;for(a in n)for(u=i.length;u--;)f=t._ptLookup[u][a],f&&(f=f.d)&&(f._pt&&(f=whe(f,a)),f&&f.modifier&&f.modifier(n[a],t,i[u],a))},n5=function(t,n){return{name:t,rawVars:1,init:function(a,u,f){f._onInit=function(o){var v,E;if(Fa(u)&&(v={},ed(u,function(k){return v[k]=1}),u=v),n){v={};for(E in u)v[E]=n(u[E]);u=v}Ehe(o,u)}}}},Ap=mx.registerPlugin({name:"attr",init:function(t,n,i,a,u){var f,o,v;this.tween=i;for(f in n)v=t.getAttribute(f)||"",o=this.add(t,"setAttribute",(v||0)+"",n[f],a,u,0,0,f),o.op=f,o.b=v,this._props.push(f)},render:function(t,n){for(var i=n._pt;i;)Ra?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,n){for(var i=n.length;i--;)this.add(t,i,t[i]||0,n[i],0,0,0,0,0,1)}},n5("roundProps",d6),n5("modifiers"),n5("snap",YF))||mx;Po.version=jo.version=Ap.version="3.12.2";LF=1;uT()&&$1();$r.Power0;$r.Power1;$r.Power2;$r.Power3;$r.Power4;$r.Linear;$r.Quad;$r.Cubic;$r.Quart;$r.Quint;$r.Strong;var She=$r.Elastic;$r.Back;$r.SteppedEase;$r.Bounce;$r.Sine;$r.Expo;$r.Circ;/*!
 * EasePack 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var js,Rv,fN=function(){return js||typeof window<"u"&&(js=window.gsap)&&js.registerPlugin&&js},f6=function(t,n){return!!(typeof t>"u"?n:t&&!~(t+"").indexOf("false"))},The=function(t){if(js=t||fN(),js){Rv=js.registerEase;var n=js.parseEase(),i=function(f){return function(o){var v=.5+o/2;f.config=function(E){return f(2*(1-E)*E*v+E*E)}}},a;for(a in n)n[a].config||i(n[a]);Rv("slow",uh),Rv("expoScale",xT),Rv("rough",i_);for(a in p0)a!=="version"&&js.core.globals(a,p0[a])}},mN=function(t,n,i){t=Math.min(1,t||.7);var a=t<1?n||n===0?n:.7:0,u=(1-t)/2,f=u+t,o=f6(i);return function(v){var E=v+(.5-v)*a;return v<u?o?1-(v=1-v/u)*v:E-(v=1-v/u)*v*v*v*E:v>f?o?v===1?0:1-(v=(v-f)/u)*v:E+(v-E)*(v=(v-f)/u)*v*v*v:o?1:E}},gN=function(t,n,i){var a=Math.log(n/t),u=n-t;return i&&(i=js.parseEase(i)),function(f){return(t*Math.exp(a*(i?i(f):f))-t)/u}},r5=function(t,n,i){this.t=t,this.v=n,i&&(this.next=i,i.prev=this,this.c=i.v-n,this.gap=i.t-t)},_N=function(t){typeof t!="object"&&(t={points:+t||20});for(var n=t.taper||"none",i=[],a=0,u=(+t.points||20)|0,f=u,o=f6(t.randomize,!0),v=f6(t.clamp),E=js?js.parseEase(t.template):0,k=(+t.strength||1)*.4,D,R,j,N,$,ee,W;--f>-1;)D=o?Math.random():1/u*f,R=E?E(D):D,n==="none"?j=k:n==="out"?(N=1-D,j=N*N*k):n==="in"?j=D*D*k:D<.5?(N=D*2,j=N*N*.5*k):(N=(1-D)*2,j=N*N*.5*k),o?R+=Math.random()*j-j*.5:f%2?R+=j*.5:R-=j*.5,v&&(R>1?R=1:R<0&&(R=0)),i[a++]={x:D,y:R};for(i.sort(function(K,Y){return K.x-Y.x}),ee=new r5(1,1,null),f=u;f--;)$=i[f],ee=new r5($.x,$.y,ee);return W=new r5(0,0,ee.t?ee:ee.next),function(K){var Y=W;if(K>Y.t){for(;Y.next&&K>=Y.t;)Y=Y.next;Y=Y.prev}else for(;Y.prev&&K<=Y.t;)Y=Y.prev;return W=Y,Y.v+(K-Y.t)/Y.gap*Y.c}},uh=mN(.7);uh.ease=uh;uh.config=mN;var xT=gN(1,2);xT.config=gN;var i_=_N();i_.ease=i_;i_.config=_N;var p0={SlowMo:uh,RoughEase:i_,ExpoScaleEase:xT};for(var xA in p0)p0[xA].register=The,p0[xA].version="3.12.2";fN()&&js.registerPlugin(uh);class yN extends Ut.Component{componentDidMount(){Ff(".button--bubble").each(function(){var t=Ff(this).parent().find(".circle.top-left"),n=Ff(this).parent().find(".circle.bottom-right"),i=new jo,a=new jo,u=new jo({paused:!0});i.to(t,1.2,{x:-25,y:-25,scaleY:2,ease:uh.ease.config(.1,.7,!1)}),i.to(t.eq(0),.1,{scale:.2,x:"+=6",y:"-=2"}),i.to(t.eq(1),.1,{scaleX:1,scaleY:.8,x:"-=10",y:"-=7"},"-=0.1"),i.to(t.eq(2),.1,{scale:.2,x:"-=15",y:"+=6"},"-=0.1"),i.to(t.eq(0),1,{scale:0,x:"-=5",y:"-=15",opacity:0}),i.to(t.eq(1),1,{scaleX:.4,scaleY:.4,x:"-=10",y:"-=10",opacity:0},"-=1"),i.to(t.eq(2),1,{scale:0,x:"-=15",y:"+=5",opacity:0},"-=1");var f=new jo,o=new jo;f.set(t,{x:0,y:0,rotation:-45}),f.add(i),a.set(n,{x:0,y:0}),a.to(n,1.1,{x:30,y:30,ease:uh.ease.config(.1,.7,!1)}),a.to(n.eq(0),.1,{scale:.2,x:"-=6",y:"+=3"}),a.to(n.eq(1),.1,{scale:.8,x:"+=7",y:"+=3"},"-=0.1"),a.to(n.eq(2),.1,{scale:.2,x:"+=15",y:"-=6"},"-=0.2"),a.to(n.eq(0),1,{scale:0,x:"+=5",y:"+=15",opacity:0}),a.to(n.eq(1),1,{scale:.4,x:"+=7",y:"+=7",opacity:0},"-=1"),a.to(n.eq(2),1,{scale:0,x:"+=15",y:"-=5",opacity:0},"-=1"),o.set(n,{x:0,y:0,rotation:45}),o.add(a),u.add(f),u.to(Ff(this).parent().find(".button.effect-button"),.8,{scaleY:1.1},.1),u.add(o,.2),u.to(Ff(this).parent().find(".button.effect-button"),1.8,{scale:1,ease:She.easeOut.config(1.2,.4)},1.2),u.timeScale(2.6),Ff(this).on("mouseover",function(){u.restart()})})}render(){const{onClick:t}=this.props;return Z.jsxs("div",{className:"mainbutton",children:[Z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"goo",children:Z.jsx("defs",{children:Z.jsxs("filter",{id:"goo",children:[Z.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),Z.jsx("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),Z.jsx("feComposite",{in:"SourceGraphic",in2:"goo"})]})})}),Z.jsxs("span",{className:"button--bubble__container",children:[Z.jsx("a",{href:"#campaign",className:"button button--bubble",onClick:t,children:"Create an amble now!"}),Z.jsxs("span",{className:"button--bubble__effect-container",children:[Z.jsx("span",{className:"circle top-left"}),Z.jsx("span",{className:"circle top-left"}),Z.jsx("span",{className:"circle top-left"}),Z.jsx("span",{className:"button effect-button"}),Z.jsx("span",{className:"circle bottom-right"}),Z.jsx("span",{className:"circle bottom-right"}),Z.jsx("span",{className:"circle bottom-right"})]})]})]})}}const tw=({zoom:e})=>(q.useEffect(()=>{ds.accessToken="pk.eyJ1IjoieGluZ3llYWgiLCJhIjoiY2toeWFsOXdsMGE3djJybjBzaGZkdWE2aSJ9.wqzmeUmjmYZiKeW3NGvIiw";const t=new ds.Map({container:"map",center:[-73.971321,40.776676],zoom:e||11,style:"mapbox://styles/xingyeah/clk2yxv5y006s01pg4ws580kw"});return()=>{t.remove()}},[e]),Z.jsx("div",{id:"map",style:{width:"90%",height:"80%"}}));function Che(){const[e,t]=q.useState(""),[n,i]=q.useState("");q.useEffect(()=>{a()},[]);let a=()=>{I_.get("users/getquote").then(u=>{const f=u.data,o=Object.keys(f),v=Math.floor(Math.random()*o.length),E=o[v],k=f[E];t(k),i(E)}).catch(u=>{console.error("Error fetching data:",u)})};return jp({palette:{primary:{main:"#004d40"},secondary:{main:"#004d40"}}}),Z.jsxs("div",{className:"landing-page-container",children:[Z.jsx("div",{className:"menubar-area",children:Z.jsx(kF,{})}),Z.jsx("div",{className:"resources-pics-container",children:Z.jsxs("div",{className:"quotebox",children:[Z.jsxs("div",{className:"quote",children:[Z.jsx("h2",{children:e}),Z.jsxs("small",{children:["- ",n]})]}),Z.jsx("div",{className:"btn-container",children:Z.jsx("button",{className:"btn",onClick:a,children:"Get a New Quote"})})]})}),Z.jsx("div",{className:"endbar"})]})}function bT(){const[e,t]=q.useState(!1),[n,i]=q.useState(!1),a=q.useRef(null),u=q.useRef(null),[f,o]=q.useState(!1),v=()=>{document.querySelector(".additional-block-close-menubar").classList.add("hide"),document.querySelector(".overlay").classList.add("hide"),document.querySelector(".menu-bar").classList.add("hide"),document.querySelector(".additional-blocks-menubar").classList.add("hide"),document.querySelector(".additional-block-text-menubar").classList.add("hide")},E=()=>{document.querySelector(".additional-block-close-Reg-menu").classList.add("hide"),document.querySelector(".overlay-Reg").classList.add("hide"),document.querySelector(".Reg-menu").classList.add("hide"),document.querySelector(".additional-blocks-Reg").classList.add("hide"),document.querySelector(".additional-block-text-Reg").classList.add("hide")},k=()=>{v()},D=()=>{E()},R=()=>{t(!e)},j=()=>{n?(k(),setTimeout(()=>{i(!1)},1e3)):i(!0)},N=()=>{f?(D(),setTimeout(()=>{o(!1)},1e3)):o(!0)},$=ee=>{a.current&&!a.current.contains(ee.target)&&!u.current.contains(ee.target)&&t(!1)};return q.useEffect(()=>(document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}),[]),Z.jsxs("div",{className:"menubar-container",children:[Z.jsx("div",{className:"menu-button-wrapper",children:Z.jsx(SF,{className:"menu-button",sx:{fontSize:24,color:"white"},onClick:j})}),Z.jsxs("div",{className:"profile-button-wrapper",children:[Z.jsx(CF,{className:`profile-button ${e?"active":""}`,sx:{fontSize:25,color:"white"},onClick:R,ref:u}),e&&Z.jsxs("div",{className:"options-box",ref:a,children:[Z.jsxs("button",{className:"option",children:[" ",Z.jsx("span",{className:"option-text",onClick:N,children:"Sign Up"})]}),Z.jsx("button",{className:"option",children:Z.jsx("span",{className:"option-text",children:"Log In"})})]})]}),Z.jsx("div",{className:"history-button-wrapper",children:Z.jsx(TF,{className:"history-button",sx:{fontSize:25,color:"white"}})}),n&&Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{className:`menu-bar ${n?"show":""}`,children:[Z.jsxs("div",{className:"additional-blocks-menubar",children:[Z.jsx("div",{className:"additional-block-text-menubar",children:Z.jsx("span",{className:"text_bar_2-menubar",children:"Navigation"})}),Z.jsx("div",{className:"additional-block-close-menubar",children:Z.jsx(z1,{sx:{fontSize:27,color:"white"},onClick:j})})]}),Z.jsx("button",{className:"option-bottom-menu",children:"Home Page"}),Z.jsx("button",{className:"option-bottom-menu",children:"Plan Page"}),Z.jsx("button",{className:"option-bottom-menu",children:"Green Inform Page"}),Z.jsx("button",{className:"option-bottom-menu",children:"About"})]}),Z.jsx("div",{className:"overlay"})]}),f&&Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{className:`Reg-menu ${f?"show":""}`,children:[Z.jsxs("div",{className:"additional-blocks-Reg",children:[Z.jsx("div",{className:"additional-block-text-Reg",children:Z.jsx("span",{className:"text_bar_2-Reg",children:"Sign Up"})}),Z.jsx("div",{className:"additional-block-close-Reg-menu",children:Z.jsx(z1,{sx:{fontSize:27,color:"white"},onClick:N})})]}),Z.jsx(qz,{})]}),Z.jsx("div",{className:"overlay-Reg"})]})]})}jp({palette:{primary:{main:"#004d40"},secondary:{main:"#004d40"}}});const bA=["/static/images/LL1.png","/static/images/LL2.png","/static/images/LL3.png","/static/images/LL3.png","/static/images/LL4.png","/static/images/LL4.png","/static/images/LL5.png"];function wA(){const e=mh(),[t,n]=q.useState(0),i=()=>{e("/interface-two")};return q.useEffect(()=>{const a=setInterval(()=>{n(u=>(u+1)%bA.length)},80);return()=>{clearInterval(a)}},[]),Z.jsxs(Z.Fragment,{children:[Z.jsx(bT,{}),Z.jsxs("div",{className:"homepagecontainer",children:[Z.jsx("div",{className:"mapwrapper_homepage",children:Z.jsx(tw,{zoom:12.8})}),Z.jsxs("div",{className:"flex-container",children:[Z.jsxs("span",{className:"hometext",children:[Z.jsx("span",{style:{fontSize:"28px",fontWeight:550},children:"amble - the peaceful way"}),Z.jsx("br",{}),Z.jsx("span",{style:{fontSize:"16px"},children:"The purpose of our application is to generate walking routes for users to guide them though the quiet corners of Manhattan. The route generating algorthm takes forecast conditions into our machine learning model to determine busyiness based on taxizone, citibike and subway data and pair this infomation with crimes statistics for areas of Manhattan to ensure users can enjoy a quiet, peaceful and safe journey!"})]}),Z.jsx("div",{className:"LOGO",children:Z.jsx("img",{src:bA[t],className:"Logo",alt:"Logo"})}),Z.jsx(yN,{onClick:i})]})]})]})}var khe={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(xn,function(){var n=1e3,i=6e4,a=36e5,u="millisecond",f="second",o="minute",v="hour",E="day",k="week",D="month",R="quarter",j="year",N="date",$="Invalid Date",ee=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,W=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,K={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(qe){var ze=["th","st","nd","rd"],Be=qe%100;return"["+qe+(ze[(Be-20)%10]||ze[Be]||ze[0])+"]"}},Y=function(qe,ze,Be){var tt=String(qe);return!tt||tt.length>=ze?qe:""+Array(ze+1-tt.length).join(Be)+qe},ie={s:Y,z:function(qe){var ze=-qe.utcOffset(),Be=Math.abs(ze),tt=Math.floor(Be/60),Ke=Be%60;return(ze<=0?"+":"-")+Y(tt,2,"0")+":"+Y(Ke,2,"0")},m:function qe(ze,Be){if(ze.date()<Be.date())return-qe(Be,ze);var tt=12*(Be.year()-ze.year())+(Be.month()-ze.month()),Ke=ze.clone().add(tt,D),Le=Be-Ke<0,Je=ze.clone().add(tt+(Le?-1:1),D);return+(-(tt+(Be-Ke)/(Le?Ke-Je:Je-Ke))||0)},a:function(qe){return qe<0?Math.ceil(qe)||0:Math.floor(qe)},p:function(qe){return{M:D,y:j,w:k,d:E,D:N,h:v,m:o,s:f,ms:u,Q:R}[qe]||String(qe||"").toLowerCase().replace(/s$/,"")},u:function(qe){return qe===void 0}},ue="en",de={};de[ue]=K;var M=function(qe){return qe instanceof rt},Te=function qe(ze,Be,tt){var Ke;if(!ze)return ue;if(typeof ze=="string"){var Le=ze.toLowerCase();de[Le]&&(Ke=Le),Be&&(de[Le]=Be,Ke=Le);var Je=ze.split("-");if(!Ke&&Je.length>1)return qe(Je[0])}else{var it=ze.name;de[it]=ze,Ke=it}return!tt&&Ke&&(ue=Ke),Ke||!tt&&ue},fe=function(qe,ze){if(M(qe))return qe.clone();var Be=typeof ze=="object"?ze:{};return Be.date=qe,Be.args=arguments,new rt(Be)},Oe=ie;Oe.l=Te,Oe.i=M,Oe.w=function(qe,ze){return fe(qe,{locale:ze.$L,utc:ze.$u,x:ze.$x,$offset:ze.$offset})};var rt=function(){function qe(Be){this.$L=Te(Be.locale,null,!0),this.parse(Be)}var ze=qe.prototype;return ze.parse=function(Be){this.$d=function(tt){var Ke=tt.date,Le=tt.utc;if(Ke===null)return new Date(NaN);if(Oe.u(Ke))return new Date;if(Ke instanceof Date)return new Date(Ke);if(typeof Ke=="string"&&!/Z$/i.test(Ke)){var Je=Ke.match(ee);if(Je){var it=Je[2]-1||0,kt=(Je[7]||"0").substring(0,3);return Le?new Date(Date.UTC(Je[1],it,Je[3]||1,Je[4]||0,Je[5]||0,Je[6]||0,kt)):new Date(Je[1],it,Je[3]||1,Je[4]||0,Je[5]||0,Je[6]||0,kt)}}return new Date(Ke)}(Be),this.$x=Be.x||{},this.init()},ze.init=function(){var Be=this.$d;this.$y=Be.getFullYear(),this.$M=Be.getMonth(),this.$D=Be.getDate(),this.$W=Be.getDay(),this.$H=Be.getHours(),this.$m=Be.getMinutes(),this.$s=Be.getSeconds(),this.$ms=Be.getMilliseconds()},ze.$utils=function(){return Oe},ze.isValid=function(){return this.$d.toString()!==$},ze.isSame=function(Be,tt){var Ke=fe(Be);return this.startOf(tt)<=Ke&&Ke<=this.endOf(tt)},ze.isAfter=function(Be,tt){return fe(Be)<this.startOf(tt)},ze.isBefore=function(Be,tt){return this.endOf(tt)<fe(Be)},ze.$g=function(Be,tt,Ke){return Oe.u(Be)?this[tt]:this.set(Ke,Be)},ze.unix=function(){return Math.floor(this.valueOf()/1e3)},ze.valueOf=function(){return this.$d.getTime()},ze.startOf=function(Be,tt){var Ke=this,Le=!!Oe.u(tt)||tt,Je=Oe.p(Be),it=function(Sn,Jt){var yn=Oe.w(Ke.$u?Date.UTC(Ke.$y,Jt,Sn):new Date(Ke.$y,Jt,Sn),Ke);return Le?yn:yn.endOf(E)},kt=function(Sn,Jt){return Oe.w(Ke.toDate()[Sn].apply(Ke.toDate("s"),(Le?[0,0,0,0]:[23,59,59,999]).slice(Jt)),Ke)},yt=this.$W,wt=this.$M,jt=this.$D,Qt="set"+(this.$u?"UTC":"");switch(Je){case j:return Le?it(1,0):it(31,11);case D:return Le?it(1,wt):it(0,wt+1);case k:var en=this.$locale().weekStart||0,on=(yt<en?yt+7:yt)-en;return it(Le?jt-on:jt+(6-on),wt);case E:case N:return kt(Qt+"Hours",0);case v:return kt(Qt+"Minutes",1);case o:return kt(Qt+"Seconds",2);case f:return kt(Qt+"Milliseconds",3);default:return this.clone()}},ze.endOf=function(Be){return this.startOf(Be,!1)},ze.$set=function(Be,tt){var Ke,Le=Oe.p(Be),Je="set"+(this.$u?"UTC":""),it=(Ke={},Ke[E]=Je+"Date",Ke[N]=Je+"Date",Ke[D]=Je+"Month",Ke[j]=Je+"FullYear",Ke[v]=Je+"Hours",Ke[o]=Je+"Minutes",Ke[f]=Je+"Seconds",Ke[u]=Je+"Milliseconds",Ke)[Le],kt=Le===E?this.$D+(tt-this.$W):tt;if(Le===D||Le===j){var yt=this.clone().set(N,1);yt.$d[it](kt),yt.init(),this.$d=yt.set(N,Math.min(this.$D,yt.daysInMonth())).$d}else it&&this.$d[it](kt);return this.init(),this},ze.set=function(Be,tt){return this.clone().$set(Be,tt)},ze.get=function(Be){return this[Oe.p(Be)]()},ze.add=function(Be,tt){var Ke,Le=this;Be=Number(Be);var Je=Oe.p(tt),it=function(wt){var jt=fe(Le);return Oe.w(jt.date(jt.date()+Math.round(wt*Be)),Le)};if(Je===D)return this.set(D,this.$M+Be);if(Je===j)return this.set(j,this.$y+Be);if(Je===E)return it(1);if(Je===k)return it(7);var kt=(Ke={},Ke[o]=i,Ke[v]=a,Ke[f]=n,Ke)[Je]||1,yt=this.$d.getTime()+Be*kt;return Oe.w(yt,this)},ze.subtract=function(Be,tt){return this.add(-1*Be,tt)},ze.format=function(Be){var tt=this,Ke=this.$locale();if(!this.isValid())return Ke.invalidDate||$;var Le=Be||"YYYY-MM-DDTHH:mm:ssZ",Je=Oe.z(this),it=this.$H,kt=this.$m,yt=this.$M,wt=Ke.weekdays,jt=Ke.months,Qt=function(Jt,yn,Ft,nn){return Jt&&(Jt[yn]||Jt(tt,Le))||Ft[yn].slice(0,nn)},en=function(Jt){return Oe.s(it%12||12,Jt,"0")},on=Ke.meridiem||function(Jt,yn,Ft){var nn=Jt<12?"AM":"PM";return Ft?nn.toLowerCase():nn},Sn={YY:String(this.$y).slice(-2),YYYY:Oe.s(this.$y,4,"0"),M:yt+1,MM:Oe.s(yt+1,2,"0"),MMM:Qt(Ke.monthsShort,yt,jt,3),MMMM:Qt(jt,yt),D:this.$D,DD:Oe.s(this.$D,2,"0"),d:String(this.$W),dd:Qt(Ke.weekdaysMin,this.$W,wt,2),ddd:Qt(Ke.weekdaysShort,this.$W,wt,3),dddd:wt[this.$W],H:String(it),HH:Oe.s(it,2,"0"),h:en(1),hh:en(2),a:on(it,kt,!0),A:on(it,kt,!1),m:String(kt),mm:Oe.s(kt,2,"0"),s:String(this.$s),ss:Oe.s(this.$s,2,"0"),SSS:Oe.s(this.$ms,3,"0"),Z:Je};return Le.replace(W,function(Jt,yn){return yn||Sn[Jt]||Je.replace(":","")})},ze.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ze.diff=function(Be,tt,Ke){var Le,Je=Oe.p(tt),it=fe(Be),kt=(it.utcOffset()-this.utcOffset())*i,yt=this-it,wt=Oe.m(this,it);return wt=(Le={},Le[j]=wt/12,Le[D]=wt,Le[R]=wt/3,Le[k]=(yt-kt)/6048e5,Le[E]=(yt-kt)/864e5,Le[v]=yt/a,Le[o]=yt/i,Le[f]=yt/n,Le)[Je]||yt,Ke?wt:Oe.a(wt)},ze.daysInMonth=function(){return this.endOf(D).$D},ze.$locale=function(){return de[this.$L]},ze.locale=function(Be,tt){if(!Be)return this.$L;var Ke=this.clone(),Le=Te(Be,tt,!0);return Le&&(Ke.$L=Le),Ke},ze.clone=function(){return Oe.w(this.$d,this)},ze.toDate=function(){return new Date(this.valueOf())},ze.toJSON=function(){return this.isValid()?this.toISOString():null},ze.toISOString=function(){return this.$d.toISOString()},ze.toString=function(){return this.$d.toUTCString()},qe}(),at=rt.prototype;return fe.prototype=at,[["$ms",u],["$s",f],["$m",o],["$H",v],["$W",E],["$M",D],["$y",j],["$D",N]].forEach(function(qe){at[qe[1]]=function(ze){return this.$g(ze,qe[0],qe[1])}}),fe.extend=function(qe,ze){return qe.$i||(qe(ze,rt,fe),qe.$i=!0),fe},fe.locale=Te,fe.isDayjs=M,fe.unix=function(qe){return fe(1e3*qe)},fe.en=de[ue],fe.Ls=de,fe.p={},fe})})(khe);const gx="api.openweathermap.org/data/2.5",_x="80503c1dbe4d41ea31d3d65de6bad11b";var wT={},Phe=iu;Object.defineProperty(wT,"__esModule",{value:!0});var vN=wT.default=void 0,Ihe=Phe(ou()),Ahe=Z,Mhe=(0,Ihe.default)((0,Ahe.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"}),"Cloud");vN=wT.default=Mhe;function EA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function m6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(n),!0).forEach(function(i){Ni(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EA(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function nw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rw(e,t,n){return t&&SA(e.prototype,t),n&&SA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nu(){return nu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nu.apply(this,arguments)}function ET(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g6(e,t)}function yx(e){return yx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},yx(e)}function g6(e,t){return g6=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},g6(e,t)}function Dhe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ohe(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,u;for(u=0;u<i.length;u++)a=i[u],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function iw(e,t){if(e==null)return{};var n=Ohe(e,t),i,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)i=u[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function tc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rhe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tc(e)}function ST(e){var t=Dhe();return function(){var i=yx(e),a;if(t){var u=yx(this).constructor;a=Reflect.construct(i,arguments,u)}else a=i.apply(this,arguments);return Rhe(this,a)}}function Lhe(e,t){return Nhe(e)||jhe(e,t)||xN(e,t)||Uhe()}function zhe(e){return Fhe(e)||Bhe(e)||xN(e)||$he()}function Fhe(e){if(Array.isArray(e))return _6(e)}function Nhe(e){if(Array.isArray(e))return e}function Bhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jhe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],a=!0,u=!1,f,o;try{for(n=n.call(e);!(a=(f=n.next()).done)&&(i.push(f.value),!(t&&i.length===t));a=!0);}catch(v){u=!0,o=v}finally{try{!a&&n.return!=null&&n.return()}finally{if(u)throw o}}return i}}function xN(e,t){if(e){if(typeof e=="string")return _6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _6(e,t)}}function _6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function $he(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Vhe=rw(function e(t){var n=this,i=t.expanded,a=i===void 0?[]:i,u=t.allowMultipleExpanded,f=u===void 0?!1:u,o=t.allowZeroExpanded,v=o===void 0?!1:o;nw(this,e),Ni(this,"expanded",void 0),Ni(this,"allowMultipleExpanded",void 0),Ni(this,"allowZeroExpanded",void 0),Ni(this,"toggleExpanded",function(E){if(n.isItemDisabled(E))return n;var k=n.isItemExpanded(E);return k?n.augment({expanded:n.expanded.filter(function(D){return D!==E})}):n.augment({expanded:n.allowMultipleExpanded?[].concat(zhe(n.expanded),[E]):[E]})}),Ni(this,"isItemDisabled",function(E){var k=n.isItemExpanded(E),D=n.expanded.length===1;return!!(k&&!n.allowZeroExpanded&&D)}),Ni(this,"isItemExpanded",function(E){return n.expanded.indexOf(E)!==-1}),Ni(this,"getPanelAttributes",function(E,k){var D=k??n.isItemExpanded(E);return{role:n.allowMultipleExpanded?void 0:"region","aria-hidden":n.allowMultipleExpanded?!D:void 0,"aria-labelledby":n.getButtonId(E),id:n.getPanelId(E),hidden:D?void 0:!0}}),Ni(this,"getHeadingAttributes",function(){return{role:"heading"}}),Ni(this,"getButtonAttributes",function(E,k){var D=k??n.isItemExpanded(E),R=n.isItemDisabled(E);return{id:n.getButtonId(E),"aria-disabled":R,"aria-expanded":D,"aria-controls":n.getPanelId(E),role:"button",tabIndex:0}}),Ni(this,"getPanelId",function(E){return"accordion__panel-".concat(E)}),Ni(this,"getButtonId",function(E){return"accordion__heading-".concat(E)}),Ni(this,"augment",function(E){return new e(m6({expanded:n.expanded,allowMultipleExpanded:n.allowMultipleExpanded,allowZeroExpanded:n.allowZeroExpanded},E))}),this.expanded=a,this.allowMultipleExpanded=f,this.allowZeroExpanded=v}),bN=q.createContext(null),wN=function(e){ET(n,e);var t=ST(n);function n(){var i;nw(this,n);for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return i=t.call.apply(t,[this].concat(u)),Ni(tc(i),"state",new Vhe({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),Ni(tc(i),"toggleExpanded",function(o){i.setState(function(v){return v.toggleExpanded(o)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),Ni(tc(i),"isItemDisabled",function(o){return i.state.isItemDisabled(o)}),Ni(tc(i),"isItemExpanded",function(o){return i.state.isItemExpanded(o)}),Ni(tc(i),"getPanelAttributes",function(o,v){return i.state.getPanelAttributes(o,v)}),Ni(tc(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),Ni(tc(i),"getButtonAttributes",function(o,v){return i.state.getButtonAttributes(o,v)}),i}return rw(n,[{key:"render",value:function(){var a=this.state,u=a.allowZeroExpanded,f=a.allowMultipleExpanded;return q.createElement(bN.Provider,{value:{allowMultipleExpanded:f,allowZeroExpanded:u,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),n}(q.PureComponent);Ni(wN,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var EN=function(e){ET(n,e);var t=ST(n);function n(){var i;nw(this,n);for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return i=t.call.apply(t,[this].concat(u)),Ni(tc(i),"renderChildren",function(o){return o?i.props.children(o):null}),i}return rw(n,[{key:"render",value:function(){return q.createElement(bN.Consumer,null,this.renderChildren)}}]),n}(q.PureComponent),Whe=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],SN=function(t){var n=t.className,i=n===void 0?"accordion":n,a=t.allowMultipleExpanded,u=t.allowZeroExpanded,f=t.onChange,o=t.preExpanded,v=iw(t,Whe);return q.createElement(wN,{preExpanded:o,allowMultipleExpanded:a,allowZeroExpanded:u,onChange:f},q.createElement("div",nu({"data-accordion-component":"Accordion",className:i},v)))},y6;(function(e){e.Accordion="Accordion",e.AccordionItem="AccordionItem",e.AccordionItemButton="AccordionItemButton",e.AccordionItemHeading="AccordionItemHeading",e.AccordionItemPanel="AccordionItemPanel"})(y6||(y6={}));var TN=y6,i5=0;function Hhe(){var e=i5;return i5=i5+1,"raa-".concat(e)}var qhe=q.useId||Hhe,Ghe=/[\u0009\u000a\u000c\u000d\u0020]/g;function o_(e){return e===""||Ghe.test(e)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(e,'", ASCII whitespaces are forbidden')),!1):!0}var CN=q.createContext(null),Zhe=function(t){var n=t.children,i=t.uuid,a=t.accordionContext,u=t.dangerouslySetExpanded,f=function(){a.toggleExpanded(i)},o=function(E){var k=u??E.isItemExpanded(i),D=E.isItemDisabled(i),R=E.getPanelAttributes(i,u),j=E.getHeadingAttributes(i),N=E.getButtonAttributes(i,u);return q.createElement(CN.Provider,{value:{uuid:i,expanded:k,disabled:D,toggleExpanded:f,panelAttributes:R,headingAttributes:j,buttonAttributes:N}},n)};return q.createElement(EN,null,o)},Xhe=function(t){return q.createElement(EN,null,function(n){return q.createElement(Zhe,nu({},t,{accordionContext:n}))})},ow=function(t){var n=t.children,i=function(u){return u?n(u):null};return q.createElement(CN.Consumer,null,i)},Khe=["uuid","dangerouslySetExpanded","className","activeClassName"],TT=function(t){var n=t.uuid,i=t.dangerouslySetExpanded,a=t.className,u=a===void 0?"accordion__item":a,f=t.activeClassName,o=iw(t,Khe),v=q.useState(qhe()),E=Lhe(v,1),k=E[0],D=n??k,R=function(N){var $=N.expanded,ee=$&&f?f:u;return q.createElement("div",nu({"data-accordion-component":"AccordionItem",className:ee},o))};return o_(D.toString()),o.id&&o_(o.id),q.createElement(Xhe,{uuid:D,dangerouslySetExpanded:i},q.createElement(ow,null,R))};TT.displayName=TN.AccordionItem;function kN(e){return e&&(e.matches('[data-accordion-component="Accordion"]')?e:kN(e.parentElement))}function aw(e){var t=kN(e);return t&&Array.from(t.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Yhe(e){var t=aw(e)||[],n=t[0];n&&n.focus()}function Jhe(e){var t=aw(e)||[],n=t[t.length-1];n&&n.focus()}function Qhe(e){var t=aw(e)||[],n=t.indexOf(e);if(n!==-1){var i=t[n+1];i&&i.focus()}}function epe(e){var t=aw(e)||[],n=t.indexOf(e);if(n!==-1){var i=t[n-1];i&&i.focus()}}var Iu={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},tpe=["toggleExpanded","className"],npe=function(t){var n=t.toggleExpanded,i=t.className,a=i===void 0?"accordion__button":i,u=iw(t,tpe),f=function(v){var E=v.key;if((E===Iu.ENTER||E===Iu.SPACE||E===Iu.SPACE_DEPRECATED)&&(v.preventDefault(),n()),v.target instanceof HTMLElement)switch(E){case Iu.HOME:{v.preventDefault(),Yhe(v.target);break}case Iu.END:{v.preventDefault(),Jhe(v.target);break}case Iu.LEFT:case Iu.UP:{v.preventDefault(),epe(v.target);break}case Iu.RIGHT:case Iu.DOWN:{v.preventDefault(),Qhe(v.target);break}}};return u.id&&o_(u.id),q.createElement("div",nu({className:a},u,{role:"button",tabIndex:0,onClick:n,onKeyDown:f,"data-accordion-component":"AccordionItemButton"}))},PN=function(t){return q.createElement(ow,null,function(n){var i=n.toggleExpanded,a=n.buttonAttributes;return q.createElement(npe,nu({toggleExpanded:i},t,a))})},rpe={className:"accordion__heading","aria-level":3},ipe=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,IN=function(e){ET(n,e);var t=ST(n);function n(){var i;nw(this,n);for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return i=t.call.apply(t,[this].concat(u)),Ni(tc(i),"ref",void 0),Ni(tc(i),"setRef",function(o){i.ref=o}),i}return rw(n,[{key:"componentDidUpdate",value:function(){n.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){n.VALIDATE(this.ref)}},{key:"render",value:function(){return q.createElement("div",nu({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(a){if(a===void 0)throw new Error("ref is undefined");if(!(a.childElementCount===1&&a.firstElementChild&&a.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(ipe)}}]),n}(q.PureComponent);Ni(IN,"defaultProps",rpe);var CT=function(t){return q.createElement(ow,null,function(n){var i=n.headingAttributes;return t.id&&o_(t.id),q.createElement(IN,nu({},t,i))})};CT.displayName=TN.AccordionItemHeading;var ope=["className","region","id"],AN=function(t){var n=t.className,i=n===void 0?"accordion__panel":n,a=t.region,u=t.id,f=iw(t,ope),o=function(E){var k=E.panelAttributes;u&&o_(u);var D=m6(m6({},k),{},{"aria-labelledby":a?k["aria-labelledby"]:void 0});return q.createElement("div",nu({"data-accordion-component":"AccordionItemPanel",className:i},f,D,{role:a?"region":void 0}))};return q.createElement(ow,null,o)};const ape=({data:e})=>Z.jsxs(Z.Fragment,{children:[Z.jsx("label",{className:"title",children:"Future Three Days"}),Z.jsx("div",{style:{overflow:"auto"},children:Z.jsx(SN,{allowZeroExpanded:!0,children:e.list.slice(0,24).map((t,n)=>Z.jsxs(TT,{children:[Z.jsx(CT,{children:Z.jsx(PN,{children:Z.jsxs("div",{className:"daily-item",children:[Z.jsx("img",{alt:"weather",className:"icon-small",src:`https://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`}),Z.jsx("label",{className:"Date",children:t.dt_txt}),Z.jsx("label",{className:"weather-general",children:t.weather[0].main}),Z.jsxs("label",{className:"min-max",children:[Math.round(t.main.temp_min),"C/",Math.round(t.main.temp_max),"C"]})]})})}),Z.jsx(AN,{children:Z.jsxs("div",{className:"daily-details-grids",children:[Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Description:"}),Z.jsx("label",{className:"content",children:t.weather[0].description})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Pressure:"}),Z.jsxs("label",{className:"content",children:[t.main.pressure," hPa"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Humidity:"}),Z.jsxs("label",{className:"content",children:[t.main.humidity,"%"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Clouds:"}),Z.jsxs("label",{className:"content",children:[t.clouds.all,"%"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Wind speed:"}),Z.jsxs("label",{className:"content",children:[t.wind.speed," m/s"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Feels like:"}),Z.jsxs("label",{className:"content",children:[t.main.feels_like,"C"]})]})]})})]},n))})})]});const spe=({data:e})=>Z.jsxs(Z.Fragment,{children:[Z.jsx("label",{className:"title",children:"Current"}),Z.jsx(SN,{allowZeroExpanded:!0,children:Z.jsxs(TT,{children:[Z.jsx(CT,{children:Z.jsx(PN,{children:Z.jsxs("div",{className:"daily-item",children:[Z.jsx("img",{alt:"weather",className:"icon-small",src:`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}),Z.jsx("label",{className:"Date",children:"Now"}),Z.jsx("label",{className:"weather-general",children:e.weather[0].main}),Z.jsxs("label",{className:"min-max",children:[Math.round(e.main.temp_min),"C/",Math.round(e.main.temp_max),"C"]})]})})}),Z.jsx(AN,{children:Z.jsxs("div",{className:"daily-details-grids",children:[Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Description:"}),Z.jsx("label",{className:"content",children:e.weather[0].description})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Pressure:"}),Z.jsxs("label",{className:"content",children:[e.main.pressure," hPa"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Humidity:"}),Z.jsxs("label",{className:"content",children:[e.main.humidity,"%"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Clouds:"}),Z.jsxs("label",{className:"content",children:[e.clouds.all,"%"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Wind speed:"}),Z.jsxs("label",{className:"content",children:[e.wind.speed," m/s"]})]}),Z.jsxs("div",{className:"daily-details-grids-item",children:[Z.jsx("label",{className:"d-title",children:"Feels like:"}),Z.jsxs("label",{className:"content",children:[e.main.feels_like,"C"]})]})]})})]})})]}),lpe=jp({palette:{primary:{main:"#004d40"},secondary:{main:"#004d40"}}});function cpe({inputValues:e,setInputValues:t}){const n=mh(),i=()=>{n("/homepage")},[a,u]=q.useState(!1),f=()=>{a?(o(),setTimeout(()=>{u(!1)},1e3)):u(!0)},o=()=>{v()},v=()=>{document.querySelector(".popup-overlay").classList.add("hide"),document.querySelector(".additional-blocks-weather").classList.add("hide"),document.querySelector(".additional-block-close-weather").classList.add("hide"),document.querySelector(".w_current").classList.add("hide"),document.querySelector(".overlay-weatherwin").classList.add("hide")},[E,k]=q.useState(null),[D,R]=q.useState(null),j=()=>{const N=fetch(`https://${gx}/weather?lat=40.776676&lon=-73.971321&appid=${_x}&units=metric`),$=fetch(`https://${gx}/forecast?lat=40.776676&lon=-73.971321&appid=${_x}&units=metric`);Promise.all([N,$]).then(async ee=>{const W=await ee[0].json(),K=await ee[1].json();k(W),R(K)}).catch(ee=>console.log(ee))};return q.useEffect(()=>{j()},[]),console.log(E),console.log(D),Z.jsx(L7,{theme:lpe,children:Z.jsxs("div",{children:[Z.jsx(bT,{}),Z.jsx("div",{className:"mapwrapper_routeplan",children:Z.jsx(tw,{zoom:14.4})}),a&&Z.jsx(Z.Fragment,{children:Z.jsxs("div",{className:"popup-overlay",children:[Z.jsxs("div",{className:"additional-blocks-weather",children:[Z.jsx("div",{className:"additional-block-text-preplan-weatherwin",children:Z.jsx("span",{className:"text_bar_2-preplan-weatherwin",children:"Weather Information"})}),Z.jsx("div",{className:"additional-block-close-weather",onClick:f,children:Z.jsx(z1,{sx:{fontSize:27,color:"white"}})})]}),Z.jsxs("div",{className:"w_current",children:[E&&Z.jsx(spe,{data:E}),D&&Z.jsx(ape,{data:D})]})]})}),a&&Z.jsx("div",{className:"overlay-weatherwin"}),Z.jsx("div",{className:"PlanWin",children:Z.jsxs("div",{className:"PlanMap",children:[Z.jsxs("div",{className:"additional-blocks",children:[Z.jsx("div",{className:"additional-block-text-preplan",children:Z.jsx("span",{className:"text_bar_2-preplan",children:"Choose Position"})}),Z.jsx("div",{className:"additional-block-weather",onClick:f,children:Z.jsx(vN,{sx:{fontSize:24,color:"white"}})}),Z.jsx("div",{className:"additional-block-close",onClick:i,children:Z.jsx(z1,{sx:{fontSize:27,color:"white"}})})]}),Z.jsx(Hz,{inputValues:e,setInputValues:t})]})})]})})}const upe="pk.eyJ1IjoiZmluYmFyYWxsYW4iLCJhIjoiY2xqY3NtYWN6MjV0ODNqcXhhaTY4aGQxdSJ9.VeVQzxCCtpyP_MeT1CkjOg";ds.accessToken=upe;const dpe=()=>{q.useEffect(()=>{if(t.current)return;t.current=new ds.Map({container:e.current,style:"mapbox://styles/mapbox/streets-v12",center:[a,n],zoom:f});const k=Wz.data.map(D=>({id:D.id,name:D.name,latitude:D.location.latitude,longitude:D.location.longitude}));E(k),console.log(k),t.current.on("load",()=>{k.forEach(D=>{const R=document.createElement("div");R.className="marker",new ds.Marker(R).setLngLat([D.longitude,D.latitude]).addTo(t.current)})})},[]),q.useEffect(()=>{t.current&&t.current.on("move",()=>{u(t.current.getCenter().lng.toFixed(4)),i(t.current.getCenter().lat.toFixed(4)),o(t.current.getZoom().toFixed(2))})});const e=q.useRef(null),t=q.useRef(null),[n,i]=q.useState(40.727872),[a,u]=q.useState(-73.993157),[f,o]=q.useState(12.4),[v,E]=q.useState([]);return Z.jsx("div",{children:Z.jsx("div",{ref:e,className:"map-container"})})};var kT={},hpe=iu;Object.defineProperty(kT,"__esModule",{value:!0});var MN=kT.default=void 0,ppe=hpe(ou()),fpe=Z,mpe=(0,ppe.default)((0,fpe.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");MN=kT.default=mpe;const gpe=({data:e})=>Z.jsxs("div",{className:"weather",children:[Z.jsxs("div",{className:"top",children:[Z.jsx("img",{alt:"weather",className:"weather-icon",src:`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`}),Z.jsxs("p",{className:"temperature",children:[Math.round(e.main.temp),"C"]})]}),Z.jsx("div",{className:"parameter-row",children:Z.jsx("p",{className:"weather-description",children:e.weather[0].description})}),Z.jsxs("div",{className:"parameter-row",children:[Z.jsx("span",{className:"parameter-label",children:"Feels like"}),Z.jsx("div",{children:Z.jsxs("span",{className:"parameter-value",children:[Math.round(e.main.feels_like),"C"]})})]}),Z.jsxs("div",{className:"parameter-row",children:[Z.jsx("span",{className:"parameter-label",children:"Wind"}),Z.jsx("div",{children:Z.jsxs("span",{className:"parameter-value",children:[e.wind.speed," m/s"]})})]}),Z.jsxs("div",{className:"parameter-row",children:[Z.jsx("span",{className:"parameter-label",children:"Humidity"}),Z.jsx("div",{children:Z.jsxs("span",{className:"parameter-value",children:[e.main.humidity,"%"]})})]})]}),_pe=jp({palette:{primary:{main:"#004d40"},secondary:{main:"#004d40"}}});function ype(){const[e,t]=q.useState(null),[n,i]=q.useState(null),a=()=>{const u=fetch(`https://${gx}/weather?lat=40.776676&lon=-73.971321&appid=${_x}&units=metric`),f=fetch(`https://${gx}/forecast?lat=40.776676&lon=-73.971321&appid=${_x}&units=metric`);Promise.all([u,f]).then(async o=>{const v=await o[0].json(),E=await o[1].json();t(v),i(E)}).catch(o=>console.log(o))};return q.useEffect(()=>{a()},[]),console.log(e),console.log(n),Z.jsx(L7,{theme:_pe,children:Z.jsxs("div",{children:[Z.jsx(bT,{}),Z.jsx("div",{className:"mapwrapper_showroute",children:Z.jsx(tw,{zoom:15.5})}),Z.jsxs("div",{className:"PlanWin",children:[Z.jsx("div",{className:"green-weather-block",children:e&&Z.jsx(gpe,{data:e})}),Z.jsxs("div",{className:"PlanMap",children:[Z.jsxs("div",{className:"button-group-1",children:[Z.jsx(Rs,{variant:"contained",style:{borderRadius:0},sx:{width:"270px",height:"2.8rem"},size:"small",color:"primary",children:"Route Information"}),Z.jsx(Rs,{variant:"contained",style:{borderRadius:0},sx:{width:"270px",height:"2.8rem"},size:"small",color:"primary",children:"General Information"})]}),Z.jsxs("div",{className:"additional-blocks",children:[Z.jsx("div",{className:"additional-block-text",children:Z.jsx("span",{className:"text_bar_2",children:"Regernate Plan"})}),Z.jsx("div",{className:"additional-block-favorite",children:Z.jsx(MN,{sx:{fontSize:24,color:"white"}})}),Z.jsx("div",{className:"additional-block-close",children:Z.jsx(z1,{sx:{fontSize:26,color:"white"}})})]}),Z.jsx(dpe,{})]})]})]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let a=e.charCodeAt(i);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},vpe=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const a=e[n++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const u=e[n++];t[i++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=e[n++],f=e[n++],o=e[n++],v=((a&7)<<18|(u&63)<<12|(f&63)<<6|o&63)-65536;t[i++]=String.fromCharCode(55296+(v>>10)),t[i++]=String.fromCharCode(56320+(v&1023))}else{const u=e[n++],f=e[n++];t[i++]=String.fromCharCode((a&15)<<12|(u&63)<<6|f&63)}}return t.join("")},ON={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<e.length;a+=3){const u=e[a],f=a+1<e.length,o=f?e[a+1]:0,v=a+2<e.length,E=v?e[a+2]:0,k=u>>2,D=(u&3)<<4|o>>4;let R=(o&15)<<2|E>>6,j=E&63;v||(j=64,f||(R=64)),i.push(n[k],n[D],n[R],n[j])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(DN(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):vpe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<e.length;){const u=n[e.charAt(a++)],o=a<e.length?n[e.charAt(a)]:0;++a;const E=a<e.length?n[e.charAt(a)]:64;++a;const D=a<e.length?n[e.charAt(a)]:64;if(++a,u==null||o==null||E==null||D==null)throw new xpe;const R=u<<2|o>>4;if(i.push(R),E!==64){const j=o<<4&240|E>>2;if(i.push(j),D!==64){const N=E<<6&192|D;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xpe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bpe=function(e){const t=DN(e);return ON.encodeByteArray(t,!0)},RN=function(e){return bpe(e).replace(/\./g,"")},LN=function(e){try{return ON.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wpe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Epe=()=>wpe().__FIREBASE_DEFAULTS__,Spe=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Tpe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&LN(e[1]);return t&&JSON.parse(t)},PT=()=>{try{return Epe()||Spe()||Tpe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Cpe=e=>{var t,n;return(n=(t=PT())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},zN=()=>{var e;return(e=PT())===null||e===void 0?void 0:e.config},FN=e=>{var t;return(t=PT())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kpe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ppe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Na())}function Ipe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Ape(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mpe(){const e=Na();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Dpe(){try{return typeof indexedDB=="object"}catch{return!1}}function Ope(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var u;t(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rpe="FirebaseError";class xh extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=Rpe,Object.setPrototypeOf(this,xh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,z_.prototype.create)}}class z_{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},a=`${this.service}/${t}`,u=this.errors[t],f=u?Lpe(u,i):"Error",o=`${this.serviceName}: ${f} (${a}).`;return new xh(a,o,i)}}function Lpe(e,t){return e.replace(zpe,(n,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const zpe=/\{\$([^}]+)}/g;function Fpe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function vx(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const a of n){if(!i.includes(a))return!1;const u=e[a],f=t[a];if(TA(u)&&TA(f)){if(!vx(u,f))return!1}else if(u!==f)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function TA(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Wg(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,u]=i.split("=");t[decodeURIComponent(a)]=decodeURIComponent(u)}}),t}function Hg(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Npe(e,t){const n=new Bpe(e,t);return n.subscribe.bind(n)}class Bpe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let a;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");jpe(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:i},a.next===void 0&&(a.next=o5),a.error===void 0&&(a.error=o5),a.complete===void 0&&(a.complete=o5);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jpe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function o5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(e){return e&&e._delegate?e._delegate:e}class U1{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $pe{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new kpe;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Vpe(t))try{this.getOrInitializeService({instanceIdentifier:np})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:a});i.resolve(u)}catch{}}}}clearInstance(t=np){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=np){return this.instances.has(t)}getOptions(t=np){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,f]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(u);i===o&&f.resolve(a)}return a}onInit(t,n){var i;const a=this.normalizeInstanceIdentifier(n),u=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;u.add(t),this.onInitCallbacks.set(a,u);const f=this.instances.get(a);return f&&t(f,a),()=>{u.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Upe(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=np){return this.component?this.component.multipleInstances?t:np:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Upe(e){return e===np?void 0:e}function Vpe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wpe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new $pe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ci;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ci||(Ci={}));const Hpe={debug:Ci.DEBUG,verbose:Ci.VERBOSE,info:Ci.INFO,warn:Ci.WARN,error:Ci.ERROR,silent:Ci.SILENT},qpe=Ci.INFO,Gpe={[Ci.DEBUG]:"log",[Ci.VERBOSE]:"log",[Ci.INFO]:"info",[Ci.WARN]:"warn",[Ci.ERROR]:"error"},Zpe=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),a=Gpe[t];if(a)console[a](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class NN{constructor(t){this.name=t,this._logLevel=qpe,this._logHandler=Zpe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ci))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Hpe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ci.DEBUG,...t),this._logHandler(this,Ci.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ci.VERBOSE,...t),this._logHandler(this,Ci.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ci.INFO,...t),this._logHandler(this,Ci.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ci.WARN,...t),this._logHandler(this,Ci.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ci.ERROR,...t),this._logHandler(this,Ci.ERROR,...t)}}const Xpe=(e,t)=>t.some(n=>e instanceof n);let CA,kA;function Kpe(){return CA||(CA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ype(){return kA||(kA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BN=new WeakMap,v6=new WeakMap,jN=new WeakMap,a5=new WeakMap,IT=new WeakMap;function Jpe(e){const t=new Promise((n,i)=>{const a=()=>{e.removeEventListener("success",u),e.removeEventListener("error",f)},u=()=>{n(eh(e.result)),a()},f=()=>{i(e.error),a()};e.addEventListener("success",u),e.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&BN.set(n,e)}).catch(()=>{}),IT.set(t,e),t}function Qpe(e){if(v6.has(e))return;const t=new Promise((n,i)=>{const a=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",f),e.removeEventListener("abort",f)},u=()=>{n(),a()},f=()=>{i(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",u),e.addEventListener("error",f),e.addEventListener("abort",f)});v6.set(e,t)}let x6={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return v6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||jN.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return eh(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function efe(e){x6=e(x6)}function tfe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(s5(this),t,...n);return jN.set(i,t.sort?t.sort():[t]),eh(i)}:Ype().includes(e)?function(...t){return e.apply(s5(this),t),eh(BN.get(this))}:function(...t){return eh(e.apply(s5(this),t))}}function nfe(e){return typeof e=="function"?tfe(e):(e instanceof IDBTransaction&&Qpe(e),Xpe(e,Kpe())?new Proxy(e,x6):e)}function eh(e){if(e instanceof IDBRequest)return Jpe(e);if(a5.has(e))return a5.get(e);const t=nfe(e);return t!==e&&(a5.set(e,t),IT.set(t,e)),t}const s5=e=>IT.get(e);function rfe(e,t,{blocked:n,upgrade:i,blocking:a,terminated:u}={}){const f=indexedDB.open(e,t),o=eh(f);return i&&f.addEventListener("upgradeneeded",v=>{i(eh(f.result),v.oldVersion,v.newVersion,eh(f.transaction),v)}),n&&f.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),o.then(v=>{u&&v.addEventListener("close",()=>u()),a&&v.addEventListener("versionchange",E=>a(E.oldVersion,E.newVersion,E))}).catch(()=>{}),o}const ife=["get","getKey","getAll","getAllKeys","count"],ofe=["put","add","delete","clear"],l5=new Map;function PA(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(l5.get(t))return l5.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,a=ofe.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||ife.includes(n)))return;const u=async function(f,...o){const v=this.transaction(f,a?"readwrite":"readonly");let E=v.store;return i&&(E=E.index(o.shift())),(await Promise.all([E[n](...o),a&&v.done]))[0]};return l5.set(t,u),u}efe(e=>({...e,get:(t,n,i)=>PA(t,n)||e.get(t,n,i),has:(t,n)=>!!PA(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class afe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sfe(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function sfe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const b6="@firebase/app",IA="0.9.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new NN("@firebase/app"),lfe="@firebase/app-compat",cfe="@firebase/analytics-compat",ufe="@firebase/analytics",dfe="@firebase/app-check-compat",hfe="@firebase/app-check",pfe="@firebase/auth",ffe="@firebase/auth-compat",mfe="@firebase/database",gfe="@firebase/database-compat",_fe="@firebase/functions",yfe="@firebase/functions-compat",vfe="@firebase/installations",xfe="@firebase/installations-compat",bfe="@firebase/messaging",wfe="@firebase/messaging-compat",Efe="@firebase/performance",Sfe="@firebase/performance-compat",Tfe="@firebase/remote-config",Cfe="@firebase/remote-config-compat",kfe="@firebase/storage",Pfe="@firebase/storage-compat",Ife="@firebase/firestore",Afe="@firebase/firestore-compat",Mfe="firebase",Dfe="10.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6="[DEFAULT]",Ofe={[b6]:"fire-core",[lfe]:"fire-core-compat",[ufe]:"fire-analytics",[cfe]:"fire-analytics-compat",[hfe]:"fire-app-check",[dfe]:"fire-app-check-compat",[pfe]:"fire-auth",[ffe]:"fire-auth-compat",[mfe]:"fire-rtdb",[gfe]:"fire-rtdb-compat",[_fe]:"fire-fn",[yfe]:"fire-fn-compat",[vfe]:"fire-iid",[xfe]:"fire-iid-compat",[bfe]:"fire-fcm",[wfe]:"fire-fcm-compat",[Efe]:"fire-perf",[Sfe]:"fire-perf-compat",[Tfe]:"fire-rc",[Cfe]:"fire-rc-compat",[kfe]:"fire-gcs",[Pfe]:"fire-gcs-compat",[Ife]:"fire-fst",[Afe]:"fire-fst-compat","fire-js":"fire-js",[Mfe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=new Map,E6=new Map;function Rfe(e,t){try{e.container.addComponent(t)}catch(n){Mp.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function a_(e){const t=e.name;if(E6.has(t))return Mp.debug(`There were multiple attempts to register component ${t}.`),!1;E6.set(t,e);for(const n of xx.values())Rfe(n,e);return!0}function $N(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lfe={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},th=new z_("app","Firebase",Lfe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zfe{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new U1("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw th.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=Dfe;function UN(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:w6,automaticDataCollectionEnabled:!1},t),a=i.name;if(typeof a!="string"||!a)throw th.create("bad-app-name",{appName:String(a)});if(n||(n=zN()),!n)throw th.create("no-options");const u=xx.get(a);if(u){if(vx(n,u.options)&&vx(i,u.config))return u;throw th.create("duplicate-app",{appName:a})}const f=new Wpe(a);for(const v of E6.values())f.addComponent(v);const o=new zfe(n,i,f);return xx.set(a,o),o}function Ffe(e=w6){const t=xx.get(e);if(!t&&e===w6&&zN())return UN();if(!t)throw th.create("no-app",{appName:e});return t}function y1(e,t,n){var i;let a=(i=Ofe[e])!==null&&i!==void 0?i:e;n&&(a+=`-${n}`);const u=a.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const o=[`Unable to register library "${a}" with version "${t}":`];u&&o.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&f&&o.push("and"),f&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Mp.warn(o.join(" "));return}a_(new U1(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nfe="firebase-heartbeat-database",Bfe=1,s_="firebase-heartbeat-store";let c5=null;function VN(){return c5||(c5=rfe(Nfe,Bfe,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(s_)}}}).catch(e=>{throw th.create("idb-open",{originalErrorMessage:e.message})})),c5}async function jfe(e){try{return await(await VN()).transaction(s_).objectStore(s_).get(WN(e))}catch(t){if(t instanceof xh)Mp.warn(t.message);else{const n=th.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Mp.warn(n.message)}}}async function AA(e,t){try{const i=(await VN()).transaction(s_,"readwrite");await i.objectStore(s_).put(t,WN(e)),await i.done}catch(n){if(n instanceof xh)Mp.warn(n.message);else{const i=th.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mp.warn(i.message)}}}function WN(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $fe=1024,Ufe=30*24*60*60*1e3;class Vfe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Hfe(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=MA();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=Ufe}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=MA(),{heartbeatsToSend:n,unsentEntries:i}=Wfe(this._heartbeatsCache.heartbeats),a=RN(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}}function MA(){return new Date().toISOString().substring(0,10)}function Wfe(e,t=$fe){const n=[];let i=e.slice();for(const a of e){const u=n.find(f=>f.agent===a.agent);if(u){if(u.dates.push(a.date),DA(n)>t){u.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),DA(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Hfe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dpe()?Ope().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await jfe(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return AA(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return AA(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function DA(e){return RN(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qfe(e){a_(new U1("platform-logger",t=>new afe(t),"PRIVATE")),a_(new U1("heartbeat",t=>new Vfe(t),"PRIVATE")),y1(b6,IA,e),y1(b6,IA,"esm2017"),y1("fire-js","")}qfe("");function AT(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function HN(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gfe=HN,qN=new z_("auth","Firebase",HN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new NN("@firebase/auth");function Zfe(e,...t){bx.logLevel<=Ci.WARN&&bx.warn(`Auth (${N_}): ${e}`,...t)}function l2(e,...t){bx.logLevel<=Ci.ERROR&&bx.error(`Auth (${N_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(e,...t){throw MT(e,...t)}function Yc(e,...t){return MT(e,...t)}function Xfe(e,t,n){const i=Object.assign(Object.assign({},Gfe()),{[t]:n});return new z_("auth","Firebase",i).create(t,{appName:e.name})}function MT(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return qN.create(e,...t)}function br(e,t,...n){if(!e)throw MT(t,...n)}function Lu(e){const t="INTERNAL ASSERTION FAILED: "+e;throw l2(t),new Error(t)}function Gu(e,t){e||Lu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Kfe(){return OA()==="http:"||OA()==="https:"}function OA(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yfe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Kfe()||Ipe()||"connection"in navigator)?navigator.onLine:!0}function Jfe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(t,n){this.shortDelay=t,this.longDelay=n,Gu(n>t,"Short delay should be less than long delay!"),this.isMobile=Ppe()||Ape()}get(){return Yfe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(e,t){Gu(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Lu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Lu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Lu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qfe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1e=new B_(3e4,6e4);function um(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function dm(e,t,n,i,a={}){return ZN(e,a,async()=>{let u={},f={};i&&(t==="GET"?f=i:u={body:JSON.stringify(i)});const o=F_(Object.assign({key:e.config.apiKey},f)).slice(1),v=await e._getAdditionalHeaders();return v["Content-Type"]="application/json",e.languageCode&&(v["X-Firebase-Locale"]=e.languageCode),GN.fetch()(XN(e,e.config.apiHost,n,o),Object.assign({method:t,headers:v,referrerPolicy:"no-referrer"},u))})}async function ZN(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Qfe),t);try{const a=new t1e(e),u=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Lv(e,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const o=u.ok?f.errorMessage:f.error.message,[v,E]=o.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lv(e,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw Lv(e,"email-already-in-use",f);if(v==="USER_DISABLED")throw Lv(e,"user-disabled",f);const k=i[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw Xfe(e,k,E);dc(e,k)}}catch(a){if(a instanceof xh)throw a;dc(e,"network-request-failed",{message:String(a)})}}async function j_(e,t,n,i,a={}){const u=await dm(e,t,n,i,a);return"mfaPendingCredential"in u&&dc(e,"multi-factor-auth-required",{_serverResponse:u}),u}function XN(e,t,n,i){const a=`${t}${n}?${i}`;return e.config.emulator?DT(e.config,a):`${e.config.apiScheme}://${a}`}class t1e{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Yc(this.auth,"network-request-failed")),e1e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lv(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=Yc(e,t,i);return a.customData._tokenResponse=n,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1e(e,t){return dm(e,"POST","/v1/accounts:delete",t)}async function r1e(e,t){return dm(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function i1e(e,t=!1){const n=td(e),i=await n.getIdToken(t),a=OT(i);br(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:a,token:i,authTime:f0(u5(a.auth_time)),issuedAtTime:f0(u5(a.iat)),expirationTime:f0(u5(a.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function u5(e){return Number(e)*1e3}function OT(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return l2("JWT malformed, contained fewer than 3 sections"),null;try{const a=LN(n);return a?JSON.parse(a):(l2("Failed to decode base64 JWT payload"),null)}catch(a){return l2("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function o1e(e){const t=OT(e);return br(t,"internal-error"),br(typeof t.exp<"u","internal-error"),br(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l_(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof xh&&a1e(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function a1e({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1e{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=f0(this.lastLoginAt),this.creationTime=f0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(e){var t;const n=e.auth,i=await e.getIdToken(),a=await l_(e,r1e(n,{idToken:i}));br(a==null?void 0:a.users.length,n,"internal-error");const u=a.users[0];e._notifyReloadListener(u);const f=!((t=u.providerUserInfo)===null||t===void 0)&&t.length?u1e(u.providerUserInfo):[],o=c1e(e.providerData,f),v=e.isAnonymous,E=!(e.email&&u.passwordHash)&&!(o!=null&&o.length),k=v?E:!1,D={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:o,metadata:new KN(u.createdAt,u.lastLoginAt),isAnonymous:k};Object.assign(e,D)}async function l1e(e){const t=td(e);await wx(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function c1e(e,t){return[...e.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function u1e(e){return e.map(t=>{var{providerId:n}=t,i=AT(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1e(e,t){const n=await ZN(e,{},async()=>{const i=F_({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:u}=e.config,f=XN(e,a,"/v1/token",`key=${u}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",GN.fetch()(f,{method:"POST",headers:o,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){br(t.idToken,"internal-error"),br(typeof t.idToken<"u","internal-error"),br(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):o1e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return br(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:a,expiresIn:u}=await d1e(t,n);this.updateTokensAndExpiration(i,a,Number(u))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:a,expirationTime:u}=n,f=new c_;return i&&(br(typeof i=="string","internal-error",{appName:t}),f.refreshToken=i),a&&(br(typeof a=="string","internal-error",{appName:t}),f.accessToken=a),u&&(br(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new c_,this.toJSON())}_performRefresh(){return Lu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(e,t){br(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class _p{constructor(t){var{uid:n,auth:i,stsTokenManager:a}=t,u=AT(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s1e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new KN(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(t){const n=await l_(this,this.stsTokenManager.getToken(this.auth,t));return br(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return i1e(this,t)}reload(){return l1e(this)}_assign(t){this!==t&&(br(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new _p(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){br(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await wx(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await l_(this,n1e(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,a,u,f,o,v,E,k;const D=(i=n.displayName)!==null&&i!==void 0?i:void 0,R=(a=n.email)!==null&&a!==void 0?a:void 0,j=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,N=(f=n.photoURL)!==null&&f!==void 0?f:void 0,$=(o=n.tenantId)!==null&&o!==void 0?o:void 0,ee=(v=n._redirectEventId)!==null&&v!==void 0?v:void 0,W=(E=n.createdAt)!==null&&E!==void 0?E:void 0,K=(k=n.lastLoginAt)!==null&&k!==void 0?k:void 0,{uid:Y,emailVerified:ie,isAnonymous:ue,providerData:de,stsTokenManager:M}=n;br(Y&&M,t,"internal-error");const Te=c_.fromJSON(this.name,M);br(typeof Y=="string",t,"internal-error"),kd(D,t.name),kd(R,t.name),br(typeof ie=="boolean",t,"internal-error"),br(typeof ue=="boolean",t,"internal-error"),kd(j,t.name),kd(N,t.name),kd($,t.name),kd(ee,t.name),kd(W,t.name),kd(K,t.name);const fe=new _p({uid:Y,auth:t,email:R,emailVerified:ie,displayName:D,isAnonymous:ue,photoURL:N,phoneNumber:j,tenantId:$,stsTokenManager:Te,createdAt:W,lastLoginAt:K});return de&&Array.isArray(de)&&(fe.providerData=de.map(Oe=>Object.assign({},Oe))),ee&&(fe._redirectEventId=ee),fe}static async _fromIdTokenResponse(t,n,i=!1){const a=new c_;a.updateFromServerResponse(n);const u=new _p({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await wx(u),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=new Map;function zu(e){Gu(e instanceof Function,"Expected a class definition");let t=RA.get(e);return t?(Gu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,RA.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}YN.type="NONE";const LA=YN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(e,t,n){return`firebase:${e}:${t}:${n}`}class v1{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:a,name:u}=this.auth;this.fullUserKey=c2(this.userKey,a.apiKey,u),this.fullPersistenceKey=c2("persistence",a.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?_p._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new v1(zu(LA),t,i);const a=(await Promise.all(n.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let u=a[0]||zu(LA);const f=c2(i,t.config.apiKey,t.name);let o=null;for(const E of n)try{const k=await E._get(f);if(k){const D=_p._fromJSON(t,k);E!==u&&(o=D),u=E;break}}catch{}const v=a.filter(E=>E._shouldAllowMigration);return!u._shouldAllowMigration||!v.length?new v1(u,t,i):(u=v[0],o&&await u._set(f,o.toJSON()),await Promise.all(n.map(async E=>{if(E!==u)try{await E._remove(f)}catch{}})),new v1(u,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eB(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(JN(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nB(t))return"Blackberry";if(rB(t))return"Webos";if(RT(t))return"Safari";if((t.includes("chrome/")||QN(t))&&!t.includes("edge/"))return"Chrome";if(tB(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function JN(e=Na()){return/firefox\//i.test(e)}function RT(e=Na()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function QN(e=Na()){return/crios\//i.test(e)}function eB(e=Na()){return/iemobile/i.test(e)}function tB(e=Na()){return/android/i.test(e)}function nB(e=Na()){return/blackberry/i.test(e)}function rB(e=Na()){return/webos/i.test(e)}function sw(e=Na()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function h1e(e=Na()){var t;return sw(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function p1e(){return Mpe()&&document.documentMode===10}function iB(e=Na()){return sw(e)||tB(e)||rB(e)||nB(e)||/windows phone/i.test(e)||eB(e)}function f1e(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(e,t=[]){let n;switch(e){case"Browser":n=zA(Na());break;case"Worker":n=`${zA(Na())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${N_}/${i}`}async function aB(e,t){return dm(e,"GET","/v2/recaptchaConfig",um(e,t))}function FA(e){return e!==void 0&&e.enterprise!==void 0}class sB{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1e(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function lB(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=a=>{const u=Yc("internal-error");u.customData=a,n(u)},i.type="text/javascript",i.charset="UTF-8",m1e().appendChild(i)})}function g1e(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const _1e="https://www.google.com/recaptcha/enterprise.js?render=",y1e="recaptcha-enterprise",v1e="NO_RECAPTCHA";class cB{constructor(t){this.type=y1e,this.auth=hm(t)}async verify(t="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,o)=>{aB(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const E=new sB(v);return u.tenantId==null?u._agentRecaptchaConfig=E:u._tenantRecaptchaConfigs[u.tenantId]=E,f(E.siteKey)}}).catch(v=>{o(v)})})}function a(u,f,o){const v=window.grecaptcha;FA(v)?v.enterprise.ready(()=>{v.enterprise.execute(u,{action:t}).then(E=>{f(E)}).catch(()=>{f(v1e)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((u,f)=>{i(this.auth).then(o=>{if(!n&&FA(window.grecaptcha))a(o,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}lB(_1e+o).then(()=>{a(o,u,f)}).catch(v=>{f(v)})}}).catch(o=>{f(o)})})}}async function Ex(e,t,n,i=!1){const a=new cB(e);let u;try{u=await a.verify(n)}catch{u=await a.verify(n,!0)}const f=Object.assign({},t);return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1e{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=u=>new Promise((f,o)=>{try{const v=t(u);f(v)}catch(v){o(v)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1e{constructor(t,n,i,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NA(this),this.idTokenSubscription=new NA(this),this.beforeStateQueue=new x1e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=zu(n)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await v1.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const i=await this.assertedPersistence.getCurrentUser();let a=i,u=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=a==null?void 0:a._redirectEventId,v=await this.tryRedirectSignIn(t);(!f||f===o)&&(v!=null&&v.user)&&(a=v.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(a)}catch(f){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return br(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await wx(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Jfe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?td(t):null;return n&&br(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&br(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(zu(t))})}async initializeRecaptchaConfig(){const t=await aB(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new sB(t);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new cB(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new z_("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&zu(t)||this._popupRedirectResolver;br(n,this,"argument-error"),this.redirectPersistenceManager=await v1.create(this,[zu(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,a){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n),f=this._isInitialized?Promise.resolve():this._initializationPromise;return br(f,this,"internal-error"),f.then(()=>u(this.currentUser)),typeof n=="function"?t.addObserver(n,i,a):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return br(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=oB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Zfe(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hm(e){return td(e)}class NA{constructor(t){this.auth=t,this.observer=null,this.addObserver=Npe(n=>this.observer=n)}get next(){return br(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1e(e,t){const n=$N(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),u=n.getOptions();if(vx(u,t??{}))return a;dc(a,"already-initialized")}return n.initialize({options:t})}function E1e(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(zu);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function S1e(e,t,n){const i=hm(e);br(i._canInitEmulator,i,"emulator-config-failed"),br(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!!(n!=null&&n.disableWarnings),u=uB(t),{host:f,port:o}=T1e(t),v=o===null?"":`:${o}`;i.config.emulator={url:`${u}//${f}${v}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:f,port:o,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||C1e()}function uB(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function T1e(e){const t=uB(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const u=a[1];return{host:u,port:BA(i.substr(u.length+1))}}else{const[u,f]=i.split(":");return{host:u,port:BA(f)}}}function BA(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function C1e(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Lu("not implemented")}_getIdTokenResponse(t){return Lu("not implemented")}_linkToIdToken(t,n){return Lu("not implemented")}_getReauthenticationResolver(t){return Lu("not implemented")}}async function k1e(e,t){return dm(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(e,t){return j_(e,"POST","/v1/accounts:signInWithPassword",um(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1e(e,t){return j_(e,"POST","/v1/accounts:signInWithEmailLink",um(e,t))}async function I1e(e,t){return j_(e,"POST","/v1/accounts:signInWithEmailLink",um(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends LT{constructor(t,n,i,a=null){super("password",i),this._email=t,this._password=n,this._tenantId=a}static _fromEmailAndPassword(t,n){return new u_(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new u_(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){var n;switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=t._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const a=await Ex(t,i,"signInWithPassword");return d5(t,a)}else return d5(t,i).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const u=await Ex(t,i,"signInWithPassword");return d5(t,u)}else return Promise.reject(a)});case"emailLink":return P1e(t,{email:this._email,oobCode:this._password});default:dc(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":return k1e(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return I1e(t,{idToken:n,email:this._email,oobCode:this._password});default:dc(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(e,t){return j_(e,"POST","/v1/accounts:signInWithIdp",um(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1e="http://localhost";class Dp extends LT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Dp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):dc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a}=n,u=AT(n,["providerId","signInMethod"]);if(!i||!a)return null;const f=new Dp(i,a);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return x1(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,x1(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,x1(t,n)}buildRequest(){const t={requestUri:A1e,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=F_(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1e(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function D1e(e){const t=Wg(Hg(e)).link,n=t?Wg(Hg(t)).deep_link_id:null,i=Wg(Hg(e)).deep_link_id;return(i?Wg(Hg(i)).link:null)||i||n||t||e}class zT{constructor(t){var n,i,a,u,f,o;const v=Wg(Hg(t)),E=(n=v.apiKey)!==null&&n!==void 0?n:null,k=(i=v.oobCode)!==null&&i!==void 0?i:null,D=M1e((a=v.mode)!==null&&a!==void 0?a:null);br(E&&k&&D,"argument-error"),this.apiKey=E,this.operation=D,this.code=k,this.continueUrl=(u=v.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=v.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(o=v.tenantId)!==null&&o!==void 0?o:null}static parseLink(t){const n=D1e(t);try{return new zT(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.providerId=pm.PROVIDER_ID}static credential(t,n){return u_._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=zT.parseLink(n);return br(i,"argument-error"),u_._fromEmailAndCode(t,i.code,i.tenantId)}}pm.PROVIDER_ID="password";pm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_ extends dB{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends $_{constructor(){super("facebook.com")}static credential(t){return Dp._fromParams({providerId:Od.PROVIDER_ID,signInMethod:Od.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Od.credentialFromTaggedObject(t)}static credentialFromError(t){return Od.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Od.credential(t.oauthAccessToken)}catch{return null}}}Od.FACEBOOK_SIGN_IN_METHOD="facebook.com";Od.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends $_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Dp._fromParams({providerId:Rd.PROVIDER_ID,signInMethod:Rd.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Rd.credentialFromTaggedObject(t)}static credentialFromError(t){return Rd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Rd.credential(n,i)}catch{return null}}}Rd.GOOGLE_SIGN_IN_METHOD="google.com";Rd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends $_{constructor(){super("github.com")}static credential(t){return Dp._fromParams({providerId:Ld.PROVIDER_ID,signInMethod:Ld.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ld.credentialFromTaggedObject(t)}static credentialFromError(t){return Ld.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ld.credential(t.oauthAccessToken)}catch{return null}}}Ld.GITHUB_SIGN_IN_METHOD="github.com";Ld.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends $_{constructor(){super("twitter.com")}static credential(t,n){return Dp._fromParams({providerId:zd.PROVIDER_ID,signInMethod:zd.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return zd.credentialFromTaggedObject(t)}static credentialFromError(t){return zd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return zd.credential(n,i)}catch{return null}}}zd.TWITTER_SIGN_IN_METHOD="twitter.com";zd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(e,t){return j_(e,"POST","/v1/accounts:signUp",um(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,a=!1){const u=await _p._fromIdTokenResponse(t,i,a),f=jA(i);return new Op({user:u,providerId:f,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const a=jA(i);return new Op({user:t,providerId:a,_tokenResponse:i,operationType:n})}}function jA(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx extends xh{constructor(t,n,i,a){var u;super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Sx.prototype),this.customData={appName:t.name,tenantId:(u=t.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,a){return new Sx(t,n,i,a)}}function hB(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Sx._fromErrorAndOperation(e,u,t,i):u})}async function O1e(e,t,n=!1){const i=await l_(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Op._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1e(e,t,n=!1){const{auth:i}=e,a="reauthenticate";try{const u=await l_(e,hB(i,a,t,e),n);br(u.idToken,i,"internal-error");const f=OT(u.idToken);br(f,i,"internal-error");const{sub:o}=f;return br(e.uid===o,i,"user-mismatch"),Op._forOperation(e,a,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&dc(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pB(e,t,n=!1){const i="signIn",a=await hB(e,i,t),u=await Op._fromIdTokenResponse(e,i,a);return n||await e._updateCurrentUser(u.user),u}async function L1e(e,t){return pB(hm(e),t)}async function z1e(e,t,n){var i;const a=hm(e),u={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let f;if(!((i=a._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const E=await Ex(a,u,"signUpPassword");f=h5(a,E)}else f=h5(a,u).catch(async E=>{if(E.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const k=await Ex(a,u,"signUpPassword");return h5(a,k)}else return Promise.reject(E)});const o=await f.catch(E=>Promise.reject(E)),v=await Op._fromIdTokenResponse(a,"signIn",o);return await a._updateCurrentUser(v.user),v}function F1e(e,t,n){return L1e(td(e),pm.credential(t,n))}function N1e(e,t,n,i){return td(e).onIdTokenChanged(t,n,i)}function B1e(e,t,n){return td(e).beforeAuthStateChanged(t,n)}function j1e(e,t,n,i){return td(e).onAuthStateChanged(t,n,i)}function $1e(e){return td(e).signOut()}const Tx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tx,"1"),this.storage.removeItem(Tx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1e(){const e=Na();return RT(e)||sw(e)}const V1e=1e3,W1e=10;class mB extends fB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=U1e()&&f1e(),this.fallbackToPolling=iB(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&t(n,a,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,o,v)=>{this.notifyListeners(f,v)});return}const i=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const f=this.storage.getItem(i);if(t.newValue!==f)t.newValue!==null?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!n)return}const a=()=>{const f=this.storage.getItem(i);!n&&this.localCache[i]===f||this.notifyListeners(i,f)},u=this.storage.getItem(i);p1e()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,W1e):a()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},V1e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}mB.type="LOCAL";const H1e=mB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB extends fB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}gB.type="SESSION";const _B=gB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1e(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const i=new lw(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:a,data:u}=n.data,f=this.handlersMap[a];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const o=Array.from(f).map(async E=>E(n.origin,u)),v=await q1e(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:v})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1e{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,f;return new Promise((o,v)=>{const E=FT("",20);a.port1.start();const k=setTimeout(()=>{v(new Error("unsupported_event"))},i);f={messageChannel:a,onMessage(D){const R=D;if(R.data.eventId===E)switch(R.data.status){case"ack":clearTimeout(k),u=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),o(R.data.response);break;default:clearTimeout(k),clearTimeout(u),v(new Error("invalid_response"));break}}},this.handlers.add(f),a.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:E,data:n},[a.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(){return window}function Z1e(e){Jc().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(){return typeof Jc().WorkerGlobalScope<"u"&&typeof Jc().importScripts=="function"}async function X1e(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function K1e(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Y1e(){return yB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB="firebaseLocalStorageDb",J1e=1,Cx="firebaseLocalStorage",xB="fbase_key";class U_{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cw(e,t){return e.transaction([Cx],t?"readwrite":"readonly").objectStore(Cx)}function Q1e(){const e=indexedDB.deleteDatabase(vB);return new U_(e).toPromise()}function T6(){const e=indexedDB.open(vB,J1e);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Cx,{keyPath:xB})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Cx)?t(i):(i.close(),await Q1e(),t(await T6()))})})}async function $A(e,t,n){const i=cw(e,!0).put({[xB]:t,value:n});return new U_(i).toPromise()}async function eme(e,t){const n=cw(e,!1).get(t),i=await new U_(n).toPromise();return i===void 0?null:i.value}function UA(e,t){const n=cw(e,!0).delete(t);return new U_(n).toPromise()}const tme=800,nme=3;class bB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await T6(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>nme)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lw._getInstance(Y1e()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await X1e(),!this.activeServiceWorker)return;this.sender=new G1e(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||K1e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await T6();return await $A(t,Tx,"1"),await UA(t,Tx),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>$A(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>eme(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>UA(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const u=cw(a,!1).getAll();return new U_(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:a,value:u}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bB.type="LOCAL";const rme=bB;new B_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ime(e,t){return t?zu(t):(br(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends LT{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return x1(t,this._buildIdpRequest())}_linkToIdToken(t,n){return x1(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return x1(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function ome(e){return pB(e.auth,new NT(e),e.bypassAuthState)}function ame(e){const{auth:t,user:n}=e;return br(n,t,"internal-error"),R1e(n,new NT(e),e.bypassAuthState)}async function sme(e){const{auth:t,user:n}=e;return br(n,t,"internal-error"),O1e(n,new NT(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(t,n,i,a,u=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:a,tenantId:u,error:f,type:o}=t;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(v))}catch(E){this.reject(E)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ome;case"linkViaPopup":case"linkViaRedirect":return sme;case"reauthViaPopup":case"reauthViaRedirect":return ame;default:dc(this.auth,"internal-error")}}resolve(t){Gu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Gu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lme=new B_(2e3,1e4);class o1 extends wB{constructor(t,n,i,a,u){super(t,n,a,u),this.provider=i,this.authWindow=null,this.pollId=null,o1.currentPopupAction&&o1.currentPopupAction.cancel(),o1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return br(t,this.auth,"internal-error"),t}async onExecution(){Gu(this.filter.length===1,"Popup operations only handle one event");const t=FT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Yc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,o1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,lme.get())};t()}}o1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cme="pendingRedirect",u2=new Map;class ume extends wB{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=u2.get(this.auth._key());if(!t){try{const i=await dme(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}u2.set(this.auth._key(),t)}return this.bypassAuthState||u2.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dme(e,t){const n=fme(t),i=pme(e);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function hme(e,t){u2.set(e._key(),t)}function pme(e){return zu(e._redirectPersistence)}function fme(e){return c2(cme,e.config.apiKey,e.name)}async function mme(e,t,n=!1){const i=hm(e),a=ime(i,t),f=await new ume(i,a,n).execute();return f&&!n&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gme=10*60*1e3;class _me{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!yme(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!EB(t)){const a=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Yc(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=gme&&this.cachedEventUids.clear(),this.cachedEventUids.has(VA(t))}saveEventToCache(t){this.cachedEventUids.add(VA(t)),this.lastProcessedEventTime=Date.now()}}function VA(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function EB({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function yme(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EB(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vme(e,t={}){return dm(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bme=/^https?/;async function wme(e){if(e.config.emulator)return;const{authorizedDomains:t}=await vme(e);for(const n of t)try{if(Eme(n))return}catch{}dc(e,"unauthorized-domain")}function Eme(e){const t=S6(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const f=new URL(e);return f.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===i}if(!bme.test(n))return!1;if(xme.test(e))return i===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sme=new B_(3e4,6e4);function WA(){const e=Jc().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Tme(e){return new Promise((t,n)=>{var i,a,u;function f(){WA(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{WA(),n(Yc(e,"network-request-failed"))},timeout:Sme.get()})}if(!((a=(i=Jc().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((u=Jc().gapi)===null||u===void 0)&&u.load)f();else{const o=g1e("iframefcb");return Jc()[o]=()=>{gapi.load?f():n(Yc(e,"network-request-failed"))},lB(`https://apis.google.com/js/api.js?onload=${o}`).catch(v=>n(v))}}).catch(t=>{throw d2=null,t})}let d2=null;function Cme(e){return d2=d2||Tme(e),d2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kme=new B_(5e3,15e3),Pme="__/auth/iframe",Ime="emulator/auth/iframe",Ame={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dme(e){const t=e.config;br(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?DT(t,Ime):`https://${e.config.authDomain}/${Pme}`,i={apiKey:t.apiKey,appName:e.name,v:N_},a=Mme.get(e.config.apiHost);a&&(i.eid=a);const u=e._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${F_(i).slice(1)}`}async function Ome(e){const t=await Cme(e),n=Jc().gapi;return br(n,e,"internal-error"),t.open({where:document.body,url:Dme(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ame,dontclear:!0},i=>new Promise(async(a,u)=>{await i.restyle({setHideOnLeave:!1});const f=Yc(e,"network-request-failed"),o=Jc().setTimeout(()=>{u(f)},kme.get());function v(){Jc().clearTimeout(o),a(i)}i.ping(v).then(v,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lme=500,zme=600,Fme="_blank",Nme="http://localhost";class HA{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bme(e,t,n,i=Lme,a=zme){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const v=Object.assign(Object.assign({},Rme),{width:i.toString(),height:a.toString(),top:u,left:f}),E=Na().toLowerCase();n&&(o=QN(E)?Fme:n),JN(E)&&(t=t||Nme,v.scrollbars="yes");const k=Object.entries(v).reduce((R,[j,N])=>`${R}${j}=${N},`,"");if(h1e(E)&&o!=="_self")return jme(t||"",o),new HA(null);const D=window.open(t||"",o,k);br(D,e,"popup-blocked");try{D.focus()}catch{}return new HA(D)}function jme(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $me="__/auth/handler",Ume="emulator/auth/handler",Vme=encodeURIComponent("fac");async function qA(e,t,n,i,a,u){br(e.config.authDomain,e,"auth-domain-config-required"),br(e.config.apiKey,e,"invalid-api-key");const f={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:N_,eventId:a};if(t instanceof dB){t.setDefaultLanguage(e.languageCode),f.providerId=t.providerId||"",Fpe(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[k,D]of Object.entries(u||{}))f[k]=D}if(t instanceof $_){const k=t.getScopes().filter(D=>D!=="");k.length>0&&(f.scopes=k.join(","))}e.tenantId&&(f.tid=e.tenantId);const o=f;for(const k of Object.keys(o))o[k]===void 0&&delete o[k];const v=await e._getAppCheckToken(),E=v?`#${Vme}=${encodeURIComponent(v)}`:"";return`${Wme(e)}?${F_(o).slice(1)}${E}`}function Wme({config:e}){return e.emulator?DT(e,Ume):`https://${e.authDomain}/${$me}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="webStorageSupport";class Hme{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_B,this._completeRedirectFn=mme,this._overrideRedirectResult=hme}async _openPopup(t,n,i,a){var u;Gu((u=this.eventManagers[t._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await qA(t,n,i,S6(),a);return Bme(t,f,FT())}async _openRedirect(t,n,i,a){await this._originValidation(t);const u=await qA(t,n,i,S6(),a);return Z1e(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:u}=this.eventManagers[n];return a?Promise.resolve(a):(Gu(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await Ome(t),i=new _me(t);return n.register("authEvent",a=>(br(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(p5,{type:p5},a=>{var u;const f=(u=a==null?void 0:a[0])===null||u===void 0?void 0:u[p5];f!==void 0&&n(!!f),dc(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wme(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return iB()||RT()||sw()}}const qme=Hme;var GA="@firebase/auth",ZA="1.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gme{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){br(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zme(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Xme(e){a_(new U1("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:o}=i.options;br(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const v={apiKey:f,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oB(e)},E=new b1e(i,a,u,v);return E1e(E,n),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),a_(new U1("auth-internal",t=>{const n=hm(t.getProvider("auth").getImmediate());return(i=>new Gme(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),y1(GA,ZA,Zme(e)),y1(GA,ZA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kme=5*60,Yme=FN("authIdTokenMaxAge")||Kme;let XA=null;const Jme=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Yme)return;const a=n==null?void 0:n.token;XA!==a&&(XA=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Qme(e=Ffe()){const t=$N(e,"auth");if(t.isInitialized())return t.getImmediate();const n=w1e(e,{popupRedirectResolver:qme,persistence:[rme,H1e,_B]}),i=FN("authTokenSyncURL");if(i){const u=Jme(i);B1e(n,u,()=>u(n.currentUser)),N1e(n,f=>u(f))}const a=Cpe("auth");return a&&S1e(n,`http://${a}`),n}Xme("Browser");var ege="firebase",tge="10.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */y1(ege,tge,"app");const nge={apiKey:"AIzaSyCKFlLil4_yvpS8ocVgFA3ApN-6iKxHPSw",authDomain:"ucdsummerproject.firebaseapp.com",projectId:"ucdsummerproject",storageBucket:"ucdsummerproject.appspot.com",messagingSenderId:"676041294527",appId:"1:676041294527:web:a2db72965b6bc06600bc0a"},rge=UN(nge),zv=Qme(rge),SB=q.createContext(),ige=({children:e})=>{const[t,n]=q.useState({}),i=(f,o)=>z1e(zv,f,o),a=(f,o)=>F1e(zv,f,o),u=()=>$1e(zv);return q.useEffect(()=>{const f=j1e(zv,o=>{console.log(o),n(o)});return()=>{f()}},[]),Z.jsx(SB.Provider,{value:{createUser:i,user:t,logout:u,signIn:a},children:e})},uw=()=>q.useContext(SB),oge=()=>{const{signIn:e}=uw(),[t,n]=q.useState(""),[i,a]=q.useState(""),[u,f]=q.useState(""),o=mh(),v=async E=>{E.preventDefault(),f("");try{await e(t,i),o("/account")}catch(k){f(k.message),console.log(k.message)}};return Z.jsxs("div",{className:"Signin-container",children:[Z.jsxs("div",{children:[Z.jsx("h1",{className:"signin-text1",children:"Sign in to your account"}),Z.jsxs("p",{className:"signin-text2",children:["Don't have an account yet? ",Z.jsx(gO,{to:"/signup",className:"signin-text3",children:"Sign up."})]})]}),Z.jsxs("form",{children:[Z.jsxs("div",{className:"email-container",children:[Z.jsx("label",{children:"Email Address"}),Z.jsx("input",{onChange:E=>n(E.target.value),type:"email",className:"email"})]}),Z.jsxs("div",{className:"password-container",children:[Z.jsx("label",{children:"Password"}),Z.jsx("input",{onChange:E=>a(E.target.value),type:"password",className:"password"})]}),Z.jsx("div",{className:"wrapper-function-signin",children:Z.jsx("a",{className:"wrapper-function-text-signin",onClick:v,href:"#",type:"submit",children:Z.jsx("span",{children:"Sign In"})})})]})]})};const age=()=>{const[e,t]=q.useState(""),[n,i]=q.useState(""),[a,u]=q.useState(""),[f,o]=q.useState(""),[v,E]=q.useState(""),{createUser:k}=uw(),D=mh(),R=async j=>{j.preventDefault(),u("");try{await k(e,n,f,v),D("/account")}catch(N){u(N.message),console.log(N.message)}};return Z.jsxs("div",{className:"Signup-container",children:[Z.jsxs("div",{children:[Z.jsx("h1",{className:"signup-text1",children:"Sign up for a free account"}),Z.jsxs("p",{className:"signup-text2",children:["Already have an account yet?"," ",Z.jsx(gO,{to:"/signin",className:"signup-text3",children:"Sign in."})]})]}),Z.jsxs("form",{onSubmit:R,children:[Z.jsxs("div",{className:"email-container",children:[Z.jsx("label",{children:"Email Address"}),Z.jsx("input",{onChange:j=>t(j.target.value),type:"email",className:"email"})]}),Z.jsxs("div",{className:"name-container",children:[Z.jsx("label",{children:"User Name"}),Z.jsx("input",{onChange:j=>o(j.target.value),type:"text",className:"name"})]}),Z.jsxs("div",{className:"address-container",children:[Z.jsx("label",{children:"Address"}),Z.jsx("input",{onChange:j=>E(j.target.value),type:"text",className:"address"})]}),Z.jsxs("div",{className:"password-container",children:[Z.jsx("label",{children:"Password"}),Z.jsx("input",{onChange:j=>i(j.target.value),type:"password",className:"password"})]}),Z.jsx("div",{className:"wrapper-function-signup",children:Z.jsx("a",{className:"wrapper-function-text-signup",href:"#",type:"submit",onClick:R,children:Z.jsx("span",{children:"Sign Up"})})})]})]})};const sge=()=>{const e=mh(),{user:t,logout:n}=uw(),i=async()=>{try{await n(),e("/signin"),console.log("You are logged out")}catch(a){console.log(a.message)}};return Z.jsxs("div",{className:"account",children:[Z.jsx("h1",{className:"account-text1",children:"Account"}),Z.jsxs("p",{className:"account-text2",children:["User Email:",t&&t.email]}),Z.jsx("div",{className:"wrapper-function-logout",children:Z.jsx("a",{className:"wrapper-function-text-logout",href:"#",type:"submit",onClick:i,children:Z.jsx("span",{children:"Log Out"})})})]})},lge=({children:e})=>{const{user:t}=uw();return t?e:Z.jsx(uH,{to:"/signin"})};jp({palette:{primary:{main:"#004d40"},secondary:{main:"#004d40"}}});function cge(){return Z.jsxs("div",{className:"landing-page-container",children:[Z.jsx("div",{className:"menubar-area",children:Z.jsx(kF,{})}),Z.jsx("div",{className:"homepage-pics-container",children:Z.jsxs("div",{className:"left-color-block",children:[Z.jsxs("span",{className:"hometext-title",children:[Z.jsxs("span",{style:{fontSize:"36px",fontWeight:500},children:["amble  ",Z.jsx("br",{}),"- the peaceful way"]}),Z.jsx("br",{}),Z.jsx("br",{}),Z.jsx("br",{}),Z.jsxs("span",{style:{fontSize:"16px"},children:["The purpose of our application is to generate walking routes for users to guide them though the quiet corners of Manhattan.",Z.jsx("br",{}),Z.jsx("br",{}),"The route generating algorthm takes forecast conditions into our machine learning model to determine busyiness based on taxizone, citibike and subway data and pair this infomation with crimes statistics for areas of Manhattan to ensure users can enjoy a quiet, peaceful and safe journey!"]})]}),Z.jsx("div",{className:"home-button-container",children:Z.jsx(yN,{})})]})}),Z.jsx("div",{className:"mapwrapper_landingpage",children:Z.jsx(tw,{zoom:11})}),Z.jsx("div",{className:"endbar"})]})}function uge(){return Z.jsx("h2",{children:"The requested page does not exist"})}function dge(){const[e,t]=q.useState({latitude:40.74218481889335,longitude:-73.98786664009094,endLatitude:40.72540497175606,endLongitude:-74.01052594184875,hour:0,waypoints:[]});return Z.jsx("div",{children:Z.jsx(yH,{children:Z.jsx(ige,{children:Z.jsxs(hH,{children:[Z.jsx(Ga,{exact:!0,path:"/",element:Z.jsx(wA,{})}),Z.jsx(Ga,{exact:!0,path:"/interface",element:Z.jsx(mle,{inputValues:e,setInputValues:t})}),Z.jsx(Ga,{path:"/login",element:Z.jsx(qz,{})}),Z.jsx(Ga,{path:"/loginCheck",element:Z.jsx(gle,{})}),Z.jsx(Ga,{path:"/userpref",element:Z.jsx(ide,{})}),Z.jsx(Ga,{path:"*",element:Z.jsx(uge,{})}),Z.jsx(Ga,{path:"/interface-two",element:Z.jsx(cpe,{inputValues:e,setInputValues:t})}),Z.jsx(Ga,{path:"/showroute",element:Z.jsx(ype,{})}),Z.jsx(Ga,{path:"/homepage",element:Z.jsx(wA,{})}),Z.jsx(Ga,{path:"/signin",element:Z.jsx(oge,{})}),Z.jsx(Ga,{path:"/signup",element:Z.jsx(age,{})}),Z.jsx(Ga,{path:"/landingpage",element:Z.jsx(cge,{})}),Z.jsx(Ga,{path:"/resources",element:Z.jsx(Che,{})}),Z.jsx(Ga,{path:"/account",element:Z.jsx(lge,{children:Z.jsx(sge,{})})})]})})})})}const hge=f5.createRoot(document.getElementById("root"));hge.render(Z.jsx(dge,{}));
